"use strict";var pB=Object.create;var Au=Object.defineProperty;var uB=Object.getOwnPropertyDescriptor;var fB=Object.getOwnPropertyNames;var dB=Object.getPrototypeOf,mB=Object.prototype.hasOwnProperty;var Ke=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),hB=(t,e)=>{for(var r in e)Au(t,r,{get:e[r],enumerable:!0})},rE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of fB(e))!mB.call(t,i)&&i!==r&&Au(t,i,{get:()=>e[i],enumerable:!(n=uB(e,i))||n.enumerable});return t};var gr=(t,e,r)=>(r=t!=null?pB(dB(t)):{},rE(e||!t||!t.__esModule?Au(r,"default",{value:t,enumerable:!0}):r,t)),gB=t=>rE(Au({},"__esModule",{value:!0}),t);var WP=Ke(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.default=void 0;var Kge=Wf.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var $P=Ke($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.default=void 0;var Zge=$f.default="00000000-0000-0000-0000-000000000000"});var jP=Ke(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.default=void 0;var Xge=jf.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var yl=Ke(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.default=void 0;var C4=O4(jP());function O4(t){return t&&t.__esModule?t:{default:t}}function N4(t){return typeof t=="string"&&C4.default.test(t)}var eye=qf.default=N4});var xl=Ke(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.default=void 0;var L4=U4(yl());function U4(t){return t&&t.__esModule?t:{default:t}}function H4(t){if(!(0,L4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var rye=zf.default=H4});var Ei=Ke(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.default=void 0;Tl.unsafeStringify=qP;var V4=B4(yl());function B4(t){return t&&t.__esModule?t:{default:t}}var Ot=[];for(let t=0;t<256;++t)Ot.push((t+256).toString(16).slice(1));function qP(t,e=0){return(Ot[t[e+0]]+Ot[t[e+1]]+Ot[t[e+2]]+Ot[t[e+3]]+"-"+Ot[t[e+4]]+Ot[t[e+5]]+"-"+Ot[t[e+6]]+Ot[t[e+7]]+"-"+Ot[t[e+8]]+Ot[t[e+9]]+"-"+Ot[t[e+10]]+Ot[t[e+11]]+Ot[t[e+12]]+Ot[t[e+13]]+Ot[t[e+14]]+Ot[t[e+15]]).toLowerCase()}function W4(t,e=0){let r=qP(t,e);if(!(0,V4.default)(r))throw TypeError("Stringified UUID is invalid");return r}var iye=Tl.default=W4});var Qf=Ke(sS=>{"use strict";Object.defineProperty(sS,"__esModule",{value:!0});sS.default=q4;var $4=j4(require("node:crypto"));function j4(t){return t&&t.__esModule?t:{default:t}}var Kf=new Uint8Array(256),Gf=Kf.length;function q4(){return Gf>Kf.length-16&&($4.default.randomFillSync(Kf),Gf=0),Kf.slice(Gf,Gf+=16)}});var pS=Ke(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.default=void 0;var z4=K4(Qf()),G4=Ei();function K4(t){return t&&t.__esModule?t:{default:t}}var aS,Zf,cS=0,lS=0;function Q4(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node,a=t.clockseq;if(t._v6||(o||(o=aS),a==null&&(a=Zf)),o==null||a==null){let g=t.random||(t.rng||z4.default)();o==null&&(o=[g[0],g[1],g[2],g[3],g[4],g[5]],!aS&&!t._v6&&(o[0]|=1,aS=o)),a==null&&(a=(g[6]<<8|g[7])&16383,Zf===void 0&&!t._v6&&(Zf=a))}let l=t.msecs!==void 0?t.msecs:Date.now(),p=t.nsecs!==void 0?t.nsecs:lS+1,u=l-cS+(p-lS)/1e4;if(u<0&&t.clockseq===void 0&&(a=a+1&16383),(u<0||l>cS)&&t.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");cS=l,lS=p,Zf=a,l+=122192928e5;let d=((l&268435455)*1e4+p)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=d&255;let m=l/4294967296*1e4&268435455;i[n++]=m>>>8&255,i[n++]=m&255,i[n++]=m>>>24&15|16,i[n++]=m>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,G4.unsafeStringify)(i)}var aye=Yf.default=Q4});var fS=Ke(uS=>{"use strict";Object.defineProperty(uS,"__esModule",{value:!0});uS.default=J4;var Z4=X4(xl()),Y4=Ei();function X4(t){return t&&t.__esModule?t:{default:t}}function J4(t){let e=typeof t=="string"?(0,Z4.default)(t):t,r=e6(e);return typeof t=="string"?(0,Y4.unsafeStringify)(r):r}function e6(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var dS=Ke(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.URL=ns.DNS=void 0;ns.default=a6;var t6=Ei(),r6=n6(xl());function n6(t){return t&&t.__esModule?t:{default:t}}function i6(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var o6=ns.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",s6=ns.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function a6(t,e,r){function n(i,o,a,l){var p;if(typeof i=="string"&&(i=i6(i)),typeof o=="string"&&(o=(0,r6.default)(o)),((p=o)===null||p===void 0?void 0:p.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){l=l||0;for(let d=0;d<16;++d)a[l+d]=u[d];return a}return(0,t6.unsafeStringify)(u)}try{n.name=t}catch{}return n.DNS=o6,n.URL=s6,n}});var zP=Ke(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.default=void 0;var c6=l6(require("node:crypto"));function l6(t){return t&&t.__esModule?t:{default:t}}function p6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),c6.default.createHash("md5").update(t).digest()}var uye=Xf.default=p6});var KP=Ke(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.default=void 0;var u6=GP(dS()),f6=GP(zP());function GP(t){return t&&t.__esModule?t:{default:t}}var d6=(0,u6.default)("v3",48,f6.default),dye=Jf.default=d6});var QP=Ke(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.default=void 0;var m6=h6(require("node:crypto"));function h6(t){return t&&t.__esModule?t:{default:t}}var hye=ed.default={randomUUID:m6.default.randomUUID}});var XP=Ke(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.default=void 0;var ZP=YP(QP()),g6=YP(Qf()),y6=Ei();function YP(t){return t&&t.__esModule?t:{default:t}}function x6(t,e,r){if(ZP.default.randomUUID&&!e&&!t)return ZP.default.randomUUID();t=t||{};let n=t.random||(t.rng||g6.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,y6.unsafeStringify)(n)}var yye=td.default=x6});var JP=Ke(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.default=void 0;var T6=S6(require("node:crypto"));function S6(t){return t&&t.__esModule?t:{default:t}}function v6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),T6.default.createHash("sha1").update(t).digest()}var Tye=rd.default=v6});var tM=Ke(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.default=void 0;var b6=eM(dS()),w6=eM(JP());function eM(t){return t&&t.__esModule?t:{default:t}}var _6=(0,b6.default)("v5",80,w6.default),vye=nd.default=_6});var nM=Ke(mS=>{"use strict";Object.defineProperty(mS,"__esModule",{value:!0});mS.default=P6;var E6=Ei(),R6=rM(pS()),k6=rM(fS());function rM(t){return t&&t.__esModule?t:{default:t}}function P6(t={},e,r=0){let n=(0,R6.default)({...t,_v6:!0},new Uint8Array(16));if(n=(0,k6.default)(n),e){for(let i=0;i<16;i++)e[r+i]=n[i];return e}return(0,E6.unsafeStringify)(n)}});var iM=Ke(hS=>{"use strict";Object.defineProperty(hS,"__esModule",{value:!0});hS.default=I6;var M6=D6(xl()),A6=Ei();function D6(t){return t&&t.__esModule?t:{default:t}}function I6(t){let e=typeof t=="string"?(0,M6.default)(t):t,r=F6(e);return typeof t=="string"?(0,A6.unsafeStringify)(r):r}function F6(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var aM=Ke(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});id.default=void 0;var C6=N6(Qf()),O6=Ei();function N6(t){return t&&t.__esModule?t:{default:t}}var oM=null,sM=null,Dn=0;function L6(t,e,r){t=t||{};let n=e&&r||0,i=e||new Uint8Array(16),o=t.random||(t.rng||C6.default)(),a=t.msecs!==void 0?t.msecs:Date.now(),l=t.seq!==void 0?t.seq:null,p=sM,u=oM;return a>Dn&&t.msecs===void 0&&(Dn=a,l!==null&&(p=null,u=null)),l!==null&&(l>2147483647&&(l=2147483647),p=l>>>19&4095,u=l&524287),(p===null||u===null)&&(p=o[6]&127,p=p<<8|o[7],u=o[8]&63,u=u<<8|o[9],u=u<<5|o[10]>>>3),a+1e4>Dn&&l===null?++u>524287&&(u=0,++p>4095&&(p=0,Dn++)):Dn=a,sM=p,oM=u,i[n++]=Dn/1099511627776&255,i[n++]=Dn/4294967296&255,i[n++]=Dn/16777216&255,i[n++]=Dn/65536&255,i[n++]=Dn/256&255,i[n++]=Dn&255,i[n++]=p>>>4&15|112,i[n++]=p&255,i[n++]=u>>>13&63|128,i[n++]=u>>>5&255,i[n++]=u<<3&255|o[10]&7,i[n++]=o[11],i[n++]=o[12],i[n++]=o[13],i[n++]=o[14],i[n++]=o[15],e||(0,O6.unsafeStringify)(i)}var Eye=id.default=L6});var cM=Ke(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.default=void 0;var U6=H6(yl());function H6(t){return t&&t.__esModule?t:{default:t}}function V6(t){if(!(0,U6.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var kye=od.default=V6});var lM=Ke(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Object.defineProperty(Wt,"MAX",{enumerable:!0,get:function(){return B6.default}});Object.defineProperty(Wt,"NIL",{enumerable:!0,get:function(){return W6.default}});Object.defineProperty(Wt,"parse",{enumerable:!0,get:function(){return $6.default}});Object.defineProperty(Wt,"stringify",{enumerable:!0,get:function(){return j6.default}});Object.defineProperty(Wt,"v1",{enumerable:!0,get:function(){return q6.default}});Object.defineProperty(Wt,"v1ToV6",{enumerable:!0,get:function(){return z6.default}});Object.defineProperty(Wt,"v3",{enumerable:!0,get:function(){return G6.default}});Object.defineProperty(Wt,"v4",{enumerable:!0,get:function(){return K6.default}});Object.defineProperty(Wt,"v5",{enumerable:!0,get:function(){return Q6.default}});Object.defineProperty(Wt,"v6",{enumerable:!0,get:function(){return Z6.default}});Object.defineProperty(Wt,"v6ToV1",{enumerable:!0,get:function(){return Y6.default}});Object.defineProperty(Wt,"v7",{enumerable:!0,get:function(){return X6.default}});Object.defineProperty(Wt,"validate",{enumerable:!0,get:function(){return J6.default}});Object.defineProperty(Wt,"version",{enumerable:!0,get:function(){return e9.default}});var B6=br(WP()),W6=br($P()),$6=br(xl()),j6=br(Ei()),q6=br(pS()),z6=br(fS()),G6=br(KP()),K6=br(XP()),Q6=br(tM()),Z6=br(nM()),Y6=br(iM()),X6=br(aM()),J6=br(yl()),e9=br(cM());function br(t){return t&&t.__esModule?t:{default:t}}});var dM=Ke((fM,ad)=>{(function(t,e){typeof ad=="object"&&ad.exports?ad.exports=e():t.nearley=e()})(fM,function(){function t(p,u,d){return this.id=++t.highestId,this.name=p,this.symbols=u,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(p){var u=typeof p>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,p).map(l).join(" ")+" \u25CF "+this.symbols.slice(p).map(l).join(" ");return this.name+" \u2192 "+u};function e(p,u,d,m){this.rule=p,this.dot=u,this.reference=d,this.data=[],this.wantedBy=m,this.isComplete=this.dot===p.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(p){var u=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return u.left=this,u.right=p,u.isComplete&&(u.data=u.build(),u.right=void 0),u},e.prototype.build=function(){var p=[],u=this;do p.push(u.right.data),u=u.left;while(u.left);return p.reverse(),p},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(p,u){this.grammar=p,this.index=u,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(p){for(var u=this.states,d=this.wants,m=this.completed,g=0;g<u.length;g++){var x=u[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var b=x.wantedBy,v=b.length;v--;){var F=b[v];this.complete(F,x)}if(x.reference===this.index){var I=x.rule.name;(this.completed[I]=this.completed[I]||[]).push(x)}}}else{var I=x.rule.symbols[x.dot];if(typeof I!="string"){this.scannable.push(x);continue}if(d[I]){if(d[I].push(x),m.hasOwnProperty(I))for(var U=m[I],v=0;v<U.length;v++){var K=U[v];this.complete(x,K)}}else d[I]=[x],this.predict(I)}}},r.prototype.predict=function(p){for(var u=this.grammar.byName[p]||[],d=0;d<u.length;d++){var m=u[d],g=this.wants[p],x=new e(m,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(p,u){var d=p.nextState(u);this.states.push(d)};function n(p,u){this.rules=p,this.start=u||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(m){d.hasOwnProperty(m.name)||(d[m.name]=[]),d[m.name].push(m)})}n.fromCompiled=function(m,u){var d=m.Lexer;m.ParserStart&&(u=m.ParserStart,m=m.ParserRules);var m=m.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(m,u);return g.lexer=d,g};function i(){this.reset("")}i.prototype.reset=function(p,u){this.buffer=p,this.index=0,this.line=u?u.line:1,this.lastLineBreak=u?-u.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var p=this.buffer[this.index++];return p===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:p}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(p,u){var d=this.buffer;if(typeof d=="string"){var m=d.split(`
`).slice(Math.max(0,this.line-5),this.line),g=d.indexOf(`
`,this.index);g===-1&&(g=d.length);var x=this.index-this.lastLineBreak,b=String(this.line).length;return u+=" at line "+this.line+" col "+x+`:

`,u+=m.map(function(F,I){return v(this.line-m.length+I+1,b)+" "+F},this).join(`
`),u+=`
`+v("",b+x)+`^
`,u}else return u+" at index "+(this.index-1);function v(F,I){var U=String(F);return Array(I-U.length+1).join(" ")+U}};function o(p,u,d){if(p instanceof n)var m=p,d=u;else var m=n.fromCompiled(p,u);this.grammar=m,this.options={keepHistory:!1,lexer:m.lexer||new i};for(var g in d||{})this.options[g]=d[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(m,0),b=this.table=[x];x.wants[m.start]=[],x.predict(m.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(p){var u=this.lexer;u.reset(p,this.lexerState);for(var d;;){try{if(d=u.next(),!d)break}catch(ae){var b=new r(this.grammar,this.current+1);this.table.push(b);var m=new Error(this.reportLexerError(ae));throw m.offset=this.current,m.token=ae.token,m}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,b=new r(this.grammar,x);this.table.push(b);for(var v=d.text!==void 0?d.text:d.value,F=u.constructor===i?d.value:u.transform?.(d)??d,I=g.scannable,U=I.length;U--;){var K=I[U],ne=K.rule.symbols[K.dot];if(ne.test?ne.test(F):ne.type?ne.type===d.type:ne.literal===v){var ie=K.nextState({data:F,token:d,isToken:!0,reference:x-1});b.states.push(ie)}}if(b.process(),b.states.length===0){var m=new Error(this.reportError(d));throw m.offset=this.current,m.token=d,m}this.options.keepHistory&&(g.lexerState=u.save()),this.current++}return g&&(this.lexerState=u.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(p){var u,d,m=p.token;return m?(u="input "+JSON.stringify(m.text[0])+" (lexer error)",d=this.lexer.formatError(m,"Syntax error")):(u="input (lexer error)",d=p.message),this.reportErrorCommon(d,u)},o.prototype.reportError=function(p){var u=(p.type?p.type+" token: ":"")+JSON.stringify(p.value!==void 0?p.value:p),d=this.lexer.formatError(p,"Syntax error");return this.reportErrorCommon(d,u)},o.prototype.reportErrorCommon=function(p,u){var d=[];d.push(p);var m=this.table.length-2,g=this.table[m],x=g.states.filter(function(v){var F=v.rule.symbols[v.dot];return F&&typeof F!="string"});if(x.length===0)d.push("Unexpected "+u+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,d);else{d.push("Unexpected "+u+`. Instead, I was expecting to see one of the following:
`);var b=x.map(function(v){return this.buildFirstStateStack(v,[])||[v]},this);b.forEach(function(v){var F=v[0],I=F.rule.symbols[F.dot],U=this.getSymbolDisplay(I);d.push("A "+U+" based on:"),this.displayStateStack(v,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(p,u){for(var d,m=0,g=0;g<p.length;g++){var x=p[g],b=x.rule.toString(x.dot);b===d?m++:(m>0&&u.push("    ^ "+m+" more lines identical to this"),m=0,u.push("    "+b)),d=b}},o.prototype.getSymbolDisplay=function(p){return a(p)},o.prototype.buildFirstStateStack=function(p,u){if(u.indexOf(p)!==-1)return null;if(p.wantedBy.length===0)return[p];var d=p.wantedBy[0],m=[p].concat(u),g=this.buildFirstStateStack(d,m);return g===null?null:[p].concat(g)},o.prototype.save=function(){var p=this.table[this.current];return p.lexerState=this.lexerState,p},o.prototype.restore=function(p){var u=p.index;this.current=u,this.table[u]=p,this.table.splice(u+1),this.lexerState=p.lexerState,this.results=this.finish()},o.prototype.rewind=function(p){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[p])},o.prototype.finish=function(){var p=[],u=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(m){m.rule.name===u&&m.dot===m.rule.symbols.length&&m.reference===0&&m.data!==o.fail&&p.push(m)}),p.map(function(m){return m.data})};function a(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return"character matching "+p;if(p.type)return p.type+" token";if(p.test)return"token matching "+String(p.test);throw new Error("Unknown symbol type: "+p)}}function l(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return p.toString();if(p.type)return"%"+p.type;if(p.test)return"<"+String(p.test)+">";throw new Error("Unknown symbol type: "+p)}}return{Parser:o,Grammar:n,Rule:t}})});var TM=Ke((xM,pd)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof pd=="object"&&pd.exports?pd.exports=e():t.moo=e()})(xM,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(N){return N&&e.call(N)==="[object RegExp]"}function i(N){return N&&typeof N=="object"&&!n(N)&&!Array.isArray(N)}function o(N){return N.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function a(N){var O=new RegExp("|"+N);return O.exec("").length-1}function l(N){return"("+N+")"}function p(N){if(!N.length)return"(?!)";var O=N.map(function(D){return"(?:"+D+")"}).join("|");return"(?:"+O+")"}function u(N){if(typeof N=="string")return"(?:"+o(N)+")";if(n(N)){if(N.ignoreCase)throw new Error("RegExp /i flag not allowed");if(N.global)throw new Error("RegExp /g flag is implied");if(N.sticky)throw new Error("RegExp /y flag is implied");if(N.multiline)throw new Error("RegExp /m flag is implied");return N.source}else throw new Error("Not a pattern: "+N)}function d(N,O){return N.length>O?N:Array(O-N.length+1).join(" ")+N}function m(N,O){for(var D=N.length,$=0;;){var z=N.lastIndexOf(`
`,D-1);if(z===-1||($++,D=z,$===O)||D===0)break}var Q=$<O?0:D+1;return N.substring(Q).split(`
`)}function g(N){for(var O=Object.getOwnPropertyNames(N),D=[],$=0;$<O.length;$++){var z=O[$],Q=N[z],Z=[].concat(Q);if(z==="include"){for(var te=0;te<Z.length;te++)D.push({include:Z[te]});continue}var he=[];Z.forEach(function(re){i(re)?(he.length&&D.push(b(z,he)),D.push(b(z,re)),he=[]):he.push(re)}),he.length&&D.push(b(z,he))}return D}function x(N){for(var O=[],D=0;D<N.length;D++){var $=N[D];if($.include){for(var z=[].concat($.include),Q=0;Q<z.length;Q++)O.push({include:z[Q]});continue}if(!$.type)throw new Error("Rule has no type: "+JSON.stringify($));O.push(b($.type,$))}return O}function b(N,O){if(i(O)||(O={match:O}),O.include)throw new Error("Matching rules cannot also include states");var D={defaultType:N,lineBreaks:!!O.error||!!O.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var $ in O)t.call(O,$)&&(D[$]=O[$]);if(typeof D.type=="string"&&N!==D.type)throw new Error("Type transform cannot be a string (type '"+D.type+"' for token '"+N+"')");var z=D.match;return D.match=Array.isArray(z)?z:z?[z]:[],D.match.sort(function(Q,Z){return n(Q)&&n(Z)?0:n(Z)?-1:n(Q)?1:Z.length-Q.length}),D}function v(N){return Array.isArray(N)?x(N):g(N)}var F=b("error",{lineBreaks:!0,shouldThrow:!0});function I(N,O){for(var D=null,$=Object.create(null),z=!0,Q=null,Z=[],te=[],he=0;he<N.length;he++)N[he].fallback&&(z=!1);for(var he=0;he<N.length;he++){var re=N[he];if(re.include)throw new Error("Inheritance is not allowed in stateless lexers");if(re.error||re.fallback){if(D)throw!re.fallback==!D.fallback?new Error("Multiple "+(re.fallback?"fallback":"error")+" rules not allowed (for token '"+re.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+re.defaultType+"')");D=re}var Re=re.match.slice();if(z)for(;Re.length&&typeof Re[0]=="string"&&Re[0].length===1;){var pr=Re.shift();$[pr.charCodeAt(0)]=re}if(re.pop||re.push||re.next){if(!O)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+re.defaultType+"')");if(re.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+re.defaultType+"')")}if(Re.length!==0){z=!1,Z.push(re);for(var ci=0;ci<Re.length;ci++){var ur=Re[ci];if(n(ur)){if(Q===null)Q=ur.unicode;else if(Q!==ur.unicode&&re.fallback===!1)throw new Error("If one rule is /u then all must be")}}var vn=p(Re.map(u)),Pr=new RegExp(vn);if(Pr.test(""))throw new Error("RegExp matches empty string: "+Pr);var bn=a(vn);if(bn>0)throw new Error("RegExp has capture groups: "+Pr+`
Use (?: \u2026 ) instead`);if(!re.lineBreaks&&Pr.test(`
`))throw new Error("Rule should declare lineBreaks: "+Pr);te.push(l(vn))}}var Qr=D&&D.fallback,Do=r&&!Qr?"ym":"gm",li=r||Qr?"":"|";Q===!0&&(Do+="u");var Ms=new RegExp(p(te)+li,Do);return{regexp:Ms,groups:Z,fast:$,error:D||F}}function U(N){var O=I(v(N));return new ae({start:O},"start")}function K(N,O,D){var $=N&&(N.push||N.next);if($&&!D[$])throw new Error("Missing state '"+$+"' (in token '"+N.defaultType+"' of state '"+O+"')");if(N&&N.pop&&+N.pop!=1)throw new Error("pop must be 1 (in token '"+N.defaultType+"' of state '"+O+"')")}function ne(N,O){var D=N.$all?v(N.$all):[];delete N.$all;var $=Object.getOwnPropertyNames(N);O||(O=$[0]);for(var z=Object.create(null),Q=0;Q<$.length;Q++){var Z=$[Q];z[Z]=v(N[Z]).concat(D)}for(var Q=0;Q<$.length;Q++)for(var Z=$[Q],te=z[Z],he=Object.create(null),re=0;re<te.length;re++){var Re=te[re];if(Re.include){var pr=[re,1];if(Re.include!==Z&&!he[Re.include]){he[Re.include]=!0;var ci=z[Re.include];if(!ci)throw new Error("Cannot include nonexistent state '"+Re.include+"' (in state '"+Z+"')");for(var ur=0;ur<ci.length;ur++){var vn=ci[ur];te.indexOf(vn)===-1&&pr.push(vn)}}te.splice.apply(te,pr),re--}}for(var Pr=Object.create(null),Q=0;Q<$.length;Q++){var Z=$[Q];Pr[Z]=I(z[Z],!0)}for(var Q=0;Q<$.length;Q++){for(var bn=$[Q],Qr=Pr[bn],Do=Qr.groups,re=0;re<Do.length;re++)K(Do[re],bn,Pr);for(var li=Object.getOwnPropertyNames(Qr.fast),re=0;re<li.length;re++)K(Qr.fast[li[re]],bn,Pr)}return new ae(Pr,O)}function ie(N){for(var O=typeof Map<"u",D=O?new Map:Object.create(null),$=Object.getOwnPropertyNames(N),z=0;z<$.length;z++){var Q=$[z],Z=N[Q],te=Array.isArray(Z)?Z:[Z];te.forEach(function(he){if(typeof he!="string")throw new Error("keyword must be string (in keyword '"+Q+"')");O?D.set(he,Q):D[he]=Q})}return function(he){return O?D.get(he):D[he]}}var ae=function(N,O){this.startState=O,this.states=N,this.buffer="",this.stack=[],this.reset()};ae.prototype.reset=function(N,O){return this.buffer=N||"",this.index=0,this.line=O?O.line:1,this.col=O?O.col:1,this.queuedToken=O?O.queuedToken:null,this.queuedText=O?O.queuedText:"",this.queuedThrow=O?O.queuedThrow:null,this.setState(O?O.state:this.startState),this.stack=O&&O.stack?O.stack.slice():[],this},ae.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},ae.prototype.setState=function(N){if(!(!N||this.state===N)){this.state=N;var O=this.states[N];this.groups=O.groups,this.error=O.error,this.re=O.regexp,this.fast=O.fast}},ae.prototype.popState=function(){this.setState(this.stack.pop())},ae.prototype.pushState=function(N){this.stack.push(this.state),this.setState(N)};var it=r?function(N,O){return N.exec(O)}:function(N,O){var D=N.exec(O);return D[0].length===0?null:D};ae.prototype._getGroup=function(N){for(var O=this.groups.length,D=0;D<O;D++)if(N[D+1]!==void 0)return this.groups[D];throw new Error("Cannot find token type for matched text")};function Dt(){return this.value}if(ae.prototype.next=function(){var N=this.index;if(this.queuedGroup){var O=this._token(this.queuedGroup,this.queuedText,N);return this.queuedGroup=null,this.queuedText="",O}var D=this.buffer;if(N!==D.length){var Z=this.fast[D.charCodeAt(N)];if(Z)return this._token(Z,D.charAt(N),N);var $=this.re;$.lastIndex=N;var z=it($,D),Q=this.error;if(z==null)return this._token(Q,D.slice(N,D.length),N);var Z=this._getGroup(z),te=z[0];return Q.fallback&&z.index!==N?(this.queuedGroup=Z,this.queuedText=te,this._token(Q,D.slice(N,z.index),N)):this._token(Z,te,N)}},ae.prototype._token=function(N,O,D){var $=0;if(N.lineBreaks){var z=/\n/g,Q=1;if(O===`
`)$=1;else for(;z.exec(O);)$++,Q=z.lastIndex}var Z={type:typeof N.type=="function"&&N.type(O)||N.defaultType,value:typeof N.value=="function"?N.value(O):O,text:O,toString:Dt,offset:D,lineBreaks:$,line:this.line,col:this.col},te=O.length;if(this.index+=te,this.line+=$,$!==0?this.col=te-Q+1:this.col+=te,N.shouldThrow){var he=new Error(this.formatError(Z,"invalid syntax"));throw he}return N.pop?this.popState():N.push?this.pushState(N.push):N.next&&this.setState(N.next),Z},typeof Symbol<"u"&&Symbol.iterator){var at=function(N){this.lexer=N};at.prototype.next=function(){var N=this.lexer.next();return{value:N,done:!N}},at.prototype[Symbol.iterator]=function(){return this},ae.prototype[Symbol.iterator]=function(){return new at(this)}}return ae.prototype.formatError=function(N,O){if(N==null)var D=this.buffer.slice(this.index),N={text:D,offset:this.index,lineBreaks:D.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var $=2,z=Math.max(N.line-$,1),Q=N.line+$,Z=String(Q).length,te=m(this.buffer,this.line-N.line+$+1).slice(0,5),he=[];he.push(O+" at line "+N.line+" col "+N.col+":"),he.push("");for(var re=0;re<te.length;re++){var Re=te[re],pr=z+re;he.push(d(String(pr),Z)+"  "+Re),pr===N.line&&he.push(d("",Z+N.col+1)+"^")}return he.join(`
`)},ae.prototype.clone=function(){return new ae(this.states,this.state)},ae.prototype.has=function(N){return!0},{compile:U,states:ne,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ie}})});var Rl=Ke((Qn,fA)=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});function In(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var v5=typeof process=="object"&&process.env.NODE_ENV==="production";function un(t,e){if(!t)throw v5?new Error("Invariant failed"):new Error(e())}Qn.invariant=un;var HS=Object.prototype.hasOwnProperty,b5=Array.prototype.splice,w5=Object.prototype.toString;function ss(t){return w5.call(t).slice(8,-1)}var Vd=Object.assign||function(t,e){return VS(e).forEach(function(r){HS.call(e,r)&&(t[r]=e[r])}),t},VS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function mo(t){return Array.isArray(t)?Vd(t.constructor(t.length),t):ss(t)==="Map"?new Map(t):ss(t)==="Set"?new Set(t):t&&typeof t=="object"?Vd(Object.create(Object.getPrototypeOf(t)),t):t}var pA=function(){function t(){this.commands=Vd({},_5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||un(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),un(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return VS(i).forEach(function(a){if(HS.call(n.commands,a)){var l=e===o;o=n.commands[a](i[a],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var p=ss(e)==="Map"?n.update(e.get(a),i[a]):n.update(e[a],i[a]),u=ss(o)==="Map"?o.get(a):o[a];(!n.isEquals(p,u)||typeof p>"u"&&!HS.call(e,a))&&(o===e&&(o=mo(e)),ss(o)==="Map"?o.set(a,p):o[a]=p)}}),o},t}();Qn.Context=pA;var _5={$push:function(t,e,r){return cA(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return cA(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return E5(e,r),t.forEach(function(i){uA(i),e===n&&i.length&&(e=mo(n)),b5.apply(e,i)}),e},$set:function(t,e,r){return k5(r),t},$toggle:function(t,e){El(t,"$toggle");var r=t.length?mo(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return El(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=mo(n)),delete e[i])}),e},$add:function(t,e,r,n){return lA(e,"$add"),El(t,"$add"),ss(e)==="Map"?t.forEach(function(i){var o=i[0],a=i[1];e===n&&e.get(o)!==a&&(e=mo(n)),e.set(o,a)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=mo(n)),e.add(i)}),e},$remove:function(t,e,r,n){return lA(e,"$remove"),El(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=mo(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return P5(e,t),VS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=mo(n)),e[i]=t[i])}),e},$apply:function(t,e){return R5(t),t(e)}},BS=new pA;Qn.isEquals=BS.update.isEquals;Qn.extend=BS.extend;Qn.default=BS.update;Qn.default.default=fA.exports=Vd(Qn.default,Qn);function cA(t,e,r){un(Array.isArray(t),function(){return"update(): expected target of "+In(r)+" to be an array; got "+In(t)+"."}),El(e[r],r)}function El(t,e){un(Array.isArray(t),function(){return"update(): expected spec of "+In(e)+" to be an array; got "+In(t)+". Did you forget to wrap your parameter in an array?"})}function E5(t,e){un(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+In(t)}),uA(e.$splice)}function uA(t){un(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+In(t)+". Did you forget to wrap your parameters in an array?"})}function R5(t){un(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+In(t)+"."})}function k5(t){un(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function P5(t,e){un(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+In(e)}),un(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+In(t)})}function lA(t,e){var r=ss(t);un(r==="Map"||r==="Set",function(){return"update(): "+In(e)+" expects a target of type Set or Map; got "+In(r)})}});var rb=Ke((cc,fp)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",l=500,p="__lodash_placeholder__",u=1,d=2,m=4,g=1,x=2,b=1,v=2,F=4,I=8,U=16,K=32,ne=64,ie=128,ae=256,it=512,Dt=30,at="...",N=800,O=16,D=1,$=2,z=3,Q=1/0,Z=9007199254740991,te=17976931348623157e292,he=NaN,re=4294967295,Re=re-1,pr=re>>>1,ci=[["ary",ie],["bind",b],["bindKey",v],["curry",I],["curryRight",U],["flip",it],["partial",K],["partialRight",ne],["rearg",ae]],ur="[object Arguments]",vn="[object Array]",Pr="[object AsyncFunction]",bn="[object Boolean]",Qr="[object Date]",Do="[object DOMException]",li="[object Error]",Ms="[object Function]",Ew="[object GeneratorFunction]",wn="[object Map]",_c="[object Number]",kC="[object Null]",pi="[object Object]",Rw="[object Promise]",PC="[object Proxy]",Ec="[object RegExp]",_n="[object Set]",Rc="[object String]",Bp="[object Symbol]",MC="[object Undefined]",kc="[object WeakMap]",AC="[object WeakSet]",Pc="[object ArrayBuffer]",As="[object DataView]",Ly="[object Float32Array]",Uy="[object Float64Array]",Hy="[object Int8Array]",Vy="[object Int16Array]",By="[object Int32Array]",Wy="[object Uint8Array]",$y="[object Uint8ClampedArray]",jy="[object Uint16Array]",qy="[object Uint32Array]",DC=/\b__p \+= '';/g,IC=/\b(__p \+=) '' \+/g,FC=/(__e\(.*?\)|\b__t\)) \+\n'';/g,kw=/&(?:amp|lt|gt|quot|#39);/g,Pw=/[&<>"']/g,CC=RegExp(kw.source),OC=RegExp(Pw.source),NC=/<%-([\s\S]+?)%>/g,LC=/<%([\s\S]+?)%>/g,Mw=/<%=([\s\S]+?)%>/g,UC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,HC=/^\w*$/,VC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zy=/[\\^$.*+?()[\]{}|]/g,BC=RegExp(zy.source),Gy=/^\s+/,WC=/\s/,$C=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jC=/\{\n\/\* \[wrapped with (.+)\] \*/,qC=/,? & /,zC=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,GC=/[()=,{}\[\]\/\s]/,KC=/\\(\\)?/g,QC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Aw=/\w*$/,ZC=/^[-+]0x[0-9a-f]+$/i,YC=/^0b[01]+$/i,XC=/^\[object .+?Constructor\]$/,JC=/^0o[0-7]+$/i,eO=/^(?:0|[1-9]\d*)$/,tO=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wp=/($^)/,rO=/['\n\r\u2028\u2029\\]/g,$p="\\ud800-\\udfff",nO="\\u0300-\\u036f",iO="\\ufe20-\\ufe2f",oO="\\u20d0-\\u20ff",Dw=nO+iO+oO,Iw="\\u2700-\\u27bf",Fw="a-z\\xdf-\\xf6\\xf8-\\xff",sO="\\xac\\xb1\\xd7\\xf7",aO="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",cO="\\u2000-\\u206f",lO=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cw="A-Z\\xc0-\\xd6\\xd8-\\xde",Ow="\\ufe0e\\ufe0f",Nw=sO+aO+cO+lO,Ky="['\u2019]",pO="["+$p+"]",Lw="["+Nw+"]",jp="["+Dw+"]",Uw="\\d+",uO="["+Iw+"]",Hw="["+Fw+"]",Vw="[^"+$p+Nw+Uw+Iw+Fw+Cw+"]",Qy="\\ud83c[\\udffb-\\udfff]",fO="(?:"+jp+"|"+Qy+")",Bw="[^"+$p+"]",Zy="(?:\\ud83c[\\udde6-\\uddff]){2}",Yy="[\\ud800-\\udbff][\\udc00-\\udfff]",Ds="["+Cw+"]",Ww="\\u200d",$w="(?:"+Hw+"|"+Vw+")",dO="(?:"+Ds+"|"+Vw+")",jw="(?:"+Ky+"(?:d|ll|m|re|s|t|ve))?",qw="(?:"+Ky+"(?:D|LL|M|RE|S|T|VE))?",zw=fO+"?",Gw="["+Ow+"]?",mO="(?:"+Ww+"(?:"+[Bw,Zy,Yy].join("|")+")"+Gw+zw+")*",hO="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gO="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Kw=Gw+zw+mO,yO="(?:"+[uO,Zy,Yy].join("|")+")"+Kw,xO="(?:"+[Bw+jp+"?",jp,Zy,Yy,pO].join("|")+")",TO=RegExp(Ky,"g"),SO=RegExp(jp,"g"),Xy=RegExp(Qy+"(?="+Qy+")|"+xO+Kw,"g"),vO=RegExp([Ds+"?"+Hw+"+"+jw+"(?="+[Lw,Ds,"$"].join("|")+")",dO+"+"+qw+"(?="+[Lw,Ds+$w,"$"].join("|")+")",Ds+"?"+$w+"+"+jw,Ds+"+"+qw,gO,hO,Uw,yO].join("|"),"g"),bO=RegExp("["+Ww+$p+Dw+Ow+"]"),wO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_O=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],EO=-1,Ye={};Ye[Ly]=Ye[Uy]=Ye[Hy]=Ye[Vy]=Ye[By]=Ye[Wy]=Ye[$y]=Ye[jy]=Ye[qy]=!0,Ye[ur]=Ye[vn]=Ye[Pc]=Ye[bn]=Ye[As]=Ye[Qr]=Ye[li]=Ye[Ms]=Ye[wn]=Ye[_c]=Ye[pi]=Ye[Ec]=Ye[_n]=Ye[Rc]=Ye[kc]=!1;var Qe={};Qe[ur]=Qe[vn]=Qe[Pc]=Qe[As]=Qe[bn]=Qe[Qr]=Qe[Ly]=Qe[Uy]=Qe[Hy]=Qe[Vy]=Qe[By]=Qe[wn]=Qe[_c]=Qe[pi]=Qe[Ec]=Qe[_n]=Qe[Rc]=Qe[Bp]=Qe[Wy]=Qe[$y]=Qe[jy]=Qe[qy]=!0,Qe[li]=Qe[Ms]=Qe[kc]=!1;var RO={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},kO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},PO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},MO={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},AO=parseFloat,DO=parseInt,Qw=typeof global=="object"&&global&&global.Object===Object&&global,IO=typeof self=="object"&&self&&self.Object===Object&&self,Et=Qw||IO||Function("return this")(),Jy=typeof cc=="object"&&cc&&!cc.nodeType&&cc,Io=Jy&&typeof fp=="object"&&fp&&!fp.nodeType&&fp,Zw=Io&&Io.exports===Jy,ex=Zw&&Qw.process,Zr=function(){try{var k=Io&&Io.require&&Io.require("util").types;return k||ex&&ex.binding&&ex.binding("util")}catch{}}(),Yw=Zr&&Zr.isArrayBuffer,Xw=Zr&&Zr.isDate,Jw=Zr&&Zr.isMap,e_=Zr&&Zr.isRegExp,t_=Zr&&Zr.isSet,r_=Zr&&Zr.isTypedArray;function Mr(k,H,L){switch(L.length){case 0:return k.call(H);case 1:return k.call(H,L[0]);case 2:return k.call(H,L[0],L[1]);case 3:return k.call(H,L[0],L[1],L[2])}return k.apply(H,L)}function FO(k,H,L,ee){for(var ye=-1,Ve=k==null?0:k.length;++ye<Ve;){var Tt=k[ye];H(ee,Tt,L(Tt),k)}return ee}function Yr(k,H){for(var L=-1,ee=k==null?0:k.length;++L<ee&&H(k[L],L,k)!==!1;);return k}function CO(k,H){for(var L=k==null?0:k.length;L--&&H(k[L],L,k)!==!1;);return k}function n_(k,H){for(var L=-1,ee=k==null?0:k.length;++L<ee;)if(!H(k[L],L,k))return!1;return!0}function Ui(k,H){for(var L=-1,ee=k==null?0:k.length,ye=0,Ve=[];++L<ee;){var Tt=k[L];H(Tt,L,k)&&(Ve[ye++]=Tt)}return Ve}function qp(k,H){var L=k==null?0:k.length;return!!L&&Is(k,H,0)>-1}function tx(k,H,L){for(var ee=-1,ye=k==null?0:k.length;++ee<ye;)if(L(H,k[ee]))return!0;return!1}function et(k,H){for(var L=-1,ee=k==null?0:k.length,ye=Array(ee);++L<ee;)ye[L]=H(k[L],L,k);return ye}function Hi(k,H){for(var L=-1,ee=H.length,ye=k.length;++L<ee;)k[ye+L]=H[L];return k}function rx(k,H,L,ee){var ye=-1,Ve=k==null?0:k.length;for(ee&&Ve&&(L=k[++ye]);++ye<Ve;)L=H(L,k[ye],ye,k);return L}function OO(k,H,L,ee){var ye=k==null?0:k.length;for(ee&&ye&&(L=k[--ye]);ye--;)L=H(L,k[ye],ye,k);return L}function nx(k,H){for(var L=-1,ee=k==null?0:k.length;++L<ee;)if(H(k[L],L,k))return!0;return!1}var NO=ix("length");function LO(k){return k.split("")}function UO(k){return k.match(zC)||[]}function i_(k,H,L){var ee;return L(k,function(ye,Ve,Tt){if(H(ye,Ve,Tt))return ee=Ve,!1}),ee}function zp(k,H,L,ee){for(var ye=k.length,Ve=L+(ee?1:-1);ee?Ve--:++Ve<ye;)if(H(k[Ve],Ve,k))return Ve;return-1}function Is(k,H,L){return H===H?ZO(k,H,L):zp(k,o_,L)}function HO(k,H,L,ee){for(var ye=L-1,Ve=k.length;++ye<Ve;)if(ee(k[ye],H))return ye;return-1}function o_(k){return k!==k}function s_(k,H){var L=k==null?0:k.length;return L?sx(k,H)/L:he}function ix(k){return function(H){return H==null?t:H[k]}}function ox(k){return function(H){return k==null?t:k[H]}}function a_(k,H,L,ee,ye){return ye(k,function(Ve,Tt,Ge){L=ee?(ee=!1,Ve):H(L,Ve,Tt,Ge)}),L}function VO(k,H){var L=k.length;for(k.sort(H);L--;)k[L]=k[L].value;return k}function sx(k,H){for(var L,ee=-1,ye=k.length;++ee<ye;){var Ve=H(k[ee]);Ve!==t&&(L=L===t?Ve:L+Ve)}return L}function ax(k,H){for(var L=-1,ee=Array(k);++L<k;)ee[L]=H(L);return ee}function BO(k,H){return et(H,function(L){return[L,k[L]]})}function c_(k){return k&&k.slice(0,f_(k)+1).replace(Gy,"")}function Ar(k){return function(H){return k(H)}}function cx(k,H){return et(H,function(L){return k[L]})}function Mc(k,H){return k.has(H)}function l_(k,H){for(var L=-1,ee=k.length;++L<ee&&Is(H,k[L],0)>-1;);return L}function p_(k,H){for(var L=k.length;L--&&Is(H,k[L],0)>-1;);return L}function WO(k,H){for(var L=k.length,ee=0;L--;)k[L]===H&&++ee;return ee}var $O=ox(RO),jO=ox(kO);function qO(k){return"\\"+MO[k]}function zO(k,H){return k==null?t:k[H]}function Fs(k){return bO.test(k)}function GO(k){return wO.test(k)}function KO(k){for(var H,L=[];!(H=k.next()).done;)L.push(H.value);return L}function lx(k){var H=-1,L=Array(k.size);return k.forEach(function(ee,ye){L[++H]=[ye,ee]}),L}function u_(k,H){return function(L){return k(H(L))}}function Vi(k,H){for(var L=-1,ee=k.length,ye=0,Ve=[];++L<ee;){var Tt=k[L];(Tt===H||Tt===p)&&(k[L]=p,Ve[ye++]=L)}return Ve}function Gp(k){var H=-1,L=Array(k.size);return k.forEach(function(ee){L[++H]=ee}),L}function QO(k){var H=-1,L=Array(k.size);return k.forEach(function(ee){L[++H]=[ee,ee]}),L}function ZO(k,H,L){for(var ee=L-1,ye=k.length;++ee<ye;)if(k[ee]===H)return ee;return-1}function YO(k,H,L){for(var ee=L+1;ee--;)if(k[ee]===H)return ee;return ee}function Cs(k){return Fs(k)?JO(k):NO(k)}function En(k){return Fs(k)?eN(k):LO(k)}function f_(k){for(var H=k.length;H--&&WC.test(k.charAt(H)););return H}var XO=ox(PO);function JO(k){for(var H=Xy.lastIndex=0;Xy.test(k);)++H;return H}function eN(k){return k.match(Xy)||[]}function tN(k){return k.match(vO)||[]}var rN=function k(H){H=H==null?Et:Bi.defaults(Et.Object(),H,Bi.pick(Et,_O));var L=H.Array,ee=H.Date,ye=H.Error,Ve=H.Function,Tt=H.Math,Ge=H.Object,px=H.RegExp,nN=H.String,Xr=H.TypeError,Kp=L.prototype,iN=Ve.prototype,Os=Ge.prototype,Qp=H["__core-js_shared__"],Zp=iN.toString,je=Os.hasOwnProperty,oN=0,d_=function(){var s=/[^.]+$/.exec(Qp&&Qp.keys&&Qp.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Yp=Os.toString,sN=Zp.call(Ge),aN=Et._,cN=px("^"+Zp.call(je).replace(zy,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xp=Zw?H.Buffer:t,Wi=H.Symbol,Jp=H.Uint8Array,m_=Xp?Xp.allocUnsafe:t,eu=u_(Ge.getPrototypeOf,Ge),h_=Ge.create,g_=Os.propertyIsEnumerable,tu=Kp.splice,y_=Wi?Wi.isConcatSpreadable:t,Ac=Wi?Wi.iterator:t,Fo=Wi?Wi.toStringTag:t,ru=function(){try{var s=Uo(Ge,"defineProperty");return s({},"",{}),s}catch{}}(),lN=H.clearTimeout!==Et.clearTimeout&&H.clearTimeout,pN=ee&&ee.now!==Et.Date.now&&ee.now,uN=H.setTimeout!==Et.setTimeout&&H.setTimeout,nu=Tt.ceil,iu=Tt.floor,ux=Ge.getOwnPropertySymbols,fN=Xp?Xp.isBuffer:t,x_=H.isFinite,dN=Kp.join,mN=u_(Ge.keys,Ge),St=Tt.max,Ut=Tt.min,hN=ee.now,gN=H.parseInt,T_=Tt.random,yN=Kp.reverse,fx=Uo(H,"DataView"),Dc=Uo(H,"Map"),dx=Uo(H,"Promise"),Ns=Uo(H,"Set"),Ic=Uo(H,"WeakMap"),Fc=Uo(Ge,"create"),ou=Ic&&new Ic,Ls={},xN=Ho(fx),TN=Ho(Dc),SN=Ho(dx),vN=Ho(Ns),bN=Ho(Ic),su=Wi?Wi.prototype:t,Cc=su?su.valueOf:t,S_=su?su.toString:t;function T(s){if(ct(s)&&!xe(s)&&!(s instanceof Ae)){if(s instanceof Jr)return s;if(je.call(s,"__wrapped__"))return v0(s)}return new Jr(s)}var Us=function(){function s(){}return function(c){if(!ot(c))return{};if(h_)return h_(c);s.prototype=c;var f=new s;return s.prototype=t,f}}();function au(){}function Jr(s,c){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:NC,evaluate:LC,interpolate:Mw,variable:"",imports:{_:T}},T.prototype=au.prototype,T.prototype.constructor=T,Jr.prototype=Us(au.prototype),Jr.prototype.constructor=Jr;function Ae(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function wN(){var s=new Ae(this.__wrapped__);return s.__actions__=fr(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=fr(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=fr(this.__views__),s}function _N(){if(this.__filtered__){var s=new Ae(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function EN(){var s=this.__wrapped__.value(),c=this.__dir__,f=xe(s),h=c<0,y=f?s.length:0,S=LL(0,y,this.__views__),E=S.start,R=S.end,A=R-E,V=h?R:E-1,B=this.__iteratees__,j=B.length,Y=0,oe=Ut(A,this.__takeCount__);if(!f||!h&&y==A&&oe==A)return j_(s,this.__actions__);var fe=[];e:for(;A--&&Y<oe;){V+=c;for(var Ee=-1,de=s[V];++Ee<j;){var Me=B[Ee],De=Me.iteratee,Fr=Me.type,Xt=De(de);if(Fr==$)de=Xt;else if(!Xt){if(Fr==D)continue e;break e}}fe[Y++]=de}return fe}Ae.prototype=Us(au.prototype),Ae.prototype.constructor=Ae;function Co(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var h=s[c];this.set(h[0],h[1])}}function RN(){this.__data__=Fc?Fc(null):{},this.size=0}function kN(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}function PN(s){var c=this.__data__;if(Fc){var f=c[s];return f===a?t:f}return je.call(c,s)?c[s]:t}function MN(s){var c=this.__data__;return Fc?c[s]!==t:je.call(c,s)}function AN(s,c){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=Fc&&c===t?a:c,this}Co.prototype.clear=RN,Co.prototype.delete=kN,Co.prototype.get=PN,Co.prototype.has=MN,Co.prototype.set=AN;function ui(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var h=s[c];this.set(h[0],h[1])}}function DN(){this.__data__=[],this.size=0}function IN(s){var c=this.__data__,f=cu(c,s);if(f<0)return!1;var h=c.length-1;return f==h?c.pop():tu.call(c,f,1),--this.size,!0}function FN(s){var c=this.__data__,f=cu(c,s);return f<0?t:c[f][1]}function CN(s){return cu(this.__data__,s)>-1}function ON(s,c){var f=this.__data__,h=cu(f,s);return h<0?(++this.size,f.push([s,c])):f[h][1]=c,this}ui.prototype.clear=DN,ui.prototype.delete=IN,ui.prototype.get=FN,ui.prototype.has=CN,ui.prototype.set=ON;function fi(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var h=s[c];this.set(h[0],h[1])}}function NN(){this.size=0,this.__data__={hash:new Co,map:new(Dc||ui),string:new Co}}function LN(s){var c=Su(this,s).delete(s);return this.size-=c?1:0,c}function UN(s){return Su(this,s).get(s)}function HN(s){return Su(this,s).has(s)}function VN(s,c){var f=Su(this,s),h=f.size;return f.set(s,c),this.size+=f.size==h?0:1,this}fi.prototype.clear=NN,fi.prototype.delete=LN,fi.prototype.get=UN,fi.prototype.has=HN,fi.prototype.set=VN;function Oo(s){var c=-1,f=s==null?0:s.length;for(this.__data__=new fi;++c<f;)this.add(s[c])}function BN(s){return this.__data__.set(s,a),this}function WN(s){return this.__data__.has(s)}Oo.prototype.add=Oo.prototype.push=BN,Oo.prototype.has=WN;function Rn(s){var c=this.__data__=new ui(s);this.size=c.size}function $N(){this.__data__=new ui,this.size=0}function jN(s){var c=this.__data__,f=c.delete(s);return this.size=c.size,f}function qN(s){return this.__data__.get(s)}function zN(s){return this.__data__.has(s)}function GN(s,c){var f=this.__data__;if(f instanceof ui){var h=f.__data__;if(!Dc||h.length<r-1)return h.push([s,c]),this.size=++f.size,this;f=this.__data__=new fi(h)}return f.set(s,c),this.size=f.size,this}Rn.prototype.clear=$N,Rn.prototype.delete=jN,Rn.prototype.get=qN,Rn.prototype.has=zN,Rn.prototype.set=GN;function v_(s,c){var f=xe(s),h=!f&&Vo(s),y=!f&&!h&&Gi(s),S=!f&&!h&&!y&&Ws(s),E=f||h||y||S,R=E?ax(s.length,nN):[],A=R.length;for(var V in s)(c||je.call(s,V))&&!(E&&(V=="length"||y&&(V=="offset"||V=="parent")||S&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||gi(V,A)))&&R.push(V);return R}function b_(s){var c=s.length;return c?s[_x(0,c-1)]:t}function KN(s,c){return vu(fr(s),No(c,0,s.length))}function QN(s){return vu(fr(s))}function mx(s,c,f){(f!==t&&!kn(s[c],f)||f===t&&!(c in s))&&di(s,c,f)}function Oc(s,c,f){var h=s[c];(!(je.call(s,c)&&kn(h,f))||f===t&&!(c in s))&&di(s,c,f)}function cu(s,c){for(var f=s.length;f--;)if(kn(s[f][0],c))return f;return-1}function ZN(s,c,f,h){return $i(s,function(y,S,E){c(h,y,f(y),E)}),h}function w_(s,c){return s&&Wn(c,Rt(c),s)}function YN(s,c){return s&&Wn(c,mr(c),s)}function di(s,c,f){c=="__proto__"&&ru?ru(s,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[c]=f}function hx(s,c){for(var f=-1,h=c.length,y=L(h),S=s==null;++f<h;)y[f]=S?t:Qx(s,c[f]);return y}function No(s,c,f){return s===s&&(f!==t&&(s=s<=f?s:f),c!==t&&(s=s>=c?s:c)),s}function en(s,c,f,h,y,S){var E,R=c&u,A=c&d,V=c&m;if(f&&(E=y?f(s,h,y,S):f(s)),E!==t)return E;if(!ot(s))return s;var B=xe(s);if(B){if(E=HL(s),!R)return fr(s,E)}else{var j=Ht(s),Y=j==Ms||j==Ew;if(Gi(s))return G_(s,R);if(j==pi||j==ur||Y&&!y){if(E=A||Y?{}:f0(s),!R)return A?PL(s,YN(E,s)):kL(s,w_(E,s))}else{if(!Qe[j])return y?s:{};E=VL(s,j,R)}}S||(S=new Rn);var oe=S.get(s);if(oe)return oe;S.set(s,E),B0(s)?s.forEach(function(de){E.add(en(de,c,f,de,s,S))}):H0(s)&&s.forEach(function(de,Me){E.set(Me,en(de,c,f,Me,s,S))});var fe=V?A?Ox:Cx:A?mr:Rt,Ee=B?t:fe(s);return Yr(Ee||s,function(de,Me){Ee&&(Me=de,de=s[Me]),Oc(E,Me,en(de,c,f,Me,s,S))}),E}function XN(s){var c=Rt(s);return function(f){return __(f,s,c)}}function __(s,c,f){var h=f.length;if(s==null)return!h;for(s=Ge(s);h--;){var y=f[h],S=c[y],E=s[y];if(E===t&&!(y in s)||!S(E))return!1}return!0}function E_(s,c,f){if(typeof s!="function")throw new Xr(i);return Wc(function(){s.apply(t,f)},c)}function Nc(s,c,f,h){var y=-1,S=qp,E=!0,R=s.length,A=[],V=c.length;if(!R)return A;f&&(c=et(c,Ar(f))),h?(S=tx,E=!1):c.length>=r&&(S=Mc,E=!1,c=new Oo(c));e:for(;++y<R;){var B=s[y],j=f==null?B:f(B);if(B=h||B!==0?B:0,E&&j===j){for(var Y=V;Y--;)if(c[Y]===j)continue e;A.push(B)}else S(c,j,h)||A.push(B)}return A}var $i=X_(Bn),R_=X_(yx,!0);function JN(s,c){var f=!0;return $i(s,function(h,y,S){return f=!!c(h,y,S),f}),f}function lu(s,c,f){for(var h=-1,y=s.length;++h<y;){var S=s[h],E=c(S);if(E!=null&&(R===t?E===E&&!Ir(E):f(E,R)))var R=E,A=S}return A}function eL(s,c,f,h){var y=s.length;for(f=ve(f),f<0&&(f=-f>y?0:y+f),h=h===t||h>y?y:ve(h),h<0&&(h+=y),h=f>h?0:$0(h);f<h;)s[f++]=c;return s}function k_(s,c){var f=[];return $i(s,function(h,y,S){c(h,y,S)&&f.push(h)}),f}function It(s,c,f,h,y){var S=-1,E=s.length;for(f||(f=WL),y||(y=[]);++S<E;){var R=s[S];c>0&&f(R)?c>1?It(R,c-1,f,h,y):Hi(y,R):h||(y[y.length]=R)}return y}var gx=J_(),P_=J_(!0);function Bn(s,c){return s&&gx(s,c,Rt)}function yx(s,c){return s&&P_(s,c,Rt)}function pu(s,c){return Ui(c,function(f){return yi(s[f])})}function Lo(s,c){c=qi(c,s);for(var f=0,h=c.length;s!=null&&f<h;)s=s[$n(c[f++])];return f&&f==h?s:t}function M_(s,c,f){var h=c(s);return xe(s)?h:Hi(h,f(s))}function Zt(s){return s==null?s===t?MC:kC:Fo&&Fo in Ge(s)?NL(s):QL(s)}function xx(s,c){return s>c}function tL(s,c){return s!=null&&je.call(s,c)}function rL(s,c){return s!=null&&c in Ge(s)}function nL(s,c,f){return s>=Ut(c,f)&&s<St(c,f)}function Tx(s,c,f){for(var h=f?tx:qp,y=s[0].length,S=s.length,E=S,R=L(S),A=1/0,V=[];E--;){var B=s[E];E&&c&&(B=et(B,Ar(c))),A=Ut(B.length,A),R[E]=!f&&(c||y>=120&&B.length>=120)?new Oo(E&&B):t}B=s[0];var j=-1,Y=R[0];e:for(;++j<y&&V.length<A;){var oe=B[j],fe=c?c(oe):oe;if(oe=f||oe!==0?oe:0,!(Y?Mc(Y,fe):h(V,fe,f))){for(E=S;--E;){var Ee=R[E];if(!(Ee?Mc(Ee,fe):h(s[E],fe,f)))continue e}Y&&Y.push(fe),V.push(oe)}}return V}function iL(s,c,f,h){return Bn(s,function(y,S,E){c(h,f(y),S,E)}),h}function Lc(s,c,f){c=qi(c,s),s=g0(s,c);var h=s==null?s:s[$n(rn(c))];return h==null?t:Mr(h,s,f)}function A_(s){return ct(s)&&Zt(s)==ur}function oL(s){return ct(s)&&Zt(s)==Pc}function sL(s){return ct(s)&&Zt(s)==Qr}function Uc(s,c,f,h,y){return s===c?!0:s==null||c==null||!ct(s)&&!ct(c)?s!==s&&c!==c:aL(s,c,f,h,Uc,y)}function aL(s,c,f,h,y,S){var E=xe(s),R=xe(c),A=E?vn:Ht(s),V=R?vn:Ht(c);A=A==ur?pi:A,V=V==ur?pi:V;var B=A==pi,j=V==pi,Y=A==V;if(Y&&Gi(s)){if(!Gi(c))return!1;E=!0,B=!1}if(Y&&!B)return S||(S=new Rn),E||Ws(s)?l0(s,c,f,h,y,S):CL(s,c,A,f,h,y,S);if(!(f&g)){var oe=B&&je.call(s,"__wrapped__"),fe=j&&je.call(c,"__wrapped__");if(oe||fe){var Ee=oe?s.value():s,de=fe?c.value():c;return S||(S=new Rn),y(Ee,de,f,h,S)}}return Y?(S||(S=new Rn),OL(s,c,f,h,y,S)):!1}function cL(s){return ct(s)&&Ht(s)==wn}function Sx(s,c,f,h){var y=f.length,S=y,E=!h;if(s==null)return!S;for(s=Ge(s);y--;){var R=f[y];if(E&&R[2]?R[1]!==s[R[0]]:!(R[0]in s))return!1}for(;++y<S;){R=f[y];var A=R[0],V=s[A],B=R[1];if(E&&R[2]){if(V===t&&!(A in s))return!1}else{var j=new Rn;if(h)var Y=h(V,B,A,s,c,j);if(!(Y===t?Uc(B,V,g|x,h,j):Y))return!1}}return!0}function D_(s){if(!ot(s)||jL(s))return!1;var c=yi(s)?cN:XC;return c.test(Ho(s))}function lL(s){return ct(s)&&Zt(s)==Ec}function pL(s){return ct(s)&&Ht(s)==_n}function uL(s){return ct(s)&&ku(s.length)&&!!Ye[Zt(s)]}function I_(s){return typeof s=="function"?s:s==null?hr:typeof s=="object"?xe(s)?O_(s[0],s[1]):C_(s):eE(s)}function vx(s){if(!Bc(s))return mN(s);var c=[];for(var f in Ge(s))je.call(s,f)&&f!="constructor"&&c.push(f);return c}function fL(s){if(!ot(s))return KL(s);var c=Bc(s),f=[];for(var h in s)h=="constructor"&&(c||!je.call(s,h))||f.push(h);return f}function bx(s,c){return s<c}function F_(s,c){var f=-1,h=dr(s)?L(s.length):[];return $i(s,function(y,S,E){h[++f]=c(y,S,E)}),h}function C_(s){var c=Lx(s);return c.length==1&&c[0][2]?m0(c[0][0],c[0][1]):function(f){return f===s||Sx(f,s,c)}}function O_(s,c){return Hx(s)&&d0(c)?m0($n(s),c):function(f){var h=Qx(f,s);return h===t&&h===c?Zx(f,s):Uc(c,h,g|x)}}function uu(s,c,f,h,y){s!==c&&gx(c,function(S,E){if(y||(y=new Rn),ot(S))dL(s,c,E,f,uu,h,y);else{var R=h?h(Bx(s,E),S,E+"",s,c,y):t;R===t&&(R=S),mx(s,E,R)}},mr)}function dL(s,c,f,h,y,S,E){var R=Bx(s,f),A=Bx(c,f),V=E.get(A);if(V){mx(s,f,V);return}var B=S?S(R,A,f+"",s,c,E):t,j=B===t;if(j){var Y=xe(A),oe=!Y&&Gi(A),fe=!Y&&!oe&&Ws(A);B=A,Y||oe||fe?xe(R)?B=R:ft(R)?B=fr(R):oe?(j=!1,B=G_(A,!0)):fe?(j=!1,B=K_(A,!0)):B=[]:$c(A)||Vo(A)?(B=R,Vo(R)?B=j0(R):(!ot(R)||yi(R))&&(B=f0(A))):j=!1}j&&(E.set(A,B),y(B,A,h,S,E),E.delete(A)),mx(s,f,B)}function N_(s,c){var f=s.length;if(f)return c+=c<0?f:0,gi(c,f)?s[c]:t}function L_(s,c,f){c.length?c=et(c,function(S){return xe(S)?function(E){return Lo(E,S.length===1?S[0]:S)}:S}):c=[hr];var h=-1;c=et(c,Ar(ue()));var y=F_(s,function(S,E,R){var A=et(c,function(V){return V(S)});return{criteria:A,index:++h,value:S}});return VO(y,function(S,E){return RL(S,E,f)})}function mL(s,c){return U_(s,c,function(f,h){return Zx(s,h)})}function U_(s,c,f){for(var h=-1,y=c.length,S={};++h<y;){var E=c[h],R=Lo(s,E);f(R,E)&&Hc(S,qi(E,s),R)}return S}function hL(s){return function(c){return Lo(c,s)}}function wx(s,c,f,h){var y=h?HO:Is,S=-1,E=c.length,R=s;for(s===c&&(c=fr(c)),f&&(R=et(s,Ar(f)));++S<E;)for(var A=0,V=c[S],B=f?f(V):V;(A=y(R,B,A,h))>-1;)R!==s&&tu.call(R,A,1),tu.call(s,A,1);return s}function H_(s,c){for(var f=s?c.length:0,h=f-1;f--;){var y=c[f];if(f==h||y!==S){var S=y;gi(y)?tu.call(s,y,1):kx(s,y)}}return s}function _x(s,c){return s+iu(T_()*(c-s+1))}function gL(s,c,f,h){for(var y=-1,S=St(nu((c-s)/(f||1)),0),E=L(S);S--;)E[h?S:++y]=s,s+=f;return E}function Ex(s,c){var f="";if(!s||c<1||c>Z)return f;do c%2&&(f+=s),c=iu(c/2),c&&(s+=s);while(c);return f}function ke(s,c){return Wx(h0(s,c,hr),s+"")}function yL(s){return b_($s(s))}function xL(s,c){var f=$s(s);return vu(f,No(c,0,f.length))}function Hc(s,c,f,h){if(!ot(s))return s;c=qi(c,s);for(var y=-1,S=c.length,E=S-1,R=s;R!=null&&++y<S;){var A=$n(c[y]),V=f;if(A==="__proto__"||A==="constructor"||A==="prototype")return s;if(y!=E){var B=R[A];V=h?h(B,A,R):t,V===t&&(V=ot(B)?B:gi(c[y+1])?[]:{})}Oc(R,A,V),R=R[A]}return s}var V_=ou?function(s,c){return ou.set(s,c),s}:hr,TL=ru?function(s,c){return ru(s,"toString",{configurable:!0,enumerable:!1,value:Xx(c),writable:!0})}:hr;function SL(s){return vu($s(s))}function tn(s,c,f){var h=-1,y=s.length;c<0&&(c=-c>y?0:y+c),f=f>y?y:f,f<0&&(f+=y),y=c>f?0:f-c>>>0,c>>>=0;for(var S=L(y);++h<y;)S[h]=s[h+c];return S}function vL(s,c){var f;return $i(s,function(h,y,S){return f=c(h,y,S),!f}),!!f}function fu(s,c,f){var h=0,y=s==null?h:s.length;if(typeof c=="number"&&c===c&&y<=pr){for(;h<y;){var S=h+y>>>1,E=s[S];E!==null&&!Ir(E)&&(f?E<=c:E<c)?h=S+1:y=S}return y}return Rx(s,c,hr,f)}function Rx(s,c,f,h){var y=0,S=s==null?0:s.length;if(S===0)return 0;c=f(c);for(var E=c!==c,R=c===null,A=Ir(c),V=c===t;y<S;){var B=iu((y+S)/2),j=f(s[B]),Y=j!==t,oe=j===null,fe=j===j,Ee=Ir(j);if(E)var de=h||fe;else V?de=fe&&(h||Y):R?de=fe&&Y&&(h||!oe):A?de=fe&&Y&&!oe&&(h||!Ee):oe||Ee?de=!1:de=h?j<=c:j<c;de?y=B+1:S=B}return Ut(S,Re)}function B_(s,c){for(var f=-1,h=s.length,y=0,S=[];++f<h;){var E=s[f],R=c?c(E):E;if(!f||!kn(R,A)){var A=R;S[y++]=E===0?0:E}}return S}function W_(s){return typeof s=="number"?s:Ir(s)?he:+s}function Dr(s){if(typeof s=="string")return s;if(xe(s))return et(s,Dr)+"";if(Ir(s))return S_?S_.call(s):"";var c=s+"";return c=="0"&&1/s==-Q?"-0":c}function ji(s,c,f){var h=-1,y=qp,S=s.length,E=!0,R=[],A=R;if(f)E=!1,y=tx;else if(S>=r){var V=c?null:IL(s);if(V)return Gp(V);E=!1,y=Mc,A=new Oo}else A=c?[]:R;e:for(;++h<S;){var B=s[h],j=c?c(B):B;if(B=f||B!==0?B:0,E&&j===j){for(var Y=A.length;Y--;)if(A[Y]===j)continue e;c&&A.push(j),R.push(B)}else y(A,j,f)||(A!==R&&A.push(j),R.push(B))}return R}function kx(s,c){return c=qi(c,s),s=g0(s,c),s==null||delete s[$n(rn(c))]}function $_(s,c,f,h){return Hc(s,c,f(Lo(s,c)),h)}function du(s,c,f,h){for(var y=s.length,S=h?y:-1;(h?S--:++S<y)&&c(s[S],S,s););return f?tn(s,h?0:S,h?S+1:y):tn(s,h?S+1:0,h?y:S)}function j_(s,c){var f=s;return f instanceof Ae&&(f=f.value()),rx(c,function(h,y){return y.func.apply(y.thisArg,Hi([h],y.args))},f)}function Px(s,c,f){var h=s.length;if(h<2)return h?ji(s[0]):[];for(var y=-1,S=L(h);++y<h;)for(var E=s[y],R=-1;++R<h;)R!=y&&(S[y]=Nc(S[y]||E,s[R],c,f));return ji(It(S,1),c,f)}function q_(s,c,f){for(var h=-1,y=s.length,S=c.length,E={};++h<y;){var R=h<S?c[h]:t;f(E,s[h],R)}return E}function Mx(s){return ft(s)?s:[]}function Ax(s){return typeof s=="function"?s:hr}function qi(s,c){return xe(s)?s:Hx(s,c)?[s]:S0(We(s))}var bL=ke;function zi(s,c,f){var h=s.length;return f=f===t?h:f,!c&&f>=h?s:tn(s,c,f)}var z_=lN||function(s){return Et.clearTimeout(s)};function G_(s,c){if(c)return s.slice();var f=s.length,h=m_?m_(f):new s.constructor(f);return s.copy(h),h}function Dx(s){var c=new s.constructor(s.byteLength);return new Jp(c).set(new Jp(s)),c}function wL(s,c){var f=c?Dx(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.byteLength)}function _L(s){var c=new s.constructor(s.source,Aw.exec(s));return c.lastIndex=s.lastIndex,c}function EL(s){return Cc?Ge(Cc.call(s)):{}}function K_(s,c){var f=c?Dx(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}function Q_(s,c){if(s!==c){var f=s!==t,h=s===null,y=s===s,S=Ir(s),E=c!==t,R=c===null,A=c===c,V=Ir(c);if(!R&&!V&&!S&&s>c||S&&E&&A&&!R&&!V||h&&E&&A||!f&&A||!y)return 1;if(!h&&!S&&!V&&s<c||V&&f&&y&&!h&&!S||R&&f&&y||!E&&y||!A)return-1}return 0}function RL(s,c,f){for(var h=-1,y=s.criteria,S=c.criteria,E=y.length,R=f.length;++h<E;){var A=Q_(y[h],S[h]);if(A){if(h>=R)return A;var V=f[h];return A*(V=="desc"?-1:1)}}return s.index-c.index}function Z_(s,c,f,h){for(var y=-1,S=s.length,E=f.length,R=-1,A=c.length,V=St(S-E,0),B=L(A+V),j=!h;++R<A;)B[R]=c[R];for(;++y<E;)(j||y<S)&&(B[f[y]]=s[y]);for(;V--;)B[R++]=s[y++];return B}function Y_(s,c,f,h){for(var y=-1,S=s.length,E=-1,R=f.length,A=-1,V=c.length,B=St(S-R,0),j=L(B+V),Y=!h;++y<B;)j[y]=s[y];for(var oe=y;++A<V;)j[oe+A]=c[A];for(;++E<R;)(Y||y<S)&&(j[oe+f[E]]=s[y++]);return j}function fr(s,c){var f=-1,h=s.length;for(c||(c=L(h));++f<h;)c[f]=s[f];return c}function Wn(s,c,f,h){var y=!f;f||(f={});for(var S=-1,E=c.length;++S<E;){var R=c[S],A=h?h(f[R],s[R],R,f,s):t;A===t&&(A=s[R]),y?di(f,R,A):Oc(f,R,A)}return f}function kL(s,c){return Wn(s,Ux(s),c)}function PL(s,c){return Wn(s,p0(s),c)}function mu(s,c){return function(f,h){var y=xe(f)?FO:ZN,S=c?c():{};return y(f,s,ue(h,2),S)}}function Hs(s){return ke(function(c,f){var h=-1,y=f.length,S=y>1?f[y-1]:t,E=y>2?f[2]:t;for(S=s.length>3&&typeof S=="function"?(y--,S):t,E&&Yt(f[0],f[1],E)&&(S=y<3?t:S,y=1),c=Ge(c);++h<y;){var R=f[h];R&&s(c,R,h,S)}return c})}function X_(s,c){return function(f,h){if(f==null)return f;if(!dr(f))return s(f,h);for(var y=f.length,S=c?y:-1,E=Ge(f);(c?S--:++S<y)&&h(E[S],S,E)!==!1;);return f}}function J_(s){return function(c,f,h){for(var y=-1,S=Ge(c),E=h(c),R=E.length;R--;){var A=E[s?R:++y];if(f(S[A],A,S)===!1)break}return c}}function ML(s,c,f){var h=c&b,y=Vc(s);function S(){var E=this&&this!==Et&&this instanceof S?y:s;return E.apply(h?f:this,arguments)}return S}function e0(s){return function(c){c=We(c);var f=Fs(c)?En(c):t,h=f?f[0]:c.charAt(0),y=f?zi(f,1).join(""):c.slice(1);return h[s]()+y}}function Vs(s){return function(c){return rx(X0(Y0(c).replace(TO,"")),s,"")}}function Vc(s){return function(){var c=arguments;switch(c.length){case 0:return new s;case 1:return new s(c[0]);case 2:return new s(c[0],c[1]);case 3:return new s(c[0],c[1],c[2]);case 4:return new s(c[0],c[1],c[2],c[3]);case 5:return new s(c[0],c[1],c[2],c[3],c[4]);case 6:return new s(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new s(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=Us(s.prototype),h=s.apply(f,c);return ot(h)?h:f}}function AL(s,c,f){var h=Vc(s);function y(){for(var S=arguments.length,E=L(S),R=S,A=Bs(y);R--;)E[R]=arguments[R];var V=S<3&&E[0]!==A&&E[S-1]!==A?[]:Vi(E,A);if(S-=V.length,S<f)return o0(s,c,hu,y.placeholder,t,E,V,t,t,f-S);var B=this&&this!==Et&&this instanceof y?h:s;return Mr(B,this,E)}return y}function t0(s){return function(c,f,h){var y=Ge(c);if(!dr(c)){var S=ue(f,3);c=Rt(c),f=function(R){return S(y[R],R,y)}}var E=s(c,f,h);return E>-1?y[S?c[E]:E]:t}}function r0(s){return hi(function(c){var f=c.length,h=f,y=Jr.prototype.thru;for(s&&c.reverse();h--;){var S=c[h];if(typeof S!="function")throw new Xr(i);if(y&&!E&&Tu(S)=="wrapper")var E=new Jr([],!0)}for(h=E?h:f;++h<f;){S=c[h];var R=Tu(S),A=R=="wrapper"?Nx(S):t;A&&Vx(A[0])&&A[1]==(ie|I|K|ae)&&!A[4].length&&A[9]==1?E=E[Tu(A[0])].apply(E,A[3]):E=S.length==1&&Vx(S)?E[R]():E.thru(S)}return function(){var V=arguments,B=V[0];if(E&&V.length==1&&xe(B))return E.plant(B).value();for(var j=0,Y=f?c[j].apply(this,V):B;++j<f;)Y=c[j].call(this,Y);return Y}})}function hu(s,c,f,h,y,S,E,R,A,V){var B=c&ie,j=c&b,Y=c&v,oe=c&(I|U),fe=c&it,Ee=Y?t:Vc(s);function de(){for(var Me=arguments.length,De=L(Me),Fr=Me;Fr--;)De[Fr]=arguments[Fr];if(oe)var Xt=Bs(de),Cr=WO(De,Xt);if(h&&(De=Z_(De,h,y,oe)),S&&(De=Y_(De,S,E,oe)),Me-=Cr,oe&&Me<V){var dt=Vi(De,Xt);return o0(s,c,hu,de.placeholder,f,De,dt,R,A,V-Me)}var Pn=j?f:this,Ti=Y?Pn[s]:s;return Me=De.length,R?De=ZL(De,R):fe&&Me>1&&De.reverse(),B&&A<Me&&(De.length=A),this&&this!==Et&&this instanceof de&&(Ti=Ee||Vc(Ti)),Ti.apply(Pn,De)}return de}function n0(s,c){return function(f,h){return iL(f,s,c(h),{})}}function gu(s,c){return function(f,h){var y;if(f===t&&h===t)return c;if(f!==t&&(y=f),h!==t){if(y===t)return h;typeof f=="string"||typeof h=="string"?(f=Dr(f),h=Dr(h)):(f=W_(f),h=W_(h)),y=s(f,h)}return y}}function Ix(s){return hi(function(c){return c=et(c,Ar(ue())),ke(function(f){var h=this;return s(c,function(y){return Mr(y,h,f)})})})}function yu(s,c){c=c===t?" ":Dr(c);var f=c.length;if(f<2)return f?Ex(c,s):c;var h=Ex(c,nu(s/Cs(c)));return Fs(c)?zi(En(h),0,s).join(""):h.slice(0,s)}function DL(s,c,f,h){var y=c&b,S=Vc(s);function E(){for(var R=-1,A=arguments.length,V=-1,B=h.length,j=L(B+A),Y=this&&this!==Et&&this instanceof E?S:s;++V<B;)j[V]=h[V];for(;A--;)j[V++]=arguments[++R];return Mr(Y,y?f:this,j)}return E}function i0(s){return function(c,f,h){return h&&typeof h!="number"&&Yt(c,f,h)&&(f=h=t),c=xi(c),f===t?(f=c,c=0):f=xi(f),h=h===t?c<f?1:-1:xi(h),gL(c,f,h,s)}}function xu(s){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=nn(c),f=nn(f)),s(c,f)}}function o0(s,c,f,h,y,S,E,R,A,V){var B=c&I,j=B?E:t,Y=B?t:E,oe=B?S:t,fe=B?t:S;c|=B?K:ne,c&=~(B?ne:K),c&F||(c&=~(b|v));var Ee=[s,c,y,oe,j,fe,Y,R,A,V],de=f.apply(t,Ee);return Vx(s)&&y0(de,Ee),de.placeholder=h,x0(de,s,c)}function Fx(s){var c=Tt[s];return function(f,h){if(f=nn(f),h=h==null?0:Ut(ve(h),292),h&&x_(f)){var y=(We(f)+"e").split("e"),S=c(y[0]+"e"+(+y[1]+h));return y=(We(S)+"e").split("e"),+(y[0]+"e"+(+y[1]-h))}return c(f)}}var IL=Ns&&1/Gp(new Ns([,-0]))[1]==Q?function(s){return new Ns(s)}:tT;function s0(s){return function(c){var f=Ht(c);return f==wn?lx(c):f==_n?QO(c):BO(c,s(c))}}function mi(s,c,f,h,y,S,E,R){var A=c&v;if(!A&&typeof s!="function")throw new Xr(i);var V=h?h.length:0;if(V||(c&=~(K|ne),h=y=t),E=E===t?E:St(ve(E),0),R=R===t?R:ve(R),V-=y?y.length:0,c&ne){var B=h,j=y;h=y=t}var Y=A?t:Nx(s),oe=[s,c,f,h,y,B,j,S,E,R];if(Y&&GL(oe,Y),s=oe[0],c=oe[1],f=oe[2],h=oe[3],y=oe[4],R=oe[9]=oe[9]===t?A?0:s.length:St(oe[9]-V,0),!R&&c&(I|U)&&(c&=~(I|U)),!c||c==b)var fe=ML(s,c,f);else c==I||c==U?fe=AL(s,c,R):(c==K||c==(b|K))&&!y.length?fe=DL(s,c,f,h):fe=hu.apply(t,oe);var Ee=Y?V_:y0;return x0(Ee(fe,oe),s,c)}function a0(s,c,f,h){return s===t||kn(s,Os[f])&&!je.call(h,f)?c:s}function c0(s,c,f,h,y,S){return ot(s)&&ot(c)&&(S.set(c,s),uu(s,c,t,c0,S),S.delete(c)),s}function FL(s){return $c(s)?t:s}function l0(s,c,f,h,y,S){var E=f&g,R=s.length,A=c.length;if(R!=A&&!(E&&A>R))return!1;var V=S.get(s),B=S.get(c);if(V&&B)return V==c&&B==s;var j=-1,Y=!0,oe=f&x?new Oo:t;for(S.set(s,c),S.set(c,s);++j<R;){var fe=s[j],Ee=c[j];if(h)var de=E?h(Ee,fe,j,c,s,S):h(fe,Ee,j,s,c,S);if(de!==t){if(de)continue;Y=!1;break}if(oe){if(!nx(c,function(Me,De){if(!Mc(oe,De)&&(fe===Me||y(fe,Me,f,h,S)))return oe.push(De)})){Y=!1;break}}else if(!(fe===Ee||y(fe,Ee,f,h,S))){Y=!1;break}}return S.delete(s),S.delete(c),Y}function CL(s,c,f,h,y,S,E){switch(f){case As:if(s.byteLength!=c.byteLength||s.byteOffset!=c.byteOffset)return!1;s=s.buffer,c=c.buffer;case Pc:return!(s.byteLength!=c.byteLength||!S(new Jp(s),new Jp(c)));case bn:case Qr:case _c:return kn(+s,+c);case li:return s.name==c.name&&s.message==c.message;case Ec:case Rc:return s==c+"";case wn:var R=lx;case _n:var A=h&g;if(R||(R=Gp),s.size!=c.size&&!A)return!1;var V=E.get(s);if(V)return V==c;h|=x,E.set(s,c);var B=l0(R(s),R(c),h,y,S,E);return E.delete(s),B;case Bp:if(Cc)return Cc.call(s)==Cc.call(c)}return!1}function OL(s,c,f,h,y,S){var E=f&g,R=Cx(s),A=R.length,V=Cx(c),B=V.length;if(A!=B&&!E)return!1;for(var j=A;j--;){var Y=R[j];if(!(E?Y in c:je.call(c,Y)))return!1}var oe=S.get(s),fe=S.get(c);if(oe&&fe)return oe==c&&fe==s;var Ee=!0;S.set(s,c),S.set(c,s);for(var de=E;++j<A;){Y=R[j];var Me=s[Y],De=c[Y];if(h)var Fr=E?h(De,Me,Y,c,s,S):h(Me,De,Y,s,c,S);if(!(Fr===t?Me===De||y(Me,De,f,h,S):Fr)){Ee=!1;break}de||(de=Y=="constructor")}if(Ee&&!de){var Xt=s.constructor,Cr=c.constructor;Xt!=Cr&&"constructor"in s&&"constructor"in c&&!(typeof Xt=="function"&&Xt instanceof Xt&&typeof Cr=="function"&&Cr instanceof Cr)&&(Ee=!1)}return S.delete(s),S.delete(c),Ee}function hi(s){return Wx(h0(s,t,_0),s+"")}function Cx(s){return M_(s,Rt,Ux)}function Ox(s){return M_(s,mr,p0)}var Nx=ou?function(s){return ou.get(s)}:tT;function Tu(s){for(var c=s.name+"",f=Ls[c],h=je.call(Ls,c)?f.length:0;h--;){var y=f[h],S=y.func;if(S==null||S==s)return y.name}return c}function Bs(s){var c=je.call(T,"placeholder")?T:s;return c.placeholder}function ue(){var s=T.iteratee||Jx;return s=s===Jx?I_:s,arguments.length?s(arguments[0],arguments[1]):s}function Su(s,c){var f=s.__data__;return $L(c)?f[typeof c=="string"?"string":"hash"]:f.map}function Lx(s){for(var c=Rt(s),f=c.length;f--;){var h=c[f],y=s[h];c[f]=[h,y,d0(y)]}return c}function Uo(s,c){var f=zO(s,c);return D_(f)?f:t}function NL(s){var c=je.call(s,Fo),f=s[Fo];try{s[Fo]=t;var h=!0}catch{}var y=Yp.call(s);return h&&(c?s[Fo]=f:delete s[Fo]),y}var Ux=ux?function(s){return s==null?[]:(s=Ge(s),Ui(ux(s),function(c){return g_.call(s,c)}))}:rT,p0=ux?function(s){for(var c=[];s;)Hi(c,Ux(s)),s=eu(s);return c}:rT,Ht=Zt;(fx&&Ht(new fx(new ArrayBuffer(1)))!=As||Dc&&Ht(new Dc)!=wn||dx&&Ht(dx.resolve())!=Rw||Ns&&Ht(new Ns)!=_n||Ic&&Ht(new Ic)!=kc)&&(Ht=function(s){var c=Zt(s),f=c==pi?s.constructor:t,h=f?Ho(f):"";if(h)switch(h){case xN:return As;case TN:return wn;case SN:return Rw;case vN:return _n;case bN:return kc}return c});function LL(s,c,f){for(var h=-1,y=f.length;++h<y;){var S=f[h],E=S.size;switch(S.type){case"drop":s+=E;break;case"dropRight":c-=E;break;case"take":c=Ut(c,s+E);break;case"takeRight":s=St(s,c-E);break}}return{start:s,end:c}}function UL(s){var c=s.match(jC);return c?c[1].split(qC):[]}function u0(s,c,f){c=qi(c,s);for(var h=-1,y=c.length,S=!1;++h<y;){var E=$n(c[h]);if(!(S=s!=null&&f(s,E)))break;s=s[E]}return S||++h!=y?S:(y=s==null?0:s.length,!!y&&ku(y)&&gi(E,y)&&(xe(s)||Vo(s)))}function HL(s){var c=s.length,f=new s.constructor(c);return c&&typeof s[0]=="string"&&je.call(s,"index")&&(f.index=s.index,f.input=s.input),f}function f0(s){return typeof s.constructor=="function"&&!Bc(s)?Us(eu(s)):{}}function VL(s,c,f){var h=s.constructor;switch(c){case Pc:return Dx(s);case bn:case Qr:return new h(+s);case As:return wL(s,f);case Ly:case Uy:case Hy:case Vy:case By:case Wy:case $y:case jy:case qy:return K_(s,f);case wn:return new h;case _c:case Rc:return new h(s);case Ec:return _L(s);case _n:return new h;case Bp:return EL(s)}}function BL(s,c){var f=c.length;if(!f)return s;var h=f-1;return c[h]=(f>1?"& ":"")+c[h],c=c.join(f>2?", ":" "),s.replace($C,`{
/* [wrapped with `+c+`] */
`)}function WL(s){return xe(s)||Vo(s)||!!(y_&&s&&s[y_])}function gi(s,c){var f=typeof s;return c=c??Z,!!c&&(f=="number"||f!="symbol"&&eO.test(s))&&s>-1&&s%1==0&&s<c}function Yt(s,c,f){if(!ot(f))return!1;var h=typeof c;return(h=="number"?dr(f)&&gi(c,f.length):h=="string"&&c in f)?kn(f[c],s):!1}function Hx(s,c){if(xe(s))return!1;var f=typeof s;return f=="number"||f=="symbol"||f=="boolean"||s==null||Ir(s)?!0:HC.test(s)||!UC.test(s)||c!=null&&s in Ge(c)}function $L(s){var c=typeof s;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?s!=="__proto__":s===null}function Vx(s){var c=Tu(s),f=T[c];if(typeof f!="function"||!(c in Ae.prototype))return!1;if(s===f)return!0;var h=Nx(f);return!!h&&s===h[0]}function jL(s){return!!d_&&d_ in s}var qL=Qp?yi:nT;function Bc(s){var c=s&&s.constructor,f=typeof c=="function"&&c.prototype||Os;return s===f}function d0(s){return s===s&&!ot(s)}function m0(s,c){return function(f){return f==null?!1:f[s]===c&&(c!==t||s in Ge(f))}}function zL(s){var c=Eu(s,function(h){return f.size===l&&f.clear(),h}),f=c.cache;return c}function GL(s,c){var f=s[1],h=c[1],y=f|h,S=y<(b|v|ie),E=h==ie&&f==I||h==ie&&f==ae&&s[7].length<=c[8]||h==(ie|ae)&&c[7].length<=c[8]&&f==I;if(!(S||E))return s;h&b&&(s[2]=c[2],y|=f&b?0:F);var R=c[3];if(R){var A=s[3];s[3]=A?Z_(A,R,c[4]):R,s[4]=A?Vi(s[3],p):c[4]}return R=c[5],R&&(A=s[5],s[5]=A?Y_(A,R,c[6]):R,s[6]=A?Vi(s[5],p):c[6]),R=c[7],R&&(s[7]=R),h&ie&&(s[8]=s[8]==null?c[8]:Ut(s[8],c[8])),s[9]==null&&(s[9]=c[9]),s[0]=c[0],s[1]=y,s}function KL(s){var c=[];if(s!=null)for(var f in Ge(s))c.push(f);return c}function QL(s){return Yp.call(s)}function h0(s,c,f){return c=St(c===t?s.length-1:c,0),function(){for(var h=arguments,y=-1,S=St(h.length-c,0),E=L(S);++y<S;)E[y]=h[c+y];y=-1;for(var R=L(c+1);++y<c;)R[y]=h[y];return R[c]=f(E),Mr(s,this,R)}}function g0(s,c){return c.length<2?s:Lo(s,tn(c,0,-1))}function ZL(s,c){for(var f=s.length,h=Ut(c.length,f),y=fr(s);h--;){var S=c[h];s[h]=gi(S,f)?y[S]:t}return s}function Bx(s,c){if(!(c==="constructor"&&typeof s[c]=="function")&&c!="__proto__")return s[c]}var y0=T0(V_),Wc=uN||function(s,c){return Et.setTimeout(s,c)},Wx=T0(TL);function x0(s,c,f){var h=c+"";return Wx(s,BL(h,YL(UL(h),f)))}function T0(s){var c=0,f=0;return function(){var h=hN(),y=O-(h-f);if(f=h,y>0){if(++c>=N)return arguments[0]}else c=0;return s.apply(t,arguments)}}function vu(s,c){var f=-1,h=s.length,y=h-1;for(c=c===t?h:c;++f<c;){var S=_x(f,y),E=s[S];s[S]=s[f],s[f]=E}return s.length=c,s}var S0=zL(function(s){var c=[];return s.charCodeAt(0)===46&&c.push(""),s.replace(VC,function(f,h,y,S){c.push(y?S.replace(KC,"$1"):h||f)}),c});function $n(s){if(typeof s=="string"||Ir(s))return s;var c=s+"";return c=="0"&&1/s==-Q?"-0":c}function Ho(s){if(s!=null){try{return Zp.call(s)}catch{}try{return s+""}catch{}}return""}function YL(s,c){return Yr(ci,function(f){var h="_."+f[0];c&f[1]&&!qp(s,h)&&s.push(h)}),s.sort()}function v0(s){if(s instanceof Ae)return s.clone();var c=new Jr(s.__wrapped__,s.__chain__);return c.__actions__=fr(s.__actions__),c.__index__=s.__index__,c.__values__=s.__values__,c}function XL(s,c,f){(f?Yt(s,c,f):c===t)?c=1:c=St(ve(c),0);var h=s==null?0:s.length;if(!h||c<1)return[];for(var y=0,S=0,E=L(nu(h/c));y<h;)E[S++]=tn(s,y,y+=c);return E}function JL(s){for(var c=-1,f=s==null?0:s.length,h=0,y=[];++c<f;){var S=s[c];S&&(y[h++]=S)}return y}function eU(){var s=arguments.length;if(!s)return[];for(var c=L(s-1),f=arguments[0],h=s;h--;)c[h-1]=arguments[h];return Hi(xe(f)?fr(f):[f],It(c,1))}var tU=ke(function(s,c){return ft(s)?Nc(s,It(c,1,ft,!0)):[]}),rU=ke(function(s,c){var f=rn(c);return ft(f)&&(f=t),ft(s)?Nc(s,It(c,1,ft,!0),ue(f,2)):[]}),nU=ke(function(s,c){var f=rn(c);return ft(f)&&(f=t),ft(s)?Nc(s,It(c,1,ft,!0),t,f):[]});function iU(s,c,f){var h=s==null?0:s.length;return h?(c=f||c===t?1:ve(c),tn(s,c<0?0:c,h)):[]}function oU(s,c,f){var h=s==null?0:s.length;return h?(c=f||c===t?1:ve(c),c=h-c,tn(s,0,c<0?0:c)):[]}function sU(s,c){return s&&s.length?du(s,ue(c,3),!0,!0):[]}function aU(s,c){return s&&s.length?du(s,ue(c,3),!0):[]}function cU(s,c,f,h){var y=s==null?0:s.length;return y?(f&&typeof f!="number"&&Yt(s,c,f)&&(f=0,h=y),eL(s,c,f,h)):[]}function b0(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=f==null?0:ve(f);return y<0&&(y=St(h+y,0)),zp(s,ue(c,3),y)}function w0(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=h-1;return f!==t&&(y=ve(f),y=f<0?St(h+y,0):Ut(y,h-1)),zp(s,ue(c,3),y,!0)}function _0(s){var c=s==null?0:s.length;return c?It(s,1):[]}function lU(s){var c=s==null?0:s.length;return c?It(s,Q):[]}function pU(s,c){var f=s==null?0:s.length;return f?(c=c===t?1:ve(c),It(s,c)):[]}function uU(s){for(var c=-1,f=s==null?0:s.length,h={};++c<f;){var y=s[c];h[y[0]]=y[1]}return h}function E0(s){return s&&s.length?s[0]:t}function fU(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=f==null?0:ve(f);return y<0&&(y=St(h+y,0)),Is(s,c,y)}function dU(s){var c=s==null?0:s.length;return c?tn(s,0,-1):[]}var mU=ke(function(s){var c=et(s,Mx);return c.length&&c[0]===s[0]?Tx(c):[]}),hU=ke(function(s){var c=rn(s),f=et(s,Mx);return c===rn(f)?c=t:f.pop(),f.length&&f[0]===s[0]?Tx(f,ue(c,2)):[]}),gU=ke(function(s){var c=rn(s),f=et(s,Mx);return c=typeof c=="function"?c:t,c&&f.pop(),f.length&&f[0]===s[0]?Tx(f,t,c):[]});function yU(s,c){return s==null?"":dN.call(s,c)}function rn(s){var c=s==null?0:s.length;return c?s[c-1]:t}function xU(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=h;return f!==t&&(y=ve(f),y=y<0?St(h+y,0):Ut(y,h-1)),c===c?YO(s,c,y):zp(s,o_,y,!0)}function TU(s,c){return s&&s.length?N_(s,ve(c)):t}var SU=ke(R0);function R0(s,c){return s&&s.length&&c&&c.length?wx(s,c):s}function vU(s,c,f){return s&&s.length&&c&&c.length?wx(s,c,ue(f,2)):s}function bU(s,c,f){return s&&s.length&&c&&c.length?wx(s,c,t,f):s}var wU=hi(function(s,c){var f=s==null?0:s.length,h=hx(s,c);return H_(s,et(c,function(y){return gi(y,f)?+y:y}).sort(Q_)),h});function _U(s,c){var f=[];if(!(s&&s.length))return f;var h=-1,y=[],S=s.length;for(c=ue(c,3);++h<S;){var E=s[h];c(E,h,s)&&(f.push(E),y.push(h))}return H_(s,y),f}function $x(s){return s==null?s:yN.call(s)}function EU(s,c,f){var h=s==null?0:s.length;return h?(f&&typeof f!="number"&&Yt(s,c,f)?(c=0,f=h):(c=c==null?0:ve(c),f=f===t?h:ve(f)),tn(s,c,f)):[]}function RU(s,c){return fu(s,c)}function kU(s,c,f){return Rx(s,c,ue(f,2))}function PU(s,c){var f=s==null?0:s.length;if(f){var h=fu(s,c);if(h<f&&kn(s[h],c))return h}return-1}function MU(s,c){return fu(s,c,!0)}function AU(s,c,f){return Rx(s,c,ue(f,2),!0)}function DU(s,c){var f=s==null?0:s.length;if(f){var h=fu(s,c,!0)-1;if(kn(s[h],c))return h}return-1}function IU(s){return s&&s.length?B_(s):[]}function FU(s,c){return s&&s.length?B_(s,ue(c,2)):[]}function CU(s){var c=s==null?0:s.length;return c?tn(s,1,c):[]}function OU(s,c,f){return s&&s.length?(c=f||c===t?1:ve(c),tn(s,0,c<0?0:c)):[]}function NU(s,c,f){var h=s==null?0:s.length;return h?(c=f||c===t?1:ve(c),c=h-c,tn(s,c<0?0:c,h)):[]}function LU(s,c){return s&&s.length?du(s,ue(c,3),!1,!0):[]}function UU(s,c){return s&&s.length?du(s,ue(c,3)):[]}var HU=ke(function(s){return ji(It(s,1,ft,!0))}),VU=ke(function(s){var c=rn(s);return ft(c)&&(c=t),ji(It(s,1,ft,!0),ue(c,2))}),BU=ke(function(s){var c=rn(s);return c=typeof c=="function"?c:t,ji(It(s,1,ft,!0),t,c)});function WU(s){return s&&s.length?ji(s):[]}function $U(s,c){return s&&s.length?ji(s,ue(c,2)):[]}function jU(s,c){return c=typeof c=="function"?c:t,s&&s.length?ji(s,t,c):[]}function jx(s){if(!(s&&s.length))return[];var c=0;return s=Ui(s,function(f){if(ft(f))return c=St(f.length,c),!0}),ax(c,function(f){return et(s,ix(f))})}function k0(s,c){if(!(s&&s.length))return[];var f=jx(s);return c==null?f:et(f,function(h){return Mr(c,t,h)})}var qU=ke(function(s,c){return ft(s)?Nc(s,c):[]}),zU=ke(function(s){return Px(Ui(s,ft))}),GU=ke(function(s){var c=rn(s);return ft(c)&&(c=t),Px(Ui(s,ft),ue(c,2))}),KU=ke(function(s){var c=rn(s);return c=typeof c=="function"?c:t,Px(Ui(s,ft),t,c)}),QU=ke(jx);function ZU(s,c){return q_(s||[],c||[],Oc)}function YU(s,c){return q_(s||[],c||[],Hc)}var XU=ke(function(s){var c=s.length,f=c>1?s[c-1]:t;return f=typeof f=="function"?(s.pop(),f):t,k0(s,f)});function P0(s){var c=T(s);return c.__chain__=!0,c}function JU(s,c){return c(s),s}function bu(s,c){return c(s)}var eH=hi(function(s){var c=s.length,f=c?s[0]:0,h=this.__wrapped__,y=function(S){return hx(S,s)};return c>1||this.__actions__.length||!(h instanceof Ae)||!gi(f)?this.thru(y):(h=h.slice(f,+f+(c?1:0)),h.__actions__.push({func:bu,args:[y],thisArg:t}),new Jr(h,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function tH(){return P0(this)}function rH(){return new Jr(this.value(),this.__chain__)}function nH(){this.__values__===t&&(this.__values__=W0(this.value()));var s=this.__index__>=this.__values__.length,c=s?t:this.__values__[this.__index__++];return{done:s,value:c}}function iH(){return this}function oH(s){for(var c,f=this;f instanceof au;){var h=v0(f);h.__index__=0,h.__values__=t,c?y.__wrapped__=h:c=h;var y=h;f=f.__wrapped__}return y.__wrapped__=s,c}function sH(){var s=this.__wrapped__;if(s instanceof Ae){var c=s;return this.__actions__.length&&(c=new Ae(this)),c=c.reverse(),c.__actions__.push({func:bu,args:[$x],thisArg:t}),new Jr(c,this.__chain__)}return this.thru($x)}function aH(){return j_(this.__wrapped__,this.__actions__)}var cH=mu(function(s,c,f){je.call(s,f)?++s[f]:di(s,f,1)});function lH(s,c,f){var h=xe(s)?n_:JN;return f&&Yt(s,c,f)&&(c=t),h(s,ue(c,3))}function pH(s,c){var f=xe(s)?Ui:k_;return f(s,ue(c,3))}var uH=t0(b0),fH=t0(w0);function dH(s,c){return It(wu(s,c),1)}function mH(s,c){return It(wu(s,c),Q)}function hH(s,c,f){return f=f===t?1:ve(f),It(wu(s,c),f)}function M0(s,c){var f=xe(s)?Yr:$i;return f(s,ue(c,3))}function A0(s,c){var f=xe(s)?CO:R_;return f(s,ue(c,3))}var gH=mu(function(s,c,f){je.call(s,f)?s[f].push(c):di(s,f,[c])});function yH(s,c,f,h){s=dr(s)?s:$s(s),f=f&&!h?ve(f):0;var y=s.length;return f<0&&(f=St(y+f,0)),Pu(s)?f<=y&&s.indexOf(c,f)>-1:!!y&&Is(s,c,f)>-1}var xH=ke(function(s,c,f){var h=-1,y=typeof c=="function",S=dr(s)?L(s.length):[];return $i(s,function(E){S[++h]=y?Mr(c,E,f):Lc(E,c,f)}),S}),TH=mu(function(s,c,f){di(s,f,c)});function wu(s,c){var f=xe(s)?et:F_;return f(s,ue(c,3))}function SH(s,c,f,h){return s==null?[]:(xe(c)||(c=c==null?[]:[c]),f=h?t:f,xe(f)||(f=f==null?[]:[f]),L_(s,c,f))}var vH=mu(function(s,c,f){s[f?0:1].push(c)},function(){return[[],[]]});function bH(s,c,f){var h=xe(s)?rx:a_,y=arguments.length<3;return h(s,ue(c,4),f,y,$i)}function wH(s,c,f){var h=xe(s)?OO:a_,y=arguments.length<3;return h(s,ue(c,4),f,y,R_)}function _H(s,c){var f=xe(s)?Ui:k_;return f(s,Ru(ue(c,3)))}function EH(s){var c=xe(s)?b_:yL;return c(s)}function RH(s,c,f){(f?Yt(s,c,f):c===t)?c=1:c=ve(c);var h=xe(s)?KN:xL;return h(s,c)}function kH(s){var c=xe(s)?QN:SL;return c(s)}function PH(s){if(s==null)return 0;if(dr(s))return Pu(s)?Cs(s):s.length;var c=Ht(s);return c==wn||c==_n?s.size:vx(s).length}function MH(s,c,f){var h=xe(s)?nx:vL;return f&&Yt(s,c,f)&&(c=t),h(s,ue(c,3))}var AH=ke(function(s,c){if(s==null)return[];var f=c.length;return f>1&&Yt(s,c[0],c[1])?c=[]:f>2&&Yt(c[0],c[1],c[2])&&(c=[c[0]]),L_(s,It(c,1),[])}),_u=pN||function(){return Et.Date.now()};function DH(s,c){if(typeof c!="function")throw new Xr(i);return s=ve(s),function(){if(--s<1)return c.apply(this,arguments)}}function D0(s,c,f){return c=f?t:c,c=s&&c==null?s.length:c,mi(s,ie,t,t,t,t,c)}function I0(s,c){var f;if(typeof c!="function")throw new Xr(i);return s=ve(s),function(){return--s>0&&(f=c.apply(this,arguments)),s<=1&&(c=t),f}}var qx=ke(function(s,c,f){var h=b;if(f.length){var y=Vi(f,Bs(qx));h|=K}return mi(s,h,c,f,y)}),F0=ke(function(s,c,f){var h=b|v;if(f.length){var y=Vi(f,Bs(F0));h|=K}return mi(c,h,s,f,y)});function C0(s,c,f){c=f?t:c;var h=mi(s,I,t,t,t,t,t,c);return h.placeholder=C0.placeholder,h}function O0(s,c,f){c=f?t:c;var h=mi(s,U,t,t,t,t,t,c);return h.placeholder=O0.placeholder,h}function N0(s,c,f){var h,y,S,E,R,A,V=0,B=!1,j=!1,Y=!0;if(typeof s!="function")throw new Xr(i);c=nn(c)||0,ot(f)&&(B=!!f.leading,j="maxWait"in f,S=j?St(nn(f.maxWait)||0,c):S,Y="trailing"in f?!!f.trailing:Y);function oe(dt){var Pn=h,Ti=y;return h=y=t,V=dt,E=s.apply(Ti,Pn),E}function fe(dt){return V=dt,R=Wc(Me,c),B?oe(dt):E}function Ee(dt){var Pn=dt-A,Ti=dt-V,tE=c-Pn;return j?Ut(tE,S-Ti):tE}function de(dt){var Pn=dt-A,Ti=dt-V;return A===t||Pn>=c||Pn<0||j&&Ti>=S}function Me(){var dt=_u();if(de(dt))return De(dt);R=Wc(Me,Ee(dt))}function De(dt){return R=t,Y&&h?oe(dt):(h=y=t,E)}function Fr(){R!==t&&z_(R),V=0,h=A=y=R=t}function Xt(){return R===t?E:De(_u())}function Cr(){var dt=_u(),Pn=de(dt);if(h=arguments,y=this,A=dt,Pn){if(R===t)return fe(A);if(j)return z_(R),R=Wc(Me,c),oe(A)}return R===t&&(R=Wc(Me,c)),E}return Cr.cancel=Fr,Cr.flush=Xt,Cr}var IH=ke(function(s,c){return E_(s,1,c)}),FH=ke(function(s,c,f){return E_(s,nn(c)||0,f)});function CH(s){return mi(s,it)}function Eu(s,c){if(typeof s!="function"||c!=null&&typeof c!="function")throw new Xr(i);var f=function(){var h=arguments,y=c?c.apply(this,h):h[0],S=f.cache;if(S.has(y))return S.get(y);var E=s.apply(this,h);return f.cache=S.set(y,E)||S,E};return f.cache=new(Eu.Cache||fi),f}Eu.Cache=fi;function Ru(s){if(typeof s!="function")throw new Xr(i);return function(){var c=arguments;switch(c.length){case 0:return!s.call(this);case 1:return!s.call(this,c[0]);case 2:return!s.call(this,c[0],c[1]);case 3:return!s.call(this,c[0],c[1],c[2])}return!s.apply(this,c)}}function OH(s){return I0(2,s)}var NH=bL(function(s,c){c=c.length==1&&xe(c[0])?et(c[0],Ar(ue())):et(It(c,1),Ar(ue()));var f=c.length;return ke(function(h){for(var y=-1,S=Ut(h.length,f);++y<S;)h[y]=c[y].call(this,h[y]);return Mr(s,this,h)})}),zx=ke(function(s,c){var f=Vi(c,Bs(zx));return mi(s,K,t,c,f)}),L0=ke(function(s,c){var f=Vi(c,Bs(L0));return mi(s,ne,t,c,f)}),LH=hi(function(s,c){return mi(s,ae,t,t,t,c)});function UH(s,c){if(typeof s!="function")throw new Xr(i);return c=c===t?c:ve(c),ke(s,c)}function HH(s,c){if(typeof s!="function")throw new Xr(i);return c=c==null?0:St(ve(c),0),ke(function(f){var h=f[c],y=zi(f,0,c);return h&&Hi(y,h),Mr(s,this,y)})}function VH(s,c,f){var h=!0,y=!0;if(typeof s!="function")throw new Xr(i);return ot(f)&&(h="leading"in f?!!f.leading:h,y="trailing"in f?!!f.trailing:y),N0(s,c,{leading:h,maxWait:c,trailing:y})}function BH(s){return D0(s,1)}function WH(s,c){return zx(Ax(c),s)}function $H(){if(!arguments.length)return[];var s=arguments[0];return xe(s)?s:[s]}function jH(s){return en(s,m)}function qH(s,c){return c=typeof c=="function"?c:t,en(s,m,c)}function zH(s){return en(s,u|m)}function GH(s,c){return c=typeof c=="function"?c:t,en(s,u|m,c)}function KH(s,c){return c==null||__(s,c,Rt(c))}function kn(s,c){return s===c||s!==s&&c!==c}var QH=xu(xx),ZH=xu(function(s,c){return s>=c}),Vo=A_(function(){return arguments}())?A_:function(s){return ct(s)&&je.call(s,"callee")&&!g_.call(s,"callee")},xe=L.isArray,YH=Yw?Ar(Yw):oL;function dr(s){return s!=null&&ku(s.length)&&!yi(s)}function ft(s){return ct(s)&&dr(s)}function XH(s){return s===!0||s===!1||ct(s)&&Zt(s)==bn}var Gi=fN||nT,JH=Xw?Ar(Xw):sL;function e2(s){return ct(s)&&s.nodeType===1&&!$c(s)}function t2(s){if(s==null)return!0;if(dr(s)&&(xe(s)||typeof s=="string"||typeof s.splice=="function"||Gi(s)||Ws(s)||Vo(s)))return!s.length;var c=Ht(s);if(c==wn||c==_n)return!s.size;if(Bc(s))return!vx(s).length;for(var f in s)if(je.call(s,f))return!1;return!0}function r2(s,c){return Uc(s,c)}function n2(s,c,f){f=typeof f=="function"?f:t;var h=f?f(s,c):t;return h===t?Uc(s,c,t,f):!!h}function Gx(s){if(!ct(s))return!1;var c=Zt(s);return c==li||c==Do||typeof s.message=="string"&&typeof s.name=="string"&&!$c(s)}function i2(s){return typeof s=="number"&&x_(s)}function yi(s){if(!ot(s))return!1;var c=Zt(s);return c==Ms||c==Ew||c==Pr||c==PC}function U0(s){return typeof s=="number"&&s==ve(s)}function ku(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Z}function ot(s){var c=typeof s;return s!=null&&(c=="object"||c=="function")}function ct(s){return s!=null&&typeof s=="object"}var H0=Jw?Ar(Jw):cL;function o2(s,c){return s===c||Sx(s,c,Lx(c))}function s2(s,c,f){return f=typeof f=="function"?f:t,Sx(s,c,Lx(c),f)}function a2(s){return V0(s)&&s!=+s}function c2(s){if(qL(s))throw new ye(n);return D_(s)}function l2(s){return s===null}function p2(s){return s==null}function V0(s){return typeof s=="number"||ct(s)&&Zt(s)==_c}function $c(s){if(!ct(s)||Zt(s)!=pi)return!1;var c=eu(s);if(c===null)return!0;var f=je.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&Zp.call(f)==sN}var Kx=e_?Ar(e_):lL;function u2(s){return U0(s)&&s>=-Z&&s<=Z}var B0=t_?Ar(t_):pL;function Pu(s){return typeof s=="string"||!xe(s)&&ct(s)&&Zt(s)==Rc}function Ir(s){return typeof s=="symbol"||ct(s)&&Zt(s)==Bp}var Ws=r_?Ar(r_):uL;function f2(s){return s===t}function d2(s){return ct(s)&&Ht(s)==kc}function m2(s){return ct(s)&&Zt(s)==AC}var h2=xu(bx),g2=xu(function(s,c){return s<=c});function W0(s){if(!s)return[];if(dr(s))return Pu(s)?En(s):fr(s);if(Ac&&s[Ac])return KO(s[Ac]());var c=Ht(s),f=c==wn?lx:c==_n?Gp:$s;return f(s)}function xi(s){if(!s)return s===0?s:0;if(s=nn(s),s===Q||s===-Q){var c=s<0?-1:1;return c*te}return s===s?s:0}function ve(s){var c=xi(s),f=c%1;return c===c?f?c-f:c:0}function $0(s){return s?No(ve(s),0,re):0}function nn(s){if(typeof s=="number")return s;if(Ir(s))return he;if(ot(s)){var c=typeof s.valueOf=="function"?s.valueOf():s;s=ot(c)?c+"":c}if(typeof s!="string")return s===0?s:+s;s=c_(s);var f=YC.test(s);return f||JC.test(s)?DO(s.slice(2),f?2:8):ZC.test(s)?he:+s}function j0(s){return Wn(s,mr(s))}function y2(s){return s?No(ve(s),-Z,Z):s===0?s:0}function We(s){return s==null?"":Dr(s)}var x2=Hs(function(s,c){if(Bc(c)||dr(c)){Wn(c,Rt(c),s);return}for(var f in c)je.call(c,f)&&Oc(s,f,c[f])}),q0=Hs(function(s,c){Wn(c,mr(c),s)}),Mu=Hs(function(s,c,f,h){Wn(c,mr(c),s,h)}),T2=Hs(function(s,c,f,h){Wn(c,Rt(c),s,h)}),S2=hi(hx);function v2(s,c){var f=Us(s);return c==null?f:w_(f,c)}var b2=ke(function(s,c){s=Ge(s);var f=-1,h=c.length,y=h>2?c[2]:t;for(y&&Yt(c[0],c[1],y)&&(h=1);++f<h;)for(var S=c[f],E=mr(S),R=-1,A=E.length;++R<A;){var V=E[R],B=s[V];(B===t||kn(B,Os[V])&&!je.call(s,V))&&(s[V]=S[V])}return s}),w2=ke(function(s){return s.push(t,c0),Mr(z0,t,s)});function _2(s,c){return i_(s,ue(c,3),Bn)}function E2(s,c){return i_(s,ue(c,3),yx)}function R2(s,c){return s==null?s:gx(s,ue(c,3),mr)}function k2(s,c){return s==null?s:P_(s,ue(c,3),mr)}function P2(s,c){return s&&Bn(s,ue(c,3))}function M2(s,c){return s&&yx(s,ue(c,3))}function A2(s){return s==null?[]:pu(s,Rt(s))}function D2(s){return s==null?[]:pu(s,mr(s))}function Qx(s,c,f){var h=s==null?t:Lo(s,c);return h===t?f:h}function I2(s,c){return s!=null&&u0(s,c,tL)}function Zx(s,c){return s!=null&&u0(s,c,rL)}var F2=n0(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=Yp.call(c)),s[c]=f},Xx(hr)),C2=n0(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=Yp.call(c)),je.call(s,c)?s[c].push(f):s[c]=[f]},ue),O2=ke(Lc);function Rt(s){return dr(s)?v_(s):vx(s)}function mr(s){return dr(s)?v_(s,!0):fL(s)}function N2(s,c){var f={};return c=ue(c,3),Bn(s,function(h,y,S){di(f,c(h,y,S),h)}),f}function L2(s,c){var f={};return c=ue(c,3),Bn(s,function(h,y,S){di(f,y,c(h,y,S))}),f}var U2=Hs(function(s,c,f){uu(s,c,f)}),z0=Hs(function(s,c,f,h){uu(s,c,f,h)}),H2=hi(function(s,c){var f={};if(s==null)return f;var h=!1;c=et(c,function(S){return S=qi(S,s),h||(h=S.length>1),S}),Wn(s,Ox(s),f),h&&(f=en(f,u|d|m,FL));for(var y=c.length;y--;)kx(f,c[y]);return f});function V2(s,c){return G0(s,Ru(ue(c)))}var B2=hi(function(s,c){return s==null?{}:mL(s,c)});function G0(s,c){if(s==null)return{};var f=et(Ox(s),function(h){return[h]});return c=ue(c),U_(s,f,function(h,y){return c(h,y[0])})}function W2(s,c,f){c=qi(c,s);var h=-1,y=c.length;for(y||(y=1,s=t);++h<y;){var S=s==null?t:s[$n(c[h])];S===t&&(h=y,S=f),s=yi(S)?S.call(s):S}return s}function $2(s,c,f){return s==null?s:Hc(s,c,f)}function j2(s,c,f,h){return h=typeof h=="function"?h:t,s==null?s:Hc(s,c,f,h)}var K0=s0(Rt),Q0=s0(mr);function q2(s,c,f){var h=xe(s),y=h||Gi(s)||Ws(s);if(c=ue(c,4),f==null){var S=s&&s.constructor;y?f=h?new S:[]:ot(s)?f=yi(S)?Us(eu(s)):{}:f={}}return(y?Yr:Bn)(s,function(E,R,A){return c(f,E,R,A)}),f}function z2(s,c){return s==null?!0:kx(s,c)}function G2(s,c,f){return s==null?s:$_(s,c,Ax(f))}function K2(s,c,f,h){return h=typeof h=="function"?h:t,s==null?s:$_(s,c,Ax(f),h)}function $s(s){return s==null?[]:cx(s,Rt(s))}function Q2(s){return s==null?[]:cx(s,mr(s))}function Z2(s,c,f){return f===t&&(f=c,c=t),f!==t&&(f=nn(f),f=f===f?f:0),c!==t&&(c=nn(c),c=c===c?c:0),No(nn(s),c,f)}function Y2(s,c,f){return c=xi(c),f===t?(f=c,c=0):f=xi(f),s=nn(s),nL(s,c,f)}function X2(s,c,f){if(f&&typeof f!="boolean"&&Yt(s,c,f)&&(c=f=t),f===t&&(typeof c=="boolean"?(f=c,c=t):typeof s=="boolean"&&(f=s,s=t)),s===t&&c===t?(s=0,c=1):(s=xi(s),c===t?(c=s,s=0):c=xi(c)),s>c){var h=s;s=c,c=h}if(f||s%1||c%1){var y=T_();return Ut(s+y*(c-s+AO("1e-"+((y+"").length-1))),c)}return _x(s,c)}var J2=Vs(function(s,c,f){return c=c.toLowerCase(),s+(f?Z0(c):c)});function Z0(s){return Yx(We(s).toLowerCase())}function Y0(s){return s=We(s),s&&s.replace(tO,$O).replace(SO,"")}function eV(s,c,f){s=We(s),c=Dr(c);var h=s.length;f=f===t?h:No(ve(f),0,h);var y=f;return f-=c.length,f>=0&&s.slice(f,y)==c}function tV(s){return s=We(s),s&&OC.test(s)?s.replace(Pw,jO):s}function rV(s){return s=We(s),s&&BC.test(s)?s.replace(zy,"\\$&"):s}var nV=Vs(function(s,c,f){return s+(f?"-":"")+c.toLowerCase()}),iV=Vs(function(s,c,f){return s+(f?" ":"")+c.toLowerCase()}),oV=e0("toLowerCase");function sV(s,c,f){s=We(s),c=ve(c);var h=c?Cs(s):0;if(!c||h>=c)return s;var y=(c-h)/2;return yu(iu(y),f)+s+yu(nu(y),f)}function aV(s,c,f){s=We(s),c=ve(c);var h=c?Cs(s):0;return c&&h<c?s+yu(c-h,f):s}function cV(s,c,f){s=We(s),c=ve(c);var h=c?Cs(s):0;return c&&h<c?yu(c-h,f)+s:s}function lV(s,c,f){return f||c==null?c=0:c&&(c=+c),gN(We(s).replace(Gy,""),c||0)}function pV(s,c,f){return(f?Yt(s,c,f):c===t)?c=1:c=ve(c),Ex(We(s),c)}function uV(){var s=arguments,c=We(s[0]);return s.length<3?c:c.replace(s[1],s[2])}var fV=Vs(function(s,c,f){return s+(f?"_":"")+c.toLowerCase()});function dV(s,c,f){return f&&typeof f!="number"&&Yt(s,c,f)&&(c=f=t),f=f===t?re:f>>>0,f?(s=We(s),s&&(typeof c=="string"||c!=null&&!Kx(c))&&(c=Dr(c),!c&&Fs(s))?zi(En(s),0,f):s.split(c,f)):[]}var mV=Vs(function(s,c,f){return s+(f?" ":"")+Yx(c)});function hV(s,c,f){return s=We(s),f=f==null?0:No(ve(f),0,s.length),c=Dr(c),s.slice(f,f+c.length)==c}function gV(s,c,f){var h=T.templateSettings;f&&Yt(s,c,f)&&(c=t),s=We(s),c=Mu({},c,h,a0);var y=Mu({},c.imports,h.imports,a0),S=Rt(y),E=cx(y,S),R,A,V=0,B=c.interpolate||Wp,j="__p += '",Y=px((c.escape||Wp).source+"|"+B.source+"|"+(B===Mw?QC:Wp).source+"|"+(c.evaluate||Wp).source+"|$","g"),oe="//# sourceURL="+(je.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++EO+"]")+`
`;s.replace(Y,function(de,Me,De,Fr,Xt,Cr){return De||(De=Fr),j+=s.slice(V,Cr).replace(rO,qO),Me&&(R=!0,j+=`' +
__e(`+Me+`) +
'`),Xt&&(A=!0,j+=`';
`+Xt+`;
__p += '`),De&&(j+=`' +
((__t = (`+De+`)) == null ? '' : __t) +
'`),V=Cr+de.length,de}),j+=`';
`;var fe=je.call(c,"variable")&&c.variable;if(!fe)j=`with (obj) {
`+j+`
}
`;else if(GC.test(fe))throw new ye(o);j=(A?j.replace(DC,""):j).replace(IC,"$1").replace(FC,"$1;"),j="function("+(fe||"obj")+`) {
`+(fe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+j+`return __p
}`;var Ee=J0(function(){return Ve(S,oe+"return "+j).apply(t,E)});if(Ee.source=j,Gx(Ee))throw Ee;return Ee}function yV(s){return We(s).toLowerCase()}function xV(s){return We(s).toUpperCase()}function TV(s,c,f){if(s=We(s),s&&(f||c===t))return c_(s);if(!s||!(c=Dr(c)))return s;var h=En(s),y=En(c),S=l_(h,y),E=p_(h,y)+1;return zi(h,S,E).join("")}function SV(s,c,f){if(s=We(s),s&&(f||c===t))return s.slice(0,f_(s)+1);if(!s||!(c=Dr(c)))return s;var h=En(s),y=p_(h,En(c))+1;return zi(h,0,y).join("")}function vV(s,c,f){if(s=We(s),s&&(f||c===t))return s.replace(Gy,"");if(!s||!(c=Dr(c)))return s;var h=En(s),y=l_(h,En(c));return zi(h,y).join("")}function bV(s,c){var f=Dt,h=at;if(ot(c)){var y="separator"in c?c.separator:y;f="length"in c?ve(c.length):f,h="omission"in c?Dr(c.omission):h}s=We(s);var S=s.length;if(Fs(s)){var E=En(s);S=E.length}if(f>=S)return s;var R=f-Cs(h);if(R<1)return h;var A=E?zi(E,0,R).join(""):s.slice(0,R);if(y===t)return A+h;if(E&&(R+=A.length-R),Kx(y)){if(s.slice(R).search(y)){var V,B=A;for(y.global||(y=px(y.source,We(Aw.exec(y))+"g")),y.lastIndex=0;V=y.exec(B);)var j=V.index;A=A.slice(0,j===t?R:j)}}else if(s.indexOf(Dr(y),R)!=R){var Y=A.lastIndexOf(y);Y>-1&&(A=A.slice(0,Y))}return A+h}function wV(s){return s=We(s),s&&CC.test(s)?s.replace(kw,XO):s}var _V=Vs(function(s,c,f){return s+(f?" ":"")+c.toUpperCase()}),Yx=e0("toUpperCase");function X0(s,c,f){return s=We(s),c=f?t:c,c===t?GO(s)?tN(s):UO(s):s.match(c)||[]}var J0=ke(function(s,c){try{return Mr(s,t,c)}catch(f){return Gx(f)?f:new ye(f)}}),EV=hi(function(s,c){return Yr(c,function(f){f=$n(f),di(s,f,qx(s[f],s))}),s});function RV(s){var c=s==null?0:s.length,f=ue();return s=c?et(s,function(h){if(typeof h[1]!="function")throw new Xr(i);return[f(h[0]),h[1]]}):[],ke(function(h){for(var y=-1;++y<c;){var S=s[y];if(Mr(S[0],this,h))return Mr(S[1],this,h)}})}function kV(s){return XN(en(s,u))}function Xx(s){return function(){return s}}function PV(s,c){return s==null||s!==s?c:s}var MV=r0(),AV=r0(!0);function hr(s){return s}function Jx(s){return I_(typeof s=="function"?s:en(s,u))}function DV(s){return C_(en(s,u))}function IV(s,c){return O_(s,en(c,u))}var FV=ke(function(s,c){return function(f){return Lc(f,s,c)}}),CV=ke(function(s,c){return function(f){return Lc(s,f,c)}});function eT(s,c,f){var h=Rt(c),y=pu(c,h);f==null&&!(ot(c)&&(y.length||!h.length))&&(f=c,c=s,s=this,y=pu(c,Rt(c)));var S=!(ot(f)&&"chain"in f)||!!f.chain,E=yi(s);return Yr(y,function(R){var A=c[R];s[R]=A,E&&(s.prototype[R]=function(){var V=this.__chain__;if(S||V){var B=s(this.__wrapped__),j=B.__actions__=fr(this.__actions__);return j.push({func:A,args:arguments,thisArg:s}),B.__chain__=V,B}return A.apply(s,Hi([this.value()],arguments))})}),s}function OV(){return Et._===this&&(Et._=aN),this}function tT(){}function NV(s){return s=ve(s),ke(function(c){return N_(c,s)})}var LV=Ix(et),UV=Ix(n_),HV=Ix(nx);function eE(s){return Hx(s)?ix($n(s)):hL(s)}function VV(s){return function(c){return s==null?t:Lo(s,c)}}var BV=i0(),WV=i0(!0);function rT(){return[]}function nT(){return!1}function $V(){return{}}function jV(){return""}function qV(){return!0}function zV(s,c){if(s=ve(s),s<1||s>Z)return[];var f=re,h=Ut(s,re);c=ue(c),s-=re;for(var y=ax(h,c);++f<s;)c(f);return y}function GV(s){return xe(s)?et(s,$n):Ir(s)?[s]:fr(S0(We(s)))}function KV(s){var c=++oN;return We(s)+c}var QV=gu(function(s,c){return s+c},0),ZV=Fx("ceil"),YV=gu(function(s,c){return s/c},1),XV=Fx("floor");function JV(s){return s&&s.length?lu(s,hr,xx):t}function eB(s,c){return s&&s.length?lu(s,ue(c,2),xx):t}function tB(s){return s_(s,hr)}function rB(s,c){return s_(s,ue(c,2))}function nB(s){return s&&s.length?lu(s,hr,bx):t}function iB(s,c){return s&&s.length?lu(s,ue(c,2),bx):t}var oB=gu(function(s,c){return s*c},1),sB=Fx("round"),aB=gu(function(s,c){return s-c},0);function cB(s){return s&&s.length?sx(s,hr):0}function lB(s,c){return s&&s.length?sx(s,ue(c,2)):0}return T.after=DH,T.ary=D0,T.assign=x2,T.assignIn=q0,T.assignInWith=Mu,T.assignWith=T2,T.at=S2,T.before=I0,T.bind=qx,T.bindAll=EV,T.bindKey=F0,T.castArray=$H,T.chain=P0,T.chunk=XL,T.compact=JL,T.concat=eU,T.cond=RV,T.conforms=kV,T.constant=Xx,T.countBy=cH,T.create=v2,T.curry=C0,T.curryRight=O0,T.debounce=N0,T.defaults=b2,T.defaultsDeep=w2,T.defer=IH,T.delay=FH,T.difference=tU,T.differenceBy=rU,T.differenceWith=nU,T.drop=iU,T.dropRight=oU,T.dropRightWhile=sU,T.dropWhile=aU,T.fill=cU,T.filter=pH,T.flatMap=dH,T.flatMapDeep=mH,T.flatMapDepth=hH,T.flatten=_0,T.flattenDeep=lU,T.flattenDepth=pU,T.flip=CH,T.flow=MV,T.flowRight=AV,T.fromPairs=uU,T.functions=A2,T.functionsIn=D2,T.groupBy=gH,T.initial=dU,T.intersection=mU,T.intersectionBy=hU,T.intersectionWith=gU,T.invert=F2,T.invertBy=C2,T.invokeMap=xH,T.iteratee=Jx,T.keyBy=TH,T.keys=Rt,T.keysIn=mr,T.map=wu,T.mapKeys=N2,T.mapValues=L2,T.matches=DV,T.matchesProperty=IV,T.memoize=Eu,T.merge=U2,T.mergeWith=z0,T.method=FV,T.methodOf=CV,T.mixin=eT,T.negate=Ru,T.nthArg=NV,T.omit=H2,T.omitBy=V2,T.once=OH,T.orderBy=SH,T.over=LV,T.overArgs=NH,T.overEvery=UV,T.overSome=HV,T.partial=zx,T.partialRight=L0,T.partition=vH,T.pick=B2,T.pickBy=G0,T.property=eE,T.propertyOf=VV,T.pull=SU,T.pullAll=R0,T.pullAllBy=vU,T.pullAllWith=bU,T.pullAt=wU,T.range=BV,T.rangeRight=WV,T.rearg=LH,T.reject=_H,T.remove=_U,T.rest=UH,T.reverse=$x,T.sampleSize=RH,T.set=$2,T.setWith=j2,T.shuffle=kH,T.slice=EU,T.sortBy=AH,T.sortedUniq=IU,T.sortedUniqBy=FU,T.split=dV,T.spread=HH,T.tail=CU,T.take=OU,T.takeRight=NU,T.takeRightWhile=LU,T.takeWhile=UU,T.tap=JU,T.throttle=VH,T.thru=bu,T.toArray=W0,T.toPairs=K0,T.toPairsIn=Q0,T.toPath=GV,T.toPlainObject=j0,T.transform=q2,T.unary=BH,T.union=HU,T.unionBy=VU,T.unionWith=BU,T.uniq=WU,T.uniqBy=$U,T.uniqWith=jU,T.unset=z2,T.unzip=jx,T.unzipWith=k0,T.update=G2,T.updateWith=K2,T.values=$s,T.valuesIn=Q2,T.without=qU,T.words=X0,T.wrap=WH,T.xor=zU,T.xorBy=GU,T.xorWith=KU,T.zip=QU,T.zipObject=ZU,T.zipObjectDeep=YU,T.zipWith=XU,T.entries=K0,T.entriesIn=Q0,T.extend=q0,T.extendWith=Mu,eT(T,T),T.add=QV,T.attempt=J0,T.camelCase=J2,T.capitalize=Z0,T.ceil=ZV,T.clamp=Z2,T.clone=jH,T.cloneDeep=zH,T.cloneDeepWith=GH,T.cloneWith=qH,T.conformsTo=KH,T.deburr=Y0,T.defaultTo=PV,T.divide=YV,T.endsWith=eV,T.eq=kn,T.escape=tV,T.escapeRegExp=rV,T.every=lH,T.find=uH,T.findIndex=b0,T.findKey=_2,T.findLast=fH,T.findLastIndex=w0,T.findLastKey=E2,T.floor=XV,T.forEach=M0,T.forEachRight=A0,T.forIn=R2,T.forInRight=k2,T.forOwn=P2,T.forOwnRight=M2,T.get=Qx,T.gt=QH,T.gte=ZH,T.has=I2,T.hasIn=Zx,T.head=E0,T.identity=hr,T.includes=yH,T.indexOf=fU,T.inRange=Y2,T.invoke=O2,T.isArguments=Vo,T.isArray=xe,T.isArrayBuffer=YH,T.isArrayLike=dr,T.isArrayLikeObject=ft,T.isBoolean=XH,T.isBuffer=Gi,T.isDate=JH,T.isElement=e2,T.isEmpty=t2,T.isEqual=r2,T.isEqualWith=n2,T.isError=Gx,T.isFinite=i2,T.isFunction=yi,T.isInteger=U0,T.isLength=ku,T.isMap=H0,T.isMatch=o2,T.isMatchWith=s2,T.isNaN=a2,T.isNative=c2,T.isNil=p2,T.isNull=l2,T.isNumber=V0,T.isObject=ot,T.isObjectLike=ct,T.isPlainObject=$c,T.isRegExp=Kx,T.isSafeInteger=u2,T.isSet=B0,T.isString=Pu,T.isSymbol=Ir,T.isTypedArray=Ws,T.isUndefined=f2,T.isWeakMap=d2,T.isWeakSet=m2,T.join=yU,T.kebabCase=nV,T.last=rn,T.lastIndexOf=xU,T.lowerCase=iV,T.lowerFirst=oV,T.lt=h2,T.lte=g2,T.max=JV,T.maxBy=eB,T.mean=tB,T.meanBy=rB,T.min=nB,T.minBy=iB,T.stubArray=rT,T.stubFalse=nT,T.stubObject=$V,T.stubString=jV,T.stubTrue=qV,T.multiply=oB,T.nth=TU,T.noConflict=OV,T.noop=tT,T.now=_u,T.pad=sV,T.padEnd=aV,T.padStart=cV,T.parseInt=lV,T.random=X2,T.reduce=bH,T.reduceRight=wH,T.repeat=pV,T.replace=uV,T.result=W2,T.round=sB,T.runInContext=k,T.sample=EH,T.size=PH,T.snakeCase=fV,T.some=MH,T.sortedIndex=RU,T.sortedIndexBy=kU,T.sortedIndexOf=PU,T.sortedLastIndex=MU,T.sortedLastIndexBy=AU,T.sortedLastIndexOf=DU,T.startCase=mV,T.startsWith=hV,T.subtract=aB,T.sum=cB,T.sumBy=lB,T.template=gV,T.times=zV,T.toFinite=xi,T.toInteger=ve,T.toLength=$0,T.toLower=yV,T.toNumber=nn,T.toSafeInteger=y2,T.toString=We,T.toUpper=xV,T.trim=TV,T.trimEnd=SV,T.trimStart=vV,T.truncate=bV,T.unescape=wV,T.uniqueId=KV,T.upperCase=_V,T.upperFirst=Yx,T.each=M0,T.eachRight=A0,T.first=E0,eT(T,function(){var s={};return Bn(T,function(c,f){je.call(T.prototype,f)||(s[f]=c)}),s}(),{chain:!1}),T.VERSION=e,Yr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){T[s].placeholder=T}),Yr(["drop","take"],function(s,c){Ae.prototype[s]=function(f){f=f===t?1:St(ve(f),0);var h=this.__filtered__&&!c?new Ae(this):this.clone();return h.__filtered__?h.__takeCount__=Ut(f,h.__takeCount__):h.__views__.push({size:Ut(f,re),type:s+(h.__dir__<0?"Right":"")}),h},Ae.prototype[s+"Right"]=function(f){return this.reverse()[s](f).reverse()}}),Yr(["filter","map","takeWhile"],function(s,c){var f=c+1,h=f==D||f==z;Ae.prototype[s]=function(y){var S=this.clone();return S.__iteratees__.push({iteratee:ue(y,3),type:f}),S.__filtered__=S.__filtered__||h,S}}),Yr(["head","last"],function(s,c){var f="take"+(c?"Right":"");Ae.prototype[s]=function(){return this[f](1).value()[0]}}),Yr(["initial","tail"],function(s,c){var f="drop"+(c?"":"Right");Ae.prototype[s]=function(){return this.__filtered__?new Ae(this):this[f](1)}}),Ae.prototype.compact=function(){return this.filter(hr)},Ae.prototype.find=function(s){return this.filter(s).head()},Ae.prototype.findLast=function(s){return this.reverse().find(s)},Ae.prototype.invokeMap=ke(function(s,c){return typeof s=="function"?new Ae(this):this.map(function(f){return Lc(f,s,c)})}),Ae.prototype.reject=function(s){return this.filter(Ru(ue(s)))},Ae.prototype.slice=function(s,c){s=ve(s);var f=this;return f.__filtered__&&(s>0||c<0)?new Ae(f):(s<0?f=f.takeRight(-s):s&&(f=f.drop(s)),c!==t&&(c=ve(c),f=c<0?f.dropRight(-c):f.take(c-s)),f)},Ae.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Ae.prototype.toArray=function(){return this.take(re)},Bn(Ae.prototype,function(s,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),h=/^(?:head|last)$/.test(c),y=T[h?"take"+(c=="last"?"Right":""):c],S=h||/^find/.test(c);y&&(T.prototype[c]=function(){var E=this.__wrapped__,R=h?[1]:arguments,A=E instanceof Ae,V=R[0],B=A||xe(E),j=function(Me){var De=y.apply(T,Hi([Me],R));return h&&Y?De[0]:De};B&&f&&typeof V=="function"&&V.length!=1&&(A=B=!1);var Y=this.__chain__,oe=!!this.__actions__.length,fe=S&&!Y,Ee=A&&!oe;if(!S&&B){E=Ee?E:new Ae(this);var de=s.apply(E,R);return de.__actions__.push({func:bu,args:[j],thisArg:t}),new Jr(de,Y)}return fe&&Ee?s.apply(this,R):(de=this.thru(j),fe?h?de.value()[0]:de.value():de)})}),Yr(["pop","push","shift","sort","splice","unshift"],function(s){var c=Kp[s],f=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",h=/^(?:pop|shift)$/.test(s);T.prototype[s]=function(){var y=arguments;if(h&&!this.__chain__){var S=this.value();return c.apply(xe(S)?S:[],y)}return this[f](function(E){return c.apply(xe(E)?E:[],y)})}}),Bn(Ae.prototype,function(s,c){var f=T[c];if(f){var h=f.name+"";je.call(Ls,h)||(Ls[h]=[]),Ls[h].push({name:c,func:f})}}),Ls[hu(t,v).name]=[{name:"wrapper",func:t}],Ae.prototype.clone=wN,Ae.prototype.reverse=_N,Ae.prototype.value=EN,T.prototype.at=eH,T.prototype.chain=tH,T.prototype.commit=rH,T.prototype.next=nH,T.prototype.plant=oH,T.prototype.reverse=sH,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=aH,T.prototype.first=T.prototype.head,Ac&&(T.prototype[Ac]=iH),T},Bi=rN();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Et._=Bi,define(function(){return Bi})):Io?((Io.exports=Bi)._=Bi,Jy._=Bi):Et._=Bi}).call(cc)});var RF=Ke((nUe,EF)=>{"use strict";EF.exports=wF;function wF(t,e,r){t instanceof RegExp&&(t=bF(t,r)),e instanceof RegExp&&(e=bF(e,r));var n=_F(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function bF(t,e){var r=e.match(t);return r?r[0]:null}wF.range=_F;function _F(t,e,r){var n,i,o,a,l,p=r.indexOf(t),u=r.indexOf(e,p+1),d=p;if(p>=0&&u>0){if(t===e)return[p,u];for(n=[],o=r.length;d>=0&&!l;)d==p?(n.push(d),p=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,d+1)),d=p<u&&p>=0?p:u;n.length&&(l=[o,a])}return l}});var CF=Ke((iUe,FF)=>{var kF=RF();FF.exports=MZ;var PF="\0SLASH"+Math.random()+"\0",MF="\0OPEN"+Math.random()+"\0",ob="\0CLOSE"+Math.random()+"\0",AF="\0COMMA"+Math.random()+"\0",DF="\0PERIOD"+Math.random()+"\0";function ib(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function kZ(t){return t.split("\\\\").join(PF).split("\\{").join(MF).split("\\}").join(ob).split("\\,").join(AF).split("\\.").join(DF)}function PZ(t){return t.split(PF).join("\\").split(MF).join("{").split(ob).join("}").split(AF).join(",").split(DF).join(".")}function IF(t){if(!t)return[""];var e=[],r=kF("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var l=IF(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}function MZ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),gp(kZ(t),!0).map(PZ)):[]}function AZ(t){return"{"+t+"}"}function DZ(t){return/^-?0\d/.test(t)}function IZ(t,e){return t<=e}function FZ(t,e){return t>=e}function gp(t,e){var r=[],n=kF("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?gp(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var l=i+"{"+n.body+"}"+o[a];r.push(l)}else{var p=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=p||u,m=n.body.indexOf(",")>=0;if(!d&&!m)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+ob+n.post,gp(t)):[t];var g;if(d)g=n.body.split(/\.\./);else if(g=IF(n.body),g.length===1&&(g=gp(g[0],!1).map(AZ),g.length===1))return o.map(function(N){return n.pre+g[0]+N});var x;if(d){var b=ib(g[0]),v=ib(g[1]),F=Math.max(g[0].length,g[1].length),I=g.length==3?Math.abs(ib(g[2])):1,U=IZ,K=v<b;K&&(I*=-1,U=FZ);var ne=g.some(DZ);x=[];for(var ie=b;U(ie,v);ie+=I){var ae;if(u)ae=String.fromCharCode(ie),ae==="\\"&&(ae="");else if(ae=String(ie),ne){var it=F-ae.length;if(it>0){var Dt=new Array(it+1).join("0");ie<0?ae="-"+Dt+ae.slice(1):ae=Dt+ae}}x.push(ae)}}else{x=[];for(var at=0;at<g.length;at++)x.push.apply(x,gp(g[at],!1))}for(var at=0;at<x.length;at++)for(var a=0;a<o.length;a++){var l=i+x[at]+o[a];(!e||d||l)&&r.push(l)}}return r}});var TX={};hB(TX,{default:()=>RC});module.exports=gB(TX);var iT="cursorless.command",Du=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},lt=class extends Du{constructor(){super(...arguments);this.isVisible=!1}},mt=class extends Du{constructor(){super(...arguments);this.isVisible=!0}};var vX={"cursorless.toggleDecorations":new mt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new mt("Recompute decoration styles"),"cursorless.recordTestCase":new mt("Record test case"),"cursorless.recordOneTestCaseThenPause":new mt("Record one test case, then pause"),"cursorless.pauseRecording":new mt("Pause test case recording"),"cursorless.resumeRecording":new mt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new mt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new mt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new mt("Show documentation"),"cursorless.showInstallationDependencies":new mt("Show installation dependencies"),"cursorless.showScopeVisualizer":new mt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new mt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new mt("Analyze collected command history"),"cursorless.tutorial.start":new lt("Start a tutorial"),"cursorless.tutorial.next":new mt("Tutorial next"),"cursorless.tutorial.previous":new mt("Tutorial previous"),"cursorless.tutorial.restart":new mt("Tutorial restart"),"cursorless.tutorial.resume":new mt("Tutorial resume"),"cursorless.tutorial.list":new mt("Tutorial list"),"cursorless.documentationOpened":new lt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new lt("The core cursorless command"),"cursorless.repeatPreviousCommand":new mt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new lt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new lt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new lt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new lt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new lt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new lt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new lt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new lt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new lt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new lt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new lt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new lt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new lt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new lt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new lt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new lt("Redo keyboard targeting changes"),"cursorless.migrateSnippets":new lt("Migrate snippets from the old Cursorless format to the new community format")};var Iu=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Fu=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Cu=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},pt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Ou=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var yB=typeof global=="object"&&global&&global.Object===Object&&global,Nu=yB;var xB=typeof self=="object"&&self&&self.Object===Object&&self,TB=Nu||xB||Function("return this")(),kt=TB;var SB=kt.Symbol,Jt=SB;var nE=Object.prototype,vB=nE.hasOwnProperty,bB=nE.toString,jc=Jt?Jt.toStringTag:void 0;function wB(t){var e=vB.call(t,jc),r=t[jc];try{t[jc]=void 0;var n=!0}catch{}var i=bB.call(t);return n&&(e?t[jc]=r:delete t[jc]),i}var iE=wB;var _B=Object.prototype,EB=_B.toString;function RB(t){return EB.call(t)}var oE=RB;var kB="[object Null]",PB="[object Undefined]",sE=Jt?Jt.toStringTag:void 0;function MB(t){return t==null?t===void 0?PB:kB:sE&&sE in Object(t)?iE(t):oE(t)}var Mn=MB;function AB(t){return t!=null&&typeof t=="object"}var er=AB;var DB="[object Symbol]";function IB(t){return typeof t=="symbol"||er(t)&&Mn(t)==DB}var Or=IB;function FB(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var on=FB;var CB=Array.isArray,qe=CB;var OB=1/0,aE=Jt?Jt.prototype:void 0,cE=aE?aE.toString:void 0;function lE(t){if(typeof t=="string")return t;if(qe(t))return on(t,lE)+"";if(Or(t))return cE?cE.call(t):"";var e=t+"";return e=="0"&&1/t==-OB?"-0":e}var pE=lE;var NB=/\s/;function LB(t){for(var e=t.length;e--&&NB.test(t.charAt(e)););return e}var uE=LB;var UB=/^\s+/;function HB(t){return t&&t.slice(0,uE(t)+1).replace(UB,"")}var fE=HB;function VB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Nr=VB;var dE=NaN,BB=/^[-+]0x[0-9a-f]+$/i,WB=/^0b[01]+$/i,$B=/^0o[0-7]+$/i,jB=parseInt;function qB(t){if(typeof t=="number")return t;if(Or(t))return dE;if(Nr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Nr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=fE(t);var r=WB.test(t);return r||$B.test(t)?jB(t.slice(2),r?2:8):BB.test(t)?dE:+t}var mE=qB;var hE=1/0,zB=17976931348623157e292;function GB(t){if(!t)return t===0?t:0;if(t=mE(t),t===hE||t===-hE){var e=t<0?-1:1;return e*zB}return t===t?t:0}var js=GB;function KB(t){var e=js(t),r=e%1;return e===e?r?e-r:e:0}var Lu=KB;function QB(t){return t}var yr=QB;var ZB="[object AsyncFunction]",YB="[object Function]",XB="[object GeneratorFunction]",JB="[object Proxy]";function eW(t){if(!Nr(t))return!1;var e=Mn(t);return e==YB||e==XB||e==ZB||e==JB}var Uu=eW;var tW=kt["__core-js_shared__"],Hu=tW;var gE=function(){var t=/[^.]+$/.exec(Hu&&Hu.keys&&Hu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function rW(t){return!!gE&&gE in t}var yE=rW;var nW=Function.prototype,iW=nW.toString;function oW(t){if(t!=null){try{return iW.call(t)}catch{}try{return t+""}catch{}}return""}var Si=oW;var sW=/[\\^$.*+?()[\]{}|]/g,aW=/^\[object .+?Constructor\]$/,cW=Function.prototype,lW=Object.prototype,pW=cW.toString,uW=lW.hasOwnProperty,fW=RegExp("^"+pW.call(uW).replace(sW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dW(t){if(!Nr(t)||yE(t))return!1;var e=Uu(t)?fW:aW;return e.test(Si(t))}var xE=dW;function mW(t,e){return t?.[e]}var TE=mW;function hW(t,e){var r=TE(t,e);return xE(r)?r:void 0}var xr=hW;var gW=xr(kt,"WeakMap"),Bo=gW;var yW=Bo&&new Bo,oT=yW;var SE=Object.create,xW=function(){function t(){}return function(e){if(!Nr(e))return{};if(SE)return SE(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Vu=xW;function TW(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var vE=TW;function SW(){}var qs=SW;var vW=4294967295;function Bu(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=vW,this.__views__=[]}Bu.prototype=Vu(qs.prototype);Bu.prototype.constructor=Bu;var zs=Bu;function bW(){}var Wu=bW;var wW=oT?function(t){return oT.get(t)}:Wu,$u=wW;var _W={},sT=_W;var EW=Object.prototype,RW=EW.hasOwnProperty;function kW(t){for(var e=t.name+"",r=sT[e],n=RW.call(sT,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Gs=kW;function ju(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}ju.prototype=Vu(qs.prototype);ju.prototype.constructor=ju;var Ki=ju;function PW(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Qi=PW;function MW(t){if(t instanceof zs)return t.clone();var e=new Ki(t.__wrapped__,t.__chain__);return e.__actions__=Qi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var bE=MW;var AW=Object.prototype,DW=AW.hasOwnProperty;function qu(t){if(er(t)&&!qe(t)&&!(t instanceof zs)){if(t instanceof Ki)return t;if(DW.call(t,"__wrapped__"))return bE(t)}return new Ki(t)}qu.prototype=qs.prototype;qu.prototype.constructor=qu;var wE=qu;function IW(t){var e=Gs(t),r=wE[e];if(typeof r!="function"||!(e in zs.prototype))return!1;if(t===r)return!0;var n=$u(r);return!!n&&t===n[0]}var aT=IW;var FW=800,CW=16,OW=Date.now;function NW(t){var e=0,r=0;return function(){var n=OW(),i=CW-(n-r);if(r=n,i>0){if(++e>=FW)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var _E=NW;function LW(t){return function(){return t}}var EE=LW;var UW=function(){try{var t=xr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),cT=UW;var HW=cT?function(t,e){return cT(t,"toString",{configurable:!0,enumerable:!1,value:EE(e),writable:!0})}:yr,RE=HW;var VW=_E(RE),zu=VW;function BW(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Gu=BW;function WW(t){return t!==t}var kE=WW;function $W(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var PE=$W;function jW(t,e,r){return e===e?PE(t,e,r):Gu(t,kE,r)}var Ku=jW;function qW(t,e){var r=t==null?0:t.length;return!!r&&Ku(t,e,0)>-1}var ME=qW;var zW=9007199254740991,GW=/^(?:0|[1-9]\d*)$/;function KW(t,e){var r=typeof t;return e=e??zW,!!e&&(r=="number"||r!="symbol"&&GW.test(t))&&t>-1&&t%1==0&&t<e}var Ks=KW;function QW(t,e){return t===e||t!==t&&e!==e}var Qs=QW;var AE=Math.max;function ZW(t,e,r){return e=AE(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=AE(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(a),vE(t,this,l)}}var Qu=ZW;function YW(t,e){return zu(Qu(t,e,yr),t+"")}var Zs=YW;var XW=9007199254740991;function JW(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=XW}var Ys=JW;function e$(t){return t!=null&&Ys(t.length)&&!Uu(t)}var jn=e$;function t$(t,e,r){if(!Nr(r))return!1;var n=typeof e;return(n=="number"?jn(r)&&Ks(e,r.length):n=="string"&&e in r)?Qs(r[e],t):!1}var Wo=t$;var r$=Object.prototype;function n$(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||r$;return t===r}var DE=n$;function i$(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Zu=i$;var o$="[object Arguments]";function s$(t){return er(t)&&Mn(t)==o$}var lT=s$;var IE=Object.prototype,a$=IE.hasOwnProperty,c$=IE.propertyIsEnumerable,l$=lT(function(){return arguments}())?lT:function(t){return er(t)&&a$.call(t,"callee")&&!c$.call(t,"callee")},Xs=l$;function p$(){return!1}var FE=p$;var NE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,CE=NE&&typeof module=="object"&&module&&!module.nodeType&&module,u$=CE&&CE.exports===NE,OE=u$?kt.Buffer:void 0,f$=OE?OE.isBuffer:void 0,d$=f$||FE,qc=d$;var m$="[object Arguments]",h$="[object Array]",g$="[object Boolean]",y$="[object Date]",x$="[object Error]",T$="[object Function]",S$="[object Map]",v$="[object Number]",b$="[object Object]",w$="[object RegExp]",_$="[object Set]",E$="[object String]",R$="[object WeakMap]",k$="[object ArrayBuffer]",P$="[object DataView]",M$="[object Float32Array]",A$="[object Float64Array]",D$="[object Int8Array]",I$="[object Int16Array]",F$="[object Int32Array]",C$="[object Uint8Array]",O$="[object Uint8ClampedArray]",N$="[object Uint16Array]",L$="[object Uint32Array]",Xe={};Xe[M$]=Xe[A$]=Xe[D$]=Xe[I$]=Xe[F$]=Xe[C$]=Xe[O$]=Xe[N$]=Xe[L$]=!0;Xe[m$]=Xe[h$]=Xe[k$]=Xe[g$]=Xe[P$]=Xe[y$]=Xe[x$]=Xe[T$]=Xe[S$]=Xe[v$]=Xe[b$]=Xe[w$]=Xe[_$]=Xe[E$]=Xe[R$]=!1;function U$(t){return er(t)&&Ys(t.length)&&!!Xe[Mn(t)]}var LE=U$;function H$(t){return function(e){return t(e)}}var Js=H$;var UE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,zc=UE&&typeof module=="object"&&module&&!module.nodeType&&module,V$=zc&&zc.exports===UE,pT=V$&&Nu.process,B$=function(){try{var t=zc&&zc.require&&zc.require("util").types;return t||pT&&pT.binding&&pT.binding("util")}catch{}}(),uT=B$;var HE=uT&&uT.isTypedArray,W$=HE?Js(HE):LE,Yu=W$;var $$=Object.prototype,j$=$$.hasOwnProperty;function q$(t,e){var r=qe(t),n=!r&&Xs(t),i=!r&&!n&&qc(t),o=!r&&!n&&!i&&Yu(t),a=r||n||i||o,l=a?Zu(t.length,String):[],p=l.length;for(var u in t)(e||j$.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ks(u,p)))&&l.push(u);return l}var VE=q$;function z$(t,e){return function(r){return t(e(r))}}var BE=z$;var G$=BE(Object.keys,Object),WE=G$;var K$=Object.prototype,Q$=K$.hasOwnProperty;function Z$(t){if(!DE(t))return WE(t);var e=[];for(var r in Object(t))Q$.call(t,r)&&r!="constructor"&&e.push(r);return e}var $E=Z$;function Y$(t){return jn(t)?VE(t):$E(t)}var Zi=Y$;var X$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J$=/^\w*$/;function ej(t,e){if(qe(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Or(t)?!0:J$.test(t)||!X$.test(t)||e!=null&&t in Object(e)}var ea=ej;var tj=xr(Object,"create"),vi=tj;function rj(){this.__data__=vi?vi(null):{},this.size=0}var jE=rj;function nj(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var qE=nj;var ij="__lodash_hash_undefined__",oj=Object.prototype,sj=oj.hasOwnProperty;function aj(t){var e=this.__data__;if(vi){var r=e[t];return r===ij?void 0:r}return sj.call(e,t)?e[t]:void 0}var zE=aj;var cj=Object.prototype,lj=cj.hasOwnProperty;function pj(t){var e=this.__data__;return vi?e[t]!==void 0:lj.call(e,t)}var GE=pj;var uj="__lodash_hash_undefined__";function fj(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=vi&&e===void 0?uj:e,this}var KE=fj;function ta(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ta.prototype.clear=jE;ta.prototype.delete=qE;ta.prototype.get=zE;ta.prototype.has=GE;ta.prototype.set=KE;var fT=ta;function dj(){this.__data__=[],this.size=0}var QE=dj;function mj(t,e){for(var r=t.length;r--;)if(Qs(t[r][0],e))return r;return-1}var Yi=mj;var hj=Array.prototype,gj=hj.splice;function yj(t){var e=this.__data__,r=Yi(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():gj.call(e,r,1),--this.size,!0}var ZE=yj;function xj(t){var e=this.__data__,r=Yi(e,t);return r<0?void 0:e[r][1]}var YE=xj;function Tj(t){return Yi(this.__data__,t)>-1}var XE=Tj;function Sj(t,e){var r=this.__data__,n=Yi(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var JE=Sj;function ra(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ra.prototype.clear=QE;ra.prototype.delete=ZE;ra.prototype.get=YE;ra.prototype.has=XE;ra.prototype.set=JE;var Xi=ra;var vj=xr(kt,"Map"),Ji=vj;function bj(){this.size=0,this.__data__={hash:new fT,map:new(Ji||Xi),string:new fT}}var eR=bj;function wj(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var tR=wj;function _j(t,e){var r=t.__data__;return tR(e)?r[typeof e=="string"?"string":"hash"]:r.map}var eo=_j;function Ej(t){var e=eo(this,t).delete(t);return this.size-=e?1:0,e}var rR=Ej;function Rj(t){return eo(this,t).get(t)}var nR=Rj;function kj(t){return eo(this,t).has(t)}var iR=kj;function Pj(t,e){var r=eo(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var oR=Pj;function na(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}na.prototype.clear=eR;na.prototype.delete=rR;na.prototype.get=nR;na.prototype.has=iR;na.prototype.set=oR;var $o=na;var Mj="Expected a function";function dT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Mj);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(dT.Cache||$o),r}dT.Cache=$o;var Gc=dT;var Aj=500;function Dj(t){var e=Gc(t,function(n){return r.size===Aj&&r.clear(),n}),r=e.cache;return e}var sR=Dj;var Ij=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fj=/\\(\\)?/g,Cj=sR(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Ij,function(r,n,i,o){e.push(i?o.replace(Fj,"$1"):n||r)}),e}),aR=Cj;function Oj(t){return t==null?"":pE(t)}var An=Oj;function Nj(t,e){return qe(t)?t:ea(t,e)?[t]:aR(An(t))}var Xu=Nj;var Lj=1/0;function Uj(t){if(typeof t=="string"||Or(t))return t;var e=t+"";return e=="0"&&1/t==-Lj?"-0":e}var to=Uj;function Hj(t,e){e=Xu(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[to(e[r++])];return r&&r==n?t:void 0}var ia=Hj;function Vj(t,e,r){var n=t==null?void 0:ia(t,e);return n===void 0?r:n}var jo=Vj;function Bj(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var oa=Bj;var cR=Jt?Jt.isConcatSpreadable:void 0;function Wj(t){return qe(t)||Xs(t)||!!(cR&&t&&t[cR])}var lR=Wj;function pR(t,e,r,n,i){var o=-1,a=t.length;for(r||(r=lR),i||(i=[]);++o<a;){var l=t[o];e>0&&r(l)?e>1?pR(l,e-1,r,n,i):oa(i,l):n||(i[i.length]=l)}return i}var sa=pR;function $j(t){var e=t==null?0:t.length;return e?sa(t,1):[]}var Je=$j;function jj(t){return zu(Qu(t,void 0,Je),t+"")}var uR=jj;function qj(t){return function(e){return t?.[e]}}var fR=qj;var zj={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Gj=fR(zj),dR=Gj;var Kj=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qj="\\u0300-\\u036f",Zj="\\ufe20-\\ufe2f",Yj="\\u20d0-\\u20ff",Xj=Qj+Zj+Yj,Jj="["+Xj+"]",eq=RegExp(Jj,"g");function tq(t){return t=An(t),t&&t.replace(Kj,dR).replace(eq,"")}var mT=tq;function rq(){this.__data__=new Xi,this.size=0}var mR=rq;function nq(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var hR=nq;function iq(t){return this.__data__.get(t)}var gR=iq;function oq(t){return this.__data__.has(t)}var yR=oq;var sq=200;function aq(t,e){var r=this.__data__;if(r instanceof Xi){var n=r.__data__;if(!Ji||n.length<sq-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new $o(n)}return r.set(t,e),this.size=r.size,this}var xR=aq;function aa(t){var e=this.__data__=new Xi(t);this.size=e.size}aa.prototype.clear=mR;aa.prototype.delete=hR;aa.prototype.get=gR;aa.prototype.has=yR;aa.prototype.set=xR;var ca=aa;function cq(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}var Ju=cq;function lq(){return[]}var TR=lq;var pq=Object.prototype,uq=pq.propertyIsEnumerable,SR=Object.getOwnPropertySymbols,fq=SR?function(t){return t==null?[]:(t=Object(t),Ju(SR(t),function(e){return uq.call(t,e)}))}:TR,vR=fq;function dq(t,e,r){var n=e(t);return qe(t)?n:oa(n,r(t))}var bR=dq;function mq(t){return bR(t,Zi,vR)}var hT=mq;var hq=xr(kt,"DataView"),ef=hq;var gq=xr(kt,"Promise"),tf=gq;var yq=xr(kt,"Set"),ro=yq;var wR="[object Map]",xq="[object Object]",_R="[object Promise]",ER="[object Set]",RR="[object WeakMap]",kR="[object DataView]",Tq=Si(ef),Sq=Si(Ji),vq=Si(tf),bq=Si(ro),wq=Si(Bo),qo=Mn;(ef&&qo(new ef(new ArrayBuffer(1)))!=kR||Ji&&qo(new Ji)!=wR||tf&&qo(tf.resolve())!=_R||ro&&qo(new ro)!=ER||Bo&&qo(new Bo)!=RR)&&(qo=function(t){var e=Mn(t),r=e==xq?t.constructor:void 0,n=r?Si(r):"";if(n)switch(n){case Tq:return kR;case Sq:return wR;case vq:return _R;case bq:return ER;case wq:return RR}return e});var gT=qo;var _q=kt.Uint8Array,yT=_q;function Eq(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return oa(qe(r)?Qi(r):[r],sa(e,1))}var Kc=Eq;var Rq="__lodash_hash_undefined__";function kq(t){return this.__data__.set(t,Rq),this}var PR=kq;function Pq(t){return this.__data__.has(t)}var MR=Pq;function rf(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new $o;++e<r;)this.add(t[e])}rf.prototype.add=rf.prototype.push=PR;rf.prototype.has=MR;var nf=rf;function Mq(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var AR=Mq;function Aq(t,e){return t.has(e)}var of=Aq;var Dq=1,Iq=2;function Fq(t,e,r,n,i,o){var a=r&Dq,l=t.length,p=e.length;if(l!=p&&!(a&&p>l))return!1;var u=o.get(t),d=o.get(e);if(u&&d)return u==e&&d==t;var m=-1,g=!0,x=r&Iq?new nf:void 0;for(o.set(t,e),o.set(e,t);++m<l;){var b=t[m],v=e[m];if(n)var F=a?n(v,b,m,e,t,o):n(b,v,m,t,e,o);if(F!==void 0){if(F)continue;g=!1;break}if(x){if(!AR(e,function(I,U){if(!of(x,U)&&(b===I||i(b,I,r,n,o)))return x.push(U)})){g=!1;break}}else if(!(b===v||i(b,v,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var sf=Fq;function Cq(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var DR=Cq;function Oq(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var la=Oq;var Nq=1,Lq=2,Uq="[object Boolean]",Hq="[object Date]",Vq="[object Error]",Bq="[object Map]",Wq="[object Number]",$q="[object RegExp]",jq="[object Set]",qq="[object String]",zq="[object Symbol]",Gq="[object ArrayBuffer]",Kq="[object DataView]",IR=Jt?Jt.prototype:void 0,xT=IR?IR.valueOf:void 0;function Qq(t,e,r,n,i,o,a){switch(r){case Kq:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Gq:return!(t.byteLength!=e.byteLength||!o(new yT(t),new yT(e)));case Uq:case Hq:case Wq:return Qs(+t,+e);case Vq:return t.name==e.name&&t.message==e.message;case $q:case qq:return t==e+"";case Bq:var l=DR;case jq:var p=n&Nq;if(l||(l=la),t.size!=e.size&&!p)return!1;var u=a.get(t);if(u)return u==e;n|=Lq,a.set(t,e);var d=sf(l(t),l(e),n,i,o,a);return a.delete(t),d;case zq:if(xT)return xT.call(t)==xT.call(e)}return!1}var FR=Qq;var Zq=1,Yq=Object.prototype,Xq=Yq.hasOwnProperty;function Jq(t,e,r,n,i,o){var a=r&Zq,l=hT(t),p=l.length,u=hT(e),d=u.length;if(p!=d&&!a)return!1;for(var m=p;m--;){var g=l[m];if(!(a?g in e:Xq.call(e,g)))return!1}var x=o.get(t),b=o.get(e);if(x&&b)return x==e&&b==t;var v=!0;o.set(t,e),o.set(e,t);for(var F=a;++m<p;){g=l[m];var I=t[g],U=e[g];if(n)var K=a?n(U,I,g,e,t,o):n(I,U,g,t,e,o);if(!(K===void 0?I===U||i(I,U,r,n,o):K)){v=!1;break}F||(F=g=="constructor")}if(v&&!F){var ne=t.constructor,ie=e.constructor;ne!=ie&&"constructor"in t&&"constructor"in e&&!(typeof ne=="function"&&ne instanceof ne&&typeof ie=="function"&&ie instanceof ie)&&(v=!1)}return o.delete(t),o.delete(e),v}var CR=Jq;var e3=1,OR="[object Arguments]",NR="[object Array]",af="[object Object]",t3=Object.prototype,LR=t3.hasOwnProperty;function r3(t,e,r,n,i,o){var a=qe(t),l=qe(e),p=a?NR:gT(t),u=l?NR:gT(e);p=p==OR?af:p,u=u==OR?af:u;var d=p==af,m=u==af,g=p==u;if(g&&qc(t)){if(!qc(e))return!1;a=!0,d=!1}if(g&&!d)return o||(o=new ca),a||Yu(t)?sf(t,e,r,n,i,o):FR(t,e,p,r,n,i,o);if(!(r&e3)){var x=d&&LR.call(t,"__wrapped__"),b=m&&LR.call(e,"__wrapped__");if(x||b){var v=x?t.value():t,F=b?e.value():e;return o||(o=new ca),i(v,F,r,n,o)}}return g?(o||(o=new ca),CR(t,e,r,n,i,o)):!1}var UR=r3;function HR(t,e,r,n,i){return t===e?!0:t==null||e==null||!er(t)&&!er(e)?t!==t&&e!==e:UR(t,e,r,n,HR,i)}var pa=HR;var n3=1,i3=2;function o3(t,e,r,n){var i=r.length,o=i,a=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var p=l[0],u=t[p],d=l[1];if(a&&l[2]){if(u===void 0&&!(p in t))return!1}else{var m=new ca;if(n)var g=n(u,d,p,t,e,m);if(!(g===void 0?pa(d,u,n3|i3,n,m):g))return!1}}return!0}var VR=o3;function s3(t){return t===t&&!Nr(t)}var cf=s3;function a3(t){for(var e=Zi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,cf(i)]}return e}var BR=a3;function c3(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var lf=c3;function l3(t){var e=BR(t);return e.length==1&&e[0][2]?lf(e[0][0],e[0][1]):function(r){return r===t||VR(r,t,e)}}var WR=l3;function p3(t,e){return t!=null&&e in Object(t)}var $R=p3;function u3(t,e,r){e=Xu(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var a=to(e[n]);if(!(o=t!=null&&r(t,a)))break;t=t[a]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Ys(i)&&Ks(a,i)&&(qe(t)||Xs(t)))}var jR=u3;function f3(t,e){return t!=null&&jR(t,e,$R)}var qR=f3;var d3=1,m3=2;function h3(t,e){return ea(t)&&cf(e)?lf(to(t),e):function(r){var n=jo(r,t);return n===void 0&&n===e?qR(r,t):pa(e,n,d3|m3)}}var zR=h3;function g3(t){return function(e){return e?.[t]}}var pf=g3;function y3(t){return function(e){return ia(e,t)}}var GR=y3;function x3(t){return ea(t)?pf(to(t)):GR(t)}var KR=x3;function T3(t){return typeof t=="function"?t:t==null?yr:typeof t=="object"?qe(t)?zR(t[0],t[1]):WR(t):KR(t)}var no=T3;function S3(t){return function(e,r,n){for(var i=-1,o=Object(e),a=n(e),l=a.length;l--;){var p=a[t?l:++i];if(r(o[p],p,o)===!1)break}return e}}var QR=S3;var v3=QR(),ZR=v3;function b3(t,e){return t&&ZR(t,e,Zi)}var YR=b3;function w3(t,e){return function(r,n){if(r==null)return r;if(!jn(r))return t(r,n);for(var i=r.length,o=e?i:-1,a=Object(r);(e?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}var XR=w3;var _3=XR(YR),JR=_3;function E3(t){return er(t)&&jn(t)}var ek=E3;function R3(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var tk=R3;function k3(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var uf=k3;var rk=/[\\^$.*+?()[\]{}|]/g,P3=RegExp(rk.source);function M3(t){return t=An(t),t&&P3.test(t)?t.replace(rk,"\\$&"):t}var Lr=M3;var A3=Math.max,D3=Math.min;function I3(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=Lu(r),i=r<0?A3(n+i,0):D3(i,n-1)),Gu(t,no(e,3),i,!0)}var zo=I3;function F3(t,e){var r=-1,n=jn(t)?Array(t.length):[];return JR(t,function(i,o,a){n[++r]=e(i,o,a)}),n}var nk=F3;var C3="Expected a function",O3=8,N3=32,L3=128,U3=256;function H3(t){return uR(function(e){var r=e.length,n=r,i=Ki.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(C3);if(i&&!a&&Gs(o)=="wrapper")var a=new Ki([],!0)}for(n=a?n:r;++n<r;){o=e[n];var l=Gs(o),p=l=="wrapper"?$u(o):void 0;p&&aT(p[0])&&p[1]==(L3|O3|N3|U3)&&!p[4].length&&p[9]==1?a=a[Gs(p[0])].apply(a,p[3]):a=o.length==1&&aT(o)?a[l]():a.thru(o)}return function(){var u=arguments,d=u[0];if(a&&u.length==1&&qe(d))return a.plant(d).value();for(var m=0,g=r?e[m].apply(this,u):d;++m<r;)g=e[m].call(this,g);return g}})}var ik=H3;var V3=ik(),TT=V3;function B3(t,e){return t>e}var ok=B3;function W3(t,e){return on(e,function(r){return t[r]})}var sk=W3;function $3(t){return t==null?[]:sk(t,Zi(t))}var ak=$3;function j3(t,e){return pa(t,e)}var bi=j3;function q3(t,e){return t<e}var ck=q3;function z3(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],a=e(o);if(a!=null&&(l===void 0?a===a&&!Or(a):r(a,l)))var l=a,p=o}return p}var ff=z3;function G3(t,e){return t&&t.length?ff(t,no(e,2),ok):void 0}var ST=G3;function K3(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var lk=K3;function Q3(t){return t&&t.length?ff(t,yr,ck):void 0}var vT=Q3;function Z3(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var pk=Z3;function Y3(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Or(t),a=e!==void 0,l=e===null,p=e===e,u=Or(e);if(!l&&!u&&!o&&t>e||o&&a&&p&&!l&&!u||n&&a&&p||!r&&p||!i)return 1;if(!n&&!o&&!u&&t<e||u&&r&&i&&!n&&!o||l&&r&&i||!a&&i||!p)return-1}return 0}var uk=Y3;function X3(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,a=i.length,l=r.length;++n<a;){var p=uk(i[n],o[n]);if(p){if(n>=l)return p;var u=r[n];return p*(u=="desc"?-1:1)}}return t.index-e.index}var fk=X3;function J3(t,e,r){e.length?e=on(e,function(o){return qe(o)?function(a){return ia(a,o.length===1?o[0]:o)}:o}):e=[yr];var n=-1;e=on(e,Js(no));var i=nk(t,function(o,a,l){var p=on(e,function(u){return u(o)});return{criteria:p,index:++n,value:o}});return pk(i,function(o,a){return fk(o,a,r)})}var dk=J3;var ez=9007199254740991,tz=Math.floor;function rz(t,e){var r="";if(!t||e<1||e>ez)return r;do e%2&&(r+=t),e=tz(e/2),e&&(t+=t);while(e);return r}var mk=rz;function nz(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var hk=nz;var iz=Array.prototype,gk=iz.splice;function oz(t,e,r,n){var i=n?hk:Ku,o=-1,a=e.length,l=t;for(t===e&&(e=Qi(e)),r&&(l=on(t,Js(r)));++o<a;)for(var p=0,u=e[o],d=r?r(u):u;(p=i(l,d,p,n))>-1;)l!==t&&gk.call(l,p,1),gk.call(t,p,1);return t}var yk=oz;function sz(t,e){return t&&t.length&&e&&e.length?yk(t,e):t}var xk=sz;var az=Zs(xk),tr=az;var cz=Math.floor,lz=Math.random;function pz(t,e){return t+cz(lz()*(e-t+1))}var Tk=pz;var uz=Math.ceil,fz=Math.max;function dz(t,e,r,n){for(var i=-1,o=fz(uz((e-t)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=t,t+=r;return a}var Sk=dz;function mz(t){return function(e,r,n){return n&&typeof n!="number"&&Wo(e,r,n)&&(r=n=void 0),e=js(e),r===void 0?(r=e,e=0):r=js(r),n=n===void 0?e<r?1:-1:js(n),Sk(e,r,n,t)}}var vk=mz;var hz=vk(),bT=hz;function gz(t,e,r){return(r?Wo(t,e,r):e===void 0)?e=1:e=Lu(e),mk(An(t),e)}var wT=gz;function yz(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=Tk(r,i),a=t[o];t[o]=t[r],t[r]=a}return t.length=e,t}var df=yz;function xz(t){return df(Qi(t))}var bk=xz;function Tz(t){return df(ak(t))}var wk=Tz;function Sz(t){var e=qe(t)?bk:wk;return e(t)}var _T=Sz;var vz=Zs(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Wo(t,e[0],e[1])?e=[]:r>2&&Wo(e[0],e[1],e[2])&&(e=[e[0]]),dk(t,sa(e,1),[])}),ET=vz;function bz(t,e){return t&&t.length?lk(t,no(e,2)):0}var mf=bz;var wz=1/0,_z=ro&&1/la(new ro([,-0]))[1]==wz?function(t){return new ro(t)}:Wu,_k=_z;var Ez=200;function Rz(t,e,r){var n=-1,i=ME,o=t.length,a=!0,l=[],p=l;if(r)a=!1,i=tk;else if(o>=Ez){var u=e?null:_k(t);if(u)return la(u);a=!1,i=of,p=new nf}else p=e?[]:l;e:for(;++n<o;){var d=t[n],m=e?e(d):d;if(d=r||d!==0?d:0,a&&m===m){for(var g=p.length;g--;)if(p[g]===m)continue e;e&&p.push(m),l.push(d)}else i(p,m,r)||(p!==l&&p.push(m),l.push(d))}return l}var hf=Rz;function kz(t){return t&&t.length?hf(t):[]}var Go=kz;function Pz(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?hf(t,void 0,e):[]}var Qc=Pz;var Mz=Math.max;function Az(t){if(!(t&&t.length))return[];var e=0;return t=Ju(t,function(r){if(ek(r))return e=Mz(r.length,e),!0}),Zu(e,function(r){return on(t,pf(r))})}var Ek=Az;var Dz=Zs(Ek),vt=Dz;var gf=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0}}};var Zc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Vt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{tr(this.listeners,e)}}}};var yf={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var Yc=class{constructor(){this.notifier=new Vt;this.mocks={...yf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(Fz(n,r))return jo(i,e)??jo(this.mocks,e)}return jo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function Fz(t,e){return t.languageId===e.languageId}var xf={hideInferenceWarning:!1,tutorialProgress:{}};var Xc=class{constructor(){this.data={...xf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var Jc=class{async showMessage(e,r,n,...i){}};var Tf=class{constructor(){this.configuration=new Yc;this.messages=new Jc;this.keyValueStore=new Xc;this.clipboard=new Zc;this.capabilities=new gf;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=ua;this.onDidCloseTextDocument=ua;this.onDidChangeActiveTextEditor=ua;this.onDidChangeVisibleTextEditors=ua;this.onDidChangeTextEditorSelection=ua;this.onDidChangeTextEditorVisibleRanges=ua}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>tr(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function ua(){return{dispose(){}}}var pe=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new W(this,this)}concise(){return`${this.line}:${this.character}`}conciseOneBased(){return`${this.line+1}:${this.character+1}`}toString(){return this.concise()}};function Rk(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var W=class t{constructor(...e){let[r,n]=e.length===2?e:[new pe(e[0],e[1]),new pe(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof pe?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new be(this.end,this.start):new be(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}-${this.end.conciseOneBased()}`}toString(){return`${this.start.concise()}-${this.end.concise()}`}};function Cz(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function Oz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function kk(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var Sf=kk(Cz),vf=kk(Oz);function RT(t,e){return e.lastIndex=0,t.matchAll(e)}function sn(t,e,r){return Array.from(RT(t,e),r)}function Ko(t,e){return t.lastIndex=0,t.test(e)}function Pk(t,e){return t.lastIndex=0,e.match(t)}function el(t,e){return sn(t,e,r=>({index:r.index,text:r[0]}))}var fa=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var bf=class extends fa{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function tl(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function st(t,e,r,...n){return t.showMessage("error",e,r,...n)}var se=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(se||{});var{supported:tt,unsupported:rpe,notApplicable:Mk}=se,kT={ifStatement:tt,disqualifyDelimiter:tt,"comment.line":tt,"comment.block":tt,"string.singleLine":tt,"textFragment.comment.line":tt,"textFragment.comment.block":tt,"textFragment.string.singleLine":tt,class:tt,className:tt,namedFunction:tt,"name.function":tt,"name.class":tt,"name.field":tt,functionName:tt,"name.argument.formal":tt,"name.argument.formal.iteration":tt,"name.variable":tt,"value.variable":tt,"name.assignment":tt,"value.assignment":tt,"statement.class":tt,"type.class":tt,"type.field":tt,"value.argument.formal":Mk,"value.argument.formal.iteration":Mk};var{supported:ope,unsupported:spe,notApplicable:ape}=se;var{supported:Ak,unsupported:upe,notApplicable:fpe}=se,Nz={...kT,"value.argument.formal":Ak,"value.argument.formal.iteration":Ak};var{supported:hpe,unsupported:gpe,notApplicable:ype}=se;var{supported:rl,unsupported:Lz,notApplicable:Spe}=se,PT={"comment.block":rl,"string.singleLine":rl,"name.iteration.block":rl,"name.iteration.document":rl,disqualifyDelimiter:rl,"comment.line":Lz};var{supported:wpe,unsupported:_pe,notApplicable:Epe}=se;var{supported:Ppe,unsupported:Mpe,notApplicable:Ape}=se;var{supported:Fpe,notApplicable:Cpe}=se;var{supported:Lpe,notApplicable:Upe}=se;var{supported:q,unsupported:Bpe,notApplicable:an}=se,MT={list:q,map:q,ifStatement:q,regularExpression:q,switchStatementSubject:q,fieldAccess:q,disqualifyDelimiter:q,pairDelimiter:q,"textFragment.string.singleLine":q,"textFragment.string.multiLine":q,"textFragment.comment.line":q,"textFragment.comment.block":q,statement:q,"statement.iteration.document":q,"statement.iteration.block":q,class:q,className:q,anonymousFunction:q,namedFunction:q,"namedFunction.iteration.document":q,"namedFunction.method":q,"namedFunction.method.iteration.class":q,"namedFunction.constructor":q,functionName:q,"functionName.iteration.document":q,"functionName.method":q,"functionName.method.iteration.class":q,"functionName.constructor":q,functionCall:q,"functionCall.constructor":q,functionCallee:q,"functionCallee.constructor":q,"argument.actual":q,"argument.actual.iteration":q,"argument.actual.method":q,"argument.actual.method.iteration":q,"argument.actual.constructor":q,"argument.actual.constructor.iteration":q,"argument.formal":q,"argument.formal.iteration":q,"argument.formal.method":q,"argument.formal.method.iteration":q,"argument.formal.constructor":q,"argument.formal.constructor.iteration":q,"comment.line":q,"comment.block":q,"string.singleLine":q,"string.multiLine":q,"branch.if":q,"branch.if.iteration":q,"branch.try":q,"branch.switchCase":q,"branch.switchCase.iteration":q,"branch.ternary":q,"condition.if":q,"condition.while":q,"condition.doWhile":q,"condition.for":q,"condition.ternary":q,"condition.switchCase":q,"name.argument.formal":q,"name.argument.formal.iteration":q,"name.argument.formal.method":q,"name.argument.formal.method.iteration":q,"name.argument.formal.constructor":q,"name.argument.formal.constructor.iteration":q,"name.foreach":q,"name.assignment":q,"name.assignment.pattern":q,"name.variable":q,"name.variable.pattern":q,"name.function":q,"name.method":q,"name.constructor":q,"name.class":q,"name.field":q,"key.mapPair":q,"key.mapPair.iteration":q,"value.argument.formal":q,"value.argument.formal.iteration":q,"value.argument.formal.method":q,"value.argument.formal.method.iteration":q,"value.argument.formal.constructor":q,"value.argument.formal.constructor.iteration":q,"value.mapPair":q,"value.mapPair.iteration":q,"value.assignment":q,"value.variable":q,"value.variable.pattern":q,"value.foreach":q,"value.return":q,"value.return.lambda":q,"value.field":q,"collectionItem.unenclosed":q},AT={element:q,tags:q,startTag:q,endTag:q,attribute:q,"key.attribute":q,"value.attribute":q,"interior.element":q},DT={...MT,...AT,"type.variable":an,"type.argument.formal":an,"type.argument.formal.iteration":an,"type.argument.formal.method":an,"type.argument.formal.method.iteration":an,"type.argument.formal.constructor":an,"type.argument.formal.constructor.iteration":an,"type.return":an,"type.field":an,"type.foreach":an,"type.interface":an,command:an};var{supported:Uz,unsupported:qpe,notApplicable:zpe}=se,Hz={...DT,"textFragment.element":Uz};var{supported:IT}=se,nl={"comment.line":IT,"comment.block":IT,map:IT};var{supported:Xpe,unsupported:Jpe,notApplicable:eue}=se,Vz={...nl};var{supported:iue,unsupported:oue,notApplicable:sue}=se,Bz={...nl};var{supported:lue,unsupported:pue,notApplicable:uue}=se;var{supported:mue,notApplicable:hue}=se;var{supported:xue,unsupported:Tue,notApplicable:Sue}=se;var{supported:wue,unsupported:_ue,notApplicable:Eue}=se;var{supported:Pue,notApplicable:Mue}=se;var{supported:Iue,unsupported:Fue,notApplicable:Cue}=se;var{supported:Lue,unsupported:Uue,notApplicable:Hue}=se;var{supported:Wue,unsupported:$ue,notApplicable:jue}=se;var{supported:Gue,unsupported:Kue,notApplicable:Que}=se;var{supported:da,unsupported:Jue,notApplicable:efe}=se,Wz={...PT,"namedFunction.iteration":da,"namedFunction.iteration.document":da,"functionName.iteration":da,"functionName.iteration.document":da,"comment.line":da,disqualifyDelimiter:da};var{supported:nfe}=se;var{supported:Ft}=se,FT={...MT,"name.field":Ft,"type.argument.formal":Ft,"type.argument.formal.iteration":Ft,"type.argument.formal.method":Ft,"type.argument.formal.method.iteration":Ft,"type.argument.formal.constructor":Ft,"type.argument.formal.constructor.iteration":Ft,"type.alias":Ft,"type.cast":Ft,"type.field":Ft,"type.interface":Ft,"type.enum":Ft,"type.return":Ft,"type.variable":Ft,"value.field":Ft,"value.typeAlias":Ft,disqualifyDelimiter:Ft};var{supported:ufe,unsupported:ffe,notApplicable:dfe}=se,$z={...FT,...AT};var{supported:gfe,unsupported:yfe,notApplicable:xfe}=se;var{supported:vfe,unsupported:bfe,notApplicable:wfe}=se;var ma=["that","source","instanceReference","keyboard"];var be=class extends W{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new pe(e[0],e[1]),new pe(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}->${this.end.conciseOneBased()}`}toString(){return this.concise()}};function Ik({line:t,character:e}){return new pe(t,e)}function wf({start:t,end:e}){return new W(Ik(t),Ik(e))}function Ur({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function rr({start:t,end:e}){return{type:"character",start:t,end:e}}function il(t){return{start:_f(t.start),end:_f(t.end)}}function Fk(t){return{anchor:_f(t.anchor),active:_f(t.active)}}function _f({line:t,character:e}){return{line:t,character:e}}function Yk(t){return typeof t>"u"||t===null}function jz(t){return typeof t=="object"&&t!==null}function qz(t){return Array.isArray(t)?t:Yk(t)?[]:[t]}function zz(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function Gz(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function Kz(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Qz=Yk,Zz=jz,Yz=qz,Xz=Gz,Jz=Kz,eG=zz,bt={isNothing:Qz,isObject:Zz,toArray:Yz,repeat:Xz,isNegativeZero:Jz,extend:eG};function Xk(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function sl(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Xk(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}sl.prototype=Object.create(Error.prototype);sl.prototype.constructor=sl;sl.prototype.toString=function(e){return this.name+": "+Xk(this,e)};var Tr=sl;function CT(t,e,r,n,i){var o="",a="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(a=" ...",r=n+l-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}function OT(t,e){return bt.repeat(" ",e-t.length)+t}function tG(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var l="",p,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,m=e.maxLength-(e.indent+d+3);for(p=1;p<=e.linesBefore&&!(a-p<0);p++)u=CT(t.buffer,n[a-p],i[a-p],t.position-(n[a]-n[a-p]),m),l=bt.repeat(" ",e.indent)+OT((t.line-p+1).toString(),d)+" | "+u.str+`
`+l;for(u=CT(t.buffer,n[a],i[a],t.position,m),l+=bt.repeat(" ",e.indent)+OT((t.line+1).toString(),d)+" | "+u.str+`
`,l+=bt.repeat("-",e.indent+d+3+u.pos)+`^
`,p=1;p<=e.linesAfter&&!(a+p>=i.length);p++)u=CT(t.buffer,n[a+p],i[a+p],t.position-(n[a]-n[a+p]),m),l+=bt.repeat(" ",e.indent)+OT((t.line+p+1).toString(),d)+" | "+u.str+`
`;return l.replace(/\n$/,"")}var rG=tG,nG=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],iG=["scalar","sequence","mapping"];function oG(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function sG(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(nG.indexOf(r)===-1)throw new Tr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=oG(e.styleAliases||null),iG.indexOf(this.kind)===-1)throw new Tr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ct=sG;function Nk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}function aG(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function LT(t){return this.extend(t)}LT.prototype.extend=function(e){var r=[],n=[];if(e instanceof Ct)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Tr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Ct))throw new Tr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Tr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Tr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Ct))throw new Tr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(LT.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Nk(i,"implicit"),i.compiledExplicit=Nk(i,"explicit"),i.compiledTypeMap=aG(i.compiledImplicit,i.compiledExplicit),i};var cG=LT,lG=new Ct("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),pG=new Ct("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),uG=new Ct("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),fG=new cG({explicit:[lG,pG,uG]});function dG(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function mG(){return null}function hG(t){return t===null}var gG=new Ct("tag:yaml.org,2002:null",{kind:"scalar",resolve:dG,construct:mG,predicate:hG,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function yG(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function xG(t){return t==="true"||t==="True"||t==="TRUE"}function TG(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var SG=new Ct("tag:yaml.org,2002:bool",{kind:"scalar",resolve:yG,construct:xG,predicate:TG,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function vG(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function bG(t){return 48<=t&&t<=55}function wG(t){return 48<=t&&t<=57}function _G(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!vG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!bG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!wG(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function EG(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function RG(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!bt.isNegativeZero(t)}var kG=new Ct("tag:yaml.org,2002:int",{kind:"scalar",resolve:_G,construct:EG,predicate:RG,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),PG=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function MG(t){return!(t===null||!PG.test(t)||t[t.length-1]==="_")}function AG(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var DG=/^[-+]?[0-9]+e/;function IG(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(bt.isNegativeZero(t))return"-0.0";return r=t.toString(10),DG.test(r)?r.replace("e",".e"):r}function FG(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||bt.isNegativeZero(t))}var CG=new Ct("tag:yaml.org,2002:float",{kind:"scalar",resolve:MG,construct:AG,predicate:FG,represent:IG,defaultStyle:"lowercase"}),OG=fG.extend({implicit:[gG,SG,kG,CG]}),NG=OG,Jk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),eP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function LG(t){return t===null?!1:Jk.exec(t)!==null||eP.exec(t)!==null}function UG(t){var e,r,n,i,o,a,l,p=0,u=null,d,m,g;if(e=Jk.exec(t),e===null&&(e=eP.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],l=+e[6],e[7]){for(p=e[7].slice(0,3);p.length<3;)p+="0";p=+p}return e[9]&&(d=+e[10],m=+(e[11]||0),u=(d*60+m)*6e4,e[9]==="-"&&(u=-u)),g=new Date(Date.UTC(r,n,i,o,a,l,p)),u&&g.setTime(g.getTime()-u),g}function HG(t){return t.toISOString()}var VG=new Ct("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:LG,construct:UG,instanceOf:Date,represent:HG});function BG(t){return t==="<<"||t===null}var WG=new Ct("tag:yaml.org,2002:merge",{kind:"scalar",resolve:BG}),WT=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function $G(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=WT;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function jG(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=WT,a=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):r===18?(l.push(a>>10&255),l.push(a>>2&255)):r===12&&l.push(a>>4&255),new Uint8Array(l)}function qG(t){var e="",r=0,n,i,o=t.length,a=WT;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}function zG(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var GG=new Ct("tag:yaml.org,2002:binary",{kind:"scalar",resolve:$G,construct:jG,predicate:zG,represent:qG}),KG=Object.prototype.hasOwnProperty,QG=Object.prototype.toString;function ZG(t){if(t===null)return!0;var e=[],r,n,i,o,a,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],a=!1,QG.call(i)!=="[object Object]")return!1;for(o in i)if(KG.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function YG(t){return t!==null?t:[]}var XG=new Ct("tag:yaml.org,2002:omap",{kind:"sequence",resolve:ZG,construct:YG}),JG=Object.prototype.toString;function eK(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],JG.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function tK(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var rK=new Ct("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:eK,construct:tK}),nK=Object.prototype.hasOwnProperty;function iK(t){if(t===null)return!0;var e,r=t;for(e in r)if(nK.call(r,e)&&r[e]!==null)return!1;return!0}function oK(t){return t!==null?t:{}}var sK=new Ct("tag:yaml.org,2002:set",{kind:"mapping",resolve:iK,construct:oK}),$T=NG.extend({implicit:[VG,WG],explicit:[GG,XG,rK,sK]}),oo=Object.prototype.hasOwnProperty,Ef=1,tP=2,rP=3,Rf=4,NT=1,aK=2,Lk=3,cK=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,lK=/[\x85\u2028\u2029]/,pK=/[,\[\]\{\}]/,nP=/^(?:!|!!|![a-z\-]+!)$/i,iP=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Uk(t){return Object.prototype.toString.call(t)}function qn(t){return t===10||t===13}function Zo(t){return t===9||t===32}function Sr(t){return t===9||t===32||t===10||t===13}function ga(t){return t===44||t===91||t===93||t===123||t===125}function uK(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function fK(t){return t===120?2:t===117?4:t===85?8:0}function dK(t){return 48<=t&&t<=57?t-48:-1}function Hk(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function mK(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var oP=new Array(256),sP=new Array(256);for(Qo=0;Qo<256;Qo++)oP[Qo]=Hk(Qo)?1:0,sP[Qo]=Hk(Qo);var Qo;function hK(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||$T,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function aP(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=rG(r),new Tr(e,r)}function le(t,e){throw aP(t,e)}function kf(t,e){t.onWarning&&t.onWarning.call(null,aP(t,e))}var Vk={YAML:function(e,r,n){var i,o,a;e.version!==null&&le(e,"duplication of %YAML directive"),n.length!==1&&le(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&le(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&le(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&kf(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&le(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],nP.test(i)||le(e,"ill-formed tag handle (first argument) of the TAG directive"),oo.call(e.tagMap,i)&&le(e,'there is a previously declared suffix for "'+i+'" tag handle'),iP.test(o)||le(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{le(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function io(t,e,r,n){var i,o,a,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||le(t,"expected valid JSON character");else cK.test(l)&&le(t,"the stream contains non-printable characters");t.result+=l}}function Bk(t,e,r,n){var i,o,a,l;for(bt.isObject(r)||le(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,l=i.length;a<l;a+=1)o=i[a],oo.call(e,o)||(e[o]=r[o],n[o]=!0)}function ya(t,e,r,n,i,o,a,l,p){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&le(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Uk(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Uk(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)Bk(t,e,o[u],r);else Bk(t,e,o,r);else!t.json&&!oo.call(r,i)&&oo.call(e,i)&&(t.line=a||t.line,t.lineStart=l||t.lineStart,t.position=p||t.position,le(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function jT(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):le(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function xt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Zo(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(qn(i))for(jT(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&kf(t,"deficient indentation"),n}function Af(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Sr(r)))}function qT(t,e){e===1?t.result+=" ":e>1&&(t.result+=bt.repeat(`
`,e-1))}function gK(t,e,r){var n,i,o,a,l,p,u,d,m=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),Sr(x)||ga(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),Sr(i)||r&&ga(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),Sr(i)||r&&ga(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),Sr(n))break}else{if(t.position===t.lineStart&&Af(t)||r&&ga(x))break;if(qn(x))if(p=t.line,u=t.lineStart,d=t.lineIndent,xt(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=p,t.lineStart=u,t.lineIndent=d;break}}l&&(io(t,o,a,!1),qT(t,t.line-p),o=a=t.position,l=!1),Zo(x)||(a=t.position+1),x=t.input.charCodeAt(++t.position)}return io(t,o,a,!1),t.result?!0:(t.kind=m,t.result=g,!1)}function yK(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(io(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else qn(r)?(io(t,n,i,!0),qT(t,xt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Af(t)?le(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);le(t,"unexpected end of the stream within a single quoted scalar")}function xK(t,e){var r,n,i,o,a,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return io(t,r,t.position,!0),t.position++,!0;if(l===92){if(io(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),qn(l))xt(t,!1,e);else if(l<256&&oP[l])t.result+=sP[l],t.position++;else if((a=fK(l))>0){for(i=a,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(a=uK(l))>=0?o=(o<<4)+a:le(t,"expected hexadecimal character");t.result+=mK(o),t.position++}else le(t,"unknown escape sequence");r=n=t.position}else qn(l)?(io(t,r,n,!0),qT(t,xt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Af(t)?le(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}le(t,"unexpected end of the stream within a double quoted scalar")}function TK(t,e){var r=!0,n,i,o,a=t.tag,l,p=t.anchor,u,d,m,g,x,b=Object.create(null),v,F,I,U;if(U=t.input.charCodeAt(t.position),U===91)d=93,x=!1,l=[];else if(U===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),U=t.input.charCodeAt(++t.position);U!==0;){if(xt(t,!0,e),U=t.input.charCodeAt(t.position),U===d)return t.position++,t.tag=a,t.anchor=p,t.kind=x?"mapping":"sequence",t.result=l,!0;r?U===44&&le(t,"expected the node content, but found ','"):le(t,"missed comma between flow collection entries"),F=v=I=null,m=g=!1,U===63&&(u=t.input.charCodeAt(t.position+1),Sr(u)&&(m=g=!0,t.position++,xt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,xa(t,e,Ef,!1,!0),F=t.tag,v=t.result,xt(t,!0,e),U=t.input.charCodeAt(t.position),(g||t.line===n)&&U===58&&(m=!0,U=t.input.charCodeAt(++t.position),xt(t,!0,e),xa(t,e,Ef,!1,!0),I=t.result),x?ya(t,l,b,F,v,I,n,i,o):m?l.push(ya(t,null,b,F,v,I,n,i,o)):l.push(v),xt(t,!0,e),U=t.input.charCodeAt(t.position),U===44?(r=!0,U=t.input.charCodeAt(++t.position)):r=!1}le(t,"unexpected end of the stream within a flow collection")}function SK(t,e){var r,n,i=NT,o=!1,a=!1,l=e,p=0,u=!1,d,m;if(m=t.input.charCodeAt(t.position),m===124)n=!1;else if(m===62)n=!0;else return!1;for(t.kind="scalar",t.result="";m!==0;)if(m=t.input.charCodeAt(++t.position),m===43||m===45)NT===i?i=m===43?Lk:aK:le(t,"repeat of a chomping mode identifier");else if((d=dK(m))>=0)d===0?le(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?le(t,"repeat of an indentation width identifier"):(l=e+d-1,a=!0);else break;if(Zo(m)){do m=t.input.charCodeAt(++t.position);while(Zo(m));if(m===35)do m=t.input.charCodeAt(++t.position);while(!qn(m)&&m!==0)}for(;m!==0;){for(jT(t),t.lineIndent=0,m=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&m===32;)t.lineIndent++,m=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),qn(m)){p++;continue}if(t.lineIndent<l){i===Lk?t.result+=bt.repeat(`
`,o?1+p:p):i===NT&&o&&(t.result+=`
`);break}for(n?Zo(m)?(u=!0,t.result+=bt.repeat(`
`,o?1+p:p)):u?(u=!1,t.result+=bt.repeat(`
`,p+1)):p===0?o&&(t.result+=" "):t.result+=bt.repeat(`
`,p):t.result+=bt.repeat(`
`,o?1+p:p),o=!0,a=!0,p=0,r=t.position;!qn(m)&&m!==0;)m=t.input.charCodeAt(++t.position);io(t,r,t.position,!1)}return!0}function Wk(t,e){var r,n=t.tag,i=t.anchor,o=[],a,l=!1,p;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),p=t.input.charCodeAt(t.position);p!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,le(t,"tab characters must not be used in indentation")),!(p!==45||(a=t.input.charCodeAt(t.position+1),!Sr(a))));){if(l=!0,t.position++,xt(t,!0,-1)&&t.lineIndent<=e){o.push(null),p=t.input.charCodeAt(t.position);continue}if(r=t.line,xa(t,e,rP,!1,!0),o.push(t.result),xt(t,!0,-1),p=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&p!==0)le(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function vK(t,e,r){var n,i,o,a,l,p,u=t.tag,d=t.anchor,m={},g=Object.create(null),x=null,b=null,v=null,F=!1,I=!1,U;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=m),U=t.input.charCodeAt(t.position);U!==0;){if(!F&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,le(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(U===63||U===58)&&Sr(n))U===63?(F&&(ya(t,m,g,x,b,null,a,l,p),x=b=v=null),I=!0,F=!0,i=!0):F?(F=!1,i=!0):le(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,U=n;else{if(a=t.line,l=t.lineStart,p=t.position,!xa(t,r,tP,!1,!0))break;if(t.line===o){for(U=t.input.charCodeAt(t.position);Zo(U);)U=t.input.charCodeAt(++t.position);if(U===58)U=t.input.charCodeAt(++t.position),Sr(U)||le(t,"a whitespace character is expected after the key-value separator within a block mapping"),F&&(ya(t,m,g,x,b,null,a,l,p),x=b=v=null),I=!0,F=!1,i=!1,x=t.tag,b=t.result;else if(I)le(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(I)le(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(F&&(a=t.line,l=t.lineStart,p=t.position),xa(t,e,Rf,!0,i)&&(F?b=t.result:v=t.result),F||(ya(t,m,g,x,b,v,a,l,p),x=b=v=null),xt(t,!0,-1),U=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&U!==0)le(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return F&&ya(t,m,g,x,b,null,a,l,p),I&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=m),I}function bK(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&le(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):le(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Sr(a);)a===33&&(n?le(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),nP.test(i)||le(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),pK.test(o)&&le(t,"tag suffix cannot contain flow indicator characters")}o&&!iP.test(o)&&le(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{le(t,"tag name is malformed: "+o)}return r?t.tag=o:oo.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:le(t,'undeclared tag handle "'+i+'"'),!0}function wK(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&le(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Sr(r)&&!ga(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&le(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function _K(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Sr(n)&&!ga(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&le(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),oo.call(t.anchorMap,r)||le(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],xt(t,!0,-1),!0}function xa(t,e,r,n,i){var o,a,l,p=1,u=!1,d=!1,m,g,x,b,v,F;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=Rf===r||rP===r,n&&xt(t,!0,-1)&&(u=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),p===1)for(;bK(t)||wK(t);)xt(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):l=!1;if(l&&(l=u||i),(p===1||Rf===r)&&(Ef===r||tP===r?v=e:v=e+1,F=t.position-t.lineStart,p===1?l&&(Wk(t,F)||vK(t,F,v))||TK(t,v)?d=!0:(a&&SK(t,v)||yK(t,v)||xK(t,v)?d=!0:_K(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&le(t,"alias node should not have any properties")):gK(t,v,Ef===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):p===0&&(d=l&&Wk(t,F))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&le(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),m=0,g=t.implicitTypes.length;m<g;m+=1)if(b=t.implicitTypes[m],b.resolve(t.result)){t.result=b.construct(t.result),t.tag=b.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(oo.call(t.typeMap[t.kind||"fallback"],t.tag))b=t.typeMap[t.kind||"fallback"][t.tag];else for(b=null,x=t.typeMap.multi[t.kind||"fallback"],m=0,g=x.length;m<g;m+=1)if(t.tag.slice(0,x[m].tag.length)===x[m].tag){b=x[m];break}b||le(t,"unknown tag !<"+t.tag+">"),t.result!==null&&b.kind!==t.kind&&le(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+b.kind+'", not "'+t.kind+'"'),b.resolve(t.result,t.tag)?(t.result=b.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):le(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function EK(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(xt(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!Sr(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&le(t,"directive name must not be less than one character in length");a!==0;){for(;Zo(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!qn(a));break}if(qn(a))break;for(r=t.position;a!==0&&!Sr(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&jT(t),oo.call(Vk,n)?Vk[n](t,n,i):kf(t,'unknown document directive "'+n+'"')}if(xt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,xt(t,!0,-1)):o&&le(t,"directives end mark is expected"),xa(t,t.lineIndent-1,Rf,!1,!0),xt(t,!0,-1),t.checkLineBreaks&&lK.test(t.input.slice(e,t.position))&&kf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Af(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,xt(t,!0,-1));return}if(t.position<t.length-1)le(t,"end of the stream or a document separator is expected");else return}function cP(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new hK(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,le(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)EK(r);return r.documents}function RK(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=cP(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function kK(t,e){var r=cP(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Tr("expected a single document in the stream, but found more")}}var PK=RK,MK=kK,lP={loadAll:PK,load:MK},pP=Object.prototype.toString,uP=Object.prototype.hasOwnProperty,zT=65279,AK=9,al=10,DK=13,IK=32,FK=33,CK=34,UT=35,OK=37,NK=38,LK=39,UK=42,fP=44,HK=45,Pf=58,VK=61,BK=62,WK=63,$K=64,dP=91,mP=93,jK=96,hP=123,qK=124,gP=125,Bt={};Bt[0]="\\0";Bt[7]="\\a";Bt[8]="\\b";Bt[9]="\\t";Bt[10]="\\n";Bt[11]="\\v";Bt[12]="\\f";Bt[13]="\\r";Bt[27]="\\e";Bt[34]='\\"';Bt[92]="\\\\";Bt[133]="\\N";Bt[160]="\\_";Bt[8232]="\\L";Bt[8233]="\\P";var zK=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],GK=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function KK(t,e){var r,n,i,o,a,l,p;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),p=t.compiledTypeMap.fallback[a],p&&uP.call(p.styleAliases,l)&&(l=p.styleAliases[l]),r[a]=l;return r}function QK(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Tr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+bt.repeat("0",n-e.length)+e}var ZK=1,cl=2;function YK(t){this.schema=t.schema||$T,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=bt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=KK(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?cl:ZK,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function $k(t,e){for(var r=bt.repeat(" ",e),n=0,i=-1,o="",a,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=l):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}function HT(t,e){return`
`+bt.repeat(" ",t.indent*e)}function XK(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function Mf(t){return t===IK||t===AK}function ll(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==zT||65536<=t&&t<=1114111}function jk(t){return ll(t)&&t!==zT&&t!==DK&&t!==al}function qk(t,e,r){var n=jk(t),i=n&&!Mf(t);return(r?n:n&&t!==fP&&t!==dP&&t!==mP&&t!==hP&&t!==gP)&&t!==UT&&!(e===Pf&&!i)||jk(e)&&!Mf(e)&&t===UT||e===Pf&&i}function JK(t){return ll(t)&&t!==zT&&!Mf(t)&&t!==HK&&t!==WK&&t!==Pf&&t!==fP&&t!==dP&&t!==mP&&t!==hP&&t!==gP&&t!==UT&&t!==NK&&t!==UK&&t!==FK&&t!==qK&&t!==VK&&t!==BK&&t!==LK&&t!==CK&&t!==OK&&t!==$K&&t!==jK}function e4(t){return!Mf(t)&&t!==Pf}function ol(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function yP(t){var e=/^\n* /;return e.test(t)}var xP=1,VT=2,TP=3,SP=4,ha=5;function t4(t,e,r,n,i,o,a,l){var p,u=0,d=null,m=!1,g=!1,x=n!==-1,b=-1,v=JK(ol(t,0))&&e4(ol(t,t.length-1));if(e||a)for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=ol(t,p),!ll(u))return ha;v=v&&qk(u,d,l),d=u}else{for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=ol(t,p),u===al)m=!0,x&&(g=g||p-b-1>n&&t[b+1]!==" ",b=p);else if(!ll(u))return ha;v=v&&qk(u,d,l),d=u}g=g||x&&p-b-1>n&&t[b+1]!==" "}return!m&&!g?v&&!a&&!i(t)?xP:o===cl?ha:VT:r>9&&yP(t)?ha:a?o===cl?ha:VT:g?SP:TP}function r4(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===cl?'""':"''";if(!t.noCompatMode&&(zK.indexOf(e)!==-1||GK.test(e)))return t.quotingType===cl?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function p(u){return XK(t,u)}switch(t4(e,l,t.indent,a,p,t.quotingType,t.forceQuotes&&!n,i)){case xP:return e;case VT:return"'"+e.replace(/'/g,"''")+"'";case TP:return"|"+zk(e,t.indent)+Gk($k(e,o));case SP:return">"+zk(e,t.indent)+Gk($k(n4(e,a),o));case ha:return'"'+i4(e)+'"';default:throw new Tr("impossible error: invalid scalar style")}}()}function zk(t,e){var r=yP(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function Gk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function n4(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,Kk(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var l=a[1],p=a[2];o=p[0]===" ",n+=l+(!i&&!o&&p!==""?`
`:"")+Kk(p,e),i=o}return n}function Kk(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,l=0,p="";n=r.exec(t);)l=n.index,l-i>e&&(o=a>i?a:l,p+=`
`+t.slice(i,o),i=o+1),a=l;return p+=`
`,t.length-i>e&&a>i?p+=t.slice(i,a)+`
`+t.slice(a+1):p+=t.slice(i),p.slice(1)}function i4(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=ol(t,i),n=Bt[r],!n&&ll(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||QK(r);return e}function o4(t,e,r){var n="",i=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(wi(t,e,l,!1,!1)||typeof l>"u"&&wi(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function Qk(t,e,r,n){var i="",o=t.tag,a,l,p;for(a=0,l=r.length;a<l;a+=1)p=r[a],t.replacer&&(p=t.replacer.call(r,String(a),p)),(wi(t,e+1,p,!0,!0,!1,!0)||typeof p>"u"&&wi(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=HT(t,e)),t.dump&&al===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function s4(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,l,p,u,d;for(a=0,l=o.length;a<l;a+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),p=o[a],u=r[p],t.replacer&&(u=t.replacer.call(r,p,u)),wi(t,e,p,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),wi(t,e,u,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function a4(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),l,p,u,d,m,g;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new Tr("sortKeys must be a boolean or a function");for(l=0,p=a.length;l<p;l+=1)g="",(!n||i!=="")&&(g+=HT(t,e)),u=a[l],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),wi(t,e+1,u,!0,!0,!0)&&(m=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,m&&(t.dump&&al===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,m&&(g+=HT(t,e)),wi(t,e+1,d,!0,m)&&(t.dump&&al===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function Zk(t,e,r){var n,i,o,a,l,p;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(p=t.styleMap[l.tag]||l.defaultStyle,pP.call(l.represent)==="[object Function]")n=l.represent(e,p);else if(uP.call(l.represent,p))n=l.represent[p](e,p);else throw new Tr("!<"+l.tag+'> tag resolver accepts not "'+p+'" style');t.dump=n}return!0}return!1}function wi(t,e,r,n,i,o,a){t.tag=null,t.dump=r,Zk(t,r,!1)||Zk(t,r,!0);var l=pP.call(t.dump),p=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",m,g;if(d&&(m=t.duplicates.indexOf(r),g=m!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[m])t.dump="*ref_"+m;else{if(d&&g&&!t.usedDuplicates[m]&&(t.usedDuplicates[m]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(a4(t,e,t.dump,i),g&&(t.dump="&ref_"+m+t.dump)):(s4(t,e,t.dump),g&&(t.dump="&ref_"+m+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?Qk(t,e-1,t.dump,i):Qk(t,e,t.dump,i),g&&(t.dump="&ref_"+m+t.dump)):(o4(t,e,t.dump),g&&(t.dump="&ref_"+m+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&r4(t,t.dump,e,o,p);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Tr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function c4(t,e){var r=[],n=[],i,o;for(BT(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function BT(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)BT(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)BT(t[n[i]],e,r)}function l4(t,e){e=e||{};var r=new YK(e);r.noRefs||c4(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),wi(r,0,n,!0,!0)?r.dump+`
`:""}var p4=l4,u4={dump:p4};function GT(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var vP=Ct;var bP=$T,f4=lP.load,Hde=lP.loadAll,wP=u4.dump;var Vde=GT("safeLoad","load"),Bde=GT("safeLoadAll","loadAll"),Wde=GT("safeDump","dump");var Df=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=wP(this.data,Object.assign({replacer:g4,schema:m4},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},d4=new vP("!format",{kind:"scalar",resolve:()=>!1,instanceOf:Df,represent:t=>t.represent()}),m4=bP.extend({implicit:[d4]}),KT=t=>typeof t=="object"&&t!=null;function h4(t){if(KT(t))return Object.values(t).every(e=>!KT(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!KT(e)&&!Array.isArray(e))}function g4(t,e){return t===""?e:h4(e)?new Df(e,{flowLevel:0}):e}var QT=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","flashTargets","foldRegion","followLink","followLinkAside","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],x4=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],EP=[...QT,...x4];var T4=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleBacktickQuotes","tripleDoubleQuotes","tripleSingleQuotes"],S4=["string","any","collectionBoundary"],If=[...T4,...S4],Yo=["argumentOrParameter","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function RP(t){return Yo.includes(t.type)}var kP=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],pl=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},Ta=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function ul(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function Xo(t){return t.version>=7}var so=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var Sa=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function PP(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function fl(t){return typeof t=="string"||t instanceof String}function Ff(t){let[e,...r]=t;return b4(e,r)}function b4(t,e){let r;if(fl(t)){let n=t,[i,o,...a]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:a,usePrePhraseSnapshot:!1}}else r=t;return r}function dl(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function MP(t){for(let e of t)return!1;return!0}function _i(t){return Object.keys(t)}function ml(t,e){return`${t}.${e}`}function AP(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,a)=>{let l=r(a),p=o.get(l);return p==null?(o.set(l,[a]),o):(o.get(l).push(a),p.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Qc(i.get(o),e))}),t.flatMap(o=>{let a=r(o),l=i.get(a);if(l==null||l.length===0)return[];let p=l[0];return e(p,o)?(l.shift(),p):[]}))}function Jo(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var NP=Symbol.for("immer-nothing"),DP=Symbol.for("immer-draftable"),Hr=Symbol.for("immer-state"),w4=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function vr(t,...e){if(process.env.NODE_ENV!=="production"){let r=w4[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var va=Object.getPrototypeOf;function ba(t){return!!t&&!!t[Hr]}function ts(t){return t?LP(t)||Array.isArray(t)||!!t[DP]||!!t.constructor?.[DP]||Uf(t)||Hf(t):!1}var _4=Object.prototype.constructor.toString();function LP(t){if(!t||typeof t!="object")return!1;let e=va(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===_4}function Cf(t,e){Lf(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Lf(t){let e=t[Hr];return e?e.type_:Array.isArray(t)?1:Uf(t)?2:Hf(t)?3:0}function XT(t,e){return Lf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function UP(t,e,r){let n=Lf(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function E4(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Uf(t){return t instanceof Map}function Hf(t){return t instanceof Set}function es(t){return t.copy_||t.base_}function JT(t,e){if(Uf(t))return new Map(t);if(Hf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=LP(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[Hr];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let a=i[o],l=n[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[a]})}return Object.create(va(t),n)}else{let n=va(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function iS(t,e=!1){return Vf(t)||ba(t)||!ts(t)||(Lf(t)>1&&(t.set=t.add=t.clear=t.delete=R4),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>iS(n,!0))),t}function R4(){vr(2)}function Vf(t){return Object.isFrozen(t)}var k4={};function rs(t){let e=k4[t];return e||vr(0,t),e}var hl;function HP(){return hl}function P4(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function IP(t,e){e&&(rs("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function eS(t){tS(t),t.drafts_.forEach(M4),t.drafts_=null}function tS(t){t===hl&&(hl=t.parent_)}function FP(t){return hl=P4(hl,t)}function M4(t){let e=t[Hr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function CP(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Hr].modified_&&(eS(e),vr(4)),ts(t)&&(t=Of(e,t),e.parent_||Nf(e,t)),e.patches_&&rs("Patches").generateReplacementPatches_(r[Hr].base_,t,e.patches_,e.inversePatches_)):t=Of(e,r,[]),eS(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==NP?t:void 0}function Of(t,e,r){if(Vf(e))return e;let n=e[Hr];if(!n)return Cf(e,(i,o)=>OP(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Nf(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,a=!1;n.type_===3&&(o=new Set(i),i.clear(),a=!0),Cf(o,(l,p)=>OP(t,n,i,l,p,r,a)),Nf(t,i,!1),r&&t.patches_&&rs("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function OP(t,e,r,n,i,o,a){if(process.env.NODE_ENV!=="production"&&i===r&&vr(5),ba(i)){let l=o&&e&&e.type_!==3&&!XT(e.assigned_,n)?o.concat(n):void 0,p=Of(t,i,l);if(UP(r,n,p),ba(p))t.canAutoFreeze_=!1;else return}else a&&r.add(i);if(ts(i)&&!Vf(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Of(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Nf(t,i)}}function Nf(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&iS(e,r)}function A4(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:HP(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=oS;r&&(i=[n],o=gl);let{revoke:a,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=a,l}var oS={get(t,e){if(e===Hr)return t;let r=es(t);if(!XT(r,e))return D4(t,r,e);let n=r[e];return t.finalized_||!ts(n)?n:n===ZT(t.base_,e)?(YT(t),t.copy_[e]=nS(n,t)):n},has(t,e){return e in es(t)},ownKeys(t){return Reflect.ownKeys(es(t))},set(t,e,r){let n=VP(es(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=ZT(es(t),e),o=i?.[Hr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(E4(r,i)&&(r!==void 0||XT(t.base_,e)))return!0;YT(t),rS(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return ZT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,YT(t),rS(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=es(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){vr(11)},getPrototypeOf(t){return va(t.base_)},setPrototypeOf(){vr(12)}},gl={};Cf(oS,(t,e)=>{gl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});gl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&vr(13),gl.set.call(this,t,e,void 0)};gl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&vr(14),oS.set.call(this,t[0],e,r,t[0])};function ZT(t,e){let r=t[Hr];return(r?es(r):t)[e]}function D4(t,e,r){let n=VP(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function VP(t,e){if(!(e in t))return;let r=va(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=va(r)}}function rS(t){t.modified_||(t.modified_=!0,t.parent_&&rS(t.parent_))}function YT(t){t.copy_||(t.copy_=JT(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var I4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let a=this;return function(p=o,...u){return a.produce(p,d=>r.call(this,d,...u))}}typeof r!="function"&&vr(6),n!==void 0&&typeof n!="function"&&vr(7);let i;if(ts(e)){let o=FP(this),a=nS(e,void 0),l=!0;try{i=r(a),l=!1}finally{l?eS(o):tS(o)}return IP(o,n),CP(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===NP&&(i=void 0),this.autoFreeze_&&iS(i,!0),n){let o=[],a=[];rs("Patches").generateReplacementPatches_(e,i,o,a),n(o,a)}return i}else vr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,p=>e(p,...l));let n,i;return[this.produce(e,r,(a,l)=>{n=a,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ts(t)||vr(8),ba(t)&&(t=F4(t));let e=FP(this),r=nS(t,void 0);return r[Hr].isManual_=!0,tS(e),r}finishDraft(t,e){let r=t&&t[Hr];(!r||!r.isManual_)&&vr(9);let{scope_:n}=r;return IP(n,e),CP(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=rs("Patches").applyPatches_;return ba(t)?n(t,e):this.produce(t,i=>n(i,e))}};function nS(t,e){let r=Uf(t)?rs("MapSet").proxyMap_(t,e):Hf(t)?rs("MapSet").proxySet_(t,e):A4(t,e);return(e?e.scope_:HP()).drafts_.push(r),r}function F4(t){return ba(t)||vr(10,t),BP(t)}function BP(t){if(!ts(t)||Vf(t))return t;let e=t[Hr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=JT(t,e.scope_.immer_.useStrictShallowCopy_)}else r=JT(t,!0);return Cf(r,(n,i)=>{UP(r,n,BP(i))}),e&&(e.finalized_=!1),r}var Vr=new I4,Bf=Vr.produce,Vge=Vr.produceWithPatches.bind(Vr),Bge=Vr.setAutoFreeze.bind(Vr),Wge=Vr.setUseStrictShallowCopy.bind(Vr),$ge=Vr.applyPatches.bind(Vr),jge=Vr.createDraft.bind(Vr),qge=Vr.finishDraft.bind(Vr);var nr=gr(lM(),1),Aye=nr.default.v1,Dye=nr.default.v1ToV6,Iye=nr.default.v3,pM=nr.default.v4,Fye=nr.default.v5,Cye=nr.default.v6,Oye=nr.default.v6ToV1,Nye=nr.default.v7,Lye=nr.default.NIL,Uye=nr.default.MAX,Hye=nr.default.version,Vye=nr.default.validate,Bye=nr.default.stringify,Wye=nr.default.parse;function uM(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function sd(t,e){if(Array.isArray(t))return t.map(r=>sd(r,e));if(typeof t=="object"&&t!=null){if(t9(t))return uM(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=sd(t[n],e));return r}return t}function t9(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var dd=gr(dM(),1);var r9={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},n9={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},cd={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},ld={modulo100:"row",relativeUp:"up",relativeDown:"down"};function mM(t){let e=r9[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function hM(t){let e=n9[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function gS(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var i9=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),o9=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),s9={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},gM={...i9,...o9,...s9};function ao(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function wt(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var yM={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:wt("triple quad"),tripleSingleQuotes:wt("triple twin"),tripleBacktickQuotes:wt("triple skis"),any:"pair",string:"string",whitespace:"void",collectionBoundary:wt("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:ao("one section"),sectionLevelTwo:ao("two section"),sectionLevelThree:ao("three section"),sectionLevelFour:ao("four section"),sectionLevelFive:ao("five section"),sectionLevelSix:ao("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:wt("parse tree string"),textFragment:wt("text fragment"),disqualifyDelimiter:wt("disqualify delimiter"),pairDelimiter:wt("pair delimiter"),"private.fieldAccess":wt("access"),"private.switchStatementSubject":wt("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",flashTargets:"flash",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join","private.showParseTree":wt("parse tree"),"experimental.setInstanceReference":ao("from"),editNew:wt("edit new"),executeCommand:wt("execute command"),parsed:wt("parsed"),getText:wt("get text"),replace:wt("replace"),"private.getTargets":wt("get targets"),"private.setKeyboardTarget":wt("set keyboard target")},customAction:{},grapheme:gM};var yS=gS(yM,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),Ri=gS(yS,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var ht={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var SM=gr(TM(),1),ud=class{constructor(e){this.mooLexer=SM.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var ki={};for(let t of QT){let{spokenForms:e}=Ri.action[t];for(let r of e)ki[r]={type:"simpleActionName",value:t}}var a9=["replaceWithTarget","moveToTarget"];for(let t of a9){let{spokenForms:e}=Ri.action[t];for(let r of e)ki[r]={type:"bringMove",value:t}}var c9=["before","after","to"];for(let t of c9){let e=ht[t==="to"?"sourceDestinationConnective":t];ki[e]={type:"insertionMode",value:t}}for(let t of Yo){let{spokenForms:e}=Ri.simpleScopeTypeType[t];for(let r of e)ki[r]={type:"simpleScopeTypeType",value:t}}for(let t of If){let{spokenForms:e}=Ri.pairedDelimiter[t];for(let r of e)ki[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(cd))e!=null&&(ki[e]={type:"simpleMarkType",value:t});var Pi=new ud({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(ki),type:t=>ki[t].type,value:t=>ki[t].value}});function vM(t,e){return{name:t,target:e}}function bM(t,e,r){return{name:t,source:e,destination:r}}function fd(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function wM(t,e){return{type:"primitive",insertionMode:t,target:e}}function _M(t){return{type:"containingScope",scopeType:t}}function EM(t){return{type:t}}function RM(t){return{type:"surroundingPair",delimiter:t}}function kM(t){return{type:t}}function PM(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function xS(t){return t[0]}var l9={Lexer:Pi,ParserRules:[{name:"main",symbols:["action"],postprocess:xS},{name:"action",symbols:[Pi.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>vM(t,e)},{name:"action",symbols:[Pi.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>bM(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:xS},{name:"destination",symbols:[Pi.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>wM(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:xS},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>fd(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>fd(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>fd(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>_M(t)},{name:"scopeType",symbols:[Pi.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>EM(t)},{name:"scopeType",symbols:[Pi.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>RM(t)},{name:"mark",symbols:[Pi.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>kM(t)},{name:"mark",symbols:[Pi.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>PM(t)}],ParserStart:"main"},MM=l9;function p9(){return new dd.Parser(dd.Grammar.fromCompiled(MM))}function AM(t){let e=p9();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function md(t,e){let r=AM(t);return sd(r,e)}function Sl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...DM(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return DM(t.destination);case"parsed":return Sl(md(t.content,t.arguments));default:return[t.target]}}function DM(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function SS(t){return t.flatMap(TS)}function TS(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(TS);case"range":return[t.anchor,t.active].flatMap(TS);case"implicit":return[]}}var u9={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},f9={purple:"pink"};function d9(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=u9[e.scopeType.type]??e.scopeType.type)})}function m9(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=f9[t.mark.symbolColor]??t.mark.symbolColor)}function vS(t){SS(t).forEach(e=>{d9(e),m9(e)})}function IM(t){return{...t,version:1}}var h9={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},g9={type:"primitive",isImplicit:!0},FM=t=>bi(t,h9)?g9:t;function CM(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:x9(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function y9(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function bS(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:a,selectionType:l,position:p}=t,u=[];if(p&&p!=="contents"&&(p==="before"?o==="inside"?u.push({type:"position",position:"start"}):e==="remove"?u.push({type:"leading"}):u.push({type:"position",position:"before"}):o==="inside"?u.push({type:"position",position:"end"}):e==="remove"?u.push({type:"trailing"}):u.push({type:"position",position:"after"})),l)switch(l){case"token":if(a?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:u.push({type:"containingScope",scopeType:{type:l}})}return a&&u.push(...y9(a)),{type:r,isImplicit:n,modifiers:u.length>0?u:void 0,mark:i?.type==="cursorToken"?void 0:i}}function OM(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>OM(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:a,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:bS(i,e),active:bS(o,e),excludeAnchor:a??!1,excludeActive:l??!1}}case"primitive":return bS(t,e)}}function x9(t,e){return t.map(r=>OM(r,e)).map(r=>r.type==="primitive"?FM(r):r)}function NM(t){return{...t,version:3,targets:t.targets.map(LM)}}function LM(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>LM(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:wS(e),active:wS(r),...n}}case"primitive":return wS(t)}}function wS(t){let e=t.modifiers!=null?t.modifiers.map(S9):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:bl(r),modifiers:e},active:{type:"primitive",mark:bl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?T9(t.mark):void 0,modifiers:e}}function T9(t){switch(t.type){case"lineNumber":return v9(t);default:return t}}function S9(t){switch(t.type){case"ordinalRange":return b9(t);default:return t}}function v9(t){return bi(t.anchor,t.active)?bl(t.anchor):{type:"range",anchor:bl(t.anchor),active:bl(t.active)}}function b9(t){return t.anchor===t.active?vl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?vl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?vl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:vl(t.scopeType,t.anchor),active:vl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function bl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function vl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function HM(t){return{...t,version:4,targets:t.targets.map(VM)}}function VM(t){switch(t.type){case"primitive":return UM(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:UM(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(VM)}}}}function UM(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function BM(t){return{...t,version:5,action:w9(t.action),targets:t.targets.map(hd)}}function w9(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=_9(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function _9(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function hd(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(hd)};case"range":return{...t,anchor:hd(t.anchor),active:hd(t.active)};case"primitive":return{...t,mark:t.mark!=null?_S(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(ES):void 0}}}function _S(t){return t.type==="range"?{...t,anchor:_S(t.anchor),active:_S(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function ES(t){return t.type==="range"?{...t,anchor:ES(t.anchor),active:ES(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var E9={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function RS(t){let e=E9[t]??t;if(!EP.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function WM(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:R9(t.action,t.targets)}}function R9(t,e){let r=RS(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:cn(e[0]),destination:wl(e[1])};case"swapTargets":return{name:r,target1:cn(e[0]),target2:cn(e[1])};case"callAsFunction":return{name:r,callee:cn(e[0]),argument:cn(e[1])};case"pasteFromClipboard":return{name:r,destination:wl(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:cn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:cn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:wl(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:cn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:cn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:wl(e[0])};case"highlight":{let n={name:r,target:cn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:wl(e[0])};case"getText":return{name:r,options:t.args?.[0],target:cn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:cn(e[0])}}}function cn(t){switch(t.type){case"list":case"range":case"primitive":return k9(t);case"implicit":return t}}function k9(t){switch(t.type){case"list":return P9(t);case"range":case"primitive":return gd(t)}}function P9(t){return{...t,elements:t.elements.map(gd)}}function gd(t){switch(t.type){case"range":return $M(t);case"primitive":return yd(t)}}function $M(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:yd(e),active:yd(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function yd(t){let e={type:"primitive"},r=C9(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function wl(t){switch(t.type){case"list":return M9(t);case"range":return A9(t);case"primitive":return D9(t);case"implicit":return I9()}}function M9(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let a=xd(o);a!=null?(i(),r=[gd(o)],n=a):r.push(gd(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function A9(t){return{type:"primitive",insertionMode:xd(t.anchor)??"to",target:$M(t)}}function D9(t){return{type:"primitive",insertionMode:xd(t)??"to",target:yd(t)}}function I9(){return{type:"implicit"}}function xd(t){switch(t.type){case"implicit":return"to";case"primitive":return F9(t);case"range":return xd(t.anchor)}}function F9(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function C9(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function jM(t){return{...t,version:7}}function PS(t){let e=O9(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Bf(r,o=>{let a=Sl(o);vS(a),r.name}),usePrePhraseSnapshot:n}}function O9(t,e){if(t.version>7)throw new Cu;for(;t.version<e;)switch(t.version){case 0:t=IM(t);break;case 1:t=CM(t);break;case 2:t=NM(t);break;case 3:t=HM(t);break;case 4:t=BM(t);break;case 5:t=WM(t);break;case 6:t=jM(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var MS;function Td(t){MS=t}function M(){if(MS==null)throw Error("Tried to access ide before it was injected");return MS}var Sd=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var N9=25,vd=class{constructor(){this.targetMap=new Map;this.targetHistory=new Sa(()=>new Sd(N9));this.notifier=new Vt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of ma)e(r,this.get(r));return this.notifier.registerListener(e)}};function $t(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function wr(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Mi(t,e,r){return Promise.all(AS(t,e).map(([n,i])=>r(n,i)))}async function rt(t,e){return Mi(t,r=>r.editor,e)}async function qM(t,e){let r=AS(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function zM(t){return AS(t,e=>e.editor)}function AS(t,e){let n=dl(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function ln(t,e){return e!=null?vt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new be(i.end,i.start):new be(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function pn(t,e){return t.textualType==="line"?Ur(e):rr(e)}function L9(t){return pn(t,t.contentRange)}function Ie(t,e,r,n=L9){return t.flashRanges(e.map(i=>({editor:i.editor,range:n(i),style:r})))}function co(t,e){return new W(new pe(e.start.line,0),t.document.lineAt(e.end).range.end)}function DS(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function GM(t,e){let[r,n]=e instanceof pe?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Ai(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var bd=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=H9(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?U9(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=a=>this.updateRange(a,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Ai(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new W(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),a=o+r.length;return new W(this.editor.document.positionAt(o),this.editor.document.positionAt(a))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function U9(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let a=o.rangeTrimmed?.start??o.range.end;a.character<r&&(r=a.character,n=o.text.slice(0,r))}return n}function H9(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function wa(t,e,r,n){return V9(t.contentRange,e.contentRange,r,n)}function V9(t,e,r,n){return new W(r?t.start:t.end,n?e.end:e.start)}function _a(t,e,r,n){let i=r?t.contentRange.start:new pe(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new W(i,o)}var He=class t{constructor(e){this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.textualType="token";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return pn(this,this.getRemovalRange())}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:wa(this,r,!0,!0)})}isEqual(e){return e instanceof t&&bi(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new bd(this,e)}toPlainObject(){return{type:this.type,contentRange:il(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function wd(t,e){return B9(t,e.start,e.end)}function B9(t,e,r){return{editor:t.editor,selection:W9(t.selection,e,r)}}function W9(t,e,r){return t.isReversed?new be(r,e):new be(e,r)}function is(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,a=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,p=r.positionAt(a),u=r.positionAt(l);return new W(p,u)}function _d(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var Be=class extends He{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.textualType=r.textualType??"token",this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,textualType:this.textualType,insertionDelimiter:this.insertionDelimiter}}};function Ea(t,e,r){return _d(Be,t,e,r)}var Ed=class extends He{constructor(r){super(r);this.type="DocumentTarget";this.textualType="line";this.insertionDelimiter=`
`}getInterior(){return[new Be({editor:this.editor,isReversed:this.isReversed,contentRange:is(this.editor,this.contentRange)})]}getRemovalRange(){return this.contentRange}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getCloneParameters(){return this.state}};var ir=class t extends He{constructor(){super(...arguments);this.type="LineTarget";this.textualType="line";this.insertionDelimiter=`
`;this.getRemovalHighlightRange=()=>Ur(this.fullLineContentRange)}get fullLineContentRange(){return co(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return Ea(this.editor,$9(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return Ea(this.editor,j9(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:_a(this,n,!0,!0)})}getCloneParameters(){return this.state}};function $9(t,e){let{start:r}=e;return r.line>0?new W(t.document.lineAt(r.line-1).range.end,e.start):void 0}function j9(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new W(e.end,new pe(r.line+1,0)):void 0}function IS(t,e,r){return _d(ir,t,e,r)}var Rd=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var kd=class extends He{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new Rd(this,r)}};var lo=class t extends He{constructor(){super(...arguments);this.type="ParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`}getLeadingDelimiterTarget(){return IS(this.editor,q9(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return IS(this.editor,z9(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new ir({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return co(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange;return Ur(n)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:_a(this,n,!0,!0)})}getCloneParameters(){return this.state}};function q9(t,e){let{document:r}=t,n=r.lineAt(e.start),i=G9(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new W(new pe(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new W(new pe(0,0),r.lineAt(n.lineNumber-1).range.end)}function z9(t,e){let{document:r}=t,n=r.lineAt(e.end),i=K9(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new W(new pe(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new W(new pe(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function G9(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function K9(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var po=class extends He{constructor(){super(...arguments);this.type="RawSelectionTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};function _l(t){let e=Ai(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var Q9=['"',"'","(","[","{","<"],Z9=['"',"'",")","]","}",">",",",";",":"];function zn(t){let{editor:e}=t,{start:r}=Ai(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new Be({contentRange:new W(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function Gn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new Be({contentRange:new W(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function uo(t){let{editor:e}=t,r=Ai(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),a=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=co(e,r);return o.union(a).isRangeEqual(l)?l:!a.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||Q9.includes(Y9(e,r)))?r.union(a):!o.isEmpty&&(r.end.isEqual(l.end)||Z9.includes(X9(e,r)))?r.union(o):r}function Y9(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new W(r.translate(void 0,-1),r)):""}function X9(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new W(r.translate(void 0,1),r)):""}var jt=class extends He{constructor(){super(...arguments);this.type="TokenTarget";this.textualType="token";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return uo(this)}getCloneParameters(){return this.state}};function FS(t){let{editor:e,isReversed:r}=t,{document:n}=e,i=Ai(t.contentRange,t.prefixRange);return J9(n,i)?e5(n,i)?new lo({editor:e,isReversed:r,contentRange:i}):new ir({editor:e,isReversed:r,contentRange:i}):new jt({editor:e,isReversed:r,contentRange:i})}function J9(t,e){let r=t.lineAt(e.start).rangeTrimmed?.start,n=t.lineAt(e.end).rangeTrimmed?.end;return r!=null&&n!=null&&r.isEqual(e.start)&&n.isEqual(e.end)}function e5(t,e){let{start:r,end:n}=e;return(r.line===0||t.lineAt(r.line-1).isEmptyOrWhitespace)&&(n.line===t.lineCount-1||t.lineAt(n.line+1).isEmptyOrWhitespace)}var fo=class t extends He{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??t5(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new Be({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return zn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new Be({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return Gn(this)}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?_l(this):FS(this).getRemovalRange()}getRemovalHighlightRange(){return this.removalRange_!=null?pn(this,this.removalRange_):this.hasDelimiterRange_?pn(this,_l(this)):FS(this).getRemovalHighlightRange()}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?(this.removalRange_??this.contentRange).union(n.removalRange_??n.contentRange):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:this.contentRange.union(n.contentRange)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function t5(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var Pd=class t extends He{constructor(r){super(r);this.type="SubTokenWordTarget";this.textualType="word";this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return Ea(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return Ea(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return _l(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:wa(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Ra=class t extends He{constructor(r){super({...r,contentRange:is(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:this.fullInteriorRange.union(n.fullInteriorRange)})}};var Md=class extends He{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return uo(this)}getInterior(){return[new Ra({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new jt({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var qt=class extends He{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.textualType=r.textualType??"token"}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:uo(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,textualType:this.textualType,hasExplicitRange:this.hasExplicitRange}}};var Ad=class extends He{constructor(){super(...arguments);this.type="ImplicitTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var Dd=class extends He{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:KM(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return uo(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new Be({editor:this.editor,contentRange:KM(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function KM(t,e,r){return r?new W(e.start,t.end):new W(t.start,e.end)}var Id=class t extends He{constructor(r){super({...r,contentRange:r5(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new ir({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return co(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=(()=>{if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n!=null?this.fullLineContentRange.union(n.contentRange):this.fullLineContentRange})();return Ur(r)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function r5(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function Fd(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var ka=class{run(){return Fd(M()).map(e=>new qt({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,textualType:"character"}))}};var Kn=class{constructor(e,r){this.debouncer=new Iu(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var Cd=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Kn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new ka().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var Od=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var n5=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],i5=n5.map(Lr).join("|"),o5=["[a-zA-Z0-9]",i5].join("|"),s5=new RegExp(`^(${o5})$`,"u"),a5="[unk]",c5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Nd=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Vt;this.getTokenGraphemes=e=>sn(e,c5,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;M().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(M().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=M().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=mT(o),s5.test(o)||(o=a5)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function os(){return CS==null&&(CS=new Nd),CS}var CS;var QM=({penalty:t})=>-t;function ZM(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function YM(t,e){let r=Gc(n=>vT(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function OS(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function XM(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function JM(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=l5(r,n)}return r[0]}function l5(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function eA({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,a){return JM(a,[OS(i),XM(r),OS(o),ZM(t),QM,YM(n,e)])}function tA(t,e,r){let n={},i=new so(({grapheme:o,hatStyle:a})=>[o,a]);return t.forEach(({token:o,rank:a})=>{let l=e.get(o);l!=null&&i.set(l,a),r.getTokenGraphemes(o.text).forEach(({text:p})=>{let u;p in n?u=n[p]:(u=[],n[p]=u),u.push(a)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function rA(t,e=[]){return new Map(TT(Je,Go)(Kc([e],t.visibleRanges.map(r=>bT(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function nA(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let a=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return a-l}}var p5=["-","+","*","/","=","<",">","_","#",".","|","&",":"],u5=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],f5=["\\p{L}","\\p{M}","\\p{N}"],d5="[^\\s\\w]",m5="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function h5(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:a}=t,l=r.map(Lr).map(x=>`${x}+`).join("|"),p=e.map(Lr).join("|"),d=`(${n.concat(i.map(Lr)).join("|")})+`,m=`(${n.join("|")})+`,g=[p,o,d,l,a].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(m,"gu"),tokenMatcher:new RegExp(g,"gu")}}var NS=new Map;function _r(t){let e=M().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!NS.has(r)){let n={fixedTokens:u5,repeatableSymbols:p5,identifierWordRegexes:f5,identifierWordDelimiters:e,numbersRegex:m5,singleSymbolsRegex:d5};NS.set(r,h5(n))}return NS.get(r)}function iA(t,e,r){return sn(t,_r(e).tokenMatcher,r)}function oA(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return iA(n,r,o=>{let a=i+o.index,l=i+o.index+o[0].length,p=new W(t.document.positionAt(a),t.document.positionAt(l));return{editor:t,text:o[0],range:p,offsets:{start:a,end:l}}})}function sA(t,e,r){let i=y5(t,e).flatMap(o=>{let a=o.selections[0].active,l=rA(o,[a.line]),p=Je(o.visibleRanges.map(u=>oA(o,u).map(d=>({...d,displayLine:l.get(d.range.start.line)}))));return p.sort(nA(l.get(a.line),a.character)),p});return g5(r,i).map((o,a)=>({token:o,rank:-a}))}function g5(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function y5(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function LS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:a}){let l=r==null?void 0:aA(r),p=aA(n),u=sA(o,a,l),d=tA(u,p,t),m=Object.keys(e),g=new Sa(()=>[...m]);return u.map(({token:x,rank:b})=>{let v=x5(t,x,g,e),F=eA(d,i,b,l?.get(x),p.get(x),v);if(F!=null)return g.set(F.grapheme.text,g.get(F.grapheme.text).filter(I=>I!==F.style)),T5(x,F)}).filter(x=>x!=null)}function aA(t){let e=new so(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function x5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text);for(let a of o)for(let l of r.get(a.text))i.push({grapheme:a,style:l,penalty:n[l].penalty});return i}function T5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new W(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var Ld=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];M().disposeOnExit(this);let n=new Kn(M().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),M().onDidOpenTextDocument(n.run),M().onDidCloseTextDocument(n.run),M().onDidChangeActiveTextEditor(n.run),M().onDidChangeVisibleTextEditors(n.run),M().onDidChangeTextDocument(n.run),M().onDidChangeTextEditorSelection(n.run),M().onDidChangeTextEditorVisibleRanges(n.run),os().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:os().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?LS({tokenGraphemeSplitter:os(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:M().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:M().activeTextEditor,visibleTextEditors:M().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:a}})=>({editor:a,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var Ud=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:a}=n,l=this.makeTokenLive(a);return this.map[ml(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=_r(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[ml(e,os().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var S5=6e4,Hd=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;M().disposeOnExit(this),this.activeMap=new Ud(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new Ld(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>S5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function US(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var WS=gr(Rl(),1);function $S(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:a,end:l}}=e;return(0,WS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,WS.invariant)(n>=a&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=a?a+o:Math.min(a,i),end:n<=l?l+o:Math.min(l,i)}}var dA=gr(Rl(),1);function jS(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,dA.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let a=e.expansionBehavior.end;switch(a.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(vf(a.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let a=e.expansionBehavior.start;switch(a.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(Sf(a.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var qS=gr(Rl(),1);function zS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:a},text:l}=e;if((0,qS.invariant)(a>o,()=>"Selection range expected to be nonempty"),(0,qS.invariant)(n>=o&&n<=a,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<a)return{start:o,end:a+i};if(n===o){let p=e.expansionBehavior.start,u=a+i;switch(p.type){case"closed":return{start:o+i,end:u};case"open":return{start:o,end:u};case"regex":{let d=r+l,m=Sf(p.regex),g=d.search(m);for(;g>r.length;)d=d.slice(0,g),g=d.search(m);return g===-1?{start:o,end:u}:{start:o+g,end:u}}}}else{let p=e.expansionBehavior.end,u=o;switch(p.type){case"closed":return{start:u,end:a};case"open":return{start:u,end:a+i};case"regex":{let d=l+r,m=vf(p.regex),g=d.match(m),x=g==null?0:g[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,g=d.match(m),x=g==null?0:x+g[0].length;return x===0?{start:u,end:a}:{start:u,end:o+x}}}}}function mA(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:a}=e.offsets,l=Math.min(n,o),p="";return o<n&&(p+=e.text.substring(0,n-o)),p+=t.event.text,i<a&&(p+=e.text.substring(a-i,e.text.length)),p.substring(r.start-l,r.end-l)}function hA(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let a=o.text.length-o.rangeLength,l=o.rangeOffset,p=l+o.rangeLength,u=l,d=p+a;return{displacement:a,event:o,originalOffsets:{start:l,end:p},finalOffsets:{start:u,end:d}}});for(let o of e){let a=o.offsets,l=i.map(u=>{let d;return u.originalOffsets.start>a.end?{start:0,end:0}:u.originalOffsets.end<a.start?{start:u.displacement,end:u.displacement}:(u.event.rangeLength===0?o.range.isEmpty?d=jS(u,o):d=zS(u,o):d=$S(u,o),o.text=mA(u,o,d),{start:d.start-a.start,end:d.end-a.end})}),p={start:a.start+mf(l,({start:u})=>u),end:a.end+mf(l,({end:u})=>u)};o.range=o.range.with(r.positionAt(p.start),r.positionAt(p.end)),o.offsets=p}}var Bd=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return US(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return US(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>tr(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>tr(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=M().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>M5(r,i)?{...i,isReplace:!0}:i)};hA(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function M5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var Wd=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var $d=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var jd=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var qd=class{openNewSnippetFile(e,r){throw new Error("Snippets are not implemented.")}};var zd=class{getSpokenFormEntries(){throw new Ta}onDidChange(){return{dispose:()=>{}}}};var Gd=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getLanguage(e){throw new Error("Tree sitter not provided")}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}};var nt=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var gA={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleBacktickQuotes:["```","```"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var yA=new so(t=>t);for(let[t,e]of Object.entries(gA))e!=null&&yA.set(e,t);function xA(t,e,r){let n=yA.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}function TA(t){throw new nt(`${t.type} insertion snippet`)}function SA(t){throw new nt(`${t.type} wrap with snippet`)}function kl(t,e,r){let n=r==="vertical"?`${ht.verticalRange} `:"";if(t&&e)return n+ht.rangeExclusive;if(t)throw new nt("Range exclude anchor");return e?n+ht.rangeExcludingEnd:r==="vertical"?ht.verticalRange:ht.rangeInclusive}function vA(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var A5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],D5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function Pa(t){let e=A5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function Pl(t){let e=D5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Kd=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new nt(`Modifier '${e.type}'`);case"containingScope":return e.ancestorIndex==null||e.ancestorIndex===0?this.handleScopeType(e.scopeType):[new Array(e.ancestorIndex).fill(this.spokenFormMap.modifierExtra.ancestor),this.handleScopeType(e.scopeType)];case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,Pl(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,Pl(e.start+1),r];let i=Pa(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,Ml(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,Ml(r)];throw new nt(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:Pl(e.anchor.start+1),n=this.handleModifier(e.active),i=kl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let a=e.direction==="forward"?ht.forward:ht.backward;return[n,r,a]}let i=Pa(e.length),o=Ml(r);return e.direction==="forward"?[n,i,o]:[n,i,o,ht.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?ht.next:ht.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=Pa(e.length);if(e.length===1)return[i,n,r];let a=Ml(r);return[i,n,o,a]}if(e.length===1){let o=Pl(e.offset);return[i,o,n,r]}throw new nt(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new nt(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,wA(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};case"interior":return this.spokenFormMap.simpleModifier.interiorOnly;default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(mM(r)),n!=null&&i.push(hM(n)),i.push(wA(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let a=kl(e.excludeAnchor,e.excludeActive);return[r,n,a,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new nt(`Mark '${e.type}'`);default:return[cd[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new nt("Absolute line numbers");case"modulo100":return[ld.modulo100,Pa(e.lineNumber+1)];case"relative":return[e.lineNumber<0?ld.relativeUp:ld.relativeDown,Pa(Math.abs(e.lineNumber))]}}};function Ml(t){if(typeof t=="string")return bA(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),Ml(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(bA)}}}function bA(t){return`${t}s`}function wA(t,e,r){let n=t[r];if(n==null)throw new nt(`${e} '${r}'`);return n}var Ma=class{constructor(e){this.spokenFormMap=vA(e),this.primitiveGenerator=new Kd(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new nt(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:_A(e())}}catch(r){if(r instanceof nt)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new nt(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),ht.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[xA(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],TA(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new nt(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[SA(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new nt(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new nt("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[ht.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=kl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new nt("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[ht.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return ht.sourceDestinationConnective;case"before":return ht.before;case"after":return ht.after}}};function _A(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:EA(t.map(_A)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${ul(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new nt(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function EA(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=EA(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Qd=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Vt;this.spokenFormMap_={...Ri};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps().catch(()=>{})),this.customSpokenFormsInitialized=this.updateSpokenFormMaps(),this.customSpokenFormsInitialized.catch(()=>{})}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof pl)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof Ta)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");st(M().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}throw this.spokenFormMap_={...Ri},this.notifier.notifyListeners(),r}for(let r of kP)I5(this.spokenFormMap_,r,yS[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function I5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let a of i){let{defaultSpokenForms:l=[],isPrivate:p=!1}=r[a]??{},u=n[a];o[a]=u==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!p,isCustom:!1,isPrivate:p}:{defaultSpokenForms:l,spokenForms:u,requiresTalonUpdate:!1,isCustom:!bi(l,u),isPrivate:p}}t[e]=o}var Zd=class{constructor(e){this.customSpokenForms=new Qd(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new Ma(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new Ma(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*F5(t){for(let e of t)for(let r of e)yield r}function*Al(t,e){let r=Xd(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*GS(t){let e=Xd(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var $we=Symbol();function*C5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*Yd(t,e){for(let r of t)e(r)&&(yield r)}function*Nt(t,e){for(let r of t)yield e(r)}function*kA(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let a=-1,l=Xd(t),p;for(;;){if(a++,o!==null&&a>=o||(p=l.next(),p.done))return;a<i||(a-i)%n===0&&(yield p.value)}}function*O5(t,e){let r=Xd(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function Xd(t){return t[Symbol.iterator]()}function Aa(t,e){return Array.from(Nt(t,e))}function RA(t,e,r){let n=C5(t,r),i=r>=0?o=>o<e:o=>o>e;return O5(n,i)}function PA(t,e,r=1){return e!==void 0?RA(t,e,r):RA(0,t,r)}function Jd(t,e){return F5(Nt(t,e))}function Br(t,e,{domain:r},{domain:n}){return t==="forward"?N5(e,r,n):L5(e,r,n)}function N5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let a=e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&!i){let a=e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&i){let a=e.end.compareTo(r.start);return a!==0?a:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function L5(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let a=-e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&!i){let a=-e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&i){let a=-e.start.compareTo(r.end);return a!==0?a:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function MA(t,e,r,n,i,o){return U5(t,n,i,o)&&(i==null||Br(r,n.includeDescendantScopes?t:e,i,o)<0)}function U5(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:a,skipAncestorScopes:l}=e,{domain:p}=n;switch(i){case"disallowed":if(p.contains(t))return!1;break;case"disallowedIfStrict":if(GM(p,t))return!1;break;case"required":if(!p.contains(t))return!1;break}return l&&r!=null&&p.contains(r.domain)?!1:H5(new W(t,o),p,a)}function H5(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var V5={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},Ce=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...V5,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},a,l=r;for(let p of this.generateScopeCandidates(e,r,n,o))if(MA(r,l,n,o,a,p)&&(yield p,a=p,l=n==="forward"?p.domain.end:p.domain.start),this.canStopEarly(r,n,o,a,p))return}canStopEarly(e,r,n,i,o){let{containment:a,distalPosition:l,skipAncestorScopes:p}=n;if(this.isHierarchical&&!p)return!1;let u=this.isHierarchical&&p?i:o;return u==null?!1:!!(a==="required"&&(r==="forward"?u.domain.end.isAfter(e):u.domain.start.isBefore(e))||(r==="forward"?u.domain.end.isAfterOrEqual(l):u.domain.start.isBeforeOrEqual(l)))}};var Er=class extends Ce{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:a,...l}=o,p=this.searchScopeHandler.generateScopes(r,n,i,{containment:a==="required"?"required":void 0,...l});return Jd(p,u=>this.generateScopesInSearchScope(i,u))}};var em=class extends Ce{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield AA(r,o);else for(let o=n.line;o>=0;o--)yield AA(r,o)}};function AA(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[KS(t,n,r)]}}function KS(t,e,r){return new ir({editor:t,isReversed:e,contentRange:QS(t,r)})}function QS(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new W(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function fn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),a=l=>new W(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Nt(o.matchAll(t),a):Array.from(o.matchAll(t),a).reverse()}var tm=class extends Er{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=_r(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new jt({editor:n,contentRange:o,isReversed:a})]}))}};function rm(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let a=Ko(o,n),l=Ko(o,i);if(a&&!l)return!0;if(l&&!a)return!1}}var B5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,W5=/[$]/g,$5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,nm=class extends Er{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(fn(B5,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new Be({editor:n,contentRange:o,isReversed:a,textualType:"character"})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=_r(this.languageId);return rm(r,n,[i,W5,$5])}};var j5=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,im=class{constructor(e){this.wordRegex=_r(e).wordMatcher}splitIdentifier(e){let r=el(e,this.wordRegex);return r.length>1?r:el(e,j5)}};var om=class extends Er{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new im(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(p=>new W(i.positionAt(o+p.index),i.positionAt(o+p.index+p.text.length)));return l.map((p,u)=>({editor:r,domain:p,getTargets:d=>{let m=u>0?l[u-1]:null,g=u+1<l.length?l[u+1]:null;return[q5(d,r,m,p,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function q5(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new W(r.end,n.start):void 0,a=i!=null&&i.start.isAfter(n.end)?new W(n.end,i.start):void 0,p=o!=null||a!=null?e.document.getText(o??a):"";return new Pd({editor:e,isReversed:t,contentRange:n,insertionDelimiter:p,leadingDelimiterRange:o,trailingDelimiterRange:a})}var z5=/[$]/g,sm=class extends Er{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=_r(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new jt({editor:n,contentRange:o,isReversed:a})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=_r(this.languageId);return rm(r,n,[i,z5])}};var am=class extends Ce{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:a=>[new Ed({editor:r,isReversed:a,contentRange:o})]}}};function cm(t,e,r,n,i){if(!t&&n!=null&&i!=null&&DS(e,n)>DS(e,i))return r.union(n)}function Da(t){return t.containment==null&&t.skipAncestorScopes}function DA(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:a,end:l}=G5(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(a),end:t.positionAt(l)}}function G5(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let a=n==="disallowed"?1:-o;return r==="forward"?{start:t+a,end:e+o}:{start:e-o,end:t-a}}function IA(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Ia=class extends Ce{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:a}=r,l=Da(o),{start:p,end:u}=DA(a,n,i,o),d=this.query.matches(a,p,u).map(m=>this.matchToScope(r,m,l)).filter(m=>m!=null).sort((m,g)=>Br(i,n,m,g));yield*IA(d,(m,g)=>m.domain.isRangeEqual(g.domain),m=>m.length===1?m[0]:{...m[0],getTargets(g){let x=Qc(m.flatMap(b=>b.getTargets(g)),(b,v)=>b.isEqual(v));if(x.length>1&&!m.every(b=>b.allowMultiple)){let b="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(st(M().messages,"BaseTreeSitterScopeHandler.allow-multiple",b),M().runMode==="test")throw Error(b)}return x}})}};function ZS(t,e,r,n){return n?Fa(t,`${e}.${r}`,`_.${r}`):Fa(t,`${e}.${r}`)??(Fa(t,e)!=null?Fa(t,`_.${r}`):void 0)}function ho(t,e,r,n){return ZS(t,e,r,n)?.range}function Fa(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var lm=class extends Ia{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n,i){let o=this.iterateeScopeType.type,a=ZS(n,o,"iteration",!1);if(a==null)return;let{range:l,allowMultiple:p}=a,u=ho(n,o,"iteration.domain",!1)??l;return{editor:r,domain:u,allowMultiple:p,getTargets:d=>[new Be({editor:r,isReversed:d,contentRange:l})]}}};var pm=class extends Ia{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new lm(this.query,this.scopeType)}}matchToScope(r,n,i){let o=this.scopeType.type,a=Fa(n,o);if(a==null)return;let{range:l,allowMultiple:p,insertionDelimiter:u}=a,d=ho(n,o,"domain",!0)??l,m=ho(n,o,"prefix",!0)?.with(void 0,l.start),g=ho(n,o,"leading",!0)?.with(void 0,m?.start??l.start),x=ho(n,o,"trailing",!0)?.with(l.end),b=ho(n,o,"removal",!0);return b==null&&(o==="collectionItem"||o==="argumentOrParameter")&&(b=cm(i,r,l,g,x)),{editor:r,domain:d,allowMultiple:p,getTargets:v=>[new fo({scopeTypeType:o,editor:r,isReversed:v,contentRange:l,prefixRange:m,removalRange:b,leadingDelimiterRange:g,trailingDelimiterRange:x,insertionDelimiter:u})]}}};function FA(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function CA(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,a=!1;for(;!a&&!e(o);)({value:o,done:a}=n.next());return a?[]:[{iterator:n,value:o,index:i}]})}var Zn=class t extends Ce{constructor(r,n){super();this.scopeHandlers=r;this.getIterationScopeHandler=n;this.isHierarchical=!0;this.scopeType=void 0}static create(r,n,i){let o=n.scopeTypes.map(a=>r.create(a,i));return this.createFromScopeHandlers(r,i,o)}static createFromScopeHandlers(r,n,i){let o=()=>new t(i.map(a=>r.create(a.iterationScopeType,n)),()=>{throw new Error("Not implemented")});return new t(i,o)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let p=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[p].generateScopes(r,n,i,o);return}let a=this.scopeHandlers.map(p=>p.generateScopes(r,n,i,o)[Symbol.iterator]()),l=FA(a);for(;l.length>0;){l.sort((d,m)=>Br(i,n,d.value,m.value));let p=l[0],u=p.value;this.lastYieldedIndex=p.index,yield u,l=CA(l,d=>Br(i,n,u,d)<0)}}};var um=class extends Ce{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,a=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,p=K5(o,n,i),u=r.document.lineAt(n);for(let d=n.line+a;d!==l;d+=a){let m=r.document.lineAt(d);m.isEmptyOrWhitespace?p!=null&&(yield OA(r,p.range.union(u.range)),p=void 0):p==null&&(p=m),u=m}p!=null&&(yield OA(r,p.range.union(u.range)))}};function K5(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let a=e.line+n;a!==i;a+=n){let l=t.lineAt(a);if(l.isEmptyOrWhitespace)break;o=l}return o}}function OA(t,e){return{editor:t,domain:e,getTargets:r=>[new lo({editor:t,isReversed:r,contentRange:QS(t,e)})]}}function Dl(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function NA(t,e){return t.slice(t.length-e.length)===e}var YS,Z5=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function LA(t){t?YS=t:YS=Z5}function XS(t){return/^[A-Z][a-z].*/.test(t)||fm(t)}function UA(t){return XS(t)||/``|"|'/.test(t.substring(0,2))}function HA(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~YS.indexOf(e)}function VA(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function JS(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function BA(t){return t.length<=3?!0:XS(t)}function ev(t,e){return e.length>0?t<5&&e[0].length<6&&XS(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function fm(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function WA(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function $A(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function jA(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function qA(t){return t==="."||t==="!"||t==="?"}var GA=" @~@ ",zA=GA.trim(),X5=new RegExp("\\S",""),J5=new RegExp("\\n+|[-#=_+*]{4,}","g"),e8=new RegExp("\\S+|\\n","g"),t8={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function KA(t,e){if(!t)return[];if(!X5.test(t))return[];let r={...t8,...e};LA(r.abbreviations),r.newlineBoundaries&&(t=t.replace(J5,GA));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(m,g){return g%2})):n=t.trim().match(e8)??[];let o=0,a=0,l=[],p=[],u=[];if(!n||!n.length)return[];for(let m=0,g=n.length;m<g;m++){if(o++,u.push(n[m]),~n[m].indexOf(",")&&(o=0),qA(n[m])||Dl(n[m],"?!")||n[m]===zA){r.newlineBoundaries&&n[m]===zA&&u.pop(),p.push(u),o=0,u=[];continue}if((Dl(n[m],'"')||Dl(n[m],"\u201D"))&&(n[m]=n[m].slice(0,-1)),Dl(n[m],".")){if(m+1<g){if(n[m].length===2&&isNaN(n[m].charAt(0))||HA(n[m]))continue;if(UA(n[m+1])){if(VA(n[m],n[m+1])||ev(o,n.slice(m,6))||fm(n[m+1])&&BA(n[m]))continue}else if(NA(n[m],"..")||JS(n[m])||ev(o,n.slice(m,5)))continue}p.push(u),u=[],o=0;continue}(a=n[m].indexOf("."))>-1&&(fm(n[m],a)||JS(n[m])||$A(n[m])||WA(n[m]))||(l=jA(n[m]))&&(u.pop(),u.push(l[0]),p.push(u),u=[],o=0,u.push(l[1]))}return u.length&&p.push(u),p=p.filter(function(m){return m.length>0}),p.slice(1).reduce(function(m,g){let x=m[m.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(m.pop(),m.push(x.concat(g)),m):(m.push(g),m)},[p[0]]).map(function(m,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=m.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return m.join(" ")})}var r8=/\S*\p{L}/u,QA=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,n8={newlineBoundaries:!1,preserveWhitespace:!0},dm=class{*segment(e){let r=KA(e,n8),n=0;for(let i of r){let o=i.split(QA).filter(a=>a!=null);for(let a of o){if(!o8(a)){let l=i8(a,n);l!=null&&(yield l)}n+=a.length}}}};function i8(t,e){let r=Pk(r8,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function o8(t){return Ko(QA,t)}var mm=class extends Er{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new dm}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),a=n.document.getText(i),l=u=>{let d=new W(n.document.positionAt(o+u.index),n.document.positionAt(o+u.index+u.text.length));return{editor:n,domain:d,getTargets:m=>[new jt({editor:n,contentRange:d,isReversed:m})]}},p=this.segmenter.segment(a);return r==="forward"?Nt(p,l):Array.from(p,l).reverse()}};var Ca=class extends Er{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new jt({editor:n,contentRange:o,isReversed:a})]}))}},hm=class extends Ca{constructor(){super(...arguments);this.regex=/\S+/g}},gm=class extends Ca{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},ym=class extends Ca{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},xm=class extends Ca{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Lr(this.scopeType.character),"gui")}};var Tm=class extends Ce{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let a=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:Da(o)?"required":o.containment}));for(let p of a){let u=[];for(let d of l){let m=p.domain.intersection(d.domain);m!=null&&!m.isEmpty&&u.push({editor:r,domain:m,getTargets:g=>[this.getTargets(ZA(p,g),ZA(d,g))]})}u.push(p),u.sort((d,m)=>Br(i,n,d,m)),yield*u}}};function ZA(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var Sm=class extends Tm{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new jt({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},vm=class extends Tm{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof lo))throw Error("Expected ParagraphTarget");return new Id({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var Yn=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var Oa=class{constructor(e){this.children=s8(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function s8(t){let e=[],r=[];for(let n of t){let i=new tv(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new Yn(e)}var tv=class{constructor(e){this.item=e;this.children=new Yn([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var a8=",",rv=new RegExp(a8,"g");function YA(t){let e=t.getText();return sn(e,rv,r=>new W(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var XA={type:"fallback",scopeTypes:[{type:"surroundingPairInterior",delimiter:"collectionBoundary"},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return Ko(rv,e)}}]};function nv(t,e,r,n,i,o){let a=i!=null?new W(i.end,n.start):void 0,l=o!=null?new W(n.end,o.start):void 0,p=cm(t,e,n,a,l),u=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(d){return[new fo({scopeTypeType:"collectionItem",editor:e,isReversed:d,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:a,trailingDelimiterRange:l,removalRange:p})]}}}function iv(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new pe(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var bm=class extends Ce{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return XA}*generateScopeCandidates(r,n,i,o){let a=Da(o),l=YA(r.document),p=iv(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),u=new Oa(p),d=iv(this.scopeHandlerFactory,this.languageId,r,"string"),m=new Yn(d),g=[],x=new Set,b=[];for(let v of l){if(m.contains(v))continue;let F;for(;b.length>0;){let K=b[b.length-1];if(K.iterationRange.contains(v)){F=K;break}this.addScopes(g,K),b.pop()}let I=u.getSmallestContaining(v)?.range,U=I??r.document.lineAt(v.start.line).range;if(F!=null&&F.iterationRange.isRangeEqual(U)){F.delimiters.push(v);continue}I!=null&&x.add(I),b.push({editor:r,isEveryScope:a,iterationRange:U,delimiters:[v]})}for(let v of b)this.addScopes(g,v);for(let v of p)if(!x.has(v.range)&&!v.range.isEmpty){let F=is(r,v.range);F.isEmpty||g.push(nv(a,r,v.range,F))}g.sort((v,F)=>Br(i,n,v,F)),yield*g}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:a,delimiters:l}=n;if(l.length===0)return;let p=[];for(let m=0;m<l.length;++m){let g=l[m],x=l[m-1]?.end??o.start;p.push(new W(x,g.start))}let u=l[l.length-1];p.push(new W(u.end,o.end));let d=p.map(m=>is(i,m));for(let m=0;m<d.length;++m)m===d.length-1&&i.document.getText(d[m]).trim()===""||r.push(nv(a,i,o,d[m],d[m-1],d[m+1]))}};var wm=class extends Ce{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new bm(r,i),a=n.get(i)?.getScopeHandler(this.scopeType);return a==null?o:Zn.createFromScopeHandlers(r,i,[a,o])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var _m=class extends Ce{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new pt("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let a=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return Yd(a.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var Na=class t extends Ce{constructor(r){super();this.scopeHandlers=r;this.scopeType=void 0;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(a=>r.create(a,i));return this.createFromScopeHandlers(o)}static createFromScopeHandlers(r){return new t(r)}get iterationScopeType(){throw new pt("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){for(let a of this.scopeHandlers)yield*a.generateScopes(r,n,i,o)}};var Em=class extends Ce{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let a=c8(r,n,i,o);for(let l of a)yield p8(l)}};function c8(t,e,r,n){let i=l8(t);if(i==null)return[];let{notebook:o,cell:a}=i;return n.containment==="required"?[a]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(a.index+1):o.cells.slice(0,a.index).reverse():n.distalPosition!=null&&new W(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(a.index):o.cells.slice(0,a.index+1).reverse()}function l8(t){let e=t.document.uri.toString();for(let r of M().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function p8(t){let e=u8(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new kd({editor:e,isReversed:n,contentRange:r})]}}function u8(t){let e=t.document.uri.toString();for(let r of M().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var Rm=class extends Ce{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let a=new Em,l=n.get(o)?.getScopeHandler(this.scopeType);return l==null?a:Zn.createFromScopeHandlers(r,o,[l,a])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var km=class extends Ce{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let a=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of a)yield{editor:r,domain:l.domain,getTargets(p){return l.getTargets(p).flatMap(u=>u.getInterior())}}}};function JA(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new W(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:a=>[new Md({editor:t,isReversed:a,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function eD(t){let e=Go(t.map(({text:r})=>r)).map(Lr).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function rD(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new Yn(ov(n.disqualifyDelimiter)),o=new Yn(ov(n.pairDelimiter)),a=new Oa(ov(n.textFragment)),l=Object.fromEntries(r.map(d=>[d.text,d])),p=RT(e.getText(),eD(r)),u=[];for(let d of p){let m=d[0],g=new W(e.positionAt(d.index),e.positionAt(d.index+m.length));tD(i.getContaining(g))==null&&u.push({delimiterInfo:l[m],textFragmentRange:a.getSmallestContaining(g)?.range,range:tD(o.getContaining(g))?.range??g})}return u}function tD(t){return t!=null&&!t.hasError()?t:void 0}function ov(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var Pm=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],curlyBrackets:[["{","${"],"}"],tripleBacktickQuotes:[[],[]],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],backtickQuotes:["`","`"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),nD={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},markdown:{tripleBacktickQuotes:["```","```"]},ruby:{tripleDoubleQuotes:["%Q(",")"]}},YEe=Object.fromEntries(Object.values(Pm)),iD={any:_i(Pm),string:["tripleDoubleQuotes","tripleSingleQuotes","tripleBacktickQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function oD(t){return t!=null&&t in nD?{...Pm,...nD[t]}:Pm}function sD(t,e){let r=iD[t]??[t];return f8(e,r)}function f8(t,e){let r=oD(t);return e.flatMap(n=>{let[i,o,a]=r[n],{isSingleLine:l=!1}=a??{},p=fl(i)?[i]:i,u=fl(o)?[o]:o;return Go(Kc(p,u)).map(m=>{let g=p.includes(m),x=u.includes(m);return{text:m,side:g&&!x?"left":!g&&x?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function aD(t){let e=[],r=[];for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:a},textFragmentRange:l,range:p}=n;if(o==="left")r.push(n);else{let u=zo(r,m=>m.delimiterInfo.delimiterName===i&&d8(m.textFragmentRange,l)&&m8(a,m.range,p));if(u===-1){o==="unknown"&&r.push(n);continue}let d=r[u];r.length=u,e.push({delimiterName:i,openingDelimiterRange:d.range,closingDelimiterRange:p})}}return e}function d8(t,e){return t==null||e==null?t===e:t.isRangeEqual(e)}function m8(t,e,r){return!t||e.start.line===r.start.line}var Mm=class extends Ce{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){st(M().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let a=rD(this.languageDefinitions.get(this.languageId),r.document,sD(this.scopeType.delimiter,this.languageId)),l=aD(a);l=h8(i,o,n,l),yield*l.map(p=>JA(r,p,this.scopeType.requireStrongContainment??!1)).sort((p,u)=>Br(i,n,p,u))}};function h8(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var Am=class extends Ce{constructor(r,n,i,o){super();this.scopeHandlerFactory=r;this.languageDefinitions=n;this.scopeType=i;this.languageId=o;this.isHierarchical=!0}get iterationScopeType(){throw new pt("Iteration scope for InteriorScopeHandler")}*generateScopeCandidates(r,n,i,o){let a=new W(n,o.distalPosition),l=this.getScopeHandler();if(l==null)return;let p=l.generateScopes(r,n,i,o);for(let u of p)this.shouldYield(a,u)&&(yield g8(u))}getScopeHandler(){let r=this.languageDefinitions.get(this.languageId)?.getScopeHandler(this.scopeType),n=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:"any"},this.languageId);return this.scopeType.explicitScopeType?r==null?n:Na.createFromScopeHandlers([r,n]):r==null?n:Zn.createFromScopeHandlers(this.scopeHandlerFactory,this.languageId,[r,n])}shouldYield(r,n){return!this.scopeType.explicitScopeType||r.contains(n.domain)}};function g8(t){return{editor:t.editor,domain:t.domain,getTargets(e){return t.getTargets(e).flatMap(y8)}}}function y8(t){let e=t.getInterior();return e??[new Ra({editor:t.editor,isReversed:t.isReversed,fullInteriorRange:t.contentRange})]}var La=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new nm(this,e,r);case"word":return new om(this,e,r);case"token":return new sm(this,e,r);case"identifier":return new tm(this,e,r);case"line":return new em(e,r);case"sentence":return new mm(this,e,r);case"paragraph":return new um(e,r);case"boundedParagraph":return new vm(this,e,r);case"document":return new am(e,r);case"nonWhitespaceSequence":return new hm(this,e,r);case"boundedNonWhitespaceSequence":return new Sm(this,e,r);case"url":return new gm(this,e,r);case"customRegex":return new ym(this,e,r);case"glyph":return new xm(this,e,r);case"collectionItem":return new wm(this,this.languageDefinitions,r);case"surroundingPair":return new Mm(this.languageDefinitions,e,r);case"surroundingPairInterior":return new km(this,e,r);case"notebookCell":return new Rm(this,this.languageDefinitions,e,r);case"interior":return new Am(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return Zn.create(this,e,r);case"fallback":return Na.create(this,e,r);case"conditional":return new _m(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function dn(t,e){return new W(t.row,t.column,e.row,e.column)}function sv(t){return new pe(t.row,t.column)}function cD(t){return new W(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function lD(t,e){return new be(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function Xn(t,e){return{selection:new be(new pe(e.startPosition.row,e.startPosition.column),new pe(e.endPosition.row,e.endPosition.column)),context:{}}}function x8(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new be(new pe(i.startPosition.row,i.startPosition.column),new pe(o.endPosition.row,o.endPosition.column)),context:{}}}function pD(){return av(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function uD(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new be(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function fD(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=dn(i.endPosition,r.startPosition):o=dn(n.startPosition,r.startPosition):o=dn(n.endPosition,r.startPosition)),{...Xn(e,r),context:{leadingDelimiterRange:o}}}}function Jn(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,a=new Set(t),l=new Set(e);return o=o.filter(p=>a.size>0?!a.has(p.type):l.size>0?l.has(p.type):!0),x8(n,o[0],o[o.length-1])}}function dD(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=dn(r.endPosition,i.startPosition):o=dn(r.endPosition,n.endPosition):o=dn(r.endPosition,n.startPosition)),{...Xn(e,r),context:{trailingDelimiterRange:o}}}}function T8(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function S8(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function av(t,e,r=yr,n=yr){return(i,o)=>{let a,l,p=r(o),u=n(o),d=S8(p,t),m=T8(u,t);d!=null&&(a=dn(d.endPosition,p.startPosition)),m!=null&&(l=dn(u.endPosition,m.startPosition));let g=v8(i,a,l,e);return{selection:new be(new pe(p.startPosition.row,p.startPosition.column),new pe(u.endPosition.row,u.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:a,trailingDelimiterRange:l}}}}function v8(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return ST(o,"length")}function mD(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:p})=>p.endsWith(".start")).map(({range:{end:p}})=>p).sort((p,u)=>p.compareTo(u)).at(-1),i=t.filter(({name:p})=>p.endsWith(".end")).map(({range:{start:p}})=>p).sort((p,u)=>p.compareTo(u)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(st(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:p})=>p.endsWith(".start")).length,a=t.filter(({name:p})=>p.endsWith(".end")).length,l=t.length-o-a;return l>0&&(o>0||a>0)&&(st(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),l>1&&(st(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),!r}function hD(t){let e=t;for(;e!=null;){if(e.hasError)return!0;e=e.parent}return!1}function cv(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var Oe;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(let l of o)a[l]=i[l];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Oe||(Oe={}));var pv;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(pv||(pv={}));var J=Oe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),go=t=>{switch(typeof t){case"undefined":return J.undefined;case"string":return J.string;case"number":return isNaN(t)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(t)?J.array:t===null?J.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?J.promise:typeof Map<"u"&&t instanceof Map?J.map:typeof Set<"u"&&t instanceof Set?J.set:typeof Date<"u"&&t instanceof Date?J.date:J.object;default:return J.unknown}},G=Oe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),b8=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Wr=class t extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let l=n,p=0;for(;p<a.path.length;){let u=a.path[p];p===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(a))):l[u]=l[u]||{_errors:[]},l=l[u],p++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Oe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Wr.create=t=>new Wr(t);var Va=(t,e)=>{let r;switch(t.code){case G.invalid_type:t.received===J.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Oe.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${Oe.joinValues(t.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Oe.joinValues(t.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${Oe.joinValues(t.options)}, received '${t.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Oe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case G.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case G.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=e.defaultError,Oe.assertNever(t)}return{message:r}},xD=Va;function w8(t){xD=t}function Dm(){return xD}var Im=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",p=n.filter(u=>!!u).slice().reverse();for(let u of p)l=u(a,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},_8=[];function X(t,e){let r=Dm(),n=Im({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Va?void 0:Va].filter(i=>!!i)});t.common.issues.push(n)}var zt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return ge;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return ge;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},ge=Object.freeze({status:"aborted"}),Ha=t=>({status:"dirty",value:t}),or=t=>({status:"valid",value:t}),uv=t=>t.status==="aborted",fv=t=>t.status==="dirty",Cl=t=>t.status==="valid",Ol=t=>typeof Promise<"u"&&t instanceof Promise;function Fm(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function TD(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var ce;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(ce||(ce={}));var Il,Fl,hn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},gD=(t,e)=>{if(Cl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Wr(t.common.issues);return this._error=r,this._error}}};function Te(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,l)=>{var p,u;let{message:d}=t;return a.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(p=d??n)!==null&&p!==void 0?p:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:l.defaultError}},description:i}}var Se=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return go(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:go(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new zt,ctx:{common:e.parent.common,data:e.data,parsedType:go(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Ol(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:go(e)},o=this._parseSync({data:e,path:i.path,parent:i});return gD(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:go(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(Ol(i)?i:Promise.resolve(i));return gD(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let a=e(i),l=()=>o.addIssue({code:G.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(p=>p?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new $r({schema:this,typeName:me.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return mn.create(this,this._def)}nullable(){return ti.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Fi.create(this,this._def)}promise(){return To.create(this,this._def)}or(e){return ds.create([this,e],this._def)}and(e){return ms.create(this,e,this._def)}transform(e){return new $r({...Te(this._def),schema:this,typeName:me.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Ts({...Te(this._def),innerType:this,defaultValue:r,typeName:me.ZodDefault})}brand(){return new Nl({typeName:me.ZodBranded,type:this,...Te(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Ss({...Te(this._def),innerType:this,catchValue:r,typeName:me.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Ll.create(this,e)}readonly(){return vs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},E8=/^c[^\s-]{8,}$/i,R8=/^[0-9a-z]+$/,k8=/^[0-9A-HJKMNP-TV-Z]{26}$/,P8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,M8=/^[a-z0-9_-]{21}$/i,A8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,D8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,I8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",lv,F8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,C8=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,O8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,SD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",N8=new RegExp(`^${SD}$`);function vD(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function L8(t){return new RegExp(`^${vD(t)}$`)}function bD(t){let e=`${SD}T${vD(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function U8(t,e){return!!((e==="v4"||!e)&&F8.test(t)||(e==="v6"||!e)&&C8.test(t))}var yo=class t extends Se{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.string,received:o.parsedType}),ge}let n=new zt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?X(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&X(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")D8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"email",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")lv||(lv=new RegExp(I8,"u")),lv.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"emoji",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")P8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"uuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")M8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"nanoid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")E8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")R8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid2",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")k8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ulid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),X(i,{validation:"url",code:G.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"regex",code:G.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?bD(o).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?N8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?L8(o).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?A8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"duration",code:G.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?U8(e.data,o.version)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ip",code:G.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?O8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"base64",code:G.invalid_string,message:o.message}),n.dirty()):Oe.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:G.invalid_string,...ce.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...ce.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...ce.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ce.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...ce.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ce.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ce.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ce.errToObj(r)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};yo.create=t=>{var e;return new yo({checks:[],typeName:me.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};function H8(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}var as=class t extends Se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.number,received:o.parsedType}),ge}let n,i=new zt;for(let o of this._def.checks)o.kind==="int"?Oe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:G.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?H8(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_finite,message:o.message}),i.dirty()):Oe.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Oe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};as.create=t=>new as({checks:[],typeName:me.ZodNumber,coerce:t?.coerce||!1,...Te(t)});var cs=class t extends Se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==J.bigint){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.bigint,received:o.parsedType}),ge}let n,i=new zt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Oe.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};cs.create=t=>{var e;return new cs({checks:[],typeName:me.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};var ls=class extends Se{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.boolean,received:n.parsedType}),ge}return or(e.data)}};ls.create=t=>new ls({typeName:me.ZodBoolean,coerce:t?.coerce||!1,...Te(t)});var ps=class t extends Se{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.date,received:o.parsedType}),ge}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_date}),ge}let n=new zt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Oe.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};ps.create=t=>new ps({checks:[],coerce:t?.coerce||!1,typeName:me.ZodDate,...Te(t)});var Ba=class extends Se{_parse(e){if(this._getType(e)!==J.symbol){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.symbol,received:n.parsedType}),ge}return or(e.data)}};Ba.create=t=>new Ba({typeName:me.ZodSymbol,...Te(t)});var us=class extends Se{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.undefined,received:n.parsedType}),ge}return or(e.data)}};us.create=t=>new us({typeName:me.ZodUndefined,...Te(t)});var fs=class extends Se{_parse(e){if(this._getType(e)!==J.null){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.null,received:n.parsedType}),ge}return or(e.data)}};fs.create=t=>new fs({typeName:me.ZodNull,...Te(t)});var xo=class extends Se{constructor(){super(...arguments),this._any=!0}_parse(e){return or(e.data)}};xo.create=t=>new xo({typeName:me.ZodAny,...Te(t)});var Ii=class extends Se{constructor(){super(...arguments),this._unknown=!0}_parse(e){return or(e.data)}};Ii.create=t=>new Ii({typeName:me.ZodUnknown,...Te(t)});var Fn=class extends Se{_parse(e){let r=this._getOrReturnCtx(e);return X(r,{code:G.invalid_type,expected:J.never,received:r.parsedType}),ge}};Fn.create=t=>new Fn({typeName:me.ZodNever,...Te(t)});var Wa=class extends Se{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.void,received:n.parsedType}),ge}return or(e.data)}};Wa.create=t=>new Wa({typeName:me.ZodVoid,...Te(t)});var Fi=class t extends Se{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==J.array)return X(r,{code:G.invalid_type,expected:J.array,received:r.parsedType}),ge;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(a||l)&&(X(r,{code:a?G.too_big:G.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(X(r,{code:G.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(X(r,{code:G.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,l)=>i.type._parseAsync(new hn(r,a,r.path,l)))).then(a=>zt.mergeArray(n,a));let o=[...r.data].map((a,l)=>i.type._parseSync(new hn(r,a,r.path,l)));return zt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:ce.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:ce.toString(r)}})}nonempty(e){return this.min(1,e)}};Fi.create=(t,e)=>new Fi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:me.ZodArray,...Te(e)});function Ua(t){if(t instanceof Rr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=mn.create(Ua(n))}return new Rr({...t._def,shape:()=>e})}else return t instanceof Fi?new Fi({...t._def,type:Ua(t.element)}):t instanceof mn?mn.create(Ua(t.unwrap())):t instanceof ti?ti.create(Ua(t.unwrap())):t instanceof ei?ei.create(t.items.map(e=>Ua(e))):t}var Rr=class t extends Se{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Oe.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==J.object){let u=this._getOrReturnCtx(e);return X(u,{code:G.invalid_type,expected:J.object,received:u.parsedType}),ge}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof Fn&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||l.push(u);let p=[];for(let u of a){let d=o[u],m=i.data[u];p.push({key:{status:"valid",value:u},value:d._parse(new hn(i,m,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Fn){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of l)p.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(X(i,{code:G.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of l){let m=i.data[d];p.push({key:{status:"valid",value:d},value:u._parse(new hn(i,m,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of p){let m=await d.key,g=await d.value;u.push({key:m,value:g,alwaysSet:d.alwaysSet})}return u}).then(u=>zt.mergeObjectSync(n,u)):zt.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,a,l;let p=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=ce.errToObj(e).message)!==null&&l!==void 0?l:p}:{message:p}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:me.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Oe.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return Ua(this)}partial(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof mn;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return wD(Oe.objectKeys(this.shape))}};Rr.create=(t,e)=>new Rr({shape:()=>t,unknownKeys:"strip",catchall:Fn.create(),typeName:me.ZodObject,...Te(e)});Rr.strictCreate=(t,e)=>new Rr({shape:()=>t,unknownKeys:"strict",catchall:Fn.create(),typeName:me.ZodObject,...Te(e)});Rr.lazycreate=(t,e)=>new Rr({shape:t,unknownKeys:"strip",catchall:Fn.create(),typeName:me.ZodObject,...Te(e)});var ds=class extends Se{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let a=o.map(l=>new Wr(l.ctx.common.issues));return X(r,{code:G.invalid_union,unionErrors:a}),ge}if(r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let p of n){let u={...r,common:{...r.common,issues:[]},parent:null},d=p._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=a.map(p=>new Wr(p));return X(r,{code:G.invalid_union,unionErrors:l}),ge}}get options(){return this._def.options}};ds.create=(t,e)=>new ds({options:t,typeName:me.ZodUnion,...Te(e)});var Di=t=>t instanceof hs?Di(t.schema):t instanceof $r?Di(t.innerType()):t instanceof gs?[t.value]:t instanceof ys?t.options:t instanceof xs?Oe.objectValues(t.enum):t instanceof Ts?Di(t._def.innerType):t instanceof us?[void 0]:t instanceof fs?[null]:t instanceof mn?[void 0,...Di(t.unwrap())]:t instanceof ti?[null,...Di(t.unwrap())]:t instanceof Nl||t instanceof vs?Di(t.unwrap()):t instanceof Ss?Di(t._def.innerType):[],Cm=class t extends Se{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.object)return X(r,{code:G.invalid_type,expected:J.object,received:r.parsedType}),ge;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(X(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ge)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=Di(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of a){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:me.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Te(n)})}};function dv(t,e){let r=go(t),n=go(e);if(t===e)return{valid:!0,data:t};if(r===J.object&&n===J.object){let i=Oe.objectKeys(e),o=Oe.objectKeys(t).filter(l=>i.indexOf(l)!==-1),a={...t,...e};for(let l of o){let p=dv(t[l],e[l]);if(!p.valid)return{valid:!1};a[l]=p.data}return{valid:!0,data:a}}else if(r===J.array&&n===J.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],l=e[o],p=dv(a,l);if(!p.valid)return{valid:!1};i.push(p.data)}return{valid:!0,data:i}}else return r===J.date&&n===J.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var ms=class extends Se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,a)=>{if(uv(o)||uv(a))return ge;let l=dv(o.value,a.value);return l.valid?((fv(o)||fv(a))&&r.dirty(),{status:r.value,value:l.data}):(X(n,{code:G.invalid_intersection_types}),ge)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};ms.create=(t,e,r)=>new ms({left:t,right:e,typeName:me.ZodIntersection,...Te(r)});var ei=class t extends Se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.array)return X(n,{code:G.invalid_type,expected:J.array,received:n.parsedType}),ge;if(n.data.length<this._def.items.length)return X(n,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ge;!this._def.rest&&n.data.length>this._def.items.length&&(X(n,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,l)=>{let p=this._def.items[l]||this._def.rest;return p?p._parse(new hn(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>zt.mergeArray(r,a)):zt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};ei.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ei({items:t,typeName:me.ZodTuple,rest:null,...Te(e)})};var Om=class t extends Se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.object)return X(n,{code:G.invalid_type,expected:J.object,received:n.parsedType}),ge;let i=[],o=this._def.keyType,a=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new hn(n,l,n.path,l)),value:a._parse(new hn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?zt.mergeObjectAsync(r,i):zt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Se?new t({keyType:e,valueType:r,typeName:me.ZodRecord,...Te(n)}):new t({keyType:yo.create(),valueType:e,typeName:me.ZodRecord,...Te(r)})}},$a=class extends Se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.map)return X(n,{code:G.invalid_type,expected:J.map,received:n.parsedType}),ge;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([l,p],u)=>({key:i._parse(new hn(n,l,n.path,[u,"key"])),value:o._parse(new hn(n,p,n.path,[u,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let p of a){let u=await p.key,d=await p.value;if(u.status==="aborted"||d.status==="aborted")return ge;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let p of a){let u=p.key,d=p.value;if(u.status==="aborted"||d.status==="aborted")return ge;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}};$a.create=(t,e,r)=>new $a({valueType:e,keyType:t,typeName:me.ZodMap,...Te(r)});var ja=class t extends Se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.set)return X(n,{code:G.invalid_type,expected:J.set,received:n.parsedType}),ge;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(X(n,{code:G.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(X(n,{code:G.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(p){let u=new Set;for(let d of p){if(d.status==="aborted")return ge;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}let l=[...n.data.values()].map((p,u)=>o._parse(new hn(n,p,n.path,u)));return n.common.async?Promise.all(l).then(p=>a(p)):a(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:ce.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};ja.create=(t,e)=>new ja({valueType:t,minSize:null,maxSize:null,typeName:me.ZodSet,...Te(e)});var Nm=class t extends Se{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.function)return X(r,{code:G.invalid_type,expected:J.function,received:r.parsedType}),ge;function n(l,p){return Im({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Dm(),Va].filter(u=>!!u),issueData:{code:G.invalid_arguments,argumentsError:p}})}function i(l,p){return Im({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Dm(),Va].filter(u=>!!u),issueData:{code:G.invalid_return_type,returnTypeError:p}})}let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof To){let l=this;return or(async function(...p){let u=new Wr([]),d=await l._def.args.parseAsync(p,o).catch(x=>{throw u.addIssue(n(p,x)),u}),m=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(m,o).catch(x=>{throw u.addIssue(i(m,x)),u})})}else{let l=this;return or(function(...p){let u=l._def.args.safeParse(p,o);if(!u.success)throw new Wr([n(p,u.error)]);let d=Reflect.apply(a,this,u.data),m=l._def.returns.safeParse(d,o);if(!m.success)throw new Wr([i(d,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:ei.create(e).rest(Ii.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||ei.create([]).rest(Ii.create()),returns:r||Ii.create(),typeName:me.ZodFunction,...Te(n)})}},hs=class extends Se{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};hs.create=(t,e)=>new hs({getter:t,typeName:me.ZodLazy,...Te(e)});var gs=class extends Se{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return X(r,{received:r.data,code:G.invalid_literal,expected:this._def.value}),ge}return{status:"valid",value:e.data}}get value(){return this._def.value}};gs.create=(t,e)=>new gs({value:t,typeName:me.ZodLiteral,...Te(e)});function wD(t,e){return new ys({values:t,typeName:me.ZodEnum,...Te(e)})}var ys=class t extends Se{constructor(){super(...arguments),Il.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{expected:Oe.joinValues(n),received:r.parsedType,code:G.invalid_type}),ge}if(Fm(this,Il,"f")||TD(this,Il,new Set(this._def.values),"f"),!Fm(this,Il,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{received:r.data,code:G.invalid_enum_value,options:n}),ge}return or(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Il=new WeakMap;ys.create=wD;var xs=class extends Se{constructor(){super(...arguments),Fl.set(this,void 0)}_parse(e){let r=Oe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==J.string&&n.parsedType!==J.number){let i=Oe.objectValues(r);return X(n,{expected:Oe.joinValues(i),received:n.parsedType,code:G.invalid_type}),ge}if(Fm(this,Fl,"f")||TD(this,Fl,new Set(Oe.getValidEnumValues(this._def.values)),"f"),!Fm(this,Fl,"f").has(e.data)){let i=Oe.objectValues(r);return X(n,{received:n.data,code:G.invalid_enum_value,options:i}),ge}return or(e.data)}get enum(){return this._def.values}};Fl=new WeakMap;xs.create=(t,e)=>new xs({values:t,typeName:me.ZodNativeEnum,...Te(e)});var To=class extends Se{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.promise&&r.common.async===!1)return X(r,{code:G.invalid_type,expected:J.promise,received:r.parsedType}),ge;let n=r.parsedType===J.promise?r.data:Promise.resolve(r.data);return or(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};To.create=(t,e)=>new To({type:t,typeName:me.ZodPromise,...Te(e)});var $r=class extends Se{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===me.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:a=>{X(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async l=>{if(r.value==="aborted")return ge;let p=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return p.status==="aborted"?ge:p.status==="dirty"||r.value==="dirty"?Ha(p.value):p});{if(r.value==="aborted")return ge;let l=this._def.schema._parseSync({data:a,path:n.path,parent:n});return l.status==="aborted"?ge:l.status==="dirty"||r.value==="dirty"?Ha(l.value):l}}if(i.type==="refinement"){let a=l=>{let p=i.refinement(l,o);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?ge:(l.status==="dirty"&&r.dirty(),a(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?ge:(l.status==="dirty"&&r.dirty(),a(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Cl(a))return a;let l=i.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Cl(a)?Promise.resolve(i.transform(a.value,o)).then(l=>({status:r.value,value:l})):a);Oe.assertNever(i)}};$r.create=(t,e,r)=>new $r({schema:t,typeName:me.ZodEffects,effect:e,...Te(r)});$r.createWithPreprocess=(t,e,r)=>new $r({schema:e,effect:{type:"preprocess",transform:t},typeName:me.ZodEffects,...Te(r)});var mn=class extends Se{_parse(e){return this._getType(e)===J.undefined?or(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};mn.create=(t,e)=>new mn({innerType:t,typeName:me.ZodOptional,...Te(e)});var ti=class extends Se{_parse(e){return this._getType(e)===J.null?or(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ti.create=(t,e)=>new ti({innerType:t,typeName:me.ZodNullable,...Te(e)});var Ts=class extends Se{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===J.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Ts.create=(t,e)=>new Ts({innerType:t,typeName:me.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Te(e)});var Ss=class extends Se{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ol(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Wr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Wr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Ss.create=(t,e)=>new Ss({innerType:t,typeName:me.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Te(e)});var qa=class extends Se{_parse(e){if(this._getType(e)!==J.nan){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.nan,received:n.parsedType}),ge}return{status:"valid",value:e.data}}};qa.create=t=>new qa({typeName:me.ZodNaN,...Te(t)});var V8=Symbol("zod_brand"),Nl=class extends Se{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Ll=class t extends Se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ge:o.status==="dirty"?(r.dirty(),Ha(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ge:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:me.ZodPipeline})}},vs=class extends Se{_parse(e){let r=this._def.innerType._parse(e),n=i=>(Cl(i)&&(i.value=Object.freeze(i.value)),i);return Ol(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};vs.create=(t,e)=>new vs({innerType:t,typeName:me.ZodReadonly,...Te(e)});function _D(t,e={},r){return t?xo.create().superRefine((n,i)=>{var o,a;if(!t(n)){let l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,p=(a=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0,u=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...u,fatal:p})}}):xo.create()}var B8={object:Rr.lazycreate},me;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(me||(me={}));var W8=(t,e={message:`Input not instance of ${t.name}`})=>_D(r=>r instanceof t,e),ED=yo.create,RD=as.create,$8=qa.create,j8=cs.create,kD=ls.create,q8=ps.create,z8=Ba.create,G8=us.create,K8=fs.create,Q8=xo.create,Z8=Ii.create,Y8=Fn.create,X8=Wa.create,J8=Fi.create,e7=Rr.create,t7=Rr.strictCreate,r7=ds.create,n7=Cm.create,i7=ms.create,o7=ei.create,s7=Om.create,a7=$a.create,c7=ja.create,l7=Nm.create,p7=hs.create,u7=gs.create,f7=ys.create,d7=xs.create,m7=To.create,yD=$r.create,h7=mn.create,g7=ti.create,y7=$r.createWithPreprocess,x7=Ll.create,T7=()=>ED().optional(),S7=()=>RD().optional(),v7=()=>kD().optional(),b7={string:t=>yo.create({...t,coerce:!0}),number:t=>as.create({...t,coerce:!0}),boolean:t=>ls.create({...t,coerce:!0}),bigint:t=>cs.create({...t,coerce:!0}),date:t=>ps.create({...t,coerce:!0})},w7=ge,$e=Object.freeze({__proto__:null,defaultErrorMap:Va,setErrorMap:w8,getErrorMap:Dm,makeIssue:Im,EMPTY_PATH:_8,addIssueToContext:X,ParseStatus:zt,INVALID:ge,DIRTY:Ha,OK:or,isAborted:uv,isDirty:fv,isValid:Cl,isAsync:Ol,get util(){return Oe},get objectUtil(){return pv},ZodParsedType:J,getParsedType:go,ZodType:Se,datetimeRegex:bD,ZodString:yo,ZodNumber:as,ZodBigInt:cs,ZodBoolean:ls,ZodDate:ps,ZodSymbol:Ba,ZodUndefined:us,ZodNull:fs,ZodAny:xo,ZodUnknown:Ii,ZodNever:Fn,ZodVoid:Wa,ZodArray:Fi,ZodObject:Rr,ZodUnion:ds,ZodDiscriminatedUnion:Cm,ZodIntersection:ms,ZodTuple:ei,ZodRecord:Om,ZodMap:$a,ZodSet:ja,ZodFunction:Nm,ZodLazy:hs,ZodLiteral:gs,ZodEnum:ys,ZodNativeEnum:xs,ZodPromise:To,ZodEffects:$r,ZodTransformer:$r,ZodOptional:mn,ZodNullable:ti,ZodDefault:Ts,ZodCatch:Ss,ZodNaN:qa,BRAND:V8,ZodBranded:Nl,ZodPipeline:Ll,ZodReadonly:vs,custom:_D,Schema:Se,ZodSchema:Se,late:B8,get ZodFirstPartyTypeKind(){return me},coerce:b7,any:Q8,array:J8,bigint:j8,boolean:kD,date:q8,discriminatedUnion:n7,effect:yD,enum:f7,function:l7,instanceof:W8,intersection:i7,lazy:p7,literal:u7,map:a7,nan:$8,nativeEnum:d7,never:Y8,null:K8,nullable:g7,number:RD,object:e7,oboolean:v7,onumber:S7,optional:h7,ostring:T7,pipeline:x7,preprocess:y7,promise:m7,record:s7,set:c7,strictObject:t7,string:ED,symbol:z8,transformer:yD,tuple:o7,undefined:G8,union:r7,unknown:Z8,void:X8,NEVER:w7,ZodIssueCode:G,quotelessJson:b8,ZodError:Wr});function PD(t){let e=t.operands.map(mv).join(" ");return`(#${t.operator} ${e})`}function mv(t){return t.type==="capture"?`@${t.name}`:t.value}function MD(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>_7(t,r))}function _7(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=mv(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var sr=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof Lm&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:MD(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new Lm(n.name);return i}else return n.value})}},Lm=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var hv=$e.object({type:$e.literal("string"),value:$e.string()}),we={node:$e.object({type:$e.literal("capture"),name:$e.string()}),string:hv,integer:hv.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:$e.ZodIssueCode.custom,message:"Expected an integer"}),$e.NEVER):{type:"integer",value:r}}),boolean:hv.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:$e.ZodIssueCode.custom,message:"Expected true or false"}),$e.NEVER))};var gv=class extends sr{constructor(){super(...arguments);this.name="not-type?";this.schema=$e.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return!n.includes(r.type)}},yv=class extends sr{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=$e.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},xv=class extends sr{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=$e.tuple([we.node,we.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},Tv=class extends sr{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=$e.tuple([we.node,we.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},Sv=class extends sr{constructor(){super(...arguments);this.name="child-range!";this.schema=$e.union([$e.tuple([we.node,we.integer]),$e.tuple([we.node,we.integer,we.integer]),$e.tuple([we.node,we.integer,we.integer,we.boolean]),$e.tuple([we.node,we.integer,we.integer,we.boolean,we.boolean])])}run(r,n,i,o,a){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let p=l[n],u=l[i];return r.range=dn(o?p.endPosition:p.startPosition,a?u.startPosition:u.endPosition),!0}},vv=class extends sr{constructor(){super(...arguments);this.name="character-range!";this.schema=$e.union([$e.tuple([we.node,we.integer]),$e.tuple([we.node,we.integer,we.integer])])}run(r,n,i){return r.range=new W(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},bv=class extends sr{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=$e.tuple([we.node,we.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[p,u]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new W(i.positionAt(d+p),i.positionAt(d+u)),!0}},wv=class extends sr{constructor(){super(...arguments);this.name="trim-end!";this.schema=$e.tuple([we.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),a=o.length-o.trimEnd().length;return a>0&&(r.range=new W(i.start,Rk(n,i.end,-a))),!0}},_v=class extends sr{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=$e.tuple([we.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},Ev=class extends sr{constructor(){super(...arguments);this.name="log!";this.schema=$e.tuple([we.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},Rv=class extends sr{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=$e.tuple([we.node,we.string])}run(r,n){return r.insertionDelimiter=n,!0}},kv=class extends sr{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=$e.tuple([we.node,we.node,we.string,we.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},AD=[new Ev,new gv,new wv,new yv,new xv,new Sv,new vv,new bv,new _v,new Rv,new kv,new Tv];function DD(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((a,l)=>{let p=AD.find(({name:d})=>d===a.operator);if(p==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${a.operator}"`});return}let u=p.createPredicate(a.operands);if(!u.success){e.push(...u.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(u.predicate)}),r.push(o)}),{errors:e,predicates:r}}function ID(t,e){let{errors:r,predicates:n}=DD(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${PD(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");st(M().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(M().runMode==="test")throw new Error("Invalid predicates")}return n}function Pv(t){return{row:t.line,column:t.character}}function FD(t){return t.map(e=>({...e,range:Mv(e),name:E7(e)}))}function Mv(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function E7(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var Av=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&CD(this.startPosition,r)&&CD(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function CD(t,e){return t==null||e==null?t===e:t.isEqual(e)}var bs=new Av;var Ul=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=M().runMode!=="production"}static create(e,r,n){let i=ID(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>cv(r)===e)}matches(e,r,n){if(!bs.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);bs.update(e,r,n,i)}return bs.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let a of i){let l=this.createMutableQueryMatch(e,a);this.runPredicates(l)&&o.push(this.createQueryMatch(l))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?Pv(r):void 0,endPosition:n!=null?Pv(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.pattern,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:cD(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>hD(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=cv(i.name),a=Mv(i),l=n.get(o);if(l==null){let p=[i],u={...i,name:o,range:a,hasError:()=>p.some(d=>d.hasError())};r.push(u),n.set(o,{acc:u,captures:p})}else l.acc.range=l.acc.range.union(a),l.acc.allowMultiple=l.acc.allowMultiple||i.allowMultiple,l.acc.insertionDelimiter=l.acc.insertionDelimiter??i.insertionDelimiter,l.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!mD(FD(r.captures),M().messages)&&M().runMode==="test")throw new Error("Invalid captures")}};var ND="_",R7=[ND,"interior",...Yo],k7=["prefix","leading","trailing"],P7=["startOf","endOf","start.startOf","start.endOf","end.startOf","end.endOf"],M7=["domain","removal","iteration","iteration.domain"],OD=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],ws=new Set;for(let t of R7){if(t!==ND){ws.add(t);for(let e of OD)ws.add(`${t}.${e}`)}for(let e of k7){ws.add(`${t}.${e}`);for(let r of P7)ws.add(`${t}.${e}.${r}`)}for(let e of M7){ws.add(`${t}.${e}`);for(let r of OD)ws.add(`${t}.${e}.${r}`)}}var A7=/^(?!;;).*(?<!"\w*)@([\w.]*)/gm;function LD(t,e){let r=e.matchAll(A7),n=[];for(let o of r){let a=o[1];if(!(a.length>1&&!a.includes(".")&&a.startsWith("_"))&&!ws.has(a)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${a}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(st(M().messages,"validateQueryCaptures.invalidCaptureName",i),M().runMode==="test")throw new Error(i)}var Um=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await D7(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let a=n.getLanguage(i).query(o),l=Ul.create(i,n,a);return new t(l)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new pm(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let a=o.name;n[a]==null&&(n[a]=[]),n[a].push(o)}return n}};async function D7(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,a]of Object.entries(n)){if(a!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(st(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&LD(o,l),n[o]=l,sn(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,p=>{let u=p[1];i&&I7(t,o,u,p[0]),n[u]=n[u]??null})}return Object.values(n).join(`
`)}function I7(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(st(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(st(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var UD=Symbol("LANGUAGE_UNDEFINED"),Hm=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Vt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&bs.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:a})=>this.loadLanguage(a.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(st(this.ide.messages,"Failed to load language definitions",An(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await Um.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??UD;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),bs.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===UD?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var Vm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e){for(let r of this.nestedStages)try{return r.run(e)}catch{continue}throw new Error("No modifier could be applied")}};var za=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e){if(this.shouldModify(e))try{return this.nestedStage.run(e).map(r=>r.withThatTarget(e))}catch(r){if(!this.suppressErrors)throw r}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},Ga=class extends za{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},Bm=class extends za{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},Wm=class extends za{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},Ka=class extends za{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function HD(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function Qa(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&HD(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.textualType==="line"&&r.textualType==="line"?new ir({editor:e.editor,isReversed:t,contentRange:_a(e,r,n,i)}):new qt({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:wa(e,r,n,i),textualType:n&&i&&e.textualType==="token"&&r.textualType==="token"?"token":"character"})}function $m(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[a]=i,l=a.contentRange.start.isAfterOrEqual(o.contentRange.start),[p,u]=l?[o,a]:[a,o];return[Qa(t,p,u,!0,!0)]}function jm(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,a]=i;return n==="forward"?a:n==="backward"||(t.isPreferredOver?.(o,a)??!1)?o:a}default:throw new Error("Expected no more than 2 scope candidates")}}function qm(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:a}}=t;if(a.isEqual(o)){let u=jm(e,i,o);return u==null||(r>0&&(u=Dv(e,i,u.domain.end,"forward",r,!0)),u==null)?void 0:u.getTargets(n)}let l=Dv(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(a))return l.getTargets(n);let p=Dv(e,i,a,"backward",r);if(p!=null)return $m(n,l,p)}function Dv(t,e,r,n,i,o=!1){let a=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(a===i)return l;a+=1}}var Za=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.maybeCreate(r,e.editor.document.languageId);if(i==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let o=qm(e,i,n);if(o==null)throw new pt(r.type);return o}};var zm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,{editor:n,isReversed:i}=e,o=this.scopeHandlerFactory.maybeCreate(r,n.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let a;if(e.hasExplicitRange&&(a=VD(o,n,e.contentRange),a.length===1&&a[0].domain.contains(e.contentRange)&&!e.hasExplicitScopeType&&(a=void 0)),a==null&&(a=this.getDefaultIterationRange(o,this.scopeHandlerFactory,e).flatMap(l=>VD(o,n,l))),a.length===0)throw new pt(r.type);return a.flatMap(l=>l.getTargets(i))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=qm(n,i);if(o==null)throw new pt(`iteration scope for ${e.scopeType.type}`);return o.map(a=>a.contentRange)}};function VD(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var Gm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},Km=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Qm=class{run(){return Fd(M()).map(e=>new Ad({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var Zm=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new Iv(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},Iv=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return C7(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return vt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return O7(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[So(e,r,n,i)];let a=Ov(e,r);return[So(n?BD(this.modifierStageFactory,e,o,a?"backward":"forward"):e,i?BD(this.modifierStageFactory,r,o,a?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n,i=!1;e.type==="implicit"?(r=new Qm,n=[]):(r=this.markStageFactory.create(e.mark),n=Fv(this.modifierStageFactory,e.modifiers),i=F7(e));let o=r.run(),[a,l]=this.getPreAndPostStages(i),p=[...a,...n,...this.opts.actionFinalStages,...l];return Cv(p,o)}getPreAndPostStages(e){if(this.opts.noAutomaticTokenExpansion)return[[],[]];let r=new Ka(this.modifierStageFactory);return e?[[r],[]]:[[],[r]]}};function F7(t){return t.modifiers.length>0&&t.modifiers.every(({type:e})=>e==="startOf"||e==="endOf")}function Fv(t,e){return e.map(t.create).reverse()}function Cv(t,e){return t.forEach(r=>{e=e.flatMap(n=>r.run(n))}),e}function BD(t,e,r,n){return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e)[0]}function Ov(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function C7(t){return AP(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function WD(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function So(t,e,r=!1,n=!1){WD(t,e);let i=Ov(t,e);return Qa(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function O7(t,e,r,n){WD(t,e);let i=Ov(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),u=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let m=l;;m+=o){let g=new W(m,t.contentRange.start.character,m,t.contentRange.end.character);if(d.push(new Be({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),m===u)return d}}var Ym=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getModifierStages(),n=Cv(r,[e]),i=this.modifier.type==="extendThroughStartOf";return n.map(o=>new Dd({editor:e.editor,isReversed:i,inputTarget:e,modifiedTarget:o,isHead:i}))}getModifierStages(){return this.modifier.modifiers!=null?Fv(this.modifierStageFactory,this.modifier.modifiers):[new Nv(this.modifierStageFactory,this.modifier)]}},Nv=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getContainingLine(e),n=this.getContainingPairInterior(e),i=n!=null?r.contentRange.intersection(n.contentRange):null;return i==null||i.isEmpty?[r]:[new Be({editor:e.editor,isReversed:e.isReversed,contentRange:i})]}getContainingPairInterior(e){try{return this.getContaining(e,{type:"surroundingPairInterior",delimiter:"any"})[0]}catch(r){if(r instanceof pt)return;throw r}}getContainingLine(e){return this.getContaining(e,{type:"line"})[0]}getContaining(e,r){return this.modifierStageFactory.create({type:"containingScope",scopeType:r}).run(e)}};var ri=class extends Error{constructor(e,r){let n=r!=null?` #${r+1}`:"";super(`Scope '${e.type}'${n} is out of range`),this.name="OutOfRangeError"}};function $D(t,e,r,n){return Lv(t,e,r,n),e.slice(r,n+1)}function Lv(t,e,r,n){if(r<0||r>=e.length)throw new ri(t,r);if(n<0||n>=e.length)throw new ri(t,n)}var Ya=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e){let r=new Ka(this.modifierStageFactory).run(e)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(r);case"ordinalScope":return this.handleOrdinalScope(r,this.modifier);case"relativeScope":return this.handleRelativeScope(r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e){return Array.from(Jd(this.getEveryRanges(e),([r,n])=>this.getTargetIterable(e,r,n,"forward")))}handleOrdinalScope(e,{start:r,length:n,scopeType:i}){return this.getEveryRanges(e).flatMap(([o,a])=>jD(i,this.getTargetIterable(e,o,a,r>=0?"forward":"backward"),r>=0?r:-(n+r),n))}handleRelativeScope(e,{direction:r,offset:n,length:i,scopeType:o}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(l=>{let{editor:p}=l,u=r==="forward"?new W(n===0?l.contentRange.start:l.contentRange.end,p.document.range.end):new W(p.document.range.start,n===0?l.contentRange.end:l.contentRange.start);return jD(o,this.getTargetIterable(e,p,u,r),n===0?0:n-1,i)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i){let o=Nt(fn(new RegExp(Lr(e.contentText),"g"),r,n,i),l=>new Be({contentRange:l,editor:r,isReversed:!1,textualType:"character"})),a=N7(e);if(a!=null){let l=this.modifierStageFactory.create({type:"containingScope",scopeType:a});return Yd(Nt(o,p=>{try{let u=l.run(p);return u.length===1&&u[0].contentRange.isRangeEqual(p.contentRange)?u[0]:null}catch{return null}}),p=>p!=null)}return o}};function N7(t){switch(t.textualType){case"line":case"token":case"word":return{type:t.textualType};default:return null}}function jD(t,e,r,n){Array.from(Al(r,e));let i=Array.from(Al(n,e));if(i.length<n)throw new ri(t,r+n-1);return i}var Xm=class{constructor(e,r){this.modifierHandlerFactory=e;this.modifier=r}run(e){let r=e.getInterior();return r??this.modifierHandlerFactory.create({type:"containingScope",scopeType:{type:"interior",explicitScopeType:e.hasExplicitScopeType}}).run(e)}},Jm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=Uv(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoBoundaryStage.run(e).flatMap(r=>r.getBoundary())}};function Uv(t){return new Bm(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var ni={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},Hv={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var eh=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},th=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(Hv).run(e).map(r=>{let n=r.getLeadingDelimiterTarget();if(n==null)throw new eh("leading");return n})}},rh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(Hv).run(e).map(r=>{let n=r.getTrailingDelimiterTarget();if(n==null)throw new eh("trailing");return n})}};function nh(t,e,r,n,i){return Lv(t,r,n,i),n===i?r[n]:Qa(e,r[n],r[i],!0,!0)}function ih(t,e,r){return t.create({type:"everyScope",scopeType:r}).run(e)}var oh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=ih(this.modifierStageFactory,e,this.modifier.scopeType),n=this.modifier.start+(this.modifier.start<0?r.length:0),i=n+this.modifier.length-1;return this.modifier.isEvery?$D(this.modifier.scopeType,r,n,i):[nh(this.modifier.scopeType,e.isReversed,r,n,i)]}};var sh=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new po(r):new Be({...r,textualType:"character"})]}},ah=class extends sh{getContentRange(e){return e.start.toEmptyRange()}},ch=class extends sh{getContentRange(e){return e.end.toEmptyRange()}};var lh=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,n=new Za(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:r});try{return n.run(e)}catch(a){if(!(a instanceof pt))throw a}let i=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),o=L7(e,i);if(o==null)throw Error(`No scopes found for scope type: ${r.type}`);return o}};function L7(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=qD(r,i),a=qD(n,i),l=o.distance<a.distance?o.scope:a.scope;return l?.getTargets(t.isReversed)}function qD(t,e){let r,n=1/0;for(let i of t){let o=Math.min(zD(e,i.domain.start),zD(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function zD(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var ph=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifierStageFactory.create(this.modifier.anchor),n=this.modifierStageFactory.create(this.modifier.active),i=r.run(e),o=n.run(e);if(i.length!==1||o.length!==1)throw new Error("Expected single anchor and active target");return[So(i[0],o[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var uh=class{constructor(e){this.modifier=e}run(e){return[new po({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var fh=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function GD(t,e,r){let n=ih(t,B7(r),e.scopeType),i=V7(r.contentRange,n);return U7(e,r,n,i)}function U7(t,e,r,n){let i=t.direction==="forward",o=H7(t,e.contentRange,r,i,n),a=i?o+t.length-1:o-t.length+1,l=Math.min(o,a),p=Math.max(o,a);return[nh(t.scopeType,e.isReversed,r,l,p)]}function H7(t,e,r,n,i){let o=t.offset===0;if(i==null){let p=n?r.findIndex(u=>u.contentRange.start.isAfter(e.start)):zo(r,u=>u.contentRange.start.isBefore(e.start));if(p===-1)throw new ri(t.scopeType);return o?p:n?p+t.offset-1:p-t.offset+1}let a=i.start,l=i.end;if(o){let p=l-a+1;if(p>t.length)throw new fh(t.length,p,t.scopeType.type);return n?a:l}return n?l+t.offset:a-t.offset}function V7(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function B7(t){return new qt({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var dh=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let r=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(r==null)return GD(this.modifierStageFactory,this.modifier,e);let n=Array.from(this.modifier.offset===0?W7(r,e,this.modifier):$7(r,e,this.modifier));if(n.length<this.modifier.length)throw new ri(this.modifier.scopeType,this.modifier.offset+this.modifier.length-1);let{isReversed:i}=e;return this.modifier.isEvery?n.flatMap(o=>o.getTargets(i)):$m(i,n[0],n[n.length-1])}};function W7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a}=r,l=jm(t,n,a==="forward"?i.start:i.end,a)?.domain;if(l==null)throw new pt(r.scopeType.type);return Al(o,t.generateScopes(n,a==="forward"?l.start:l.end,a,{skipAncestorScopes:!0}))}function $7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a,offset:l}=r,p=a==="forward"?i.end:i.start,u=i.isEmpty?"disallowed":"disallowedIfStrict";return kA(t.generateScopes(n,p,a,{containment:u,skipAncestorScopes:!0}),l-1,l+o-1)}var mh=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new Be({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};function KD(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function QD(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let a of o){if(n==null||(n=a(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var Vv=t=>new pe(t.row,t.column),ZD=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(a,l)=>a!=null&&l.includes(a.type),o=a=>a!=null&&!i(a,n);return(a,l)=>{let p,{start:u,end:d}=l;if(i(a.parent,t))return i(a,e)?p=a.nextNamedSibling:i(a,r)?p=a.previousNamedSibling:a.type===","?p=d.isBeforeOrEqual(Vv(a.startPosition))?a.previousNamedSibling:a.nextNamedSibling:p=a,o(p)?p:null;if(i(a,t)){let m=[...a.children],g=m.find(({startPosition:b})=>Vv(b).isAfterOrEqual(d))??null;if(o(g))return g;m.reverse();let x=m.find(({endPosition:b})=>Vv(b).isBeforeOrEqual(u))??null;if(o(x))return x}return null}};function Le(...t){let e=j7(t);return r=>{for(let n of e){let i=q7(r,n);if(i!=null)return i}return null}}function j7(t){return t.map(e=>e.split(".").map(r=>new Bv(r)))}function q7(t,e){let r=z7(t,e);!r&&e.length>1&&(r=G7(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function z7(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function G7(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let a=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=a.length===1?a[0]:null}}return r}var Bv=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Ne(t,e=Xn){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function hh(t,e=Xn){let r=KD(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function Xa(t,e=0,r=Xn){return Ne(QD(e,...t),r)}function _t(...t){return Ne(Le(...t))}function Ja(...t){return Ne(ZD(...t),pD())}function ec(...t){return Ne(Le(...t),uD)}function Cn(t,e=[]){return Ne(Le(...t),fD(...e))}function vo(t,e=[]){return Ne(Le(...t),dD(...e))}function gt(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function YD(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function gn(t){return Object.freeze(Object.fromEntries(_i(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,_t(...r)]:typeof r=="string"?[e,_t(r)]:[e,r]})))}function XD(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function K7(t,e){return tI(t,r=>Math.floor(r/2)*2+e)}function JD(t){return K7(Le("map_lit"),t)}function tI(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=Hl(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let a=e(o);return a===-1?null:i[a]}}var Hl=t=>XD(t,"value"),Wv="~quoting_lit.list_lit!",rI=Le(Wv);function $v(...t){return e=>{let r=rI(e);if(r==null)return null;let n=Hl(r)[0];return t.includes(n?.text)?r:null}}function Q7(...t){return Ne($v(...t))}var nI=$v("defn","defmacro"),eI=hh([nI,t=>Hl(t)[1]]),iI=$v("if","if-let","when","when-let"),Z7=Ne(iI),Y7={collectionKey:Ne(JD(0)),value:Ne(JD(1)),argumentOrParameter:Ne(tI(Le(Wv),t=>t!==0?t:-1)),functionCall:Wv,functionCallee:hh([rI,t=>Hl(t)[0]]),namedFunction:Ne(nI),functionName:eI,name:eI,anonymousFunction:gt(Q7("fn"),_t("anon_fn_lit")),ifStatement:Z7,condition:hh([iI,t=>Hl(t)[1]])},oI=gn(Y7);var sI=["command","displayed_equation","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],X7=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],cI=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],aI=cI.map(t=>`${t}[text]`),J7=cI.map(t=>`${t}[command]`);function jv(t,e){return{selection:new be(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new be(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function eQ(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new be(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}var tQ={argumentOrParameter:gt(Xa([Le(...sI),Le(...X7)],1,jv),Ne(Le("begin[name]","end[name]",...aI),jv)),functionCall:gt(Ne(Le(...sI,"begin","end")),Ne(Le(...J7),eQ)),name:gt(Ne(Le(...aI),jv),_t("begin[name][text]","end[name][text]"))},lI=gn(tQ);var rQ=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],nQ=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],iQ=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],oQ=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],sQ=[":","=>"];function aQ(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var cQ={statement:gt(_t(...rQ),Xa([Le(...iQ),Le(...nQ)],1)),anonymousFunction:gt(_t("lambda","do_block"),Ne(aQ)),condition:ec("*[condition]"),argumentOrParameter:Ja("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:vo(["pair[key]"],[":"]),value:Cn(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],oQ.concat(sQ))},pI=gn(cQ);function qv(){let t=Jn(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let a=r.childForFieldName("alternative");if(a==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new be(l.start,sv(a.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new be(sv(i.child(0).startPosition),o.end),context:{}}}}function uI(t){let e=qv();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):Xn(r,n)}}var fI=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],lQ=["source_file","block","declaration_list"];function pQ(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function uQ(t,e){return{selection:lD(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:dn(e.children[0].startPosition,e.children[1].startPosition)}}}function fQ(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return fI.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var dQ={statement:Xa([Le(...lQ),Le(...fI)],1),condition:gt(_t("while_expression[condition]","if_expression[condition]"),Ne(Le("while_let_expression","if_let_expression"),Jn(["while","if","block"],[],{includeUnnamedChildren:!0})),Cn(["*.match_pattern![condition]"],["if"])),type:gt(Cn(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Ne(Le("constrained_type_parameter[bounds]","where_predicate[bounds]"),uQ),Cn(["function_item[return_type]"],["->"]),Ne(pQ),_t("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:Ja("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:gt(vo(["field_initializer[name]","field_pattern[name]"],[":"])),name:gt(_t("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),vo(["field_initializer[name]","field_pattern[name]"],[":"])),value:gt(Cn(["let_declaration[value]"],["="]),Cn(["field_initializer[value]","field_pattern[pattern]"],[":"]),_t("meta_item[value]","const_item[value]"),Ne(fQ)),attribute:vo(["mutable_specifier","attribute_item"]),branch:gt(_t("match_arm"),Ne(Le("else_clause"),uI("if_expression")),Ne(Le("if_expression"),qv()))},dI=gn(dQ);var mQ={argumentOrParameter:Ja("arguments","parameters","class_parameters","bindings"),branch:Ne(Le("case_clause"),Jn([],[],{includeUnnamedChildren:!0})),type:Cn(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:Cn(["*[value]","*[default_value]","type_definition[type]"],["="]),condition:ec("*[condition]")},mI=gn(mQ);var hQ=["apply_statement","at_rule","charset_statement","debug_statement","each_statement","error_statement","for_statement","forward_statement","function_statement","if_statement","import_statement","include_statement","keyframes_statement","media_statement","mixin_statement","namespace_statement","placeholder","rule_set","supports_statement","use_statement","warn_statement","while_statement"];function gI(t){return[",","(",")"].includes(t.type)||yI(t)}function yI(t){return t.type==="plain_value"&&t.text==="at"}function hI(t){return e=>{(yI(e)||e.type===",")&&(e=e.previousSibling);let r=t(e);for(;r&&!gI(r);)e=r,r=t(r);return e}}function gQ(t,e){return e.type!=="declaration"?null:e.descendantsOfType("unit").map(r=>({node:r,selection:Xn(t.editor,r)}))}var yQ={condition:ec("condition"),statement:gt(_t(...hQ),Ne(Le("attribute_selector"),Jn([],["attribute_name","string_value"]))),argumentOrParameter:gt(Ne(Le("arguments.*!","parameters.*!"),av(t=>gI(t),", ",hI(t=>t.previousSibling),hI(t=>t.nextSibling)))),collectionKey:vo(["declaration.property_name!"],[":"]),value:gt(Ne(Le("declaration"),Jn(["property_name","variable_name"])),Ne(Le("include_statement","namespace_statement"),Jn()),_t("return_statement.*!","import_statement.*!","attribute_selector.plain_value!","attribute_selector.string_value!","parameter.default_value!")),unit:gt(_t("integer_value.unit!"),gQ)},zv=gn(yQ);function xI(t,e,r){let n=Vl[t];if(n==null)throw new Fu(t);let i=n[e];return i==null?YD(e):r?xQ(i):i}var Vl={clojure:oI,css:zv,latex:lI,ruby:pI,rust:dI,scala:mI,scss:zv};function xQ(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>TQ(i.node,wd(e,i.selection.selection),t)),n.length>0?n:null)}}function TQ(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var gh=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=xI(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new pt(this.modifier.scopeType.type);let i=SQ(n,r,{editor:e.editor,selection:new be(e.contentRange.start,e.contentRange.end)});if(i==null)throw new pt(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:a,leadingDelimiterRange:l,trailingDelimiterRange:p,removalRange:u}=o.context;if(u!=null&&(l!=null||p!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:d,selection:m}=o.selection;return new fo({scopeTypeType:this.modifier.scopeType.type,editor:d,isReversed:e.isReversed,contentRange:m,removalRange:u,insertionDelimiter:a,leadingDelimiterRange:l,trailingDelimiterRange:p})})}};function SQ(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:wd(r,o.selection),context:o.context}));n=n.parent}return null}var tc=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new ah;case"endOf":return new ch;case"extendThroughStartOf":case"extendThroughEndOf":return new Ym(this,e);case"toRawSelection":return new uh(e);case"interiorOnly":return new Xm(this,e);case"excludeInterior":return new Jm(this,e);case"leading":return new th(this,e);case"trailing":return new rh(this,e);case"visible":return new mh(e);case"containingScope":return new Za(this,this.scopeHandlerFactory,e);case"preferredScope":return new lh(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new Ya(this,this.storedTargets,e):new zm(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new Ya(this,this.storedTargets,e):new oh(this,e);case"relativeScope":return e.scopeType.type==="instance"?new Ya(this,this.storedTargets,e):new dh(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new Gm(e);case"keepEmptyFilter":return new Km(e);case"cascading":return new Vm(this,e);case"modifyIfUntyped":return new Ga(this,e);case"range":return new ph(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}getLegacyScopeStage(e){switch(e.scopeType.type){default:return new gh(this.languageDefinitions,e)}}};async function TI(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Fe({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=_i(r),a=o.map(u=>{let d=r[u],m=vQ(d);return SI(e.document,m.selections,m.behavior)});n||a.push(SI(e.document,e.selections,1));let l=await("edits"in i?_Q(t,e,i.edits,a):vI(t,i.callback,e.document,a));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((u,d)=>[u,l[d]]))}function SI(t,e,r){return e.map(n=>bQ(t,n,n instanceof be?!n.isReversed:!0,r))}function vQ(t){return"selections"in t?t:{selections:t,behavior:1}}function bQ(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function wQ(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new be(r,n):new be(n,r)))}async function vI(t,e,r,n){let i=t.registerRangeInfoList(r,Je(n));return await e(),i(),wQ(n)}async function _Q(t,e,r,n){return await vI(t,async()=>{if(!await TI(t,e,r))throw new Error("Could not apply edits")},e.document,n)}var yh=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Ie(M(),e,"pendingModification0"),{thatSelections:Je(await rt(e,async(n,i)=>{let o=i.map(({contentRange:u})=>u),a=EQ(n,o),l=M().getEditableTextEditor(n),{contentRanges:p}=await Fe({rangeUpdater:this.rangeUpdater,editor:l,edits:a,selections:{contentRanges:o}});return vt(i,p).map(([u,d])=>({editor:u.editor,selection:d.toSelection(u.isReversed)}))}))}}};function EQ(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,a=r.lineAt(o),l=a.text.slice(0,a.rangeTrimmed?.start?.character??a.range.start.character),p=a.text.slice(0,o.character).search(/\s+$/),u=p>-1?new W(new pe(a.lineNumber,p),o):o.toEmptyRange();n.push({range:u,text:`
`+l,isReplace:!u.isEmpty})}return n}function xh(t){return t.length<2?t:zM(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,a)=>o.contentRange.start.compareTo(a.contentRange.start));let i=!0;for(;i;)[n,i]=RQ(n);return n})}function RQ(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!kQ(r[r.length-1],n)?(e.push(bI(r)),r=[n]):r.push(n)}),e.push(bI(r)),[e,e.length!==t.length]}function bI(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return So(e,r)}function kQ(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Bl=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Ie(M(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Ie(M(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((a,l)=>{let p=r[l];if((a==null||p==null)&&!o)throw new Error("Targets must have same number of args");if(p!=null){let u;o?u=e.map((d,m)=>{let g=d.contentText,x=(p.isRaw?null:p.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return m>0&&x!=null?x+g:g}).join(""):u=a.contentText,i.push({edit:p.constructChangeEdit(u),editor:p.editor,originalTarget:p.target,isSource:!1})}else p=r[0];n.includes(a)||(n.push(a),this.type==="bring"&&i.push({edit:a.toDestination("to").constructChangeEdit(p.target.contentText),editor:a.editor,originalTarget:a,isSource:!0}))}),this.type==="move"&&xh(n).forEach(a=>{i.push({edit:a.constructRemovalEdit(),editor:a.editor,originalTarget:a,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return Je(await Mi(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),a=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),p=a.map(({edit:x})=>x.range),u=M().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:m}=await Fe({rangeUpdater:this.rangeUpdater,editor:u,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:p,behavior:0}}}),g=[...this.getMarks(o,d),...this.getMarks(a,m)];return g.sort((x,b)=>n.findIndex(v=>v.originalTarget===x.target)-n.findIndex(v=>v.originalTarget===b.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],a=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:a.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>pn(n,e.find(i=>i.target===n).selection);return Promise.all([Ie(M(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Ie(M(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function wI(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var Th=class extends Bl{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){r=wI(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:l}}},Sh=class extends Bl{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:PQ};this.run=this.run.bind(this)}async run(r,n){r=wI(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:l}}},vh=class extends Bl{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,a)=>{let l=n[a];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function PQ(t){return t.getRemovalHighlightRange()}var Wl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){wr(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var $l=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=$t(e),n=e.map(o=>new Be({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await M().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var rc=t=>new qt({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var nc=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Ie(M(),e,"referenced"),r.ensureSingleEditor&&$t(e),r.ensureSingleTarget&&wr(e);let n=M().activeEditableTextEditor,i=r.setSelection?qM:rt,o=Je(await i(e,(a,l)=>this.runForEditor(r,a,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=M().getEditableTextEditor(r),o=r.selections,a=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:p,targetSelections:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(p),r.document.version===a?n:u.map(d=>rc({editor:r,selection:d}))}};var Gt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new nc(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=M().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,a)=>MQ(o,i?a.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},bh=class extends Gt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},wh=class extends Gt{constructor(){super(...arguments);this.command="toggleLineComment"}},_h=class extends Gt{constructor(){super(...arguments);this.command="indentLine"}},Eh=class extends Gt{constructor(){super(...arguments);this.command="outdentLine"}},Rh=class extends Gt{constructor(){super(...arguments);this.command="fold"}},kh=class extends Gt{constructor(){super(...arguments);this.command="unfold"}},Ph=class extends Gt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},Mh=class extends Gt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},Ah=class extends Gt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},Dh=class extends Gt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Ih=class extends Gt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Fh=class extends Gt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Ch=class extends Gt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Oh=class extends Gt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}};function MQ(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Nh=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(M().capabilities.commands.clipboardCopy!=null)return new bh(this.rangeUpdater).run(e,r);r.showDecorations&&await Ie(M(),e,"referenced");let n=e.map(i=>i.contentText).join(`
`);return await M().clipboard.writeText(n),{thatTargets:e}}};var Lh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await M().flashRanges(e.flatMap(AQ));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function AQ(t){let{editor:e,contentRange:r}=t,n=t.getRemovalHighlightRange(),i=[{editor:e,range:rr(r),style:"referenced"}];return n.type==="line"?i.push({editor:e,range:n,style:"pendingDelete"}):i.push(...DQ(r,n).map(o=>({editor:e,range:rr(o),style:"pendingDelete"}))),i}function DQ(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,a=[];return i.isBefore(r)&&a.push(new W(i,r)),o.isAfter(n)&&a.push(new W(n,o)),a}var jl=class{constructor(){this.run=this.run.bind(this)}async run(e){return await rt(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(a=>{let l=a.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new Gv;await M().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},Gv=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function _I(t,e,r,n){let i=r.destinations.map((b,v)=>{if(n||r.actionTypes[v]==="edit")return{destination:b,index:v}}).filter(b=>!!b);if(i.length===0)return r;let o=i.map(b=>b.destination.constructChangeEdit("")),a=r.cursorRanges.map((b,v)=>({range:b,index:v})).filter(({range:b})=>b!=null),l=a.map(({index:b})=>b),p=a.map(({range:b})=>b),u=o.map(b=>b.range),{thatRanges:d,cursorRanges:m,editRanges:g}=await Fe({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:p,editRanges:{selections:u,behavior:0}}}),x=[...r.cursorRanges];return vt(l,m).forEach(([b,v])=>{x[b]=v}),i.forEach((b,v)=>{let I=o[v].updateRange(g[v]);x[b.index]=I}),{destinations:r.destinations,actionTypes:r.actionTypes,thatRanges:d,cursorRanges:x}}async function EI({acceptsLocation:t},e,r,n){let i=n.destinations.map((m,g)=>{if(n.actionTypes[g]==="insertLineAfter")return{destination:m,index:g}}).filter(m=>!!m);if(i.length===0)return n;let o=i.map(({destination:m})=>m.contentRange),a=n.destinations.map(({contentRange:m})=>m),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(m=>m.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:p,thatRanges:u}=await Fe({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:a,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((m,g)=>{d[m.index]=r.selections[g]}),{destinations:n.destinations.map((m,g)=>m.withTarget(m.target.withContentRange(p[g]))),actionTypes:n.actionTypes,thatRanges:u,cursorRanges:d}}async function RI(t,e){let r=wr(e),n=M().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:ln([r.target.thatTarget])}}var Uh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return RI(this.actions,e);let r=M().getEditableTextEditor($t(e)),n={destinations:e,actionTypes:e.map(l=>l.getEditNewActionType()),thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=M().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await EI(i,this.rangeUpdater,r,n)),n=await _I(this.rangeUpdater,r,n,!o);let a=n.destinations.map((l,p)=>{let u=n.cursorRanges[p];if(u==null)throw Error("Cursor range is undefined for destination");return u.toSelection(l.target.isReversed)});return await r.setSelections(a,{focusEditor:!0}),{thatSelections:ln(n.destinations.map(l=>l.target),n.thatRanges)}}};var Hh=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ni)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},Vh=class extends Hh{constructor(){super(...arguments);this.insertionMode="before"}},Bh=class extends Hh{constructor(){super(...arguments);this.insertionMode="after"}};var ql=class{constructor(e){this.callbackAction=new nc(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:a,showDecorations:l}={}){let p=n??[];return this.callbackAction.run(e,{callback:()=>M().executeCommand(r,...p),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:a??!0,showDecorations:l??!0})}};var Wh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){wr(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),tl(M().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},$h=class extends Wh{find(e){return M().findInDocument(e)}},jh=class extends Wh{find(e){return M().findInWorkspace(e)}};var qh=class{constructor(){this.run=this.run.bind(this)}async run(e){return await Ie(M(),e,"referenced"),{thatTargets:e}}};var ic=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=wr(e);return await Ie(M(),e,"referenced"),await M().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:ln(e)}}};function kI(t){let e=t.split(/^---$/m),r={snippets:[]};for(let n of e){let i=n.match(/^-$/m),o=i!=null?n.slice(0,i.index):n,a=i!=null?n.slice(i.index+i[0].length):null,l=a?OQ(a):null,p=IQ(o);if(l!=null){p==null&&(p={variables:[]});let{variables:u,...d}=p;r.snippets.push({...d,body:l,variables:u})}else if(p!=null){if(r.header!=null||r.snippets.length!==0)throw Error("Header snippet must be first in file");r.header=p}}return r}function IQ(t){let e={variables:[]},r=FQ(t);if(Object.keys(r).length===0)return;let n={};for(let[i,o]of Object.entries(r))switch(i){case"name":e.name=o;break;case"description":e.description=o;break;case"phrase":e.phrases=zl(o);break;case"insertionScope":e.insertionScopes=zl(o);break;case"language":e.languages=zl(o);break;default:if(!i.startsWith("$"))throw Error(`Invalid key '${i}'`);n[i]=o}return e.variables=CQ(n),e}function FQ(t){let e=t.split(/\r?\n/).map(n=>n.trim()).filter(Boolean),r={};for(let n of e){let i=n.split(":");if(i.length!==2)throw Error(`Invalid line '${n}'`);let o=i[0].trim(),a=i[1].trim();if(o.length===0||a.length===0)throw Error(`Invalid line '${n}'`);if(r[o]!=null)throw Error(`Duplicate key '${o}' in '${t}'`);r[o]=a}return r}function CQ(t){let e={},r=n=>(e[n]==null&&(e[n]={name:n}),e[n]);for(let[n,i]of Object.entries(t)){let o=n.split(".");if(o.length!==2)throw Error(`Invalid variable key '${n}'`);let a=o[0].slice(1);switch(o[1]){case"insertionFormatter":r(a).insertionFormatters=zl(i);break;case"wrapperPhrase":r(a).wrapperPhrases=zl(i);break;case"wrapperScope":r(a).wrapperScope=i;break;default:throw Error(`Invalid variable key '${n}'`)}}return Object.values(e)}function OQ(t){let e=t.match(/^[ \t]*\S/m);if(e?.index!=null)return t.slice(e.index).trimEnd().split(/\r?\n/).map(r=>r.trimEnd())}function zl(t){return t.split("|").map(e=>e.trim())}function MI(t){let e=[];t.header!=null&&e.push(PI(t.header)),e.push(...t.snippets.map(PI));let r=e.filter(Boolean).join(`
---

`);return r?r+`
---
`:""}function PI(t){let e=[bo("name",t.name),bo("description",t.description),bo("language",t.languages),bo("phrase",t.phrases),bo("insertionScope",t.insertionScopes)].filter(Boolean);return t.variables.length>0&&(e.length>0&&e.push(""),e.push(...NQ(t.variables))),"body"in t&&e.push("-",...t.body),e.join(`
`)}function NQ(t){let e=[...t];return e.sort(LQ),e.flatMap(r=>[bo(`$${r.name}.insertionFormatter`,r.insertionFormatters),bo(`$${r.name}.wrapperPhrase`,r.wrapperPhrases),bo(`$${r.name}.wrapperScope`,r.wrapperScope)]).filter(Boolean)}function bo(t,e){return e==null?"":Array.isArray(e)?`${t}: ${e.join(" | ")}`:`${t}: ${e}`}function LQ(t,e){return t.name==="0"?1:e.name==="0"?-1:t.name.localeCompare(e.name)}function AI(t,e){let r=[],n=0,i=null,[o,...a]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...a.map(p=>({text:p,startIndex:0}))].forEach(({text:p,startIndex:u})=>{let d=p.match(/^\s*/)?.[0]??"",m=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let g=Math.max(m,u),x=wT("	",n),b=p.slice(g);r.push(x+b)}),r}function DI(t,e){let r=ET(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var oc=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){if(r==null)throw new Error("Directory argument is required for GenerateSnippet action. Please update Cursorless Talon");let i=wr(e),o=i.editor;if(Ie(M(),e,"referenced"),n==null&&(n=await M().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"}),!n))return{};let a=o.document.offsetAt(i.contentRange.start),l=HQ(o,i.contentRange),p=l.map((ie,ae)=>({offsets:{start:o.document.offsetAt(ie.start)-a,end:o.document.offsetAt(ie.end)-a},name:ae===l.length-1?"0":`${ae+1}`})),u=o.document.getText(new W(i.contentRange.start.with(void 0,0),i.contentRange.start)),d=o.document.getText(i.contentRange),m=DI(d,[...sn(d,/\$|\\/g,ie=>({offsets:{start:ie.index,end:ie.index+ie[0].length},text:`\\${ie[0]}`})),...p.map(({offsets:ie,name:ae})=>({offsets:ie,text:`$${ae}`}))]),g=AI(m,u),x,b={snippets:[]};M().runMode==="test"?x=M().getEditableTextEditor(o):(x=M().getEditableTextEditor(await this.snippets.openNewSnippetFile(n,r)),b=kI(x.document.getText())),await x.setSelections([x.document.range.toSelection(!1)]);let v=1,{header:F}=b,I=b.header?.phrases!=null?void 0:[`${Kv}${v++}`],U=ie=>{let ae=F?.variables?.some(it=>it.name===ie.name&&it.wrapperPhrases!=null);return{name:ie.name,wrapperPhrases:ae?void 0:[`${Kv}${v++}`]}},K={name:F?.name===n?void 0:n,phrases:I,languages:UQ(o,F),body:g,variables:p.map(U)};b.snippets.push(K);let ne=MI(b).replace(/\$/g,"\\$").replaceAll(Kv,"$");return await x.insertSnippet(ne),{thatSelections:e.map(({editor:ie,contentSelection:ae})=>({editor:ie,selection:ae}))}}};function UQ(t,e){if(!e?.languages?.includes(t.document.languageId))return[t.document.languageId]}function HQ(t,e){let r=t.selections.filter(n=>e.contains(n));return r.sort((n,i)=>n.start.compareTo(i.start)),r}var Kv="PLACEHOLDER_VFA77zcbLD6wXNmfMAay";var Gl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Kl=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Ie(M(),e,"referenced"),n&&wr(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var Ql=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(M().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(M().visibleTextEditors.map(n=>M().setHighlightRanges(r,n,[]))):await rt(e,(n,i)=>M().setHighlightRanges(r,n,i.map(o=>pn(o,o.contentRange)))),{thatTargets:e}}};var zh=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Ie(M(),e,"pendingModification0"),{thatTargets:Je(await rt(e,this.runForEditor))})}hasCapability(){return this.isIndent?M().capabilities.commands.indentLine!=null:M().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new _h(this.rangeUpdater):new Eh(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?VQ(e,r):BQ(e,r),{targetSelections:i}=await Fe({rangeUpdater:this.rangeUpdater,editor:M().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return vt(r,i).map(([o,a])=>rc({editor:e,selection:a.toSelection(o.isReversed)}))}},Gh=class extends zh{constructor(e){super(e,!0)}},Kh=class extends zh{constructor(e){super(e,!1)}};function VQ(t,e){let{document:r}=t,n=II(e),i=WQ(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function BQ(t,e){let{document:r}=t,n=II(e),i=$Q(t);return n.map(o=>{let a=r.lineAt(o),l=a.text.match(i),{start:p}=a.range,u=p.translate(void 0,l?.[0].length);return{range:new W(p,u),text:""}})}function II(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function WQ(t){if(t.options.insertSpaces){let e=FI(t);return" ".repeat(e)}return"	"}function $Q(t){if(t.options.insertSpaces){let e=FI(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function FI(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var Qh=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(ni)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=Je(await rt(e,this.runForEditor));return await M().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:rr(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),a=i.map(({range:g})=>g),l=M().getEditableTextEditor(e),{contentSelections:p,editRanges:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:a,behavior:0}}}),d=vt(i,u).map(([g,x])=>g.updateRange(x)),m=e.selections[0];return p.some(g=>g.intersection(m)!=null)&&await l.revealRange(m),{sourceMark:ln(r,d),thatMark:ln(r,p)}}},Zh=class extends Qh{constructor(e,r){super(e,r,!0)}},Yh=class extends Qh{constructor(e,r){super(e,r,!1)}};var Zl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ni)]}async run(e){let r=await rt(e,async(i,o)=>{let a=this.getEdits(o),l=o.map(d=>d.thatTarget.contentSelection),{contentSelections:p,editRanges:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:M().getEditableTextEditor(i),edits:a,selections:{contentSelections:l,editRanges:{selections:a.map(d=>d.range),behavior:0}}});return{thatMark:p.map(d=>({editor:i,selection:d})),flashRanges:Jo(a,u).map(([d,m])=>({editor:i,range:d.isLine?d.updateRange(m):m,isLine:d.isLine}))}});return await M().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:a,isLine:l})=>({editor:o,range:l?Ur(a):rr(a),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},Xh=class extends Zl{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[tg(r,"before"),tg(r,"after")])}},Jh=class extends Zl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>tg(r,"before"))}},eg=class extends Zl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>tg(r,"after"))}};function tg(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.textualType==="line"}}function OI(t,e){return jQ(CI(t),CI(e))}function CI(t){if(t.languages!=null)return{langIds:t.languages}}function jQ(t,e){if(t==null&&e==null)return 0;if(t==null)return-1;if(e==null)return 1;if(t.langIds==null&&e.langIds!=null)return-1;if(e.langIds==null&&t.langIds!=null)return 1;let r=qQ(t.scopeTypes,e.scopeTypes);return r!==0?r:t.langIds==null?0:e.langIds.length-t.langIds.length}function qQ(t,e){return t==null&&e!=null?-1:e==null&&t!=null?1:0}function sc(t,e){let r=zQ(t),n=GQ(r,e);n.sort(OI);let i=n[0];if(i==null)throw new Error("No snippet available for the current language");return i}function zQ(t){if(t.type==="named")throw new Error("Cursorless snippets are deprecated. Please use community snippets.");return t.type==="custom"?[t]:t.snippets}function GQ(t,e){return t.filter(r=>r.languages==null?!0:r.languages.includes(e))}var Qv=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},wo=class{constructor(){this._children=[]}appendChild(e){return e instanceof ar&&this._children[this._children.length-1]instanceof ar?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function a(l,p){for(let u of l)u.parent=p,a(u.children,u)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof ig)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},ar=class t extends wo{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},rg=class extends wo{},jr=class t extends rg{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof ng?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},ng=class t extends wo{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof ar&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},Zv=class t extends wo{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(a=>a instanceof On&&!!a.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof On){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},On=class t extends wo{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},_o=class t extends rg{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new ar(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function NI(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var ig=class t extends wo{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof jr&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return NI([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof jr&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof _o&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){NI(this.children,e)}},ac=class{constructor(){this._scanner=new Qv;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new ig;for(;this._parse(i););let o=new Map,a=[],l=0;i.walk(p=>(p instanceof jr&&(l+=1,p.isFinalTabstop?o.set(0,void 0):!o.has(p.index)&&p.children.length>0?o.set(p.index,p.children):a.push(p)),!0));for(let p of a){let u=o.get(p.index);if(u){let d=new jr(p.index);d.transform=p.transform;for(let m of u)d.appendChild(m.clone());i.replace(p,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new jr(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new ar(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new jr(Number(r)):new _o(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new jr(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new ar("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let a=new ng;for(;;){if(this._parseChoiceElement(a)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(a),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new ar(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new _o(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new ar("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new Zv,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new ar(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new On(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new On(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new On(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new On(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new On(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let a=this._until(4);if(a)return e.appendChild(new On(Number(i),void 0,o,a)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new On(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new ar(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var LI=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function og(t,e,r){let n=KQ(t)+1,i={};t.walk(o=>{if(o instanceof _o){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new ar(r[o.name])]);else if(!LI[o.name]){let a;o.name in i?a=i[o.name]:(a=n++,i[o.name]=a);let l=new jr(a);o.children.forEach(p=>l.appendChild(p)),o.parent.replace(o,[l])}}else o instanceof jr&&(o.index.toString()===e?o.parent.replace(o,[new _o("TM_SELECTED_TEXT")]):r!=null&&Object.prototype.hasOwnProperty.call(r,o.index)&&o.parent.replace(o,[new ar(r[o.index])]));return!0})}function KQ(t){let e=0;return t.walk(r=>(r instanceof jr&&(e=Math.max(e,r.index)),!0)),e}var Yl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new ac;this.run=this.run.bind(this)}getFinalStages(e,r){let n=$t(e),o=sc(r,n.document.languageId).scopeTypes??[];return o.length===0?[]:[new Wm(this.modifierStageFactory,{type:"cascading",modifiers:o.map(a=>({type:"containingScope",scopeType:a}))})]}async run(e,r){let n=M().getEditableTextEditor($t(e)),i=sc(r,n.document.languageId),o=this.snippetParser.parse(i.body),a=i.substitutions??r.substitutions;og(o,null,a);let l=o.toTextmateString();await this.actions.editNew.run(e);let{editorSelections:p}=await Fe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}};var Xl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ni)]}async run(e){return await Ie(M(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:Je(await rt(e,async(n,i)=>{let{thatRanges:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:M().getEditableTextEditor(n),edits:QQ(n,i),selections:{thatRanges:i.map(({contentRange:a})=>a)}});return Jo(i,o).map(([a,l])=>({editor:n,selection:l.toSelection(a.isReversed)}))}))}}};function QQ(t,e){let r=[];for(let n of e){let i=n.textualType==="token"?ZQ(n):YQ(n);r.push(...i)}return r}function ZQ(t){let{editor:e,contentRange:r}=t,n=_r(e.document.languageId).tokenMatcher,i=fn(n,e,r,"forward");return Array.from(GS(i)).map(([o,a])=>({range:new W(o.end,a.start),text:"",isReplace:!0}))}function YQ(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=Aa(PA(n,i+1),a=>e.lineAt(a));return Array.from(GS(o)).map(([a,l])=>({range:new W(a.rangeTrimmed?.end??a.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var sg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=M().getEditableTextEditor($t(e)),n=M().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:a,editorSelections:l}=await Fe({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(a),n!=null&&!n.isActive&&await n.focus(),await M().flashRanges(l.map(p=>({editor:r,range:rr(p),style:"justAdded"}))),{thatSelections:l.map(p=>({editor:r,selection:p}))}}};var ag=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await M().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?Jo(e,n).map(([a,l])=>({destination:a,text:l})):e.map(a=>({destination:a,text:r}));return{thatSelections:Je(await Mi(i,({destination:a})=>a.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:a,text:l})=>a.constructChangeEdit(l)),{editSelections:i}=await Fe({rangeUpdater:this.rangeUpdater,editor:M().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:a})=>a),behavior:0}}}),o=Jo(n,i).map(([a,l])=>a.updateRange(l).toSelection(l.isReversed));return await M().flashRanges(o.map(a=>({editor:e,range:rr(a),style:"justAdded"}))),o.map(a=>({editor:e,selection:a}))}};var cg=class{constructor(e,r){this.run=this.run.bind(this),this.runner=M().capabilities.commands.clipboardPaste!=null?new sg(e,r):new ag(e)}run(e){return this.runner.run(e)}};var Jl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=xh(e),r&&await Ie(M(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:Je(await rt(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(a=>a.constructRemovalEdit()),i=M().getEditableTextEditor(e),{editRanges:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:a})=>a)}});return vt(r,o).map(([a,l])=>new po({editor:a.editor,isReversed:a.isReversed,contentRange:l}))}};var ep=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Ie(M(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=vt(e,n).map(([l,p])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(p)})),o=[],a=[];return await Mi(i,l=>l.editor,async(l,p)=>{let u=p.map(({edit:g})=>g),{contentSelections:d,editRanges:m}=await Fe({rangeUpdater:this.rangeUpdater,editor:M().getEditableTextEditor(l),edits:u,selections:{contentSelections:p.map(({target:g})=>g.contentSelection),editRanges:{selections:u.map(({range:g})=>g),behavior:0}}});for(let[g,x]of vt(p,d))o.push(g.target.withContentRange(x));for(let[g,x]of vt(p,m))a.push({editor:l,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:a}}};var tp=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[Uv(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(a=>{let l=a.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Ie(M(),i,"pendingModification0");let o=await rt(i,async(a,l)=>{let p=l.map((m,g)=>({editor:a,range:m.contentRange,text:g%2===0?r:n})),{sourceRanges:u,thatRanges:d}=await Fe({rangeUpdater:this.rangeUpdater,editor:M().getEditableTextEditor(a),edits:p,selections:{sourceRanges:e.map(m=>m.thatTarget.contentRange),thatRanges:e.map(m=>m.contentRange)}});return{sourceMark:ln(e,u),thatMark:ln(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:a})=>a),thatSelections:o.flatMap(({thatMark:a})=>a)}}};var rp=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=dl(e,a=>a.editor),n=Array.from(r,([a,l])=>({lineNumber:XQ(l,this.at),editor:a})),i=M().activeEditableTextEditor;for(let a of n)await M().getEditableTextEditor(a.editor).revealLine(a.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(a=>{let l=a.editor.visibleRanges,p=l[0].start.line,u=l[l.length-1].end.line;return a.contentRange.start.line>p||a.contentRange.end.line<u||a.contentRange.start.line===p&&a.contentRange.end.line===u});return await M().flashRanges(o.map(a=>({editor:a.editor,range:Ur(a.contentRange),style:"referenced"}))),{thatTargets:e}}},lg=class extends rp{constructor(){super("top")}},pg=class extends rp{constructor(){super("center")}},ug=class extends rp{constructor(){super("bottom")}};function XQ(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var Eo=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=$t(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n,o=this.selectionMode==="set"&&i.length===1&&i[0].isEmpty;return await M().getEditableTextEditor(r).setSelections(i,{focusEditor:!0,highlightWord:o}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new be(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new be(r.contentRange.end,r.contentRange.end))}}},fg=class extends Eo{constructor(){super("set","content")}},dg=class extends Eo{constructor(){super("set","before")}},mg=class extends Eo{constructor(){super("set","after")}},hg=class extends Eo{constructor(){super("add","content")}},gg=class extends Eo{constructor(){super("add","before")}},yg=class extends Eo{constructor(){super("add","after")}};var np=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var ip=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Ie(M(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,a=this.treeSitter.getTree(i.document);r.push(JQ(i.document,a,o))}return M().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function JQ(t,e,r){let n=[],i=[];return UI(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function UI(t,e,r,n,i){for(;;){let o=new W(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let a="  ".repeat(i),l=eZ(n),p=a+l;if(n.nodeIsNamed)t.push(`${p}${n.nodeType} [${o}]`),e.push(`${p}(${n.nodeType}`),n.gotoFirstChild()?(UI(t,e,r,n,i+1),n.gotoParent(),e.push(`${a})`)):e[e.length-1]+=")";else{let u=`"${n.nodeType}"`;t.push(`${p}${u} [${o}]`),e.push(`${p}${u}`)}}if(!n.gotoNextSibling())return}}function eZ(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var op=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&tl(M().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((a,l)=>a.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(a=>a.toDestination("to")),i);return{thatSelections:o}}},xg=class extends op{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},Tg=class extends op{sortTexts(e){return e.reverse()}},Sg=class extends op{sortTexts(e){return _T(e)}};var sp=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(ni)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Ie(M(),r,"referenced"),await rt(e,async(n,i)=>{let o=i.map(a=>pn(a,a.contentRange));await M().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var ap=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await rt(e,async(o,a)=>{let l=a.map(v=>({start:new be(v.contentRange.start,v.contentRange.start),end:new be(v.contentRange.end,v.contentRange.end)})),p=l.flatMap(({start:v,end:F})=>[{text:r,range:v},{text:n,range:F,isReplace:!0}]),u=a.map(v=>v.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:m,sourceSelections:g,thatSelections:x}=await Fe({rangeUpdater:this.rangeUpdater,editor:M().getEditableTextEditor(o),edits:p,selections:{boundariesStartSelections:{selections:l.map(({start:v})=>v),behavior:2},boundariesEndSelections:{selections:l.map(({end:v})=>v),behavior:3},sourceSelections:{selections:u,behavior:1},thatSelections:{selections:u,behavior:0}}}),b=[...d,...m];return await M().flashRanges(b.map(v=>({editor:o,range:rr(v),style:"justAdded"}))),{sourceMark:g.map(v=>({editor:o,selection:v})),thatMark:x.map(v=>({editor:o,selection:v}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var cp=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new ac;this.run=this.run.bind(this)}getFinalStages(e,r){let n=$t(e),i=sc(r,n.document.languageId);return i.scopeType==null?[]:[new Ga(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:i.scopeType}})]}async run(e,r){let n=M().getEditableTextEditor($t(e)),i=sc(r,n.document.languageId),o=this.snippetParser.parse(i.body);og(o,i.variableName);let a=o.toTextmateString();await Ie(M(),e,"pendingModification0");let l=e.map(u=>u.contentSelection),{targetSelections:p}=await Fe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(a,l),preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}};var tZ=/-?\d+(\.\d+)?/g,vg=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Mi(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let p=n.offsetAt(l.contentRange.start),u=l.contentText,d=el(u,tZ);for(let m of d)i.push(rZ(e,p,m)),o.push(nZ(this.isIncrement,m.text))}let{thatSelections:a}=await this.actions.replace.run(i,o);return a}},bg=class extends vg{constructor(e){super(e,!0)}},wg=class extends vg{constructor(e){super(e,!1)}};function rZ(t,e,r){return new Be({editor:t,isReversed:!1,contentRange:new W(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function nZ(t,e){return e.includes(".")?oZ(t,e).toString():iZ(t,e).toString()}function iZ(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function oZ(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var _g=class{constructor(e,r,n,i){this.treeSitter=e;this.snippets=r;this.rangeUpdater=n;this.modifierStageFactory=i;this.addSelection=new hg;this.addSelectionBefore=new gg;this.addSelectionAfter=new yg;this.callAsFunction=new Wl(this);this.clearAndSetSelection=new $l(this);this.copyToClipboard=new Nh(this,this.rangeUpdater);this.cutToClipboard=new Lh(this);this.decrement=new wg(this);this.deselect=new jl;this.editNew=new Uh(this.rangeUpdater,this);this.editNewLineAfter=new Bh(this,this.modifierStageFactory);this.editNewLineBefore=new Vh(this,this.modifierStageFactory);this.executeCommand=new ql(this.rangeUpdater);this.extractVariable=new Oh(this.rangeUpdater);this.findInDocument=new $h(this);this.findInWorkspace=new jh(this);this.flashTargets=new qh;this.foldRegion=new Rh(this.rangeUpdater);this.followLink=new ic({openAside:!1});this.followLinkAside=new ic({openAside:!0});this.generateSnippet=new oc(this.snippets);this.getText=new Kl;this.highlight=new Ql;this.increment=new bg(this);this.indentLine=new Gh(this.rangeUpdater);this.insertCopyAfter=new Yh(this.rangeUpdater,this.modifierStageFactory);this.insertCopyBefore=new Zh(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineAfter=new eg(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineBefore=new Jh(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLinesAround=new Xh(this.rangeUpdater,this.modifierStageFactory);this.insertSnippet=new Yl(this.rangeUpdater,this.snippets,this,this.modifierStageFactory);this.joinLines=new Xl(this.rangeUpdater,this.modifierStageFactory);this.breakLine=new yh(this.rangeUpdater);this.moveToTarget=new Sh(this.rangeUpdater);this.outdentLine=new Kh(this.rangeUpdater);this.pasteFromClipboard=new cg(this.rangeUpdater,this);this.randomizeTargets=new Sg(this);this.remove=new Jl(this.rangeUpdater);this.rename=new Ph(this.rangeUpdater);this.replace=new ep(this.rangeUpdater);this.replaceWithTarget=new Th(this.rangeUpdater);this.revealDefinition=new Dh(this.rangeUpdater);this.revealTypeDefinition=new Ih(this.rangeUpdater);this.reverseTargets=new Tg(this);this.rewrapWithPairedDelimiter=new tp(this.rangeUpdater,this.modifierStageFactory);this.scrollToBottom=new ug;this.scrollToCenter=new pg;this.scrollToTop=new lg;this["private.setKeyboardTarget"]=new np("keyboard");this["experimental.setInstanceReference"]=new np("instanceReference");this.setSelection=new fg;this.setSelectionAfter=new mg;this.setSelectionBefore=new dg;this.showDebugHover=new Ch(this.rangeUpdater);this.showHover=new Fh(this.rangeUpdater);this.showQuickFix=new Ah(this.rangeUpdater);this.showReferences=new Mh(this.rangeUpdater);this.sortTargets=new xg(this);this.swapTargets=new vh(this.rangeUpdater);this.toggleLineBreakpoint=new sp(this.modifierStageFactory);this.toggleLineComment=new wh(this.rangeUpdater);this.unfoldRegion=new kh(this.rangeUpdater);this.wrapWithPairedDelimiter=new ap(this.rangeUpdater);this.wrapWithSnippet=new cp(this.rangeUpdater,this.snippets,this.modifierStageFactory);this["private.showParseTree"]=new ip(this.treeSitter);this["private.getTargets"]=new Gl}};async function HI(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return Eg(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:Rg(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return Eg(i.destination)?{action:"insert",modifiers:Rg(i.destination),text:await Yv(e,i.source)}:null;case"moveToTarget":if(Eg(i.destination)){let o=await Yv(e,i.source);return await sZ(e,i.source),{action:"insert",modifiers:Rg(i.destination),text:o}}return null;case"callAsFunction":return kg(i.argument)?{action:i.name,modifiers:Pg(i.argument),callee:await Yv(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return kg(i.target)?{action:i.name,modifiers:Pg(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return Eg(i.destination)?{action:i.name,modifiers:Rg(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return kg(i.target)?{action:i.name,modifiers:Pg(i.target)}:null}}function Eg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&kg(t.target):!1}function kg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function Rg(t){return t.type==="primitive"?Pg(t.target):[]}function Pg(t){return t.type==="primitive"&&t.modifiers!=null&&t.modifiers.length>0?t.modifiers:[]}async function Yv(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function sZ(t,e){await t({name:"remove",target:e})}function VI(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((a,l)=>[a,l]);for(let[a,l]of o.reverse())for(let p of aZ){let u=p.accept(a);if(u.accepted){let[d,m]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],g={...t,anchor:m.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:m},active:Bf(i,x=>{x.modifiers=x.modifiers.slice(zo(x.modifiers,b=>p.accept(b).accepted)+1)})};return g=u.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:d}}}return t}var aZ=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function Jv(t,e){switch(t.type){case"list":return cZ(t,e);case"range":return BI(t,e);case"primitive":return Mg(t,e);case"implicit":return t}}function cZ(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return BI(r,i);case"primitive":return Mg(r,i)}})}}function BI(t,e){let r=lZ(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return VI(r,n)}function lZ(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:Mg(t.anchor,e),active:Mg(t.active,e.concat(t.anchor))}}function Mg(t,e){let r=Xv(t.mark??(pZ(t)?dZ(e):null)??{type:"cursor"}),n=WI(t)??mZ(e)??hZ(e)??[];return{type:t.type,mark:r,modifiers:n}}function pZ(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function WI(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function uZ(t){if(fZ(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function fZ(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function dZ(t){return lp(t,e=>e.mark)}function mZ(t){return lp(t,WI)}function hZ(t){return lp(t,uZ)}function lp(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=lp([n.anchor],e);if(i!=null)return i;break}case"list":{let i=lp(n.elements,e);if(i!=null)return i;break}}}}function Xv(t){switch(t.type){case"range":return{...t,anchor:Xv(t.anchor),active:Xv(t.active)};case"target":return{type:"target",target:Jv(t.target,[])};default:return t}}var Ag=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new eb(this.debug)}async run(e){if(Xo(e)){let u=await HI(this.commandServerApi,this.runAction,e);if(u!=null)return{fallback:u}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:a,instanceReferenceTargets:l,keyboardTargets:p}=await this.runAction(e.action);return this.storedTargets.set("that",$I(i,n)),this.storedTargets.set("source",$I(a,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",p,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.directory,e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(this.getDestinations(e.destination),e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(this.getTargets(e.target),e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(md(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},eb=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=Jv(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function $I(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(rc):t}var Dg=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new qt({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var Ig=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=M().visibleTextEditors.find(a=>a.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new W(r.line,r.character,n.line,n.character);return[new qt({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var Fg=class{constructor(e){this.mark=e}run(){let e=M().activeTextEditor;if(e==null)return[];let r=gZ(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[KS(e,!1,n)]}},gZ=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,a=Math.floor(i/100)*100,l=[],p=[],u=a+r;for(;u<=o;)u>=i&&(t.visibleRanges.find(m=>u>=m.start.line&&u<=m.end.line)?l.push(u):p.push(u)),u+=100;if(l.length===1)return l[0];if(l.length+p.length>1)throw new Error("Multiple lines matching");if(p.length===1)return p[0];throw new Error("Line is not in viewport")}}};var Cg=class{constructor(e){this.mark=e}run(){return[]}};var Og=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[So(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var Ng=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var Lg=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var Ug=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new ka;case"that":case"source":case"keyboard":return new Ng(this.storedTargets,e.type);case"decoratedSymbol":return new Dg(this.readableHatMap,e);case"lineNumber":return new Fg(e);case"range":return new Og(this,e);case"nothing":return new Cg(e);case"target":return new Lg(this.targetPipelineRunner,e);case"explicit":return new Ig(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function jI(t,e,r,n,i,o,a,l,p,u){r.active&&(r.log("command:"),r.log(JSON.stringify(u,null,2)));let d=PS(u),m=await n.getReadableMap(d.usePrePhraseSnapshot),g=xZ(t,e,a,r,o,m,i,l);for(let b of p)g=b.wrapCommandRunner(m,g);let x=await g.run(d);return await yZ(u,x)}async function yZ(t,e){if(Xo(t))return e;if("returnValue"in e)return e.returnValue}function xZ(t,e,r,n,i,o,a,l){let p=new tc(r,i,new La(r)),u=new Ug(o,i),d=new Zm(p,u);return u.setPipelineRunner(d),new Ag(e,n,i,d,new _g(t,a,l,p))}var qI=["clojure","css","latex","ruby","rust","scala","scss"];async function zI(t,e){await TZ(t,e)}async function TZ(t,e){let r=[];for(let n of qI)await t.loadLanguage(n),await e.loadLanguage(n),_i(Vl[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function GI(t){return RP(t)?ul(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${ul(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var Hg=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{tr(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...Yo.filter(r=>r!=="instance").map(r=>({type:r})),...If.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:GI(e),isLanguageSpecific:SZ(e)}}dispose(){this.disposable.dispose()}};function SZ(t){switch(t.type){case"string":case"argumentOrParameter":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"interior":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function tb(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((a,l)=>a.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=uf(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=uf(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function _s(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.getRemovalHighlightRange(),leadingDelimiter:KI(t.getLeadingDelimiterTarget()),trailingDelimiter:KI(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(_s),boundary:t.getBoundary()?.map(_s),insertionDelimiter:t.insertionDelimiter}}function KI(t){return t!=null?_s(t):void 0}function QI(t,e,r,n,i){return Aa(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),o=>({domain:o.domain,ranges:o.getTargets(!1).map(a=>({range:a.contentRange,targets:i?vZ(r,a).map(_s):void 0}))}))}function vZ(t,e){try{return t.run(e)}catch(r){if(r.name==="NoContainingScopeError")return[];throw r}}function ZI(t,e,r){return Aa(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(_s)}))}var Vg=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:ZI(e,i,tb(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,a=this.scopeHandlerFactory.maybeCreate(r,o);if(a==null)return[];let l=this.scopeHandlerFactory.maybeCreate(a.iterationScopeType,o);return l==null?[]:QI(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),tb(e,a,n),i)}};var Bg=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Kn(M().configuration,()=>this.onChange());this.disposables.push(M().onDidChangeVisibleTextEditors(n.run),M().onDidOpenTextDocument(n.run),M().onDidCloseTextDocument(n.run),M().onDidChangeTextDocument(n.run),M().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{M().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(a){if(st(M().messages,"ScopeRangeWatcher.provide",a.message),o=[],M().runMode==="test")throw a}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{tr(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{M().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{tr(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var Wg=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?XI(n,r):YI(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return XI(n,r);let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?3:YI(e,o)?0:1}};function YI(t,e){return!MP(e.generateScopes(t,new pe(0,0),"forward"))}function XI(t,e){switch(e.type){case"notebookCell":return 3;default:return Vl[t]?.[e.type]!=null?2:3}}var $g=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Kn(M().configuration,()=>this.onChange());this.disposable=PP(M().onDidOpenTextDocument(i.run),M().onDidCloseTextDocument(i.run),M().onDidChangeActiveTextEditor(i.run),M().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{tr(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=M().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function JI({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Gd,commandServerApi:i=new Wd,talonSpokenForms:o=new zd,snippets:a=new qd}){Td(t);let l=new Od(t),p=new Bd,u=new vd,d=new Cd(t,u),m=new Zd(o),g=e!=null?new Hd(p,l,e,i):new $d;g.allocateHats();let x=r?await Hm.create(t,n,r):new jd;t.disposeOnExit(p,x,g,l,d);let b=[],v,F=I=>(v=I,jI(n,i,l,g,a,u,x,p,b,I));return{commandApi:{runCommand(I){return F(I)},runCommandSafe(...I){return F(Ff(I))},repeatPreviousCommand(){if(v==null)throw new Error("No previous command");return F(v)}},scopeProvider:wZ(x,u,m),customSpokenFormGenerator:m,storedTargets:u,hatTokenMap:g,injectIde:Td,runIntegrationTests:()=>zI(n,x),addCommandRunnerDecorator:I=>{b.push(I)}}}function wZ(t,e,r){let n=new La(t),i=new Vg(n,new tc(t,e,n)),o=new Bg(t,i),a=new Wg(n),l=new Hg(r),p=new $g(t,a,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:a.getScopeSupport,getIterationScopeSupport:a.getIterationScopeSupport,onDidChangeScopeSupport:p.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function eF(t,e){switch(e.type){case"UntypedTarget":return new qt({editor:t,isReversed:e.isReversed,contentRange:wf(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new ir({editor:t,isReversed:e.isReversed,contentRange:wf(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var rLe=Symbol("unused");var pp=class{constructor(e){this.position=e}},nLe={$0:new pp(0),$1:new pp(1),$2:new pp(2)};var tF=require("node:events"),jg=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new tF.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function qr(){return global._neovimRegistry==null&&(global._neovimRegistry=new jg),global._neovimRegistry}var rF="pokey.cursorless";async function qg(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,a,l]=await e.executeLua(r,[]),p;return l===!0?p=[new be(new pe(o-1,a-1),new pe(n-1,i-1))]:p=[new be(new pe(n-1,i-1),new pe(o-1,a-1))],console.debug(`bufferGetSelections(): selections=(${p[0].start.line}, ${p[0].start.character}), (${p[0].end.line}, ${p[0].end.character}) neovim=(${n},${i}),(${o},${a}),reverse=${l}`),p}async function nF(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function iF(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),a=new W(new pe(i-1,0),new pe(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${a.start.line}, ${a.start.character}), (${a.end.line}, ${a.end.character})`),[a]}async function oF(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function zg(t,e){await e.callFunction("setreg",["*",t])}async function sF(t){return await t.callFunction("getreg",["*"])}async function aF(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function cF(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function lF(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function pF(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var _Z={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0},Gg=class{constructor(){this.commands=_Z}};var up=class{constructor(e){this.client=e}async readText(){return await sF(this.client)}async writeText(e){return await zg(e,this.client)}};var Kg=gr(rb(),1);var dp=class{constructor(){this.notifier=new Vt;this.mocks={...yf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(EZ(n,r))return(0,Kg.get)(i,e)??(0,Kg.get)(this.mocks,e)}return(0,Kg.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function EZ(t,e){return t.languageId===e.languageId}async function nb(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);n.sort((a,l)=>(uF(a)||fF(a))&&(uF(l)||fF(l))?1:a.range.start.line===l.range.start.line?l.range.start.character-a.range.start.character:l.range.start.line-a.range.start.line),console.debug("neovimEdit() [sorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let a of n)o.push({range:a.range,rangeOffset:i.offsetAt(a.range.start),rangeLength:i.offsetAt(a.range.end)-i.offsetAt(a.range.start),text:a.text});qr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let a of n){let{range:l,text:p,isReplace:u}=a;p===""?await dF(t,l):l.isEmpty&&!u?await mF(t,l.start,p):await RZ(t,l,p)}return await e.updateTextEditor(),!0}async function dF(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(a+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([a,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function mF(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=a+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let p=a+n[0],u=n[n.length-1]+l;await i.setLines([p,...n.slice(1,n.length-1),u],{start:e.line,end:e.line+1,strictIndexing:!0})}async function RZ(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await dF(t,e),await mF(t,e.start,r)}function uF(t){return t.range.isEmpty&&!t.isReplace}function fF(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function hF(t){return qr().onEvent("onDidChangeTextDocument",t),yF()}function gF(t,e,r){return qr().onEvent("onDidOpenTextDocument",t),yF()}function yF(){return{dispose(){}}}var mp=class{constructor(){this.data={...xf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var vC=gr(rb(),1);var hp=class{async showMessage(e,r,n,...i){}};async function xF(t,e){let r=e.activeTextEditor,n=await t.window,i=await qg(n,t),o=r.document.getText(i[0]);await zg(o,t)}async function TF(t,e){await aF(t)}var Qg=class{constructor(e,r,n,i,o,a,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=a}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await nF(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await nb(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await xF(this.client,this.neovimIDE)}async clipboardPaste(){await TF(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}};var _w=gr(require("path"),1);var SF;(()=>{"use strict";var t={470:i=>{function o(p){if(typeof p!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(p))}function a(p,u){for(var d,m="",g=0,x=-1,b=0,v=0;v<=p.length;++v){if(v<p.length)d=p.charCodeAt(v);else{if(d===47)break;d=47}if(d===47){if(!(x===v-1||b===1))if(x!==v-1&&b===2){if(m.length<2||g!==2||m.charCodeAt(m.length-1)!==46||m.charCodeAt(m.length-2)!==46){if(m.length>2){var F=m.lastIndexOf("/");if(F!==m.length-1){F===-1?(m="",g=0):g=(m=m.slice(0,F)).length-1-m.lastIndexOf("/"),x=v,b=0;continue}}else if(m.length===2||m.length===1){m="",g=0,x=v,b=0;continue}}u&&(m.length>0?m+="/..":m="..",g=2)}else m.length>0?m+="/"+p.slice(x+1,v):m=p.slice(x+1,v),g=v-x-1;x=v,b=0}else d===46&&b!==-1?++b:b=-1}return m}var l={resolve:function(){for(var p,u="",d=!1,m=arguments.length-1;m>=-1&&!d;m--){var g;m>=0?g=arguments[m]:(p===void 0&&(p=process.cwd()),g=p),o(g),g.length!==0&&(u=g+"/"+u,d=g.charCodeAt(0)===47)}return u=a(u,!d),d?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(p){if(o(p),p.length===0)return".";var u=p.charCodeAt(0)===47,d=p.charCodeAt(p.length-1)===47;return(p=a(p,!u)).length!==0||u||(p="."),p.length>0&&d&&(p+="/"),u?"/"+p:p},isAbsolute:function(p){return o(p),p.length>0&&p.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var p,u=0;u<arguments.length;++u){var d=arguments[u];o(d),d.length>0&&(p===void 0?p=d:p+="/"+d)}return p===void 0?".":l.normalize(p)},relative:function(p,u){if(o(p),o(u),p===u||(p=l.resolve(p))===(u=l.resolve(u)))return"";for(var d=1;d<p.length&&p.charCodeAt(d)===47;++d);for(var m=p.length,g=m-d,x=1;x<u.length&&u.charCodeAt(x)===47;++x);for(var b=u.length-x,v=g<b?g:b,F=-1,I=0;I<=v;++I){if(I===v){if(b>v){if(u.charCodeAt(x+I)===47)return u.slice(x+I+1);if(I===0)return u.slice(x+I)}else g>v&&(p.charCodeAt(d+I)===47?F=I:I===0&&(F=0));break}var U=p.charCodeAt(d+I);if(U!==u.charCodeAt(x+I))break;U===47&&(F=I)}var K="";for(I=d+F+1;I<=m;++I)I!==m&&p.charCodeAt(I)!==47||(K.length===0?K+="..":K+="/..");return K.length>0?K+u.slice(x+F):(x+=F,u.charCodeAt(x)===47&&++x,u.slice(x))},_makeLong:function(p){return p},dirname:function(p){if(o(p),p.length===0)return".";for(var u=p.charCodeAt(0),d=u===47,m=-1,g=!0,x=p.length-1;x>=1;--x)if((u=p.charCodeAt(x))===47){if(!g){m=x;break}}else g=!1;return m===-1?d?"/":".":d&&m===1?"//":p.slice(0,m)},basename:function(p,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');o(p);var d,m=0,g=-1,x=!0;if(u!==void 0&&u.length>0&&u.length<=p.length){if(u.length===p.length&&u===p)return"";var b=u.length-1,v=-1;for(d=p.length-1;d>=0;--d){var F=p.charCodeAt(d);if(F===47){if(!x){m=d+1;break}}else v===-1&&(x=!1,v=d+1),b>=0&&(F===u.charCodeAt(b)?--b==-1&&(g=d):(b=-1,g=v))}return m===g?g=v:g===-1&&(g=p.length),p.slice(m,g)}for(d=p.length-1;d>=0;--d)if(p.charCodeAt(d)===47){if(!x){m=d+1;break}}else g===-1&&(x=!1,g=d+1);return g===-1?"":p.slice(m,g)},extname:function(p){o(p);for(var u=-1,d=0,m=-1,g=!0,x=0,b=p.length-1;b>=0;--b){var v=p.charCodeAt(b);if(v!==47)m===-1&&(g=!1,m=b+1),v===46?u===-1?u=b:x!==1&&(x=1):u!==-1&&(x=-1);else if(!g){d=b+1;break}}return u===-1||m===-1||x===0||x===1&&u===m-1&&u===d+1?"":p.slice(u,m)},format:function(p){if(p===null||typeof p!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof p);return function(u,d){var m=d.dir||d.root,g=d.base||(d.name||"")+(d.ext||"");return m?m===d.root?m+g:m+"/"+g:g}(0,p)},parse:function(p){o(p);var u={root:"",dir:"",base:"",ext:"",name:""};if(p.length===0)return u;var d,m=p.charCodeAt(0),g=m===47;g?(u.root="/",d=1):d=0;for(var x=-1,b=0,v=-1,F=!0,I=p.length-1,U=0;I>=d;--I)if((m=p.charCodeAt(I))!==47)v===-1&&(F=!1,v=I+1),m===46?x===-1?x=I:U!==1&&(U=1):x!==-1&&(U=-1);else if(!F){b=I+1;break}return x===-1||v===-1||U===0||U===1&&x===v-1&&x===b+1?v!==-1&&(u.base=u.name=b===0&&g?p.slice(1,v):p.slice(b,v)):(b===0&&g?(u.name=p.slice(1,x),u.base=p.slice(1,v)):(u.name=p.slice(b,x),u.base=p.slice(b,v)),u.ext=p.slice(x,v)),b>0?u.dir=p.slice(0,b-1):g&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,r),a.exports}r.d=(i,o)=>{for(var a in o)r.o(o,a)&&!r.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:o[a]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>N}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,l=/^\/\//;function p(O,D){if(!O.scheme&&D)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${O.authority}", path: "${O.path}", query: "${O.query}", fragment: "${O.fragment}"}`);if(O.scheme&&!o.test(O.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(O.path){if(O.authority){if(!a.test(O.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(O.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let u="",d="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(D){return D instanceof g||!!D&&typeof D.authority=="string"&&typeof D.fragment=="string"&&typeof D.path=="string"&&typeof D.query=="string"&&typeof D.scheme=="string"&&typeof D.fsPath=="string"&&typeof D.with=="function"&&typeof D.toString=="function"}scheme;authority;path;query;fragment;constructor(D,$,z,Q,Z,te=!1){typeof D=="object"?(this.scheme=D.scheme||u,this.authority=D.authority||u,this.path=D.path||u,this.query=D.query||u,this.fragment=D.fragment||u):(this.scheme=function(he,re){return he||re?he:"file"}(D,te),this.authority=$||u,this.path=function(he,re){switch(he){case"https":case"http":case"file":re?re[0]!==d&&(re=d+re):re=d}return re}(this.scheme,z||u),this.query=Q||u,this.fragment=Z||u,p(this,te))}get fsPath(){return U(this,!1)}with(D){if(!D)return this;let{scheme:$,authority:z,path:Q,query:Z,fragment:te}=D;return $===void 0?$=this.scheme:$===null&&($=u),z===void 0?z=this.authority:z===null&&(z=u),Q===void 0?Q=this.path:Q===null&&(Q=u),Z===void 0?Z=this.query:Z===null&&(Z=u),te===void 0?te=this.fragment:te===null&&(te=u),$===this.scheme&&z===this.authority&&Q===this.path&&Z===this.query&&te===this.fragment?this:new b($,z,Q,Z,te)}static parse(D,$=!1){let z=m.exec(D);return z?new b(z[2]||u,ae(z[4]||u),ae(z[5]||u),ae(z[7]||u),ae(z[9]||u),$):new b(u,u,u,u,u)}static file(D){let $=u;if(i&&(D=D.replace(/\\/g,d)),D[0]===d&&D[1]===d){let z=D.indexOf(d,2);z===-1?($=D.substring(2),D=d):($=D.substring(2,z),D=D.substring(z)||d)}return new b("file",$,D,u,u)}static from(D){let $=new b(D.scheme,D.authority,D.path,D.query,D.fragment);return p($,!0),$}toString(D=!1){return K(this,D)}toJSON(){return this}static revive(D){if(D){if(D instanceof g)return D;{let $=new b(D);return $._formatted=D.external,$._fsPath=D._sep===x?D.fsPath:null,$}}return D}}let x=i?1:void 0;class b extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=U(this,!1)),this._fsPath}toString(D=!1){return D?K(this,!0):(this._formatted||(this._formatted=K(this,!1)),this._formatted)}toJSON(){let D={$mid:1};return this._fsPath&&(D.fsPath=this._fsPath,D._sep=x),this._formatted&&(D.external=this._formatted),this.path&&(D.path=this.path),this.scheme&&(D.scheme=this.scheme),this.authority&&(D.authority=this.authority),this.query&&(D.query=this.query),this.fragment&&(D.fragment=this.fragment),D}}let v={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function F(O,D,$){let z,Q=-1;for(let Z=0;Z<O.length;Z++){let te=O.charCodeAt(Z);if(te>=97&&te<=122||te>=65&&te<=90||te>=48&&te<=57||te===45||te===46||te===95||te===126||D&&te===47||$&&te===91||$&&te===93||$&&te===58)Q!==-1&&(z+=encodeURIComponent(O.substring(Q,Z)),Q=-1),z!==void 0&&(z+=O.charAt(Z));else{z===void 0&&(z=O.substr(0,Z));let he=v[te];he!==void 0?(Q!==-1&&(z+=encodeURIComponent(O.substring(Q,Z)),Q=-1),z+=he):Q===-1&&(Q=Z)}}return Q!==-1&&(z+=encodeURIComponent(O.substring(Q))),z!==void 0?z:O}function I(O){let D;for(let $=0;$<O.length;$++){let z=O.charCodeAt($);z===35||z===63?(D===void 0&&(D=O.substr(0,$)),D+=v[z]):D!==void 0&&(D+=O[$])}return D!==void 0?D:O}function U(O,D){let $;return $=O.authority&&O.path.length>1&&O.scheme==="file"?`//${O.authority}${O.path}`:O.path.charCodeAt(0)===47&&(O.path.charCodeAt(1)>=65&&O.path.charCodeAt(1)<=90||O.path.charCodeAt(1)>=97&&O.path.charCodeAt(1)<=122)&&O.path.charCodeAt(2)===58?D?O.path.substr(1):O.path[1].toLowerCase()+O.path.substr(2):O.path,i&&($=$.replace(/\//g,"\\")),$}function K(O,D){let $=D?I:F,z="",{scheme:Q,authority:Z,path:te,query:he,fragment:re}=O;if(Q&&(z+=Q,z+=":"),(Z||Q==="file")&&(z+=d,z+=d),Z){let Re=Z.indexOf("@");if(Re!==-1){let pr=Z.substr(0,Re);Z=Z.substr(Re+1),Re=pr.lastIndexOf(":"),Re===-1?z+=$(pr,!1,!1):(z+=$(pr.substr(0,Re),!1,!1),z+=":",z+=$(pr.substr(Re+1),!1,!0)),z+="@"}Z=Z.toLowerCase(),Re=Z.lastIndexOf(":"),Re===-1?z+=$(Z,!1,!0):(z+=$(Z.substr(0,Re),!1,!0),z+=Z.substr(Re))}if(te){if(te.length>=3&&te.charCodeAt(0)===47&&te.charCodeAt(2)===58){let Re=te.charCodeAt(1);Re>=65&&Re<=90&&(te=`/${String.fromCharCode(Re+32)}:${te.substr(3)}`)}else if(te.length>=2&&te.charCodeAt(1)===58){let Re=te.charCodeAt(0);Re>=65&&Re<=90&&(te=`${String.fromCharCode(Re+32)}:${te.substr(2)}`)}z+=$(te,!0,!1)}return he&&(z+="?",z+=$(he,!1,!1)),re&&(z+="#",z+=D?re:F(re,!1,!1)),z}function ne(O){try{return decodeURIComponent(O)}catch{return O.length>3?O.substr(0,3)+ne(O.substr(3)):O}}let ie=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ae(O){return O.match(ie)?O.replace(ie,D=>ne(D)):O}var it=r(470);let Dt=it.posix||it,at="/";var N;(function(O){O.joinPath=function(D,...$){return D.with({path:Dt.join(D.path,...$)})},O.resolvePath=function(D,...$){let z=D.path,Q=!1;z[0]!==at&&(z=at+z,Q=!0);let Z=Dt.resolve(z,...$);return Q&&Z[0]===at&&!D.authority&&(Z=Z.substring(1)),D.with({path:Z})},O.dirname=function(D){if(D.path.length===0||D.path===at)return D;let $=Dt.dirname(D.path);return $.length===1&&$.charCodeAt(0)===46&&($=""),D.with({path:$})},O.basename=function(D){return Dt.basename(D.path)},O.extname=function(D){return Dt.extname(D.path)}})(N||(N={}))})(),SF=n})();var{URI:vF,Utils:tUe}=SF;var WF=gr(CF(),1);var yp=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var CZ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},xp=t=>t.replace(/[[\]\\-]/g,"\\$&"),OZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),OF=t=>t.join(""),NF=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,l=!1,p=!1,u=!1,d=r,m="";e:for(;o<t.length;){let v=t.charAt(o);if((v==="!"||v==="^")&&o===r+1){u=!0,o++;continue}if(v==="]"&&a&&!p){d=o+1;break}if(a=!0,v==="\\"&&!p){p=!0,o++;continue}if(v==="["&&!p){for(let[F,[I,U,K]]of Object.entries(CZ))if(t.startsWith(F,o)){if(m)return["$.",!1,t.length-r,!0];o+=F.length,K?i.push(I):n.push(I),l=l||U;continue e}}if(p=!1,m){v>m?n.push(xp(m)+"-"+xp(v)):v===m&&n.push(xp(v)),m="",o++;continue}if(t.startsWith("-]",o+1)){n.push(xp(v+"-")),o+=2;continue}if(t.startsWith("-",o+1)){m=v,o+=2;continue}n.push(xp(v)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let v=n[0].length===2?n[0].slice(-1):n[0];return[OZ(v),!1,d-r,!1]}let g="["+(u?"^":"")+OF(n)+"]",x="["+(u?"":"^")+OF(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,l,d-r,!0]};var Nn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var NZ=new Set(["!","?","+","*","@"]),LF=t=>NZ.has(t),LZ="(?!(?:^|/)\\.\\.?(?:$|/))",Zg="(?!\\.)",UZ=new Set(["[","."]),HZ=new Set(["..","."]),VZ=new Set("().*{}+?[]^$\\!"),BZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),sb="[^/]",UF=sb+"*?",HF=sb+"+?",lc=class t{type;#e;#t;#o=!1;#n=[];#s;#S;#l;#u=!1;#a;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#s=r,this.#e=this.#s?this.#s.#e:this,this.#a=this.#e===this?n:this.#e.#a,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#u&&this.#l.push(this),this.#S=this.#s?this.#s.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#u)return this;this.toString(),this.#u=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#s;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#s}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#s===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#u&&this.#s?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#s?.isStart())return!1;if(this.#S===0)return!0;let e=this.#s;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#s?.type==="!")return!0;if(!this.#s?.isEnd())return!1;if(!this.type)return this.#s?.isEnd();let e=this.#s?this.#s.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,a=!1,l=-1,p=!1;if(r.type===null){let x=n,b="";for(;x<e.length;){let v=e.charAt(x++);if(o||v==="\\"){o=!o,b+=v;continue}if(a){x===l+1?(v==="^"||v==="!")&&(p=!0):v==="]"&&!(x===l+2&&p)&&(a=!1),b+=v;continue}else if(v==="["){a=!0,l=x,p=!1,b+=v;continue}if(!i.noext&&LF(v)&&e.charAt(x)==="("){r.push(b),b="";let F=new t(v,r);x=t.#y(e,F,x,i),r.push(F);continue}b+=v}return r.push(b),x}let u=n+1,d=new t(null,r),m=[],g="";for(;u<e.length;){let x=e.charAt(u++);if(o||x==="\\"){o=!o,g+=x;continue}if(a){u===l+1?(x==="^"||x==="!")&&(p=!0):x==="]"&&!(u===l+2&&p)&&(a=!1),g+=x;continue}else if(x==="["){a=!0,l=u,p=!1,g+=x;continue}if(LF(x)&&e.charAt(u)==="("){d.push(g),g="";let b=new t(x,d);d.push(b),u=t.#y(e,b,u,i);continue}if(x==="|"){d.push(g),g="",m.push(d),d=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),d.push(g),g="",r.push(...m,d),u;g+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#a.nocase&&!this.#a.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#a.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#a}toRegExpSource(e){let r=e??!!this.#a.dot;if(this.#e===this&&this.#g(),!this.type){let p=this.isStart()&&this.isEnd(),u=this.#n.map(x=>{let[b,v,F,I]=typeof x=="string"?t.#f(x,this.#t,p):x.toRegExpSource(e);return this.#t=this.#t||F,this.#o=this.#o||I,b}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&HZ.has(this.#n[0]))){let b=UZ,v=r&&b.has(u.charAt(0))||u.startsWith("\\.")&&b.has(u.charAt(2))||u.startsWith("\\.\\.")&&b.has(u.charAt(4)),F=!r&&!e&&b.has(u.charAt(0));d=v?LZ:F?Zg:""}let m="";return this.isEnd()&&this.#e.#u&&this.#s?.type==="!"&&(m="(?:$|\\/)"),[d+u+m,Nn(u),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#d(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let p=this.toString();return this.#n=[p],this.type=null,this.#t=void 0,[p,Nn(this.toString()),!1,!1]}let a=!n||e||r||!Zg?"":this.#d(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?Zg:"")+HF;else{let p=this.type==="!"?"))"+(this.isStart()&&!r&&!e?Zg:"")+UF+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;l=i+o+p}return[l,Nn(o),this.#t=!!this.#t,this.#o]}#d(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#o=this.#o||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",a=!1;for(let l=0;l<e.length;l++){let p=e.charAt(l);if(i){i=!1,o+=(VZ.has(p)?"\\":"")+p;continue}if(p==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(p==="["){let[u,d,m,g]=NF(e,l);if(m){o+=u,a=a||d,l+=m-1,r=r||g;continue}}if(p==="*"){n&&e==="*"?o+=HF:o+=UF,r=!0;continue}if(p==="?"){o+=sb,r=!0;continue}o+=BZ(p)}return[o,Nn(e),!!r,a]}};var pc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var cr=(t,e,r={})=>(yp(e),!r.nocomment&&e.charAt(0)==="#"?!1:new zr(e,r).match(t)),WZ=/^\*+([^+@!?\*\[\(]*)$/,$Z=t=>e=>!e.startsWith(".")&&e.endsWith(t),jZ=t=>e=>e.endsWith(t),qZ=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),zZ=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),GZ=/^\*+\.\*+$/,KZ=t=>!t.startsWith(".")&&t.includes("."),QZ=t=>t!=="."&&t!==".."&&t.includes("."),ZZ=/^\.\*+$/,YZ=t=>t!=="."&&t!==".."&&t.startsWith("."),XZ=/^\*+$/,JZ=t=>t.length!==0&&!t.startsWith("."),eY=t=>t.length!==0&&t!=="."&&t!=="..",tY=/^\?+([^+@!?\*\[\(]*)?$/,rY=([t,e=""])=>{let r=$F([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},nY=([t,e=""])=>{let r=jF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},iY=([t,e=""])=>{let r=jF([t]);return e?n=>r(n)&&n.endsWith(e):r},oY=([t,e=""])=>{let r=$F([t]);return e?n=>r(n)&&n.endsWith(e):r},$F=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},jF=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},qF=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",VF={win32:{sep:"\\"},posix:{sep:"/"}},sY=qF==="win32"?VF.win32.sep:VF.posix.sep;cr.sep=sY;var Lt=Symbol("globstar **");cr.GLOBSTAR=Lt;var aY="[^/]",cY=aY+"*?",lY="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",pY="(?:(?!(?:\\/|^)\\.).)*?",uY=(t,e={})=>r=>cr(r,t,e);cr.filter=uY;var yn=(t,e={})=>Object.assign({},t,e),fY=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return cr;let e=cr;return Object.assign((n,i,o={})=>e(n,i,yn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,yn(t,o))}static defaults(i){return e.defaults(yn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,a={}){super(i,o,yn(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,yn(t,o))}},unescape:(n,i={})=>e.unescape(n,yn(t,i)),escape:(n,i={})=>e.escape(n,yn(t,i)),filter:(n,i={})=>e.filter(n,yn(t,i)),defaults:n=>e.defaults(yn(t,n)),makeRe:(n,i={})=>e.makeRe(n,yn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,yn(t,i)),match:(n,i,o={})=>e.match(n,i,yn(t,o)),sep:e.sep,GLOBSTAR:Lt})};cr.defaults=fY;var zF=(t,e={})=>(yp(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,WF.default)(t));cr.braceExpand=zF;var dY=(t,e={})=>new zr(t,e).makeRe();cr.makeRe=dY;var mY=(t,e,r={})=>{let n=new zr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};cr.match=mY;var BF=/[?*]|[+@!]\(.*?\)|\[|\]/,hY=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),zr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){yp(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||qF,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let p=o[0]===""&&o[1]===""&&(o[2]==="?"||!BF.test(o[2]))&&!BF.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(p)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(p=>this.parse(p))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let l=n[i+1],p=n[i+2],u=n[i+3];if(l!==".."||!p||p==="."||p===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let l=n[a];a===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let p=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...p),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let v=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),F=!v&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),I=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),U=!I&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),K=F?3:v?0:void 0,ne=U?3:I?0:void 0;if(typeof K=="number"&&typeof ne=="number"){let[ie,ae]=[e[K],r[ne]];ie.toLowerCase()===ae.toLowerCase()&&(r[ne]=ie,ne>K?r=r.slice(ne):K>ne&&(e=e.slice(K)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,l=0,p=e.length,u=r.length;a<p&&l<u;a++,l++){this.debug("matchOne loop");var d=r[l],m=e[a];if(this.debug(r,d,m),d===!1)return!1;if(d===Lt){this.debug("GLOBSTAR",[r,d,m]);var g=a,x=l+1;if(x===u){for(this.debug("** at the end");a<p;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;g<p;){var b=e[g];if(this.debug(`
globstar while`,e,g,r,x,b),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,p,b),!0;if(b==="."||b===".."||!i.dot&&b.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===p))}let v;if(typeof d=="string"?(v=m===d,this.debug("string match",d,m,v)):(v=d.test(m),this.debug("pattern match",d,m,v)),!v)return!1}if(a===p&&l===u)return!0;if(a===p)return n;if(l===u)return a===p-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return zF(this.pattern,this.options)}parse(e){yp(e);let r=this.options;if(e==="**")return Lt;if(e==="")return"";let n,i=null;(n=e.match(XZ))?i=r.dot?eY:JZ:(n=e.match(WZ))?i=(r.nocase?r.dot?zZ:qZ:r.dot?jZ:$Z)(n[1]):(n=e.match(tY))?i=(r.nocase?r.dot?nY:rY:r.dot?iY:oY)(n):(n=e.match(GZ))?i=r.dot?QZ:KZ:(n=e.match(ZZ))&&(i=YZ);let o=lc.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?cY:r.dot?lY:pY,i=new Set(r.nocase?["i"]:[]),o=e.map(p=>{let u=p.map(d=>{if(d instanceof RegExp)for(let m of d.flags.split(""))i.add(m);return typeof d=="string"?hY(d):d===Lt?Lt:d._src});return u.forEach((d,m)=>{let g=u[m+1],x=u[m-1];d!==Lt||x===Lt||(x===void 0?g!==void 0&&g!==Lt?u[m+1]="(?:\\/|"+n+"\\/)?"+g:u[m]=n:g===void 0?u[m-1]=x+"(?:\\/|"+n+")?":g!==Lt&&(u[m-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,u[m+1]=Lt))}),u.filter(d=>d!==Lt).join("/")}).join("|"),[a,l]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let l=i.length-2;!a&&l>=0;l--)a=i[l];for(let l=0;l<o.length;l++){let p=o[l],u=i;if(n.matchBase&&p.length===1&&(u=[a]),this.matchOne(u,p,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return cr.defaults(e).Minimatch}};cr.AST=lc;cr.Minimatch=zr;cr.escape=pc;cr.unescape=Nn;var g1=require("node:url");var uc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,KF=new Set,ab=typeof process=="object"&&process?process:{},QF=(t,e,r,n)=>{typeof ab.emitWarning=="function"?ab.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},Yg=globalThis.AbortController,GF=globalThis.AbortSignal;if(typeof Yg>"u"){GF=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},Yg=class{constructor(){e()}signal=new GF;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=ab.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,QF("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var gY=t=>!KF.has(t),_Ue=Symbol("type"),Ro=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),ZF=t=>Ro(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?fc:null:null,fc=class extends Array{constructor(e){super(e),this.fill(0)}},cb=class t{heap;length;static#e=!1;static create(e){let r=ZF(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Tp=class t{#e;#t;#o;#n;#s;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#u;#a;#c;#i;#g;#y;#d;#f;#w;#h;#_;#E;#T;#v;#b;#m;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#T,sizes:e.#_,keyMap:e.#a,keyList:e.#c,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#p(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#V(r),indexes:r=>e.#k(r),rindexes:r=>e.#P(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#u}get size(){return this.#l}get fetchMethod(){return this.#s}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:p,dispose:u,disposeAfter:d,noDisposeOnSet:m,noUpdateTTL:g,maxSize:x=0,maxEntrySize:b=0,sizeCalculation:v,fetchMethod:F,memoMethod:I,noDeleteOnFetchRejection:U,noDeleteOnStaleGet:K,allowStaleOnFetchRejection:ne,allowStaleOnFetchAbort:ie,ignoreFetchAbort:ae}=e;if(r!==0&&!Ro(r))throw new TypeError("max option must be a nonnegative integer");let it=r?ZF(r):Array;if(!it)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=b||this.#t,this.sizeCalculation=v,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(I!==void 0&&typeof I!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=I,F!==void 0&&typeof F!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#s=F,this.#b=!!F,this.#a=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new it(r),this.#y=new it(r),this.#d=0,this.#f=0,this.#w=cb.create(r),this.#l=0,this.#u=0,typeof u=="function"&&(this.#o=u),typeof d=="function"?(this.#n=d,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#m=!!this.#n,this.noDisposeOnSet=!!m,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!U,this.allowStaleOnFetchRejection=!!ne,this.allowStaleOnFetchAbort=!!ie,this.ignoreFetchAbort=!!ae,this.maxEntrySize!==0){if(this.#t!==0&&!Ro(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Ro(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#A()}if(this.allowStale=!!p,this.noDeleteOnStaleGet=!!K,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=Ro(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Ro(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let Dt="LRU_CACHE_UNBOUNDED";gY(Dt)&&(KF.add(Dt),QF("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Dt,t))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#M(){let e=new fc(this.#e),r=new fc(this.#e);this.#T=e,this.#E=r,this.#I=(o,a,l=uc.now())=>{if(r[o]=a!==0?l:0,e[o]=a,a!==0&&this.ttlAutopurge){let p=setTimeout(()=>{this.#x(o)&&this.#D(this.#c[o],"expire")},a+1);p.unref&&p.unref()}},this.#R=o=>{r[o]=e[o]!==0?uc.now():0},this.#r=(o,a)=>{if(e[a]){let l=e[a],p=r[a];if(!l||!p)return;o.ttl=l,o.start=p,o.now=n||i();let u=o.now-p;o.remainingTTL=l-u}};let n=0,i=()=>{let o=uc.now();if(this.ttlResolution>0){n=o;let a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref()}return o};this.getRemainingTTL=o=>{let a=this.#a.get(o);if(a===void 0)return 0;let l=e[a],p=r[a];if(!l||!p)return 1/0;let u=(n||i())-p;return l-u},this.#x=o=>{let a=r[o],l=e[o];return!!l&&!!a&&(n||i())-a>l}}#R=()=>{};#r=()=>{};#I=()=>{};#x=()=>!1;#A(){let e=new fc(this.#e);this.#u=0,this.#_=e,this.#F=r=>{this.#u-=e[r],e[r]=0},this.#O=(r,n,i,o)=>{if(this.#p(n))return 0;if(!Ro(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Ro(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#u>o;)this.#L(!0)}this.#u+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#u)}}#F=e=>{};#C=(e,r,n)=>{};#O=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#d));)r=this.#y[r]}*#P({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#d;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#N(e){return e!==void 0&&this.#a.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#P())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#P()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#P())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#P()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#P({allowStale:!0}))this.#x(r)&&(this.#D(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#a.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#p(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#T&&this.#E){let a=this.#T[r],l=this.#E[r];if(a&&l){let p=a-(uc.now()-l);o.ttl=p,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#p(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let a={value:o};if(this.#T&&this.#E){a.ttl=this.#T[r];let l=uc.now()-this.#E[r];a.start=Math.floor(Date.now()-l)}this.#_&&(a.size=this.#_[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=uc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:p}=n,{noUpdateTTL:u=this.noUpdateTTL}=n,d=this.#O(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return p&&(p.set="miss",p.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let m=this.#l===0?void 0:this.#a.get(e);if(m===void 0)m=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#c[m]=e,this.#i[m]=r,this.#a.set(e,m),this.#g[this.#f]=m,this.#y[m]=this.#f,this.#f=m,this.#l++,this.#C(m,d,p),p&&(p.set="add"),u=!1;else{this.#V(m);let g=this.#i[m];if(r!==g){if(this.#b&&this.#p(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!a&&(this.#v&&this.#o?.(x,e,"set"),this.#m&&this.#h?.push([x,e,"set"]))}else a||(this.#v&&this.#o?.(g,e,"set"),this.#m&&this.#h?.push([g,e,"set"]));if(this.#F(m),this.#C(m,d,p),this.#i[m]=r,p){p.set="replace";let x=g&&this.#p(g)?g.__staleWhileFetching:g;x!==void 0&&(p.oldValue=x)}}else p&&(p.set="update")}if(i!==0&&!this.#T&&this.#M(),this.#T&&(u||this.#I(m,i,o),p&&this.#r(p,m)),!a&&this.#m&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#d];if(this.#L(!0),this.#p(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#m&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#d,n=this.#c[r],i=this.#i[r];return this.#b&&this.#p(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(i,n,"evict"),this.#m&&this.#h?.push([i,n,"evict"])),this.#F(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#d=this.#f=0,this.#w.length=0):this.#d=this.#g[r],this.#a.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#a.get(e);if(o!==void 0){let a=this.#i[o];if(this.#p(a)&&a.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#a.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#p(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#p(o))return o;let a=new Yg,{signal:l}=n;l?.addEventListener("abort",()=>a.abort(l.reason),{signal:a.signal});let p={signal:a.signal,options:n,context:i},u=(v,F=!1)=>{let{aborted:I}=a.signal,U=n.ignoreFetchAbort&&v!==void 0;if(n.status&&(I&&!F?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,U&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),I&&!U&&!F)return m(a.signal.reason);let K=x;return this.#i[r]===x&&(v===void 0?K.__staleWhileFetching?this.#i[r]=K.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,v,p.options))),v},d=v=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=v),m(v)),m=v=>{let{aborted:F}=a.signal,I=F&&n.allowStaleOnFetchAbort,U=I||n.allowStaleOnFetchRejection,K=U||n.noDeleteOnFetchRejection,ne=x;if(this.#i[r]===x&&(!K||ne.__staleWhileFetching===void 0?this.#D(e,"fetch"):I||(this.#i[r]=ne.__staleWhileFetching)),U)return n.status&&ne.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),ne.__staleWhileFetching;if(ne.__returned===ne)throw v},g=(v,F)=>{let I=this.#s?.(e,o,p);I&&I instanceof Promise&&I.then(U=>v(U===void 0?void 0:U),F),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(v(void 0),n.allowStaleOnFetchAbort&&(v=U=>u(U,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(u,d),b=Object.assign(x,{__abortController:a,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,b,{...p.options,status:void 0}),r=this.#a.get(e)):this.#i[r]=b,b}#p(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Yg}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:p=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:m=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:v,forceRefresh:F=!1,status:I,signal:U}=r;if(!this.#b)return I&&(I.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:I});let K={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:l,size:p,sizeCalculation:u,noUpdateTTL:d,noDeleteOnFetchRejection:m,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:b,ignoreFetchAbort:x,status:I,signal:U},ne=this.#a.get(e);if(ne===void 0){I&&(I.fetch="miss");let ie=this.#U(e,ne,K,v);return ie.__returned=ie}else{let ie=this.#i[ne];if(this.#p(ie)){let N=n&&ie.__staleWhileFetching!==void 0;return I&&(I.fetch="inflight",N&&(I.returnedStale=!0)),N?ie.__staleWhileFetching:ie.__returned=ie}let ae=this.#x(ne);if(!F&&!ae)return I&&(I.fetch="hit"),this.#V(ne),i&&this.#R(ne),I&&this.#r(I,ne),ie;let it=this.#U(e,ne,K,v),at=it.__staleWhileFetching!==void 0&&n;return I&&(I.fetch=ae?"stale":"refresh",at&&ae&&(I.returnedStale=!0)),at?it.__staleWhileFetching:it.__returned=it}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...a}=r,l=this.get(e,a);if(!o&&l!==void 0)return l;let p=n(e,l,{options:a,context:i});return this.set(e,p,a),p}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:a}=r,l=this.#a.get(e);if(l!==void 0){let p=this.#i[l],u=this.#p(p);return a&&this.#r(a,l),this.#x(l)?(a&&(a.get="stale"),u?(a&&n&&p.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?p.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),a&&n&&(a.returnedStale=!0),n?p:void 0)):(a&&(a.get="hit"),u?p.__staleWhileFetching:(this.#V(l),i&&this.#R(l),p))}else a&&(a.get="miss")}#H(e,r){this.#y[r]=e,this.#g[e]=r}#V(e){e!==this.#f&&(e===this.#d?this.#d=this.#g[e]:this.#H(this.#y[e],this.#g[e]),this.#H(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#a.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#B(r);else{this.#F(i);let o=this.#i[i];if(this.#p(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(o,e,r),this.#m&&this.#h?.push([o,e,r])),this.#a.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#d)this.#d=this.#g[i];else{let a=this.#y[i];this.#g[a]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#m&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#B("delete")}#B(e){for(let r of this.#P({allowStale:!0})){let n=this.#i[r];if(this.#p(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#m&&this.#h?.push([n,i,e])}}if(this.#a.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#T&&this.#E&&(this.#T.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#d=0,this.#f=0,this.#w.length=0,this.#u=0,this.#l=0,this.#m&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var hc=require("node:path"),s1=require("node:url"),si=require("fs"),RY=gr(require("node:fs"),1),Mo=require("node:fs/promises");var iy=require("node:events"),hb=gr(require("node:stream"),1),t1=require("node:string_decoder"),YF=typeof process=="object"&&process?process:{stdout:null,stderr:null},yY=t=>!!t&&typeof t=="object"&&(t instanceof Po||t instanceof hb.default||xY(t)||TY(t)),xY=t=>!!t&&typeof t=="object"&&t instanceof iy.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==hb.default.Writable.prototype.pipe,TY=t=>!!t&&typeof t=="object"&&t instanceof iy.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Oi=Symbol("EOF"),Ni=Symbol("maybeEmitEnd"),ko=Symbol("emittedEnd"),Xg=Symbol("emittingEnd"),Sp=Symbol("emittedError"),Jg=Symbol("closed"),XF=Symbol("read"),ey=Symbol("flush"),JF=Symbol("flushChunk"),Ln=Symbol("encoding"),dc=Symbol("decoder"),Pt=Symbol("flowing"),vp=Symbol("paused"),mc=Symbol("resume"),Mt=Symbol("buffer"),lr=Symbol("pipes"),At=Symbol("bufferLength"),lb=Symbol("bufferPush"),ty=Symbol("bufferShift"),Kt=Symbol("objectMode"),yt=Symbol("destroyed"),pb=Symbol("error"),ub=Symbol("emitData"),e1=Symbol("emitEnd"),fb=Symbol("emitEnd2"),ii=Symbol("async"),db=Symbol("abort"),ry=Symbol("aborted"),bp=Symbol("signal"),Es=Symbol("dataListeners"),Gr=Symbol("discarded"),wp=t=>Promise.resolve().then(t),SY=t=>t(),vY=t=>t==="end"||t==="finish"||t==="prefinish",bY=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,wY=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),ny=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[mc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},mb=class extends ny{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},_Y=t=>!!t.objectMode,EY=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Po=class extends iy.EventEmitter{[Pt]=!1;[vp]=!1;[lr]=[];[Mt]=[];[Kt];[Ln];[ii];[dc];[Oi]=!1;[ko]=!1;[Xg]=!1;[Jg]=!1;[Sp]=null;[At]=0;[yt]=!1;[bp];[ry]=!1;[Es]=0;[Gr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");_Y(r)?(this[Kt]=!0,this[Ln]=null):EY(r)?(this[Ln]=r.encoding,this[Kt]=!1):(this[Kt]=!1,this[Ln]=null),this[ii]=!!r.async,this[dc]=this[Ln]?new t1.StringDecoder(this[Ln]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Mt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[lr]});let{signal:n}=r;n&&(this[bp]=n,n.aborted?this[db]():n.addEventListener("abort",()=>this[db]()))}get bufferLength(){return this[At]}get encoding(){return this[Ln]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Kt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ii]}set async(e){this[ii]=this[ii]||!!e}[db](){this[ry]=!0,this.emit("abort",this[bp]?.reason),this.destroy(this[bp]?.reason)}get aborted(){return this[ry]}set aborted(e){}write(e,r,n){if(this[ry])return!1;if(this[Oi])throw new Error("write after end");if(this[yt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ii]?wp:SY;if(!this[Kt]&&!Buffer.isBuffer(e)){if(wY(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(bY(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Kt]?(this[Pt]&&this[At]!==0&&this[ey](!0),this[Pt]?this.emit("data",e):this[lb](e),this[At]!==0&&this.emit("readable"),n&&i(n),this[Pt]):e.length?(typeof e=="string"&&!(r===this[Ln]&&!this[dc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Ln]&&(e=this[dc].write(e)),this[Pt]&&this[At]!==0&&this[ey](!0),this[Pt]?this.emit("data",e):this[lb](e),this[At]!==0&&this.emit("readable"),n&&i(n),this[Pt]):(this[At]!==0&&this.emit("readable"),n&&i(n),this[Pt])}read(e){if(this[yt])return null;if(this[Gr]=!1,this[At]===0||e===0||e&&e>this[At])return this[Ni](),null;this[Kt]&&(e=null),this[Mt].length>1&&!this[Kt]&&(this[Mt]=[this[Ln]?this[Mt].join(""):Buffer.concat(this[Mt],this[At])]);let r=this[XF](e||null,this[Mt][0]);return this[Ni](),r}[XF](e,r){if(this[Kt])this[ty]();else{let n=r;e===n.length||e===null?this[ty]():typeof n=="string"?(this[Mt][0]=n.slice(e),r=n.slice(0,e),this[At]-=e):(this[Mt][0]=n.subarray(e),r=n.subarray(0,e),this[At]-=e)}return this.emit("data",r),!this[Mt].length&&!this[Oi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Oi]=!0,this.writable=!1,(this[Pt]||!this[vp])&&this[Ni](),this}[mc](){this[yt]||(!this[Es]&&!this[lr].length&&(this[Gr]=!0),this[vp]=!1,this[Pt]=!0,this.emit("resume"),this[Mt].length?this[ey]():this[Oi]?this[Ni]():this.emit("drain"))}resume(){return this[mc]()}pause(){this[Pt]=!1,this[vp]=!0,this[Gr]=!1}get destroyed(){return this[yt]}get flowing(){return this[Pt]}get paused(){return this[vp]}[lb](e){this[Kt]?this[At]+=1:this[At]+=e.length,this[Mt].push(e)}[ty](){return this[Kt]?this[At]-=1:this[At]-=this[Mt][0].length,this[Mt].shift()}[ey](e=!1){do;while(this[JF](this[ty]())&&this[Mt].length);!e&&!this[Mt].length&&!this[Oi]&&this.emit("drain")}[JF](e){return this.emit("data",e),this[Pt]}pipe(e,r){if(this[yt])return e;this[Gr]=!1;let n=this[ko];return r=r||{},e===YF.stdout||e===YF.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[lr].push(r.proxyErrors?new mb(this,e,r):new ny(this,e,r)),this[ii]?wp(()=>this[mc]()):this[mc]()),e}unpipe(e){let r=this[lr].find(n=>n.dest===e);r&&(this[lr].length===1?(this[Pt]&&this[Es]===0&&(this[Pt]=!1),this[lr]=[]):this[lr].splice(this[lr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Gr]=!1,this[Es]++,!this[lr].length&&!this[Pt]&&this[mc]();else if(e==="readable"&&this[At]!==0)super.emit("readable");else if(vY(e)&&this[ko])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[Sp]){let i=r;this[ii]?wp(()=>i.call(this,this[Sp])):i.call(this,this[Sp])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Es]=this.listeners("data").length,this[Es]===0&&!this[Gr]&&!this[lr].length&&(this[Pt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Es]=0,!this[Gr]&&!this[lr].length&&(this[Pt]=!1)),r}get emittedEnd(){return this[ko]}[Ni](){!this[Xg]&&!this[ko]&&!this[yt]&&this[Mt].length===0&&this[Oi]&&(this[Xg]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Jg]&&this.emit("close"),this[Xg]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==yt&&this[yt])return!1;if(e==="data")return!this[Kt]&&!n?!1:this[ii]?(wp(()=>this[ub](n)),!0):this[ub](n);if(e==="end")return this[e1]();if(e==="close"){if(this[Jg]=!0,!this[ko]&&!this[yt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[Sp]=n,super.emit(pb,n);let o=!this[bp]||this.listeners("error").length?super.emit("error",n):!1;return this[Ni](),o}else if(e==="resume"){let o=super.emit("resume");return this[Ni](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Ni](),i}[ub](e){for(let n of this[lr])n.dest.write(e)===!1&&this.pause();let r=this[Gr]?!1:super.emit("data",e);return this[Ni](),r}[e1](){return this[ko]?!1:(this[ko]=!0,this.readable=!1,this[ii]?(wp(()=>this[fb]()),!0):this[fb]())}[fb](){if(this[dc]){let r=this[dc].end();if(r){for(let n of this[lr])n.dest.write(r);this[Gr]||super.emit("data",r)}}for(let r of this[lr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Kt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Kt]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[Kt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Ln]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(yt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Gr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Oi])return r();let o,a,l=m=>{this.off("data",p),this.off("end",u),this.off(yt,d),r(),a(m)},p=m=>{this.off("error",l),this.off("end",u),this.off(yt,d),this.pause(),o({value:m,done:!!this[Oi]})},u=()=>{this.off("error",l),this.off("data",p),this.off(yt,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((m,g)=>{a=g,o=m,this.once(yt,d),this.once("error",l),this.once("end",u),this.once("data",p)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Gr]=!1;let e=!1,r=()=>(this.pause(),this.off(pb,r),this.off(yt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(pb,r),this.once(yt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[yt])return e?this.emit("error",e):this.emit(yt),this;this[yt]=!0,this[Gr]=!0,this[Mt].length=0,this[At]=0;let r=this;return typeof r.close=="function"&&!this[Jg]&&r.close(),e?this.emit("error",e):this.emit(yt),this}static get isStream(){return yY}};var kY=si.realpathSync.native,Ep={lstatSync:si.lstatSync,readdir:si.readdir,readdirSync:si.readdirSync,readlinkSync:si.readlinkSync,realpathSync:kY,promises:{lstat:Mo.lstat,readdir:Mo.readdir,readlink:Mo.readlink,realpath:Mo.realpath}},a1=t=>!t||t===Ep||t===RY?Ep:{...Ep,...t,promises:{...Ep.promises,...t.promises||{}}},c1=/^\\\\\?\\([a-z]:)\\?$/i,PY=t=>t.replace(/\//g,"\\").replace(c1,"$1\\"),MY=/[\\\/]/,Tn=0,l1=1,p1=2,oi=4,u1=6,f1=8,Rs=10,d1=12,xn=15,_p=~xn,gb=16,r1=32,Rp=64,Un=128,oy=256,ay=512,n1=Rp|Un|ay,AY=1023,yb=t=>t.isFile()?f1:t.isDirectory()?oi:t.isSymbolicLink()?Rs:t.isCharacterDevice()?p1:t.isBlockDevice()?u1:t.isSocket()?d1:t.isFIFO()?l1:Tn,i1=new Map,kp=t=>{let e=i1.get(t);if(e)return e;let r=t.normalize("NFKD");return i1.set(t,r),r},o1=new Map,sy=t=>{let e=o1.get(t);if(e)return e;let r=kp(t.toLowerCase());return o1.set(t,r),r},cy=class extends Tp{constructor(){super({max:256})}},xb=class extends Tp{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},m1=Symbol("PathScurry setAsCwd"),Qt=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#s;get uid(){return this.#s}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#u;get blksize(){return this.#u}#a;get ino(){return this.#a}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#T;#v;#b;#m;#M;#R;#r;#I;#x;#A;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=Tn,n,i,o,a,l){this.name=e,this.#T=o?sy(e):kp(e),this.#r=r&AY,this.nocase=o,this.roots=i,this.root=n||this,this.#I=a,this.#b=l.fullpath,this.#M=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=a1(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#I}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#I.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#I.set(this,r),this.#r&=~gb,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?sy(e):kp(e);for(let p of n)if(p.#T===i)return p;let o=this.parent?this.sep:"",a=this.#b?this.#b+o+e:void 0,l=this.newChild(e,Tn,{...r,parent:this,fullpath:a});return this.canReaddir()||(l.#r|=Un),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#M!==void 0)return this.#M;let e=this.name,r=this.parent;if(!r)return this.#M=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#m!==void 0)return this.#m;if(this.sep==="/")return this.#m=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#m=`//?/${i}`:this.#m=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#m=n}isUnknown(){return(this.#r&xn)===Tn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&xn)===f1}isDirectory(){return(this.#r&xn)===oi}isCharacterDevice(){return(this.#r&xn)===p1}isBlockDevice(){return(this.#r&xn)===u1}isFIFO(){return(this.#r&xn)===l1}isSocket(){return(this.#r&xn)===d1}isSymbolicLink(){return(this.#r&Rs)===Rs}lstatCached(){return this.#r&r1?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#A}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#r&xn;return!(e!==Tn&&e!==Rs||this.#r&oy||this.#r&Un)}calledReaddir(){return!!(this.#r&gb)}isENOENT(){return!!(this.#r&Un)}isNamed(e){return this.nocase?this.#T===sy(e):this.#T===kp(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}#C(e){this.#r|=gb;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#O()}}#O(){this.#r&Un||(this.#r=(this.#r|Un)&_p,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#O()}#P(){this.#r|=ay,this.#N()}#N(){if(this.#r&Rp)return;let e=this.#r;(e&xn)===oi&&(e&=_p),this.#r=e|Rp,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#N():e==="ENOENT"?this.#O():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#N():e==="ENOENT"&&this.#O()}#p(e=""){let r=this.#r;r|=oy,e==="ENOENT"&&(r|=Un),(e==="EINVAL"||e==="UNKNOWN")&&(r&=_p),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#N()}#H(e,r){return this.#D(e,r)||this.#V(e,r)}#V(e,r){let n=yb(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&xn;return o!==oi&&o!==Rs&&o!==Tn&&(i.#r|=Rp),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?sy(e.name):kp(e.name))===i.#T)return this.#B(e,i,n,r)}}#B(e,r,n,i){let o=r.name;return r.#r=r.#r&_p|yb(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if(!(this.#r&Un))try{return this.#q(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if(!(this.#r&Un))try{return this.#q(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#q(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:a,blocks:l,ctime:p,ctimeMs:u,dev:d,gid:m,ino:g,mode:x,mtime:b,mtimeMs:v,nlink:F,rdev:I,size:U,uid:K}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#u=a,this.#i=l,this.#_=p,this.#d=u,this.#t=d,this.#S=m,this.#a=g,this.#o=x,this.#h=b,this.#y=v,this.#n=F,this.#l=I,this.#c=U,this.#s=K;let ne=yb(e);this.#r=this.#r&_p|ne|r1,ne!==Tn&&ne!==oi&&ne!==Rs&&(this.#r|=Rp)}#$=[];#j=!1;#z(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,a)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of a)this.#H(l,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&n1)return!1;let e=xn&this.#r;return e===Tn||e===oi||e===Rs}shouldWalk(e,r){return(this.#r&oi)===oi&&!(this.#r&n1)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#A)return this.#A;if(!((ay|oy|Un)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}realpathSync(){if(this.#A)return this.#A;if(!((ay|oy|Un)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}[m1](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#M=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#M=void 0,i.#R=void 0,i=i.parent}},ly=class t extends Qt{sep="\\";splitSep=MY;constructor(e,r=Tn,n,i,o,a,l){super(e,r,n,i,o,a,l)}newChild(e,r=Tn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return hc.win32.parse(e).root}getRoot(e){if(e=PY(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new gc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(c1,"$1\\"),e===r}},py=class t extends Qt{splitSep="/";sep="/";constructor(e,r=Tn,n,i,o,a,l){super(e,r,n,i,o,a,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=Tn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},uy=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:a=Ep}={}){this.#n=a1(a),(e instanceof URL||e.startsWith("file://"))&&(e=(0,s1.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new cy,this.#t=new cy,this.#o=new xb(o);let p=l.substring(this.rootPath.length).split(n);if(p.length===1&&!p[0]&&p.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let u=this.root,d=p.length-1,m=r.sep,g=this.rootPath,x=!1;for(let b of p){let v=d--;u=u.child(b,{relative:new Array(v).fill("..").join(m),relativePosix:new Array(v).fill("..").join("/"),fullpath:g+=(x?"":m)+b}),x=!0}this.cwd=u}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set,u=(m,g)=>{p.add(m),m.readdirCB((x,b)=>{if(x)return g(x);let v=b.length;if(!v)return g();let F=()=>{--v===0&&g()};for(let I of b)(!o||o(I))&&l.push(n?I:I.fullpath()),i&&I.isSymbolicLink()?I.realpath().then(U=>U?.isUnknown()?U.lstat():U).then(U=>U?.shouldWalk(p,a)?u(U,F):F()):I.shouldWalk(p,a)?u(I,F):F()},!0)},d=e;return new Promise((m,g)=>{u(d,x=>{if(x)return g(x);m(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set([e]);for(let u of p){let d=u.readdirSync();for(let m of d){(!o||o(m))&&l.push(n?m:m.fullpath());let g=m;if(m.isSymbolicLink()){if(!(i&&(g=m.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(p,a)&&p.add(g)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let p of l){let u=p.readdirSync();for(let d of u){(!o||o(d))&&(yield n?d:d.fullpath());let m=d;if(d.isSymbolicLink()){if(!(i&&(m=d.realpathSync())))continue;m.isUnknown()&&m.lstatSync()}m.shouldWalk(l,a)&&l.add(m)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=new Po({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let p=new Set,u=[e],d=0,m=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&l.end();return}d++,p.add(x);let b=(F,I,U=!1)=>{if(F)return l.emit("error",F);if(i&&!U){let K=[];for(let ne of I)ne.isSymbolicLink()&&K.push(ne.realpath().then(ie=>ie?.isUnknown()?ie.lstat():ie));if(K.length){Promise.all(K).then(()=>b(null,I,!0));return}}for(let K of I)K&&(!o||o(K))&&(l.write(n?K:K.fullpath())||(g=!0));d--;for(let K of I){let ne=K.realpathCached()||K;ne.shouldWalk(p,a)&&u.push(ne)}g&&!l.flowing?l.once("drain",m):v||m()},v=!0;x.readdirCB(b,!0),v=!1}};return m(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=new Po({objectMode:!0}),p=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let u=[e],d=0,m=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&l.end();return}d++,p.add(x);let b=x.readdirSync();for(let v of b)(!o||o(v))&&(l.write(n?v:v.fullpath())||(g=!0));d--;for(let v of b){let F=v;if(v.isSymbolicLink()){if(!(i&&(F=v.realpathSync())))continue;F.isUnknown()&&F.lstatSync()}F.shouldWalk(p,a)&&u.push(F)}}g&&!l.flowing&&l.once("drain",m)};return m(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[m1](r)}},gc=class extends uy{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,hc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return hc.win32.parse(e).root.toUpperCase()}newRoot(e){return new ly(this.rootPath,oi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},yc=class extends uy{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,hc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new py(this.rootPath,oi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},Pp=class extends yc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},MUe=process.platform==="win32"?ly:py,h1=process.platform==="win32"?gc:process.platform==="darwin"?Pp:yc;var DY=t=>t.length>=1,IY=t=>t.length>=1,xc=class t{#e;#t;#o;length;#n;#s;#S;#l;#u;#a;#c=!0;constructor(e,r,n,i){if(!DY(e))throw new TypeError("empty pattern list");if(!IY(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,a,l,p,...u]=this.#e,[d,m,g,x,...b]=this.#t;u[0]===""&&(u.shift(),b.shift());let v=[o,a,l,p,""].join("/"),F=[d,m,g,x,""].join("/");this.#e=[v,...u],this.#t=[F,...b],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...a]=this.#e,[l,...p]=this.#t;a[0]===""&&(a.shift(),p.shift());let u=o+"/",d=l+"/";this.#e=[u,...a],this.#t=[d,...p],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Lt}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#s!==void 0?this.#s:this.hasMore()?(this.#s=new t(this.#e,this.#t,this.#o+1,this.#n),this.#s.#a=this.#a,this.#s.#u=this.#u,this.#s.#l=this.#l,this.#s):this.#s=null}isUNC(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#a!==void 0?this.#a:this.#a=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var FY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Tc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:a=FY}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=a,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:a,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new zr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let a=new xc(i,o,0,this.platform),l=new zr(a.globString(),this.mmopts),p=o[o.length-1]==="**",u=a.isAbsolute();u?this.absolute.push(l):this.relative.push(l),p&&(u?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let a of this.relative)if(a.match(i)||a.match(o))return!0;for(let a of this.absolute)if(a.match(r)||a.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var Tb=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},Sb=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},vb=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},Mp=class t{hasWalkedCache;matches=new Sb;subwalks=new vb;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Tb}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let a=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(a){i=i.resolve(a==="/"&&this.opts.root!==void 0?this.opts.root:a);let m=o.rest();if(m)o=m;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let p,u,d=!1;for(;typeof(p=o.pattern())=="string"&&(u=o.rest());)i=i.resolve(p),o=u,d=!0;if(p=o.pattern(),u=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof p=="string"){let m=p===".."||p===""||p===".";this.matches.add(i.resolve(p),l,m);continue}else if(p===Lt){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let m=u?.pattern(),g=u?.rest();if(!u||(m===""||m===".")&&!g)this.matches.add(i,l,m===""||m===".");else if(m===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,l,!0)}}else p instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let a of n){let l=a.isAbsolute(),p=a.pattern(),u=a.rest();p===Lt?i.testGlobstar(o,a,u,l):p instanceof RegExp?i.testRegExp(o,p,u,l):i.testString(o,p,u,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let a=e.parent||e;this.subwalks.add(a,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var CY=(t,e)=>typeof t=="string"?new Tc([t],e):Array.isArray(t)?new Tc(t,e):t,fy=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=CY(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#s(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let a=await o.realpath();a&&(a.isUnknown()||this.opts.stat)&&await a.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let a=o.realpathSync();a&&(a?.isUnknown()||this.opts.stat)&&a.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),a=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?a+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new Mp(this.opts),n)}walkCB2(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>a()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirCached();l.calledReaddir()?this.walkCB3(l,p,n,a):l.readdirCB((u,d)=>this.walkCB3(l,d,n,a),!0)}a()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>a()));for(let[l,p]of n.subwalks.entries())o++,this.walkCB2(l,p,n.child(),a);a()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new Mp(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirSync();this.walkCB3Sync(l,p,n,a)}a()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let[l,p]of n.subwalks.entries())o++,this.walkCB2Sync(l,p,n.child(),a);a()}},Ap=class extends fy{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},Dp=class extends fy{results;constructor(e,r,n){super(e,r,n),this.results=new Po({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var OY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Hn=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,g1.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(p=>p.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(p=>p.includes("/")?p:`./**/${p}`)}if(this.pattern=e,this.platform=r.platform||OY,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let p=r.platform==="win32"?gc:r.platform==="darwin"?Pp:r.platform?yc:h1;this.scurry=new p(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(p=>new zr(p,i)),[a,l]=o.reduce((p,u)=>(p[0].push(...u.set),p[1].push(...u.globParts),p),[[],[]]);this.patterns=a.map((p,u)=>{let d=l[u];if(!d)throw new Error("invalid pattern object");return new xc(p,d,0,this.platform)})}async walk(){return[...await new Ap(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Ap(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Dp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Dp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var bb=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new zr(r,e).hasMagic())return!0;return!1};function dy(t,e={}){return new Hn(t,e).streamSync()}function x1(t,e={}){return new Hn(t,e).stream()}function T1(t,e={}){return new Hn(t,e).walkSync()}async function y1(t,e={}){return new Hn(t,e).walk()}function my(t,e={}){return new Hn(t,e).iterateSync()}function S1(t,e={}){return new Hn(t,e).iterate()}var NY=dy,LY=Object.assign(x1,{sync:dy}),UY=my,HY=Object.assign(S1,{sync:my}),VY=Object.assign(T1,{stream:dy,iterate:my}),wb=Object.assign(y1,{glob:y1,globSync:T1,sync:VY,globStream:x1,stream:LY,globStreamSync:dy,streamSync:NY,globIterate:S1,iterate:HY,globIterateSync:my,iterateSync:UY,Glob:Hn,hasMagic:bb,escape:pc,unescape:Nn});wb.glob=wb;function v1(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var D1=Object.defineProperty,$Y=Object.getOwnPropertyNames,C=(t,e)=>D1(t,"name",{value:e,configurable:!0}),jY=(t,e)=>function(){return e||(0,t[$Y(t)[0]])((e={exports:{}}).exports,e),e.exports},Vb=(t,e)=>{for(var r in e)D1(t,r,{get:e[r],enumerable:!0})},qY=jY({"(disabled):util"(){}}),hy={};Vb(hy,{addChainableMethod:()=>Xb,addLengthGuard:()=>Np,addMethod:()=>Qb,addProperty:()=>Kb,checkError:()=>Kr,compareByInspect:()=>Ty,eql:()=>iC,expectTypes:()=>H1,flag:()=>_e,getActual:()=>_y,getMessage:()=>$b,getName:()=>Ry,getOperator:()=>rw,getOwnEnumerableProperties:()=>tw,getOwnEnumerablePropertySymbols:()=>ew,getPathInfo:()=>Gb,hasProperty:()=>Ey,inspect:()=>Ue,isNaN:()=>Sy,isProxyEnabled:()=>Op,isRegExp:()=>vy,objDisplay:()=>ks,overwriteChainableMethod:()=>Jb,overwriteMethod:()=>Yb,overwriteProperty:()=>Zb,proxify:()=>wc,test:()=>Bb,transferFlags:()=>Vn,type:()=>Ze});var Kr={};Vb(Kr,{compatibleConstructor:()=>C1,compatibleInstance:()=>F1,compatibleMessage:()=>O1,getConstructorName:()=>N1,getMessage:()=>L1});function wy(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}C(wy,"isErrorInstance");function I1(t){return Object.prototype.toString.call(t)==="[object RegExp]"}C(I1,"isRegExp");function F1(t,e){return wy(e)&&t===e}C(F1,"compatibleInstance");function C1(t,e){return wy(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}C(C1,"compatibleConstructor");function O1(t,e){let r=typeof t=="string"?t:t.message;return I1(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}C(O1,"compatibleMessage");function N1(t){let e=t;return wy(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}C(N1,"getConstructorName");function L1(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}C(L1,"getMessage");function _e(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}C(_e,"flag");function Bb(t,e){var r=_e(t,"negate"),n=e[0];return r?!n:n}C(Bb,"test");function Ze(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Ze,"type");var zY="captureStackTrace"in Error,ze=class U1 extends Error{static{C(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,zY&&Error.captureStackTrace(this,n||U1);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function H1(t,e){var r=_e(t,"message"),n=_e(t,"ssfi");r=r?r+": ":"",t=_e(t,"object"),e=e.map(function(a){return a.toLowerCase()}),e.sort();var i=e.map(function(a,l){var p=~["a","e","i","o","u"].indexOf(a.charAt(0))?"an":"a",u=e.length>1&&l===e.length-1?"or ":"";return u+p+" "+a}).join(", "),o=Ze(t).toLowerCase();if(!e.some(function(a){return o===a}))throw new ze(r+"object tested must be "+i+", but "+o+" given",void 0,n)}C(H1,"expectTypes");function _y(t,e){return e.length>4?e[4]:t._obj}C(_y,"getActual");var b1={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},GY={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},vc="\u2026";function V1(t,e){let r=b1[GY[e]]||b1[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}C(V1,"colorise");function B1({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:a=1/0,seen:l=[],truncate:p=1/0,stylize:u=String}={},d){let m={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(a),truncate:Number(p),seen:l,inspect:d,stylize:u};return m.colors&&(m.stylize=V1),m}C(B1,"normaliseOptions");function Li(t,e,r=vc){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}C(Li,"truncate");function Sn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,a="",l="",p="";for(let u=0;u<i;u+=1){let d=u+1===t.length,m=u+2===t.length;p=`${vc}(${t.length-u})`;let g=t[u];e.truncate=o-a.length-(d?0:n.length);let x=l||r(g,e)+(d?"":n),b=a.length+x.length,v=b+p.length;if(d&&b>o&&a.length+p.length<=o||!d&&!m&&v>o||(l=d?"":r(t[u+1],e)+(m?"":n),!d&&m&&v>o&&b+l.length>o))break;if(a+=x,!d&&!m&&b+l.length>=o){p=`${vc}(${t.length-u-1})`;break}p=""}return`${a}${p}`}C(Sn,"inspectList");function W1(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}C(W1,"quoteComplexKey");function bc([t,e],r){return r.truncate-=2,typeof t=="string"?t=W1(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}C(bc,"inspectProperty");function $1(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=Sn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=Sn(r.map(o=>[o,t[o]]),e,bc)),`[ ${n}${i?`, ${i}`:""} ]`}C($1,"inspectArray");var KY=C(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function ai(t,e){let r=KY(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let a=0;a<t.length;a++){let l=`${e.stylize(Li(t[a],e.truncate),"number")}${a===t.length-1?"":", "}`;if(e.truncate-=l.length,t[a]!==t.length&&e.truncate<=3){i+=`${vc}(${t.length-t[a]+1})`;break}i+=l}let o="";return n.length&&(o=Sn(n.map(a=>[a,t[a]]),e,bc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}C(ai,"inspectTypedArray");function j1(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Li(n[1],e.truncate-i.length-1)}`,"date")}C(j1,"inspectDate");function Rb(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Li(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}C(Rb,"inspectFunction");function q1([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}C(q1,"inspectMapEntry");function z1(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}C(z1,"mapToEntries");function G1(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${Sn(z1(t),e,q1)} }`)}C(G1,"inspectMap");var QY=Number.isNaN||(t=>t!==t);function kb(t,e){return QY(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Li(String(t),e.truncate),"number")}C(kb,"inspectNumber");function Pb(t,e){let r=Li(t.toString(),e.truncate-1);return r!==vc&&(r+="n"),e.stylize(r,"bigint")}C(Pb,"inspectBigInt");function K1(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Li(i,n)}/${r}`,"regexp")}C(K1,"inspectRegExp");function Q1(t){let e=[];return t.forEach(r=>{e.push(r)}),e}C(Q1,"arrayFromSet");function Z1(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${Sn(Q1(t),e)} }`)}C(Z1,"inspectSet");var w1=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),ZY={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},YY=16,XY=4;function Y1(t){return ZY[t]||`\\u${`0000${t.charCodeAt(0).toString(YY)}`.slice(-XY)}`}C(Y1,"escape");function Mb(t,e){return w1.test(t)&&(t=t.replace(w1,Y1)),e.stylize(`'${Li(t,e.truncate-2)}'`,"string")}C(Mb,"inspectString");function Ab(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}C(Ab,"inspectSymbol");var X1=C(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(X1=C((n,i)=>{let[o,a]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(a,i)}}`},"getPromiseValue"))}catch{}var JY=X1;function Fp(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=Sn(r.map(l=>[l,t[l]]),e,bc),o=Sn(n.map(l=>[l,t[l]]),e,bc);e.seen.pop();let a="";return i&&o&&(a=", "),`{ ${i}${a}${o} }`}C(Fp,"inspectObject");var _b=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function J1(t,e){let r="";return _b&&_b in t&&(r=t[_b]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Fp(t,e)}`}C(J1,"inspectClass");function eC(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${Sn(t,e)} ]`)}C(eC,"inspectArguments");var eX=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function tC(t,e){let r=Object.getOwnPropertyNames(t).filter(a=>eX.indexOf(a)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=Li(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=Sn(r.map(a=>[a,t[a]]),e,bc);return`${n}${i}${o?` { ${o} }`:""}`}C(tC,"inspectObject");function rC([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}C(rC,"inspectAttribute");function gy(t,e){return Sn(t,e,Wb,`
`)}C(gy,"inspectHTMLCollection");function Wb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),a=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=Sn(r.map(d=>[d,t.getAttribute(d)]),e,rC," ")),e.truncate-=l.length;let p=e.truncate,u=gy(t.children,e);return u&&u.length>p&&(u=`${vc}(${t.children.length})`),`${i}${l}${o}${u}${a}`}C(Wb,"inspectHTML");var tX=typeof Symbol=="function"&&typeof Symbol.for=="function",Eb=tX?Symbol.for("chai/inspect"):"@@chai/inspect",Sc=!1;try{let t=qY();Sc=t.inspect?t.inspect.custom:!1}catch{Sc=!1}var _1=new WeakMap,E1={},R1={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:kb,Number:kb,bigint:Pb,BigInt:Pb,string:Mb,String:Mb,function:Rb,Function:Rb,symbol:Ab,Symbol:Ab,Array:$1,Date:j1,Map:G1,Set:Z1,RegExp:K1,Promise:JY,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:eC,Int8Array:ai,Uint8Array:ai,Uint8ClampedArray:ai,Int16Array:ai,Uint16Array:ai,Int32Array:ai,Uint32Array:ai,Float32Array:ai,Float64Array:ai,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:tC,HTMLCollection:gy,NodeList:gy},rX=C((t,e,r)=>Eb in t&&typeof t[Eb]=="function"?t[Eb](e):Sc&&Sc in t&&typeof t[Sc]=="function"?t[Sc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&_1.has(t.constructor)?_1.get(t.constructor)(t,e):E1[r]?E1[r](t,e):"","inspectCustom"),nX=Object.prototype.toString;function yy(t,e={}){let r=B1(e,yy),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=nX.call(t).slice(8,-1)),i in R1)return R1[i](t,r);if(n&&t){let a=rX(t,r,i);if(a)return typeof a=="string"?a:yy(a,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Fp(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?Wb(t,r):"constructor"in t?t.constructor!==Object?J1(t,r):Fp(t,r):t===Object(t)?Fp(t,r):r.stylize(String(t),i)}C(yy,"inspect");var kr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Ue(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:kr.truncateThreshold?kr.truncateThreshold:1/0};return yy(t,i)}C(Ue,"inspect");function ks(t){var e=Ue(t),r=Object.prototype.toString.call(t);if(kr.truncateThreshold&&e.length>=kr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}C(ks,"objDisplay");function $b(t,e){var r=_e(t,"negate"),n=_e(t,"object"),i=e[3],o=_y(t,e),a=r?e[2]:e[1],l=_e(t,"message");return typeof a=="function"&&(a=a()),a=a||"",a=a.replace(/#\{this\}/g,function(){return ks(n)}).replace(/#\{act\}/g,function(){return ks(o)}).replace(/#\{exp\}/g,function(){return ks(i)}),l?l+": "+a:a}C($b,"getMessage");function Vn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}C(Vn,"transferFlags");function Db(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Db,"type");function jb(){this._key="chai/deep-eql__"+Math.random()+Date.now()}C(jb,"FakeMap");jb.prototype={get:C(function(e){return e[this._key]},"get"),set:C(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var nC=typeof WeakMap=="function"?WeakMap:jb;function Ib(t,e,r){if(!r||Ps(t)||Ps(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}C(Ib,"memoizeCompare");function Ip(t,e,r,n){if(!(!r||Ps(t)||Ps(e))){var i=r.get(t);i?i.set(e,n):(i=new nC,i.set(e,n),r.set(t,i))}}C(Ip,"memoizeSet");var iC=Cp;function Cp(t,e,r){if(r&&r.comparator)return Fb(t,e,r);var n=qb(t,e);return n!==null?n:Fb(t,e,r)}C(Cp,"deepEqual");function qb(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:Ps(t)||Ps(e)?!1:null}C(qb,"simpleEqual");function Fb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new nC;var n=r&&r.comparator,i=Ib(t,e,r.memoize);if(i!==null)return i;var o=Ib(e,t,r.memoize);if(o!==null)return o;if(n){var a=n(t,e);if(a===!1||a===!0)return Ip(t,e,r.memoize,a),a;var l=qb(t,e);if(l!==null)return l}var p=Db(t);if(p!==Db(e))return Ip(t,e,r.memoize,!1),!1;Ip(t,e,r.memoize,!0);var u=oC(t,e,p,r);return Ip(t,e,r.memoize,u),u}C(Fb,"extensiveDeepEqual");function oC(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Cp(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return zb(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Ao(t,e,n);case"RegExp":return sC(t,e);case"Generator":return aC(t,e,n);case"DataView":return Ao(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return Ao(new Uint8Array(t),new Uint8Array(e),n);case"Set":return Cb(t,e,n);case"Map":return Cb(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return lC(t,e,n)}}C(oC,"extensiveDeepEqualByType");function sC(t,e){return t.toString()===e.toString()}C(sC,"regexpEqual");function Cb(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(C(function(a,l){n.push([a,l])},"gatherEntries")),e.forEach(C(function(a,l){i.push([a,l])},"gatherEntries")),Ao(n.sort(),i.sort(),r)}C(Cb,"entriesEqual");function Ao(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Cp(t[i],e[i],r)===!1)return!1;return!0}C(Ao,"iterableEqual");function aC(t,e,r){return Ao(xy(t),xy(e),r)}C(aC,"generatorEqual");function cC(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}C(cC,"hasIteratorFunction");function Ob(t){if(cC(t))try{return xy(t[Symbol.iterator]())}catch{return[]}return[]}C(Ob,"getIteratorEntries");function xy(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}C(xy,"getGeneratorEntries");function Nb(t){var e=[];for(var r in t)e.push(r);return e}C(Nb,"getEnumerableKeys");function Lb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}C(Lb,"getEnumerableSymbols");function zb(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Cp(t[r[o]],e[r[o]],n)===!1)return!1;return!0}C(zb,"keysEqual");function lC(t,e,r){var n=Nb(t),i=Nb(e),o=Lb(t),a=Lb(e);if(n=n.concat(o),i=i.concat(a),n.length&&n.length===i.length)return Ao(Ub(n).sort(),Ub(i).sort())===!1?!1:zb(t,e,n,r);var l=Ob(t),p=Ob(e);return l.length&&l.length===p.length?(l.sort(),p.sort(),Ao(l,p,r)):n.length===0&&l.length===0&&i.length===0&&p.length===0}C(lC,"objectEqual");function Ps(t){return t===null||typeof t!="object"}C(Ps,"isPrimitive");function Ub(t){return t.map(C(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}C(Ub,"mapSymbols");function Ey(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}C(Ey,"hasProperty");function pC(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),a=null;return o?a={i:parseFloat(o[1])}:a={p:n.replace(/\\([.[\]])/g,"$1")},a})}C(pC,"parsePath");function Hb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let a=e[o];n&&(typeof a.p>"u"?n=n[a.i]:n=n[a.p],o===r-1&&(i=n))}return i}C(Hb,"internalGetPathValue");function Gb(t,e){let r=pC(e),n=r[r.length-1],i={parent:r.length>1?Hb(t,r,r.length-1):t,name:n.p||n.i,value:Hb(t,r)};return i.exists=Ey(i.parent,i.name),i}C(Gb,"getPathInfo");function _(t,e,r,n){return _e(this,"ssfi",r||_),_e(this,"lockSsfi",n),_e(this,"object",t),_e(this,"message",e),_e(this,"eql",kr.deepEqual||iC),wc(this)}C(_,"Assertion");Object.defineProperty(_,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),kr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),kr.includeStack=t}});Object.defineProperty(_,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),kr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),kr.showDiff=t}});_.addProperty=function(t,e){Kb(this.prototype,t,e)};_.addMethod=function(t,e){Qb(this.prototype,t,e)};_.addChainableMethod=function(t,e,r){Xb(this.prototype,t,e,r)};_.overwriteProperty=function(t,e){Zb(this.prototype,t,e)};_.overwriteMethod=function(t,e){Yb(this.prototype,t,e)};_.overwriteChainableMethod=function(t,e,r){Jb(this.prototype,t,e,r)};_.prototype.assert=function(t,e,r,n,i,o){var a=Bb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),kr.showDiff!==!0&&(o=!1),!a){e=$b(this,arguments);var l=_y(this,arguments),p={actual:l,expected:n,showDiff:o},u=rw(this,arguments);throw u&&(p.operator=u),new ze(e,p,kr.includeStack?this.assert:_e(this,"ssfi"))}};Object.defineProperty(_.prototype,"_obj",{get:function(){return _e(this,"object")},set:function(t){_e(this,"object",t)}});function Op(){return kr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}C(Op,"isProxyEnabled");function Kb(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:C(function n(){!Op()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new _;return Vn(this,o),o},"propertyGetter"),configurable:!0})}C(Kb,"addProperty");var iX=Object.getOwnPropertyDescriptor(function(){},"length");function Np(t,e,r){return iX.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}C(Np,"addLengthGuard");function uC(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}C(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}C(uC,"getProperties");var k1=["__flags","__methods","_obj","assert"];function wc(t,e){return Op()?new Proxy(t,{get:C(function r(n,i){if(typeof i=="string"&&kr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,a=4;throw uC(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&k1.indexOf(l)===-1){var p=fC(i,l,a);p<a&&(o=l,a=p)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return k1.indexOf(i)===-1&&!_e(n,"lockSsfi")&&_e(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}C(wc,"proxify");function fC(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var a=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(a===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}C(fC,"stringDistanceCapped");function Qb(t,e,r){var n=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new _;return Vn(this,o),o},"methodWrapper");Np(n,e,!1),t[e]=wc(n,e)}C(Qb,"addMethod");function Zb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=C(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:C(function o(){!Op()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).call(this);if(_e(this,"lockSsfi",a),l!==void 0)return l;var p=new _;return Vn(this,p),p},"overwritingPropertyGetter"),configurable:!0})}C(Zb,"overwriteProperty");function Yb(t,e,r){var n=t[e],i=C(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(_e(this,"lockSsfi",a),l!==void 0)return l;var p=new _;return Vn(this,p),p},"overwritingMethodWrapper");Np(o,e,!1),t[e]=wc(o,e)}C(Yb,"overwriteMethod");var oX=typeof Object.setPrototypeOf=="function",P1=C(function(){},"testFn"),sX=Object.getOwnPropertyNames(P1).filter(function(t){var e=Object.getOwnPropertyDescriptor(P1,t);return typeof e!="object"?!0:!e.configurable}),aX=Function.prototype.call,cX=Function.prototype.apply;function Xb(t,e,r,n){typeof n!="function"&&(n=C(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:C(function(){i.chainingBehavior.call(this);var a=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",a);var u=i.method.apply(this,arguments);if(u!==void 0)return u;var d=new _;return Vn(this,d),d},"chainableMethodWrapper");if(Np(a,e,!0),oX){var l=Object.create(this);l.call=aX,l.apply=cX,Object.setPrototypeOf(a,l)}else{var p=Object.getOwnPropertyNames(t);p.forEach(function(u){if(sX.indexOf(u)===-1){var d=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(a,u,d)}})}return Vn(this,a),wc(a)},"chainableMethodGetter"),configurable:!0})}C(Xb,"addChainableMethod");function Jb(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=C(function(){var p=n(o).call(this);if(p!==void 0)return p;var u=new _;return Vn(this,u),u},"overwritingChainableMethodGetter");var a=i.method;i.method=C(function(){var p=r(a).apply(this,arguments);if(p!==void 0)return p;var u=new _;return Vn(this,u),u},"overwritingChainableMethodWrapper")}C(Jb,"overwriteChainableMethod");function Ty(t,e){return Ue(t)<Ue(e)?-1:1}C(Ty,"compareByInspect");function ew(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}C(ew,"getOwnEnumerablePropertySymbols");function tw(t){return Object.keys(t).concat(ew(t))}C(tw,"getOwnEnumerableProperties");function dC(t){return t!==t}C(dC,"_isNaN");var Sy=Number.isNaN||dC;function mC(t){var e=Ze(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}C(mC,"isObjectType");function rw(t,e){var r=_e(t,"operator"),n=_e(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var a=mC(i);return/\snot\s/.test(o)?a?"notDeepStrictEqual":"notStrictEqual":a?"deepStrictEqual":"strictEqual"}}C(rw,"getOperator");function Ry(t){return t.name}C(Ry,"getName");function vy(t){return Object.prototype.toString.call(t)==="[object RegExp]"}C(vy,"isRegExp");var{flag:P}=hy;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){_.addProperty(t)});_.addProperty("not",function(){P(this,"negate",!0)});_.addProperty("deep",function(){P(this,"deep",!0)});_.addProperty("nested",function(){P(this,"nested",!0)});_.addProperty("own",function(){P(this,"own",!0)});_.addProperty("ordered",function(){P(this,"ordered",!0)});_.addProperty("any",function(){P(this,"any",!0),P(this,"all",!1)});_.addProperty("all",function(){P(this,"all",!0),P(this,"any",!1)});var M1={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function nw(t,e){e&&P(this,"message",e),t=t.toLowerCase();var r=P(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Ze(r).toLowerCase();M1.function.includes(t)?this.assert(M1[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}C(nw,"an");_.addChainableMethod("an",nw);_.addChainableMethod("a",nw);function hC(t,e){return Sy(t)&&Sy(e)||t===e}C(hC,"SameValueZero");function Lp(){P(this,"contains",!0)}C(Lp,"includeChainingBehavior");function Up(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=Ze(r).toLowerCase(),i=P(this,"message"),o=P(this,"negate"),a=P(this,"ssfi"),l=P(this,"deep"),p=l?"deep ":"",u=l?P(this,"eql"):hC;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new ze(i+"unable to use .deep.include with WeakSet",void 0,a);d=r.has(t);break;case"map":r.forEach(function(b){d=d||u(b,t)});break;case"set":l?r.forEach(function(b){d=d||u(b,t)}):d=r.has(t);break;case"array":l?d=r.some(function(b){return u(b,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new ze(i+"the given combination of arguments ("+n+" and "+Ze(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Ze(t).toLowerCase(),void 0,a);var m=Object.keys(t),g=null,x=0;if(m.forEach(function(b){var v=new _(r);if(Vn(this,v,!0),P(v,"lockSsfi",!0),!o||m.length===1){v.property(b,t[b]);return}try{v.property(b,t[b])}catch(F){if(!Kr.compatibleConstructor(F,ze))throw F;g===null&&(g=F),x++}},this),o&&m.length>1&&x===m.length)throw g;return}this.assert(d,"expected #{this} to "+p+"include "+Ue(t),"expected #{this} to not "+p+"include "+Ue(t))}C(Up,"include");_.addChainableMethod("include",Up,Lp);_.addChainableMethod("contain",Up,Lp);_.addChainableMethod("contains",Up,Lp);_.addChainableMethod("includes",Up,Lp);_.addProperty("ok",function(){this.assert(P(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});_.addProperty("true",function(){this.assert(P(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!P(this,"negate"))});_.addProperty("callable",function(){let t=P(this,"object"),e=P(this,"ssfi"),r=P(this,"message"),n=r?`${r}: `:"",i=P(this,"negate"),o=i?`${n}expected ${Ue(t)} not to be a callable function`:`${n}expected ${Ue(t)} to be a callable function`,a=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Ze(t));if(a&&i||!a&&!i)throw new ze(o,void 0,e)});_.addProperty("false",function(){this.assert(P(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!P(this,"negate"))});_.addProperty("null",function(){this.assert(P(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});_.addProperty("undefined",function(){this.assert(P(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});_.addProperty("NaN",function(){this.assert(Sy(P(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function iw(){var t=P(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}C(iw,"assertExist");_.addProperty("exist",iw);_.addProperty("exists",iw);_.addProperty("empty",function(){var t=P(this,"object"),e=P(this,"ssfi"),r=P(this,"message"),n;switch(r=r?r+": ":"",Ze(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new ze(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+Ry(t);throw new ze(i.trim(),void 0,e);default:if(t!==Object(t))throw new ze(r+".empty was passed non-string primitive "+Ue(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function ow(){var t=P(this,"object"),e=Ze(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}C(ow,"checkArguments");_.addProperty("arguments",ow);_.addProperty("Arguments",ow);function ky(t,e){e&&P(this,"message",e);var r=P(this,"object");if(P(this,"deep")){var n=P(this,"lockSsfi");P(this,"lockSsfi",!0),this.eql(t),P(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}C(ky,"assertEqual");_.addMethod("equal",ky);_.addMethod("equals",ky);_.addMethod("eq",ky);function sw(t,e){e&&P(this,"message",e);var r=P(this,"eql");this.assert(r(t,P(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}C(sw,"assertEql");_.addMethod("eql",sw);_.addMethod("eqls",sw);function Py(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to above must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to above must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}C(Py,"assertAbove");_.addMethod("above",Py);_.addMethod("gt",Py);_.addMethod("greaterThan",Py);function My(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to least must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to least must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}C(My,"assertLeast");_.addMethod("least",My);_.addMethod("gte",My);_.addMethod("greaterThanOrEqual",My);function Ay(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to below must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to below must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}C(Ay,"assertBelow");_.addMethod("below",Ay);_.addMethod("lt",Ay);_.addMethod("lessThan",Ay);function Dy(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to most must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to most must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}C(Dy,"assertMost");_.addMethod("most",Dy);_.addMethod("lte",Dy);_.addMethod("lessThanOrEqual",Dy);_.addMethod("within",function(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"doLength"),o=P(this,"message"),a=o?o+": ":"",l=P(this,"ssfi"),p=Ze(n).toLowerCase(),u=Ze(t).toLowerCase(),d=Ze(e).toLowerCase(),m,g=!0,x=u==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&p!=="map"&&p!=="set"&&new _(n,o,l,!0).to.have.property("length"),!i&&p==="date"&&(u!=="date"||d!=="date"))m=a+"the arguments to within must be dates";else if((u!=="number"||d!=="number")&&(i||p==="number"))m=a+"the arguments to within must be numbers";else if(!i&&p!=="date"&&p!=="number"){var b=p==="string"?"'"+n+"'":n;m=a+"expected "+b+" to be a number or a date"}else g=!1;if(g)throw new ze(m,void 0,l);if(i){var v="length",F;p==="map"||p==="set"?(v="size",F=n.size):F=n.length,this.assert(F>=t&&F<=e,"expected #{this} to have a "+v+" within "+x,"expected #{this} to not have a "+v+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function aw(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"ssfi"),i=P(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new ze(i+"The instanceof assertion needs a constructor but "+Ze(t)+" was given.",void 0,n)):l}var a=Ry(t);a==null&&(a="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+a,"expected #{this} to not be an instance of "+a)}C(aw,"assertInstanceOf");_.addMethod("instanceof",aw);_.addMethod("instanceOf",aw);function cw(t,e,r){r&&P(this,"message",r);var n=P(this,"nested"),i=P(this,"own"),o=P(this,"message"),a=P(this,"object"),l=P(this,"ssfi"),p=typeof t;if(o=o?o+": ":"",n){if(p!=="string")throw new ze(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(p!=="string"&&p!=="number"&&p!=="symbol")throw new ze(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new ze(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(a==null)throw new ze(o+"Target cannot be null or undefined.",void 0,l);var u=P(this,"deep"),d=P(this,"negate"),m=n?Gb(a,t):null,g=n?m.value:a[t],x=u?P(this,"eql"):(F,I)=>F===I,b="";u&&(b+="deep "),i&&(b+="own "),n&&(b+="nested "),b+="property ";var v;i?v=Object.prototype.hasOwnProperty.call(a,t):n?v=m.exists:v=Ey(a,t),(!d||arguments.length===1)&&this.assert(v,"expected #{this} to have "+b+Ue(t),"expected #{this} to not have "+b+Ue(t)),arguments.length>1&&this.assert(v&&x(e,g),"expected #{this} to have "+b+Ue(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+Ue(t)+" of #{act}",e,g),P(this,"object",g)}C(cw,"assertProperty");_.addMethod("property",cw);function lw(t,e,r){P(this,"own",!0),cw.apply(this,arguments)}C(lw,"assertOwnProperty");_.addMethod("ownProperty",lw);_.addMethod("haveOwnProperty",lw);function pw(t,e,r){typeof e=="string"&&(r=e,e=null),r&&P(this,"message",r);var n=P(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=P(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Ue(t)+" on #{this} to match "+Ue(e)+", got "+Ue(i),"expected the own property descriptor for "+Ue(t)+" on #{this} to not match "+Ue(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Ue(t),"expected #{this} to not have an own property descriptor for "+Ue(t)),P(this,"object",i)}C(pw,"assertOwnPropertyDescriptor");_.addMethod("ownPropertyDescriptor",pw);_.addMethod("haveOwnPropertyDescriptor",pw);function uw(){P(this,"doLength",!0)}C(uw,"assertLengthChain");function fw(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=Ze(r).toLowerCase(),i=P(this,"message"),o=P(this,"ssfi"),a="length",l;switch(n){case"map":case"set":a="size",l=r.size;break;default:new _(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+a+" of #{exp} but got #{act}","expected #{this} to not have a "+a+" of #{act}",t,l)}C(fw,"assertLength");_.addChainableMethod("length",fw,uw);_.addChainableMethod("lengthOf",fw,uw);function dw(t,e){e&&P(this,"message",e);var r=P(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}C(dw,"assertMatch");_.addMethod("match",dw);_.addMethod("matches",dw);_.addMethod("string",function(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi");new _(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Ue(t),"expected #{this} to not contain "+Ue(t))});function mw(t){var e=P(this,"object"),r=Ze(e),n=Ze(t),i=P(this,"ssfi"),o=P(this,"deep"),a,l="",p,u=!0,d=P(this,"message");d=d?d+": ":"";var m=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",p=[],e.forEach(function(U,K){p.push(K)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(p=tw(e),n){case"Array":if(arguments.length>1)throw new ze(m,void 0,i);break;case"Object":if(arguments.length>1)throw new ze(m,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(U){return typeof U=="symbol"?U:String(U)})}if(!t.length)throw new ze(d+"keys required",void 0,i);var g=t.length,x=P(this,"any"),b=P(this,"all"),v=t,F=o?P(this,"eql"):(U,K)=>U===K;if(!x&&!b&&(b=!0),x&&(u=v.some(function(U){return p.some(function(K){return F(U,K)})})),b&&(u=v.every(function(U){return p.some(function(K){return F(U,K)})}),P(this,"contains")||(u=u&&t.length==p.length)),g>1){t=t.map(function(U){return Ue(U)});var I=t.pop();b&&(a=t.join(", ")+", and "+I),x&&(a=t.join(", ")+", or "+I)}else a=Ue(t[0]);a=(g>1?"keys ":"key ")+a,a=(P(this,"contains")?"contain ":"have ")+a,this.assert(u,"expected #{this} to "+l+a,"expected #{this} to not "+l+a,v.slice(0).sort(Ty),p.sort(Ty),!0)}C(mw,"assertKeys");_.addMethod("keys",mw);_.addMethod("key",mw);function Iy(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"ssfi"),o=P(this,"message"),a=P(this,"negate")||!1;new _(n,o,i,!0).is.a("function"),(vy(t)||typeof t=="string")&&(e=t,t=null);let l,p=!1;try{n()}catch(U){p=!0,l=U}var u=t===void 0&&e===void 0,d=!!(t&&e),m=!1,g=!1;if(u||!u&&!a){var x="an error";t instanceof Error?x="#{exp}":t&&(x=Kr.getConstructorName(t));let U=l;if(l instanceof Error)U=l.toString();else if(typeof l=="string")U=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{U=Kr.getConstructorName(l)}catch{}this.assert(p,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),U)}if(t&&l){if(t instanceof Error){var b=Kr.compatibleInstance(l,t);b===a&&(d&&a?m=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!a?" but #{act} was thrown":""),t.toString(),l.toString()))}var v=Kr.compatibleConstructor(l,t);v===a&&(d&&a?m=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Kr.getConstructorName(t),l instanceof Error?l.toString():l&&Kr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var F="including";vy(e)&&(F="matching");var I=Kr.compatibleMessage(l,e);I===a&&(d&&a?g=!0:this.assert(a,"expected #{this} to throw error "+F+" #{exp} but got #{act}","expected #{this} to throw error not "+F+" #{exp}",e,Kr.getMessage(l)))}m&&g&&this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Kr.getConstructorName(t),l instanceof Error?l.toString():l&&Kr.getConstructorName(l)),P(this,"object",l)}C(Iy,"assertThrows");_.addMethod("throw",Iy);_.addMethod("throws",Iy);_.addMethod("Throw",Iy);function hw(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Ue(t),"expected #{this} to not respond to "+Ue(t))}C(hw,"respondTo");_.addMethod("respondTo",hw);_.addMethod("respondsTo",hw);_.addProperty("itself",function(){P(this,"itself",!0)});function gw(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+ks(t),"expected #{this} to not satisfy"+ks(t),!P(this,"negate"),n)}C(gw,"satisfy");_.addMethod("satisfy",gw);_.addMethod("satisfies",gw);function yw(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");if(new _(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var a=e===void 0?", and a delta is required":"";throw new ze(i+"the arguments to closeTo or approximately must be numbers"+a,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}C(yw,"closeTo");_.addMethod("closeTo",yw);_.addMethod("approximately",yw);function gC(t,e,r,n,i){let o=Array.from(e),a=Array.from(t);if(!n){if(a.length!==o.length)return!1;o=o.slice()}return a.every(function(l,p){if(i)return r?r(l,o[p]):l===o[p];if(!r){var u=o.indexOf(l);return u===-1?!1:(n||o.splice(u,1),!0)}return o.some(function(d,m){return r(l,d)?(n||o.splice(m,1),!0):!1})})}C(gC,"isSubsetOf");_.addMethod("members",function(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi");new _(r,n,i,!0).to.be.iterable,new _(t,n,i,!0).to.be.iterable;var o=P(this,"contains"),a=P(this,"ordered"),l,p,u;o?(l=a?"an ordered superset":"a superset",p="expected #{this} to be "+l+" of #{exp}",u="expected #{this} to not be "+l+" of #{exp}"):(l=a?"ordered members":"members",p="expected #{this} to have the same "+l+" as #{exp}",u="expected #{this} to not have the same "+l+" as #{exp}");var d=P(this,"deep")?P(this,"eql"):void 0;this.assert(gC(t,r,d,o,a),p,u,t,r,!0)});_.addProperty("iterable",function(t){t&&P(this,"message",t);var e=P(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function yC(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi"),o=P(this,"contains"),a=P(this,"deep"),l=P(this,"eql");new _(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(p){return r.indexOf(p)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):a?this.assert(t.some(function(p){return l(r,p)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}C(yC,"oneOf");_.addMethod("oneOf",yC);function xw(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","change"),P(this,"realDelta",l!==a),this.assert(a!==l,"expected "+p+" to change","expected "+p+" to not change")}C(xw,"assertChanges");_.addMethod("change",xw);_.addMethod("changes",xw);function Tw(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),new _(a,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","increase"),P(this,"realDelta",l-a),this.assert(l-a>0,"expected "+p+" to increase","expected "+p+" to not increase")}C(Tw,"assertIncreases");_.addMethod("increase",Tw);_.addMethod("increases",Tw);function Sw(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),new _(a,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","decrease"),P(this,"realDelta",a-l),this.assert(l-a<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}C(Sw,"assertDecreases");_.addMethod("decrease",Sw);_.addMethod("decreases",Sw);function xC(t,e){e&&P(this,"message",e);var r=P(this,"deltaMsgObj"),n=P(this,"initialDeltaValue"),i=P(this,"finalDeltaValue"),o=P(this,"deltaBehavior"),a=P(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=a===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}C(xC,"assertDelta");_.addMethod("by",xC);_.addProperty("extensible",function(){var t=P(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});_.addProperty("sealed",function(){var t=P(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});_.addProperty("frozen",function(){var t=P(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});_.addProperty("finite",function(t){var e=P(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function by(t,e){return new _(t,e)}C(by,"expect");by.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new ze(r,{actual:t,expected:e,operator:n},by.fail)};var TC={};Vb(TC,{Should:()=>pX,should:()=>lX});function vw(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new _(this.valueOf(),null,t):new _(this,null,t)}C(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}C(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,a){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new ze(o,{actual:n,expected:i,operator:a},r.fail)},r.equal=function(n,i,o){new _(n,o).to.equal(i)},r.Throw=function(n,i,o,a){new _(n,a).to.Throw(i,o)},r.exist=function(n,i){new _(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new _(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,a){new _(n,a).to.not.Throw(i,o)},r.not.exist=function(n,i){new _(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}C(vw,"loadShould");var lX=vw,pX=vw;function w(t,e){var r=new _(null,null,w,!0);r.assert(t,e,"[ negation message unavailable ]")}C(w,"assert");w.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new ze(r,{actual:t,expected:e,operator:n},w.fail)};w.isOk=function(t,e){new _(t,e,w.isOk,!0).is.ok};w.isNotOk=function(t,e){new _(t,e,w.isNotOk,!0).is.not.ok};w.equal=function(t,e,r){var n=new _(t,r,w.equal,!0);n.assert(e==_e(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};w.notEqual=function(t,e,r){var n=new _(t,r,w.notEqual,!0);n.assert(e!=_e(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};w.strictEqual=function(t,e,r){new _(t,r,w.strictEqual,!0).to.equal(e)};w.notStrictEqual=function(t,e,r){new _(t,r,w.notStrictEqual,!0).to.not.equal(e)};w.deepEqual=w.deepStrictEqual=function(t,e,r){new _(t,r,w.deepEqual,!0).to.eql(e)};w.notDeepEqual=function(t,e,r){new _(t,r,w.notDeepEqual,!0).to.not.eql(e)};w.isAbove=function(t,e,r){new _(t,r,w.isAbove,!0).to.be.above(e)};w.isAtLeast=function(t,e,r){new _(t,r,w.isAtLeast,!0).to.be.least(e)};w.isBelow=function(t,e,r){new _(t,r,w.isBelow,!0).to.be.below(e)};w.isAtMost=function(t,e,r){new _(t,r,w.isAtMost,!0).to.be.most(e)};w.isTrue=function(t,e){new _(t,e,w.isTrue,!0).is.true};w.isNotTrue=function(t,e){new _(t,e,w.isNotTrue,!0).to.not.equal(!0)};w.isFalse=function(t,e){new _(t,e,w.isFalse,!0).is.false};w.isNotFalse=function(t,e){new _(t,e,w.isNotFalse,!0).to.not.equal(!1)};w.isNull=function(t,e){new _(t,e,w.isNull,!0).to.equal(null)};w.isNotNull=function(t,e){new _(t,e,w.isNotNull,!0).to.not.equal(null)};w.isNaN=function(t,e){new _(t,e,w.isNaN,!0).to.be.NaN};w.isNotNaN=function(t,e){new _(t,e,w.isNotNaN,!0).not.to.be.NaN};w.exists=function(t,e){new _(t,e,w.exists,!0).to.exist};w.notExists=function(t,e){new _(t,e,w.notExists,!0).to.not.exist};w.isUndefined=function(t,e){new _(t,e,w.isUndefined,!0).to.equal(void 0)};w.isDefined=function(t,e){new _(t,e,w.isDefined,!0).to.not.equal(void 0)};w.isCallable=function(t,e){new _(t,e,w.isCallable,!0).is.callable};w.isNotCallable=function(t,e){new _(t,e,w.isNotCallable,!0).is.not.callable};w.isObject=function(t,e){new _(t,e,w.isObject,!0).to.be.a("object")};w.isNotObject=function(t,e){new _(t,e,w.isNotObject,!0).to.not.be.a("object")};w.isArray=function(t,e){new _(t,e,w.isArray,!0).to.be.an("array")};w.isNotArray=function(t,e){new _(t,e,w.isNotArray,!0).to.not.be.an("array")};w.isString=function(t,e){new _(t,e,w.isString,!0).to.be.a("string")};w.isNotString=function(t,e){new _(t,e,w.isNotString,!0).to.not.be.a("string")};w.isNumber=function(t,e){new _(t,e,w.isNumber,!0).to.be.a("number")};w.isNotNumber=function(t,e){new _(t,e,w.isNotNumber,!0).to.not.be.a("number")};w.isFinite=function(t,e){new _(t,e,w.isFinite,!0).to.be.finite};w.isBoolean=function(t,e){new _(t,e,w.isBoolean,!0).to.be.a("boolean")};w.isNotBoolean=function(t,e){new _(t,e,w.isNotBoolean,!0).to.not.be.a("boolean")};w.typeOf=function(t,e,r){new _(t,r,w.typeOf,!0).to.be.a(e)};w.notTypeOf=function(t,e,r){new _(t,r,w.notTypeOf,!0).to.not.be.a(e)};w.instanceOf=function(t,e,r){new _(t,r,w.instanceOf,!0).to.be.instanceOf(e)};w.notInstanceOf=function(t,e,r){new _(t,r,w.notInstanceOf,!0).to.not.be.instanceOf(e)};w.include=function(t,e,r){new _(t,r,w.include,!0).include(e)};w.notInclude=function(t,e,r){new _(t,r,w.notInclude,!0).not.include(e)};w.deepInclude=function(t,e,r){new _(t,r,w.deepInclude,!0).deep.include(e)};w.notDeepInclude=function(t,e,r){new _(t,r,w.notDeepInclude,!0).not.deep.include(e)};w.nestedInclude=function(t,e,r){new _(t,r,w.nestedInclude,!0).nested.include(e)};w.notNestedInclude=function(t,e,r){new _(t,r,w.notNestedInclude,!0).not.nested.include(e)};w.deepNestedInclude=function(t,e,r){new _(t,r,w.deepNestedInclude,!0).deep.nested.include(e)};w.notDeepNestedInclude=function(t,e,r){new _(t,r,w.notDeepNestedInclude,!0).not.deep.nested.include(e)};w.ownInclude=function(t,e,r){new _(t,r,w.ownInclude,!0).own.include(e)};w.notOwnInclude=function(t,e,r){new _(t,r,w.notOwnInclude,!0).not.own.include(e)};w.deepOwnInclude=function(t,e,r){new _(t,r,w.deepOwnInclude,!0).deep.own.include(e)};w.notDeepOwnInclude=function(t,e,r){new _(t,r,w.notDeepOwnInclude,!0).not.deep.own.include(e)};w.match=function(t,e,r){new _(t,r,w.match,!0).to.match(e)};w.notMatch=function(t,e,r){new _(t,r,w.notMatch,!0).to.not.match(e)};w.property=function(t,e,r){new _(t,r,w.property,!0).to.have.property(e)};w.notProperty=function(t,e,r){new _(t,r,w.notProperty,!0).to.not.have.property(e)};w.propertyVal=function(t,e,r,n){new _(t,n,w.propertyVal,!0).to.have.property(e,r)};w.notPropertyVal=function(t,e,r,n){new _(t,n,w.notPropertyVal,!0).to.not.have.property(e,r)};w.deepPropertyVal=function(t,e,r,n){new _(t,n,w.deepPropertyVal,!0).to.have.deep.property(e,r)};w.notDeepPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};w.ownProperty=function(t,e,r){new _(t,r,w.ownProperty,!0).to.have.own.property(e)};w.notOwnProperty=function(t,e,r){new _(t,r,w.notOwnProperty,!0).to.not.have.own.property(e)};w.ownPropertyVal=function(t,e,r,n){new _(t,n,w.ownPropertyVal,!0).to.have.own.property(e,r)};w.notOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};w.deepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};w.notDeepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};w.nestedProperty=function(t,e,r){new _(t,r,w.nestedProperty,!0).to.have.nested.property(e)};w.notNestedProperty=function(t,e,r){new _(t,r,w.notNestedProperty,!0).to.not.have.nested.property(e)};w.nestedPropertyVal=function(t,e,r,n){new _(t,n,w.nestedPropertyVal,!0).to.have.nested.property(e,r)};w.notNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};w.deepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};w.notDeepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};w.lengthOf=function(t,e,r){new _(t,r,w.lengthOf,!0).to.have.lengthOf(e)};w.hasAnyKeys=function(t,e,r){new _(t,r,w.hasAnyKeys,!0).to.have.any.keys(e)};w.hasAllKeys=function(t,e,r){new _(t,r,w.hasAllKeys,!0).to.have.all.keys(e)};w.containsAllKeys=function(t,e,r){new _(t,r,w.containsAllKeys,!0).to.contain.all.keys(e)};w.doesNotHaveAnyKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};w.doesNotHaveAllKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};w.hasAnyDeepKeys=function(t,e,r){new _(t,r,w.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};w.hasAllDeepKeys=function(t,e,r){new _(t,r,w.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};w.containsAllDeepKeys=function(t,e,r){new _(t,r,w.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};w.doesNotHaveAnyDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};w.doesNotHaveAllDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};w.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new _(t,n,w.throws,!0).to.throw(e,r);return _e(i,"object")};w.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new _(t,n,w.doesNotThrow,!0).to.not.throw(e,r)};w.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new ze(n+'Invalid operator "'+e+'"',void 0,w.operator)}var o=new _(i,n,w.operator,!0);o.assert(_e(o,"object")===!0,"expected "+Ue(t)+" to be "+e+" "+Ue(r),"expected "+Ue(t)+" to not be "+e+" "+Ue(r))};w.closeTo=function(t,e,r,n){new _(t,n,w.closeTo,!0).to.be.closeTo(e,r)};w.approximately=function(t,e,r,n){new _(t,n,w.approximately,!0).to.be.approximately(e,r)};w.sameMembers=function(t,e,r){new _(t,r,w.sameMembers,!0).to.have.same.members(e)};w.notSameMembers=function(t,e,r){new _(t,r,w.notSameMembers,!0).to.not.have.same.members(e)};w.sameDeepMembers=function(t,e,r){new _(t,r,w.sameDeepMembers,!0).to.have.same.deep.members(e)};w.notSameDeepMembers=function(t,e,r){new _(t,r,w.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};w.sameOrderedMembers=function(t,e,r){new _(t,r,w.sameOrderedMembers,!0).to.have.same.ordered.members(e)};w.notSameOrderedMembers=function(t,e,r){new _(t,r,w.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};w.sameDeepOrderedMembers=function(t,e,r){new _(t,r,w.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};w.notSameDeepOrderedMembers=function(t,e,r){new _(t,r,w.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};w.includeMembers=function(t,e,r){new _(t,r,w.includeMembers,!0).to.include.members(e)};w.notIncludeMembers=function(t,e,r){new _(t,r,w.notIncludeMembers,!0).to.not.include.members(e)};w.includeDeepMembers=function(t,e,r){new _(t,r,w.includeDeepMembers,!0).to.include.deep.members(e)};w.notIncludeDeepMembers=function(t,e,r){new _(t,r,w.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};w.includeOrderedMembers=function(t,e,r){new _(t,r,w.includeOrderedMembers,!0).to.include.ordered.members(e)};w.notIncludeOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};w.includeDeepOrderedMembers=function(t,e,r){new _(t,r,w.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};w.notIncludeDeepOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};w.oneOf=function(t,e,r){new _(t,r,w.oneOf,!0).to.be.oneOf(e)};w.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Ue(t)} to be an iterable`:`expected ${Ue(t)} to be an iterable`,new ze(e,void 0,w.isIterable)};w.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.changes,!0).to.change(e,r)};w.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesBy,!0).to.change(e,r).by(n)};w.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotChange,!0).to.not.change(e,r)};w.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesButNotBy,!0).to.change(e,r).but.not.by(n)};w.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.increases,!0).to.increase(e,r)};w.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesBy,!0).to.increase(e,r).by(n)};w.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotIncrease,!0).to.not.increase(e,r)};w.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};w.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.decreases,!0).to.decrease(e,r)};w.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesBy,!0).to.decrease(e,r).by(n)};w.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotDecrease,!0).to.not.decrease(e,r)};w.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new _(t,i,w.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};w.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};w.ifError=function(t){if(t)throw t};w.isExtensible=function(t,e){new _(t,e,w.isExtensible,!0).to.be.extensible};w.isNotExtensible=function(t,e){new _(t,e,w.isNotExtensible,!0).to.not.be.extensible};w.isSealed=function(t,e){new _(t,e,w.isSealed,!0).to.be.sealed};w.isNotSealed=function(t,e){new _(t,e,w.isNotSealed,!0).to.not.be.sealed};w.isFrozen=function(t,e){new _(t,e,w.isFrozen,!0).to.be.frozen};w.isNotFrozen=function(t,e){new _(t,e,w.isNotFrozen,!0).to.not.be.frozen};w.isEmpty=function(t,e){new _(t,e,w.isEmpty,!0).to.be.empty};w.isNotEmpty=function(t,e){new _(t,e,w.isNotEmpty,!0).to.not.be.empty};C(function t(e,r){return w[r]=w[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var A1=[];function uX(t){let e={AssertionError:ze,util:hy,config:kr,expect:by,assert:w,Assertion:_,...TC};return~A1.indexOf(t)||(t(e,hy),A1.push(t)),e}C(uX,"use");var Hp=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new W(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new W(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new W(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var SC=gr(require("node:path"),1),Fy=class{get uri(){return this._uri}get filename(){return SC.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new W(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof pe?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Hp(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new pe(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let a=n+1;a<i;a++)o.push(this._lines[a]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof W))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new W(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof pe))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new pe(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new bw(n)}}};function mX(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var bw=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=mX(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new ww(i,e-a)}},ww=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var Cy=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Vp;this.onDidChangeActiveTextEditor=Vp;this.onDidChangeVisibleTextEditors=Vp;this.onDidChangeTextEditorSelection=Vp;this.onDidChangeTextEditorVisibleRanges=Vp;this.configuration=new dp,this.keyValueStore=new mp,this.messages=new hp,this.clipboard=new up(this.client),this.capabilities=new Gg,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await oF(this.client);this.assetsRoot_=_w.default.join(e,"assets"),this.cursorlessNeovimPath=_w.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return v1()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return hF(e)}onDidOpenTextDocument(e,r,n){return gF(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let a,l;e?(a=[],l=[]):(a=await qg(r,this.client),l=await iF(r,this.client,i));let p=this.toNeovimEditor(r,n,i,l,a);return qr().emitEvent("onDidOpenTextDocument",p.document),p}toNeovimEditor(e,r,n,i,o){let a=this.getTextDocument(r),l=this.getTextEditor(e);return a?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),a.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),a=new Fy(vF.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,a)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,a)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new Qg(pM(),this.client,this,e,a,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){pF(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,vC.pull)(this.disposables,...e)}};function Vp(){return{dispose(){}}}var Oy=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var gX=BigInt(1e9);function bC(t,e=BigInt(1e6)){return Number(t*e/gX)/Number(e)}async function Ny(t,e=[],r=[],n,i,o,a,l){let p={documentContents:n.document.getText(),selections:n.selections.map(Fk)};o!=null&&(p.marks=o),l!=null&&(p.metadata=l),e.includes("clipboard")||(p.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(p.visibleRanges=n.visibleRanges.map(il));for(let u of ma){let d=t?.get(u),m=`${u}Mark`;d!=null&&!e.includes(m)&&(p[m]=d.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let u=a?.startTimestamp;if(u==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-u;p.timeOffsetSeconds=bC(d)}return p}var yX=gr(Rl(),1);function wC(t,e,r,n,i,o,a,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:a,scopeProvider:o,takeSnapshot(p,u,d,m,g){return Ny(e,p,u,d,m,g,void 0,void 0)},setStoredTarget(p,u,d){e.set(u,d?.map(m=>eF(p,m)))},hatTokenMap:r,runIntegrationTests:l}}async function _C(t,e,r,n){let i={[iT]:async(...o)=>{(await t.mode).mode==="t"&&cF(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),p=Ff(o);if(await n.getFocusedElementType()==="terminal"&&Xo(p)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&lF(t)}return l}catch(l){if(e.runMode!=="test"){let p=l;console.error(p.stack),e.handleCommandError(p)}throw l}},"cursorless.repeatPreviousCommand":Pe,"cursorless.showCheatsheet":Pe,"cursorless.internal.updateCheatsheetDefaults":Pe,"cursorless.recordTestCase":Pe,"cursorless.recordOneTestCaseThenPause":Pe,"cursorless.pauseRecording":Pe,"cursorless.resumeRecording":Pe,"cursorless.takeSnapshot":Pe,"cursorless.recordScopeTests.showUnimplementedFacets":Pe,"cursorless.recordScopeTests.saveActiveDocument":Pe,"cursorless.showQuickPick":Pe,"cursorless.showDocumentation":Pe,"cursorless.showInstallationDependencies":Pe,"cursorless.migrateSnippets":Pe,"cursorless.private.logQuickActions":Pe,"cursorless.toggleDecorations":Pe,"cursorless.recomputeDecorationStyles":Pe,"cursorless.showScopeVisualizer":Pe,"cursorless.hideScopeVisualizer":Pe,"cursorless.analyzeCommandHistory":Pe,"cursorless.keyboard.escape":Pe,"cursorless.keyboard.targeted.targetHat":Pe,"cursorless.keyboard.targeted.targetScope":Pe,"cursorless.keyboard.targeted.targetSelection":Pe,"cursorless.keyboard.targeted.clearTarget":Pe,"cursorless.keyboard.targeted.runActionOnTarget":Pe,"cursorless.keyboard.modal.modeOn":Pe,"cursorless.keyboard.modal.modeOff":Pe,"cursorless.keyboard.modal.modeToggle":Pe,"cursorless.keyboard.undoTarget":Pe,"cursorless.keyboard.redoTarget":Pe,"cursorless.tutorial.start":Pe,"cursorless.tutorial.next":Pe,"cursorless.tutorial.previous":Pe,"cursorless.tutorial.restart":Pe,"cursorless.tutorial.resume":Pe,"cursorless.tutorial.list":Pe,"cursorless.documentationOpened":Pe};Object.entries(i).map(([o,a])=>qr().registerCommand(o,a))}async function Pe(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function EC(t){let e=t.nvim,r=new Cy(e);await r.init();let n=r.runMode==="production"?r:new bf(r,new Tf,r.runMode==="test",void 0),i=new Ou,o=new Oy(e),a=r.runMode==="test"?i:o,{commandApi:l,storedTargets:p,hatTokenMap:u,scopeProvider:d,injectIde:m,runIntegrationTests:g}=await JI({ide:n,commandServerApi:a});await _C(e,r,l,a);let x={testHelpers:r.runMode==="test"?wC(i,p,u,r,n,d,m,g):void 0};qr().registerExtensionApi(rF,x),console.log("activate(): Cursorless extension loaded")}function RC(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await xX(t),{sync:!1})}async function xX(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await EC(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
