"use strict";var gB=Object.create;var Rp=Object.defineProperty;var hB=Object.getOwnPropertyDescriptor;var yB=Object.getOwnPropertyNames;var TB=Object.getPrototypeOf,xB=Object.prototype.hasOwnProperty;var Ga=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),U_=(t,e)=>{for(var r in e)Rp(t,r,{get:e[r],enumerable:!0})},H_=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of yB(e))!xB.call(t,i)&&i!==r&&Rp(t,i,{get:()=>e[i],enumerable:!(n=hB(e,i))||n.enumerable});return t};var Nr=(t,e,r)=>(r=t!=null?gB(TB(t)):{},H_(e||!t||!t.__esModule?Rp(r,"default",{value:t,enumerable:!0}):r,t)),SB=t=>H_(Rp({},"__esModule",{value:!0}),t);var MA=Ga((PA,Vm)=>{(function(t,e){typeof Vm=="object"&&Vm.exports?Vm.exports=e():t.nearley=e()})(PA,function(){function t(u,m,d){return this.id=++t.highestId,this.name=u,this.symbols=m,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(u){var m=typeof u>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,u).map(l).join(" ")+" \u25CF "+this.symbols.slice(u).map(l).join(" ");return this.name+" \u2192 "+m};function e(u,m,d,g){this.rule=u,this.dot=m,this.reference=d,this.data=[],this.wantedBy=g,this.isComplete=this.dot===u.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(u){var m=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return m.left=this,m.right=u,m.isComplete&&(m.data=m.build(),m.right=void 0),m},e.prototype.build=function(){var u=[],m=this;do u.push(m.right.data),m=m.left;while(m.left);return u.reverse(),u},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(u,m){this.grammar=u,this.index=m,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(u){for(var m=this.states,d=this.wants,g=this.completed,y=0;y<m.length;y++){var x=m[y];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var w=x.wantedBy,E=w.length;E--;){var U=w[E];this.complete(U,x)}if(x.reference===this.index){var V=x.rule.name;(this.completed[V]=this.completed[V]||[]).push(x)}}}else{var V=x.rule.symbols[x.dot];if(typeof V!="string"){this.scannable.push(x);continue}if(d[V]){if(d[V].push(x),g.hasOwnProperty(V))for(var z=g[V],E=0;E<z.length;E++){var ne=z[E];this.complete(x,ne)}}else d[V]=[x],this.predict(V)}}},r.prototype.predict=function(u){for(var m=this.grammar.byName[u]||[],d=0;d<m.length;d++){var g=m[d],y=this.wants[u],x=new e(g,0,this.index,y);this.states.push(x)}},r.prototype.complete=function(u,m){var d=u.nextState(m);this.states.push(d)};function n(u,m){this.rules=u,this.start=m||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(g){d.hasOwnProperty(g.name)||(d[g.name]=[]),d[g.name].push(g)})}n.fromCompiled=function(g,m){var d=g.Lexer;g.ParserStart&&(m=g.ParserStart,g=g.ParserRules);var g=g.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),y=new n(g,m);return y.lexer=d,y};function i(){this.reset("")}i.prototype.reset=function(u,m){this.buffer=u,this.index=0,this.line=m?m.line:1,this.lastLineBreak=m?-m.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var u=this.buffer[this.index++];return u===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:u}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(u,m){var d=this.buffer;if(typeof d=="string"){var g=d.split(`
`).slice(Math.max(0,this.line-5),this.line),y=d.indexOf(`
`,this.index);y===-1&&(y=d.length);var x=this.index-this.lastLineBreak,w=String(this.line).length;return m+=" at line "+this.line+" col "+x+`:

`,m+=g.map(function(U,V){return E(this.line-g.length+V+1,w)+" "+U},this).join(`
`),m+=`
`+E("",w+x)+`^
`,m}else return m+" at index "+(this.index-1);function E(U,V){var z=String(U);return Array(V-z.length+1).join(" ")+z}};function o(u,m,d){if(u instanceof n)var g=u,d=m;else var g=n.fromCompiled(u,m);this.grammar=g,this.options={keepHistory:!1,lexer:g.lexer||new i};for(var y in d||{})this.options[y]=d[y];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(g,0),w=this.table=[x];x.wants[g.start]=[],x.predict(g.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(u){var m=this.lexer;m.reset(u,this.lexerState);for(var d;;){try{if(d=m.next(),!d)break}catch(fe){var w=new r(this.grammar,this.current+1);this.table.push(w);var g=new Error(this.reportLexerError(fe));throw g.offset=this.current,g.token=fe.token,g}var y=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,w=new r(this.grammar,x);this.table.push(w);for(var E=d.text!==void 0?d.text:d.value,U=m.constructor===i?d.value:m.transform?.(d)??d,V=y.scannable,z=V.length;z--;){var ne=V[z],se=ne.rule.symbols[ne.dot];if(se.test?se.test(U):se.type?se.type===d.type:se.literal===E){var ce=ne.nextState({data:U,token:d,isToken:!0,reference:x-1});w.states.push(ce)}}if(w.process(),w.states.length===0){var g=new Error(this.reportError(d));throw g.offset=this.current,g.token=d,g}this.options.keepHistory&&(y.lexerState=m.save()),this.current++}return y&&(this.lexerState=m.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(u){var m,d,g=u.token;return g?(m="input "+JSON.stringify(g.text[0])+" (lexer error)",d=this.lexer.formatError(g,"Syntax error")):(m="input (lexer error)",d=u.message),this.reportErrorCommon(d,m)},o.prototype.reportError=function(u){var m=(u.type?u.type+" token: ":"")+JSON.stringify(u.value!==void 0?u.value:u),d=this.lexer.formatError(u,"Syntax error");return this.reportErrorCommon(d,m)},o.prototype.reportErrorCommon=function(u,m){var d=[];d.push(u);var g=this.table.length-2,y=this.table[g],x=y.states.filter(function(E){var U=E.rule.symbols[E.dot];return U&&typeof U!="string"});if(x.length===0)d.push("Unexpected "+m+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(y.states,d);else{d.push("Unexpected "+m+`. Instead, I was expecting to see one of the following:
`);var w=x.map(function(E){return this.buildFirstStateStack(E,[])||[E]},this);w.forEach(function(E){var U=E[0],V=U.rule.symbols[U.dot],z=this.getSymbolDisplay(V);d.push("A "+z+" based on:"),this.displayStateStack(E,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(u,m){for(var d,g=0,y=0;y<u.length;y++){var x=u[y],w=x.rule.toString(x.dot);w===d?g++:(g>0&&m.push("    ^ "+g+" more lines identical to this"),g=0,m.push("    "+w)),d=w}},o.prototype.getSymbolDisplay=function(u){return s(u)},o.prototype.buildFirstStateStack=function(u,m){if(m.indexOf(u)!==-1)return null;if(u.wantedBy.length===0)return[u];var d=u.wantedBy[0],g=[u].concat(m),y=this.buildFirstStateStack(d,g);return y===null?null:[u].concat(y)},o.prototype.save=function(){var u=this.table[this.current];return u.lexerState=this.lexerState,u},o.prototype.restore=function(u){var m=u.index;this.current=m,this.table[m]=u,this.table.splice(m+1),this.lexerState=u.lexerState,this.results=this.finish()},o.prototype.rewind=function(u){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[u])},o.prototype.finish=function(){var u=[],m=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(g){g.rule.name===m&&g.dot===g.rule.symbols.length&&g.reference===0&&g.data!==o.fail&&u.push(g)}),u.map(function(g){return g.data})};function s(u){var m=typeof u;if(m==="string")return u;if(m==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return"character matching "+u;if(u.type)return u.type+" token";if(u.test)return"token matching "+String(u.test);throw new Error("Unknown symbol type: "+u)}}function l(u){var m=typeof u;if(m==="string")return u;if(m==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return u.toString();if(u.type)return"%"+u.type;if(u.test)return"<"+String(u.test)+">";throw new Error("Unknown symbol type: "+u)}}return{Parser:o,Grammar:n,Rule:t}})});var OA=Ga((CA,jm)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof jm=="object"&&jm.exports?jm.exports=e():t.moo=e()})(CA,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(H){return H&&e.call(H)==="[object RegExp]"}function i(H){return H&&typeof H=="object"&&!n(H)&&!Array.isArray(H)}function o(H){return H.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(H){var C=new RegExp("|"+H);return C.exec("").length-1}function l(H){return"("+H+")"}function u(H){if(!H.length)return"(?!)";var C=H.map(function(A){return"(?:"+A+")"}).join("|");return"(?:"+C+")"}function m(H){if(typeof H=="string")return"(?:"+o(H)+")";if(n(H)){if(H.ignoreCase)throw new Error("RegExp /i flag not allowed");if(H.global)throw new Error("RegExp /g flag is implied");if(H.sticky)throw new Error("RegExp /y flag is implied");if(H.multiline)throw new Error("RegExp /m flag is implied");return H.source}else throw new Error("Not a pattern: "+H)}function d(H,C){return H.length>C?H:Array(C-H.length+1).join(" ")+H}function g(H,C){for(var A=H.length,q=0;;){var Z=H.lastIndexOf(`
`,A-1);if(Z===-1||(q++,A=Z,q===C)||A===0)break}var L=q<C?0:A+1;return H.substring(L).split(`
`)}function y(H){for(var C=Object.getOwnPropertyNames(H),A=[],q=0;q<C.length;q++){var Z=C[q],L=H[Z],N=[].concat(L);if(Z==="include"){for(var j=0;j<N.length;j++)A.push({include:N[j]});continue}var X=[];N.forEach(function(Q){i(Q)?(X.length&&A.push(w(Z,X)),A.push(w(Z,Q)),X=[]):X.push(Q)}),X.length&&A.push(w(Z,X))}return A}function x(H){for(var C=[],A=0;A<H.length;A++){var q=H[A];if(q.include){for(var Z=[].concat(q.include),L=0;L<Z.length;L++)C.push({include:Z[L]});continue}if(!q.type)throw new Error("Rule has no type: "+JSON.stringify(q));C.push(w(q.type,q))}return C}function w(H,C){if(i(C)||(C={match:C}),C.include)throw new Error("Matching rules cannot also include states");var A={defaultType:H,lineBreaks:!!C.error||!!C.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var q in C)t.call(C,q)&&(A[q]=C[q]);if(typeof A.type=="string"&&H!==A.type)throw new Error("Type transform cannot be a string (type '"+A.type+"' for token '"+H+"')");var Z=A.match;return A.match=Array.isArray(Z)?Z:Z?[Z]:[],A.match.sort(function(L,N){return n(L)&&n(N)?0:n(N)?-1:n(L)?1:N.length-L.length}),A}function E(H){return Array.isArray(H)?x(H):y(H)}var U=w("error",{lineBreaks:!0,shouldThrow:!0});function V(H,C){for(var A=null,q=Object.create(null),Z=!0,L=null,N=[],j=[],X=0;X<H.length;X++)H[X].fallback&&(Z=!1);for(var X=0;X<H.length;X++){var Q=H[X];if(Q.include)throw new Error("Inheritance is not allowed in stateless lexers");if(Q.error||Q.fallback){if(A)throw!Q.fallback==!A.fallback?new Error("Multiple "+(Q.fallback?"fallback":"error")+" rules not allowed (for token '"+Q.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+Q.defaultType+"')");A=Q}var te=Q.match.slice();if(Z)for(;te.length&&typeof te[0]=="string"&&te[0].length===1;){var xe=te.shift();q[xe.charCodeAt(0)]=Q}if(Q.pop||Q.push||Q.next){if(!C)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+Q.defaultType+"')");if(Q.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+Q.defaultType+"')")}if(te.length!==0){Z=!1,N.push(Q);for(var be=0;be<te.length;be++){var qe=te[be];if(n(qe)){if(L===null)L=qe.unicode;else if(L!==qe.unicode&&Q.fallback===!1)throw new Error("If one rule is /u then all must be")}}var Ce=u(te.map(m)),ft=new RegExp(Ce);if(ft.test(""))throw new Error("RegExp matches empty string: "+ft);var Vt=s(Ce);if(Vt>0)throw new Error("RegExp has capture groups: "+ft+`
Use (?: \u2026 ) instead`);if(!Q.lineBreaks&&ft.test(`
`))throw new Error("Rule should declare lineBreaks: "+ft);j.push(l(Ce))}}var Yr=A&&A.fallback,Do=r&&!Yr?"ym":"gm",ci=r||Yr?"":"|";L===!0&&(Do+="u");var Fa=new RegExp(u(j)+ci,Do);return{regexp:Fa,groups:N,fast:q,error:A||U}}function z(H){var C=V(E(H));return new fe({start:C},"start")}function ne(H,C,A){var q=H&&(H.push||H.next);if(q&&!A[q])throw new Error("Missing state '"+q+"' (in token '"+H.defaultType+"' of state '"+C+"')");if(H&&H.pop&&+H.pop!=1)throw new Error("pop must be 1 (in token '"+H.defaultType+"' of state '"+C+"')")}function se(H,C){var A=H.$all?E(H.$all):[];delete H.$all;var q=Object.getOwnPropertyNames(H);C||(C=q[0]);for(var Z=Object.create(null),L=0;L<q.length;L++){var N=q[L];Z[N]=E(H[N]).concat(A)}for(var L=0;L<q.length;L++)for(var N=q[L],j=Z[N],X=Object.create(null),Q=0;Q<j.length;Q++){var te=j[Q];if(te.include){var xe=[Q,1];if(te.include!==N&&!X[te.include]){X[te.include]=!0;var be=Z[te.include];if(!be)throw new Error("Cannot include nonexistent state '"+te.include+"' (in state '"+N+"')");for(var qe=0;qe<be.length;qe++){var Ce=be[qe];j.indexOf(Ce)===-1&&xe.push(Ce)}}j.splice.apply(j,xe),Q--}}for(var ft=Object.create(null),L=0;L<q.length;L++){var N=q[L];ft[N]=V(Z[N],!0)}for(var L=0;L<q.length;L++){for(var Vt=q[L],Yr=ft[Vt],Do=Yr.groups,Q=0;Q<Do.length;Q++)ne(Do[Q],Vt,ft);for(var ci=Object.getOwnPropertyNames(Yr.fast),Q=0;Q<ci.length;Q++)ne(Yr.fast[ci[Q]],Vt,ft)}return new fe(ft,C)}function ce(H){for(var C=typeof Map<"u",A=C?new Map:Object.create(null),q=Object.getOwnPropertyNames(H),Z=0;Z<q.length;Z++){var L=q[Z],N=H[L],j=Array.isArray(N)?N:[N];j.forEach(function(X){if(typeof X!="string")throw new Error("keyword must be string (in keyword '"+L+"')");C?A.set(X,L):A[X]=L})}return function(X){return C?A.get(X):A[X]}}var fe=function(H,C){this.startState=C,this.states=H,this.buffer="",this.stack=[],this.reset()};fe.prototype.reset=function(H,C){return this.buffer=H||"",this.index=0,this.line=C?C.line:1,this.col=C?C.col:1,this.queuedToken=C?C.queuedToken:null,this.queuedText=C?C.queuedText:"",this.queuedThrow=C?C.queuedThrow:null,this.setState(C?C.state:this.startState),this.stack=C&&C.stack?C.stack.slice():[],this},fe.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},fe.prototype.setState=function(H){if(!(!H||this.state===H)){this.state=H;var C=this.states[H];this.groups=C.groups,this.error=C.error,this.re=C.regexp,this.fast=C.fast}},fe.prototype.popState=function(){this.setState(this.stack.pop())},fe.prototype.pushState=function(H){this.stack.push(this.state),this.setState(H)};var ct=r?function(H,C){return H.exec(C)}:function(H,C){var A=H.exec(C);return A[0].length===0?null:A};fe.prototype._getGroup=function(H){for(var C=this.groups.length,A=0;A<C;A++)if(H[A+1]!==void 0)return this.groups[A];throw new Error("Cannot find token type for matched text")};function Bt(){return this.value}if(fe.prototype.next=function(){var H=this.index;if(this.queuedGroup){var C=this._token(this.queuedGroup,this.queuedText,H);return this.queuedGroup=null,this.queuedText="",C}var A=this.buffer;if(H!==A.length){var N=this.fast[A.charCodeAt(H)];if(N)return this._token(N,A.charAt(H),H);var q=this.re;q.lastIndex=H;var Z=ct(q,A),L=this.error;if(Z==null)return this._token(L,A.slice(H,A.length),H);var N=this._getGroup(Z),j=Z[0];return L.fallback&&Z.index!==H?(this.queuedGroup=N,this.queuedText=j,this._token(L,A.slice(H,Z.index),H)):this._token(N,j,H)}},fe.prototype._token=function(H,C,A){var q=0;if(H.lineBreaks){var Z=/\n/g,L=1;if(C===`
`)q=1;else for(;Z.exec(C);)q++,L=Z.lastIndex}var N={type:typeof H.type=="function"&&H.type(C)||H.defaultType,value:typeof H.value=="function"?H.value(C):C,text:C,toString:Bt,offset:A,lineBreaks:q,line:this.line,col:this.col},j=C.length;if(this.index+=j,this.line+=q,q!==0?this.col=j-L+1:this.col+=j,H.shouldThrow){var X=new Error(this.formatError(N,"invalid syntax"));throw X}return H.pop?this.popState():H.push?this.pushState(H.push):H.next&&this.setState(H.next),N},typeof Symbol<"u"&&Symbol.iterator){var mt=function(H){this.lexer=H};mt.prototype.next=function(){var H=this.lexer.next();return{value:H,done:!H}},mt.prototype[Symbol.iterator]=function(){return this},fe.prototype[Symbol.iterator]=function(){return new mt(this)}}return fe.prototype.formatError=function(H,C){if(H==null)var A=this.buffer.slice(this.index),H={text:A,offset:this.index,lineBreaks:A.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var q=2,Z=Math.max(H.line-q,1),L=H.line+q,N=String(L).length,j=g(this.buffer,this.line-H.line+q+1).slice(0,5),X=[];X.push(C+" at line "+H.line+" col "+H.col+":"),X.push("");for(var Q=0;Q<j.length;Q++){var te=j[Q],xe=Z+Q;X.push(d(String(xe),N)+"  "+te),xe===H.line&&X.push(d("",N+H.col+1)+"^")}return X.join(`
`)},fe.prototype.clone=function(){return new fe(this.states,this.state)},fe.prototype.has=function(H){return!0},{compile:z,states:se,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ce}})});var bl=Ga((Kn,MP)=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});function Mn(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var o9=typeof process=="object"&&process.env.NODE_ENV==="production";function mn(t,e){if(!t)throw o9?new Error("Invariant failed"):new Error(e())}Kn.invariant=mn;var SS=Object.prototype.hasOwnProperty,a9=Array.prototype.splice,s9=Object.prototype.toString;function aa(t){return s9.call(t).slice(8,-1)}var vf=Object.assign||function(t,e){return vS(e).forEach(function(r){SS.call(e,r)&&(t[r]=e[r])}),t},vS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function fo(t){return Array.isArray(t)?vf(t.constructor(t.length),t):aa(t)==="Map"?new Map(t):aa(t)==="Set"?new Set(t):t&&typeof t=="object"?vf(Object.create(Object.getPrototypeOf(t)),t):t}var AP=function(){function t(){this.commands=vf({},c9),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||mn(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),mn(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return vS(i).forEach(function(s){if(SS.call(n.commands,s)){var l=e===o;o=n.commands[s](i[s],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var u=aa(e)==="Map"?n.update(e.get(s),i[s]):n.update(e[s],i[s]),m=aa(o)==="Map"?o.get(s):o[s];(!n.isEquals(u,m)||typeof u>"u"&&!SS.call(e,s))&&(o===e&&(o=fo(e)),aa(o)==="Map"?o.set(s,u):o[s]=u)}}),o},t}();Kn.Context=AP;var c9={$push:function(t,e,r){return RP(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return RP(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return l9(e,r),t.forEach(function(i){PP(i),e===n&&i.length&&(e=fo(n)),a9.apply(e,i)}),e},$set:function(t,e,r){return p9(r),t},$toggle:function(t,e){vl(t,"$toggle");var r=t.length?fo(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return vl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=fo(n)),delete e[i])}),e},$add:function(t,e,r,n){return kP(e,"$add"),vl(t,"$add"),aa(e)==="Map"?t.forEach(function(i){var o=i[0],s=i[1];e===n&&e.get(o)!==s&&(e=fo(n)),e.set(o,s)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=fo(n)),e.add(i)}),e},$remove:function(t,e,r,n){return kP(e,"$remove"),vl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=fo(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return m9(e,t),vS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=fo(n)),e[i]=t[i])}),e},$apply:function(t,e){return u9(t),t(e)}},bS=new AP;Kn.isEquals=bS.update.isEquals;Kn.extend=bS.extend;Kn.default=bS.update;Kn.default.default=MP.exports=vf(Kn.default,Kn);function RP(t,e,r){mn(Array.isArray(t),function(){return"update(): expected target of "+Mn(r)+" to be an array; got "+Mn(t)+"."}),vl(e[r],r)}function vl(t,e){mn(Array.isArray(t),function(){return"update(): expected spec of "+Mn(e)+" to be an array; got "+Mn(t)+". Did you forget to wrap your parameter in an array?"})}function l9(t,e){mn(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+Mn(t)}),PP(e.$splice)}function PP(t){mn(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+Mn(t)+". Did you forget to wrap your parameters in an array?"})}function u9(t){mn(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+Mn(t)+"."})}function p9(t){mn(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function m9(t,e){mn(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+Mn(e)}),mn(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+Mn(t)})}function kP(t,e){var r=aa(t);mn(r==="Map"||r==="Set",function(){return"update(): "+Mn(e)+" expects a target of type Set or Map; got "+Mn(r)})}});var Uv=Ga((lc,cu)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",m=1,d=2,g=4,y=1,x=2,w=1,E=2,U=4,V=8,z=16,ne=32,se=64,ce=128,fe=256,ct=512,Bt=30,mt="...",H=800,C=16,A=1,q=2,Z=3,L=1/0,N=9007199254740991,j=17976931348623157e292,X=NaN,Q=4294967295,te=Q-1,xe=Q>>>1,be=[["ary",ce],["bind",w],["bindKey",E],["curry",V],["curryRight",z],["flip",ct],["partial",ne],["partialRight",se],["rearg",fe]],qe="[object Arguments]",Ce="[object Array]",ft="[object AsyncFunction]",Vt="[object Boolean]",Yr="[object Date]",Do="[object DOMException]",ci="[object Error]",Fa="[object Function]",sw="[object GeneratorFunction]",bn="[object Map]",_c="[object Number]",FI="[object Null]",li="[object Object]",cw="[object Promise]",LI="[object Proxy]",Rc="[object RegExp]",wn="[object Set]",kc="[object String]",Nu="[object Symbol]",II="[object Undefined]",Ac="[object WeakMap]",CI="[object WeakSet]",Pc="[object ArrayBuffer]",La="[object DataView]",Ry="[object Float32Array]",ky="[object Float64Array]",Ay="[object Int8Array]",Py="[object Int16Array]",My="[object Int32Array]",Dy="[object Uint8Array]",Fy="[object Uint8ClampedArray]",Ly="[object Uint16Array]",Iy="[object Uint32Array]",OI=/\b__p \+= '';/g,NI=/\b(__p \+=) '' \+/g,UI=/(__e\(.*?\)|\b__t\)) \+\n'';/g,lw=/&(?:amp|lt|gt|quot|#39);/g,uw=/[&<>"']/g,HI=RegExp(lw.source),BI=RegExp(uw.source),VI=/<%-([\s\S]+?)%>/g,WI=/<%([\s\S]+?)%>/g,pw=/<%=([\s\S]+?)%>/g,$I=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jI=/^\w*$/,zI=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Cy=/[\\^$.*+?()[\]{}|]/g,qI=RegExp(Cy.source),Oy=/^\s+/,GI=/\s/,KI=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,QI=/\{\n\/\* \[wrapped with (.+)\] \*/,YI=/,? & /,ZI=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,XI=/[()=,{}\[\]\/\s]/,JI=/\\(\\)?/g,eC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mw=/\w*$/,tC=/^[-+]0x[0-9a-f]+$/i,rC=/^0b[01]+$/i,nC=/^\[object .+?Constructor\]$/,iC=/^0o[0-7]+$/i,oC=/^(?:0|[1-9]\d*)$/,aC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Uu=/($^)/,sC=/['\n\r\u2028\u2029\\]/g,Hu="\\ud800-\\udfff",cC="\\u0300-\\u036f",lC="\\ufe20-\\ufe2f",uC="\\u20d0-\\u20ff",fw=cC+lC+uC,dw="\\u2700-\\u27bf",gw="a-z\\xdf-\\xf6\\xf8-\\xff",pC="\\xac\\xb1\\xd7\\xf7",mC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fC="\\u2000-\\u206f",dC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",hw="A-Z\\xc0-\\xd6\\xd8-\\xde",yw="\\ufe0e\\ufe0f",Tw=pC+mC+fC+dC,Ny="['\u2019]",gC="["+Hu+"]",xw="["+Tw+"]",Bu="["+fw+"]",Sw="\\d+",hC="["+dw+"]",vw="["+gw+"]",bw="[^"+Hu+Tw+Sw+dw+gw+hw+"]",Uy="\\ud83c[\\udffb-\\udfff]",yC="(?:"+Bu+"|"+Uy+")",ww="[^"+Hu+"]",Hy="(?:\\ud83c[\\udde6-\\uddff]){2}",By="[\\ud800-\\udbff][\\udc00-\\udfff]",Ia="["+hw+"]",Ew="\\u200d",_w="(?:"+vw+"|"+bw+")",TC="(?:"+Ia+"|"+bw+")",Rw="(?:"+Ny+"(?:d|ll|m|re|s|t|ve))?",kw="(?:"+Ny+"(?:D|LL|M|RE|S|T|VE))?",Aw=yC+"?",Pw="["+yw+"]?",xC="(?:"+Ew+"(?:"+[ww,Hy,By].join("|")+")"+Pw+Aw+")*",SC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Mw=Pw+Aw+xC,bC="(?:"+[hC,Hy,By].join("|")+")"+Mw,wC="(?:"+[ww+Bu+"?",Bu,Hy,By,gC].join("|")+")",EC=RegExp(Ny,"g"),_C=RegExp(Bu,"g"),Vy=RegExp(Uy+"(?="+Uy+")|"+wC+Mw,"g"),RC=RegExp([Ia+"?"+vw+"+"+Rw+"(?="+[xw,Ia,"$"].join("|")+")",TC+"+"+kw+"(?="+[xw,Ia+_w,"$"].join("|")+")",Ia+"?"+_w+"+"+Rw,Ia+"+"+kw,vC,SC,Sw,bC].join("|"),"g"),kC=RegExp("["+Ew+Hu+fw+yw+"]"),AC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,PC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],MC=-1,tt={};tt[Ry]=tt[ky]=tt[Ay]=tt[Py]=tt[My]=tt[Dy]=tt[Fy]=tt[Ly]=tt[Iy]=!0,tt[qe]=tt[Ce]=tt[Pc]=tt[Vt]=tt[La]=tt[Yr]=tt[ci]=tt[Fa]=tt[bn]=tt[_c]=tt[li]=tt[Rc]=tt[wn]=tt[kc]=tt[Ac]=!1;var et={};et[qe]=et[Ce]=et[Pc]=et[La]=et[Vt]=et[Yr]=et[Ry]=et[ky]=et[Ay]=et[Py]=et[My]=et[bn]=et[_c]=et[li]=et[Rc]=et[wn]=et[kc]=et[Nu]=et[Dy]=et[Fy]=et[Ly]=et[Iy]=!0,et[ci]=et[Fa]=et[Ac]=!1;var DC={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},FC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},LC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},IC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},CC=parseFloat,OC=parseInt,Dw=typeof global=="object"&&global&&global.Object===Object&&global,NC=typeof self=="object"&&self&&self.Object===Object&&self,Ft=Dw||NC||Function("return this")(),Wy=typeof lc=="object"&&lc&&!lc.nodeType&&lc,Fo=Wy&&typeof cu=="object"&&cu&&!cu.nodeType&&cu,Fw=Fo&&Fo.exports===Wy,$y=Fw&&Dw.process,Zr=function(){try{var P=Fo&&Fo.require&&Fo.require("util").types;return P||$y&&$y.binding&&$y.binding("util")}catch{}}(),Lw=Zr&&Zr.isArrayBuffer,Iw=Zr&&Zr.isDate,Cw=Zr&&Zr.isMap,Ow=Zr&&Zr.isRegExp,Nw=Zr&&Zr.isSet,Uw=Zr&&Zr.isTypedArray;function Dr(P,$,B){switch(B.length){case 0:return P.call($);case 1:return P.call($,B[0]);case 2:return P.call($,B[0],B[1]);case 3:return P.call($,B[0],B[1],B[2])}return P.apply($,B)}function UC(P,$,B,ae){for(var we=-1,Ge=P==null?0:P.length;++we<Ge;){var kt=P[we];$(ae,kt,B(kt),P)}return ae}function Xr(P,$){for(var B=-1,ae=P==null?0:P.length;++B<ae&&$(P[B],B,P)!==!1;);return P}function HC(P,$){for(var B=P==null?0:P.length;B--&&$(P[B],B,P)!==!1;);return P}function Hw(P,$){for(var B=-1,ae=P==null?0:P.length;++B<ae;)if(!$(P[B],B,P))return!1;return!0}function Ni(P,$){for(var B=-1,ae=P==null?0:P.length,we=0,Ge=[];++B<ae;){var kt=P[B];$(kt,B,P)&&(Ge[we++]=kt)}return Ge}function Vu(P,$){var B=P==null?0:P.length;return!!B&&Ca(P,$,0)>-1}function jy(P,$,B){for(var ae=-1,we=P==null?0:P.length;++ae<we;)if(B($,P[ae]))return!0;return!1}function it(P,$){for(var B=-1,ae=P==null?0:P.length,we=Array(ae);++B<ae;)we[B]=$(P[B],B,P);return we}function Ui(P,$){for(var B=-1,ae=$.length,we=P.length;++B<ae;)P[we+B]=$[B];return P}function zy(P,$,B,ae){var we=-1,Ge=P==null?0:P.length;for(ae&&Ge&&(B=P[++we]);++we<Ge;)B=$(B,P[we],we,P);return B}function BC(P,$,B,ae){var we=P==null?0:P.length;for(ae&&we&&(B=P[--we]);we--;)B=$(B,P[we],we,P);return B}function qy(P,$){for(var B=-1,ae=P==null?0:P.length;++B<ae;)if($(P[B],B,P))return!0;return!1}var VC=Gy("length");function WC(P){return P.split("")}function $C(P){return P.match(ZI)||[]}function Bw(P,$,B){var ae;return B(P,function(we,Ge,kt){if($(we,Ge,kt))return ae=Ge,!1}),ae}function Wu(P,$,B,ae){for(var we=P.length,Ge=B+(ae?1:-1);ae?Ge--:++Ge<we;)if($(P[Ge],Ge,P))return Ge;return-1}function Ca(P,$,B){return $===$?t1(P,$,B):Wu(P,Vw,B)}function jC(P,$,B,ae){for(var we=B-1,Ge=P.length;++we<Ge;)if(ae(P[we],$))return we;return-1}function Vw(P){return P!==P}function Ww(P,$){var B=P==null?0:P.length;return B?Qy(P,$)/B:X}function Gy(P){return function($){return $==null?t:$[P]}}function Ky(P){return function($){return P==null?t:P[$]}}function $w(P,$,B,ae,we){return we(P,function(Ge,kt,Je){B=ae?(ae=!1,Ge):$(B,Ge,kt,Je)}),B}function zC(P,$){var B=P.length;for(P.sort($);B--;)P[B]=P[B].value;return P}function Qy(P,$){for(var B,ae=-1,we=P.length;++ae<we;){var Ge=$(P[ae]);Ge!==t&&(B=B===t?Ge:B+Ge)}return B}function Yy(P,$){for(var B=-1,ae=Array(P);++B<P;)ae[B]=$(B);return ae}function qC(P,$){return it($,function(B){return[B,P[B]]})}function jw(P){return P&&P.slice(0,Kw(P)+1).replace(Oy,"")}function Fr(P){return function($){return P($)}}function Zy(P,$){return it($,function(B){return P[B]})}function Mc(P,$){return P.has($)}function zw(P,$){for(var B=-1,ae=P.length;++B<ae&&Ca($,P[B],0)>-1;);return B}function qw(P,$){for(var B=P.length;B--&&Ca($,P[B],0)>-1;);return B}function GC(P,$){for(var B=P.length,ae=0;B--;)P[B]===$&&++ae;return ae}var KC=Ky(DC),QC=Ky(FC);function YC(P){return"\\"+IC[P]}function ZC(P,$){return P==null?t:P[$]}function Oa(P){return kC.test(P)}function XC(P){return AC.test(P)}function JC(P){for(var $,B=[];!($=P.next()).done;)B.push($.value);return B}function Xy(P){var $=-1,B=Array(P.size);return P.forEach(function(ae,we){B[++$]=[we,ae]}),B}function Gw(P,$){return function(B){return P($(B))}}function Hi(P,$){for(var B=-1,ae=P.length,we=0,Ge=[];++B<ae;){var kt=P[B];(kt===$||kt===u)&&(P[B]=u,Ge[we++]=B)}return Ge}function $u(P){var $=-1,B=Array(P.size);return P.forEach(function(ae){B[++$]=ae}),B}function e1(P){var $=-1,B=Array(P.size);return P.forEach(function(ae){B[++$]=[ae,ae]}),B}function t1(P,$,B){for(var ae=B-1,we=P.length;++ae<we;)if(P[ae]===$)return ae;return-1}function r1(P,$,B){for(var ae=B+1;ae--;)if(P[ae]===$)return ae;return ae}function Na(P){return Oa(P)?i1(P):VC(P)}function En(P){return Oa(P)?o1(P):WC(P)}function Kw(P){for(var $=P.length;$--&&GI.test(P.charAt($)););return $}var n1=Ky(LC);function i1(P){for(var $=Vy.lastIndex=0;Vy.test(P);)++$;return $}function o1(P){return P.match(Vy)||[]}function a1(P){return P.match(RC)||[]}var s1=function P($){$=$==null?Ft:Bi.defaults(Ft.Object(),$,Bi.pick(Ft,PC));var B=$.Array,ae=$.Date,we=$.Error,Ge=$.Function,kt=$.Math,Je=$.Object,Jy=$.RegExp,c1=$.String,Jr=$.TypeError,ju=B.prototype,l1=Ge.prototype,Ua=Je.prototype,zu=$["__core-js_shared__"],qu=l1.toString,Ye=Ua.hasOwnProperty,u1=0,Qw=function(){var a=/[^.]+$/.exec(zu&&zu.keys&&zu.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Gu=Ua.toString,p1=qu.call(Je),m1=Ft._,f1=Jy("^"+qu.call(Ye).replace(Cy,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ku=Fw?$.Buffer:t,Vi=$.Symbol,Qu=$.Uint8Array,Yw=Ku?Ku.allocUnsafe:t,Yu=Gw(Je.getPrototypeOf,Je),Zw=Je.create,Xw=Ua.propertyIsEnumerable,Zu=ju.splice,Jw=Vi?Vi.isConcatSpreadable:t,Dc=Vi?Vi.iterator:t,Lo=Vi?Vi.toStringTag:t,Xu=function(){try{var a=Uo(Je,"defineProperty");return a({},"",{}),a}catch{}}(),d1=$.clearTimeout!==Ft.clearTimeout&&$.clearTimeout,g1=ae&&ae.now!==Ft.Date.now&&ae.now,h1=$.setTimeout!==Ft.setTimeout&&$.setTimeout,Ju=kt.ceil,ep=kt.floor,eT=Je.getOwnPropertySymbols,y1=Ku?Ku.isBuffer:t,eE=$.isFinite,T1=ju.join,x1=Gw(Je.keys,Je),At=kt.max,Zt=kt.min,S1=ae.now,v1=$.parseInt,tE=kt.random,b1=ju.reverse,tT=Uo($,"DataView"),Fc=Uo($,"Map"),rT=Uo($,"Promise"),Ha=Uo($,"Set"),Lc=Uo($,"WeakMap"),Ic=Uo(Je,"create"),tp=Lc&&new Lc,Ba={},w1=Ho(tT),E1=Ho(Fc),_1=Ho(rT),R1=Ho(Ha),k1=Ho(Lc),rp=Vi?Vi.prototype:t,Cc=rp?rp.valueOf:t,rE=rp?rp.toString:t;function T(a){if(dt(a)&&!Ee(a)&&!(a instanceof He)){if(a instanceof en)return a;if(Ye.call(a,"__wrapped__"))return n_(a)}return new en(a)}var Va=function(){function a(){}return function(c){if(!lt(c))return{};if(Zw)return Zw(c);a.prototype=c;var p=new a;return a.prototype=t,p}}();function np(){}function en(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:VI,evaluate:WI,interpolate:pw,variable:"",imports:{_:T}},T.prototype=np.prototype,T.prototype.constructor=T,en.prototype=Va(np.prototype),en.prototype.constructor=en;function He(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Q,this.__views__=[]}function A1(){var a=new He(this.__wrapped__);return a.__actions__=yr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=yr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=yr(this.__views__),a}function P1(){if(this.__filtered__){var a=new He(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function M1(){var a=this.__wrapped__.value(),c=this.__dir__,p=Ee(a),f=c<0,h=p?a.length:0,S=WO(0,h,this.__views__),_=S.start,R=S.end,D=R-_,G=f?R:_-1,K=this.__iteratees__,J=K.length,ie=0,me=Zt(D,this.__takeCount__);if(!p||!f&&h==D&&me==D)return RE(a,this.__actions__);var ye=[];e:for(;D--&&ie<me;){G+=c;for(var Me=-1,Te=a[G];++Me<J;){var Oe=K[Me],Ve=Oe.iteratee,Cr=Oe.type,cr=Ve(Te);if(Cr==q)Te=cr;else if(!cr){if(Cr==A)continue e;break e}}ye[ie++]=Te}return ye}He.prototype=Va(np.prototype),He.prototype.constructor=He;function Io(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function D1(){this.__data__=Ic?Ic(null):{},this.size=0}function F1(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function L1(a){var c=this.__data__;if(Ic){var p=c[a];return p===s?t:p}return Ye.call(c,a)?c[a]:t}function I1(a){var c=this.__data__;return Ic?c[a]!==t:Ye.call(c,a)}function C1(a,c){var p=this.__data__;return this.size+=this.has(a)?0:1,p[a]=Ic&&c===t?s:c,this}Io.prototype.clear=D1,Io.prototype.delete=F1,Io.prototype.get=L1,Io.prototype.has=I1,Io.prototype.set=C1;function ui(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function O1(){this.__data__=[],this.size=0}function N1(a){var c=this.__data__,p=ip(c,a);if(p<0)return!1;var f=c.length-1;return p==f?c.pop():Zu.call(c,p,1),--this.size,!0}function U1(a){var c=this.__data__,p=ip(c,a);return p<0?t:c[p][1]}function H1(a){return ip(this.__data__,a)>-1}function B1(a,c){var p=this.__data__,f=ip(p,a);return f<0?(++this.size,p.push([a,c])):p[f][1]=c,this}ui.prototype.clear=O1,ui.prototype.delete=N1,ui.prototype.get=U1,ui.prototype.has=H1,ui.prototype.set=B1;function pi(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function V1(){this.size=0,this.__data__={hash:new Io,map:new(Fc||ui),string:new Io}}function W1(a){var c=hp(this,a).delete(a);return this.size-=c?1:0,c}function $1(a){return hp(this,a).get(a)}function j1(a){return hp(this,a).has(a)}function z1(a,c){var p=hp(this,a),f=p.size;return p.set(a,c),this.size+=p.size==f?0:1,this}pi.prototype.clear=V1,pi.prototype.delete=W1,pi.prototype.get=$1,pi.prototype.has=j1,pi.prototype.set=z1;function Co(a){var c=-1,p=a==null?0:a.length;for(this.__data__=new pi;++c<p;)this.add(a[c])}function q1(a){return this.__data__.set(a,s),this}function G1(a){return this.__data__.has(a)}Co.prototype.add=Co.prototype.push=q1,Co.prototype.has=G1;function _n(a){var c=this.__data__=new ui(a);this.size=c.size}function K1(){this.__data__=new ui,this.size=0}function Q1(a){var c=this.__data__,p=c.delete(a);return this.size=c.size,p}function Y1(a){return this.__data__.get(a)}function Z1(a){return this.__data__.has(a)}function X1(a,c){var p=this.__data__;if(p instanceof ui){var f=p.__data__;if(!Fc||f.length<r-1)return f.push([a,c]),this.size=++p.size,this;p=this.__data__=new pi(f)}return p.set(a,c),this.size=p.size,this}_n.prototype.clear=K1,_n.prototype.delete=Q1,_n.prototype.get=Y1,_n.prototype.has=Z1,_n.prototype.set=X1;function nE(a,c){var p=Ee(a),f=!p&&Bo(a),h=!p&&!f&&qi(a),S=!p&&!f&&!h&&za(a),_=p||f||h||S,R=_?Yy(a.length,c1):[],D=R.length;for(var G in a)(c||Ye.call(a,G))&&!(_&&(G=="length"||h&&(G=="offset"||G=="parent")||S&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||gi(G,D)))&&R.push(G);return R}function iE(a){var c=a.length;return c?a[fT(0,c-1)]:t}function J1(a,c){return yp(yr(a),Oo(c,0,a.length))}function eO(a){return yp(yr(a))}function nT(a,c,p){(p!==t&&!Rn(a[c],p)||p===t&&!(c in a))&&mi(a,c,p)}function Oc(a,c,p){var f=a[c];(!(Ye.call(a,c)&&Rn(f,p))||p===t&&!(c in a))&&mi(a,c,p)}function ip(a,c){for(var p=a.length;p--;)if(Rn(a[p][0],c))return p;return-1}function tO(a,c,p,f){return Wi(a,function(h,S,_){c(f,h,p(h),_)}),f}function oE(a,c){return a&&Vn(c,Lt(c),a)}function rO(a,c){return a&&Vn(c,xr(c),a)}function mi(a,c,p){c=="__proto__"&&Xu?Xu(a,c,{configurable:!0,enumerable:!0,value:p,writable:!0}):a[c]=p}function iT(a,c){for(var p=-1,f=c.length,h=B(f),S=a==null;++p<f;)h[p]=S?t:UT(a,c[p]);return h}function Oo(a,c,p){return a===a&&(p!==t&&(a=a<=p?a:p),c!==t&&(a=a>=c?a:c)),a}function tn(a,c,p,f,h,S){var _,R=c&m,D=c&d,G=c&g;if(p&&(_=h?p(a,f,h,S):p(a)),_!==t)return _;if(!lt(a))return a;var K=Ee(a);if(K){if(_=jO(a),!R)return yr(a,_)}else{var J=Xt(a),ie=J==Fa||J==sw;if(qi(a))return PE(a,R);if(J==li||J==qe||ie&&!h){if(_=D||ie?{}:KE(a),!R)return D?LO(a,rO(_,a)):FO(a,oE(_,a))}else{if(!et[J])return h?a:{};_=zO(a,J,R)}}S||(S=new _n);var me=S.get(a);if(me)return me;S.set(a,_),w_(a)?a.forEach(function(Te){_.add(tn(Te,c,p,Te,a,S))}):v_(a)&&a.forEach(function(Te,Oe){_.set(Oe,tn(Te,c,p,Oe,a,S))});var ye=G?D?ET:wT:D?xr:Lt,Me=K?t:ye(a);return Xr(Me||a,function(Te,Oe){Me&&(Oe=Te,Te=a[Oe]),Oc(_,Oe,tn(Te,c,p,Oe,a,S))}),_}function nO(a){var c=Lt(a);return function(p){return aE(p,a,c)}}function aE(a,c,p){var f=p.length;if(a==null)return!f;for(a=Je(a);f--;){var h=p[f],S=c[h],_=a[h];if(_===t&&!(h in a)||!S(_))return!1}return!0}function sE(a,c,p){if(typeof a!="function")throw new Jr(i);return $c(function(){a.apply(t,p)},c)}function Nc(a,c,p,f){var h=-1,S=Vu,_=!0,R=a.length,D=[],G=c.length;if(!R)return D;p&&(c=it(c,Fr(p))),f?(S=jy,_=!1):c.length>=r&&(S=Mc,_=!1,c=new Co(c));e:for(;++h<R;){var K=a[h],J=p==null?K:p(K);if(K=f||K!==0?K:0,_&&J===J){for(var ie=G;ie--;)if(c[ie]===J)continue e;D.push(K)}else S(c,J,f)||D.push(K)}return D}var Wi=IE(Bn),cE=IE(aT,!0);function iO(a,c){var p=!0;return Wi(a,function(f,h,S){return p=!!c(f,h,S),p}),p}function op(a,c,p){for(var f=-1,h=a.length;++f<h;){var S=a[f],_=c(S);if(_!=null&&(R===t?_===_&&!Ir(_):p(_,R)))var R=_,D=S}return D}function oO(a,c,p,f){var h=a.length;for(p=Ae(p),p<0&&(p=-p>h?0:h+p),f=f===t||f>h?h:Ae(f),f<0&&(f+=h),f=p>f?0:__(f);p<f;)a[p++]=c;return a}function lE(a,c){var p=[];return Wi(a,function(f,h,S){c(f,h,S)&&p.push(f)}),p}function Wt(a,c,p,f,h){var S=-1,_=a.length;for(p||(p=GO),h||(h=[]);++S<_;){var R=a[S];c>0&&p(R)?c>1?Wt(R,c-1,p,f,h):Ui(h,R):f||(h[h.length]=R)}return h}var oT=CE(),uE=CE(!0);function Bn(a,c){return a&&oT(a,c,Lt)}function aT(a,c){return a&&uE(a,c,Lt)}function ap(a,c){return Ni(c,function(p){return hi(a[p])})}function No(a,c){c=ji(c,a);for(var p=0,f=c.length;a!=null&&p<f;)a=a[Wn(c[p++])];return p&&p==f?a:t}function pE(a,c,p){var f=c(a);return Ee(a)?f:Ui(f,p(a))}function ar(a){return a==null?a===t?II:FI:Lo&&Lo in Je(a)?VO(a):eN(a)}function sT(a,c){return a>c}function aO(a,c){return a!=null&&Ye.call(a,c)}function sO(a,c){return a!=null&&c in Je(a)}function cO(a,c,p){return a>=Zt(c,p)&&a<At(c,p)}function cT(a,c,p){for(var f=p?jy:Vu,h=a[0].length,S=a.length,_=S,R=B(S),D=1/0,G=[];_--;){var K=a[_];_&&c&&(K=it(K,Fr(c))),D=Zt(K.length,D),R[_]=!p&&(c||h>=120&&K.length>=120)?new Co(_&&K):t}K=a[0];var J=-1,ie=R[0];e:for(;++J<h&&G.length<D;){var me=K[J],ye=c?c(me):me;if(me=p||me!==0?me:0,!(ie?Mc(ie,ye):f(G,ye,p))){for(_=S;--_;){var Me=R[_];if(!(Me?Mc(Me,ye):f(a[_],ye,p)))continue e}ie&&ie.push(ye),G.push(me)}}return G}function lO(a,c,p,f){return Bn(a,function(h,S,_){c(f,p(h),S,_)}),f}function Uc(a,c,p){c=ji(c,a),a=XE(a,c);var f=a==null?a:a[Wn(nn(c))];return f==null?t:Dr(f,a,p)}function mE(a){return dt(a)&&ar(a)==qe}function uO(a){return dt(a)&&ar(a)==Pc}function pO(a){return dt(a)&&ar(a)==Yr}function Hc(a,c,p,f,h){return a===c?!0:a==null||c==null||!dt(a)&&!dt(c)?a!==a&&c!==c:mO(a,c,p,f,Hc,h)}function mO(a,c,p,f,h,S){var _=Ee(a),R=Ee(c),D=_?Ce:Xt(a),G=R?Ce:Xt(c);D=D==qe?li:D,G=G==qe?li:G;var K=D==li,J=G==li,ie=D==G;if(ie&&qi(a)){if(!qi(c))return!1;_=!0,K=!1}if(ie&&!K)return S||(S=new _n),_||za(a)?zE(a,c,p,f,h,S):HO(a,c,D,p,f,h,S);if(!(p&y)){var me=K&&Ye.call(a,"__wrapped__"),ye=J&&Ye.call(c,"__wrapped__");if(me||ye){var Me=me?a.value():a,Te=ye?c.value():c;return S||(S=new _n),h(Me,Te,p,f,S)}}return ie?(S||(S=new _n),BO(a,c,p,f,h,S)):!1}function fO(a){return dt(a)&&Xt(a)==bn}function lT(a,c,p,f){var h=p.length,S=h,_=!f;if(a==null)return!S;for(a=Je(a);h--;){var R=p[h];if(_&&R[2]?R[1]!==a[R[0]]:!(R[0]in a))return!1}for(;++h<S;){R=p[h];var D=R[0],G=a[D],K=R[1];if(_&&R[2]){if(G===t&&!(D in a))return!1}else{var J=new _n;if(f)var ie=f(G,K,D,a,c,J);if(!(ie===t?Hc(K,G,y|x,f,J):ie))return!1}}return!0}function fE(a){if(!lt(a)||QO(a))return!1;var c=hi(a)?f1:nC;return c.test(Ho(a))}function dO(a){return dt(a)&&ar(a)==Rc}function gO(a){return dt(a)&&Xt(a)==wn}function hO(a){return dt(a)&&wp(a.length)&&!!tt[ar(a)]}function dE(a){return typeof a=="function"?a:a==null?Sr:typeof a=="object"?Ee(a)?yE(a[0],a[1]):hE(a):O_(a)}function uT(a){if(!Wc(a))return x1(a);var c=[];for(var p in Je(a))Ye.call(a,p)&&p!="constructor"&&c.push(p);return c}function yO(a){if(!lt(a))return JO(a);var c=Wc(a),p=[];for(var f in a)f=="constructor"&&(c||!Ye.call(a,f))||p.push(f);return p}function pT(a,c){return a<c}function gE(a,c){var p=-1,f=Tr(a)?B(a.length):[];return Wi(a,function(h,S,_){f[++p]=c(h,S,_)}),f}function hE(a){var c=RT(a);return c.length==1&&c[0][2]?YE(c[0][0],c[0][1]):function(p){return p===a||lT(p,a,c)}}function yE(a,c){return AT(a)&&QE(c)?YE(Wn(a),c):function(p){var f=UT(p,a);return f===t&&f===c?HT(p,a):Hc(c,f,y|x)}}function sp(a,c,p,f,h){a!==c&&oT(c,function(S,_){if(h||(h=new _n),lt(S))TO(a,c,_,p,sp,f,h);else{var R=f?f(MT(a,_),S,_+"",a,c,h):t;R===t&&(R=S),nT(a,_,R)}},xr)}function TO(a,c,p,f,h,S,_){var R=MT(a,p),D=MT(c,p),G=_.get(D);if(G){nT(a,p,G);return}var K=S?S(R,D,p+"",a,c,_):t,J=K===t;if(J){var ie=Ee(D),me=!ie&&qi(D),ye=!ie&&!me&&za(D);K=D,ie||me||ye?Ee(R)?K=R:xt(R)?K=yr(R):me?(J=!1,K=PE(D,!0)):ye?(J=!1,K=ME(D,!0)):K=[]:jc(D)||Bo(D)?(K=R,Bo(R)?K=R_(R):(!lt(R)||hi(R))&&(K=KE(D))):J=!1}J&&(_.set(D,K),h(K,D,f,S,_),_.delete(D)),nT(a,p,K)}function TE(a,c){var p=a.length;if(p)return c+=c<0?p:0,gi(c,p)?a[c]:t}function xE(a,c,p){c.length?c=it(c,function(S){return Ee(S)?function(_){return No(_,S.length===1?S[0]:S)}:S}):c=[Sr];var f=-1;c=it(c,Fr(he()));var h=gE(a,function(S,_,R){var D=it(c,function(G){return G(S)});return{criteria:D,index:++f,value:S}});return zC(h,function(S,_){return DO(S,_,p)})}function xO(a,c){return SE(a,c,function(p,f){return HT(a,f)})}function SE(a,c,p){for(var f=-1,h=c.length,S={};++f<h;){var _=c[f],R=No(a,_);p(R,_)&&Bc(S,ji(_,a),R)}return S}function SO(a){return function(c){return No(c,a)}}function mT(a,c,p,f){var h=f?jC:Ca,S=-1,_=c.length,R=a;for(a===c&&(c=yr(c)),p&&(R=it(a,Fr(p)));++S<_;)for(var D=0,G=c[S],K=p?p(G):G;(D=h(R,K,D,f))>-1;)R!==a&&Zu.call(R,D,1),Zu.call(a,D,1);return a}function vE(a,c){for(var p=a?c.length:0,f=p-1;p--;){var h=c[p];if(p==f||h!==S){var S=h;gi(h)?Zu.call(a,h,1):hT(a,h)}}return a}function fT(a,c){return a+ep(tE()*(c-a+1))}function vO(a,c,p,f){for(var h=-1,S=At(Ju((c-a)/(p||1)),0),_=B(S);S--;)_[f?S:++h]=a,a+=p;return _}function dT(a,c){var p="";if(!a||c<1||c>N)return p;do c%2&&(p+=a),c=ep(c/2),c&&(a+=a);while(c);return p}function Fe(a,c){return DT(ZE(a,c,Sr),a+"")}function bO(a){return iE(qa(a))}function wO(a,c){var p=qa(a);return yp(p,Oo(c,0,p.length))}function Bc(a,c,p,f){if(!lt(a))return a;c=ji(c,a);for(var h=-1,S=c.length,_=S-1,R=a;R!=null&&++h<S;){var D=Wn(c[h]),G=p;if(D==="__proto__"||D==="constructor"||D==="prototype")return a;if(h!=_){var K=R[D];G=f?f(K,D,R):t,G===t&&(G=lt(K)?K:gi(c[h+1])?[]:{})}Oc(R,D,G),R=R[D]}return a}var bE=tp?function(a,c){return tp.set(a,c),a}:Sr,EO=Xu?function(a,c){return Xu(a,"toString",{configurable:!0,enumerable:!1,value:VT(c),writable:!0})}:Sr;function _O(a){return yp(qa(a))}function rn(a,c,p){var f=-1,h=a.length;c<0&&(c=-c>h?0:h+c),p=p>h?h:p,p<0&&(p+=h),h=c>p?0:p-c>>>0,c>>>=0;for(var S=B(h);++f<h;)S[f]=a[f+c];return S}function RO(a,c){var p;return Wi(a,function(f,h,S){return p=c(f,h,S),!p}),!!p}function cp(a,c,p){var f=0,h=a==null?f:a.length;if(typeof c=="number"&&c===c&&h<=xe){for(;f<h;){var S=f+h>>>1,_=a[S];_!==null&&!Ir(_)&&(p?_<=c:_<c)?f=S+1:h=S}return h}return gT(a,c,Sr,p)}function gT(a,c,p,f){var h=0,S=a==null?0:a.length;if(S===0)return 0;c=p(c);for(var _=c!==c,R=c===null,D=Ir(c),G=c===t;h<S;){var K=ep((h+S)/2),J=p(a[K]),ie=J!==t,me=J===null,ye=J===J,Me=Ir(J);if(_)var Te=f||ye;else G?Te=ye&&(f||ie):R?Te=ye&&ie&&(f||!me):D?Te=ye&&ie&&!me&&(f||!Me):me||Me?Te=!1:Te=f?J<=c:J<c;Te?h=K+1:S=K}return Zt(S,te)}function wE(a,c){for(var p=-1,f=a.length,h=0,S=[];++p<f;){var _=a[p],R=c?c(_):_;if(!p||!Rn(R,D)){var D=R;S[h++]=_===0?0:_}}return S}function EE(a){return typeof a=="number"?a:Ir(a)?X:+a}function Lr(a){if(typeof a=="string")return a;if(Ee(a))return it(a,Lr)+"";if(Ir(a))return rE?rE.call(a):"";var c=a+"";return c=="0"&&1/a==-L?"-0":c}function $i(a,c,p){var f=-1,h=Vu,S=a.length,_=!0,R=[],D=R;if(p)_=!1,h=jy;else if(S>=r){var G=c?null:NO(a);if(G)return $u(G);_=!1,h=Mc,D=new Co}else D=c?[]:R;e:for(;++f<S;){var K=a[f],J=c?c(K):K;if(K=p||K!==0?K:0,_&&J===J){for(var ie=D.length;ie--;)if(D[ie]===J)continue e;c&&D.push(J),R.push(K)}else h(D,J,p)||(D!==R&&D.push(J),R.push(K))}return R}function hT(a,c){return c=ji(c,a),a=XE(a,c),a==null||delete a[Wn(nn(c))]}function _E(a,c,p,f){return Bc(a,c,p(No(a,c)),f)}function lp(a,c,p,f){for(var h=a.length,S=f?h:-1;(f?S--:++S<h)&&c(a[S],S,a););return p?rn(a,f?0:S,f?S+1:h):rn(a,f?S+1:0,f?h:S)}function RE(a,c){var p=a;return p instanceof He&&(p=p.value()),zy(c,function(f,h){return h.func.apply(h.thisArg,Ui([f],h.args))},p)}function yT(a,c,p){var f=a.length;if(f<2)return f?$i(a[0]):[];for(var h=-1,S=B(f);++h<f;)for(var _=a[h],R=-1;++R<f;)R!=h&&(S[h]=Nc(S[h]||_,a[R],c,p));return $i(Wt(S,1),c,p)}function kE(a,c,p){for(var f=-1,h=a.length,S=c.length,_={};++f<h;){var R=f<S?c[f]:t;p(_,a[f],R)}return _}function TT(a){return xt(a)?a:[]}function xT(a){return typeof a=="function"?a:Sr}function ji(a,c){return Ee(a)?a:AT(a,c)?[a]:r_(Qe(a))}var kO=Fe;function zi(a,c,p){var f=a.length;return p=p===t?f:p,!c&&p>=f?a:rn(a,c,p)}var AE=d1||function(a){return Ft.clearTimeout(a)};function PE(a,c){if(c)return a.slice();var p=a.length,f=Yw?Yw(p):new a.constructor(p);return a.copy(f),f}function ST(a){var c=new a.constructor(a.byteLength);return new Qu(c).set(new Qu(a)),c}function AO(a,c){var p=c?ST(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.byteLength)}function PO(a){var c=new a.constructor(a.source,mw.exec(a));return c.lastIndex=a.lastIndex,c}function MO(a){return Cc?Je(Cc.call(a)):{}}function ME(a,c){var p=c?ST(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.length)}function DE(a,c){if(a!==c){var p=a!==t,f=a===null,h=a===a,S=Ir(a),_=c!==t,R=c===null,D=c===c,G=Ir(c);if(!R&&!G&&!S&&a>c||S&&_&&D&&!R&&!G||f&&_&&D||!p&&D||!h)return 1;if(!f&&!S&&!G&&a<c||G&&p&&h&&!f&&!S||R&&p&&h||!_&&h||!D)return-1}return 0}function DO(a,c,p){for(var f=-1,h=a.criteria,S=c.criteria,_=h.length,R=p.length;++f<_;){var D=DE(h[f],S[f]);if(D){if(f>=R)return D;var G=p[f];return D*(G=="desc"?-1:1)}}return a.index-c.index}function FE(a,c,p,f){for(var h=-1,S=a.length,_=p.length,R=-1,D=c.length,G=At(S-_,0),K=B(D+G),J=!f;++R<D;)K[R]=c[R];for(;++h<_;)(J||h<S)&&(K[p[h]]=a[h]);for(;G--;)K[R++]=a[h++];return K}function LE(a,c,p,f){for(var h=-1,S=a.length,_=-1,R=p.length,D=-1,G=c.length,K=At(S-R,0),J=B(K+G),ie=!f;++h<K;)J[h]=a[h];for(var me=h;++D<G;)J[me+D]=c[D];for(;++_<R;)(ie||h<S)&&(J[me+p[_]]=a[h++]);return J}function yr(a,c){var p=-1,f=a.length;for(c||(c=B(f));++p<f;)c[p]=a[p];return c}function Vn(a,c,p,f){var h=!p;p||(p={});for(var S=-1,_=c.length;++S<_;){var R=c[S],D=f?f(p[R],a[R],R,p,a):t;D===t&&(D=a[R]),h?mi(p,R,D):Oc(p,R,D)}return p}function FO(a,c){return Vn(a,kT(a),c)}function LO(a,c){return Vn(a,qE(a),c)}function up(a,c){return function(p,f){var h=Ee(p)?UC:tO,S=c?c():{};return h(p,a,he(f,2),S)}}function Wa(a){return Fe(function(c,p){var f=-1,h=p.length,S=h>1?p[h-1]:t,_=h>2?p[2]:t;for(S=a.length>3&&typeof S=="function"?(h--,S):t,_&&sr(p[0],p[1],_)&&(S=h<3?t:S,h=1),c=Je(c);++f<h;){var R=p[f];R&&a(c,R,f,S)}return c})}function IE(a,c){return function(p,f){if(p==null)return p;if(!Tr(p))return a(p,f);for(var h=p.length,S=c?h:-1,_=Je(p);(c?S--:++S<h)&&f(_[S],S,_)!==!1;);return p}}function CE(a){return function(c,p,f){for(var h=-1,S=Je(c),_=f(c),R=_.length;R--;){var D=_[a?R:++h];if(p(S[D],D,S)===!1)break}return c}}function IO(a,c,p){var f=c&w,h=Vc(a);function S(){var _=this&&this!==Ft&&this instanceof S?h:a;return _.apply(f?p:this,arguments)}return S}function OE(a){return function(c){c=Qe(c);var p=Oa(c)?En(c):t,f=p?p[0]:c.charAt(0),h=p?zi(p,1).join(""):c.slice(1);return f[a]()+h}}function $a(a){return function(c){return zy(I_(L_(c).replace(EC,"")),a,"")}}function Vc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var p=Va(a.prototype),f=a.apply(p,c);return lt(f)?f:p}}function CO(a,c,p){var f=Vc(a);function h(){for(var S=arguments.length,_=B(S),R=S,D=ja(h);R--;)_[R]=arguments[R];var G=S<3&&_[0]!==D&&_[S-1]!==D?[]:Hi(_,D);if(S-=G.length,S<p)return VE(a,c,pp,h.placeholder,t,_,G,t,t,p-S);var K=this&&this!==Ft&&this instanceof h?f:a;return Dr(K,this,_)}return h}function NE(a){return function(c,p,f){var h=Je(c);if(!Tr(c)){var S=he(p,3);c=Lt(c),p=function(R){return S(h[R],R,h)}}var _=a(c,p,f);return _>-1?h[S?c[_]:_]:t}}function UE(a){return di(function(c){var p=c.length,f=p,h=en.prototype.thru;for(a&&c.reverse();f--;){var S=c[f];if(typeof S!="function")throw new Jr(i);if(h&&!_&&gp(S)=="wrapper")var _=new en([],!0)}for(f=_?f:p;++f<p;){S=c[f];var R=gp(S),D=R=="wrapper"?_T(S):t;D&&PT(D[0])&&D[1]==(ce|V|ne|fe)&&!D[4].length&&D[9]==1?_=_[gp(D[0])].apply(_,D[3]):_=S.length==1&&PT(S)?_[R]():_.thru(S)}return function(){var G=arguments,K=G[0];if(_&&G.length==1&&Ee(K))return _.plant(K).value();for(var J=0,ie=p?c[J].apply(this,G):K;++J<p;)ie=c[J].call(this,ie);return ie}})}function pp(a,c,p,f,h,S,_,R,D,G){var K=c&ce,J=c&w,ie=c&E,me=c&(V|z),ye=c&ct,Me=ie?t:Vc(a);function Te(){for(var Oe=arguments.length,Ve=B(Oe),Cr=Oe;Cr--;)Ve[Cr]=arguments[Cr];if(me)var cr=ja(Te),Or=GC(Ve,cr);if(f&&(Ve=FE(Ve,f,h,me)),S&&(Ve=LE(Ve,S,_,me)),Oe-=Or,me&&Oe<G){var St=Hi(Ve,cr);return VE(a,c,pp,Te.placeholder,p,Ve,St,R,D,G-Oe)}var kn=J?p:this,Ti=ie?kn[a]:a;return Oe=Ve.length,R?Ve=tN(Ve,R):ye&&Oe>1&&Ve.reverse(),K&&D<Oe&&(Ve.length=D),this&&this!==Ft&&this instanceof Te&&(Ti=Me||Vc(Ti)),Ti.apply(kn,Ve)}return Te}function HE(a,c){return function(p,f){return lO(p,a,c(f),{})}}function mp(a,c){return function(p,f){var h;if(p===t&&f===t)return c;if(p!==t&&(h=p),f!==t){if(h===t)return f;typeof p=="string"||typeof f=="string"?(p=Lr(p),f=Lr(f)):(p=EE(p),f=EE(f)),h=a(p,f)}return h}}function vT(a){return di(function(c){return c=it(c,Fr(he())),Fe(function(p){var f=this;return a(c,function(h){return Dr(h,f,p)})})})}function fp(a,c){c=c===t?" ":Lr(c);var p=c.length;if(p<2)return p?dT(c,a):c;var f=dT(c,Ju(a/Na(c)));return Oa(c)?zi(En(f),0,a).join(""):f.slice(0,a)}function OO(a,c,p,f){var h=c&w,S=Vc(a);function _(){for(var R=-1,D=arguments.length,G=-1,K=f.length,J=B(K+D),ie=this&&this!==Ft&&this instanceof _?S:a;++G<K;)J[G]=f[G];for(;D--;)J[G++]=arguments[++R];return Dr(ie,h?p:this,J)}return _}function BE(a){return function(c,p,f){return f&&typeof f!="number"&&sr(c,p,f)&&(p=f=t),c=yi(c),p===t?(p=c,c=0):p=yi(p),f=f===t?c<p?1:-1:yi(f),vO(c,p,f,a)}}function dp(a){return function(c,p){return typeof c=="string"&&typeof p=="string"||(c=on(c),p=on(p)),a(c,p)}}function VE(a,c,p,f,h,S,_,R,D,G){var K=c&V,J=K?_:t,ie=K?t:_,me=K?S:t,ye=K?t:S;c|=K?ne:se,c&=~(K?se:ne),c&U||(c&=~(w|E));var Me=[a,c,h,me,J,ye,ie,R,D,G],Te=p.apply(t,Me);return PT(a)&&JE(Te,Me),Te.placeholder=f,e_(Te,a,c)}function bT(a){var c=kt[a];return function(p,f){if(p=on(p),f=f==null?0:Zt(Ae(f),292),f&&eE(p)){var h=(Qe(p)+"e").split("e"),S=c(h[0]+"e"+(+h[1]+f));return h=(Qe(S)+"e").split("e"),+(h[0]+"e"+(+h[1]-f))}return c(p)}}var NO=Ha&&1/$u(new Ha([,-0]))[1]==L?function(a){return new Ha(a)}:jT;function WE(a){return function(c){var p=Xt(c);return p==bn?Xy(c):p==wn?e1(c):qC(c,a(c))}}function fi(a,c,p,f,h,S,_,R){var D=c&E;if(!D&&typeof a!="function")throw new Jr(i);var G=f?f.length:0;if(G||(c&=~(ne|se),f=h=t),_=_===t?_:At(Ae(_),0),R=R===t?R:Ae(R),G-=h?h.length:0,c&se){var K=f,J=h;f=h=t}var ie=D?t:_T(a),me=[a,c,p,f,h,K,J,S,_,R];if(ie&&XO(me,ie),a=me[0],c=me[1],p=me[2],f=me[3],h=me[4],R=me[9]=me[9]===t?D?0:a.length:At(me[9]-G,0),!R&&c&(V|z)&&(c&=~(V|z)),!c||c==w)var ye=IO(a,c,p);else c==V||c==z?ye=CO(a,c,R):(c==ne||c==(w|ne))&&!h.length?ye=OO(a,c,p,f):ye=pp.apply(t,me);var Me=ie?bE:JE;return e_(Me(ye,me),a,c)}function $E(a,c,p,f){return a===t||Rn(a,Ua[p])&&!Ye.call(f,p)?c:a}function jE(a,c,p,f,h,S){return lt(a)&&lt(c)&&(S.set(c,a),sp(a,c,t,jE,S),S.delete(c)),a}function UO(a){return jc(a)?t:a}function zE(a,c,p,f,h,S){var _=p&y,R=a.length,D=c.length;if(R!=D&&!(_&&D>R))return!1;var G=S.get(a),K=S.get(c);if(G&&K)return G==c&&K==a;var J=-1,ie=!0,me=p&x?new Co:t;for(S.set(a,c),S.set(c,a);++J<R;){var ye=a[J],Me=c[J];if(f)var Te=_?f(Me,ye,J,c,a,S):f(ye,Me,J,a,c,S);if(Te!==t){if(Te)continue;ie=!1;break}if(me){if(!qy(c,function(Oe,Ve){if(!Mc(me,Ve)&&(ye===Oe||h(ye,Oe,p,f,S)))return me.push(Ve)})){ie=!1;break}}else if(!(ye===Me||h(ye,Me,p,f,S))){ie=!1;break}}return S.delete(a),S.delete(c),ie}function HO(a,c,p,f,h,S,_){switch(p){case La:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case Pc:return!(a.byteLength!=c.byteLength||!S(new Qu(a),new Qu(c)));case Vt:case Yr:case _c:return Rn(+a,+c);case ci:return a.name==c.name&&a.message==c.message;case Rc:case kc:return a==c+"";case bn:var R=Xy;case wn:var D=f&y;if(R||(R=$u),a.size!=c.size&&!D)return!1;var G=_.get(a);if(G)return G==c;f|=x,_.set(a,c);var K=zE(R(a),R(c),f,h,S,_);return _.delete(a),K;case Nu:if(Cc)return Cc.call(a)==Cc.call(c)}return!1}function BO(a,c,p,f,h,S){var _=p&y,R=wT(a),D=R.length,G=wT(c),K=G.length;if(D!=K&&!_)return!1;for(var J=D;J--;){var ie=R[J];if(!(_?ie in c:Ye.call(c,ie)))return!1}var me=S.get(a),ye=S.get(c);if(me&&ye)return me==c&&ye==a;var Me=!0;S.set(a,c),S.set(c,a);for(var Te=_;++J<D;){ie=R[J];var Oe=a[ie],Ve=c[ie];if(f)var Cr=_?f(Ve,Oe,ie,c,a,S):f(Oe,Ve,ie,a,c,S);if(!(Cr===t?Oe===Ve||h(Oe,Ve,p,f,S):Cr)){Me=!1;break}Te||(Te=ie=="constructor")}if(Me&&!Te){var cr=a.constructor,Or=c.constructor;cr!=Or&&"constructor"in a&&"constructor"in c&&!(typeof cr=="function"&&cr instanceof cr&&typeof Or=="function"&&Or instanceof Or)&&(Me=!1)}return S.delete(a),S.delete(c),Me}function di(a){return DT(ZE(a,t,a_),a+"")}function wT(a){return pE(a,Lt,kT)}function ET(a){return pE(a,xr,qE)}var _T=tp?function(a){return tp.get(a)}:jT;function gp(a){for(var c=a.name+"",p=Ba[c],f=Ye.call(Ba,c)?p.length:0;f--;){var h=p[f],S=h.func;if(S==null||S==a)return h.name}return c}function ja(a){var c=Ye.call(T,"placeholder")?T:a;return c.placeholder}function he(){var a=T.iteratee||WT;return a=a===WT?dE:a,arguments.length?a(arguments[0],arguments[1]):a}function hp(a,c){var p=a.__data__;return KO(c)?p[typeof c=="string"?"string":"hash"]:p.map}function RT(a){for(var c=Lt(a),p=c.length;p--;){var f=c[p],h=a[f];c[p]=[f,h,QE(h)]}return c}function Uo(a,c){var p=ZC(a,c);return fE(p)?p:t}function VO(a){var c=Ye.call(a,Lo),p=a[Lo];try{a[Lo]=t;var f=!0}catch{}var h=Gu.call(a);return f&&(c?a[Lo]=p:delete a[Lo]),h}var kT=eT?function(a){return a==null?[]:(a=Je(a),Ni(eT(a),function(c){return Xw.call(a,c)}))}:zT,qE=eT?function(a){for(var c=[];a;)Ui(c,kT(a)),a=Yu(a);return c}:zT,Xt=ar;(tT&&Xt(new tT(new ArrayBuffer(1)))!=La||Fc&&Xt(new Fc)!=bn||rT&&Xt(rT.resolve())!=cw||Ha&&Xt(new Ha)!=wn||Lc&&Xt(new Lc)!=Ac)&&(Xt=function(a){var c=ar(a),p=c==li?a.constructor:t,f=p?Ho(p):"";if(f)switch(f){case w1:return La;case E1:return bn;case _1:return cw;case R1:return wn;case k1:return Ac}return c});function WO(a,c,p){for(var f=-1,h=p.length;++f<h;){var S=p[f],_=S.size;switch(S.type){case"drop":a+=_;break;case"dropRight":c-=_;break;case"take":c=Zt(c,a+_);break;case"takeRight":a=At(a,c-_);break}}return{start:a,end:c}}function $O(a){var c=a.match(QI);return c?c[1].split(YI):[]}function GE(a,c,p){c=ji(c,a);for(var f=-1,h=c.length,S=!1;++f<h;){var _=Wn(c[f]);if(!(S=a!=null&&p(a,_)))break;a=a[_]}return S||++f!=h?S:(h=a==null?0:a.length,!!h&&wp(h)&&gi(_,h)&&(Ee(a)||Bo(a)))}function jO(a){var c=a.length,p=new a.constructor(c);return c&&typeof a[0]=="string"&&Ye.call(a,"index")&&(p.index=a.index,p.input=a.input),p}function KE(a){return typeof a.constructor=="function"&&!Wc(a)?Va(Yu(a)):{}}function zO(a,c,p){var f=a.constructor;switch(c){case Pc:return ST(a);case Vt:case Yr:return new f(+a);case La:return AO(a,p);case Ry:case ky:case Ay:case Py:case My:case Dy:case Fy:case Ly:case Iy:return ME(a,p);case bn:return new f;case _c:case kc:return new f(a);case Rc:return PO(a);case wn:return new f;case Nu:return MO(a)}}function qO(a,c){var p=c.length;if(!p)return a;var f=p-1;return c[f]=(p>1?"& ":"")+c[f],c=c.join(p>2?", ":" "),a.replace(KI,`{
/* [wrapped with `+c+`] */
`)}function GO(a){return Ee(a)||Bo(a)||!!(Jw&&a&&a[Jw])}function gi(a,c){var p=typeof a;return c=c??N,!!c&&(p=="number"||p!="symbol"&&oC.test(a))&&a>-1&&a%1==0&&a<c}function sr(a,c,p){if(!lt(p))return!1;var f=typeof c;return(f=="number"?Tr(p)&&gi(c,p.length):f=="string"&&c in p)?Rn(p[c],a):!1}function AT(a,c){if(Ee(a))return!1;var p=typeof a;return p=="number"||p=="symbol"||p=="boolean"||a==null||Ir(a)?!0:jI.test(a)||!$I.test(a)||c!=null&&a in Je(c)}function KO(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function PT(a){var c=gp(a),p=T[c];if(typeof p!="function"||!(c in He.prototype))return!1;if(a===p)return!0;var f=_T(p);return!!f&&a===f[0]}function QO(a){return!!Qw&&Qw in a}var YO=zu?hi:qT;function Wc(a){var c=a&&a.constructor,p=typeof c=="function"&&c.prototype||Ua;return a===p}function QE(a){return a===a&&!lt(a)}function YE(a,c){return function(p){return p==null?!1:p[a]===c&&(c!==t||a in Je(p))}}function ZO(a){var c=vp(a,function(f){return p.size===l&&p.clear(),f}),p=c.cache;return c}function XO(a,c){var p=a[1],f=c[1],h=p|f,S=h<(w|E|ce),_=f==ce&&p==V||f==ce&&p==fe&&a[7].length<=c[8]||f==(ce|fe)&&c[7].length<=c[8]&&p==V;if(!(S||_))return a;f&w&&(a[2]=c[2],h|=p&w?0:U);var R=c[3];if(R){var D=a[3];a[3]=D?FE(D,R,c[4]):R,a[4]=D?Hi(a[3],u):c[4]}return R=c[5],R&&(D=a[5],a[5]=D?LE(D,R,c[6]):R,a[6]=D?Hi(a[5],u):c[6]),R=c[7],R&&(a[7]=R),f&ce&&(a[8]=a[8]==null?c[8]:Zt(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=h,a}function JO(a){var c=[];if(a!=null)for(var p in Je(a))c.push(p);return c}function eN(a){return Gu.call(a)}function ZE(a,c,p){return c=At(c===t?a.length-1:c,0),function(){for(var f=arguments,h=-1,S=At(f.length-c,0),_=B(S);++h<S;)_[h]=f[c+h];h=-1;for(var R=B(c+1);++h<c;)R[h]=f[h];return R[c]=p(_),Dr(a,this,R)}}function XE(a,c){return c.length<2?a:No(a,rn(c,0,-1))}function tN(a,c){for(var p=a.length,f=Zt(c.length,p),h=yr(a);f--;){var S=c[f];a[f]=gi(S,p)?h[S]:t}return a}function MT(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var JE=t_(bE),$c=h1||function(a,c){return Ft.setTimeout(a,c)},DT=t_(EO);function e_(a,c,p){var f=c+"";return DT(a,qO(f,rN($O(f),p)))}function t_(a){var c=0,p=0;return function(){var f=S1(),h=C-(f-p);if(p=f,h>0){if(++c>=H)return arguments[0]}else c=0;return a.apply(t,arguments)}}function yp(a,c){var p=-1,f=a.length,h=f-1;for(c=c===t?f:c;++p<c;){var S=fT(p,h),_=a[S];a[S]=a[p],a[p]=_}return a.length=c,a}var r_=ZO(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(zI,function(p,f,h,S){c.push(h?S.replace(JI,"$1"):f||p)}),c});function Wn(a){if(typeof a=="string"||Ir(a))return a;var c=a+"";return c=="0"&&1/a==-L?"-0":c}function Ho(a){if(a!=null){try{return qu.call(a)}catch{}try{return a+""}catch{}}return""}function rN(a,c){return Xr(be,function(p){var f="_."+p[0];c&p[1]&&!Vu(a,f)&&a.push(f)}),a.sort()}function n_(a){if(a instanceof He)return a.clone();var c=new en(a.__wrapped__,a.__chain__);return c.__actions__=yr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function nN(a,c,p){(p?sr(a,c,p):c===t)?c=1:c=At(Ae(c),0);var f=a==null?0:a.length;if(!f||c<1)return[];for(var h=0,S=0,_=B(Ju(f/c));h<f;)_[S++]=rn(a,h,h+=c);return _}function iN(a){for(var c=-1,p=a==null?0:a.length,f=0,h=[];++c<p;){var S=a[c];S&&(h[f++]=S)}return h}function oN(){var a=arguments.length;if(!a)return[];for(var c=B(a-1),p=arguments[0],f=a;f--;)c[f-1]=arguments[f];return Ui(Ee(p)?yr(p):[p],Wt(c,1))}var aN=Fe(function(a,c){return xt(a)?Nc(a,Wt(c,1,xt,!0)):[]}),sN=Fe(function(a,c){var p=nn(c);return xt(p)&&(p=t),xt(a)?Nc(a,Wt(c,1,xt,!0),he(p,2)):[]}),cN=Fe(function(a,c){var p=nn(c);return xt(p)&&(p=t),xt(a)?Nc(a,Wt(c,1,xt,!0),t,p):[]});function lN(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:Ae(c),rn(a,c<0?0:c,f)):[]}function uN(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:Ae(c),c=f-c,rn(a,0,c<0?0:c)):[]}function pN(a,c){return a&&a.length?lp(a,he(c,3),!0,!0):[]}function mN(a,c){return a&&a.length?lp(a,he(c,3),!0):[]}function fN(a,c,p,f){var h=a==null?0:a.length;return h?(p&&typeof p!="number"&&sr(a,c,p)&&(p=0,f=h),oO(a,c,p,f)):[]}function i_(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=p==null?0:Ae(p);return h<0&&(h=At(f+h,0)),Wu(a,he(c,3),h)}function o_(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=f-1;return p!==t&&(h=Ae(p),h=p<0?At(f+h,0):Zt(h,f-1)),Wu(a,he(c,3),h,!0)}function a_(a){var c=a==null?0:a.length;return c?Wt(a,1):[]}function dN(a){var c=a==null?0:a.length;return c?Wt(a,L):[]}function gN(a,c){var p=a==null?0:a.length;return p?(c=c===t?1:Ae(c),Wt(a,c)):[]}function hN(a){for(var c=-1,p=a==null?0:a.length,f={};++c<p;){var h=a[c];f[h[0]]=h[1]}return f}function s_(a){return a&&a.length?a[0]:t}function yN(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=p==null?0:Ae(p);return h<0&&(h=At(f+h,0)),Ca(a,c,h)}function TN(a){var c=a==null?0:a.length;return c?rn(a,0,-1):[]}var xN=Fe(function(a){var c=it(a,TT);return c.length&&c[0]===a[0]?cT(c):[]}),SN=Fe(function(a){var c=nn(a),p=it(a,TT);return c===nn(p)?c=t:p.pop(),p.length&&p[0]===a[0]?cT(p,he(c,2)):[]}),vN=Fe(function(a){var c=nn(a),p=it(a,TT);return c=typeof c=="function"?c:t,c&&p.pop(),p.length&&p[0]===a[0]?cT(p,t,c):[]});function bN(a,c){return a==null?"":T1.call(a,c)}function nn(a){var c=a==null?0:a.length;return c?a[c-1]:t}function wN(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=f;return p!==t&&(h=Ae(p),h=h<0?At(f+h,0):Zt(h,f-1)),c===c?r1(a,c,h):Wu(a,Vw,h,!0)}function EN(a,c){return a&&a.length?TE(a,Ae(c)):t}var _N=Fe(c_);function c_(a,c){return a&&a.length&&c&&c.length?mT(a,c):a}function RN(a,c,p){return a&&a.length&&c&&c.length?mT(a,c,he(p,2)):a}function kN(a,c,p){return a&&a.length&&c&&c.length?mT(a,c,t,p):a}var AN=di(function(a,c){var p=a==null?0:a.length,f=iT(a,c);return vE(a,it(c,function(h){return gi(h,p)?+h:h}).sort(DE)),f});function PN(a,c){var p=[];if(!(a&&a.length))return p;var f=-1,h=[],S=a.length;for(c=he(c,3);++f<S;){var _=a[f];c(_,f,a)&&(p.push(_),h.push(f))}return vE(a,h),p}function FT(a){return a==null?a:b1.call(a)}function MN(a,c,p){var f=a==null?0:a.length;return f?(p&&typeof p!="number"&&sr(a,c,p)?(c=0,p=f):(c=c==null?0:Ae(c),p=p===t?f:Ae(p)),rn(a,c,p)):[]}function DN(a,c){return cp(a,c)}function FN(a,c,p){return gT(a,c,he(p,2))}function LN(a,c){var p=a==null?0:a.length;if(p){var f=cp(a,c);if(f<p&&Rn(a[f],c))return f}return-1}function IN(a,c){return cp(a,c,!0)}function CN(a,c,p){return gT(a,c,he(p,2),!0)}function ON(a,c){var p=a==null?0:a.length;if(p){var f=cp(a,c,!0)-1;if(Rn(a[f],c))return f}return-1}function NN(a){return a&&a.length?wE(a):[]}function UN(a,c){return a&&a.length?wE(a,he(c,2)):[]}function HN(a){var c=a==null?0:a.length;return c?rn(a,1,c):[]}function BN(a,c,p){return a&&a.length?(c=p||c===t?1:Ae(c),rn(a,0,c<0?0:c)):[]}function VN(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:Ae(c),c=f-c,rn(a,c<0?0:c,f)):[]}function WN(a,c){return a&&a.length?lp(a,he(c,3),!1,!0):[]}function $N(a,c){return a&&a.length?lp(a,he(c,3)):[]}var jN=Fe(function(a){return $i(Wt(a,1,xt,!0))}),zN=Fe(function(a){var c=nn(a);return xt(c)&&(c=t),$i(Wt(a,1,xt,!0),he(c,2))}),qN=Fe(function(a){var c=nn(a);return c=typeof c=="function"?c:t,$i(Wt(a,1,xt,!0),t,c)});function GN(a){return a&&a.length?$i(a):[]}function KN(a,c){return a&&a.length?$i(a,he(c,2)):[]}function QN(a,c){return c=typeof c=="function"?c:t,a&&a.length?$i(a,t,c):[]}function LT(a){if(!(a&&a.length))return[];var c=0;return a=Ni(a,function(p){if(xt(p))return c=At(p.length,c),!0}),Yy(c,function(p){return it(a,Gy(p))})}function l_(a,c){if(!(a&&a.length))return[];var p=LT(a);return c==null?p:it(p,function(f){return Dr(c,t,f)})}var YN=Fe(function(a,c){return xt(a)?Nc(a,c):[]}),ZN=Fe(function(a){return yT(Ni(a,xt))}),XN=Fe(function(a){var c=nn(a);return xt(c)&&(c=t),yT(Ni(a,xt),he(c,2))}),JN=Fe(function(a){var c=nn(a);return c=typeof c=="function"?c:t,yT(Ni(a,xt),t,c)}),eU=Fe(LT);function tU(a,c){return kE(a||[],c||[],Oc)}function rU(a,c){return kE(a||[],c||[],Bc)}var nU=Fe(function(a){var c=a.length,p=c>1?a[c-1]:t;return p=typeof p=="function"?(a.pop(),p):t,l_(a,p)});function u_(a){var c=T(a);return c.__chain__=!0,c}function iU(a,c){return c(a),a}function Tp(a,c){return c(a)}var oU=di(function(a){var c=a.length,p=c?a[0]:0,f=this.__wrapped__,h=function(S){return iT(S,a)};return c>1||this.__actions__.length||!(f instanceof He)||!gi(p)?this.thru(h):(f=f.slice(p,+p+(c?1:0)),f.__actions__.push({func:Tp,args:[h],thisArg:t}),new en(f,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function aU(){return u_(this)}function sU(){return new en(this.value(),this.__chain__)}function cU(){this.__values__===t&&(this.__values__=E_(this.value()));var a=this.__index__>=this.__values__.length,c=a?t:this.__values__[this.__index__++];return{done:a,value:c}}function lU(){return this}function uU(a){for(var c,p=this;p instanceof np;){var f=n_(p);f.__index__=0,f.__values__=t,c?h.__wrapped__=f:c=f;var h=f;p=p.__wrapped__}return h.__wrapped__=a,c}function pU(){var a=this.__wrapped__;if(a instanceof He){var c=a;return this.__actions__.length&&(c=new He(this)),c=c.reverse(),c.__actions__.push({func:Tp,args:[FT],thisArg:t}),new en(c,this.__chain__)}return this.thru(FT)}function mU(){return RE(this.__wrapped__,this.__actions__)}var fU=up(function(a,c,p){Ye.call(a,p)?++a[p]:mi(a,p,1)});function dU(a,c,p){var f=Ee(a)?Hw:iO;return p&&sr(a,c,p)&&(c=t),f(a,he(c,3))}function gU(a,c){var p=Ee(a)?Ni:lE;return p(a,he(c,3))}var hU=NE(i_),yU=NE(o_);function TU(a,c){return Wt(xp(a,c),1)}function xU(a,c){return Wt(xp(a,c),L)}function SU(a,c,p){return p=p===t?1:Ae(p),Wt(xp(a,c),p)}function p_(a,c){var p=Ee(a)?Xr:Wi;return p(a,he(c,3))}function m_(a,c){var p=Ee(a)?HC:cE;return p(a,he(c,3))}var vU=up(function(a,c,p){Ye.call(a,p)?a[p].push(c):mi(a,p,[c])});function bU(a,c,p,f){a=Tr(a)?a:qa(a),p=p&&!f?Ae(p):0;var h=a.length;return p<0&&(p=At(h+p,0)),Ep(a)?p<=h&&a.indexOf(c,p)>-1:!!h&&Ca(a,c,p)>-1}var wU=Fe(function(a,c,p){var f=-1,h=typeof c=="function",S=Tr(a)?B(a.length):[];return Wi(a,function(_){S[++f]=h?Dr(c,_,p):Uc(_,c,p)}),S}),EU=up(function(a,c,p){mi(a,p,c)});function xp(a,c){var p=Ee(a)?it:gE;return p(a,he(c,3))}function _U(a,c,p,f){return a==null?[]:(Ee(c)||(c=c==null?[]:[c]),p=f?t:p,Ee(p)||(p=p==null?[]:[p]),xE(a,c,p))}var RU=up(function(a,c,p){a[p?0:1].push(c)},function(){return[[],[]]});function kU(a,c,p){var f=Ee(a)?zy:$w,h=arguments.length<3;return f(a,he(c,4),p,h,Wi)}function AU(a,c,p){var f=Ee(a)?BC:$w,h=arguments.length<3;return f(a,he(c,4),p,h,cE)}function PU(a,c){var p=Ee(a)?Ni:lE;return p(a,bp(he(c,3)))}function MU(a){var c=Ee(a)?iE:bO;return c(a)}function DU(a,c,p){(p?sr(a,c,p):c===t)?c=1:c=Ae(c);var f=Ee(a)?J1:wO;return f(a,c)}function FU(a){var c=Ee(a)?eO:_O;return c(a)}function LU(a){if(a==null)return 0;if(Tr(a))return Ep(a)?Na(a):a.length;var c=Xt(a);return c==bn||c==wn?a.size:uT(a).length}function IU(a,c,p){var f=Ee(a)?qy:RO;return p&&sr(a,c,p)&&(c=t),f(a,he(c,3))}var CU=Fe(function(a,c){if(a==null)return[];var p=c.length;return p>1&&sr(a,c[0],c[1])?c=[]:p>2&&sr(c[0],c[1],c[2])&&(c=[c[0]]),xE(a,Wt(c,1),[])}),Sp=g1||function(){return Ft.Date.now()};function OU(a,c){if(typeof c!="function")throw new Jr(i);return a=Ae(a),function(){if(--a<1)return c.apply(this,arguments)}}function f_(a,c,p){return c=p?t:c,c=a&&c==null?a.length:c,fi(a,ce,t,t,t,t,c)}function d_(a,c){var p;if(typeof c!="function")throw new Jr(i);return a=Ae(a),function(){return--a>0&&(p=c.apply(this,arguments)),a<=1&&(c=t),p}}var IT=Fe(function(a,c,p){var f=w;if(p.length){var h=Hi(p,ja(IT));f|=ne}return fi(a,f,c,p,h)}),g_=Fe(function(a,c,p){var f=w|E;if(p.length){var h=Hi(p,ja(g_));f|=ne}return fi(c,f,a,p,h)});function h_(a,c,p){c=p?t:c;var f=fi(a,V,t,t,t,t,t,c);return f.placeholder=h_.placeholder,f}function y_(a,c,p){c=p?t:c;var f=fi(a,z,t,t,t,t,t,c);return f.placeholder=y_.placeholder,f}function T_(a,c,p){var f,h,S,_,R,D,G=0,K=!1,J=!1,ie=!0;if(typeof a!="function")throw new Jr(i);c=on(c)||0,lt(p)&&(K=!!p.leading,J="maxWait"in p,S=J?At(on(p.maxWait)||0,c):S,ie="trailing"in p?!!p.trailing:ie);function me(St){var kn=f,Ti=h;return f=h=t,G=St,_=a.apply(Ti,kn),_}function ye(St){return G=St,R=$c(Oe,c),K?me(St):_}function Me(St){var kn=St-D,Ti=St-G,N_=c-kn;return J?Zt(N_,S-Ti):N_}function Te(St){var kn=St-D,Ti=St-G;return D===t||kn>=c||kn<0||J&&Ti>=S}function Oe(){var St=Sp();if(Te(St))return Ve(St);R=$c(Oe,Me(St))}function Ve(St){return R=t,ie&&f?me(St):(f=h=t,_)}function Cr(){R!==t&&AE(R),G=0,f=D=h=R=t}function cr(){return R===t?_:Ve(Sp())}function Or(){var St=Sp(),kn=Te(St);if(f=arguments,h=this,D=St,kn){if(R===t)return ye(D);if(J)return AE(R),R=$c(Oe,c),me(D)}return R===t&&(R=$c(Oe,c)),_}return Or.cancel=Cr,Or.flush=cr,Or}var NU=Fe(function(a,c){return sE(a,1,c)}),UU=Fe(function(a,c,p){return sE(a,on(c)||0,p)});function HU(a){return fi(a,ct)}function vp(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new Jr(i);var p=function(){var f=arguments,h=c?c.apply(this,f):f[0],S=p.cache;if(S.has(h))return S.get(h);var _=a.apply(this,f);return p.cache=S.set(h,_)||S,_};return p.cache=new(vp.Cache||pi),p}vp.Cache=pi;function bp(a){if(typeof a!="function")throw new Jr(i);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function BU(a){return d_(2,a)}var VU=kO(function(a,c){c=c.length==1&&Ee(c[0])?it(c[0],Fr(he())):it(Wt(c,1),Fr(he()));var p=c.length;return Fe(function(f){for(var h=-1,S=Zt(f.length,p);++h<S;)f[h]=c[h].call(this,f[h]);return Dr(a,this,f)})}),CT=Fe(function(a,c){var p=Hi(c,ja(CT));return fi(a,ne,t,c,p)}),x_=Fe(function(a,c){var p=Hi(c,ja(x_));return fi(a,se,t,c,p)}),WU=di(function(a,c){return fi(a,fe,t,t,t,c)});function $U(a,c){if(typeof a!="function")throw new Jr(i);return c=c===t?c:Ae(c),Fe(a,c)}function jU(a,c){if(typeof a!="function")throw new Jr(i);return c=c==null?0:At(Ae(c),0),Fe(function(p){var f=p[c],h=zi(p,0,c);return f&&Ui(h,f),Dr(a,this,h)})}function zU(a,c,p){var f=!0,h=!0;if(typeof a!="function")throw new Jr(i);return lt(p)&&(f="leading"in p?!!p.leading:f,h="trailing"in p?!!p.trailing:h),T_(a,c,{leading:f,maxWait:c,trailing:h})}function qU(a){return f_(a,1)}function GU(a,c){return CT(xT(c),a)}function KU(){if(!arguments.length)return[];var a=arguments[0];return Ee(a)?a:[a]}function QU(a){return tn(a,g)}function YU(a,c){return c=typeof c=="function"?c:t,tn(a,g,c)}function ZU(a){return tn(a,m|g)}function XU(a,c){return c=typeof c=="function"?c:t,tn(a,m|g,c)}function JU(a,c){return c==null||aE(a,c,Lt(c))}function Rn(a,c){return a===c||a!==a&&c!==c}var eH=dp(sT),tH=dp(function(a,c){return a>=c}),Bo=mE(function(){return arguments}())?mE:function(a){return dt(a)&&Ye.call(a,"callee")&&!Xw.call(a,"callee")},Ee=B.isArray,rH=Lw?Fr(Lw):uO;function Tr(a){return a!=null&&wp(a.length)&&!hi(a)}function xt(a){return dt(a)&&Tr(a)}function nH(a){return a===!0||a===!1||dt(a)&&ar(a)==Vt}var qi=y1||qT,iH=Iw?Fr(Iw):pO;function oH(a){return dt(a)&&a.nodeType===1&&!jc(a)}function aH(a){if(a==null)return!0;if(Tr(a)&&(Ee(a)||typeof a=="string"||typeof a.splice=="function"||qi(a)||za(a)||Bo(a)))return!a.length;var c=Xt(a);if(c==bn||c==wn)return!a.size;if(Wc(a))return!uT(a).length;for(var p in a)if(Ye.call(a,p))return!1;return!0}function sH(a,c){return Hc(a,c)}function cH(a,c,p){p=typeof p=="function"?p:t;var f=p?p(a,c):t;return f===t?Hc(a,c,t,p):!!f}function OT(a){if(!dt(a))return!1;var c=ar(a);return c==ci||c==Do||typeof a.message=="string"&&typeof a.name=="string"&&!jc(a)}function lH(a){return typeof a=="number"&&eE(a)}function hi(a){if(!lt(a))return!1;var c=ar(a);return c==Fa||c==sw||c==ft||c==LI}function S_(a){return typeof a=="number"&&a==Ae(a)}function wp(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=N}function lt(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function dt(a){return a!=null&&typeof a=="object"}var v_=Cw?Fr(Cw):fO;function uH(a,c){return a===c||lT(a,c,RT(c))}function pH(a,c,p){return p=typeof p=="function"?p:t,lT(a,c,RT(c),p)}function mH(a){return b_(a)&&a!=+a}function fH(a){if(YO(a))throw new we(n);return fE(a)}function dH(a){return a===null}function gH(a){return a==null}function b_(a){return typeof a=="number"||dt(a)&&ar(a)==_c}function jc(a){if(!dt(a)||ar(a)!=li)return!1;var c=Yu(a);if(c===null)return!0;var p=Ye.call(c,"constructor")&&c.constructor;return typeof p=="function"&&p instanceof p&&qu.call(p)==p1}var NT=Ow?Fr(Ow):dO;function hH(a){return S_(a)&&a>=-N&&a<=N}var w_=Nw?Fr(Nw):gO;function Ep(a){return typeof a=="string"||!Ee(a)&&dt(a)&&ar(a)==kc}function Ir(a){return typeof a=="symbol"||dt(a)&&ar(a)==Nu}var za=Uw?Fr(Uw):hO;function yH(a){return a===t}function TH(a){return dt(a)&&Xt(a)==Ac}function xH(a){return dt(a)&&ar(a)==CI}var SH=dp(pT),vH=dp(function(a,c){return a<=c});function E_(a){if(!a)return[];if(Tr(a))return Ep(a)?En(a):yr(a);if(Dc&&a[Dc])return JC(a[Dc]());var c=Xt(a),p=c==bn?Xy:c==wn?$u:qa;return p(a)}function yi(a){if(!a)return a===0?a:0;if(a=on(a),a===L||a===-L){var c=a<0?-1:1;return c*j}return a===a?a:0}function Ae(a){var c=yi(a),p=c%1;return c===c?p?c-p:c:0}function __(a){return a?Oo(Ae(a),0,Q):0}function on(a){if(typeof a=="number")return a;if(Ir(a))return X;if(lt(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=lt(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=jw(a);var p=rC.test(a);return p||iC.test(a)?OC(a.slice(2),p?2:8):tC.test(a)?X:+a}function R_(a){return Vn(a,xr(a))}function bH(a){return a?Oo(Ae(a),-N,N):a===0?a:0}function Qe(a){return a==null?"":Lr(a)}var wH=Wa(function(a,c){if(Wc(c)||Tr(c)){Vn(c,Lt(c),a);return}for(var p in c)Ye.call(c,p)&&Oc(a,p,c[p])}),k_=Wa(function(a,c){Vn(c,xr(c),a)}),_p=Wa(function(a,c,p,f){Vn(c,xr(c),a,f)}),EH=Wa(function(a,c,p,f){Vn(c,Lt(c),a,f)}),_H=di(iT);function RH(a,c){var p=Va(a);return c==null?p:oE(p,c)}var kH=Fe(function(a,c){a=Je(a);var p=-1,f=c.length,h=f>2?c[2]:t;for(h&&sr(c[0],c[1],h)&&(f=1);++p<f;)for(var S=c[p],_=xr(S),R=-1,D=_.length;++R<D;){var G=_[R],K=a[G];(K===t||Rn(K,Ua[G])&&!Ye.call(a,G))&&(a[G]=S[G])}return a}),AH=Fe(function(a){return a.push(t,jE),Dr(A_,t,a)});function PH(a,c){return Bw(a,he(c,3),Bn)}function MH(a,c){return Bw(a,he(c,3),aT)}function DH(a,c){return a==null?a:oT(a,he(c,3),xr)}function FH(a,c){return a==null?a:uE(a,he(c,3),xr)}function LH(a,c){return a&&Bn(a,he(c,3))}function IH(a,c){return a&&aT(a,he(c,3))}function CH(a){return a==null?[]:ap(a,Lt(a))}function OH(a){return a==null?[]:ap(a,xr(a))}function UT(a,c,p){var f=a==null?t:No(a,c);return f===t?p:f}function NH(a,c){return a!=null&&GE(a,c,aO)}function HT(a,c){return a!=null&&GE(a,c,sO)}var UH=HE(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Gu.call(c)),a[c]=p},VT(Sr)),HH=HE(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Gu.call(c)),Ye.call(a,c)?a[c].push(p):a[c]=[p]},he),BH=Fe(Uc);function Lt(a){return Tr(a)?nE(a):uT(a)}function xr(a){return Tr(a)?nE(a,!0):yO(a)}function VH(a,c){var p={};return c=he(c,3),Bn(a,function(f,h,S){mi(p,c(f,h,S),f)}),p}function WH(a,c){var p={};return c=he(c,3),Bn(a,function(f,h,S){mi(p,h,c(f,h,S))}),p}var $H=Wa(function(a,c,p){sp(a,c,p)}),A_=Wa(function(a,c,p,f){sp(a,c,p,f)}),jH=di(function(a,c){var p={};if(a==null)return p;var f=!1;c=it(c,function(S){return S=ji(S,a),f||(f=S.length>1),S}),Vn(a,ET(a),p),f&&(p=tn(p,m|d|g,UO));for(var h=c.length;h--;)hT(p,c[h]);return p});function zH(a,c){return P_(a,bp(he(c)))}var qH=di(function(a,c){return a==null?{}:xO(a,c)});function P_(a,c){if(a==null)return{};var p=it(ET(a),function(f){return[f]});return c=he(c),SE(a,p,function(f,h){return c(f,h[0])})}function GH(a,c,p){c=ji(c,a);var f=-1,h=c.length;for(h||(h=1,a=t);++f<h;){var S=a==null?t:a[Wn(c[f])];S===t&&(f=h,S=p),a=hi(S)?S.call(a):S}return a}function KH(a,c,p){return a==null?a:Bc(a,c,p)}function QH(a,c,p,f){return f=typeof f=="function"?f:t,a==null?a:Bc(a,c,p,f)}var M_=WE(Lt),D_=WE(xr);function YH(a,c,p){var f=Ee(a),h=f||qi(a)||za(a);if(c=he(c,4),p==null){var S=a&&a.constructor;h?p=f?new S:[]:lt(a)?p=hi(S)?Va(Yu(a)):{}:p={}}return(h?Xr:Bn)(a,function(_,R,D){return c(p,_,R,D)}),p}function ZH(a,c){return a==null?!0:hT(a,c)}function XH(a,c,p){return a==null?a:_E(a,c,xT(p))}function JH(a,c,p,f){return f=typeof f=="function"?f:t,a==null?a:_E(a,c,xT(p),f)}function qa(a){return a==null?[]:Zy(a,Lt(a))}function e2(a){return a==null?[]:Zy(a,xr(a))}function t2(a,c,p){return p===t&&(p=c,c=t),p!==t&&(p=on(p),p=p===p?p:0),c!==t&&(c=on(c),c=c===c?c:0),Oo(on(a),c,p)}function r2(a,c,p){return c=yi(c),p===t?(p=c,c=0):p=yi(p),a=on(a),cO(a,c,p)}function n2(a,c,p){if(p&&typeof p!="boolean"&&sr(a,c,p)&&(c=p=t),p===t&&(typeof c=="boolean"?(p=c,c=t):typeof a=="boolean"&&(p=a,a=t)),a===t&&c===t?(a=0,c=1):(a=yi(a),c===t?(c=a,a=0):c=yi(c)),a>c){var f=a;a=c,c=f}if(p||a%1||c%1){var h=tE();return Zt(a+h*(c-a+CC("1e-"+((h+"").length-1))),c)}return fT(a,c)}var i2=$a(function(a,c,p){return c=c.toLowerCase(),a+(p?F_(c):c)});function F_(a){return BT(Qe(a).toLowerCase())}function L_(a){return a=Qe(a),a&&a.replace(aC,KC).replace(_C,"")}function o2(a,c,p){a=Qe(a),c=Lr(c);var f=a.length;p=p===t?f:Oo(Ae(p),0,f);var h=p;return p-=c.length,p>=0&&a.slice(p,h)==c}function a2(a){return a=Qe(a),a&&BI.test(a)?a.replace(uw,QC):a}function s2(a){return a=Qe(a),a&&qI.test(a)?a.replace(Cy,"\\$&"):a}var c2=$a(function(a,c,p){return a+(p?"-":"")+c.toLowerCase()}),l2=$a(function(a,c,p){return a+(p?" ":"")+c.toLowerCase()}),u2=OE("toLowerCase");function p2(a,c,p){a=Qe(a),c=Ae(c);var f=c?Na(a):0;if(!c||f>=c)return a;var h=(c-f)/2;return fp(ep(h),p)+a+fp(Ju(h),p)}function m2(a,c,p){a=Qe(a),c=Ae(c);var f=c?Na(a):0;return c&&f<c?a+fp(c-f,p):a}function f2(a,c,p){a=Qe(a),c=Ae(c);var f=c?Na(a):0;return c&&f<c?fp(c-f,p)+a:a}function d2(a,c,p){return p||c==null?c=0:c&&(c=+c),v1(Qe(a).replace(Oy,""),c||0)}function g2(a,c,p){return(p?sr(a,c,p):c===t)?c=1:c=Ae(c),dT(Qe(a),c)}function h2(){var a=arguments,c=Qe(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var y2=$a(function(a,c,p){return a+(p?"_":"")+c.toLowerCase()});function T2(a,c,p){return p&&typeof p!="number"&&sr(a,c,p)&&(c=p=t),p=p===t?Q:p>>>0,p?(a=Qe(a),a&&(typeof c=="string"||c!=null&&!NT(c))&&(c=Lr(c),!c&&Oa(a))?zi(En(a),0,p):a.split(c,p)):[]}var x2=$a(function(a,c,p){return a+(p?" ":"")+BT(c)});function S2(a,c,p){return a=Qe(a),p=p==null?0:Oo(Ae(p),0,a.length),c=Lr(c),a.slice(p,p+c.length)==c}function v2(a,c,p){var f=T.templateSettings;p&&sr(a,c,p)&&(c=t),a=Qe(a),c=_p({},c,f,$E);var h=_p({},c.imports,f.imports,$E),S=Lt(h),_=Zy(h,S),R,D,G=0,K=c.interpolate||Uu,J="__p += '",ie=Jy((c.escape||Uu).source+"|"+K.source+"|"+(K===pw?eC:Uu).source+"|"+(c.evaluate||Uu).source+"|$","g"),me="//# sourceURL="+(Ye.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++MC+"]")+`
`;a.replace(ie,function(Te,Oe,Ve,Cr,cr,Or){return Ve||(Ve=Cr),J+=a.slice(G,Or).replace(sC,YC),Oe&&(R=!0,J+=`' +
__e(`+Oe+`) +
'`),cr&&(D=!0,J+=`';
`+cr+`;
__p += '`),Ve&&(J+=`' +
((__t = (`+Ve+`)) == null ? '' : __t) +
'`),G=Or+Te.length,Te}),J+=`';
`;var ye=Ye.call(c,"variable")&&c.variable;if(!ye)J=`with (obj) {
`+J+`
}
`;else if(XI.test(ye))throw new we(o);J=(D?J.replace(OI,""):J).replace(NI,"$1").replace(UI,"$1;"),J="function("+(ye||"obj")+`) {
`+(ye?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(D?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+J+`return __p
}`;var Me=C_(function(){return Ge(S,me+"return "+J).apply(t,_)});if(Me.source=J,OT(Me))throw Me;return Me}function b2(a){return Qe(a).toLowerCase()}function w2(a){return Qe(a).toUpperCase()}function E2(a,c,p){if(a=Qe(a),a&&(p||c===t))return jw(a);if(!a||!(c=Lr(c)))return a;var f=En(a),h=En(c),S=zw(f,h),_=qw(f,h)+1;return zi(f,S,_).join("")}function _2(a,c,p){if(a=Qe(a),a&&(p||c===t))return a.slice(0,Kw(a)+1);if(!a||!(c=Lr(c)))return a;var f=En(a),h=qw(f,En(c))+1;return zi(f,0,h).join("")}function R2(a,c,p){if(a=Qe(a),a&&(p||c===t))return a.replace(Oy,"");if(!a||!(c=Lr(c)))return a;var f=En(a),h=zw(f,En(c));return zi(f,h).join("")}function k2(a,c){var p=Bt,f=mt;if(lt(c)){var h="separator"in c?c.separator:h;p="length"in c?Ae(c.length):p,f="omission"in c?Lr(c.omission):f}a=Qe(a);var S=a.length;if(Oa(a)){var _=En(a);S=_.length}if(p>=S)return a;var R=p-Na(f);if(R<1)return f;var D=_?zi(_,0,R).join(""):a.slice(0,R);if(h===t)return D+f;if(_&&(R+=D.length-R),NT(h)){if(a.slice(R).search(h)){var G,K=D;for(h.global||(h=Jy(h.source,Qe(mw.exec(h))+"g")),h.lastIndex=0;G=h.exec(K);)var J=G.index;D=D.slice(0,J===t?R:J)}}else if(a.indexOf(Lr(h),R)!=R){var ie=D.lastIndexOf(h);ie>-1&&(D=D.slice(0,ie))}return D+f}function A2(a){return a=Qe(a),a&&HI.test(a)?a.replace(lw,n1):a}var P2=$a(function(a,c,p){return a+(p?" ":"")+c.toUpperCase()}),BT=OE("toUpperCase");function I_(a,c,p){return a=Qe(a),c=p?t:c,c===t?XC(a)?a1(a):$C(a):a.match(c)||[]}var C_=Fe(function(a,c){try{return Dr(a,t,c)}catch(p){return OT(p)?p:new we(p)}}),M2=di(function(a,c){return Xr(c,function(p){p=Wn(p),mi(a,p,IT(a[p],a))}),a});function D2(a){var c=a==null?0:a.length,p=he();return a=c?it(a,function(f){if(typeof f[1]!="function")throw new Jr(i);return[p(f[0]),f[1]]}):[],Fe(function(f){for(var h=-1;++h<c;){var S=a[h];if(Dr(S[0],this,f))return Dr(S[1],this,f)}})}function F2(a){return nO(tn(a,m))}function VT(a){return function(){return a}}function L2(a,c){return a==null||a!==a?c:a}var I2=UE(),C2=UE(!0);function Sr(a){return a}function WT(a){return dE(typeof a=="function"?a:tn(a,m))}function O2(a){return hE(tn(a,m))}function N2(a,c){return yE(a,tn(c,m))}var U2=Fe(function(a,c){return function(p){return Uc(p,a,c)}}),H2=Fe(function(a,c){return function(p){return Uc(a,p,c)}});function $T(a,c,p){var f=Lt(c),h=ap(c,f);p==null&&!(lt(c)&&(h.length||!f.length))&&(p=c,c=a,a=this,h=ap(c,Lt(c)));var S=!(lt(p)&&"chain"in p)||!!p.chain,_=hi(a);return Xr(h,function(R){var D=c[R];a[R]=D,_&&(a.prototype[R]=function(){var G=this.__chain__;if(S||G){var K=a(this.__wrapped__),J=K.__actions__=yr(this.__actions__);return J.push({func:D,args:arguments,thisArg:a}),K.__chain__=G,K}return D.apply(a,Ui([this.value()],arguments))})}),a}function B2(){return Ft._===this&&(Ft._=m1),this}function jT(){}function V2(a){return a=Ae(a),Fe(function(c){return TE(c,a)})}var W2=vT(it),$2=vT(Hw),j2=vT(qy);function O_(a){return AT(a)?Gy(Wn(a)):SO(a)}function z2(a){return function(c){return a==null?t:No(a,c)}}var q2=BE(),G2=BE(!0);function zT(){return[]}function qT(){return!1}function K2(){return{}}function Q2(){return""}function Y2(){return!0}function Z2(a,c){if(a=Ae(a),a<1||a>N)return[];var p=Q,f=Zt(a,Q);c=he(c),a-=Q;for(var h=Yy(f,c);++p<a;)c(p);return h}function X2(a){return Ee(a)?it(a,Wn):Ir(a)?[a]:yr(r_(Qe(a)))}function J2(a){var c=++u1;return Qe(a)+c}var eB=mp(function(a,c){return a+c},0),tB=bT("ceil"),rB=mp(function(a,c){return a/c},1),nB=bT("floor");function iB(a){return a&&a.length?op(a,Sr,sT):t}function oB(a,c){return a&&a.length?op(a,he(c,2),sT):t}function aB(a){return Ww(a,Sr)}function sB(a,c){return Ww(a,he(c,2))}function cB(a){return a&&a.length?op(a,Sr,pT):t}function lB(a,c){return a&&a.length?op(a,he(c,2),pT):t}var uB=mp(function(a,c){return a*c},1),pB=bT("round"),mB=mp(function(a,c){return a-c},0);function fB(a){return a&&a.length?Qy(a,Sr):0}function dB(a,c){return a&&a.length?Qy(a,he(c,2)):0}return T.after=OU,T.ary=f_,T.assign=wH,T.assignIn=k_,T.assignInWith=_p,T.assignWith=EH,T.at=_H,T.before=d_,T.bind=IT,T.bindAll=M2,T.bindKey=g_,T.castArray=KU,T.chain=u_,T.chunk=nN,T.compact=iN,T.concat=oN,T.cond=D2,T.conforms=F2,T.constant=VT,T.countBy=fU,T.create=RH,T.curry=h_,T.curryRight=y_,T.debounce=T_,T.defaults=kH,T.defaultsDeep=AH,T.defer=NU,T.delay=UU,T.difference=aN,T.differenceBy=sN,T.differenceWith=cN,T.drop=lN,T.dropRight=uN,T.dropRightWhile=pN,T.dropWhile=mN,T.fill=fN,T.filter=gU,T.flatMap=TU,T.flatMapDeep=xU,T.flatMapDepth=SU,T.flatten=a_,T.flattenDeep=dN,T.flattenDepth=gN,T.flip=HU,T.flow=I2,T.flowRight=C2,T.fromPairs=hN,T.functions=CH,T.functionsIn=OH,T.groupBy=vU,T.initial=TN,T.intersection=xN,T.intersectionBy=SN,T.intersectionWith=vN,T.invert=UH,T.invertBy=HH,T.invokeMap=wU,T.iteratee=WT,T.keyBy=EU,T.keys=Lt,T.keysIn=xr,T.map=xp,T.mapKeys=VH,T.mapValues=WH,T.matches=O2,T.matchesProperty=N2,T.memoize=vp,T.merge=$H,T.mergeWith=A_,T.method=U2,T.methodOf=H2,T.mixin=$T,T.negate=bp,T.nthArg=V2,T.omit=jH,T.omitBy=zH,T.once=BU,T.orderBy=_U,T.over=W2,T.overArgs=VU,T.overEvery=$2,T.overSome=j2,T.partial=CT,T.partialRight=x_,T.partition=RU,T.pick=qH,T.pickBy=P_,T.property=O_,T.propertyOf=z2,T.pull=_N,T.pullAll=c_,T.pullAllBy=RN,T.pullAllWith=kN,T.pullAt=AN,T.range=q2,T.rangeRight=G2,T.rearg=WU,T.reject=PU,T.remove=PN,T.rest=$U,T.reverse=FT,T.sampleSize=DU,T.set=KH,T.setWith=QH,T.shuffle=FU,T.slice=MN,T.sortBy=CU,T.sortedUniq=NN,T.sortedUniqBy=UN,T.split=T2,T.spread=jU,T.tail=HN,T.take=BN,T.takeRight=VN,T.takeRightWhile=WN,T.takeWhile=$N,T.tap=iU,T.throttle=zU,T.thru=Tp,T.toArray=E_,T.toPairs=M_,T.toPairsIn=D_,T.toPath=X2,T.toPlainObject=R_,T.transform=YH,T.unary=qU,T.union=jN,T.unionBy=zN,T.unionWith=qN,T.uniq=GN,T.uniqBy=KN,T.uniqWith=QN,T.unset=ZH,T.unzip=LT,T.unzipWith=l_,T.update=XH,T.updateWith=JH,T.values=qa,T.valuesIn=e2,T.without=YN,T.words=I_,T.wrap=GU,T.xor=ZN,T.xorBy=XN,T.xorWith=JN,T.zip=eU,T.zipObject=tU,T.zipObjectDeep=rU,T.zipWith=nU,T.entries=M_,T.entriesIn=D_,T.extend=k_,T.extendWith=_p,$T(T,T),T.add=eB,T.attempt=C_,T.camelCase=i2,T.capitalize=F_,T.ceil=tB,T.clamp=t2,T.clone=QU,T.cloneDeep=ZU,T.cloneDeepWith=XU,T.cloneWith=YU,T.conformsTo=JU,T.deburr=L_,T.defaultTo=L2,T.divide=rB,T.endsWith=o2,T.eq=Rn,T.escape=a2,T.escapeRegExp=s2,T.every=dU,T.find=hU,T.findIndex=i_,T.findKey=PH,T.findLast=yU,T.findLastIndex=o_,T.findLastKey=MH,T.floor=nB,T.forEach=p_,T.forEachRight=m_,T.forIn=DH,T.forInRight=FH,T.forOwn=LH,T.forOwnRight=IH,T.get=UT,T.gt=eH,T.gte=tH,T.has=NH,T.hasIn=HT,T.head=s_,T.identity=Sr,T.includes=bU,T.indexOf=yN,T.inRange=r2,T.invoke=BH,T.isArguments=Bo,T.isArray=Ee,T.isArrayBuffer=rH,T.isArrayLike=Tr,T.isArrayLikeObject=xt,T.isBoolean=nH,T.isBuffer=qi,T.isDate=iH,T.isElement=oH,T.isEmpty=aH,T.isEqual=sH,T.isEqualWith=cH,T.isError=OT,T.isFinite=lH,T.isFunction=hi,T.isInteger=S_,T.isLength=wp,T.isMap=v_,T.isMatch=uH,T.isMatchWith=pH,T.isNaN=mH,T.isNative=fH,T.isNil=gH,T.isNull=dH,T.isNumber=b_,T.isObject=lt,T.isObjectLike=dt,T.isPlainObject=jc,T.isRegExp=NT,T.isSafeInteger=hH,T.isSet=w_,T.isString=Ep,T.isSymbol=Ir,T.isTypedArray=za,T.isUndefined=yH,T.isWeakMap=TH,T.isWeakSet=xH,T.join=bN,T.kebabCase=c2,T.last=nn,T.lastIndexOf=wN,T.lowerCase=l2,T.lowerFirst=u2,T.lt=SH,T.lte=vH,T.max=iB,T.maxBy=oB,T.mean=aB,T.meanBy=sB,T.min=cB,T.minBy=lB,T.stubArray=zT,T.stubFalse=qT,T.stubObject=K2,T.stubString=Q2,T.stubTrue=Y2,T.multiply=uB,T.nth=EN,T.noConflict=B2,T.noop=jT,T.now=Sp,T.pad=p2,T.padEnd=m2,T.padStart=f2,T.parseInt=d2,T.random=n2,T.reduce=kU,T.reduceRight=AU,T.repeat=g2,T.replace=h2,T.result=GH,T.round=pB,T.runInContext=P,T.sample=MU,T.size=LU,T.snakeCase=y2,T.some=IU,T.sortedIndex=DN,T.sortedIndexBy=FN,T.sortedIndexOf=LN,T.sortedLastIndex=IN,T.sortedLastIndexBy=CN,T.sortedLastIndexOf=ON,T.startCase=x2,T.startsWith=S2,T.subtract=mB,T.sum=fB,T.sumBy=dB,T.template=v2,T.times=Z2,T.toFinite=yi,T.toInteger=Ae,T.toLength=__,T.toLower=b2,T.toNumber=on,T.toSafeInteger=bH,T.toString=Qe,T.toUpper=w2,T.trim=E2,T.trimEnd=_2,T.trimStart=R2,T.truncate=k2,T.unescape=A2,T.uniqueId=J2,T.upperCase=P2,T.upperFirst=BT,T.each=p_,T.eachRight=m_,T.first=s_,$T(T,function(){var a={};return Bn(T,function(c,p){Ye.call(T.prototype,p)||(a[p]=c)}),a}(),{chain:!1}),T.VERSION=e,Xr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){T[a].placeholder=T}),Xr(["drop","take"],function(a,c){He.prototype[a]=function(p){p=p===t?1:At(Ae(p),0);var f=this.__filtered__&&!c?new He(this):this.clone();return f.__filtered__?f.__takeCount__=Zt(p,f.__takeCount__):f.__views__.push({size:Zt(p,Q),type:a+(f.__dir__<0?"Right":"")}),f},He.prototype[a+"Right"]=function(p){return this.reverse()[a](p).reverse()}}),Xr(["filter","map","takeWhile"],function(a,c){var p=c+1,f=p==A||p==Z;He.prototype[a]=function(h){var S=this.clone();return S.__iteratees__.push({iteratee:he(h,3),type:p}),S.__filtered__=S.__filtered__||f,S}}),Xr(["head","last"],function(a,c){var p="take"+(c?"Right":"");He.prototype[a]=function(){return this[p](1).value()[0]}}),Xr(["initial","tail"],function(a,c){var p="drop"+(c?"":"Right");He.prototype[a]=function(){return this.__filtered__?new He(this):this[p](1)}}),He.prototype.compact=function(){return this.filter(Sr)},He.prototype.find=function(a){return this.filter(a).head()},He.prototype.findLast=function(a){return this.reverse().find(a)},He.prototype.invokeMap=Fe(function(a,c){return typeof a=="function"?new He(this):this.map(function(p){return Uc(p,a,c)})}),He.prototype.reject=function(a){return this.filter(bp(he(a)))},He.prototype.slice=function(a,c){a=Ae(a);var p=this;return p.__filtered__&&(a>0||c<0)?new He(p):(a<0?p=p.takeRight(-a):a&&(p=p.drop(a)),c!==t&&(c=Ae(c),p=c<0?p.dropRight(-c):p.take(c-a)),p)},He.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},He.prototype.toArray=function(){return this.take(Q)},Bn(He.prototype,function(a,c){var p=/^(?:filter|find|map|reject)|While$/.test(c),f=/^(?:head|last)$/.test(c),h=T[f?"take"+(c=="last"?"Right":""):c],S=f||/^find/.test(c);h&&(T.prototype[c]=function(){var _=this.__wrapped__,R=f?[1]:arguments,D=_ instanceof He,G=R[0],K=D||Ee(_),J=function(Oe){var Ve=h.apply(T,Ui([Oe],R));return f&&ie?Ve[0]:Ve};K&&p&&typeof G=="function"&&G.length!=1&&(D=K=!1);var ie=this.__chain__,me=!!this.__actions__.length,ye=S&&!ie,Me=D&&!me;if(!S&&K){_=Me?_:new He(this);var Te=a.apply(_,R);return Te.__actions__.push({func:Tp,args:[J],thisArg:t}),new en(Te,ie)}return ye&&Me?a.apply(this,R):(Te=this.thru(J),ye?f?Te.value()[0]:Te.value():Te)})}),Xr(["pop","push","shift","sort","splice","unshift"],function(a){var c=ju[a],p=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",f=/^(?:pop|shift)$/.test(a);T.prototype[a]=function(){var h=arguments;if(f&&!this.__chain__){var S=this.value();return c.apply(Ee(S)?S:[],h)}return this[p](function(_){return c.apply(Ee(_)?_:[],h)})}}),Bn(He.prototype,function(a,c){var p=T[c];if(p){var f=p.name+"";Ye.call(Ba,f)||(Ba[f]=[]),Ba[f].push({name:c,func:p})}}),Ba[pp(t,E).name]=[{name:"wrapper",func:t}],He.prototype.clone=A1,He.prototype.reverse=P1,He.prototype.value=M1,T.prototype.at=oU,T.prototype.chain=aU,T.prototype.commit=sU,T.prototype.next=cU,T.prototype.plant=uU,T.prototype.reverse=pU,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=mU,T.prototype.first=T.prototype.head,Dc&&(T.prototype[Dc]=lU),T},Bi=s1();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ft._=Bi,define(function(){return Bi})):Fo?((Fo.exports=Bi)._=Bi,Wy._=Bi):Ft._=Bi}).call(lc)});var MF=Ga((C1e,PF)=>{"use strict";PF.exports=kF;function kF(t,e,r){t instanceof RegExp&&(t=RF(t,r)),e instanceof RegExp&&(e=RF(e,r));var n=AF(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function RF(t,e){var r=e.match(t);return r?r[0]:null}kF.range=AF;function AF(t,e,r){var n,i,o,s,l,u=r.indexOf(t),m=r.indexOf(e,u+1),d=u;if(u>=0&&m>0){if(t===e)return[u,m];for(n=[],o=r.length;d>=0&&!l;)d==u?(n.push(d),u=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),m]:(i=n.pop(),i<o&&(o=i,s=m),m=r.indexOf(e,d+1)),d=u<m&&u>=0?u:m;n.length&&(l=[o,s])}return l}});var UF=Ga((O1e,NF)=>{var DF=MF();NF.exports=o7;var FF="\0SLASH"+Math.random()+"\0",LF="\0OPEN"+Math.random()+"\0",Vv="\0CLOSE"+Math.random()+"\0",IF="\0COMMA"+Math.random()+"\0",CF="\0PERIOD"+Math.random()+"\0";function Bv(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function n7(t){return t.split("\\\\").join(FF).split("\\{").join(LF).split("\\}").join(Vv).split("\\,").join(IF).split("\\.").join(CF)}function i7(t){return t.split(FF).join("\\").split(LF).join("{").split(Vv).join("}").split(IF).join(",").split(CF).join(".")}function OF(t){if(!t)return[""];var e=[],r=DF("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var l=OF(o);return o.length&&(s[s.length-1]+=l.shift(),s.push.apply(s,l)),e.push.apply(e,s),e}function o7(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),mu(n7(t),!0).map(i7)):[]}function a7(t){return"{"+t+"}"}function s7(t){return/^-?0\d/.test(t)}function c7(t,e){return t<=e}function l7(t,e){return t>=e}function mu(t,e){var r=[],n=DF("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?mu(n.post,!1):[""];if(/\$$/.test(n.pre))for(var s=0;s<o.length;s++){var l=i+"{"+n.body+"}"+o[s];r.push(l)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),m=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=u||m,g=n.body.indexOf(",")>=0;if(!d&&!g)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+Vv+n.post,mu(t)):[t];var y;if(d)y=n.body.split(/\.\./);else if(y=OF(n.body),y.length===1&&(y=mu(y[0],!1).map(a7),y.length===1))return o.map(function(H){return n.pre+y[0]+H});var x;if(d){var w=Bv(y[0]),E=Bv(y[1]),U=Math.max(y[0].length,y[1].length),V=y.length==3?Math.abs(Bv(y[2])):1,z=c7,ne=E<w;ne&&(V*=-1,z=l7);var se=y.some(s7);x=[];for(var ce=w;z(ce,E);ce+=V){var fe;if(m)fe=String.fromCharCode(ce),fe==="\\"&&(fe="");else if(fe=String(ce),se){var ct=U-fe.length;if(ct>0){var Bt=new Array(ct+1).join("0");ce<0?fe="-"+Bt+fe.slice(1):fe=Bt+fe}}x.push(fe)}}else{x=[];for(var mt=0;mt<y.length;mt++)x.push.apply(x,mu(y[mt],!1))}for(var mt=0;mt<x.length;mt++)for(var s=0;s<o.length;s++){var l=i+x[mt]+o[s];(!e||d||l)&&r.push(l)}}return r}});var Q8={};U_(Q8,{default:()=>DI});module.exports=SB(Q8);var GT="cursorless.command",kp=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},gt=class extends kp{constructor(){super(...arguments);this.isVisible=!1}},vt=class extends kp{constructor(){super(...arguments);this.isVisible=!0}};var Z8={"cursorless.toggleDecorations":new vt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new vt("Recompute decoration styles"),"cursorless.recordTestCase":new vt("Record test case"),"cursorless.recordOneTestCaseThenPause":new vt("Record one test case, then pause"),"cursorless.pauseRecording":new vt("Pause test case recording"),"cursorless.resumeRecording":new vt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new vt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new vt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new vt("Show documentation"),"cursorless.showInstallationDependencies":new vt("Show installation dependencies"),"cursorless.showScopeVisualizer":new vt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new vt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new vt("Analyze collected command history"),"cursorless.tutorial.start":new gt("Start a tutorial"),"cursorless.tutorial.next":new vt("Tutorial next"),"cursorless.tutorial.previous":new vt("Tutorial previous"),"cursorless.tutorial.restart":new vt("Tutorial restart"),"cursorless.tutorial.resume":new vt("Tutorial resume"),"cursorless.tutorial.list":new vt("Tutorial list"),"cursorless.documentationOpened":new gt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new gt("The core cursorless command"),"cursorless.repeatPreviousCommand":new vt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new gt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new gt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new gt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new gt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new gt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new gt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new gt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new gt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new gt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new gt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new gt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new gt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new gt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new gt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new gt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new gt("Redo keyboard targeting changes"),"cursorless.migrateSnippets":new gt("Migrate snippets from the old Cursorless format to the new community format")};var Ap=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Pp=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Mp=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},ht=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Dp=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var vB=typeof global=="object"&&global&&global.Object===Object&&global,Fp=vB;var bB=typeof self=="object"&&self&&self.Object===Object&&self,wB=Fp||bB||Function("return this")(),It=wB;var EB=It.Symbol,lr=EB;var B_=Object.prototype,_B=B_.hasOwnProperty,RB=B_.toString,zc=lr?lr.toStringTag:void 0;function kB(t){var e=_B.call(t,zc),r=t[zc];try{t[zc]=void 0;var n=!0}catch{}var i=RB.call(t);return n&&(e?t[zc]=r:delete t[zc]),i}var V_=kB;var AB=Object.prototype,PB=AB.toString;function MB(t){return PB.call(t)}var W_=MB;var DB="[object Null]",FB="[object Undefined]",$_=lr?lr.toStringTag:void 0;function LB(t){return t==null?t===void 0?FB:DB:$_&&$_ in Object(t)?V_(t):W_(t)}var An=LB;function IB(t){return t!=null&&typeof t=="object"}var ur=IB;var CB="[object Symbol]";function OB(t){return typeof t=="symbol"||ur(t)&&An(t)==CB}var Ur=OB;function NB(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var an=NB;var UB=Array.isArray,Ze=UB;var HB=1/0,j_=lr?lr.prototype:void 0,z_=j_?j_.toString:void 0;function q_(t){if(typeof t=="string")return t;if(Ze(t))return an(t,q_)+"";if(Ur(t))return z_?z_.call(t):"";var e=t+"";return e=="0"&&1/t==-HB?"-0":e}var G_=q_;var BB=/\s/;function VB(t){for(var e=t.length;e--&&BB.test(t.charAt(e)););return e}var K_=VB;var WB=/^\s+/;function $B(t){return t&&t.slice(0,K_(t)+1).replace(WB,"")}var Q_=$B;function jB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Hr=jB;var Y_=NaN,zB=/^[-+]0x[0-9a-f]+$/i,qB=/^0b[01]+$/i,GB=/^0o[0-7]+$/i,KB=parseInt;function QB(t){if(typeof t=="number")return t;if(Ur(t))return Y_;if(Hr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Hr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Q_(t);var r=qB.test(t);return r||GB.test(t)?KB(t.slice(2),r?2:8):zB.test(t)?Y_:+t}var Z_=QB;var X_=1/0,YB=17976931348623157e292;function ZB(t){if(!t)return t===0?t:0;if(t=Z_(t),t===X_||t===-X_){var e=t<0?-1:1;return e*YB}return t===t?t:0}var Ka=ZB;function XB(t){var e=Ka(t),r=e%1;return e===e?r?e-r:e:0}var Lp=XB;function JB(t){return t}var vr=JB;var eV="[object AsyncFunction]",tV="[object Function]",rV="[object GeneratorFunction]",nV="[object Proxy]";function iV(t){if(!Hr(t))return!1;var e=An(t);return e==tV||e==rV||e==eV||e==nV}var Ip=iV;var oV=It["__core-js_shared__"],Cp=oV;var J_=function(){var t=/[^.]+$/.exec(Cp&&Cp.keys&&Cp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function aV(t){return!!J_&&J_ in t}var e0=aV;var sV=Function.prototype,cV=sV.toString;function lV(t){if(t!=null){try{return cV.call(t)}catch{}try{return t+""}catch{}}return""}var xi=lV;var uV=/[\\^$.*+?()[\]{}|]/g,pV=/^\[object .+?Constructor\]$/,mV=Function.prototype,fV=Object.prototype,dV=mV.toString,gV=fV.hasOwnProperty,hV=RegExp("^"+dV.call(gV).replace(uV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function yV(t){if(!Hr(t)||e0(t))return!1;var e=Ip(t)?hV:pV;return e.test(xi(t))}var t0=yV;function TV(t,e){return t?.[e]}var r0=TV;function xV(t,e){var r=r0(t,e);return t0(r)?r:void 0}var br=xV;var SV=br(It,"WeakMap"),Vo=SV;var vV=Vo&&new Vo,KT=vV;var n0=Object.create,bV=function(){function t(){}return function(e){if(!Hr(e))return{};if(n0)return n0(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Op=bV;function wV(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var i0=wV;function EV(){}var Qa=EV;var _V=4294967295;function Np(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_V,this.__views__=[]}Np.prototype=Op(Qa.prototype);Np.prototype.constructor=Np;var Ya=Np;function RV(){}var Up=RV;var kV=KT?function(t){return KT.get(t)}:Up,Hp=kV;var AV={},QT=AV;var PV=Object.prototype,MV=PV.hasOwnProperty;function DV(t){for(var e=t.name+"",r=QT[e],n=MV.call(QT,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Za=DV;function Bp(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Bp.prototype=Op(Qa.prototype);Bp.prototype.constructor=Bp;var Gi=Bp;function FV(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Ki=FV;function LV(t){if(t instanceof Ya)return t.clone();var e=new Gi(t.__wrapped__,t.__chain__);return e.__actions__=Ki(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var o0=LV;var IV=Object.prototype,CV=IV.hasOwnProperty;function Vp(t){if(ur(t)&&!Ze(t)&&!(t instanceof Ya)){if(t instanceof Gi)return t;if(CV.call(t,"__wrapped__"))return o0(t)}return new Gi(t)}Vp.prototype=Qa.prototype;Vp.prototype.constructor=Vp;var a0=Vp;function OV(t){var e=Za(t),r=a0[e];if(typeof r!="function"||!(e in Ya.prototype))return!1;if(t===r)return!0;var n=Hp(r);return!!n&&t===n[0]}var YT=OV;var NV=800,UV=16,HV=Date.now;function BV(t){var e=0,r=0;return function(){var n=HV(),i=UV-(n-r);if(r=n,i>0){if(++e>=NV)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var s0=BV;function VV(t){return function(){return t}}var c0=VV;var WV=function(){try{var t=br(Object,"defineProperty");return t({},"",{}),t}catch{}}(),ZT=WV;var $V=ZT?function(t,e){return ZT(t,"toString",{configurable:!0,enumerable:!1,value:c0(e),writable:!0})}:vr,l0=$V;var jV=s0(l0),Wp=jV;function zV(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var $p=zV;function qV(t){return t!==t}var u0=qV;function GV(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var p0=GV;function KV(t,e,r){return e===e?p0(t,e,r):$p(t,u0,r)}var jp=KV;function QV(t,e){var r=t==null?0:t.length;return!!r&&jp(t,e,0)>-1}var m0=QV;var YV=9007199254740991,ZV=/^(?:0|[1-9]\d*)$/;function XV(t,e){var r=typeof t;return e=e??YV,!!e&&(r=="number"||r!="symbol"&&ZV.test(t))&&t>-1&&t%1==0&&t<e}var Xa=XV;function JV(t,e){return t===e||t!==t&&e!==e}var Ja=JV;var f0=Math.max;function eW(t,e,r){return e=f0(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=f0(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),i0(t,this,l)}}var zp=eW;function tW(t,e){return Wp(zp(t,e,vr),t+"")}var es=tW;var rW=9007199254740991;function nW(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=rW}var ts=nW;function iW(t){return t!=null&&ts(t.length)&&!Ip(t)}var $n=iW;function oW(t,e,r){if(!Hr(r))return!1;var n=typeof e;return(n=="number"?$n(r)&&Xa(e,r.length):n=="string"&&e in r)?Ja(r[e],t):!1}var Wo=oW;var aW=Object.prototype;function sW(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||aW;return t===r}var d0=sW;function cW(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var qp=cW;var lW="[object Arguments]";function uW(t){return ur(t)&&An(t)==lW}var XT=uW;var g0=Object.prototype,pW=g0.hasOwnProperty,mW=g0.propertyIsEnumerable,fW=XT(function(){return arguments}())?XT:function(t){return ur(t)&&pW.call(t,"callee")&&!mW.call(t,"callee")},rs=fW;function dW(){return!1}var h0=dW;var x0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,y0=x0&&typeof module=="object"&&module&&!module.nodeType&&module,gW=y0&&y0.exports===x0,T0=gW?It.Buffer:void 0,hW=T0?T0.isBuffer:void 0,yW=hW||h0,qc=yW;var TW="[object Arguments]",xW="[object Array]",SW="[object Boolean]",vW="[object Date]",bW="[object Error]",wW="[object Function]",EW="[object Map]",_W="[object Number]",RW="[object Object]",kW="[object RegExp]",AW="[object Set]",PW="[object String]",MW="[object WeakMap]",DW="[object ArrayBuffer]",FW="[object DataView]",LW="[object Float32Array]",IW="[object Float64Array]",CW="[object Int8Array]",OW="[object Int16Array]",NW="[object Int32Array]",UW="[object Uint8Array]",HW="[object Uint8ClampedArray]",BW="[object Uint16Array]",VW="[object Uint32Array]",rt={};rt[LW]=rt[IW]=rt[CW]=rt[OW]=rt[NW]=rt[UW]=rt[HW]=rt[BW]=rt[VW]=!0;rt[TW]=rt[xW]=rt[DW]=rt[SW]=rt[FW]=rt[vW]=rt[bW]=rt[wW]=rt[EW]=rt[_W]=rt[RW]=rt[kW]=rt[AW]=rt[PW]=rt[MW]=!1;function WW(t){return ur(t)&&ts(t.length)&&!!rt[An(t)]}var S0=WW;function $W(t){return function(e){return t(e)}}var ns=$W;var v0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Gc=v0&&typeof module=="object"&&module&&!module.nodeType&&module,jW=Gc&&Gc.exports===v0,JT=jW&&Fp.process,zW=function(){try{var t=Gc&&Gc.require&&Gc.require("util").types;return t||JT&&JT.binding&&JT.binding("util")}catch{}}(),ex=zW;var b0=ex&&ex.isTypedArray,qW=b0?ns(b0):S0,Gp=qW;var GW=Object.prototype,KW=GW.hasOwnProperty;function QW(t,e){var r=Ze(t),n=!r&&rs(t),i=!r&&!n&&qc(t),o=!r&&!n&&!i&&Gp(t),s=r||n||i||o,l=s?qp(t.length,String):[],u=l.length;for(var m in t)(e||KW.call(t,m))&&!(s&&(m=="length"||i&&(m=="offset"||m=="parent")||o&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||Xa(m,u)))&&l.push(m);return l}var w0=QW;function YW(t,e){return function(r){return t(e(r))}}var E0=YW;var ZW=E0(Object.keys,Object),_0=ZW;var XW=Object.prototype,JW=XW.hasOwnProperty;function e$(t){if(!d0(t))return _0(t);var e=[];for(var r in Object(t))JW.call(t,r)&&r!="constructor"&&e.push(r);return e}var R0=e$;function t$(t){return $n(t)?w0(t):R0(t)}var Qi=t$;var r$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n$=/^\w*$/;function i$(t,e){if(Ze(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Ur(t)?!0:n$.test(t)||!r$.test(t)||e!=null&&t in Object(e)}var is=i$;var o$=br(Object,"create"),Si=o$;function a$(){this.__data__=Si?Si(null):{},this.size=0}var k0=a$;function s$(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var A0=s$;var c$="__lodash_hash_undefined__",l$=Object.prototype,u$=l$.hasOwnProperty;function p$(t){var e=this.__data__;if(Si){var r=e[t];return r===c$?void 0:r}return u$.call(e,t)?e[t]:void 0}var P0=p$;var m$=Object.prototype,f$=m$.hasOwnProperty;function d$(t){var e=this.__data__;return Si?e[t]!==void 0:f$.call(e,t)}var M0=d$;var g$="__lodash_hash_undefined__";function h$(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Si&&e===void 0?g$:e,this}var D0=h$;function os(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}os.prototype.clear=k0;os.prototype.delete=A0;os.prototype.get=P0;os.prototype.has=M0;os.prototype.set=D0;var tx=os;function y$(){this.__data__=[],this.size=0}var F0=y$;function T$(t,e){for(var r=t.length;r--;)if(Ja(t[r][0],e))return r;return-1}var Yi=T$;var x$=Array.prototype,S$=x$.splice;function v$(t){var e=this.__data__,r=Yi(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():S$.call(e,r,1),--this.size,!0}var L0=v$;function b$(t){var e=this.__data__,r=Yi(e,t);return r<0?void 0:e[r][1]}var I0=b$;function w$(t){return Yi(this.__data__,t)>-1}var C0=w$;function E$(t,e){var r=this.__data__,n=Yi(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var O0=E$;function as(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}as.prototype.clear=F0;as.prototype.delete=L0;as.prototype.get=I0;as.prototype.has=C0;as.prototype.set=O0;var Zi=as;var _$=br(It,"Map"),Xi=_$;function R$(){this.size=0,this.__data__={hash:new tx,map:new(Xi||Zi),string:new tx}}var N0=R$;function k$(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var U0=k$;function A$(t,e){var r=t.__data__;return U0(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Ji=A$;function P$(t){var e=Ji(this,t).delete(t);return this.size-=e?1:0,e}var H0=P$;function M$(t){return Ji(this,t).get(t)}var B0=M$;function D$(t){return Ji(this,t).has(t)}var V0=D$;function F$(t,e){var r=Ji(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var W0=F$;function ss(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ss.prototype.clear=N0;ss.prototype.delete=H0;ss.prototype.get=B0;ss.prototype.has=V0;ss.prototype.set=W0;var $o=ss;var L$="Expected a function";function rx(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(L$);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(rx.Cache||$o),r}rx.Cache=$o;var Kc=rx;var I$=500;function C$(t){var e=Kc(t,function(n){return r.size===I$&&r.clear(),n}),r=e.cache;return e}var $0=C$;var O$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,N$=/\\(\\)?/g,U$=$0(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(O$,function(r,n,i,o){e.push(i?o.replace(N$,"$1"):n||r)}),e}),j0=U$;function H$(t){return t==null?"":G_(t)}var Pn=H$;function B$(t,e){return Ze(t)?t:is(t,e)?[t]:j0(Pn(t))}var Kp=B$;var V$=1/0;function W$(t){if(typeof t=="string"||Ur(t))return t;var e=t+"";return e=="0"&&1/t==-V$?"-0":e}var eo=W$;function $$(t,e){e=Kp(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[eo(e[r++])];return r&&r==n?t:void 0}var cs=$$;function j$(t,e,r){var n=t==null?void 0:cs(t,e);return n===void 0?r:n}var jo=j$;function z$(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var ls=z$;var z0=lr?lr.isConcatSpreadable:void 0;function q$(t){return Ze(t)||rs(t)||!!(z0&&t&&t[z0])}var q0=q$;function G0(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=q0),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?G0(l,e-1,r,n,i):ls(i,l):n||(i[i.length]=l)}return i}var us=G0;function G$(t){var e=t==null?0:t.length;return e?us(t,1):[]}var nt=G$;function K$(t){return Wp(zp(t,void 0,nt),t+"")}var K0=K$;function Q$(t){return function(e){return t?.[e]}}var Q0=Q$;var Y$={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Z$=Q0(Y$),Y0=Z$;var X$=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,J$="\\u0300-\\u036f",ej="\\ufe20-\\ufe2f",tj="\\u20d0-\\u20ff",rj=J$+ej+tj,nj="["+rj+"]",ij=RegExp(nj,"g");function oj(t){return t=Pn(t),t&&t.replace(X$,Y0).replace(ij,"")}var nx=oj;function aj(){this.__data__=new Zi,this.size=0}var Z0=aj;function sj(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var X0=sj;function cj(t){return this.__data__.get(t)}var J0=cj;function lj(t){return this.__data__.has(t)}var eR=lj;var uj=200;function pj(t,e){var r=this.__data__;if(r instanceof Zi){var n=r.__data__;if(!Xi||n.length<uj-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new $o(n)}return r.set(t,e),this.size=r.size,this}var tR=pj;function ps(t){var e=this.__data__=new Zi(t);this.size=e.size}ps.prototype.clear=Z0;ps.prototype.delete=X0;ps.prototype.get=J0;ps.prototype.has=eR;ps.prototype.set=tR;var ms=ps;function mj(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var Qp=mj;function fj(){return[]}var rR=fj;var dj=Object.prototype,gj=dj.propertyIsEnumerable,nR=Object.getOwnPropertySymbols,hj=nR?function(t){return t==null?[]:(t=Object(t),Qp(nR(t),function(e){return gj.call(t,e)}))}:rR,iR=hj;function yj(t,e,r){var n=e(t);return Ze(t)?n:ls(n,r(t))}var oR=yj;function Tj(t){return oR(t,Qi,iR)}var ix=Tj;var xj=br(It,"DataView"),Yp=xj;var Sj=br(It,"Promise"),Zp=Sj;var vj=br(It,"Set"),to=vj;var aR="[object Map]",bj="[object Object]",sR="[object Promise]",cR="[object Set]",lR="[object WeakMap]",uR="[object DataView]",wj=xi(Yp),Ej=xi(Xi),_j=xi(Zp),Rj=xi(to),kj=xi(Vo),zo=An;(Yp&&zo(new Yp(new ArrayBuffer(1)))!=uR||Xi&&zo(new Xi)!=aR||Zp&&zo(Zp.resolve())!=sR||to&&zo(new to)!=cR||Vo&&zo(new Vo)!=lR)&&(zo=function(t){var e=An(t),r=e==bj?t.constructor:void 0,n=r?xi(r):"";if(n)switch(n){case wj:return uR;case Ej:return aR;case _j:return sR;case Rj:return cR;case kj:return lR}return e});var ox=zo;var Aj=It.Uint8Array,ax=Aj;function Pj(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return ls(Ze(r)?Ki(r):[r],us(e,1))}var Qc=Pj;var Mj="__lodash_hash_undefined__";function Dj(t){return this.__data__.set(t,Mj),this}var pR=Dj;function Fj(t){return this.__data__.has(t)}var mR=Fj;function Xp(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new $o;++e<r;)this.add(t[e])}Xp.prototype.add=Xp.prototype.push=pR;Xp.prototype.has=mR;var Jp=Xp;function Lj(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var fR=Lj;function Ij(t,e){return t.has(e)}var em=Ij;var Cj=1,Oj=2;function Nj(t,e,r,n,i,o){var s=r&Cj,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var m=o.get(t),d=o.get(e);if(m&&d)return m==e&&d==t;var g=-1,y=!0,x=r&Oj?new Jp:void 0;for(o.set(t,e),o.set(e,t);++g<l;){var w=t[g],E=e[g];if(n)var U=s?n(E,w,g,e,t,o):n(w,E,g,t,e,o);if(U!==void 0){if(U)continue;y=!1;break}if(x){if(!fR(e,function(V,z){if(!em(x,z)&&(w===V||i(w,V,r,n,o)))return x.push(z)})){y=!1;break}}else if(!(w===E||i(w,E,r,n,o))){y=!1;break}}return o.delete(t),o.delete(e),y}var tm=Nj;function Uj(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var dR=Uj;function Hj(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var fs=Hj;var Bj=1,Vj=2,Wj="[object Boolean]",$j="[object Date]",jj="[object Error]",zj="[object Map]",qj="[object Number]",Gj="[object RegExp]",Kj="[object Set]",Qj="[object String]",Yj="[object Symbol]",Zj="[object ArrayBuffer]",Xj="[object DataView]",gR=lr?lr.prototype:void 0,sx=gR?gR.valueOf:void 0;function Jj(t,e,r,n,i,o,s){switch(r){case Xj:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Zj:return!(t.byteLength!=e.byteLength||!o(new ax(t),new ax(e)));case Wj:case $j:case qj:return Ja(+t,+e);case jj:return t.name==e.name&&t.message==e.message;case Gj:case Qj:return t==e+"";case zj:var l=dR;case Kj:var u=n&Bj;if(l||(l=fs),t.size!=e.size&&!u)return!1;var m=s.get(t);if(m)return m==e;n|=Vj,s.set(t,e);var d=tm(l(t),l(e),n,i,o,s);return s.delete(t),d;case Yj:if(sx)return sx.call(t)==sx.call(e)}return!1}var hR=Jj;var e3=1,t3=Object.prototype,r3=t3.hasOwnProperty;function n3(t,e,r,n,i,o){var s=r&e3,l=ix(t),u=l.length,m=ix(e),d=m.length;if(u!=d&&!s)return!1;for(var g=u;g--;){var y=l[g];if(!(s?y in e:r3.call(e,y)))return!1}var x=o.get(t),w=o.get(e);if(x&&w)return x==e&&w==t;var E=!0;o.set(t,e),o.set(e,t);for(var U=s;++g<u;){y=l[g];var V=t[y],z=e[y];if(n)var ne=s?n(z,V,y,e,t,o):n(V,z,y,t,e,o);if(!(ne===void 0?V===z||i(V,z,r,n,o):ne)){E=!1;break}U||(U=y=="constructor")}if(E&&!U){var se=t.constructor,ce=e.constructor;se!=ce&&"constructor"in t&&"constructor"in e&&!(typeof se=="function"&&se instanceof se&&typeof ce=="function"&&ce instanceof ce)&&(E=!1)}return o.delete(t),o.delete(e),E}var yR=n3;var i3=1,TR="[object Arguments]",xR="[object Array]",rm="[object Object]",o3=Object.prototype,SR=o3.hasOwnProperty;function a3(t,e,r,n,i,o){var s=Ze(t),l=Ze(e),u=s?xR:ox(t),m=l?xR:ox(e);u=u==TR?rm:u,m=m==TR?rm:m;var d=u==rm,g=m==rm,y=u==m;if(y&&qc(t)){if(!qc(e))return!1;s=!0,d=!1}if(y&&!d)return o||(o=new ms),s||Gp(t)?tm(t,e,r,n,i,o):hR(t,e,u,r,n,i,o);if(!(r&i3)){var x=d&&SR.call(t,"__wrapped__"),w=g&&SR.call(e,"__wrapped__");if(x||w){var E=x?t.value():t,U=w?e.value():e;return o||(o=new ms),i(E,U,r,n,o)}}return y?(o||(o=new ms),yR(t,e,r,n,i,o)):!1}var vR=a3;function bR(t,e,r,n,i){return t===e?!0:t==null||e==null||!ur(t)&&!ur(e)?t!==t&&e!==e:vR(t,e,r,n,bR,i)}var ds=bR;var s3=1,c3=2;function l3(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var u=l[0],m=t[u],d=l[1];if(s&&l[2]){if(m===void 0&&!(u in t))return!1}else{var g=new ms;if(n)var y=n(m,d,u,t,e,g);if(!(y===void 0?ds(d,m,s3|c3,n,g):y))return!1}}return!0}var wR=l3;function u3(t){return t===t&&!Hr(t)}var nm=u3;function p3(t){for(var e=Qi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,nm(i)]}return e}var ER=p3;function m3(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var im=m3;function f3(t){var e=ER(t);return e.length==1&&e[0][2]?im(e[0][0],e[0][1]):function(r){return r===t||wR(r,t,e)}}var _R=f3;function d3(t,e){return t!=null&&e in Object(t)}var RR=d3;function g3(t,e,r){e=Kp(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=eo(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&ts(i)&&Xa(s,i)&&(Ze(t)||rs(t)))}var kR=g3;function h3(t,e){return t!=null&&kR(t,e,RR)}var AR=h3;var y3=1,T3=2;function x3(t,e){return is(t)&&nm(e)?im(eo(t),e):function(r){var n=jo(r,t);return n===void 0&&n===e?AR(r,t):ds(e,n,y3|T3)}}var PR=x3;function S3(t){return function(e){return e?.[t]}}var om=S3;function v3(t){return function(e){return cs(e,t)}}var MR=v3;function b3(t){return is(t)?om(eo(t)):MR(t)}var DR=b3;function w3(t){return typeof t=="function"?t:t==null?vr:typeof t=="object"?Ze(t)?PR(t[0],t[1]):_R(t):DR(t)}var ro=w3;function E3(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),l=s.length;l--;){var u=s[t?l:++i];if(r(o[u],u,o)===!1)break}return e}}var FR=E3;var _3=FR(),LR=_3;function R3(t,e){return t&&LR(t,e,Qi)}var IR=R3;function k3(t,e){return function(r,n){if(r==null)return r;if(!$n(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var CR=k3;var A3=CR(IR),OR=A3;function P3(t){return ur(t)&&$n(t)}var NR=P3;function M3(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var UR=M3;function D3(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var am=D3;var HR=/[\\^$.*+?()[\]{}|]/g,F3=RegExp(HR.source);function L3(t){return t=Pn(t),t&&F3.test(t)?t.replace(HR,"\\$&"):t}var Br=L3;var I3=Math.max,C3=Math.min;function O3(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=Lp(r),i=r<0?I3(n+i,0):C3(i,n-1)),$p(t,ro(e,3),i,!0)}var qo=O3;function N3(t,e){var r=-1,n=$n(t)?Array(t.length):[];return OR(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var BR=N3;var U3="Expected a function",H3=8,B3=32,V3=128,W3=256;function $3(t){return K0(function(e){var r=e.length,n=r,i=Gi.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(U3);if(i&&!s&&Za(o)=="wrapper")var s=new Gi([],!0)}for(n=s?n:r;++n<r;){o=e[n];var l=Za(o),u=l=="wrapper"?Hp(o):void 0;u&&YT(u[0])&&u[1]==(V3|H3|B3|W3)&&!u[4].length&&u[9]==1?s=s[Za(u[0])].apply(s,u[3]):s=o.length==1&&YT(o)?s[l]():s.thru(o)}return function(){var m=arguments,d=m[0];if(s&&m.length==1&&Ze(d))return s.plant(d).value();for(var g=0,y=r?e[g].apply(this,m):d;++g<r;)y=e[g].call(this,y);return y}})}var VR=$3;var j3=VR(),cx=j3;function z3(t,e){return t>e}var WR=z3;function q3(t,e){return an(e,function(r){return t[r]})}var $R=q3;function G3(t){return t==null?[]:$R(t,Qi(t))}var jR=G3;function K3(t,e){return ds(t,e)}var vi=K3;function Q3(t,e){return t<e}var zR=Q3;function Y3(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(l===void 0?s===s&&!Ur(s):r(s,l)))var l=s,u=o}return u}var sm=Y3;function Z3(t,e){return t&&t.length?sm(t,ro(e,2),WR):void 0}var lx=Z3;function X3(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var qR=X3;function J3(t){return t&&t.length?sm(t,vr,zR):void 0}var ux=J3;function ez(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var GR=ez;function tz(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Ur(t),s=e!==void 0,l=e===null,u=e===e,m=Ur(e);if(!l&&!m&&!o&&t>e||o&&s&&u&&!l&&!m||n&&s&&u||!r&&u||!i)return 1;if(!n&&!o&&!m&&t<e||m&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!u)return-1}return 0}var KR=tz;function rz(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;++n<s;){var u=KR(i[n],o[n]);if(u){if(n>=l)return u;var m=r[n];return u*(m=="desc"?-1:1)}}return t.index-e.index}var QR=rz;function nz(t,e,r){e.length?e=an(e,function(o){return Ze(o)?function(s){return cs(s,o.length===1?o[0]:o)}:o}):e=[vr];var n=-1;e=an(e,ns(ro));var i=BR(t,function(o,s,l){var u=an(e,function(m){return m(o)});return{criteria:u,index:++n,value:o}});return GR(i,function(o,s){return QR(o,s,r)})}var YR=nz;var iz=9007199254740991,oz=Math.floor;function az(t,e){var r="";if(!t||e<1||e>iz)return r;do e%2&&(r+=t),e=oz(e/2),e&&(t+=t);while(e);return r}var ZR=az;function sz(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var XR=sz;var cz=Array.prototype,JR=cz.splice;function lz(t,e,r,n){var i=n?XR:jp,o=-1,s=e.length,l=t;for(t===e&&(e=Ki(e)),r&&(l=an(t,ns(r)));++o<s;)for(var u=0,m=e[o],d=r?r(m):m;(u=i(l,d,u,n))>-1;)l!==t&&JR.call(l,u,1),JR.call(t,u,1);return t}var ek=lz;function uz(t,e){return t&&t.length&&e&&e.length?ek(t,e):t}var tk=uz;var pz=es(tk),pr=pz;var mz=Math.floor,fz=Math.random;function dz(t,e){return t+mz(fz()*(e-t+1))}var rk=dz;var gz=Math.ceil,hz=Math.max;function yz(t,e,r,n){for(var i=-1,o=hz(gz((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var nk=yz;function Tz(t){return function(e,r,n){return n&&typeof n!="number"&&Wo(e,r,n)&&(r=n=void 0),e=Ka(e),r===void 0?(r=e,e=0):r=Ka(r),n=n===void 0?e<r?1:-1:Ka(n),nk(e,r,n,t)}}var ik=Tz;var xz=ik(),px=xz;function Sz(t,e,r){return(r?Wo(t,e,r):e===void 0)?e=1:e=Lp(e),ZR(Pn(t),e)}var mx=Sz;function vz(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=rk(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var cm=vz;function bz(t){return cm(Ki(t))}var ok=bz;function wz(t){return cm(jR(t))}var ak=wz;function Ez(t){var e=Ze(t)?ok:ak;return e(t)}var fx=Ez;var _z=es(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Wo(t,e[0],e[1])?e=[]:r>2&&Wo(e[0],e[1],e[2])&&(e=[e[0]]),YR(t,us(e,1),[])}),dx=_z;function Rz(t,e){return t&&t.length?qR(t,ro(e,2)):0}var lm=Rz;var kz=1/0,Az=to&&1/fs(new to([,-0]))[1]==kz?function(t){return new to(t)}:Up,sk=Az;var Pz=200;function Mz(t,e,r){var n=-1,i=m0,o=t.length,s=!0,l=[],u=l;if(r)s=!1,i=UR;else if(o>=Pz){var m=e?null:sk(t);if(m)return fs(m);s=!1,i=em,u=new Jp}else u=e?[]:l;e:for(;++n<o;){var d=t[n],g=e?e(d):d;if(d=r||d!==0?d:0,s&&g===g){for(var y=u.length;y--;)if(u[y]===g)continue e;e&&u.push(g),l.push(d)}else i(u,g,r)||(u!==l&&u.push(g),l.push(d))}return l}var um=Mz;function Dz(t){return t&&t.length?um(t):[]}var Go=Dz;function Fz(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?um(t,void 0,e):[]}var Yc=Fz;var Lz=Math.max;function Iz(t){if(!(t&&t.length))return[];var e=0;return t=Qp(t,function(r){if(NR(r))return e=Lz(r.length,e),!0}),qp(e,function(r){return an(t,om(r))})}var ck=Iz;var Cz=es(ck),Pt=Cz;var pm=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0}}};var Zc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Jt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{pr(this.listeners,e)}}}};var mm={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var Xc=class{constructor(){this.notifier=new Jt;this.mocks={...mm};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(Nz(n,r))return jo(i,e)??jo(this.mocks,e)}return jo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function Nz(t,e){return t.languageId===e.languageId}var fm={hideInferenceWarning:!1,tutorialProgress:{}};var Jc=class{constructor(){this.data={...fm}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var el=class{async showMessage(e,r,n,...i){}};var dm=class{constructor(){this.configuration=new Xc;this.messages=new el;this.keyValueStore=new Jc;this.clipboard=new Zc;this.capabilities=new pm;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=gs;this.onDidCloseTextDocument=gs;this.onDidChangeActiveTextEditor=gs;this.onDidChangeVisibleTextEditors=gs;this.onDidChangeTextEditorSelection=gs;this.onDidChangeTextEditorVisibleRanges=gs}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>pr(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function gs(){return{dispose(){}}}var ge=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new Y(this,this)}concise(){return`${this.line}:${this.character}`}conciseOneBased(){return`${this.line+1}:${this.character+1}`}toString(){return this.concise()}};function lk(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var Y=class t{constructor(...e){let[r,n]=e.length===2?e:[new ge(e[0],e[1]),new ge(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof ge?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new Be(this.end,this.start):new Be(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}-${this.end.conciseOneBased()}`}toString(){return`${this.start.concise()}-${this.end.concise()}`}};function Uz(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function Hz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function uk(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var gm=uk(Uz),hm=uk(Hz);function gx(t,e){return e.lastIndex=0,t.matchAll(e)}function sn(t,e,r){return Array.from(gx(t,e),r)}function Ko(t,e){return t.lastIndex=0,t.test(e)}function pk(t,e){return t.lastIndex=0,e.match(t)}function tl(t,e){return sn(t,e,r=>({index:r.index,text:r[0]}))}var hs=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var ym=class extends hs{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function Qo(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function ut(t,e,r,...n){return t.showMessage("error",e,r,...n)}var le=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(le||{});var{supported:ot,unsupported:Fse,notApplicable:mk}=le,hx={ifStatement:ot,disqualifyDelimiter:ot,"comment.line":ot,"comment.block":ot,"string.singleLine":ot,"textFragment.comment.line":ot,"textFragment.comment.block":ot,"textFragment.string.singleLine":ot,class:ot,className:ot,namedFunction:ot,"name.function":ot,"name.class":ot,"name.field":ot,functionName:ot,"name.argument.formal":ot,"name.argument.formal.iteration":ot,"name.variable":ot,"value.variable":ot,"name.assignment":ot,"value.assignment":ot,"statement.class":ot,"type.class":ot,"type.field":ot,"value.argument.formal":mk,"value.argument.formal.iteration":mk};var{supported:Cse,unsupported:Ose,notApplicable:Nse}=le;var{supported:fk,unsupported:Vse,notApplicable:Wse}=le,Bz={...hx,"value.argument.formal":fk,"value.argument.formal.iteration":fk};var{supported:zse,unsupported:qse,notApplicable:Gse}=le;var{supported:yt,notApplicable:I}=le,yx={"comment.block":yt,"string.singleLine":yt,disqualifyDelimiter:yt,map:yt,functionCall:yt,functionCallee:yt,"argument.actual":yt,"argument.actual.iteration":yt,"argumentList.actual.empty":yt,"argumentList.actual.singleLine":yt,"name.iteration.document":yt,"name.iteration.block":yt,"textFragment.comment.block":yt,"textFragment.string.singleLine":yt,"key.mapPair":yt,"key.mapPair.iteration":yt,"value.mapPair":yt,"value.mapPair.iteration":yt,"collectionItem.unenclosed":yt,"collectionItem.unenclosed.iteration":yt,statement:yt,"statement.iteration.document":yt,anonymousFunction:I,"argument.actual.constructor.iteration":I,"argument.actual.constructor":I,"argument.actual.method.iteration":I,"argument.actual.method":I,"argument.formal.constructor.iteration":I,"argument.formal.constructor":I,"argument.formal.iteration":I,"argument.formal.method.iteration":I,"argument.formal.method":I,"argument.formal":I,"argument.formal.lambda":I,"argument.formal.lambda.iteration":I,"argumentList.actual.multiLine":I,"argumentList.actual.method.empty":I,"argumentList.actual.method.singleLine":I,"argumentList.actual.method.multiLine":I,"argumentList.actual.constructor.empty":I,"argumentList.actual.constructor.singleLine":I,"argumentList.actual.constructor.multiLine":I,"argumentList.formal.empty":I,"argumentList.formal.singleLine":I,"argumentList.formal.multiLine":I,"argumentList.formal.lambda.empty":I,"argumentList.formal.lambda.singleLine":I,"argumentList.formal.lambda.multiLine":I,"argumentList.formal.method.empty":I,"argumentList.formal.method.singleLine":I,"argumentList.formal.method.multiLine":I,"argumentList.formal.constructor.empty":I,"argumentList.formal.constructor.singleLine":I,"argumentList.formal.constructor.multiLine":I,attribute:I,"branch.if.iteration":I,"branch.if":I,"branch.loop":I,"branch.switchCase.iteration":I,"branch.switchCase":I,"branch.ternary":I,"branch.try.iteration":I,"branch.try":I,"class.iteration.block":I,"class.iteration.document":I,class:I,"className.iteration.block":I,"className.iteration.document":I,className:I,command:I,"comment.line":I,"condition.doWhile":I,"condition.for":I,"condition.if":I,"condition.switchCase.iteration":I,"condition.switchCase":I,"condition.ternary":I,"condition.while":I,element:I,endTag:I,environment:I,fieldAccess:I,"functionCall.constructor":I,"functionCallee.constructor":I,"functionName.constructor":I,"functionName.iteration.block":I,"functionName.iteration.document":I,"functionName.method.iteration.class":I,"functionName.method":I,functionName:I,ifStatement:I,"interior.cell":I,"interior.class":I,"interior.command":I,"interior.element":I,"interior.function":I,"interior.if":I,"interior.lambda":I,"interior.loop":I,"interior.resource":I,"interior.switchCase":I,"interior.ternary":I,"interior.try":I,"key.attribute":I,list:I,"name.argument.actual.iteration":I,"name.argument.actual":I,"name.argument.formal.constructor.iteration":I,"name.argument.formal.constructor":I,"name.argument.formal.iteration":I,"name.argument.formal.method.iteration":I,"name.argument.formal.method":I,"name.argument.formal":I,"name.assignment.pattern":I,"name.assignment":I,"name.class":I,"name.constructor":I,"name.field":I,"name.foreach":I,"name.function":I,"name.method":I,"name.resource.iteration":I,"name.resource":I,"name.variable.pattern":I,"name.variable":I,"namedFunction.constructor":I,"namedFunction.iteration.block":I,"namedFunction.iteration.document":I,"namedFunction.method.iteration.class":I,"namedFunction.method":I,namedFunction:I,notebookCell:I,pairDelimiter:I,regularExpression:I,"section.iteration.document":I,"section.iteration.parent":I,section:I,startTag:I,"statement.iteration.block":I,"statement.class":I,"string.multiLine":I,switchStatementSubject:I,tags:I,"textFragment.comment.line":I,"textFragment.element":I,"textFragment.string.multiLine":I,"type.alias":I,"type.argument.formal.constructor.iteration":I,"type.argument.formal.constructor":I,"type.argument.formal.iteration":I,"type.argument.formal.method.iteration":I,"type.argument.formal.method":I,"type.argument.formal":I,"type.cast":I,"type.class":I,"type.enum":I,"type.field.iteration":I,"type.field":I,"type.foreach":I,"type.interface":I,"type.resource":I,"type.resource.iteration":I,"type.return":I,"type.typeArgument.iteration":I,"type.typeArgument":I,"type.variable":I,"value.argument.actual.iteration":I,"value.argument.actual":I,"value.argument.formal.constructor.iteration":I,"value.argument.formal.constructor":I,"value.argument.formal.iteration":I,"value.argument.formal.method.iteration":I,"value.argument.formal.method":I,"value.argument.formal":I,"value.assignment":I,"value.attribute":I,"value.field":I,"value.foreach":I,"value.resource.iteration":I,"value.resource":I,"value.return.lambda":I,"value.return":I,"value.typeAlias":I,"value.variable.pattern":I,"value.variable":I,"value.yield":I};var{supported:Xse,unsupported:Jse,notApplicable:ece}=le;var{supported:nce,unsupported:ice,notApplicable:oce}=le;var{supported:cce,notApplicable:lce}=le;var{supported:mce,unsupported:fce,notApplicable:dce}=le;var{supported:W,unsupported:no,notApplicable:_e}=le,Tx={list:W,map:W,regularExpression:W,switchStatementSubject:W,fieldAccess:W,disqualifyDelimiter:W,pairDelimiter:W,"collectionItem.unenclosed":W,"collectionItem.unenclosed.iteration":W,"textFragment.string.singleLine":W,"textFragment.string.multiLine":W,"textFragment.comment.line":W,"textFragment.comment.block":W,ifStatement:W,statement:W,"statement.iteration.document":W,"statement.iteration.block":W,"statement.class":W,class:W,"class.iteration.document":W,className:W,"className.iteration.document":W,anonymousFunction:W,namedFunction:W,"namedFunction.iteration.document":W,"namedFunction.method":W,"namedFunction.method.iteration.class":W,"namedFunction.constructor":W,functionName:W,"functionName.iteration.document":W,"functionName.method":W,"functionName.method.iteration.class":W,"functionName.constructor":W,functionCall:W,"functionCall.constructor":W,functionCallee:W,"functionCallee.constructor":W,"argument.actual":W,"argument.actual.iteration":W,"argument.actual.method":W,"argument.actual.method.iteration":W,"argument.actual.constructor":W,"argument.actual.constructor.iteration":W,"argument.formal":W,"argument.formal.iteration":W,"argument.formal.method":W,"argument.formal.method.iteration":W,"argument.formal.constructor":W,"argument.formal.constructor.iteration":W,"argument.formal.lambda":W,"argument.formal.lambda.iteration":W,"argumentList.actual.empty":W,"argumentList.actual.singleLine":W,"argumentList.actual.multiLine":W,"argumentList.actual.method.empty":W,"argumentList.actual.method.singleLine":W,"argumentList.actual.method.multiLine":W,"argumentList.actual.constructor.empty":W,"argumentList.actual.constructor.singleLine":W,"argumentList.actual.constructor.multiLine":W,"argumentList.formal.empty":W,"argumentList.formal.singleLine":W,"argumentList.formal.multiLine":W,"argumentList.formal.lambda.empty":W,"argumentList.formal.lambda.singleLine":W,"argumentList.formal.lambda.multiLine":W,"argumentList.formal.method.empty":W,"argumentList.formal.method.singleLine":W,"argumentList.formal.method.multiLine":W,"argumentList.formal.constructor.empty":W,"argumentList.formal.constructor.singleLine":W,"argumentList.formal.constructor.multiLine":W,"comment.line":W,"comment.block":W,"string.singleLine":W,"string.multiLine":W,"branch.if":W,"branch.if.iteration":W,"branch.try":W,"branch.try.iteration":W,"branch.switchCase":W,"branch.switchCase.iteration":W,"branch.ternary":W,"branch.loop":W,"condition.if":W,"condition.while":W,"condition.doWhile":W,"condition.for":W,"condition.ternary":W,"condition.switchCase":W,"condition.switchCase.iteration":W,"name.argument.formal":W,"name.argument.formal.iteration":W,"name.argument.formal.method":W,"name.argument.formal.method.iteration":W,"name.argument.formal.constructor":W,"name.argument.formal.constructor.iteration":W,"name.foreach":W,"name.assignment":W,"name.assignment.pattern":W,"name.variable":W,"name.variable.pattern":W,"name.function":W,"name.method":W,"name.constructor":W,"name.class":W,"name.field":W,"name.iteration.document":W,"name.iteration.block":W,"key.mapPair":W,"key.mapPair.iteration":W,"value.argument.formal":W,"value.argument.formal.iteration":W,"value.argument.formal.method":W,"value.argument.formal.method.iteration":W,"value.argument.formal.constructor":W,"value.argument.formal.constructor.iteration":W,"value.mapPair":W,"value.mapPair.iteration":W,"value.assignment":W,"value.variable":W,"value.variable.pattern":W,"value.foreach":W,"value.return":W,"value.return.lambda":W,"value.field":W,"value.yield":W,"type.class":W,"interior.class":no,"interior.function":no,"interior.if":no,"interior.lambda":no,"interior.loop":no,"interior.switchCase":no,"interior.ternary":no,"interior.try":no,"class.iteration.block":_e,"className.iteration.block":_e,"functionName.iteration.block":_e,"interior.cell":_e,"interior.command":_e,"interior.resource":_e,"name.argument.actual.iteration":_e,"name.argument.actual":_e,"name.resource.iteration":_e,"name.resource":_e,"namedFunction.iteration.block":_e,"section.iteration.document":_e,"section.iteration.parent":_e,"textFragment.element":_e,"type.resource.iteration":_e,"type.resource":_e,"value.argument.actual.iteration":_e,"value.argument.actual":_e,"value.resource.iteration":_e,"value.resource":_e,command:_e,environment:_e,notebookCell:_e,section:_e},xx={element:W,tags:W,startTag:W,endTag:W,attribute:W,"key.attribute":W,"value.attribute":W,"interior.element":W},Sx={...Tx,...xx,"value.typeAlias":_e,"type.alias":_e,"type.argument.formal.constructor.iteration":_e,"type.argument.formal.constructor":_e,"type.argument.formal.iteration":_e,"type.argument.formal.method.iteration":_e,"type.argument.formal.method":_e,"type.argument.formal":_e,"type.cast":_e,"type.enum":_e,"type.field.iteration":_e,"type.field":_e,"type.foreach":_e,"type.interface":_e,"type.return":_e,"type.typeArgument.iteration":_e,"type.typeArgument":_e,"type.variable":_e};var{supported:Vz,unsupported:Sce,notApplicable:vce}=le,Wz={...Sx,"textFragment.element":Vz};var{supported:cn,notApplicable:F}=le,rl={list:cn,map:cn,"string.singleLine":cn,"key.mapPair.iteration":cn,"key.mapPair":cn,"value.mapPair.iteration":cn,"value.mapPair":cn,"comment.block":cn,"comment.line":cn,"textFragment.comment.block":cn,"textFragment.comment.line":cn,"textFragment.string.singleLine":cn,anonymousFunction:F,"argument.actual":F,"argument.actual.constructor":F,"argument.actual.constructor.iteration":F,"argument.actual.iteration":F,"argument.actual.method":F,"argument.actual.method.iteration":F,"argument.formal":F,"argument.formal.constructor":F,"argument.formal.constructor.iteration":F,"argument.formal.iteration":F,"argument.formal.method":F,"argument.formal.method.iteration":F,"argument.formal.lambda":F,"argument.formal.lambda.iteration":F,"argumentList.actual.empty":F,"argumentList.actual.singleLine":F,"argumentList.actual.multiLine":F,"argumentList.actual.method.empty":F,"argumentList.actual.method.singleLine":F,"argumentList.actual.method.multiLine":F,"argumentList.actual.constructor.empty":F,"argumentList.actual.constructor.singleLine":F,"argumentList.actual.constructor.multiLine":F,"argumentList.formal.empty":F,"argumentList.formal.singleLine":F,"argumentList.formal.multiLine":F,"argumentList.formal.lambda.empty":F,"argumentList.formal.lambda.singleLine":F,"argumentList.formal.lambda.multiLine":F,"argumentList.formal.method.empty":F,"argumentList.formal.method.singleLine":F,"argumentList.formal.method.multiLine":F,"argumentList.formal.constructor.empty":F,"argumentList.formal.constructor.singleLine":F,"argumentList.formal.constructor.multiLine":F,attribute:F,"branch.if":F,"branch.if.iteration":F,"branch.loop":F,"branch.switchCase":F,"branch.switchCase.iteration":F,"branch.ternary":F,"branch.try":F,"branch.try.iteration":F,class:F,"class.iteration.block":F,"class.iteration.document":F,className:F,"className.iteration.block":F,"className.iteration.document":F,"collectionItem.unenclosed":F,"collectionItem.unenclosed.iteration":F,command:F,"condition.doWhile":F,"condition.for":F,"condition.if":F,"condition.switchCase":F,"condition.switchCase.iteration":F,"condition.ternary":F,"condition.while":F,disqualifyDelimiter:F,element:F,endTag:F,environment:F,fieldAccess:F,functionCall:F,"functionCall.constructor":F,functionCallee:F,"functionCallee.constructor":F,functionName:F,"functionName.constructor":F,"functionName.iteration.block":F,"functionName.iteration.document":F,"functionName.method":F,"functionName.method.iteration.class":F,ifStatement:F,"interior.cell":F,"interior.class":F,"interior.command":F,"interior.element":F,"interior.function":F,"interior.if":F,"interior.lambda":F,"interior.loop":F,"interior.resource":F,"interior.switchCase":F,"interior.ternary":F,"interior.try":F,"key.attribute":F,"name.argument.actual":F,"name.argument.actual.iteration":F,"name.argument.formal":F,"name.argument.formal.constructor":F,"name.argument.formal.constructor.iteration":F,"name.argument.formal.iteration":F,"name.argument.formal.method":F,"name.argument.formal.method.iteration":F,"name.assignment":F,"name.assignment.pattern":F,"name.class":F,"name.constructor":F,"name.field":F,"name.foreach":F,"name.function":F,"name.iteration.block":F,"name.iteration.document":F,"name.method":F,"name.resource":F,"name.resource.iteration":F,"name.variable":F,"name.variable.pattern":F,namedFunction:F,"namedFunction.constructor":F,"namedFunction.iteration.block":F,"namedFunction.iteration.document":F,"namedFunction.method":F,"namedFunction.method.iteration.class":F,notebookCell:F,pairDelimiter:F,regularExpression:F,section:F,"section.iteration.document":F,"section.iteration.parent":F,startTag:F,statement:F,"statement.class":F,"statement.iteration.block":F,"statement.iteration.document":F,"string.multiLine":F,switchStatementSubject:F,tags:F,"textFragment.element":F,"textFragment.string.multiLine":F,"type.alias":F,"type.argument.formal":F,"type.argument.formal.constructor":F,"type.argument.formal.constructor.iteration":F,"type.argument.formal.iteration":F,"type.argument.formal.method":F,"type.argument.formal.method.iteration":F,"type.cast":F,"type.class":F,"type.enum":F,"type.field":F,"type.field.iteration":F,"type.foreach":F,"type.interface":F,"type.resource":F,"type.resource.iteration":F,"type.return":F,"type.typeArgument":F,"type.typeArgument.iteration":F,"type.variable":F,"value.argument.actual":F,"value.argument.actual.iteration":F,"value.argument.formal":F,"value.argument.formal.constructor":F,"value.argument.formal.constructor.iteration":F,"value.argument.formal.iteration":F,"value.argument.formal.method":F,"value.argument.formal.method.iteration":F,"value.assignment":F,"value.attribute":F,"value.field":F,"value.foreach":F,"value.resource":F,"value.resource.iteration":F,"value.return":F,"value.return.lambda":F,"value.typeAlias":F,"value.variable":F,"value.variable.pattern":F,"value.yield":F};var{supported:kce,unsupported:Ace,notApplicable:Pce}=le,$z={...rl};var{supported:Lce,unsupported:Ice,notApplicable:Cce}=le,jz={...rl};var{supported:Uce,unsupported:Hce,notApplicable:Bce}=le;var{supported:$ce,notApplicable:jce}=le;var{supported:Gce,notApplicable:Kce}=le;var{supported:Zce,unsupported:Xce,notApplicable:Jce}=le;var{supported:rle,notApplicable:nle}=le;var{supported:ale,unsupported:sle,notApplicable:cle}=le;var{supported:ple,unsupported:mle,notApplicable:fle}=le;var{supported:hle,unsupported:yle,notApplicable:Tle}=le;var{supported:vle,unsupported:ble,notApplicable:wle}=le;var{supported:Rle,notApplicable:kle}=le;var{supported:er,unsupported:Tm}=le,zz={...yx,"comment.line":er,"condition.if":er,namedFunction:er,"namedFunction.iteration.block":er,"namedFunction.iteration.document":er,functionName:er,"functionName.iteration.block":er,"functionName.iteration.document":er,"name.argument.formal":er,"name.argument.formal.iteration":er,"name.function":er,"value.argument.formal":er,"value.argument.formal.iteration":er,"value.return":er,ifStatement:er,"textFragment.comment.line":er,"branch.if":Tm,"branch.if.iteration":Tm,"interior.function":Tm,"interior.if":Tm};var{supported:Lle,unsupported:Ile,notApplicable:Cle}=le;var{supported:$t,notApplicable:bi}=le,vx={...Tx,"type.argument.formal":$t,"type.argument.formal.iteration":$t,"type.argument.formal.method":$t,"type.argument.formal.method.iteration":$t,"type.argument.formal.constructor":$t,"type.argument.formal.constructor.iteration":$t,"type.alias":$t,"type.cast":$t,"type.field":$t,"type.field.iteration":$t,"type.interface":$t,"type.enum":$t,"type.return":$t,"type.variable":$t,"type.typeArgument":$t,"type.typeArgument.iteration":$t,"value.typeAlias":$t,element:bi,tags:bi,startTag:bi,endTag:bi,attribute:bi,"key.attribute":bi,"value.attribute":bi,"type.foreach":bi,"interior.element":bi};var{supported:$le,unsupported:jle,notApplicable:zle}=le,qz={...vx,...xx};var{supported:Kle,notApplicable:Qle}=le;var{supported:Xle,unsupported:Jle,notApplicable:eue}=le;var ys=["that","source","instanceReference","keyboard"];var Be=class extends Y{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new ge(e[0],e[1]),new ge(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}->${this.end.conciseOneBased()}`}toString(){return this.concise()}};function gk({line:t,character:e}){return new ge(t,e)}function xm({start:t,end:e}){return new Y(gk(t),gk(e))}function Vr({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function mr({start:t,end:e}){return{type:"character",start:t,end:e}}function nl(t){return{start:Sm(t.start),end:Sm(t.end)}}function hk(t){return{anchor:Sm(t.anchor),active:Sm(t.active)}}function Sm({line:t,character:e}){return{line:t,character:e}}function Ik(t){return typeof t>"u"||t===null}function Gz(t){return typeof t=="object"&&t!==null}function Kz(t){return Array.isArray(t)?t:Ik(t)?[]:[t]}function Qz(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function Yz(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function Zz(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Xz=Ik,Jz=Gz,eq=Kz,tq=Yz,rq=Zz,nq=Qz,Mt={isNothing:Xz,isObject:Jz,toArray:eq,repeat:tq,isNegativeZero:rq,extend:nq};function Ck(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function ol(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Ck(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}ol.prototype=Object.create(Error.prototype);ol.prototype.constructor=ol;ol.prototype.toString=function(e){return this.name+": "+Ck(this,e)};var wr=ol;function bx(t,e,r,n,i){var o="",s="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function wx(t,e){return Mt.repeat(" ",e-t.length)+t}function iq(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",u,m,d=Math.min(t.line+e.linesAfter,i.length).toString().length,g=e.maxLength-(e.indent+d+3);for(u=1;u<=e.linesBefore&&!(s-u<0);u++)m=bx(t.buffer,n[s-u],i[s-u],t.position-(n[s]-n[s-u]),g),l=Mt.repeat(" ",e.indent)+wx((t.line-u+1).toString(),d)+" | "+m.str+`
`+l;for(m=bx(t.buffer,n[s],i[s],t.position,g),l+=Mt.repeat(" ",e.indent)+wx((t.line+1).toString(),d)+" | "+m.str+`
`,l+=Mt.repeat("-",e.indent+d+3+m.pos)+`^
`,u=1;u<=e.linesAfter&&!(s+u>=i.length);u++)m=bx(t.buffer,n[s+u],i[s+u],t.position-(n[s]-n[s+u]),g),l+=Mt.repeat(" ",e.indent)+wx((t.line+u+1).toString(),d)+" | "+m.str+`
`;return l.replace(/\n$/,"")}var oq=iq,aq=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],sq=["scalar","sequence","mapping"];function cq(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function lq(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(aq.indexOf(r)===-1)throw new wr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=cq(e.styleAliases||null),sq.indexOf(this.kind)===-1)throw new wr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var jt=lq;function xk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function uq(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function _x(t){return this.extend(t)}_x.prototype.extend=function(e){var r=[],n=[];if(e instanceof jt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new wr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof jt))throw new wr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new wr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new wr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof jt))throw new wr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(_x.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=xk(i,"implicit"),i.compiledExplicit=xk(i,"explicit"),i.compiledTypeMap=uq(i.compiledImplicit,i.compiledExplicit),i};var pq=_x,mq=new jt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),fq=new jt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),dq=new jt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),gq=new pq({explicit:[mq,fq,dq]});function hq(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function yq(){return null}function Tq(t){return t===null}var xq=new jt("tag:yaml.org,2002:null",{kind:"scalar",resolve:hq,construct:yq,predicate:Tq,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Sq(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function vq(t){return t==="true"||t==="True"||t==="TRUE"}function bq(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var wq=new jt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Sq,construct:vq,predicate:bq,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Eq(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function _q(t){return 48<=t&&t<=55}function Rq(t){return 48<=t&&t<=57}function kq(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Eq(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!_q(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Rq(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function Aq(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function Pq(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Mt.isNegativeZero(t)}var Mq=new jt("tag:yaml.org,2002:int",{kind:"scalar",resolve:kq,construct:Aq,predicate:Pq,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Dq=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Fq(t){return!(t===null||!Dq.test(t)||t[t.length-1]==="_")}function Lq(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var Iq=/^[-+]?[0-9]+e/;function Cq(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Mt.isNegativeZero(t))return"-0.0";return r=t.toString(10),Iq.test(r)?r.replace("e",".e"):r}function Oq(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Mt.isNegativeZero(t))}var Nq=new jt("tag:yaml.org,2002:float",{kind:"scalar",resolve:Fq,construct:Lq,predicate:Oq,represent:Cq,defaultStyle:"lowercase"}),Uq=gq.extend({implicit:[xq,wq,Mq,Nq]}),Hq=Uq,Ok=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Nk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Bq(t){return t===null?!1:Ok.exec(t)!==null||Nk.exec(t)!==null}function Vq(t){var e,r,n,i,o,s,l,u=0,m=null,d,g,y;if(e=Ok.exec(t),e===null&&(e=Nk.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(d=+e[10],g=+(e[11]||0),m=(d*60+g)*6e4,e[9]==="-"&&(m=-m)),y=new Date(Date.UTC(r,n,i,o,s,l,u)),m&&y.setTime(y.getTime()-m),y}function Wq(t){return t.toISOString()}var $q=new jt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Bq,construct:Vq,instanceOf:Date,represent:Wq});function jq(t){return t==="<<"||t===null}var zq=new jt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:jq}),Mx=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function qq(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=Mx;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function Gq(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=Mx,s=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}function Kq(t){var e="",r=0,n,i,o=t.length,s=Mx;for(n=0;n<o;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function Qq(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var Yq=new jt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:qq,construct:Gq,predicate:Qq,represent:Kq}),Zq=Object.prototype.hasOwnProperty,Xq=Object.prototype.toString;function Jq(t){if(t===null)return!0;var e=[],r,n,i,o,s,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],s=!1,Xq.call(i)!=="[object Object]")return!1;for(o in i)if(Zq.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function eG(t){return t!==null?t:[]}var tG=new jt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Jq,construct:eG}),rG=Object.prototype.toString;function nG(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],rG.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function iG(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var oG=new jt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:nG,construct:iG}),aG=Object.prototype.hasOwnProperty;function sG(t){if(t===null)return!0;var e,r=t;for(e in r)if(aG.call(r,e)&&r[e]!==null)return!1;return!0}function cG(t){return t!==null?t:{}}var lG=new jt("tag:yaml.org,2002:set",{kind:"mapping",resolve:sG,construct:cG}),Dx=Hq.extend({implicit:[$q,zq],explicit:[Yq,tG,oG,lG]}),oo=Object.prototype.hasOwnProperty,vm=1,Uk=2,Hk=3,bm=4,Ex=1,uG=2,Sk=3,pG=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,mG=/[\x85\u2028\u2029]/,fG=/[,\[\]\{\}]/,Bk=/^(?:!|!!|![a-z\-]+!)$/i,Vk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function vk(t){return Object.prototype.toString.call(t)}function jn(t){return t===10||t===13}function Zo(t){return t===9||t===32}function Er(t){return t===9||t===32||t===10||t===13}function xs(t){return t===44||t===91||t===93||t===123||t===125}function dG(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function gG(t){return t===120?2:t===117?4:t===85?8:0}function hG(t){return 48<=t&&t<=57?t-48:-1}function bk(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function yG(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var Wk=new Array(256),$k=new Array(256);for(Yo=0;Yo<256;Yo++)Wk[Yo]=bk(Yo)?1:0,$k[Yo]=bk(Yo);var Yo;function TG(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Dx,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function jk(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=oq(r),new wr(e,r)}function de(t,e){throw jk(t,e)}function wm(t,e){t.onWarning&&t.onWarning.call(null,jk(t,e))}var wk={YAML:function(e,r,n){var i,o,s;e.version!==null&&de(e,"duplication of %YAML directive"),n.length!==1&&de(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&de(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&de(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&wm(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&de(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],Bk.test(i)||de(e,"ill-formed tag handle (first argument) of the TAG directive"),oo.call(e.tagMap,i)&&de(e,'there is a previously declared suffix for "'+i+'" tag handle'),Vk.test(o)||de(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{de(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function io(t,e,r,n){var i,o,s,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)s=l.charCodeAt(i),s===9||32<=s&&s<=1114111||de(t,"expected valid JSON character");else pG.test(l)&&de(t,"the stream contains non-printable characters");t.result+=l}}function Ek(t,e,r,n){var i,o,s,l;for(Mt.isObject(r)||de(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,l=i.length;s<l;s+=1)o=i[s],oo.call(e,o)||(e[o]=r[o],n[o]=!0)}function Ss(t,e,r,n,i,o,s,l,u){var m,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),m=0,d=i.length;m<d;m+=1)Array.isArray(i[m])&&de(t,"nested arrays are not supported inside keys"),typeof i=="object"&&vk(i[m])==="[object Object]"&&(i[m]="[object Object]");if(typeof i=="object"&&vk(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(m=0,d=o.length;m<d;m+=1)Ek(t,e,o[m],r);else Ek(t,e,o,r);else!t.json&&!oo.call(r,i)&&oo.call(e,i)&&(t.line=s||t.line,t.lineStart=l||t.lineStart,t.position=u||t.position,de(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function Fx(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):de(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Et(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Zo(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(jn(i))for(Fx(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&wm(t,"deficient indentation"),n}function Rm(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Er(r)))}function Lx(t,e){e===1?t.result+=" ":e>1&&(t.result+=Mt.repeat(`
`,e-1))}function xG(t,e,r){var n,i,o,s,l,u,m,d,g=t.kind,y=t.result,x;if(x=t.input.charCodeAt(t.position),Er(x)||xs(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),Er(i)||r&&xs(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),Er(i)||r&&xs(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),Er(n))break}else{if(t.position===t.lineStart&&Rm(t)||r&&xs(x))break;if(jn(x))if(u=t.line,m=t.lineStart,d=t.lineIndent,Et(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=u,t.lineStart=m,t.lineIndent=d;break}}l&&(io(t,o,s,!1),Lx(t,t.line-u),o=s=t.position,l=!1),Zo(x)||(s=t.position+1),x=t.input.charCodeAt(++t.position)}return io(t,o,s,!1),t.result?!0:(t.kind=g,t.result=y,!1)}function SG(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(io(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else jn(r)?(io(t,n,i,!0),Lx(t,Et(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Rm(t)?de(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);de(t,"unexpected end of the stream within a single quoted scalar")}function vG(t,e){var r,n,i,o,s,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return io(t,r,t.position,!0),t.position++,!0;if(l===92){if(io(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),jn(l))Et(t,!1,e);else if(l<256&&Wk[l])t.result+=$k[l],t.position++;else if((s=gG(l))>0){for(i=s,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(s=dG(l))>=0?o=(o<<4)+s:de(t,"expected hexadecimal character");t.result+=yG(o),t.position++}else de(t,"unknown escape sequence");r=n=t.position}else jn(l)?(io(t,r,n,!0),Lx(t,Et(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Rm(t)?de(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}de(t,"unexpected end of the stream within a double quoted scalar")}function bG(t,e){var r=!0,n,i,o,s=t.tag,l,u=t.anchor,m,d,g,y,x,w=Object.create(null),E,U,V,z;if(z=t.input.charCodeAt(t.position),z===91)d=93,x=!1,l=[];else if(z===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),z=t.input.charCodeAt(++t.position);z!==0;){if(Et(t,!0,e),z=t.input.charCodeAt(t.position),z===d)return t.position++,t.tag=s,t.anchor=u,t.kind=x?"mapping":"sequence",t.result=l,!0;r?z===44&&de(t,"expected the node content, but found ','"):de(t,"missed comma between flow collection entries"),U=E=V=null,g=y=!1,z===63&&(m=t.input.charCodeAt(t.position+1),Er(m)&&(g=y=!0,t.position++,Et(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,vs(t,e,vm,!1,!0),U=t.tag,E=t.result,Et(t,!0,e),z=t.input.charCodeAt(t.position),(y||t.line===n)&&z===58&&(g=!0,z=t.input.charCodeAt(++t.position),Et(t,!0,e),vs(t,e,vm,!1,!0),V=t.result),x?Ss(t,l,w,U,E,V,n,i,o):g?l.push(Ss(t,null,w,U,E,V,n,i,o)):l.push(E),Et(t,!0,e),z=t.input.charCodeAt(t.position),z===44?(r=!0,z=t.input.charCodeAt(++t.position)):r=!1}de(t,"unexpected end of the stream within a flow collection")}function wG(t,e){var r,n,i=Ex,o=!1,s=!1,l=e,u=0,m=!1,d,g;if(g=t.input.charCodeAt(t.position),g===124)n=!1;else if(g===62)n=!0;else return!1;for(t.kind="scalar",t.result="";g!==0;)if(g=t.input.charCodeAt(++t.position),g===43||g===45)Ex===i?i=g===43?Sk:uG:de(t,"repeat of a chomping mode identifier");else if((d=hG(g))>=0)d===0?de(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?de(t,"repeat of an indentation width identifier"):(l=e+d-1,s=!0);else break;if(Zo(g)){do g=t.input.charCodeAt(++t.position);while(Zo(g));if(g===35)do g=t.input.charCodeAt(++t.position);while(!jn(g)&&g!==0)}for(;g!==0;){for(Fx(t),t.lineIndent=0,g=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&g===32;)t.lineIndent++,g=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),jn(g)){u++;continue}if(t.lineIndent<l){i===Sk?t.result+=Mt.repeat(`
`,o?1+u:u):i===Ex&&o&&(t.result+=`
`);break}for(n?Zo(g)?(m=!0,t.result+=Mt.repeat(`
`,o?1+u:u)):m?(m=!1,t.result+=Mt.repeat(`
`,u+1)):u===0?o&&(t.result+=" "):t.result+=Mt.repeat(`
`,u):t.result+=Mt.repeat(`
`,o?1+u:u),o=!0,s=!0,u=0,r=t.position;!jn(g)&&g!==0;)g=t.input.charCodeAt(++t.position);io(t,r,t.position,!1)}return!0}function _k(t,e){var r,n=t.tag,i=t.anchor,o=[],s,l=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,de(t,"tab characters must not be used in indentation")),!(u!==45||(s=t.input.charCodeAt(t.position+1),!Er(s))));){if(l=!0,t.position++,Et(t,!0,-1)&&t.lineIndent<=e){o.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,vs(t,e,Hk,!1,!0),o.push(t.result),Et(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)de(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function EG(t,e,r){var n,i,o,s,l,u,m=t.tag,d=t.anchor,g={},y=Object.create(null),x=null,w=null,E=null,U=!1,V=!1,z;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=g),z=t.input.charCodeAt(t.position);z!==0;){if(!U&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,de(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(z===63||z===58)&&Er(n))z===63?(U&&(Ss(t,g,y,x,w,null,s,l,u),x=w=E=null),V=!0,U=!0,i=!0):U?(U=!1,i=!0):de(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,z=n;else{if(s=t.line,l=t.lineStart,u=t.position,!vs(t,r,Uk,!1,!0))break;if(t.line===o){for(z=t.input.charCodeAt(t.position);Zo(z);)z=t.input.charCodeAt(++t.position);if(z===58)z=t.input.charCodeAt(++t.position),Er(z)||de(t,"a whitespace character is expected after the key-value separator within a block mapping"),U&&(Ss(t,g,y,x,w,null,s,l,u),x=w=E=null),V=!0,U=!1,i=!1,x=t.tag,w=t.result;else if(V)de(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=m,t.anchor=d,!0}else if(V)de(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=m,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(U&&(s=t.line,l=t.lineStart,u=t.position),vs(t,e,bm,!0,i)&&(U?w=t.result:E=t.result),U||(Ss(t,g,y,x,w,E,s,l,u),x=w=E=null),Et(t,!0,-1),z=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&z!==0)de(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return U&&Ss(t,g,y,x,w,null,s,l,u),V&&(t.tag=m,t.anchor=d,t.kind="mapping",t.result=g),V}function _G(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&de(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):de(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Er(s);)s===33&&(n?de(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),Bk.test(i)||de(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),fG.test(o)&&de(t,"tag suffix cannot contain flow indicator characters")}o&&!Vk.test(o)&&de(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{de(t,"tag name is malformed: "+o)}return r?t.tag=o:oo.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:de(t,'undeclared tag handle "'+i+'"'),!0}function RG(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&de(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Er(r)&&!xs(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&de(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function kG(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Er(n)&&!xs(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&de(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),oo.call(t.anchorMap,r)||de(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Et(t,!0,-1),!0}function vs(t,e,r,n,i){var o,s,l,u=1,m=!1,d=!1,g,y,x,w,E,U;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=l=bm===r||Hk===r,n&&Et(t,!0,-1)&&(m=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;_G(t)||RG(t);)Et(t,!0,-1)?(m=!0,l=o,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=m||i),(u===1||bm===r)&&(vm===r||Uk===r?E=e:E=e+1,U=t.position-t.lineStart,u===1?l&&(_k(t,U)||EG(t,U,E))||bG(t,E)?d=!0:(s&&wG(t,E)||SG(t,E)||vG(t,E)?d=!0:kG(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&de(t,"alias node should not have any properties")):xG(t,E,vm===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(d=l&&_k(t,U))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&de(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),g=0,y=t.implicitTypes.length;g<y;g+=1)if(w=t.implicitTypes[g],w.resolve(t.result)){t.result=w.construct(t.result),t.tag=w.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(oo.call(t.typeMap[t.kind||"fallback"],t.tag))w=t.typeMap[t.kind||"fallback"][t.tag];else for(w=null,x=t.typeMap.multi[t.kind||"fallback"],g=0,y=x.length;g<y;g+=1)if(t.tag.slice(0,x[g].tag.length)===x[g].tag){w=x[g];break}w||de(t,"unknown tag !<"+t.tag+">"),t.result!==null&&w.kind!==t.kind&&de(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+w.kind+'", not "'+t.kind+'"'),w.resolve(t.result,t.tag)?(t.result=w.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):de(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function AG(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(Et(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!Er(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&de(t,"directive name must not be less than one character in length");s!==0;){for(;Zo(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!jn(s));break}if(jn(s))break;for(r=t.position;s!==0&&!Er(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&Fx(t),oo.call(wk,n)?wk[n](t,n,i):wm(t,'unknown document directive "'+n+'"')}if(Et(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Et(t,!0,-1)):o&&de(t,"directives end mark is expected"),vs(t,t.lineIndent-1,bm,!1,!0),Et(t,!0,-1),t.checkLineBreaks&&mG.test(t.input.slice(e,t.position))&&wm(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Rm(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Et(t,!0,-1));return}if(t.position<t.length-1)de(t,"end of the stream or a document separator is expected");else return}function zk(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new TG(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,de(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)AG(r);return r.documents}function PG(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=zk(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function MG(t,e){var r=zk(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new wr("expected a single document in the stream, but found more")}}var DG=PG,FG=MG,qk={loadAll:DG,load:FG},Gk=Object.prototype.toString,Kk=Object.prototype.hasOwnProperty,Ix=65279,LG=9,al=10,IG=13,CG=32,OG=33,NG=34,Rx=35,UG=37,HG=38,BG=39,VG=42,Qk=44,WG=45,Em=58,$G=61,jG=62,zG=63,qG=64,Yk=91,Zk=93,GG=96,Xk=123,KG=124,Jk=125,tr={};tr[0]="\\0";tr[7]="\\a";tr[8]="\\b";tr[9]="\\t";tr[10]="\\n";tr[11]="\\v";tr[12]="\\f";tr[13]="\\r";tr[27]="\\e";tr[34]='\\"';tr[92]="\\\\";tr[133]="\\N";tr[160]="\\_";tr[8232]="\\L";tr[8233]="\\P";var QG=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],YG=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function ZG(t,e){var r,n,i,o,s,l,u;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=t.compiledTypeMap.fallback[s],u&&Kk.call(u.styleAliases,l)&&(l=u.styleAliases[l]),r[s]=l;return r}function XG(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new wr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Mt.repeat("0",n-e.length)+e}var JG=1,sl=2;function eK(t){this.schema=t.schema||Dx,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Mt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=ZG(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?sl:JG,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Rk(t,e){for(var r=Mt.repeat(" ",e),n=0,i=-1,o="",s,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=l):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function kx(t,e){return`
`+Mt.repeat(" ",t.indent*e)}function tK(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function _m(t){return t===CG||t===LG}function cl(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Ix||65536<=t&&t<=1114111}function kk(t){return cl(t)&&t!==Ix&&t!==IG&&t!==al}function Ak(t,e,r){var n=kk(t),i=n&&!_m(t);return(r?n:n&&t!==Qk&&t!==Yk&&t!==Zk&&t!==Xk&&t!==Jk)&&t!==Rx&&!(e===Em&&!i)||kk(e)&&!_m(e)&&t===Rx||e===Em&&i}function rK(t){return cl(t)&&t!==Ix&&!_m(t)&&t!==WG&&t!==zG&&t!==Em&&t!==Qk&&t!==Yk&&t!==Zk&&t!==Xk&&t!==Jk&&t!==Rx&&t!==HG&&t!==VG&&t!==OG&&t!==KG&&t!==$G&&t!==jG&&t!==BG&&t!==NG&&t!==UG&&t!==qG&&t!==GG}function nK(t){return!_m(t)&&t!==Em}function il(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function eA(t){var e=/^\n* /;return e.test(t)}var tA=1,Ax=2,rA=3,nA=4,Ts=5;function iK(t,e,r,n,i,o,s,l){var u,m=0,d=null,g=!1,y=!1,x=n!==-1,w=-1,E=rK(il(t,0))&&nK(il(t,t.length-1));if(e||s)for(u=0;u<t.length;m>=65536?u+=2:u++){if(m=il(t,u),!cl(m))return Ts;E=E&&Ak(m,d,l),d=m}else{for(u=0;u<t.length;m>=65536?u+=2:u++){if(m=il(t,u),m===al)g=!0,x&&(y=y||u-w-1>n&&t[w+1]!==" ",w=u);else if(!cl(m))return Ts;E=E&&Ak(m,d,l),d=m}y=y||x&&u-w-1>n&&t[w+1]!==" "}return!g&&!y?E&&!s&&!i(t)?tA:o===sl?Ts:Ax:r>9&&eA(t)?Ts:s?o===sl?Ts:Ax:y?nA:rA}function oK(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===sl?'""':"''";if(!t.noCompatMode&&(QG.indexOf(e)!==-1||YG.test(e)))return t.quotingType===sl?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function u(m){return tK(t,m)}switch(iK(e,l,t.indent,s,u,t.quotingType,t.forceQuotes&&!n,i)){case tA:return e;case Ax:return"'"+e.replace(/'/g,"''")+"'";case rA:return"|"+Pk(e,t.indent)+Mk(Rk(e,o));case nA:return">"+Pk(e,t.indent)+Mk(Rk(aK(e,s),o));case Ts:return'"'+sK(e)+'"';default:throw new wr("impossible error: invalid scalar style")}}()}function Pk(t,e){var r=eA(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function Mk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function aK(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var m=t.indexOf(`
`);return m=m!==-1?m:t.length,r.lastIndex=m,Dk(t.slice(0,m),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var l=s[1],u=s[2];o=u[0]===" ",n+=l+(!i&&!o&&u!==""?`
`:"")+Dk(u,e),i=o}return n}function Dk(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,l=0,u="";n=r.exec(t);)l=n.index,l-i>e&&(o=s>i?s:l,u+=`
`+t.slice(i,o),i=o+1),s=l;return u+=`
`,t.length-i>e&&s>i?u+=t.slice(i,s)+`
`+t.slice(s+1):u+=t.slice(i),u.slice(1)}function sK(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=il(t,i),n=tr[r],!n&&cl(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||XG(r);return e}function cK(t,e,r){var n="",i=t.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(wi(t,e,l,!1,!1)||typeof l>"u"&&wi(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function Fk(t,e,r,n){var i="",o=t.tag,s,l,u;for(s=0,l=r.length;s<l;s+=1)u=r[s],t.replacer&&(u=t.replacer.call(r,String(s),u)),(wi(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&wi(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=kx(t,e)),t.dump&&al===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function lK(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,l,u,m,d;for(s=0,l=o.length;s<l;s+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),u=o[s],m=r[u],t.replacer&&(m=t.replacer.call(r,u,m)),wi(t,e,u,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),wi(t,e,m,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function uK(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),l,u,m,d,g,y;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new wr("sortKeys must be a boolean or a function");for(l=0,u=s.length;l<u;l+=1)y="",(!n||i!=="")&&(y+=kx(t,e)),m=s[l],d=r[m],t.replacer&&(d=t.replacer.call(r,m,d)),wi(t,e+1,m,!0,!0,!0)&&(g=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,g&&(t.dump&&al===t.dump.charCodeAt(0)?y+="?":y+="? "),y+=t.dump,g&&(y+=kx(t,e)),wi(t,e+1,d,!0,g)&&(t.dump&&al===t.dump.charCodeAt(0)?y+=":":y+=": ",y+=t.dump,i+=y));t.tag=o,t.dump=i||"{}"}function Lk(t,e,r){var n,i,o,s,l,u;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(u=t.styleMap[l.tag]||l.defaultStyle,Gk.call(l.represent)==="[object Function]")n=l.represent(e,u);else if(Kk.call(l.represent,u))n=l.represent[u](e,u);else throw new wr("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}function wi(t,e,r,n,i,o,s){t.tag=null,t.dump=r,Lk(t,r,!1)||Lk(t,r,!0);var l=Gk.call(t.dump),u=n,m;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",g,y;if(d&&(g=t.duplicates.indexOf(r),y=g!==-1),(t.tag!==null&&t.tag!=="?"||y||t.indent!==2&&e>0)&&(i=!1),y&&t.usedDuplicates[g])t.dump="*ref_"+g;else{if(d&&y&&!t.usedDuplicates[g]&&(t.usedDuplicates[g]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(uK(t,e,t.dump,i),y&&(t.dump="&ref_"+g+t.dump)):(lK(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?Fk(t,e-1,t.dump,i):Fk(t,e,t.dump,i),y&&(t.dump="&ref_"+g+t.dump)):(cK(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&oK(t,t.dump,e,o,u);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new wr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(m=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?m="!"+m:m.slice(0,18)==="tag:yaml.org,2002:"?m="!!"+m.slice(18):m="!<"+m+">",t.dump=m+" "+t.dump)}return!0}function pK(t,e){var r=[],n=[],i,o;for(Px(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function Px(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)Px(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)Px(t[n[i]],e,r)}function mK(t,e){e=e||{};var r=new eK(e);r.noRefs||pK(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),wi(r,0,n,!0,!0)?r.dump+`
`:""}var fK=mK,dK={dump:fK};function Cx(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var iA=jt;var oA=Dx,gK=qk.load,Tpe=qk.loadAll,aA=dK.dump;var xpe=Cx("safeLoad","load"),Spe=Cx("safeLoadAll","loadAll"),vpe=Cx("safeDump","dump");var km=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=aA(this.data,Object.assign({replacer:xK,schema:yK},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},hK=new iA("!format",{kind:"scalar",resolve:()=>!1,instanceOf:km,represent:t=>t.represent()}),yK=oA.extend({implicit:[hK]}),Ox=t=>typeof t=="object"&&t!=null;function TK(t){if(Ox(t))return Object.values(t).every(e=>!Ox(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!Ox(e)&&!Array.isArray(e))}function xK(t,e){return t===""?e:TK(e)?new km(e,{flowLevel:0}):e}var Nx=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","flashTargets","foldRegion","followLink","followLinkAside","gitAccept","gitRevert","gitStage","gitUnstage","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],vK=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],cA=[...Nx,...vK];var bK=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleBacktickQuotes","tripleDoubleQuotes","tripleSingleQuotes"],wK=["string","any","collectionBoundary"],Am=[...bK,...wK],Xo=["argumentOrParameter","argumentList","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function lA(t){return Xo.includes(t.type)}var uA=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],ll=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},bs=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function ul(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function Jo(t){return t.version>=7}var ao=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var ws=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function pA(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function pl(t){return typeof t=="string"||t instanceof String}function Pm(t){let[e,...r]=t;return _K(e,r)}function _K(t,e){let r;if(pl(t)){let n=t,[i,o,...s]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:s,usePrePhraseSnapshot:!1}}else r=t;return r}function ml(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function mA(t){for(let e of t)return!1;return!0}function Ei(t){return Object.keys(t)}function fl(t,e){return`${t}.${e}`}function fA(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,s)=>{let l=r(s),u=o.get(l);return u==null?(o.set(l,[s]),o):(o.get(l).push(s),u.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Yc(i.get(o),e))}),t.flatMap(o=>{let s=r(o),l=i.get(s);if(l==null||l.length===0)return[];let u=l[0];return e(u,o)?(l.shift(),u):[]}))}function ea(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var xA=Symbol.for("immer-nothing"),dA=Symbol.for("immer-draftable"),Wr=Symbol.for("immer-state"),RK=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function _r(t,...e){if(process.env.NODE_ENV!=="production"){let r=RK[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Es=Object.getPrototypeOf;function _s(t){return!!t&&!!t[Wr]}function ra(t){return t?SA(t)||Array.isArray(t)||!!t[dA]||!!t.constructor?.[dA]||Im(t)||Cm(t):!1}var kK=Object.prototype.constructor.toString();function SA(t){if(!t||typeof t!="object")return!1;let e=Es(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===kK}function Mm(t,e){Lm(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Lm(t){let e=t[Wr];return e?e.type_:Array.isArray(t)?1:Im(t)?2:Cm(t)?3:0}function Bx(t,e){return Lm(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function vA(t,e,r){let n=Lm(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function AK(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Im(t){return t instanceof Map}function Cm(t){return t instanceof Set}function ta(t){return t.copy_||t.base_}function Vx(t,e){if(Im(t))return new Map(t);if(Cm(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=SA(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[Wr];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let s=i[o],l=n[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(Es(t),n)}else{let n=Es(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function qx(t,e=!1){return Om(t)||_s(t)||!ra(t)||(Lm(t)>1&&(t.set=t.add=t.clear=t.delete=PK),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>qx(n,!0))),t}function PK(){_r(2)}function Om(t){return Object.isFrozen(t)}var MK={};function na(t){let e=MK[t];return e||_r(0,t),e}var dl;function bA(){return dl}function DK(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function gA(t,e){e&&(na("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Wx(t){$x(t),t.drafts_.forEach(FK),t.drafts_=null}function $x(t){t===dl&&(dl=t.parent_)}function hA(t){return dl=DK(dl,t)}function FK(t){let e=t[Wr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function yA(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Wr].modified_&&(Wx(e),_r(4)),ra(t)&&(t=Dm(e,t),e.parent_||Fm(e,t)),e.patches_&&na("Patches").generateReplacementPatches_(r[Wr].base_,t,e.patches_,e.inversePatches_)):t=Dm(e,r,[]),Wx(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==xA?t:void 0}function Dm(t,e,r){if(Om(e))return e;let n=e[Wr];if(!n)return Mm(e,(i,o)=>TA(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Fm(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,s=!1;n.type_===3&&(o=new Set(i),i.clear(),s=!0),Mm(o,(l,u)=>TA(t,n,i,l,u,r,s)),Fm(t,i,!1),r&&t.patches_&&na("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function TA(t,e,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&_r(5),_s(i)){let l=o&&e&&e.type_!==3&&!Bx(e.assigned_,n)?o.concat(n):void 0,u=Dm(t,i,l);if(vA(r,n,u),_s(u))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(ra(i)&&!Om(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Dm(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Fm(t,i)}}function Fm(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&qx(e,r)}function LK(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:bA(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=Gx;r&&(i=[n],o=gl);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}var Gx={get(t,e){if(e===Wr)return t;let r=ta(t);if(!Bx(r,e))return IK(t,r,e);let n=r[e];return t.finalized_||!ra(n)?n:n===Ux(t.base_,e)?(Hx(t),t.copy_[e]=zx(n,t)):n},has(t,e){return e in ta(t)},ownKeys(t){return Reflect.ownKeys(ta(t))},set(t,e,r){let n=wA(ta(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=Ux(ta(t),e),o=i?.[Wr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(AK(r,i)&&(r!==void 0||Bx(t.base_,e)))return!0;Hx(t),jx(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Ux(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Hx(t),jx(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=ta(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){_r(11)},getPrototypeOf(t){return Es(t.base_)},setPrototypeOf(){_r(12)}},gl={};Mm(Gx,(t,e)=>{gl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});gl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&_r(13),gl.set.call(this,t,e,void 0)};gl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&_r(14),Gx.set.call(this,t[0],e,r,t[0])};function Ux(t,e){let r=t[Wr];return(r?ta(r):t)[e]}function IK(t,e,r){let n=wA(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function wA(t,e){if(!(e in t))return;let r=Es(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Es(r)}}function jx(t){t.modified_||(t.modified_=!0,t.parent_&&jx(t.parent_))}function Hx(t){t.copy_||(t.copy_=Vx(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var CK=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let s=this;return function(u=o,...m){return s.produce(u,d=>r.call(this,d,...m))}}typeof r!="function"&&_r(6),n!==void 0&&typeof n!="function"&&_r(7);let i;if(ra(e)){let o=hA(this),s=zx(e,void 0),l=!0;try{i=r(s),l=!1}finally{l?Wx(o):$x(o)}return gA(o,n),yA(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===xA&&(i=void 0),this.autoFreeze_&&qx(i,!0),n){let o=[],s=[];na("Patches").generateReplacementPatches_(e,i,o,s),n(o,s)}return i}else _r(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,u=>e(u,...l));let n,i;return[this.produce(e,r,(s,l)=>{n=s,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ra(t)||_r(8),_s(t)&&(t=OK(t));let e=hA(this),r=zx(t,void 0);return r[Wr].isManual_=!0,$x(e),r}finishDraft(t,e){let r=t&&t[Wr];(!r||!r.isManual_)&&_r(9);let{scope_:n}=r;return gA(n,e),yA(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=na("Patches").applyPatches_;return _s(t)?n(t,e):this.produce(t,i=>n(i,e))}};function zx(t,e){let r=Im(t)?na("MapSet").proxyMap_(t,e):Cm(t)?na("MapSet").proxySet_(t,e):LK(t,e);return(e?e.scope_:bA()).drafts_.push(r),r}function OK(t){return _s(t)||_r(10,t),EA(t)}function EA(t){if(!ra(t)||Om(t))return t;let e=t[Wr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=Vx(t,e.scope_.immer_.useStrictShallowCopy_)}else r=Vx(t,!0);return Mm(r,(n,i)=>{vA(r,n,EA(i))}),e&&(e.finalized_=!1),r}var $r=new CK,Nm=$r.produce,vde=$r.produceWithPatches.bind($r),bde=$r.setAutoFreeze.bind($r),wde=$r.setUseStrictShallowCopy.bind($r),Ede=$r.applyPatches.bind($r),_de=$r.createDraft.bind($r),Rde=$r.finishDraft.bind($r);var zt=[];for(let t=0;t<256;++t)zt.push((t+256).toString(16).slice(1));function _A(t,e=0){return(zt[t[e+0]]+zt[t[e+1]]+zt[t[e+2]]+zt[t[e+3]]+"-"+zt[t[e+4]]+zt[t[e+5]]+"-"+zt[t[e+6]]+zt[t[e+7]]+"-"+zt[t[e+8]]+zt[t[e+9]]+"-"+zt[t[e+10]]+zt[t[e+11]]+zt[t[e+12]]+zt[t[e+13]]+zt[t[e+14]]+zt[t[e+15]]).toLowerCase()}var RA=require("crypto"),Hm=new Uint8Array(256),Um=Hm.length;function Kx(){return Um>Hm.length-16&&((0,RA.randomFillSync)(Hm),Um=0),Hm.slice(Um,Um+=16)}var kA=require("crypto"),Qx={randomUUID:kA.randomUUID};function NK(t,e,r){if(Qx.randomUUID&&!e&&!t)return Qx.randomUUID();t=t||{};let n=t.random??t.rng?.()??Kx();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return _A(n)}var Yx=NK;function AA(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function Bm(t,e){if(Array.isArray(t))return t.map(r=>Bm(r,e));if(typeof t=="object"&&t!=null){if(UK(t))return AA(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Bm(t[n],e));return r}return t}function UK(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var Gm=Nr(MA(),1);var HK={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},BK={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},Wm={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},$m={modulo100:"row",relativeUp:"up",relativeDown:"down"};function DA(t){let e=HK[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function FA(t){let e=BK[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function Zx(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var VK=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),WK=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),$K={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},LA={...VK,...WK,...$K};function so(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Dt(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var IA={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Dt("triple quad"),tripleSingleQuotes:Dt("triple twin"),tripleBacktickQuotes:Dt("triple skis"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Dt("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",argumentList:"arg list",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:so("one section"),sectionLevelTwo:so("two section"),sectionLevelThree:so("three section"),sectionLevelFour:so("four section"),sectionLevelFive:so("five section"),sectionLevelSix:so("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Dt("parse tree string"),textFragment:Dt("text fragment"),disqualifyDelimiter:Dt("disqualify delimiter"),pairDelimiter:Dt("pair delimiter"),"private.fieldAccess":Dt("access"),"private.switchStatementSubject":Dt("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",flashTargets:"flash",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join",gitAccept:"git accept",gitRevert:"git revert",gitStage:"git stage",gitUnstage:"git unstage","private.showParseTree":Dt("parse tree"),"experimental.setInstanceReference":so("from"),editNew:Dt("edit new"),executeCommand:Dt("execute command"),parsed:Dt("parsed"),getText:Dt("get text"),replace:Dt("replace"),"private.getTargets":Dt("get targets"),"private.setKeyboardTarget":Dt("set keyboard target")},customAction:{},grapheme:LA};var Xx=Zx(IA,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),_i=Zx(Xx,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var bt={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var NA=Nr(OA(),1),zm=class{constructor(e){this.mooLexer=NA.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Ri={};for(let t of Nx){let{spokenForms:e}=_i.action[t];for(let r of e)Ri[r]={type:"simpleActionName",value:t}}var jK=["replaceWithTarget","moveToTarget"];for(let t of jK){let{spokenForms:e}=_i.action[t];for(let r of e)Ri[r]={type:"bringMove",value:t}}var zK=["before","after","to"];for(let t of zK){let e=bt[t==="to"?"sourceDestinationConnective":t];Ri[e]={type:"insertionMode",value:t}}for(let t of Xo){let{spokenForms:e}=_i.simpleScopeTypeType[t];for(let r of e)Ri[r]={type:"simpleScopeTypeType",value:t}}for(let t of Am){let{spokenForms:e}=_i.pairedDelimiter[t];for(let r of e)Ri[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(Wm))e!=null&&(Ri[e]={type:"simpleMarkType",value:t});var ki=new zm({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Ri),type:t=>Ri[t].type,value:t=>Ri[t].value}});function UA(t,e){return{name:t,target:e}}function HA(t,e,r){return{name:t,source:e,destination:r}}function qm(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function BA(t,e){return{type:"primitive",insertionMode:t,target:e}}function VA(t){return{type:"containingScope",scopeType:t}}function WA(t){return{type:t}}function $A(t){return{type:"surroundingPair",delimiter:t}}function jA(t){return{type:t}}function zA(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function Jx(t){return t[0]}var qK={Lexer:ki,ParserRules:[{name:"main",symbols:["action"],postprocess:Jx},{name:"action",symbols:[ki.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>UA(t,e)},{name:"action",symbols:[ki.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>HA(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:Jx},{name:"destination",symbols:[ki.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>BA(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:Jx},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>qm(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>qm(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>qm(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>VA(t)},{name:"scopeType",symbols:[ki.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>WA(t)},{name:"scopeType",symbols:[ki.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>$A(t)},{name:"mark",symbols:[ki.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>jA(t)},{name:"mark",symbols:[ki.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>zA(t)}],ParserStart:"main"},qA=qK;function GK(){return new Gm.Parser(Gm.Grammar.fromCompiled(qA))}function GA(t){let e=GK();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function Km(t,e){let r=GA(t);return Bm(r,e)}function hl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...KA(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return KA(t.destination);case"parsed":return hl(Km(t.content,t.arguments));default:return[t.target]}}function KA(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function tS(t){return t.flatMap(eS)}function eS(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(eS);case"range":return[t.anchor,t.active].flatMap(eS);case"implicit":return[]}}var KK={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},QK={purple:"pink"};function YK(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=KK[e.scopeType.type]??e.scopeType.type)})}function ZK(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=QK[t.mark.symbolColor]??t.mark.symbolColor)}function rS(t){tS(t).forEach(e=>{YK(e),ZK(e)})}function QA(t){return{...t,version:1}}var XK={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},JK={type:"primitive",isImplicit:!0},YA=t=>vi(t,XK)?JK:t;function ZA(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:t4(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function e4(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function nS(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:s,selectionType:l,position:u}=t,m=[];if(u&&u!=="contents"&&(u==="before"?o==="inside"?m.push({type:"position",position:"start"}):e==="remove"?m.push({type:"leading"}):m.push({type:"position",position:"before"}):o==="inside"?m.push({type:"position",position:"end"}):e==="remove"?m.push({type:"trailing"}):m.push({type:"position",position:"after"})),l)switch(l){case"token":if(s?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:m.push({type:"containingScope",scopeType:{type:l}})}return s&&m.push(...e4(s)),{type:r,isImplicit:n,modifiers:m.length>0?m:void 0,mark:i?.type==="cursorToken"?void 0:i}}function XA(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>XA(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:s,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:nS(i,e),active:nS(o,e),excludeAnchor:s??!1,excludeActive:l??!1}}case"primitive":return nS(t,e)}}function t4(t,e){return t.map(r=>XA(r,e)).map(r=>r.type==="primitive"?YA(r):r)}function JA(t){return{...t,version:3,targets:t.targets.map(eP)}}function eP(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>eP(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:iS(e),active:iS(r),...n}}case"primitive":return iS(t)}}function iS(t){let e=t.modifiers!=null?t.modifiers.map(n4):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:Tl(r),modifiers:e},active:{type:"primitive",mark:Tl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?r4(t.mark):void 0,modifiers:e}}function r4(t){switch(t.type){case"lineNumber":return i4(t);default:return t}}function n4(t){switch(t.type){case"ordinalRange":return o4(t);default:return t}}function i4(t){return vi(t.anchor,t.active)?Tl(t.anchor):{type:"range",anchor:Tl(t.anchor),active:Tl(t.active)}}function o4(t){return t.anchor===t.active?yl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?yl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?yl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:yl(t.scopeType,t.anchor),active:yl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function Tl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function yl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function rP(t){return{...t,version:4,targets:t.targets.map(nP)}}function nP(t){switch(t.type){case"primitive":return tP(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:tP(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(nP)}}}}function tP(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function iP(t){return{...t,version:5,action:a4(t.action),targets:t.targets.map(Qm)}}function a4(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=s4(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function s4(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function Qm(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(Qm)};case"range":return{...t,anchor:Qm(t.anchor),active:Qm(t.active)};case"primitive":return{...t,mark:t.mark!=null?oS(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(aS):void 0}}}function oS(t){return t.type==="range"?{...t,anchor:oS(t.anchor),active:oS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function aS(t){return t.type==="range"?{...t,anchor:aS(t.anchor),active:aS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var c4={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function sS(t){let e=c4[t]??t;if(!cA.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function oP(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:l4(t.action,t.targets)}}function l4(t,e){let r=sS(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:ln(e[0]),destination:xl(e[1])};case"swapTargets":return{name:r,target1:ln(e[0]),target2:ln(e[1])};case"callAsFunction":return{name:r,callee:ln(e[0]),argument:ln(e[1])};case"pasteFromClipboard":return{name:r,destination:xl(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:ln(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:ln(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:xl(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:ln(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:ln(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:xl(e[0])};case"highlight":{let n={name:r,target:ln(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:xl(e[0])};case"getText":return{name:r,options:t.args?.[0],target:ln(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:ln(e[0])}}}function ln(t){switch(t.type){case"list":case"range":case"primitive":return u4(t);case"implicit":return t}}function u4(t){switch(t.type){case"list":return p4(t);case"range":case"primitive":return Ym(t)}}function p4(t){return{...t,elements:t.elements.map(Ym)}}function Ym(t){switch(t.type){case"range":return aP(t);case"primitive":return Zm(t)}}function aP(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:Zm(e),active:Zm(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function Zm(t){let e={type:"primitive"},r=y4(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function xl(t){switch(t.type){case"list":return m4(t);case"range":return f4(t);case"primitive":return d4(t);case"implicit":return g4()}}function m4(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let s=Xm(o);s!=null?(i(),r=[Ym(o)],n=s):r.push(Ym(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function f4(t){return{type:"primitive",insertionMode:Xm(t.anchor)??"to",target:aP(t)}}function d4(t){return{type:"primitive",insertionMode:Xm(t)??"to",target:Zm(t)}}function g4(){return{type:"implicit"}}function Xm(t){switch(t.type){case"implicit":return"to";case"primitive":return h4(t);case"range":return Xm(t.anchor)}}function h4(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function y4(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function sP(t){return{...t,version:7}}function lS(t){let e=T4(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Nm(r,o=>{let s=hl(o);rS(s),r.name}),usePrePhraseSnapshot:n}}function T4(t,e){if(t.version>7)throw new Mp;for(;t.version<e;)switch(t.version){case 0:t=QA(t);break;case 1:t=ZA(t);break;case 2:t=JA(t);break;case 3:t=rP(t);break;case 4:t=iP(t);break;case 5:t=oP(t);break;case 6:t=sP(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var uS;function Jm(t){uS=t}function k(){if(uS==null)throw Error("Tried to access ide before it was injected");return uS}var ef=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var x4=25,tf=class{constructor(){this.targetMap=new Map;this.targetHistory=new ws(()=>new ef(x4));this.notifier=new Jt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of ys)e(r,this.get(r));return this.notifier.registerListener(e)}};function _t(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function Rr(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Ai(t,e,r){return Promise.all(pS(t,e).map(([n,i])=>r(n,i)))}async function at(t,e){return Ai(t,r=>r.editor,e)}async function cP(t,e){let r=pS(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function lP(t){return pS(t,e=>e.editor)}function pS(t,e){let n=ml(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function un(t,e){return e!=null?Pt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new Be(i.end,i.start):new Be(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function pn(t,e){return t.textualType==="line"?Vr(e):mr(e)}function S4(t){return pn(t,t.contentRange)}function Ne(t,e,r,n=S4){return t.flashRanges(e.map(i=>({editor:i.editor,range:n(i),style:r})))}function co(t,e){return new Y(new ge(e.start.line,0),t.document.lineAt(e.end).range.end)}function mS(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function uP(t,e){let[r,n]=e instanceof ge?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Pi(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var rf=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=b4(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?v4(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=s=>this.updateRange(s,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Pi(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new Y(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),s=o+r.length;return new Y(this.editor.document.positionAt(o),this.editor.document.positionAt(s))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function v4(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let s=o.rangeTrimmed?.start??o.range.end;s.character<r&&(r=s.character,n=o.text.slice(0,r))}return n}function b4(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function Rs(t,e,r,n){return w4(t.contentRange,e.contentRange,r,n)}function w4(t,e,r,n){return new Y(r?t.start:t.end,n?e.end:e.start)}function ks(t,e,r,n){let i=r?t.contentRange.start:new ge(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new Y(i,o)}var je=class t{constructor(e){this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.textualType="token";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return pn(this,this.getRemovalRange())}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:Rs(this,r,!0,!0)})}isEqual(e){return e instanceof t&&vi(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new rf(this,e)}toPlainObject(){return{type:this.type,contentRange:nl(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function nf(t,e){return E4(t,e.start,e.end)}function E4(t,e,r){return{editor:t.editor,selection:_4(t.selection,e,r)}}function _4(t,e,r){return t.isReversed?new Be(r,e):new Be(e,r)}function ia(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,s=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,u=r.positionAt(s),m=r.positionAt(l);return new Y(u,m)}function of(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var Ke=class extends je{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.textualType=r.textualType??"token",this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,textualType:this.textualType,insertionDelimiter:this.insertionDelimiter}}};function As(t,e,r){return of(Ke,t,e,r)}var af=class extends je{constructor(r){super(r);this.type="DocumentTarget";this.textualType="line";this.insertionDelimiter=`

`}getInterior(){return[new Ke({editor:this.editor,isReversed:this.isReversed,contentRange:ia(this.editor,this.contentRange)})]}getRemovalRange(){return this.contentRange}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getCloneParameters(){return this.state}};var fr=class t extends je{constructor(){super(...arguments);this.type="LineTarget";this.textualType="line";this.insertionDelimiter=`
`;this.getRemovalHighlightRange=()=>Vr(this.fullLineContentRange)}get fullLineContentRange(){return co(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return As(this.editor,R4(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return As(this.editor,k4(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:ks(this,n,!0,!0)})}getCloneParameters(){return this.state}};function R4(t,e){let{start:r}=e;return r.line>0?new Y(t.document.lineAt(r.line-1).range.end,e.start):void 0}function k4(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new Y(e.end,new ge(r.line+1,0)):void 0}function fS(t,e,r){return of(fr,t,e,r)}var sf=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var cf=class extends je{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new sf(this,r)}};var lo=class t extends je{constructor(){super(...arguments);this.type="ParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`}getLeadingDelimiterTarget(){return fS(this.editor,A4(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return fS(this.editor,P4(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new fr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return co(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange;return Vr(n)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:ks(this,n,!0,!0)})}getCloneParameters(){return this.state}};function A4(t,e){let{document:r}=t,n=r.lineAt(e.start),i=M4(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new Y(new ge(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new Y(new ge(0,0),r.lineAt(n.lineNumber-1).range.end)}function P4(t,e){let{document:r}=t,n=r.lineAt(e.end),i=D4(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new Y(new ge(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new Y(new ge(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function M4(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function D4(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var uo=class extends je{constructor(){super(...arguments);this.type="RawSelectionTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};function Sl(t){let e=Pi(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var F4=['"',"'","(","[","{","<"],L4=['"',"'",")","]","}",">",",",";",":"];function zn(t){let{editor:e}=t,{start:r}=Pi(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new Ke({contentRange:new Y(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function qn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new Ke({contentRange:new Y(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function po(t){let{editor:e}=t,r=Pi(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),s=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=co(e,r);return o.union(s).isRangeEqual(l)?l:!s.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||F4.includes(I4(e,r)))?r.union(s):!o.isEmpty&&(r.end.isEqual(l.end)||L4.includes(C4(e,r)))?r.union(o):r}function I4(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new Y(r.translate(void 0,-1),r)):""}function C4(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new Y(r.translate(void 0,1),r)):""}var rr=class extends je{constructor(){super(...arguments);this.type="TokenTarget";this.textualType="token";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return qn(this)}getRemovalRange(){return po(this)}getCloneParameters(){return this.state}};function dS(t){let{editor:e,isReversed:r}=t,{document:n}=e,i=Pi(t.contentRange,t.prefixRange);return O4(n,i)?N4(n,i)?new lo({editor:e,isReversed:r,contentRange:i}):new fr({editor:e,isReversed:r,contentRange:i}):new rr({editor:e,isReversed:r,contentRange:i})}function O4(t,e){let r=t.lineAt(e.start).rangeTrimmed?.start,n=t.lineAt(e.end).rangeTrimmed?.end;return r!=null&&n!=null&&r.isEqual(e.start)&&n.isEqual(e.end)}function N4(t,e){let{start:r,end:n}=e;return(r.line===0||t.lineAt(r.line-1).isEmptyOrWhitespace)&&(n.line===t.lineCount-1||t.lineAt(n.line+1).isEmptyOrWhitespace)}var mo=class t extends je{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??U4(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new Ke({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return zn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new Ke({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return qn(this)}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?Sl(this):dS(this).getRemovalRange()}getRemovalHighlightRange(){return this.removalRange_!=null?pn(this,this.removalRange_):this.hasDelimiterRange_?pn(this,Sl(this)):dS(this).getRemovalHighlightRange()}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?(this.removalRange_??this.contentRange).union(n.removalRange_??n.contentRange):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:this.contentRange.union(n.contentRange)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function U4(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var lf=class t extends je{constructor(r){super(r);this.type="SubTokenWordTarget";this.textualType="word";this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return As(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return As(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return Sl(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Rs(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Ps=class t extends je{constructor(r){super({...r,contentRange:ia(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:this.fullInteriorRange.union(n.fullInteriorRange)})}};var uf=class extends je{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return qn(this)}getRemovalRange(){return po(this)}getInterior(){return[new Ps({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new rr({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Ct=class extends je{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.textualType=r.textualType??"token"}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return qn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:po(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,textualType:this.textualType,hasExplicitRange:this.hasExplicitRange}}};var pf=class extends je{constructor(){super(...arguments);this.type="ImplicitTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var mf=class extends je{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:pP(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return qn(this)}getRemovalRange(){return po(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new Ke({editor:this.editor,contentRange:pP(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function pP(t,e,r){return r?new Y(e.start,t.end):new Y(t.start,e.end)}var ff=class t extends je{constructor(r){super({...r,contentRange:H4(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new fr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return co(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=(()=>{if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n!=null?this.fullLineContentRange.union(n.contentRange):this.fullLineContentRange})();return Vr(r)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function H4(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function df(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var Ms=class{run(){return df(k()).map(e=>new Ct({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,textualType:"character"}))}};var Gn=class{constructor(e,r){this.debouncer=new Ap(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var gf=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Gn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new Ms().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var hf=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var B4=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],V4=B4.map(Br).join("|"),W4=["[a-zA-Z0-9]",V4].join("|"),$4=new RegExp(`^(${W4})$`,"u"),j4="[unk]",z4=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,yf=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Jt;this.getTokenGraphemes=e=>sn(e,z4,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;k().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(k().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=k().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=nx(o),$4.test(o)||(o=j4)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function oa(){return gS==null&&(gS=new yf),gS}var gS;var q4=["-","+","*","/","=","<",">","_","#",".","|","&",":"],G4=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],K4=["\\p{L}","\\p{M}","\\p{N}"],Q4="[^\\s\\w]",Y4="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function Z4(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:s}=t,l=r.map(Br).map(x=>`${x}+`).join("|"),u=e.map(Br).join("|"),d=`(${n.concat(i.map(Br)).join("|")})+`,g=`(${n.join("|")})+`,y=[u,o,d,l,s].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(g,"gu"),tokenMatcher:new RegExp(y,"gu")}}var hS=new Map;function kr(t){let e=k().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!hS.has(r)){let n={fixedTokens:G4,repeatableSymbols:q4,identifierWordRegexes:K4,identifierWordDelimiters:e,numbersRegex:Y4,singleSymbolsRegex:Q4};hS.set(r,Z4(n))}return hS.get(r)}function mP(t,e,r){return sn(t,kr(e).tokenMatcher,r)}var X4=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,Ds=class{constructor(e){this.wordRegex=kr(e).wordMatcher}splitIdentifier(e){let r=tl(e,this.wordRegex);return r.length>1?r:tl(e,X4)}};var fP=({penalty:t})=>-t,dP=({isFirstLetter:t})=>t?-1:0;function gP(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function hP(t,e){let r=Kc(n=>ux(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function yS(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function yP(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function TP(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=J4(r,n)}return r[0]}function J4(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function xP({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,s){return TP(s,[yS(i),yP(r),yS(o),gP(t),fP,dP,hP(n,e)])}function SP(t,e,r){let n={},i=new ao(({grapheme:o,hatStyle:s})=>[o,s]);return t.forEach(({token:o,rank:s})=>{let l=e.get(o);l!=null&&i.set(l,s),r.getTokenGraphemes(o.text).forEach(({text:u})=>{let m;u in n?m=n[u]:(m=[],n[u]=m),m.push(s)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function vP(t,e=[]){return new Map(cx(nt,Go)(Qc([e],t.visibleRanges.map(r=>px(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function bP(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let s=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return s-l}}function wP(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return mP(n,r,o=>{let s=i+o.index,l=i+o.index+o[0].length,u=new Y(t.document.positionAt(s),t.document.positionAt(l));return{editor:t,text:o[0],range:u,offsets:{start:s,end:l}}})}function EP(t,e,r){let i=t9(t,e).flatMap(o=>{let s=o.selections[0].active,l=vP(o,[s.line]),u=nt(o.visibleRanges.map(m=>wP(o,m).map(d=>({...d,displayLine:l.get(d.range.start.line)}))));return u.sort(bP(l.get(s.line),s.character)),u});return e9(r,i).map((o,s)=>({token:o,rank:-s}))}function e9(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function t9(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function TS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:s}){let l=r==null?void 0:_P(r),u=_P(n),m=EP(o,s,l),d=SP(m,u,t),g=Object.keys(e),y=new ws(()=>[...g]);return m.map(({token:x,rank:w})=>{let E=r9(t,x,y,e),U=xP(d,i,w,l?.get(x),u.get(x),E);if(U!=null)return y.set(U.grapheme.text,y.get(U.grapheme.text).filter(V=>V!==U.style)),n9(x,U)}).filter(x=>x!=null)}function _P(t){let e=new ao(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function r9(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text),s=new Set(new Ds(e.editor.document.languageId).splitIdentifier(e.text).map(l=>l.index));for(let l of o){let u=s.has(l.tokenStartOffset);for(let m of r.get(l.text))i.push({grapheme:l,style:m,penalty:n[m].penalty,isFirstLetter:u})}return i}function n9(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new Y(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var Tf=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];k().disposeOnExit(this);let n=new Gn(k().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeActiveTextEditor(n.run),k().onDidChangeVisibleTextEditors(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorSelection(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),oa().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:oa().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?TS({tokenGraphemeSplitter:oa(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:k().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:k().activeTextEditor,visibleTextEditors:k().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:s}})=>({editor:s,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var xf=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:s}=n,l=this.makeTokenLive(s);return this.map[fl(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=kr(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[fl(e,oa().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var i9=6e4,Sf=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;k().disposeOnExit(this),this.activeMap=new xf(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new Tf(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>i9?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function xS(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var wS=Nr(bl(),1);function ES(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:s,end:l}}=e;return(0,wS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,wS.invariant)(n>=s&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=s?s+o:Math.min(s,i),end:n<=l?l+o:Math.min(l,i)}}var DP=Nr(bl(),1);function _S(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,DP.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let s=e.expansionBehavior.end;switch(s.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(hm(s.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let s=e.expansionBehavior.start;switch(s.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(gm(s.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var RS=Nr(bl(),1);function kS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:s},text:l}=e;if((0,RS.invariant)(s>o,()=>"Selection range expected to be nonempty"),(0,RS.invariant)(n>=o&&n<=s,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<s)return{start:o,end:s+i};if(n===o){let u=e.expansionBehavior.start,m=s+i;switch(u.type){case"closed":return{start:o+i,end:m};case"open":return{start:o,end:m};case"regex":{let d=r+l,g=gm(u.regex),y=d.search(g);for(;y>r.length;)d=d.slice(0,y),y=d.search(g);return y===-1?{start:o,end:m}:{start:o+y,end:m}}}}else{let u=e.expansionBehavior.end,m=o;switch(u.type){case"closed":return{start:m,end:s};case"open":return{start:m,end:s+i};case"regex":{let d=l+r,g=hm(u.regex),y=d.match(g),x=y==null?0:y[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,y=d.match(g),x=y==null?0:x+y[0].length;return x===0?{start:m,end:s}:{start:m,end:o+x}}}}}function FP(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:s}=e.offsets,l=Math.min(n,o),u="";return o<n&&(u+=e.text.substring(0,n-o)),u+=t.event.text,i<s&&(u+=e.text.substring(s-i,e.text.length)),u.substring(r.start-l,r.end-l)}function LP(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let s=o.text.length-o.rangeLength,l=o.rangeOffset,u=l+o.rangeLength,m=l,d=u+s;return{displacement:s,event:o,originalOffsets:{start:l,end:u},finalOffsets:{start:m,end:d}}});for(let o of e){let s=o.offsets,l=i.map(m=>{let d;return m.originalOffsets.start>s.end?{start:0,end:0}:m.originalOffsets.end<s.start?{start:m.displacement,end:m.displacement}:(m.event.rangeLength===0?o.range.isEmpty?d=_S(m,o):d=kS(m,o):d=ES(m,o),o.text=FP(m,o,d),{start:d.start-s.start,end:d.end-s.end})}),u={start:s.start+lm(l,({start:m})=>m),end:s.end+lm(l,({end:m})=>m)};o.range=o.range.with(r.positionAt(u.start),r.positionAt(u.end)),o.offsets=u}}var bf=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return xS(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return xS(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>pr(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>pr(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=k().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>f9(r,i)?{...i,isReplace:!0}:i)};LP(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function f9(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var wf=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var Ef=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var _f=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var Rf=class{getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e,r){throw new Error("Snippets are not implemented.")}};var kf=class{getSpokenFormEntries(){throw new bs}onDidChange(){return{dispose:()=>{}}}};var Af=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}createQuery(e,r){throw new Error("Tree sitter not provided")}};var st=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var IP={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleBacktickQuotes:["```","```"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var CP=new ao(t=>t);for(let[t,e]of Object.entries(IP))e!=null&&CP.set(e,t);function OP(t,e,r){let n=CP.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}function NP(t){throw new st(`${t.type} insertion snippet`)}function UP(t){throw new st(`${t.type} wrap with snippet`)}function wl(t,e,r){let n=r==="vertical"?`${bt.verticalRange} `:"";if(t&&e)return n+bt.rangeExclusive;if(t)throw new st("Range exclude anchor");return e?n+bt.rangeExcludingEnd:r==="vertical"?bt.verticalRange:bt.rangeInclusive}function HP(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var d9=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],g9=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function Fs(t){let e=d9[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function El(t){let e=g9[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Pf=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new st(`Modifier '${e.type}'`);case"containingScope":return e.ancestorIndex==null||e.ancestorIndex===0?this.handleScopeType(e.scopeType):[new Array(e.ancestorIndex).fill(this.spokenFormMap.modifierExtra.ancestor),this.handleScopeType(e.scopeType)];case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,El(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,El(e.start+1),r];let i=Fs(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,_l(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,_l(r)];throw new st(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:El(e.anchor.start+1),n=this.handleModifier(e.active),i=wl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let s=e.direction==="forward"?bt.forward:bt.backward;return[n,r,s]}let i=Fs(e.length),o=_l(r);return e.direction==="forward"?[n,i,o]:[n,i,o,bt.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?bt.next:bt.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=Fs(e.length);if(e.length===1)return[i,n,r];let s=_l(r);return[i,n,o,s]}if(e.length===1){let o=El(e.offset);return[i,o,n,r]}throw new st(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new st(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,VP(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};case"interior":return this.spokenFormMap.simpleModifier.interiorOnly;default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(DA(r)),n!=null&&i.push(FA(n)),i.push(VP(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let s=wl(e.excludeAnchor,e.excludeActive);return[r,n,s,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new st(`Mark '${e.type}'`);default:return[Wm[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new st("Absolute line numbers");case"modulo100":return[$m.modulo100,Fs(e.lineNumber+1)];case"relative":return[e.lineNumber<0?$m.relativeUp:$m.relativeDown,Fs(Math.abs(e.lineNumber))]}}};function _l(t){if(typeof t=="string")return BP(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),_l(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(BP)}}}function BP(t){return`${t}s`}function VP(t,e,r){let n=t[r];if(n==null)throw new st(`${e} '${r}'`);return n}var Ls=class{constructor(e){this.spokenFormMap=HP(e),this.primitiveGenerator=new Pf(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new st(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:WP(e())}}catch(r){if(r instanceof st)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new st(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),bt.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[OP(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],NP(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new st(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[UP(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new st(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new st("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[bt.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=wl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new st("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[bt.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return bt.sourceDestinationConnective;case"before":return bt.before;case"after":return bt.after}}};function WP(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:$P(t.map(WP)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${ul(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new st(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function $P(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=$P(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Mf=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Jt;this.spokenFormMap_={..._i};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps()),this.customSpokenFormsInitialized=this.updateSpokenFormMaps()}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof ll)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof bs)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");ut(k().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}this.spokenFormMap_={..._i},this.notifier.notifyListeners();return}for(let r of uA)h9(this.spokenFormMap_,r,Xx[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function h9(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let s of i){let{defaultSpokenForms:l=[],isPrivate:u=!1}=r[s]??{},m=n[s];o[s]=m==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!u,isCustom:!1,isPrivate:u}:{defaultSpokenForms:l,spokenForms:m,requiresTalonUpdate:!1,isCustom:!vi(l,m),isPrivate:u}}t[e]=o}var Df=class{constructor(e){this.customSpokenForms=new Mf(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new Ls(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new Ls(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*y9(t){for(let e of t)for(let r of e)yield r}function*Rl(t,e){let r=Lf(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*AS(t){let e=Lf(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var VSe=Symbol();function*T9(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*Ff(t,e){let r=0;for(let n of t)e(n,r++)&&(yield n)}function*qt(t,e){for(let r of t)yield e(r)}function*zP(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let s=-1,l=Lf(t),u;for(;;){if(s++,o!==null&&s>=o||(u=l.next(),u.done))return;s<i||(s-i)%n===0&&(yield u.value)}}function*x9(t,e){let r=0,n=Lf(t),i;for(;!(i=n.next()).done;){let o=i.value;if(!e(o,r++))return;yield o}}function Lf(t){return t[Symbol.iterator]()}function Is(t,e){return Array.from(qt(t,e))}function jP(t,e,r){let n=T9(t,r),i=r>=0?o=>o<e:o=>o>e;return x9(n,i)}function qP(t,e,r=1){return e!==void 0?jP(t,e,r):jP(0,t,r)}function If(t,e){return y9(qt(t,e))}function jr(t,e,{domain:r},{domain:n}){return t==="forward"?S9(e,r,n):v9(e,r,n)}function S9(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let s=e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&!i){let s=e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&i){let s=e.end.compareTo(r.start);return s!==0?s:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function v9(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let s=-e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&!i){let s=-e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&i){let s=-e.start.compareTo(r.end);return s!==0?s:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function GP(t,e,r,n,i,o){return b9(t,n,i,o)&&(i==null||jr(r,n.includeDescendantScopes?t:e,i,o)<0)}function b9(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:s,skipAncestorScopes:l}=e,{domain:u}=n;switch(i){case"disallowed":if(u.contains(t))return!1;break;case"disallowedIfStrict":if(uP(u,t))return!1;break;case"required":if(!u.contains(t))return!1;break}return l&&r!=null&&u.contains(r.domain)?!1:w9(new Y(t,o),u,s)}function w9(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var E9={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},We=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...E9,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},s,l=r;for(let u of this.generateScopeCandidates(e,r,n,o))if(GP(r,l,n,o,s,u)&&(yield u,s=u,l=n==="forward"?u.domain.end:u.domain.start),this.canStopEarly(r,n,o,s,u))return}canStopEarly(e,r,n,i,o){let{containment:s,distalPosition:l,skipAncestorScopes:u}=n;if(this.isHierarchical&&!u)return!1;let m=this.isHierarchical&&u?i:o;return m==null?!1:!!(s==="required"&&(r==="forward"?m.domain.end.isAfter(e):m.domain.start.isBefore(e))||(r==="forward"?m.domain.end.isAfterOrEqual(l):m.domain.start.isBeforeOrEqual(l)))}};var Ar=class extends We{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:s,...l}=o,u=this.searchScopeHandler.generateScopes(r,n,i,{containment:s==="required"?"required":void 0,...l});return If(u,m=>this.generateScopesInSearchScope(i,m))}};var Cf=class extends We{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield KP(r,o);else for(let o=n.line;o>=0;o--)yield KP(r,o)}};function KP(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[PS(t,n,r)]}}function PS(t,e,r){return new fr({editor:t,isReversed:e,contentRange:MS(t,r)})}function MS(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new Y(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function fn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),s=l=>new Y(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?qt(o.matchAll(t),s):Array.from(o.matchAll(t),s).reverse()}var Of=class extends Ar{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=kr(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return qt(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new rr({editor:n,contentRange:o,isReversed:s})]}))}};function Nf(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let s=Ko(o,n),l=Ko(o,i);if(s&&!l)return!0;if(l&&!s)return!1}}var _9=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,R9=/[$]/g,k9=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Uf=class extends Ar{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return qt(fn(_9,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Ke({editor:n,contentRange:o,isReversed:s,textualType:"character"})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=kr(this.languageId);return Nf(r,n,[i,R9,k9])}};var Hf=class extends Ar{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new Ds(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(u=>new Y(i.positionAt(o+u.index),i.positionAt(o+u.index+u.text.length)));return l.map((u,m)=>({editor:r,domain:u,getTargets:d=>{let g=m>0?l[m-1]:null,y=m+1<l.length?l[m+1]:null;return[A9(d,r,g,u,y)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function A9(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new Y(r.end,n.start):void 0,s=i!=null&&i.start.isAfter(n.end)?new Y(n.end,i.start):void 0,u=o!=null||s!=null?e.document.getText(o??s):"";return new lf({editor:e,isReversed:t,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:o,trailingDelimiterRange:s})}var P9=/[$]/g,Bf=class extends Ar{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=kr(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return qt(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new rr({editor:n,contentRange:o,isReversed:s})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=kr(this.languageId);return Nf(r,n,[i,P9])}};var Vf=class extends We{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:s=>[new af({editor:r,isReversed:s,contentRange:o})]}}};function Wf(t,e,r,n,i){if(!t&&n!=null&&i!=null&&mS(e,n)>mS(e,i))return r.union(n)}function Cs(t){return t.containment==null&&t.skipAncestorScopes}function QP(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:s,end:l}=M9(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(s),end:t.positionAt(l)}}function M9(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let s=n==="disallowed"?1:-o;return r==="forward"?{start:t+s,end:e+o}:{start:e-o,end:t-s}}function YP(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Os=class extends We{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:s}=r,l=Cs(o),{start:u,end:m}=QP(s,n,i,o),d=this.query.matches(s,u,m).map(g=>this.matchToScope(r,g,l)).filter(g=>g!=null).sort((g,y)=>jr(i,n,g,y));yield*YP(d,(g,y)=>g.domain.isRangeEqual(y.domain),g=>g.length===1?g[0]:{...g[0],getTargets(y){let x=Yc(g.flatMap(w=>w.getTargets(y)),(w,E)=>w.isEqual(E));if(x.length>1&&!g.every(w=>w.allowMultiple)){let w="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(ut(k().messages,"BaseTreeSitterScopeHandler.allow-multiple",w),k().runMode==="test")throw Error(w)}return x}})}};function DS(t,e,r,n){return n?Ns(t,`${e}.${r}`,`_.${r}`):Ns(t,`${e}.${r}`)??(Ns(t,e)!=null?Ns(t,`_.${r}`):void 0)}function go(t,e,r,n){return DS(t,e,r,n)?.range}function Ns(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var $f=class extends Os{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n,i){let o=this.iterateeScopeType.type,s=DS(n,o,"iteration",!1);if(s==null)return;let{range:l,allowMultiple:u}=s,m=go(n,o,"iteration.domain",!1)??l;return{editor:r,domain:m,allowMultiple:u,getTargets:d=>[new Ke({editor:r,isReversed:d,contentRange:l})]}}};var jf=class extends Os{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new $f(this.query,this.scopeType)}}matchToScope(r,n,i){let o=this.scopeType.type,s=Ns(n,o);if(s==null)return;let{range:l,allowMultiple:u,insertionDelimiter:m}=s,d=go(n,o,"domain",!0)??l,g=go(n,o,"prefix",!0)?.with(void 0,l.start),y=go(n,o,"leading",!0)?.with(void 0,g?.start??l.start),x=go(n,o,"trailing",!0)?.with(l.end),w=go(n,o,"removal",!0);return w==null&&(o==="collectionItem"||o==="argumentOrParameter")&&(w=Wf(i,r,l,y,x)),{editor:r,domain:d,allowMultiple:u,getTargets:E=>[new mo({scopeTypeType:o,editor:r,isReversed:E,contentRange:l,prefixRange:g,removalRange:w,leadingDelimiterRange:y,trailingDelimiterRange:x,insertionDelimiter:m})]}}};function ZP(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function XP(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,s=!1;for(;!s&&!e(o);)({value:o,done:s}=n.next());return s?[]:[{iterator:n,value:o,index:i}]})}var Qn=class t extends We{constructor(r,n){super();this.scopeHandlers=r;this.getIterationScopeHandler=n;this.isHierarchical=!0;this.scopeType=void 0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(r,i,o)}static createFromScopeHandlers(r,n,i){let o=()=>new t(i.map(s=>r.create(s.iterationScopeType,n)),()=>{throw new Error("Not implemented")});return new t(i,o)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let u=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[u].generateScopes(r,n,i,o);return}let s=this.scopeHandlers.map(u=>u.generateScopes(r,n,i,o)[Symbol.iterator]()),l=ZP(s);for(;l.length>0;){l.sort((d,g)=>jr(i,n,d.value,g.value));let u=l[0],m=u.value;this.lastYieldedIndex=u.index,yield m,l=XP(l,d=>jr(i,n,m,d)<0)}}};var zf=class extends We{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,s=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,u=D9(o,n,i),m=r.document.lineAt(n);for(let d=n.line+s;d!==l;d+=s){let g=r.document.lineAt(d);g.isEmptyOrWhitespace?u!=null&&(yield JP(r,u.range.union(m.range)),u=void 0):u==null&&(u=g),m=g}u!=null&&(yield JP(r,u.range.union(m.range)))}};function D9(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let s=e.line+n;s!==i;s+=n){let l=t.lineAt(s);if(l.isEmptyOrWhitespace)break;o=l}return o}}function JP(t,e){return{editor:t,domain:e,getTargets:r=>[new lo({editor:t,isReversed:r,contentRange:MS(t,e)})]}}function kl(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function eM(t,e){return t.slice(t.length-e.length)===e}var FS,L9=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function tM(t){t?FS=t:FS=L9}function LS(t){return/^[A-Z][a-z].*/.test(t)||qf(t)}function rM(t){return LS(t)||/``|"|'/.test(t.substring(0,2))}function nM(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~FS.indexOf(e)}function iM(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function IS(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function oM(t){return t.length<=3?!0:LS(t)}function CS(t,e){return e.length>0?t<5&&e[0].length<6&&LS(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function qf(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function aM(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function sM(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function cM(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function lM(t){return t==="."||t==="!"||t==="?"}var pM=" @~@ ",uM=pM.trim(),C9=new RegExp("\\S",""),O9=new RegExp("\\n+|[-#=_+*]{4,}","g"),N9=new RegExp("\\S+|\\n","g"),U9={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function mM(t,e){if(!t)return[];if(!C9.test(t))return[];let r={...U9,...e};tM(r.abbreviations),r.newlineBoundaries&&(t=t.replace(O9,pM));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(g,y){return y%2})):n=t.trim().match(N9)??[];let o=0,s=0,l=[],u=[],m=[];if(!n||!n.length)return[];for(let g=0,y=n.length;g<y;g++){if(o++,m.push(n[g]),~n[g].indexOf(",")&&(o=0),lM(n[g])||kl(n[g],"?!")||n[g]===uM){r.newlineBoundaries&&n[g]===uM&&m.pop(),u.push(m),o=0,m=[];continue}if((kl(n[g],'"')||kl(n[g],"\u201D"))&&(n[g]=n[g].slice(0,-1)),kl(n[g],".")){if(g+1<y){if(n[g].length===2&&isNaN(n[g].charAt(0))||nM(n[g]))continue;if(rM(n[g+1])){if(iM(n[g],n[g+1])||CS(o,n.slice(g,6))||qf(n[g+1])&&oM(n[g]))continue}else if(eM(n[g],"..")||IS(n[g])||CS(o,n.slice(g,5)))continue}u.push(m),m=[],o=0;continue}(s=n[g].indexOf("."))>-1&&(qf(n[g],s)||IS(n[g])||sM(n[g])||aM(n[g]))||(l=cM(n[g]))&&(m.pop(),m.push(l[0]),u.push(m),m=[],o=0,m.push(l[1]))}return m.length&&u.push(m),u=u.filter(function(g){return g.length>0}),u.slice(1).reduce(function(g,y){let x=g[g.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(y[0])?(g.pop(),g.push(x.concat(y)),g):(g.push(y),g)},[u[0]]).map(function(g,y){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=g.length*2;return y===0&&(x+=1),i.splice(0,x).join("")}return g.join(" ")})}var H9=/\S*\p{L}/u,fM=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,B9={newlineBoundaries:!1,preserveWhitespace:!0},Gf=class{*segment(e){let r=mM(e,B9),n=0;for(let i of r){let o=i.split(fM).filter(s=>s!=null);for(let s of o){if(!W9(s)){let l=V9(s,n);l!=null&&(yield l)}n+=s.length}}}};function V9(t,e){let r=pk(H9,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function W9(t){return Ko(fM,t)}var Kf=class extends Ar{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new Gf}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),s=n.document.getText(i),l=m=>{let d=new Y(n.document.positionAt(o+m.index),n.document.positionAt(o+m.index+m.text.length));return{editor:n,domain:d,getTargets:g=>[new rr({editor:n,contentRange:d,isReversed:g})]}},u=this.segmenter.segment(s);return r==="forward"?qt(u,l):Array.from(u,l).reverse()}};var Us=class extends Ar{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return qt(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new rr({editor:n,contentRange:o,isReversed:s})]}))}},Qf=class extends Us{constructor(){super(...arguments);this.regex=/\S+/g}},Yf=class extends Us{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},Zf=class extends Us{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},Xf=class extends Us{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Br(this.scopeType.character),"gui")}};var Jf=class extends We{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let s=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:Cs(o)?"required":o.containment}));for(let u of s){let m=[];for(let d of l){let g=u.domain.intersection(d.domain);g!=null&&!g.isEmpty&&m.push({editor:r,domain:g,getTargets:y=>[this.getTargets(dM(u,y),dM(d,y))]})}m.push(u),m.sort((d,g)=>jr(i,n,d,g)),yield*m}}};function dM(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var ed=class extends Jf{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new rr({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},td=class extends Jf{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof lo))throw Error("Expected ParagraphTarget");return new ff({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var Yn=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var Hs=class{constructor(e){this.children=$9(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function $9(t){let e=[],r=[];for(let n of t){let i=new OS(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new Yn(e)}var OS=class{constructor(e){this.item=e;this.children=new Yn([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var j9=",",NS=new RegExp(j9,"g");function gM(t){let e=t.getText();return sn(e,NS,r=>new Y(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var hM={type:"fallback",scopeTypes:[{type:"surroundingPairInterior",delimiter:"collectionBoundary"},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return Ko(NS,e)}}]};function US(t,e,r,n,i,o){let s=i!=null?new Y(i.end,n.start):void 0,l=o!=null?new Y(n.end,o.start):void 0,u=Wf(t,e,n,s,l),m=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(d){return[new mo({scopeTypeType:"collectionItem",editor:e,isReversed:d,contentRange:n,insertionDelimiter:m,leadingDelimiterRange:s,trailingDelimiterRange:l,removalRange:u})]}}}function HS(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new ge(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var rd=class extends We{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return hM}*generateScopeCandidates(r,n,i,o){let s=Cs(o),l=gM(r.document),u=HS(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),m=new Hs(u),d=HS(this.scopeHandlerFactory,this.languageId,r,"string"),g=new Yn(d),y=[],x=new Set,w=[];for(let E of l){if(g.contains(E))continue;let U;for(;w.length>0;){let ne=w[w.length-1];if(ne.iterationRange.contains(E)){U=ne;break}this.addScopes(y,ne),w.pop()}let V=m.getSmallestContaining(E)?.range,z=V??r.document.lineAt(E.start.line).range;if(U!=null&&U.iterationRange.isRangeEqual(z)){U.delimiters.push(E);continue}V!=null&&x.add(V),w.push({editor:r,isEveryScope:s,iterationRange:z,delimiters:[E]})}for(let E of w)this.addScopes(y,E);for(let E of u)if(!x.has(E.range)&&!E.range.isEmpty){let U=ia(r,E.range);U.isEmpty||y.push(US(s,r,E.range,U))}y.sort((E,U)=>jr(i,n,E,U)),yield*y}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:s,delimiters:l}=n;if(l.length===0)return;let u=[];for(let g=0;g<l.length;++g){let y=l[g],x=l[g-1]?.end??o.start;u.push(new Y(x,y.start))}let m=l[l.length-1];u.push(new Y(m.end,o.end));let d=u.map(g=>ia(i,g));for(let g=0;g<d.length;++g)g===d.length-1&&i.document.getText(d[g]).trim()===""||r.push(US(s,i,o,d[g],d[g-1],d[g+1]))}};var nd=class extends We{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new rd(r,i),s=n.get(i)?.getScopeHandler(this.scopeType);return s==null?o:Qn.createFromScopeHandlers(r,i,[s,o])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var id=class extends We{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new ht("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let s=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return Ff(s.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var Bs=class t extends We{constructor(r){super();this.scopeHandlers=r;this.scopeType=void 0;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(o)}static createFromScopeHandlers(r){return new t(r)}get iterationScopeType(){throw new ht("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){for(let s of this.scopeHandlers)yield*s.generateScopes(r,n,i,o)}};var od=class extends We{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let s=z9(r,n,i,o);for(let l of s)yield G9(l)}};function z9(t,e,r,n){let i=q9(t);if(i==null)return[];let{notebook:o,cell:s}=i;return n.containment==="required"?[s]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(s.index+1):o.cells.slice(0,s.index).reverse():n.distalPosition!=null&&new Y(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(s.index):o.cells.slice(0,s.index+1).reverse()}function q9(t){let e=t.document.uri.toString();for(let r of k().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function G9(t){let e=K9(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new cf({editor:e,isReversed:n,contentRange:r})]}}function K9(t){let e=t.document.uri.toString();for(let r of k().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var ad=class extends We{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let s=new od,l=n.get(o)?.getScopeHandler(this.scopeType);return l==null?s:Qn.createFromScopeHandlers(r,o,[l,s])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var sd=class extends We{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let s=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of s)yield{editor:r,domain:l.domain,getTargets(u){return l.getTargets(u).flatMap(m=>m.getInterior())}}}};function yM(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new Y(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:s=>[new uf({editor:t,isReversed:s,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function TM(t){let e=Go(t.map(({text:r})=>r)).map(Br).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function SM(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new Yn(BS(n.disqualifyDelimiter)),o=new Yn(BS(n.pairDelimiter)),s=new Hs(BS(n.textFragment)),l=Object.fromEntries(r.map(d=>[d.text,d])),u=gx(e.getText(),TM(r)),m=[];for(let d of u){let g=d[0],y=new Y(e.positionAt(d.index),e.positionAt(d.index+g.length));xM(i.getContaining(y))==null&&m.push({delimiterInfo:l[g],textFragmentRange:s.getSmallestContaining(y)?.range,range:xM(o.getContaining(y))?.range??y})}return m}function xM(t){return t!=null&&!t.hasError()?t:void 0}function BS(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var cd=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],curlyBrackets:[["{","${"],"}"],tripleBacktickQuotes:[[],[]],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],backtickQuotes:["`","`"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),vM={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},markdown:{tripleBacktickQuotes:["```","```"]},ruby:{tripleDoubleQuotes:["%Q(",")"]},csharp:{doubleQuotes:[['@"','"'],['"','"']]}},qwe=Object.fromEntries(Object.values(cd)),bM={any:Ei(cd),string:["tripleDoubleQuotes","tripleSingleQuotes","tripleBacktickQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function wM(t){return t!=null&&t in vM?{...cd,...vM[t]}:cd}function EM(t,e){let r=bM[t]??[t];return Q9(e,r)}function Q9(t,e){let r=wM(t);return e.flatMap(n=>{let[i,o,s]=r[n],{isSingleLine:l=!1}=s??{},u=pl(i)?[i]:i,m=pl(o)?[o]:o;return Go(Qc(u,m)).map(g=>{let y=u.includes(g),x=m.includes(g);return{text:g,side:y&&!x?"left":!y&&x?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function _M(t){let e=[],r=[];for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:s},textFragmentRange:l,range:u}=n;if(o==="left")r.push(n);else{let m=qo(r,g=>g.delimiterInfo.delimiterName===i&&Y9(g.textFragmentRange,l)&&Z9(s,g.range,u));if(m===-1){o==="unknown"&&r.push(n);continue}let d=r[m];r.length=m,e.push({delimiterName:i,openingDelimiterRange:d.range,closingDelimiterRange:u})}}return e}function Y9(t,e){return t==null||e==null?t===e:t.isRangeEqual(e)}function Z9(t,e,r){return!t||e.start.line===r.start.line}var ld=class extends We{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){ut(k().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let s=SM(this.languageDefinitions.get(this.languageId),r.document,EM(this.scopeType.delimiter,this.languageId)),l=_M(s);l=X9(i,o,n,l),yield*l.map(u=>yM(r,u,this.scopeType.requireStrongContainment??!1)).sort((u,m)=>jr(i,n,u,m))}};function X9(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var ud=class extends We{constructor(r,n,i,o){super();this.scopeHandlerFactory=r;this.languageDefinitions=n;this.scopeType=i;this.languageId=o;this.isHierarchical=!0}get iterationScopeType(){throw new ht("Iteration scope for InteriorScopeHandler")}*generateScopeCandidates(r,n,i,o){let s=new Y(n,o.distalPosition),l=this.getScopeHandler();if(l==null)return;let u=l.generateScopes(r,n,i,o);for(let m of u)this.shouldYield(s,m)&&(yield J9(m))}getScopeHandler(){let r=this.languageDefinitions.get(this.languageId)?.getScopeHandler(this.scopeType),n=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:"any"},this.languageId);return this.scopeType.explicitScopeType?r==null?n:Bs.createFromScopeHandlers([r,n]):r==null?n:Qn.createFromScopeHandlers(this.scopeHandlerFactory,this.languageId,[r,n])}shouldYield(r,n){return!this.scopeType.explicitScopeType||r.contains(n.domain)}};function J9(t){return{editor:t.editor,domain:t.domain,getTargets(e){return t.getTargets(e).flatMap(e6)}}}function e6(t){let e=t.getInterior();return e??[new Ps({editor:t.editor,isReversed:t.isReversed,fullInteriorRange:t.contentRange})]}var Vs=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new Uf(this,e,r);case"word":return new Hf(this,e,r);case"token":return new Bf(this,e,r);case"identifier":return new Of(this,e,r);case"line":return new Cf(e,r);case"sentence":return new Kf(this,e,r);case"paragraph":return new zf(e,r);case"boundedParagraph":return new td(this,e,r);case"document":return new Vf(e,r);case"nonWhitespaceSequence":return new Qf(this,e,r);case"boundedNonWhitespaceSequence":return new ed(this,e,r);case"url":return new Yf(this,e,r);case"customRegex":return new Zf(this,e,r);case"glyph":return new Xf(this,e,r);case"collectionItem":return new nd(this,this.languageDefinitions,r);case"surroundingPair":return new ld(this.languageDefinitions,e,r);case"surroundingPairInterior":return new sd(this,e,r);case"notebookCell":return new ad(this,this.languageDefinitions,e,r);case"interior":return new ud(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return Qn.create(this,e,r);case"fallback":return Bs.create(this,e,r);case"conditional":return new id(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function zr(t,e){return new Y(t.row,t.column,e.row,e.column)}function VS(t){return new ge(t.row,t.column)}function RM(t){return new Y(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function kM(t,e){return new Be(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function sa(t,e){return{selection:new Be(new ge(e.startPosition.row,e.startPosition.column),new ge(e.endPosition.row,e.endPosition.column)),context:{}}}function t6(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new Be(new ge(i.startPosition.row,i.startPosition.column),new ge(o.endPosition.row,o.endPosition.column)),context:{}}}function AM(){return i6(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function PM(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=zr(i.endPosition,r.startPosition):o=zr(n.startPosition,r.startPosition):o=zr(n.endPosition,r.startPosition)),{...sa(e,r),context:{leadingDelimiterRange:o}}}}function pd(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,s=new Set(t),l=new Set(e);return o=o.filter(u=>s.size>0?!s.has(u.type):l.size>0?l.has(u.type):!0),t6(n,o[0],o[o.length-1])}}function MM(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=zr(r.endPosition,i.startPosition):o=zr(r.endPosition,n.endPosition):o=zr(r.endPosition,n.startPosition)),{...sa(e,r),context:{trailingDelimiterRange:o}}}}function r6(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function n6(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function i6(t,e,r=vr,n=vr){return(i,o)=>{let s,l,u=r(o),m=n(o),d=n6(u,t),g=r6(m,t);d!=null&&(s=zr(d.endPosition,u.startPosition)),g!=null&&(l=zr(m.endPosition,g.startPosition));let y=o6(i,s,l,e);return{selection:new Be(new ge(u.startPosition.row,u.startPosition.column),new ge(m.endPosition.row,m.endPosition.column)),context:{containingListDelimiter:y,leadingDelimiterRange:s,trailingDelimiterRange:l}}}}function o6(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return lx(o,"length")}function DM(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:u})=>u.endsWith(".start")).map(({range:{end:u}})=>u).sort((u,m)=>u.compareTo(m)).at(-1),i=t.filter(({name:u})=>u.endsWith(".end")).map(({range:{start:u}})=>u).sort((u,m)=>u.compareTo(m)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(ut(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:u})=>u.endsWith(".start")).length,s=t.filter(({name:u})=>u.endsWith(".end")).length,l=t.length-o-s;return l>0&&(o>0||s>0)&&(ut(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:u,range:m})=>u+" "+m.toString())}`),r=!0),l>1&&(ut(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:u,range:m})=>u+" "+m.toString())}`),r=!0),!r}function FM(t){if(t.hasError)return!0;let e=t.parent;for(;e!=null;){if(e.isError)return!0;if(e.hasError)return!1;if(e.previousSibling?.isError||e.nextSibling?.isError)return!0;e=e.parent}return!1}function WS(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var Pe={};U_(Pe,{BRAND:()=>D6,DIRTY:()=>ca,EMPTY_PATH:()=>l6,INVALID:()=>Se,NEVER:()=>g5,OK:()=>nr,ParseStatus:()=>Gt,Schema:()=>De,ZodAny:()=>To,ZodArray:()=>Li,ZodBigInt:()=>ua,ZodBoolean:()=>pa,ZodBranded:()=>Dl,ZodCatch:()=>ba,ZodDate:()=>ma,ZodDefault:()=>va,ZodDiscriminatedUnion:()=>gd,ZodEffects:()=>hn,ZodEnum:()=>xa,ZodError:()=>Pr,ZodFirstPartyTypeKind:()=>ve,ZodFunction:()=>yd,ZodIntersection:()=>ha,ZodIssueCode:()=>ee,ZodLazy:()=>ya,ZodLiteral:()=>Ta,ZodMap:()=>Gs,ZodNaN:()=>Qs,ZodNativeEnum:()=>Sa,ZodNever:()=>Dn,ZodNull:()=>da,ZodNullable:()=>Jn,ZodNumber:()=>la,ZodObject:()=>Mr,ZodOptional:()=>dn,ZodParsedType:()=>oe,ZodPipeline:()=>Fl,ZodPromise:()=>xo,ZodReadonly:()=>wa,ZodRecord:()=>hd,ZodSchema:()=>De,ZodSet:()=>Ks,ZodString:()=>yo,ZodSymbol:()=>zs,ZodTransformer:()=>hn,ZodTuple:()=>Xn,ZodType:()=>De,ZodUndefined:()=>fa,ZodUnion:()=>ga,ZodUnknown:()=>Fi,ZodVoid:()=>qs,addIssueToContext:()=>re,any:()=>B6,array:()=>j6,bigint:()=>C6,boolean:()=>jM,coerce:()=>d5,custom:()=>VM,date:()=>O6,datetimeRegex:()=>HM,defaultErrorMap:()=>Mi,discriminatedUnion:()=>K6,effect:()=>a5,enum:()=>n5,function:()=>e5,getErrorMap:()=>Ws,getParsedType:()=>Zn,instanceof:()=>L6,intersection:()=>Q6,isAborted:()=>md,isAsync:()=>$s,isDirty:()=>fd,isValid:()=>ho,late:()=>F6,lazy:()=>t5,literal:()=>r5,makeIssue:()=>Al,map:()=>X6,nan:()=>I6,nativeEnum:()=>i5,never:()=>W6,null:()=>H6,nullable:()=>c5,number:()=>$M,object:()=>z6,objectUtil:()=>$S,oboolean:()=>f5,onumber:()=>m5,optional:()=>s5,ostring:()=>p5,pipeline:()=>u5,preprocess:()=>l5,promise:()=>o5,quotelessJson:()=>a6,record:()=>Z6,set:()=>J6,setErrorMap:()=>c6,strictObject:()=>q6,string:()=>WM,symbol:()=>N6,transformer:()=>a5,tuple:()=>Y6,undefined:()=>U6,union:()=>G6,unknown:()=>V6,util:()=>Ue,void:()=>$6});var Ue;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(let l of o)s[l]=i[l];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(let s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ue||(Ue={}));var $S;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})($S||($S={}));var oe=Ue.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Zn=t=>{switch(typeof t){case"undefined":return oe.undefined;case"string":return oe.string;case"number":return Number.isNaN(t)?oe.nan:oe.number;case"boolean":return oe.boolean;case"function":return oe.function;case"bigint":return oe.bigint;case"symbol":return oe.symbol;case"object":return Array.isArray(t)?oe.array:t===null?oe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?oe.promise:typeof Map<"u"&&t instanceof Map?oe.map:typeof Set<"u"&&t instanceof Set?oe.set:typeof Date<"u"&&t instanceof Date?oe.date:oe.object;default:return oe.unknown}};var ee=Ue.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),a6=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Pr=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let l=n,u=0;for(;u<s.path.length;){let m=s.path[u];u===s.path.length-1?(l[m]=l[m]||{_errors:[]},l[m]._errors.push(r(s))):l[m]=l[m]||{_errors:[]},l=l[m],u++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ue.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Pr.create=t=>new Pr(t);var s6=(t,e)=>{let r;switch(t.code){case ee.invalid_type:t.received===oe.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case ee.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ue.jsonStringifyReplacer)}`;break;case ee.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ue.joinValues(t.keys,", ")}`;break;case ee.invalid_union:r="Invalid input";break;case ee.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ue.joinValues(t.options)}`;break;case ee.invalid_enum_value:r=`Invalid enum value. Expected ${Ue.joinValues(t.options)}, received '${t.received}'`;break;case ee.invalid_arguments:r="Invalid function arguments";break;case ee.invalid_return_type:r="Invalid function return type";break;case ee.invalid_date:r="Invalid date";break;case ee.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ue.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case ee.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case ee.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case ee.custom:r="Invalid input";break;case ee.invalid_intersection_types:r="Intersection results could not be merged";break;case ee.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ee.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ue.assertNever(t)}return{message:r}},Mi=s6;var LM=Mi;function c6(t){LM=t}function Ws(){return LM}var Al=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",u=n.filter(m=>!!m).slice().reverse();for(let m of u)l=m(s,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},l6=[];function re(t,e){let r=Ws(),n=Al({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Mi?void 0:Mi].filter(i=>!!i)});t.common.issues.push(n)}var Gt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Se;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,s=await i.value;n.push({key:o,value:s})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return Se;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},Se=Object.freeze({status:"aborted"}),ca=t=>({status:"dirty",value:t}),nr=t=>({status:"valid",value:t}),md=t=>t.status==="aborted",fd=t=>t.status==="dirty",ho=t=>t.status==="valid",$s=t=>typeof Promise<"u"&&t instanceof Promise;var pe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(pe||(pe={}));var dd=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},OM=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Pl,Ml,gn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},IM=(t,e)=>{if(ho(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Pr(t.common.issues);return this._error=r,this._error}}};function Re(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,l)=>{let{message:u}=t;return s.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??n??l.defaultError}:s.code!=="invalid_type"?{message:l.defaultError}:{message:u??r??l.defaultError}},description:i}}var De=class{get description(){return this._def.description}_getType(e){return Zn(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Zn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Gt,ctx:{common:e.parent.common,data:e.data,parsedType:Zn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if($s(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zn(e)},i=this._parseSync({data:e,path:n.path,parent:n});return IM(n,i)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zn(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return ho(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>ho(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zn(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await($s(i)?i:Promise.resolve(i));return IM(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let s=e(i),l=()=>o.addIssue({code:ee.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new hn({schema:this,typeName:ve.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return dn.create(this,this._def)}nullable(){return Jn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Li.create(this)}promise(){return xo.create(this,this._def)}or(e){return ga.create([this,e],this._def)}and(e){return ha.create(this,e,this._def)}transform(e){return new hn({...Re(this._def),schema:this,typeName:ve.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new va({...Re(this._def),innerType:this,defaultValue:r,typeName:ve.ZodDefault})}brand(){return new Dl({typeName:ve.ZodBranded,type:this,...Re(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new ba({...Re(this._def),innerType:this,catchValue:r,typeName:ve.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Fl.create(this,e)}readonly(){return wa.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},u6=/^c[^\s-]{8,}$/i,p6=/^[0-9a-z]+$/,m6=/^[0-9A-HJKMNP-TV-Z]{26}$/i,f6=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,d6=/^[a-z0-9_-]{21}$/i,g6=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,h6=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,y6=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,T6="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",jS,x6=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,S6=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,v6=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,b6=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,w6=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,E6=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,NM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",_6=new RegExp(`^${NM}$`);function UM(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function R6(t){return new RegExp(`^${UM(t)}$`)}function HM(t){let e=`${NM}T${UM(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function k6(t,e){return!!((e==="v4"||!e)&&x6.test(t)||(e==="v6"||!e)&&v6.test(t))}function A6(t,e){if(!g6.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function P6(t,e){return!!((e==="v4"||!e)&&S6.test(t)||(e==="v6"||!e)&&b6.test(t))}var yo=class t extends De{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==oe.string){let o=this._getOrReturnCtx(e);return re(o,{code:ee.invalid_type,expected:oe.string,received:o.parsedType}),Se}let n=new Gt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),re(i,{code:ee.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),re(i,{code:ee.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,l=e.data.length<o.value;(s||l)&&(i=this._getOrReturnCtx(e,i),s?re(i,{code:ee.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&re(i,{code:ee.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")y6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"email",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")jS||(jS=new RegExp(T6,"u")),jS.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"emoji",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")f6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"uuid",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")d6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"nanoid",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")u6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"cuid",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")p6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"cuid2",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")m6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"ulid",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),re(i,{validation:"url",code:ee.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"regex",code:ee.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?HM(o).test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?_6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?R6(o).test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?h6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"duration",code:ee.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?k6(e.data,o.version)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"ip",code:ee.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?A6(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"jwt",code:ee.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?P6(e.data,o.version)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"cidr",code:ee.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?w6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"base64",code:ee.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?E6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"base64url",code:ee.invalid_string,message:o.message}),n.dirty()):Ue.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:ee.invalid_string,...pe.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...pe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...pe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...pe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...pe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...pe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...pe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...pe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...pe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...pe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...pe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...pe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...pe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...pe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...pe.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...pe.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...pe.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...pe.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...pe.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...pe.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...pe.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...pe.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...pe.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...pe.errToObj(r)})}nonempty(e){return this.min(1,pe.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};yo.create=t=>new yo({checks:[],typeName:ve.ZodString,coerce:t?.coerce??!1,...Re(t)});function M6(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=Number.parseInt(t.toFixed(i).replace(".","")),s=Number.parseInt(e.toFixed(i).replace(".",""));return o%s/10**i}var la=class t extends De{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==oe.number){let o=this._getOrReturnCtx(e);return re(o,{code:ee.invalid_type,expected:oe.number,received:o.parsedType}),Se}let n,i=new Gt;for(let o of this._def.checks)o.kind==="int"?Ue.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),re(n,{code:ee.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?M6(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),re(n,{code:ee.not_finite,message:o.message}),i.dirty()):Ue.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,pe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,pe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,pe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,pe.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:pe.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:pe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:pe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:pe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:pe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:pe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:pe.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:pe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:pe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:pe.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ue.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};la.create=t=>new la({checks:[],typeName:ve.ZodNumber,coerce:t?.coerce||!1,...Re(t)});var ua=class t extends De{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==oe.bigint)return this._getInvalidInput(e);let n,i=new Gt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ue.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return re(r,{code:ee.invalid_type,expected:oe.bigint,received:r.parsedType}),Se}gte(e,r){return this.setLimit("min",e,!0,pe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,pe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,pe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,pe.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:pe.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:pe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:pe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:pe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:pe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:pe.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ua.create=t=>new ua({checks:[],typeName:ve.ZodBigInt,coerce:t?.coerce??!1,...Re(t)});var pa=class extends De{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==oe.boolean){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.boolean,received:n.parsedType}),Se}return nr(e.data)}};pa.create=t=>new pa({typeName:ve.ZodBoolean,coerce:t?.coerce||!1,...Re(t)});var ma=class t extends De{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==oe.date){let o=this._getOrReturnCtx(e);return re(o,{code:ee.invalid_type,expected:oe.date,received:o.parsedType}),Se}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return re(o,{code:ee.invalid_date}),Se}let n=new Gt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),re(i,{code:ee.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),re(i,{code:ee.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ue.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:pe.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:pe.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};ma.create=t=>new ma({checks:[],coerce:t?.coerce||!1,typeName:ve.ZodDate,...Re(t)});var zs=class extends De{_parse(e){if(this._getType(e)!==oe.symbol){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.symbol,received:n.parsedType}),Se}return nr(e.data)}};zs.create=t=>new zs({typeName:ve.ZodSymbol,...Re(t)});var fa=class extends De{_parse(e){if(this._getType(e)!==oe.undefined){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.undefined,received:n.parsedType}),Se}return nr(e.data)}};fa.create=t=>new fa({typeName:ve.ZodUndefined,...Re(t)});var da=class extends De{_parse(e){if(this._getType(e)!==oe.null){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.null,received:n.parsedType}),Se}return nr(e.data)}};da.create=t=>new da({typeName:ve.ZodNull,...Re(t)});var To=class extends De{constructor(){super(...arguments),this._any=!0}_parse(e){return nr(e.data)}};To.create=t=>new To({typeName:ve.ZodAny,...Re(t)});var Fi=class extends De{constructor(){super(...arguments),this._unknown=!0}_parse(e){return nr(e.data)}};Fi.create=t=>new Fi({typeName:ve.ZodUnknown,...Re(t)});var Dn=class extends De{_parse(e){let r=this._getOrReturnCtx(e);return re(r,{code:ee.invalid_type,expected:oe.never,received:r.parsedType}),Se}};Dn.create=t=>new Dn({typeName:ve.ZodNever,...Re(t)});var qs=class extends De{_parse(e){if(this._getType(e)!==oe.undefined){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.void,received:n.parsedType}),Se}return nr(e.data)}};qs.create=t=>new qs({typeName:ve.ZodVoid,...Re(t)});var Li=class t extends De{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==oe.array)return re(r,{code:ee.invalid_type,expected:oe.array,received:r.parsedType}),Se;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(s||l)&&(re(r,{code:s?ee.too_big:ee.too_small,minimum:l?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(re(r,{code:ee.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(re(r,{code:ee.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>i.type._parseAsync(new gn(r,s,r.path,l)))).then(s=>Gt.mergeArray(n,s));let o=[...r.data].map((s,l)=>i.type._parseSync(new gn(r,s,r.path,l)));return Gt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:pe.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:pe.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:pe.toString(r)}})}nonempty(e){return this.min(1,e)}};Li.create=(t,e)=>new Li({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ve.ZodArray,...Re(e)});function js(t){if(t instanceof Mr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=dn.create(js(n))}return new Mr({...t._def,shape:()=>e})}else return t instanceof Li?new Li({...t._def,type:js(t.element)}):t instanceof dn?dn.create(js(t.unwrap())):t instanceof Jn?Jn.create(js(t.unwrap())):t instanceof Xn?Xn.create(t.items.map(e=>js(e))):t}var Mr=class t extends De{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Ue.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==oe.object){let m=this._getOrReturnCtx(e);return re(m,{code:ee.invalid_type,expected:oe.object,received:m.parsedType}),Se}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof Dn&&this._def.unknownKeys==="strip"))for(let m in i.data)s.includes(m)||l.push(m);let u=[];for(let m of s){let d=o[m],g=i.data[m];u.push({key:{status:"valid",value:m},value:d._parse(new gn(i,g,i.path,m)),alwaysSet:m in i.data})}if(this._def.catchall instanceof Dn){let m=this._def.unknownKeys;if(m==="passthrough")for(let d of l)u.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(m==="strict")l.length>0&&(re(i,{code:ee.unrecognized_keys,keys:l}),n.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let m=this._def.catchall;for(let d of l){let g=i.data[d];u.push({key:{status:"valid",value:d},value:m._parse(new gn(i,g,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let m=[];for(let d of u){let g=await d.key,y=await d.value;m.push({key:g,value:y,alwaysSet:d.alwaysSet})}return m}).then(m=>Gt.mergeObjectSync(n,m)):Gt.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return pe.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{let i=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:pe.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ve.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of Ue.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let n of Ue.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}deepPartial(){return js(this)}partial(e){let r={};for(let n of Ue.objectKeys(this.shape)){let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let n of Ue.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof dn;)o=o._def.innerType;r[n]=o}return new t({...this._def,shape:()=>r})}keyof(){return BM(Ue.objectKeys(this.shape))}};Mr.create=(t,e)=>new Mr({shape:()=>t,unknownKeys:"strip",catchall:Dn.create(),typeName:ve.ZodObject,...Re(e)});Mr.strictCreate=(t,e)=>new Mr({shape:()=>t,unknownKeys:"strict",catchall:Dn.create(),typeName:ve.ZodObject,...Re(e)});Mr.lazycreate=(t,e)=>new Mr({shape:t,unknownKeys:"strip",catchall:Dn.create(),typeName:ve.ZodObject,...Re(e)});var ga=class extends De{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=o.map(l=>new Pr(l.ctx.common.issues));return re(r,{code:ee.invalid_union,unionErrors:s}),Se}if(r.common.async)return Promise.all(n.map(async o=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let u of n){let m={...r,common:{...r.common,issues:[]},parent:null},d=u._parseSync({data:r.data,path:r.path,parent:m});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:m}),m.common.issues.length&&s.push(m.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=s.map(u=>new Pr(u));return re(r,{code:ee.invalid_union,unionErrors:l}),Se}}get options(){return this._def.options}};ga.create=(t,e)=>new ga({options:t,typeName:ve.ZodUnion,...Re(e)});var Di=t=>t instanceof ya?Di(t.schema):t instanceof hn?Di(t.innerType()):t instanceof Ta?[t.value]:t instanceof xa?t.options:t instanceof Sa?Ue.objectValues(t.enum):t instanceof va?Di(t._def.innerType):t instanceof fa?[void 0]:t instanceof da?[null]:t instanceof dn?[void 0,...Di(t.unwrap())]:t instanceof Jn?[null,...Di(t.unwrap())]:t instanceof Dl||t instanceof wa?Di(t.unwrap()):t instanceof ba?Di(t._def.innerType):[],gd=class t extends De{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.object)return re(r,{code:ee.invalid_type,expected:oe.object,received:r.parsedType}),Se;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(re(r,{code:ee.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Se)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let s=Di(o.shape[e]);if(!s.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of s){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:ve.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Re(n)})}};function zS(t,e){let r=Zn(t),n=Zn(e);if(t===e)return{valid:!0,data:t};if(r===oe.object&&n===oe.object){let i=Ue.objectKeys(e),o=Ue.objectKeys(t).filter(l=>i.indexOf(l)!==-1),s={...t,...e};for(let l of o){let u=zS(t[l],e[l]);if(!u.valid)return{valid:!1};s[l]=u.data}return{valid:!0,data:s}}else if(r===oe.array&&n===oe.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let s=t[o],l=e[o],u=zS(s,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return r===oe.date&&n===oe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var ha=class extends De{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(md(o)||md(s))return Se;let l=zS(o.value,s.value);return l.valid?((fd(o)||fd(s))&&r.dirty(),{status:r.value,value:l.data}):(re(n,{code:ee.invalid_intersection_types}),Se)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};ha.create=(t,e,r)=>new ha({left:t,right:e,typeName:ve.ZodIntersection,...Re(r)});var Xn=class t extends De{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.array)return re(n,{code:ee.invalid_type,expected:oe.array,received:n.parsedType}),Se;if(n.data.length<this._def.items.length)return re(n,{code:ee.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Se;!this._def.rest&&n.data.length>this._def.items.length&&(re(n,{code:ee.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((s,l)=>{let u=this._def.items[l]||this._def.rest;return u?u._parse(new gn(n,s,n.path,l)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>Gt.mergeArray(r,s)):Gt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Xn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xn({items:t,typeName:ve.ZodTuple,rest:null,...Re(e)})};var hd=class t extends De{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.object)return re(n,{code:ee.invalid_type,expected:oe.object,received:n.parsedType}),Se;let i=[],o=this._def.keyType,s=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new gn(n,l,n.path,l)),value:s._parse(new gn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?Gt.mergeObjectAsync(r,i):Gt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof De?new t({keyType:e,valueType:r,typeName:ve.ZodRecord,...Re(n)}):new t({keyType:yo.create(),valueType:e,typeName:ve.ZodRecord,...Re(r)})}},Gs=class extends De{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.map)return re(n,{code:ee.invalid_type,expected:oe.map,received:n.parsedType}),Se;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([l,u],m)=>({key:i._parse(new gn(n,l,n.path,[m,"key"])),value:o._parse(new gn(n,u,n.path,[m,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let u of s){let m=await u.key,d=await u.value;if(m.status==="aborted"||d.status==="aborted")return Se;(m.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(m.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let u of s){let m=u.key,d=u.value;if(m.status==="aborted"||d.status==="aborted")return Se;(m.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(m.value,d.value)}return{status:r.value,value:l}}}};Gs.create=(t,e,r)=>new Gs({valueType:e,keyType:t,typeName:ve.ZodMap,...Re(r)});var Ks=class t extends De{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.set)return re(n,{code:ee.invalid_type,expected:oe.set,received:n.parsedType}),Se;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(re(n,{code:ee.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(re(n,{code:ee.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function s(u){let m=new Set;for(let d of u){if(d.status==="aborted")return Se;d.status==="dirty"&&r.dirty(),m.add(d.value)}return{status:r.value,value:m}}let l=[...n.data.values()].map((u,m)=>o._parse(new gn(n,u,n.path,m)));return n.common.async?Promise.all(l).then(u=>s(u)):s(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:pe.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:pe.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Ks.create=(t,e)=>new Ks({valueType:t,minSize:null,maxSize:null,typeName:ve.ZodSet,...Re(e)});var yd=class t extends De{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.function)return re(r,{code:ee.invalid_type,expected:oe.function,received:r.parsedType}),Se;function n(l,u){return Al({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ws(),Mi].filter(m=>!!m),issueData:{code:ee.invalid_arguments,argumentsError:u}})}function i(l,u){return Al({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ws(),Mi].filter(m=>!!m),issueData:{code:ee.invalid_return_type,returnTypeError:u}})}let o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof xo){let l=this;return nr(async function(...u){let m=new Pr([]),d=await l._def.args.parseAsync(u,o).catch(x=>{throw m.addIssue(n(u,x)),m}),g=await Reflect.apply(s,this,d);return await l._def.returns._def.type.parseAsync(g,o).catch(x=>{throw m.addIssue(i(g,x)),m})})}else{let l=this;return nr(function(...u){let m=l._def.args.safeParse(u,o);if(!m.success)throw new Pr([n(u,m.error)]);let d=Reflect.apply(s,this,m.data),g=l._def.returns.safeParse(d,o);if(!g.success)throw new Pr([i(d,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Xn.create(e).rest(Fi.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Xn.create([]).rest(Fi.create()),returns:r||Fi.create(),typeName:ve.ZodFunction,...Re(n)})}},ya=class extends De{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ya.create=(t,e)=>new ya({getter:t,typeName:ve.ZodLazy,...Re(e)});var Ta=class extends De{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return re(r,{received:r.data,code:ee.invalid_literal,expected:this._def.value}),Se}return{status:"valid",value:e.data}}get value(){return this._def.value}};Ta.create=(t,e)=>new Ta({value:t,typeName:ve.ZodLiteral,...Re(e)});function BM(t,e){return new xa({values:t,typeName:ve.ZodEnum,...Re(e)})}var xa=class t extends De{constructor(){super(...arguments),Pl.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return re(r,{expected:Ue.joinValues(n),received:r.parsedType,code:ee.invalid_type}),Se}if(dd(this,Pl,"f")||OM(this,Pl,new Set(this._def.values),"f"),!dd(this,Pl,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return re(r,{received:r.data,code:ee.invalid_enum_value,options:n}),Se}return nr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Pl=new WeakMap;xa.create=BM;var Sa=class extends De{constructor(){super(...arguments),Ml.set(this,void 0)}_parse(e){let r=Ue.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==oe.string&&n.parsedType!==oe.number){let i=Ue.objectValues(r);return re(n,{expected:Ue.joinValues(i),received:n.parsedType,code:ee.invalid_type}),Se}if(dd(this,Ml,"f")||OM(this,Ml,new Set(Ue.getValidEnumValues(this._def.values)),"f"),!dd(this,Ml,"f").has(e.data)){let i=Ue.objectValues(r);return re(n,{received:n.data,code:ee.invalid_enum_value,options:i}),Se}return nr(e.data)}get enum(){return this._def.values}};Ml=new WeakMap;Sa.create=(t,e)=>new Sa({values:t,typeName:ve.ZodNativeEnum,...Re(e)});var xo=class extends De{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.promise&&r.common.async===!1)return re(r,{code:ee.invalid_type,expected:oe.promise,received:r.parsedType}),Se;let n=r.parsedType===oe.promise?r.data:Promise.resolve(r.data);return nr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};xo.create=(t,e)=>new xo({type:t,typeName:ve.ZodPromise,...Re(e)});var hn=class extends De{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ve.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{re(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);if(n.common.async)return Promise.resolve(s).then(async l=>{if(r.value==="aborted")return Se;let u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?Se:u.status==="dirty"?ca(u.value):r.value==="dirty"?ca(u.value):u});{if(r.value==="aborted")return Se;let l=this._def.schema._parseSync({data:s,path:n.path,parent:n});return l.status==="aborted"?Se:l.status==="dirty"?ca(l.value):r.value==="dirty"?ca(l.value):l}}if(i.type==="refinement"){let s=l=>{let u=i.refinement(l,o);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Se:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Se:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ho(s))return s;let l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>ho(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:r.value,value:l})):s);Ue.assertNever(i)}};hn.create=(t,e,r)=>new hn({schema:t,typeName:ve.ZodEffects,effect:e,...Re(r)});hn.createWithPreprocess=(t,e,r)=>new hn({schema:e,effect:{type:"preprocess",transform:t},typeName:ve.ZodEffects,...Re(r)});var dn=class extends De{_parse(e){return this._getType(e)===oe.undefined?nr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};dn.create=(t,e)=>new dn({innerType:t,typeName:ve.ZodOptional,...Re(e)});var Jn=class extends De{_parse(e){return this._getType(e)===oe.null?nr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Jn.create=(t,e)=>new Jn({innerType:t,typeName:ve.ZodNullable,...Re(e)});var va=class extends De{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===oe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};va.create=(t,e)=>new va({innerType:t,typeName:ve.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Re(e)});var ba=class extends De{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return $s(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Pr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Pr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};ba.create=(t,e)=>new ba({innerType:t,typeName:ve.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Re(e)});var Qs=class extends De{_parse(e){if(this._getType(e)!==oe.nan){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.nan,received:n.parsedType}),Se}return{status:"valid",value:e.data}}};Qs.create=t=>new Qs({typeName:ve.ZodNaN,...Re(t)});var D6=Symbol("zod_brand"),Dl=class extends De{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Fl=class t extends De{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Se:o.status==="dirty"?(r.dirty(),ca(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Se:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:ve.ZodPipeline})}},wa=class extends De{_parse(e){let r=this._def.innerType._parse(e),n=i=>(ho(i)&&(i.value=Object.freeze(i.value)),i);return $s(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};wa.create=(t,e)=>new wa({innerType:t,typeName:ve.ZodReadonly,...Re(e)});function CM(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function VM(t,e={},r){return t?To.create().superRefine((n,i)=>{let o=t(n);if(o instanceof Promise)return o.then(s=>{if(!s){let l=CM(e,n),u=l.fatal??r??!0;i.addIssue({code:"custom",...l,fatal:u})}});if(!o){let s=CM(e,n),l=s.fatal??r??!0;i.addIssue({code:"custom",...s,fatal:l})}}):To.create()}var F6={object:Mr.lazycreate},ve;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ve||(ve={}));var L6=(t,e={message:`Input not instance of ${t.name}`})=>VM(r=>r instanceof t,e),WM=yo.create,$M=la.create,I6=Qs.create,C6=ua.create,jM=pa.create,O6=ma.create,N6=zs.create,U6=fa.create,H6=da.create,B6=To.create,V6=Fi.create,W6=Dn.create,$6=qs.create,j6=Li.create,z6=Mr.create,q6=Mr.strictCreate,G6=ga.create,K6=gd.create,Q6=ha.create,Y6=Xn.create,Z6=hd.create,X6=Gs.create,J6=Ks.create,e5=yd.create,t5=ya.create,r5=Ta.create,n5=xa.create,i5=Sa.create,o5=xo.create,a5=hn.create,s5=dn.create,c5=Jn.create,l5=hn.createWithPreprocess,u5=Fl.create,p5=()=>WM().optional(),m5=()=>$M().optional(),f5=()=>jM().optional(),d5={string:t=>yo.create({...t,coerce:!0}),number:t=>la.create({...t,coerce:!0}),boolean:t=>pa.create({...t,coerce:!0}),bigint:t=>ua.create({...t,coerce:!0}),date:t=>ma.create({...t,coerce:!0})};var g5=Se;function zM(t){let e=t.operands.map(qS).join(" ");return`(#${t.operator} ${e})`}function qS(t){return t.type==="capture"?`@${t.name}`:t.value}function qM(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>h5(t,r))}function h5(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=qS(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var Tt=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof Td&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:qM(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new Td(n.name);return i}else return n.value})}},Td=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};function GS(t,e){if(t.parent==null)throw Error("Node has no parent");let r=t.parent.walk(),n=r.gotoFirstChild(),i=!0;for(;n;){if(r.currentFieldName===e){if(r.currentNode.id===t.id)return i;i=!i}n=r.gotoNextSibling()}throw Error(`Node not found in parent for field: ${e}`)}var KS=Pe.object({type:Pe.literal("string"),value:Pe.string()}),ue={node:Pe.object({type:Pe.literal("capture"),name:Pe.string()}),string:KS,integer:KS.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:Pe.ZodIssueCode.custom,message:"Expected an integer"}),Pe.NEVER):{type:"integer",value:r}}),boolean:KS.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:Pe.ZodIssueCode.custom,message:"Expected true or false"}),Pe.NEVER))};var QS=class extends Tt{constructor(){super(...arguments);this.name="even?";this.schema=Pe.tuple([ue.node,ue.string])}run({node:r},n){return GS(r,n)}},YS=class extends Tt{constructor(){super(...arguments);this.name="odd?";this.schema=Pe.tuple([ue.node,ue.string])}run({node:r},n){return!GS(r,n)}},ZS=class extends Tt{constructor(){super(...arguments);this.name="text?";this.schema=Pe.tuple([ue.node,ue.string]).rest(ue.string)}run({document:r,range:n},...i){return i.includes(r.getText(n))}},XS=class extends Tt{constructor(){super(...arguments);this.name="type?";this.schema=Pe.tuple([ue.node,ue.string]).rest(ue.string)}run({node:r},...n){return n.includes(r.type)}},JS=class extends Tt{constructor(){super(...arguments);this.name="not-type?";this.schema=Pe.tuple([ue.node,ue.string]).rest(ue.string)}run({node:r},...n){return!n.includes(r.type)}},ev=class extends Tt{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=Pe.tuple([ue.node,ue.string]).rest(ue.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},tv=class extends Tt{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=Pe.tuple([ue.node,ue.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},rv=class extends Tt{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=Pe.tuple([ue.node,ue.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},nv=class extends Tt{constructor(){super(...arguments);this.name="child-range!";this.schema=Pe.union([Pe.tuple([ue.node,ue.integer]),Pe.tuple([ue.node,ue.integer,ue.integer]),Pe.tuple([ue.node,ue.integer,ue.integer,ue.boolean]),Pe.tuple([ue.node,ue.integer,ue.integer,ue.boolean,ue.boolean])])}run(r,n,i,o,s){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let u=l[n],m=l[i];return r.range=zr(o?u.endPosition:u.startPosition,s?m.startPosition:m.endPosition),!0}},iv=class extends Tt{constructor(){super(...arguments);this.name="character-range!";this.schema=Pe.union([Pe.tuple([ue.node,ue.integer]),Pe.tuple([ue.node,ue.integer,ue.integer])])}run(r,n,i){return r.range=new Y(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},ov=class extends Tt{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=Pe.tuple([ue.node,ue.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[u,m]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new Y(i.positionAt(d+u),i.positionAt(d+m)),!0}},av=class extends Tt{constructor(){super(...arguments);this.name="grow-to-named-siblings!";this.schema=Pe.union([Pe.tuple([ue.node]),Pe.tuple([ue.node,ue.string])])}run(r,n){let{node:i,range:o,document:s}=r;if(i.parent==null)throw Error("Node has no parent");let{children:l}=i.parent,u=l.findIndex(d=>d.id===i.id),m=null;if(u===-1)throw Error("Node not found in parent");for(let d=u+1;d<l.length;++d){let g=l[d];if(!g.isNamed)break;let y=zr(g.startPosition,g.endPosition);if(n!=null&&n===s.getText(y))break;m=y.end}return m!=null&&(r.range=new Y(o.start,m)),!0}},sv=class extends Tt{constructor(){super(...arguments);this.name="trim-end!";this.schema=Pe.tuple([ue.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),s=o.length-o.trimEnd().length;return s>0&&(r.range=new Y(i.start,lk(n,i.end,-s))),!0}},cv=class extends Tt{constructor(){super(...arguments);this.name="document-range!";this.schema=Pe.tuple([ue.node]).rest(ue.node)}run(...r){for(let n of r)n.range=n.document.range;return!0}},lv=class extends Tt{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=Pe.tuple([ue.node]).rest(ue.node)}allowMissingNode(){return!0}run(...r){for(let n of r)n.allowMultiple=!0;return!0}},uv=class extends Tt{constructor(){super(...arguments);this.name="log!";this.schema=Pe.tuple([ue.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},pv=class extends Tt{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=Pe.tuple([ue.node,ue.string])}run(r,n){return r.insertionDelimiter=n,!0}},mv=class extends Tt{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=Pe.tuple([ue.node,ue.node,ue.string,ue.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},fv=class extends Tt{constructor(){super(...arguments);this.name="empty-single-multi-delimiter!";this.schema=Pe.tuple([ue.node,ue.node,ue.string,ue.string,ue.string])}run(r,n,i,o,s){let l=!n.node.children.some(u=>u.isNamed);return r.insertionDelimiter=l?i:n.range.isSingleLine?o:s,!0}},GM=[new uv,new QS,new YS,new ZS,new XS,new JS,new sv,new cv,new ev,new tv,new nv,new iv,new ov,new av,new lv,new pv,new mv,new fv,new rv];function KM(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((s,l)=>{let u=GM.find(({name:d})=>d===s.operator);if(u==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${s.operator}"`});return}let m=u.createPredicate(s.operands);if(!m.success){e.push(...m.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(m.predicate)}),r.push(o)}),{errors:e,predicates:r}}function QM(t,e){let{errors:r,predicates:n}=KM(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${zM(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");ut(k().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(k().runMode==="test")throw new Error("Invalid predicates")}return n}function dv(t){return{row:t.line,column:t.character}}function YM(t){return t.map(e=>({...e,range:gv(e),name:y5(e)}))}function gv(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function y5(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var hv=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&ZM(this.startPosition,r)&&ZM(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function ZM(t,e){return t==null||e==null?t===e:t.isEqual(e)}var Ea=new hv;var Ll=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=k().runMode!=="production"}static create(e,r,n){let i=QM(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>WS(r)===e)}matches(e,r,n){if(!Ea.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);Ea.update(e,r,n,i)}return Ea.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let s of i){let l=this.createMutableQueryMatch(e,s);this.runPredicates(l)&&o.push(this.createQueryMatch(l))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?dv(r):void 0,endPosition:n!=null?dv(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.pattern,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:RM(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>FM(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=WS(i.name),s=gv(i),l=n.get(o);if(l==null){let u=[i],m={...i,name:o,range:s,hasError:()=>u.some(d=>d.hasError())};r.push(m),n.set(o,{acc:m,captures:u})}else l.acc.range=l.acc.range.union(s),l.acc.allowMultiple=l.acc.allowMultiple||i.allowMultiple,l.acc.insertionDelimiter=l.acc.insertionDelimiter??i.insertionDelimiter,l.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!DM(YM(r.captures),k().messages)&&k().runMode==="test")throw new Error("Invalid captures")}};var JM="_",T5=[JM,"interior",...Xo],x5=["prefix","leading","trailing"],S5=["startOf","endOf","start.startOf","start.endOf","end.startOf","end.endOf"],v5=["domain","removal","iteration","iteration.domain"],XM=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],_a=new Set;for(let t of T5){if(t!==JM){_a.add(t);for(let e of XM)_a.add(`${t}.${e}`)}for(let e of x5){_a.add(`${t}.${e}`);for(let r of S5)_a.add(`${t}.${e}.${r}`)}for(let e of v5){_a.add(`${t}.${e}`);for(let r of XM)_a.add(`${t}.${e}.${r}`)}}var b5=/^(?!;;).*(?<!"\w*)@([\w.]*)/gm;function eD(t,e){let r=e.matchAll(b5),n=[];for(let o of r){let s=o[1];if(!(s.length>1&&!s.includes(".")&&s.startsWith("_"))&&!_a.has(s)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${s}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(ut(k().messages,"validateQueryCaptures.invalidCaptureName",i),k().runMode==="test")throw new Error(i)}var xd=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await w5(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let s=n.createQuery(i,o);if(s==null)throw Error(`Could not create Tree sitter query for language ${i}`);let l=Ll.create(i,n,s);return new t(l)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new jf(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let s=o.name;n[s]==null&&(n[s]=[]),n[s].push(o)}return n}};async function w5(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,s]of Object.entries(n)){if(s!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(ut(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&eD(o,l),n[o]=l,sn(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,u=>{let m=u[1];i&&E5(t,o,m,u[0]),n[m]=n[m]??null})}return Object.values(n).join(`
`)}function E5(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(ut(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(ut(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var tD=Symbol("LANGUAGE_UNDEFINED"),Sd=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Jt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&Ea.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:s})=>this.loadLanguage(s.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(ut(this.ide.messages,"Failed to load language definitions",Pn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await xd.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??tD;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),Ea.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===tD?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var vd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e,r){for(let n of this.nestedStages)try{return n.run(e,r)}catch{continue}throw new Error("No modifier could be applied")}};var Ys=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e,r){if(this.shouldModify(e))try{return this.nestedStage.run(e,r).map(n=>n.withThatTarget(e))}catch(n){if(!this.suppressErrors)throw n}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},So=class extends Ys{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},bd=class extends Ys{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},Zs=class extends Ys{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},Xs=class extends Ys{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function rD(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function Js(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&rD(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.textualType==="line"&&r.textualType==="line"?new fr({editor:e.editor,isReversed:t,contentRange:ks(e,r,n,i)}):new Ct({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:Rs(e,r,n,i),textualType:n&&i&&e.textualType==="token"&&r.textualType==="token"?"token":"character"})}function wd(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[s]=i,l=s.contentRange.start.isAfterOrEqual(o.contentRange.start),[u,m]=l?[o,s]:[s,o];return[Js(t,u,m,!0,!0)]}function Ed(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,s]=i;return n==="forward"?s:n==="backward"||(t.isPreferredOver?.(o,s)??!1)?o:s}default:throw new Error("Expected no more than 2 scope candidates")}}function _d(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:s}}=t;if(s.isEqual(o)){let m=Ed(e,i,o);return m==null||(r>0&&(m=yv(e,i,m.domain.end,"forward",r,!0)),m==null)?void 0:m.getTargets(n)}let l=yv(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(s))return l.getTargets(n);let u=yv(e,i,s,"backward",r);if(u!=null)return wd(n,l,u)}function yv(t,e,r,n,i,o=!1){let s=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(s===i)return l;s+=1}}var ec=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n,ancestorIndex:i=0}=this.modifier,o=this.scopeHandlerFactory.maybeCreate(n,e.editor.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e,r);let s=_d(e,o,i);if(s==null)throw new ht(n.type);return s}};var Rd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n}=this.modifier,{editor:i,isReversed:o}=e,s=this.scopeHandlerFactory.maybeCreate(n,i.document.languageId);if(s==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e,r);let l;if(e.hasExplicitRange&&(l=nD(s,i,e.contentRange),l.length===1&&l[0].domain.contains(e.contentRange)&&!e.hasExplicitScopeType&&!r.multipleTargets&&(l=void 0)),l==null&&(l=this.getDefaultIterationRange(s,this.scopeHandlerFactory,e).flatMap(u=>nD(s,i,u))),l.length===0)throw new ht(n.type);return l.flatMap(u=>u.getTargets(o))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=_d(n,i);if(o==null)throw new ht(`iteration scope for ${e.scopeType.type}`);return o.map(s=>s.contentRange)}};function nD(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var kd=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},Ad=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Pd=class{run(){return df(k()).map(e=>new pf({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var Md=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new Tv(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},Tv=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return R5(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return Pt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return k5(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[vo(e,r,n,i)];let s=vv(e,r);return[vo(n?iD(this.modifierStageFactory,e,o,s?"backward":"forward"):e,i?iD(this.modifierStageFactory,r,o,s?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n,i=!1;e.type==="implicit"?(r=new Pd,n=[]):(r=this.markStageFactory.create(e.mark),n=xv(this.modifierStageFactory,e.modifiers),i=_5(e));let o=r.run(),[s,l]=this.getPreAndPostStages(i),u=[...s,...n,...this.opts.actionFinalStages,...l];return Sv(u,o)}getPreAndPostStages(e){if(this.opts.noAutomaticTokenExpansion)return[[],[]];let r=new Xs(this.modifierStageFactory);return e?[[r],[]]:[[],[r]]}};function _5(t){return t.modifiers.length>0&&t.modifiers.every(({type:e})=>e==="startOf"||e==="endOf")}function xv(t,e){return e.map(t.create).reverse()}function Sv(t,e){return t.forEach(r=>{let n={multipleTargets:e.length>1};e=e.flatMap(i=>r.run(i,n))}),e}function iD(t,e,r,n){let i={multipleTargets:!1};return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e,i)[0]}function vv(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function R5(t){return fA(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function oD(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function vo(t,e,r=!1,n=!1){oD(t,e);let i=vv(t,e);return Js(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function k5(t,e,r,n){oD(t,e);let i=vv(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),m=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let g=l;;g+=o){let y=new Y(g,t.contentRange.start.character,g,t.contentRange.end.character);if(d.push(new Ke({editor:t.editor,isReversed:t.isReversed,contentRange:y,insertionDelimiter:t.insertionDelimiter})),g===m)return d}}var Dd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getModifierStages(),n=Sv(r,[e]),i=this.modifier.type==="extendThroughStartOf";return n.map(o=>new mf({editor:e.editor,isReversed:i,inputTarget:e,modifiedTarget:o,isHead:i}))}getModifierStages(){return this.modifier.modifiers!=null?xv(this.modifierStageFactory,this.modifier.modifiers):[new bv(this.modifierStageFactory,this.modifier)]}},bv=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.getContainingLine(e,r),i=this.getContainingPairInterior(e,r),o=i!=null?n.contentRange.intersection(i.contentRange):null;return o==null||o.isEmpty?[n]:[new Ke({editor:e.editor,isReversed:e.isReversed,contentRange:o})]}getContainingPairInterior(e,r){try{return this.getContaining(e,r,{type:"surroundingPairInterior",delimiter:"any"})[0]}catch(n){if(n instanceof ht)return;throw n}}getContainingLine(e,r){return this.getContaining(e,r,{type:"line"})[0]}getContaining(e,r,n){return this.modifierStageFactory.create({type:"containingScope",scopeType:n}).run(e,r)}};var ei=class extends Error{constructor(e,r){let n=r!=null?` #${r+1}`:"";super(`Scope '${e.type}'${n} is out of range`),this.name="OutOfRangeError"}};function aD(t,e,r,n){return wv(t,e,r,n),e.slice(r,n+1)}function wv(t,e,r,n){if(r<0||r>=e.length)throw new ei(t,r);if(n<0||n>=e.length)throw new ei(t,n)}var tc=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e,r){let n=new Xs(this.modifierStageFactory).run(e,r)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(n,r);case"ordinalScope":return this.handleOrdinalScope(n,r,this.modifier);case"relativeScope":return this.handleRelativeScope(n,r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e,r){return Array.from(If(this.getEveryRanges(e),([n,i])=>this.getTargetIterable(e,r,n,i,"forward")))}handleOrdinalScope(e,r,{start:n,length:i,scopeType:o}){return this.getEveryRanges(e).flatMap(([s,l])=>sD(o,this.getTargetIterable(e,r,s,l,n>=0?"forward":"backward"),n>=0?n:-(i+n),i))}handleRelativeScope(e,r,{direction:n,offset:i,length:o,scopeType:s}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(u=>{let{editor:m}=u,d=n==="forward"?new Y(i===0?u.contentRange.start:u.contentRange.end,m.document.range.end):new Y(m.document.range.start,i===0?u.contentRange.end:u.contentRange.start);return sD(s,this.getTargetIterable(e,r,m,d,n),i===0?0:i-1,o)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i,o){let s=qt(fn(new RegExp(Br(e.contentText),"g"),n,i,o),u=>new Ke({contentRange:u,editor:n,isReversed:!1,textualType:"character"})),l=A5(e);if(l!=null){let u=this.modifierStageFactory.create({type:"containingScope",scopeType:l});return Ff(qt(s,m=>{try{let d=u.run(m,r);return d.length===1&&d[0].contentRange.isRangeEqual(m.contentRange)?d[0]:null}catch{return null}}),m=>m!=null)}return s}};function A5(t){switch(t.textualType){case"line":case"token":case"word":return{type:t.textualType};default:return null}}function sD(t,e,r,n){Array.from(Rl(r,e));let i=Array.from(Rl(n,e));if(i.length<n)throw new ei(t,r+n-1);return i}var Fd=class{constructor(e,r){this.modifierHandlerFactory=e;this.modifier=r}run(e,r){let n=e.getInterior();return n??this.modifierHandlerFactory.create({type:"containingScope",scopeType:{type:"interior",explicitScopeType:e.hasExplicitScopeType}}).run(e,r)}},Ld=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=Ev(this.modifierStageFactory)}run(e,r){return this.containingSurroundingPairIfNoBoundaryStage.run(e,r).flatMap(n=>n.getBoundary())}};function Ev(t){return new bd(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var ti={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},_v={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var Id=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},Cd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(_v).run(e,r).map(n=>{let i=n.getLeadingDelimiterTarget();if(i==null)throw new Id("leading");return i})}},Od=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(_v).run(e,r).map(n=>{let i=n.getTrailingDelimiterTarget();if(i==null)throw new Id("trailing");return i})}};function Nd(t,e,r,n,i){return wv(t,r,n,i),n===i?r[n]:Js(e,r[n],r[i],!0,!0)}function Ud(t,e,r,n){return t.create({type:"everyScope",scopeType:n}).run(e,r)}var Hd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=Ud(this.modifierStageFactory,e,r,this.modifier.scopeType),i=this.modifier.start+(this.modifier.start<0?n.length:0),o=i+this.modifier.length-1;return this.modifier.isEvery?aD(this.modifier.scopeType,n,i,o):[Nd(this.modifier.scopeType,e.isReversed,n,i,o)]}};var Bd=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new uo(r):new Ke({...r,textualType:"character"})]}},Vd=class extends Bd{getContentRange(e){return e.start.toEmptyRange()}},Wd=class extends Bd{getContentRange(e){return e.end.toEmptyRange()}};var $d=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n}=this.modifier,i=new ec(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:n});try{return i.run(e,r)}catch(l){if(!(l instanceof ht))throw l}let o=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),s=P5(e,o);if(s==null)throw Error(`No scopes found for scope type: ${n.type}`);return s}};function P5(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=cD(r,i),s=cD(n,i),l=o.distance<s.distance?o.scope:s.scope;return l?.getTargets(t.isReversed)}function cD(t,e){let r,n=1/0;for(let i of t){let o=Math.min(lD(e,i.domain.start),lD(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function lD(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var jd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.modifierStageFactory.create(this.modifier.anchor),i=this.modifierStageFactory.create(this.modifier.active),o=n.run(e,r),s=i.run(e,r);if(o.length!==1||s.length!==1)throw new Error("Expected single anchor and active target");return[vo(o[0],s[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var zd=class{constructor(e){this.modifier=e}run(e){return[new uo({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var qd=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function uD(t,e,r,n){let i=Ud(t,L5(r),n,e.scopeType),o=F5(r.contentRange,i);return M5(e,r,i,o)}function M5(t,e,r,n){let i=t.direction==="forward",o=D5(t,e.contentRange,r,i,n),s=i?o+t.length-1:o-t.length+1,l=Math.min(o,s),u=Math.max(o,s);return[Nd(t.scopeType,e.isReversed,r,l,u)]}function D5(t,e,r,n,i){let o=t.offset===0;if(i==null){let u=n?r.findIndex(m=>m.contentRange.start.isAfter(e.start)):qo(r,m=>m.contentRange.start.isBefore(e.start));if(u===-1)throw new ei(t.scopeType);return o?u:n?u+t.offset-1:u-t.offset+1}let s=i.start,l=i.end;if(o){let u=l-s+1;if(u>t.length)throw new qd(t.length,u,t.scopeType.type);return n?s:l}return n?l+t.offset:s-t.offset}function F5(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function L5(t){return new Ct({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var Gd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let n=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(n==null)return uD(this.modifierStageFactory,this.modifier,e,r);let i=Array.from(this.modifier.offset===0?I5(n,e,this.modifier):C5(n,e,this.modifier));if(i.length<this.modifier.length)throw new ei(this.modifier.scopeType,this.modifier.offset+this.modifier.length-1);let{isReversed:o}=e;return this.modifier.isEvery?i.flatMap(s=>s.getTargets(o)):wd(o,i[0],i[i.length-1])}};function I5(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s}=r,l=Ed(t,n,s==="forward"?i.start:i.end,s)?.domain;if(l==null)throw new ht(r.scopeType.type);return Rl(o,t.generateScopes(n,s==="forward"?l.start:l.end,s,{skipAncestorScopes:!0}))}function C5(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s,offset:l}=r,u=s==="forward"?i.end:i.start,m=i.isEmpty?"disallowed":"disallowedIfStrict";return zP(t.generateScopes(n,u,s,{containment:m,skipAncestorScopes:!0}),l-1,l+o-1)}var Kd=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new Ke({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};function pD(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let s of o){if(n==null||(n=s(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var Rv=t=>new ge(t.row,t.column),mD=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(s,l)=>s!=null&&l.includes(s.type),o=s=>s!=null&&!i(s,n);return(s,l)=>{let u,{start:m,end:d}=l;if(i(s.parent,t))return i(s,e)?u=s.nextNamedSibling:i(s,r)?u=s.previousNamedSibling:s.type===","?u=d.isBeforeOrEqual(Rv(s.startPosition))?s.previousNamedSibling:s.nextNamedSibling:u=s,o(u)?u:null;if(i(s,t)){let g=[...s.children],y=g.find(({startPosition:w})=>Rv(w).isAfterOrEqual(d))??null;if(o(y))return y;g.reverse();let x=g.find(({endPosition:w})=>Rv(w).isBeforeOrEqual(m))??null;if(o(x))return x}return null}};function Fn(...t){let e=O5(t);return r=>{for(let n of e){let i=N5(r,n);if(i!=null)return i}return null}}function O5(t){return t.map(e=>e.split(".").map(r=>new kv(r)))}function N5(t,e){let r=U5(t,e);!r&&e.length>1&&(r=H5(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function U5(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function H5(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let s=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=s.length===1?s[0]:null}}return r}var kv=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function yn(t,e=sa){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function fD(t,e=0,r=sa){return yn(pD(e,...t),r)}function bo(...t){return yn(Fn(...t))}function dD(...t){return yn(mD(...t),AM())}function rc(t,e=[]){return yn(Fn(...t),PM(...e))}function Qd(t,e=[]){return yn(Fn(...t),MM(...e))}function Ra(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function gD(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function hD(t){return Object.freeze(Object.fromEntries(Ei(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,bo(...r)]:typeof r=="string"?[e,bo(r)]:[e,r]})))}function Av(){let t=pd(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let s=r.childForFieldName("alternative");if(s==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new Be(l.start,VS(s.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new Be(VS(i.child(0).startPosition),o.end),context:{}}}}function yD(t){let e=Av();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):sa(r,n)}}var TD=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],B5=["source_file","block","declaration_list"];function V5(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function W5(t,e){return{selection:kM(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:zr(e.children[0].startPosition,e.children[1].startPosition)}}}function $5(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return TD.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var j5={statement:fD([Fn(...B5),Fn(...TD)],1),condition:Ra(bo("while_expression[condition]","if_expression[condition]"),yn(Fn("while_let_expression","if_let_expression"),pd(["while","if","block"],[],{includeUnnamedChildren:!0})),rc(["*.match_pattern![condition]"],["if"])),type:Ra(rc(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),yn(Fn("constrained_type_parameter[bounds]","where_predicate[bounds]"),W5),rc(["function_item[return_type]"],["->"]),yn(V5),bo("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:dD("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:Ra(Qd(["field_initializer[name]","field_pattern[name]"],[":"])),name:Ra(bo("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),Qd(["field_initializer[name]","field_pattern[name]"],[":"])),value:Ra(rc(["let_declaration[value]"],["="]),rc(["field_initializer[value]","field_pattern[pattern]"],[":"]),bo("meta_item[value]","const_item[value]"),yn($5)),attribute:Qd(["mutable_specifier","attribute_item"]),branch:Ra(bo("match_arm"),yn(Fn("else_clause"),yD("if_expression")),yn(Fn("if_expression"),Av()))},xD=hD(j5);function SD(t,e,r){let n=Il[t];if(n==null)throw new Pp(t);let i=n[e];return i==null?gD(e):r?z5(i):i}var Il={rust:xD};function z5(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>q5(i.node,nf(e,i.selection.selection),t)),n.length>0?n:null)}}function q5(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var Yd=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=SD(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new ht(this.modifier.scopeType.type);let i=G5(n,r,{editor:e.editor,selection:new Be(e.contentRange.start,e.contentRange.end)});if(i==null)throw new ht(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:u,removalRange:m}=o.context;if(m!=null&&(l!=null||u!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:d,selection:g}=o.selection;return new mo({scopeTypeType:this.modifier.scopeType.type,editor:d,isReversed:e.isReversed,contentRange:g,removalRange:m,insertionDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:u})})}};function G5(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:nf(r,o.selection),context:o.context}));n=n.parent}return null}var nc=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new Vd;case"endOf":return new Wd;case"extendThroughStartOf":case"extendThroughEndOf":return new Dd(this,e);case"toRawSelection":return new zd(e);case"interiorOnly":return new Fd(this,e);case"excludeInterior":return new Ld(this,e);case"leading":return new Cd(this,e);case"trailing":return new Od(this,e);case"visible":return new Kd(e);case"containingScope":return new ec(this,this.scopeHandlerFactory,e);case"preferredScope":return new $d(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new tc(this,this.storedTargets,e):new Rd(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new tc(this,this.storedTargets,e):new Hd(this,e);case"relativeScope":return e.scopeType.type==="instance"?new tc(this,this.storedTargets,e):new Gd(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new kd(e);case"keepEmptyFilter":return new Ad(e);case"cascading":return new vd(this,e);case"modifyIfUntyped":return new So(this,e);case"range":return new jd(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}getLegacyScopeStage(e){switch(e.scopeType.type){default:return new Yd(this.languageDefinitions,e)}}};async function vD(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Le({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=Ei(r),s=o.map(m=>{let d=r[m],g=K5(d);return bD(e.document,g.selections,g.behavior)});n||s.push(bD(e.document,e.selections,1));let l=await("edits"in i?Z5(t,e,i.edits,s):wD(t,i.callback,e.document,s));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((m,d)=>[m,l[d]]))}function bD(t,e,r){return e.map(n=>Q5(t,n,n instanceof Be?!n.isReversed:!0,r))}function K5(t){return"selections"in t?t:{selections:t,behavior:1}}function Q5(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function Y5(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new Be(r,n):new Be(n,r)))}async function wD(t,e,r,n){let i=t.registerRangeInfoList(r,nt(n));return await e(),i(),Y5(n)}async function Z5(t,e,r,n){return await wD(t,async()=>{if(!await vD(t,e,r))throw new Error("Could not apply edits")},e.document,n)}var Zd=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Ne(k(),e,"pendingModification0"),{thatSelections:nt(await at(e,async(n,i)=>{let o=i.map(({contentRange:m})=>m),s=X5(n,o),l=k().getEditableTextEditor(n),{contentRanges:u}=await Le({rangeUpdater:this.rangeUpdater,editor:l,edits:s,selections:{contentRanges:o}});return Pt(i,u).map(([m,d])=>({editor:m.editor,selection:d.toSelection(m.isReversed)}))}))}}};function X5(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,s=r.lineAt(o),l=s.text.slice(0,s.rangeTrimmed?.start?.character??s.range.start.character),u=s.text.slice(0,o.character).search(/\s+$/),m=u>-1?new Y(new ge(s.lineNumber,u),o):o.toEmptyRange();n.push({range:m,text:`
`+l,isReplace:!m.isEmpty})}return n}function Xd(t){return t.length<2?t:lP(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,s)=>o.contentRange.start.compareTo(s.contentRange.start));let i=!0;for(;i;)[n,i]=J5(n);return n})}function J5(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!eQ(r[r.length-1],n)?(e.push(ED(r)),r=[n]):r.push(n)}),e.push(ED(r)),[e,e.length!==t.length]}function ED(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return vo(e,r)}function eQ(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Cl=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Ne(k(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Ne(k(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((s,l)=>{let u=r[l];if((s==null||u==null)&&!o)throw new Error("Targets must have same number of args");if(u!=null){let m;o?m=e.map((d,g)=>{let y=d.contentText,x=(u.isRaw?null:u.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return g>0&&x!=null?x+y:y}).join(""):m=s.contentText,i.push({edit:u.constructChangeEdit(m),editor:u.editor,originalTarget:u.target,isSource:!1})}else u=r[0];n.includes(s)||(n.push(s),this.type==="bring"&&i.push({edit:s.toDestination("to").constructChangeEdit(u.target.contentText),editor:s.editor,originalTarget:s,isSource:!0}))}),this.type==="move"&&Xd(n).forEach(s=>{i.push({edit:s.constructRemovalEdit(),editor:s.editor,originalTarget:s,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return nt(await Ai(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),s=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),u=s.map(({edit:x})=>x.range),m=k().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:g}=await Le({rangeUpdater:this.rangeUpdater,editor:m,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:u,behavior:0}}}),y=[...this.getMarks(o,d),...this.getMarks(s,g)];return y.sort((x,w)=>n.findIndex(E=>E.originalTarget===x.target)-n.findIndex(E=>E.originalTarget===w.target)),y}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],s=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:s.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>pn(n,e.find(i=>i.target===n).selection);return Promise.all([Ne(k(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Ne(k(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function _D(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var Jd=class extends Cl{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){r=_D(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},eg=class extends Cl{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:tQ};this.run=this.run.bind(this)}async run(r,n){r=_D(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},tg=class extends Cl{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,s)=>{let l=n[s];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function tQ(t){return t.getRemovalHighlightRange()}var Ol=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){Rr(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Nl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=_t(e),n=e.map(o=>new Ke({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await k().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var ic=t=>new Ct({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var oc=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Ne(k(),e,"referenced"),r.ensureSingleEditor&&_t(e),r.ensureSingleTarget&&Rr(e);let n=k().activeEditableTextEditor,i=r.setSelection?cP:at,o=nt(await i(e,(s,l)=>this.runForEditor(r,s,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=k().getEditableTextEditor(r),o=r.selections,s=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:u,targetSelections:m}=await Le({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(u),r.document.version===s?n:m.map(d=>ic({editor:r,selection:d}))}};var Rt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new oc(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=k().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,s)=>rQ(o,i?s.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},rg=class extends Rt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},ng=class extends Rt{constructor(){super(...arguments);this.command="toggleLineComment"}},ig=class extends Rt{constructor(){super(...arguments);this.command="indentLine"}},og=class extends Rt{constructor(){super(...arguments);this.command="outdentLine"}},ag=class extends Rt{constructor(){super(...arguments);this.command="fold"}},sg=class extends Rt{constructor(){super(...arguments);this.command="unfold"}},cg=class extends Rt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},lg=class extends Rt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},ug=class extends Rt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},pg=class extends Rt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},mg=class extends Rt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},fg=class extends Rt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},dg=class extends Rt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},gg=class extends Rt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}},hg=class extends Rt{constructor(){super(...arguments);this.command="gitAccept";this.ensureSingleTarget=!0}},yg=class extends Rt{constructor(){super(...arguments);this.command="gitRevert";this.ensureSingleTarget=!0}},Tg=class extends Rt{constructor(){super(...arguments);this.command="gitStage";this.ensureSingleTarget=!0}},xg=class extends Rt{constructor(){super(...arguments);this.command="gitUnstage";this.ensureSingleTarget=!0}};function rQ(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"gitAccept":return t.gitAccept(e?.[0]);case"gitRevert":return t.gitRevert(e?.[0]);case"gitStage":return t.gitStage(e?.[0]);case"gitUnstage":return t.gitUnstage(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Sg=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(k().capabilities.commands.clipboardCopy!=null)return new rg(this.rangeUpdater).run(e,r);r.showDecorations&&await Ne(k(),e,"referenced");let n=e.map(i=>i.contentText).join(`
`);return await k().clipboard.writeText(n),{thatTargets:e}}};var vg=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await k().flashRanges(e.flatMap(nQ));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function nQ(t){let{editor:e,contentRange:r}=t,n=t.getRemovalHighlightRange(),i=[{editor:e,range:mr(r),style:"referenced"}];return n.type==="line"?i.push({editor:e,range:n,style:"pendingDelete"}):i.push(...iQ(r,n).map(o=>({editor:e,range:mr(o),style:"pendingDelete"}))),i}function iQ(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,s=[];return i.isBefore(r)&&s.push(new Y(i,r)),o.isAfter(n)&&s.push(new Y(n,o)),s}var Ul=class{constructor(){this.run=this.run.bind(this)}async run(e){return await at(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(s=>{let l=s.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new Pv;await k().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},Pv=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function RD(t,e,r,n){let i=r.destinations.map((w,E)=>{if(n||r.actionTypes[E]==="edit")return{destination:w,index:E}}).filter(w=>!!w);if(i.length===0)return r;let o=i.map(w=>w.destination.constructChangeEdit("")),s=r.cursorRanges.map((w,E)=>({range:w,index:E})).filter(({range:w})=>w!=null),l=s.map(({index:w})=>w),u=s.map(({range:w})=>w),m=o.map(w=>w.range),{thatRanges:d,cursorRanges:g,editRanges:y}=await Le({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:u,editRanges:{selections:m,behavior:0}}}),x=[...r.cursorRanges];return Pt(l,g).forEach(([w,E])=>{x[w]=E}),i.forEach((w,E)=>{let V=o[E].updateRange(y[E]);x[w.index]=V}),{destinations:r.destinations,actionTypes:r.actionTypes,thatRanges:d,cursorRanges:x}}async function kD({acceptsLocation:t},e,r,n){let i=n.destinations.map((g,y)=>{if(n.actionTypes[y]==="insertLineAfter")return{destination:g,index:y}}).filter(g=>!!g);if(i.length===0)return n;let o=i.map(({destination:g})=>g.contentRange),s=n.destinations.map(({contentRange:g})=>g),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(g=>g.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:u,thatRanges:m}=await Le({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:s,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((g,y)=>{d[g.index]=r.selections[y]}),{destinations:n.destinations.map((g,y)=>g.withTarget(g.target.withContentRange(u[y]))),actionTypes:n.actionTypes,thatRanges:m,cursorRanges:d}}async function AD(t,e){let r=Rr(e),n=k().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:un([r.target.thatTarget])}}var bg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return AD(this.actions,e);let r=k().getEditableTextEditor(_t(e)),n={destinations:e,actionTypes:e.map(l=>l.getEditNewActionType()),thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=k().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await kD(i,this.rangeUpdater,r,n)),n=await RD(this.rangeUpdater,r,n,!o);let s=n.destinations.map((l,u)=>{let m=n.cursorRanges[u];if(m==null)throw Error("Cursor range is undefined for destination");return m.toSelection(l.target.isReversed)});return await r.setSelections(s,{focusEditor:!0}),{thatSelections:un(n.destinations.map(l=>l.target),n.thatRanges)}}};var wg=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ti)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},Eg=class extends wg{constructor(){super(...arguments);this.insertionMode="before"}},_g=class extends wg{constructor(){super(...arguments);this.insertionMode="after"}};var Hl=class{constructor(e){this.callbackAction=new oc(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:s,showDecorations:l}={}){let u=n??[];return this.callbackAction.run(e,{callback:()=>k().executeCommand(r,...u),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:s??!0,showDecorations:l??!0})}};var Rg=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){Rr(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),Qo(k().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},kg=class extends Rg{find(e){return k().findInDocument(e)}},Ag=class extends Rg{find(e){return k().findInWorkspace(e)}};var Pg=class{constructor(){this.run=this.run.bind(this)}async run(e){return await Ne(k(),e,"referenced"),{thatTargets:e}}};var ac=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=Rr(e);return await Ne(k(),e,"referenced"),await k().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:un(e)}}};function PD(t){let e=t.split(/^---$/m),r={snippets:[]};for(let n of e){let i=n.match(/^-$/m),o=i!=null?n.slice(0,i.index):n,s=i!=null?n.slice(i.index+i[0].length):null,l=s?cQ(s):null,u=oQ(o);if(l!=null){u==null&&(u={variables:[]});let{variables:m,...d}=u;r.snippets.push({...d,body:l,variables:m})}else if(u!=null){if(r.header!=null||r.snippets.length!==0)throw Error("Header snippet must be first in file");r.header=u}}return r}function oQ(t){let e={variables:[]},r=aQ(t);if(Object.keys(r).length===0)return;let n={};for(let[i,o]of Object.entries(r))switch(i){case"name":e.name=o;break;case"description":e.description=o;break;case"phrase":e.phrases=Bl(o);break;case"insertionScope":e.insertionScopes=Bl(o);break;case"language":e.languages=Bl(o);break;default:if(!i.startsWith("$"))throw Error(`Invalid key '${i}'`);n[i]=o}return e.variables=sQ(n),e}function aQ(t){let e=t.split(/\r?\n/).map(n=>n.trim()).filter(Boolean),r={};for(let n of e){let i=n.split(":");if(i.length!==2)throw Error(`Invalid line '${n}'`);let o=i[0].trim(),s=i[1].trim();if(o.length===0||s.length===0)throw Error(`Invalid line '${n}'`);if(r[o]!=null)throw Error(`Duplicate key '${o}' in '${t}'`);r[o]=s}return r}function sQ(t){let e={},r=n=>(e[n]==null&&(e[n]={name:n}),e[n]);for(let[n,i]of Object.entries(t)){let o=n.split(".");if(o.length!==2)throw Error(`Invalid variable key '${n}'`);let s=o[0].slice(1);switch(o[1]){case"insertionFormatter":r(s).insertionFormatters=Bl(i);break;case"wrapperPhrase":r(s).wrapperPhrases=Bl(i);break;case"wrapperScope":r(s).wrapperScope=i;break;default:throw Error(`Invalid variable key '${n}'`)}}return Object.values(e)}function cQ(t){let e=t.match(/^[ \t]*\S/m);if(e?.index!=null)return t.slice(e.index).trimEnd().split(/\r?\n/).map(r=>r.trimEnd())}function Bl(t){return t.split("|").map(e=>e.trim())}function DD(t){let e=[];t.header!=null&&e.push(MD(t.header)),e.push(...t.snippets.map(MD));let r=e.filter(Boolean).join(`
---

`);return r?r+`
---
`:""}function MD(t){let e=[wo("name",t.name),wo("description",t.description),wo("language",t.languages),wo("phrase",t.phrases),wo("insertionScope",t.insertionScopes)].filter(Boolean);return t.variables.length>0&&(e.length>0&&e.push(""),e.push(...lQ(t.variables))),"body"in t&&e.push("-",...t.body),e.join(`
`)}function lQ(t){let e=[...t];return e.sort(uQ),e.flatMap(r=>[wo(`$${r.name}.insertionFormatter`,r.insertionFormatters),wo(`$${r.name}.wrapperPhrase`,r.wrapperPhrases),wo(`$${r.name}.wrapperScope`,r.wrapperScope)]).filter(Boolean)}function wo(t,e){return e==null?"":Array.isArray(e)?`${t}: ${e.join(" | ")}`:`${t}: ${e}`}function uQ(t,e){return t.name==="0"?1:e.name==="0"?-1:t.name.localeCompare(e.name)}function FD(t,e){let r=[],n=0,i=null,[o,...s]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...s.map(u=>({text:u,startIndex:0}))].forEach(({text:u,startIndex:m})=>{let d=u.match(/^\s*/)?.[0]??"",g=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let y=Math.max(g,m),x=mx("	",n),w=u.slice(y);r.push(x+w)}),r}function LD(t,e){let r=dx(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var sc=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){if(r==null)throw new Error("Directory argument is required for GenerateSnippet action. Please update Cursorless Talon");let i=Rr(e),o=i.editor;if(Ne(k(),e,"referenced"),n==null&&(n=await k().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"}),!n))return{};let s=o.document.offsetAt(i.contentRange.start),l=mQ(o,i.contentRange),u=l.map((ce,fe)=>({offsets:{start:o.document.offsetAt(ce.start)-s,end:o.document.offsetAt(ce.end)-s},name:fe===l.length-1?"0":`${fe+1}`})),m=o.document.getText(new Y(i.contentRange.start.with(void 0,0),i.contentRange.start)),d=o.document.getText(i.contentRange),g=LD(d,[...sn(d,/\$|\\/g,ce=>({offsets:{start:ce.index,end:ce.index+ce[0].length},text:`\\${ce[0]}`})),...u.map(({offsets:ce,name:fe})=>({offsets:ce,text:`$${fe}`}))]),y=FD(g,m),x,w={snippets:[]};k().runMode==="test"?x=k().getEditableTextEditor(o):(x=k().getEditableTextEditor(await this.snippets.openNewSnippetFile(n,r)),w=PD(x.document.getText())),await x.setSelections([x.document.range.toSelection(!1)]);let E=1,{header:U}=w,V=w.header?.phrases!=null?void 0:[`${Mv}${E++}`],z=ce=>{let fe=U?.variables?.some(ct=>ct.name===ce.name&&ct.wrapperPhrases!=null);return{name:ce.name,wrapperPhrases:fe?void 0:[`${Mv}${E++}`]}},ne={name:U?.name===n?void 0:n,phrases:V,languages:pQ(o,U),body:y,variables:u.map(z)};w.snippets.push(ne);let se=DD(w).replace(/\$/g,"\\$").replaceAll(Mv,"$");return await x.insertSnippet(se),{thatSelections:e.map(({editor:ce,contentSelection:fe})=>({editor:ce,selection:fe}))}}};function pQ(t,e){if(!e?.languages?.includes(t.document.languageId))return[t.document.languageId]}function mQ(t,e){let r=t.selections.filter(n=>e.contains(n));return r.sort((n,i)=>n.start.compareTo(i.start)),r}var Mv="PLACEHOLDER_VFA77zcbLD6wXNmfMAay";var Vl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Wl=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Ne(k(),e,"referenced"),n&&Rr(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var $l=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(k().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(k().visibleTextEditors.map(n=>k().setHighlightRanges(r,n,[]))):await at(e,(n,i)=>k().setHighlightRanges(r,n,i.map(o=>pn(o,o.contentRange)))),{thatTargets:e}}};var Mg=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Ne(k(),e,"pendingModification0"),{thatTargets:nt(await at(e,this.runForEditor))})}hasCapability(){return this.isIndent?k().capabilities.commands.indentLine!=null:k().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new ig(this.rangeUpdater):new og(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?fQ(e,r):dQ(e,r),{targetSelections:i}=await Le({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return Pt(r,i).map(([o,s])=>ic({editor:e,selection:s.toSelection(o.isReversed)}))}},Dg=class extends Mg{constructor(e){super(e,!0)}},Fg=class extends Mg{constructor(e){super(e,!1)}};function fQ(t,e){let{document:r}=t,n=ID(e),i=gQ(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function dQ(t,e){let{document:r}=t,n=ID(e),i=hQ(t);return n.map(o=>{let s=r.lineAt(o),l=s.text.match(i),{start:u}=s.range,m=u.translate(void 0,l?.[0].length);return{range:new Y(u,m),text:""}})}function ID(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function gQ(t){if(t.options.insertSpaces){let e=CD(t);return" ".repeat(e)}return"	"}function hQ(t){if(t.options.insertSpaces){let e=CD(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function CD(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var Lg=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(ti)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=nt(await at(e,this.runForEditor));return await k().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:mr(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(y=>y.toDestination(n).constructChangeEdit(y.contentText)),o=r.map(({contentSelection:y})=>y),s=i.map(({range:y})=>y),l=k().getEditableTextEditor(e),{contentSelections:u,editRanges:m}=await Le({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:s,behavior:0}}}),d=Pt(i,m).map(([y,x])=>y.updateRange(x)),g=e.selections[0];return u.some(y=>y.intersection(g)!=null)&&await l.revealRange(g),{sourceMark:un(r,d),thatMark:un(r,u)}}},Ig=class extends Lg{constructor(e,r){super(e,r,!0)}},Cg=class extends Lg{constructor(e,r){super(e,r,!1)}};var jl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ti)]}async run(e){let r=await at(e,async(i,o)=>{let s=this.getEdits(o),l=o.map(d=>d.thatTarget.contentSelection),{contentSelections:u,editRanges:m}=await Le({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(i),edits:s,selections:{contentSelections:l,editRanges:{selections:s.map(d=>d.range),behavior:0}}});return{thatMark:u.map(d=>({editor:i,selection:d})),flashRanges:ea(s,m).map(([d,g])=>({editor:i,range:d.isLine?d.updateRange(g):g,isLine:d.isLine}))}});return await k().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:s,isLine:l})=>({editor:o,range:l?Vr(s):mr(s),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},Og=class extends jl{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[Hg(r,"before"),Hg(r,"after")])}},Ng=class extends jl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>Hg(r,"before"))}},Ug=class extends jl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>Hg(r,"after"))}};function Hg(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.textualType==="line"}}function ND(t,e){return yQ(OD(t),OD(e))}function OD(t){if(t.languages!=null)return{langIds:t.languages}}function yQ(t,e){if(t==null&&e==null)return 0;if(t==null)return-1;if(e==null)return 1;if(t.langIds==null&&e.langIds!=null)return-1;if(e.langIds==null&&t.langIds!=null)return 1;let r=TQ(t.scopeTypes,e.scopeTypes);return r!==0?r:t.langIds==null?0:e.langIds.length-t.langIds.length}function TQ(t,e){return t==null&&e!=null?-1:e==null&&t!=null?1:0}function cc(t,e){if(t.type==="named")throw new Error("Cursorless snippets are deprecated. Please use community snippets. Update to latest cursorless-talon and say 'cursorless migrate snippets'.");if(t.type==="custom")return t;let r=SQ(t.snippets,e);r.sort(ND);let n=r[0];if(n==null){let i=xQ(t.snippets);throw new Error(`No snippet available for language '${e}'. Available languages: ${i}`)}return n}function xQ(t){let e=new Set(t.flatMap(r=>r.languages??[]));return Array.from(e).sort().join(", ")}function SQ(t,e){return t.filter(r=>r.languages==null?!0:r.languages.includes(e))}var Dv=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},Eo=class{constructor(){this._children=[]}appendChild(e){return e instanceof Kt&&this._children[this._children.length-1]instanceof Kt?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function s(l,u){for(let m of l)m.parent=u,s(m.children,m)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Wg)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Kt=class t extends Eo{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},Bg=class extends Eo{},Qt=class t extends Bg{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Vg?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},Vg=class t extends Eo{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Kt&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},Fv=class t extends Eo{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof Ln&&!!s.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof Ln){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},Ln=class t extends Eo{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},In=class t extends Bg{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Kt(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function UD(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var Wg=class t extends Eo{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Qt&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return UD([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Qt&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof In&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){UD(this.children,e)}},ni=class{constructor(){this._scanner=new Dv;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new Wg;for(;this._parse(i););let o=new Map,s=[],l=0;i.walk(u=>(u instanceof Qt&&(l+=1,u.isFinalTabstop?o.set(0,void 0):!o.has(u.index)&&u.children.length>0?o.set(u.index,u.children):s.push(u)),!0));for(let u of s){let m=o.get(u.index);if(m){let d=new Qt(u.index);d.transform=u.transform;for(let g of m)d.appendChild(g.clone());i.replace(u,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Qt(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Kt(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Qt(Number(r)):new In(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Qt(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Kt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new Vg;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Kt(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new In(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Kt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new Fv,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Kt(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Ln(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new Ln(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new Ln(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Ln(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Ln(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new Ln(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Ln(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Kt(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var $g=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function jg(t,e,r){let n=vQ(t)+1,i={};t.walk(o=>{if(o instanceof In){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Kt(r[o.name])]);else if(!$g[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Qt(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Qt&&(o.index.toString()===e?o.parent.replace(o,[new In("TM_SELECTED_TEXT")]):r!=null&&Object.prototype.hasOwnProperty.call(r,o.index)&&o.parent.replace(o,[new Kt(r[o.index])]));return!0})}function vQ(t){let e=0;return t.walk(r=>(r instanceof Qt&&(e=Math.max(e,r.index)),!0)),e}function zg(t,e,r){let n=bQ(t)+1,i={};t.walk(o=>{if(o instanceof In){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Kt(r[o.name])]);else if(!$g[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Qt(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Qt&&o.index.toString()===e&&o.parent.replace(o,[new In("TM_SELECTED_TEXT")]);return!0})}function bQ(t){let e=0;return t.walk(r=>(r instanceof Qt&&(e=Math.max(e,r.index)),!0)),e}function qg(t,e,r){let n=e.map(o=>wQ(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function wQ(t,e,r){let n=e.editor.document.languageId,i={multipleTargets:!1};return r.findIndex(({scope:o})=>{if(o==null)return!0;let{langIds:s,scopeTypes:l,excludeDescendantScopeTypes:u}=o;if(s!=null&&!s.includes(n))return!1;if(l!=null){let m=l.concat(u??[]),d,g;for(let y of m)try{let x=t.create({type:"containingScope",scopeType:{type:y}}).run(e,i)[0];e.contentRange.isRangeEqual(x.contentRange)&&(x=t.create({type:"containingScope",scopeType:{type:y},ancestorIndex:1}).run(e,i)[0]),(d==null||d.contentRange.contains(x.contentRange))&&(d=x,g=y)}catch{continue}return g==null?!1:d!=null&&!(u??[]).includes(g)}return!0})}var HD=!1;function Gg(){HD||(Qo(k().messages,"legacySnippets","Talon community snippets are now fully supported in Cursorless! Cursorless's experimental snippets are now deprecated, but in most cases we can help you migrate automatically. Update cursorless-talon and say 'cursorless migrate snippets'."),HD=!0)}var VD={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(BD).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(BD).join("")}};function BD(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}var zl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new ni;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new Zs(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}getSnippetInfo(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=qg(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(s){return s==null?void 0:EQ(i,o,s)}}}async run(e,r){Gg();let n=k().getEditableTextEditor(_t(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(m=>new Ct({editor:n,contentRange:m,isReversed:!1,hasExplicitRange:!0}))),s=this.snippetParser.parse(i);zg(s,null,o(r.substitutions));let l=s.toTextmateString(),{editorSelections:u}=await Le({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}};function EQ(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let s=VD[o];if(s==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,s(i.split(" "))]}))}var ql=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new ni;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=_t(e),o=cc(r,n.document.languageId).scopeTypes??[];return o.length===0?[]:[new Zs(this.modifierStageFactory,{type:"cascading",modifiers:o.map(s=>({type:"containingScope",scopeType:s}))})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(_t(e)),i=cc(r,n.document.languageId),o=this.snippetParser.parse(i.body),s=i.substitutions??r.substitutions;jg(o,null,s);let l=o.toTextmateString();await this.actions.editNew.run(e);let{editorSelections:u}=await Le({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}legacy(){return new zl(this.rangeUpdater,this.snippets,this.actions,this.modifierStageFactory)}};var Gl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ti)]}async run(e){return await Ne(k(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:nt(await at(e,async(n,i)=>{let{thatRanges:o}=await Le({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(n),edits:_Q(n,i),selections:{thatRanges:i.map(({contentRange:s})=>s)}});return ea(i,o).map(([s,l])=>({editor:n,selection:l.toSelection(s.isReversed)}))}))}}};function _Q(t,e){let r=[];for(let n of e){let i=n.textualType==="token"?RQ(n):kQ(n);r.push(...i)}return r}function RQ(t){let{editor:e,contentRange:r}=t,n=kr(e.document.languageId).tokenMatcher,i=fn(n,e,r,"forward");return Array.from(AS(i)).map(([o,s])=>({range:new Y(o.end,s.start),text:"",isReplace:!0}))}function kQ(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=Is(qP(n,i+1),s=>e.lineAt(s));return Array.from(AS(o)).map(([s,l])=>({range:new Y(s.rangeTrimmed?.end??s.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var Kg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=k().getEditableTextEditor(_t(e)),n=k().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Le({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:s,editorSelections:l}=await Le({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(s),n!=null&&!n.isActive&&await n.focus(),await k().flashRanges(l.map(u=>({editor:r,range:mr(u),style:"justAdded"}))),{thatSelections:l.map(u=>({editor:r,selection:u}))}}};var Qg=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await k().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?ea(e,n).map(([s,l])=>({destination:s,text:l})):e.map(s=>({destination:s,text:r}));return{thatSelections:nt(await Ai(i,({destination:s})=>s.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:s,text:l})=>s.constructChangeEdit(l)),{editSelections:i}=await Le({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:s})=>s),behavior:0}}}),o=ea(n,i).map(([s,l])=>s.updateRange(l).toSelection(l.isReversed));return await k().flashRanges(o.map(s=>({editor:e,range:mr(s),style:"justAdded"}))),o.map(s=>({editor:e,selection:s}))}};var Yg=class{constructor(e,r){this.run=this.run.bind(this),this.runner=k().capabilities.commands.clipboardPaste!=null?new Kg(e,r):new Qg(e)}run(e){return this.runner.run(e)}};var Kl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=Xd(e),r&&await Ne(k(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:nt(await at(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(s=>s.constructRemovalEdit()),i=k().getEditableTextEditor(e),{editRanges:o}=await Le({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:s})=>s)}});return Pt(r,o).map(([s,l])=>new uo({editor:s.editor,isReversed:s.isReversed,contentRange:l}))}};var Ql=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Ne(k(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=Pt(e,n).map(([l,u])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(u)})),o=[],s=[];return await Ai(i,l=>l.editor,async(l,u)=>{let m=u.map(({edit:y})=>y),{contentSelections:d,editRanges:g}=await Le({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(l),edits:m,selections:{contentSelections:u.map(({target:y})=>y.contentSelection),editRanges:{selections:m.map(({range:y})=>y),behavior:0}}});for(let[y,x]of Pt(u,d))o.push(y.target.withContentRange(x));for(let[y,x]of Pt(u,g))s.push({editor:l,selection:y.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:s}}};var Yl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[Ev(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(s=>{let l=s.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Ne(k(),i,"pendingModification0");let o=await at(i,async(s,l)=>{let u=l.map((g,y)=>({editor:s,range:g.contentRange,text:y%2===0?r:n})),{sourceRanges:m,thatRanges:d}=await Le({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(s),edits:u,selections:{sourceRanges:e.map(g=>g.thatTarget.contentRange),thatRanges:e.map(g=>g.contentRange)}});return{sourceMark:un(e,m),thatMark:un(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:s})=>s),thatSelections:o.flatMap(({thatMark:s})=>s)}}};var Zl=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=ml(e,s=>s.editor),n=Array.from(r,([s,l])=>({lineNumber:AQ(l,this.at),editor:s})),i=k().activeEditableTextEditor;for(let s of n)await k().getEditableTextEditor(s.editor).revealLine(s.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(s=>{let l=s.editor.visibleRanges,u=l[0].start.line,m=l[l.length-1].end.line;return s.contentRange.start.line>u||s.contentRange.end.line<m||s.contentRange.start.line===u&&s.contentRange.end.line===m});return await k().flashRanges(o.map(s=>({editor:s.editor,range:Vr(s.contentRange),style:"referenced"}))),{thatTargets:e}}},Zg=class extends Zl{constructor(){super("top")}},Xg=class extends Zl{constructor(){super("center")}},Jg=class extends Zl{constructor(){super("bottom")}};function AQ(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var _o=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=_t(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n,o=this.selectionMode==="set"&&i.length===1&&i[0].isEmpty;return await k().getEditableTextEditor(r).setSelections(i,{focusEditor:!0,highlightWord:o}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new Be(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new Be(r.contentRange.end,r.contentRange.end))}}},eh=class extends _o{constructor(){super("set","content")}},th=class extends _o{constructor(){super("set","before")}},rh=class extends _o{constructor(){super("set","after")}},nh=class extends _o{constructor(){super("add","content")}},ih=class extends _o{constructor(){super("add","before")}},oh=class extends _o{constructor(){super("add","after")}};var Xl=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var Jl=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Ne(k(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,s=this.treeSitter.getTree(i.document);r.push(PQ(i.document,s,o))}return k().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function PQ(t,e,r){let n=[],i=[];return WD(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function WD(t,e,r,n,i){for(;;){let o=new Y(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let s="  ".repeat(i),l=MQ(n),u=s+l;if(n.nodeIsNamed)t.push(`${u}${n.nodeType} [${o}]`),e.push(`${u}(${n.nodeType}`),n.gotoFirstChild()?(WD(t,e,r,n,i+1),n.gotoParent(),e.push(`${s})`)):e[e.length-1]+=")";else{let m=`"${n.nodeType}"`;t.push(`${u}${m} [${o}]`),e.push(`${u}${m}`)}}if(!n.gotoNextSibling())return}}function MQ(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var eu=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&Qo(k().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((s,l)=>s.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(s=>s.toDestination("to")),i);return{thatSelections:o}}},ah=class extends eu{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},sh=class extends eu{sortTexts(e){return e.reverse()}},ch=class extends eu{sortTexts(e){return fx(e)}};var tu=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(ti)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Ne(k(),r,"referenced"),await at(e,async(n,i)=>{let o=i.map(s=>pn(s,s.contentRange));await k().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var ru=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await at(e,async(o,s)=>{let l=s.map(E=>({start:new Be(E.contentRange.start,E.contentRange.start),end:new Be(E.contentRange.end,E.contentRange.end)})),u=l.flatMap(({start:E,end:U})=>[{text:r,range:E},{text:n,range:U,isReplace:!0}]),m=s.map(E=>E.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:g,sourceSelections:y,thatSelections:x}=await Le({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(o),edits:u,selections:{boundariesStartSelections:{selections:l.map(({start:E})=>E),behavior:2},boundariesEndSelections:{selections:l.map(({end:E})=>E),behavior:3},sourceSelections:{selections:m,behavior:1},thatSelections:{selections:m,behavior:0}}}),w=[...d,...g];return await k().flashRanges(w.map(E=>({editor:o,range:mr(E),style:"justAdded"}))),{sourceMark:y.map(E=>({editor:o,selection:E})),thatMark:x.map(E=>({editor:o,selection:E}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var nu=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new ni;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new So(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){let{name:r,variableName:n}=e,s=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return s==null?void 0:{type:s}}getBody(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return qg(this.modifierStageFactory,r,i.definitions).body.join(`
`)}async run(e,r){Gg();let n=k().getEditableTextEditor(_t(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);zg(o,r.variableName);let s=o.toTextmateString();await Ne(k(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),u=()=>n.insertSnippet(s,l),{targetSelections:m}=await Le({rangeUpdater:this.rangeUpdater,editor:n,callback:u,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:m.map(d=>({editor:n,selection:d}))}}};var iu=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new ni;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=_t(e),i=cc(r,n.document.languageId);return i.scopeType==null?[]:[new So(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:i.scopeType}})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(_t(e)),i=cc(r,n.document.languageId),o=this.snippetParser.parse(i.body);jg(o,i.variableName);let s=o.toTextmateString();await Ne(k(),e,"pendingModification0");let l=e.map(m=>m.contentSelection),{targetSelections:u}=await Le({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(s,l),preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}legacy(){return new nu(this.rangeUpdater,this.snippets,this.modifierStageFactory)}};var DQ=/-?\d+(\.\d+)?/g,lh=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Ai(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let u=n.offsetAt(l.contentRange.start),m=l.contentText,d=tl(m,DQ);for(let g of d)i.push(FQ(e,u,g)),o.push(LQ(this.isIncrement,g.text))}let{thatSelections:s}=await this.actions.replace.run(i,o);return s}},uh=class extends lh{constructor(e){super(e,!0)}},ph=class extends lh{constructor(e){super(e,!1)}};function FQ(t,e,r){return new Ke({editor:t,isReversed:!1,contentRange:new Y(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function LQ(t,e){return e.includes(".")?CQ(t,e).toString():IQ(t,e).toString()}function IQ(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function CQ(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var mh=class{constructor(e,r,n,i){this.addSelection=new nh,this.addSelectionBefore=new ih,this.addSelectionAfter=new oh,this.callAsFunction=new Ol(this),this.clearAndSetSelection=new Nl(this),this.copyToClipboard=new Sg(this,n),this.cutToClipboard=new vg(this),this.decrement=new ph(this),this.deselect=new Ul,this.editNew=new bg(n,this),this.editNewLineAfter=new _g(this,i),this.editNewLineBefore=new Eg(this,i),this.executeCommand=new Hl(n),this.extractVariable=new gg(n),this.findInDocument=new kg(this),this.findInWorkspace=new Ag(this),this.flashTargets=new Pg,this.foldRegion=new ag(n),this.followLink=new ac({openAside:!1}),this.followLinkAside=new ac({openAside:!0}),this.generateSnippet=new sc(r),this.getText=new Wl,this.gitAccept=new hg(n),this.gitRevert=new yg(n),this.gitStage=new Tg(n),this.gitUnstage=new xg(n),this.highlight=new $l,this.increment=new uh(this),this.indentLine=new Dg(n),this.insertCopyAfter=new Cg(n,i),this.insertCopyBefore=new Ig(n,i),this.insertEmptyLineAfter=new Ug(n,i),this.insertEmptyLineBefore=new Ng(n,i),this.insertEmptyLinesAround=new Og(n,i),this.insertSnippet=new ql(n,r,this,i),this.joinLines=new Gl(n,i),this.breakLine=new Zd(n),this.moveToTarget=new eg(n),this.outdentLine=new Fg(n),this.pasteFromClipboard=new Yg(n,this),this.randomizeTargets=new ch(this),this.remove=new Kl(n),this.rename=new cg(n),this.replace=new Ql(n),this.replaceWithTarget=new Jd(n),this.revealDefinition=new pg(n),this.revealTypeDefinition=new mg(n),this.reverseTargets=new sh(this),this.rewrapWithPairedDelimiter=new Yl(n,i),this.scrollToBottom=new Jg,this.scrollToCenter=new Xg,this.scrollToTop=new Zg,this.setSelection=new eh,this.setSelectionAfter=new rh,this.setSelectionBefore=new th,this.showDebugHover=new dg(n),this.showHover=new fg(n),this.showQuickFix=new ug(n),this.showReferences=new lg(n),this.sortTargets=new ah(this),this.swapTargets=new tg(n),this.toggleLineBreakpoint=new tu(i),this.toggleLineComment=new ng(n),this.unfoldRegion=new sg(n),this.wrapWithPairedDelimiter=new ru(n),this.wrapWithSnippet=new iu(n,r,i),this["experimental.setInstanceReference"]=new Xl("instanceReference"),this["private.showParseTree"]=new Jl(e),this["private.getTargets"]=new Vl,this["private.setKeyboardTarget"]=new Xl("keyboard")}};async function $D(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return fh(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:dh(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return fh(i.destination)?{action:"insert",modifiers:dh(i.destination),text:await Lv(e,i.source)}:null;case"moveToTarget":if(fh(i.destination)){let o=await Lv(e,i.source);return await OQ(e,i.source),{action:"insert",modifiers:dh(i.destination),text:o}}return null;case"callAsFunction":return gh(i.argument)?{action:i.name,modifiers:hh(i.argument),callee:await Lv(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return gh(i.target)?{action:i.name,modifiers:hh(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return fh(i.destination)?{action:i.name,modifiers:dh(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return gh(i.target)?{action:i.name,modifiers:hh(i.target)}:null}}function fh(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&gh(t.target):!1}function gh(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function dh(t){return t.type==="primitive"?hh(t.target):[]}function hh(t){return t.type==="primitive"&&t.modifiers!=null&&t.modifiers.length>0?t.modifiers:[]}async function Lv(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function OQ(t,e){await t({name:"remove",target:e})}function jD(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((s,l)=>[s,l]);for(let[s,l]of o.reverse())for(let u of NQ){let m=u.accept(s);if(m.accepted){let[d,g]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],y={...t,anchor:g.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:g},active:Nm(i,x=>{x.modifiers=x.modifiers.slice(qo(x.modifiers,w=>u.accept(w).accepted)+1)})};return y=m.transformTarget?.(y)??y,{type:"primitive",mark:{type:"target",target:y},modifiers:d}}}return t}var NQ=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function Cv(t,e){switch(t.type){case"list":return UQ(t,e);case"range":return zD(t,e);case"primitive":return yh(t,e);case"implicit":return t}}function UQ(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return zD(r,i);case"primitive":return yh(r,i)}})}}function zD(t,e){let r=HQ(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return jD(r,n)}function HQ(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:yh(t.anchor,e),active:yh(t.active,e.concat(t.anchor))}}function yh(t,e){let r=Iv(t.mark??(BQ(t)?$Q(e):null)??{type:"cursor"}),n=qD(t)??jQ(e)??zQ(e)??[];return{type:t.type,mark:r,modifiers:n}}function BQ(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function qD(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function VQ(t){if(WQ(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function WQ(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function $Q(t){return ou(t,e=>e.mark)}function jQ(t){return ou(t,qD)}function zQ(t){return ou(t,VQ)}function ou(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=ou([n.anchor],e);if(i!=null)return i;break}case"list":{let i=ou(n.elements,e);if(i!=null)return i;break}}}}function Iv(t){switch(t.type){case"range":return{...t,anchor:Iv(t.anchor),active:Iv(t.active)};case"target":return{type:"target",target:Cv(t.target,[])};default:return t}}var Th=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new Ov(this.debug)}async run(e){if(Jo(e)){let m=await $D(this.commandServerApi,this.runAction,e);if(m!=null)return{fallback:m}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:s,instanceReferenceTargets:l,keyboardTargets:u}=await this.runAction(e.action);return this.storedTargets.set("that",GD(i,n)),this.storedTargets.set("source",GD(s,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",u,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.directory,e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(this.getDestinations(e.destination),e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(this.getTargets(e.target),e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(Km(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},Ov=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=Cv(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function GD(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(ic):t}var xh=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Ct({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var Sh=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=k().visibleTextEditors.find(s=>s.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new Y(r.line,r.character,n.line,n.character);return[new Ct({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var vh=class{constructor(e){this.mark=e}run(){let e=k().activeTextEditor;if(e==null)return[];let r=qQ(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[PS(e,!1,n)]}},qQ=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,s=Math.floor(i/100)*100,l=[],u=[],m=s+r;for(;m<=o;)m>=i&&(t.visibleRanges.find(g=>m>=g.start.line&&m<=g.end.line)?l.push(m):u.push(m)),m+=100;if(l.length===1)return l[0];if(l.length+u.length>1)throw new Error("Multiple lines matching");if(u.length===1)return u[0];throw new Error("Line is not in viewport")}}};var bh=class{constructor(e){this.mark=e}run(){return[]}};var wh=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[vo(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var Eh=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var _h=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var Rh=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new Ms;case"that":case"source":case"keyboard":return new Eh(this.storedTargets,e.type);case"decoratedSymbol":return new xh(this.readableHatMap,e);case"lineNumber":return new vh(e);case"range":return new wh(this,e);case"nothing":return new bh(e);case"target":return new _h(this.targetPipelineRunner,e);case"explicit":return new Sh(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function KD(t,e,r,n,i,o,s,l,u,m){r.active&&(r.log("command:"),r.log(JSON.stringify(m,null,2)));let d=lS(m),g=await n.getReadableMap(d.usePrePhraseSnapshot),y=KQ(t,e,s,r,o,g,i,l);for(let w of u)y=w.wrapCommandRunner(g,y);let x=await y.run(d);return await GQ(m,x)}async function GQ(t,e){if(Jo(t))return e;if("returnValue"in e)return e.returnValue}function KQ(t,e,r,n,i,o,s,l){let u=new nc(r,i,new Vs(r)),m=new Rh(o,i),d=new Md(u,m);return m.setPipelineRunner(d),new Th(e,n,i,d,new mh(t,s,l,u))}var QD=["rust"];async function YD(t,e){await QQ(t,e)}async function QQ(t,e){let r=[];for(let n of QD)await t.loadLanguage(n),await e.loadLanguage(n),Ei(Il[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function ZD(t){return lA(t)?ul(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${ul(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var kh=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{pr(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...Xo.filter(r=>r!=="instance").map(r=>({type:r})),...Am.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:ZD(e),isLanguageSpecific:YQ(e)}}dispose(){this.disposable.dispose()}};function YQ(t){switch(t.type){case"string":case"argumentOrParameter":case"argumentList":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"interior":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function Nv(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((s,l)=>s.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=am(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=am(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function ka(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.getRemovalHighlightRange(),leadingDelimiter:XD(t.getLeadingDelimiterTarget()),trailingDelimiter:XD(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(ka),boundary:t.getBoundary()?.map(ka),insertionDelimiter:t.insertionDelimiter}}function XD(t){return t!=null?ka(t):void 0}function JD(t,e,r,n,i){let o={multipleTargets:!0};return Is(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),s=>({domain:s.domain,ranges:s.getTargets(!1).map(l=>({range:l.contentRange,targets:i?ZQ(r,l,o).map(ka):void 0}))}))}function ZQ(t,e,r){try{return t.run(e,r)}catch(n){if(n.name==="NoContainingScopeError")return[];throw n}}function eF(t,e,r){return Is(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(ka)}))}var Ah=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:eF(e,i,Nv(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,s=this.scopeHandlerFactory.maybeCreate(r,o);if(s==null)return[];let l=this.scopeHandlerFactory.maybeCreate(s.iterationScopeType,o);return l==null?[]:JD(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),Nv(e,s,n),i)}};var Ph=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Gn(k().configuration,()=>this.onChange());this.disposables.push(k().onDidChangeVisibleTextEditors(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(s){if(ut(k().messages,"ScopeRangeWatcher.provide",s.message),o=[],k().runMode==="test")throw s}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{pr(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{pr(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var Mh=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?rF(n,r):tF(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return rF(n,r);let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?3:tF(e,o)?0:1}};function tF(t,e){return!mA(e.generateScopes(t,new ge(0,0),"forward"))}function rF(t,e){switch(e.type){case"notebookCell":return 3;default:return Il[t]?.[e.type]!=null?2:3}}var Dh=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Gn(k().configuration,()=>this.onChange());this.disposable=pA(k().onDidOpenTextDocument(i.run),k().onDidCloseTextDocument(i.run),k().onDidChangeActiveTextEditor(i.run),k().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{pr(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=k().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function nF({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Af,commandServerApi:i=new wf,talonSpokenForms:o=new kf,snippets:s=new Rf}){Jm(t);let l=new hf(t),u=new bf,m=new tf,d=new gf(t,m),g=new Df(o),y=e!=null?new Sf(u,l,e,i):new Ef;y.allocateHats();let x=r?await Sd.create(t,n,r):new _f;t.disposeOnExit(u,x,y,l,d);let w=[],E,U=V=>(E=V,KD(n,i,l,y,s,m,x,u,w,V));return{commandApi:{runCommand(V){return U(V)},runCommandSafe(...V){return U(Pm(V))},repeatPreviousCommand(){if(E==null)throw new Error("No previous command");return U(E)}},scopeProvider:JQ(x,m,g),customSpokenFormGenerator:g,storedTargets:m,hatTokenMap:y,injectIde:Jm,runIntegrationTests:()=>YD(n,x),addCommandRunnerDecorator:V=>{w.push(V)}}}function JQ(t,e,r){let n=new Vs(t),i=new Ah(n,new nc(t,e,n)),o=new Ph(t,i),s=new Mh(n),l=new kh(r),u=new Dh(t,s,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:s.getScopeSupport,getIterationScopeSupport:s.getIterationScopeSupport,onDidChangeScopeSupport:u.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function iF(t,e){switch(e.type){case"UntypedTarget":return new Ct({editor:t,isReversed:e.isReversed,contentRange:xm(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new fr({editor:t,isReversed:e.isReversed,contentRange:xm(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var ICe=Symbol("unused");var au=class{constructor(e){this.position=e}},CCe={$0:new au(0),$1:new au(1),$2:new au(2)};var oF=require("node:events"),Fh=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new oF.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function qr(){return global._neovimRegistry==null&&(global._neovimRegistry=new Fh),global._neovimRegistry}var aF="pokey.cursorless";async function Lh(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,s,l]=await e.executeLua(r,[]),u;return l===!0?u=[new Be(new ge(o-1,s-1),new ge(n-1,i-1))]:u=[new Be(new ge(n-1,i-1),new ge(o-1,s-1))],console.debug(`bufferGetSelections(): selections=(${u[0].start.line}, ${u[0].start.character}), (${u[0].end.line}, ${u[0].end.character}) neovim=(${n},${i}),(${o},${s}),reverse=${l}`),u}async function sF(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function cF(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),s=new Y(new ge(i-1,0),new ge(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${s.start.line}, ${s.start.character}), (${s.end.line}, ${s.end.character})`),[s]}async function lF(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function Ih(t,e){await e.callFunction("setreg",["*",t])}async function uF(t){return await t.callFunction("getreg",["*"])}async function pF(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function mF(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function fF(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function dF(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var e7={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0},Ch=class{constructor(){this.commands=e7}};var su=class{constructor(e){this.client=e}async readText(){return await uF(this.client)}async writeText(e){return await Ih(e,this.client)}};var Oh=Nr(Uv(),1);var lu=class{constructor(){this.notifier=new Jt;this.mocks={...mm};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(t7(n,r))return(0,Oh.get)(i,e)??(0,Oh.get)(this.mocks,e)}return(0,Oh.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function t7(t,e){return t.languageId===e.languageId}async function Hv(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);n.sort((s,l)=>(gF(s)||hF(s))&&(gF(l)||hF(l))?1:s.range.start.line===l.range.start.line?l.range.start.character-s.range.start.character:l.range.start.line-s.range.start.line),console.debug("neovimEdit() [sorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let s of n)o.push({range:s.range,rangeOffset:i.offsetAt(s.range.start),rangeLength:i.offsetAt(s.range.end)-i.offsetAt(s.range.start),text:s.text});qr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let s of n){let{range:l,text:u,isReplace:m}=s;u===""?await yF(t,l):l.isEmpty&&!m?await TF(t,l.start,u):await r7(t,l,u)}return await e.updateTextEditor(),!0}async function yF(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(s+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([s,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function TF(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=s+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let u=s+n[0],m=n[n.length-1]+l;await i.setLines([u,...n.slice(1,n.length-1),m],{start:e.line,end:e.line+1,strictIndexing:!0})}async function r7(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await yF(t,e),await TF(t,e.start,r)}function gF(t){return t.range.isEmpty&&!t.isReplace}function hF(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function xF(t){return qr().onEvent("onDidChangeTextDocument",t),vF()}function SF(t,e,r){return qr().onEvent("onDidOpenTextDocument",t),vF()}function vF(){return{dispose(){}}}var uu=class{constructor(){this.data={...fm}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var RI=Nr(Uv(),1);var pu=class{async showMessage(e,r,n,...i){}};async function bF(t,e){let r=e.activeTextEditor,n=await t.window,i=await Lh(n,t),o=r.document.getText(i[0]);await Ih(o,t)}async function wF(t,e){await pF(t)}var Nh=class{constructor(e,r,n,i,o,s,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=s}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await sF(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await Hv(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await bF(this.client,this.neovimIDE)}async clipboardPaste(){await wF(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}async gitAccept(e){throw Error("gitAccept Not implemented")}async gitRevert(e){throw Error("gitRevert Not implemented")}async gitStage(e){throw Error("gitStage Not implemented")}async gitUnstage(e){throw Error("gitUnstage Not implemented")}};var aw=Nr(require("path"),1);var EF;(()=>{"use strict";var t={975:C=>{function A(L){if(typeof L!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(L))}function q(L,N){for(var j,X="",Q=0,te=-1,xe=0,be=0;be<=L.length;++be){if(be<L.length)j=L.charCodeAt(be);else{if(j===47)break;j=47}if(j===47){if(!(te===be-1||xe===1))if(te!==be-1&&xe===2){if(X.length<2||Q!==2||X.charCodeAt(X.length-1)!==46||X.charCodeAt(X.length-2)!==46){if(X.length>2){var qe=X.lastIndexOf("/");if(qe!==X.length-1){qe===-1?(X="",Q=0):Q=(X=X.slice(0,qe)).length-1-X.lastIndexOf("/"),te=be,xe=0;continue}}else if(X.length===2||X.length===1){X="",Q=0,te=be,xe=0;continue}}N&&(X.length>0?X+="/..":X="..",Q=2)}else X.length>0?X+="/"+L.slice(te+1,be):X=L.slice(te+1,be),Q=be-te-1;te=be,xe=0}else j===46&&xe!==-1?++xe:xe=-1}return X}var Z={resolve:function(){for(var L,N="",j=!1,X=arguments.length-1;X>=-1&&!j;X--){var Q;X>=0?Q=arguments[X]:(L===void 0&&(L=process.cwd()),Q=L),A(Q),Q.length!==0&&(N=Q+"/"+N,j=Q.charCodeAt(0)===47)}return N=q(N,!j),j?N.length>0?"/"+N:"/":N.length>0?N:"."},normalize:function(L){if(A(L),L.length===0)return".";var N=L.charCodeAt(0)===47,j=L.charCodeAt(L.length-1)===47;return(L=q(L,!N)).length!==0||N||(L="."),L.length>0&&j&&(L+="/"),N?"/"+L:L},isAbsolute:function(L){return A(L),L.length>0&&L.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var L,N=0;N<arguments.length;++N){var j=arguments[N];A(j),j.length>0&&(L===void 0?L=j:L+="/"+j)}return L===void 0?".":Z.normalize(L)},relative:function(L,N){if(A(L),A(N),L===N||(L=Z.resolve(L))===(N=Z.resolve(N)))return"";for(var j=1;j<L.length&&L.charCodeAt(j)===47;++j);for(var X=L.length,Q=X-j,te=1;te<N.length&&N.charCodeAt(te)===47;++te);for(var xe=N.length-te,be=Q<xe?Q:xe,qe=-1,Ce=0;Ce<=be;++Ce){if(Ce===be){if(xe>be){if(N.charCodeAt(te+Ce)===47)return N.slice(te+Ce+1);if(Ce===0)return N.slice(te+Ce)}else Q>be&&(L.charCodeAt(j+Ce)===47?qe=Ce:Ce===0&&(qe=0));break}var ft=L.charCodeAt(j+Ce);if(ft!==N.charCodeAt(te+Ce))break;ft===47&&(qe=Ce)}var Vt="";for(Ce=j+qe+1;Ce<=X;++Ce)Ce!==X&&L.charCodeAt(Ce)!==47||(Vt.length===0?Vt+="..":Vt+="/..");return Vt.length>0?Vt+N.slice(te+qe):(te+=qe,N.charCodeAt(te)===47&&++te,N.slice(te))},_makeLong:function(L){return L},dirname:function(L){if(A(L),L.length===0)return".";for(var N=L.charCodeAt(0),j=N===47,X=-1,Q=!0,te=L.length-1;te>=1;--te)if((N=L.charCodeAt(te))===47){if(!Q){X=te;break}}else Q=!1;return X===-1?j?"/":".":j&&X===1?"//":L.slice(0,X)},basename:function(L,N){if(N!==void 0&&typeof N!="string")throw new TypeError('"ext" argument must be a string');A(L);var j,X=0,Q=-1,te=!0;if(N!==void 0&&N.length>0&&N.length<=L.length){if(N.length===L.length&&N===L)return"";var xe=N.length-1,be=-1;for(j=L.length-1;j>=0;--j){var qe=L.charCodeAt(j);if(qe===47){if(!te){X=j+1;break}}else be===-1&&(te=!1,be=j+1),xe>=0&&(qe===N.charCodeAt(xe)?--xe==-1&&(Q=j):(xe=-1,Q=be))}return X===Q?Q=be:Q===-1&&(Q=L.length),L.slice(X,Q)}for(j=L.length-1;j>=0;--j)if(L.charCodeAt(j)===47){if(!te){X=j+1;break}}else Q===-1&&(te=!1,Q=j+1);return Q===-1?"":L.slice(X,Q)},extname:function(L){A(L);for(var N=-1,j=0,X=-1,Q=!0,te=0,xe=L.length-1;xe>=0;--xe){var be=L.charCodeAt(xe);if(be!==47)X===-1&&(Q=!1,X=xe+1),be===46?N===-1?N=xe:te!==1&&(te=1):N!==-1&&(te=-1);else if(!Q){j=xe+1;break}}return N===-1||X===-1||te===0||te===1&&N===X-1&&N===j+1?"":L.slice(N,X)},format:function(L){if(L===null||typeof L!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof L);return function(N,j){var X=j.dir||j.root,Q=j.base||(j.name||"")+(j.ext||"");return X?X===j.root?X+Q:X+"/"+Q:Q}(0,L)},parse:function(L){A(L);var N={root:"",dir:"",base:"",ext:"",name:""};if(L.length===0)return N;var j,X=L.charCodeAt(0),Q=X===47;Q?(N.root="/",j=1):j=0;for(var te=-1,xe=0,be=-1,qe=!0,Ce=L.length-1,ft=0;Ce>=j;--Ce)if((X=L.charCodeAt(Ce))!==47)be===-1&&(qe=!1,be=Ce+1),X===46?te===-1?te=Ce:ft!==1&&(ft=1):te!==-1&&(ft=-1);else if(!qe){xe=Ce+1;break}return te===-1||be===-1||ft===0||ft===1&&te===be-1&&te===xe+1?be!==-1&&(N.base=N.name=xe===0&&Q?L.slice(1,be):L.slice(xe,be)):(xe===0&&Q?(N.name=L.slice(1,te),N.base=L.slice(1,be)):(N.name=L.slice(xe,te),N.base=L.slice(xe,be)),N.ext=L.slice(te,be)),xe>0?N.dir=L.slice(0,xe-1):Q&&(N.dir="/"),N},sep:"/",delimiter:":",win32:null,posix:null};Z.posix=Z,C.exports=Z}},e={};function r(C){var A=e[C];if(A!==void 0)return A.exports;var q=e[C]={exports:{}};return t[C](q,q.exports,r),q.exports}r.d=(C,A)=>{for(var q in A)r.o(A,q)&&!r.o(C,q)&&Object.defineProperty(C,q,{enumerable:!0,get:A[q]})},r.o=(C,A)=>Object.prototype.hasOwnProperty.call(C,A),r.r=C=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:()=>y,Utils:()=>H}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function u(C,A){if(!C.scheme&&A)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${C.authority}", path: "${C.path}", query: "${C.query}", fragment: "${C.fragment}"}`);if(C.scheme&&!o.test(C.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(C.path){if(C.authority){if(!s.test(C.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(C.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let m="",d="/",g=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class y{static isUri(A){return A instanceof y||!!A&&typeof A.authority=="string"&&typeof A.fragment=="string"&&typeof A.path=="string"&&typeof A.query=="string"&&typeof A.scheme=="string"&&typeof A.fsPath=="string"&&typeof A.with=="function"&&typeof A.toString=="function"}scheme;authority;path;query;fragment;constructor(A,q,Z,L,N,j=!1){typeof A=="object"?(this.scheme=A.scheme||m,this.authority=A.authority||m,this.path=A.path||m,this.query=A.query||m,this.fragment=A.fragment||m):(this.scheme=function(X,Q){return X||Q?X:"file"}(A,j),this.authority=q||m,this.path=function(X,Q){switch(X){case"https":case"http":case"file":Q?Q[0]!==d&&(Q=d+Q):Q=d}return Q}(this.scheme,Z||m),this.query=L||m,this.fragment=N||m,u(this,j))}get fsPath(){return z(this,!1)}with(A){if(!A)return this;let{scheme:q,authority:Z,path:L,query:N,fragment:j}=A;return q===void 0?q=this.scheme:q===null&&(q=m),Z===void 0?Z=this.authority:Z===null&&(Z=m),L===void 0?L=this.path:L===null&&(L=m),N===void 0?N=this.query:N===null&&(N=m),j===void 0?j=this.fragment:j===null&&(j=m),q===this.scheme&&Z===this.authority&&L===this.path&&N===this.query&&j===this.fragment?this:new w(q,Z,L,N,j)}static parse(A,q=!1){let Z=g.exec(A);return Z?new w(Z[2]||m,fe(Z[4]||m),fe(Z[5]||m),fe(Z[7]||m),fe(Z[9]||m),q):new w(m,m,m,m,m)}static file(A){let q=m;if(i&&(A=A.replace(/\\/g,d)),A[0]===d&&A[1]===d){let Z=A.indexOf(d,2);Z===-1?(q=A.substring(2),A=d):(q=A.substring(2,Z),A=A.substring(Z)||d)}return new w("file",q,A,m,m)}static from(A){let q=new w(A.scheme,A.authority,A.path,A.query,A.fragment);return u(q,!0),q}toString(A=!1){return ne(this,A)}toJSON(){return this}static revive(A){if(A){if(A instanceof y)return A;{let q=new w(A);return q._formatted=A.external,q._fsPath=A._sep===x?A.fsPath:null,q}}return A}}let x=i?1:void 0;class w extends y{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=z(this,!1)),this._fsPath}toString(A=!1){return A?ne(this,!0):(this._formatted||(this._formatted=ne(this,!1)),this._formatted)}toJSON(){let A={$mid:1};return this._fsPath&&(A.fsPath=this._fsPath,A._sep=x),this._formatted&&(A.external=this._formatted),this.path&&(A.path=this.path),this.scheme&&(A.scheme=this.scheme),this.authority&&(A.authority=this.authority),this.query&&(A.query=this.query),this.fragment&&(A.fragment=this.fragment),A}}let E={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function U(C,A,q){let Z,L=-1;for(let N=0;N<C.length;N++){let j=C.charCodeAt(N);if(j>=97&&j<=122||j>=65&&j<=90||j>=48&&j<=57||j===45||j===46||j===95||j===126||A&&j===47||q&&j===91||q&&j===93||q&&j===58)L!==-1&&(Z+=encodeURIComponent(C.substring(L,N)),L=-1),Z!==void 0&&(Z+=C.charAt(N));else{Z===void 0&&(Z=C.substr(0,N));let X=E[j];X!==void 0?(L!==-1&&(Z+=encodeURIComponent(C.substring(L,N)),L=-1),Z+=X):L===-1&&(L=N)}}return L!==-1&&(Z+=encodeURIComponent(C.substring(L))),Z!==void 0?Z:C}function V(C){let A;for(let q=0;q<C.length;q++){let Z=C.charCodeAt(q);Z===35||Z===63?(A===void 0&&(A=C.substr(0,q)),A+=E[Z]):A!==void 0&&(A+=C[q])}return A!==void 0?A:C}function z(C,A){let q;return q=C.authority&&C.path.length>1&&C.scheme==="file"?`//${C.authority}${C.path}`:C.path.charCodeAt(0)===47&&(C.path.charCodeAt(1)>=65&&C.path.charCodeAt(1)<=90||C.path.charCodeAt(1)>=97&&C.path.charCodeAt(1)<=122)&&C.path.charCodeAt(2)===58?A?C.path.substr(1):C.path[1].toLowerCase()+C.path.substr(2):C.path,i&&(q=q.replace(/\//g,"\\")),q}function ne(C,A){let q=A?V:U,Z="",{scheme:L,authority:N,path:j,query:X,fragment:Q}=C;if(L&&(Z+=L,Z+=":"),(N||L==="file")&&(Z+=d,Z+=d),N){let te=N.indexOf("@");if(te!==-1){let xe=N.substr(0,te);N=N.substr(te+1),te=xe.lastIndexOf(":"),te===-1?Z+=q(xe,!1,!1):(Z+=q(xe.substr(0,te),!1,!1),Z+=":",Z+=q(xe.substr(te+1),!1,!0)),Z+="@"}N=N.toLowerCase(),te=N.lastIndexOf(":"),te===-1?Z+=q(N,!1,!0):(Z+=q(N.substr(0,te),!1,!0),Z+=N.substr(te))}if(j){if(j.length>=3&&j.charCodeAt(0)===47&&j.charCodeAt(2)===58){let te=j.charCodeAt(1);te>=65&&te<=90&&(j=`/${String.fromCharCode(te+32)}:${j.substr(3)}`)}else if(j.length>=2&&j.charCodeAt(1)===58){let te=j.charCodeAt(0);te>=65&&te<=90&&(j=`${String.fromCharCode(te+32)}:${j.substr(2)}`)}Z+=q(j,!0,!1)}return X&&(Z+="?",Z+=q(X,!1,!1)),Q&&(Z+="#",Z+=A?Q:U(Q,!1,!1)),Z}function se(C){try{return decodeURIComponent(C)}catch{return C.length>3?C.substr(0,3)+se(C.substr(3)):C}}let ce=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function fe(C){return C.match(ce)?C.replace(ce,A=>se(A)):C}var ct=r(975);let Bt=ct.posix||ct,mt="/";var H;(function(C){C.joinPath=function(A,...q){return A.with({path:Bt.join(A.path,...q)})},C.resolvePath=function(A,...q){let Z=A.path,L=!1;Z[0]!==mt&&(Z=mt+Z,L=!0);let N=Bt.resolve(Z,...q);return L&&N[0]===mt&&!A.authority&&(N=N.substring(1)),A.with({path:N})},C.dirname=function(A){if(A.path.length===0||A.path===mt)return A;let q=Bt.dirname(A.path);return q.length===1&&q.charCodeAt(0)===46&&(q=""),A.with({path:q})},C.basename=function(A){return Bt.basename(A.path)},C.extname=function(A){return Bt.extname(A.path)}})(H||(H={})),EF=n})();var{URI:_F,Utils:L1e}=EF;var qF=Nr(UF(),1);var fu=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var u7={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},du=t=>t.replace(/[[\]\\-]/g,"\\$&"),p7=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),HF=t=>t.join(""),BF=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,l=!1,u=!1,m=!1,d=r,g="";e:for(;o<t.length;){let E=t.charAt(o);if((E==="!"||E==="^")&&o===r+1){m=!0,o++;continue}if(E==="]"&&s&&!u){d=o+1;break}if(s=!0,E==="\\"&&!u){u=!0,o++;continue}if(E==="["&&!u){for(let[U,[V,z,ne]]of Object.entries(u7))if(t.startsWith(U,o)){if(g)return["$.",!1,t.length-r,!0];o+=U.length,ne?i.push(V):n.push(V),l=l||z;continue e}}if(u=!1,g){E>g?n.push(du(g)+"-"+du(E)):E===g&&n.push(du(E)),g="",o++;continue}if(t.startsWith("-]",o+1)){n.push(du(E+"-")),o+=2;continue}if(t.startsWith("-",o+1)){g=E,o+=2;continue}n.push(du(E)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!m){let E=n[0].length===2?n[0].slice(-1):n[0];return[p7(E),!1,d-r,!1]}let y="["+(m?"^":"")+HF(n)+"]",x="["+(m?"":"^")+HF(i)+"]";return[n.length&&i.length?"("+y+"|"+x+")":n.length?y:x,l,d-r,!0]};var Cn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var m7=new Set(["!","?","+","*","@"]),VF=t=>m7.has(t),f7="(?!(?:^|/)\\.\\.?(?:$|/))",Uh="(?!\\.)",d7=new Set(["[","."]),g7=new Set(["..","."]),h7=new Set("().*{}+?[]^$\\!"),y7=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Wv="[^/]",WF=Wv+"*?",$F=Wv+"+?",uc=class t{type;#e;#t;#o=!1;#n=[];#a;#S;#l;#p=!1;#s;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#a=r,this.#e=this.#a?this.#a.#e:this,this.#s=this.#e===this?n:this.#e.#s,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#p&&this.#l.push(this),this.#S=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#h(){if(this!==this.#e)throw new Error("should only call on root");if(this.#p)return this;this.toString(),this.#p=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#a;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#a}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#a===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#p&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#S===0)return!0;let e=this.#a;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,s=!1,l=-1,u=!1;if(r.type===null){let x=n,w="";for(;x<e.length;){let E=e.charAt(x++);if(o||E==="\\"){o=!o,w+=E;continue}if(s){x===l+1?(E==="^"||E==="!")&&(u=!0):E==="]"&&!(x===l+2&&u)&&(s=!1),w+=E;continue}else if(E==="["){s=!0,l=x,u=!1,w+=E;continue}if(!i.noext&&VF(E)&&e.charAt(x)==="("){r.push(w),w="";let U=new t(E,r);x=t.#y(e,U,x,i),r.push(U);continue}w+=E}return r.push(w),x}let m=n+1,d=new t(null,r),g=[],y="";for(;m<e.length;){let x=e.charAt(m++);if(o||x==="\\"){o=!o,y+=x;continue}if(s){m===l+1?(x==="^"||x==="!")&&(u=!0):x==="]"&&!(m===l+2&&u)&&(s=!1),y+=x;continue}else if(x==="["){s=!0,l=m,u=!1,y+=x;continue}if(VF(x)&&e.charAt(m)==="("){d.push(y),y="";let w=new t(x,d);d.push(w),m=t.#y(e,w,m,i);continue}if(x==="|"){d.push(y),y="",g.push(d),d=new t(null,r);continue}if(x===")")return y===""&&r.#n.length===0&&(r.#i=!0),d.push(y),y="",r.push(...g,d),m;y+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],m}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#s.nocase&&!this.#s.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#s.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#s}toRegExpSource(e){let r=e??!!this.#s.dot;if(this.#e===this&&this.#h(),!this.type){let u=this.isStart()&&this.isEnd(),m=this.#n.map(x=>{let[w,E,U,V]=typeof x=="string"?t.#m(x,this.#t,u):x.toRegExpSource(e);return this.#t=this.#t||U,this.#o=this.#o||V,w}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&g7.has(this.#n[0]))){let w=d7,E=r&&w.has(m.charAt(0))||m.startsWith("\\.")&&w.has(m.charAt(2))||m.startsWith("\\.\\.")&&w.has(m.charAt(4)),U=!r&&!e&&w.has(m.charAt(0));d=E?f7:U?Uh:""}let g="";return this.isEnd()&&this.#e.#p&&this.#a?.type==="!"&&(g="(?:$|\\/)"),[d+m+g,Cn(m),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let u=this.toString();return this.#n=[u],this.type=null,this.#t=void 0,[u,Cn(this.toString()),!1,!1]}let s=!n||e||r||!Uh?"":this.#f(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?Uh:"")+$F;else{let u=this.type==="!"?"))"+(this.isStart()&&!r&&!e?Uh:"")+WF+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;l=i+o+u}return[l,Cn(o),this.#t=!!this.#t,this.#o]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#o=this.#o||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",s=!1;for(let l=0;l<e.length;l++){let u=e.charAt(l);if(i){i=!1,o+=(h7.has(u)?"\\":"")+u;continue}if(u==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(u==="["){let[m,d,g,y]=BF(e,l);if(g){o+=m,s=s||d,l+=g-1,r=r||y;continue}}if(u==="*"){n&&e==="*"?o+=$F:o+=WF,r=!0;continue}if(u==="?"){o+=Wv,r=!0;continue}o+=y7(u)}return[o,Cn(e),!!r,s]}};var pc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var dr=(t,e,r={})=>(fu(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Gr(e,r).match(t)),T7=/^\*+([^+@!?\*\[\(]*)$/,x7=t=>e=>!e.startsWith(".")&&e.endsWith(t),S7=t=>e=>e.endsWith(t),v7=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),b7=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),w7=/^\*+\.\*+$/,E7=t=>!t.startsWith(".")&&t.includes("."),_7=t=>t!=="."&&t!==".."&&t.includes("."),R7=/^\.\*+$/,k7=t=>t!=="."&&t!==".."&&t.startsWith("."),A7=/^\*+$/,P7=t=>t.length!==0&&!t.startsWith("."),M7=t=>t.length!==0&&t!=="."&&t!=="..",D7=/^\?+([^+@!?\*\[\(]*)?$/,F7=([t,e=""])=>{let r=GF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},L7=([t,e=""])=>{let r=KF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},I7=([t,e=""])=>{let r=KF([t]);return e?n=>r(n)&&n.endsWith(e):r},C7=([t,e=""])=>{let r=GF([t]);return e?n=>r(n)&&n.endsWith(e):r},GF=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},KF=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},QF=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",jF={win32:{sep:"\\"},posix:{sep:"/"}},O7=QF==="win32"?jF.win32.sep:jF.posix.sep;dr.sep=O7;var Yt=Symbol("globstar **");dr.GLOBSTAR=Yt;var N7="[^/]",U7=N7+"*?",H7="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",B7="(?:(?!(?:\\/|^)\\.).)*?",V7=(t,e={})=>r=>dr(r,t,e);dr.filter=V7;var Tn=(t,e={})=>Object.assign({},t,e),W7=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return dr;let e=dr;return Object.assign((n,i,o={})=>e(n,i,Tn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,Tn(t,o))}static defaults(i){return e.defaults(Tn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,Tn(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Tn(t,o))}},unescape:(n,i={})=>e.unescape(n,Tn(t,i)),escape:(n,i={})=>e.escape(n,Tn(t,i)),filter:(n,i={})=>e.filter(n,Tn(t,i)),defaults:n=>e.defaults(Tn(t,n)),makeRe:(n,i={})=>e.makeRe(n,Tn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,Tn(t,i)),match:(n,i,o={})=>e.match(n,i,Tn(t,o)),sep:e.sep,GLOBSTAR:Yt})};dr.defaults=W7;var YF=(t,e={})=>(fu(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,qF.default)(t));dr.braceExpand=YF;var $7=(t,e={})=>new Gr(t,e).makeRe();dr.makeRe=$7;var j7=(t,e,r={})=>{let n=new Gr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};dr.match=j7;var zF=/[?*]|[+@!]\(.*?\)|\[|\]/,z7=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Gr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){fu(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||QF,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=o[0]===""&&o[1]===""&&(o[2]==="?"||!zF.test(o[2]))&&!zF.test(o[3]),m=/^[a-z]:/i.test(o[0]);if(u)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(m)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(u=>this.parse(u))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let l=n[i+1],u=n[i+2],m=n[i+3];if(l!==".."||!u||u==="."||u===".."||!m||m==="."||m==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let l=n[s];s===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let u=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...u),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let E=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),U=!E&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),V=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),z=!V&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),ne=U?3:E?0:void 0,se=z?3:V?0:void 0;if(typeof ne=="number"&&typeof se=="number"){let[ce,fe]=[e[ne],r[se]];ce.toLowerCase()===fe.toLowerCase()&&(r[se]=ce,se>ne?r=r.slice(se):ne>se&&(e=e.slice(ne)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,l=0,u=e.length,m=r.length;s<u&&l<m;s++,l++){this.debug("matchOne loop");var d=r[l],g=e[s];if(this.debug(r,d,g),d===!1)return!1;if(d===Yt){this.debug("GLOBSTAR",[r,d,g]);var y=s,x=l+1;if(x===m){for(this.debug("** at the end");s<u;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;y<u;){var w=e[y];if(this.debug(`
globstar while`,e,y,r,x,w),this.matchOne(e.slice(y),r.slice(x),n))return this.debug("globstar found match!",y,u,w),!0;if(w==="."||w===".."||!i.dot&&w.charAt(0)==="."){this.debug("dot detected!",e,y,r,x);break}this.debug("globstar swallow a segment, and continue"),y++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,y,r,x),y===u))}let E;if(typeof d=="string"?(E=g===d,this.debug("string match",d,g,E)):(E=d.test(g),this.debug("pattern match",d,g,E)),!E)return!1}if(s===u&&l===m)return!0;if(s===u)return n;if(l===m)return s===u-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return YF(this.pattern,this.options)}parse(e){fu(e);let r=this.options;if(e==="**")return Yt;if(e==="")return"";let n,i=null;(n=e.match(A7))?i=r.dot?M7:P7:(n=e.match(T7))?i=(r.nocase?r.dot?b7:v7:r.dot?S7:x7)(n[1]):(n=e.match(D7))?i=(r.nocase?r.dot?L7:F7:r.dot?I7:C7)(n):(n=e.match(w7))?i=r.dot?_7:E7:(n=e.match(R7))&&(i=k7);let o=uc.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?U7:r.dot?H7:B7,i=new Set(r.nocase?["i"]:[]),o=e.map(u=>{let m=u.map(d=>{if(d instanceof RegExp)for(let g of d.flags.split(""))i.add(g);return typeof d=="string"?z7(d):d===Yt?Yt:d._src});return m.forEach((d,g)=>{let y=m[g+1],x=m[g-1];d!==Yt||x===Yt||(x===void 0?y!==void 0&&y!==Yt?m[g+1]="(?:\\/|"+n+"\\/)?"+y:m[g]=n:y===void 0?m[g-1]=x+"(?:\\/|"+n+")?":y!==Yt&&(m[g-1]=x+"(?:\\/|\\/"+n+"\\/)"+y,m[g+1]=Yt))}),m.filter(d=>d!==Yt).join("/")}).join("|"),[s,l]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let l=i.length-2;!s&&l>=0;l--)s=i[l];for(let l=0;l<o.length;l++){let u=o[l],m=i;if(n.matchBase&&u.length===1&&(m=[s]),this.matchOne(m,u,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return dr.defaults(e).Minimatch}};dr.AST=uc;dr.Minimatch=Gr;dr.escape=pc;dr.unescape=Cn;var SL=require("node:url");var mc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,XF=new Set,$v=typeof process=="object"&&process?process:{},JF=(t,e,r,n)=>{typeof $v.emitWarning=="function"?$v.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},Hh=globalThis.AbortController,ZF=globalThis.AbortSignal;if(typeof Hh>"u"){ZF=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},Hh=class{constructor(){e()}signal=new ZF;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=$v.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,JF("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var q7=t=>!XF.has(t),rOe=Symbol("type"),Ro=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),eL=t=>Ro(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?fc:null:null,fc=class extends Array{constructor(e){super(e),this.fill(0)}},jv=class t{heap;length;static#e=!1;static create(e){let r=eL(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},gu=class t{#e;#t;#o;#n;#a;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#p;#s;#c;#i;#h;#y;#f;#m;#w;#g;#E;#_;#x;#v;#b;#d;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#x,sizes:e.#E,keyMap:e.#s,keyList:e.#c,valList:e.#i,next:e.#h,prev:e.#y,get head(){return e.#f},get tail(){return e.#m},free:e.#w,isBackgroundFetch:r=>e.#u(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#B(r),indexes:r=>e.#k(r),rindexes:r=>e.#A(r),isStale:r=>e.#T(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#p}get size(){return this.#l}get fetchMethod(){return this.#a}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:l,allowStale:u,dispose:m,disposeAfter:d,noDisposeOnSet:g,noUpdateTTL:y,maxSize:x=0,maxEntrySize:w=0,sizeCalculation:E,fetchMethod:U,memoMethod:V,noDeleteOnFetchRejection:z,noDeleteOnStaleGet:ne,allowStaleOnFetchRejection:se,allowStaleOnFetchAbort:ce,ignoreFetchAbort:fe}=e;if(r!==0&&!Ro(r))throw new TypeError("max option must be a nonnegative integer");let ct=r?eL(r):Array;if(!ct)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=w||this.#t,this.sizeCalculation=E,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(V!==void 0&&typeof V!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=V,U!==void 0&&typeof U!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=U,this.#b=!!U,this.#s=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#h=new ct(r),this.#y=new ct(r),this.#f=0,this.#m=0,this.#w=jv.create(r),this.#l=0,this.#p=0,typeof m=="function"&&(this.#o=m),typeof d=="function"?(this.#n=d,this.#g=[]):(this.#n=void 0,this.#g=void 0),this.#v=!!this.#o,this.#d=!!this.#n,this.noDisposeOnSet=!!g,this.noUpdateTTL=!!y,this.noDeleteOnFetchRejection=!!z,this.allowStaleOnFetchRejection=!!se,this.allowStaleOnFetchAbort=!!ce,this.ignoreFetchAbort=!!fe,this.maxEntrySize!==0){if(this.#t!==0&&!Ro(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Ro(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#M()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!ne,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!l,this.ttlResolution=Ro(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Ro(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#P()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let Bt="LRU_CACHE_UNBOUNDED";q7(Bt)&&(XF.add(Bt),JF("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Bt,t))}}getRemainingTTL(e){return this.#s.has(e)?1/0:0}#P(){let e=new fc(this.#e),r=new fc(this.#e);this.#x=e,this.#_=r,this.#F=(o,s,l=mc.now())=>{if(r[o]=s!==0?l:0,e[o]=s,s!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#T(o)&&this.#D(this.#c[o],"expire")},s+1);u.unref&&u.unref()}},this.#R=o=>{r[o]=e[o]!==0?mc.now():0},this.#r=(o,s)=>{if(e[s]){let l=e[s],u=r[s];if(!l||!u)return;o.ttl=l,o.start=u,o.now=n||i();let m=o.now-u;o.remainingTTL=l-m}};let n=0,i=()=>{let o=mc.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#s.get(o);if(s===void 0)return 0;let l=e[s],u=r[s];if(!l||!u)return 1/0;let m=(n||i())-u;return l-m},this.#T=o=>{let s=r[o],l=e[o];return!!l&&!!s&&(n||i())-s>l}}#R=()=>{};#r=()=>{};#F=()=>{};#T=()=>!1;#M(){let e=new fc(this.#e);this.#p=0,this.#E=e,this.#L=r=>{this.#p-=e[r],e[r]=0},this.#C=(r,n,i,o)=>{if(this.#u(n))return 0;if(!Ro(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Ro(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#I=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#p>o;)this.#N(!0)}this.#p+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#p)}}#L=e=>{};#I=(e,r,n)=>{};#C=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#m;!(!this.#O(r)||((e||!this.#T(r))&&(yield r),r===this.#f));)r=this.#y[r]}*#A({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#O(r)||((e||!this.#T(r))&&(yield r),r===this.#m));)r=this.#h[r]}#O(e){return e!==void 0&&this.#s.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#A())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#A()){let r=this.#c[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#A())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#A()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#A({allowStale:!0}))this.#T(r)&&(this.#D(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#s.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#u(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#x&&this.#_){let s=this.#x[r],l=this.#_[r];if(s&&l){let u=s-(mc.now()-l);o.ttl=u,o.start=Date.now()}}return this.#E&&(o.size=this.#E[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#u(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#x&&this.#_){s.ttl=this.#x[r];let l=mc.now()-this.#_[r];s.start=Math.floor(Date.now()-l)}this.#E&&(s.size=this.#E[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=mc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:u}=n,{noUpdateTTL:m=this.noUpdateTTL}=n,d=this.#C(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let g=this.#l===0?void 0:this.#s.get(e);if(g===void 0)g=this.#l===0?this.#m:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#N(!1):this.#l,this.#c[g]=e,this.#i[g]=r,this.#s.set(e,g),this.#h[this.#m]=g,this.#y[g]=this.#m,this.#m=g,this.#l++,this.#I(g,d,u),u&&(u.set="add"),m=!1;else{this.#B(g);let y=this.#i[g];if(r!==y){if(this.#b&&this.#u(y)){y.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=y;x!==void 0&&!s&&(this.#v&&this.#o?.(x,e,"set"),this.#d&&this.#g?.push([x,e,"set"]))}else s||(this.#v&&this.#o?.(y,e,"set"),this.#d&&this.#g?.push([y,e,"set"]));if(this.#L(g),this.#I(g,d,u),this.#i[g]=r,u){u.set="replace";let x=y&&this.#u(y)?y.__staleWhileFetching:y;x!==void 0&&(u.oldValue=x)}}else u&&(u.set="update")}if(i!==0&&!this.#x&&this.#P(),this.#x&&(m||this.#F(g,i,o),u&&this.#r(u,g)),!s&&this.#d&&this.#g){let y=this.#g,x;for(;x=y?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#f];if(this.#N(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#g){let e=this.#g,r;for(;r=e?.shift();)this.#n?.(...r)}}}#N(e){let r=this.#f,n=this.#c[r],i=this.#i[r];return this.#b&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(i,n,"evict"),this.#d&&this.#g?.push([i,n,"evict"])),this.#L(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#f=this.#m=0,this.#w.length=0):this.#f=this.#h[r],this.#s.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#s.get(e);if(o!==void 0){let s=this.#i[o];if(this.#u(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#T(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#s.get(e);if(i===void 0||!n&&this.#T(i))return;let o=this.#i[i];return this.#u(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#u(o))return o;let s=new Hh,{signal:l}=n;l?.addEventListener("abort",()=>s.abort(l.reason),{signal:s.signal});let u={signal:s.signal,options:n,context:i},m=(E,U=!1)=>{let{aborted:V}=s.signal,z=n.ignoreFetchAbort&&E!==void 0;if(n.status&&(V&&!U?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,z&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),V&&!z&&!U)return g(s.signal.reason);let ne=x;return this.#i[r]===x&&(E===void 0?ne.__staleWhileFetching?this.#i[r]=ne.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,E,u.options))),E},d=E=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=E),g(E)),g=E=>{let{aborted:U}=s.signal,V=U&&n.allowStaleOnFetchAbort,z=V||n.allowStaleOnFetchRejection,ne=z||n.noDeleteOnFetchRejection,se=x;if(this.#i[r]===x&&(!ne||se.__staleWhileFetching===void 0?this.#D(e,"fetch"):V||(this.#i[r]=se.__staleWhileFetching)),z)return n.status&&se.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),se.__staleWhileFetching;if(se.__returned===se)throw E},y=(E,U)=>{let V=this.#a?.(e,o,u);V&&V instanceof Promise&&V.then(z=>E(z===void 0?void 0:z),U),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(E(void 0),n.allowStaleOnFetchAbort&&(E=z=>m(z,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(y).then(m,d),w=Object.assign(x,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,w,{...u.options,status:void 0}),r=this.#s.get(e)):this.#i[r]=w,w}#u(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Hh}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:u=0,sizeCalculation:m=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:g=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:y=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:w=this.allowStaleOnFetchAbort,context:E,forceRefresh:U=!1,status:V,signal:z}=r;if(!this.#b)return V&&(V.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:V});let ne={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:l,size:u,sizeCalculation:m,noUpdateTTL:d,noDeleteOnFetchRejection:g,allowStaleOnFetchRejection:y,allowStaleOnFetchAbort:w,ignoreFetchAbort:x,status:V,signal:z},se=this.#s.get(e);if(se===void 0){V&&(V.fetch="miss");let ce=this.#U(e,se,ne,E);return ce.__returned=ce}else{let ce=this.#i[se];if(this.#u(ce)){let H=n&&ce.__staleWhileFetching!==void 0;return V&&(V.fetch="inflight",H&&(V.returnedStale=!0)),H?ce.__staleWhileFetching:ce.__returned=ce}let fe=this.#T(se);if(!U&&!fe)return V&&(V.fetch="hit"),this.#B(se),i&&this.#R(se),V&&this.#r(V,se),ce;let ct=this.#U(e,se,ne,E),mt=ct.__staleWhileFetching!==void 0&&n;return V&&(V.fetch=fe?"stale":"refresh",mt&&fe&&(V.returnedStale=!0)),mt?ct.__staleWhileFetching:ct.__returned=ct}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=r,l=this.get(e,s);if(!o&&l!==void 0)return l;let u=n(e,l,{options:s,context:i});return this.set(e,u,s),u}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,l=this.#s.get(e);if(l!==void 0){let u=this.#i[l],m=this.#u(u);return s&&this.#r(s,l),this.#T(l)?(s&&(s.get="stale"),m?(s&&n&&u.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?u.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),s&&n&&(s.returnedStale=!0),n?u:void 0)):(s&&(s.get="hit"),m?u.__staleWhileFetching:(this.#B(l),i&&this.#R(l),u))}else s&&(s.get="miss")}#H(e,r){this.#y[r]=e,this.#h[e]=r}#B(e){e!==this.#m&&(e===this.#f?this.#f=this.#h[e]:this.#H(this.#y[e],this.#h[e]),this.#H(this.#m,e),this.#m=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#s.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#V(r);else{this.#L(i);let o=this.#i[i];if(this.#u(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(o,e,r),this.#d&&this.#g?.push([o,e,r])),this.#s.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#m)this.#m=this.#y[i];else if(i===this.#f)this.#f=this.#h[i];else{let s=this.#y[i];this.#h[s]=this.#h[i];let l=this.#h[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#d&&this.#g?.length){let i=this.#g,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#V("delete")}#V(e){for(let r of this.#A({allowStale:!0})){let n=this.#i[r];if(this.#u(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#d&&this.#g?.push([n,i,e])}}if(this.#s.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#x&&this.#_&&(this.#x.fill(0),this.#_.fill(0)),this.#E&&this.#E.fill(0),this.#f=0,this.#m=0,this.#w.length=0,this.#p=0,this.#l=0,this.#d&&this.#g){let r=this.#g,n;for(;n=r?.shift();)this.#n?.(...n)}}};var hc=require("node:path"),uL=require("node:url"),ai=require("fs"),r8=Nr(require("node:fs"),1),Po=require("node:fs/promises");var qh=require("node:events"),Zv=Nr(require("node:stream"),1),oL=require("node:string_decoder"),tL=typeof process=="object"&&process?process:{stdout:null,stderr:null},G7=t=>!!t&&typeof t=="object"&&(t instanceof Ao||t instanceof Zv.default||K7(t)||Q7(t)),K7=t=>!!t&&typeof t=="object"&&t instanceof qh.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==Zv.default.Writable.prototype.pipe,Q7=t=>!!t&&typeof t=="object"&&t instanceof qh.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Ii=Symbol("EOF"),Ci=Symbol("maybeEmitEnd"),ko=Symbol("emittedEnd"),Bh=Symbol("emittingEnd"),hu=Symbol("emittedError"),Vh=Symbol("closed"),rL=Symbol("read"),Wh=Symbol("flush"),nL=Symbol("flushChunk"),On=Symbol("encoding"),dc=Symbol("decoder"),Ot=Symbol("flowing"),yu=Symbol("paused"),gc=Symbol("resume"),Nt=Symbol("buffer"),gr=Symbol("pipes"),Ut=Symbol("bufferLength"),zv=Symbol("bufferPush"),$h=Symbol("bufferShift"),ir=Symbol("objectMode"),wt=Symbol("destroyed"),qv=Symbol("error"),Gv=Symbol("emitData"),iL=Symbol("emitEnd"),Kv=Symbol("emitEnd2"),ii=Symbol("async"),Qv=Symbol("abort"),jh=Symbol("aborted"),Tu=Symbol("signal"),Aa=Symbol("dataListeners"),Kr=Symbol("discarded"),xu=t=>Promise.resolve().then(t),Y7=t=>t(),Z7=t=>t==="end"||t==="finish"||t==="prefinish",X7=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,J7=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),zh=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[gc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Yv=class extends zh{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},e8=t=>!!t.objectMode,t8=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Ao=class extends qh.EventEmitter{[Ot]=!1;[yu]=!1;[gr]=[];[Nt]=[];[ir];[On];[ii];[dc];[Ii]=!1;[ko]=!1;[Bh]=!1;[Vh]=!1;[hu]=null;[Ut]=0;[wt]=!1;[Tu];[jh]=!1;[Aa]=0;[Kr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");e8(r)?(this[ir]=!0,this[On]=null):t8(r)?(this[On]=r.encoding,this[ir]=!1):(this[ir]=!1,this[On]=null),this[ii]=!!r.async,this[dc]=this[On]?new oL.StringDecoder(this[On]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Nt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[gr]});let{signal:n}=r;n&&(this[Tu]=n,n.aborted?this[Qv]():n.addEventListener("abort",()=>this[Qv]()))}get bufferLength(){return this[Ut]}get encoding(){return this[On]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[ir]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ii]}set async(e){this[ii]=this[ii]||!!e}[Qv](){this[jh]=!0,this.emit("abort",this[Tu]?.reason),this.destroy(this[Tu]?.reason)}get aborted(){return this[jh]}set aborted(e){}write(e,r,n){if(this[jh])return!1;if(this[Ii])throw new Error("write after end");if(this[wt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ii]?xu:Y7;if(!this[ir]&&!Buffer.isBuffer(e)){if(J7(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(X7(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[ir]?(this[Ot]&&this[Ut]!==0&&this[Wh](!0),this[Ot]?this.emit("data",e):this[zv](e),this[Ut]!==0&&this.emit("readable"),n&&i(n),this[Ot]):e.length?(typeof e=="string"&&!(r===this[On]&&!this[dc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[On]&&(e=this[dc].write(e)),this[Ot]&&this[Ut]!==0&&this[Wh](!0),this[Ot]?this.emit("data",e):this[zv](e),this[Ut]!==0&&this.emit("readable"),n&&i(n),this[Ot]):(this[Ut]!==0&&this.emit("readable"),n&&i(n),this[Ot])}read(e){if(this[wt])return null;if(this[Kr]=!1,this[Ut]===0||e===0||e&&e>this[Ut])return this[Ci](),null;this[ir]&&(e=null),this[Nt].length>1&&!this[ir]&&(this[Nt]=[this[On]?this[Nt].join(""):Buffer.concat(this[Nt],this[Ut])]);let r=this[rL](e||null,this[Nt][0]);return this[Ci](),r}[rL](e,r){if(this[ir])this[$h]();else{let n=r;e===n.length||e===null?this[$h]():typeof n=="string"?(this[Nt][0]=n.slice(e),r=n.slice(0,e),this[Ut]-=e):(this[Nt][0]=n.subarray(e),r=n.subarray(0,e),this[Ut]-=e)}return this.emit("data",r),!this[Nt].length&&!this[Ii]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Ii]=!0,this.writable=!1,(this[Ot]||!this[yu])&&this[Ci](),this}[gc](){this[wt]||(!this[Aa]&&!this[gr].length&&(this[Kr]=!0),this[yu]=!1,this[Ot]=!0,this.emit("resume"),this[Nt].length?this[Wh]():this[Ii]?this[Ci]():this.emit("drain"))}resume(){return this[gc]()}pause(){this[Ot]=!1,this[yu]=!0,this[Kr]=!1}get destroyed(){return this[wt]}get flowing(){return this[Ot]}get paused(){return this[yu]}[zv](e){this[ir]?this[Ut]+=1:this[Ut]+=e.length,this[Nt].push(e)}[$h](){return this[ir]?this[Ut]-=1:this[Ut]-=this[Nt][0].length,this[Nt].shift()}[Wh](e=!1){do;while(this[nL](this[$h]())&&this[Nt].length);!e&&!this[Nt].length&&!this[Ii]&&this.emit("drain")}[nL](e){return this.emit("data",e),this[Ot]}pipe(e,r){if(this[wt])return e;this[Kr]=!1;let n=this[ko];return r=r||{},e===tL.stdout||e===tL.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[gr].push(r.proxyErrors?new Yv(this,e,r):new zh(this,e,r)),this[ii]?xu(()=>this[gc]()):this[gc]()),e}unpipe(e){let r=this[gr].find(n=>n.dest===e);r&&(this[gr].length===1?(this[Ot]&&this[Aa]===0&&(this[Ot]=!1),this[gr]=[]):this[gr].splice(this[gr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Kr]=!1,this[Aa]++,!this[gr].length&&!this[Ot]&&this[gc]();else if(e==="readable"&&this[Ut]!==0)super.emit("readable");else if(Z7(e)&&this[ko])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[hu]){let i=r;this[ii]?xu(()=>i.call(this,this[hu])):i.call(this,this[hu])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Aa]=this.listeners("data").length,this[Aa]===0&&!this[Kr]&&!this[gr].length&&(this[Ot]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Aa]=0,!this[Kr]&&!this[gr].length&&(this[Ot]=!1)),r}get emittedEnd(){return this[ko]}[Ci](){!this[Bh]&&!this[ko]&&!this[wt]&&this[Nt].length===0&&this[Ii]&&(this[Bh]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Vh]&&this.emit("close"),this[Bh]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==wt&&this[wt])return!1;if(e==="data")return!this[ir]&&!n?!1:this[ii]?(xu(()=>this[Gv](n)),!0):this[Gv](n);if(e==="end")return this[iL]();if(e==="close"){if(this[Vh]=!0,!this[ko]&&!this[wt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[hu]=n,super.emit(qv,n);let o=!this[Tu]||this.listeners("error").length?super.emit("error",n):!1;return this[Ci](),o}else if(e==="resume"){let o=super.emit("resume");return this[Ci](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Ci](),i}[Gv](e){for(let n of this[gr])n.dest.write(e)===!1&&this.pause();let r=this[Kr]?!1:super.emit("data",e);return this[Ci](),r}[iL](){return this[ko]?!1:(this[ko]=!0,this.readable=!1,this[ii]?(xu(()=>this[Kv]()),!0):this[Kv]())}[Kv](){if(this[dc]){let r=this[dc].end();if(r){for(let n of this[gr])n.dest.write(r);this[Kr]||super.emit("data",r)}}for(let r of this[gr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[ir]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[ir]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[ir])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[On]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(wt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Kr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Ii])return r();let o,s,l=g=>{this.off("data",u),this.off("end",m),this.off(wt,d),r(),s(g)},u=g=>{this.off("error",l),this.off("end",m),this.off(wt,d),this.pause(),o({value:g,done:!!this[Ii]})},m=()=>{this.off("error",l),this.off("data",u),this.off(wt,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((g,y)=>{s=y,o=g,this.once(wt,d),this.once("error",l),this.once("end",m),this.once("data",u)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Kr]=!1;let e=!1,r=()=>(this.pause(),this.off(qv,r),this.off(wt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(qv,r),this.once(wt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[wt])return e?this.emit("error",e):this.emit(wt),this;this[wt]=!0,this[Kr]=!0,this[Nt].length=0,this[Ut]=0;let r=this;return typeof r.close=="function"&&!this[Vh]&&r.close(),e?this.emit("error",e):this.emit(wt),this}static get isStream(){return G7}};var n8=ai.realpathSync.native,vu={lstatSync:ai.lstatSync,readdir:ai.readdir,readdirSync:ai.readdirSync,readlinkSync:ai.readlinkSync,realpathSync:n8,promises:{lstat:Po.lstat,readdir:Po.readdir,readlink:Po.readlink,realpath:Po.realpath}},pL=t=>!t||t===vu||t===r8?vu:{...vu,...t,promises:{...vu.promises,...t.promises||{}}},mL=/^\\\\\?\\([a-z]:)\\?$/i,i8=t=>t.replace(/\//g,"\\").replace(mL,"$1\\"),o8=/[\\\/]/,Sn=0,fL=1,dL=2,oi=4,gL=6,hL=8,Pa=10,yL=12,xn=15,Su=~xn,Xv=16,aL=32,bu=64,Nn=128,Gh=256,Qh=512,sL=bu|Nn|Qh,a8=1023,Jv=t=>t.isFile()?hL:t.isDirectory()?oi:t.isSymbolicLink()?Pa:t.isCharacterDevice()?dL:t.isBlockDevice()?gL:t.isSocket()?yL:t.isFIFO()?fL:Sn,cL=new Map,wu=t=>{let e=cL.get(t);if(e)return e;let r=t.normalize("NFKD");return cL.set(t,r),r},lL=new Map,Kh=t=>{let e=lL.get(t);if(e)return e;let r=wu(t.toLowerCase());return lL.set(t,r),r},Yh=class extends gu{constructor(){super({max:256})}},eb=class extends gu{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},TL=Symbol("PathScurry setAsCwd"),or=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#p;get blksize(){return this.#p}#s;get ino(){return this.#s}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#h;get atimeMs(){return this.#h}#y;get mtimeMs(){return this.#y}#f;get ctimeMs(){return this.#f}#m;get birthtimeMs(){return this.#m}#w;get atime(){return this.#w}#g;get mtime(){return this.#g}#E;get ctime(){return this.#E}#_;get birthtime(){return this.#_}#x;#v;#b;#d;#P;#R;#r;#F;#T;#M;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=Sn,n,i,o,s,l){this.name=e,this.#x=o?Kh(e):wu(e),this.#r=r&a8,this.nocase=o,this.roots=i,this.root=n||this,this.#F=s,this.#b=l.fullpath,this.#P=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=pL(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#F}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#L(i):this.#L(i)}#L(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#F.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#F.set(this,r),this.#r&=~Xv,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Kh(e):wu(e);for(let u of n)if(u.#x===i)return u;let o=this.parent?this.sep:"",s=this.#b?this.#b+o+e:void 0,l=this.newChild(e,Sn,{...r,parent:this,fullpath:s});return this.canReaddir()||(l.#r|=Nn),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#P!==void 0)return this.#P;let e=this.name,r=this.parent;if(!r)return this.#P=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#d!==void 0)return this.#d;if(this.sep==="/")return this.#d=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#d=`//?/${i}`:this.#d=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#d=n}isUnknown(){return(this.#r&xn)===Sn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&xn)===hL}isDirectory(){return(this.#r&xn)===oi}isCharacterDevice(){return(this.#r&xn)===dL}isBlockDevice(){return(this.#r&xn)===gL}isFIFO(){return(this.#r&xn)===fL}isSocket(){return(this.#r&xn)===yL}isSymbolicLink(){return(this.#r&Pa)===Pa}lstatCached(){return this.#r&aL?this:void 0}readlinkCached(){return this.#T}realpathCached(){return this.#M}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#T)return!0;if(!this.parent)return!1;let e=this.#r&xn;return!(e!==Sn&&e!==Pa||this.#r&Gh||this.#r&Nn)}calledReaddir(){return!!(this.#r&Xv)}isENOENT(){return!!(this.#r&Nn)}isNamed(e){return this.nocase?this.#x===Kh(e):this.#x===wu(e)}async readlink(){let e=this.#T;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#T=n}catch(r){this.#u(r.code);return}}readlinkSync(){let e=this.#T;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#T=n}catch(r){this.#u(r.code);return}}#I(e){this.#r|=Xv;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#C()}}#C(){this.#r&Nn||(this.#r=(this.#r|Nn)&Su,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#C()}#A(){this.#r|=Qh,this.#O()}#O(){if(this.#r&bu)return;let e=this.#r;(e&xn)===oi&&(e&=Su),this.#r=e|bu,this.#k()}#N(e=""){e==="ENOTDIR"||e==="EPERM"?this.#O():e==="ENOENT"?this.#C():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#O():e==="ENOENT"&&this.#C()}#u(e=""){let r=this.#r;r|=Gh,e==="ENOENT"&&(r|=Nn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=Su),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#O()}#H(e,r){return this.#D(e,r)||this.#B(e,r)}#B(e,r){let n=Jv(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&xn;return o!==oi&&o!==Pa&&o!==Sn&&(i.#r|=bu),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Kh(e.name):wu(e.name))===i.#x)return this.#V(e,i,n,r)}}#V(e,r,n,i){let o=r.name;return r.#r=r.#r&Su|Jv(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if((this.#r&Nn)===0)try{return this.#z(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if((this.#r&Nn)===0)try{return this.#z(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#z(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:s,blocks:l,ctime:u,ctimeMs:m,dev:d,gid:g,ino:y,mode:x,mtime:w,mtimeMs:E,nlink:U,rdev:V,size:z,uid:ne}=e;this.#w=r,this.#h=n,this.#_=i,this.#m=o,this.#p=s,this.#i=l,this.#E=u,this.#f=m,this.#t=d,this.#S=g,this.#s=y,this.#o=x,this.#g=w,this.#y=E,this.#n=U,this.#l=V,this.#c=z,this.#a=ne;let se=Jv(e);this.#r=this.#r&Su|se|aL,se!==Sn&&se!==oi&&se!==Pa&&(this.#r|=bu)}#$=[];#j=!1;#q(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,s)=>{if(o)this.#N(o.code),n.provisional=0;else{for(let l of s)this.#H(l,n);this.#I(n)}this.#q(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#I(e)}catch(i){this.#N(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#I(e)}catch(n){this.#N(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&sL)return!1;let e=xn&this.#r;return e===Sn||e===oi||e===Pa}shouldWalk(e,r){return(this.#r&oi)===oi&&!(this.#r&sL)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#M)return this.#M;if(!((Qh|Gh|Nn)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#M=this.resolve(e)}catch{this.#A()}}realpathSync(){if(this.#M)return this.#M;if(!((Qh|Gh|Nn)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#M=this.resolve(e)}catch{this.#A()}}[TL](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#P=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#P=void 0,i.#R=void 0,i=i.parent}},Zh=class t extends or{sep="\\";splitSep=o8;constructor(e,r=Sn,n,i,o,s,l){super(e,r,n,i,o,s,l)}newChild(e,r=Sn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return hc.win32.parse(e).root}getRoot(e){if(e=i8(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new yc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(mL,"$1\\"),e===r}},Xh=class t extends or{splitSep="/";sep="/";constructor(e,r=Sn,n,i,o,s,l){super(e,r,n,i,o,s,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=Sn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},Jh=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:s=vu}={}){this.#n=pL(s),(e instanceof URL||e.startsWith("file://"))&&(e=(0,uL.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new Yh,this.#t=new Yh,this.#o=new eb(o);let u=l.substring(this.rootPath.length).split(n);if(u.length===1&&!u[0]&&u.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let m=this.root,d=u.length-1,g=r.sep,y=this.rootPath,x=!1;for(let w of u){let E=d--;m=m.child(w,{relative:new Array(E).fill("..").join(g),relativePosix:new Array(E).fill("..").join("/"),fullpath:y+=(x?"":g)+w}),x=!0}this.cwd=m}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set,m=(g,y)=>{u.add(g),g.readdirCB((x,w)=>{if(x)return y(x);let E=w.length;if(!E)return y();let U=()=>{--E===0&&y()};for(let V of w)(!o||o(V))&&l.push(n?V:V.fullpath()),i&&V.isSymbolicLink()?V.realpath().then(z=>z?.isUnknown()?z.lstat():z).then(z=>z?.shouldWalk(u,s)?m(z,U):U()):V.shouldWalk(u,s)?m(V,U):U()},!0)},d=e;return new Promise((g,y)=>{m(d,x=>{if(x)return y(x);g(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set([e]);for(let m of u){let d=m.readdirSync();for(let g of d){(!o||o(g))&&l.push(n?g:g.fullpath());let y=g;if(g.isSymbolicLink()){if(!(i&&(y=g.realpathSync())))continue;y.isUnknown()&&y.lstatSync()}y.shouldWalk(u,s)&&u.add(y)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let u of l){let m=u.readdirSync();for(let d of m){(!o||o(d))&&(yield n?d:d.fullpath());let g=d;if(d.isSymbolicLink()){if(!(i&&(g=d.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(l,s)&&l.add(g)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Ao({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let u=new Set,m=[e],d=0,g=()=>{let y=!1;for(;!y;){let x=m.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let w=(U,V,z=!1)=>{if(U)return l.emit("error",U);if(i&&!z){let ne=[];for(let se of V)se.isSymbolicLink()&&ne.push(se.realpath().then(ce=>ce?.isUnknown()?ce.lstat():ce));if(ne.length){Promise.all(ne).then(()=>w(null,V,!0));return}}for(let ne of V)ne&&(!o||o(ne))&&(l.write(n?ne:ne.fullpath())||(y=!0));d--;for(let ne of V){let se=ne.realpathCached()||ne;se.shouldWalk(u,s)&&m.push(se)}y&&!l.flowing?l.once("drain",g):E||g()},E=!0;x.readdirCB(w,!0),E=!1}};return g(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Ao({objectMode:!0}),u=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let m=[e],d=0,g=()=>{let y=!1;for(;!y;){let x=m.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let w=x.readdirSync();for(let E of w)(!o||o(E))&&(l.write(n?E:E.fullpath())||(y=!0));d--;for(let E of w){let U=E;if(E.isSymbolicLink()){if(!(i&&(U=E.realpathSync())))continue;U.isUnknown()&&U.lstatSync()}U.shouldWalk(u,s)&&m.push(U)}}y&&!l.flowing&&l.once("drain",g)};return g(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[TL](r)}},yc=class extends Jh{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,hc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return hc.win32.parse(e).root.toUpperCase()}newRoot(e){return new Zh(this.rootPath,oi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},Tc=class extends Jh{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,hc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Xh(this.rootPath,oi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},Eu=class extends Tc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},sOe=process.platform==="win32"?Zh:Xh,xL=process.platform==="win32"?yc:process.platform==="darwin"?Eu:Tc;var s8=t=>t.length>=1,c8=t=>t.length>=1,xc=class t{#e;#t;#o;length;#n;#a;#S;#l;#p;#s;#c=!0;constructor(e,r,n,i){if(!s8(e))throw new TypeError("empty pattern list");if(!c8(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,s,l,u,...m]=this.#e,[d,g,y,x,...w]=this.#t;m[0]===""&&(m.shift(),w.shift());let E=[o,s,l,u,""].join("/"),U=[d,g,y,x,""].join("/");this.#e=[E,...m],this.#t=[U,...w],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...s]=this.#e,[l,...u]=this.#t;s[0]===""&&(s.shift(),u.shift());let m=o+"/",d=l+"/";this.#e=[m,...s],this.#t=[d,...u],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Yt}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new t(this.#e,this.#t,this.#o+1,this.#n),this.#a.#s=this.#s,this.#a.#p=this.#p,this.#a.#l=this.#l,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#p!==void 0?this.#p:this.#p=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#s!==void 0?this.#s:this.#s=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var l8=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Sc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:s=l8}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=s,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new Gr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let s=new xc(i,o,0,this.platform),l=new Gr(s.globString(),this.mmopts),u=o[o.length-1]==="**",m=s.isAbsolute();m?this.absolute.push(l):this.relative.push(l),u&&(m?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let s of this.relative)if(s.match(i)||s.match(o))return!0;for(let s of this.absolute)if(s.match(r)||s.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var tb=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},rb=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},nb=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},_u=class t{hasWalkedCache;matches=new rb;subwalks=new nb;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new tb}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let s=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(s){i=i.resolve(s==="/"&&this.opts.root!==void 0?this.opts.root:s);let g=o.rest();if(g)o=g;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let u,m,d=!1;for(;typeof(u=o.pattern())=="string"&&(m=o.rest());)i=i.resolve(u),o=m,d=!0;if(u=o.pattern(),m=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof u=="string"){let g=u===".."||u===""||u===".";this.matches.add(i.resolve(u),l,g);continue}else if(u===Yt){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let g=m?.pattern(),y=m?.rest();if(!m||(g===""||g===".")&&!y)this.matches.add(i,l,g===""||g===".");else if(g===".."){let x=i.parent||i;y?this.hasWalkedCache.hasWalked(x,y)||this.subwalks.add(x,y):this.matches.add(x,l,!0)}}else u instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let s of n){let l=s.isAbsolute(),u=s.pattern(),m=s.rest();u===Yt?i.testGlobstar(o,s,m,l):u instanceof RegExp?i.testRegExp(o,u,m,l):i.testString(o,u,m,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let s=e.parent||e;this.subwalks.add(s,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var u8=(t,e)=>typeof t=="string"?new Sc([t],e):Array.isArray(t)?new Sc(t,e):t,ey=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=u8(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#a(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=await o.realpath();s&&(s.isUnknown()||this.opts.stat)&&await s.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=o.realpathSync();s&&(s?.isUnknown()||this.opts.stat)&&s.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),s=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?s+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new _u(this.opts),n)}walkCB2(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,m).then(()=>s()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirCached();l.calledReaddir()?this.walkCB3(l,u,n,s):l.readdirCB((m,d)=>this.walkCB3(l,d,n,s),!0)}s()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,m).then(()=>s()));for(let[l,u]of n.subwalks.entries())o++,this.walkCB2(l,u,n.child(),s);s()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new _u(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||this.matchSync(l,u,m);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirSync();this.walkCB3Sync(l,u,n,s)}s()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||this.matchSync(l,u,m);for(let[l,u]of n.subwalks.entries())o++,this.walkCB2Sync(l,u,n.child(),s);s()}},Ru=class extends ey{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},ku=class extends ey{results;constructor(e,r,n){super(e,r,n),this.results=new Ao({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var p8=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Un=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,SL.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(u=>u.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(u=>u.includes("/")?u:`./**/${u}`)}if(this.pattern=e,this.platform=r.platform||p8,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let u=r.platform==="win32"?yc:r.platform==="darwin"?Eu:r.platform?Tc:xL;this.scurry=new u(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(u=>new Gr(u,i)),[s,l]=o.reduce((u,m)=>(u[0].push(...m.set),u[1].push(...m.globParts),u),[[],[]]);this.patterns=s.map((u,m)=>{let d=l[m];if(!d)throw new Error("invalid pattern object");return new xc(u,d,0,this.platform)})}async walk(){return[...await new Ru(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Ru(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new ku(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new ku(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var ib=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Gr(r,e).hasMagic())return!0;return!1};function ty(t,e={}){return new Un(t,e).streamSync()}function bL(t,e={}){return new Un(t,e).stream()}function wL(t,e={}){return new Un(t,e).walkSync()}async function vL(t,e={}){return new Un(t,e).walk()}function ry(t,e={}){return new Un(t,e).iterateSync()}function EL(t,e={}){return new Un(t,e).iterate()}var m8=ty,f8=Object.assign(bL,{sync:ty}),d8=ry,g8=Object.assign(EL,{sync:ry}),h8=Object.assign(wL,{stream:ty,iterate:ry}),ob=Object.assign(vL,{glob:vL,globSync:wL,sync:h8,globStream:bL,stream:f8,globStreamSync:ty,streamSync:m8,globIterate:EL,iterate:g8,globIterateSync:ry,iterateSync:d8,Glob:Un,hasMagic:ib,escape:pc,unescape:Cn});ob.glob=ob;function _L(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var CL=Object.defineProperty,x8=Object.getOwnPropertyNames,O=(t,e)=>CL(t,"name",{value:e,configurable:!0}),S8=(t,e)=>function(){return e||(0,t[x8(t)[0]])((e={exports:{}}).exports,e),e.exports},bb=(t,e)=>{for(var r in e)CL(t,r,{get:e[r],enumerable:!0})},v8=S8({"(disabled):util"(){}}),ny={};bb(ny,{addChainableMethod:()=>Ib,addLengthGuard:()=>Fu,addMethod:()=>Db,addProperty:()=>Mb,checkError:()=>Qr,compareByInspect:()=>sy,eql:()=>lI,expectTypes:()=>$L,flag:()=>ke,getActual:()=>fy,getMessage:()=>_b,getName:()=>gy,getOperator:()=>Ub,getOwnEnumerableProperties:()=>Nb,getOwnEnumerablePropertySymbols:()=>Ob,getPathInfo:()=>Pb,hasProperty:()=>dy,inspect:()=>$e,isNaN:()=>cy,isNumeric:()=>Ht,isProxyEnabled:()=>Du,isRegExp:()=>ly,objDisplay:()=>Ma,overwriteChainableMethod:()=>Cb,overwriteMethod:()=>Lb,overwriteProperty:()=>Fb,proxify:()=>Ec,test:()=>wb,transferFlags:()=>Hn,type:()=>Xe});var Qr={};bb(Qr,{compatibleConstructor:()=>UL,compatibleInstance:()=>NL,compatibleMessage:()=>HL,getConstructorName:()=>BL,getMessage:()=>VL});function my(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}O(my,"isErrorInstance");function OL(t){return Object.prototype.toString.call(t)==="[object RegExp]"}O(OL,"isRegExp");function NL(t,e){return my(e)&&t===e}O(NL,"compatibleInstance");function UL(t,e){return my(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}O(UL,"compatibleConstructor");function HL(t,e){let r=typeof t=="string"?t:t.message;return OL(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}O(HL,"compatibleMessage");function BL(t){let e=t;return my(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}O(BL,"getConstructorName");function VL(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}O(VL,"getMessage");function ke(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}O(ke,"flag");function wb(t,e){var r=ke(t,"negate"),n=e[0];return r?!n:n}O(wb,"test");function Xe(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}O(Xe,"type");var b8="captureStackTrace"in Error,ze=class WL extends Error{static{O(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,b8&&Error.captureStackTrace(this,n||WL);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function $L(t,e){var r=ke(t,"message"),n=ke(t,"ssfi");r=r?r+": ":"",t=ke(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();var i=e.map(function(s,l){var u=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a",m=e.length>1&&l===e.length-1?"or ":"";return m+u+" "+s}).join(", "),o=Xe(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new ze(r+"object tested must be "+i+", but "+o+" given",void 0,n)}O($L,"expectTypes");function fy(t,e){return e.length>4?e[4]:t._obj}O(fy,"getActual");var RL={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},w8={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},bc="\u2026";function jL(t,e){let r=RL[w8[e]]||RL[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}O(jL,"colorise");function zL({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:l=[],truncate:u=1/0,stylize:m=String}={},d){let g={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(u),seen:l,inspect:d,stylize:m};return g.colors&&(g.stylize=jL),g}O(zL,"normaliseOptions");function qL(t){return t>="\uD800"&&t<="\uDBFF"}O(qL,"isHighSurrogate");function Oi(t,e,r=bc){t=String(t);let n=r.length,i=t.length;if(n>e&&i>n)return r;if(i>e&&i>n){let o=e-n;return o>0&&qL(t[o-1])&&(o=o-1),`${t.slice(0,o)}${r}`}return t}O(Oi,"truncate");function vn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",l="",u="";for(let m=0;m<i;m+=1){let d=m+1===t.length,g=m+2===t.length;u=`${bc}(${t.length-m})`;let y=t[m];e.truncate=o-s.length-(d?0:n.length);let x=l||r(y,e)+(d?"":n),w=s.length+x.length,E=w+u.length;if(d&&w>o&&s.length+u.length<=o||!d&&!g&&E>o||(l=d?"":r(t[m+1],e)+(g?"":n),!d&&g&&E>o&&w+l.length>o))break;if(s+=x,!d&&!g&&w+l.length>=o){u=`${bc}(${t.length-m-1})`;break}u=""}return`${s}${u}`}O(vn,"inspectList");function GL(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}O(GL,"quoteComplexKey");function wc([t,e],r){return r.truncate-=2,typeof t=="string"?t=GL(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}O(wc,"inspectProperty");function KL(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=vn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=vn(r.map(o=>[o,t[o]]),e,wc)),`[ ${n}${i?`, ${i}`:""} ]`}O(KL,"inspectArray");var E8=O(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function si(t,e){let r=E8(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let s=0;s<t.length;s++){let l=`${e.stylize(Oi(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=l.length,t[s]!==t.length&&e.truncate<=3){i+=`${bc}(${t.length-t[s]+1})`;break}i+=l}let o="";return n.length&&(o=vn(n.map(s=>[s,t[s]]),e,wc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}O(si,"inspectTypedArray");function QL(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Oi(n[1],e.truncate-i.length-1)}`,"date")}O(QL,"inspectDate");function cb(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Oi(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}O(cb,"inspectFunction");function YL([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}O(YL,"inspectMapEntry");function ZL(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}O(ZL,"mapToEntries");function XL(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${vn(ZL(t),e,YL)} }`)}O(XL,"inspectMap");var _8=Number.isNaN||(t=>t!==t);function lb(t,e){return _8(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Oi(String(t),e.truncate),"number")}O(lb,"inspectNumber");function ub(t,e){let r=Oi(t.toString(),e.truncate-1);return r!==bc&&(r+="n"),e.stylize(r,"bigint")}O(ub,"inspectBigInt");function JL(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Oi(i,n)}/${r}`,"regexp")}O(JL,"inspectRegExp");function eI(t){let e=[];return t.forEach(r=>{e.push(r)}),e}O(eI,"arrayFromSet");function tI(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${vn(eI(t),e)} }`)}O(tI,"inspectSet");var kL=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),R8={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},k8=16,A8=4;function rI(t){return R8[t]||`\\u${`0000${t.charCodeAt(0).toString(k8)}`.slice(-A8)}`}O(rI,"escape");function pb(t,e){return kL.test(t)&&(t=t.replace(kL,rI)),e.stylize(`'${Oi(t,e.truncate-2)}'`,"string")}O(pb,"inspectString");function mb(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}O(mb,"inspectSymbol");var nI=O(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(nI=O((n,i)=>{let[o,s]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(s,i)}}`},"getPromiseValue"))}catch{}var P8=nI;function Pu(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let i=vn(r.map(l=>[l,t[l]]),e,wc),o=vn(n.map(l=>[l,t[l]]),e,wc);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}O(Pu,"inspectObject");var ab=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function iI(t,e){let r="";return ab&&ab in t&&(r=t[ab]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Pu(t,e)}`}O(iI,"inspectClass");function oI(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${vn(t,e)} ]`)}O(oI,"inspectArguments");var M8=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description","cause"];function aI(t,e){let r=Object.getOwnPropertyNames(t).filter(s=>M8.indexOf(s)===-1),n=t.name;e.truncate-=n.length;let i="";if(typeof t.message=="string"?i=Oi(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let o=vn(r.map(s=>[s,t[s]]),e,wc);return`${n}${i}${o?` { ${o} }`:""}`}O(aI,"inspectObject");function sI([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}O(sI,"inspectAttribute");function iy(t,e){return vn(t,e,Eb,`
`)}O(iy,"inspectHTMLCollection");function Eb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=vn(r.map(d=>[d,t.getAttribute(d)]),e,sI," ")),e.truncate-=l.length;let u=e.truncate,m=iy(t.children,e);return m&&m.length>u&&(m=`${bc}(${t.children.length})`),`${i}${l}${o}${m}${s}`}O(Eb,"inspectHTML");var D8=typeof Symbol=="function"&&typeof Symbol.for=="function",sb=D8?Symbol.for("chai/inspect"):"@@chai/inspect",vc=!1;try{let t=v8();vc=t.inspect?t.inspect.custom:!1}catch{vc=!1}var AL=new WeakMap,PL={},ML={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:lb,Number:lb,bigint:ub,BigInt:ub,string:pb,String:pb,function:cb,Function:cb,symbol:mb,Symbol:mb,Array:KL,Date:QL,Map:XL,Set:tI,RegExp:JL,Promise:P8,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:oI,Int8Array:si,Uint8Array:si,Uint8ClampedArray:si,Int16Array:si,Uint16Array:si,Int32Array:si,Uint32Array:si,Float32Array:si,Float64Array:si,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:aI,HTMLCollection:iy,NodeList:iy},F8=O((t,e,r)=>sb in t&&typeof t[sb]=="function"?t[sb](e):vc&&vc in t&&typeof t[vc]=="function"?t[vc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&AL.has(t.constructor)?AL.get(t.constructor)(t,e):PL[r]?PL[r](t,e):"","inspectCustom"),L8=Object.prototype.toString;function oy(t,e={}){let r=zL(e,oy),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=L8.call(t).slice(8,-1)),i in ML)return ML[i](t,r);if(n&&t){let s=F8(t,r,i);if(s)return typeof s=="string"?s:oy(s,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Pu(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?Eb(t,r):"constructor"in t?t.constructor!==Object?iI(t,r):Pu(t,r):t===Object(t)?Pu(t,r):r.stylize(String(t),i)}O(oy,"inspect");var hr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function $e(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:hr.truncateThreshold?hr.truncateThreshold:1/0};return oy(t,i)}O($e,"inspect");function Ma(t){var e=$e(t),r=Object.prototype.toString.call(t);if(hr.truncateThreshold&&e.length>=hr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}O(Ma,"objDisplay");function _b(t,e){var r=ke(t,"negate"),n=ke(t,"object"),i=e[3],o=fy(t,e),s=r?e[2]:e[1],l=ke(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return Ma(n)}).replace(/#\{act\}/g,function(){return Ma(o)}).replace(/#\{exp\}/g,function(){return Ma(i)}),l?l+": "+s:s}O(_b,"getMessage");function Hn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}O(Hn,"transferFlags");function fb(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}O(fb,"type");function Rb(){this._key="chai/deep-eql__"+Math.random()+Date.now()}O(Rb,"FakeMap");Rb.prototype={get:O(function(e){return e[this._key]},"get"),set:O(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var cI=typeof WeakMap=="function"?WeakMap:Rb;function db(t,e,r){if(!r||Da(t)||Da(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}O(db,"memoizeCompare");function Au(t,e,r,n){if(!(!r||Da(t)||Da(e))){var i=r.get(t);i?i.set(e,n):(i=new cI,i.set(e,n),r.set(t,i))}}O(Au,"memoizeSet");var lI=Mu;function Mu(t,e,r){if(r&&r.comparator)return gb(t,e,r);var n=kb(t,e);return n!==null?n:gb(t,e,r)}O(Mu,"deepEqual");function kb(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:Da(t)||Da(e)?!1:null}O(kb,"simpleEqual");function gb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new cI;var n=r&&r.comparator,i=db(t,e,r.memoize);if(i!==null)return i;var o=db(e,t,r.memoize);if(o!==null)return o;if(n){var s=n(t,e);if(s===!1||s===!0)return Au(t,e,r.memoize,s),s;var l=kb(t,e);if(l!==null)return l}var u=fb(t);if(u!==fb(e))return Au(t,e,r.memoize,!1),!1;Au(t,e,r.memoize,!0);var m=uI(t,e,u,r);return Au(t,e,r.memoize,m),m}O(gb,"extensiveDeepEqual");function uI(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Mu(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return Ab(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Mo(t,e,n);case"RegExp":return pI(t,e);case"Generator":return mI(t,e,n);case"DataView":return Mo(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return Mo(new Uint8Array(t),new Uint8Array(e),n);case"Set":return hb(t,e,n);case"Map":return hb(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return dI(t,e,n)}}O(uI,"extensiveDeepEqualByType");function pI(t,e){return t.toString()===e.toString()}O(pI,"regexpEqual");function hb(t,e,r){try{if(t.size!==e.size)return!1;if(t.size===0)return!0}catch{return!1}var n=[],i=[];return t.forEach(O(function(s,l){n.push([s,l])},"gatherEntries")),e.forEach(O(function(s,l){i.push([s,l])},"gatherEntries")),Mo(n.sort(),i.sort(),r)}O(hb,"entriesEqual");function Mo(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Mu(t[i],e[i],r)===!1)return!1;return!0}O(Mo,"iterableEqual");function mI(t,e,r){return Mo(ay(t),ay(e),r)}O(mI,"generatorEqual");function fI(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}O(fI,"hasIteratorFunction");function yb(t){if(fI(t))try{return ay(t[Symbol.iterator]())}catch{return[]}return[]}O(yb,"getIteratorEntries");function ay(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}O(ay,"getGeneratorEntries");function Tb(t){var e=[];for(var r in t)e.push(r);return e}O(Tb,"getEnumerableKeys");function xb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}O(xb,"getEnumerableSymbols");function Ab(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Mu(t[r[o]],e[r[o]],n)===!1)return!1;return!0}O(Ab,"keysEqual");function dI(t,e,r){var n=Tb(t),i=Tb(e),o=xb(t),s=xb(e);if(n=n.concat(o),i=i.concat(s),n.length&&n.length===i.length)return Mo(Sb(n).sort(),Sb(i).sort())===!1?!1:Ab(t,e,n,r);var l=yb(t),u=yb(e);return l.length&&l.length===u.length?(l.sort(),u.sort(),Mo(l,u,r)):n.length===0&&l.length===0&&i.length===0&&u.length===0}O(dI,"objectEqual");function Da(t){return t===null||typeof t!="object"}O(Da,"isPrimitive");function Sb(t){return t.map(O(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}O(Sb,"mapSymbols");function dy(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}O(dy,"hasProperty");function gI(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),s=null;return o?s={i:parseFloat(o[1])}:s={p:n.replace(/\\([.[\]])/g,"$1")},s})}O(gI,"parsePath");function vb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let s=e[o];n&&(typeof s.p>"u"?n=n[s.i]:n=n[s.p],o===r-1&&(i=n))}return i}O(vb,"internalGetPathValue");function Pb(t,e){let r=gI(e),n=r[r.length-1],i={parent:r.length>1?vb(t,r,r.length-1):t,name:n.p||n.i,value:vb(t,r)};return i.exists=dy(i.parent,i.name),i}O(Pb,"getPathInfo");function b(t,e,r,n){return ke(this,"ssfi",r||b),ke(this,"lockSsfi",n),ke(this,"object",t),ke(this,"message",e),ke(this,"eql",hr.deepEqual||lI),Ec(this)}O(b,"Assertion");Object.defineProperty(b,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),hr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),hr.includeStack=t}});Object.defineProperty(b,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),hr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),hr.showDiff=t}});b.addProperty=function(t,e){Mb(this.prototype,t,e)};b.addMethod=function(t,e){Db(this.prototype,t,e)};b.addChainableMethod=function(t,e,r){Ib(this.prototype,t,e,r)};b.overwriteProperty=function(t,e){Fb(this.prototype,t,e)};b.overwriteMethod=function(t,e){Lb(this.prototype,t,e)};b.overwriteChainableMethod=function(t,e,r){Cb(this.prototype,t,e,r)};b.prototype.assert=function(t,e,r,n,i,o){var s=wb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),hr.showDiff!==!0&&(o=!1),!s){e=_b(this,arguments);var l=fy(this,arguments),u={actual:l,expected:n,showDiff:o},m=Ub(this,arguments);throw m&&(u.operator=m),new ze(e,u,hr.includeStack?this.assert:ke(this,"ssfi"))}};Object.defineProperty(b.prototype,"_obj",{get:function(){return ke(this,"object")},set:function(t){ke(this,"object",t)}});function Du(){return hr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}O(Du,"isProxyEnabled");function Mb(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:O(function n(){!Du()&&!ke(this,"lockSsfi")&&ke(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new b;return Hn(this,o),o},"propertyGetter"),configurable:!0})}O(Mb,"addProperty");var I8=Object.getOwnPropertyDescriptor(function(){},"length");function Fu(t,e,r){return I8.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}O(Fu,"addLengthGuard");function hI(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}O(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}O(hI,"getProperties");var DL=["__flags","__methods","_obj","assert"];function Ec(t,e){return Du()?new Proxy(t,{get:O(function r(n,i){if(typeof i=="string"&&hr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,s=4;throw hI(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&DL.indexOf(l)===-1){var u=yI(i,l,s);u<s&&(o=l,s=u)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return DL.indexOf(i)===-1&&!ke(n,"lockSsfi")&&ke(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}O(Ec,"proxify");function yI(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;var n=[];for(let o=0;o<=t.length;o++)n[o]=Array(e.length+1).fill(0),n[o][0]=o;for(let o=0;o<e.length;o++)n[0][o]=o;for(let o=1;o<=t.length;o++){var i=t.charCodeAt(o-1);for(let s=1;s<=e.length;s++){if(Math.abs(o-s)>=r){n[o][s]=r;continue}n[o][s]=Math.min(n[o-1][s]+1,n[o][s-1]+1,n[o-1][s-1]+(i===e.charCodeAt(s-1)?0:1))}}return n[t.length][e.length]}O(yI,"stringDistanceCapped");function Db(t,e,r){var n=O(function(){ke(this,"lockSsfi")||ke(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new b;return Hn(this,o),o},"methodWrapper");Fu(n,e,!1),t[e]=Ec(n,e)}O(Db,"addMethod");function Fb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=O(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:O(function o(){!Du()&&!ke(this,"lockSsfi")&&ke(this,"ssfi",o);var s=ke(this,"lockSsfi");ke(this,"lockSsfi",!0);var l=r(i).call(this);if(ke(this,"lockSsfi",s),l!==void 0)return l;var u=new b;return Hn(this,u),u},"overwritingPropertyGetter"),configurable:!0})}O(Fb,"overwriteProperty");function Lb(t,e,r){var n=t[e],i=O(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=O(function(){ke(this,"lockSsfi")||ke(this,"ssfi",o);var s=ke(this,"lockSsfi");ke(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(ke(this,"lockSsfi",s),l!==void 0)return l;var u=new b;return Hn(this,u),u},"overwritingMethodWrapper");Fu(o,e,!1),t[e]=Ec(o,e)}O(Lb,"overwriteMethod");var C8=typeof Object.setPrototypeOf=="function",FL=O(function(){},"testFn"),O8=Object.getOwnPropertyNames(FL).filter(function(t){var e=Object.getOwnPropertyDescriptor(FL,t);return typeof e!="object"?!0:!e.configurable}),N8=Function.prototype.call,U8=Function.prototype.apply;function Ib(t,e,r,n){typeof n!="function"&&(n=O(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:O(function(){i.chainingBehavior.call(this);var s=O(function(){ke(this,"lockSsfi")||ke(this,"ssfi",s);var m=i.method.apply(this,arguments);if(m!==void 0)return m;var d=new b;return Hn(this,d),d},"chainableMethodWrapper");if(Fu(s,e,!0),C8){var l=Object.create(this);l.call=N8,l.apply=U8,Object.setPrototypeOf(s,l)}else{var u=Object.getOwnPropertyNames(t);u.forEach(function(m){if(O8.indexOf(m)===-1){var d=Object.getOwnPropertyDescriptor(t,m);Object.defineProperty(s,m,d)}})}return Hn(this,s),Ec(s)},"chainableMethodGetter"),configurable:!0})}O(Ib,"addChainableMethod");function Cb(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=O(function(){var u=n(o).call(this);if(u!==void 0)return u;var m=new b;return Hn(this,m),m},"overwritingChainableMethodGetter");var s=i.method;i.method=O(function(){var u=r(s).apply(this,arguments);if(u!==void 0)return u;var m=new b;return Hn(this,m),m},"overwritingChainableMethodWrapper")}O(Cb,"overwriteChainableMethod");function sy(t,e){return $e(t)<$e(e)?-1:1}O(sy,"compareByInspect");function Ob(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}O(Ob,"getOwnEnumerablePropertySymbols");function Nb(t){return Object.keys(t).concat(Ob(t))}O(Nb,"getOwnEnumerableProperties");var cy=Number.isNaN;function TI(t){var e=Xe(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}O(TI,"isObjectType");function Ub(t,e){var r=ke(t,"operator"),n=ke(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var s=TI(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}}O(Ub,"getOperator");function gy(t){return t.name}O(gy,"getName");function ly(t){return Object.prototype.toString.call(t)==="[object RegExp]"}O(ly,"isRegExp");function Ht(t){return["Number","BigInt"].includes(Xe(t))}O(Ht,"isNumeric");var{flag:M}=ny;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){b.addProperty(t)});b.addProperty("not",function(){M(this,"negate",!0)});b.addProperty("deep",function(){M(this,"deep",!0)});b.addProperty("nested",function(){M(this,"nested",!0)});b.addProperty("own",function(){M(this,"own",!0)});b.addProperty("ordered",function(){M(this,"ordered",!0)});b.addProperty("any",function(){M(this,"any",!0),M(this,"all",!1)});b.addProperty("all",function(){M(this,"all",!0),M(this,"any",!1)});var LL={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function Hb(t,e){e&&M(this,"message",e),t=t.toLowerCase();var r=M(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Xe(r).toLowerCase();LL.function.includes(t)?this.assert(LL[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}O(Hb,"an");b.addChainableMethod("an",Hb);b.addChainableMethod("a",Hb);function xI(t,e){return cy(t)&&cy(e)||t===e}O(xI,"SameValueZero");function Lu(){M(this,"contains",!0)}O(Lu,"includeChainingBehavior");function Iu(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=Xe(r).toLowerCase(),i=M(this,"message"),o=M(this,"negate"),s=M(this,"ssfi"),l=M(this,"deep"),u=l?"deep ":"",m=l?M(this,"eql"):xI;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new ze(i+"unable to use .deep.include with WeakSet",void 0,s);d=r.has(t);break;case"map":r.forEach(function(w){d=d||m(w,t)});break;case"set":l?r.forEach(function(w){d=d||m(w,t)}):d=r.has(t);break;case"array":l?d=r.some(function(w){return m(w,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new ze(i+"the given combination of arguments ("+n+" and "+Xe(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Xe(t).toLowerCase(),void 0,s);var g=Object.keys(t),y=null,x=0;if(g.forEach(function(w){var E=new b(r);if(Hn(this,E,!0),M(E,"lockSsfi",!0),!o||g.length===1){E.property(w,t[w]);return}try{E.property(w,t[w])}catch(U){if(!Qr.compatibleConstructor(U,ze))throw U;y===null&&(y=U),x++}},this),o&&g.length>1&&x===g.length)throw y;return}this.assert(d,"expected #{this} to "+u+"include "+$e(t),"expected #{this} to not "+u+"include "+$e(t))}O(Iu,"include");b.addChainableMethod("include",Iu,Lu);b.addChainableMethod("contain",Iu,Lu);b.addChainableMethod("contains",Iu,Lu);b.addChainableMethod("includes",Iu,Lu);b.addProperty("ok",function(){this.assert(M(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});b.addProperty("true",function(){this.assert(M(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!M(this,"negate"))});b.addProperty("numeric",function(){let t=M(this,"object");this.assert(["Number","BigInt"].includes(Xe(t)),"expected #{this} to be numeric","expected #{this} to not be numeric",!M(this,"negate"))});b.addProperty("callable",function(){let t=M(this,"object"),e=M(this,"ssfi"),r=M(this,"message"),n=r?`${r}: `:"",i=M(this,"negate"),o=i?`${n}expected ${$e(t)} not to be a callable function`:`${n}expected ${$e(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Xe(t));if(s&&i||!s&&!i)throw new ze(o,void 0,e)});b.addProperty("false",function(){this.assert(M(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!M(this,"negate"))});b.addProperty("null",function(){this.assert(M(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});b.addProperty("undefined",function(){this.assert(M(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});b.addProperty("NaN",function(){this.assert(cy(M(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function Bb(){var t=M(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}O(Bb,"assertExist");b.addProperty("exist",Bb);b.addProperty("exists",Bb);b.addProperty("empty",function(){var t=M(this,"object"),e=M(this,"ssfi"),r=M(this,"message"),n;switch(r=r?r+": ":"",Xe(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new ze(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+gy(t);throw new ze(i.trim(),void 0,e);default:if(t!==Object(t))throw new ze(r+".empty was passed non-string primitive "+$e(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function Vb(){var t=M(this,"object"),e=Xe(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}O(Vb,"checkArguments");b.addProperty("arguments",Vb);b.addProperty("Arguments",Vb);function hy(t,e){e&&M(this,"message",e);var r=M(this,"object");if(M(this,"deep")){var n=M(this,"lockSsfi");M(this,"lockSsfi",!0),this.eql(t),M(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}O(hy,"assertEqual");b.addMethod("equal",hy);b.addMethod("equals",hy);b.addMethod("eq",hy);function Wb(t,e){e&&M(this,"message",e);var r=M(this,"eql");this.assert(r(t,M(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}O(Wb,"assertEql");b.addMethod("eql",Wb);b.addMethod("eqls",Wb);function yy(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=Xe(r).toLowerCase(),u=Xe(t).toLowerCase();if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")throw new ze(o+"the argument to above must be a date",void 0,s);if(!Ht(t)&&(n||Ht(r)))throw new ze(o+"the argument to above must be a number",void 0,s);if(!n&&l!=="date"&&!Ht(r)){var m=l==="string"?"'"+r+"'":r;throw new ze(o+"expected "+m+" to be a number or a date",void 0,s)}if(n){var d="length",g;l==="map"||l==="set"?(d="size",g=r.size):g=r.length,this.assert(g>t,"expected #{this} to have a "+d+" above #{exp} but got #{act}","expected #{this} to not have a "+d+" above #{exp}",t,g)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}O(yy,"assertAbove");b.addMethod("above",yy);b.addMethod("gt",yy);b.addMethod("greaterThan",yy);function Ty(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=Xe(r).toLowerCase(),u=Xe(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to least must be a date";else if(!Ht(t)&&(n||Ht(r)))m=o+"the argument to least must be a number";else if(!n&&l!=="date"&&!Ht(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new ze(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+y+" at least #{exp} but got #{act}","expected #{this} to have a "+y+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}O(Ty,"assertLeast");b.addMethod("least",Ty);b.addMethod("gte",Ty);b.addMethod("greaterThanOrEqual",Ty);function xy(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=Xe(r).toLowerCase(),u=Xe(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to below must be a date";else if(!Ht(t)&&(n||Ht(r)))m=o+"the argument to below must be a number";else if(!n&&l!=="date"&&!Ht(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new ze(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+y+" below #{exp} but got #{act}","expected #{this} to not have a "+y+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}O(xy,"assertBelow");b.addMethod("below",xy);b.addMethod("lt",xy);b.addMethod("lessThan",xy);function Sy(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=Xe(r).toLowerCase(),u=Xe(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to most must be a date";else if(!Ht(t)&&(n||Ht(r)))m=o+"the argument to most must be a number";else if(!n&&l!=="date"&&!Ht(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new ze(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+y+" at most #{exp} but got #{act}","expected #{this} to have a "+y+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}O(Sy,"assertMost");b.addMethod("most",Sy);b.addMethod("lte",Sy);b.addMethod("lessThanOrEqual",Sy);b.addMethod("within",function(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"doLength"),o=M(this,"message"),s=o?o+": ":"",l=M(this,"ssfi"),u=Xe(n).toLowerCase(),m=Xe(t).toLowerCase(),d=Xe(e).toLowerCase(),g,y=!0,x=m==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&u!=="map"&&u!=="set"&&new b(n,o,l,!0).to.have.property("length"),!i&&u==="date"&&(m!=="date"||d!=="date"))g=s+"the arguments to within must be dates";else if((!Ht(t)||!Ht(e))&&(i||Ht(n)))g=s+"the arguments to within must be numbers";else if(!i&&u!=="date"&&!Ht(n)){var w=u==="string"?"'"+n+"'":n;g=s+"expected "+w+" to be a number or a date"}else y=!1;if(y)throw new ze(g,void 0,l);if(i){var E="length",U;u==="map"||u==="set"?(E="size",U=n.size):U=n.length,this.assert(U>=t&&U<=e,"expected #{this} to have a "+E+" within "+x,"expected #{this} to not have a "+E+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function $b(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"ssfi"),i=M(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new ze(i+"The instanceof assertion needs a constructor but "+Xe(t)+" was given.",void 0,n)):l}var s=gy(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}O($b,"assertInstanceOf");b.addMethod("instanceof",$b);b.addMethod("instanceOf",$b);function jb(t,e,r){r&&M(this,"message",r);var n=M(this,"nested"),i=M(this,"own"),o=M(this,"message"),s=M(this,"object"),l=M(this,"ssfi"),u=typeof t;if(o=o?o+": ":"",n){if(u!=="string")throw new ze(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(u!=="string"&&u!=="number"&&u!=="symbol")throw new ze(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new ze(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(s==null)throw new ze(o+"Target cannot be null or undefined.",void 0,l);var m=M(this,"deep"),d=M(this,"negate"),g=n?Pb(s,t):null,y=n?g.value:s[t],x=m?M(this,"eql"):(U,V)=>U===V,w="";m&&(w+="deep "),i&&(w+="own "),n&&(w+="nested "),w+="property ";var E;i?E=Object.prototype.hasOwnProperty.call(s,t):n?E=g.exists:E=dy(s,t),(!d||arguments.length===1)&&this.assert(E,"expected #{this} to have "+w+$e(t),"expected #{this} to not have "+w+$e(t)),arguments.length>1&&this.assert(E&&x(e,y),"expected #{this} to have "+w+$e(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+w+$e(t)+" of #{act}",e,y),M(this,"object",y)}O(jb,"assertProperty");b.addMethod("property",jb);function zb(t,e,r){M(this,"own",!0),jb.apply(this,arguments)}O(zb,"assertOwnProperty");b.addMethod("ownProperty",zb);b.addMethod("haveOwnProperty",zb);function qb(t,e,r){typeof e=="string"&&(r=e,e=null),r&&M(this,"message",r);var n=M(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=M(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+$e(t)+" on #{this} to match "+$e(e)+", got "+$e(i),"expected the own property descriptor for "+$e(t)+" on #{this} to not match "+$e(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+$e(t),"expected #{this} to not have an own property descriptor for "+$e(t)),M(this,"object",i)}O(qb,"assertOwnPropertyDescriptor");b.addMethod("ownPropertyDescriptor",qb);b.addMethod("haveOwnPropertyDescriptor",qb);function Gb(){M(this,"doLength",!0)}O(Gb,"assertLengthChain");function Kb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=Xe(r).toLowerCase(),i=M(this,"message"),o=M(this,"ssfi"),s="length",l;switch(n){case"map":case"set":s="size",l=r.size;break;default:new b(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,l)}O(Kb,"assertLength");b.addChainableMethod("length",Kb,Gb);b.addChainableMethod("lengthOf",Kb,Gb);function Qb(t,e){e&&M(this,"message",e);var r=M(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}O(Qb,"assertMatch");b.addMethod("match",Qb);b.addMethod("matches",Qb);b.addMethod("string",function(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi");new b(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+$e(t),"expected #{this} to not contain "+$e(t))});function Yb(t){var e=M(this,"object"),r=Xe(e),n=Xe(t),i=M(this,"ssfi"),o=M(this,"deep"),s,l="",u,m=!0,d=M(this,"message");d=d?d+": ":"";var g=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",u=[],e.forEach(function(z,ne){u.push(ne)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(u=Nb(e),n){case"Array":if(arguments.length>1)throw new ze(g,void 0,i);break;case"Object":if(arguments.length>1)throw new ze(g,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(z){return typeof z=="symbol"?z:String(z)})}if(!t.length)throw new ze(d+"keys required",void 0,i);var y=t.length,x=M(this,"any"),w=M(this,"all"),E=t,U=o?M(this,"eql"):(z,ne)=>z===ne;if(!x&&!w&&(w=!0),x&&(m=E.some(function(z){return u.some(function(ne){return U(z,ne)})})),w&&(m=E.every(function(z){return u.some(function(ne){return U(z,ne)})}),M(this,"contains")||(m=m&&t.length==u.length)),y>1){t=t.map(function(z){return $e(z)});var V=t.pop();w&&(s=t.join(", ")+", and "+V),x&&(s=t.join(", ")+", or "+V)}else s=$e(t[0]);s=(y>1?"keys ":"key ")+s,s=(M(this,"contains")?"contain ":"have ")+s,this.assert(m,"expected #{this} to "+l+s,"expected #{this} to not "+l+s,E.slice(0).sort(sy),u.sort(sy),!0)}O(Yb,"assertKeys");b.addMethod("keys",Yb);b.addMethod("key",Yb);function vy(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"ssfi"),o=M(this,"message"),s=M(this,"negate")||!1;new b(n,o,i,!0).is.a("function"),(ly(t)||typeof t=="string")&&(e=t,t=null);let l,u=!1;try{n()}catch(z){u=!0,l=z}var m=t===void 0&&e===void 0,d=!!(t&&e),g=!1,y=!1;if(m||!m&&!s){var x="an error";t instanceof Error?x="#{exp}":t&&(x=Qr.getConstructorName(t));let z=l;if(l instanceof Error)z=l.toString();else if(typeof l=="string")z=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{z=Qr.getConstructorName(l)}catch{}this.assert(u,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),z)}if(t&&l){if(t instanceof Error){var w=Qr.compatibleInstance(l,t);w===s&&(d&&s?g=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!s?" but #{act} was thrown":""),t.toString(),l.toString()))}var E=Qr.compatibleConstructor(l,t);E===s&&(d&&s?g=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Qr.getConstructorName(t),l instanceof Error?l.toString():l&&Qr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var U="including";ly(e)&&(U="matching");var V=Qr.compatibleMessage(l,e);V===s&&(d&&s?y=!0:this.assert(s,"expected #{this} to throw error "+U+" #{exp} but got #{act}","expected #{this} to throw error not "+U+" #{exp}",e,Qr.getMessage(l)))}g&&y&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Qr.getConstructorName(t),l instanceof Error?l.toString():l&&Qr.getConstructorName(l)),M(this,"object",l)}O(vy,"assertThrows");b.addMethod("throw",vy);b.addMethod("throws",vy);b.addMethod("Throw",vy);function Zb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+$e(t),"expected #{this} to not respond to "+$e(t))}O(Zb,"respondTo");b.addMethod("respondTo",Zb);b.addMethod("respondsTo",Zb);b.addProperty("itself",function(){M(this,"itself",!0)});function Xb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+Ma(t),"expected #{this} to not satisfy"+Ma(t),!M(this,"negate"),n)}O(Xb,"satisfy");b.addMethod("satisfy",Xb);b.addMethod("satisfies",Xb);function Jb(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.numeric;let s="A `delta` value is required for `closeTo`";if(e==null)throw new ze(i?`${i}: ${s}`:s,void 0,o);if(new b(e,i,o,!0).is.numeric,s="A `expected` value is required for `closeTo`",t==null)throw new ze(i?`${i}: ${s}`:s,void 0,o);new b(t,i,o,!0).is.numeric;let l=O(m=>m<0n?-m:m,"abs"),u=O(m=>parseFloat(parseFloat(m).toPrecision(12)),"strip");this.assert(u(l(n-t))<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}O(Jb,"closeTo");b.addMethod("closeTo",Jb);b.addMethod("approximately",Jb);function SI(t,e,r,n,i){let o=Array.from(e),s=Array.from(t);if(!n){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(l,u){if(i)return r?r(l,o[u]):l===o[u];if(!r){var m=o.indexOf(l);return m===-1?!1:(n||o.splice(m,1),!0)}return o.some(function(d,g){return r(l,d)?(n||o.splice(g,1),!0):!1})})}O(SI,"isSubsetOf");b.addMethod("members",function(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi");new b(r,n,i,!0).to.be.iterable,new b(t,n,i,!0).to.be.iterable;var o=M(this,"contains"),s=M(this,"ordered"),l,u,m;o?(l=s?"an ordered superset":"a superset",u="expected #{this} to be "+l+" of #{exp}",m="expected #{this} to not be "+l+" of #{exp}"):(l=s?"ordered members":"members",u="expected #{this} to have the same "+l+" as #{exp}",m="expected #{this} to not have the same "+l+" as #{exp}");var d=M(this,"deep")?M(this,"eql"):void 0;this.assert(SI(t,r,d,o,s),u,m,t,r,!0)});b.addProperty("iterable",function(t){t&&M(this,"message",t);var e=M(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function vI(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi"),o=M(this,"contains"),s=M(this,"deep"),l=M(this,"eql");new b(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(u){return r.indexOf(u)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):s?this.assert(t.some(function(u){return l(r,u)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}O(vI,"oneOf");b.addMethod("oneOf",vI);function ew(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","change"),M(this,"realDelta",l!==s),this.assert(s!==l,"expected "+u+" to change","expected "+u+" to not change")}O(ew,"assertChanges");b.addMethod("change",ew);b.addMethod("changes",ew);function tw(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),new b(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","increase"),M(this,"realDelta",l-s),this.assert(l-s>0,"expected "+u+" to increase","expected "+u+" to not increase")}O(tw,"assertIncreases");b.addMethod("increase",tw);b.addMethod("increases",tw);function rw(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),new b(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","decrease"),M(this,"realDelta",s-l),this.assert(l-s<0,"expected "+u+" to decrease","expected "+u+" to not decrease")}O(rw,"assertDecreases");b.addMethod("decrease",rw);b.addMethod("decreases",rw);function bI(t,e){e&&M(this,"message",e);var r=M(this,"deltaMsgObj"),n=M(this,"initialDeltaValue"),i=M(this,"finalDeltaValue"),o=M(this,"deltaBehavior"),s=M(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=s===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}O(bI,"assertDelta");b.addMethod("by",bI);b.addProperty("extensible",function(){var t=M(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});b.addProperty("sealed",function(){var t=M(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});b.addProperty("frozen",function(){var t=M(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});b.addProperty("finite",function(t){var e=M(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function uy(t,e){return t===e?!0:typeof e!=typeof t?!1:typeof t!="object"||t===null?t===e:e?Array.isArray(t)?Array.isArray(e)?t.every(function(r){return e.some(function(n){return uy(r,n)})}):!1:t instanceof Date?e instanceof Date?t.getTime()===e.getTime():!1:Object.keys(t).every(function(r){var n=t[r],i=e[r];return typeof n=="object"&&n!==null&&i!==null?uy(n,i):typeof n=="function"?n(i):i===n}):!1}O(uy,"compareSubset");b.addMethod("containSubset",function(t){let e=ke(this,"object"),r=hr.showDiff;this.assert(uy(t,e),"expected #{act} to contain subset #{exp}","expected #{act} to not contain subset #{exp}",t,e,r)});function py(t,e){return new b(t,e)}O(py,"expect");py.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new ze(r,{actual:t,expected:e,operator:n},py.fail)};var wI={};bb(wI,{Should:()=>B8,should:()=>H8});function nw(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new b(this.valueOf(),null,t):new b(this,null,t)}O(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}O(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new ze(o,{actual:n,expected:i,operator:s},r.fail)},r.equal=function(n,i,o){new b(n,o).to.equal(i)},r.Throw=function(n,i,o,s){new b(n,s).to.Throw(i,o)},r.exist=function(n,i){new b(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new b(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,s){new b(n,s).to.not.Throw(i,o)},r.not.exist=function(n,i){new b(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}O(nw,"loadShould");var H8=nw,B8=nw;function v(t,e){var r=new b(null,null,v,!0);r.assert(t,e,"[ negation message unavailable ]")}O(v,"assert");v.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new ze(r,{actual:t,expected:e,operator:n},v.fail)};v.isOk=function(t,e){new b(t,e,v.isOk,!0).is.ok};v.isNotOk=function(t,e){new b(t,e,v.isNotOk,!0).is.not.ok};v.equal=function(t,e,r){var n=new b(t,r,v.equal,!0);n.assert(e==ke(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};v.notEqual=function(t,e,r){var n=new b(t,r,v.notEqual,!0);n.assert(e!=ke(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};v.strictEqual=function(t,e,r){new b(t,r,v.strictEqual,!0).to.equal(e)};v.notStrictEqual=function(t,e,r){new b(t,r,v.notStrictEqual,!0).to.not.equal(e)};v.deepEqual=v.deepStrictEqual=function(t,e,r){new b(t,r,v.deepEqual,!0).to.eql(e)};v.notDeepEqual=function(t,e,r){new b(t,r,v.notDeepEqual,!0).to.not.eql(e)};v.isAbove=function(t,e,r){new b(t,r,v.isAbove,!0).to.be.above(e)};v.isAtLeast=function(t,e,r){new b(t,r,v.isAtLeast,!0).to.be.least(e)};v.isBelow=function(t,e,r){new b(t,r,v.isBelow,!0).to.be.below(e)};v.isAtMost=function(t,e,r){new b(t,r,v.isAtMost,!0).to.be.most(e)};v.isTrue=function(t,e){new b(t,e,v.isTrue,!0).is.true};v.isNotTrue=function(t,e){new b(t,e,v.isNotTrue,!0).to.not.equal(!0)};v.isFalse=function(t,e){new b(t,e,v.isFalse,!0).is.false};v.isNotFalse=function(t,e){new b(t,e,v.isNotFalse,!0).to.not.equal(!1)};v.isNull=function(t,e){new b(t,e,v.isNull,!0).to.equal(null)};v.isNotNull=function(t,e){new b(t,e,v.isNotNull,!0).to.not.equal(null)};v.isNaN=function(t,e){new b(t,e,v.isNaN,!0).to.be.NaN};v.isNotNaN=function(t,e){new b(t,e,v.isNotNaN,!0).not.to.be.NaN};v.exists=function(t,e){new b(t,e,v.exists,!0).to.exist};v.notExists=function(t,e){new b(t,e,v.notExists,!0).to.not.exist};v.isUndefined=function(t,e){new b(t,e,v.isUndefined,!0).to.equal(void 0)};v.isDefined=function(t,e){new b(t,e,v.isDefined,!0).to.not.equal(void 0)};v.isCallable=function(t,e){new b(t,e,v.isCallable,!0).is.callable};v.isNotCallable=function(t,e){new b(t,e,v.isNotCallable,!0).is.not.callable};v.isObject=function(t,e){new b(t,e,v.isObject,!0).to.be.a("object")};v.isNotObject=function(t,e){new b(t,e,v.isNotObject,!0).to.not.be.a("object")};v.isArray=function(t,e){new b(t,e,v.isArray,!0).to.be.an("array")};v.isNotArray=function(t,e){new b(t,e,v.isNotArray,!0).to.not.be.an("array")};v.isString=function(t,e){new b(t,e,v.isString,!0).to.be.a("string")};v.isNotString=function(t,e){new b(t,e,v.isNotString,!0).to.not.be.a("string")};v.isNumber=function(t,e){new b(t,e,v.isNumber,!0).to.be.a("number")};v.isNotNumber=function(t,e){new b(t,e,v.isNotNumber,!0).to.not.be.a("number")};v.isNumeric=function(t,e){new b(t,e,v.isNumeric,!0).is.numeric};v.isNotNumeric=function(t,e){new b(t,e,v.isNotNumeric,!0).is.not.numeric};v.isFinite=function(t,e){new b(t,e,v.isFinite,!0).to.be.finite};v.isBoolean=function(t,e){new b(t,e,v.isBoolean,!0).to.be.a("boolean")};v.isNotBoolean=function(t,e){new b(t,e,v.isNotBoolean,!0).to.not.be.a("boolean")};v.typeOf=function(t,e,r){new b(t,r,v.typeOf,!0).to.be.a(e)};v.notTypeOf=function(t,e,r){new b(t,r,v.notTypeOf,!0).to.not.be.a(e)};v.instanceOf=function(t,e,r){new b(t,r,v.instanceOf,!0).to.be.instanceOf(e)};v.notInstanceOf=function(t,e,r){new b(t,r,v.notInstanceOf,!0).to.not.be.instanceOf(e)};v.include=function(t,e,r){new b(t,r,v.include,!0).include(e)};v.notInclude=function(t,e,r){new b(t,r,v.notInclude,!0).not.include(e)};v.deepInclude=function(t,e,r){new b(t,r,v.deepInclude,!0).deep.include(e)};v.notDeepInclude=function(t,e,r){new b(t,r,v.notDeepInclude,!0).not.deep.include(e)};v.nestedInclude=function(t,e,r){new b(t,r,v.nestedInclude,!0).nested.include(e)};v.notNestedInclude=function(t,e,r){new b(t,r,v.notNestedInclude,!0).not.nested.include(e)};v.deepNestedInclude=function(t,e,r){new b(t,r,v.deepNestedInclude,!0).deep.nested.include(e)};v.notDeepNestedInclude=function(t,e,r){new b(t,r,v.notDeepNestedInclude,!0).not.deep.nested.include(e)};v.ownInclude=function(t,e,r){new b(t,r,v.ownInclude,!0).own.include(e)};v.notOwnInclude=function(t,e,r){new b(t,r,v.notOwnInclude,!0).not.own.include(e)};v.deepOwnInclude=function(t,e,r){new b(t,r,v.deepOwnInclude,!0).deep.own.include(e)};v.notDeepOwnInclude=function(t,e,r){new b(t,r,v.notDeepOwnInclude,!0).not.deep.own.include(e)};v.match=function(t,e,r){new b(t,r,v.match,!0).to.match(e)};v.notMatch=function(t,e,r){new b(t,r,v.notMatch,!0).to.not.match(e)};v.property=function(t,e,r){new b(t,r,v.property,!0).to.have.property(e)};v.notProperty=function(t,e,r){new b(t,r,v.notProperty,!0).to.not.have.property(e)};v.propertyVal=function(t,e,r,n){new b(t,n,v.propertyVal,!0).to.have.property(e,r)};v.notPropertyVal=function(t,e,r,n){new b(t,n,v.notPropertyVal,!0).to.not.have.property(e,r)};v.deepPropertyVal=function(t,e,r,n){new b(t,n,v.deepPropertyVal,!0).to.have.deep.property(e,r)};v.notDeepPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};v.ownProperty=function(t,e,r){new b(t,r,v.ownProperty,!0).to.have.own.property(e)};v.notOwnProperty=function(t,e,r){new b(t,r,v.notOwnProperty,!0).to.not.have.own.property(e)};v.ownPropertyVal=function(t,e,r,n){new b(t,n,v.ownPropertyVal,!0).to.have.own.property(e,r)};v.notOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};v.deepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};v.notDeepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};v.nestedProperty=function(t,e,r){new b(t,r,v.nestedProperty,!0).to.have.nested.property(e)};v.notNestedProperty=function(t,e,r){new b(t,r,v.notNestedProperty,!0).to.not.have.nested.property(e)};v.nestedPropertyVal=function(t,e,r,n){new b(t,n,v.nestedPropertyVal,!0).to.have.nested.property(e,r)};v.notNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};v.deepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};v.notDeepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};v.lengthOf=function(t,e,r){new b(t,r,v.lengthOf,!0).to.have.lengthOf(e)};v.hasAnyKeys=function(t,e,r){new b(t,r,v.hasAnyKeys,!0).to.have.any.keys(e)};v.hasAllKeys=function(t,e,r){new b(t,r,v.hasAllKeys,!0).to.have.all.keys(e)};v.containsAllKeys=function(t,e,r){new b(t,r,v.containsAllKeys,!0).to.contain.all.keys(e)};v.doesNotHaveAnyKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};v.doesNotHaveAllKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};v.hasAnyDeepKeys=function(t,e,r){new b(t,r,v.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};v.hasAllDeepKeys=function(t,e,r){new b(t,r,v.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};v.containsAllDeepKeys=function(t,e,r){new b(t,r,v.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};v.doesNotHaveAnyDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};v.doesNotHaveAllDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};v.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new b(t,n,v.throws,!0).to.throw(e,r);return ke(i,"object")};v.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new b(t,n,v.doesNotThrow,!0).to.not.throw(e,r)};v.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new ze(n+'Invalid operator "'+e+'"',void 0,v.operator)}var o=new b(i,n,v.operator,!0);o.assert(ke(o,"object")===!0,"expected "+$e(t)+" to be "+e+" "+$e(r),"expected "+$e(t)+" to not be "+e+" "+$e(r))};v.closeTo=function(t,e,r,n){new b(t,n,v.closeTo,!0).to.be.closeTo(e,r)};v.approximately=function(t,e,r,n){new b(t,n,v.approximately,!0).to.be.approximately(e,r)};v.sameMembers=function(t,e,r){new b(t,r,v.sameMembers,!0).to.have.same.members(e)};v.notSameMembers=function(t,e,r){new b(t,r,v.notSameMembers,!0).to.not.have.same.members(e)};v.sameDeepMembers=function(t,e,r){new b(t,r,v.sameDeepMembers,!0).to.have.same.deep.members(e)};v.notSameDeepMembers=function(t,e,r){new b(t,r,v.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};v.sameOrderedMembers=function(t,e,r){new b(t,r,v.sameOrderedMembers,!0).to.have.same.ordered.members(e)};v.notSameOrderedMembers=function(t,e,r){new b(t,r,v.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};v.sameDeepOrderedMembers=function(t,e,r){new b(t,r,v.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};v.notSameDeepOrderedMembers=function(t,e,r){new b(t,r,v.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};v.includeMembers=function(t,e,r){new b(t,r,v.includeMembers,!0).to.include.members(e)};v.notIncludeMembers=function(t,e,r){new b(t,r,v.notIncludeMembers,!0).to.not.include.members(e)};v.includeDeepMembers=function(t,e,r){new b(t,r,v.includeDeepMembers,!0).to.include.deep.members(e)};v.notIncludeDeepMembers=function(t,e,r){new b(t,r,v.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};v.includeOrderedMembers=function(t,e,r){new b(t,r,v.includeOrderedMembers,!0).to.include.ordered.members(e)};v.notIncludeOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};v.includeDeepOrderedMembers=function(t,e,r){new b(t,r,v.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};v.notIncludeDeepOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};v.oneOf=function(t,e,r){new b(t,r,v.oneOf,!0).to.be.oneOf(e)};v.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${$e(t)} to be an iterable`:`expected ${$e(t)} to be an iterable`,new ze(e,void 0,v.isIterable)};v.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.changes,!0).to.change(e,r)};v.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesBy,!0).to.change(e,r).by(n)};v.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotChange,!0).to.not.change(e,r)};v.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesButNotBy,!0).to.change(e,r).but.not.by(n)};v.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.increases,!0).to.increase(e,r)};v.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesBy,!0).to.increase(e,r).by(n)};v.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotIncrease,!0).to.not.increase(e,r)};v.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};v.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.decreases,!0).to.decrease(e,r)};v.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesBy,!0).to.decrease(e,r).by(n)};v.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotDecrease,!0).to.not.decrease(e,r)};v.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new b(t,i,v.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};v.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};v.ifError=function(t){if(t)throw t};v.isExtensible=function(t,e){new b(t,e,v.isExtensible,!0).to.be.extensible};v.isNotExtensible=function(t,e){new b(t,e,v.isNotExtensible,!0).to.not.be.extensible};v.isSealed=function(t,e){new b(t,e,v.isSealed,!0).to.be.sealed};v.isNotSealed=function(t,e){new b(t,e,v.isNotSealed,!0).to.not.be.sealed};v.isFrozen=function(t,e){new b(t,e,v.isFrozen,!0).to.be.frozen};v.isNotFrozen=function(t,e){new b(t,e,v.isNotFrozen,!0).to.not.be.frozen};v.isEmpty=function(t,e){new b(t,e,v.isEmpty,!0).to.be.empty};v.isNotEmpty=function(t,e){new b(t,e,v.isNotEmpty,!0).to.not.be.empty};v.containsSubset=function(t,e,r){new b(t,r).to.containSubset(e)};v.doesNotContainSubset=function(t,e,r){new b(t,r).to.not.containSubset(e)};var V8=[["isOk","ok"],["isNotOk","notOk"],["throws","throw"],["throws","Throw"],["isExtensible","extensible"],["isNotExtensible","notExtensible"],["isSealed","sealed"],["isNotSealed","notSealed"],["isFrozen","frozen"],["isNotFrozen","notFrozen"],["isEmpty","empty"],["isNotEmpty","notEmpty"],["isCallable","isFunction"],["isNotCallable","isNotFunction"],["containsSubset","containSubset"]];for(let[t,e]of V8)v[e]=v[t];var IL=[];function EI(t){let e={use:EI,AssertionError:ze,util:ny,config:hr,expect:py,assert:v,Assertion:b,...wI};return~IL.indexOf(t)||(t(e,ny),IL.push(t)),e}O(EI,"use");var Cu=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new Y(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new Y(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new Y(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var _I=Nr(require("node:path"),1),by=class{get uri(){return this._uri}get filename(){return _I.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new Y(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof ge?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Cu(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new ge(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof Y))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new Y(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof ge))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new ge(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new iw(n)}}};function j8(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var iw=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=j8(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,s=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)r=i+1;else break;return new ow(i,e-s)}},ow=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var wy=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Ou;this.onDidChangeActiveTextEditor=Ou;this.onDidChangeVisibleTextEditors=Ou;this.onDidChangeTextEditorSelection=Ou;this.onDidChangeTextEditorVisibleRanges=Ou;this.configuration=new lu,this.keyValueStore=new uu,this.messages=new pu,this.clipboard=new su(this.client),this.capabilities=new Ch,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await lF(this.client);this.assetsRoot_=aw.default.join(e,"assets"),this.cursorlessNeovimPath=aw.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return _L()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return xF(e)}onDidOpenTextDocument(e,r,n){return SF(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let s,l;e?(s=[],l=[]):(s=await Lh(r,this.client),l=await cF(r,this.client,i));let u=this.toNeovimEditor(r,n,i,l,s);return qr().emitEvent("onDidOpenTextDocument",u.document),u}toNeovimEditor(e,r,n,i,o){let s=this.getTextDocument(r),l=this.getTextEditor(e);return s?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),s.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),s=new by(_F.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,s)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,s)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new Nh(Yx(),this.client,this,e,s,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){dF(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,RI.pull)(this.disposables,...e)}};function Ou(){return{dispose(){}}}var Ey=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var q8=BigInt(1e9);function kI(t,e=BigInt(1e6)){return Number(t*e/q8)/Number(e)}async function _y(t,e=[],r=[],n,i,o,s,l){let u={documentContents:n.document.getText(),selections:n.selections.map(hk)};o!=null&&(u.marks=o),l!=null&&(u.metadata=l),e.includes("clipboard")||(u.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(u.visibleRanges=n.visibleRanges.map(nl));for(let m of ys){let d=t?.get(m),g=`${m}Mark`;d!=null&&!e.includes(g)&&(u[g]=d.map(y=>y.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let m=s?.startTimestamp;if(m==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-m;u.timeOffsetSeconds=kI(d)}return u}var G8=Nr(bl(),1);function AI(t,e,r,n,i,o,s,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:s,scopeProvider:o,takeSnapshot(u,m,d,g,y){return _y(e,u,m,d,g,y,void 0,void 0)},setStoredTarget(u,m,d){e.set(m,d?.map(g=>iF(u,g)))},hatTokenMap:r,runIntegrationTests:l}}async function PI(t,e,r,n){let i={[GT]:async(...o)=>{(await t.mode).mode==="t"&&mF(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),u=Pm(o);if(await n.getFocusedElementType()==="terminal"&&Jo(u)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&fF(t)}return l}catch(l){if(e.runMode!=="test"){let u=l;console.error(u.stack),e.handleCommandError(u)}throw l}},"cursorless.repeatPreviousCommand":Ie,"cursorless.showCheatsheet":Ie,"cursorless.internal.updateCheatsheetDefaults":Ie,"cursorless.recordTestCase":Ie,"cursorless.recordOneTestCaseThenPause":Ie,"cursorless.pauseRecording":Ie,"cursorless.resumeRecording":Ie,"cursorless.takeSnapshot":Ie,"cursorless.recordScopeTests.showUnimplementedFacets":Ie,"cursorless.recordScopeTests.saveActiveDocument":Ie,"cursorless.showQuickPick":Ie,"cursorless.showDocumentation":Ie,"cursorless.showInstallationDependencies":Ie,"cursorless.migrateSnippets":Ie,"cursorless.private.logQuickActions":Ie,"cursorless.toggleDecorations":Ie,"cursorless.recomputeDecorationStyles":Ie,"cursorless.showScopeVisualizer":Ie,"cursorless.hideScopeVisualizer":Ie,"cursorless.analyzeCommandHistory":Ie,"cursorless.keyboard.escape":Ie,"cursorless.keyboard.targeted.targetHat":Ie,"cursorless.keyboard.targeted.targetScope":Ie,"cursorless.keyboard.targeted.targetSelection":Ie,"cursorless.keyboard.targeted.clearTarget":Ie,"cursorless.keyboard.targeted.runActionOnTarget":Ie,"cursorless.keyboard.modal.modeOn":Ie,"cursorless.keyboard.modal.modeOff":Ie,"cursorless.keyboard.modal.modeToggle":Ie,"cursorless.keyboard.undoTarget":Ie,"cursorless.keyboard.redoTarget":Ie,"cursorless.tutorial.start":Ie,"cursorless.tutorial.next":Ie,"cursorless.tutorial.previous":Ie,"cursorless.tutorial.restart":Ie,"cursorless.tutorial.resume":Ie,"cursorless.tutorial.list":Ie,"cursorless.documentationOpened":Ie};Object.entries(i).map(([o,s])=>qr().registerCommand(o,s))}async function Ie(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function MI(t){let e=t.nvim,r=new wy(e);await r.init();let n=r.runMode==="production"?r:new ym(r,new dm,r.runMode==="test",void 0),i=new Dp,o=new Ey(e),s=r.runMode==="test"?i:o,{commandApi:l,storedTargets:u,hatTokenMap:m,scopeProvider:d,injectIde:g,runIntegrationTests:y}=await nF({ide:n,commandServerApi:s});await PI(e,r,l,s);let x={testHelpers:r.runMode==="test"?AI(i,u,m,r,n,d,g,y):void 0};qr().registerExtensionApi(aF,x),console.log("activate(): Cursorless extension loaded")}function DI(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await K8(t),{sync:!1})}async function K8(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await MI(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
