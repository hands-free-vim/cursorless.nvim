"use strict";var dB=Object.create;var Iu=Object.defineProperty;var mB=Object.getOwnPropertyDescriptor;var hB=Object.getOwnPropertyNames;var gB=Object.getPrototypeOf,yB=Object.prototype.hasOwnProperty;var Ke=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),xB=(t,e)=>{for(var r in e)Iu(t,r,{get:e[r],enumerable:!0})},aE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of hB(e))!yB.call(t,i)&&i!==r&&Iu(t,i,{get:()=>e[i],enumerable:!(n=mB(e,i))||n.enumerable});return t};var hr=(t,e,r)=>(r=t!=null?dB(gB(t)):{},aE(e||!t||!t.__esModule?Iu(r,"default",{value:t,enumerable:!0}):r,t)),TB=t=>aE(Iu({},"__esModule",{value:!0}),t);var QP=Ke(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.default=void 0;var eye=jf.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var ZP=Ke(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.default=void 0;var rye=qf.default="00000000-0000-0000-0000-000000000000"});var YP=Ke(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.default=void 0;var iye=zf.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var gl=Ke(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.default=void 0;var L4=U4(YP());function U4(t){return t&&t.__esModule?t:{default:t}}function H4(t){return typeof t=="string"&&L4.default.test(t)}var sye=Gf.default=H4});var yl=Ke(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});Kf.default=void 0;var V4=B4(gl());function B4(t){return t&&t.__esModule?t:{default:t}}function W4(t){if(!(0,V4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var cye=Kf.default=W4});var Ei=Ke(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.default=void 0;xl.unsafeStringify=XP;var $4=j4(gl());function j4(t){return t&&t.__esModule?t:{default:t}}var Nt=[];for(let t=0;t<256;++t)Nt.push((t+256).toString(16).slice(1));function XP(t,e=0){return(Nt[t[e+0]]+Nt[t[e+1]]+Nt[t[e+2]]+Nt[t[e+3]]+"-"+Nt[t[e+4]]+Nt[t[e+5]]+"-"+Nt[t[e+6]]+Nt[t[e+7]]+"-"+Nt[t[e+8]]+Nt[t[e+9]]+"-"+Nt[t[e+10]]+Nt[t[e+11]]+Nt[t[e+12]]+Nt[t[e+13]]+Nt[t[e+14]]+Nt[t[e+15]]).toLowerCase()}function q4(t,e=0){let r=XP(t,e);if(!(0,$4.default)(r))throw TypeError("Stringified UUID is invalid");return r}var pye=xl.default=q4});var Yf=Ke(uS=>{"use strict";Object.defineProperty(uS,"__esModule",{value:!0});uS.default=K4;var z4=G4(require("node:crypto"));function G4(t){return t&&t.__esModule?t:{default:t}}var Zf=new Uint8Array(256),Qf=Zf.length;function K4(){return Qf>Zf.length-16&&(z4.default.randomFillSync(Zf),Qf=0),Zf.slice(Qf,Qf+=16)}});var hS=Ke(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.default=void 0;var Q4=Y4(Yf()),Z4=Ei();function Y4(t){return t&&t.__esModule?t:{default:t}}var fS,Xf,dS=0,mS=0;function X4(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node,a=t.clockseq;if(t._v6||(o||(o=fS),a==null&&(a=Xf)),o==null||a==null){let g=t.random||(t.rng||Q4.default)();o==null&&(o=[g[0],g[1],g[2],g[3],g[4],g[5]],!fS&&!t._v6&&(o[0]|=1,fS=o)),a==null&&(a=(g[6]<<8|g[7])&16383,Xf===void 0&&!t._v6&&(Xf=a))}let l=t.msecs!==void 0?t.msecs:Date.now(),p=t.nsecs!==void 0?t.nsecs:mS+1,u=l-dS+(p-mS)/1e4;if(u<0&&t.clockseq===void 0&&(a=a+1&16383),(u<0||l>dS)&&t.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");dS=l,mS=p,Xf=a,l+=122192928e5;let d=((l&268435455)*1e4+p)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=d&255;let m=l/4294967296*1e4&268435455;i[n++]=m>>>8&255,i[n++]=m&255,i[n++]=m>>>24&15|16,i[n++]=m>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,Z4.unsafeStringify)(i)}var dye=Jf.default=X4});var yS=Ke(gS=>{"use strict";Object.defineProperty(gS,"__esModule",{value:!0});gS.default=r6;var J4=t6(yl()),e6=Ei();function t6(t){return t&&t.__esModule?t:{default:t}}function r6(t){let e=typeof t=="string"?(0,J4.default)(t):t,r=n6(e);return typeof t=="string"?(0,e6.unsafeStringify)(r):r}function n6(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var xS=Ke(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.URL=ns.DNS=void 0;ns.default=p6;var i6=Ei(),o6=s6(yl());function s6(t){return t&&t.__esModule?t:{default:t}}function a6(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var c6=ns.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",l6=ns.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function p6(t,e,r){function n(i,o,a,l){var p;if(typeof i=="string"&&(i=a6(i)),typeof o=="string"&&(o=(0,o6.default)(o)),((p=o)===null||p===void 0?void 0:p.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){l=l||0;for(let d=0;d<16;++d)a[l+d]=u[d];return a}return(0,i6.unsafeStringify)(u)}try{n.name=t}catch{}return n.DNS=c6,n.URL=l6,n}});var JP=Ke(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.default=void 0;var u6=f6(require("node:crypto"));function f6(t){return t&&t.__esModule?t:{default:t}}function d6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),u6.default.createHash("md5").update(t).digest()}var yye=ed.default=d6});var tM=Ke(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.default=void 0;var m6=eM(xS()),h6=eM(JP());function eM(t){return t&&t.__esModule?t:{default:t}}var g6=(0,m6.default)("v3",48,h6.default),Tye=td.default=g6});var rM=Ke(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.default=void 0;var y6=x6(require("node:crypto"));function x6(t){return t&&t.__esModule?t:{default:t}}var vye=rd.default={randomUUID:y6.default.randomUUID}});var oM=Ke(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.default=void 0;var nM=iM(rM()),T6=iM(Yf()),S6=Ei();function iM(t){return t&&t.__esModule?t:{default:t}}function v6(t,e,r){if(nM.default.randomUUID&&!e&&!t)return nM.default.randomUUID();t=t||{};let n=t.random||(t.rng||T6.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,S6.unsafeStringify)(n)}var wye=nd.default=v6});var sM=Ke(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});id.default=void 0;var b6=w6(require("node:crypto"));function w6(t){return t&&t.__esModule?t:{default:t}}function _6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),b6.default.createHash("sha1").update(t).digest()}var Eye=id.default=_6});var cM=Ke(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.default=void 0;var E6=aM(xS()),R6=aM(sM());function aM(t){return t&&t.__esModule?t:{default:t}}var k6=(0,E6.default)("v5",80,R6.default),kye=od.default=k6});var pM=Ke(TS=>{"use strict";Object.defineProperty(TS,"__esModule",{value:!0});TS.default=D6;var P6=Ei(),M6=lM(hS()),A6=lM(yS());function lM(t){return t&&t.__esModule?t:{default:t}}function D6(t={},e,r=0){let n=(0,M6.default)({...t,_v6:!0},new Uint8Array(16));if(n=(0,A6.default)(n),e){for(let i=0;i<16;i++)e[r+i]=n[i];return e}return(0,P6.unsafeStringify)(n)}});var uM=Ke(SS=>{"use strict";Object.defineProperty(SS,"__esModule",{value:!0});SS.default=O6;var I6=C6(yl()),F6=Ei();function C6(t){return t&&t.__esModule?t:{default:t}}function O6(t){let e=typeof t=="string"?(0,I6.default)(t):t,r=N6(e);return typeof t=="string"?(0,F6.unsafeStringify)(r):r}function N6(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var mM=Ke(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});sd.default=void 0;var L6=H6(Yf()),U6=Ei();function H6(t){return t&&t.__esModule?t:{default:t}}var fM=null,dM=null,Dn=0;function V6(t,e,r){t=t||{};let n=e&&r||0,i=e||new Uint8Array(16),o=t.random||(t.rng||L6.default)(),a=t.msecs!==void 0?t.msecs:Date.now(),l=t.seq!==void 0?t.seq:null,p=dM,u=fM;return a>Dn&&t.msecs===void 0&&(Dn=a,l!==null&&(p=null,u=null)),l!==null&&(l>2147483647&&(l=2147483647),p=l>>>19&4095,u=l&524287),(p===null||u===null)&&(p=o[6]&127,p=p<<8|o[7],u=o[8]&63,u=u<<8|o[9],u=u<<5|o[10]>>>3),a+1e4>Dn&&l===null?++u>524287&&(u=0,++p>4095&&(p=0,Dn++)):Dn=a,dM=p,fM=u,i[n++]=Dn/1099511627776&255,i[n++]=Dn/4294967296&255,i[n++]=Dn/16777216&255,i[n++]=Dn/65536&255,i[n++]=Dn/256&255,i[n++]=Dn&255,i[n++]=p>>>4&15|112,i[n++]=p&255,i[n++]=u>>>13&63|128,i[n++]=u>>>5&255,i[n++]=u<<3&255|o[10]&7,i[n++]=o[11],i[n++]=o[12],i[n++]=o[13],i[n++]=o[14],i[n++]=o[15],e||(0,U6.unsafeStringify)(i)}var Dye=sd.default=V6});var hM=Ke(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});ad.default=void 0;var B6=W6(gl());function W6(t){return t&&t.__esModule?t:{default:t}}function $6(t){if(!(0,B6.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var Fye=ad.default=$6});var gM=Ke($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});Object.defineProperty($t,"MAX",{enumerable:!0,get:function(){return j6.default}});Object.defineProperty($t,"NIL",{enumerable:!0,get:function(){return q6.default}});Object.defineProperty($t,"parse",{enumerable:!0,get:function(){return z6.default}});Object.defineProperty($t,"stringify",{enumerable:!0,get:function(){return G6.default}});Object.defineProperty($t,"v1",{enumerable:!0,get:function(){return K6.default}});Object.defineProperty($t,"v1ToV6",{enumerable:!0,get:function(){return Q6.default}});Object.defineProperty($t,"v3",{enumerable:!0,get:function(){return Z6.default}});Object.defineProperty($t,"v4",{enumerable:!0,get:function(){return Y6.default}});Object.defineProperty($t,"v5",{enumerable:!0,get:function(){return X6.default}});Object.defineProperty($t,"v6",{enumerable:!0,get:function(){return J6.default}});Object.defineProperty($t,"v6ToV1",{enumerable:!0,get:function(){return e9.default}});Object.defineProperty($t,"v7",{enumerable:!0,get:function(){return t9.default}});Object.defineProperty($t,"validate",{enumerable:!0,get:function(){return r9.default}});Object.defineProperty($t,"version",{enumerable:!0,get:function(){return n9.default}});var j6=br(QP()),q6=br(ZP()),z6=br(yl()),G6=br(Ei()),K6=br(hS()),Q6=br(yS()),Z6=br(tM()),Y6=br(oM()),X6=br(cM()),J6=br(pM()),e9=br(uM()),t9=br(mM()),r9=br(gl()),n9=br(hM());function br(t){return t&&t.__esModule?t:{default:t}}});var SM=Ke((TM,ld)=>{(function(t,e){typeof ld=="object"&&ld.exports?ld.exports=e():t.nearley=e()})(TM,function(){function t(p,u,d){return this.id=++t.highestId,this.name=p,this.symbols=u,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(p){var u=typeof p>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,p).map(l).join(" ")+" \u25CF "+this.symbols.slice(p).map(l).join(" ");return this.name+" \u2192 "+u};function e(p,u,d,m){this.rule=p,this.dot=u,this.reference=d,this.data=[],this.wantedBy=m,this.isComplete=this.dot===p.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(p){var u=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return u.left=this,u.right=p,u.isComplete&&(u.data=u.build(),u.right=void 0),u},e.prototype.build=function(){var p=[],u=this;do p.push(u.right.data),u=u.left;while(u.left);return p.reverse(),p},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(p,u){this.grammar=p,this.index=u,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(p){for(var u=this.states,d=this.wants,m=this.completed,g=0;g<u.length;g++){var x=u[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var v=x.wantedBy,b=v.length;b--;){var F=v[b];this.complete(F,x)}if(x.reference===this.index){var M=x.rule.name;(this.completed[M]=this.completed[M]||[]).push(x)}}}else{var M=x.rule.symbols[x.dot];if(typeof M!="string"){this.scannable.push(x);continue}if(d[M]){if(d[M].push(x),m.hasOwnProperty(M))for(var U=m[M],b=0;b<U.length;b++){var K=U[b];this.complete(x,K)}}else d[M]=[x],this.predict(M)}}},r.prototype.predict=function(p){for(var u=this.grammar.byName[p]||[],d=0;d<u.length;d++){var m=u[d],g=this.wants[p],x=new e(m,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(p,u){var d=p.nextState(u);this.states.push(d)};function n(p,u){this.rules=p,this.start=u||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(m){d.hasOwnProperty(m.name)||(d[m.name]=[]),d[m.name].push(m)})}n.fromCompiled=function(m,u){var d=m.Lexer;m.ParserStart&&(u=m.ParserStart,m=m.ParserRules);var m=m.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(m,u);return g.lexer=d,g};function i(){this.reset("")}i.prototype.reset=function(p,u){this.buffer=p,this.index=0,this.line=u?u.line:1,this.lastLineBreak=u?-u.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var p=this.buffer[this.index++];return p===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:p}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(p,u){var d=this.buffer;if(typeof d=="string"){var m=d.split(`
`).slice(Math.max(0,this.line-5),this.line),g=d.indexOf(`
`,this.index);g===-1&&(g=d.length);var x=this.index-this.lastLineBreak,v=String(this.line).length;return u+=" at line "+this.line+" col "+x+`:

`,u+=m.map(function(F,M){return b(this.line-m.length+M+1,v)+" "+F},this).join(`
`),u+=`
`+b("",v+x)+`^
`,u}else return u+" at index "+(this.index-1);function b(F,M){var U=String(F);return Array(M-U.length+1).join(" ")+U}};function o(p,u,d){if(p instanceof n)var m=p,d=u;else var m=n.fromCompiled(p,u);this.grammar=m,this.options={keepHistory:!1,lexer:m.lexer||new i};for(var g in d||{})this.options[g]=d[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(m,0),v=this.table=[x];x.wants[m.start]=[],x.predict(m.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(p){var u=this.lexer;u.reset(p,this.lexerState);for(var d;;){try{if(d=u.next(),!d)break}catch(ae){var v=new r(this.grammar,this.current+1);this.table.push(v);var m=new Error(this.reportLexerError(ae));throw m.offset=this.current,m.token=ae.token,m}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,v=new r(this.grammar,x);this.table.push(v);for(var b=d.text!==void 0?d.text:d.value,F=u.constructor===i?d.value:u.transform?.(d)??d,M=g.scannable,U=M.length;U--;){var K=M[U],ne=K.rule.symbols[K.dot];if(ne.test?ne.test(F):ne.type?ne.type===d.type:ne.literal===b){var ie=K.nextState({data:F,token:d,isToken:!0,reference:x-1});v.states.push(ie)}}if(v.process(),v.states.length===0){var m=new Error(this.reportError(d));throw m.offset=this.current,m.token=d,m}this.options.keepHistory&&(g.lexerState=u.save()),this.current++}return g&&(this.lexerState=u.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(p){var u,d,m=p.token;return m?(u="input "+JSON.stringify(m.text[0])+" (lexer error)",d=this.lexer.formatError(m,"Syntax error")):(u="input (lexer error)",d=p.message),this.reportErrorCommon(d,u)},o.prototype.reportError=function(p){var u=(p.type?p.type+" token: ":"")+JSON.stringify(p.value!==void 0?p.value:p),d=this.lexer.formatError(p,"Syntax error");return this.reportErrorCommon(d,u)},o.prototype.reportErrorCommon=function(p,u){var d=[];d.push(p);var m=this.table.length-2,g=this.table[m],x=g.states.filter(function(b){var F=b.rule.symbols[b.dot];return F&&typeof F!="string"});if(x.length===0)d.push("Unexpected "+u+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,d);else{d.push("Unexpected "+u+`. Instead, I was expecting to see one of the following:
`);var v=x.map(function(b){return this.buildFirstStateStack(b,[])||[b]},this);v.forEach(function(b){var F=b[0],M=F.rule.symbols[F.dot],U=this.getSymbolDisplay(M);d.push("A "+U+" based on:"),this.displayStateStack(b,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(p,u){for(var d,m=0,g=0;g<p.length;g++){var x=p[g],v=x.rule.toString(x.dot);v===d?m++:(m>0&&u.push("    ^ "+m+" more lines identical to this"),m=0,u.push("    "+v)),d=v}},o.prototype.getSymbolDisplay=function(p){return a(p)},o.prototype.buildFirstStateStack=function(p,u){if(u.indexOf(p)!==-1)return null;if(p.wantedBy.length===0)return[p];var d=p.wantedBy[0],m=[p].concat(u),g=this.buildFirstStateStack(d,m);return g===null?null:[p].concat(g)},o.prototype.save=function(){var p=this.table[this.current];return p.lexerState=this.lexerState,p},o.prototype.restore=function(p){var u=p.index;this.current=u,this.table[u]=p,this.table.splice(u+1),this.lexerState=p.lexerState,this.results=this.finish()},o.prototype.rewind=function(p){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[p])},o.prototype.finish=function(){var p=[],u=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(m){m.rule.name===u&&m.dot===m.rule.symbols.length&&m.reference===0&&m.data!==o.fail&&p.push(m)}),p.map(function(m){return m.data})};function a(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return"character matching "+p;if(p.type)return p.type+" token";if(p.test)return"token matching "+String(p.test);throw new Error("Unknown symbol type: "+p)}}function l(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return p.toString();if(p.type)return"%"+p.type;if(p.test)return"<"+String(p.test)+">";throw new Error("Unknown symbol type: "+p)}}return{Parser:o,Grammar:n,Rule:t}})});var RM=Ke((EM,fd)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof fd=="object"&&fd.exports?fd.exports=e():t.moo=e()})(EM,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(N){return N&&e.call(N)==="[object RegExp]"}function i(N){return N&&typeof N=="object"&&!n(N)&&!Array.isArray(N)}function o(N){return N.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function a(N){var O=new RegExp("|"+N);return O.exec("").length-1}function l(N){return"("+N+")"}function p(N){if(!N.length)return"(?!)";var O=N.map(function(I){return"(?:"+I+")"}).join("|");return"(?:"+O+")"}function u(N){if(typeof N=="string")return"(?:"+o(N)+")";if(n(N)){if(N.ignoreCase)throw new Error("RegExp /i flag not allowed");if(N.global)throw new Error("RegExp /g flag is implied");if(N.sticky)throw new Error("RegExp /y flag is implied");if(N.multiline)throw new Error("RegExp /m flag is implied");return N.source}else throw new Error("Not a pattern: "+N)}function d(N,O){return N.length>O?N:Array(O-N.length+1).join(" ")+N}function m(N,O){for(var I=N.length,$=0;;){var z=N.lastIndexOf(`
`,I-1);if(z===-1||($++,I=z,$===O)||I===0)break}var Q=$<O?0:I+1;return N.substring(Q).split(`
`)}function g(N){for(var O=Object.getOwnPropertyNames(N),I=[],$=0;$<O.length;$++){var z=O[$],Q=N[z],Z=[].concat(Q);if(z==="include"){for(var te=0;te<Z.length;te++)I.push({include:Z[te]});continue}var he=[];Z.forEach(function(re){i(re)?(he.length&&I.push(v(z,he)),I.push(v(z,re)),he=[]):he.push(re)}),he.length&&I.push(v(z,he))}return I}function x(N){for(var O=[],I=0;I<N.length;I++){var $=N[I];if($.include){for(var z=[].concat($.include),Q=0;Q<z.length;Q++)O.push({include:z[Q]});continue}if(!$.type)throw new Error("Rule has no type: "+JSON.stringify($));O.push(v($.type,$))}return O}function v(N,O){if(i(O)||(O={match:O}),O.include)throw new Error("Matching rules cannot also include states");var I={defaultType:N,lineBreaks:!!O.error||!!O.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var $ in O)t.call(O,$)&&(I[$]=O[$]);if(typeof I.type=="string"&&N!==I.type)throw new Error("Type transform cannot be a string (type '"+I.type+"' for token '"+N+"')");var z=I.match;return I.match=Array.isArray(z)?z:z?[z]:[],I.match.sort(function(Q,Z){return n(Q)&&n(Z)?0:n(Z)?-1:n(Q)?1:Z.length-Q.length}),I}function b(N){return Array.isArray(N)?x(N):g(N)}var F=v("error",{lineBreaks:!0,shouldThrow:!0});function M(N,O){for(var I=null,$=Object.create(null),z=!0,Q=null,Z=[],te=[],he=0;he<N.length;he++)N[he].fallback&&(z=!1);for(var he=0;he<N.length;he++){var re=N[he];if(re.include)throw new Error("Inheritance is not allowed in stateless lexers");if(re.error||re.fallback){if(I)throw!re.fallback==!I.fallback?new Error("Multiple "+(re.fallback?"fallback":"error")+" rules not allowed (for token '"+re.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+re.defaultType+"')");I=re}var Re=re.match.slice();if(z)for(;Re.length&&typeof Re[0]=="string"&&Re[0].length===1;){var lr=Re.shift();$[lr.charCodeAt(0)]=re}if(re.pop||re.push||re.next){if(!O)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+re.defaultType+"')");if(re.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+re.defaultType+"')")}if(Re.length!==0){z=!1,Z.push(re);for(var ci=0;ci<Re.length;ci++){var pr=Re[ci];if(n(pr)){if(Q===null)Q=pr.unicode;else if(Q!==pr.unicode&&re.fallback===!1)throw new Error("If one rule is /u then all must be")}}var vn=p(Re.map(u)),Mr=new RegExp(vn);if(Mr.test(""))throw new Error("RegExp matches empty string: "+Mr);var bn=a(vn);if(bn>0)throw new Error("RegExp has capture groups: "+Mr+`
Use (?: \u2026 ) instead`);if(!re.lineBreaks&&Mr.test(`
`))throw new Error("Rule should declare lineBreaks: "+Mr);te.push(l(vn))}}var Zr=I&&I.fallback,Do=r&&!Zr?"ym":"gm",li=r||Zr?"":"|";Q===!0&&(Do+="u");var Ms=new RegExp(p(te)+li,Do);return{regexp:Ms,groups:Z,fast:$,error:I||F}}function U(N){var O=M(b(N));return new ae({start:O},"start")}function K(N,O,I){var $=N&&(N.push||N.next);if($&&!I[$])throw new Error("Missing state '"+$+"' (in token '"+N.defaultType+"' of state '"+O+"')");if(N&&N.pop&&+N.pop!=1)throw new Error("pop must be 1 (in token '"+N.defaultType+"' of state '"+O+"')")}function ne(N,O){var I=N.$all?b(N.$all):[];delete N.$all;var $=Object.getOwnPropertyNames(N);O||(O=$[0]);for(var z=Object.create(null),Q=0;Q<$.length;Q++){var Z=$[Q];z[Z]=b(N[Z]).concat(I)}for(var Q=0;Q<$.length;Q++)for(var Z=$[Q],te=z[Z],he=Object.create(null),re=0;re<te.length;re++){var Re=te[re];if(Re.include){var lr=[re,1];if(Re.include!==Z&&!he[Re.include]){he[Re.include]=!0;var ci=z[Re.include];if(!ci)throw new Error("Cannot include nonexistent state '"+Re.include+"' (in state '"+Z+"')");for(var pr=0;pr<ci.length;pr++){var vn=ci[pr];te.indexOf(vn)===-1&&lr.push(vn)}}te.splice.apply(te,lr),re--}}for(var Mr=Object.create(null),Q=0;Q<$.length;Q++){var Z=$[Q];Mr[Z]=M(z[Z],!0)}for(var Q=0;Q<$.length;Q++){for(var bn=$[Q],Zr=Mr[bn],Do=Zr.groups,re=0;re<Do.length;re++)K(Do[re],bn,Mr);for(var li=Object.getOwnPropertyNames(Zr.fast),re=0;re<li.length;re++)K(Zr.fast[li[re]],bn,Mr)}return new ae(Mr,O)}function ie(N){for(var O=typeof Map<"u",I=O?new Map:Object.create(null),$=Object.getOwnPropertyNames(N),z=0;z<$.length;z++){var Q=$[z],Z=N[Q],te=Array.isArray(Z)?Z:[Z];te.forEach(function(he){if(typeof he!="string")throw new Error("keyword must be string (in keyword '"+Q+"')");O?I.set(he,Q):I[he]=Q})}return function(he){return O?I.get(he):I[he]}}var ae=function(N,O){this.startState=O,this.states=N,this.buffer="",this.stack=[],this.reset()};ae.prototype.reset=function(N,O){return this.buffer=N||"",this.index=0,this.line=O?O.line:1,this.col=O?O.col:1,this.queuedToken=O?O.queuedToken:null,this.queuedText=O?O.queuedText:"",this.queuedThrow=O?O.queuedThrow:null,this.setState(O?O.state:this.startState),this.stack=O&&O.stack?O.stack.slice():[],this},ae.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},ae.prototype.setState=function(N){if(!(!N||this.state===N)){this.state=N;var O=this.states[N];this.groups=O.groups,this.error=O.error,this.re=O.regexp,this.fast=O.fast}},ae.prototype.popState=function(){this.setState(this.stack.pop())},ae.prototype.pushState=function(N){this.stack.push(this.state),this.setState(N)};var it=r?function(N,O){return N.exec(O)}:function(N,O){var I=N.exec(O);return I[0].length===0?null:I};ae.prototype._getGroup=function(N){for(var O=this.groups.length,I=0;I<O;I++)if(N[I+1]!==void 0)return this.groups[I];throw new Error("Cannot find token type for matched text")};function It(){return this.value}if(ae.prototype.next=function(){var N=this.index;if(this.queuedGroup){var O=this._token(this.queuedGroup,this.queuedText,N);return this.queuedGroup=null,this.queuedText="",O}var I=this.buffer;if(N!==I.length){var Z=this.fast[I.charCodeAt(N)];if(Z)return this._token(Z,I.charAt(N),N);var $=this.re;$.lastIndex=N;var z=it($,I),Q=this.error;if(z==null)return this._token(Q,I.slice(N,I.length),N);var Z=this._getGroup(z),te=z[0];return Q.fallback&&z.index!==N?(this.queuedGroup=Z,this.queuedText=te,this._token(Q,I.slice(N,z.index),N)):this._token(Z,te,N)}},ae.prototype._token=function(N,O,I){var $=0;if(N.lineBreaks){var z=/\n/g,Q=1;if(O===`
`)$=1;else for(;z.exec(O);)$++,Q=z.lastIndex}var Z={type:typeof N.type=="function"&&N.type(O)||N.defaultType,value:typeof N.value=="function"?N.value(O):O,text:O,toString:It,offset:I,lineBreaks:$,line:this.line,col:this.col},te=O.length;if(this.index+=te,this.line+=$,$!==0?this.col=te-Q+1:this.col+=te,N.shouldThrow){var he=new Error(this.formatError(Z,"invalid syntax"));throw he}return N.pop?this.popState():N.push?this.pushState(N.push):N.next&&this.setState(N.next),Z},typeof Symbol<"u"&&Symbol.iterator){var ct=function(N){this.lexer=N};ct.prototype.next=function(){var N=this.lexer.next();return{value:N,done:!N}},ct.prototype[Symbol.iterator]=function(){return this},ae.prototype[Symbol.iterator]=function(){return new ct(this)}}return ae.prototype.formatError=function(N,O){if(N==null)var I=this.buffer.slice(this.index),N={text:I,offset:this.index,lineBreaks:I.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var $=2,z=Math.max(N.line-$,1),Q=N.line+$,Z=String(Q).length,te=m(this.buffer,this.line-N.line+$+1).slice(0,5),he=[];he.push(O+" at line "+N.line+" col "+N.col+":"),he.push("");for(var re=0;re<te.length;re++){var Re=te[re],lr=z+re;he.push(d(String(lr),Z)+"  "+Re),lr===N.line&&he.push(d("",Z+N.col+1)+"^")}return he.join(`
`)},ae.prototype.clone=function(){return new ae(this.states,this.state)},ae.prototype.has=function(N){return!0},{compile:U,states:ne,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ie}})});var El=Ke((Qn,TA)=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});function In(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var _5=typeof process=="object"&&process.env.NODE_ENV==="production";function un(t,e){if(!t)throw _5?new Error("Invariant failed"):new Error(e())}Qn.invariant=un;var jS=Object.prototype.hasOwnProperty,E5=Array.prototype.splice,R5=Object.prototype.toString;function ss(t){return R5.call(t).slice(8,-1)}var Wd=Object.assign||function(t,e){return qS(e).forEach(function(r){jS.call(e,r)&&(t[r]=e[r])}),t},qS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function mo(t){return Array.isArray(t)?Wd(t.constructor(t.length),t):ss(t)==="Map"?new Map(t):ss(t)==="Set"?new Set(t):t&&typeof t=="object"?Wd(Object.create(Object.getPrototypeOf(t)),t):t}var yA=function(){function t(){this.commands=Wd({},k5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||un(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),un(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return qS(i).forEach(function(a){if(jS.call(n.commands,a)){var l=e===o;o=n.commands[a](i[a],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var p=ss(e)==="Map"?n.update(e.get(a),i[a]):n.update(e[a],i[a]),u=ss(o)==="Map"?o.get(a):o[a];(!n.isEquals(p,u)||typeof p>"u"&&!jS.call(e,a))&&(o===e&&(o=mo(e)),ss(o)==="Map"?o.set(a,p):o[a]=p)}}),o},t}();Qn.Context=yA;var k5={$push:function(t,e,r){return hA(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return hA(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return P5(e,r),t.forEach(function(i){xA(i),e===n&&i.length&&(e=mo(n)),E5.apply(e,i)}),e},$set:function(t,e,r){return A5(r),t},$toggle:function(t,e){_l(t,"$toggle");var r=t.length?mo(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return _l(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=mo(n)),delete e[i])}),e},$add:function(t,e,r,n){return gA(e,"$add"),_l(t,"$add"),ss(e)==="Map"?t.forEach(function(i){var o=i[0],a=i[1];e===n&&e.get(o)!==a&&(e=mo(n)),e.set(o,a)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=mo(n)),e.add(i)}),e},$remove:function(t,e,r,n){return gA(e,"$remove"),_l(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=mo(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return D5(e,t),qS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=mo(n)),e[i]=t[i])}),e},$apply:function(t,e){return M5(t),t(e)}},zS=new yA;Qn.isEquals=zS.update.isEquals;Qn.extend=zS.extend;Qn.default=zS.update;Qn.default.default=TA.exports=Wd(Qn.default,Qn);function hA(t,e,r){un(Array.isArray(t),function(){return"update(): expected target of "+In(r)+" to be an array; got "+In(t)+"."}),_l(e[r],r)}function _l(t,e){un(Array.isArray(t),function(){return"update(): expected spec of "+In(e)+" to be an array; got "+In(t)+". Did you forget to wrap your parameter in an array?"})}function P5(t,e){un(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+In(t)}),xA(e.$splice)}function xA(t){un(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+In(t)+". Did you forget to wrap your parameters in an array?"})}function M5(t){un(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+In(t)+"."})}function A5(t){un(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function D5(t,e){un(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+In(e)}),un(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+In(t)})}function gA(t,e){var r=ss(t);un(r==="Map"||r==="Set",function(){return"update(): "+In(e)+" expects a target of type Set or Map; got "+In(r)})}});var ab=Ke((ac,mp)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",l=500,p="__lodash_placeholder__",u=1,d=2,m=4,g=1,x=2,v=1,b=2,F=4,M=8,U=16,K=32,ne=64,ie=128,ae=256,it=512,It=30,ct="...",N=800,O=16,I=1,$=2,z=3,Q=1/0,Z=9007199254740991,te=17976931348623157e292,he=NaN,re=4294967295,Re=re-1,lr=re>>>1,ci=[["ary",ie],["bind",v],["bindKey",b],["curry",M],["curryRight",U],["flip",it],["partial",K],["partialRight",ne],["rearg",ae]],pr="[object Arguments]",vn="[object Array]",Mr="[object AsyncFunction]",bn="[object Boolean]",Zr="[object Date]",Do="[object DOMException]",li="[object Error]",Ms="[object Function]",Aw="[object GeneratorFunction]",wn="[object Map]",wc="[object Number]",AC="[object Null]",pi="[object Object]",Dw="[object Promise]",DC="[object Proxy]",_c="[object RegExp]",_n="[object Set]",Ec="[object String]",$p="[object Symbol]",IC="[object Undefined]",Rc="[object WeakMap]",FC="[object WeakSet]",kc="[object ArrayBuffer]",As="[object DataView]",Wy="[object Float32Array]",$y="[object Float64Array]",jy="[object Int8Array]",qy="[object Int16Array]",zy="[object Int32Array]",Gy="[object Uint8Array]",Ky="[object Uint8ClampedArray]",Qy="[object Uint16Array]",Zy="[object Uint32Array]",CC=/\b__p \+= '';/g,OC=/\b(__p \+=) '' \+/g,NC=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Iw=/&(?:amp|lt|gt|quot|#39);/g,Fw=/[&<>"']/g,LC=RegExp(Iw.source),UC=RegExp(Fw.source),HC=/<%-([\s\S]+?)%>/g,VC=/<%([\s\S]+?)%>/g,Cw=/<%=([\s\S]+?)%>/g,BC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,WC=/^\w*$/,$C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yy=/[\\^$.*+?()[\]{}|]/g,jC=RegExp(Yy.source),Xy=/^\s+/,qC=/\s/,zC=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,GC=/\{\n\/\* \[wrapped with (.+)\] \*/,KC=/,? & /,QC=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ZC=/[()=,{}\[\]\/\s]/,YC=/\\(\\)?/g,XC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ow=/\w*$/,JC=/^[-+]0x[0-9a-f]+$/i,eO=/^0b[01]+$/i,tO=/^\[object .+?Constructor\]$/,rO=/^0o[0-7]+$/i,nO=/^(?:0|[1-9]\d*)$/,iO=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jp=/($^)/,oO=/['\n\r\u2028\u2029\\]/g,qp="\\ud800-\\udfff",sO="\\u0300-\\u036f",aO="\\ufe20-\\ufe2f",cO="\\u20d0-\\u20ff",Nw=sO+aO+cO,Lw="\\u2700-\\u27bf",Uw="a-z\\xdf-\\xf6\\xf8-\\xff",lO="\\xac\\xb1\\xd7\\xf7",pO="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",uO="\\u2000-\\u206f",fO=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Hw="A-Z\\xc0-\\xd6\\xd8-\\xde",Vw="\\ufe0e\\ufe0f",Bw=lO+pO+uO+fO,Jy="['\u2019]",dO="["+qp+"]",Ww="["+Bw+"]",zp="["+Nw+"]",$w="\\d+",mO="["+Lw+"]",jw="["+Uw+"]",qw="[^"+qp+Bw+$w+Lw+Uw+Hw+"]",ex="\\ud83c[\\udffb-\\udfff]",hO="(?:"+zp+"|"+ex+")",zw="[^"+qp+"]",tx="(?:\\ud83c[\\udde6-\\uddff]){2}",rx="[\\ud800-\\udbff][\\udc00-\\udfff]",Ds="["+Hw+"]",Gw="\\u200d",Kw="(?:"+jw+"|"+qw+")",gO="(?:"+Ds+"|"+qw+")",Qw="(?:"+Jy+"(?:d|ll|m|re|s|t|ve))?",Zw="(?:"+Jy+"(?:D|LL|M|RE|S|T|VE))?",Yw=hO+"?",Xw="["+Vw+"]?",yO="(?:"+Gw+"(?:"+[zw,tx,rx].join("|")+")"+Xw+Yw+")*",xO="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",TO="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Jw=Xw+Yw+yO,SO="(?:"+[mO,tx,rx].join("|")+")"+Jw,vO="(?:"+[zw+zp+"?",zp,tx,rx,dO].join("|")+")",bO=RegExp(Jy,"g"),wO=RegExp(zp,"g"),nx=RegExp(ex+"(?="+ex+")|"+vO+Jw,"g"),_O=RegExp([Ds+"?"+jw+"+"+Qw+"(?="+[Ww,Ds,"$"].join("|")+")",gO+"+"+Zw+"(?="+[Ww,Ds+Kw,"$"].join("|")+")",Ds+"?"+Kw+"+"+Qw,Ds+"+"+Zw,TO,xO,$w,SO].join("|"),"g"),EO=RegExp("["+Gw+qp+Nw+Vw+"]"),RO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,kO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],PO=-1,Xe={};Xe[Wy]=Xe[$y]=Xe[jy]=Xe[qy]=Xe[zy]=Xe[Gy]=Xe[Ky]=Xe[Qy]=Xe[Zy]=!0,Xe[pr]=Xe[vn]=Xe[kc]=Xe[bn]=Xe[As]=Xe[Zr]=Xe[li]=Xe[Ms]=Xe[wn]=Xe[wc]=Xe[pi]=Xe[_c]=Xe[_n]=Xe[Ec]=Xe[Rc]=!1;var Qe={};Qe[pr]=Qe[vn]=Qe[kc]=Qe[As]=Qe[bn]=Qe[Zr]=Qe[Wy]=Qe[$y]=Qe[jy]=Qe[qy]=Qe[zy]=Qe[wn]=Qe[wc]=Qe[pi]=Qe[_c]=Qe[_n]=Qe[Ec]=Qe[$p]=Qe[Gy]=Qe[Ky]=Qe[Qy]=Qe[Zy]=!0,Qe[li]=Qe[Ms]=Qe[Rc]=!1;var MO={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},AO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},DO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},IO={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},FO=parseFloat,CO=parseInt,e_=typeof global=="object"&&global&&global.Object===Object&&global,OO=typeof self=="object"&&self&&self.Object===Object&&self,Et=e_||OO||Function("return this")(),ix=typeof ac=="object"&&ac&&!ac.nodeType&&ac,Io=ix&&typeof mp=="object"&&mp&&!mp.nodeType&&mp,t_=Io&&Io.exports===ix,ox=t_&&e_.process,Yr=function(){try{var P=Io&&Io.require&&Io.require("util").types;return P||ox&&ox.binding&&ox.binding("util")}catch{}}(),r_=Yr&&Yr.isArrayBuffer,n_=Yr&&Yr.isDate,i_=Yr&&Yr.isMap,o_=Yr&&Yr.isRegExp,s_=Yr&&Yr.isSet,a_=Yr&&Yr.isTypedArray;function Ar(P,H,L){switch(L.length){case 0:return P.call(H);case 1:return P.call(H,L[0]);case 2:return P.call(H,L[0],L[1]);case 3:return P.call(H,L[0],L[1],L[2])}return P.apply(H,L)}function NO(P,H,L,ee){for(var ye=-1,Ve=P==null?0:P.length;++ye<Ve;){var Tt=P[ye];H(ee,Tt,L(Tt),P)}return ee}function Xr(P,H){for(var L=-1,ee=P==null?0:P.length;++L<ee&&H(P[L],L,P)!==!1;);return P}function LO(P,H){for(var L=P==null?0:P.length;L--&&H(P[L],L,P)!==!1;);return P}function c_(P,H){for(var L=-1,ee=P==null?0:P.length;++L<ee;)if(!H(P[L],L,P))return!1;return!0}function Ui(P,H){for(var L=-1,ee=P==null?0:P.length,ye=0,Ve=[];++L<ee;){var Tt=P[L];H(Tt,L,P)&&(Ve[ye++]=Tt)}return Ve}function Gp(P,H){var L=P==null?0:P.length;return!!L&&Is(P,H,0)>-1}function sx(P,H,L){for(var ee=-1,ye=P==null?0:P.length;++ee<ye;)if(L(H,P[ee]))return!0;return!1}function tt(P,H){for(var L=-1,ee=P==null?0:P.length,ye=Array(ee);++L<ee;)ye[L]=H(P[L],L,P);return ye}function Hi(P,H){for(var L=-1,ee=H.length,ye=P.length;++L<ee;)P[ye+L]=H[L];return P}function ax(P,H,L,ee){var ye=-1,Ve=P==null?0:P.length;for(ee&&Ve&&(L=P[++ye]);++ye<Ve;)L=H(L,P[ye],ye,P);return L}function UO(P,H,L,ee){var ye=P==null?0:P.length;for(ee&&ye&&(L=P[--ye]);ye--;)L=H(L,P[ye],ye,P);return L}function cx(P,H){for(var L=-1,ee=P==null?0:P.length;++L<ee;)if(H(P[L],L,P))return!0;return!1}var HO=lx("length");function VO(P){return P.split("")}function BO(P){return P.match(QC)||[]}function l_(P,H,L){var ee;return L(P,function(ye,Ve,Tt){if(H(ye,Ve,Tt))return ee=Ve,!1}),ee}function Kp(P,H,L,ee){for(var ye=P.length,Ve=L+(ee?1:-1);ee?Ve--:++Ve<ye;)if(H(P[Ve],Ve,P))return Ve;return-1}function Is(P,H,L){return H===H?JO(P,H,L):Kp(P,p_,L)}function WO(P,H,L,ee){for(var ye=L-1,Ve=P.length;++ye<Ve;)if(ee(P[ye],H))return ye;return-1}function p_(P){return P!==P}function u_(P,H){var L=P==null?0:P.length;return L?ux(P,H)/L:he}function lx(P){return function(H){return H==null?t:H[P]}}function px(P){return function(H){return P==null?t:P[H]}}function f_(P,H,L,ee,ye){return ye(P,function(Ve,Tt,Ge){L=ee?(ee=!1,Ve):H(L,Ve,Tt,Ge)}),L}function $O(P,H){var L=P.length;for(P.sort(H);L--;)P[L]=P[L].value;return P}function ux(P,H){for(var L,ee=-1,ye=P.length;++ee<ye;){var Ve=H(P[ee]);Ve!==t&&(L=L===t?Ve:L+Ve)}return L}function fx(P,H){for(var L=-1,ee=Array(P);++L<P;)ee[L]=H(L);return ee}function jO(P,H){return tt(H,function(L){return[L,P[L]]})}function d_(P){return P&&P.slice(0,y_(P)+1).replace(Xy,"")}function Dr(P){return function(H){return P(H)}}function dx(P,H){return tt(H,function(L){return P[L]})}function Pc(P,H){return P.has(H)}function m_(P,H){for(var L=-1,ee=P.length;++L<ee&&Is(H,P[L],0)>-1;);return L}function h_(P,H){for(var L=P.length;L--&&Is(H,P[L],0)>-1;);return L}function qO(P,H){for(var L=P.length,ee=0;L--;)P[L]===H&&++ee;return ee}var zO=px(MO),GO=px(AO);function KO(P){return"\\"+IO[P]}function QO(P,H){return P==null?t:P[H]}function Fs(P){return EO.test(P)}function ZO(P){return RO.test(P)}function YO(P){for(var H,L=[];!(H=P.next()).done;)L.push(H.value);return L}function mx(P){var H=-1,L=Array(P.size);return P.forEach(function(ee,ye){L[++H]=[ye,ee]}),L}function g_(P,H){return function(L){return P(H(L))}}function Vi(P,H){for(var L=-1,ee=P.length,ye=0,Ve=[];++L<ee;){var Tt=P[L];(Tt===H||Tt===p)&&(P[L]=p,Ve[ye++]=L)}return Ve}function Qp(P){var H=-1,L=Array(P.size);return P.forEach(function(ee){L[++H]=ee}),L}function XO(P){var H=-1,L=Array(P.size);return P.forEach(function(ee){L[++H]=[ee,ee]}),L}function JO(P,H,L){for(var ee=L-1,ye=P.length;++ee<ye;)if(P[ee]===H)return ee;return-1}function eN(P,H,L){for(var ee=L+1;ee--;)if(P[ee]===H)return ee;return ee}function Cs(P){return Fs(P)?rN(P):HO(P)}function En(P){return Fs(P)?nN(P):VO(P)}function y_(P){for(var H=P.length;H--&&qC.test(P.charAt(H)););return H}var tN=px(DO);function rN(P){for(var H=nx.lastIndex=0;nx.test(P);)++H;return H}function nN(P){return P.match(nx)||[]}function iN(P){return P.match(_O)||[]}var oN=function P(H){H=H==null?Et:Bi.defaults(Et.Object(),H,Bi.pick(Et,kO));var L=H.Array,ee=H.Date,ye=H.Error,Ve=H.Function,Tt=H.Math,Ge=H.Object,hx=H.RegExp,sN=H.String,Jr=H.TypeError,Zp=L.prototype,aN=Ve.prototype,Os=Ge.prototype,Yp=H["__core-js_shared__"],Xp=aN.toString,je=Os.hasOwnProperty,cN=0,x_=function(){var s=/[^.]+$/.exec(Yp&&Yp.keys&&Yp.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Jp=Os.toString,lN=Xp.call(Ge),pN=Et._,uN=hx("^"+Xp.call(je).replace(Yy,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eu=t_?H.Buffer:t,Wi=H.Symbol,tu=H.Uint8Array,T_=eu?eu.allocUnsafe:t,ru=g_(Ge.getPrototypeOf,Ge),S_=Ge.create,v_=Os.propertyIsEnumerable,nu=Zp.splice,b_=Wi?Wi.isConcatSpreadable:t,Mc=Wi?Wi.iterator:t,Fo=Wi?Wi.toStringTag:t,iu=function(){try{var s=Uo(Ge,"defineProperty");return s({},"",{}),s}catch{}}(),fN=H.clearTimeout!==Et.clearTimeout&&H.clearTimeout,dN=ee&&ee.now!==Et.Date.now&&ee.now,mN=H.setTimeout!==Et.setTimeout&&H.setTimeout,ou=Tt.ceil,su=Tt.floor,gx=Ge.getOwnPropertySymbols,hN=eu?eu.isBuffer:t,w_=H.isFinite,gN=Zp.join,yN=g_(Ge.keys,Ge),St=Tt.max,Ht=Tt.min,xN=ee.now,TN=H.parseInt,__=Tt.random,SN=Zp.reverse,yx=Uo(H,"DataView"),Ac=Uo(H,"Map"),xx=Uo(H,"Promise"),Ns=Uo(H,"Set"),Dc=Uo(H,"WeakMap"),Ic=Uo(Ge,"create"),au=Dc&&new Dc,Ls={},vN=Ho(yx),bN=Ho(Ac),wN=Ho(xx),_N=Ho(Ns),EN=Ho(Dc),cu=Wi?Wi.prototype:t,Fc=cu?cu.valueOf:t,E_=cu?cu.toString:t;function T(s){if(lt(s)&&!xe(s)&&!(s instanceof De)){if(s instanceof en)return s;if(je.call(s,"__wrapped__"))return R0(s)}return new en(s)}var Us=function(){function s(){}return function(c){if(!ot(c))return{};if(S_)return S_(c);s.prototype=c;var f=new s;return s.prototype=t,f}}();function lu(){}function en(s,c){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:HC,evaluate:VC,interpolate:Cw,variable:"",imports:{_:T}},T.prototype=lu.prototype,T.prototype.constructor=T,en.prototype=Us(lu.prototype),en.prototype.constructor=en;function De(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function RN(){var s=new De(this.__wrapped__);return s.__actions__=ur(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=ur(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=ur(this.__views__),s}function kN(){if(this.__filtered__){var s=new De(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function PN(){var s=this.__wrapped__.value(),c=this.__dir__,f=xe(s),h=c<0,y=f?s.length:0,S=VL(0,y,this.__views__),E=S.start,R=S.end,D=R-E,V=h?R:E-1,B=this.__iteratees__,j=B.length,Y=0,oe=Ht(D,this.__takeCount__);if(!f||!h&&y==D&&oe==D)return Q_(s,this.__actions__);var fe=[];e:for(;D--&&Y<oe;){V+=c;for(var Ee=-1,de=s[V];++Ee<j;){var Me=B[Ee],Ie=Me.iteratee,Cr=Me.type,Xt=Ie(de);if(Cr==$)de=Xt;else if(!Xt){if(Cr==I)continue e;break e}}fe[Y++]=de}return fe}De.prototype=Us(lu.prototype),De.prototype.constructor=De;function Co(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var h=s[c];this.set(h[0],h[1])}}function MN(){this.__data__=Ic?Ic(null):{},this.size=0}function AN(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}function DN(s){var c=this.__data__;if(Ic){var f=c[s];return f===a?t:f}return je.call(c,s)?c[s]:t}function IN(s){var c=this.__data__;return Ic?c[s]!==t:je.call(c,s)}function FN(s,c){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=Ic&&c===t?a:c,this}Co.prototype.clear=MN,Co.prototype.delete=AN,Co.prototype.get=DN,Co.prototype.has=IN,Co.prototype.set=FN;function ui(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var h=s[c];this.set(h[0],h[1])}}function CN(){this.__data__=[],this.size=0}function ON(s){var c=this.__data__,f=pu(c,s);if(f<0)return!1;var h=c.length-1;return f==h?c.pop():nu.call(c,f,1),--this.size,!0}function NN(s){var c=this.__data__,f=pu(c,s);return f<0?t:c[f][1]}function LN(s){return pu(this.__data__,s)>-1}function UN(s,c){var f=this.__data__,h=pu(f,s);return h<0?(++this.size,f.push([s,c])):f[h][1]=c,this}ui.prototype.clear=CN,ui.prototype.delete=ON,ui.prototype.get=NN,ui.prototype.has=LN,ui.prototype.set=UN;function fi(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var h=s[c];this.set(h[0],h[1])}}function HN(){this.size=0,this.__data__={hash:new Co,map:new(Ac||ui),string:new Co}}function VN(s){var c=bu(this,s).delete(s);return this.size-=c?1:0,c}function BN(s){return bu(this,s).get(s)}function WN(s){return bu(this,s).has(s)}function $N(s,c){var f=bu(this,s),h=f.size;return f.set(s,c),this.size+=f.size==h?0:1,this}fi.prototype.clear=HN,fi.prototype.delete=VN,fi.prototype.get=BN,fi.prototype.has=WN,fi.prototype.set=$N;function Oo(s){var c=-1,f=s==null?0:s.length;for(this.__data__=new fi;++c<f;)this.add(s[c])}function jN(s){return this.__data__.set(s,a),this}function qN(s){return this.__data__.has(s)}Oo.prototype.add=Oo.prototype.push=jN,Oo.prototype.has=qN;function Rn(s){var c=this.__data__=new ui(s);this.size=c.size}function zN(){this.__data__=new ui,this.size=0}function GN(s){var c=this.__data__,f=c.delete(s);return this.size=c.size,f}function KN(s){return this.__data__.get(s)}function QN(s){return this.__data__.has(s)}function ZN(s,c){var f=this.__data__;if(f instanceof ui){var h=f.__data__;if(!Ac||h.length<r-1)return h.push([s,c]),this.size=++f.size,this;f=this.__data__=new fi(h)}return f.set(s,c),this.size=f.size,this}Rn.prototype.clear=zN,Rn.prototype.delete=GN,Rn.prototype.get=KN,Rn.prototype.has=QN,Rn.prototype.set=ZN;function R_(s,c){var f=xe(s),h=!f&&Vo(s),y=!f&&!h&&Gi(s),S=!f&&!h&&!y&&Ws(s),E=f||h||y||S,R=E?fx(s.length,sN):[],D=R.length;for(var V in s)(c||je.call(s,V))&&!(E&&(V=="length"||y&&(V=="offset"||V=="parent")||S&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||gi(V,D)))&&R.push(V);return R}function k_(s){var c=s.length;return c?s[Mx(0,c-1)]:t}function YN(s,c){return wu(ur(s),No(c,0,s.length))}function XN(s){return wu(ur(s))}function Tx(s,c,f){(f!==t&&!kn(s[c],f)||f===t&&!(c in s))&&di(s,c,f)}function Cc(s,c,f){var h=s[c];(!(je.call(s,c)&&kn(h,f))||f===t&&!(c in s))&&di(s,c,f)}function pu(s,c){for(var f=s.length;f--;)if(kn(s[f][0],c))return f;return-1}function JN(s,c,f,h){return $i(s,function(y,S,E){c(h,y,f(y),E)}),h}function P_(s,c){return s&&Wn(c,Rt(c),s)}function eL(s,c){return s&&Wn(c,dr(c),s)}function di(s,c,f){c=="__proto__"&&iu?iu(s,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[c]=f}function Sx(s,c){for(var f=-1,h=c.length,y=L(h),S=s==null;++f<h;)y[f]=S?t:eT(s,c[f]);return y}function No(s,c,f){return s===s&&(f!==t&&(s=s<=f?s:f),c!==t&&(s=s>=c?s:c)),s}function tn(s,c,f,h,y,S){var E,R=c&u,D=c&d,V=c&m;if(f&&(E=y?f(s,h,y,S):f(s)),E!==t)return E;if(!ot(s))return s;var B=xe(s);if(B){if(E=WL(s),!R)return ur(s,E)}else{var j=Vt(s),Y=j==Ms||j==Aw;if(Gi(s))return X_(s,R);if(j==pi||j==pr||Y&&!y){if(E=D||Y?{}:y0(s),!R)return D?DL(s,eL(E,s)):AL(s,P_(E,s))}else{if(!Qe[j])return y?s:{};E=$L(s,j,R)}}S||(S=new Rn);var oe=S.get(s);if(oe)return oe;S.set(s,E),z0(s)?s.forEach(function(de){E.add(tn(de,c,f,de,s,S))}):j0(s)&&s.forEach(function(de,Me){E.set(Me,tn(de,c,f,Me,s,S))});var fe=V?D?Vx:Hx:D?dr:Rt,Ee=B?t:fe(s);return Xr(Ee||s,function(de,Me){Ee&&(Me=de,de=s[Me]),Cc(E,Me,tn(de,c,f,Me,s,S))}),E}function tL(s){var c=Rt(s);return function(f){return M_(f,s,c)}}function M_(s,c,f){var h=f.length;if(s==null)return!h;for(s=Ge(s);h--;){var y=f[h],S=c[y],E=s[y];if(E===t&&!(y in s)||!S(E))return!1}return!0}function A_(s,c,f){if(typeof s!="function")throw new Jr(i);return Bc(function(){s.apply(t,f)},c)}function Oc(s,c,f,h){var y=-1,S=Gp,E=!0,R=s.length,D=[],V=c.length;if(!R)return D;f&&(c=tt(c,Dr(f))),h?(S=sx,E=!1):c.length>=r&&(S=Pc,E=!1,c=new Oo(c));e:for(;++y<R;){var B=s[y],j=f==null?B:f(B);if(B=h||B!==0?B:0,E&&j===j){for(var Y=V;Y--;)if(c[Y]===j)continue e;D.push(B)}else S(c,j,h)||D.push(B)}return D}var $i=n0(Bn),D_=n0(bx,!0);function rL(s,c){var f=!0;return $i(s,function(h,y,S){return f=!!c(h,y,S),f}),f}function uu(s,c,f){for(var h=-1,y=s.length;++h<y;){var S=s[h],E=c(S);if(E!=null&&(R===t?E===E&&!Fr(E):f(E,R)))var R=E,D=S}return D}function nL(s,c,f,h){var y=s.length;for(f=ve(f),f<0&&(f=-f>y?0:y+f),h=h===t||h>y?y:ve(h),h<0&&(h+=y),h=f>h?0:K0(h);f<h;)s[f++]=c;return s}function I_(s,c){var f=[];return $i(s,function(h,y,S){c(h,y,S)&&f.push(h)}),f}function Ft(s,c,f,h,y){var S=-1,E=s.length;for(f||(f=qL),y||(y=[]);++S<E;){var R=s[S];c>0&&f(R)?c>1?Ft(R,c-1,f,h,y):Hi(y,R):h||(y[y.length]=R)}return y}var vx=i0(),F_=i0(!0);function Bn(s,c){return s&&vx(s,c,Rt)}function bx(s,c){return s&&F_(s,c,Rt)}function fu(s,c){return Ui(c,function(f){return yi(s[f])})}function Lo(s,c){c=qi(c,s);for(var f=0,h=c.length;s!=null&&f<h;)s=s[$n(c[f++])];return f&&f==h?s:t}function C_(s,c,f){var h=c(s);return xe(s)?h:Hi(h,f(s))}function Zt(s){return s==null?s===t?IC:AC:Fo&&Fo in Ge(s)?HL(s):XL(s)}function wx(s,c){return s>c}function iL(s,c){return s!=null&&je.call(s,c)}function oL(s,c){return s!=null&&c in Ge(s)}function sL(s,c,f){return s>=Ht(c,f)&&s<St(c,f)}function _x(s,c,f){for(var h=f?sx:Gp,y=s[0].length,S=s.length,E=S,R=L(S),D=1/0,V=[];E--;){var B=s[E];E&&c&&(B=tt(B,Dr(c))),D=Ht(B.length,D),R[E]=!f&&(c||y>=120&&B.length>=120)?new Oo(E&&B):t}B=s[0];var j=-1,Y=R[0];e:for(;++j<y&&V.length<D;){var oe=B[j],fe=c?c(oe):oe;if(oe=f||oe!==0?oe:0,!(Y?Pc(Y,fe):h(V,fe,f))){for(E=S;--E;){var Ee=R[E];if(!(Ee?Pc(Ee,fe):h(s[E],fe,f)))continue e}Y&&Y.push(fe),V.push(oe)}}return V}function aL(s,c,f,h){return Bn(s,function(y,S,E){c(h,f(y),S,E)}),h}function Nc(s,c,f){c=qi(c,s),s=v0(s,c);var h=s==null?s:s[$n(nn(c))];return h==null?t:Ar(h,s,f)}function O_(s){return lt(s)&&Zt(s)==pr}function cL(s){return lt(s)&&Zt(s)==kc}function lL(s){return lt(s)&&Zt(s)==Zr}function Lc(s,c,f,h,y){return s===c?!0:s==null||c==null||!lt(s)&&!lt(c)?s!==s&&c!==c:pL(s,c,f,h,Lc,y)}function pL(s,c,f,h,y,S){var E=xe(s),R=xe(c),D=E?vn:Vt(s),V=R?vn:Vt(c);D=D==pr?pi:D,V=V==pr?pi:V;var B=D==pi,j=V==pi,Y=D==V;if(Y&&Gi(s)){if(!Gi(c))return!1;E=!0,B=!1}if(Y&&!B)return S||(S=new Rn),E||Ws(s)?m0(s,c,f,h,y,S):LL(s,c,D,f,h,y,S);if(!(f&g)){var oe=B&&je.call(s,"__wrapped__"),fe=j&&je.call(c,"__wrapped__");if(oe||fe){var Ee=oe?s.value():s,de=fe?c.value():c;return S||(S=new Rn),y(Ee,de,f,h,S)}}return Y?(S||(S=new Rn),UL(s,c,f,h,y,S)):!1}function uL(s){return lt(s)&&Vt(s)==wn}function Ex(s,c,f,h){var y=f.length,S=y,E=!h;if(s==null)return!S;for(s=Ge(s);y--;){var R=f[y];if(E&&R[2]?R[1]!==s[R[0]]:!(R[0]in s))return!1}for(;++y<S;){R=f[y];var D=R[0],V=s[D],B=R[1];if(E&&R[2]){if(V===t&&!(D in s))return!1}else{var j=new Rn;if(h)var Y=h(V,B,D,s,c,j);if(!(Y===t?Lc(B,V,g|x,h,j):Y))return!1}}return!0}function N_(s){if(!ot(s)||GL(s))return!1;var c=yi(s)?uN:tO;return c.test(Ho(s))}function fL(s){return lt(s)&&Zt(s)==_c}function dL(s){return lt(s)&&Vt(s)==_n}function mL(s){return lt(s)&&Mu(s.length)&&!!Xe[Zt(s)]}function L_(s){return typeof s=="function"?s:s==null?mr:typeof s=="object"?xe(s)?V_(s[0],s[1]):H_(s):oE(s)}function Rx(s){if(!Vc(s))return yN(s);var c=[];for(var f in Ge(s))je.call(s,f)&&f!="constructor"&&c.push(f);return c}function hL(s){if(!ot(s))return YL(s);var c=Vc(s),f=[];for(var h in s)h=="constructor"&&(c||!je.call(s,h))||f.push(h);return f}function kx(s,c){return s<c}function U_(s,c){var f=-1,h=fr(s)?L(s.length):[];return $i(s,function(y,S,E){h[++f]=c(y,S,E)}),h}function H_(s){var c=Wx(s);return c.length==1&&c[0][2]?T0(c[0][0],c[0][1]):function(f){return f===s||Ex(f,s,c)}}function V_(s,c){return jx(s)&&x0(c)?T0($n(s),c):function(f){var h=eT(f,s);return h===t&&h===c?tT(f,s):Lc(c,h,g|x)}}function du(s,c,f,h,y){s!==c&&vx(c,function(S,E){if(y||(y=new Rn),ot(S))gL(s,c,E,f,du,h,y);else{var R=h?h(zx(s,E),S,E+"",s,c,y):t;R===t&&(R=S),Tx(s,E,R)}},dr)}function gL(s,c,f,h,y,S,E){var R=zx(s,f),D=zx(c,f),V=E.get(D);if(V){Tx(s,f,V);return}var B=S?S(R,D,f+"",s,c,E):t,j=B===t;if(j){var Y=xe(D),oe=!Y&&Gi(D),fe=!Y&&!oe&&Ws(D);B=D,Y||oe||fe?xe(R)?B=R:ft(R)?B=ur(R):oe?(j=!1,B=X_(D,!0)):fe?(j=!1,B=J_(D,!0)):B=[]:Wc(D)||Vo(D)?(B=R,Vo(R)?B=Q0(R):(!ot(R)||yi(R))&&(B=y0(D))):j=!1}j&&(E.set(D,B),y(B,D,h,S,E),E.delete(D)),Tx(s,f,B)}function B_(s,c){var f=s.length;if(f)return c+=c<0?f:0,gi(c,f)?s[c]:t}function W_(s,c,f){c.length?c=tt(c,function(S){return xe(S)?function(E){return Lo(E,S.length===1?S[0]:S)}:S}):c=[mr];var h=-1;c=tt(c,Dr(ue()));var y=U_(s,function(S,E,R){var D=tt(c,function(V){return V(S)});return{criteria:D,index:++h,value:S}});return $O(y,function(S,E){return ML(S,E,f)})}function yL(s,c){return $_(s,c,function(f,h){return tT(s,h)})}function $_(s,c,f){for(var h=-1,y=c.length,S={};++h<y;){var E=c[h],R=Lo(s,E);f(R,E)&&Uc(S,qi(E,s),R)}return S}function xL(s){return function(c){return Lo(c,s)}}function Px(s,c,f,h){var y=h?WO:Is,S=-1,E=c.length,R=s;for(s===c&&(c=ur(c)),f&&(R=tt(s,Dr(f)));++S<E;)for(var D=0,V=c[S],B=f?f(V):V;(D=y(R,B,D,h))>-1;)R!==s&&nu.call(R,D,1),nu.call(s,D,1);return s}function j_(s,c){for(var f=s?c.length:0,h=f-1;f--;){var y=c[f];if(f==h||y!==S){var S=y;gi(y)?nu.call(s,y,1):Ix(s,y)}}return s}function Mx(s,c){return s+su(__()*(c-s+1))}function TL(s,c,f,h){for(var y=-1,S=St(ou((c-s)/(f||1)),0),E=L(S);S--;)E[h?S:++y]=s,s+=f;return E}function Ax(s,c){var f="";if(!s||c<1||c>Z)return f;do c%2&&(f+=s),c=su(c/2),c&&(s+=s);while(c);return f}function ke(s,c){return Gx(S0(s,c,mr),s+"")}function SL(s){return k_($s(s))}function vL(s,c){var f=$s(s);return wu(f,No(c,0,f.length))}function Uc(s,c,f,h){if(!ot(s))return s;c=qi(c,s);for(var y=-1,S=c.length,E=S-1,R=s;R!=null&&++y<S;){var D=$n(c[y]),V=f;if(D==="__proto__"||D==="constructor"||D==="prototype")return s;if(y!=E){var B=R[D];V=h?h(B,D,R):t,V===t&&(V=ot(B)?B:gi(c[y+1])?[]:{})}Cc(R,D,V),R=R[D]}return s}var q_=au?function(s,c){return au.set(s,c),s}:mr,bL=iu?function(s,c){return iu(s,"toString",{configurable:!0,enumerable:!1,value:nT(c),writable:!0})}:mr;function wL(s){return wu($s(s))}function rn(s,c,f){var h=-1,y=s.length;c<0&&(c=-c>y?0:y+c),f=f>y?y:f,f<0&&(f+=y),y=c>f?0:f-c>>>0,c>>>=0;for(var S=L(y);++h<y;)S[h]=s[h+c];return S}function _L(s,c){var f;return $i(s,function(h,y,S){return f=c(h,y,S),!f}),!!f}function mu(s,c,f){var h=0,y=s==null?h:s.length;if(typeof c=="number"&&c===c&&y<=lr){for(;h<y;){var S=h+y>>>1,E=s[S];E!==null&&!Fr(E)&&(f?E<=c:E<c)?h=S+1:y=S}return y}return Dx(s,c,mr,f)}function Dx(s,c,f,h){var y=0,S=s==null?0:s.length;if(S===0)return 0;c=f(c);for(var E=c!==c,R=c===null,D=Fr(c),V=c===t;y<S;){var B=su((y+S)/2),j=f(s[B]),Y=j!==t,oe=j===null,fe=j===j,Ee=Fr(j);if(E)var de=h||fe;else V?de=fe&&(h||Y):R?de=fe&&Y&&(h||!oe):D?de=fe&&Y&&!oe&&(h||!Ee):oe||Ee?de=!1:de=h?j<=c:j<c;de?y=B+1:S=B}return Ht(S,Re)}function z_(s,c){for(var f=-1,h=s.length,y=0,S=[];++f<h;){var E=s[f],R=c?c(E):E;if(!f||!kn(R,D)){var D=R;S[y++]=E===0?0:E}}return S}function G_(s){return typeof s=="number"?s:Fr(s)?he:+s}function Ir(s){if(typeof s=="string")return s;if(xe(s))return tt(s,Ir)+"";if(Fr(s))return E_?E_.call(s):"";var c=s+"";return c=="0"&&1/s==-Q?"-0":c}function ji(s,c,f){var h=-1,y=Gp,S=s.length,E=!0,R=[],D=R;if(f)E=!1,y=sx;else if(S>=r){var V=c?null:OL(s);if(V)return Qp(V);E=!1,y=Pc,D=new Oo}else D=c?[]:R;e:for(;++h<S;){var B=s[h],j=c?c(B):B;if(B=f||B!==0?B:0,E&&j===j){for(var Y=D.length;Y--;)if(D[Y]===j)continue e;c&&D.push(j),R.push(B)}else y(D,j,f)||(D!==R&&D.push(j),R.push(B))}return R}function Ix(s,c){return c=qi(c,s),s=v0(s,c),s==null||delete s[$n(nn(c))]}function K_(s,c,f,h){return Uc(s,c,f(Lo(s,c)),h)}function hu(s,c,f,h){for(var y=s.length,S=h?y:-1;(h?S--:++S<y)&&c(s[S],S,s););return f?rn(s,h?0:S,h?S+1:y):rn(s,h?S+1:0,h?y:S)}function Q_(s,c){var f=s;return f instanceof De&&(f=f.value()),ax(c,function(h,y){return y.func.apply(y.thisArg,Hi([h],y.args))},f)}function Fx(s,c,f){var h=s.length;if(h<2)return h?ji(s[0]):[];for(var y=-1,S=L(h);++y<h;)for(var E=s[y],R=-1;++R<h;)R!=y&&(S[y]=Oc(S[y]||E,s[R],c,f));return ji(Ft(S,1),c,f)}function Z_(s,c,f){for(var h=-1,y=s.length,S=c.length,E={};++h<y;){var R=h<S?c[h]:t;f(E,s[h],R)}return E}function Cx(s){return ft(s)?s:[]}function Ox(s){return typeof s=="function"?s:mr}function qi(s,c){return xe(s)?s:jx(s,c)?[s]:E0(We(s))}var EL=ke;function zi(s,c,f){var h=s.length;return f=f===t?h:f,!c&&f>=h?s:rn(s,c,f)}var Y_=fN||function(s){return Et.clearTimeout(s)};function X_(s,c){if(c)return s.slice();var f=s.length,h=T_?T_(f):new s.constructor(f);return s.copy(h),h}function Nx(s){var c=new s.constructor(s.byteLength);return new tu(c).set(new tu(s)),c}function RL(s,c){var f=c?Nx(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.byteLength)}function kL(s){var c=new s.constructor(s.source,Ow.exec(s));return c.lastIndex=s.lastIndex,c}function PL(s){return Fc?Ge(Fc.call(s)):{}}function J_(s,c){var f=c?Nx(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}function e0(s,c){if(s!==c){var f=s!==t,h=s===null,y=s===s,S=Fr(s),E=c!==t,R=c===null,D=c===c,V=Fr(c);if(!R&&!V&&!S&&s>c||S&&E&&D&&!R&&!V||h&&E&&D||!f&&D||!y)return 1;if(!h&&!S&&!V&&s<c||V&&f&&y&&!h&&!S||R&&f&&y||!E&&y||!D)return-1}return 0}function ML(s,c,f){for(var h=-1,y=s.criteria,S=c.criteria,E=y.length,R=f.length;++h<E;){var D=e0(y[h],S[h]);if(D){if(h>=R)return D;var V=f[h];return D*(V=="desc"?-1:1)}}return s.index-c.index}function t0(s,c,f,h){for(var y=-1,S=s.length,E=f.length,R=-1,D=c.length,V=St(S-E,0),B=L(D+V),j=!h;++R<D;)B[R]=c[R];for(;++y<E;)(j||y<S)&&(B[f[y]]=s[y]);for(;V--;)B[R++]=s[y++];return B}function r0(s,c,f,h){for(var y=-1,S=s.length,E=-1,R=f.length,D=-1,V=c.length,B=St(S-R,0),j=L(B+V),Y=!h;++y<B;)j[y]=s[y];for(var oe=y;++D<V;)j[oe+D]=c[D];for(;++E<R;)(Y||y<S)&&(j[oe+f[E]]=s[y++]);return j}function ur(s,c){var f=-1,h=s.length;for(c||(c=L(h));++f<h;)c[f]=s[f];return c}function Wn(s,c,f,h){var y=!f;f||(f={});for(var S=-1,E=c.length;++S<E;){var R=c[S],D=h?h(f[R],s[R],R,f,s):t;D===t&&(D=s[R]),y?di(f,R,D):Cc(f,R,D)}return f}function AL(s,c){return Wn(s,$x(s),c)}function DL(s,c){return Wn(s,h0(s),c)}function gu(s,c){return function(f,h){var y=xe(f)?NO:JN,S=c?c():{};return y(f,s,ue(h,2),S)}}function Hs(s){return ke(function(c,f){var h=-1,y=f.length,S=y>1?f[y-1]:t,E=y>2?f[2]:t;for(S=s.length>3&&typeof S=="function"?(y--,S):t,E&&Yt(f[0],f[1],E)&&(S=y<3?t:S,y=1),c=Ge(c);++h<y;){var R=f[h];R&&s(c,R,h,S)}return c})}function n0(s,c){return function(f,h){if(f==null)return f;if(!fr(f))return s(f,h);for(var y=f.length,S=c?y:-1,E=Ge(f);(c?S--:++S<y)&&h(E[S],S,E)!==!1;);return f}}function i0(s){return function(c,f,h){for(var y=-1,S=Ge(c),E=h(c),R=E.length;R--;){var D=E[s?R:++y];if(f(S[D],D,S)===!1)break}return c}}function IL(s,c,f){var h=c&v,y=Hc(s);function S(){var E=this&&this!==Et&&this instanceof S?y:s;return E.apply(h?f:this,arguments)}return S}function o0(s){return function(c){c=We(c);var f=Fs(c)?En(c):t,h=f?f[0]:c.charAt(0),y=f?zi(f,1).join(""):c.slice(1);return h[s]()+y}}function Vs(s){return function(c){return ax(nE(rE(c).replace(bO,"")),s,"")}}function Hc(s){return function(){var c=arguments;switch(c.length){case 0:return new s;case 1:return new s(c[0]);case 2:return new s(c[0],c[1]);case 3:return new s(c[0],c[1],c[2]);case 4:return new s(c[0],c[1],c[2],c[3]);case 5:return new s(c[0],c[1],c[2],c[3],c[4]);case 6:return new s(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new s(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=Us(s.prototype),h=s.apply(f,c);return ot(h)?h:f}}function FL(s,c,f){var h=Hc(s);function y(){for(var S=arguments.length,E=L(S),R=S,D=Bs(y);R--;)E[R]=arguments[R];var V=S<3&&E[0]!==D&&E[S-1]!==D?[]:Vi(E,D);if(S-=V.length,S<f)return p0(s,c,yu,y.placeholder,t,E,V,t,t,f-S);var B=this&&this!==Et&&this instanceof y?h:s;return Ar(B,this,E)}return y}function s0(s){return function(c,f,h){var y=Ge(c);if(!fr(c)){var S=ue(f,3);c=Rt(c),f=function(R){return S(y[R],R,y)}}var E=s(c,f,h);return E>-1?y[S?c[E]:E]:t}}function a0(s){return hi(function(c){var f=c.length,h=f,y=en.prototype.thru;for(s&&c.reverse();h--;){var S=c[h];if(typeof S!="function")throw new Jr(i);if(y&&!E&&vu(S)=="wrapper")var E=new en([],!0)}for(h=E?h:f;++h<f;){S=c[h];var R=vu(S),D=R=="wrapper"?Bx(S):t;D&&qx(D[0])&&D[1]==(ie|M|K|ae)&&!D[4].length&&D[9]==1?E=E[vu(D[0])].apply(E,D[3]):E=S.length==1&&qx(S)?E[R]():E.thru(S)}return function(){var V=arguments,B=V[0];if(E&&V.length==1&&xe(B))return E.plant(B).value();for(var j=0,Y=f?c[j].apply(this,V):B;++j<f;)Y=c[j].call(this,Y);return Y}})}function yu(s,c,f,h,y,S,E,R,D,V){var B=c&ie,j=c&v,Y=c&b,oe=c&(M|U),fe=c&it,Ee=Y?t:Hc(s);function de(){for(var Me=arguments.length,Ie=L(Me),Cr=Me;Cr--;)Ie[Cr]=arguments[Cr];if(oe)var Xt=Bs(de),Or=qO(Ie,Xt);if(h&&(Ie=t0(Ie,h,y,oe)),S&&(Ie=r0(Ie,S,E,oe)),Me-=Or,oe&&Me<V){var dt=Vi(Ie,Xt);return p0(s,c,yu,de.placeholder,f,Ie,dt,R,D,V-Me)}var Pn=j?f:this,Ti=Y?Pn[s]:s;return Me=Ie.length,R?Ie=JL(Ie,R):fe&&Me>1&&Ie.reverse(),B&&D<Me&&(Ie.length=D),this&&this!==Et&&this instanceof de&&(Ti=Ee||Hc(Ti)),Ti.apply(Pn,Ie)}return de}function c0(s,c){return function(f,h){return aL(f,s,c(h),{})}}function xu(s,c){return function(f,h){var y;if(f===t&&h===t)return c;if(f!==t&&(y=f),h!==t){if(y===t)return h;typeof f=="string"||typeof h=="string"?(f=Ir(f),h=Ir(h)):(f=G_(f),h=G_(h)),y=s(f,h)}return y}}function Lx(s){return hi(function(c){return c=tt(c,Dr(ue())),ke(function(f){var h=this;return s(c,function(y){return Ar(y,h,f)})})})}function Tu(s,c){c=c===t?" ":Ir(c);var f=c.length;if(f<2)return f?Ax(c,s):c;var h=Ax(c,ou(s/Cs(c)));return Fs(c)?zi(En(h),0,s).join(""):h.slice(0,s)}function CL(s,c,f,h){var y=c&v,S=Hc(s);function E(){for(var R=-1,D=arguments.length,V=-1,B=h.length,j=L(B+D),Y=this&&this!==Et&&this instanceof E?S:s;++V<B;)j[V]=h[V];for(;D--;)j[V++]=arguments[++R];return Ar(Y,y?f:this,j)}return E}function l0(s){return function(c,f,h){return h&&typeof h!="number"&&Yt(c,f,h)&&(f=h=t),c=xi(c),f===t?(f=c,c=0):f=xi(f),h=h===t?c<f?1:-1:xi(h),TL(c,f,h,s)}}function Su(s){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=on(c),f=on(f)),s(c,f)}}function p0(s,c,f,h,y,S,E,R,D,V){var B=c&M,j=B?E:t,Y=B?t:E,oe=B?S:t,fe=B?t:S;c|=B?K:ne,c&=~(B?ne:K),c&F||(c&=~(v|b));var Ee=[s,c,y,oe,j,fe,Y,R,D,V],de=f.apply(t,Ee);return qx(s)&&b0(de,Ee),de.placeholder=h,w0(de,s,c)}function Ux(s){var c=Tt[s];return function(f,h){if(f=on(f),h=h==null?0:Ht(ve(h),292),h&&w_(f)){var y=(We(f)+"e").split("e"),S=c(y[0]+"e"+(+y[1]+h));return y=(We(S)+"e").split("e"),+(y[0]+"e"+(+y[1]-h))}return c(f)}}var OL=Ns&&1/Qp(new Ns([,-0]))[1]==Q?function(s){return new Ns(s)}:sT;function u0(s){return function(c){var f=Vt(c);return f==wn?mx(c):f==_n?XO(c):jO(c,s(c))}}function mi(s,c,f,h,y,S,E,R){var D=c&b;if(!D&&typeof s!="function")throw new Jr(i);var V=h?h.length:0;if(V||(c&=~(K|ne),h=y=t),E=E===t?E:St(ve(E),0),R=R===t?R:ve(R),V-=y?y.length:0,c&ne){var B=h,j=y;h=y=t}var Y=D?t:Bx(s),oe=[s,c,f,h,y,B,j,S,E,R];if(Y&&ZL(oe,Y),s=oe[0],c=oe[1],f=oe[2],h=oe[3],y=oe[4],R=oe[9]=oe[9]===t?D?0:s.length:St(oe[9]-V,0),!R&&c&(M|U)&&(c&=~(M|U)),!c||c==v)var fe=IL(s,c,f);else c==M||c==U?fe=FL(s,c,R):(c==K||c==(v|K))&&!y.length?fe=CL(s,c,f,h):fe=yu.apply(t,oe);var Ee=Y?q_:b0;return w0(Ee(fe,oe),s,c)}function f0(s,c,f,h){return s===t||kn(s,Os[f])&&!je.call(h,f)?c:s}function d0(s,c,f,h,y,S){return ot(s)&&ot(c)&&(S.set(c,s),du(s,c,t,d0,S),S.delete(c)),s}function NL(s){return Wc(s)?t:s}function m0(s,c,f,h,y,S){var E=f&g,R=s.length,D=c.length;if(R!=D&&!(E&&D>R))return!1;var V=S.get(s),B=S.get(c);if(V&&B)return V==c&&B==s;var j=-1,Y=!0,oe=f&x?new Oo:t;for(S.set(s,c),S.set(c,s);++j<R;){var fe=s[j],Ee=c[j];if(h)var de=E?h(Ee,fe,j,c,s,S):h(fe,Ee,j,s,c,S);if(de!==t){if(de)continue;Y=!1;break}if(oe){if(!cx(c,function(Me,Ie){if(!Pc(oe,Ie)&&(fe===Me||y(fe,Me,f,h,S)))return oe.push(Ie)})){Y=!1;break}}else if(!(fe===Ee||y(fe,Ee,f,h,S))){Y=!1;break}}return S.delete(s),S.delete(c),Y}function LL(s,c,f,h,y,S,E){switch(f){case As:if(s.byteLength!=c.byteLength||s.byteOffset!=c.byteOffset)return!1;s=s.buffer,c=c.buffer;case kc:return!(s.byteLength!=c.byteLength||!S(new tu(s),new tu(c)));case bn:case Zr:case wc:return kn(+s,+c);case li:return s.name==c.name&&s.message==c.message;case _c:case Ec:return s==c+"";case wn:var R=mx;case _n:var D=h&g;if(R||(R=Qp),s.size!=c.size&&!D)return!1;var V=E.get(s);if(V)return V==c;h|=x,E.set(s,c);var B=m0(R(s),R(c),h,y,S,E);return E.delete(s),B;case $p:if(Fc)return Fc.call(s)==Fc.call(c)}return!1}function UL(s,c,f,h,y,S){var E=f&g,R=Hx(s),D=R.length,V=Hx(c),B=V.length;if(D!=B&&!E)return!1;for(var j=D;j--;){var Y=R[j];if(!(E?Y in c:je.call(c,Y)))return!1}var oe=S.get(s),fe=S.get(c);if(oe&&fe)return oe==c&&fe==s;var Ee=!0;S.set(s,c),S.set(c,s);for(var de=E;++j<D;){Y=R[j];var Me=s[Y],Ie=c[Y];if(h)var Cr=E?h(Ie,Me,Y,c,s,S):h(Me,Ie,Y,s,c,S);if(!(Cr===t?Me===Ie||y(Me,Ie,f,h,S):Cr)){Ee=!1;break}de||(de=Y=="constructor")}if(Ee&&!de){var Xt=s.constructor,Or=c.constructor;Xt!=Or&&"constructor"in s&&"constructor"in c&&!(typeof Xt=="function"&&Xt instanceof Xt&&typeof Or=="function"&&Or instanceof Or)&&(Ee=!1)}return S.delete(s),S.delete(c),Ee}function hi(s){return Gx(S0(s,t,M0),s+"")}function Hx(s){return C_(s,Rt,$x)}function Vx(s){return C_(s,dr,h0)}var Bx=au?function(s){return au.get(s)}:sT;function vu(s){for(var c=s.name+"",f=Ls[c],h=je.call(Ls,c)?f.length:0;h--;){var y=f[h],S=y.func;if(S==null||S==s)return y.name}return c}function Bs(s){var c=je.call(T,"placeholder")?T:s;return c.placeholder}function ue(){var s=T.iteratee||iT;return s=s===iT?L_:s,arguments.length?s(arguments[0],arguments[1]):s}function bu(s,c){var f=s.__data__;return zL(c)?f[typeof c=="string"?"string":"hash"]:f.map}function Wx(s){for(var c=Rt(s),f=c.length;f--;){var h=c[f],y=s[h];c[f]=[h,y,x0(y)]}return c}function Uo(s,c){var f=QO(s,c);return N_(f)?f:t}function HL(s){var c=je.call(s,Fo),f=s[Fo];try{s[Fo]=t;var h=!0}catch{}var y=Jp.call(s);return h&&(c?s[Fo]=f:delete s[Fo]),y}var $x=gx?function(s){return s==null?[]:(s=Ge(s),Ui(gx(s),function(c){return v_.call(s,c)}))}:aT,h0=gx?function(s){for(var c=[];s;)Hi(c,$x(s)),s=ru(s);return c}:aT,Vt=Zt;(yx&&Vt(new yx(new ArrayBuffer(1)))!=As||Ac&&Vt(new Ac)!=wn||xx&&Vt(xx.resolve())!=Dw||Ns&&Vt(new Ns)!=_n||Dc&&Vt(new Dc)!=Rc)&&(Vt=function(s){var c=Zt(s),f=c==pi?s.constructor:t,h=f?Ho(f):"";if(h)switch(h){case vN:return As;case bN:return wn;case wN:return Dw;case _N:return _n;case EN:return Rc}return c});function VL(s,c,f){for(var h=-1,y=f.length;++h<y;){var S=f[h],E=S.size;switch(S.type){case"drop":s+=E;break;case"dropRight":c-=E;break;case"take":c=Ht(c,s+E);break;case"takeRight":s=St(s,c-E);break}}return{start:s,end:c}}function BL(s){var c=s.match(GC);return c?c[1].split(KC):[]}function g0(s,c,f){c=qi(c,s);for(var h=-1,y=c.length,S=!1;++h<y;){var E=$n(c[h]);if(!(S=s!=null&&f(s,E)))break;s=s[E]}return S||++h!=y?S:(y=s==null?0:s.length,!!y&&Mu(y)&&gi(E,y)&&(xe(s)||Vo(s)))}function WL(s){var c=s.length,f=new s.constructor(c);return c&&typeof s[0]=="string"&&je.call(s,"index")&&(f.index=s.index,f.input=s.input),f}function y0(s){return typeof s.constructor=="function"&&!Vc(s)?Us(ru(s)):{}}function $L(s,c,f){var h=s.constructor;switch(c){case kc:return Nx(s);case bn:case Zr:return new h(+s);case As:return RL(s,f);case Wy:case $y:case jy:case qy:case zy:case Gy:case Ky:case Qy:case Zy:return J_(s,f);case wn:return new h;case wc:case Ec:return new h(s);case _c:return kL(s);case _n:return new h;case $p:return PL(s)}}function jL(s,c){var f=c.length;if(!f)return s;var h=f-1;return c[h]=(f>1?"& ":"")+c[h],c=c.join(f>2?", ":" "),s.replace(zC,`{
/* [wrapped with `+c+`] */
`)}function qL(s){return xe(s)||Vo(s)||!!(b_&&s&&s[b_])}function gi(s,c){var f=typeof s;return c=c??Z,!!c&&(f=="number"||f!="symbol"&&nO.test(s))&&s>-1&&s%1==0&&s<c}function Yt(s,c,f){if(!ot(f))return!1;var h=typeof c;return(h=="number"?fr(f)&&gi(c,f.length):h=="string"&&c in f)?kn(f[c],s):!1}function jx(s,c){if(xe(s))return!1;var f=typeof s;return f=="number"||f=="symbol"||f=="boolean"||s==null||Fr(s)?!0:WC.test(s)||!BC.test(s)||c!=null&&s in Ge(c)}function zL(s){var c=typeof s;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?s!=="__proto__":s===null}function qx(s){var c=vu(s),f=T[c];if(typeof f!="function"||!(c in De.prototype))return!1;if(s===f)return!0;var h=Bx(f);return!!h&&s===h[0]}function GL(s){return!!x_&&x_ in s}var KL=Yp?yi:cT;function Vc(s){var c=s&&s.constructor,f=typeof c=="function"&&c.prototype||Os;return s===f}function x0(s){return s===s&&!ot(s)}function T0(s,c){return function(f){return f==null?!1:f[s]===c&&(c!==t||s in Ge(f))}}function QL(s){var c=ku(s,function(h){return f.size===l&&f.clear(),h}),f=c.cache;return c}function ZL(s,c){var f=s[1],h=c[1],y=f|h,S=y<(v|b|ie),E=h==ie&&f==M||h==ie&&f==ae&&s[7].length<=c[8]||h==(ie|ae)&&c[7].length<=c[8]&&f==M;if(!(S||E))return s;h&v&&(s[2]=c[2],y|=f&v?0:F);var R=c[3];if(R){var D=s[3];s[3]=D?t0(D,R,c[4]):R,s[4]=D?Vi(s[3],p):c[4]}return R=c[5],R&&(D=s[5],s[5]=D?r0(D,R,c[6]):R,s[6]=D?Vi(s[5],p):c[6]),R=c[7],R&&(s[7]=R),h&ie&&(s[8]=s[8]==null?c[8]:Ht(s[8],c[8])),s[9]==null&&(s[9]=c[9]),s[0]=c[0],s[1]=y,s}function YL(s){var c=[];if(s!=null)for(var f in Ge(s))c.push(f);return c}function XL(s){return Jp.call(s)}function S0(s,c,f){return c=St(c===t?s.length-1:c,0),function(){for(var h=arguments,y=-1,S=St(h.length-c,0),E=L(S);++y<S;)E[y]=h[c+y];y=-1;for(var R=L(c+1);++y<c;)R[y]=h[y];return R[c]=f(E),Ar(s,this,R)}}function v0(s,c){return c.length<2?s:Lo(s,rn(c,0,-1))}function JL(s,c){for(var f=s.length,h=Ht(c.length,f),y=ur(s);h--;){var S=c[h];s[h]=gi(S,f)?y[S]:t}return s}function zx(s,c){if(!(c==="constructor"&&typeof s[c]=="function")&&c!="__proto__")return s[c]}var b0=_0(q_),Bc=mN||function(s,c){return Et.setTimeout(s,c)},Gx=_0(bL);function w0(s,c,f){var h=c+"";return Gx(s,jL(h,eU(BL(h),f)))}function _0(s){var c=0,f=0;return function(){var h=xN(),y=O-(h-f);if(f=h,y>0){if(++c>=N)return arguments[0]}else c=0;return s.apply(t,arguments)}}function wu(s,c){var f=-1,h=s.length,y=h-1;for(c=c===t?h:c;++f<c;){var S=Mx(f,y),E=s[S];s[S]=s[f],s[f]=E}return s.length=c,s}var E0=QL(function(s){var c=[];return s.charCodeAt(0)===46&&c.push(""),s.replace($C,function(f,h,y,S){c.push(y?S.replace(YC,"$1"):h||f)}),c});function $n(s){if(typeof s=="string"||Fr(s))return s;var c=s+"";return c=="0"&&1/s==-Q?"-0":c}function Ho(s){if(s!=null){try{return Xp.call(s)}catch{}try{return s+""}catch{}}return""}function eU(s,c){return Xr(ci,function(f){var h="_."+f[0];c&f[1]&&!Gp(s,h)&&s.push(h)}),s.sort()}function R0(s){if(s instanceof De)return s.clone();var c=new en(s.__wrapped__,s.__chain__);return c.__actions__=ur(s.__actions__),c.__index__=s.__index__,c.__values__=s.__values__,c}function tU(s,c,f){(f?Yt(s,c,f):c===t)?c=1:c=St(ve(c),0);var h=s==null?0:s.length;if(!h||c<1)return[];for(var y=0,S=0,E=L(ou(h/c));y<h;)E[S++]=rn(s,y,y+=c);return E}function rU(s){for(var c=-1,f=s==null?0:s.length,h=0,y=[];++c<f;){var S=s[c];S&&(y[h++]=S)}return y}function nU(){var s=arguments.length;if(!s)return[];for(var c=L(s-1),f=arguments[0],h=s;h--;)c[h-1]=arguments[h];return Hi(xe(f)?ur(f):[f],Ft(c,1))}var iU=ke(function(s,c){return ft(s)?Oc(s,Ft(c,1,ft,!0)):[]}),oU=ke(function(s,c){var f=nn(c);return ft(f)&&(f=t),ft(s)?Oc(s,Ft(c,1,ft,!0),ue(f,2)):[]}),sU=ke(function(s,c){var f=nn(c);return ft(f)&&(f=t),ft(s)?Oc(s,Ft(c,1,ft,!0),t,f):[]});function aU(s,c,f){var h=s==null?0:s.length;return h?(c=f||c===t?1:ve(c),rn(s,c<0?0:c,h)):[]}function cU(s,c,f){var h=s==null?0:s.length;return h?(c=f||c===t?1:ve(c),c=h-c,rn(s,0,c<0?0:c)):[]}function lU(s,c){return s&&s.length?hu(s,ue(c,3),!0,!0):[]}function pU(s,c){return s&&s.length?hu(s,ue(c,3),!0):[]}function uU(s,c,f,h){var y=s==null?0:s.length;return y?(f&&typeof f!="number"&&Yt(s,c,f)&&(f=0,h=y),nL(s,c,f,h)):[]}function k0(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=f==null?0:ve(f);return y<0&&(y=St(h+y,0)),Kp(s,ue(c,3),y)}function P0(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=h-1;return f!==t&&(y=ve(f),y=f<0?St(h+y,0):Ht(y,h-1)),Kp(s,ue(c,3),y,!0)}function M0(s){var c=s==null?0:s.length;return c?Ft(s,1):[]}function fU(s){var c=s==null?0:s.length;return c?Ft(s,Q):[]}function dU(s,c){var f=s==null?0:s.length;return f?(c=c===t?1:ve(c),Ft(s,c)):[]}function mU(s){for(var c=-1,f=s==null?0:s.length,h={};++c<f;){var y=s[c];h[y[0]]=y[1]}return h}function A0(s){return s&&s.length?s[0]:t}function hU(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=f==null?0:ve(f);return y<0&&(y=St(h+y,0)),Is(s,c,y)}function gU(s){var c=s==null?0:s.length;return c?rn(s,0,-1):[]}var yU=ke(function(s){var c=tt(s,Cx);return c.length&&c[0]===s[0]?_x(c):[]}),xU=ke(function(s){var c=nn(s),f=tt(s,Cx);return c===nn(f)?c=t:f.pop(),f.length&&f[0]===s[0]?_x(f,ue(c,2)):[]}),TU=ke(function(s){var c=nn(s),f=tt(s,Cx);return c=typeof c=="function"?c:t,c&&f.pop(),f.length&&f[0]===s[0]?_x(f,t,c):[]});function SU(s,c){return s==null?"":gN.call(s,c)}function nn(s){var c=s==null?0:s.length;return c?s[c-1]:t}function vU(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=h;return f!==t&&(y=ve(f),y=y<0?St(h+y,0):Ht(y,h-1)),c===c?eN(s,c,y):Kp(s,p_,y,!0)}function bU(s,c){return s&&s.length?B_(s,ve(c)):t}var wU=ke(D0);function D0(s,c){return s&&s.length&&c&&c.length?Px(s,c):s}function _U(s,c,f){return s&&s.length&&c&&c.length?Px(s,c,ue(f,2)):s}function EU(s,c,f){return s&&s.length&&c&&c.length?Px(s,c,t,f):s}var RU=hi(function(s,c){var f=s==null?0:s.length,h=Sx(s,c);return j_(s,tt(c,function(y){return gi(y,f)?+y:y}).sort(e0)),h});function kU(s,c){var f=[];if(!(s&&s.length))return f;var h=-1,y=[],S=s.length;for(c=ue(c,3);++h<S;){var E=s[h];c(E,h,s)&&(f.push(E),y.push(h))}return j_(s,y),f}function Kx(s){return s==null?s:SN.call(s)}function PU(s,c,f){var h=s==null?0:s.length;return h?(f&&typeof f!="number"&&Yt(s,c,f)?(c=0,f=h):(c=c==null?0:ve(c),f=f===t?h:ve(f)),rn(s,c,f)):[]}function MU(s,c){return mu(s,c)}function AU(s,c,f){return Dx(s,c,ue(f,2))}function DU(s,c){var f=s==null?0:s.length;if(f){var h=mu(s,c);if(h<f&&kn(s[h],c))return h}return-1}function IU(s,c){return mu(s,c,!0)}function FU(s,c,f){return Dx(s,c,ue(f,2),!0)}function CU(s,c){var f=s==null?0:s.length;if(f){var h=mu(s,c,!0)-1;if(kn(s[h],c))return h}return-1}function OU(s){return s&&s.length?z_(s):[]}function NU(s,c){return s&&s.length?z_(s,ue(c,2)):[]}function LU(s){var c=s==null?0:s.length;return c?rn(s,1,c):[]}function UU(s,c,f){return s&&s.length?(c=f||c===t?1:ve(c),rn(s,0,c<0?0:c)):[]}function HU(s,c,f){var h=s==null?0:s.length;return h?(c=f||c===t?1:ve(c),c=h-c,rn(s,c<0?0:c,h)):[]}function VU(s,c){return s&&s.length?hu(s,ue(c,3),!1,!0):[]}function BU(s,c){return s&&s.length?hu(s,ue(c,3)):[]}var WU=ke(function(s){return ji(Ft(s,1,ft,!0))}),$U=ke(function(s){var c=nn(s);return ft(c)&&(c=t),ji(Ft(s,1,ft,!0),ue(c,2))}),jU=ke(function(s){var c=nn(s);return c=typeof c=="function"?c:t,ji(Ft(s,1,ft,!0),t,c)});function qU(s){return s&&s.length?ji(s):[]}function zU(s,c){return s&&s.length?ji(s,ue(c,2)):[]}function GU(s,c){return c=typeof c=="function"?c:t,s&&s.length?ji(s,t,c):[]}function Qx(s){if(!(s&&s.length))return[];var c=0;return s=Ui(s,function(f){if(ft(f))return c=St(f.length,c),!0}),fx(c,function(f){return tt(s,lx(f))})}function I0(s,c){if(!(s&&s.length))return[];var f=Qx(s);return c==null?f:tt(f,function(h){return Ar(c,t,h)})}var KU=ke(function(s,c){return ft(s)?Oc(s,c):[]}),QU=ke(function(s){return Fx(Ui(s,ft))}),ZU=ke(function(s){var c=nn(s);return ft(c)&&(c=t),Fx(Ui(s,ft),ue(c,2))}),YU=ke(function(s){var c=nn(s);return c=typeof c=="function"?c:t,Fx(Ui(s,ft),t,c)}),XU=ke(Qx);function JU(s,c){return Z_(s||[],c||[],Cc)}function eH(s,c){return Z_(s||[],c||[],Uc)}var tH=ke(function(s){var c=s.length,f=c>1?s[c-1]:t;return f=typeof f=="function"?(s.pop(),f):t,I0(s,f)});function F0(s){var c=T(s);return c.__chain__=!0,c}function rH(s,c){return c(s),s}function _u(s,c){return c(s)}var nH=hi(function(s){var c=s.length,f=c?s[0]:0,h=this.__wrapped__,y=function(S){return Sx(S,s)};return c>1||this.__actions__.length||!(h instanceof De)||!gi(f)?this.thru(y):(h=h.slice(f,+f+(c?1:0)),h.__actions__.push({func:_u,args:[y],thisArg:t}),new en(h,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function iH(){return F0(this)}function oH(){return new en(this.value(),this.__chain__)}function sH(){this.__values__===t&&(this.__values__=G0(this.value()));var s=this.__index__>=this.__values__.length,c=s?t:this.__values__[this.__index__++];return{done:s,value:c}}function aH(){return this}function cH(s){for(var c,f=this;f instanceof lu;){var h=R0(f);h.__index__=0,h.__values__=t,c?y.__wrapped__=h:c=h;var y=h;f=f.__wrapped__}return y.__wrapped__=s,c}function lH(){var s=this.__wrapped__;if(s instanceof De){var c=s;return this.__actions__.length&&(c=new De(this)),c=c.reverse(),c.__actions__.push({func:_u,args:[Kx],thisArg:t}),new en(c,this.__chain__)}return this.thru(Kx)}function pH(){return Q_(this.__wrapped__,this.__actions__)}var uH=gu(function(s,c,f){je.call(s,f)?++s[f]:di(s,f,1)});function fH(s,c,f){var h=xe(s)?c_:rL;return f&&Yt(s,c,f)&&(c=t),h(s,ue(c,3))}function dH(s,c){var f=xe(s)?Ui:I_;return f(s,ue(c,3))}var mH=s0(k0),hH=s0(P0);function gH(s,c){return Ft(Eu(s,c),1)}function yH(s,c){return Ft(Eu(s,c),Q)}function xH(s,c,f){return f=f===t?1:ve(f),Ft(Eu(s,c),f)}function C0(s,c){var f=xe(s)?Xr:$i;return f(s,ue(c,3))}function O0(s,c){var f=xe(s)?LO:D_;return f(s,ue(c,3))}var TH=gu(function(s,c,f){je.call(s,f)?s[f].push(c):di(s,f,[c])});function SH(s,c,f,h){s=fr(s)?s:$s(s),f=f&&!h?ve(f):0;var y=s.length;return f<0&&(f=St(y+f,0)),Au(s)?f<=y&&s.indexOf(c,f)>-1:!!y&&Is(s,c,f)>-1}var vH=ke(function(s,c,f){var h=-1,y=typeof c=="function",S=fr(s)?L(s.length):[];return $i(s,function(E){S[++h]=y?Ar(c,E,f):Nc(E,c,f)}),S}),bH=gu(function(s,c,f){di(s,f,c)});function Eu(s,c){var f=xe(s)?tt:U_;return f(s,ue(c,3))}function wH(s,c,f,h){return s==null?[]:(xe(c)||(c=c==null?[]:[c]),f=h?t:f,xe(f)||(f=f==null?[]:[f]),W_(s,c,f))}var _H=gu(function(s,c,f){s[f?0:1].push(c)},function(){return[[],[]]});function EH(s,c,f){var h=xe(s)?ax:f_,y=arguments.length<3;return h(s,ue(c,4),f,y,$i)}function RH(s,c,f){var h=xe(s)?UO:f_,y=arguments.length<3;return h(s,ue(c,4),f,y,D_)}function kH(s,c){var f=xe(s)?Ui:I_;return f(s,Pu(ue(c,3)))}function PH(s){var c=xe(s)?k_:SL;return c(s)}function MH(s,c,f){(f?Yt(s,c,f):c===t)?c=1:c=ve(c);var h=xe(s)?YN:vL;return h(s,c)}function AH(s){var c=xe(s)?XN:wL;return c(s)}function DH(s){if(s==null)return 0;if(fr(s))return Au(s)?Cs(s):s.length;var c=Vt(s);return c==wn||c==_n?s.size:Rx(s).length}function IH(s,c,f){var h=xe(s)?cx:_L;return f&&Yt(s,c,f)&&(c=t),h(s,ue(c,3))}var FH=ke(function(s,c){if(s==null)return[];var f=c.length;return f>1&&Yt(s,c[0],c[1])?c=[]:f>2&&Yt(c[0],c[1],c[2])&&(c=[c[0]]),W_(s,Ft(c,1),[])}),Ru=dN||function(){return Et.Date.now()};function CH(s,c){if(typeof c!="function")throw new Jr(i);return s=ve(s),function(){if(--s<1)return c.apply(this,arguments)}}function N0(s,c,f){return c=f?t:c,c=s&&c==null?s.length:c,mi(s,ie,t,t,t,t,c)}function L0(s,c){var f;if(typeof c!="function")throw new Jr(i);return s=ve(s),function(){return--s>0&&(f=c.apply(this,arguments)),s<=1&&(c=t),f}}var Zx=ke(function(s,c,f){var h=v;if(f.length){var y=Vi(f,Bs(Zx));h|=K}return mi(s,h,c,f,y)}),U0=ke(function(s,c,f){var h=v|b;if(f.length){var y=Vi(f,Bs(U0));h|=K}return mi(c,h,s,f,y)});function H0(s,c,f){c=f?t:c;var h=mi(s,M,t,t,t,t,t,c);return h.placeholder=H0.placeholder,h}function V0(s,c,f){c=f?t:c;var h=mi(s,U,t,t,t,t,t,c);return h.placeholder=V0.placeholder,h}function B0(s,c,f){var h,y,S,E,R,D,V=0,B=!1,j=!1,Y=!0;if(typeof s!="function")throw new Jr(i);c=on(c)||0,ot(f)&&(B=!!f.leading,j="maxWait"in f,S=j?St(on(f.maxWait)||0,c):S,Y="trailing"in f?!!f.trailing:Y);function oe(dt){var Pn=h,Ti=y;return h=y=t,V=dt,E=s.apply(Ti,Pn),E}function fe(dt){return V=dt,R=Bc(Me,c),B?oe(dt):E}function Ee(dt){var Pn=dt-D,Ti=dt-V,sE=c-Pn;return j?Ht(sE,S-Ti):sE}function de(dt){var Pn=dt-D,Ti=dt-V;return D===t||Pn>=c||Pn<0||j&&Ti>=S}function Me(){var dt=Ru();if(de(dt))return Ie(dt);R=Bc(Me,Ee(dt))}function Ie(dt){return R=t,Y&&h?oe(dt):(h=y=t,E)}function Cr(){R!==t&&Y_(R),V=0,h=D=y=R=t}function Xt(){return R===t?E:Ie(Ru())}function Or(){var dt=Ru(),Pn=de(dt);if(h=arguments,y=this,D=dt,Pn){if(R===t)return fe(D);if(j)return Y_(R),R=Bc(Me,c),oe(D)}return R===t&&(R=Bc(Me,c)),E}return Or.cancel=Cr,Or.flush=Xt,Or}var OH=ke(function(s,c){return A_(s,1,c)}),NH=ke(function(s,c,f){return A_(s,on(c)||0,f)});function LH(s){return mi(s,it)}function ku(s,c){if(typeof s!="function"||c!=null&&typeof c!="function")throw new Jr(i);var f=function(){var h=arguments,y=c?c.apply(this,h):h[0],S=f.cache;if(S.has(y))return S.get(y);var E=s.apply(this,h);return f.cache=S.set(y,E)||S,E};return f.cache=new(ku.Cache||fi),f}ku.Cache=fi;function Pu(s){if(typeof s!="function")throw new Jr(i);return function(){var c=arguments;switch(c.length){case 0:return!s.call(this);case 1:return!s.call(this,c[0]);case 2:return!s.call(this,c[0],c[1]);case 3:return!s.call(this,c[0],c[1],c[2])}return!s.apply(this,c)}}function UH(s){return L0(2,s)}var HH=EL(function(s,c){c=c.length==1&&xe(c[0])?tt(c[0],Dr(ue())):tt(Ft(c,1),Dr(ue()));var f=c.length;return ke(function(h){for(var y=-1,S=Ht(h.length,f);++y<S;)h[y]=c[y].call(this,h[y]);return Ar(s,this,h)})}),Yx=ke(function(s,c){var f=Vi(c,Bs(Yx));return mi(s,K,t,c,f)}),W0=ke(function(s,c){var f=Vi(c,Bs(W0));return mi(s,ne,t,c,f)}),VH=hi(function(s,c){return mi(s,ae,t,t,t,c)});function BH(s,c){if(typeof s!="function")throw new Jr(i);return c=c===t?c:ve(c),ke(s,c)}function WH(s,c){if(typeof s!="function")throw new Jr(i);return c=c==null?0:St(ve(c),0),ke(function(f){var h=f[c],y=zi(f,0,c);return h&&Hi(y,h),Ar(s,this,y)})}function $H(s,c,f){var h=!0,y=!0;if(typeof s!="function")throw new Jr(i);return ot(f)&&(h="leading"in f?!!f.leading:h,y="trailing"in f?!!f.trailing:y),B0(s,c,{leading:h,maxWait:c,trailing:y})}function jH(s){return N0(s,1)}function qH(s,c){return Yx(Ox(c),s)}function zH(){if(!arguments.length)return[];var s=arguments[0];return xe(s)?s:[s]}function GH(s){return tn(s,m)}function KH(s,c){return c=typeof c=="function"?c:t,tn(s,m,c)}function QH(s){return tn(s,u|m)}function ZH(s,c){return c=typeof c=="function"?c:t,tn(s,u|m,c)}function YH(s,c){return c==null||M_(s,c,Rt(c))}function kn(s,c){return s===c||s!==s&&c!==c}var XH=Su(wx),JH=Su(function(s,c){return s>=c}),Vo=O_(function(){return arguments}())?O_:function(s){return lt(s)&&je.call(s,"callee")&&!v_.call(s,"callee")},xe=L.isArray,e2=r_?Dr(r_):cL;function fr(s){return s!=null&&Mu(s.length)&&!yi(s)}function ft(s){return lt(s)&&fr(s)}function t2(s){return s===!0||s===!1||lt(s)&&Zt(s)==bn}var Gi=hN||cT,r2=n_?Dr(n_):lL;function n2(s){return lt(s)&&s.nodeType===1&&!Wc(s)}function i2(s){if(s==null)return!0;if(fr(s)&&(xe(s)||typeof s=="string"||typeof s.splice=="function"||Gi(s)||Ws(s)||Vo(s)))return!s.length;var c=Vt(s);if(c==wn||c==_n)return!s.size;if(Vc(s))return!Rx(s).length;for(var f in s)if(je.call(s,f))return!1;return!0}function o2(s,c){return Lc(s,c)}function s2(s,c,f){f=typeof f=="function"?f:t;var h=f?f(s,c):t;return h===t?Lc(s,c,t,f):!!h}function Xx(s){if(!lt(s))return!1;var c=Zt(s);return c==li||c==Do||typeof s.message=="string"&&typeof s.name=="string"&&!Wc(s)}function a2(s){return typeof s=="number"&&w_(s)}function yi(s){if(!ot(s))return!1;var c=Zt(s);return c==Ms||c==Aw||c==Mr||c==DC}function $0(s){return typeof s=="number"&&s==ve(s)}function Mu(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Z}function ot(s){var c=typeof s;return s!=null&&(c=="object"||c=="function")}function lt(s){return s!=null&&typeof s=="object"}var j0=i_?Dr(i_):uL;function c2(s,c){return s===c||Ex(s,c,Wx(c))}function l2(s,c,f){return f=typeof f=="function"?f:t,Ex(s,c,Wx(c),f)}function p2(s){return q0(s)&&s!=+s}function u2(s){if(KL(s))throw new ye(n);return N_(s)}function f2(s){return s===null}function d2(s){return s==null}function q0(s){return typeof s=="number"||lt(s)&&Zt(s)==wc}function Wc(s){if(!lt(s)||Zt(s)!=pi)return!1;var c=ru(s);if(c===null)return!0;var f=je.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&Xp.call(f)==lN}var Jx=o_?Dr(o_):fL;function m2(s){return $0(s)&&s>=-Z&&s<=Z}var z0=s_?Dr(s_):dL;function Au(s){return typeof s=="string"||!xe(s)&&lt(s)&&Zt(s)==Ec}function Fr(s){return typeof s=="symbol"||lt(s)&&Zt(s)==$p}var Ws=a_?Dr(a_):mL;function h2(s){return s===t}function g2(s){return lt(s)&&Vt(s)==Rc}function y2(s){return lt(s)&&Zt(s)==FC}var x2=Su(kx),T2=Su(function(s,c){return s<=c});function G0(s){if(!s)return[];if(fr(s))return Au(s)?En(s):ur(s);if(Mc&&s[Mc])return YO(s[Mc]());var c=Vt(s),f=c==wn?mx:c==_n?Qp:$s;return f(s)}function xi(s){if(!s)return s===0?s:0;if(s=on(s),s===Q||s===-Q){var c=s<0?-1:1;return c*te}return s===s?s:0}function ve(s){var c=xi(s),f=c%1;return c===c?f?c-f:c:0}function K0(s){return s?No(ve(s),0,re):0}function on(s){if(typeof s=="number")return s;if(Fr(s))return he;if(ot(s)){var c=typeof s.valueOf=="function"?s.valueOf():s;s=ot(c)?c+"":c}if(typeof s!="string")return s===0?s:+s;s=d_(s);var f=eO.test(s);return f||rO.test(s)?CO(s.slice(2),f?2:8):JC.test(s)?he:+s}function Q0(s){return Wn(s,dr(s))}function S2(s){return s?No(ve(s),-Z,Z):s===0?s:0}function We(s){return s==null?"":Ir(s)}var v2=Hs(function(s,c){if(Vc(c)||fr(c)){Wn(c,Rt(c),s);return}for(var f in c)je.call(c,f)&&Cc(s,f,c[f])}),Z0=Hs(function(s,c){Wn(c,dr(c),s)}),Du=Hs(function(s,c,f,h){Wn(c,dr(c),s,h)}),b2=Hs(function(s,c,f,h){Wn(c,Rt(c),s,h)}),w2=hi(Sx);function _2(s,c){var f=Us(s);return c==null?f:P_(f,c)}var E2=ke(function(s,c){s=Ge(s);var f=-1,h=c.length,y=h>2?c[2]:t;for(y&&Yt(c[0],c[1],y)&&(h=1);++f<h;)for(var S=c[f],E=dr(S),R=-1,D=E.length;++R<D;){var V=E[R],B=s[V];(B===t||kn(B,Os[V])&&!je.call(s,V))&&(s[V]=S[V])}return s}),R2=ke(function(s){return s.push(t,d0),Ar(Y0,t,s)});function k2(s,c){return l_(s,ue(c,3),Bn)}function P2(s,c){return l_(s,ue(c,3),bx)}function M2(s,c){return s==null?s:vx(s,ue(c,3),dr)}function A2(s,c){return s==null?s:F_(s,ue(c,3),dr)}function D2(s,c){return s&&Bn(s,ue(c,3))}function I2(s,c){return s&&bx(s,ue(c,3))}function F2(s){return s==null?[]:fu(s,Rt(s))}function C2(s){return s==null?[]:fu(s,dr(s))}function eT(s,c,f){var h=s==null?t:Lo(s,c);return h===t?f:h}function O2(s,c){return s!=null&&g0(s,c,iL)}function tT(s,c){return s!=null&&g0(s,c,oL)}var N2=c0(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=Jp.call(c)),s[c]=f},nT(mr)),L2=c0(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=Jp.call(c)),je.call(s,c)?s[c].push(f):s[c]=[f]},ue),U2=ke(Nc);function Rt(s){return fr(s)?R_(s):Rx(s)}function dr(s){return fr(s)?R_(s,!0):hL(s)}function H2(s,c){var f={};return c=ue(c,3),Bn(s,function(h,y,S){di(f,c(h,y,S),h)}),f}function V2(s,c){var f={};return c=ue(c,3),Bn(s,function(h,y,S){di(f,y,c(h,y,S))}),f}var B2=Hs(function(s,c,f){du(s,c,f)}),Y0=Hs(function(s,c,f,h){du(s,c,f,h)}),W2=hi(function(s,c){var f={};if(s==null)return f;var h=!1;c=tt(c,function(S){return S=qi(S,s),h||(h=S.length>1),S}),Wn(s,Vx(s),f),h&&(f=tn(f,u|d|m,NL));for(var y=c.length;y--;)Ix(f,c[y]);return f});function $2(s,c){return X0(s,Pu(ue(c)))}var j2=hi(function(s,c){return s==null?{}:yL(s,c)});function X0(s,c){if(s==null)return{};var f=tt(Vx(s),function(h){return[h]});return c=ue(c),$_(s,f,function(h,y){return c(h,y[0])})}function q2(s,c,f){c=qi(c,s);var h=-1,y=c.length;for(y||(y=1,s=t);++h<y;){var S=s==null?t:s[$n(c[h])];S===t&&(h=y,S=f),s=yi(S)?S.call(s):S}return s}function z2(s,c,f){return s==null?s:Uc(s,c,f)}function G2(s,c,f,h){return h=typeof h=="function"?h:t,s==null?s:Uc(s,c,f,h)}var J0=u0(Rt),eE=u0(dr);function K2(s,c,f){var h=xe(s),y=h||Gi(s)||Ws(s);if(c=ue(c,4),f==null){var S=s&&s.constructor;y?f=h?new S:[]:ot(s)?f=yi(S)?Us(ru(s)):{}:f={}}return(y?Xr:Bn)(s,function(E,R,D){return c(f,E,R,D)}),f}function Q2(s,c){return s==null?!0:Ix(s,c)}function Z2(s,c,f){return s==null?s:K_(s,c,Ox(f))}function Y2(s,c,f,h){return h=typeof h=="function"?h:t,s==null?s:K_(s,c,Ox(f),h)}function $s(s){return s==null?[]:dx(s,Rt(s))}function X2(s){return s==null?[]:dx(s,dr(s))}function J2(s,c,f){return f===t&&(f=c,c=t),f!==t&&(f=on(f),f=f===f?f:0),c!==t&&(c=on(c),c=c===c?c:0),No(on(s),c,f)}function eV(s,c,f){return c=xi(c),f===t?(f=c,c=0):f=xi(f),s=on(s),sL(s,c,f)}function tV(s,c,f){if(f&&typeof f!="boolean"&&Yt(s,c,f)&&(c=f=t),f===t&&(typeof c=="boolean"?(f=c,c=t):typeof s=="boolean"&&(f=s,s=t)),s===t&&c===t?(s=0,c=1):(s=xi(s),c===t?(c=s,s=0):c=xi(c)),s>c){var h=s;s=c,c=h}if(f||s%1||c%1){var y=__();return Ht(s+y*(c-s+FO("1e-"+((y+"").length-1))),c)}return Mx(s,c)}var rV=Vs(function(s,c,f){return c=c.toLowerCase(),s+(f?tE(c):c)});function tE(s){return rT(We(s).toLowerCase())}function rE(s){return s=We(s),s&&s.replace(iO,zO).replace(wO,"")}function nV(s,c,f){s=We(s),c=Ir(c);var h=s.length;f=f===t?h:No(ve(f),0,h);var y=f;return f-=c.length,f>=0&&s.slice(f,y)==c}function iV(s){return s=We(s),s&&UC.test(s)?s.replace(Fw,GO):s}function oV(s){return s=We(s),s&&jC.test(s)?s.replace(Yy,"\\$&"):s}var sV=Vs(function(s,c,f){return s+(f?"-":"")+c.toLowerCase()}),aV=Vs(function(s,c,f){return s+(f?" ":"")+c.toLowerCase()}),cV=o0("toLowerCase");function lV(s,c,f){s=We(s),c=ve(c);var h=c?Cs(s):0;if(!c||h>=c)return s;var y=(c-h)/2;return Tu(su(y),f)+s+Tu(ou(y),f)}function pV(s,c,f){s=We(s),c=ve(c);var h=c?Cs(s):0;return c&&h<c?s+Tu(c-h,f):s}function uV(s,c,f){s=We(s),c=ve(c);var h=c?Cs(s):0;return c&&h<c?Tu(c-h,f)+s:s}function fV(s,c,f){return f||c==null?c=0:c&&(c=+c),TN(We(s).replace(Xy,""),c||0)}function dV(s,c,f){return(f?Yt(s,c,f):c===t)?c=1:c=ve(c),Ax(We(s),c)}function mV(){var s=arguments,c=We(s[0]);return s.length<3?c:c.replace(s[1],s[2])}var hV=Vs(function(s,c,f){return s+(f?"_":"")+c.toLowerCase()});function gV(s,c,f){return f&&typeof f!="number"&&Yt(s,c,f)&&(c=f=t),f=f===t?re:f>>>0,f?(s=We(s),s&&(typeof c=="string"||c!=null&&!Jx(c))&&(c=Ir(c),!c&&Fs(s))?zi(En(s),0,f):s.split(c,f)):[]}var yV=Vs(function(s,c,f){return s+(f?" ":"")+rT(c)});function xV(s,c,f){return s=We(s),f=f==null?0:No(ve(f),0,s.length),c=Ir(c),s.slice(f,f+c.length)==c}function TV(s,c,f){var h=T.templateSettings;f&&Yt(s,c,f)&&(c=t),s=We(s),c=Du({},c,h,f0);var y=Du({},c.imports,h.imports,f0),S=Rt(y),E=dx(y,S),R,D,V=0,B=c.interpolate||jp,j="__p += '",Y=hx((c.escape||jp).source+"|"+B.source+"|"+(B===Cw?XC:jp).source+"|"+(c.evaluate||jp).source+"|$","g"),oe="//# sourceURL="+(je.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++PO+"]")+`
`;s.replace(Y,function(de,Me,Ie,Cr,Xt,Or){return Ie||(Ie=Cr),j+=s.slice(V,Or).replace(oO,KO),Me&&(R=!0,j+=`' +
__e(`+Me+`) +
'`),Xt&&(D=!0,j+=`';
`+Xt+`;
__p += '`),Ie&&(j+=`' +
((__t = (`+Ie+`)) == null ? '' : __t) +
'`),V=Or+de.length,de}),j+=`';
`;var fe=je.call(c,"variable")&&c.variable;if(!fe)j=`with (obj) {
`+j+`
}
`;else if(ZC.test(fe))throw new ye(o);j=(D?j.replace(CC,""):j).replace(OC,"$1").replace(NC,"$1;"),j="function("+(fe||"obj")+`) {
`+(fe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(D?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+j+`return __p
}`;var Ee=iE(function(){return Ve(S,oe+"return "+j).apply(t,E)});if(Ee.source=j,Xx(Ee))throw Ee;return Ee}function SV(s){return We(s).toLowerCase()}function vV(s){return We(s).toUpperCase()}function bV(s,c,f){if(s=We(s),s&&(f||c===t))return d_(s);if(!s||!(c=Ir(c)))return s;var h=En(s),y=En(c),S=m_(h,y),E=h_(h,y)+1;return zi(h,S,E).join("")}function wV(s,c,f){if(s=We(s),s&&(f||c===t))return s.slice(0,y_(s)+1);if(!s||!(c=Ir(c)))return s;var h=En(s),y=h_(h,En(c))+1;return zi(h,0,y).join("")}function _V(s,c,f){if(s=We(s),s&&(f||c===t))return s.replace(Xy,"");if(!s||!(c=Ir(c)))return s;var h=En(s),y=m_(h,En(c));return zi(h,y).join("")}function EV(s,c){var f=It,h=ct;if(ot(c)){var y="separator"in c?c.separator:y;f="length"in c?ve(c.length):f,h="omission"in c?Ir(c.omission):h}s=We(s);var S=s.length;if(Fs(s)){var E=En(s);S=E.length}if(f>=S)return s;var R=f-Cs(h);if(R<1)return h;var D=E?zi(E,0,R).join(""):s.slice(0,R);if(y===t)return D+h;if(E&&(R+=D.length-R),Jx(y)){if(s.slice(R).search(y)){var V,B=D;for(y.global||(y=hx(y.source,We(Ow.exec(y))+"g")),y.lastIndex=0;V=y.exec(B);)var j=V.index;D=D.slice(0,j===t?R:j)}}else if(s.indexOf(Ir(y),R)!=R){var Y=D.lastIndexOf(y);Y>-1&&(D=D.slice(0,Y))}return D+h}function RV(s){return s=We(s),s&&LC.test(s)?s.replace(Iw,tN):s}var kV=Vs(function(s,c,f){return s+(f?" ":"")+c.toUpperCase()}),rT=o0("toUpperCase");function nE(s,c,f){return s=We(s),c=f?t:c,c===t?ZO(s)?iN(s):BO(s):s.match(c)||[]}var iE=ke(function(s,c){try{return Ar(s,t,c)}catch(f){return Xx(f)?f:new ye(f)}}),PV=hi(function(s,c){return Xr(c,function(f){f=$n(f),di(s,f,Zx(s[f],s))}),s});function MV(s){var c=s==null?0:s.length,f=ue();return s=c?tt(s,function(h){if(typeof h[1]!="function")throw new Jr(i);return[f(h[0]),h[1]]}):[],ke(function(h){for(var y=-1;++y<c;){var S=s[y];if(Ar(S[0],this,h))return Ar(S[1],this,h)}})}function AV(s){return tL(tn(s,u))}function nT(s){return function(){return s}}function DV(s,c){return s==null||s!==s?c:s}var IV=a0(),FV=a0(!0);function mr(s){return s}function iT(s){return L_(typeof s=="function"?s:tn(s,u))}function CV(s){return H_(tn(s,u))}function OV(s,c){return V_(s,tn(c,u))}var NV=ke(function(s,c){return function(f){return Nc(f,s,c)}}),LV=ke(function(s,c){return function(f){return Nc(s,f,c)}});function oT(s,c,f){var h=Rt(c),y=fu(c,h);f==null&&!(ot(c)&&(y.length||!h.length))&&(f=c,c=s,s=this,y=fu(c,Rt(c)));var S=!(ot(f)&&"chain"in f)||!!f.chain,E=yi(s);return Xr(y,function(R){var D=c[R];s[R]=D,E&&(s.prototype[R]=function(){var V=this.__chain__;if(S||V){var B=s(this.__wrapped__),j=B.__actions__=ur(this.__actions__);return j.push({func:D,args:arguments,thisArg:s}),B.__chain__=V,B}return D.apply(s,Hi([this.value()],arguments))})}),s}function UV(){return Et._===this&&(Et._=pN),this}function sT(){}function HV(s){return s=ve(s),ke(function(c){return B_(c,s)})}var VV=Lx(tt),BV=Lx(c_),WV=Lx(cx);function oE(s){return jx(s)?lx($n(s)):xL(s)}function $V(s){return function(c){return s==null?t:Lo(s,c)}}var jV=l0(),qV=l0(!0);function aT(){return[]}function cT(){return!1}function zV(){return{}}function GV(){return""}function KV(){return!0}function QV(s,c){if(s=ve(s),s<1||s>Z)return[];var f=re,h=Ht(s,re);c=ue(c),s-=re;for(var y=fx(h,c);++f<s;)c(f);return y}function ZV(s){return xe(s)?tt(s,$n):Fr(s)?[s]:ur(E0(We(s)))}function YV(s){var c=++cN;return We(s)+c}var XV=xu(function(s,c){return s+c},0),JV=Ux("ceil"),eB=xu(function(s,c){return s/c},1),tB=Ux("floor");function rB(s){return s&&s.length?uu(s,mr,wx):t}function nB(s,c){return s&&s.length?uu(s,ue(c,2),wx):t}function iB(s){return u_(s,mr)}function oB(s,c){return u_(s,ue(c,2))}function sB(s){return s&&s.length?uu(s,mr,kx):t}function aB(s,c){return s&&s.length?uu(s,ue(c,2),kx):t}var cB=xu(function(s,c){return s*c},1),lB=Ux("round"),pB=xu(function(s,c){return s-c},0);function uB(s){return s&&s.length?ux(s,mr):0}function fB(s,c){return s&&s.length?ux(s,ue(c,2)):0}return T.after=CH,T.ary=N0,T.assign=v2,T.assignIn=Z0,T.assignInWith=Du,T.assignWith=b2,T.at=w2,T.before=L0,T.bind=Zx,T.bindAll=PV,T.bindKey=U0,T.castArray=zH,T.chain=F0,T.chunk=tU,T.compact=rU,T.concat=nU,T.cond=MV,T.conforms=AV,T.constant=nT,T.countBy=uH,T.create=_2,T.curry=H0,T.curryRight=V0,T.debounce=B0,T.defaults=E2,T.defaultsDeep=R2,T.defer=OH,T.delay=NH,T.difference=iU,T.differenceBy=oU,T.differenceWith=sU,T.drop=aU,T.dropRight=cU,T.dropRightWhile=lU,T.dropWhile=pU,T.fill=uU,T.filter=dH,T.flatMap=gH,T.flatMapDeep=yH,T.flatMapDepth=xH,T.flatten=M0,T.flattenDeep=fU,T.flattenDepth=dU,T.flip=LH,T.flow=IV,T.flowRight=FV,T.fromPairs=mU,T.functions=F2,T.functionsIn=C2,T.groupBy=TH,T.initial=gU,T.intersection=yU,T.intersectionBy=xU,T.intersectionWith=TU,T.invert=N2,T.invertBy=L2,T.invokeMap=vH,T.iteratee=iT,T.keyBy=bH,T.keys=Rt,T.keysIn=dr,T.map=Eu,T.mapKeys=H2,T.mapValues=V2,T.matches=CV,T.matchesProperty=OV,T.memoize=ku,T.merge=B2,T.mergeWith=Y0,T.method=NV,T.methodOf=LV,T.mixin=oT,T.negate=Pu,T.nthArg=HV,T.omit=W2,T.omitBy=$2,T.once=UH,T.orderBy=wH,T.over=VV,T.overArgs=HH,T.overEvery=BV,T.overSome=WV,T.partial=Yx,T.partialRight=W0,T.partition=_H,T.pick=j2,T.pickBy=X0,T.property=oE,T.propertyOf=$V,T.pull=wU,T.pullAll=D0,T.pullAllBy=_U,T.pullAllWith=EU,T.pullAt=RU,T.range=jV,T.rangeRight=qV,T.rearg=VH,T.reject=kH,T.remove=kU,T.rest=BH,T.reverse=Kx,T.sampleSize=MH,T.set=z2,T.setWith=G2,T.shuffle=AH,T.slice=PU,T.sortBy=FH,T.sortedUniq=OU,T.sortedUniqBy=NU,T.split=gV,T.spread=WH,T.tail=LU,T.take=UU,T.takeRight=HU,T.takeRightWhile=VU,T.takeWhile=BU,T.tap=rH,T.throttle=$H,T.thru=_u,T.toArray=G0,T.toPairs=J0,T.toPairsIn=eE,T.toPath=ZV,T.toPlainObject=Q0,T.transform=K2,T.unary=jH,T.union=WU,T.unionBy=$U,T.unionWith=jU,T.uniq=qU,T.uniqBy=zU,T.uniqWith=GU,T.unset=Q2,T.unzip=Qx,T.unzipWith=I0,T.update=Z2,T.updateWith=Y2,T.values=$s,T.valuesIn=X2,T.without=KU,T.words=nE,T.wrap=qH,T.xor=QU,T.xorBy=ZU,T.xorWith=YU,T.zip=XU,T.zipObject=JU,T.zipObjectDeep=eH,T.zipWith=tH,T.entries=J0,T.entriesIn=eE,T.extend=Z0,T.extendWith=Du,oT(T,T),T.add=XV,T.attempt=iE,T.camelCase=rV,T.capitalize=tE,T.ceil=JV,T.clamp=J2,T.clone=GH,T.cloneDeep=QH,T.cloneDeepWith=ZH,T.cloneWith=KH,T.conformsTo=YH,T.deburr=rE,T.defaultTo=DV,T.divide=eB,T.endsWith=nV,T.eq=kn,T.escape=iV,T.escapeRegExp=oV,T.every=fH,T.find=mH,T.findIndex=k0,T.findKey=k2,T.findLast=hH,T.findLastIndex=P0,T.findLastKey=P2,T.floor=tB,T.forEach=C0,T.forEachRight=O0,T.forIn=M2,T.forInRight=A2,T.forOwn=D2,T.forOwnRight=I2,T.get=eT,T.gt=XH,T.gte=JH,T.has=O2,T.hasIn=tT,T.head=A0,T.identity=mr,T.includes=SH,T.indexOf=hU,T.inRange=eV,T.invoke=U2,T.isArguments=Vo,T.isArray=xe,T.isArrayBuffer=e2,T.isArrayLike=fr,T.isArrayLikeObject=ft,T.isBoolean=t2,T.isBuffer=Gi,T.isDate=r2,T.isElement=n2,T.isEmpty=i2,T.isEqual=o2,T.isEqualWith=s2,T.isError=Xx,T.isFinite=a2,T.isFunction=yi,T.isInteger=$0,T.isLength=Mu,T.isMap=j0,T.isMatch=c2,T.isMatchWith=l2,T.isNaN=p2,T.isNative=u2,T.isNil=d2,T.isNull=f2,T.isNumber=q0,T.isObject=ot,T.isObjectLike=lt,T.isPlainObject=Wc,T.isRegExp=Jx,T.isSafeInteger=m2,T.isSet=z0,T.isString=Au,T.isSymbol=Fr,T.isTypedArray=Ws,T.isUndefined=h2,T.isWeakMap=g2,T.isWeakSet=y2,T.join=SU,T.kebabCase=sV,T.last=nn,T.lastIndexOf=vU,T.lowerCase=aV,T.lowerFirst=cV,T.lt=x2,T.lte=T2,T.max=rB,T.maxBy=nB,T.mean=iB,T.meanBy=oB,T.min=sB,T.minBy=aB,T.stubArray=aT,T.stubFalse=cT,T.stubObject=zV,T.stubString=GV,T.stubTrue=KV,T.multiply=cB,T.nth=bU,T.noConflict=UV,T.noop=sT,T.now=Ru,T.pad=lV,T.padEnd=pV,T.padStart=uV,T.parseInt=fV,T.random=tV,T.reduce=EH,T.reduceRight=RH,T.repeat=dV,T.replace=mV,T.result=q2,T.round=lB,T.runInContext=P,T.sample=PH,T.size=DH,T.snakeCase=hV,T.some=IH,T.sortedIndex=MU,T.sortedIndexBy=AU,T.sortedIndexOf=DU,T.sortedLastIndex=IU,T.sortedLastIndexBy=FU,T.sortedLastIndexOf=CU,T.startCase=yV,T.startsWith=xV,T.subtract=pB,T.sum=uB,T.sumBy=fB,T.template=TV,T.times=QV,T.toFinite=xi,T.toInteger=ve,T.toLength=K0,T.toLower=SV,T.toNumber=on,T.toSafeInteger=S2,T.toString=We,T.toUpper=vV,T.trim=bV,T.trimEnd=wV,T.trimStart=_V,T.truncate=EV,T.unescape=RV,T.uniqueId=YV,T.upperCase=kV,T.upperFirst=rT,T.each=C0,T.eachRight=O0,T.first=A0,oT(T,function(){var s={};return Bn(T,function(c,f){je.call(T.prototype,f)||(s[f]=c)}),s}(),{chain:!1}),T.VERSION=e,Xr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){T[s].placeholder=T}),Xr(["drop","take"],function(s,c){De.prototype[s]=function(f){f=f===t?1:St(ve(f),0);var h=this.__filtered__&&!c?new De(this):this.clone();return h.__filtered__?h.__takeCount__=Ht(f,h.__takeCount__):h.__views__.push({size:Ht(f,re),type:s+(h.__dir__<0?"Right":"")}),h},De.prototype[s+"Right"]=function(f){return this.reverse()[s](f).reverse()}}),Xr(["filter","map","takeWhile"],function(s,c){var f=c+1,h=f==I||f==z;De.prototype[s]=function(y){var S=this.clone();return S.__iteratees__.push({iteratee:ue(y,3),type:f}),S.__filtered__=S.__filtered__||h,S}}),Xr(["head","last"],function(s,c){var f="take"+(c?"Right":"");De.prototype[s]=function(){return this[f](1).value()[0]}}),Xr(["initial","tail"],function(s,c){var f="drop"+(c?"":"Right");De.prototype[s]=function(){return this.__filtered__?new De(this):this[f](1)}}),De.prototype.compact=function(){return this.filter(mr)},De.prototype.find=function(s){return this.filter(s).head()},De.prototype.findLast=function(s){return this.reverse().find(s)},De.prototype.invokeMap=ke(function(s,c){return typeof s=="function"?new De(this):this.map(function(f){return Nc(f,s,c)})}),De.prototype.reject=function(s){return this.filter(Pu(ue(s)))},De.prototype.slice=function(s,c){s=ve(s);var f=this;return f.__filtered__&&(s>0||c<0)?new De(f):(s<0?f=f.takeRight(-s):s&&(f=f.drop(s)),c!==t&&(c=ve(c),f=c<0?f.dropRight(-c):f.take(c-s)),f)},De.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},De.prototype.toArray=function(){return this.take(re)},Bn(De.prototype,function(s,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),h=/^(?:head|last)$/.test(c),y=T[h?"take"+(c=="last"?"Right":""):c],S=h||/^find/.test(c);y&&(T.prototype[c]=function(){var E=this.__wrapped__,R=h?[1]:arguments,D=E instanceof De,V=R[0],B=D||xe(E),j=function(Me){var Ie=y.apply(T,Hi([Me],R));return h&&Y?Ie[0]:Ie};B&&f&&typeof V=="function"&&V.length!=1&&(D=B=!1);var Y=this.__chain__,oe=!!this.__actions__.length,fe=S&&!Y,Ee=D&&!oe;if(!S&&B){E=Ee?E:new De(this);var de=s.apply(E,R);return de.__actions__.push({func:_u,args:[j],thisArg:t}),new en(de,Y)}return fe&&Ee?s.apply(this,R):(de=this.thru(j),fe?h?de.value()[0]:de.value():de)})}),Xr(["pop","push","shift","sort","splice","unshift"],function(s){var c=Zp[s],f=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",h=/^(?:pop|shift)$/.test(s);T.prototype[s]=function(){var y=arguments;if(h&&!this.__chain__){var S=this.value();return c.apply(xe(S)?S:[],y)}return this[f](function(E){return c.apply(xe(E)?E:[],y)})}}),Bn(De.prototype,function(s,c){var f=T[c];if(f){var h=f.name+"";je.call(Ls,h)||(Ls[h]=[]),Ls[h].push({name:c,func:f})}}),Ls[yu(t,b).name]=[{name:"wrapper",func:t}],De.prototype.clone=RN,De.prototype.reverse=kN,De.prototype.value=PN,T.prototype.at=nH,T.prototype.chain=iH,T.prototype.commit=oH,T.prototype.next=sH,T.prototype.plant=cH,T.prototype.reverse=lH,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=pH,T.prototype.first=T.prototype.head,Mc&&(T.prototype[Mc]=aH),T},Bi=oN();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Et._=Bi,define(function(){return Bi})):Io?((Io.exports=Bi)._=Bi,ix._=Bi):Et._=Bi}).call(ac)});var MF=Ke((vUe,PF)=>{"use strict";PF.exports=RF;function RF(t,e,r){t instanceof RegExp&&(t=EF(t,r)),e instanceof RegExp&&(e=EF(e,r));var n=kF(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function EF(t,e){var r=e.match(t);return r?r[0]:null}RF.range=kF;function kF(t,e,r){var n,i,o,a,l,p=r.indexOf(t),u=r.indexOf(e,p+1),d=p;if(p>=0&&u>0){if(t===e)return[p,u];for(n=[],o=r.length;d>=0&&!l;)d==p?(n.push(d),p=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,d+1)),d=p<u&&p>=0?p:u;n.length&&(l=[o,a])}return l}});var LF=Ke((bUe,NF)=>{var AF=MF();NF.exports=FZ;var DF="\0SLASH"+Math.random()+"\0",IF="\0OPEN"+Math.random()+"\0",pb="\0CLOSE"+Math.random()+"\0",FF="\0COMMA"+Math.random()+"\0",CF="\0PERIOD"+Math.random()+"\0";function lb(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function DZ(t){return t.split("\\\\").join(DF).split("\\{").join(IF).split("\\}").join(pb).split("\\,").join(FF).split("\\.").join(CF)}function IZ(t){return t.split(DF).join("\\").split(IF).join("{").split(pb).join("}").split(FF).join(",").split(CF).join(".")}function OF(t){if(!t)return[""];var e=[],r=AF("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var l=OF(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}function FZ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),xp(DZ(t),!0).map(IZ)):[]}function CZ(t){return"{"+t+"}"}function OZ(t){return/^-?0\d/.test(t)}function NZ(t,e){return t<=e}function LZ(t,e){return t>=e}function xp(t,e){var r=[],n=AF("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?xp(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var l=i+"{"+n.body+"}"+o[a];r.push(l)}else{var p=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=p||u,m=n.body.indexOf(",")>=0;if(!d&&!m)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+pb+n.post,xp(t)):[t];var g;if(d)g=n.body.split(/\.\./);else if(g=OF(n.body),g.length===1&&(g=xp(g[0],!1).map(CZ),g.length===1))return o.map(function(N){return n.pre+g[0]+N});var x;if(d){var v=lb(g[0]),b=lb(g[1]),F=Math.max(g[0].length,g[1].length),M=g.length==3?Math.abs(lb(g[2])):1,U=NZ,K=b<v;K&&(M*=-1,U=LZ);var ne=g.some(OZ);x=[];for(var ie=v;U(ie,b);ie+=M){var ae;if(u)ae=String.fromCharCode(ie),ae==="\\"&&(ae="");else if(ae=String(ie),ne){var it=F-ae.length;if(it>0){var It=new Array(it+1).join("0");ie<0?ae="-"+It+ae.slice(1):ae=It+ae}}x.push(ae)}}else{x=[];for(var ct=0;ct<g.length;ct++)x.push.apply(x,xp(g[ct],!1))}for(var ct=0;ct<x.length;ct++)for(var a=0;a<o.length;a++){var l=i+x[ct]+o[a];(!e||d||l)&&r.push(l)}}return r}});var wX={};xB(wX,{default:()=>MC});module.exports=TB(wX);var lT="cursorless.command",Fu=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},pt=class extends Fu{constructor(){super(...arguments);this.isVisible=!1}},mt=class extends Fu{constructor(){super(...arguments);this.isVisible=!0}};var EX={"cursorless.toggleDecorations":new mt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new mt("Recompute decoration styles"),"cursorless.recordTestCase":new mt("Record test case"),"cursorless.recordOneTestCaseThenPause":new mt("Record one test case, then pause"),"cursorless.pauseRecording":new mt("Pause test case recording"),"cursorless.resumeRecording":new mt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new mt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new mt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new mt("Show documentation"),"cursorless.showInstallationDependencies":new mt("Show installation dependencies"),"cursorless.showScopeVisualizer":new mt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new mt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new mt("Analyze collected command history"),"cursorless.tutorial.start":new pt("Start a tutorial"),"cursorless.tutorial.next":new mt("Tutorial next"),"cursorless.tutorial.previous":new mt("Tutorial previous"),"cursorless.tutorial.restart":new mt("Tutorial restart"),"cursorless.tutorial.resume":new mt("Tutorial resume"),"cursorless.tutorial.list":new mt("Tutorial list"),"cursorless.documentationOpened":new pt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new pt("The core cursorless command"),"cursorless.repeatPreviousCommand":new mt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new pt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new pt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new pt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new pt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new pt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new pt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new pt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new pt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new pt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new pt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new pt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new pt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new pt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new pt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new pt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new pt("Redo keyboard targeting changes"),"cursorless.migrateSnippets":new pt("Migrate snippets from the old Cursorless format to the new community format")};var Cu=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Ou=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Nu=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},ut=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Lu=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var SB=typeof global=="object"&&global&&global.Object===Object&&global,Uu=SB;var vB=typeof self=="object"&&self&&self.Object===Object&&self,bB=Uu||vB||Function("return this")(),kt=bB;var wB=kt.Symbol,Jt=wB;var cE=Object.prototype,_B=cE.hasOwnProperty,EB=cE.toString,$c=Jt?Jt.toStringTag:void 0;function RB(t){var e=_B.call(t,$c),r=t[$c];try{t[$c]=void 0;var n=!0}catch{}var i=EB.call(t);return n&&(e?t[$c]=r:delete t[$c]),i}var lE=RB;var kB=Object.prototype,PB=kB.toString;function MB(t){return PB.call(t)}var pE=MB;var AB="[object Null]",DB="[object Undefined]",uE=Jt?Jt.toStringTag:void 0;function IB(t){return t==null?t===void 0?DB:AB:uE&&uE in Object(t)?lE(t):pE(t)}var Mn=IB;function FB(t){return t!=null&&typeof t=="object"}var er=FB;var CB="[object Symbol]";function OB(t){return typeof t=="symbol"||er(t)&&Mn(t)==CB}var Nr=OB;function NB(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var sn=NB;var LB=Array.isArray,qe=LB;var UB=1/0,fE=Jt?Jt.prototype:void 0,dE=fE?fE.toString:void 0;function mE(t){if(typeof t=="string")return t;if(qe(t))return sn(t,mE)+"";if(Nr(t))return dE?dE.call(t):"";var e=t+"";return e=="0"&&1/t==-UB?"-0":e}var hE=mE;var HB=/\s/;function VB(t){for(var e=t.length;e--&&HB.test(t.charAt(e)););return e}var gE=VB;var BB=/^\s+/;function WB(t){return t&&t.slice(0,gE(t)+1).replace(BB,"")}var yE=WB;function $B(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Lr=$B;var xE=NaN,jB=/^[-+]0x[0-9a-f]+$/i,qB=/^0b[01]+$/i,zB=/^0o[0-7]+$/i,GB=parseInt;function KB(t){if(typeof t=="number")return t;if(Nr(t))return xE;if(Lr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Lr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=yE(t);var r=qB.test(t);return r||zB.test(t)?GB(t.slice(2),r?2:8):jB.test(t)?xE:+t}var TE=KB;var SE=1/0,QB=17976931348623157e292;function ZB(t){if(!t)return t===0?t:0;if(t=TE(t),t===SE||t===-SE){var e=t<0?-1:1;return e*QB}return t===t?t:0}var js=ZB;function YB(t){var e=js(t),r=e%1;return e===e?r?e-r:e:0}var Hu=YB;function XB(t){return t}var gr=XB;var JB="[object AsyncFunction]",eW="[object Function]",tW="[object GeneratorFunction]",rW="[object Proxy]";function nW(t){if(!Lr(t))return!1;var e=Mn(t);return e==eW||e==tW||e==JB||e==rW}var Vu=nW;var iW=kt["__core-js_shared__"],Bu=iW;var vE=function(){var t=/[^.]+$/.exec(Bu&&Bu.keys&&Bu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function oW(t){return!!vE&&vE in t}var bE=oW;var sW=Function.prototype,aW=sW.toString;function cW(t){if(t!=null){try{return aW.call(t)}catch{}try{return t+""}catch{}}return""}var Si=cW;var lW=/[\\^$.*+?()[\]{}|]/g,pW=/^\[object .+?Constructor\]$/,uW=Function.prototype,fW=Object.prototype,dW=uW.toString,mW=fW.hasOwnProperty,hW=RegExp("^"+dW.call(mW).replace(lW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gW(t){if(!Lr(t)||bE(t))return!1;var e=Vu(t)?hW:pW;return e.test(Si(t))}var wE=gW;function yW(t,e){return t?.[e]}var _E=yW;function xW(t,e){var r=_E(t,e);return wE(r)?r:void 0}var yr=xW;var TW=yr(kt,"WeakMap"),Bo=TW;var SW=Bo&&new Bo,pT=SW;var EE=Object.create,vW=function(){function t(){}return function(e){if(!Lr(e))return{};if(EE)return EE(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Wu=vW;function bW(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var RE=bW;function wW(){}var qs=wW;var _W=4294967295;function $u(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_W,this.__views__=[]}$u.prototype=Wu(qs.prototype);$u.prototype.constructor=$u;var zs=$u;function EW(){}var ju=EW;var RW=pT?function(t){return pT.get(t)}:ju,qu=RW;var kW={},uT=kW;var PW=Object.prototype,MW=PW.hasOwnProperty;function AW(t){for(var e=t.name+"",r=uT[e],n=MW.call(uT,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Gs=AW;function zu(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}zu.prototype=Wu(qs.prototype);zu.prototype.constructor=zu;var Ki=zu;function DW(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Qi=DW;function IW(t){if(t instanceof zs)return t.clone();var e=new Ki(t.__wrapped__,t.__chain__);return e.__actions__=Qi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var kE=IW;var FW=Object.prototype,CW=FW.hasOwnProperty;function Gu(t){if(er(t)&&!qe(t)&&!(t instanceof zs)){if(t instanceof Ki)return t;if(CW.call(t,"__wrapped__"))return kE(t)}return new Ki(t)}Gu.prototype=qs.prototype;Gu.prototype.constructor=Gu;var PE=Gu;function OW(t){var e=Gs(t),r=PE[e];if(typeof r!="function"||!(e in zs.prototype))return!1;if(t===r)return!0;var n=qu(r);return!!n&&t===n[0]}var fT=OW;var NW=800,LW=16,UW=Date.now;function HW(t){var e=0,r=0;return function(){var n=UW(),i=LW-(n-r);if(r=n,i>0){if(++e>=NW)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var ME=HW;function VW(t){return function(){return t}}var AE=VW;var BW=function(){try{var t=yr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),dT=BW;var WW=dT?function(t,e){return dT(t,"toString",{configurable:!0,enumerable:!1,value:AE(e),writable:!0})}:gr,DE=WW;var $W=ME(DE),Ku=$W;function jW(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Qu=jW;function qW(t){return t!==t}var IE=qW;function zW(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var FE=zW;function GW(t,e,r){return e===e?FE(t,e,r):Qu(t,IE,r)}var Zu=GW;function KW(t,e){var r=t==null?0:t.length;return!!r&&Zu(t,e,0)>-1}var CE=KW;var QW=9007199254740991,ZW=/^(?:0|[1-9]\d*)$/;function YW(t,e){var r=typeof t;return e=e??QW,!!e&&(r=="number"||r!="symbol"&&ZW.test(t))&&t>-1&&t%1==0&&t<e}var Ks=YW;function XW(t,e){return t===e||t!==t&&e!==e}var Qs=XW;var OE=Math.max;function JW(t,e,r){return e=OE(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=OE(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(a),RE(t,this,l)}}var Yu=JW;function e$(t,e){return Ku(Yu(t,e,gr),t+"")}var Zs=e$;var t$=9007199254740991;function r$(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=t$}var Ys=r$;function n$(t){return t!=null&&Ys(t.length)&&!Vu(t)}var jn=n$;function i$(t,e,r){if(!Lr(r))return!1;var n=typeof e;return(n=="number"?jn(r)&&Ks(e,r.length):n=="string"&&e in r)?Qs(r[e],t):!1}var Wo=i$;var o$=Object.prototype;function s$(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||o$;return t===r}var NE=s$;function a$(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Xu=a$;var c$="[object Arguments]";function l$(t){return er(t)&&Mn(t)==c$}var mT=l$;var LE=Object.prototype,p$=LE.hasOwnProperty,u$=LE.propertyIsEnumerable,f$=mT(function(){return arguments}())?mT:function(t){return er(t)&&p$.call(t,"callee")&&!u$.call(t,"callee")},Xs=f$;function d$(){return!1}var UE=d$;var BE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,HE=BE&&typeof module=="object"&&module&&!module.nodeType&&module,m$=HE&&HE.exports===BE,VE=m$?kt.Buffer:void 0,h$=VE?VE.isBuffer:void 0,g$=h$||UE,jc=g$;var y$="[object Arguments]",x$="[object Array]",T$="[object Boolean]",S$="[object Date]",v$="[object Error]",b$="[object Function]",w$="[object Map]",_$="[object Number]",E$="[object Object]",R$="[object RegExp]",k$="[object Set]",P$="[object String]",M$="[object WeakMap]",A$="[object ArrayBuffer]",D$="[object DataView]",I$="[object Float32Array]",F$="[object Float64Array]",C$="[object Int8Array]",O$="[object Int16Array]",N$="[object Int32Array]",L$="[object Uint8Array]",U$="[object Uint8ClampedArray]",H$="[object Uint16Array]",V$="[object Uint32Array]",Je={};Je[I$]=Je[F$]=Je[C$]=Je[O$]=Je[N$]=Je[L$]=Je[U$]=Je[H$]=Je[V$]=!0;Je[y$]=Je[x$]=Je[A$]=Je[T$]=Je[D$]=Je[S$]=Je[v$]=Je[b$]=Je[w$]=Je[_$]=Je[E$]=Je[R$]=Je[k$]=Je[P$]=Je[M$]=!1;function B$(t){return er(t)&&Ys(t.length)&&!!Je[Mn(t)]}var WE=B$;function W$(t){return function(e){return t(e)}}var Js=W$;var $E=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qc=$E&&typeof module=="object"&&module&&!module.nodeType&&module,$$=qc&&qc.exports===$E,hT=$$&&Uu.process,j$=function(){try{var t=qc&&qc.require&&qc.require("util").types;return t||hT&&hT.binding&&hT.binding("util")}catch{}}(),gT=j$;var jE=gT&&gT.isTypedArray,q$=jE?Js(jE):WE,Ju=q$;var z$=Object.prototype,G$=z$.hasOwnProperty;function K$(t,e){var r=qe(t),n=!r&&Xs(t),i=!r&&!n&&jc(t),o=!r&&!n&&!i&&Ju(t),a=r||n||i||o,l=a?Xu(t.length,String):[],p=l.length;for(var u in t)(e||G$.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ks(u,p)))&&l.push(u);return l}var qE=K$;function Q$(t,e){return function(r){return t(e(r))}}var zE=Q$;var Z$=zE(Object.keys,Object),GE=Z$;var Y$=Object.prototype,X$=Y$.hasOwnProperty;function J$(t){if(!NE(t))return GE(t);var e=[];for(var r in Object(t))X$.call(t,r)&&r!="constructor"&&e.push(r);return e}var KE=J$;function ej(t){return jn(t)?qE(t):KE(t)}var Zi=ej;var tj=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rj=/^\w*$/;function nj(t,e){if(qe(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Nr(t)?!0:rj.test(t)||!tj.test(t)||e!=null&&t in Object(e)}var ea=nj;var ij=yr(Object,"create"),vi=ij;function oj(){this.__data__=vi?vi(null):{},this.size=0}var QE=oj;function sj(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ZE=sj;var aj="__lodash_hash_undefined__",cj=Object.prototype,lj=cj.hasOwnProperty;function pj(t){var e=this.__data__;if(vi){var r=e[t];return r===aj?void 0:r}return lj.call(e,t)?e[t]:void 0}var YE=pj;var uj=Object.prototype,fj=uj.hasOwnProperty;function dj(t){var e=this.__data__;return vi?e[t]!==void 0:fj.call(e,t)}var XE=dj;var mj="__lodash_hash_undefined__";function hj(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=vi&&e===void 0?mj:e,this}var JE=hj;function ta(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ta.prototype.clear=QE;ta.prototype.delete=ZE;ta.prototype.get=YE;ta.prototype.has=XE;ta.prototype.set=JE;var yT=ta;function gj(){this.__data__=[],this.size=0}var eR=gj;function yj(t,e){for(var r=t.length;r--;)if(Qs(t[r][0],e))return r;return-1}var Yi=yj;var xj=Array.prototype,Tj=xj.splice;function Sj(t){var e=this.__data__,r=Yi(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Tj.call(e,r,1),--this.size,!0}var tR=Sj;function vj(t){var e=this.__data__,r=Yi(e,t);return r<0?void 0:e[r][1]}var rR=vj;function bj(t){return Yi(this.__data__,t)>-1}var nR=bj;function wj(t,e){var r=this.__data__,n=Yi(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var iR=wj;function ra(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ra.prototype.clear=eR;ra.prototype.delete=tR;ra.prototype.get=rR;ra.prototype.has=nR;ra.prototype.set=iR;var Xi=ra;var _j=yr(kt,"Map"),Ji=_j;function Ej(){this.size=0,this.__data__={hash:new yT,map:new(Ji||Xi),string:new yT}}var oR=Ej;function Rj(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var sR=Rj;function kj(t,e){var r=t.__data__;return sR(e)?r[typeof e=="string"?"string":"hash"]:r.map}var eo=kj;function Pj(t){var e=eo(this,t).delete(t);return this.size-=e?1:0,e}var aR=Pj;function Mj(t){return eo(this,t).get(t)}var cR=Mj;function Aj(t){return eo(this,t).has(t)}var lR=Aj;function Dj(t,e){var r=eo(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var pR=Dj;function na(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}na.prototype.clear=oR;na.prototype.delete=aR;na.prototype.get=cR;na.prototype.has=lR;na.prototype.set=pR;var $o=na;var Ij="Expected a function";function xT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Ij);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(xT.Cache||$o),r}xT.Cache=$o;var zc=xT;var Fj=500;function Cj(t){var e=zc(t,function(n){return r.size===Fj&&r.clear(),n}),r=e.cache;return e}var uR=Cj;var Oj=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nj=/\\(\\)?/g,Lj=uR(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Oj,function(r,n,i,o){e.push(i?o.replace(Nj,"$1"):n||r)}),e}),fR=Lj;function Uj(t){return t==null?"":hE(t)}var An=Uj;function Hj(t,e){return qe(t)?t:ea(t,e)?[t]:fR(An(t))}var ef=Hj;var Vj=1/0;function Bj(t){if(typeof t=="string"||Nr(t))return t;var e=t+"";return e=="0"&&1/t==-Vj?"-0":e}var to=Bj;function Wj(t,e){e=ef(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[to(e[r++])];return r&&r==n?t:void 0}var ia=Wj;function $j(t,e,r){var n=t==null?void 0:ia(t,e);return n===void 0?r:n}var jo=$j;function jj(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var oa=jj;var dR=Jt?Jt.isConcatSpreadable:void 0;function qj(t){return qe(t)||Xs(t)||!!(dR&&t&&t[dR])}var mR=qj;function hR(t,e,r,n,i){var o=-1,a=t.length;for(r||(r=mR),i||(i=[]);++o<a;){var l=t[o];e>0&&r(l)?e>1?hR(l,e-1,r,n,i):oa(i,l):n||(i[i.length]=l)}return i}var sa=hR;function zj(t){var e=t==null?0:t.length;return e?sa(t,1):[]}var et=zj;function Gj(t){return Ku(Yu(t,void 0,et),t+"")}var gR=Gj;function Kj(t){return function(e){return t?.[e]}}var yR=Kj;var Qj={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Zj=yR(Qj),xR=Zj;var Yj=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xj="\\u0300-\\u036f",Jj="\\ufe20-\\ufe2f",eq="\\u20d0-\\u20ff",tq=Xj+Jj+eq,rq="["+tq+"]",nq=RegExp(rq,"g");function iq(t){return t=An(t),t&&t.replace(Yj,xR).replace(nq,"")}var TT=iq;function oq(){this.__data__=new Xi,this.size=0}var TR=oq;function sq(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var SR=sq;function aq(t){return this.__data__.get(t)}var vR=aq;function cq(t){return this.__data__.has(t)}var bR=cq;var lq=200;function pq(t,e){var r=this.__data__;if(r instanceof Xi){var n=r.__data__;if(!Ji||n.length<lq-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new $o(n)}return r.set(t,e),this.size=r.size,this}var wR=pq;function aa(t){var e=this.__data__=new Xi(t);this.size=e.size}aa.prototype.clear=TR;aa.prototype.delete=SR;aa.prototype.get=vR;aa.prototype.has=bR;aa.prototype.set=wR;var ca=aa;function uq(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}var tf=uq;function fq(){return[]}var _R=fq;var dq=Object.prototype,mq=dq.propertyIsEnumerable,ER=Object.getOwnPropertySymbols,hq=ER?function(t){return t==null?[]:(t=Object(t),tf(ER(t),function(e){return mq.call(t,e)}))}:_R,RR=hq;function gq(t,e,r){var n=e(t);return qe(t)?n:oa(n,r(t))}var kR=gq;function yq(t){return kR(t,Zi,RR)}var ST=yq;var xq=yr(kt,"DataView"),rf=xq;var Tq=yr(kt,"Promise"),nf=Tq;var Sq=yr(kt,"Set"),ro=Sq;var PR="[object Map]",vq="[object Object]",MR="[object Promise]",AR="[object Set]",DR="[object WeakMap]",IR="[object DataView]",bq=Si(rf),wq=Si(Ji),_q=Si(nf),Eq=Si(ro),Rq=Si(Bo),qo=Mn;(rf&&qo(new rf(new ArrayBuffer(1)))!=IR||Ji&&qo(new Ji)!=PR||nf&&qo(nf.resolve())!=MR||ro&&qo(new ro)!=AR||Bo&&qo(new Bo)!=DR)&&(qo=function(t){var e=Mn(t),r=e==vq?t.constructor:void 0,n=r?Si(r):"";if(n)switch(n){case bq:return IR;case wq:return PR;case _q:return MR;case Eq:return AR;case Rq:return DR}return e});var vT=qo;var kq=kt.Uint8Array,bT=kq;function Pq(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return oa(qe(r)?Qi(r):[r],sa(e,1))}var Gc=Pq;var Mq="__lodash_hash_undefined__";function Aq(t){return this.__data__.set(t,Mq),this}var FR=Aq;function Dq(t){return this.__data__.has(t)}var CR=Dq;function of(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new $o;++e<r;)this.add(t[e])}of.prototype.add=of.prototype.push=FR;of.prototype.has=CR;var sf=of;function Iq(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var OR=Iq;function Fq(t,e){return t.has(e)}var af=Fq;var Cq=1,Oq=2;function Nq(t,e,r,n,i,o){var a=r&Cq,l=t.length,p=e.length;if(l!=p&&!(a&&p>l))return!1;var u=o.get(t),d=o.get(e);if(u&&d)return u==e&&d==t;var m=-1,g=!0,x=r&Oq?new sf:void 0;for(o.set(t,e),o.set(e,t);++m<l;){var v=t[m],b=e[m];if(n)var F=a?n(b,v,m,e,t,o):n(v,b,m,t,e,o);if(F!==void 0){if(F)continue;g=!1;break}if(x){if(!OR(e,function(M,U){if(!af(x,U)&&(v===M||i(v,M,r,n,o)))return x.push(U)})){g=!1;break}}else if(!(v===b||i(v,b,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var cf=Nq;function Lq(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var NR=Lq;function Uq(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var la=Uq;var Hq=1,Vq=2,Bq="[object Boolean]",Wq="[object Date]",$q="[object Error]",jq="[object Map]",qq="[object Number]",zq="[object RegExp]",Gq="[object Set]",Kq="[object String]",Qq="[object Symbol]",Zq="[object ArrayBuffer]",Yq="[object DataView]",LR=Jt?Jt.prototype:void 0,wT=LR?LR.valueOf:void 0;function Xq(t,e,r,n,i,o,a){switch(r){case Yq:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Zq:return!(t.byteLength!=e.byteLength||!o(new bT(t),new bT(e)));case Bq:case Wq:case qq:return Qs(+t,+e);case $q:return t.name==e.name&&t.message==e.message;case zq:case Kq:return t==e+"";case jq:var l=NR;case Gq:var p=n&Hq;if(l||(l=la),t.size!=e.size&&!p)return!1;var u=a.get(t);if(u)return u==e;n|=Vq,a.set(t,e);var d=cf(l(t),l(e),n,i,o,a);return a.delete(t),d;case Qq:if(wT)return wT.call(t)==wT.call(e)}return!1}var UR=Xq;var Jq=1,e3=Object.prototype,t3=e3.hasOwnProperty;function r3(t,e,r,n,i,o){var a=r&Jq,l=ST(t),p=l.length,u=ST(e),d=u.length;if(p!=d&&!a)return!1;for(var m=p;m--;){var g=l[m];if(!(a?g in e:t3.call(e,g)))return!1}var x=o.get(t),v=o.get(e);if(x&&v)return x==e&&v==t;var b=!0;o.set(t,e),o.set(e,t);for(var F=a;++m<p;){g=l[m];var M=t[g],U=e[g];if(n)var K=a?n(U,M,g,e,t,o):n(M,U,g,t,e,o);if(!(K===void 0?M===U||i(M,U,r,n,o):K)){b=!1;break}F||(F=g=="constructor")}if(b&&!F){var ne=t.constructor,ie=e.constructor;ne!=ie&&"constructor"in t&&"constructor"in e&&!(typeof ne=="function"&&ne instanceof ne&&typeof ie=="function"&&ie instanceof ie)&&(b=!1)}return o.delete(t),o.delete(e),b}var HR=r3;var n3=1,VR="[object Arguments]",BR="[object Array]",lf="[object Object]",i3=Object.prototype,WR=i3.hasOwnProperty;function o3(t,e,r,n,i,o){var a=qe(t),l=qe(e),p=a?BR:vT(t),u=l?BR:vT(e);p=p==VR?lf:p,u=u==VR?lf:u;var d=p==lf,m=u==lf,g=p==u;if(g&&jc(t)){if(!jc(e))return!1;a=!0,d=!1}if(g&&!d)return o||(o=new ca),a||Ju(t)?cf(t,e,r,n,i,o):UR(t,e,p,r,n,i,o);if(!(r&n3)){var x=d&&WR.call(t,"__wrapped__"),v=m&&WR.call(e,"__wrapped__");if(x||v){var b=x?t.value():t,F=v?e.value():e;return o||(o=new ca),i(b,F,r,n,o)}}return g?(o||(o=new ca),HR(t,e,r,n,i,o)):!1}var $R=o3;function jR(t,e,r,n,i){return t===e?!0:t==null||e==null||!er(t)&&!er(e)?t!==t&&e!==e:$R(t,e,r,n,jR,i)}var pa=jR;var s3=1,a3=2;function c3(t,e,r,n){var i=r.length,o=i,a=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var p=l[0],u=t[p],d=l[1];if(a&&l[2]){if(u===void 0&&!(p in t))return!1}else{var m=new ca;if(n)var g=n(u,d,p,t,e,m);if(!(g===void 0?pa(d,u,s3|a3,n,m):g))return!1}}return!0}var qR=c3;function l3(t){return t===t&&!Lr(t)}var pf=l3;function p3(t){for(var e=Zi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,pf(i)]}return e}var zR=p3;function u3(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var uf=u3;function f3(t){var e=zR(t);return e.length==1&&e[0][2]?uf(e[0][0],e[0][1]):function(r){return r===t||qR(r,t,e)}}var GR=f3;function d3(t,e){return t!=null&&e in Object(t)}var KR=d3;function m3(t,e,r){e=ef(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var a=to(e[n]);if(!(o=t!=null&&r(t,a)))break;t=t[a]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Ys(i)&&Ks(a,i)&&(qe(t)||Xs(t)))}var QR=m3;function h3(t,e){return t!=null&&QR(t,e,KR)}var ZR=h3;var g3=1,y3=2;function x3(t,e){return ea(t)&&pf(e)?uf(to(t),e):function(r){var n=jo(r,t);return n===void 0&&n===e?ZR(r,t):pa(e,n,g3|y3)}}var YR=x3;function T3(t){return function(e){return e?.[t]}}var ff=T3;function S3(t){return function(e){return ia(e,t)}}var XR=S3;function v3(t){return ea(t)?ff(to(t)):XR(t)}var JR=v3;function b3(t){return typeof t=="function"?t:t==null?gr:typeof t=="object"?qe(t)?YR(t[0],t[1]):GR(t):JR(t)}var no=b3;function w3(t){return function(e,r,n){for(var i=-1,o=Object(e),a=n(e),l=a.length;l--;){var p=a[t?l:++i];if(r(o[p],p,o)===!1)break}return e}}var ek=w3;var _3=ek(),tk=_3;function E3(t,e){return t&&tk(t,e,Zi)}var rk=E3;function R3(t,e){return function(r,n){if(r==null)return r;if(!jn(r))return t(r,n);for(var i=r.length,o=e?i:-1,a=Object(r);(e?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}var nk=R3;var k3=nk(rk),ik=k3;function P3(t){return er(t)&&jn(t)}var ok=P3;function M3(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var sk=M3;function A3(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var df=A3;var ak=/[\\^$.*+?()[\]{}|]/g,D3=RegExp(ak.source);function I3(t){return t=An(t),t&&D3.test(t)?t.replace(ak,"\\$&"):t}var Ur=I3;var F3=Math.max,C3=Math.min;function O3(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=Hu(r),i=r<0?F3(n+i,0):C3(i,n-1)),Qu(t,no(e,3),i,!0)}var zo=O3;function N3(t,e){var r=-1,n=jn(t)?Array(t.length):[];return ik(t,function(i,o,a){n[++r]=e(i,o,a)}),n}var ck=N3;var L3="Expected a function",U3=8,H3=32,V3=128,B3=256;function W3(t){return gR(function(e){var r=e.length,n=r,i=Ki.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(L3);if(i&&!a&&Gs(o)=="wrapper")var a=new Ki([],!0)}for(n=a?n:r;++n<r;){o=e[n];var l=Gs(o),p=l=="wrapper"?qu(o):void 0;p&&fT(p[0])&&p[1]==(V3|U3|H3|B3)&&!p[4].length&&p[9]==1?a=a[Gs(p[0])].apply(a,p[3]):a=o.length==1&&fT(o)?a[l]():a.thru(o)}return function(){var u=arguments,d=u[0];if(a&&u.length==1&&qe(d))return a.plant(d).value();for(var m=0,g=r?e[m].apply(this,u):d;++m<r;)g=e[m].call(this,g);return g}})}var lk=W3;var $3=lk(),_T=$3;function j3(t,e){return t>e}var pk=j3;function q3(t,e){return sn(e,function(r){return t[r]})}var uk=q3;function z3(t){return t==null?[]:uk(t,Zi(t))}var fk=z3;function G3(t,e){return pa(t,e)}var bi=G3;function K3(t,e){return t<e}var dk=K3;function Q3(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],a=e(o);if(a!=null&&(l===void 0?a===a&&!Nr(a):r(a,l)))var l=a,p=o}return p}var mf=Q3;function Z3(t,e){return t&&t.length?mf(t,no(e,2),pk):void 0}var ET=Z3;function Y3(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var mk=Y3;function X3(t){return t&&t.length?mf(t,gr,dk):void 0}var RT=X3;function J3(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var hk=J3;function ez(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Nr(t),a=e!==void 0,l=e===null,p=e===e,u=Nr(e);if(!l&&!u&&!o&&t>e||o&&a&&p&&!l&&!u||n&&a&&p||!r&&p||!i)return 1;if(!n&&!o&&!u&&t<e||u&&r&&i&&!n&&!o||l&&r&&i||!a&&i||!p)return-1}return 0}var gk=ez;function tz(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,a=i.length,l=r.length;++n<a;){var p=gk(i[n],o[n]);if(p){if(n>=l)return p;var u=r[n];return p*(u=="desc"?-1:1)}}return t.index-e.index}var yk=tz;function rz(t,e,r){e.length?e=sn(e,function(o){return qe(o)?function(a){return ia(a,o.length===1?o[0]:o)}:o}):e=[gr];var n=-1;e=sn(e,Js(no));var i=ck(t,function(o,a,l){var p=sn(e,function(u){return u(o)});return{criteria:p,index:++n,value:o}});return hk(i,function(o,a){return yk(o,a,r)})}var xk=rz;var nz=9007199254740991,iz=Math.floor;function oz(t,e){var r="";if(!t||e<1||e>nz)return r;do e%2&&(r+=t),e=iz(e/2),e&&(t+=t);while(e);return r}var Tk=oz;function sz(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var Sk=sz;var az=Array.prototype,vk=az.splice;function cz(t,e,r,n){var i=n?Sk:Zu,o=-1,a=e.length,l=t;for(t===e&&(e=Qi(e)),r&&(l=sn(t,Js(r)));++o<a;)for(var p=0,u=e[o],d=r?r(u):u;(p=i(l,d,p,n))>-1;)l!==t&&vk.call(l,p,1),vk.call(t,p,1);return t}var bk=cz;function lz(t,e){return t&&t.length&&e&&e.length?bk(t,e):t}var wk=lz;var pz=Zs(wk),tr=pz;var uz=Math.floor,fz=Math.random;function dz(t,e){return t+uz(fz()*(e-t+1))}var _k=dz;var mz=Math.ceil,hz=Math.max;function gz(t,e,r,n){for(var i=-1,o=hz(mz((e-t)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=t,t+=r;return a}var Ek=gz;function yz(t){return function(e,r,n){return n&&typeof n!="number"&&Wo(e,r,n)&&(r=n=void 0),e=js(e),r===void 0?(r=e,e=0):r=js(r),n=n===void 0?e<r?1:-1:js(n),Ek(e,r,n,t)}}var Rk=yz;var xz=Rk(),kT=xz;function Tz(t,e,r){return(r?Wo(t,e,r):e===void 0)?e=1:e=Hu(e),Tk(An(t),e)}var PT=Tz;function Sz(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=_k(r,i),a=t[o];t[o]=t[r],t[r]=a}return t.length=e,t}var hf=Sz;function vz(t){return hf(Qi(t))}var kk=vz;function bz(t){return hf(fk(t))}var Pk=bz;function wz(t){var e=qe(t)?kk:Pk;return e(t)}var MT=wz;var _z=Zs(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Wo(t,e[0],e[1])?e=[]:r>2&&Wo(e[0],e[1],e[2])&&(e=[e[0]]),xk(t,sa(e,1),[])}),AT=_z;function Ez(t,e){return t&&t.length?mk(t,no(e,2)):0}var gf=Ez;var Rz=1/0,kz=ro&&1/la(new ro([,-0]))[1]==Rz?function(t){return new ro(t)}:ju,Mk=kz;var Pz=200;function Mz(t,e,r){var n=-1,i=CE,o=t.length,a=!0,l=[],p=l;if(r)a=!1,i=sk;else if(o>=Pz){var u=e?null:Mk(t);if(u)return la(u);a=!1,i=af,p=new sf}else p=e?[]:l;e:for(;++n<o;){var d=t[n],m=e?e(d):d;if(d=r||d!==0?d:0,a&&m===m){for(var g=p.length;g--;)if(p[g]===m)continue e;e&&p.push(m),l.push(d)}else i(p,m,r)||(p!==l&&p.push(m),l.push(d))}return l}var yf=Mz;function Az(t){return t&&t.length?yf(t):[]}var Go=Az;function Dz(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?yf(t,void 0,e):[]}var Kc=Dz;var Iz=Math.max;function Fz(t){if(!(t&&t.length))return[];var e=0;return t=tf(t,function(r){if(ok(r))return e=Iz(r.length,e),!0}),Xu(e,function(r){return sn(t,ff(r))})}var Ak=Fz;var Cz=Zs(Ak),vt=Cz;var xf=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0}}};var Qc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Bt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{tr(this.listeners,e)}}}};var Tf={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var Zc=class{constructor(){this.notifier=new Bt;this.mocks={...Tf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(Nz(n,r))return jo(i,e)??jo(this.mocks,e)}return jo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function Nz(t,e){return t.languageId===e.languageId}var Sf={hideInferenceWarning:!1,tutorialProgress:{}};var Yc=class{constructor(){this.data={...Sf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var Xc=class{async showMessage(e,r,n,...i){}};var vf=class{constructor(){this.configuration=new Zc;this.messages=new Xc;this.keyValueStore=new Yc;this.clipboard=new Qc;this.capabilities=new xf;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=ua;this.onDidCloseTextDocument=ua;this.onDidChangeActiveTextEditor=ua;this.onDidChangeVisibleTextEditors=ua;this.onDidChangeTextEditorSelection=ua;this.onDidChangeTextEditorVisibleRanges=ua}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>tr(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function ua(){return{dispose(){}}}var pe=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new W(this,this)}concise(){return`${this.line}:${this.character}`}conciseOneBased(){return`${this.line+1}:${this.character+1}`}toString(){return this.concise()}};function Dk(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var W=class t{constructor(...e){let[r,n]=e.length===2?e:[new pe(e[0],e[1]),new pe(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof pe?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new be(this.end,this.start):new be(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}-${this.end.conciseOneBased()}`}toString(){return`${this.start.concise()}-${this.end.concise()}`}};function Lz(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function Uz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function Ik(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var bf=Ik(Lz),wf=Ik(Uz);function DT(t,e){return e.lastIndex=0,t.matchAll(e)}function xr(t,e,r){return Array.from(DT(t,e),r)}function Ko(t,e){return t.lastIndex=0,t.test(e)}function Fk(t,e){return t.lastIndex=0,e.match(t)}function Jc(t,e){return xr(t,e,r=>({index:r.index,text:r[0]}))}var fa=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var _f=class extends fa{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function el(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function st(t,e,r,...n){return t.showMessage("error",e,r,...n)}var se=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(se||{});var{supported:rt,unsupported:spe,notApplicable:Ck}=se,IT={ifStatement:rt,disqualifyDelimiter:rt,"comment.line":rt,"comment.block":rt,"string.singleLine":rt,"textFragment.comment.line":rt,"textFragment.comment.block":rt,"textFragment.string.singleLine":rt,class:rt,className:rt,namedFunction:rt,"name.function":rt,"name.class":rt,"name.field":rt,functionName:rt,"name.argument.formal":rt,"name.argument.formal.iteration":rt,"name.variable":rt,"value.variable":rt,"name.assignment":rt,"value.assignment":rt,"statement.class":rt,"type.class":rt,"type.field":rt,"value.argument.formal":Ck,"value.argument.formal.iteration":Ck};var{supported:lpe,unsupported:ppe,notApplicable:upe}=se;var{supported:Ok,unsupported:hpe,notApplicable:gpe}=se,Hz={...IT,"value.argument.formal":Ok,"value.argument.formal.iteration":Ok};var{supported:Tpe,unsupported:Spe,notApplicable:vpe}=se;var{supported:tl,unsupported:Vz,notApplicable:_pe}=se,FT={"comment.block":tl,"string.singleLine":tl,"name.iteration.block":tl,"name.iteration.document":tl,disqualifyDelimiter:tl,"comment.line":Vz};var{supported:kpe,unsupported:Ppe,notApplicable:Mpe}=se;var{supported:Ipe,unsupported:Fpe,notApplicable:Cpe}=se;var{supported:Lpe,notApplicable:Upe}=se;var{supported:Bpe,notApplicable:Wpe}=se;var{supported:q,unsupported:qpe,notApplicable:an}=se,CT={list:q,map:q,ifStatement:q,regularExpression:q,switchStatementSubject:q,fieldAccess:q,disqualifyDelimiter:q,pairDelimiter:q,"textFragment.string.singleLine":q,"textFragment.string.multiLine":q,"textFragment.comment.line":q,"textFragment.comment.block":q,statement:q,"statement.iteration.document":q,"statement.iteration.block":q,class:q,className:q,anonymousFunction:q,namedFunction:q,"namedFunction.iteration.document":q,"namedFunction.method":q,"namedFunction.method.iteration.class":q,"namedFunction.constructor":q,functionName:q,"functionName.iteration.document":q,"functionName.method":q,"functionName.method.iteration.class":q,"functionName.constructor":q,functionCall:q,"functionCall.constructor":q,functionCallee:q,"functionCallee.constructor":q,"argument.actual":q,"argument.actual.iteration":q,"argument.actual.method":q,"argument.actual.method.iteration":q,"argument.actual.constructor":q,"argument.actual.constructor.iteration":q,"argument.formal":q,"argument.formal.iteration":q,"argument.formal.method":q,"argument.formal.method.iteration":q,"argument.formal.constructor":q,"argument.formal.constructor.iteration":q,"comment.line":q,"comment.block":q,"string.singleLine":q,"string.multiLine":q,"branch.if":q,"branch.if.iteration":q,"branch.try":q,"branch.switchCase":q,"branch.switchCase.iteration":q,"branch.ternary":q,"condition.if":q,"condition.while":q,"condition.doWhile":q,"condition.for":q,"condition.ternary":q,"condition.switchCase":q,"name.argument.formal":q,"name.argument.formal.iteration":q,"name.argument.formal.method":q,"name.argument.formal.method.iteration":q,"name.argument.formal.constructor":q,"name.argument.formal.constructor.iteration":q,"name.foreach":q,"name.assignment":q,"name.assignment.pattern":q,"name.variable":q,"name.variable.pattern":q,"name.function":q,"name.method":q,"name.constructor":q,"name.class":q,"name.field":q,"key.mapPair":q,"key.mapPair.iteration":q,"value.argument.formal":q,"value.argument.formal.iteration":q,"value.argument.formal.method":q,"value.argument.formal.method.iteration":q,"value.argument.formal.constructor":q,"value.argument.formal.constructor.iteration":q,"value.mapPair":q,"value.mapPair.iteration":q,"value.assignment":q,"value.variable":q,"value.variable.pattern":q,"value.foreach":q,"value.return":q,"value.return.lambda":q,"value.field":q,"collectionItem.unenclosed":q},OT={element:q,tags:q,startTag:q,endTag:q,attribute:q,"key.attribute":q,"value.attribute":q,"interior.element":q},NT={...CT,...OT,"type.variable":an,"type.argument.formal":an,"type.argument.formal.iteration":an,"type.argument.formal.method":an,"type.argument.formal.method.iteration":an,"type.argument.formal.constructor":an,"type.argument.formal.constructor.iteration":an,"type.return":an,"type.field":an,"type.foreach":an,"type.interface":an,command:an};var{supported:Bz,unsupported:Qpe,notApplicable:Zpe}=se,Wz={...NT,"textFragment.element":Bz};var{supported:LT}=se,rl={"comment.line":LT,"comment.block":LT,map:LT};var{supported:rue,unsupported:nue,notApplicable:iue}=se,$z={...rl};var{supported:cue,unsupported:lue,notApplicable:pue}=se,jz={...rl};var{supported:due,unsupported:mue,notApplicable:hue}=se;var{supported:xue,notApplicable:Tue}=se;var{supported:bue,unsupported:wue,notApplicable:_ue}=se;var{supported:kue,unsupported:Pue,notApplicable:Mue}=se;var{supported:Iue,notApplicable:Fue}=se;var{supported:Nue,unsupported:Lue,notApplicable:Uue}=se;var{supported:Bue,unsupported:Wue,notApplicable:$ue}=se;var{supported:zue,unsupported:Gue,notApplicable:Kue}=se;var{supported:Yue,unsupported:Xue,notApplicable:Jue}=se;var{supported:da,unsupported:nfe,notApplicable:ife}=se,qz={...FT,"namedFunction.iteration":da,"namedFunction.iteration.document":da,"functionName.iteration":da,"functionName.iteration.document":da,"comment.line":da,disqualifyDelimiter:da};var{supported:afe}=se;var{supported:Ct}=se,UT={...CT,"name.field":Ct,"type.argument.formal":Ct,"type.argument.formal.iteration":Ct,"type.argument.formal.method":Ct,"type.argument.formal.method.iteration":Ct,"type.argument.formal.constructor":Ct,"type.argument.formal.constructor.iteration":Ct,"type.alias":Ct,"type.cast":Ct,"type.field":Ct,"type.interface":Ct,"type.enum":Ct,"type.return":Ct,"type.variable":Ct,"value.field":Ct,"value.typeAlias":Ct,disqualifyDelimiter:Ct};var{supported:hfe,unsupported:gfe,notApplicable:yfe}=se,zz={...UT,...OT};var{supported:Sfe,unsupported:vfe,notApplicable:bfe}=se;var{supported:Efe,unsupported:Rfe,notApplicable:kfe}=se;var ma=["that","source","instanceReference","keyboard"];var be=class extends W{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new pe(e[0],e[1]),new pe(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}->${this.end.conciseOneBased()}`}toString(){return this.concise()}};function Lk({line:t,character:e}){return new pe(t,e)}function Ef({start:t,end:e}){return new W(Lk(t),Lk(e))}function Hr({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function rr({start:t,end:e}){return{type:"character",start:t,end:e}}function nl(t){return{start:Rf(t.start),end:Rf(t.end)}}function Uk(t){return{anchor:Rf(t.anchor),active:Rf(t.active)}}function Rf({line:t,character:e}){return{line:t,character:e}}function rP(t){return typeof t>"u"||t===null}function Gz(t){return typeof t=="object"&&t!==null}function Kz(t){return Array.isArray(t)?t:rP(t)?[]:[t]}function Qz(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function Zz(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function Yz(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Xz=rP,Jz=Gz,eG=Kz,tG=Zz,rG=Yz,nG=Qz,bt={isNothing:Xz,isObject:Jz,toArray:eG,repeat:tG,isNegativeZero:rG,extend:nG};function nP(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function ol(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=nP(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}ol.prototype=Object.create(Error.prototype);ol.prototype.constructor=ol;ol.prototype.toString=function(e){return this.name+": "+nP(this,e)};var Tr=ol;function HT(t,e,r,n,i){var o="",a="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(a=" ...",r=n+l-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}function VT(t,e){return bt.repeat(" ",e-t.length)+t}function iG(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var l="",p,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,m=e.maxLength-(e.indent+d+3);for(p=1;p<=e.linesBefore&&!(a-p<0);p++)u=HT(t.buffer,n[a-p],i[a-p],t.position-(n[a]-n[a-p]),m),l=bt.repeat(" ",e.indent)+VT((t.line-p+1).toString(),d)+" | "+u.str+`
`+l;for(u=HT(t.buffer,n[a],i[a],t.position,m),l+=bt.repeat(" ",e.indent)+VT((t.line+1).toString(),d)+" | "+u.str+`
`,l+=bt.repeat("-",e.indent+d+3+u.pos)+`^
`,p=1;p<=e.linesAfter&&!(a+p>=i.length);p++)u=HT(t.buffer,n[a+p],i[a+p],t.position-(n[a]-n[a+p]),m),l+=bt.repeat(" ",e.indent)+VT((t.line+p+1).toString(),d)+" | "+u.str+`
`;return l.replace(/\n$/,"")}var oG=iG,sG=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],aG=["scalar","sequence","mapping"];function cG(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function lG(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(sG.indexOf(r)===-1)throw new Tr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=cG(e.styleAliases||null),aG.indexOf(this.kind)===-1)throw new Tr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ot=lG;function Bk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}function pG(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function WT(t){return this.extend(t)}WT.prototype.extend=function(e){var r=[],n=[];if(e instanceof Ot)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Tr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Ot))throw new Tr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Tr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Tr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Ot))throw new Tr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(WT.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Bk(i,"implicit"),i.compiledExplicit=Bk(i,"explicit"),i.compiledTypeMap=pG(i.compiledImplicit,i.compiledExplicit),i};var uG=WT,fG=new Ot("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),dG=new Ot("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),mG=new Ot("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),hG=new uG({explicit:[fG,dG,mG]});function gG(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function yG(){return null}function xG(t){return t===null}var TG=new Ot("tag:yaml.org,2002:null",{kind:"scalar",resolve:gG,construct:yG,predicate:xG,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function SG(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function vG(t){return t==="true"||t==="True"||t==="TRUE"}function bG(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var wG=new Ot("tag:yaml.org,2002:bool",{kind:"scalar",resolve:SG,construct:vG,predicate:bG,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function _G(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function EG(t){return 48<=t&&t<=55}function RG(t){return 48<=t&&t<=57}function kG(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!_G(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!EG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!RG(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function PG(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function MG(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!bt.isNegativeZero(t)}var AG=new Ot("tag:yaml.org,2002:int",{kind:"scalar",resolve:kG,construct:PG,predicate:MG,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),DG=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function IG(t){return!(t===null||!DG.test(t)||t[t.length-1]==="_")}function FG(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var CG=/^[-+]?[0-9]+e/;function OG(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(bt.isNegativeZero(t))return"-0.0";return r=t.toString(10),CG.test(r)?r.replace("e",".e"):r}function NG(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||bt.isNegativeZero(t))}var LG=new Ot("tag:yaml.org,2002:float",{kind:"scalar",resolve:IG,construct:FG,predicate:NG,represent:OG,defaultStyle:"lowercase"}),UG=hG.extend({implicit:[TG,wG,AG,LG]}),HG=UG,iP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),oP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function VG(t){return t===null?!1:iP.exec(t)!==null||oP.exec(t)!==null}function BG(t){var e,r,n,i,o,a,l,p=0,u=null,d,m,g;if(e=iP.exec(t),e===null&&(e=oP.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],l=+e[6],e[7]){for(p=e[7].slice(0,3);p.length<3;)p+="0";p=+p}return e[9]&&(d=+e[10],m=+(e[11]||0),u=(d*60+m)*6e4,e[9]==="-"&&(u=-u)),g=new Date(Date.UTC(r,n,i,o,a,l,p)),u&&g.setTime(g.getTime()-u),g}function WG(t){return t.toISOString()}var $G=new Ot("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:VG,construct:BG,instanceOf:Date,represent:WG});function jG(t){return t==="<<"||t===null}var qG=new Ot("tag:yaml.org,2002:merge",{kind:"scalar",resolve:jG}),GT=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function zG(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=GT;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function GG(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=GT,a=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):r===18?(l.push(a>>10&255),l.push(a>>2&255)):r===12&&l.push(a>>4&255),new Uint8Array(l)}function KG(t){var e="",r=0,n,i,o=t.length,a=GT;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}function QG(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var ZG=new Ot("tag:yaml.org,2002:binary",{kind:"scalar",resolve:zG,construct:GG,predicate:QG,represent:KG}),YG=Object.prototype.hasOwnProperty,XG=Object.prototype.toString;function JG(t){if(t===null)return!0;var e=[],r,n,i,o,a,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],a=!1,XG.call(i)!=="[object Object]")return!1;for(o in i)if(YG.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function eK(t){return t!==null?t:[]}var tK=new Ot("tag:yaml.org,2002:omap",{kind:"sequence",resolve:JG,construct:eK}),rK=Object.prototype.toString;function nK(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],rK.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function iK(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var oK=new Ot("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:nK,construct:iK}),sK=Object.prototype.hasOwnProperty;function aK(t){if(t===null)return!0;var e,r=t;for(e in r)if(sK.call(r,e)&&r[e]!==null)return!1;return!0}function cK(t){return t!==null?t:{}}var lK=new Ot("tag:yaml.org,2002:set",{kind:"mapping",resolve:aK,construct:cK}),KT=HG.extend({implicit:[$G,qG],explicit:[ZG,tK,oK,lK]}),oo=Object.prototype.hasOwnProperty,kf=1,sP=2,aP=3,Pf=4,BT=1,pK=2,Wk=3,uK=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,fK=/[\x85\u2028\u2029]/,dK=/[,\[\]\{\}]/,cP=/^(?:!|!!|![a-z\-]+!)$/i,lP=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function $k(t){return Object.prototype.toString.call(t)}function qn(t){return t===10||t===13}function Zo(t){return t===9||t===32}function Sr(t){return t===9||t===32||t===10||t===13}function ga(t){return t===44||t===91||t===93||t===123||t===125}function mK(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function hK(t){return t===120?2:t===117?4:t===85?8:0}function gK(t){return 48<=t&&t<=57?t-48:-1}function jk(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function yK(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var pP=new Array(256),uP=new Array(256);for(Qo=0;Qo<256;Qo++)pP[Qo]=jk(Qo)?1:0,uP[Qo]=jk(Qo);var Qo;function xK(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||KT,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function fP(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=oG(r),new Tr(e,r)}function le(t,e){throw fP(t,e)}function Mf(t,e){t.onWarning&&t.onWarning.call(null,fP(t,e))}var qk={YAML:function(e,r,n){var i,o,a;e.version!==null&&le(e,"duplication of %YAML directive"),n.length!==1&&le(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&le(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&le(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&Mf(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&le(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],cP.test(i)||le(e,"ill-formed tag handle (first argument) of the TAG directive"),oo.call(e.tagMap,i)&&le(e,'there is a previously declared suffix for "'+i+'" tag handle'),lP.test(o)||le(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{le(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function io(t,e,r,n){var i,o,a,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||le(t,"expected valid JSON character");else uK.test(l)&&le(t,"the stream contains non-printable characters");t.result+=l}}function zk(t,e,r,n){var i,o,a,l;for(bt.isObject(r)||le(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,l=i.length;a<l;a+=1)o=i[a],oo.call(e,o)||(e[o]=r[o],n[o]=!0)}function ya(t,e,r,n,i,o,a,l,p){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&le(t,"nested arrays are not supported inside keys"),typeof i=="object"&&$k(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&$k(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)zk(t,e,o[u],r);else zk(t,e,o,r);else!t.json&&!oo.call(r,i)&&oo.call(e,i)&&(t.line=a||t.line,t.lineStart=l||t.lineStart,t.position=p||t.position,le(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function QT(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):le(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function xt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Zo(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(qn(i))for(QT(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Mf(t,"deficient indentation"),n}function If(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Sr(r)))}function ZT(t,e){e===1?t.result+=" ":e>1&&(t.result+=bt.repeat(`
`,e-1))}function TK(t,e,r){var n,i,o,a,l,p,u,d,m=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),Sr(x)||ga(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),Sr(i)||r&&ga(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),Sr(i)||r&&ga(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),Sr(n))break}else{if(t.position===t.lineStart&&If(t)||r&&ga(x))break;if(qn(x))if(p=t.line,u=t.lineStart,d=t.lineIndent,xt(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=p,t.lineStart=u,t.lineIndent=d;break}}l&&(io(t,o,a,!1),ZT(t,t.line-p),o=a=t.position,l=!1),Zo(x)||(a=t.position+1),x=t.input.charCodeAt(++t.position)}return io(t,o,a,!1),t.result?!0:(t.kind=m,t.result=g,!1)}function SK(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(io(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else qn(r)?(io(t,n,i,!0),ZT(t,xt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&If(t)?le(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);le(t,"unexpected end of the stream within a single quoted scalar")}function vK(t,e){var r,n,i,o,a,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return io(t,r,t.position,!0),t.position++,!0;if(l===92){if(io(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),qn(l))xt(t,!1,e);else if(l<256&&pP[l])t.result+=uP[l],t.position++;else if((a=hK(l))>0){for(i=a,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(a=mK(l))>=0?o=(o<<4)+a:le(t,"expected hexadecimal character");t.result+=yK(o),t.position++}else le(t,"unknown escape sequence");r=n=t.position}else qn(l)?(io(t,r,n,!0),ZT(t,xt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&If(t)?le(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}le(t,"unexpected end of the stream within a double quoted scalar")}function bK(t,e){var r=!0,n,i,o,a=t.tag,l,p=t.anchor,u,d,m,g,x,v=Object.create(null),b,F,M,U;if(U=t.input.charCodeAt(t.position),U===91)d=93,x=!1,l=[];else if(U===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),U=t.input.charCodeAt(++t.position);U!==0;){if(xt(t,!0,e),U=t.input.charCodeAt(t.position),U===d)return t.position++,t.tag=a,t.anchor=p,t.kind=x?"mapping":"sequence",t.result=l,!0;r?U===44&&le(t,"expected the node content, but found ','"):le(t,"missed comma between flow collection entries"),F=b=M=null,m=g=!1,U===63&&(u=t.input.charCodeAt(t.position+1),Sr(u)&&(m=g=!0,t.position++,xt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,xa(t,e,kf,!1,!0),F=t.tag,b=t.result,xt(t,!0,e),U=t.input.charCodeAt(t.position),(g||t.line===n)&&U===58&&(m=!0,U=t.input.charCodeAt(++t.position),xt(t,!0,e),xa(t,e,kf,!1,!0),M=t.result),x?ya(t,l,v,F,b,M,n,i,o):m?l.push(ya(t,null,v,F,b,M,n,i,o)):l.push(b),xt(t,!0,e),U=t.input.charCodeAt(t.position),U===44?(r=!0,U=t.input.charCodeAt(++t.position)):r=!1}le(t,"unexpected end of the stream within a flow collection")}function wK(t,e){var r,n,i=BT,o=!1,a=!1,l=e,p=0,u=!1,d,m;if(m=t.input.charCodeAt(t.position),m===124)n=!1;else if(m===62)n=!0;else return!1;for(t.kind="scalar",t.result="";m!==0;)if(m=t.input.charCodeAt(++t.position),m===43||m===45)BT===i?i=m===43?Wk:pK:le(t,"repeat of a chomping mode identifier");else if((d=gK(m))>=0)d===0?le(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?le(t,"repeat of an indentation width identifier"):(l=e+d-1,a=!0);else break;if(Zo(m)){do m=t.input.charCodeAt(++t.position);while(Zo(m));if(m===35)do m=t.input.charCodeAt(++t.position);while(!qn(m)&&m!==0)}for(;m!==0;){for(QT(t),t.lineIndent=0,m=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&m===32;)t.lineIndent++,m=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),qn(m)){p++;continue}if(t.lineIndent<l){i===Wk?t.result+=bt.repeat(`
`,o?1+p:p):i===BT&&o&&(t.result+=`
`);break}for(n?Zo(m)?(u=!0,t.result+=bt.repeat(`
`,o?1+p:p)):u?(u=!1,t.result+=bt.repeat(`
`,p+1)):p===0?o&&(t.result+=" "):t.result+=bt.repeat(`
`,p):t.result+=bt.repeat(`
`,o?1+p:p),o=!0,a=!0,p=0,r=t.position;!qn(m)&&m!==0;)m=t.input.charCodeAt(++t.position);io(t,r,t.position,!1)}return!0}function Gk(t,e){var r,n=t.tag,i=t.anchor,o=[],a,l=!1,p;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),p=t.input.charCodeAt(t.position);p!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,le(t,"tab characters must not be used in indentation")),!(p!==45||(a=t.input.charCodeAt(t.position+1),!Sr(a))));){if(l=!0,t.position++,xt(t,!0,-1)&&t.lineIndent<=e){o.push(null),p=t.input.charCodeAt(t.position);continue}if(r=t.line,xa(t,e,aP,!1,!0),o.push(t.result),xt(t,!0,-1),p=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&p!==0)le(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function _K(t,e,r){var n,i,o,a,l,p,u=t.tag,d=t.anchor,m={},g=Object.create(null),x=null,v=null,b=null,F=!1,M=!1,U;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=m),U=t.input.charCodeAt(t.position);U!==0;){if(!F&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,le(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(U===63||U===58)&&Sr(n))U===63?(F&&(ya(t,m,g,x,v,null,a,l,p),x=v=b=null),M=!0,F=!0,i=!0):F?(F=!1,i=!0):le(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,U=n;else{if(a=t.line,l=t.lineStart,p=t.position,!xa(t,r,sP,!1,!0))break;if(t.line===o){for(U=t.input.charCodeAt(t.position);Zo(U);)U=t.input.charCodeAt(++t.position);if(U===58)U=t.input.charCodeAt(++t.position),Sr(U)||le(t,"a whitespace character is expected after the key-value separator within a block mapping"),F&&(ya(t,m,g,x,v,null,a,l,p),x=v=b=null),M=!0,F=!1,i=!1,x=t.tag,v=t.result;else if(M)le(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(M)le(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(F&&(a=t.line,l=t.lineStart,p=t.position),xa(t,e,Pf,!0,i)&&(F?v=t.result:b=t.result),F||(ya(t,m,g,x,v,b,a,l,p),x=v=b=null),xt(t,!0,-1),U=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&U!==0)le(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return F&&ya(t,m,g,x,v,null,a,l,p),M&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=m),M}function EK(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&le(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):le(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Sr(a);)a===33&&(n?le(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),cP.test(i)||le(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),dK.test(o)&&le(t,"tag suffix cannot contain flow indicator characters")}o&&!lP.test(o)&&le(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{le(t,"tag name is malformed: "+o)}return r?t.tag=o:oo.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:le(t,'undeclared tag handle "'+i+'"'),!0}function RK(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&le(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Sr(r)&&!ga(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&le(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function kK(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Sr(n)&&!ga(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&le(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),oo.call(t.anchorMap,r)||le(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],xt(t,!0,-1),!0}function xa(t,e,r,n,i){var o,a,l,p=1,u=!1,d=!1,m,g,x,v,b,F;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=Pf===r||aP===r,n&&xt(t,!0,-1)&&(u=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),p===1)for(;EK(t)||RK(t);)xt(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):l=!1;if(l&&(l=u||i),(p===1||Pf===r)&&(kf===r||sP===r?b=e:b=e+1,F=t.position-t.lineStart,p===1?l&&(Gk(t,F)||_K(t,F,b))||bK(t,b)?d=!0:(a&&wK(t,b)||SK(t,b)||vK(t,b)?d=!0:kK(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&le(t,"alias node should not have any properties")):TK(t,b,kf===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):p===0&&(d=l&&Gk(t,F))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&le(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),m=0,g=t.implicitTypes.length;m<g;m+=1)if(v=t.implicitTypes[m],v.resolve(t.result)){t.result=v.construct(t.result),t.tag=v.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(oo.call(t.typeMap[t.kind||"fallback"],t.tag))v=t.typeMap[t.kind||"fallback"][t.tag];else for(v=null,x=t.typeMap.multi[t.kind||"fallback"],m=0,g=x.length;m<g;m+=1)if(t.tag.slice(0,x[m].tag.length)===x[m].tag){v=x[m];break}v||le(t,"unknown tag !<"+t.tag+">"),t.result!==null&&v.kind!==t.kind&&le(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+v.kind+'", not "'+t.kind+'"'),v.resolve(t.result,t.tag)?(t.result=v.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):le(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function PK(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(xt(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!Sr(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&le(t,"directive name must not be less than one character in length");a!==0;){for(;Zo(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!qn(a));break}if(qn(a))break;for(r=t.position;a!==0&&!Sr(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&QT(t),oo.call(qk,n)?qk[n](t,n,i):Mf(t,'unknown document directive "'+n+'"')}if(xt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,xt(t,!0,-1)):o&&le(t,"directives end mark is expected"),xa(t,t.lineIndent-1,Pf,!1,!0),xt(t,!0,-1),t.checkLineBreaks&&fK.test(t.input.slice(e,t.position))&&Mf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&If(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,xt(t,!0,-1));return}if(t.position<t.length-1)le(t,"end of the stream or a document separator is expected");else return}function dP(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new xK(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,le(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)PK(r);return r.documents}function MK(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=dP(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function AK(t,e){var r=dP(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Tr("expected a single document in the stream, but found more")}}var DK=MK,IK=AK,mP={loadAll:DK,load:IK},hP=Object.prototype.toString,gP=Object.prototype.hasOwnProperty,YT=65279,FK=9,sl=10,CK=13,OK=32,NK=33,LK=34,$T=35,UK=37,HK=38,VK=39,BK=42,yP=44,WK=45,Af=58,$K=61,jK=62,qK=63,zK=64,xP=91,TP=93,GK=96,SP=123,KK=124,vP=125,Wt={};Wt[0]="\\0";Wt[7]="\\a";Wt[8]="\\b";Wt[9]="\\t";Wt[10]="\\n";Wt[11]="\\v";Wt[12]="\\f";Wt[13]="\\r";Wt[27]="\\e";Wt[34]='\\"';Wt[92]="\\\\";Wt[133]="\\N";Wt[160]="\\_";Wt[8232]="\\L";Wt[8233]="\\P";var QK=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],ZK=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function YK(t,e){var r,n,i,o,a,l,p;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),p=t.compiledTypeMap.fallback[a],p&&gP.call(p.styleAliases,l)&&(l=p.styleAliases[l]),r[a]=l;return r}function XK(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Tr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+bt.repeat("0",n-e.length)+e}var JK=1,al=2;function e4(t){this.schema=t.schema||KT,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=bt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=YK(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?al:JK,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Kk(t,e){for(var r=bt.repeat(" ",e),n=0,i=-1,o="",a,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=l):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}function jT(t,e){return`
`+bt.repeat(" ",t.indent*e)}function t4(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function Df(t){return t===OK||t===FK}function cl(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==YT||65536<=t&&t<=1114111}function Qk(t){return cl(t)&&t!==YT&&t!==CK&&t!==sl}function Zk(t,e,r){var n=Qk(t),i=n&&!Df(t);return(r?n:n&&t!==yP&&t!==xP&&t!==TP&&t!==SP&&t!==vP)&&t!==$T&&!(e===Af&&!i)||Qk(e)&&!Df(e)&&t===$T||e===Af&&i}function r4(t){return cl(t)&&t!==YT&&!Df(t)&&t!==WK&&t!==qK&&t!==Af&&t!==yP&&t!==xP&&t!==TP&&t!==SP&&t!==vP&&t!==$T&&t!==HK&&t!==BK&&t!==NK&&t!==KK&&t!==$K&&t!==jK&&t!==VK&&t!==LK&&t!==UK&&t!==zK&&t!==GK}function n4(t){return!Df(t)&&t!==Af}function il(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function bP(t){var e=/^\n* /;return e.test(t)}var wP=1,qT=2,_P=3,EP=4,ha=5;function i4(t,e,r,n,i,o,a,l){var p,u=0,d=null,m=!1,g=!1,x=n!==-1,v=-1,b=r4(il(t,0))&&n4(il(t,t.length-1));if(e||a)for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=il(t,p),!cl(u))return ha;b=b&&Zk(u,d,l),d=u}else{for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=il(t,p),u===sl)m=!0,x&&(g=g||p-v-1>n&&t[v+1]!==" ",v=p);else if(!cl(u))return ha;b=b&&Zk(u,d,l),d=u}g=g||x&&p-v-1>n&&t[v+1]!==" "}return!m&&!g?b&&!a&&!i(t)?wP:o===al?ha:qT:r>9&&bP(t)?ha:a?o===al?ha:qT:g?EP:_P}function o4(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===al?'""':"''";if(!t.noCompatMode&&(QK.indexOf(e)!==-1||ZK.test(e)))return t.quotingType===al?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function p(u){return t4(t,u)}switch(i4(e,l,t.indent,a,p,t.quotingType,t.forceQuotes&&!n,i)){case wP:return e;case qT:return"'"+e.replace(/'/g,"''")+"'";case _P:return"|"+Yk(e,t.indent)+Xk(Kk(e,o));case EP:return">"+Yk(e,t.indent)+Xk(Kk(s4(e,a),o));case ha:return'"'+a4(e)+'"';default:throw new Tr("impossible error: invalid scalar style")}}()}function Yk(t,e){var r=bP(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function Xk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function s4(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,Jk(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var l=a[1],p=a[2];o=p[0]===" ",n+=l+(!i&&!o&&p!==""?`
`:"")+Jk(p,e),i=o}return n}function Jk(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,l=0,p="";n=r.exec(t);)l=n.index,l-i>e&&(o=a>i?a:l,p+=`
`+t.slice(i,o),i=o+1),a=l;return p+=`
`,t.length-i>e&&a>i?p+=t.slice(i,a)+`
`+t.slice(a+1):p+=t.slice(i),p.slice(1)}function a4(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=il(t,i),n=Wt[r],!n&&cl(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||XK(r);return e}function c4(t,e,r){var n="",i=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(wi(t,e,l,!1,!1)||typeof l>"u"&&wi(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function eP(t,e,r,n){var i="",o=t.tag,a,l,p;for(a=0,l=r.length;a<l;a+=1)p=r[a],t.replacer&&(p=t.replacer.call(r,String(a),p)),(wi(t,e+1,p,!0,!0,!1,!0)||typeof p>"u"&&wi(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=jT(t,e)),t.dump&&sl===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function l4(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,l,p,u,d;for(a=0,l=o.length;a<l;a+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),p=o[a],u=r[p],t.replacer&&(u=t.replacer.call(r,p,u)),wi(t,e,p,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),wi(t,e,u,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function p4(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),l,p,u,d,m,g;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new Tr("sortKeys must be a boolean or a function");for(l=0,p=a.length;l<p;l+=1)g="",(!n||i!=="")&&(g+=jT(t,e)),u=a[l],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),wi(t,e+1,u,!0,!0,!0)&&(m=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,m&&(t.dump&&sl===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,m&&(g+=jT(t,e)),wi(t,e+1,d,!0,m)&&(t.dump&&sl===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function tP(t,e,r){var n,i,o,a,l,p;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(p=t.styleMap[l.tag]||l.defaultStyle,hP.call(l.represent)==="[object Function]")n=l.represent(e,p);else if(gP.call(l.represent,p))n=l.represent[p](e,p);else throw new Tr("!<"+l.tag+'> tag resolver accepts not "'+p+'" style');t.dump=n}return!0}return!1}function wi(t,e,r,n,i,o,a){t.tag=null,t.dump=r,tP(t,r,!1)||tP(t,r,!0);var l=hP.call(t.dump),p=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",m,g;if(d&&(m=t.duplicates.indexOf(r),g=m!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[m])t.dump="*ref_"+m;else{if(d&&g&&!t.usedDuplicates[m]&&(t.usedDuplicates[m]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(p4(t,e,t.dump,i),g&&(t.dump="&ref_"+m+t.dump)):(l4(t,e,t.dump),g&&(t.dump="&ref_"+m+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?eP(t,e-1,t.dump,i):eP(t,e,t.dump,i),g&&(t.dump="&ref_"+m+t.dump)):(c4(t,e,t.dump),g&&(t.dump="&ref_"+m+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&o4(t,t.dump,e,o,p);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Tr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function u4(t,e){var r=[],n=[],i,o;for(zT(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function zT(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)zT(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)zT(t[n[i]],e,r)}function f4(t,e){e=e||{};var r=new e4(e);r.noRefs||u4(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),wi(r,0,n,!0,!0)?r.dump+`
`:""}var d4=f4,m4={dump:d4};function XT(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var RP=Ot;var kP=KT,h4=mP.load,$de=mP.loadAll,PP=m4.dump;var jde=XT("safeLoad","load"),qde=XT("safeLoadAll","loadAll"),zde=XT("safeDump","dump");var Ff=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=PP(this.data,Object.assign({replacer:T4,schema:y4},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},g4=new RP("!format",{kind:"scalar",resolve:()=>!1,instanceOf:Ff,represent:t=>t.represent()}),y4=kP.extend({implicit:[g4]}),JT=t=>typeof t=="object"&&t!=null;function x4(t){if(JT(t))return Object.values(t).every(e=>!JT(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!JT(e)&&!Array.isArray(e))}function T4(t,e){return t===""?e:x4(e)?new Ff(e,{flowLevel:0}):e}var eS=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","flashTargets","foldRegion","followLink","followLinkAside","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],v4=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],AP=[...eS,...v4];var b4=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleBacktickQuotes","tripleDoubleQuotes","tripleSingleQuotes"],w4=["string","any","collectionBoundary"],Cf=[...b4,...w4],Yo=["argumentOrParameter","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function DP(t){return Yo.includes(t.type)}var IP=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],ll=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},Ta=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function pl(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function Xo(t){return t.version>=7}var so=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var Sa=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function FP(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function ul(t){return typeof t=="string"||t instanceof String}function Of(t){let[e,...r]=t;return E4(e,r)}function E4(t,e){let r;if(ul(t)){let n=t,[i,o,...a]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:a,usePrePhraseSnapshot:!1}}else r=t;return r}function fl(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function CP(t){for(let e of t)return!1;return!0}function _i(t){return Object.keys(t)}function dl(t,e){return`${t}.${e}`}var NP={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(OP).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(OP).join("")}};function OP(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}function LP(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,a)=>{let l=r(a),p=o.get(l);return p==null?(o.set(l,[a]),o):(o.get(l).push(a),p.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Kc(i.get(o),e))}),t.flatMap(o=>{let a=r(o),l=i.get(a);if(l==null||l.length===0)return[];let p=l[0];return e(p,o)?(l.shift(),p):[]}))}function Jo(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var $P=Symbol.for("immer-nothing"),UP=Symbol.for("immer-draftable"),Vr=Symbol.for("immer-state"),R4=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function vr(t,...e){if(process.env.NODE_ENV!=="production"){let r=R4[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var va=Object.getPrototypeOf;function ba(t){return!!t&&!!t[Vr]}function ts(t){return t?jP(t)||Array.isArray(t)||!!t[UP]||!!t.constructor?.[UP]||Vf(t)||Bf(t):!1}var k4=Object.prototype.constructor.toString();function jP(t){if(!t||typeof t!="object")return!1;let e=va(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===k4}function Nf(t,e){Hf(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Hf(t){let e=t[Vr];return e?e.type_:Array.isArray(t)?1:Vf(t)?2:Bf(t)?3:0}function nS(t,e){return Hf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function qP(t,e,r){let n=Hf(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function P4(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Vf(t){return t instanceof Map}function Bf(t){return t instanceof Set}function es(t){return t.copy_||t.base_}function iS(t,e){if(Vf(t))return new Map(t);if(Bf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=jP(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[Vr];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let a=i[o],l=n[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[a]})}return Object.create(va(t),n)}else{let n=va(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function lS(t,e=!1){return Wf(t)||ba(t)||!ts(t)||(Hf(t)>1&&(t.set=t.add=t.clear=t.delete=M4),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>lS(n,!0))),t}function M4(){vr(2)}function Wf(t){return Object.isFrozen(t)}var A4={};function rs(t){let e=A4[t];return e||vr(0,t),e}var ml;function zP(){return ml}function D4(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function HP(t,e){e&&(rs("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function oS(t){sS(t),t.drafts_.forEach(I4),t.drafts_=null}function sS(t){t===ml&&(ml=t.parent_)}function VP(t){return ml=D4(ml,t)}function I4(t){let e=t[Vr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function BP(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Vr].modified_&&(oS(e),vr(4)),ts(t)&&(t=Lf(e,t),e.parent_||Uf(e,t)),e.patches_&&rs("Patches").generateReplacementPatches_(r[Vr].base_,t,e.patches_,e.inversePatches_)):t=Lf(e,r,[]),oS(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==$P?t:void 0}function Lf(t,e,r){if(Wf(e))return e;let n=e[Vr];if(!n)return Nf(e,(i,o)=>WP(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Uf(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,a=!1;n.type_===3&&(o=new Set(i),i.clear(),a=!0),Nf(o,(l,p)=>WP(t,n,i,l,p,r,a)),Uf(t,i,!1),r&&t.patches_&&rs("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function WP(t,e,r,n,i,o,a){if(process.env.NODE_ENV!=="production"&&i===r&&vr(5),ba(i)){let l=o&&e&&e.type_!==3&&!nS(e.assigned_,n)?o.concat(n):void 0,p=Lf(t,i,l);if(qP(r,n,p),ba(p))t.canAutoFreeze_=!1;else return}else a&&r.add(i);if(ts(i)&&!Wf(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Lf(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Uf(t,i)}}function Uf(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&lS(e,r)}function F4(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:zP(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=pS;r&&(i=[n],o=hl);let{revoke:a,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=a,l}var pS={get(t,e){if(e===Vr)return t;let r=es(t);if(!nS(r,e))return C4(t,r,e);let n=r[e];return t.finalized_||!ts(n)?n:n===tS(t.base_,e)?(rS(t),t.copy_[e]=cS(n,t)):n},has(t,e){return e in es(t)},ownKeys(t){return Reflect.ownKeys(es(t))},set(t,e,r){let n=GP(es(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=tS(es(t),e),o=i?.[Vr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(P4(r,i)&&(r!==void 0||nS(t.base_,e)))return!0;rS(t),aS(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return tS(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,rS(t),aS(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=es(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){vr(11)},getPrototypeOf(t){return va(t.base_)},setPrototypeOf(){vr(12)}},hl={};Nf(pS,(t,e)=>{hl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});hl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&vr(13),hl.set.call(this,t,e,void 0)};hl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&vr(14),pS.set.call(this,t[0],e,r,t[0])};function tS(t,e){let r=t[Vr];return(r?es(r):t)[e]}function C4(t,e,r){let n=GP(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function GP(t,e){if(!(e in t))return;let r=va(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=va(r)}}function aS(t){t.modified_||(t.modified_=!0,t.parent_&&aS(t.parent_))}function rS(t){t.copy_||(t.copy_=iS(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var O4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let a=this;return function(p=o,...u){return a.produce(p,d=>r.call(this,d,...u))}}typeof r!="function"&&vr(6),n!==void 0&&typeof n!="function"&&vr(7);let i;if(ts(e)){let o=VP(this),a=cS(e,void 0),l=!0;try{i=r(a),l=!1}finally{l?oS(o):sS(o)}return HP(o,n),BP(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===$P&&(i=void 0),this.autoFreeze_&&lS(i,!0),n){let o=[],a=[];rs("Patches").generateReplacementPatches_(e,i,o,a),n(o,a)}return i}else vr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,p=>e(p,...l));let n,i;return[this.produce(e,r,(a,l)=>{n=a,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ts(t)||vr(8),ba(t)&&(t=N4(t));let e=VP(this),r=cS(t,void 0);return r[Vr].isManual_=!0,sS(e),r}finishDraft(t,e){let r=t&&t[Vr];(!r||!r.isManual_)&&vr(9);let{scope_:n}=r;return HP(n,e),BP(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=rs("Patches").applyPatches_;return ba(t)?n(t,e):this.produce(t,i=>n(i,e))}};function cS(t,e){let r=Vf(t)?rs("MapSet").proxyMap_(t,e):Bf(t)?rs("MapSet").proxySet_(t,e):F4(t,e);return(e?e.scope_:zP()).drafts_.push(r),r}function N4(t){return ba(t)||vr(10,t),KP(t)}function KP(t){if(!ts(t)||Wf(t))return t;let e=t[Vr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=iS(t,e.scope_.immer_.useStrictShallowCopy_)}else r=iS(t,!0);return Nf(r,(n,i)=>{qP(r,n,KP(i))}),e&&(e.finalized_=!1),r}var Br=new O4,$f=Br.produce,zge=Br.produceWithPatches.bind(Br),Gge=Br.setAutoFreeze.bind(Br),Kge=Br.setUseStrictShallowCopy.bind(Br),Qge=Br.applyPatches.bind(Br),Zge=Br.createDraft.bind(Br),Yge=Br.finishDraft.bind(Br);var nr=hr(gM(),1),Nye=nr.default.v1,Lye=nr.default.v1ToV6,Uye=nr.default.v3,yM=nr.default.v4,Hye=nr.default.v5,Vye=nr.default.v6,Bye=nr.default.v6ToV1,Wye=nr.default.v7,$ye=nr.default.NIL,jye=nr.default.MAX,qye=nr.default.version,zye=nr.default.validate,Gye=nr.default.stringify,Kye=nr.default.parse;function xM(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function cd(t,e){if(Array.isArray(t))return t.map(r=>cd(r,e));if(typeof t=="object"&&t!=null){if(i9(t))return xM(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=cd(t[n],e));return r}return t}function i9(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var hd=hr(SM(),1);var o9={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},s9={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},pd={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},ud={modulo100:"row",relativeUp:"up",relativeDown:"down"};function vM(t){let e=o9[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function bM(t){let e=s9[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function vS(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var a9=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),c9=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),l9={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},wM={...a9,...c9,...l9};function ao(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function wt(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var _M={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:wt("triple quad"),tripleSingleQuotes:wt("triple twin"),tripleBacktickQuotes:wt("triple skis"),any:"pair",string:"string",whitespace:"void",collectionBoundary:wt("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:ao("one section"),sectionLevelTwo:ao("two section"),sectionLevelThree:ao("three section"),sectionLevelFour:ao("four section"),sectionLevelFive:ao("five section"),sectionLevelSix:ao("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:wt("parse tree string"),textFragment:wt("text fragment"),disqualifyDelimiter:wt("disqualify delimiter"),pairDelimiter:wt("pair delimiter"),"private.fieldAccess":wt("access"),"private.switchStatementSubject":wt("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",flashTargets:"flash",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join","private.showParseTree":wt("parse tree"),"experimental.setInstanceReference":ao("from"),editNew:wt("edit new"),executeCommand:wt("execute command"),parsed:wt("parsed"),getText:wt("get text"),replace:wt("replace"),"private.getTargets":wt("get targets"),"private.setKeyboardTarget":wt("set keyboard target")},customAction:{},grapheme:wM};var bS=vS(_M,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),Ri=vS(bS,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var ht={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var kM=hr(RM(),1),dd=class{constructor(e){this.mooLexer=kM.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var ki={};for(let t of eS){let{spokenForms:e}=Ri.action[t];for(let r of e)ki[r]={type:"simpleActionName",value:t}}var p9=["replaceWithTarget","moveToTarget"];for(let t of p9){let{spokenForms:e}=Ri.action[t];for(let r of e)ki[r]={type:"bringMove",value:t}}var u9=["before","after","to"];for(let t of u9){let e=ht[t==="to"?"sourceDestinationConnective":t];ki[e]={type:"insertionMode",value:t}}for(let t of Yo){let{spokenForms:e}=Ri.simpleScopeTypeType[t];for(let r of e)ki[r]={type:"simpleScopeTypeType",value:t}}for(let t of Cf){let{spokenForms:e}=Ri.pairedDelimiter[t];for(let r of e)ki[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(pd))e!=null&&(ki[e]={type:"simpleMarkType",value:t});var Pi=new dd({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(ki),type:t=>ki[t].type,value:t=>ki[t].value}});function PM(t,e){return{name:t,target:e}}function MM(t,e,r){return{name:t,source:e,destination:r}}function md(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function AM(t,e){return{type:"primitive",insertionMode:t,target:e}}function DM(t){return{type:"containingScope",scopeType:t}}function IM(t){return{type:t}}function FM(t){return{type:"surroundingPair",delimiter:t}}function CM(t){return{type:t}}function OM(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function wS(t){return t[0]}var f9={Lexer:Pi,ParserRules:[{name:"main",symbols:["action"],postprocess:wS},{name:"action",symbols:[Pi.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>PM(t,e)},{name:"action",symbols:[Pi.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>MM(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:wS},{name:"destination",symbols:[Pi.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>AM(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:wS},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>md(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>md(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>md(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>DM(t)},{name:"scopeType",symbols:[Pi.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>IM(t)},{name:"scopeType",symbols:[Pi.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>FM(t)},{name:"mark",symbols:[Pi.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>CM(t)},{name:"mark",symbols:[Pi.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>OM(t)}],ParserStart:"main"},NM=f9;function d9(){return new hd.Parser(hd.Grammar.fromCompiled(NM))}function LM(t){let e=d9();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function gd(t,e){let r=LM(t);return cd(r,e)}function Tl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...UM(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return UM(t.destination);case"parsed":return Tl(gd(t.content,t.arguments));default:return[t.target]}}function UM(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function ES(t){return t.flatMap(_S)}function _S(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(_S);case"range":return[t.anchor,t.active].flatMap(_S);case"implicit":return[]}}var m9={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},h9={purple:"pink"};function g9(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=m9[e.scopeType.type]??e.scopeType.type)})}function y9(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=h9[t.mark.symbolColor]??t.mark.symbolColor)}function RS(t){ES(t).forEach(e=>{g9(e),y9(e)})}function HM(t){return{...t,version:1}}var x9={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},T9={type:"primitive",isImplicit:!0},VM=t=>bi(t,x9)?T9:t;function BM(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:v9(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function S9(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function kS(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:a,selectionType:l,position:p}=t,u=[];if(p&&p!=="contents"&&(p==="before"?o==="inside"?u.push({type:"position",position:"start"}):e==="remove"?u.push({type:"leading"}):u.push({type:"position",position:"before"}):o==="inside"?u.push({type:"position",position:"end"}):e==="remove"?u.push({type:"trailing"}):u.push({type:"position",position:"after"})),l)switch(l){case"token":if(a?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:u.push({type:"containingScope",scopeType:{type:l}})}return a&&u.push(...S9(a)),{type:r,isImplicit:n,modifiers:u.length>0?u:void 0,mark:i?.type==="cursorToken"?void 0:i}}function WM(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>WM(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:a,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:kS(i,e),active:kS(o,e),excludeAnchor:a??!1,excludeActive:l??!1}}case"primitive":return kS(t,e)}}function v9(t,e){return t.map(r=>WM(r,e)).map(r=>r.type==="primitive"?VM(r):r)}function $M(t){return{...t,version:3,targets:t.targets.map(jM)}}function jM(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>jM(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:PS(e),active:PS(r),...n}}case"primitive":return PS(t)}}function PS(t){let e=t.modifiers!=null?t.modifiers.map(w9):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:vl(r),modifiers:e},active:{type:"primitive",mark:vl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?b9(t.mark):void 0,modifiers:e}}function b9(t){switch(t.type){case"lineNumber":return _9(t);default:return t}}function w9(t){switch(t.type){case"ordinalRange":return E9(t);default:return t}}function _9(t){return bi(t.anchor,t.active)?vl(t.anchor):{type:"range",anchor:vl(t.anchor),active:vl(t.active)}}function E9(t){return t.anchor===t.active?Sl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?Sl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?Sl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:Sl(t.scopeType,t.anchor),active:Sl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function vl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function Sl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function zM(t){return{...t,version:4,targets:t.targets.map(GM)}}function GM(t){switch(t.type){case"primitive":return qM(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:qM(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(GM)}}}}function qM(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function KM(t){return{...t,version:5,action:R9(t.action),targets:t.targets.map(yd)}}function R9(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=k9(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function k9(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function yd(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(yd)};case"range":return{...t,anchor:yd(t.anchor),active:yd(t.active)};case"primitive":return{...t,mark:t.mark!=null?MS(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(AS):void 0}}}function MS(t){return t.type==="range"?{...t,anchor:MS(t.anchor),active:MS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function AS(t){return t.type==="range"?{...t,anchor:AS(t.anchor),active:AS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var P9={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function DS(t){let e=P9[t]??t;if(!AP.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function QM(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:M9(t.action,t.targets)}}function M9(t,e){let r=DS(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:cn(e[0]),destination:bl(e[1])};case"swapTargets":return{name:r,target1:cn(e[0]),target2:cn(e[1])};case"callAsFunction":return{name:r,callee:cn(e[0]),argument:cn(e[1])};case"pasteFromClipboard":return{name:r,destination:bl(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:cn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:cn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:bl(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:cn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:cn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:bl(e[0])};case"highlight":{let n={name:r,target:cn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:bl(e[0])};case"getText":return{name:r,options:t.args?.[0],target:cn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:cn(e[0])}}}function cn(t){switch(t.type){case"list":case"range":case"primitive":return A9(t);case"implicit":return t}}function A9(t){switch(t.type){case"list":return D9(t);case"range":case"primitive":return xd(t)}}function D9(t){return{...t,elements:t.elements.map(xd)}}function xd(t){switch(t.type){case"range":return ZM(t);case"primitive":return Td(t)}}function ZM(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:Td(e),active:Td(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function Td(t){let e={type:"primitive"},r=L9(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function bl(t){switch(t.type){case"list":return I9(t);case"range":return F9(t);case"primitive":return C9(t);case"implicit":return O9()}}function I9(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let a=Sd(o);a!=null?(i(),r=[xd(o)],n=a):r.push(xd(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function F9(t){return{type:"primitive",insertionMode:Sd(t.anchor)??"to",target:ZM(t)}}function C9(t){return{type:"primitive",insertionMode:Sd(t)??"to",target:Td(t)}}function O9(){return{type:"implicit"}}function Sd(t){switch(t.type){case"implicit":return"to";case"primitive":return N9(t);case"range":return Sd(t.anchor)}}function N9(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function L9(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function YM(t){return{...t,version:7}}function FS(t){let e=U9(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:$f(r,o=>{let a=Tl(o);RS(a),r.name}),usePrePhraseSnapshot:n}}function U9(t,e){if(t.version>7)throw new Nu;for(;t.version<e;)switch(t.version){case 0:t=HM(t);break;case 1:t=BM(t);break;case 2:t=$M(t);break;case 3:t=zM(t);break;case 4:t=KM(t);break;case 5:t=QM(t);break;case 6:t=YM(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var CS;function vd(t){CS=t}function k(){if(CS==null)throw Error("Tried to access ide before it was injected");return CS}var bd=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var H9=25,wd=class{constructor(){this.targetMap=new Map;this.targetHistory=new Sa(()=>new bd(H9));this.notifier=new Bt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of ma)e(r,this.get(r));return this.notifier.registerListener(e)}};function wr(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function jt(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Mi(t,e,r){return Promise.all(OS(t,e).map(([n,i])=>r(n,i)))}async function nt(t,e){return Mi(t,r=>r.editor,e)}async function XM(t,e){let r=OS(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function JM(t){return OS(t,e=>e.editor)}function OS(t,e){let n=fl(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function ln(t,e){return e!=null?vt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new be(i.end,i.start):new be(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function pn(t,e){return t.textualType==="line"?Hr(e):rr(e)}function V9(t){return pn(t,t.contentRange)}function Ae(t,e,r,n=V9){return t.flashRanges(e.map(i=>({editor:i.editor,range:n(i),style:r})))}function co(t,e){return new W(new pe(e.start.line,0),t.document.lineAt(e.end).range.end)}function NS(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function eA(t,e){let[r,n]=e instanceof pe?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Ai(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var _d=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=W9(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?B9(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=a=>this.updateRange(a,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Ai(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new W(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),a=o+r.length;return new W(this.editor.document.positionAt(o),this.editor.document.positionAt(a))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function B9(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let a=o.rangeTrimmed?.start??o.range.end;a.character<r&&(r=a.character,n=o.text.slice(0,r))}return n}function W9(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function wa(t,e,r,n){return $9(t.contentRange,e.contentRange,r,n)}function $9(t,e,r,n){return new W(r?t.start:t.end,n?e.end:e.start)}function _a(t,e,r,n){let i=r?t.contentRange.start:new pe(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new W(i,o)}var He=class t{constructor(e){this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.textualType="token";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return pn(this,this.getRemovalRange())}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:wa(this,r,!0,!0)})}isEqual(e){return e instanceof t&&bi(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new _d(this,e)}toPlainObject(){return{type:this.type,contentRange:nl(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function Ed(t,e){return j9(t,e.start,e.end)}function j9(t,e,r){return{editor:t.editor,selection:q9(t.selection,e,r)}}function q9(t,e,r){return t.isReversed?new be(r,e):new be(e,r)}function is(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,a=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,p=r.positionAt(a),u=r.positionAt(l);return new W(p,u)}function Rd(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var Be=class extends He{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.textualType=r.textualType??"token",this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,textualType:this.textualType,insertionDelimiter:this.insertionDelimiter}}};function Ea(t,e,r){return Rd(Be,t,e,r)}var kd=class extends He{constructor(r){super(r);this.type="DocumentTarget";this.textualType="line";this.insertionDelimiter=`
`}getInterior(){return[new Be({editor:this.editor,isReversed:this.isReversed,contentRange:is(this.editor,this.contentRange)})]}getRemovalRange(){return this.contentRange}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getCloneParameters(){return this.state}};var ir=class t extends He{constructor(){super(...arguments);this.type="LineTarget";this.textualType="line";this.insertionDelimiter=`
`;this.getRemovalHighlightRange=()=>Hr(this.fullLineContentRange)}get fullLineContentRange(){return co(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return Ea(this.editor,z9(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return Ea(this.editor,G9(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:_a(this,n,!0,!0)})}getCloneParameters(){return this.state}};function z9(t,e){let{start:r}=e;return r.line>0?new W(t.document.lineAt(r.line-1).range.end,e.start):void 0}function G9(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new W(e.end,new pe(r.line+1,0)):void 0}function LS(t,e,r){return Rd(ir,t,e,r)}var Pd=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var Md=class extends He{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new Pd(this,r)}};var lo=class t extends He{constructor(){super(...arguments);this.type="ParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`}getLeadingDelimiterTarget(){return LS(this.editor,K9(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return LS(this.editor,Q9(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new ir({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return co(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange;return Hr(n)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:_a(this,n,!0,!0)})}getCloneParameters(){return this.state}};function K9(t,e){let{document:r}=t,n=r.lineAt(e.start),i=Z9(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new W(new pe(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new W(new pe(0,0),r.lineAt(n.lineNumber-1).range.end)}function Q9(t,e){let{document:r}=t,n=r.lineAt(e.end),i=Y9(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new W(new pe(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new W(new pe(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function Z9(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function Y9(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var po=class extends He{constructor(){super(...arguments);this.type="RawSelectionTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};function wl(t){let e=Ai(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var X9=['"',"'","(","[","{","<"],J9=['"',"'",")","]","}",">",",",";",":"];function zn(t){let{editor:e}=t,{start:r}=Ai(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new Be({contentRange:new W(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function Gn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new Be({contentRange:new W(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function uo(t){let{editor:e}=t,r=Ai(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),a=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=co(e,r);return o.union(a).isRangeEqual(l)?l:!a.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||X9.includes(e5(e,r)))?r.union(a):!o.isEmpty&&(r.end.isEqual(l.end)||J9.includes(t5(e,r)))?r.union(o):r}function e5(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new W(r.translate(void 0,-1),r)):""}function t5(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new W(r.translate(void 0,1),r)):""}var qt=class extends He{constructor(){super(...arguments);this.type="TokenTarget";this.textualType="token";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return uo(this)}getCloneParameters(){return this.state}};function US(t){let{editor:e,isReversed:r}=t,{document:n}=e,i=Ai(t.contentRange,t.prefixRange);return r5(n,i)?n5(n,i)?new lo({editor:e,isReversed:r,contentRange:i}):new ir({editor:e,isReversed:r,contentRange:i}):new qt({editor:e,isReversed:r,contentRange:i})}function r5(t,e){let r=t.lineAt(e.start).rangeTrimmed?.start,n=t.lineAt(e.end).rangeTrimmed?.end;return r!=null&&n!=null&&r.isEqual(e.start)&&n.isEqual(e.end)}function n5(t,e){let{start:r,end:n}=e;return(r.line===0||t.lineAt(r.line-1).isEmptyOrWhitespace)&&(n.line===t.lineCount-1||t.lineAt(n.line+1).isEmptyOrWhitespace)}var fo=class t extends He{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??i5(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new Be({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return zn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new Be({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return Gn(this)}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?wl(this):US(this).getRemovalRange()}getRemovalHighlightRange(){return this.removalRange_!=null?pn(this,this.removalRange_):this.hasDelimiterRange_?pn(this,wl(this)):US(this).getRemovalHighlightRange()}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?(this.removalRange_??this.contentRange).union(n.removalRange_??n.contentRange):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:this.contentRange.union(n.contentRange)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function i5(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var Ad=class t extends He{constructor(r){super(r);this.type="SubTokenWordTarget";this.textualType="word";this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return Ea(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return Ea(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return wl(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:wa(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Ra=class t extends He{constructor(r){super({...r,contentRange:is(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:this.fullInteriorRange.union(n.fullInteriorRange)})}};var Dd=class extends He{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return uo(this)}getInterior(){return[new Ra({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new qt({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Pt=class extends He{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.textualType=r.textualType??"token"}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:uo(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,textualType:this.textualType,hasExplicitRange:this.hasExplicitRange}}};var Id=class extends He{constructor(){super(...arguments);this.type="ImplicitTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var Fd=class extends He{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:tA(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return uo(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new Be({editor:this.editor,contentRange:tA(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function tA(t,e,r){return r?new W(e.start,t.end):new W(t.start,e.end)}var Cd=class t extends He{constructor(r){super({...r,contentRange:o5(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new ir({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return co(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=(()=>{if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n!=null?this.fullLineContentRange.union(n.contentRange):this.fullLineContentRange})();return Hr(r)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function o5(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function Od(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var ka=class{run(){return Od(k()).map(e=>new Pt({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,textualType:"character"}))}};var Kn=class{constructor(e,r){this.debouncer=new Cu(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var Nd=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Kn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new ka().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var Ld=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var s5=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],a5=s5.map(Ur).join("|"),c5=["[a-zA-Z0-9]",a5].join("|"),l5=new RegExp(`^(${c5})$`,"u"),p5="[unk]",u5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Ud=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Bt;this.getTokenGraphemes=e=>xr(e,u5,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;k().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(k().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=k().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=TT(o),l5.test(o)||(o=p5)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function os(){return HS==null&&(HS=new Ud),HS}var HS;var rA=({penalty:t})=>-t;function nA(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function iA(t,e){let r=zc(n=>RT(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function VS(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function oA(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function sA(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=f5(r,n)}return r[0]}function f5(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function aA({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,a){return sA(a,[VS(i),oA(r),VS(o),nA(t),rA,iA(n,e)])}function cA(t,e,r){let n={},i=new so(({grapheme:o,hatStyle:a})=>[o,a]);return t.forEach(({token:o,rank:a})=>{let l=e.get(o);l!=null&&i.set(l,a),r.getTokenGraphemes(o.text).forEach(({text:p})=>{let u;p in n?u=n[p]:(u=[],n[p]=u),u.push(a)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function lA(t,e=[]){return new Map(_T(et,Go)(Gc([e],t.visibleRanges.map(r=>kT(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function pA(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let a=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return a-l}}var d5=["-","+","*","/","=","<",">","_","#",".","|","&",":"],m5=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],h5=["\\p{L}","\\p{M}","\\p{N}"],g5="[^\\s\\w]",y5="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function x5(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:a}=t,l=r.map(Ur).map(x=>`${x}+`).join("|"),p=e.map(Ur).join("|"),d=`(${n.concat(i.map(Ur)).join("|")})+`,m=`(${n.join("|")})+`,g=[p,o,d,l,a].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(m,"gu"),tokenMatcher:new RegExp(g,"gu")}}var BS=new Map;function _r(t){let e=k().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!BS.has(r)){let n={fixedTokens:m5,repeatableSymbols:d5,identifierWordRegexes:h5,identifierWordDelimiters:e,numbersRegex:y5,singleSymbolsRegex:g5};BS.set(r,x5(n))}return BS.get(r)}function uA(t,e,r){return xr(t,_r(e).tokenMatcher,r)}function fA(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return uA(n,r,o=>{let a=i+o.index,l=i+o.index+o[0].length,p=new W(t.document.positionAt(a),t.document.positionAt(l));return{editor:t,text:o[0],range:p,offsets:{start:a,end:l}}})}function dA(t,e,r){let i=S5(t,e).flatMap(o=>{let a=o.selections[0].active,l=lA(o,[a.line]),p=et(o.visibleRanges.map(u=>fA(o,u).map(d=>({...d,displayLine:l.get(d.range.start.line)}))));return p.sort(pA(l.get(a.line),a.character)),p});return T5(r,i).map((o,a)=>({token:o,rank:-a}))}function T5(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function S5(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function WS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:a}){let l=r==null?void 0:mA(r),p=mA(n),u=dA(o,a,l),d=cA(u,p,t),m=Object.keys(e),g=new Sa(()=>[...m]);return u.map(({token:x,rank:v})=>{let b=v5(t,x,g,e),F=aA(d,i,v,l?.get(x),p.get(x),b);if(F!=null)return g.set(F.grapheme.text,g.get(F.grapheme.text).filter(M=>M!==F.style)),b5(x,F)}).filter(x=>x!=null)}function mA(t){let e=new so(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function v5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text);for(let a of o)for(let l of r.get(a.text))i.push({grapheme:a,style:l,penalty:n[l].penalty});return i}function b5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new W(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var Hd=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];k().disposeOnExit(this);let n=new Kn(k().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeActiveTextEditor(n.run),k().onDidChangeVisibleTextEditors(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorSelection(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),os().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:os().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?WS({tokenGraphemeSplitter:os(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:k().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:k().activeTextEditor,visibleTextEditors:k().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:a}})=>({editor:a,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var Vd=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:a}=n,l=this.makeTokenLive(a);return this.map[dl(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=_r(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[dl(e,os().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var w5=6e4,Bd=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;k().disposeOnExit(this),this.activeMap=new Vd(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new Hd(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>w5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function $S(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var GS=hr(El(),1);function KS(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:a,end:l}}=e;return(0,GS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,GS.invariant)(n>=a&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=a?a+o:Math.min(a,i),end:n<=l?l+o:Math.min(l,i)}}var SA=hr(El(),1);function QS(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,SA.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let a=e.expansionBehavior.end;switch(a.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(wf(a.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let a=e.expansionBehavior.start;switch(a.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(bf(a.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var ZS=hr(El(),1);function YS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:a},text:l}=e;if((0,ZS.invariant)(a>o,()=>"Selection range expected to be nonempty"),(0,ZS.invariant)(n>=o&&n<=a,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<a)return{start:o,end:a+i};if(n===o){let p=e.expansionBehavior.start,u=a+i;switch(p.type){case"closed":return{start:o+i,end:u};case"open":return{start:o,end:u};case"regex":{let d=r+l,m=bf(p.regex),g=d.search(m);for(;g>r.length;)d=d.slice(0,g),g=d.search(m);return g===-1?{start:o,end:u}:{start:o+g,end:u}}}}else{let p=e.expansionBehavior.end,u=o;switch(p.type){case"closed":return{start:u,end:a};case"open":return{start:u,end:a+i};case"regex":{let d=l+r,m=wf(p.regex),g=d.match(m),x=g==null?0:g[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,g=d.match(m),x=g==null?0:x+g[0].length;return x===0?{start:u,end:a}:{start:u,end:o+x}}}}}function vA(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:a}=e.offsets,l=Math.min(n,o),p="";return o<n&&(p+=e.text.substring(0,n-o)),p+=t.event.text,i<a&&(p+=e.text.substring(a-i,e.text.length)),p.substring(r.start-l,r.end-l)}function bA(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let a=o.text.length-o.rangeLength,l=o.rangeOffset,p=l+o.rangeLength,u=l,d=p+a;return{displacement:a,event:o,originalOffsets:{start:l,end:p},finalOffsets:{start:u,end:d}}});for(let o of e){let a=o.offsets,l=i.map(u=>{let d;return u.originalOffsets.start>a.end?{start:0,end:0}:u.originalOffsets.end<a.start?{start:u.displacement,end:u.displacement}:(u.event.rangeLength===0?o.range.isEmpty?d=QS(u,o):d=YS(u,o):d=KS(u,o),o.text=vA(u,o,d),{start:d.start-a.start,end:d.end-a.end})}),p={start:a.start+gf(l,({start:u})=>u),end:a.end+gf(l,({end:u})=>u)};o.range=o.range.with(r.positionAt(p.start),r.positionAt(p.end)),o.offsets=p}}var $d=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return $S(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return $S(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>tr(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>tr(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=k().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>I5(r,i)?{...i,isReplace:!0}:i)};bA(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function I5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var jd=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var qd=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var zd=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var Gd=class{updateUserSnippets(){throw new Error("Snippets are not implemented.")}registerThirdPartySnippets(e,r){throw new Error("Snippets are not implemented.")}getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e,r){throw new Error("Snippets are not implemented.")}};var Kd=class{getSpokenFormEntries(){throw new Ta}onDidChange(){return{dispose:()=>{}}}};var Qd=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getLanguage(e){throw new Error("Tree sitter not provided")}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}};var Ze=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var wA={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleBacktickQuotes:["```","```"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var _A=new so(t=>t);for(let[t,e]of Object.entries(wA))e!=null&&_A.set(e,t);function EA(t,e,r){let n=_A.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}var F5={ifStatement:"if",ifElseStatement:"if else",tryCatchStatement:"try",functionDeclaration:"funk",link:"link"},C5={"ifElseStatement.alternative":"else","functionDeclaration.body":"funk","ifElseStatement.consequence":"if else","ifStatement.consequence":"if","tryCatchStatement.body":"try","link.text":"link"};function RA(t){if(t.type==="custom")throw new Ze("Custom insertion snippet");let e=F5[t.name];if(e==null)throw new Ze(`Named insertion snippet '${t.name}'`);if(t.substitutions!=null){let r=Object.values(t.substitutions);return`${e} ${r.join(" ")}`}return e}function kA(t){if(t.type==="custom")throw new Ze("Custom wrap with snippet");let e=`${t.name}.${t.variableName}`,r=C5[e];if(r==null)throw new Ze(`Named wrap with snippet '${e}'`);return r}function Rl(t,e,r){let n=r==="vertical"?`${ht.verticalRange} `:"";if(t&&e)return n+ht.rangeExclusive;if(t)throw new Ze("Range exclude anchor");return e?n+ht.rangeExcludingEnd:r==="vertical"?ht.verticalRange:ht.rangeInclusive}function PA(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var O5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],N5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function Pa(t){let e=O5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function kl(t){let e=N5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Zd=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new Ze(`Modifier '${e.type}'`);case"containingScope":return e.ancestorIndex==null||e.ancestorIndex===0?this.handleScopeType(e.scopeType):[new Array(e.ancestorIndex).fill(this.spokenFormMap.modifierExtra.ancestor),this.handleScopeType(e.scopeType)];case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,kl(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,kl(e.start+1),r];let i=Pa(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,Pl(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,Pl(r)];throw new Ze(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:kl(e.anchor.start+1),n=this.handleModifier(e.active),i=Rl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let a=e.direction==="forward"?ht.forward:ht.backward;return[n,r,a]}let i=Pa(e.length),o=Pl(r);return e.direction==="forward"?[n,i,o]:[n,i,o,ht.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?ht.next:ht.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=Pa(e.length);if(e.length===1)return[i,n,r];let a=Pl(r);return[i,n,o,a]}if(e.length===1){let o=kl(e.offset);return[i,o,n,r]}throw new Ze(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new Ze(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,AA(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};case"interior":return this.spokenFormMap.simpleModifier.interiorOnly;default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(vM(r)),n!=null&&i.push(bM(n)),i.push(AA(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let a=Rl(e.excludeAnchor,e.excludeActive);return[r,n,a,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new Ze(`Mark '${e.type}'`);default:return[pd[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new Ze("Absolute line numbers");case"modulo100":return[ud.modulo100,Pa(e.lineNumber+1)];case"relative":return[e.lineNumber<0?ud.relativeUp:ud.relativeDown,Pa(Math.abs(e.lineNumber))]}}};function Pl(t){if(typeof t=="string")return MA(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),Pl(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(MA)}}}function MA(t){return`${t}s`}function AA(t,e,r){let n=t[r];if(n==null)throw new Ze(`${e} '${r}'`);return n}var Ma=class{constructor(e){this.spokenFormMap=PA(e),this.primitiveGenerator=new Zd(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new Ze(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:DA(e())}}catch(r){if(r instanceof Ze)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new Ze(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),ht.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[EA(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],RA(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new Ze(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[kA(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new Ze(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new Ze("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[ht.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=Rl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new Ze("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[ht.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return ht.sourceDestinationConnective;case"before":return ht.before;case"after":return ht.after}}};function DA(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:IA(t.map(DA)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${pl(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new Ze(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function IA(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=IA(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Yd=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Bt;this.spokenFormMap_={...Ri};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps().catch(()=>{})),this.customSpokenFormsInitialized=this.updateSpokenFormMaps(),this.customSpokenFormsInitialized.catch(()=>{})}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof ll)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof Ta)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");st(k().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}throw this.spokenFormMap_={...Ri},this.notifier.notifyListeners(),r}for(let r of IP)L5(this.spokenFormMap_,r,bS[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function L5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let a of i){let{defaultSpokenForms:l=[],isPrivate:p=!1}=r[a]??{},u=n[a];o[a]=u==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!p,isCustom:!1,isPrivate:p}:{defaultSpokenForms:l,spokenForms:u,requiresTalonUpdate:!1,isCustom:!bi(l,u),isPrivate:p}}t[e]=o}var Xd=class{constructor(e){this.customSpokenForms=new Yd(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new Ma(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new Ma(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*U5(t){for(let e of t)for(let r of e)yield r}function*Ml(t,e){let r=em(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*XS(t){let e=em(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var Jwe=Symbol();function*H5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*Jd(t,e){for(let r of t)e(r)&&(yield r)}function*Lt(t,e){for(let r of t)yield e(r)}function*CA(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let a=-1,l=em(t),p;for(;;){if(a++,o!==null&&a>=o||(p=l.next(),p.done))return;a<i||(a-i)%n===0&&(yield p.value)}}function*V5(t,e){let r=em(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function em(t){return t[Symbol.iterator]()}function Aa(t,e){return Array.from(Lt(t,e))}function FA(t,e,r){let n=H5(t,r),i=r>=0?o=>o<e:o=>o>e;return V5(n,i)}function OA(t,e,r=1){return e!==void 0?FA(t,e,r):FA(0,t,r)}function tm(t,e){return U5(Lt(t,e))}function Wr(t,e,{domain:r},{domain:n}){return t==="forward"?B5(e,r,n):W5(e,r,n)}function B5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let a=e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&!i){let a=e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&i){let a=e.end.compareTo(r.start);return a!==0?a:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function W5(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let a=-e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&!i){let a=-e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&i){let a=-e.start.compareTo(r.end);return a!==0?a:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function NA(t,e,r,n,i,o){return $5(t,n,i,o)&&(i==null||Wr(r,n.includeDescendantScopes?t:e,i,o)<0)}function $5(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:a,skipAncestorScopes:l}=e,{domain:p}=n;switch(i){case"disallowed":if(p.contains(t))return!1;break;case"disallowedIfStrict":if(eA(p,t))return!1;break;case"required":if(!p.contains(t))return!1;break}return l&&r!=null&&p.contains(r.domain)?!1:j5(new W(t,o),p,a)}function j5(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var q5={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},Ce=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...q5,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},a,l=r;for(let p of this.generateScopeCandidates(e,r,n,o))if(NA(r,l,n,o,a,p)&&(yield p,a=p,l=n==="forward"?p.domain.end:p.domain.start),this.canStopEarly(r,n,o,a,p))return}canStopEarly(e,r,n,i,o){let{containment:a,distalPosition:l,skipAncestorScopes:p}=n;if(this.isHierarchical&&!p)return!1;let u=this.isHierarchical&&p?i:o;return u==null?!1:!!(a==="required"&&(r==="forward"?u.domain.end.isAfter(e):u.domain.start.isBefore(e))||(r==="forward"?u.domain.end.isAfterOrEqual(l):u.domain.start.isBeforeOrEqual(l)))}};var Er=class extends Ce{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:a,...l}=o,p=this.searchScopeHandler.generateScopes(r,n,i,{containment:a==="required"?"required":void 0,...l});return tm(p,u=>this.generateScopesInSearchScope(i,u))}};var rm=class extends Ce{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield LA(r,o);else for(let o=n.line;o>=0;o--)yield LA(r,o)}};function LA(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[JS(t,n,r)]}}function JS(t,e,r){return new ir({editor:t,isReversed:e,contentRange:ev(t,r)})}function ev(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new W(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function fn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),a=l=>new W(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Lt(o.matchAll(t),a):Array.from(o.matchAll(t),a).reverse()}var nm=class extends Er{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=_r(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new qt({editor:n,contentRange:o,isReversed:a})]}))}};function im(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let a=Ko(o,n),l=Ko(o,i);if(a&&!l)return!0;if(l&&!a)return!1}}var z5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,G5=/[$]/g,K5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,om=class extends Er{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(fn(z5,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new Be({editor:n,contentRange:o,isReversed:a,textualType:"character"})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=_r(this.languageId);return im(r,n,[i,G5,K5])}};var Q5=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,sm=class{constructor(e){this.wordRegex=_r(e).wordMatcher}splitIdentifier(e){let r=Jc(e,this.wordRegex);return r.length>1?r:Jc(e,Q5)}};var am=class extends Er{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new sm(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(p=>new W(i.positionAt(o+p.index),i.positionAt(o+p.index+p.text.length)));return l.map((p,u)=>({editor:r,domain:p,getTargets:d=>{let m=u>0?l[u-1]:null,g=u+1<l.length?l[u+1]:null;return[Z5(d,r,m,p,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function Z5(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new W(r.end,n.start):void 0,a=i!=null&&i.start.isAfter(n.end)?new W(n.end,i.start):void 0,p=o!=null||a!=null?e.document.getText(o??a):"";return new Ad({editor:e,isReversed:t,contentRange:n,insertionDelimiter:p,leadingDelimiterRange:o,trailingDelimiterRange:a})}var Y5=/[$]/g,cm=class extends Er{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=_r(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new qt({editor:n,contentRange:o,isReversed:a})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=_r(this.languageId);return im(r,n,[i,Y5])}};var lm=class extends Ce{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:a=>[new kd({editor:r,isReversed:a,contentRange:o})]}}};function pm(t,e,r,n,i){if(!t&&n!=null&&i!=null&&NS(e,n)>NS(e,i))return r.union(n)}function Da(t){return t.containment==null&&t.skipAncestorScopes}function UA(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:a,end:l}=X5(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(a),end:t.positionAt(l)}}function X5(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let a=n==="disallowed"?1:-o;return r==="forward"?{start:t+a,end:e+o}:{start:e-o,end:t-a}}function HA(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Ia=class extends Ce{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:a}=r,l=Da(o),{start:p,end:u}=UA(a,n,i,o),d=this.query.matches(a,p,u).map(m=>this.matchToScope(r,m,l)).filter(m=>m!=null).sort((m,g)=>Wr(i,n,m,g));yield*HA(d,(m,g)=>m.domain.isRangeEqual(g.domain),m=>m.length===1?m[0]:{...m[0],getTargets(g){let x=Kc(m.flatMap(v=>v.getTargets(g)),(v,b)=>v.isEqual(b));if(x.length>1&&!m.every(v=>v.allowMultiple)){let v="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(st(k().messages,"BaseTreeSitterScopeHandler.allow-multiple",v),k().runMode==="test")throw Error(v)}return x}})}};function tv(t,e,r,n){return n?Fa(t,`${e}.${r}`,`_.${r}`):Fa(t,`${e}.${r}`)??(Fa(t,e)!=null?Fa(t,`_.${r}`):void 0)}function ho(t,e,r,n){return tv(t,e,r,n)?.range}function Fa(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var um=class extends Ia{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n,i){let o=this.iterateeScopeType.type,a=tv(n,o,"iteration",!1);if(a==null)return;let{range:l,allowMultiple:p}=a,u=ho(n,o,"iteration.domain",!1)??l;return{editor:r,domain:u,allowMultiple:p,getTargets:d=>[new Be({editor:r,isReversed:d,contentRange:l})]}}};var fm=class extends Ia{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new um(this.query,this.scopeType)}}matchToScope(r,n,i){let o=this.scopeType.type,a=Fa(n,o);if(a==null)return;let{range:l,allowMultiple:p,insertionDelimiter:u}=a,d=ho(n,o,"domain",!0)??l,m=ho(n,o,"prefix",!0)?.with(void 0,l.start),g=ho(n,o,"leading",!0)?.with(void 0,m?.start??l.start),x=ho(n,o,"trailing",!0)?.with(l.end),v=ho(n,o,"removal",!0);return v==null&&(o==="collectionItem"||o==="argumentOrParameter")&&(v=pm(i,r,l,g,x)),{editor:r,domain:d,allowMultiple:p,getTargets:b=>[new fo({scopeTypeType:o,editor:r,isReversed:b,contentRange:l,prefixRange:m,removalRange:v,leadingDelimiterRange:g,trailingDelimiterRange:x,insertionDelimiter:u})]}}};function VA(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function BA(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,a=!1;for(;!a&&!e(o);)({value:o,done:a}=n.next());return a?[]:[{iterator:n,value:o,index:i}]})}var Zn=class t extends Ce{constructor(r,n){super();this.scopeHandlers=r;this.getIterationScopeHandler=n;this.isHierarchical=!0;this.scopeType=void 0}static create(r,n,i){let o=n.scopeTypes.map(a=>r.create(a,i));return this.createFromScopeHandlers(r,i,o)}static createFromScopeHandlers(r,n,i){let o=()=>new t(i.map(a=>r.create(a.iterationScopeType,n)),()=>{throw new Error("Not implemented")});return new t(i,o)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let p=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[p].generateScopes(r,n,i,o);return}let a=this.scopeHandlers.map(p=>p.generateScopes(r,n,i,o)[Symbol.iterator]()),l=VA(a);for(;l.length>0;){l.sort((d,m)=>Wr(i,n,d.value,m.value));let p=l[0],u=p.value;this.lastYieldedIndex=p.index,yield u,l=BA(l,d=>Wr(i,n,u,d)<0)}}};var dm=class extends Ce{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,a=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,p=J5(o,n,i),u=r.document.lineAt(n);for(let d=n.line+a;d!==l;d+=a){let m=r.document.lineAt(d);m.isEmptyOrWhitespace?p!=null&&(yield WA(r,p.range.union(u.range)),p=void 0):p==null&&(p=m),u=m}p!=null&&(yield WA(r,p.range.union(u.range)))}};function J5(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let a=e.line+n;a!==i;a+=n){let l=t.lineAt(a);if(l.isEmptyOrWhitespace)break;o=l}return o}}function WA(t,e){return{editor:t,domain:e,getTargets:r=>[new lo({editor:t,isReversed:r,contentRange:ev(t,e)})]}}function Al(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function $A(t,e){return t.slice(t.length-e.length)===e}var rv,t8=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function jA(t){t?rv=t:rv=t8}function nv(t){return/^[A-Z][a-z].*/.test(t)||mm(t)}function qA(t){return nv(t)||/``|"|'/.test(t.substring(0,2))}function zA(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~rv.indexOf(e)}function GA(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function iv(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function KA(t){return t.length<=3?!0:nv(t)}function ov(t,e){return e.length>0?t<5&&e[0].length<6&&nv(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function mm(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function QA(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function ZA(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function YA(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function XA(t){return t==="."||t==="!"||t==="?"}var eD=" @~@ ",JA=eD.trim(),n8=new RegExp("\\S",""),i8=new RegExp("\\n+|[-#=_+*]{4,}","g"),o8=new RegExp("\\S+|\\n","g"),s8={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function tD(t,e){if(!t)return[];if(!n8.test(t))return[];let r={...s8,...e};jA(r.abbreviations),r.newlineBoundaries&&(t=t.replace(i8,eD));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(m,g){return g%2})):n=t.trim().match(o8)??[];let o=0,a=0,l=[],p=[],u=[];if(!n||!n.length)return[];for(let m=0,g=n.length;m<g;m++){if(o++,u.push(n[m]),~n[m].indexOf(",")&&(o=0),XA(n[m])||Al(n[m],"?!")||n[m]===JA){r.newlineBoundaries&&n[m]===JA&&u.pop(),p.push(u),o=0,u=[];continue}if((Al(n[m],'"')||Al(n[m],"\u201D"))&&(n[m]=n[m].slice(0,-1)),Al(n[m],".")){if(m+1<g){if(n[m].length===2&&isNaN(n[m].charAt(0))||zA(n[m]))continue;if(qA(n[m+1])){if(GA(n[m],n[m+1])||ov(o,n.slice(m,6))||mm(n[m+1])&&KA(n[m]))continue}else if($A(n[m],"..")||iv(n[m])||ov(o,n.slice(m,5)))continue}p.push(u),u=[],o=0;continue}(a=n[m].indexOf("."))>-1&&(mm(n[m],a)||iv(n[m])||ZA(n[m])||QA(n[m]))||(l=YA(n[m]))&&(u.pop(),u.push(l[0]),p.push(u),u=[],o=0,u.push(l[1]))}return u.length&&p.push(u),p=p.filter(function(m){return m.length>0}),p.slice(1).reduce(function(m,g){let x=m[m.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(m.pop(),m.push(x.concat(g)),m):(m.push(g),m)},[p[0]]).map(function(m,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=m.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return m.join(" ")})}var a8=/\S*\p{L}/u,rD=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,c8={newlineBoundaries:!1,preserveWhitespace:!0},hm=class{*segment(e){let r=tD(e,c8),n=0;for(let i of r){let o=i.split(rD).filter(a=>a!=null);for(let a of o){if(!p8(a)){let l=l8(a,n);l!=null&&(yield l)}n+=a.length}}}};function l8(t,e){let r=Fk(a8,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function p8(t){return Ko(rD,t)}var gm=class extends Er{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new hm}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),a=n.document.getText(i),l=u=>{let d=new W(n.document.positionAt(o+u.index),n.document.positionAt(o+u.index+u.text.length));return{editor:n,domain:d,getTargets:m=>[new qt({editor:n,contentRange:d,isReversed:m})]}},p=this.segmenter.segment(a);return r==="forward"?Lt(p,l):Array.from(p,l).reverse()}};var Ca=class extends Er{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new qt({editor:n,contentRange:o,isReversed:a})]}))}},ym=class extends Ca{constructor(){super(...arguments);this.regex=/\S+/g}},xm=class extends Ca{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},Tm=class extends Ca{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},Sm=class extends Ca{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Ur(this.scopeType.character),"gui")}};var vm=class extends Ce{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let a=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:Da(o)?"required":o.containment}));for(let p of a){let u=[];for(let d of l){let m=p.domain.intersection(d.domain);m!=null&&!m.isEmpty&&u.push({editor:r,domain:m,getTargets:g=>[this.getTargets(nD(p,g),nD(d,g))]})}u.push(p),u.sort((d,m)=>Wr(i,n,d,m)),yield*u}}};function nD(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var bm=class extends vm{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new qt({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},wm=class extends vm{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof lo))throw Error("Expected ParagraphTarget");return new Cd({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var Yn=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var Oa=class{constructor(e){this.children=u8(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function u8(t){let e=[],r=[];for(let n of t){let i=new sv(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new Yn(e)}var sv=class{constructor(e){this.item=e;this.children=new Yn([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var f8=",",av=new RegExp(f8,"g");function iD(t){let e=t.getText();return xr(e,av,r=>new W(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var oD={type:"fallback",scopeTypes:[{type:"surroundingPairInterior",delimiter:"collectionBoundary"},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return Ko(av,e)}}]};function cv(t,e,r,n,i,o){let a=i!=null?new W(i.end,n.start):void 0,l=o!=null?new W(n.end,o.start):void 0,p=pm(t,e,n,a,l),u=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(d){return[new fo({scopeTypeType:"collectionItem",editor:e,isReversed:d,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:a,trailingDelimiterRange:l,removalRange:p})]}}}function lv(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new pe(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var _m=class extends Ce{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return oD}*generateScopeCandidates(r,n,i,o){let a=Da(o),l=iD(r.document),p=lv(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),u=new Oa(p),d=lv(this.scopeHandlerFactory,this.languageId,r,"string"),m=new Yn(d),g=[],x=new Set,v=[];for(let b of l){if(m.contains(b))continue;let F;for(;v.length>0;){let K=v[v.length-1];if(K.iterationRange.contains(b)){F=K;break}this.addScopes(g,K),v.pop()}let M=u.getSmallestContaining(b)?.range,U=M??r.document.lineAt(b.start.line).range;if(F!=null&&F.iterationRange.isRangeEqual(U)){F.delimiters.push(b);continue}M!=null&&x.add(M),v.push({editor:r,isEveryScope:a,iterationRange:U,delimiters:[b]})}for(let b of v)this.addScopes(g,b);for(let b of p)if(!x.has(b.range)&&!b.range.isEmpty){let F=is(r,b.range);F.isEmpty||g.push(cv(a,r,b.range,F))}g.sort((b,F)=>Wr(i,n,b,F)),yield*g}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:a,delimiters:l}=n;if(l.length===0)return;let p=[];for(let m=0;m<l.length;++m){let g=l[m],x=l[m-1]?.end??o.start;p.push(new W(x,g.start))}let u=l[l.length-1];p.push(new W(u.end,o.end));let d=p.map(m=>is(i,m));for(let m=0;m<d.length;++m)m===d.length-1&&i.document.getText(d[m]).trim()===""||r.push(cv(a,i,o,d[m],d[m-1],d[m+1]))}};var Em=class extends Ce{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new _m(r,i),a=n.get(i)?.getScopeHandler(this.scopeType);return a==null?o:Zn.createFromScopeHandlers(r,i,[a,o])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Rm=class extends Ce{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new ut("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let a=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return Jd(a.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var Na=class t extends Ce{constructor(r){super();this.scopeHandlers=r;this.scopeType=void 0;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(a=>r.create(a,i));return this.createFromScopeHandlers(o)}static createFromScopeHandlers(r){return new t(r)}get iterationScopeType(){throw new ut("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){for(let a of this.scopeHandlers)yield*a.generateScopes(r,n,i,o)}};var km=class extends Ce{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let a=d8(r,n,i,o);for(let l of a)yield h8(l)}};function d8(t,e,r,n){let i=m8(t);if(i==null)return[];let{notebook:o,cell:a}=i;return n.containment==="required"?[a]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(a.index+1):o.cells.slice(0,a.index).reverse():n.distalPosition!=null&&new W(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(a.index):o.cells.slice(0,a.index+1).reverse()}function m8(t){let e=t.document.uri.toString();for(let r of k().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function h8(t){let e=g8(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new Md({editor:e,isReversed:n,contentRange:r})]}}function g8(t){let e=t.document.uri.toString();for(let r of k().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var Pm=class extends Ce{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let a=new km,l=n.get(o)?.getScopeHandler(this.scopeType);return l==null?a:Zn.createFromScopeHandlers(r,o,[l,a])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Mm=class extends Ce{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let a=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of a)yield{editor:r,domain:l.domain,getTargets(p){return l.getTargets(p).flatMap(u=>u.getInterior())}}}};function sD(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new W(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:a=>[new Dd({editor:t,isReversed:a,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function aD(t){let e=Go(t.map(({text:r})=>r)).map(Ur).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function lD(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new Yn(pv(n.disqualifyDelimiter)),o=new Yn(pv(n.pairDelimiter)),a=new Oa(pv(n.textFragment)),l=Object.fromEntries(r.map(d=>[d.text,d])),p=DT(e.getText(),aD(r)),u=[];for(let d of p){let m=d[0],g=new W(e.positionAt(d.index),e.positionAt(d.index+m.length));cD(i.getContaining(g))==null&&u.push({delimiterInfo:l[m],textFragmentRange:a.getSmallestContaining(g)?.range,range:cD(o.getContaining(g))?.range??g})}return u}function cD(t){return t!=null&&!t.hasError()?t:void 0}function pv(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var Am=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],curlyBrackets:[["{","${"],"}"],tripleBacktickQuotes:[[],[]],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],backtickQuotes:["`","`"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),pD={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},markdown:{tripleBacktickQuotes:["```","```"]},ruby:{tripleDoubleQuotes:["%Q(",")"]}},aRe=Object.fromEntries(Object.values(Am)),uD={any:_i(Am),string:["tripleDoubleQuotes","tripleSingleQuotes","tripleBacktickQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function fD(t){return t!=null&&t in pD?{...Am,...pD[t]}:Am}function dD(t,e){let r=uD[t]??[t];return y8(e,r)}function y8(t,e){let r=fD(t);return e.flatMap(n=>{let[i,o,a]=r[n],{isSingleLine:l=!1}=a??{},p=ul(i)?[i]:i,u=ul(o)?[o]:o;return Go(Gc(p,u)).map(m=>{let g=p.includes(m),x=u.includes(m);return{text:m,side:g&&!x?"left":!g&&x?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function mD(t){let e=[],r=[];for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:a},textFragmentRange:l,range:p}=n;if(o==="left")r.push(n);else{let u=zo(r,m=>m.delimiterInfo.delimiterName===i&&x8(m.textFragmentRange,l)&&T8(a,m.range,p));if(u===-1){o==="unknown"&&r.push(n);continue}let d=r[u];r.length=u,e.push({delimiterName:i,openingDelimiterRange:d.range,closingDelimiterRange:p})}}return e}function x8(t,e){return t==null||e==null?t===e:t.isRangeEqual(e)}function T8(t,e,r){return!t||e.start.line===r.start.line}var Dm=class extends Ce{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){st(k().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let a=lD(this.languageDefinitions.get(this.languageId),r.document,dD(this.scopeType.delimiter,this.languageId)),l=mD(a);l=S8(i,o,n,l),yield*l.map(p=>sD(r,p,this.scopeType.requireStrongContainment??!1)).sort((p,u)=>Wr(i,n,p,u))}};function S8(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var Im=class extends Ce{constructor(r,n,i,o){super();this.scopeHandlerFactory=r;this.languageDefinitions=n;this.scopeType=i;this.languageId=o;this.isHierarchical=!0}get iterationScopeType(){throw new ut("Iteration scope for InteriorScopeHandler")}*generateScopeCandidates(r,n,i,o){let a=new W(n,o.distalPosition),l=this.getScopeHandler();if(l==null)return;let p=l.generateScopes(r,n,i,o);for(let u of p)this.shouldYield(a,u)&&(yield v8(u))}getScopeHandler(){let r=this.languageDefinitions.get(this.languageId)?.getScopeHandler(this.scopeType),n=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:"any"},this.languageId);return this.scopeType.explicitScopeType?r==null?n:Na.createFromScopeHandlers([r,n]):r==null?n:Zn.createFromScopeHandlers(this.scopeHandlerFactory,this.languageId,[r,n])}shouldYield(r,n){return!this.scopeType.explicitScopeType||r.contains(n.domain)}};function v8(t){return{editor:t.editor,domain:t.domain,getTargets(e){return t.getTargets(e).flatMap(b8)}}}function b8(t){let e=t.getInterior();return e??[new Ra({editor:t.editor,isReversed:t.isReversed,fullInteriorRange:t.contentRange})]}var La=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new om(this,e,r);case"word":return new am(this,e,r);case"token":return new cm(this,e,r);case"identifier":return new nm(this,e,r);case"line":return new rm(e,r);case"sentence":return new gm(this,e,r);case"paragraph":return new dm(e,r);case"boundedParagraph":return new wm(this,e,r);case"document":return new lm(e,r);case"nonWhitespaceSequence":return new ym(this,e,r);case"boundedNonWhitespaceSequence":return new bm(this,e,r);case"url":return new xm(this,e,r);case"customRegex":return new Tm(this,e,r);case"glyph":return new Sm(this,e,r);case"collectionItem":return new Em(this,this.languageDefinitions,r);case"surroundingPair":return new Dm(this.languageDefinitions,e,r);case"surroundingPairInterior":return new Mm(this,e,r);case"notebookCell":return new Pm(this,this.languageDefinitions,e,r);case"interior":return new Im(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return Zn.create(this,e,r);case"fallback":return Na.create(this,e,r);case"conditional":return new Rm(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function dn(t,e){return new W(t.row,t.column,e.row,e.column)}function uv(t){return new pe(t.row,t.column)}function hD(t){return new W(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function gD(t,e){return new be(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function Xn(t,e){return{selection:new be(new pe(e.startPosition.row,e.startPosition.column),new pe(e.endPosition.row,e.endPosition.column)),context:{}}}function w8(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new be(new pe(i.startPosition.row,i.startPosition.column),new pe(o.endPosition.row,o.endPosition.column)),context:{}}}function yD(){return fv(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function xD(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new be(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function TD(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=dn(i.endPosition,r.startPosition):o=dn(n.startPosition,r.startPosition):o=dn(n.endPosition,r.startPosition)),{...Xn(e,r),context:{leadingDelimiterRange:o}}}}function Jn(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,a=new Set(t),l=new Set(e);return o=o.filter(p=>a.size>0?!a.has(p.type):l.size>0?l.has(p.type):!0),w8(n,o[0],o[o.length-1])}}function SD(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=dn(r.endPosition,i.startPosition):o=dn(r.endPosition,n.endPosition):o=dn(r.endPosition,n.startPosition)),{...Xn(e,r),context:{trailingDelimiterRange:o}}}}function _8(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function E8(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function fv(t,e,r=gr,n=gr){return(i,o)=>{let a,l,p=r(o),u=n(o),d=E8(p,t),m=_8(u,t);d!=null&&(a=dn(d.endPosition,p.startPosition)),m!=null&&(l=dn(u.endPosition,m.startPosition));let g=R8(i,a,l,e);return{selection:new be(new pe(p.startPosition.row,p.startPosition.column),new pe(u.endPosition.row,u.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:a,trailingDelimiterRange:l}}}}function R8(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return ET(o,"length")}function vD(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:p})=>p.endsWith(".start")).map(({range:{end:p}})=>p).sort((p,u)=>p.compareTo(u)).at(-1),i=t.filter(({name:p})=>p.endsWith(".end")).map(({range:{start:p}})=>p).sort((p,u)=>p.compareTo(u)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(st(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:p})=>p.endsWith(".start")).length,a=t.filter(({name:p})=>p.endsWith(".end")).length,l=t.length-o-a;return l>0&&(o>0||a>0)&&(st(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),l>1&&(st(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),!r}function bD(t){let e=t;for(;e!=null;){if(e.hasError)return!0;e=e.parent}return!1}function dv(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var Oe;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(let l of o)a[l]=i[l];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Oe||(Oe={}));var hv;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(hv||(hv={}));var J=Oe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),go=t=>{switch(typeof t){case"undefined":return J.undefined;case"string":return J.string;case"number":return isNaN(t)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(t)?J.array:t===null?J.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?J.promise:typeof Map<"u"&&t instanceof Map?J.map:typeof Set<"u"&&t instanceof Set?J.set:typeof Date<"u"&&t instanceof Date?J.date:J.object;default:return J.unknown}},G=Oe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),k8=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),$r=class t extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let l=n,p=0;for(;p<a.path.length;){let u=a.path[p];p===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(a))):l[u]=l[u]||{_errors:[]},l=l[u],p++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Oe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};$r.create=t=>new $r(t);var Va=(t,e)=>{let r;switch(t.code){case G.invalid_type:t.received===J.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Oe.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${Oe.joinValues(t.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Oe.joinValues(t.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${Oe.joinValues(t.options)}, received '${t.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Oe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case G.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case G.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=e.defaultError,Oe.assertNever(t)}return{message:r}},ED=Va;function P8(t){ED=t}function Fm(){return ED}var Cm=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",p=n.filter(u=>!!u).slice().reverse();for(let u of p)l=u(a,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},M8=[];function X(t,e){let r=Fm(),n=Cm({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Va?void 0:Va].filter(i=>!!i)});t.common.issues.push(n)}var zt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return ge;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return ge;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},ge=Object.freeze({status:"aborted"}),Ha=t=>({status:"dirty",value:t}),or=t=>({status:"valid",value:t}),gv=t=>t.status==="aborted",yv=t=>t.status==="dirty",Fl=t=>t.status==="valid",Cl=t=>typeof Promise<"u"&&t instanceof Promise;function Om(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function RD(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var ce;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(ce||(ce={}));var Dl,Il,hn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},wD=(t,e)=>{if(Fl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new $r(t.common.issues);return this._error=r,this._error}}};function Te(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,l)=>{var p,u;let{message:d}=t;return a.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(p=d??n)!==null&&p!==void 0?p:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:l.defaultError}},description:i}}var Se=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return go(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:go(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new zt,ctx:{common:e.parent.common,data:e.data,parsedType:go(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Cl(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:go(e)},o=this._parseSync({data:e,path:i.path,parent:i});return wD(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:go(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(Cl(i)?i:Promise.resolve(i));return wD(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let a=e(i),l=()=>o.addIssue({code:G.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(p=>p?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new jr({schema:this,typeName:me.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return mn.create(this,this._def)}nullable(){return ti.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Fi.create(this,this._def)}promise(){return To.create(this,this._def)}or(e){return ds.create([this,e],this._def)}and(e){return ms.create(this,e,this._def)}transform(e){return new jr({...Te(this._def),schema:this,typeName:me.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Ts({...Te(this._def),innerType:this,defaultValue:r,typeName:me.ZodDefault})}brand(){return new Ol({typeName:me.ZodBranded,type:this,...Te(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Ss({...Te(this._def),innerType:this,catchValue:r,typeName:me.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Nl.create(this,e)}readonly(){return vs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},A8=/^c[^\s-]{8,}$/i,D8=/^[0-9a-z]+$/,I8=/^[0-9A-HJKMNP-TV-Z]{26}$/,F8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,C8=/^[a-z0-9_-]{21}$/i,O8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,N8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,L8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",mv,U8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,H8=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,V8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,kD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",B8=new RegExp(`^${kD}$`);function PD(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function W8(t){return new RegExp(`^${PD(t)}$`)}function MD(t){let e=`${kD}T${PD(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function $8(t,e){return!!((e==="v4"||!e)&&U8.test(t)||(e==="v6"||!e)&&H8.test(t))}var yo=class t extends Se{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.string,received:o.parsedType}),ge}let n=new zt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?X(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&X(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")N8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"email",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")mv||(mv=new RegExp(L8,"u")),mv.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"emoji",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")F8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"uuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")C8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"nanoid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")A8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")D8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid2",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")I8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ulid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),X(i,{validation:"url",code:G.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"regex",code:G.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?MD(o).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?B8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?W8(o).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?O8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"duration",code:G.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?$8(e.data,o.version)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ip",code:G.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?V8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"base64",code:G.invalid_string,message:o.message}),n.dirty()):Oe.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:G.invalid_string,...ce.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...ce.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...ce.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ce.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...ce.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ce.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ce.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ce.errToObj(r)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};yo.create=t=>{var e;return new yo({checks:[],typeName:me.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};function j8(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}var as=class t extends Se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.number,received:o.parsedType}),ge}let n,i=new zt;for(let o of this._def.checks)o.kind==="int"?Oe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:G.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?j8(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_finite,message:o.message}),i.dirty()):Oe.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Oe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};as.create=t=>new as({checks:[],typeName:me.ZodNumber,coerce:t?.coerce||!1,...Te(t)});var cs=class t extends Se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==J.bigint){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.bigint,received:o.parsedType}),ge}let n,i=new zt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Oe.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};cs.create=t=>{var e;return new cs({checks:[],typeName:me.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};var ls=class extends Se{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.boolean,received:n.parsedType}),ge}return or(e.data)}};ls.create=t=>new ls({typeName:me.ZodBoolean,coerce:t?.coerce||!1,...Te(t)});var ps=class t extends Se{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.date,received:o.parsedType}),ge}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_date}),ge}let n=new zt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Oe.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};ps.create=t=>new ps({checks:[],coerce:t?.coerce||!1,typeName:me.ZodDate,...Te(t)});var Ba=class extends Se{_parse(e){if(this._getType(e)!==J.symbol){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.symbol,received:n.parsedType}),ge}return or(e.data)}};Ba.create=t=>new Ba({typeName:me.ZodSymbol,...Te(t)});var us=class extends Se{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.undefined,received:n.parsedType}),ge}return or(e.data)}};us.create=t=>new us({typeName:me.ZodUndefined,...Te(t)});var fs=class extends Se{_parse(e){if(this._getType(e)!==J.null){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.null,received:n.parsedType}),ge}return or(e.data)}};fs.create=t=>new fs({typeName:me.ZodNull,...Te(t)});var xo=class extends Se{constructor(){super(...arguments),this._any=!0}_parse(e){return or(e.data)}};xo.create=t=>new xo({typeName:me.ZodAny,...Te(t)});var Ii=class extends Se{constructor(){super(...arguments),this._unknown=!0}_parse(e){return or(e.data)}};Ii.create=t=>new Ii({typeName:me.ZodUnknown,...Te(t)});var Fn=class extends Se{_parse(e){let r=this._getOrReturnCtx(e);return X(r,{code:G.invalid_type,expected:J.never,received:r.parsedType}),ge}};Fn.create=t=>new Fn({typeName:me.ZodNever,...Te(t)});var Wa=class extends Se{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.void,received:n.parsedType}),ge}return or(e.data)}};Wa.create=t=>new Wa({typeName:me.ZodVoid,...Te(t)});var Fi=class t extends Se{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==J.array)return X(r,{code:G.invalid_type,expected:J.array,received:r.parsedType}),ge;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(a||l)&&(X(r,{code:a?G.too_big:G.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(X(r,{code:G.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(X(r,{code:G.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,l)=>i.type._parseAsync(new hn(r,a,r.path,l)))).then(a=>zt.mergeArray(n,a));let o=[...r.data].map((a,l)=>i.type._parseSync(new hn(r,a,r.path,l)));return zt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:ce.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:ce.toString(r)}})}nonempty(e){return this.min(1,e)}};Fi.create=(t,e)=>new Fi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:me.ZodArray,...Te(e)});function Ua(t){if(t instanceof Rr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=mn.create(Ua(n))}return new Rr({...t._def,shape:()=>e})}else return t instanceof Fi?new Fi({...t._def,type:Ua(t.element)}):t instanceof mn?mn.create(Ua(t.unwrap())):t instanceof ti?ti.create(Ua(t.unwrap())):t instanceof ei?ei.create(t.items.map(e=>Ua(e))):t}var Rr=class t extends Se{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Oe.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==J.object){let u=this._getOrReturnCtx(e);return X(u,{code:G.invalid_type,expected:J.object,received:u.parsedType}),ge}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof Fn&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||l.push(u);let p=[];for(let u of a){let d=o[u],m=i.data[u];p.push({key:{status:"valid",value:u},value:d._parse(new hn(i,m,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Fn){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of l)p.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(X(i,{code:G.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of l){let m=i.data[d];p.push({key:{status:"valid",value:d},value:u._parse(new hn(i,m,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of p){let m=await d.key,g=await d.value;u.push({key:m,value:g,alwaysSet:d.alwaysSet})}return u}).then(u=>zt.mergeObjectSync(n,u)):zt.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,a,l;let p=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=ce.errToObj(e).message)!==null&&l!==void 0?l:p}:{message:p}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:me.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Oe.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return Ua(this)}partial(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof mn;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return AD(Oe.objectKeys(this.shape))}};Rr.create=(t,e)=>new Rr({shape:()=>t,unknownKeys:"strip",catchall:Fn.create(),typeName:me.ZodObject,...Te(e)});Rr.strictCreate=(t,e)=>new Rr({shape:()=>t,unknownKeys:"strict",catchall:Fn.create(),typeName:me.ZodObject,...Te(e)});Rr.lazycreate=(t,e)=>new Rr({shape:t,unknownKeys:"strip",catchall:Fn.create(),typeName:me.ZodObject,...Te(e)});var ds=class extends Se{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let a=o.map(l=>new $r(l.ctx.common.issues));return X(r,{code:G.invalid_union,unionErrors:a}),ge}if(r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let p of n){let u={...r,common:{...r.common,issues:[]},parent:null},d=p._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=a.map(p=>new $r(p));return X(r,{code:G.invalid_union,unionErrors:l}),ge}}get options(){return this._def.options}};ds.create=(t,e)=>new ds({options:t,typeName:me.ZodUnion,...Te(e)});var Di=t=>t instanceof hs?Di(t.schema):t instanceof jr?Di(t.innerType()):t instanceof gs?[t.value]:t instanceof ys?t.options:t instanceof xs?Oe.objectValues(t.enum):t instanceof Ts?Di(t._def.innerType):t instanceof us?[void 0]:t instanceof fs?[null]:t instanceof mn?[void 0,...Di(t.unwrap())]:t instanceof ti?[null,...Di(t.unwrap())]:t instanceof Ol||t instanceof vs?Di(t.unwrap()):t instanceof Ss?Di(t._def.innerType):[],Nm=class t extends Se{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.object)return X(r,{code:G.invalid_type,expected:J.object,received:r.parsedType}),ge;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(X(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ge)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=Di(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of a){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:me.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Te(n)})}};function xv(t,e){let r=go(t),n=go(e);if(t===e)return{valid:!0,data:t};if(r===J.object&&n===J.object){let i=Oe.objectKeys(e),o=Oe.objectKeys(t).filter(l=>i.indexOf(l)!==-1),a={...t,...e};for(let l of o){let p=xv(t[l],e[l]);if(!p.valid)return{valid:!1};a[l]=p.data}return{valid:!0,data:a}}else if(r===J.array&&n===J.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],l=e[o],p=xv(a,l);if(!p.valid)return{valid:!1};i.push(p.data)}return{valid:!0,data:i}}else return r===J.date&&n===J.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var ms=class extends Se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,a)=>{if(gv(o)||gv(a))return ge;let l=xv(o.value,a.value);return l.valid?((yv(o)||yv(a))&&r.dirty(),{status:r.value,value:l.data}):(X(n,{code:G.invalid_intersection_types}),ge)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};ms.create=(t,e,r)=>new ms({left:t,right:e,typeName:me.ZodIntersection,...Te(r)});var ei=class t extends Se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.array)return X(n,{code:G.invalid_type,expected:J.array,received:n.parsedType}),ge;if(n.data.length<this._def.items.length)return X(n,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ge;!this._def.rest&&n.data.length>this._def.items.length&&(X(n,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,l)=>{let p=this._def.items[l]||this._def.rest;return p?p._parse(new hn(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>zt.mergeArray(r,a)):zt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};ei.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ei({items:t,typeName:me.ZodTuple,rest:null,...Te(e)})};var Lm=class t extends Se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.object)return X(n,{code:G.invalid_type,expected:J.object,received:n.parsedType}),ge;let i=[],o=this._def.keyType,a=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new hn(n,l,n.path,l)),value:a._parse(new hn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?zt.mergeObjectAsync(r,i):zt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Se?new t({keyType:e,valueType:r,typeName:me.ZodRecord,...Te(n)}):new t({keyType:yo.create(),valueType:e,typeName:me.ZodRecord,...Te(r)})}},$a=class extends Se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.map)return X(n,{code:G.invalid_type,expected:J.map,received:n.parsedType}),ge;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([l,p],u)=>({key:i._parse(new hn(n,l,n.path,[u,"key"])),value:o._parse(new hn(n,p,n.path,[u,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let p of a){let u=await p.key,d=await p.value;if(u.status==="aborted"||d.status==="aborted")return ge;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let p of a){let u=p.key,d=p.value;if(u.status==="aborted"||d.status==="aborted")return ge;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}};$a.create=(t,e,r)=>new $a({valueType:e,keyType:t,typeName:me.ZodMap,...Te(r)});var ja=class t extends Se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.set)return X(n,{code:G.invalid_type,expected:J.set,received:n.parsedType}),ge;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(X(n,{code:G.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(X(n,{code:G.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(p){let u=new Set;for(let d of p){if(d.status==="aborted")return ge;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}let l=[...n.data.values()].map((p,u)=>o._parse(new hn(n,p,n.path,u)));return n.common.async?Promise.all(l).then(p=>a(p)):a(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:ce.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};ja.create=(t,e)=>new ja({valueType:t,minSize:null,maxSize:null,typeName:me.ZodSet,...Te(e)});var Um=class t extends Se{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.function)return X(r,{code:G.invalid_type,expected:J.function,received:r.parsedType}),ge;function n(l,p){return Cm({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Fm(),Va].filter(u=>!!u),issueData:{code:G.invalid_arguments,argumentsError:p}})}function i(l,p){return Cm({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Fm(),Va].filter(u=>!!u),issueData:{code:G.invalid_return_type,returnTypeError:p}})}let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof To){let l=this;return or(async function(...p){let u=new $r([]),d=await l._def.args.parseAsync(p,o).catch(x=>{throw u.addIssue(n(p,x)),u}),m=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(m,o).catch(x=>{throw u.addIssue(i(m,x)),u})})}else{let l=this;return or(function(...p){let u=l._def.args.safeParse(p,o);if(!u.success)throw new $r([n(p,u.error)]);let d=Reflect.apply(a,this,u.data),m=l._def.returns.safeParse(d,o);if(!m.success)throw new $r([i(d,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:ei.create(e).rest(Ii.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||ei.create([]).rest(Ii.create()),returns:r||Ii.create(),typeName:me.ZodFunction,...Te(n)})}},hs=class extends Se{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};hs.create=(t,e)=>new hs({getter:t,typeName:me.ZodLazy,...Te(e)});var gs=class extends Se{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return X(r,{received:r.data,code:G.invalid_literal,expected:this._def.value}),ge}return{status:"valid",value:e.data}}get value(){return this._def.value}};gs.create=(t,e)=>new gs({value:t,typeName:me.ZodLiteral,...Te(e)});function AD(t,e){return new ys({values:t,typeName:me.ZodEnum,...Te(e)})}var ys=class t extends Se{constructor(){super(...arguments),Dl.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{expected:Oe.joinValues(n),received:r.parsedType,code:G.invalid_type}),ge}if(Om(this,Dl,"f")||RD(this,Dl,new Set(this._def.values),"f"),!Om(this,Dl,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{received:r.data,code:G.invalid_enum_value,options:n}),ge}return or(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Dl=new WeakMap;ys.create=AD;var xs=class extends Se{constructor(){super(...arguments),Il.set(this,void 0)}_parse(e){let r=Oe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==J.string&&n.parsedType!==J.number){let i=Oe.objectValues(r);return X(n,{expected:Oe.joinValues(i),received:n.parsedType,code:G.invalid_type}),ge}if(Om(this,Il,"f")||RD(this,Il,new Set(Oe.getValidEnumValues(this._def.values)),"f"),!Om(this,Il,"f").has(e.data)){let i=Oe.objectValues(r);return X(n,{received:n.data,code:G.invalid_enum_value,options:i}),ge}return or(e.data)}get enum(){return this._def.values}};Il=new WeakMap;xs.create=(t,e)=>new xs({values:t,typeName:me.ZodNativeEnum,...Te(e)});var To=class extends Se{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.promise&&r.common.async===!1)return X(r,{code:G.invalid_type,expected:J.promise,received:r.parsedType}),ge;let n=r.parsedType===J.promise?r.data:Promise.resolve(r.data);return or(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};To.create=(t,e)=>new To({type:t,typeName:me.ZodPromise,...Te(e)});var jr=class extends Se{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===me.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:a=>{X(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async l=>{if(r.value==="aborted")return ge;let p=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return p.status==="aborted"?ge:p.status==="dirty"||r.value==="dirty"?Ha(p.value):p});{if(r.value==="aborted")return ge;let l=this._def.schema._parseSync({data:a,path:n.path,parent:n});return l.status==="aborted"?ge:l.status==="dirty"||r.value==="dirty"?Ha(l.value):l}}if(i.type==="refinement"){let a=l=>{let p=i.refinement(l,o);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?ge:(l.status==="dirty"&&r.dirty(),a(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?ge:(l.status==="dirty"&&r.dirty(),a(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Fl(a))return a;let l=i.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Fl(a)?Promise.resolve(i.transform(a.value,o)).then(l=>({status:r.value,value:l})):a);Oe.assertNever(i)}};jr.create=(t,e,r)=>new jr({schema:t,typeName:me.ZodEffects,effect:e,...Te(r)});jr.createWithPreprocess=(t,e,r)=>new jr({schema:e,effect:{type:"preprocess",transform:t},typeName:me.ZodEffects,...Te(r)});var mn=class extends Se{_parse(e){return this._getType(e)===J.undefined?or(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};mn.create=(t,e)=>new mn({innerType:t,typeName:me.ZodOptional,...Te(e)});var ti=class extends Se{_parse(e){return this._getType(e)===J.null?or(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ti.create=(t,e)=>new ti({innerType:t,typeName:me.ZodNullable,...Te(e)});var Ts=class extends Se{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===J.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Ts.create=(t,e)=>new Ts({innerType:t,typeName:me.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Te(e)});var Ss=class extends Se{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Cl(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new $r(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new $r(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Ss.create=(t,e)=>new Ss({innerType:t,typeName:me.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Te(e)});var qa=class extends Se{_parse(e){if(this._getType(e)!==J.nan){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.nan,received:n.parsedType}),ge}return{status:"valid",value:e.data}}};qa.create=t=>new qa({typeName:me.ZodNaN,...Te(t)});var q8=Symbol("zod_brand"),Ol=class extends Se{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Nl=class t extends Se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ge:o.status==="dirty"?(r.dirty(),Ha(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ge:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:me.ZodPipeline})}},vs=class extends Se{_parse(e){let r=this._def.innerType._parse(e),n=i=>(Fl(i)&&(i.value=Object.freeze(i.value)),i);return Cl(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};vs.create=(t,e)=>new vs({innerType:t,typeName:me.ZodReadonly,...Te(e)});function DD(t,e={},r){return t?xo.create().superRefine((n,i)=>{var o,a;if(!t(n)){let l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,p=(a=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0,u=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...u,fatal:p})}}):xo.create()}var z8={object:Rr.lazycreate},me;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(me||(me={}));var G8=(t,e={message:`Input not instance of ${t.name}`})=>DD(r=>r instanceof t,e),ID=yo.create,FD=as.create,K8=qa.create,Q8=cs.create,CD=ls.create,Z8=ps.create,Y8=Ba.create,X8=us.create,J8=fs.create,e7=xo.create,t7=Ii.create,r7=Fn.create,n7=Wa.create,i7=Fi.create,o7=Rr.create,s7=Rr.strictCreate,a7=ds.create,c7=Nm.create,l7=ms.create,p7=ei.create,u7=Lm.create,f7=$a.create,d7=ja.create,m7=Um.create,h7=hs.create,g7=gs.create,y7=ys.create,x7=xs.create,T7=To.create,_D=jr.create,S7=mn.create,v7=ti.create,b7=jr.createWithPreprocess,w7=Nl.create,_7=()=>ID().optional(),E7=()=>FD().optional(),R7=()=>CD().optional(),k7={string:t=>yo.create({...t,coerce:!0}),number:t=>as.create({...t,coerce:!0}),boolean:t=>ls.create({...t,coerce:!0}),bigint:t=>cs.create({...t,coerce:!0}),date:t=>ps.create({...t,coerce:!0})},P7=ge,$e=Object.freeze({__proto__:null,defaultErrorMap:Va,setErrorMap:P8,getErrorMap:Fm,makeIssue:Cm,EMPTY_PATH:M8,addIssueToContext:X,ParseStatus:zt,INVALID:ge,DIRTY:Ha,OK:or,isAborted:gv,isDirty:yv,isValid:Fl,isAsync:Cl,get util(){return Oe},get objectUtil(){return hv},ZodParsedType:J,getParsedType:go,ZodType:Se,datetimeRegex:MD,ZodString:yo,ZodNumber:as,ZodBigInt:cs,ZodBoolean:ls,ZodDate:ps,ZodSymbol:Ba,ZodUndefined:us,ZodNull:fs,ZodAny:xo,ZodUnknown:Ii,ZodNever:Fn,ZodVoid:Wa,ZodArray:Fi,ZodObject:Rr,ZodUnion:ds,ZodDiscriminatedUnion:Nm,ZodIntersection:ms,ZodTuple:ei,ZodRecord:Lm,ZodMap:$a,ZodSet:ja,ZodFunction:Um,ZodLazy:hs,ZodLiteral:gs,ZodEnum:ys,ZodNativeEnum:xs,ZodPromise:To,ZodEffects:jr,ZodTransformer:jr,ZodOptional:mn,ZodNullable:ti,ZodDefault:Ts,ZodCatch:Ss,ZodNaN:qa,BRAND:q8,ZodBranded:Ol,ZodPipeline:Nl,ZodReadonly:vs,custom:DD,Schema:Se,ZodSchema:Se,late:z8,get ZodFirstPartyTypeKind(){return me},coerce:k7,any:e7,array:i7,bigint:Q8,boolean:CD,date:Z8,discriminatedUnion:c7,effect:_D,enum:y7,function:m7,instanceof:G8,intersection:l7,lazy:h7,literal:g7,map:f7,nan:K8,nativeEnum:x7,never:r7,null:J8,nullable:v7,number:FD,object:o7,oboolean:R7,onumber:E7,optional:S7,ostring:_7,pipeline:w7,preprocess:b7,promise:T7,record:u7,set:d7,strictObject:s7,string:ID,symbol:Y8,transformer:_D,tuple:p7,undefined:X8,union:a7,unknown:t7,void:n7,NEVER:P7,ZodIssueCode:G,quotelessJson:k8,ZodError:$r});function OD(t){let e=t.operands.map(Tv).join(" ");return`(#${t.operator} ${e})`}function Tv(t){return t.type==="capture"?`@${t.name}`:t.value}function ND(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>M7(t,r))}function M7(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=Tv(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var sr=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof Hm&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:ND(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new Hm(n.name);return i}else return n.value})}},Hm=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var Sv=$e.object({type:$e.literal("string"),value:$e.string()}),we={node:$e.object({type:$e.literal("capture"),name:$e.string()}),string:Sv,integer:Sv.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:$e.ZodIssueCode.custom,message:"Expected an integer"}),$e.NEVER):{type:"integer",value:r}}),boolean:Sv.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:$e.ZodIssueCode.custom,message:"Expected true or false"}),$e.NEVER))};var vv=class extends sr{constructor(){super(...arguments);this.name="not-type?";this.schema=$e.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return!n.includes(r.type)}},bv=class extends sr{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=$e.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},wv=class extends sr{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=$e.tuple([we.node,we.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},_v=class extends sr{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=$e.tuple([we.node,we.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},Ev=class extends sr{constructor(){super(...arguments);this.name="child-range!";this.schema=$e.union([$e.tuple([we.node,we.integer]),$e.tuple([we.node,we.integer,we.integer]),$e.tuple([we.node,we.integer,we.integer,we.boolean]),$e.tuple([we.node,we.integer,we.integer,we.boolean,we.boolean])])}run(r,n,i,o,a){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let p=l[n],u=l[i];return r.range=dn(o?p.endPosition:p.startPosition,a?u.startPosition:u.endPosition),!0}},Rv=class extends sr{constructor(){super(...arguments);this.name="character-range!";this.schema=$e.union([$e.tuple([we.node,we.integer]),$e.tuple([we.node,we.integer,we.integer])])}run(r,n,i){return r.range=new W(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},kv=class extends sr{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=$e.tuple([we.node,we.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[p,u]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new W(i.positionAt(d+p),i.positionAt(d+u)),!0}},Pv=class extends sr{constructor(){super(...arguments);this.name="trim-end!";this.schema=$e.tuple([we.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),a=o.length-o.trimEnd().length;return a>0&&(r.range=new W(i.start,Dk(n,i.end,-a))),!0}},Mv=class extends sr{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=$e.tuple([we.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},Av=class extends sr{constructor(){super(...arguments);this.name="log!";this.schema=$e.tuple([we.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},Dv=class extends sr{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=$e.tuple([we.node,we.string])}run(r,n){return r.insertionDelimiter=n,!0}},Iv=class extends sr{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=$e.tuple([we.node,we.node,we.string,we.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},LD=[new Av,new vv,new Pv,new bv,new wv,new Ev,new Rv,new kv,new Mv,new Dv,new Iv,new _v];function UD(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((a,l)=>{let p=LD.find(({name:d})=>d===a.operator);if(p==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${a.operator}"`});return}let u=p.createPredicate(a.operands);if(!u.success){e.push(...u.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(u.predicate)}),r.push(o)}),{errors:e,predicates:r}}function HD(t,e){let{errors:r,predicates:n}=UD(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${OD(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");st(k().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(k().runMode==="test")throw new Error("Invalid predicates")}return n}function Fv(t){return{row:t.line,column:t.character}}function VD(t){return t.map(e=>({...e,range:Cv(e),name:A7(e)}))}function Cv(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function A7(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var Ov=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&BD(this.startPosition,r)&&BD(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function BD(t,e){return t==null||e==null?t===e:t.isEqual(e)}var bs=new Ov;var Ll=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=k().runMode!=="production"}static create(e,r,n){let i=HD(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>dv(r)===e)}matches(e,r,n){if(!bs.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);bs.update(e,r,n,i)}return bs.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let a of i){let l=this.createMutableQueryMatch(e,a);this.runPredicates(l)&&o.push(this.createQueryMatch(l))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?Fv(r):void 0,endPosition:n!=null?Fv(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.pattern,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:hD(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>bD(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=dv(i.name),a=Cv(i),l=n.get(o);if(l==null){let p=[i],u={...i,name:o,range:a,hasError:()=>p.some(d=>d.hasError())};r.push(u),n.set(o,{acc:u,captures:p})}else l.acc.range=l.acc.range.union(a),l.acc.allowMultiple=l.acc.allowMultiple||i.allowMultiple,l.acc.insertionDelimiter=l.acc.insertionDelimiter??i.insertionDelimiter,l.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!vD(VD(r.captures),k().messages)&&k().runMode==="test")throw new Error("Invalid captures")}};var $D="_",D7=[$D,"interior",...Yo],I7=["prefix","leading","trailing"],F7=["startOf","endOf","start.startOf","start.endOf","end.startOf","end.endOf"],C7=["domain","removal","iteration","iteration.domain"],WD=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],ws=new Set;for(let t of D7){if(t!==$D){ws.add(t);for(let e of WD)ws.add(`${t}.${e}`)}for(let e of I7){ws.add(`${t}.${e}`);for(let r of F7)ws.add(`${t}.${e}.${r}`)}for(let e of C7){ws.add(`${t}.${e}`);for(let r of WD)ws.add(`${t}.${e}.${r}`)}}var O7=/^(?!;;).*(?<!"\w*)@([\w.]*)/gm;function jD(t,e){let r=e.matchAll(O7),n=[];for(let o of r){let a=o[1];if(!(a.length>1&&!a.includes(".")&&a.startsWith("_"))&&!ws.has(a)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${a}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(st(k().messages,"validateQueryCaptures.invalidCaptureName",i),k().runMode==="test")throw new Error(i)}var Vm=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await N7(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let a=n.getLanguage(i).query(o),l=Ll.create(i,n,a);return new t(l)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new fm(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let a=o.name;n[a]==null&&(n[a]=[]),n[a].push(o)}return n}};async function N7(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,a]of Object.entries(n)){if(a!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(st(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&jD(o,l),n[o]=l,xr(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,p=>{let u=p[1];i&&L7(t,o,u,p[0]),n[u]=n[u]??null})}return Object.values(n).join(`
`)}function L7(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(st(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(st(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var qD=Symbol("LANGUAGE_UNDEFINED"),Bm=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Bt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&bs.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:a})=>this.loadLanguage(a.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(st(this.ide.messages,"Failed to load language definitions",An(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await Vm.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??qD;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),bs.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===qD?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var Wm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e){for(let r of this.nestedStages)try{return r.run(e)}catch{continue}throw new Error("No modifier could be applied")}};var za=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e){if(this.shouldModify(e))try{return this.nestedStage.run(e).map(r=>r.withThatTarget(e))}catch(r){if(!this.suppressErrors)throw r}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},Ga=class extends za{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},$m=class extends za{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},jm=class extends za{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},Ka=class extends za{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function zD(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function Qa(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&zD(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.textualType==="line"&&r.textualType==="line"?new ir({editor:e.editor,isReversed:t,contentRange:_a(e,r,n,i)}):new Pt({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:wa(e,r,n,i),textualType:n&&i&&e.textualType==="token"&&r.textualType==="token"?"token":"character"})}function qm(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[a]=i,l=a.contentRange.start.isAfterOrEqual(o.contentRange.start),[p,u]=l?[o,a]:[a,o];return[Qa(t,p,u,!0,!0)]}function zm(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,a]=i;return n==="forward"?a:n==="backward"||(t.isPreferredOver?.(o,a)??!1)?o:a}default:throw new Error("Expected no more than 2 scope candidates")}}function Gm(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:a}}=t;if(a.isEqual(o)){let u=zm(e,i,o);return u==null||(r>0&&(u=Nv(e,i,u.domain.end,"forward",r,!0)),u==null)?void 0:u.getTargets(n)}let l=Nv(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(a))return l.getTargets(n);let p=Nv(e,i,a,"backward",r);if(p!=null)return qm(n,l,p)}function Nv(t,e,r,n,i,o=!1){let a=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(a===i)return l;a+=1}}var Za=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.maybeCreate(r,e.editor.document.languageId);if(i==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let o=Gm(e,i,n);if(o==null)throw new ut(r.type);return o}};var Km=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,{editor:n,isReversed:i}=e,o=this.scopeHandlerFactory.maybeCreate(r,n.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let a;if(e.hasExplicitRange&&(a=GD(o,n,e.contentRange),a.length===1&&a[0].domain.contains(e.contentRange)&&!e.hasExplicitScopeType&&(a=void 0)),a==null&&(a=this.getDefaultIterationRange(o,this.scopeHandlerFactory,e).flatMap(l=>GD(o,n,l))),a.length===0)throw new ut(r.type);return a.flatMap(l=>l.getTargets(i))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=Gm(n,i);if(o==null)throw new ut(`iteration scope for ${e.scopeType.type}`);return o.map(a=>a.contentRange)}};function GD(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var Qm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},Zm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Ym=class{run(){return Od(k()).map(e=>new Id({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var Xm=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new Lv(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},Lv=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return H7(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return vt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return V7(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[So(e,r,n,i)];let a=Vv(e,r);return[So(n?KD(this.modifierStageFactory,e,o,a?"backward":"forward"):e,i?KD(this.modifierStageFactory,r,o,a?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n,i=!1;e.type==="implicit"?(r=new Ym,n=[]):(r=this.markStageFactory.create(e.mark),n=Uv(this.modifierStageFactory,e.modifiers),i=U7(e));let o=r.run(),[a,l]=this.getPreAndPostStages(i),p=[...a,...n,...this.opts.actionFinalStages,...l];return Hv(p,o)}getPreAndPostStages(e){if(this.opts.noAutomaticTokenExpansion)return[[],[]];let r=new Ka(this.modifierStageFactory);return e?[[r],[]]:[[],[r]]}};function U7(t){return t.modifiers.length>0&&t.modifiers.every(({type:e})=>e==="startOf"||e==="endOf")}function Uv(t,e){return e.map(t.create).reverse()}function Hv(t,e){return t.forEach(r=>{e=e.flatMap(n=>r.run(n))}),e}function KD(t,e,r,n){return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e)[0]}function Vv(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function H7(t){return LP(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function QD(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function So(t,e,r=!1,n=!1){QD(t,e);let i=Vv(t,e);return Qa(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function V7(t,e,r,n){QD(t,e);let i=Vv(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),u=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let m=l;;m+=o){let g=new W(m,t.contentRange.start.character,m,t.contentRange.end.character);if(d.push(new Be({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),m===u)return d}}var Jm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getModifierStages(),n=Hv(r,[e]),i=this.modifier.type==="extendThroughStartOf";return n.map(o=>new Fd({editor:e.editor,isReversed:i,inputTarget:e,modifiedTarget:o,isHead:i}))}getModifierStages(){return this.modifier.modifiers!=null?Uv(this.modifierStageFactory,this.modifier.modifiers):[new Bv(this.modifierStageFactory,this.modifier)]}},Bv=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getContainingLine(e),n=this.getContainingPairInterior(e),i=n!=null?r.contentRange.intersection(n.contentRange):null;return i==null||i.isEmpty?[r]:[new Be({editor:e.editor,isReversed:e.isReversed,contentRange:i})]}getContainingPairInterior(e){try{return this.getContaining(e,{type:"surroundingPairInterior",delimiter:"any"})[0]}catch(r){if(r instanceof ut)return;throw r}}getContainingLine(e){return this.getContaining(e,{type:"line"})[0]}getContaining(e,r){return this.modifierStageFactory.create({type:"containingScope",scopeType:r}).run(e)}};var ri=class extends Error{constructor(e,r){let n=r!=null?` #${r+1}`:"";super(`Scope '${e.type}'${n} is out of range`),this.name="OutOfRangeError"}};function ZD(t,e,r,n){return Wv(t,e,r,n),e.slice(r,n+1)}function Wv(t,e,r,n){if(r<0||r>=e.length)throw new ri(t,r);if(n<0||n>=e.length)throw new ri(t,n)}var Ya=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e){let r=new Ka(this.modifierStageFactory).run(e)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(r);case"ordinalScope":return this.handleOrdinalScope(r,this.modifier);case"relativeScope":return this.handleRelativeScope(r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e){return Array.from(tm(this.getEveryRanges(e),([r,n])=>this.getTargetIterable(e,r,n,"forward")))}handleOrdinalScope(e,{start:r,length:n,scopeType:i}){return this.getEveryRanges(e).flatMap(([o,a])=>YD(i,this.getTargetIterable(e,o,a,r>=0?"forward":"backward"),r>=0?r:-(n+r),n))}handleRelativeScope(e,{direction:r,offset:n,length:i,scopeType:o}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(l=>{let{editor:p}=l,u=r==="forward"?new W(n===0?l.contentRange.start:l.contentRange.end,p.document.range.end):new W(p.document.range.start,n===0?l.contentRange.end:l.contentRange.start);return YD(o,this.getTargetIterable(e,p,u,r),n===0?0:n-1,i)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i){let o=Lt(fn(new RegExp(Ur(e.contentText),"g"),r,n,i),l=>new Be({contentRange:l,editor:r,isReversed:!1,textualType:"character"})),a=B7(e);if(a!=null){let l=this.modifierStageFactory.create({type:"containingScope",scopeType:a});return Jd(Lt(o,p=>{try{let u=l.run(p);return u.length===1&&u[0].contentRange.isRangeEqual(p.contentRange)?u[0]:null}catch{return null}}),p=>p!=null)}return o}};function B7(t){switch(t.textualType){case"line":case"token":case"word":return{type:t.textualType};default:return null}}function YD(t,e,r,n){Array.from(Ml(r,e));let i=Array.from(Ml(n,e));if(i.length<n)throw new ri(t,r+n-1);return i}var eh=class{constructor(e,r){this.modifierHandlerFactory=e;this.modifier=r}run(e){let r=e.getInterior();return r??this.modifierHandlerFactory.create({type:"containingScope",scopeType:{type:"interior",explicitScopeType:e.hasExplicitScopeType}}).run(e)}},th=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=$v(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoBoundaryStage.run(e).flatMap(r=>r.getBoundary())}};function $v(t){return new $m(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var ni={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},jv={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var rh=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},nh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(jv).run(e).map(r=>{let n=r.getLeadingDelimiterTarget();if(n==null)throw new rh("leading");return n})}},ih=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(jv).run(e).map(r=>{let n=r.getTrailingDelimiterTarget();if(n==null)throw new rh("trailing");return n})}};function oh(t,e,r,n,i){return Wv(t,r,n,i),n===i?r[n]:Qa(e,r[n],r[i],!0,!0)}function sh(t,e,r){return t.create({type:"everyScope",scopeType:r}).run(e)}var ah=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=sh(this.modifierStageFactory,e,this.modifier.scopeType),n=this.modifier.start+(this.modifier.start<0?r.length:0),i=n+this.modifier.length-1;return this.modifier.isEvery?ZD(this.modifier.scopeType,r,n,i):[oh(this.modifier.scopeType,e.isReversed,r,n,i)]}};var ch=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new po(r):new Be({...r,textualType:"character"})]}},lh=class extends ch{getContentRange(e){return e.start.toEmptyRange()}},ph=class extends ch{getContentRange(e){return e.end.toEmptyRange()}};var uh=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,n=new Za(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:r});try{return n.run(e)}catch(a){if(!(a instanceof ut))throw a}let i=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),o=W7(e,i);if(o==null)throw Error(`No scopes found for scope type: ${r.type}`);return o}};function W7(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=XD(r,i),a=XD(n,i),l=o.distance<a.distance?o.scope:a.scope;return l?.getTargets(t.isReversed)}function XD(t,e){let r,n=1/0;for(let i of t){let o=Math.min(JD(e,i.domain.start),JD(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function JD(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var fh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifierStageFactory.create(this.modifier.anchor),n=this.modifierStageFactory.create(this.modifier.active),i=r.run(e),o=n.run(e);if(i.length!==1||o.length!==1)throw new Error("Expected single anchor and active target");return[So(i[0],o[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var dh=class{constructor(e){this.modifier=e}run(e){return[new po({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var mh=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function eI(t,e,r){let n=sh(t,z7(r),e.scopeType),i=q7(r.contentRange,n);return $7(e,r,n,i)}function $7(t,e,r,n){let i=t.direction==="forward",o=j7(t,e.contentRange,r,i,n),a=i?o+t.length-1:o-t.length+1,l=Math.min(o,a),p=Math.max(o,a);return[oh(t.scopeType,e.isReversed,r,l,p)]}function j7(t,e,r,n,i){let o=t.offset===0;if(i==null){let p=n?r.findIndex(u=>u.contentRange.start.isAfter(e.start)):zo(r,u=>u.contentRange.start.isBefore(e.start));if(p===-1)throw new ri(t.scopeType);return o?p:n?p+t.offset-1:p-t.offset+1}let a=i.start,l=i.end;if(o){let p=l-a+1;if(p>t.length)throw new mh(t.length,p,t.scopeType.type);return n?a:l}return n?l+t.offset:a-t.offset}function q7(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function z7(t){return new Pt({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var hh=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let r=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(r==null)return eI(this.modifierStageFactory,this.modifier,e);let n=Array.from(this.modifier.offset===0?G7(r,e,this.modifier):K7(r,e,this.modifier));if(n.length<this.modifier.length)throw new ri(this.modifier.scopeType,this.modifier.offset+this.modifier.length-1);let{isReversed:i}=e;return this.modifier.isEvery?n.flatMap(o=>o.getTargets(i)):qm(i,n[0],n[n.length-1])}};function G7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a}=r,l=zm(t,n,a==="forward"?i.start:i.end,a)?.domain;if(l==null)throw new ut(r.scopeType.type);return Ml(o,t.generateScopes(n,a==="forward"?l.start:l.end,a,{skipAncestorScopes:!0}))}function K7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a,offset:l}=r,p=a==="forward"?i.end:i.start,u=i.isEmpty?"disallowed":"disallowedIfStrict";return CA(t.generateScopes(n,p,a,{containment:u,skipAncestorScopes:!0}),l-1,l+o-1)}var gh=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new Be({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};function tI(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function rI(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let a of o){if(n==null||(n=a(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var qv=t=>new pe(t.row,t.column),nI=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(a,l)=>a!=null&&l.includes(a.type),o=a=>a!=null&&!i(a,n);return(a,l)=>{let p,{start:u,end:d}=l;if(i(a.parent,t))return i(a,e)?p=a.nextNamedSibling:i(a,r)?p=a.previousNamedSibling:a.type===","?p=d.isBeforeOrEqual(qv(a.startPosition))?a.previousNamedSibling:a.nextNamedSibling:p=a,o(p)?p:null;if(i(a,t)){let m=[...a.children],g=m.find(({startPosition:v})=>qv(v).isAfterOrEqual(d))??null;if(o(g))return g;m.reverse();let x=m.find(({endPosition:v})=>qv(v).isBeforeOrEqual(u))??null;if(o(x))return x}return null}};function Le(...t){let e=Q7(t);return r=>{for(let n of e){let i=Z7(r,n);if(i!=null)return i}return null}}function Q7(t){return t.map(e=>e.split(".").map(r=>new zv(r)))}function Z7(t,e){let r=Y7(t,e);!r&&e.length>1&&(r=X7(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function Y7(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function X7(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let a=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=a.length===1?a[0]:null}}return r}var zv=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Ne(t,e=Xn){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function yh(t,e=Xn){let r=tI(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function Xa(t,e=0,r=Xn){return Ne(rI(e,...t),r)}function _t(...t){return Ne(Le(...t))}function Ja(...t){return Ne(nI(...t),yD())}function ec(...t){return Ne(Le(...t),xD)}function Cn(t,e=[]){return Ne(Le(...t),TD(...e))}function vo(t,e=[]){return Ne(Le(...t),SD(...e))}function gt(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function iI(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function gn(t){return Object.freeze(Object.fromEntries(_i(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,_t(...r)]:typeof r=="string"?[e,_t(r)]:[e,r]})))}function oI(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function J7(t,e){return cI(t,r=>Math.floor(r/2)*2+e)}function sI(t){return J7(Le("map_lit"),t)}function cI(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=Ul(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let a=e(o);return a===-1?null:i[a]}}var Ul=t=>oI(t,"value"),Gv="~quoting_lit.list_lit!",lI=Le(Gv);function Kv(...t){return e=>{let r=lI(e);if(r==null)return null;let n=Ul(r)[0];return t.includes(n?.text)?r:null}}function eQ(...t){return Ne(Kv(...t))}var pI=Kv("defn","defmacro"),aI=yh([pI,t=>Ul(t)[1]]),uI=Kv("if","if-let","when","when-let"),tQ=Ne(uI),rQ={collectionKey:Ne(sI(0)),value:Ne(sI(1)),argumentOrParameter:Ne(cI(Le(Gv),t=>t!==0?t:-1)),functionCall:Gv,functionCallee:yh([lI,t=>Ul(t)[0]]),namedFunction:Ne(pI),functionName:aI,name:aI,anonymousFunction:gt(eQ("fn"),_t("anon_fn_lit")),ifStatement:tQ,condition:yh([uI,t=>Ul(t)[1]])},fI=gn(rQ);var dI=["command","displayed_equation","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],nQ=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],hI=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],mI=hI.map(t=>`${t}[text]`),iQ=hI.map(t=>`${t}[command]`);function Qv(t,e){return{selection:new be(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new be(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function oQ(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new be(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}var sQ={argumentOrParameter:gt(Xa([Le(...dI),Le(...nQ)],1,Qv),Ne(Le("begin[name]","end[name]",...mI),Qv)),functionCall:gt(Ne(Le(...dI,"begin","end")),Ne(Le(...iQ),oQ)),name:gt(Ne(Le(...mI),Qv),_t("begin[name][text]","end[name][text]"))},gI=gn(sQ);var aQ=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],cQ=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],lQ=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],pQ=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],uQ=[":","=>"];function fQ(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var dQ={statement:gt(_t(...aQ),Xa([Le(...lQ),Le(...cQ)],1)),anonymousFunction:gt(_t("lambda","do_block"),Ne(fQ)),condition:ec("*[condition]"),argumentOrParameter:Ja("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:vo(["pair[key]"],[":"]),value:Cn(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],pQ.concat(uQ))},yI=gn(dQ);function Zv(){let t=Jn(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let a=r.childForFieldName("alternative");if(a==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new be(l.start,uv(a.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new be(uv(i.child(0).startPosition),o.end),context:{}}}}function xI(t){let e=Zv();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):Xn(r,n)}}var TI=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],mQ=["source_file","block","declaration_list"];function hQ(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function gQ(t,e){return{selection:gD(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:dn(e.children[0].startPosition,e.children[1].startPosition)}}}function yQ(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return TI.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var xQ={statement:Xa([Le(...mQ),Le(...TI)],1),condition:gt(_t("while_expression[condition]","if_expression[condition]"),Ne(Le("while_let_expression","if_let_expression"),Jn(["while","if","block"],[],{includeUnnamedChildren:!0})),Cn(["*.match_pattern![condition]"],["if"])),type:gt(Cn(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Ne(Le("constrained_type_parameter[bounds]","where_predicate[bounds]"),gQ),Cn(["function_item[return_type]"],["->"]),Ne(hQ),_t("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:Ja("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:gt(vo(["field_initializer[name]","field_pattern[name]"],[":"])),name:gt(_t("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),vo(["field_initializer[name]","field_pattern[name]"],[":"])),value:gt(Cn(["let_declaration[value]"],["="]),Cn(["field_initializer[value]","field_pattern[pattern]"],[":"]),_t("meta_item[value]","const_item[value]"),Ne(yQ)),attribute:vo(["mutable_specifier","attribute_item"]),branch:gt(_t("match_arm"),Ne(Le("else_clause"),xI("if_expression")),Ne(Le("if_expression"),Zv()))},SI=gn(xQ);var TQ={argumentOrParameter:Ja("arguments","parameters","class_parameters","bindings"),branch:Ne(Le("case_clause"),Jn([],[],{includeUnnamedChildren:!0})),type:Cn(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:Cn(["*[value]","*[default_value]","type_definition[type]"],["="]),condition:ec("*[condition]")},vI=gn(TQ);var SQ=["apply_statement","at_rule","charset_statement","debug_statement","each_statement","error_statement","for_statement","forward_statement","function_statement","if_statement","import_statement","include_statement","keyframes_statement","media_statement","mixin_statement","namespace_statement","placeholder","rule_set","supports_statement","use_statement","warn_statement","while_statement"];function wI(t){return[",","(",")"].includes(t.type)||_I(t)}function _I(t){return t.type==="plain_value"&&t.text==="at"}function bI(t){return e=>{(_I(e)||e.type===",")&&(e=e.previousSibling);let r=t(e);for(;r&&!wI(r);)e=r,r=t(r);return e}}function vQ(t,e){return e.type!=="declaration"?null:e.descendantsOfType("unit").map(r=>({node:r,selection:Xn(t.editor,r)}))}var bQ={condition:ec("condition"),statement:gt(_t(...SQ),Ne(Le("attribute_selector"),Jn([],["attribute_name","string_value"]))),argumentOrParameter:gt(Ne(Le("arguments.*!","parameters.*!"),fv(t=>wI(t),", ",bI(t=>t.previousSibling),bI(t=>t.nextSibling)))),collectionKey:vo(["declaration.property_name!"],[":"]),value:gt(Ne(Le("declaration"),Jn(["property_name","variable_name"])),Ne(Le("include_statement","namespace_statement"),Jn()),_t("return_statement.*!","import_statement.*!","attribute_selector.plain_value!","attribute_selector.string_value!","parameter.default_value!")),unit:gt(_t("integer_value.unit!"),vQ)},Yv=gn(bQ);function EI(t,e,r){let n=Hl[t];if(n==null)throw new Ou(t);let i=n[e];return i==null?iI(e):r?wQ(i):i}var Hl={clojure:fI,css:Yv,latex:gI,ruby:yI,rust:SI,scala:vI,scss:Yv};function wQ(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>_Q(i.node,Ed(e,i.selection.selection),t)),n.length>0?n:null)}}function _Q(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var xh=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=EI(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new ut(this.modifier.scopeType.type);let i=EQ(n,r,{editor:e.editor,selection:new be(e.contentRange.start,e.contentRange.end)});if(i==null)throw new ut(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:a,leadingDelimiterRange:l,trailingDelimiterRange:p,removalRange:u}=o.context;if(u!=null&&(l!=null||p!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:d,selection:m}=o.selection;return new fo({scopeTypeType:this.modifier.scopeType.type,editor:d,isReversed:e.isReversed,contentRange:m,removalRange:u,insertionDelimiter:a,leadingDelimiterRange:l,trailingDelimiterRange:p})})}};function EQ(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:Ed(r,o.selection),context:o.context}));n=n.parent}return null}var tc=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new lh;case"endOf":return new ph;case"extendThroughStartOf":case"extendThroughEndOf":return new Jm(this,e);case"toRawSelection":return new dh(e);case"interiorOnly":return new eh(this,e);case"excludeInterior":return new th(this,e);case"leading":return new nh(this,e);case"trailing":return new ih(this,e);case"visible":return new gh(e);case"containingScope":return new Za(this,this.scopeHandlerFactory,e);case"preferredScope":return new uh(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new Ya(this,this.storedTargets,e):new Km(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new Ya(this,this.storedTargets,e):new ah(this,e);case"relativeScope":return e.scopeType.type==="instance"?new Ya(this,this.storedTargets,e):new hh(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new Qm(e);case"keepEmptyFilter":return new Zm(e);case"cascading":return new Wm(this,e);case"modifyIfUntyped":return new Ga(this,e);case"range":return new fh(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}getLegacyScopeStage(e){switch(e.scopeType.type){default:return new xh(this.languageDefinitions,e)}}};async function RI(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Fe({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=_i(r),a=o.map(u=>{let d=r[u],m=RQ(d);return kI(e.document,m.selections,m.behavior)});n||a.push(kI(e.document,e.selections,1));let l=await("edits"in i?MQ(t,e,i.edits,a):PI(t,i.callback,e.document,a));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((u,d)=>[u,l[d]]))}function kI(t,e,r){return e.map(n=>kQ(t,n,n instanceof be?!n.isReversed:!0,r))}function RQ(t){return"selections"in t?t:{selections:t,behavior:1}}function kQ(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function PQ(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new be(r,n):new be(n,r)))}async function PI(t,e,r,n){let i=t.registerRangeInfoList(r,et(n));return await e(),i(),PQ(n)}async function MQ(t,e,r,n){return await PI(t,async()=>{if(!await RI(t,e,r))throw new Error("Could not apply edits")},e.document,n)}var Th=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Ae(k(),e,"pendingModification0"),{thatSelections:et(await nt(e,async(n,i)=>{let o=i.map(({contentRange:u})=>u),a=AQ(n,o),l=k().getEditableTextEditor(n),{contentRanges:p}=await Fe({rangeUpdater:this.rangeUpdater,editor:l,edits:a,selections:{contentRanges:o}});return vt(i,p).map(([u,d])=>({editor:u.editor,selection:d.toSelection(u.isReversed)}))}))}}};function AQ(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,a=r.lineAt(o),l=a.text.slice(0,a.rangeTrimmed?.start?.character??a.range.start.character),p=a.text.slice(0,o.character).search(/\s+$/),u=p>-1?new W(new pe(a.lineNumber,p),o):o.toEmptyRange();n.push({range:u,text:`
`+l,isReplace:!u.isEmpty})}return n}function Sh(t){return t.length<2?t:JM(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,a)=>o.contentRange.start.compareTo(a.contentRange.start));let i=!0;for(;i;)[n,i]=DQ(n);return n})}function DQ(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!IQ(r[r.length-1],n)?(e.push(MI(r)),r=[n]):r.push(n)}),e.push(MI(r)),[e,e.length!==t.length]}function MI(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return So(e,r)}function IQ(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Vl=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Ae(k(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Ae(k(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((a,l)=>{let p=r[l];if((a==null||p==null)&&!o)throw new Error("Targets must have same number of args");if(p!=null){let u;o?u=e.map((d,m)=>{let g=d.contentText,x=(p.isRaw?null:p.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return m>0&&x!=null?x+g:g}).join(""):u=a.contentText,i.push({edit:p.constructChangeEdit(u),editor:p.editor,originalTarget:p.target,isSource:!1})}else p=r[0];n.includes(a)||(n.push(a),this.type==="bring"&&i.push({edit:a.toDestination("to").constructChangeEdit(p.target.contentText),editor:a.editor,originalTarget:a,isSource:!0}))}),this.type==="move"&&Sh(n).forEach(a=>{i.push({edit:a.constructRemovalEdit(),editor:a.editor,originalTarget:a,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return et(await Mi(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),a=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),p=a.map(({edit:x})=>x.range),u=k().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:m}=await Fe({rangeUpdater:this.rangeUpdater,editor:u,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:p,behavior:0}}}),g=[...this.getMarks(o,d),...this.getMarks(a,m)];return g.sort((x,v)=>n.findIndex(b=>b.originalTarget===x.target)-n.findIndex(b=>b.originalTarget===v.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],a=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:a.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>pn(n,e.find(i=>i.target===n).selection);return Promise.all([Ae(k(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Ae(k(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function AI(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var vh=class extends Vl{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){r=AI(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:l}}},bh=class extends Vl{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:FQ};this.run=this.run.bind(this)}async run(r,n){r=AI(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:l}}},wh=class extends Vl{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,a)=>{let l=n[a];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function FQ(t){return t.getRemovalHighlightRange()}var Bl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){jt(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Wl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=wr(e),n=e.map(o=>new Be({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await k().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var rc=t=>new Pt({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var nc=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Ae(k(),e,"referenced"),r.ensureSingleEditor&&wr(e),r.ensureSingleTarget&&jt(e);let n=k().activeEditableTextEditor,i=r.setSelection?XM:nt,o=et(await i(e,(a,l)=>this.runForEditor(r,a,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=k().getEditableTextEditor(r),o=r.selections,a=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:p,targetSelections:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(p),r.document.version===a?n:u.map(d=>rc({editor:r,selection:d}))}};var Gt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new nc(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=k().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,a)=>CQ(o,i?a.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},_h=class extends Gt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},Eh=class extends Gt{constructor(){super(...arguments);this.command="toggleLineComment"}},Rh=class extends Gt{constructor(){super(...arguments);this.command="indentLine"}},kh=class extends Gt{constructor(){super(...arguments);this.command="outdentLine"}},Ph=class extends Gt{constructor(){super(...arguments);this.command="fold"}},Mh=class extends Gt{constructor(){super(...arguments);this.command="unfold"}},Ah=class extends Gt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},Dh=class extends Gt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},Ih=class extends Gt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},Fh=class extends Gt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Ch=class extends Gt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Oh=class extends Gt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Nh=class extends Gt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Lh=class extends Gt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}};function CQ(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Uh=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(k().capabilities.commands.clipboardCopy!=null)return new _h(this.rangeUpdater).run(e,r);r.showDecorations&&await Ae(k(),e,"referenced");let n=e.map(i=>i.contentText).join(`
`);return await k().clipboard.writeText(n),{thatTargets:e}}};var Hh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await k().flashRanges(e.flatMap(OQ));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function OQ(t){let{editor:e,contentRange:r}=t,n=t.getRemovalHighlightRange(),i=[{editor:e,range:rr(r),style:"referenced"}];return n.type==="line"?i.push({editor:e,range:n,style:"pendingDelete"}):i.push(...NQ(r,n).map(o=>({editor:e,range:rr(o),style:"pendingDelete"}))),i}function NQ(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,a=[];return i.isBefore(r)&&a.push(new W(i,r)),o.isAfter(n)&&a.push(new W(n,o)),a}var $l=class{constructor(){this.run=this.run.bind(this)}async run(e){return await nt(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(a=>{let l=a.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new Xv;await k().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},Xv=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function DI(t,e,r,n){let i=r.destinations.map((v,b)=>{if(n||v.getEditNewActionType()==="edit")return{destination:v,index:b}}).filter(v=>!!v);if(i.length===0)return r;let o=i.map(v=>v.destination.constructChangeEdit("")),a=r.cursorRanges.map((v,b)=>({range:v,index:b})).filter(({range:v})=>v!=null),l=a.map(({index:v})=>v),p=a.map(({range:v})=>v),u=o.map(v=>v.range),{thatRanges:d,cursorRanges:m,editRanges:g}=await Fe({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:p,editRanges:{selections:u,behavior:0}}}),x=[...r.cursorRanges];return vt(l,m).forEach(([v,b])=>{x[v]=b}),i.forEach((v,b)=>{let M=o[b].updateRange(g[b]);x[v.index]=M}),{destinations:r.destinations,thatRanges:d,cursorRanges:x}}async function II({acceptsLocation:t},e,r,n){let i=n.destinations.map((m,g)=>{if(m.getEditNewActionType()==="insertLineAfter")return{destination:m,index:g}}).filter(m=>!!m);if(i.length===0)return n;let o=i.map(({destination:m})=>m.contentRange),a=n.destinations.map(({contentRange:m})=>m),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(m=>m.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:p,thatRanges:u}=await Fe({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:a,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((m,g)=>{d[m.index]=r.selections[g]}),{destinations:n.destinations.map((m,g)=>m.withTarget(m.target.withContentRange(p[g]))),thatRanges:u,cursorRanges:d}}async function FI(t,e){let r=jt(e),n=k().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:ln([r.target.thatTarget])}}var Vh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return FI(this.actions,e);let r=k().getEditableTextEditor(wr(e)),n={destinations:e,thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=k().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await II(i,this.rangeUpdater,r,n)),n=await DI(this.rangeUpdater,r,n,!o);let a=n.destinations.map((l,p)=>n.cursorRanges[p].toSelection(l.target.isReversed));return await r.setSelections(a,{focusEditor:!0}),{thatSelections:ln(n.destinations.map(l=>l.target),n.thatRanges)}}};var Bh=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ni)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},Wh=class extends Bh{constructor(){super(...arguments);this.insertionMode="before"}},$h=class extends Bh{constructor(){super(...arguments);this.insertionMode="after"}};var jl=class{constructor(e){this.callbackAction=new nc(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:a,showDecorations:l}={}){let p=n??[];return this.callbackAction.run(e,{callback:()=>k().executeCommand(r,...p),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:a??!0,showDecorations:l??!0})}};var jh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){jt(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),el(k().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},qh=class extends jh{find(e){return k().findInDocument(e)}},zh=class extends jh{find(e){return k().findInWorkspace(e)}};var Gh=class{constructor(){this.run=this.run.bind(this)}async run(e){return await Ae(k(),e,"referenced"),{thatTargets:e}}};var ic=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=jt(e);return await Ae(k(),e,"referenced"),await k().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:ln(e)}}};function CI(t){let e=t.split(/^---$/m),r={snippets:[]};for(let n of e){let i=n.match(/^-$/m),o=i!=null?n.slice(0,i.index):n,a=i!=null?n.slice(i.index+i[0].length):null,l=a?VQ(a):null,p=LQ(o);if(l!=null){p==null&&(p={variables:[]});let{variables:u,...d}=p;r.snippets.push({...d,body:l,variables:u})}else if(p!=null){if(r.header!=null||r.snippets.length!==0)throw Error("Header snippet must be first in file");r.header=p}}return r}function LQ(t){let e={variables:[]},r=UQ(t);if(Object.keys(r).length===0)return;let n={};for(let[i,o]of Object.entries(r))switch(i){case"name":e.name=o;break;case"description":e.description=o;break;case"phrase":e.phrases=ql(o);break;case"insertionScope":e.insertionScopes=ql(o);break;case"language":e.languages=ql(o);break;default:if(!i.startsWith("$"))throw Error(`Invalid key '${i}'`);n[i]=o}return e.variables=HQ(n),e}function UQ(t){let e=t.split(/\r?\n/).map(n=>n.trim()).filter(Boolean),r={};for(let n of e){let i=n.split(":");if(i.length!==2)throw Error(`Invalid line '${n}'`);let o=i[0].trim(),a=i[1].trim();if(o.length===0||a.length===0)throw Error(`Invalid line '${n}'`);if(r[o]!=null)throw Error(`Duplicate key '${o}' in '${t}'`);r[o]=a}return r}function HQ(t){let e={},r=n=>(e[n]==null&&(e[n]={name:n}),e[n]);for(let[n,i]of Object.entries(t)){let o=n.split(".");if(o.length!==2)throw Error(`Invalid variable key '${n}'`);let a=o[0].slice(1);switch(o[1]){case"insertionFormatter":r(a).insertionFormatters=ql(i);break;case"wrapperPhrase":r(a).wrapperPhrases=ql(i);break;case"wrapperScope":r(a).wrapperScope=i;break;default:throw Error(`Invalid variable key '${n}'`)}}return Object.values(e)}function VQ(t){let e=t.match(/^[ \t]*\S/m);if(e?.index!=null)return t.slice(e.index).trimEnd().split(/\r?\n/).map(r=>r.trimEnd())}function ql(t){return t.split("|").map(e=>e.trim())}function NI(t){let e=[];t.header!=null&&e.push(OI(t.header)),e.push(...t.snippets.map(OI));let r=e.filter(Boolean).join(`
---

`);return r?r+`
---
`:""}function OI(t){let e=[bo("name",t.name),bo("description",t.description),bo("language",t.languages),bo("phrase",t.phrases),bo("insertionScope",t.insertionScopes)].filter(Boolean);return t.variables.length>0&&(e.length>0&&e.push(""),e.push(...BQ(t.variables))),"body"in t&&e.push("-",...t.body),e.join(`
`)}function BQ(t){let e=[...t];return e.sort(WQ),e.flatMap(r=>[bo(`$${r.name}.insertionFormatter`,r.insertionFormatters),bo(`$${r.name}.wrapperPhrase`,r.wrapperPhrases),bo(`$${r.name}.wrapperScope`,r.wrapperScope)]).filter(Boolean)}function bo(t,e){return e==null?"":Array.isArray(e)?`${t}: ${e.join(" | ")}`:`${t}: ${e}`}function WQ(t,e){return t.name==="0"?1:e.name==="0"?-1:t.name.localeCompare(e.name)}function Kh(t,e){let r=[],n=0,i=null,[o,...a]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...a.map(p=>({text:p,startIndex:0}))].forEach(({text:p,startIndex:u})=>{let d=p.match(/^\s*/)?.[0]??"",m=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let g=Math.max(m,u),x=PT("	",n),v=p.slice(g);r.push(x+v)}),r}function Qh(t,e){let r=AT(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var zl=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){let i=jt(e),o=i.editor;if(Ae(k(),e,"referenced"),n==null&&(n=await k().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"}),!n))return{};let a=o.document.offsetAt(i.contentRange.start),l=jQ(o,i.contentRange),p=l.map((ie,ae)=>({offsets:{start:o.document.offsetAt(ie.start)-a,end:o.document.offsetAt(ie.end)-a},name:ae===l.length-1?"0":`${ae+1}`})),u=o.document.getText(new W(i.contentRange.start.with(void 0,0),i.contentRange.start)),d=o.document.getText(i.contentRange),m=Qh(d,[...xr(d,/\$|\\/g,ie=>({offsets:{start:ie.index,end:ie.index+ie[0].length},text:`\\${ie[0]}`})),...p.map(({offsets:ie,name:ae})=>({offsets:ie,text:`$${ae}`}))]),g=Kh(m,u),x,v={snippets:[]};k().runMode==="test"?x=k().getEditableTextEditor(o):(x=k().getEditableTextEditor(await this.snippets.openNewSnippetFile(n,r)),v=CI(x.document.getText())),await x.setSelections([x.document.range.toSelection(!1)]);let b=1,{header:F}=v,M=v.header?.phrases!=null?void 0:[`${Jv}${b++}`],U=ie=>{let ae=F?.variables?.some(it=>it.name===ie.name&&it.wrapperPhrases!=null);return{name:ie.name,wrapperPhrases:ae?void 0:[`${Jv}${b++}`]}},K={name:F?.name===n?void 0:n,phrases:M,languages:$Q(o,F),body:g,variables:p.map(U)};v.snippets.push(K);let ne=NI(v).replace(/\$/g,"\\$").replaceAll(Jv,"$");return await x.insertSnippet(ne),{thatSelections:e.map(({editor:ie,contentSelection:ae})=>({editor:ie,selection:ae}))}}};function $Q(t,e){if(!e?.languages?.includes(t.document.languageId))return[t.document.languageId]}function jQ(t,e){let r=t.selections.filter(n=>e.contains(n));return r.sort((n,i)=>n.start.compareTo(i.start)),r}var Jv="PLACEHOLDER_VFA77zcbLD6wXNmfMAay";var Gl=class{constructor(){this.substitutions=[]}addSubstitution(e,r=!1){let n=qQ(10);return this.substitutions.push({to:e,randomId:n,isQuoted:r}),n}makeSubstitutions(e){return this.substitutions.forEach(({to:r,randomId:n,isQuoted:i})=>{let o=i?`"${n}"`:n;e=e.split(o).join(r)}),e}};function qQ(t){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}var Kl=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r){let n=jt(e),i=n.editor;if(Ae(k(),e,"referenced"),r==null&&(r=await k().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"})),r==null)return{};let o=1,a=i.document.offsetAt(n.contentRange.start),l=i.selections.filter(M=>n.contentRange.contains(M)).map((M,U)=>({offsets:{start:i.document.offsetAt(M.start)-a,end:i.document.offsetAt(M.end)-a},defaultName:`variable${U+1}`,placeholderIndex:o++})),p=new Gl,u=i.document.getText(new W(n.contentRange.start.with(void 0,0),n.contentRange.start)),d=i.document.getText(n.contentRange),m=Qh(d,[...xr(d,/\$|\\/g,M=>({offsets:{start:M.index,end:M.index+M[0].length},text:M[0]==="\\"?`\\${M[0]}`:`\\\\${M[0]}`})),...l.map(({offsets:M,defaultName:U,placeholderIndex:K})=>({offsets:M,text:p.addSubstitution(["\\$","${",K,":",U,"}"].join(""))}))]),g=Kh(m,u),x=({placeholderIndex:M})=>{let U="$"+M,K=p.addSubstitution("{$"+o+++"}",!0);return[U,K]},v={[r]:{definitions:[{scope:{langIds:[i.document.languageId]},body:g}],description:"$"+o++,variables:l.length===0?void 0:Object.fromEntries(l.map(x))}},b=p.makeSubstitutions(JSON.stringify(v,null,2)),F=k().getEditableTextEditor(i);return k().runMode==="test"?await F.setSelections([i.document.range.toSelection(!1)]):await this.snippets.openNewSnippetFile(r),await F.insertSnippet(b),{thatSelections:e.map(({editor:M,contentSelection:U})=>({editor:M,selection:U}))}}};var oc=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){return r==null?new Kl(this.snippets).run(e,n):new zl(this.snippets).run(e,r,n)}};var Ql=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Zl=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Ae(k(),e,"referenced"),n&&jt(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var Yl=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(k().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(k().visibleTextEditors.map(n=>k().setHighlightRanges(r,n,[]))):await nt(e,(n,i)=>k().setHighlightRanges(r,n,i.map(o=>pn(o,o.contentRange)))),{thatTargets:e}}};var Zh=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Ae(k(),e,"pendingModification0"),{thatTargets:et(await nt(e,this.runForEditor))})}hasCapability(){return this.isIndent?k().capabilities.commands.indentLine!=null:k().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new Rh(this.rangeUpdater):new kh(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?zQ(e,r):GQ(e,r),{targetSelections:i}=await Fe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return vt(r,i).map(([o,a])=>rc({editor:e,selection:a.toSelection(o.isReversed)}))}},Yh=class extends Zh{constructor(e){super(e,!0)}},Xh=class extends Zh{constructor(e){super(e,!1)}};function zQ(t,e){let{document:r}=t,n=LI(e),i=KQ(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function GQ(t,e){let{document:r}=t,n=LI(e),i=QQ(t);return n.map(o=>{let a=r.lineAt(o),l=a.text.match(i),{start:p}=a.range,u=p.translate(void 0,l?.[0].length);return{range:new W(p,u),text:""}})}function LI(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function KQ(t){if(t.options.insertSpaces){let e=UI(t);return" ".repeat(e)}return"	"}function QQ(t){if(t.options.insertSpaces){let e=UI(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function UI(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var Jh=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(ni)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=et(await nt(e,this.runForEditor));return await k().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:rr(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),a=i.map(({range:g})=>g),l=k().getEditableTextEditor(e),{contentSelections:p,editRanges:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:a,behavior:0}}}),d=vt(i,u).map(([g,x])=>g.updateRange(x)),m=e.selections[0];return p.some(g=>g.intersection(m)!=null)&&await l.revealRange(m),{sourceMark:ln(r,d),thatMark:ln(r,p)}}},eg=class extends Jh{constructor(e,r){super(e,r,!0)}},tg=class extends Jh{constructor(e,r){super(e,r,!1)}};var Xl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ni)]}async run(e){let r=await nt(e,async(i,o)=>{let a=this.getEdits(o),l=o.map(d=>d.thatTarget.contentSelection),{contentSelections:p,editRanges:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(i),edits:a,selections:{contentSelections:l,editRanges:{selections:a.map(d=>d.range),behavior:0}}});return{thatMark:p.map(d=>({editor:i,selection:d})),flashRanges:Jo(a,u).map(([d,m])=>({editor:i,range:d.isLine?d.updateRange(m):m,isLine:d.isLine}))}});return await k().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:a,isLine:l})=>({editor:o,range:l?Hr(a):rr(a),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},rg=class extends Xl{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[og(r,"before"),og(r,"after")])}},ng=class extends Xl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>og(r,"before"))}},ig=class extends Xl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>og(r,"after"))}};function og(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.textualType==="line"}}var eb=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},wo=class{constructor(){this._children=[]}appendChild(e){return e instanceof kr&&this._children[this._children.length-1]instanceof kr?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function a(l,p){for(let u of l)u.parent=p,a(u.children,u)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof cg)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},kr=class t extends wo{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},sg=class extends wo{},qr=class t extends sg{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof ag?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},ag=class t extends wo{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof kr&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},tb=class t extends wo{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(a=>a instanceof On&&!!a.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof On){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},On=class t extends wo{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},_o=class t extends sg{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new kr(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function HI(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var cg=class t extends wo{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof qr&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return HI([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof qr&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof _o&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){HI(this.children,e)}},sc=class{constructor(){this._scanner=new eb;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new cg;for(;this._parse(i););let o=new Map,a=[],l=0;i.walk(p=>(p instanceof qr&&(l+=1,p.isFinalTabstop?o.set(0,void 0):!o.has(p.index)&&p.children.length>0?o.set(p.index,p.children):a.push(p)),!0));for(let p of a){let u=o.get(p.index);if(u){let d=new qr(p.index);d.transform=p.transform;for(let m of u)d.appendChild(m.clone());i.replace(p,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new qr(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new kr(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new qr(Number(r)):new _o(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new qr(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new kr("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let a=new ag;for(;;){if(this._parseChoiceElement(a)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(a),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new kr(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new _o(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new kr("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new tb,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new kr(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new On(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new On(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new On(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new On(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new On(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let a=this._until(4);if(a)return e.appendChild(new On(Number(i),void 0,o,a)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new On(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new kr(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var VI=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function lg(t,e,r){let n=ZQ(t)+1,i={};t.walk(o=>{if(o instanceof _o){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new kr(r[o.name])]);else if(!VI[o.name]){let a;o.name in i?a=i[o.name]:(a=n++,i[o.name]=a);let l=new qr(a);o.children.forEach(p=>l.appendChild(p)),o.parent.replace(o,[l])}}else o instanceof qr&&o.index.toString()===e&&o.parent.replace(o,[new _o("TM_SELECTED_TEXT")]);return!0})}function ZQ(t){let e=0;return t.walk(r=>(r instanceof qr&&(e=Math.max(e,r.index)),!0)),e}function pg(t,e,r){let n=e.map(o=>YQ(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function YQ(t,e,r){let n=e.editor.document.languageId;return r.findIndex(({scope:i})=>{if(i==null)return!0;let{langIds:o,scopeTypes:a,excludeDescendantScopeTypes:l}=i;if(o!=null&&!o.includes(n))return!1;if(a!=null){let p=a.concat(l??[]),u,d;for(let m of p)try{let g=t.create({type:"containingScope",scopeType:{type:m}}).run(e)[0];e.contentRange.isRangeEqual(g.contentRange)&&(g=t.create({type:"containingScope",scopeType:{type:m},ancestorIndex:1}).run(e)[0]),(u==null||u.contentRange.contains(g.contentRange))&&(u=g,d=m)}catch{continue}return d==null?!1:u!=null&&!(l??[]).includes(d)}return!0})}var Jl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new sc;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new jm(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){if(e.type==="named"){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}else return e.scopeTypes??[]}getSnippetInfo(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=pg(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(a){return a==null?void 0:XQ(i,o,a)}}}else return{body:e.body,formatSubstitutions(n){return n}}}async run(e,r){let n=k().getEditableTextEditor(wr(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(u=>new Pt({editor:n,contentRange:u,isReversed:!1,hasExplicitRange:!0}))),a=this.snippetParser.parse(i);lg(a,null,o(r.substitutions));let l=a.toTextmateString(),{editorSelections:p}=await Fe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}};function XQ(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let a=NP[o];if(a==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,a(i.split(" "))]}))}var ep=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ni)]}async run(e){return await Ae(k(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:et(await nt(e,async(n,i)=>{let{thatRanges:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(n),edits:JQ(n,i),selections:{thatRanges:i.map(({contentRange:a})=>a)}});return Jo(i,o).map(([a,l])=>({editor:n,selection:l.toSelection(a.isReversed)}))}))}}};function JQ(t,e){let r=[];for(let n of e){let i=n.textualType==="token"?eZ(n):tZ(n);r.push(...i)}return r}function eZ(t){let{editor:e,contentRange:r}=t,n=_r(e.document.languageId).tokenMatcher,i=fn(n,e,r,"forward");return Array.from(XS(i)).map(([o,a])=>({range:new W(o.end,a.start),text:"",isReplace:!0}))}function tZ(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=Aa(OA(n,i+1),a=>e.lineAt(a));return Array.from(XS(o)).map(([a,l])=>({range:new W(a.rangeTrimmed?.end??a.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var ug=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=k().getEditableTextEditor(wr(e)),n=k().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:a,editorSelections:l}=await Fe({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(a),n!=null&&!n.isActive&&await n.focus(),await k().flashRanges(l.map(p=>({editor:r,range:rr(p),style:"justAdded"}))),{thatSelections:l.map(p=>({editor:r,selection:p}))}}};var fg=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await k().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?Jo(e,n).map(([a,l])=>({destination:a,text:l})):e.map(a=>({destination:a,text:r}));return{thatSelections:et(await Mi(i,({destination:a})=>a.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:a,text:l})=>a.constructChangeEdit(l)),{editSelections:i}=await Fe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:a})=>a),behavior:0}}}),o=Jo(n,i).map(([a,l])=>a.updateRange(l).toSelection(l.isReversed));return await k().flashRanges(o.map(a=>({editor:e,range:rr(a),style:"justAdded"}))),o.map(a=>({editor:e,selection:a}))}};var dg=class{constructor(e,r){this.run=this.run.bind(this),this.runner=k().capabilities.commands.clipboardPaste!=null?new ug(e,r):new fg(e)}run(e){return this.runner.run(e)}};var tp=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=Sh(e),r&&await Ae(k(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:et(await nt(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(a=>a.constructRemovalEdit()),i=k().getEditableTextEditor(e),{editRanges:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:a})=>a)}});return vt(r,o).map(([a,l])=>new po({editor:a.editor,isReversed:a.isReversed,contentRange:l}))}};var rp=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Ae(k(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=vt(e,n).map(([l,p])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(p)})),o=[],a=[];return await Mi(i,l=>l.editor,async(l,p)=>{let u=p.map(({edit:g})=>g),{contentSelections:d,editRanges:m}=await Fe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(l),edits:u,selections:{contentSelections:p.map(({target:g})=>g.contentSelection),editRanges:{selections:u.map(({range:g})=>g),behavior:0}}});for(let[g,x]of vt(p,d))o.push(g.target.withContentRange(x));for(let[g,x]of vt(p,m))a.push({editor:l,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:a}}};var np=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[$v(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(a=>{let l=a.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Ae(k(),i,"pendingModification0");let o=await nt(i,async(a,l)=>{let p=l.map((m,g)=>({editor:a,range:m.contentRange,text:g%2===0?r:n})),{sourceRanges:u,thatRanges:d}=await Fe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(a),edits:p,selections:{sourceRanges:e.map(m=>m.thatTarget.contentRange),thatRanges:e.map(m=>m.contentRange)}});return{sourceMark:ln(e,u),thatMark:ln(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:a})=>a),thatSelections:o.flatMap(({thatMark:a})=>a)}}};var ip=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=fl(e,a=>a.editor),n=Array.from(r,([a,l])=>({lineNumber:rZ(l,this.at),editor:a})),i=k().activeEditableTextEditor;for(let a of n)await k().getEditableTextEditor(a.editor).revealLine(a.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(a=>{let l=a.editor.visibleRanges,p=l[0].start.line,u=l[l.length-1].end.line;return a.contentRange.start.line>p||a.contentRange.end.line<u||a.contentRange.start.line===p&&a.contentRange.end.line===u});return await k().flashRanges(o.map(a=>({editor:a.editor,range:Hr(a.contentRange),style:"referenced"}))),{thatTargets:e}}},mg=class extends ip{constructor(){super("top")}},hg=class extends ip{constructor(){super("center")}},gg=class extends ip{constructor(){super("bottom")}};function rZ(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var Eo=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=wr(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n,o=this.selectionMode==="set"&&i.length===1&&i[0].isEmpty;return await k().getEditableTextEditor(r).setSelections(i,{focusEditor:!0,highlightWord:o}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new be(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new be(r.contentRange.end,r.contentRange.end))}}},yg=class extends Eo{constructor(){super("set","content")}},xg=class extends Eo{constructor(){super("set","before")}},Tg=class extends Eo{constructor(){super("set","after")}},Sg=class extends Eo{constructor(){super("add","content")}},vg=class extends Eo{constructor(){super("add","before")}},bg=class extends Eo{constructor(){super("add","after")}};var op=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var sp=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Ae(k(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,a=this.treeSitter.getTree(i.document);r.push(nZ(i.document,a,o))}return k().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function nZ(t,e,r){let n=[],i=[];return BI(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function BI(t,e,r,n,i){for(;;){let o=new W(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let a="  ".repeat(i),l=iZ(n),p=a+l;if(n.nodeIsNamed)t.push(`${p}${n.nodeType} [${o}]`),e.push(`${p}(${n.nodeType}`),n.gotoFirstChild()?(BI(t,e,r,n,i+1),n.gotoParent(),e.push(`${a})`)):e[e.length-1]+=")";else{let u=`"${n.nodeType}"`;t.push(`${p}${u} [${o}]`),e.push(`${p}${u}`)}}if(!n.gotoNextSibling())return}}function iZ(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var ap=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&el(k().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((a,l)=>a.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(a=>a.toDestination("to")),i);return{thatSelections:o}}},wg=class extends ap{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},_g=class extends ap{sortTexts(e){return e.reverse()}},Eg=class extends ap{sortTexts(e){return MT(e)}};var cp=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(ni)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Ae(k(),r,"referenced"),await nt(e,async(n,i)=>{let o=i.map(a=>pn(a,a.contentRange));await k().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var lp=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await nt(e,async(o,a)=>{let l=a.map(b=>({start:new be(b.contentRange.start,b.contentRange.start),end:new be(b.contentRange.end,b.contentRange.end)})),p=l.flatMap(({start:b,end:F})=>[{text:r,range:b},{text:n,range:F,isReplace:!0}]),u=a.map(b=>b.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:m,sourceSelections:g,thatSelections:x}=await Fe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(o),edits:p,selections:{boundariesStartSelections:{selections:l.map(({start:b})=>b),behavior:2},boundariesEndSelections:{selections:l.map(({end:b})=>b),behavior:3},sourceSelections:{selections:u,behavior:1},thatSelections:{selections:u,behavior:0}}}),v=[...d,...m];return await k().flashRanges(v.map(b=>({editor:o,range:rr(b),style:"justAdded"}))),{sourceMark:g.map(b=>({editor:o,selection:b})),thatMark:x.map(b=>({editor:o,selection:b}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var pp=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new sc;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new Ga(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){if(e.type==="named"){let{name:r,variableName:n}=e,a=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return a==null?void 0:{type:a}}else return e.scopeType}getBody(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return pg(this.modifierStageFactory,r,i.definitions).body.join(`
`)}else return e.body}async run(e,r){let n=k().getEditableTextEditor(wr(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);lg(o,r.variableName);let a=o.toTextmateString();await Ae(k(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),p=()=>n.insertSnippet(a,l),{targetSelections:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:n,callback:p,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(d=>({editor:n,selection:d}))}}};var oZ=/-?\d+(\.\d+)?/g,Rg=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Mi(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let p=n.offsetAt(l.contentRange.start),u=l.contentText,d=Jc(u,oZ);for(let m of d)i.push(sZ(e,p,m)),o.push(aZ(this.isIncrement,m.text))}let{thatSelections:a}=await this.actions.replace.run(i,o);return a}},kg=class extends Rg{constructor(e){super(e,!0)}},Pg=class extends Rg{constructor(e){super(e,!1)}};function sZ(t,e,r){return new Be({editor:t,isReversed:!1,contentRange:new W(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function aZ(t,e){return e.includes(".")?lZ(t,e).toString():cZ(t,e).toString()}function cZ(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function lZ(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var Mg=class{constructor(e,r,n,i){this.treeSitter=e;this.snippets=r;this.rangeUpdater=n;this.modifierStageFactory=i;this.addSelection=new Sg;this.addSelectionBefore=new vg;this.addSelectionAfter=new bg;this.callAsFunction=new Bl(this);this.clearAndSetSelection=new Wl(this);this.copyToClipboard=new Uh(this,this.rangeUpdater);this.cutToClipboard=new Hh(this);this.decrement=new Pg(this);this.deselect=new $l;this.editNew=new Vh(this.rangeUpdater,this);this.editNewLineAfter=new $h(this,this.modifierStageFactory);this.editNewLineBefore=new Wh(this,this.modifierStageFactory);this.executeCommand=new jl(this.rangeUpdater);this.extractVariable=new Lh(this.rangeUpdater);this.findInDocument=new qh(this);this.findInWorkspace=new zh(this);this.flashTargets=new Gh;this.foldRegion=new Ph(this.rangeUpdater);this.followLink=new ic({openAside:!1});this.followLinkAside=new ic({openAside:!0});this.generateSnippet=new oc(this.snippets);this.getText=new Zl;this.highlight=new Yl;this.increment=new kg(this);this.indentLine=new Yh(this.rangeUpdater);this.insertCopyAfter=new tg(this.rangeUpdater,this.modifierStageFactory);this.insertCopyBefore=new eg(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineAfter=new ig(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineBefore=new ng(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLinesAround=new rg(this.rangeUpdater,this.modifierStageFactory);this.insertSnippet=new Jl(this.rangeUpdater,this.snippets,this,this.modifierStageFactory);this.joinLines=new ep(this.rangeUpdater,this.modifierStageFactory);this.breakLine=new Th(this.rangeUpdater);this.moveToTarget=new bh(this.rangeUpdater);this.outdentLine=new Xh(this.rangeUpdater);this.pasteFromClipboard=new dg(this.rangeUpdater,this);this.randomizeTargets=new Eg(this);this.remove=new tp(this.rangeUpdater);this.rename=new Ah(this.rangeUpdater);this.replace=new rp(this.rangeUpdater);this.replaceWithTarget=new vh(this.rangeUpdater);this.revealDefinition=new Fh(this.rangeUpdater);this.revealTypeDefinition=new Ch(this.rangeUpdater);this.reverseTargets=new _g(this);this.rewrapWithPairedDelimiter=new np(this.rangeUpdater,this.modifierStageFactory);this.scrollToBottom=new gg;this.scrollToCenter=new hg;this.scrollToTop=new mg;this["private.setKeyboardTarget"]=new op("keyboard");this["experimental.setInstanceReference"]=new op("instanceReference");this.setSelection=new yg;this.setSelectionAfter=new Tg;this.setSelectionBefore=new xg;this.showDebugHover=new Nh(this.rangeUpdater);this.showHover=new Oh(this.rangeUpdater);this.showQuickFix=new Ih(this.rangeUpdater);this.showReferences=new Dh(this.rangeUpdater);this.sortTargets=new wg(this);this.swapTargets=new wh(this.rangeUpdater);this.toggleLineBreakpoint=new cp(this.modifierStageFactory);this.toggleLineComment=new Eh(this.rangeUpdater);this.unfoldRegion=new Mh(this.rangeUpdater);this.wrapWithPairedDelimiter=new lp(this.rangeUpdater);this.wrapWithSnippet=new pp(this.rangeUpdater,this.snippets,this.modifierStageFactory);this["private.showParseTree"]=new sp(this.treeSitter);this["private.getTargets"]=new Ql}};async function WI(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return Ag(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:Dg(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return Ag(i.destination)?{action:"insert",modifiers:Dg(i.destination),text:await rb(e,i.source)}:null;case"moveToTarget":if(Ag(i.destination)){let o=await rb(e,i.source);return await pZ(e,i.source),{action:"insert",modifiers:Dg(i.destination),text:o}}return null;case"callAsFunction":return Ig(i.argument)?{action:i.name,modifiers:Fg(i.argument),callee:await rb(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return Ig(i.target)?{action:i.name,modifiers:Fg(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return Ag(i.destination)?{action:i.name,modifiers:Dg(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return Ig(i.target)?{action:i.name,modifiers:Fg(i.target)}:null}}function Ag(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&Ig(t.target):!1}function Ig(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function Dg(t){return t.type==="primitive"?Fg(t.target):[]}function Fg(t){return t.type==="primitive"&&t.modifiers!=null&&t.modifiers.length>0?t.modifiers:[]}async function rb(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function pZ(t,e){await t({name:"remove",target:e})}function $I(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((a,l)=>[a,l]);for(let[a,l]of o.reverse())for(let p of uZ){let u=p.accept(a);if(u.accepted){let[d,m]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],g={...t,anchor:m.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:m},active:$f(i,x=>{x.modifiers=x.modifiers.slice(zo(x.modifiers,v=>p.accept(v).accepted)+1)})};return g=u.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:d}}}return t}var uZ=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function ib(t,e){switch(t.type){case"list":return fZ(t,e);case"range":return jI(t,e);case"primitive":return Cg(t,e);case"implicit":return t}}function fZ(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return jI(r,i);case"primitive":return Cg(r,i)}})}}function jI(t,e){let r=dZ(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return $I(r,n)}function dZ(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:Cg(t.anchor,e),active:Cg(t.active,e.concat(t.anchor))}}function Cg(t,e){let r=nb(t.mark??(mZ(t)?yZ(e):null)??{type:"cursor"}),n=qI(t)??xZ(e)??TZ(e)??[];return{type:t.type,mark:r,modifiers:n}}function mZ(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function qI(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function hZ(t){if(gZ(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function gZ(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function yZ(t){return up(t,e=>e.mark)}function xZ(t){return up(t,qI)}function TZ(t){return up(t,hZ)}function up(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=up([n.anchor],e);if(i!=null)return i;break}case"list":{let i=up(n.elements,e);if(i!=null)return i;break}}}}function nb(t){switch(t.type){case"range":return{...t,anchor:nb(t.anchor),active:nb(t.active)};case"target":return{type:"target",target:ib(t.target,[])};default:return t}}var Og=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new ob(this.debug)}async run(e){if(Xo(e)){let u=await WI(this.commandServerApi,this.runAction,e);if(u!=null)return{fallback:u}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:a,instanceReferenceTargets:l,keyboardTargets:p}=await this.runAction(e.action);return this.storedTargets.set("that",zI(i,n)),this.storedTargets.set("source",zI(a,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",p,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.directory,e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(gd(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},ob=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=ib(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function zI(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(rc):t}var Ng=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Pt({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var Lg=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=k().visibleTextEditors.find(a=>a.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new W(r.line,r.character,n.line,n.character);return[new Pt({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var Ug=class{constructor(e){this.mark=e}run(){let e=k().activeTextEditor;if(e==null)return[];let r=SZ(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[JS(e,!1,n)]}},SZ=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,a=Math.floor(i/100)*100,l=[],p=[],u=a+r;for(;u<=o;)u>=i&&(t.visibleRanges.find(m=>u>=m.start.line&&u<=m.end.line)?l.push(u):p.push(u)),u+=100;if(l.length===1)return l[0];if(l.length+p.length>1)throw new Error("Multiple lines matching");if(p.length===1)return p[0];throw new Error("Line is not in viewport")}}};var Hg=class{constructor(e){this.mark=e}run(){return[]}};var Vg=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[So(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var Bg=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var Wg=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var $g=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new ka;case"that":case"source":case"keyboard":return new Bg(this.storedTargets,e.type);case"decoratedSymbol":return new Ng(this.readableHatMap,e);case"lineNumber":return new Ug(e);case"range":return new Vg(this,e);case"nothing":return new Hg(e);case"target":return new Wg(this.targetPipelineRunner,e);case"explicit":return new Lg(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function GI(t,e,r,n,i,o,a,l,p,u){r.active&&(r.log("command:"),r.log(JSON.stringify(u,null,2)));let d=FS(u),m=await n.getReadableMap(d.usePrePhraseSnapshot),g=bZ(t,e,a,r,o,m,i,l);for(let v of p)g=v.wrapCommandRunner(m,g);let x=await g.run(d);return await vZ(u,x)}async function vZ(t,e){if(Xo(t))return e;if("returnValue"in e)return e.returnValue}function bZ(t,e,r,n,i,o,a,l){let p=new tc(r,i,new La(r)),u=new $g(o,i),d=new Xm(p,u);return u.setPipelineRunner(d),new Og(e,n,i,d,new Mg(t,a,l,p))}var KI=["clojure","css","latex","ruby","rust","scala","scss"];async function QI(t,e){await wZ(t,e)}async function wZ(t,e){let r=[];for(let n of KI)await t.loadLanguage(n),await e.loadLanguage(n),_i(Hl[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function ZI(t){return DP(t)?pl(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${pl(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var jg=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{tr(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...Yo.filter(r=>r!=="instance").map(r=>({type:r})),...Cf.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:ZI(e),isLanguageSpecific:_Z(e)}}dispose(){this.disposable.dispose()}};function _Z(t){switch(t.type){case"string":case"argumentOrParameter":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"interior":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function sb(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((a,l)=>a.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=df(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=df(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function _s(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.getRemovalHighlightRange(),leadingDelimiter:YI(t.getLeadingDelimiterTarget()),trailingDelimiter:YI(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(_s),boundary:t.getBoundary()?.map(_s),insertionDelimiter:t.insertionDelimiter}}function YI(t){return t!=null?_s(t):void 0}function XI(t,e,r,n,i){return Aa(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),o=>({domain:o.domain,ranges:o.getTargets(!1).map(a=>({range:a.contentRange,targets:i?EZ(r,a).map(_s):void 0}))}))}function EZ(t,e){try{return t.run(e)}catch(r){if(r.name==="NoContainingScopeError")return[];throw r}}function JI(t,e,r){return Aa(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(_s)}))}var qg=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:JI(e,i,sb(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,a=this.scopeHandlerFactory.maybeCreate(r,o);if(a==null)return[];let l=this.scopeHandlerFactory.maybeCreate(a.iterationScopeType,o);return l==null?[]:XI(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),sb(e,a,n),i)}};var zg=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Kn(k().configuration,()=>this.onChange());this.disposables.push(k().onDidChangeVisibleTextEditors(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(a){if(st(k().messages,"ScopeRangeWatcher.provide",a.message),o=[],k().runMode==="test")throw a}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{tr(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{tr(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var Gg=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?tF(n,r):eF(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return tF(n,r);let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?3:eF(e,o)?0:1}};function eF(t,e){return!CP(e.generateScopes(t,new pe(0,0),"forward"))}function tF(t,e){switch(e.type){case"notebookCell":return 3;default:return Hl[t]?.[e.type]!=null?2:3}}var Kg=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Kn(k().configuration,()=>this.onChange());this.disposable=FP(k().onDidOpenTextDocument(i.run),k().onDidCloseTextDocument(i.run),k().onDidChangeActiveTextEditor(i.run),k().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{tr(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=k().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function rF({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Qd,commandServerApi:i=new jd,talonSpokenForms:o=new Kd,snippets:a=new Gd}){vd(t);let l=new Ld(t),p=new $d,u=new wd,d=new Nd(t,u),m=new Xd(o),g=e!=null?new Bd(p,l,e,i):new qd;g.allocateHats();let x=r?await Bm.create(t,n,r):new zd;t.disposeOnExit(p,x,g,l,d);let v=[],b,F=M=>(b=M,GI(n,i,l,g,a,u,x,p,v,M));return{commandApi:{runCommand(M){return F(M)},runCommandSafe(...M){return F(Of(M))},repeatPreviousCommand(){if(b==null)throw new Error("No previous command");return F(b)}},scopeProvider:kZ(x,u,m),customSpokenFormGenerator:m,storedTargets:u,hatTokenMap:g,injectIde:vd,runIntegrationTests:()=>QI(n,x),addCommandRunnerDecorator:M=>{v.push(M)}}}function kZ(t,e,r){let n=new La(t),i=new qg(n,new tc(t,e,n)),o=new zg(t,i),a=new Gg(n),l=new jg(r),p=new Kg(t,a,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:a.getScopeSupport,getIterationScopeSupport:a.getIterationScopeSupport,onDidChangeScopeSupport:p.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function nF(t,e){switch(e.type){case"UntypedTarget":return new Pt({editor:t,isReversed:e.isReversed,contentRange:Ef(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new ir({editor:t,isReversed:e.isReversed,contentRange:Ef(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var TLe=Symbol("unused");var fp=class{constructor(e){this.position=e}},SLe={$0:new fp(0),$1:new fp(1),$2:new fp(2)};var iF=require("node:events"),Qg=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new iF.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function zr(){return global._neovimRegistry==null&&(global._neovimRegistry=new Qg),global._neovimRegistry}var oF="pokey.cursorless";async function Zg(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,a,l]=await e.executeLua(r,[]),p;return l===!0?p=[new be(new pe(o-1,a-1),new pe(n-1,i-1))]:p=[new be(new pe(n-1,i-1),new pe(o-1,a-1))],console.debug(`bufferGetSelections(): selections=(${p[0].start.line}, ${p[0].start.character}), (${p[0].end.line}, ${p[0].end.character}) neovim=(${n},${i}),(${o},${a}),reverse=${l}`),p}async function sF(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function aF(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),a=new W(new pe(i-1,0),new pe(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${a.start.line}, ${a.start.character}), (${a.end.line}, ${a.end.character})`),[a]}async function cF(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function Yg(t,e){await e.callFunction("setreg",["*",t])}async function lF(t){return await t.callFunction("getreg",["*"])}async function pF(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function uF(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function fF(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function dF(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var PZ={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0},Xg=class{constructor(){this.commands=PZ}};var dp=class{constructor(e){this.client=e}async readText(){return await lF(this.client)}async writeText(e){return await Yg(e,this.client)}};var Jg=hr(ab(),1);var hp=class{constructor(){this.notifier=new Bt;this.mocks={...Tf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(MZ(n,r))return(0,Jg.get)(i,e)??(0,Jg.get)(this.mocks,e)}return(0,Jg.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function MZ(t,e){return t.languageId===e.languageId}async function cb(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);n.sort((a,l)=>(mF(a)||hF(a))&&(mF(l)||hF(l))?1:a.range.start.line===l.range.start.line?l.range.start.character-a.range.start.character:l.range.start.line-a.range.start.line),console.debug("neovimEdit() [sorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let a of n)o.push({range:a.range,rangeOffset:i.offsetAt(a.range.start),rangeLength:i.offsetAt(a.range.end)-i.offsetAt(a.range.start),text:a.text});zr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let a of n){let{range:l,text:p,isReplace:u}=a;p===""?await gF(t,l):l.isEmpty&&!u?await yF(t,l.start,p):await AZ(t,l,p)}return await e.updateTextEditor(),!0}async function gF(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(a+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([a,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function yF(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=a+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let p=a+n[0],u=n[n.length-1]+l;await i.setLines([p,...n.slice(1,n.length-1),u],{start:e.line,end:e.line+1,strictIndexing:!0})}async function AZ(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await gF(t,e),await yF(t,e.start,r)}function mF(t){return t.range.isEmpty&&!t.isReplace}function hF(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function xF(t){return zr().onEvent("onDidChangeTextDocument",t),SF()}function TF(t,e,r){return zr().onEvent("onDidOpenTextDocument",t),SF()}function SF(){return{dispose(){}}}var gp=class{constructor(){this.data={...Sf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var _C=hr(ab(),1);var yp=class{async showMessage(e,r,n,...i){}};async function vF(t,e){let r=e.activeTextEditor,n=await t.window,i=await Zg(n,t),o=r.document.getText(i[0]);await Yg(o,t)}async function bF(t,e){await pF(t)}var ey=class{constructor(e,r,n,i,o,a,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=a}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await sF(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await cb(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await vF(this.client,this.neovimIDE)}async clipboardPaste(){await bF(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}};var Mw=hr(require("path"),1);var wF;(()=>{"use strict";var t={470:i=>{function o(p){if(typeof p!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(p))}function a(p,u){for(var d,m="",g=0,x=-1,v=0,b=0;b<=p.length;++b){if(b<p.length)d=p.charCodeAt(b);else{if(d===47)break;d=47}if(d===47){if(!(x===b-1||v===1))if(x!==b-1&&v===2){if(m.length<2||g!==2||m.charCodeAt(m.length-1)!==46||m.charCodeAt(m.length-2)!==46){if(m.length>2){var F=m.lastIndexOf("/");if(F!==m.length-1){F===-1?(m="",g=0):g=(m=m.slice(0,F)).length-1-m.lastIndexOf("/"),x=b,v=0;continue}}else if(m.length===2||m.length===1){m="",g=0,x=b,v=0;continue}}u&&(m.length>0?m+="/..":m="..",g=2)}else m.length>0?m+="/"+p.slice(x+1,b):m=p.slice(x+1,b),g=b-x-1;x=b,v=0}else d===46&&v!==-1?++v:v=-1}return m}var l={resolve:function(){for(var p,u="",d=!1,m=arguments.length-1;m>=-1&&!d;m--){var g;m>=0?g=arguments[m]:(p===void 0&&(p=process.cwd()),g=p),o(g),g.length!==0&&(u=g+"/"+u,d=g.charCodeAt(0)===47)}return u=a(u,!d),d?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(p){if(o(p),p.length===0)return".";var u=p.charCodeAt(0)===47,d=p.charCodeAt(p.length-1)===47;return(p=a(p,!u)).length!==0||u||(p="."),p.length>0&&d&&(p+="/"),u?"/"+p:p},isAbsolute:function(p){return o(p),p.length>0&&p.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var p,u=0;u<arguments.length;++u){var d=arguments[u];o(d),d.length>0&&(p===void 0?p=d:p+="/"+d)}return p===void 0?".":l.normalize(p)},relative:function(p,u){if(o(p),o(u),p===u||(p=l.resolve(p))===(u=l.resolve(u)))return"";for(var d=1;d<p.length&&p.charCodeAt(d)===47;++d);for(var m=p.length,g=m-d,x=1;x<u.length&&u.charCodeAt(x)===47;++x);for(var v=u.length-x,b=g<v?g:v,F=-1,M=0;M<=b;++M){if(M===b){if(v>b){if(u.charCodeAt(x+M)===47)return u.slice(x+M+1);if(M===0)return u.slice(x+M)}else g>b&&(p.charCodeAt(d+M)===47?F=M:M===0&&(F=0));break}var U=p.charCodeAt(d+M);if(U!==u.charCodeAt(x+M))break;U===47&&(F=M)}var K="";for(M=d+F+1;M<=m;++M)M!==m&&p.charCodeAt(M)!==47||(K.length===0?K+="..":K+="/..");return K.length>0?K+u.slice(x+F):(x+=F,u.charCodeAt(x)===47&&++x,u.slice(x))},_makeLong:function(p){return p},dirname:function(p){if(o(p),p.length===0)return".";for(var u=p.charCodeAt(0),d=u===47,m=-1,g=!0,x=p.length-1;x>=1;--x)if((u=p.charCodeAt(x))===47){if(!g){m=x;break}}else g=!1;return m===-1?d?"/":".":d&&m===1?"//":p.slice(0,m)},basename:function(p,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');o(p);var d,m=0,g=-1,x=!0;if(u!==void 0&&u.length>0&&u.length<=p.length){if(u.length===p.length&&u===p)return"";var v=u.length-1,b=-1;for(d=p.length-1;d>=0;--d){var F=p.charCodeAt(d);if(F===47){if(!x){m=d+1;break}}else b===-1&&(x=!1,b=d+1),v>=0&&(F===u.charCodeAt(v)?--v==-1&&(g=d):(v=-1,g=b))}return m===g?g=b:g===-1&&(g=p.length),p.slice(m,g)}for(d=p.length-1;d>=0;--d)if(p.charCodeAt(d)===47){if(!x){m=d+1;break}}else g===-1&&(x=!1,g=d+1);return g===-1?"":p.slice(m,g)},extname:function(p){o(p);for(var u=-1,d=0,m=-1,g=!0,x=0,v=p.length-1;v>=0;--v){var b=p.charCodeAt(v);if(b!==47)m===-1&&(g=!1,m=v+1),b===46?u===-1?u=v:x!==1&&(x=1):u!==-1&&(x=-1);else if(!g){d=v+1;break}}return u===-1||m===-1||x===0||x===1&&u===m-1&&u===d+1?"":p.slice(u,m)},format:function(p){if(p===null||typeof p!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof p);return function(u,d){var m=d.dir||d.root,g=d.base||(d.name||"")+(d.ext||"");return m?m===d.root?m+g:m+"/"+g:g}(0,p)},parse:function(p){o(p);var u={root:"",dir:"",base:"",ext:"",name:""};if(p.length===0)return u;var d,m=p.charCodeAt(0),g=m===47;g?(u.root="/",d=1):d=0;for(var x=-1,v=0,b=-1,F=!0,M=p.length-1,U=0;M>=d;--M)if((m=p.charCodeAt(M))!==47)b===-1&&(F=!1,b=M+1),m===46?x===-1?x=M:U!==1&&(U=1):x!==-1&&(U=-1);else if(!F){v=M+1;break}return x===-1||b===-1||U===0||U===1&&x===b-1&&x===v+1?b!==-1&&(u.base=u.name=v===0&&g?p.slice(1,b):p.slice(v,b)):(v===0&&g?(u.name=p.slice(1,x),u.base=p.slice(1,b)):(u.name=p.slice(v,x),u.base=p.slice(v,b)),u.ext=p.slice(x,b)),v>0?u.dir=p.slice(0,v-1):g&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,r),a.exports}r.d=(i,o)=>{for(var a in o)r.o(o,a)&&!r.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:o[a]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>N}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,l=/^\/\//;function p(O,I){if(!O.scheme&&I)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${O.authority}", path: "${O.path}", query: "${O.query}", fragment: "${O.fragment}"}`);if(O.scheme&&!o.test(O.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(O.path){if(O.authority){if(!a.test(O.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(O.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let u="",d="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(I){return I instanceof g||!!I&&typeof I.authority=="string"&&typeof I.fragment=="string"&&typeof I.path=="string"&&typeof I.query=="string"&&typeof I.scheme=="string"&&typeof I.fsPath=="string"&&typeof I.with=="function"&&typeof I.toString=="function"}scheme;authority;path;query;fragment;constructor(I,$,z,Q,Z,te=!1){typeof I=="object"?(this.scheme=I.scheme||u,this.authority=I.authority||u,this.path=I.path||u,this.query=I.query||u,this.fragment=I.fragment||u):(this.scheme=function(he,re){return he||re?he:"file"}(I,te),this.authority=$||u,this.path=function(he,re){switch(he){case"https":case"http":case"file":re?re[0]!==d&&(re=d+re):re=d}return re}(this.scheme,z||u),this.query=Q||u,this.fragment=Z||u,p(this,te))}get fsPath(){return U(this,!1)}with(I){if(!I)return this;let{scheme:$,authority:z,path:Q,query:Z,fragment:te}=I;return $===void 0?$=this.scheme:$===null&&($=u),z===void 0?z=this.authority:z===null&&(z=u),Q===void 0?Q=this.path:Q===null&&(Q=u),Z===void 0?Z=this.query:Z===null&&(Z=u),te===void 0?te=this.fragment:te===null&&(te=u),$===this.scheme&&z===this.authority&&Q===this.path&&Z===this.query&&te===this.fragment?this:new v($,z,Q,Z,te)}static parse(I,$=!1){let z=m.exec(I);return z?new v(z[2]||u,ae(z[4]||u),ae(z[5]||u),ae(z[7]||u),ae(z[9]||u),$):new v(u,u,u,u,u)}static file(I){let $=u;if(i&&(I=I.replace(/\\/g,d)),I[0]===d&&I[1]===d){let z=I.indexOf(d,2);z===-1?($=I.substring(2),I=d):($=I.substring(2,z),I=I.substring(z)||d)}return new v("file",$,I,u,u)}static from(I){let $=new v(I.scheme,I.authority,I.path,I.query,I.fragment);return p($,!0),$}toString(I=!1){return K(this,I)}toJSON(){return this}static revive(I){if(I){if(I instanceof g)return I;{let $=new v(I);return $._formatted=I.external,$._fsPath=I._sep===x?I.fsPath:null,$}}return I}}let x=i?1:void 0;class v extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=U(this,!1)),this._fsPath}toString(I=!1){return I?K(this,!0):(this._formatted||(this._formatted=K(this,!1)),this._formatted)}toJSON(){let I={$mid:1};return this._fsPath&&(I.fsPath=this._fsPath,I._sep=x),this._formatted&&(I.external=this._formatted),this.path&&(I.path=this.path),this.scheme&&(I.scheme=this.scheme),this.authority&&(I.authority=this.authority),this.query&&(I.query=this.query),this.fragment&&(I.fragment=this.fragment),I}}let b={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function F(O,I,$){let z,Q=-1;for(let Z=0;Z<O.length;Z++){let te=O.charCodeAt(Z);if(te>=97&&te<=122||te>=65&&te<=90||te>=48&&te<=57||te===45||te===46||te===95||te===126||I&&te===47||$&&te===91||$&&te===93||$&&te===58)Q!==-1&&(z+=encodeURIComponent(O.substring(Q,Z)),Q=-1),z!==void 0&&(z+=O.charAt(Z));else{z===void 0&&(z=O.substr(0,Z));let he=b[te];he!==void 0?(Q!==-1&&(z+=encodeURIComponent(O.substring(Q,Z)),Q=-1),z+=he):Q===-1&&(Q=Z)}}return Q!==-1&&(z+=encodeURIComponent(O.substring(Q))),z!==void 0?z:O}function M(O){let I;for(let $=0;$<O.length;$++){let z=O.charCodeAt($);z===35||z===63?(I===void 0&&(I=O.substr(0,$)),I+=b[z]):I!==void 0&&(I+=O[$])}return I!==void 0?I:O}function U(O,I){let $;return $=O.authority&&O.path.length>1&&O.scheme==="file"?`//${O.authority}${O.path}`:O.path.charCodeAt(0)===47&&(O.path.charCodeAt(1)>=65&&O.path.charCodeAt(1)<=90||O.path.charCodeAt(1)>=97&&O.path.charCodeAt(1)<=122)&&O.path.charCodeAt(2)===58?I?O.path.substr(1):O.path[1].toLowerCase()+O.path.substr(2):O.path,i&&($=$.replace(/\//g,"\\")),$}function K(O,I){let $=I?M:F,z="",{scheme:Q,authority:Z,path:te,query:he,fragment:re}=O;if(Q&&(z+=Q,z+=":"),(Z||Q==="file")&&(z+=d,z+=d),Z){let Re=Z.indexOf("@");if(Re!==-1){let lr=Z.substr(0,Re);Z=Z.substr(Re+1),Re=lr.lastIndexOf(":"),Re===-1?z+=$(lr,!1,!1):(z+=$(lr.substr(0,Re),!1,!1),z+=":",z+=$(lr.substr(Re+1),!1,!0)),z+="@"}Z=Z.toLowerCase(),Re=Z.lastIndexOf(":"),Re===-1?z+=$(Z,!1,!0):(z+=$(Z.substr(0,Re),!1,!0),z+=Z.substr(Re))}if(te){if(te.length>=3&&te.charCodeAt(0)===47&&te.charCodeAt(2)===58){let Re=te.charCodeAt(1);Re>=65&&Re<=90&&(te=`/${String.fromCharCode(Re+32)}:${te.substr(3)}`)}else if(te.length>=2&&te.charCodeAt(1)===58){let Re=te.charCodeAt(0);Re>=65&&Re<=90&&(te=`${String.fromCharCode(Re+32)}:${te.substr(2)}`)}z+=$(te,!0,!1)}return he&&(z+="?",z+=$(he,!1,!1)),re&&(z+="#",z+=I?re:F(re,!1,!1)),z}function ne(O){try{return decodeURIComponent(O)}catch{return O.length>3?O.substr(0,3)+ne(O.substr(3)):O}}let ie=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ae(O){return O.match(ie)?O.replace(ie,I=>ne(I)):O}var it=r(470);let It=it.posix||it,ct="/";var N;(function(O){O.joinPath=function(I,...$){return I.with({path:It.join(I.path,...$)})},O.resolvePath=function(I,...$){let z=I.path,Q=!1;z[0]!==ct&&(z=ct+z,Q=!0);let Z=It.resolve(z,...$);return Q&&Z[0]===ct&&!I.authority&&(Z=Z.substring(1)),I.with({path:Z})},O.dirname=function(I){if(I.path.length===0||I.path===ct)return I;let $=It.dirname(I.path);return $.length===1&&$.charCodeAt(0)===46&&($=""),I.with({path:$})},O.basename=function(I){return It.basename(I.path)},O.extname=function(I){return It.extname(I.path)}})(N||(N={}))})(),wF=n})();var{URI:_F,Utils:TUe}=wF;var qF=hr(LF(),1);var Tp=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var UZ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Sp=t=>t.replace(/[[\]\\-]/g,"\\$&"),HZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),UF=t=>t.join(""),HF=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,l=!1,p=!1,u=!1,d=r,m="";e:for(;o<t.length;){let b=t.charAt(o);if((b==="!"||b==="^")&&o===r+1){u=!0,o++;continue}if(b==="]"&&a&&!p){d=o+1;break}if(a=!0,b==="\\"&&!p){p=!0,o++;continue}if(b==="["&&!p){for(let[F,[M,U,K]]of Object.entries(UZ))if(t.startsWith(F,o)){if(m)return["$.",!1,t.length-r,!0];o+=F.length,K?i.push(M):n.push(M),l=l||U;continue e}}if(p=!1,m){b>m?n.push(Sp(m)+"-"+Sp(b)):b===m&&n.push(Sp(b)),m="",o++;continue}if(t.startsWith("-]",o+1)){n.push(Sp(b+"-")),o+=2;continue}if(t.startsWith("-",o+1)){m=b,o+=2;continue}n.push(Sp(b)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let b=n[0].length===2?n[0].slice(-1):n[0];return[HZ(b),!1,d-r,!1]}let g="["+(u?"^":"")+UF(n)+"]",x="["+(u?"":"^")+UF(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,l,d-r,!0]};var Nn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var VZ=new Set(["!","?","+","*","@"]),VF=t=>VZ.has(t),BZ="(?!(?:^|/)\\.\\.?(?:$|/))",ty="(?!\\.)",WZ=new Set(["[","."]),$Z=new Set(["..","."]),jZ=new Set("().*{}+?[]^$\\!"),qZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),ub="[^/]",BF=ub+"*?",WF=ub+"+?",cc=class t{type;#e;#t;#o=!1;#n=[];#s;#S;#l;#u=!1;#a;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#s=r,this.#e=this.#s?this.#s.#e:this,this.#a=this.#e===this?n:this.#e.#a,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#u&&this.#l.push(this),this.#S=this.#s?this.#s.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#u)return this;this.toString(),this.#u=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#s;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#s}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#s===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#u&&this.#s?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#s?.isStart())return!1;if(this.#S===0)return!0;let e=this.#s;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#s?.type==="!")return!0;if(!this.#s?.isEnd())return!1;if(!this.type)return this.#s?.isEnd();let e=this.#s?this.#s.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,a=!1,l=-1,p=!1;if(r.type===null){let x=n,v="";for(;x<e.length;){let b=e.charAt(x++);if(o||b==="\\"){o=!o,v+=b;continue}if(a){x===l+1?(b==="^"||b==="!")&&(p=!0):b==="]"&&!(x===l+2&&p)&&(a=!1),v+=b;continue}else if(b==="["){a=!0,l=x,p=!1,v+=b;continue}if(!i.noext&&VF(b)&&e.charAt(x)==="("){r.push(v),v="";let F=new t(b,r);x=t.#y(e,F,x,i),r.push(F);continue}v+=b}return r.push(v),x}let u=n+1,d=new t(null,r),m=[],g="";for(;u<e.length;){let x=e.charAt(u++);if(o||x==="\\"){o=!o,g+=x;continue}if(a){u===l+1?(x==="^"||x==="!")&&(p=!0):x==="]"&&!(u===l+2&&p)&&(a=!1),g+=x;continue}else if(x==="["){a=!0,l=u,p=!1,g+=x;continue}if(VF(x)&&e.charAt(u)==="("){d.push(g),g="";let v=new t(x,d);d.push(v),u=t.#y(e,v,u,i);continue}if(x==="|"){d.push(g),g="",m.push(d),d=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),d.push(g),g="",r.push(...m,d),u;g+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#a.nocase&&!this.#a.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#a.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#a}toRegExpSource(e){let r=e??!!this.#a.dot;if(this.#e===this&&this.#g(),!this.type){let p=this.isStart()&&this.isEnd(),u=this.#n.map(x=>{let[v,b,F,M]=typeof x=="string"?t.#f(x,this.#t,p):x.toRegExpSource(e);return this.#t=this.#t||F,this.#o=this.#o||M,v}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&$Z.has(this.#n[0]))){let v=WZ,b=r&&v.has(u.charAt(0))||u.startsWith("\\.")&&v.has(u.charAt(2))||u.startsWith("\\.\\.")&&v.has(u.charAt(4)),F=!r&&!e&&v.has(u.charAt(0));d=b?BZ:F?ty:""}let m="";return this.isEnd()&&this.#e.#u&&this.#s?.type==="!"&&(m="(?:$|\\/)"),[d+u+m,Nn(u),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#d(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let p=this.toString();return this.#n=[p],this.type=null,this.#t=void 0,[p,Nn(this.toString()),!1,!1]}let a=!n||e||r||!ty?"":this.#d(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?ty:"")+WF;else{let p=this.type==="!"?"))"+(this.isStart()&&!r&&!e?ty:"")+BF+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;l=i+o+p}return[l,Nn(o),this.#t=!!this.#t,this.#o]}#d(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#o=this.#o||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",a=!1;for(let l=0;l<e.length;l++){let p=e.charAt(l);if(i){i=!1,o+=(jZ.has(p)?"\\":"")+p;continue}if(p==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(p==="["){let[u,d,m,g]=HF(e,l);if(m){o+=u,a=a||d,l+=m-1,r=r||g;continue}}if(p==="*"){n&&e==="*"?o+=WF:o+=BF,r=!0;continue}if(p==="?"){o+=ub,r=!0;continue}o+=qZ(p)}return[o,Nn(e),!!r,a]}};var lc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var ar=(t,e,r={})=>(Tp(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Gr(e,r).match(t)),zZ=/^\*+([^+@!?\*\[\(]*)$/,GZ=t=>e=>!e.startsWith(".")&&e.endsWith(t),KZ=t=>e=>e.endsWith(t),QZ=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),ZZ=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),YZ=/^\*+\.\*+$/,XZ=t=>!t.startsWith(".")&&t.includes("."),JZ=t=>t!=="."&&t!==".."&&t.includes("."),eY=/^\.\*+$/,tY=t=>t!=="."&&t!==".."&&t.startsWith("."),rY=/^\*+$/,nY=t=>t.length!==0&&!t.startsWith("."),iY=t=>t.length!==0&&t!=="."&&t!=="..",oY=/^\?+([^+@!?\*\[\(]*)?$/,sY=([t,e=""])=>{let r=zF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},aY=([t,e=""])=>{let r=GF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},cY=([t,e=""])=>{let r=GF([t]);return e?n=>r(n)&&n.endsWith(e):r},lY=([t,e=""])=>{let r=zF([t]);return e?n=>r(n)&&n.endsWith(e):r},zF=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},GF=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},KF=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",$F={win32:{sep:"\\"},posix:{sep:"/"}},pY=KF==="win32"?$F.win32.sep:$F.posix.sep;ar.sep=pY;var Ut=Symbol("globstar **");ar.GLOBSTAR=Ut;var uY="[^/]",fY=uY+"*?",dY="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",mY="(?:(?!(?:\\/|^)\\.).)*?",hY=(t,e={})=>r=>ar(r,t,e);ar.filter=hY;var yn=(t,e={})=>Object.assign({},t,e),gY=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return ar;let e=ar;return Object.assign((n,i,o={})=>e(n,i,yn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,yn(t,o))}static defaults(i){return e.defaults(yn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,a={}){super(i,o,yn(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,yn(t,o))}},unescape:(n,i={})=>e.unescape(n,yn(t,i)),escape:(n,i={})=>e.escape(n,yn(t,i)),filter:(n,i={})=>e.filter(n,yn(t,i)),defaults:n=>e.defaults(yn(t,n)),makeRe:(n,i={})=>e.makeRe(n,yn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,yn(t,i)),match:(n,i,o={})=>e.match(n,i,yn(t,o)),sep:e.sep,GLOBSTAR:Ut})};ar.defaults=gY;var QF=(t,e={})=>(Tp(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,qF.default)(t));ar.braceExpand=QF;var yY=(t,e={})=>new Gr(t,e).makeRe();ar.makeRe=yY;var xY=(t,e,r={})=>{let n=new Gr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};ar.match=xY;var jF=/[?*]|[+@!]\(.*?\)|\[|\]/,TY=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Gr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){Tp(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||KF,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let p=o[0]===""&&o[1]===""&&(o[2]==="?"||!jF.test(o[2]))&&!jF.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(p)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(p=>this.parse(p))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let l=n[i+1],p=n[i+2],u=n[i+3];if(l!==".."||!p||p==="."||p===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let l=n[a];a===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let p=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...p),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let b=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),F=!b&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),M=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),U=!M&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),K=F?3:b?0:void 0,ne=U?3:M?0:void 0;if(typeof K=="number"&&typeof ne=="number"){let[ie,ae]=[e[K],r[ne]];ie.toLowerCase()===ae.toLowerCase()&&(r[ne]=ie,ne>K?r=r.slice(ne):K>ne&&(e=e.slice(K)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,l=0,p=e.length,u=r.length;a<p&&l<u;a++,l++){this.debug("matchOne loop");var d=r[l],m=e[a];if(this.debug(r,d,m),d===!1)return!1;if(d===Ut){this.debug("GLOBSTAR",[r,d,m]);var g=a,x=l+1;if(x===u){for(this.debug("** at the end");a<p;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;g<p;){var v=e[g];if(this.debug(`
globstar while`,e,g,r,x,v),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,p,v),!0;if(v==="."||v===".."||!i.dot&&v.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===p))}let b;if(typeof d=="string"?(b=m===d,this.debug("string match",d,m,b)):(b=d.test(m),this.debug("pattern match",d,m,b)),!b)return!1}if(a===p&&l===u)return!0;if(a===p)return n;if(l===u)return a===p-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return QF(this.pattern,this.options)}parse(e){Tp(e);let r=this.options;if(e==="**")return Ut;if(e==="")return"";let n,i=null;(n=e.match(rY))?i=r.dot?iY:nY:(n=e.match(zZ))?i=(r.nocase?r.dot?ZZ:QZ:r.dot?KZ:GZ)(n[1]):(n=e.match(oY))?i=(r.nocase?r.dot?aY:sY:r.dot?cY:lY)(n):(n=e.match(YZ))?i=r.dot?JZ:XZ:(n=e.match(eY))&&(i=tY);let o=cc.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?fY:r.dot?dY:mY,i=new Set(r.nocase?["i"]:[]),o=e.map(p=>{let u=p.map(d=>{if(d instanceof RegExp)for(let m of d.flags.split(""))i.add(m);return typeof d=="string"?TY(d):d===Ut?Ut:d._src});return u.forEach((d,m)=>{let g=u[m+1],x=u[m-1];d!==Ut||x===Ut||(x===void 0?g!==void 0&&g!==Ut?u[m+1]="(?:\\/|"+n+"\\/)?"+g:u[m]=n:g===void 0?u[m-1]=x+"(?:\\/|"+n+")?":g!==Ut&&(u[m-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,u[m+1]=Ut))}),u.filter(d=>d!==Ut).join("/")}).join("|"),[a,l]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let l=i.length-2;!a&&l>=0;l--)a=i[l];for(let l=0;l<o.length;l++){let p=o[l],u=i;if(n.matchBase&&p.length===1&&(u=[a]),this.matchOne(u,p,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return ar.defaults(e).Minimatch}};ar.AST=cc;ar.Minimatch=Gr;ar.escape=lc;ar.unescape=Nn;var T1=require("node:url");var pc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,YF=new Set,fb=typeof process=="object"&&process?process:{},XF=(t,e,r,n)=>{typeof fb.emitWarning=="function"?fb.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},ry=globalThis.AbortController,ZF=globalThis.AbortSignal;if(typeof ry>"u"){ZF=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},ry=class{constructor(){e()}signal=new ZF;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=fb.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,XF("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var SY=t=>!YF.has(t),WUe=Symbol("type"),Ro=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),JF=t=>Ro(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?uc:null:null,uc=class extends Array{constructor(e){super(e),this.fill(0)}},db=class t{heap;length;static#e=!1;static create(e){let r=JF(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},vp=class t{#e;#t;#o;#n;#s;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#u;#a;#c;#i;#g;#y;#d;#f;#w;#h;#_;#E;#T;#v;#b;#m;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#T,sizes:e.#_,keyMap:e.#a,keyList:e.#c,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#p(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#V(r),indexes:r=>e.#k(r),rindexes:r=>e.#P(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#u}get size(){return this.#l}get fetchMethod(){return this.#s}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:p,dispose:u,disposeAfter:d,noDisposeOnSet:m,noUpdateTTL:g,maxSize:x=0,maxEntrySize:v=0,sizeCalculation:b,fetchMethod:F,memoMethod:M,noDeleteOnFetchRejection:U,noDeleteOnStaleGet:K,allowStaleOnFetchRejection:ne,allowStaleOnFetchAbort:ie,ignoreFetchAbort:ae}=e;if(r!==0&&!Ro(r))throw new TypeError("max option must be a nonnegative integer");let it=r?JF(r):Array;if(!it)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=v||this.#t,this.sizeCalculation=b,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(M!==void 0&&typeof M!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=M,F!==void 0&&typeof F!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#s=F,this.#b=!!F,this.#a=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new it(r),this.#y=new it(r),this.#d=0,this.#f=0,this.#w=db.create(r),this.#l=0,this.#u=0,typeof u=="function"&&(this.#o=u),typeof d=="function"?(this.#n=d,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#m=!!this.#n,this.noDisposeOnSet=!!m,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!U,this.allowStaleOnFetchRejection=!!ne,this.allowStaleOnFetchAbort=!!ie,this.ignoreFetchAbort=!!ae,this.maxEntrySize!==0){if(this.#t!==0&&!Ro(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Ro(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#A()}if(this.allowStale=!!p,this.noDeleteOnStaleGet=!!K,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=Ro(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Ro(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let It="LRU_CACHE_UNBOUNDED";SY(It)&&(YF.add(It),XF("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",It,t))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#M(){let e=new uc(this.#e),r=new uc(this.#e);this.#T=e,this.#E=r,this.#I=(o,a,l=pc.now())=>{if(r[o]=a!==0?l:0,e[o]=a,a!==0&&this.ttlAutopurge){let p=setTimeout(()=>{this.#x(o)&&this.#D(this.#c[o],"expire")},a+1);p.unref&&p.unref()}},this.#R=o=>{r[o]=e[o]!==0?pc.now():0},this.#r=(o,a)=>{if(e[a]){let l=e[a],p=r[a];if(!l||!p)return;o.ttl=l,o.start=p,o.now=n||i();let u=o.now-p;o.remainingTTL=l-u}};let n=0,i=()=>{let o=pc.now();if(this.ttlResolution>0){n=o;let a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref()}return o};this.getRemainingTTL=o=>{let a=this.#a.get(o);if(a===void 0)return 0;let l=e[a],p=r[a];if(!l||!p)return 1/0;let u=(n||i())-p;return l-u},this.#x=o=>{let a=r[o],l=e[o];return!!l&&!!a&&(n||i())-a>l}}#R=()=>{};#r=()=>{};#I=()=>{};#x=()=>!1;#A(){let e=new uc(this.#e);this.#u=0,this.#_=e,this.#F=r=>{this.#u-=e[r],e[r]=0},this.#O=(r,n,i,o)=>{if(this.#p(n))return 0;if(!Ro(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Ro(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#u>o;)this.#L(!0)}this.#u+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#u)}}#F=e=>{};#C=(e,r,n)=>{};#O=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#d));)r=this.#y[r]}*#P({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#d;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#N(e){return e!==void 0&&this.#a.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#P())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#P()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#P())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#P()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#P({allowStale:!0}))this.#x(r)&&(this.#D(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#a.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#p(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#T&&this.#E){let a=this.#T[r],l=this.#E[r];if(a&&l){let p=a-(pc.now()-l);o.ttl=p,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#p(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let a={value:o};if(this.#T&&this.#E){a.ttl=this.#T[r];let l=pc.now()-this.#E[r];a.start=Math.floor(Date.now()-l)}this.#_&&(a.size=this.#_[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=pc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:p}=n,{noUpdateTTL:u=this.noUpdateTTL}=n,d=this.#O(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return p&&(p.set="miss",p.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let m=this.#l===0?void 0:this.#a.get(e);if(m===void 0)m=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#c[m]=e,this.#i[m]=r,this.#a.set(e,m),this.#g[this.#f]=m,this.#y[m]=this.#f,this.#f=m,this.#l++,this.#C(m,d,p),p&&(p.set="add"),u=!1;else{this.#V(m);let g=this.#i[m];if(r!==g){if(this.#b&&this.#p(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!a&&(this.#v&&this.#o?.(x,e,"set"),this.#m&&this.#h?.push([x,e,"set"]))}else a||(this.#v&&this.#o?.(g,e,"set"),this.#m&&this.#h?.push([g,e,"set"]));if(this.#F(m),this.#C(m,d,p),this.#i[m]=r,p){p.set="replace";let x=g&&this.#p(g)?g.__staleWhileFetching:g;x!==void 0&&(p.oldValue=x)}}else p&&(p.set="update")}if(i!==0&&!this.#T&&this.#M(),this.#T&&(u||this.#I(m,i,o),p&&this.#r(p,m)),!a&&this.#m&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#d];if(this.#L(!0),this.#p(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#m&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#d,n=this.#c[r],i=this.#i[r];return this.#b&&this.#p(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(i,n,"evict"),this.#m&&this.#h?.push([i,n,"evict"])),this.#F(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#d=this.#f=0,this.#w.length=0):this.#d=this.#g[r],this.#a.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#a.get(e);if(o!==void 0){let a=this.#i[o];if(this.#p(a)&&a.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#a.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#p(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#p(o))return o;let a=new ry,{signal:l}=n;l?.addEventListener("abort",()=>a.abort(l.reason),{signal:a.signal});let p={signal:a.signal,options:n,context:i},u=(b,F=!1)=>{let{aborted:M}=a.signal,U=n.ignoreFetchAbort&&b!==void 0;if(n.status&&(M&&!F?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,U&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),M&&!U&&!F)return m(a.signal.reason);let K=x;return this.#i[r]===x&&(b===void 0?K.__staleWhileFetching?this.#i[r]=K.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,b,p.options))),b},d=b=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=b),m(b)),m=b=>{let{aborted:F}=a.signal,M=F&&n.allowStaleOnFetchAbort,U=M||n.allowStaleOnFetchRejection,K=U||n.noDeleteOnFetchRejection,ne=x;if(this.#i[r]===x&&(!K||ne.__staleWhileFetching===void 0?this.#D(e,"fetch"):M||(this.#i[r]=ne.__staleWhileFetching)),U)return n.status&&ne.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),ne.__staleWhileFetching;if(ne.__returned===ne)throw b},g=(b,F)=>{let M=this.#s?.(e,o,p);M&&M instanceof Promise&&M.then(U=>b(U===void 0?void 0:U),F),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(b(void 0),n.allowStaleOnFetchAbort&&(b=U=>u(U,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(u,d),v=Object.assign(x,{__abortController:a,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,v,{...p.options,status:void 0}),r=this.#a.get(e)):this.#i[r]=v,v}#p(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof ry}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:p=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:m=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:v=this.allowStaleOnFetchAbort,context:b,forceRefresh:F=!1,status:M,signal:U}=r;if(!this.#b)return M&&(M.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:M});let K={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:l,size:p,sizeCalculation:u,noUpdateTTL:d,noDeleteOnFetchRejection:m,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:v,ignoreFetchAbort:x,status:M,signal:U},ne=this.#a.get(e);if(ne===void 0){M&&(M.fetch="miss");let ie=this.#U(e,ne,K,b);return ie.__returned=ie}else{let ie=this.#i[ne];if(this.#p(ie)){let N=n&&ie.__staleWhileFetching!==void 0;return M&&(M.fetch="inflight",N&&(M.returnedStale=!0)),N?ie.__staleWhileFetching:ie.__returned=ie}let ae=this.#x(ne);if(!F&&!ae)return M&&(M.fetch="hit"),this.#V(ne),i&&this.#R(ne),M&&this.#r(M,ne),ie;let it=this.#U(e,ne,K,b),ct=it.__staleWhileFetching!==void 0&&n;return M&&(M.fetch=ae?"stale":"refresh",ct&&ae&&(M.returnedStale=!0)),ct?it.__staleWhileFetching:it.__returned=it}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...a}=r,l=this.get(e,a);if(!o&&l!==void 0)return l;let p=n(e,l,{options:a,context:i});return this.set(e,p,a),p}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:a}=r,l=this.#a.get(e);if(l!==void 0){let p=this.#i[l],u=this.#p(p);return a&&this.#r(a,l),this.#x(l)?(a&&(a.get="stale"),u?(a&&n&&p.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?p.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),a&&n&&(a.returnedStale=!0),n?p:void 0)):(a&&(a.get="hit"),u?p.__staleWhileFetching:(this.#V(l),i&&this.#R(l),p))}else a&&(a.get="miss")}#H(e,r){this.#y[r]=e,this.#g[e]=r}#V(e){e!==this.#f&&(e===this.#d?this.#d=this.#g[e]:this.#H(this.#y[e],this.#g[e]),this.#H(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#a.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#B(r);else{this.#F(i);let o=this.#i[i];if(this.#p(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(o,e,r),this.#m&&this.#h?.push([o,e,r])),this.#a.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#d)this.#d=this.#g[i];else{let a=this.#y[i];this.#g[a]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#m&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#B("delete")}#B(e){for(let r of this.#P({allowStale:!0})){let n=this.#i[r];if(this.#p(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#m&&this.#h?.push([n,i,e])}}if(this.#a.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#T&&this.#E&&(this.#T.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#d=0,this.#f=0,this.#w.length=0,this.#u=0,this.#l=0,this.#m&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var mc=require("node:path"),l1=require("node:url"),si=require("fs"),AY=hr(require("node:fs"),1),Mo=require("node:fs/promises");var ly=require("node:events"),Sb=hr(require("node:stream"),1),i1=require("node:string_decoder"),e1=typeof process=="object"&&process?process:{stdout:null,stderr:null},vY=t=>!!t&&typeof t=="object"&&(t instanceof Po||t instanceof Sb.default||bY(t)||wY(t)),bY=t=>!!t&&typeof t=="object"&&t instanceof ly.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==Sb.default.Writable.prototype.pipe,wY=t=>!!t&&typeof t=="object"&&t instanceof ly.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Oi=Symbol("EOF"),Ni=Symbol("maybeEmitEnd"),ko=Symbol("emittedEnd"),ny=Symbol("emittingEnd"),bp=Symbol("emittedError"),iy=Symbol("closed"),t1=Symbol("read"),oy=Symbol("flush"),r1=Symbol("flushChunk"),Ln=Symbol("encoding"),fc=Symbol("decoder"),Mt=Symbol("flowing"),wp=Symbol("paused"),dc=Symbol("resume"),At=Symbol("buffer"),cr=Symbol("pipes"),Dt=Symbol("bufferLength"),mb=Symbol("bufferPush"),sy=Symbol("bufferShift"),Kt=Symbol("objectMode"),yt=Symbol("destroyed"),hb=Symbol("error"),gb=Symbol("emitData"),n1=Symbol("emitEnd"),yb=Symbol("emitEnd2"),ii=Symbol("async"),xb=Symbol("abort"),ay=Symbol("aborted"),_p=Symbol("signal"),Es=Symbol("dataListeners"),Kr=Symbol("discarded"),Ep=t=>Promise.resolve().then(t),_Y=t=>t(),EY=t=>t==="end"||t==="finish"||t==="prefinish",RY=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,kY=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),cy=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[dc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Tb=class extends cy{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},PY=t=>!!t.objectMode,MY=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Po=class extends ly.EventEmitter{[Mt]=!1;[wp]=!1;[cr]=[];[At]=[];[Kt];[Ln];[ii];[fc];[Oi]=!1;[ko]=!1;[ny]=!1;[iy]=!1;[bp]=null;[Dt]=0;[yt]=!1;[_p];[ay]=!1;[Es]=0;[Kr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");PY(r)?(this[Kt]=!0,this[Ln]=null):MY(r)?(this[Ln]=r.encoding,this[Kt]=!1):(this[Kt]=!1,this[Ln]=null),this[ii]=!!r.async,this[fc]=this[Ln]?new i1.StringDecoder(this[Ln]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[At]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[cr]});let{signal:n}=r;n&&(this[_p]=n,n.aborted?this[xb]():n.addEventListener("abort",()=>this[xb]()))}get bufferLength(){return this[Dt]}get encoding(){return this[Ln]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Kt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ii]}set async(e){this[ii]=this[ii]||!!e}[xb](){this[ay]=!0,this.emit("abort",this[_p]?.reason),this.destroy(this[_p]?.reason)}get aborted(){return this[ay]}set aborted(e){}write(e,r,n){if(this[ay])return!1;if(this[Oi])throw new Error("write after end");if(this[yt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ii]?Ep:_Y;if(!this[Kt]&&!Buffer.isBuffer(e)){if(kY(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(RY(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Kt]?(this[Mt]&&this[Dt]!==0&&this[oy](!0),this[Mt]?this.emit("data",e):this[mb](e),this[Dt]!==0&&this.emit("readable"),n&&i(n),this[Mt]):e.length?(typeof e=="string"&&!(r===this[Ln]&&!this[fc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Ln]&&(e=this[fc].write(e)),this[Mt]&&this[Dt]!==0&&this[oy](!0),this[Mt]?this.emit("data",e):this[mb](e),this[Dt]!==0&&this.emit("readable"),n&&i(n),this[Mt]):(this[Dt]!==0&&this.emit("readable"),n&&i(n),this[Mt])}read(e){if(this[yt])return null;if(this[Kr]=!1,this[Dt]===0||e===0||e&&e>this[Dt])return this[Ni](),null;this[Kt]&&(e=null),this[At].length>1&&!this[Kt]&&(this[At]=[this[Ln]?this[At].join(""):Buffer.concat(this[At],this[Dt])]);let r=this[t1](e||null,this[At][0]);return this[Ni](),r}[t1](e,r){if(this[Kt])this[sy]();else{let n=r;e===n.length||e===null?this[sy]():typeof n=="string"?(this[At][0]=n.slice(e),r=n.slice(0,e),this[Dt]-=e):(this[At][0]=n.subarray(e),r=n.subarray(0,e),this[Dt]-=e)}return this.emit("data",r),!this[At].length&&!this[Oi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Oi]=!0,this.writable=!1,(this[Mt]||!this[wp])&&this[Ni](),this}[dc](){this[yt]||(!this[Es]&&!this[cr].length&&(this[Kr]=!0),this[wp]=!1,this[Mt]=!0,this.emit("resume"),this[At].length?this[oy]():this[Oi]?this[Ni]():this.emit("drain"))}resume(){return this[dc]()}pause(){this[Mt]=!1,this[wp]=!0,this[Kr]=!1}get destroyed(){return this[yt]}get flowing(){return this[Mt]}get paused(){return this[wp]}[mb](e){this[Kt]?this[Dt]+=1:this[Dt]+=e.length,this[At].push(e)}[sy](){return this[Kt]?this[Dt]-=1:this[Dt]-=this[At][0].length,this[At].shift()}[oy](e=!1){do;while(this[r1](this[sy]())&&this[At].length);!e&&!this[At].length&&!this[Oi]&&this.emit("drain")}[r1](e){return this.emit("data",e),this[Mt]}pipe(e,r){if(this[yt])return e;this[Kr]=!1;let n=this[ko];return r=r||{},e===e1.stdout||e===e1.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[cr].push(r.proxyErrors?new Tb(this,e,r):new cy(this,e,r)),this[ii]?Ep(()=>this[dc]()):this[dc]()),e}unpipe(e){let r=this[cr].find(n=>n.dest===e);r&&(this[cr].length===1?(this[Mt]&&this[Es]===0&&(this[Mt]=!1),this[cr]=[]):this[cr].splice(this[cr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Kr]=!1,this[Es]++,!this[cr].length&&!this[Mt]&&this[dc]();else if(e==="readable"&&this[Dt]!==0)super.emit("readable");else if(EY(e)&&this[ko])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[bp]){let i=r;this[ii]?Ep(()=>i.call(this,this[bp])):i.call(this,this[bp])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Es]=this.listeners("data").length,this[Es]===0&&!this[Kr]&&!this[cr].length&&(this[Mt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Es]=0,!this[Kr]&&!this[cr].length&&(this[Mt]=!1)),r}get emittedEnd(){return this[ko]}[Ni](){!this[ny]&&!this[ko]&&!this[yt]&&this[At].length===0&&this[Oi]&&(this[ny]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[iy]&&this.emit("close"),this[ny]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==yt&&this[yt])return!1;if(e==="data")return!this[Kt]&&!n?!1:this[ii]?(Ep(()=>this[gb](n)),!0):this[gb](n);if(e==="end")return this[n1]();if(e==="close"){if(this[iy]=!0,!this[ko]&&!this[yt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[bp]=n,super.emit(hb,n);let o=!this[_p]||this.listeners("error").length?super.emit("error",n):!1;return this[Ni](),o}else if(e==="resume"){let o=super.emit("resume");return this[Ni](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Ni](),i}[gb](e){for(let n of this[cr])n.dest.write(e)===!1&&this.pause();let r=this[Kr]?!1:super.emit("data",e);return this[Ni](),r}[n1](){return this[ko]?!1:(this[ko]=!0,this.readable=!1,this[ii]?(Ep(()=>this[yb]()),!0):this[yb]())}[yb](){if(this[fc]){let r=this[fc].end();if(r){for(let n of this[cr])n.dest.write(r);this[Kr]||super.emit("data",r)}}for(let r of this[cr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Kt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Kt]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[Kt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Ln]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(yt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Kr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Oi])return r();let o,a,l=m=>{this.off("data",p),this.off("end",u),this.off(yt,d),r(),a(m)},p=m=>{this.off("error",l),this.off("end",u),this.off(yt,d),this.pause(),o({value:m,done:!!this[Oi]})},u=()=>{this.off("error",l),this.off("data",p),this.off(yt,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((m,g)=>{a=g,o=m,this.once(yt,d),this.once("error",l),this.once("end",u),this.once("data",p)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Kr]=!1;let e=!1,r=()=>(this.pause(),this.off(hb,r),this.off(yt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(hb,r),this.once(yt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[yt])return e?this.emit("error",e):this.emit(yt),this;this[yt]=!0,this[Kr]=!0,this[At].length=0,this[Dt]=0;let r=this;return typeof r.close=="function"&&!this[iy]&&r.close(),e?this.emit("error",e):this.emit(yt),this}static get isStream(){return vY}};var DY=si.realpathSync.native,kp={lstatSync:si.lstatSync,readdir:si.readdir,readdirSync:si.readdirSync,readlinkSync:si.readlinkSync,realpathSync:DY,promises:{lstat:Mo.lstat,readdir:Mo.readdir,readlink:Mo.readlink,realpath:Mo.realpath}},p1=t=>!t||t===kp||t===AY?kp:{...kp,...t,promises:{...kp.promises,...t.promises||{}}},u1=/^\\\\\?\\([a-z]:)\\?$/i,IY=t=>t.replace(/\//g,"\\").replace(u1,"$1\\"),FY=/[\\\/]/,Tn=0,f1=1,d1=2,oi=4,m1=6,h1=8,Rs=10,g1=12,xn=15,Rp=~xn,vb=16,o1=32,Pp=64,Un=128,py=256,fy=512,s1=Pp|Un|fy,CY=1023,bb=t=>t.isFile()?h1:t.isDirectory()?oi:t.isSymbolicLink()?Rs:t.isCharacterDevice()?d1:t.isBlockDevice()?m1:t.isSocket()?g1:t.isFIFO()?f1:Tn,a1=new Map,Mp=t=>{let e=a1.get(t);if(e)return e;let r=t.normalize("NFKD");return a1.set(t,r),r},c1=new Map,uy=t=>{let e=c1.get(t);if(e)return e;let r=Mp(t.toLowerCase());return c1.set(t,r),r},dy=class extends vp{constructor(){super({max:256})}},wb=class extends vp{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},y1=Symbol("PathScurry setAsCwd"),Qt=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#s;get uid(){return this.#s}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#u;get blksize(){return this.#u}#a;get ino(){return this.#a}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#T;#v;#b;#m;#M;#R;#r;#I;#x;#A;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=Tn,n,i,o,a,l){this.name=e,this.#T=o?uy(e):Mp(e),this.#r=r&CY,this.nocase=o,this.roots=i,this.root=n||this,this.#I=a,this.#b=l.fullpath,this.#M=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=p1(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#I}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#I.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#I.set(this,r),this.#r&=~vb,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?uy(e):Mp(e);for(let p of n)if(p.#T===i)return p;let o=this.parent?this.sep:"",a=this.#b?this.#b+o+e:void 0,l=this.newChild(e,Tn,{...r,parent:this,fullpath:a});return this.canReaddir()||(l.#r|=Un),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#M!==void 0)return this.#M;let e=this.name,r=this.parent;if(!r)return this.#M=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#m!==void 0)return this.#m;if(this.sep==="/")return this.#m=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#m=`//?/${i}`:this.#m=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#m=n}isUnknown(){return(this.#r&xn)===Tn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&xn)===h1}isDirectory(){return(this.#r&xn)===oi}isCharacterDevice(){return(this.#r&xn)===d1}isBlockDevice(){return(this.#r&xn)===m1}isFIFO(){return(this.#r&xn)===f1}isSocket(){return(this.#r&xn)===g1}isSymbolicLink(){return(this.#r&Rs)===Rs}lstatCached(){return this.#r&o1?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#A}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#r&xn;return!(e!==Tn&&e!==Rs||this.#r&py||this.#r&Un)}calledReaddir(){return!!(this.#r&vb)}isENOENT(){return!!(this.#r&Un)}isNamed(e){return this.nocase?this.#T===uy(e):this.#T===Mp(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}#C(e){this.#r|=vb;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#O()}}#O(){this.#r&Un||(this.#r=(this.#r|Un)&Rp,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#O()}#P(){this.#r|=fy,this.#N()}#N(){if(this.#r&Pp)return;let e=this.#r;(e&xn)===oi&&(e&=Rp),this.#r=e|Pp,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#N():e==="ENOENT"?this.#O():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#N():e==="ENOENT"&&this.#O()}#p(e=""){let r=this.#r;r|=py,e==="ENOENT"&&(r|=Un),(e==="EINVAL"||e==="UNKNOWN")&&(r&=Rp),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#N()}#H(e,r){return this.#D(e,r)||this.#V(e,r)}#V(e,r){let n=bb(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&xn;return o!==oi&&o!==Rs&&o!==Tn&&(i.#r|=Pp),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?uy(e.name):Mp(e.name))===i.#T)return this.#B(e,i,n,r)}}#B(e,r,n,i){let o=r.name;return r.#r=r.#r&Rp|bb(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if(!(this.#r&Un))try{return this.#q(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if(!(this.#r&Un))try{return this.#q(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#q(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:a,blocks:l,ctime:p,ctimeMs:u,dev:d,gid:m,ino:g,mode:x,mtime:v,mtimeMs:b,nlink:F,rdev:M,size:U,uid:K}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#u=a,this.#i=l,this.#_=p,this.#d=u,this.#t=d,this.#S=m,this.#a=g,this.#o=x,this.#h=v,this.#y=b,this.#n=F,this.#l=M,this.#c=U,this.#s=K;let ne=bb(e);this.#r=this.#r&Rp|ne|o1,ne!==Tn&&ne!==oi&&ne!==Rs&&(this.#r|=Pp)}#$=[];#j=!1;#z(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,a)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of a)this.#H(l,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&s1)return!1;let e=xn&this.#r;return e===Tn||e===oi||e===Rs}shouldWalk(e,r){return(this.#r&oi)===oi&&!(this.#r&s1)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#A)return this.#A;if(!((fy|py|Un)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}realpathSync(){if(this.#A)return this.#A;if(!((fy|py|Un)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}[y1](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#M=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#M=void 0,i.#R=void 0,i=i.parent}},my=class t extends Qt{sep="\\";splitSep=FY;constructor(e,r=Tn,n,i,o,a,l){super(e,r,n,i,o,a,l)}newChild(e,r=Tn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return mc.win32.parse(e).root}getRoot(e){if(e=IY(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new hc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(u1,"$1\\"),e===r}},hy=class t extends Qt{splitSep="/";sep="/";constructor(e,r=Tn,n,i,o,a,l){super(e,r,n,i,o,a,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=Tn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},gy=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:a=kp}={}){this.#n=p1(a),(e instanceof URL||e.startsWith("file://"))&&(e=(0,l1.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new dy,this.#t=new dy,this.#o=new wb(o);let p=l.substring(this.rootPath.length).split(n);if(p.length===1&&!p[0]&&p.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let u=this.root,d=p.length-1,m=r.sep,g=this.rootPath,x=!1;for(let v of p){let b=d--;u=u.child(v,{relative:new Array(b).fill("..").join(m),relativePosix:new Array(b).fill("..").join("/"),fullpath:g+=(x?"":m)+v}),x=!0}this.cwd=u}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set,u=(m,g)=>{p.add(m),m.readdirCB((x,v)=>{if(x)return g(x);let b=v.length;if(!b)return g();let F=()=>{--b===0&&g()};for(let M of v)(!o||o(M))&&l.push(n?M:M.fullpath()),i&&M.isSymbolicLink()?M.realpath().then(U=>U?.isUnknown()?U.lstat():U).then(U=>U?.shouldWalk(p,a)?u(U,F):F()):M.shouldWalk(p,a)?u(M,F):F()},!0)},d=e;return new Promise((m,g)=>{u(d,x=>{if(x)return g(x);m(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set([e]);for(let u of p){let d=u.readdirSync();for(let m of d){(!o||o(m))&&l.push(n?m:m.fullpath());let g=m;if(m.isSymbolicLink()){if(!(i&&(g=m.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(p,a)&&p.add(g)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let p of l){let u=p.readdirSync();for(let d of u){(!o||o(d))&&(yield n?d:d.fullpath());let m=d;if(d.isSymbolicLink()){if(!(i&&(m=d.realpathSync())))continue;m.isUnknown()&&m.lstatSync()}m.shouldWalk(l,a)&&l.add(m)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=new Po({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let p=new Set,u=[e],d=0,m=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&l.end();return}d++,p.add(x);let v=(F,M,U=!1)=>{if(F)return l.emit("error",F);if(i&&!U){let K=[];for(let ne of M)ne.isSymbolicLink()&&K.push(ne.realpath().then(ie=>ie?.isUnknown()?ie.lstat():ie));if(K.length){Promise.all(K).then(()=>v(null,M,!0));return}}for(let K of M)K&&(!o||o(K))&&(l.write(n?K:K.fullpath())||(g=!0));d--;for(let K of M){let ne=K.realpathCached()||K;ne.shouldWalk(p,a)&&u.push(ne)}g&&!l.flowing?l.once("drain",m):b||m()},b=!0;x.readdirCB(v,!0),b=!1}};return m(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=new Po({objectMode:!0}),p=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let u=[e],d=0,m=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&l.end();return}d++,p.add(x);let v=x.readdirSync();for(let b of v)(!o||o(b))&&(l.write(n?b:b.fullpath())||(g=!0));d--;for(let b of v){let F=b;if(b.isSymbolicLink()){if(!(i&&(F=b.realpathSync())))continue;F.isUnknown()&&F.lstatSync()}F.shouldWalk(p,a)&&u.push(F)}}g&&!l.flowing&&l.once("drain",m)};return m(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[y1](r)}},hc=class extends gy{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,mc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return mc.win32.parse(e).root.toUpperCase()}newRoot(e){return new my(this.rootPath,oi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},gc=class extends gy{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,mc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new hy(this.rootPath,oi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},Ap=class extends gc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},GUe=process.platform==="win32"?my:hy,x1=process.platform==="win32"?hc:process.platform==="darwin"?Ap:gc;var OY=t=>t.length>=1,NY=t=>t.length>=1,yc=class t{#e;#t;#o;length;#n;#s;#S;#l;#u;#a;#c=!0;constructor(e,r,n,i){if(!OY(e))throw new TypeError("empty pattern list");if(!NY(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,a,l,p,...u]=this.#e,[d,m,g,x,...v]=this.#t;u[0]===""&&(u.shift(),v.shift());let b=[o,a,l,p,""].join("/"),F=[d,m,g,x,""].join("/");this.#e=[b,...u],this.#t=[F,...v],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...a]=this.#e,[l,...p]=this.#t;a[0]===""&&(a.shift(),p.shift());let u=o+"/",d=l+"/";this.#e=[u,...a],this.#t=[d,...p],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Ut}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#s!==void 0?this.#s:this.hasMore()?(this.#s=new t(this.#e,this.#t,this.#o+1,this.#n),this.#s.#a=this.#a,this.#s.#u=this.#u,this.#s.#l=this.#l,this.#s):this.#s=null}isUNC(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#a!==void 0?this.#a:this.#a=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var LY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",xc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:a=LY}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=a,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:a,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new Gr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let a=new yc(i,o,0,this.platform),l=new Gr(a.globString(),this.mmopts),p=o[o.length-1]==="**",u=a.isAbsolute();u?this.absolute.push(l):this.relative.push(l),p&&(u?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let a of this.relative)if(a.match(i)||a.match(o))return!0;for(let a of this.absolute)if(a.match(r)||a.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var _b=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},Eb=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},Rb=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},Dp=class t{hasWalkedCache;matches=new Eb;subwalks=new Rb;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new _b}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let a=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(a){i=i.resolve(a==="/"&&this.opts.root!==void 0?this.opts.root:a);let m=o.rest();if(m)o=m;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let p,u,d=!1;for(;typeof(p=o.pattern())=="string"&&(u=o.rest());)i=i.resolve(p),o=u,d=!0;if(p=o.pattern(),u=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof p=="string"){let m=p===".."||p===""||p===".";this.matches.add(i.resolve(p),l,m);continue}else if(p===Ut){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let m=u?.pattern(),g=u?.rest();if(!u||(m===""||m===".")&&!g)this.matches.add(i,l,m===""||m===".");else if(m===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,l,!0)}}else p instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let a of n){let l=a.isAbsolute(),p=a.pattern(),u=a.rest();p===Ut?i.testGlobstar(o,a,u,l):p instanceof RegExp?i.testRegExp(o,p,u,l):i.testString(o,p,u,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let a=e.parent||e;this.subwalks.add(a,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var UY=(t,e)=>typeof t=="string"?new xc([t],e):Array.isArray(t)?new xc(t,e):t,yy=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=UY(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#s(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let a=await o.realpath();a&&(a.isUnknown()||this.opts.stat)&&await a.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let a=o.realpathSync();a&&(a?.isUnknown()||this.opts.stat)&&a.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),a=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?a+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new Dp(this.opts),n)}walkCB2(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>a()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirCached();l.calledReaddir()?this.walkCB3(l,p,n,a):l.readdirCB((u,d)=>this.walkCB3(l,d,n,a),!0)}a()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>a()));for(let[l,p]of n.subwalks.entries())o++,this.walkCB2(l,p,n.child(),a);a()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new Dp(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirSync();this.walkCB3Sync(l,p,n,a)}a()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let[l,p]of n.subwalks.entries())o++,this.walkCB2Sync(l,p,n.child(),a);a()}},Ip=class extends yy{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},Fp=class extends yy{results;constructor(e,r,n){super(e,r,n),this.results=new Po({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var HY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Hn=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,T1.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(p=>p.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(p=>p.includes("/")?p:`./**/${p}`)}if(this.pattern=e,this.platform=r.platform||HY,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let p=r.platform==="win32"?hc:r.platform==="darwin"?Ap:r.platform?gc:x1;this.scurry=new p(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(p=>new Gr(p,i)),[a,l]=o.reduce((p,u)=>(p[0].push(...u.set),p[1].push(...u.globParts),p),[[],[]]);this.patterns=a.map((p,u)=>{let d=l[u];if(!d)throw new Error("invalid pattern object");return new yc(p,d,0,this.platform)})}async walk(){return[...await new Ip(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Ip(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Fp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Fp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var kb=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Gr(r,e).hasMagic())return!0;return!1};function xy(t,e={}){return new Hn(t,e).streamSync()}function v1(t,e={}){return new Hn(t,e).stream()}function b1(t,e={}){return new Hn(t,e).walkSync()}async function S1(t,e={}){return new Hn(t,e).walk()}function Ty(t,e={}){return new Hn(t,e).iterateSync()}function w1(t,e={}){return new Hn(t,e).iterate()}var VY=xy,BY=Object.assign(v1,{sync:xy}),WY=Ty,$Y=Object.assign(w1,{sync:Ty}),jY=Object.assign(b1,{stream:xy,iterate:Ty}),Pb=Object.assign(S1,{glob:S1,globSync:b1,sync:jY,globStream:v1,stream:BY,globStreamSync:xy,streamSync:VY,globIterate:w1,iterate:$Y,globIterateSync:Ty,iterateSync:WY,Glob:Hn,hasMagic:kb,escape:lc,unescape:Nn});Pb.glob=Pb;function _1(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var C1=Object.defineProperty,GY=Object.getOwnPropertyNames,C=(t,e)=>C1(t,"name",{value:e,configurable:!0}),KY=(t,e)=>function(){return e||(0,t[GY(t)[0]])((e={exports:{}}).exports,e),e.exports},qb=(t,e)=>{for(var r in e)C1(t,r,{get:e[r],enumerable:!0})},QY=KY({"(disabled):util"(){}}),Sy={};qb(Sy,{addChainableMethod:()=>nw,addLengthGuard:()=>Up,addMethod:()=>ew,addProperty:()=>Jb,checkError:()=>Qr,compareByInspect:()=>_y,eql:()=>aC,expectTypes:()=>W1,flag:()=>_e,getActual:()=>My,getMessage:()=>Kb,getName:()=>Dy,getOperator:()=>aw,getOwnEnumerableProperties:()=>sw,getOwnEnumerablePropertySymbols:()=>ow,getPathInfo:()=>Xb,hasProperty:()=>Ay,inspect:()=>Ue,isNaN:()=>Ey,isProxyEnabled:()=>Lp,isRegExp:()=>Ry,objDisplay:()=>ks,overwriteChainableMethod:()=>iw,overwriteMethod:()=>rw,overwriteProperty:()=>tw,proxify:()=>bc,test:()=>zb,transferFlags:()=>Vn,type:()=>Ye});var Qr={};qb(Qr,{compatibleConstructor:()=>L1,compatibleInstance:()=>N1,compatibleMessage:()=>U1,getConstructorName:()=>H1,getMessage:()=>V1});function Py(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}C(Py,"isErrorInstance");function O1(t){return Object.prototype.toString.call(t)==="[object RegExp]"}C(O1,"isRegExp");function N1(t,e){return Py(e)&&t===e}C(N1,"compatibleInstance");function L1(t,e){return Py(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}C(L1,"compatibleConstructor");function U1(t,e){let r=typeof t=="string"?t:t.message;return O1(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}C(U1,"compatibleMessage");function H1(t){let e=t;return Py(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}C(H1,"getConstructorName");function V1(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}C(V1,"getMessage");function _e(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}C(_e,"flag");function zb(t,e){var r=_e(t,"negate"),n=e[0];return r?!n:n}C(zb,"test");function Ye(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Ye,"type");var ZY="captureStackTrace"in Error,ze=class B1 extends Error{static{C(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,ZY&&Error.captureStackTrace(this,n||B1);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function W1(t,e){var r=_e(t,"message"),n=_e(t,"ssfi");r=r?r+": ":"",t=_e(t,"object"),e=e.map(function(a){return a.toLowerCase()}),e.sort();var i=e.map(function(a,l){var p=~["a","e","i","o","u"].indexOf(a.charAt(0))?"an":"a",u=e.length>1&&l===e.length-1?"or ":"";return u+p+" "+a}).join(", "),o=Ye(t).toLowerCase();if(!e.some(function(a){return o===a}))throw new ze(r+"object tested must be "+i+", but "+o+" given",void 0,n)}C(W1,"expectTypes");function My(t,e){return e.length>4?e[4]:t._obj}C(My,"getActual");var E1={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},YY={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},Sc="\u2026";function $1(t,e){let r=E1[YY[e]]||E1[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}C($1,"colorise");function j1({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:a=1/0,seen:l=[],truncate:p=1/0,stylize:u=String}={},d){let m={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(a),truncate:Number(p),seen:l,inspect:d,stylize:u};return m.colors&&(m.stylize=$1),m}C(j1,"normaliseOptions");function Li(t,e,r=Sc){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}C(Li,"truncate");function Sn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,a="",l="",p="";for(let u=0;u<i;u+=1){let d=u+1===t.length,m=u+2===t.length;p=`${Sc}(${t.length-u})`;let g=t[u];e.truncate=o-a.length-(d?0:n.length);let x=l||r(g,e)+(d?"":n),v=a.length+x.length,b=v+p.length;if(d&&v>o&&a.length+p.length<=o||!d&&!m&&b>o||(l=d?"":r(t[u+1],e)+(m?"":n),!d&&m&&b>o&&v+l.length>o))break;if(a+=x,!d&&!m&&v+l.length>=o){p=`${Sc}(${t.length-u-1})`;break}p=""}return`${a}${p}`}C(Sn,"inspectList");function q1(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}C(q1,"quoteComplexKey");function vc([t,e],r){return r.truncate-=2,typeof t=="string"?t=q1(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}C(vc,"inspectProperty");function z1(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=Sn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=Sn(r.map(o=>[o,t[o]]),e,vc)),`[ ${n}${i?`, ${i}`:""} ]`}C(z1,"inspectArray");var XY=C(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function ai(t,e){let r=XY(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let a=0;a<t.length;a++){let l=`${e.stylize(Li(t[a],e.truncate),"number")}${a===t.length-1?"":", "}`;if(e.truncate-=l.length,t[a]!==t.length&&e.truncate<=3){i+=`${Sc}(${t.length-t[a]+1})`;break}i+=l}let o="";return n.length&&(o=Sn(n.map(a=>[a,t[a]]),e,vc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}C(ai,"inspectTypedArray");function G1(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Li(n[1],e.truncate-i.length-1)}`,"date")}C(G1,"inspectDate");function Db(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Li(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}C(Db,"inspectFunction");function K1([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}C(K1,"inspectMapEntry");function Q1(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}C(Q1,"mapToEntries");function Z1(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${Sn(Q1(t),e,K1)} }`)}C(Z1,"inspectMap");var JY=Number.isNaN||(t=>t!==t);function Ib(t,e){return JY(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Li(String(t),e.truncate),"number")}C(Ib,"inspectNumber");function Fb(t,e){let r=Li(t.toString(),e.truncate-1);return r!==Sc&&(r+="n"),e.stylize(r,"bigint")}C(Fb,"inspectBigInt");function Y1(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Li(i,n)}/${r}`,"regexp")}C(Y1,"inspectRegExp");function X1(t){let e=[];return t.forEach(r=>{e.push(r)}),e}C(X1,"arrayFromSet");function J1(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${Sn(X1(t),e)} }`)}C(J1,"inspectSet");var R1=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),eX={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},tX=16,rX=4;function eC(t){return eX[t]||`\\u${`0000${t.charCodeAt(0).toString(tX)}`.slice(-rX)}`}C(eC,"escape");function Cb(t,e){return R1.test(t)&&(t=t.replace(R1,eC)),e.stylize(`'${Li(t,e.truncate-2)}'`,"string")}C(Cb,"inspectString");function Ob(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}C(Ob,"inspectSymbol");var tC=C(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(tC=C((n,i)=>{let[o,a]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(a,i)}}`},"getPromiseValue"))}catch{}var nX=tC;function Op(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=Sn(r.map(l=>[l,t[l]]),e,vc),o=Sn(n.map(l=>[l,t[l]]),e,vc);e.seen.pop();let a="";return i&&o&&(a=", "),`{ ${i}${a}${o} }`}C(Op,"inspectObject");var Mb=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function rC(t,e){let r="";return Mb&&Mb in t&&(r=t[Mb]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Op(t,e)}`}C(rC,"inspectClass");function nC(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${Sn(t,e)} ]`)}C(nC,"inspectArguments");var iX=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function iC(t,e){let r=Object.getOwnPropertyNames(t).filter(a=>iX.indexOf(a)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=Li(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=Sn(r.map(a=>[a,t[a]]),e,vc);return`${n}${i}${o?` { ${o} }`:""}`}C(iC,"inspectObject");function oC([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}C(oC,"inspectAttribute");function vy(t,e){return Sn(t,e,Gb,`
`)}C(vy,"inspectHTMLCollection");function Gb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),a=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=Sn(r.map(d=>[d,t.getAttribute(d)]),e,oC," ")),e.truncate-=l.length;let p=e.truncate,u=vy(t.children,e);return u&&u.length>p&&(u=`${Sc}(${t.children.length})`),`${i}${l}${o}${u}${a}`}C(Gb,"inspectHTML");var oX=typeof Symbol=="function"&&typeof Symbol.for=="function",Ab=oX?Symbol.for("chai/inspect"):"@@chai/inspect",Tc=!1;try{let t=QY();Tc=t.inspect?t.inspect.custom:!1}catch{Tc=!1}var k1=new WeakMap,P1={},M1={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:Ib,Number:Ib,bigint:Fb,BigInt:Fb,string:Cb,String:Cb,function:Db,Function:Db,symbol:Ob,Symbol:Ob,Array:z1,Date:G1,Map:Z1,Set:J1,RegExp:Y1,Promise:nX,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:nC,Int8Array:ai,Uint8Array:ai,Uint8ClampedArray:ai,Int16Array:ai,Uint16Array:ai,Int32Array:ai,Uint32Array:ai,Float32Array:ai,Float64Array:ai,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:iC,HTMLCollection:vy,NodeList:vy},sX=C((t,e,r)=>Ab in t&&typeof t[Ab]=="function"?t[Ab](e):Tc&&Tc in t&&typeof t[Tc]=="function"?t[Tc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&k1.has(t.constructor)?k1.get(t.constructor)(t,e):P1[r]?P1[r](t,e):"","inspectCustom"),aX=Object.prototype.toString;function by(t,e={}){let r=j1(e,by),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=aX.call(t).slice(8,-1)),i in M1)return M1[i](t,r);if(n&&t){let a=sX(t,r,i);if(a)return typeof a=="string"?a:by(a,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Op(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?Gb(t,r):"constructor"in t?t.constructor!==Object?rC(t,r):Op(t,r):t===Object(t)?Op(t,r):r.stylize(String(t),i)}C(by,"inspect");var Pr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Ue(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:Pr.truncateThreshold?Pr.truncateThreshold:1/0};return by(t,i)}C(Ue,"inspect");function ks(t){var e=Ue(t),r=Object.prototype.toString.call(t);if(Pr.truncateThreshold&&e.length>=Pr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}C(ks,"objDisplay");function Kb(t,e){var r=_e(t,"negate"),n=_e(t,"object"),i=e[3],o=My(t,e),a=r?e[2]:e[1],l=_e(t,"message");return typeof a=="function"&&(a=a()),a=a||"",a=a.replace(/#\{this\}/g,function(){return ks(n)}).replace(/#\{act\}/g,function(){return ks(o)}).replace(/#\{exp\}/g,function(){return ks(i)}),l?l+": "+a:a}C(Kb,"getMessage");function Vn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}C(Vn,"transferFlags");function Nb(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Nb,"type");function Qb(){this._key="chai/deep-eql__"+Math.random()+Date.now()}C(Qb,"FakeMap");Qb.prototype={get:C(function(e){return e[this._key]},"get"),set:C(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var sC=typeof WeakMap=="function"?WeakMap:Qb;function Lb(t,e,r){if(!r||Ps(t)||Ps(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}C(Lb,"memoizeCompare");function Cp(t,e,r,n){if(!(!r||Ps(t)||Ps(e))){var i=r.get(t);i?i.set(e,n):(i=new sC,i.set(e,n),r.set(t,i))}}C(Cp,"memoizeSet");var aC=Np;function Np(t,e,r){if(r&&r.comparator)return Ub(t,e,r);var n=Zb(t,e);return n!==null?n:Ub(t,e,r)}C(Np,"deepEqual");function Zb(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:Ps(t)||Ps(e)?!1:null}C(Zb,"simpleEqual");function Ub(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new sC;var n=r&&r.comparator,i=Lb(t,e,r.memoize);if(i!==null)return i;var o=Lb(e,t,r.memoize);if(o!==null)return o;if(n){var a=n(t,e);if(a===!1||a===!0)return Cp(t,e,r.memoize,a),a;var l=Zb(t,e);if(l!==null)return l}var p=Nb(t);if(p!==Nb(e))return Cp(t,e,r.memoize,!1),!1;Cp(t,e,r.memoize,!0);var u=cC(t,e,p,r);return Cp(t,e,r.memoize,u),u}C(Ub,"extensiveDeepEqual");function cC(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Np(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return Yb(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Ao(t,e,n);case"RegExp":return lC(t,e);case"Generator":return pC(t,e,n);case"DataView":return Ao(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return Ao(new Uint8Array(t),new Uint8Array(e),n);case"Set":return Hb(t,e,n);case"Map":return Hb(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return fC(t,e,n)}}C(cC,"extensiveDeepEqualByType");function lC(t,e){return t.toString()===e.toString()}C(lC,"regexpEqual");function Hb(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(C(function(a,l){n.push([a,l])},"gatherEntries")),e.forEach(C(function(a,l){i.push([a,l])},"gatherEntries")),Ao(n.sort(),i.sort(),r)}C(Hb,"entriesEqual");function Ao(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Np(t[i],e[i],r)===!1)return!1;return!0}C(Ao,"iterableEqual");function pC(t,e,r){return Ao(wy(t),wy(e),r)}C(pC,"generatorEqual");function uC(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}C(uC,"hasIteratorFunction");function Vb(t){if(uC(t))try{return wy(t[Symbol.iterator]())}catch{return[]}return[]}C(Vb,"getIteratorEntries");function wy(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}C(wy,"getGeneratorEntries");function Bb(t){var e=[];for(var r in t)e.push(r);return e}C(Bb,"getEnumerableKeys");function Wb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}C(Wb,"getEnumerableSymbols");function Yb(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Np(t[r[o]],e[r[o]],n)===!1)return!1;return!0}C(Yb,"keysEqual");function fC(t,e,r){var n=Bb(t),i=Bb(e),o=Wb(t),a=Wb(e);if(n=n.concat(o),i=i.concat(a),n.length&&n.length===i.length)return Ao($b(n).sort(),$b(i).sort())===!1?!1:Yb(t,e,n,r);var l=Vb(t),p=Vb(e);return l.length&&l.length===p.length?(l.sort(),p.sort(),Ao(l,p,r)):n.length===0&&l.length===0&&i.length===0&&p.length===0}C(fC,"objectEqual");function Ps(t){return t===null||typeof t!="object"}C(Ps,"isPrimitive");function $b(t){return t.map(C(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}C($b,"mapSymbols");function Ay(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}C(Ay,"hasProperty");function dC(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),a=null;return o?a={i:parseFloat(o[1])}:a={p:n.replace(/\\([.[\]])/g,"$1")},a})}C(dC,"parsePath");function jb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let a=e[o];n&&(typeof a.p>"u"?n=n[a.i]:n=n[a.p],o===r-1&&(i=n))}return i}C(jb,"internalGetPathValue");function Xb(t,e){let r=dC(e),n=r[r.length-1],i={parent:r.length>1?jb(t,r,r.length-1):t,name:n.p||n.i,value:jb(t,r)};return i.exists=Ay(i.parent,i.name),i}C(Xb,"getPathInfo");function _(t,e,r,n){return _e(this,"ssfi",r||_),_e(this,"lockSsfi",n),_e(this,"object",t),_e(this,"message",e),_e(this,"eql",Pr.deepEqual||aC),bc(this)}C(_,"Assertion");Object.defineProperty(_,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Pr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Pr.includeStack=t}});Object.defineProperty(_,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Pr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Pr.showDiff=t}});_.addProperty=function(t,e){Jb(this.prototype,t,e)};_.addMethod=function(t,e){ew(this.prototype,t,e)};_.addChainableMethod=function(t,e,r){nw(this.prototype,t,e,r)};_.overwriteProperty=function(t,e){tw(this.prototype,t,e)};_.overwriteMethod=function(t,e){rw(this.prototype,t,e)};_.overwriteChainableMethod=function(t,e,r){iw(this.prototype,t,e,r)};_.prototype.assert=function(t,e,r,n,i,o){var a=zb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),Pr.showDiff!==!0&&(o=!1),!a){e=Kb(this,arguments);var l=My(this,arguments),p={actual:l,expected:n,showDiff:o},u=aw(this,arguments);throw u&&(p.operator=u),new ze(e,p,Pr.includeStack?this.assert:_e(this,"ssfi"))}};Object.defineProperty(_.prototype,"_obj",{get:function(){return _e(this,"object")},set:function(t){_e(this,"object",t)}});function Lp(){return Pr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}C(Lp,"isProxyEnabled");function Jb(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:C(function n(){!Lp()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new _;return Vn(this,o),o},"propertyGetter"),configurable:!0})}C(Jb,"addProperty");var cX=Object.getOwnPropertyDescriptor(function(){},"length");function Up(t,e,r){return cX.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}C(Up,"addLengthGuard");function mC(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}C(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}C(mC,"getProperties");var A1=["__flags","__methods","_obj","assert"];function bc(t,e){return Lp()?new Proxy(t,{get:C(function r(n,i){if(typeof i=="string"&&Pr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,a=4;throw mC(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&A1.indexOf(l)===-1){var p=hC(i,l,a);p<a&&(o=l,a=p)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return A1.indexOf(i)===-1&&!_e(n,"lockSsfi")&&_e(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}C(bc,"proxify");function hC(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var a=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(a===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}C(hC,"stringDistanceCapped");function ew(t,e,r){var n=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new _;return Vn(this,o),o},"methodWrapper");Up(n,e,!1),t[e]=bc(n,e)}C(ew,"addMethod");function tw(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=C(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:C(function o(){!Lp()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).call(this);if(_e(this,"lockSsfi",a),l!==void 0)return l;var p=new _;return Vn(this,p),p},"overwritingPropertyGetter"),configurable:!0})}C(tw,"overwriteProperty");function rw(t,e,r){var n=t[e],i=C(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(_e(this,"lockSsfi",a),l!==void 0)return l;var p=new _;return Vn(this,p),p},"overwritingMethodWrapper");Up(o,e,!1),t[e]=bc(o,e)}C(rw,"overwriteMethod");var lX=typeof Object.setPrototypeOf=="function",D1=C(function(){},"testFn"),pX=Object.getOwnPropertyNames(D1).filter(function(t){var e=Object.getOwnPropertyDescriptor(D1,t);return typeof e!="object"?!0:!e.configurable}),uX=Function.prototype.call,fX=Function.prototype.apply;function nw(t,e,r,n){typeof n!="function"&&(n=C(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:C(function(){i.chainingBehavior.call(this);var a=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",a);var u=i.method.apply(this,arguments);if(u!==void 0)return u;var d=new _;return Vn(this,d),d},"chainableMethodWrapper");if(Up(a,e,!0),lX){var l=Object.create(this);l.call=uX,l.apply=fX,Object.setPrototypeOf(a,l)}else{var p=Object.getOwnPropertyNames(t);p.forEach(function(u){if(pX.indexOf(u)===-1){var d=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(a,u,d)}})}return Vn(this,a),bc(a)},"chainableMethodGetter"),configurable:!0})}C(nw,"addChainableMethod");function iw(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=C(function(){var p=n(o).call(this);if(p!==void 0)return p;var u=new _;return Vn(this,u),u},"overwritingChainableMethodGetter");var a=i.method;i.method=C(function(){var p=r(a).apply(this,arguments);if(p!==void 0)return p;var u=new _;return Vn(this,u),u},"overwritingChainableMethodWrapper")}C(iw,"overwriteChainableMethod");function _y(t,e){return Ue(t)<Ue(e)?-1:1}C(_y,"compareByInspect");function ow(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}C(ow,"getOwnEnumerablePropertySymbols");function sw(t){return Object.keys(t).concat(ow(t))}C(sw,"getOwnEnumerableProperties");function gC(t){return t!==t}C(gC,"_isNaN");var Ey=Number.isNaN||gC;function yC(t){var e=Ye(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}C(yC,"isObjectType");function aw(t,e){var r=_e(t,"operator"),n=_e(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var a=yC(i);return/\snot\s/.test(o)?a?"notDeepStrictEqual":"notStrictEqual":a?"deepStrictEqual":"strictEqual"}}C(aw,"getOperator");function Dy(t){return t.name}C(Dy,"getName");function Ry(t){return Object.prototype.toString.call(t)==="[object RegExp]"}C(Ry,"isRegExp");var{flag:A}=Sy;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){_.addProperty(t)});_.addProperty("not",function(){A(this,"negate",!0)});_.addProperty("deep",function(){A(this,"deep",!0)});_.addProperty("nested",function(){A(this,"nested",!0)});_.addProperty("own",function(){A(this,"own",!0)});_.addProperty("ordered",function(){A(this,"ordered",!0)});_.addProperty("any",function(){A(this,"any",!0),A(this,"all",!1)});_.addProperty("all",function(){A(this,"all",!0),A(this,"any",!1)});var I1={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function cw(t,e){e&&A(this,"message",e),t=t.toLowerCase();var r=A(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Ye(r).toLowerCase();I1.function.includes(t)?this.assert(I1[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}C(cw,"an");_.addChainableMethod("an",cw);_.addChainableMethod("a",cw);function xC(t,e){return Ey(t)&&Ey(e)||t===e}C(xC,"SameValueZero");function Hp(){A(this,"contains",!0)}C(Hp,"includeChainingBehavior");function Vp(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=Ye(r).toLowerCase(),i=A(this,"message"),o=A(this,"negate"),a=A(this,"ssfi"),l=A(this,"deep"),p=l?"deep ":"",u=l?A(this,"eql"):xC;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new ze(i+"unable to use .deep.include with WeakSet",void 0,a);d=r.has(t);break;case"map":r.forEach(function(v){d=d||u(v,t)});break;case"set":l?r.forEach(function(v){d=d||u(v,t)}):d=r.has(t);break;case"array":l?d=r.some(function(v){return u(v,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new ze(i+"the given combination of arguments ("+n+" and "+Ye(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Ye(t).toLowerCase(),void 0,a);var m=Object.keys(t),g=null,x=0;if(m.forEach(function(v){var b=new _(r);if(Vn(this,b,!0),A(b,"lockSsfi",!0),!o||m.length===1){b.property(v,t[v]);return}try{b.property(v,t[v])}catch(F){if(!Qr.compatibleConstructor(F,ze))throw F;g===null&&(g=F),x++}},this),o&&m.length>1&&x===m.length)throw g;return}this.assert(d,"expected #{this} to "+p+"include "+Ue(t),"expected #{this} to not "+p+"include "+Ue(t))}C(Vp,"include");_.addChainableMethod("include",Vp,Hp);_.addChainableMethod("contain",Vp,Hp);_.addChainableMethod("contains",Vp,Hp);_.addChainableMethod("includes",Vp,Hp);_.addProperty("ok",function(){this.assert(A(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});_.addProperty("true",function(){this.assert(A(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!A(this,"negate"))});_.addProperty("callable",function(){let t=A(this,"object"),e=A(this,"ssfi"),r=A(this,"message"),n=r?`${r}: `:"",i=A(this,"negate"),o=i?`${n}expected ${Ue(t)} not to be a callable function`:`${n}expected ${Ue(t)} to be a callable function`,a=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Ye(t));if(a&&i||!a&&!i)throw new ze(o,void 0,e)});_.addProperty("false",function(){this.assert(A(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!A(this,"negate"))});_.addProperty("null",function(){this.assert(A(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});_.addProperty("undefined",function(){this.assert(A(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});_.addProperty("NaN",function(){this.assert(Ey(A(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function lw(){var t=A(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}C(lw,"assertExist");_.addProperty("exist",lw);_.addProperty("exists",lw);_.addProperty("empty",function(){var t=A(this,"object"),e=A(this,"ssfi"),r=A(this,"message"),n;switch(r=r?r+": ":"",Ye(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new ze(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+Dy(t);throw new ze(i.trim(),void 0,e);default:if(t!==Object(t))throw new ze(r+".empty was passed non-string primitive "+Ue(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function pw(){var t=A(this,"object"),e=Ye(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}C(pw,"checkArguments");_.addProperty("arguments",pw);_.addProperty("Arguments",pw);function Iy(t,e){e&&A(this,"message",e);var r=A(this,"object");if(A(this,"deep")){var n=A(this,"lockSsfi");A(this,"lockSsfi",!0),this.eql(t),A(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}C(Iy,"assertEqual");_.addMethod("equal",Iy);_.addMethod("equals",Iy);_.addMethod("eq",Iy);function uw(t,e){e&&A(this,"message",e);var r=A(this,"eql");this.assert(r(t,A(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}C(uw,"assertEql");_.addMethod("eql",uw);_.addMethod("eqls",uw);function Fy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",a=A(this,"ssfi"),l=Ye(r).toLowerCase(),p=Ye(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to above must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to above must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}C(Fy,"assertAbove");_.addMethod("above",Fy);_.addMethod("gt",Fy);_.addMethod("greaterThan",Fy);function Cy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",a=A(this,"ssfi"),l=Ye(r).toLowerCase(),p=Ye(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to least must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to least must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}C(Cy,"assertLeast");_.addMethod("least",Cy);_.addMethod("gte",Cy);_.addMethod("greaterThanOrEqual",Cy);function Oy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",a=A(this,"ssfi"),l=Ye(r).toLowerCase(),p=Ye(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to below must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to below must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}C(Oy,"assertBelow");_.addMethod("below",Oy);_.addMethod("lt",Oy);_.addMethod("lessThan",Oy);function Ny(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",a=A(this,"ssfi"),l=Ye(r).toLowerCase(),p=Ye(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to most must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to most must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}C(Ny,"assertMost");_.addMethod("most",Ny);_.addMethod("lte",Ny);_.addMethod("lessThanOrEqual",Ny);_.addMethod("within",function(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"doLength"),o=A(this,"message"),a=o?o+": ":"",l=A(this,"ssfi"),p=Ye(n).toLowerCase(),u=Ye(t).toLowerCase(),d=Ye(e).toLowerCase(),m,g=!0,x=u==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&p!=="map"&&p!=="set"&&new _(n,o,l,!0).to.have.property("length"),!i&&p==="date"&&(u!=="date"||d!=="date"))m=a+"the arguments to within must be dates";else if((u!=="number"||d!=="number")&&(i||p==="number"))m=a+"the arguments to within must be numbers";else if(!i&&p!=="date"&&p!=="number"){var v=p==="string"?"'"+n+"'":n;m=a+"expected "+v+" to be a number or a date"}else g=!1;if(g)throw new ze(m,void 0,l);if(i){var b="length",F;p==="map"||p==="set"?(b="size",F=n.size):F=n.length,this.assert(F>=t&&F<=e,"expected #{this} to have a "+b+" within "+x,"expected #{this} to not have a "+b+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function fw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"ssfi"),i=A(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new ze(i+"The instanceof assertion needs a constructor but "+Ye(t)+" was given.",void 0,n)):l}var a=Dy(t);a==null&&(a="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+a,"expected #{this} to not be an instance of "+a)}C(fw,"assertInstanceOf");_.addMethod("instanceof",fw);_.addMethod("instanceOf",fw);function dw(t,e,r){r&&A(this,"message",r);var n=A(this,"nested"),i=A(this,"own"),o=A(this,"message"),a=A(this,"object"),l=A(this,"ssfi"),p=typeof t;if(o=o?o+": ":"",n){if(p!=="string")throw new ze(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(p!=="string"&&p!=="number"&&p!=="symbol")throw new ze(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new ze(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(a==null)throw new ze(o+"Target cannot be null or undefined.",void 0,l);var u=A(this,"deep"),d=A(this,"negate"),m=n?Xb(a,t):null,g=n?m.value:a[t],x=u?A(this,"eql"):(F,M)=>F===M,v="";u&&(v+="deep "),i&&(v+="own "),n&&(v+="nested "),v+="property ";var b;i?b=Object.prototype.hasOwnProperty.call(a,t):n?b=m.exists:b=Ay(a,t),(!d||arguments.length===1)&&this.assert(b,"expected #{this} to have "+v+Ue(t),"expected #{this} to not have "+v+Ue(t)),arguments.length>1&&this.assert(b&&x(e,g),"expected #{this} to have "+v+Ue(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+v+Ue(t)+" of #{act}",e,g),A(this,"object",g)}C(dw,"assertProperty");_.addMethod("property",dw);function mw(t,e,r){A(this,"own",!0),dw.apply(this,arguments)}C(mw,"assertOwnProperty");_.addMethod("ownProperty",mw);_.addMethod("haveOwnProperty",mw);function hw(t,e,r){typeof e=="string"&&(r=e,e=null),r&&A(this,"message",r);var n=A(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=A(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Ue(t)+" on #{this} to match "+Ue(e)+", got "+Ue(i),"expected the own property descriptor for "+Ue(t)+" on #{this} to not match "+Ue(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Ue(t),"expected #{this} to not have an own property descriptor for "+Ue(t)),A(this,"object",i)}C(hw,"assertOwnPropertyDescriptor");_.addMethod("ownPropertyDescriptor",hw);_.addMethod("haveOwnPropertyDescriptor",hw);function gw(){A(this,"doLength",!0)}C(gw,"assertLengthChain");function yw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=Ye(r).toLowerCase(),i=A(this,"message"),o=A(this,"ssfi"),a="length",l;switch(n){case"map":case"set":a="size",l=r.size;break;default:new _(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+a+" of #{exp} but got #{act}","expected #{this} to not have a "+a+" of #{act}",t,l)}C(yw,"assertLength");_.addChainableMethod("length",yw,gw);_.addChainableMethod("lengthOf",yw,gw);function xw(t,e){e&&A(this,"message",e);var r=A(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}C(xw,"assertMatch");_.addMethod("match",xw);_.addMethod("matches",xw);_.addMethod("string",function(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi");new _(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Ue(t),"expected #{this} to not contain "+Ue(t))});function Tw(t){var e=A(this,"object"),r=Ye(e),n=Ye(t),i=A(this,"ssfi"),o=A(this,"deep"),a,l="",p,u=!0,d=A(this,"message");d=d?d+": ":"";var m=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",p=[],e.forEach(function(U,K){p.push(K)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(p=sw(e),n){case"Array":if(arguments.length>1)throw new ze(m,void 0,i);break;case"Object":if(arguments.length>1)throw new ze(m,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(U){return typeof U=="symbol"?U:String(U)})}if(!t.length)throw new ze(d+"keys required",void 0,i);var g=t.length,x=A(this,"any"),v=A(this,"all"),b=t,F=o?A(this,"eql"):(U,K)=>U===K;if(!x&&!v&&(v=!0),x&&(u=b.some(function(U){return p.some(function(K){return F(U,K)})})),v&&(u=b.every(function(U){return p.some(function(K){return F(U,K)})}),A(this,"contains")||(u=u&&t.length==p.length)),g>1){t=t.map(function(U){return Ue(U)});var M=t.pop();v&&(a=t.join(", ")+", and "+M),x&&(a=t.join(", ")+", or "+M)}else a=Ue(t[0]);a=(g>1?"keys ":"key ")+a,a=(A(this,"contains")?"contain ":"have ")+a,this.assert(u,"expected #{this} to "+l+a,"expected #{this} to not "+l+a,b.slice(0).sort(_y),p.sort(_y),!0)}C(Tw,"assertKeys");_.addMethod("keys",Tw);_.addMethod("key",Tw);function Ly(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"ssfi"),o=A(this,"message"),a=A(this,"negate")||!1;new _(n,o,i,!0).is.a("function"),(Ry(t)||typeof t=="string")&&(e=t,t=null);let l,p=!1;try{n()}catch(U){p=!0,l=U}var u=t===void 0&&e===void 0,d=!!(t&&e),m=!1,g=!1;if(u||!u&&!a){var x="an error";t instanceof Error?x="#{exp}":t&&(x=Qr.getConstructorName(t));let U=l;if(l instanceof Error)U=l.toString();else if(typeof l=="string")U=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{U=Qr.getConstructorName(l)}catch{}this.assert(p,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),U)}if(t&&l){if(t instanceof Error){var v=Qr.compatibleInstance(l,t);v===a&&(d&&a?m=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!a?" but #{act} was thrown":""),t.toString(),l.toString()))}var b=Qr.compatibleConstructor(l,t);b===a&&(d&&a?m=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Qr.getConstructorName(t),l instanceof Error?l.toString():l&&Qr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var F="including";Ry(e)&&(F="matching");var M=Qr.compatibleMessage(l,e);M===a&&(d&&a?g=!0:this.assert(a,"expected #{this} to throw error "+F+" #{exp} but got #{act}","expected #{this} to throw error not "+F+" #{exp}",e,Qr.getMessage(l)))}m&&g&&this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Qr.getConstructorName(t),l instanceof Error?l.toString():l&&Qr.getConstructorName(l)),A(this,"object",l)}C(Ly,"assertThrows");_.addMethod("throw",Ly);_.addMethod("throws",Ly);_.addMethod("Throw",Ly);function Sw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Ue(t),"expected #{this} to not respond to "+Ue(t))}C(Sw,"respondTo");_.addMethod("respondTo",Sw);_.addMethod("respondsTo",Sw);_.addProperty("itself",function(){A(this,"itself",!0)});function vw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+ks(t),"expected #{this} to not satisfy"+ks(t),!A(this,"negate"),n)}C(vw,"satisfy");_.addMethod("satisfy",vw);_.addMethod("satisfies",vw);function bw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");if(new _(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var a=e===void 0?", and a delta is required":"";throw new ze(i+"the arguments to closeTo or approximately must be numbers"+a,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}C(bw,"closeTo");_.addMethod("closeTo",bw);_.addMethod("approximately",bw);function TC(t,e,r,n,i){let o=Array.from(e),a=Array.from(t);if(!n){if(a.length!==o.length)return!1;o=o.slice()}return a.every(function(l,p){if(i)return r?r(l,o[p]):l===o[p];if(!r){var u=o.indexOf(l);return u===-1?!1:(n||o.splice(u,1),!0)}return o.some(function(d,m){return r(l,d)?(n||o.splice(m,1),!0):!1})})}C(TC,"isSubsetOf");_.addMethod("members",function(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi");new _(r,n,i,!0).to.be.iterable,new _(t,n,i,!0).to.be.iterable;var o=A(this,"contains"),a=A(this,"ordered"),l,p,u;o?(l=a?"an ordered superset":"a superset",p="expected #{this} to be "+l+" of #{exp}",u="expected #{this} to not be "+l+" of #{exp}"):(l=a?"ordered members":"members",p="expected #{this} to have the same "+l+" as #{exp}",u="expected #{this} to not have the same "+l+" as #{exp}");var d=A(this,"deep")?A(this,"eql"):void 0;this.assert(TC(t,r,d,o,a),p,u,t,r,!0)});_.addProperty("iterable",function(t){t&&A(this,"message",t);var e=A(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function SC(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi"),o=A(this,"contains"),a=A(this,"deep"),l=A(this,"eql");new _(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(p){return r.indexOf(p)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):a?this.assert(t.some(function(p){return l(r,p)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}C(SC,"oneOf");_.addMethod("oneOf",SC);function ww(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),n();var l=e==null?t():t[e],p=e==null?a:"."+e;A(this,"deltaMsgObj",p),A(this,"initialDeltaValue",a),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","change"),A(this,"realDelta",l!==a),this.assert(a!==l,"expected "+p+" to change","expected "+p+" to not change")}C(ww,"assertChanges");_.addMethod("change",ww);_.addMethod("changes",ww);function _w(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),new _(a,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?a:"."+e;A(this,"deltaMsgObj",p),A(this,"initialDeltaValue",a),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","increase"),A(this,"realDelta",l-a),this.assert(l-a>0,"expected "+p+" to increase","expected "+p+" to not increase")}C(_w,"assertIncreases");_.addMethod("increase",_w);_.addMethod("increases",_w);function Ew(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),new _(a,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?a:"."+e;A(this,"deltaMsgObj",p),A(this,"initialDeltaValue",a),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","decrease"),A(this,"realDelta",a-l),this.assert(l-a<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}C(Ew,"assertDecreases");_.addMethod("decrease",Ew);_.addMethod("decreases",Ew);function vC(t,e){e&&A(this,"message",e);var r=A(this,"deltaMsgObj"),n=A(this,"initialDeltaValue"),i=A(this,"finalDeltaValue"),o=A(this,"deltaBehavior"),a=A(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=a===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}C(vC,"assertDelta");_.addMethod("by",vC);_.addProperty("extensible",function(){var t=A(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});_.addProperty("sealed",function(){var t=A(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});_.addProperty("frozen",function(){var t=A(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});_.addProperty("finite",function(t){var e=A(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function ky(t,e){return new _(t,e)}C(ky,"expect");ky.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new ze(r,{actual:t,expected:e,operator:n},ky.fail)};var bC={};qb(bC,{Should:()=>mX,should:()=>dX});function Rw(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new _(this.valueOf(),null,t):new _(this,null,t)}C(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}C(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,a){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new ze(o,{actual:n,expected:i,operator:a},r.fail)},r.equal=function(n,i,o){new _(n,o).to.equal(i)},r.Throw=function(n,i,o,a){new _(n,a).to.Throw(i,o)},r.exist=function(n,i){new _(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new _(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,a){new _(n,a).to.not.Throw(i,o)},r.not.exist=function(n,i){new _(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}C(Rw,"loadShould");var dX=Rw,mX=Rw;function w(t,e){var r=new _(null,null,w,!0);r.assert(t,e,"[ negation message unavailable ]")}C(w,"assert");w.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new ze(r,{actual:t,expected:e,operator:n},w.fail)};w.isOk=function(t,e){new _(t,e,w.isOk,!0).is.ok};w.isNotOk=function(t,e){new _(t,e,w.isNotOk,!0).is.not.ok};w.equal=function(t,e,r){var n=new _(t,r,w.equal,!0);n.assert(e==_e(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};w.notEqual=function(t,e,r){var n=new _(t,r,w.notEqual,!0);n.assert(e!=_e(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};w.strictEqual=function(t,e,r){new _(t,r,w.strictEqual,!0).to.equal(e)};w.notStrictEqual=function(t,e,r){new _(t,r,w.notStrictEqual,!0).to.not.equal(e)};w.deepEqual=w.deepStrictEqual=function(t,e,r){new _(t,r,w.deepEqual,!0).to.eql(e)};w.notDeepEqual=function(t,e,r){new _(t,r,w.notDeepEqual,!0).to.not.eql(e)};w.isAbove=function(t,e,r){new _(t,r,w.isAbove,!0).to.be.above(e)};w.isAtLeast=function(t,e,r){new _(t,r,w.isAtLeast,!0).to.be.least(e)};w.isBelow=function(t,e,r){new _(t,r,w.isBelow,!0).to.be.below(e)};w.isAtMost=function(t,e,r){new _(t,r,w.isAtMost,!0).to.be.most(e)};w.isTrue=function(t,e){new _(t,e,w.isTrue,!0).is.true};w.isNotTrue=function(t,e){new _(t,e,w.isNotTrue,!0).to.not.equal(!0)};w.isFalse=function(t,e){new _(t,e,w.isFalse,!0).is.false};w.isNotFalse=function(t,e){new _(t,e,w.isNotFalse,!0).to.not.equal(!1)};w.isNull=function(t,e){new _(t,e,w.isNull,!0).to.equal(null)};w.isNotNull=function(t,e){new _(t,e,w.isNotNull,!0).to.not.equal(null)};w.isNaN=function(t,e){new _(t,e,w.isNaN,!0).to.be.NaN};w.isNotNaN=function(t,e){new _(t,e,w.isNotNaN,!0).not.to.be.NaN};w.exists=function(t,e){new _(t,e,w.exists,!0).to.exist};w.notExists=function(t,e){new _(t,e,w.notExists,!0).to.not.exist};w.isUndefined=function(t,e){new _(t,e,w.isUndefined,!0).to.equal(void 0)};w.isDefined=function(t,e){new _(t,e,w.isDefined,!0).to.not.equal(void 0)};w.isCallable=function(t,e){new _(t,e,w.isCallable,!0).is.callable};w.isNotCallable=function(t,e){new _(t,e,w.isNotCallable,!0).is.not.callable};w.isObject=function(t,e){new _(t,e,w.isObject,!0).to.be.a("object")};w.isNotObject=function(t,e){new _(t,e,w.isNotObject,!0).to.not.be.a("object")};w.isArray=function(t,e){new _(t,e,w.isArray,!0).to.be.an("array")};w.isNotArray=function(t,e){new _(t,e,w.isNotArray,!0).to.not.be.an("array")};w.isString=function(t,e){new _(t,e,w.isString,!0).to.be.a("string")};w.isNotString=function(t,e){new _(t,e,w.isNotString,!0).to.not.be.a("string")};w.isNumber=function(t,e){new _(t,e,w.isNumber,!0).to.be.a("number")};w.isNotNumber=function(t,e){new _(t,e,w.isNotNumber,!0).to.not.be.a("number")};w.isFinite=function(t,e){new _(t,e,w.isFinite,!0).to.be.finite};w.isBoolean=function(t,e){new _(t,e,w.isBoolean,!0).to.be.a("boolean")};w.isNotBoolean=function(t,e){new _(t,e,w.isNotBoolean,!0).to.not.be.a("boolean")};w.typeOf=function(t,e,r){new _(t,r,w.typeOf,!0).to.be.a(e)};w.notTypeOf=function(t,e,r){new _(t,r,w.notTypeOf,!0).to.not.be.a(e)};w.instanceOf=function(t,e,r){new _(t,r,w.instanceOf,!0).to.be.instanceOf(e)};w.notInstanceOf=function(t,e,r){new _(t,r,w.notInstanceOf,!0).to.not.be.instanceOf(e)};w.include=function(t,e,r){new _(t,r,w.include,!0).include(e)};w.notInclude=function(t,e,r){new _(t,r,w.notInclude,!0).not.include(e)};w.deepInclude=function(t,e,r){new _(t,r,w.deepInclude,!0).deep.include(e)};w.notDeepInclude=function(t,e,r){new _(t,r,w.notDeepInclude,!0).not.deep.include(e)};w.nestedInclude=function(t,e,r){new _(t,r,w.nestedInclude,!0).nested.include(e)};w.notNestedInclude=function(t,e,r){new _(t,r,w.notNestedInclude,!0).not.nested.include(e)};w.deepNestedInclude=function(t,e,r){new _(t,r,w.deepNestedInclude,!0).deep.nested.include(e)};w.notDeepNestedInclude=function(t,e,r){new _(t,r,w.notDeepNestedInclude,!0).not.deep.nested.include(e)};w.ownInclude=function(t,e,r){new _(t,r,w.ownInclude,!0).own.include(e)};w.notOwnInclude=function(t,e,r){new _(t,r,w.notOwnInclude,!0).not.own.include(e)};w.deepOwnInclude=function(t,e,r){new _(t,r,w.deepOwnInclude,!0).deep.own.include(e)};w.notDeepOwnInclude=function(t,e,r){new _(t,r,w.notDeepOwnInclude,!0).not.deep.own.include(e)};w.match=function(t,e,r){new _(t,r,w.match,!0).to.match(e)};w.notMatch=function(t,e,r){new _(t,r,w.notMatch,!0).to.not.match(e)};w.property=function(t,e,r){new _(t,r,w.property,!0).to.have.property(e)};w.notProperty=function(t,e,r){new _(t,r,w.notProperty,!0).to.not.have.property(e)};w.propertyVal=function(t,e,r,n){new _(t,n,w.propertyVal,!0).to.have.property(e,r)};w.notPropertyVal=function(t,e,r,n){new _(t,n,w.notPropertyVal,!0).to.not.have.property(e,r)};w.deepPropertyVal=function(t,e,r,n){new _(t,n,w.deepPropertyVal,!0).to.have.deep.property(e,r)};w.notDeepPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};w.ownProperty=function(t,e,r){new _(t,r,w.ownProperty,!0).to.have.own.property(e)};w.notOwnProperty=function(t,e,r){new _(t,r,w.notOwnProperty,!0).to.not.have.own.property(e)};w.ownPropertyVal=function(t,e,r,n){new _(t,n,w.ownPropertyVal,!0).to.have.own.property(e,r)};w.notOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};w.deepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};w.notDeepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};w.nestedProperty=function(t,e,r){new _(t,r,w.nestedProperty,!0).to.have.nested.property(e)};w.notNestedProperty=function(t,e,r){new _(t,r,w.notNestedProperty,!0).to.not.have.nested.property(e)};w.nestedPropertyVal=function(t,e,r,n){new _(t,n,w.nestedPropertyVal,!0).to.have.nested.property(e,r)};w.notNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};w.deepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};w.notDeepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};w.lengthOf=function(t,e,r){new _(t,r,w.lengthOf,!0).to.have.lengthOf(e)};w.hasAnyKeys=function(t,e,r){new _(t,r,w.hasAnyKeys,!0).to.have.any.keys(e)};w.hasAllKeys=function(t,e,r){new _(t,r,w.hasAllKeys,!0).to.have.all.keys(e)};w.containsAllKeys=function(t,e,r){new _(t,r,w.containsAllKeys,!0).to.contain.all.keys(e)};w.doesNotHaveAnyKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};w.doesNotHaveAllKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};w.hasAnyDeepKeys=function(t,e,r){new _(t,r,w.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};w.hasAllDeepKeys=function(t,e,r){new _(t,r,w.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};w.containsAllDeepKeys=function(t,e,r){new _(t,r,w.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};w.doesNotHaveAnyDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};w.doesNotHaveAllDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};w.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new _(t,n,w.throws,!0).to.throw(e,r);return _e(i,"object")};w.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new _(t,n,w.doesNotThrow,!0).to.not.throw(e,r)};w.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new ze(n+'Invalid operator "'+e+'"',void 0,w.operator)}var o=new _(i,n,w.operator,!0);o.assert(_e(o,"object")===!0,"expected "+Ue(t)+" to be "+e+" "+Ue(r),"expected "+Ue(t)+" to not be "+e+" "+Ue(r))};w.closeTo=function(t,e,r,n){new _(t,n,w.closeTo,!0).to.be.closeTo(e,r)};w.approximately=function(t,e,r,n){new _(t,n,w.approximately,!0).to.be.approximately(e,r)};w.sameMembers=function(t,e,r){new _(t,r,w.sameMembers,!0).to.have.same.members(e)};w.notSameMembers=function(t,e,r){new _(t,r,w.notSameMembers,!0).to.not.have.same.members(e)};w.sameDeepMembers=function(t,e,r){new _(t,r,w.sameDeepMembers,!0).to.have.same.deep.members(e)};w.notSameDeepMembers=function(t,e,r){new _(t,r,w.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};w.sameOrderedMembers=function(t,e,r){new _(t,r,w.sameOrderedMembers,!0).to.have.same.ordered.members(e)};w.notSameOrderedMembers=function(t,e,r){new _(t,r,w.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};w.sameDeepOrderedMembers=function(t,e,r){new _(t,r,w.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};w.notSameDeepOrderedMembers=function(t,e,r){new _(t,r,w.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};w.includeMembers=function(t,e,r){new _(t,r,w.includeMembers,!0).to.include.members(e)};w.notIncludeMembers=function(t,e,r){new _(t,r,w.notIncludeMembers,!0).to.not.include.members(e)};w.includeDeepMembers=function(t,e,r){new _(t,r,w.includeDeepMembers,!0).to.include.deep.members(e)};w.notIncludeDeepMembers=function(t,e,r){new _(t,r,w.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};w.includeOrderedMembers=function(t,e,r){new _(t,r,w.includeOrderedMembers,!0).to.include.ordered.members(e)};w.notIncludeOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};w.includeDeepOrderedMembers=function(t,e,r){new _(t,r,w.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};w.notIncludeDeepOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};w.oneOf=function(t,e,r){new _(t,r,w.oneOf,!0).to.be.oneOf(e)};w.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Ue(t)} to be an iterable`:`expected ${Ue(t)} to be an iterable`,new ze(e,void 0,w.isIterable)};w.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.changes,!0).to.change(e,r)};w.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesBy,!0).to.change(e,r).by(n)};w.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotChange,!0).to.not.change(e,r)};w.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesButNotBy,!0).to.change(e,r).but.not.by(n)};w.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.increases,!0).to.increase(e,r)};w.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesBy,!0).to.increase(e,r).by(n)};w.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotIncrease,!0).to.not.increase(e,r)};w.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};w.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.decreases,!0).to.decrease(e,r)};w.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesBy,!0).to.decrease(e,r).by(n)};w.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotDecrease,!0).to.not.decrease(e,r)};w.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new _(t,i,w.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};w.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};w.ifError=function(t){if(t)throw t};w.isExtensible=function(t,e){new _(t,e,w.isExtensible,!0).to.be.extensible};w.isNotExtensible=function(t,e){new _(t,e,w.isNotExtensible,!0).to.not.be.extensible};w.isSealed=function(t,e){new _(t,e,w.isSealed,!0).to.be.sealed};w.isNotSealed=function(t,e){new _(t,e,w.isNotSealed,!0).to.not.be.sealed};w.isFrozen=function(t,e){new _(t,e,w.isFrozen,!0).to.be.frozen};w.isNotFrozen=function(t,e){new _(t,e,w.isNotFrozen,!0).to.not.be.frozen};w.isEmpty=function(t,e){new _(t,e,w.isEmpty,!0).to.be.empty};w.isNotEmpty=function(t,e){new _(t,e,w.isNotEmpty,!0).to.not.be.empty};C(function t(e,r){return w[r]=w[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var F1=[];function hX(t){let e={AssertionError:ze,util:Sy,config:Pr,expect:ky,assert:w,Assertion:_,...bC};return~F1.indexOf(t)||(t(e,Sy),F1.push(t)),e}C(hX,"use");var Bp=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new W(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new W(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new W(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var wC=hr(require("node:path"),1),Uy=class{get uri(){return this._uri}get filename(){return wC.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new W(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof pe?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Bp(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new pe(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let a=n+1;a<i;a++)o.push(this._lines[a]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof W))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new W(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof pe))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new pe(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new kw(n)}}};function xX(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var kw=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=xX(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new Pw(i,e-a)}},Pw=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var Hy=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Wp;this.onDidChangeActiveTextEditor=Wp;this.onDidChangeVisibleTextEditors=Wp;this.onDidChangeTextEditorSelection=Wp;this.onDidChangeTextEditorVisibleRanges=Wp;this.configuration=new hp,this.keyValueStore=new gp,this.messages=new yp,this.clipboard=new dp(this.client),this.capabilities=new Xg,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await cF(this.client);this.assetsRoot_=Mw.default.join(e,"assets"),this.cursorlessNeovimPath=Mw.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return _1()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return xF(e)}onDidOpenTextDocument(e,r,n){return TF(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let a,l;e?(a=[],l=[]):(a=await Zg(r,this.client),l=await aF(r,this.client,i));let p=this.toNeovimEditor(r,n,i,l,a);return zr().emitEvent("onDidOpenTextDocument",p.document),p}toNeovimEditor(e,r,n,i,o){let a=this.getTextDocument(r),l=this.getTextEditor(e);return a?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),a.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),a=new Uy(_F.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,a)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,a)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new ey(yM(),this.client,this,e,a,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){dF(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,_C.pull)(this.disposables,...e)}};function Wp(){return{dispose(){}}}var Vy=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var SX=BigInt(1e9);function EC(t,e=BigInt(1e6)){return Number(t*e/SX)/Number(e)}async function By(t,e=[],r=[],n,i,o,a,l){let p={documentContents:n.document.getText(),selections:n.selections.map(Uk)};o!=null&&(p.marks=o),l!=null&&(p.metadata=l),e.includes("clipboard")||(p.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(p.visibleRanges=n.visibleRanges.map(nl));for(let u of ma){let d=t?.get(u),m=`${u}Mark`;d!=null&&!e.includes(m)&&(p[m]=d.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let u=a?.startTimestamp;if(u==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-u;p.timeOffsetSeconds=EC(d)}return p}var vX=hr(El(),1);function RC(t,e,r,n,i,o,a,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:a,scopeProvider:o,takeSnapshot(p,u,d,m,g){return By(e,p,u,d,m,g,void 0,void 0)},setStoredTarget(p,u,d){e.set(u,d?.map(m=>nF(p,m)))},hatTokenMap:r,runIntegrationTests:l}}async function kC(t,e,r,n){let i={[lT]:async(...o)=>{(await t.mode).mode==="t"&&uF(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),p=Of(o);if(await n.getFocusedElementType()==="terminal"&&Xo(p)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&fF(t)}return l}catch(l){if(e.runMode!=="test"){let p=l;console.error(p.stack),e.handleCommandError(p)}throw l}},"cursorless.repeatPreviousCommand":Pe,"cursorless.showCheatsheet":Pe,"cursorless.internal.updateCheatsheetDefaults":Pe,"cursorless.recordTestCase":Pe,"cursorless.recordOneTestCaseThenPause":Pe,"cursorless.pauseRecording":Pe,"cursorless.resumeRecording":Pe,"cursorless.takeSnapshot":Pe,"cursorless.recordScopeTests.showUnimplementedFacets":Pe,"cursorless.recordScopeTests.saveActiveDocument":Pe,"cursorless.showQuickPick":Pe,"cursorless.showDocumentation":Pe,"cursorless.showInstallationDependencies":Pe,"cursorless.migrateSnippets":Pe,"cursorless.private.logQuickActions":Pe,"cursorless.toggleDecorations":Pe,"cursorless.recomputeDecorationStyles":Pe,"cursorless.showScopeVisualizer":Pe,"cursorless.hideScopeVisualizer":Pe,"cursorless.analyzeCommandHistory":Pe,"cursorless.keyboard.escape":Pe,"cursorless.keyboard.targeted.targetHat":Pe,"cursorless.keyboard.targeted.targetScope":Pe,"cursorless.keyboard.targeted.targetSelection":Pe,"cursorless.keyboard.targeted.clearTarget":Pe,"cursorless.keyboard.targeted.runActionOnTarget":Pe,"cursorless.keyboard.modal.modeOn":Pe,"cursorless.keyboard.modal.modeOff":Pe,"cursorless.keyboard.modal.modeToggle":Pe,"cursorless.keyboard.undoTarget":Pe,"cursorless.keyboard.redoTarget":Pe,"cursorless.tutorial.start":Pe,"cursorless.tutorial.next":Pe,"cursorless.tutorial.previous":Pe,"cursorless.tutorial.restart":Pe,"cursorless.tutorial.resume":Pe,"cursorless.tutorial.list":Pe,"cursorless.documentationOpened":Pe};Object.entries(i).map(([o,a])=>zr().registerCommand(o,a))}async function Pe(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function PC(t){let e=t.nvim,r=new Hy(e);await r.init();let n=r.runMode==="production"?r:new _f(r,new vf,r.runMode==="test",void 0),i=new Lu,o=new Vy(e),a=r.runMode==="test"?i:o,{commandApi:l,storedTargets:p,hatTokenMap:u,scopeProvider:d,injectIde:m,runIntegrationTests:g}=await rF({ide:n,commandServerApi:a});await kC(e,r,l,a);let x={testHelpers:r.runMode==="test"?RC(i,p,u,r,n,d,m,g):void 0};zr().registerExtensionApi(oF,x),console.log("activate(): Cursorless extension loaded")}function MC(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await bX(t),{sync:!1})}async function bX(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await PC(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
