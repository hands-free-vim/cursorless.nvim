"use strict";var uB=Object.create;var Au=Object.defineProperty;var fB=Object.getOwnPropertyDescriptor;var dB=Object.getOwnPropertyNames;var mB=Object.getPrototypeOf,hB=Object.prototype.hasOwnProperty;var Ke=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),gB=(t,e)=>{for(var r in e)Au(t,r,{get:e[r],enumerable:!0})},oE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of dB(e))!hB.call(t,i)&&i!==r&&Au(t,i,{get:()=>e[i],enumerable:!(n=fB(e,i))||n.enumerable});return t};var dr=(t,e,r)=>(r=t!=null?uB(mB(t)):{},oE(e||!t||!t.__esModule?Au(r,"default",{value:t,enumerable:!0}):r,t)),yB=t=>oE(Au({},"__esModule",{value:!0}),t);var GP=Ke(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.default=void 0;var Gge=Wf.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var KP=Ke($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.default=void 0;var Qge=$f.default="00000000-0000-0000-0000-000000000000"});var QP=Ke(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.default=void 0;var Yge=jf.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var dl=Ke(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.default=void 0;var O4=N4(QP());function N4(t){return t&&t.__esModule?t:{default:t}}function L4(t){return typeof t=="string"&&O4.default.test(t)}var Jge=qf.default=L4});var ml=Ke(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.default=void 0;var U4=H4(dl());function H4(t){return t&&t.__esModule?t:{default:t}}function V4(t){if(!(0,U4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var tye=zf.default=V4});var _i=Ke(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.default=void 0;hl.unsafeStringify=ZP;var B4=W4(dl());function W4(t){return t&&t.__esModule?t:{default:t}}var Lt=[];for(let t=0;t<256;++t)Lt.push((t+256).toString(16).slice(1));function ZP(t,e=0){return(Lt[t[e+0]]+Lt[t[e+1]]+Lt[t[e+2]]+Lt[t[e+3]]+"-"+Lt[t[e+4]]+Lt[t[e+5]]+"-"+Lt[t[e+6]]+Lt[t[e+7]]+"-"+Lt[t[e+8]]+Lt[t[e+9]]+"-"+Lt[t[e+10]]+Lt[t[e+11]]+Lt[t[e+12]]+Lt[t[e+13]]+Lt[t[e+14]]+Lt[t[e+15]]).toLowerCase()}function $4(t,e=0){let r=ZP(t,e);if(!(0,B4.default)(r))throw TypeError("Stringified UUID is invalid");return r}var nye=hl.default=$4});var Qf=Ke(pT=>{"use strict";Object.defineProperty(pT,"__esModule",{value:!0});pT.default=z4;var j4=q4(require("node:crypto"));function q4(t){return t&&t.__esModule?t:{default:t}}var Kf=new Uint8Array(256),Gf=Kf.length;function z4(){return Gf>Kf.length-16&&(j4.default.randomFillSync(Kf),Gf=0),Kf.slice(Gf,Gf+=16)}});var mT=Ke(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.default=void 0;var G4=Q4(Qf()),K4=_i();function Q4(t){return t&&t.__esModule?t:{default:t}}var uT,Zf,fT=0,dT=0;function Z4(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node,a=t.clockseq;if(t._v6||(o||(o=uT),a==null&&(a=Zf)),o==null||a==null){let g=t.random||(t.rng||G4.default)();o==null&&(o=[g[0],g[1],g[2],g[3],g[4],g[5]],!uT&&!t._v6&&(o[0]|=1,uT=o)),a==null&&(a=(g[6]<<8|g[7])&16383,Zf===void 0&&!t._v6&&(Zf=a))}let l=t.msecs!==void 0?t.msecs:Date.now(),p=t.nsecs!==void 0?t.nsecs:dT+1,u=l-fT+(p-dT)/1e4;if(u<0&&t.clockseq===void 0&&(a=a+1&16383),(u<0||l>fT)&&t.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");fT=l,dT=p,Zf=a,l+=122192928e5;let d=((l&268435455)*1e4+p)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=d&255;let m=l/4294967296*1e4&268435455;i[n++]=m>>>8&255,i[n++]=m&255,i[n++]=m>>>24&15|16,i[n++]=m>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,K4.unsafeStringify)(i)}var sye=Yf.default=Z4});var gT=Ke(hT=>{"use strict";Object.defineProperty(hT,"__esModule",{value:!0});hT.default=e6;var Y4=J4(ml()),X4=_i();function J4(t){return t&&t.__esModule?t:{default:t}}function e6(t){let e=typeof t=="string"?(0,Y4.default)(t):t,r=t6(e);return typeof t=="string"?(0,X4.unsafeStringify)(r):r}function t6(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var yT=Ke(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.URL=es.DNS=void 0;es.default=c6;var r6=_i(),n6=i6(ml());function i6(t){return t&&t.__esModule?t:{default:t}}function o6(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var s6=es.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",a6=es.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function c6(t,e,r){function n(i,o,a,l){var p;if(typeof i=="string"&&(i=o6(i)),typeof o=="string"&&(o=(0,n6.default)(o)),((p=o)===null||p===void 0?void 0:p.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){l=l||0;for(let d=0;d<16;++d)a[l+d]=u[d];return a}return(0,r6.unsafeStringify)(u)}try{n.name=t}catch{}return n.DNS=s6,n.URL=a6,n}});var YP=Ke(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.default=void 0;var l6=p6(require("node:crypto"));function p6(t){return t&&t.__esModule?t:{default:t}}function u6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),l6.default.createHash("md5").update(t).digest()}var pye=Xf.default=u6});var JP=Ke(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.default=void 0;var f6=XP(yT()),d6=XP(YP());function XP(t){return t&&t.__esModule?t:{default:t}}var m6=(0,f6.default)("v3",48,d6.default),fye=Jf.default=m6});var eM=Ke(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.default=void 0;var h6=g6(require("node:crypto"));function g6(t){return t&&t.__esModule?t:{default:t}}var mye=ed.default={randomUUID:h6.default.randomUUID}});var nM=Ke(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.default=void 0;var tM=rM(eM()),y6=rM(Qf()),x6=_i();function rM(t){return t&&t.__esModule?t:{default:t}}function S6(t,e,r){if(tM.default.randomUUID&&!e&&!t)return tM.default.randomUUID();t=t||{};let n=t.random||(t.rng||y6.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,x6.unsafeStringify)(n)}var gye=td.default=S6});var iM=Ke(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.default=void 0;var T6=v6(require("node:crypto"));function v6(t){return t&&t.__esModule?t:{default:t}}function b6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),T6.default.createHash("sha1").update(t).digest()}var xye=rd.default=b6});var sM=Ke(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.default=void 0;var w6=oM(yT()),_6=oM(iM());function oM(t){return t&&t.__esModule?t:{default:t}}var E6=(0,w6.default)("v5",80,_6.default),Tye=nd.default=E6});var cM=Ke(xT=>{"use strict";Object.defineProperty(xT,"__esModule",{value:!0});xT.default=M6;var R6=_i(),k6=aM(mT()),P6=aM(gT());function aM(t){return t&&t.__esModule?t:{default:t}}function M6(t={},e,r=0){let n=(0,k6.default)({...t,_v6:!0},new Uint8Array(16));if(n=(0,P6.default)(n),e){for(let i=0;i<16;i++)e[r+i]=n[i];return e}return(0,R6.unsafeStringify)(n)}});var lM=Ke(ST=>{"use strict";Object.defineProperty(ST,"__esModule",{value:!0});ST.default=F6;var A6=I6(ml()),D6=_i();function I6(t){return t&&t.__esModule?t:{default:t}}function F6(t){let e=typeof t=="string"?(0,A6.default)(t):t,r=C6(e);return typeof t=="string"?(0,D6.unsafeStringify)(r):r}function C6(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var fM=Ke(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});id.default=void 0;var O6=L6(Qf()),N6=_i();function L6(t){return t&&t.__esModule?t:{default:t}}var pM=null,uM=null,An=0;function U6(t,e,r){t=t||{};let n=e&&r||0,i=e||new Uint8Array(16),o=t.random||(t.rng||O6.default)(),a=t.msecs!==void 0?t.msecs:Date.now(),l=t.seq!==void 0?t.seq:null,p=uM,u=pM;return a>An&&t.msecs===void 0&&(An=a,l!==null&&(p=null,u=null)),l!==null&&(l>2147483647&&(l=2147483647),p=l>>>19&4095,u=l&524287),(p===null||u===null)&&(p=o[6]&127,p=p<<8|o[7],u=o[8]&63,u=u<<8|o[9],u=u<<5|o[10]>>>3),a+1e4>An&&l===null?++u>524287&&(u=0,++p>4095&&(p=0,An++)):An=a,uM=p,pM=u,i[n++]=An/1099511627776&255,i[n++]=An/4294967296&255,i[n++]=An/16777216&255,i[n++]=An/65536&255,i[n++]=An/256&255,i[n++]=An&255,i[n++]=p>>>4&15|112,i[n++]=p&255,i[n++]=u>>>13&63|128,i[n++]=u>>>5&255,i[n++]=u<<3&255|o[10]&7,i[n++]=o[11],i[n++]=o[12],i[n++]=o[13],i[n++]=o[14],i[n++]=o[15],e||(0,N6.unsafeStringify)(i)}var _ye=id.default=U6});var dM=Ke(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.default=void 0;var H6=V6(dl());function V6(t){return t&&t.__esModule?t:{default:t}}function B6(t){if(!(0,H6.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var Rye=od.default=B6});var mM=Ke(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});Object.defineProperty(jt,"MAX",{enumerable:!0,get:function(){return W6.default}});Object.defineProperty(jt,"NIL",{enumerable:!0,get:function(){return $6.default}});Object.defineProperty(jt,"parse",{enumerable:!0,get:function(){return j6.default}});Object.defineProperty(jt,"stringify",{enumerable:!0,get:function(){return q6.default}});Object.defineProperty(jt,"v1",{enumerable:!0,get:function(){return z6.default}});Object.defineProperty(jt,"v1ToV6",{enumerable:!0,get:function(){return G6.default}});Object.defineProperty(jt,"v3",{enumerable:!0,get:function(){return K6.default}});Object.defineProperty(jt,"v4",{enumerable:!0,get:function(){return Q6.default}});Object.defineProperty(jt,"v5",{enumerable:!0,get:function(){return Z6.default}});Object.defineProperty(jt,"v6",{enumerable:!0,get:function(){return Y6.default}});Object.defineProperty(jt,"v6ToV1",{enumerable:!0,get:function(){return X6.default}});Object.defineProperty(jt,"v7",{enumerable:!0,get:function(){return J6.default}});Object.defineProperty(jt,"validate",{enumerable:!0,get:function(){return e9.default}});Object.defineProperty(jt,"version",{enumerable:!0,get:function(){return t9.default}});var W6=Tr(GP()),$6=Tr(KP()),j6=Tr(ml()),q6=Tr(_i()),z6=Tr(mT()),G6=Tr(gT()),K6=Tr(JP()),Q6=Tr(nM()),Z6=Tr(sM()),Y6=Tr(cM()),X6=Tr(lM()),J6=Tr(fM()),e9=Tr(dl()),t9=Tr(dM());function Tr(t){return t&&t.__esModule?t:{default:t}}});var xM=Ke((yM,ad)=>{(function(t,e){typeof ad=="object"&&ad.exports?ad.exports=e():t.nearley=e()})(yM,function(){function t(p,u,d){return this.id=++t.highestId,this.name=p,this.symbols=u,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(p){var u=typeof p>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,p).map(l).join(" ")+" \u25CF "+this.symbols.slice(p).map(l).join(" ");return this.name+" \u2192 "+u};function e(p,u,d,m){this.rule=p,this.dot=u,this.reference=d,this.data=[],this.wantedBy=m,this.isComplete=this.dot===p.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(p){var u=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return u.left=this,u.right=p,u.isComplete&&(u.data=u.build(),u.right=void 0),u},e.prototype.build=function(){var p=[],u=this;do p.push(u.right.data),u=u.left;while(u.left);return p.reverse(),p},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(p,u){this.grammar=p,this.index=u,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(p){for(var u=this.states,d=this.wants,m=this.completed,g=0;g<u.length;g++){var x=u[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var b=x.wantedBy,v=b.length;v--;){var F=b[v];this.complete(F,x)}if(x.reference===this.index){var M=x.rule.name;(this.completed[M]=this.completed[M]||[]).push(x)}}}else{var M=x.rule.symbols[x.dot];if(typeof M!="string"){this.scannable.push(x);continue}if(d[M]){if(d[M].push(x),m.hasOwnProperty(M))for(var U=m[M],v=0;v<U.length;v++){var K=U[v];this.complete(x,K)}}else d[M]=[x],this.predict(M)}}},r.prototype.predict=function(p){for(var u=this.grammar.byName[p]||[],d=0;d<u.length;d++){var m=u[d],g=this.wants[p],x=new e(m,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(p,u){var d=p.nextState(u);this.states.push(d)};function n(p,u){this.rules=p,this.start=u||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(m){d.hasOwnProperty(m.name)||(d[m.name]=[]),d[m.name].push(m)})}n.fromCompiled=function(m,u){var d=m.Lexer;m.ParserStart&&(u=m.ParserStart,m=m.ParserRules);var m=m.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(m,u);return g.lexer=d,g};function i(){this.reset("")}i.prototype.reset=function(p,u){this.buffer=p,this.index=0,this.line=u?u.line:1,this.lastLineBreak=u?-u.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var p=this.buffer[this.index++];return p===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:p}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(p,u){var d=this.buffer;if(typeof d=="string"){var m=d.split(`
`).slice(Math.max(0,this.line-5),this.line),g=d.indexOf(`
`,this.index);g===-1&&(g=d.length);var x=this.index-this.lastLineBreak,b=String(this.line).length;return u+=" at line "+this.line+" col "+x+`:

`,u+=m.map(function(F,M){return v(this.line-m.length+M+1,b)+" "+F},this).join(`
`),u+=`
`+v("",b+x)+`^
`,u}else return u+" at index "+(this.index-1);function v(F,M){var U=String(F);return Array(M-U.length+1).join(" ")+U}};function o(p,u,d){if(p instanceof n)var m=p,d=u;else var m=n.fromCompiled(p,u);this.grammar=m,this.options={keepHistory:!1,lexer:m.lexer||new i};for(var g in d||{})this.options[g]=d[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(m,0),b=this.table=[x];x.wants[m.start]=[],x.predict(m.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(p){var u=this.lexer;u.reset(p,this.lexerState);for(var d;;){try{if(d=u.next(),!d)break}catch(ae){var b=new r(this.grammar,this.current+1);this.table.push(b);var m=new Error(this.reportLexerError(ae));throw m.offset=this.current,m.token=ae.token,m}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,b=new r(this.grammar,x);this.table.push(b);for(var v=d.text!==void 0?d.text:d.value,F=u.constructor===i?d.value:u.transform?.(d)??d,M=g.scannable,U=M.length;U--;){var K=M[U],ne=K.rule.symbols[K.dot];if(ne.test?ne.test(F):ne.type?ne.type===d.type:ne.literal===v){var ie=K.nextState({data:F,token:d,isToken:!0,reference:x-1});b.states.push(ie)}}if(b.process(),b.states.length===0){var m=new Error(this.reportError(d));throw m.offset=this.current,m.token=d,m}this.options.keepHistory&&(g.lexerState=u.save()),this.current++}return g&&(this.lexerState=u.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(p){var u,d,m=p.token;return m?(u="input "+JSON.stringify(m.text[0])+" (lexer error)",d=this.lexer.formatError(m,"Syntax error")):(u="input (lexer error)",d=p.message),this.reportErrorCommon(d,u)},o.prototype.reportError=function(p){var u=(p.type?p.type+" token: ":"")+JSON.stringify(p.value!==void 0?p.value:p),d=this.lexer.formatError(p,"Syntax error");return this.reportErrorCommon(d,u)},o.prototype.reportErrorCommon=function(p,u){var d=[];d.push(p);var m=this.table.length-2,g=this.table[m],x=g.states.filter(function(v){var F=v.rule.symbols[v.dot];return F&&typeof F!="string"});if(x.length===0)d.push("Unexpected "+u+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,d);else{d.push("Unexpected "+u+`. Instead, I was expecting to see one of the following:
`);var b=x.map(function(v){return this.buildFirstStateStack(v,[])||[v]},this);b.forEach(function(v){var F=v[0],M=F.rule.symbols[F.dot],U=this.getSymbolDisplay(M);d.push("A "+U+" based on:"),this.displayStateStack(v,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(p,u){for(var d,m=0,g=0;g<p.length;g++){var x=p[g],b=x.rule.toString(x.dot);b===d?m++:(m>0&&u.push("    ^ "+m+" more lines identical to this"),m=0,u.push("    "+b)),d=b}},o.prototype.getSymbolDisplay=function(p){return a(p)},o.prototype.buildFirstStateStack=function(p,u){if(u.indexOf(p)!==-1)return null;if(p.wantedBy.length===0)return[p];var d=p.wantedBy[0],m=[p].concat(u),g=this.buildFirstStateStack(d,m);return g===null?null:[p].concat(g)},o.prototype.save=function(){var p=this.table[this.current];return p.lexerState=this.lexerState,p},o.prototype.restore=function(p){var u=p.index;this.current=u,this.table[u]=p,this.table.splice(u+1),this.lexerState=p.lexerState,this.results=this.finish()},o.prototype.rewind=function(p){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[p])},o.prototype.finish=function(){var p=[],u=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(m){m.rule.name===u&&m.dot===m.rule.symbols.length&&m.reference===0&&m.data!==o.fail&&p.push(m)}),p.map(function(m){return m.data})};function a(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return"character matching "+p;if(p.type)return p.type+" token";if(p.test)return"token matching "+String(p.test);throw new Error("Unknown symbol type: "+p)}}function l(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return p.toString();if(p.type)return"%"+p.type;if(p.test)return"<"+String(p.test)+">";throw new Error("Unknown symbol type: "+p)}}return{Parser:o,Grammar:n,Rule:t}})});var _M=Ke((wM,pd)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof pd=="object"&&pd.exports?pd.exports=e():t.moo=e()})(wM,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(N){return N&&e.call(N)==="[object RegExp]"}function i(N){return N&&typeof N=="object"&&!n(N)&&!Array.isArray(N)}function o(N){return N.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function a(N){var O=new RegExp("|"+N);return O.exec("").length-1}function l(N){return"("+N+")"}function p(N){if(!N.length)return"(?!)";var O=N.map(function(I){return"(?:"+I+")"}).join("|");return"(?:"+O+")"}function u(N){if(typeof N=="string")return"(?:"+o(N)+")";if(n(N)){if(N.ignoreCase)throw new Error("RegExp /i flag not allowed");if(N.global)throw new Error("RegExp /g flag is implied");if(N.sticky)throw new Error("RegExp /y flag is implied");if(N.multiline)throw new Error("RegExp /m flag is implied");return N.source}else throw new Error("Not a pattern: "+N)}function d(N,O){return N.length>O?N:Array(O-N.length+1).join(" ")+N}function m(N,O){for(var I=N.length,$=0;;){var q=N.lastIndexOf(`
`,I-1);if(q===-1||($++,I=q,$===O)||I===0)break}var Q=$<O?0:I+1;return N.substring(Q).split(`
`)}function g(N){for(var O=Object.getOwnPropertyNames(N),I=[],$=0;$<O.length;$++){var q=O[$],Q=N[q],Z=[].concat(Q);if(q==="include"){for(var te=0;te<Z.length;te++)I.push({include:Z[te]});continue}var he=[];Z.forEach(function(re){i(re)?(he.length&&I.push(b(q,he)),I.push(b(q,re)),he=[]):he.push(re)}),he.length&&I.push(b(q,he))}return I}function x(N){for(var O=[],I=0;I<N.length;I++){var $=N[I];if($.include){for(var q=[].concat($.include),Q=0;Q<q.length;Q++)O.push({include:q[Q]});continue}if(!$.type)throw new Error("Rule has no type: "+JSON.stringify($));O.push(b($.type,$))}return O}function b(N,O){if(i(O)||(O={match:O}),O.include)throw new Error("Matching rules cannot also include states");var I={defaultType:N,lineBreaks:!!O.error||!!O.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var $ in O)t.call(O,$)&&(I[$]=O[$]);if(typeof I.type=="string"&&N!==I.type)throw new Error("Type transform cannot be a string (type '"+I.type+"' for token '"+N+"')");var q=I.match;return I.match=Array.isArray(q)?q:q?[q]:[],I.match.sort(function(Q,Z){return n(Q)&&n(Z)?0:n(Z)?-1:n(Q)?1:Z.length-Q.length}),I}function v(N){return Array.isArray(N)?x(N):g(N)}var F=b("error",{lineBreaks:!0,shouldThrow:!0});function M(N,O){for(var I=null,$=Object.create(null),q=!0,Q=null,Z=[],te=[],he=0;he<N.length;he++)N[he].fallback&&(q=!1);for(var he=0;he<N.length;he++){var re=N[he];if(re.include)throw new Error("Inheritance is not allowed in stateless lexers");if(re.error||re.fallback){if(I)throw!re.fallback==!I.fallback?new Error("Multiple "+(re.fallback?"fallback":"error")+" rules not allowed (for token '"+re.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+re.defaultType+"')");I=re}var Re=re.match.slice();if(q)for(;Re.length&&typeof Re[0]=="string"&&Re[0].length===1;){var ar=Re.shift();$[ar.charCodeAt(0)]=re}if(re.pop||re.push||re.next){if(!O)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+re.defaultType+"')");if(re.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+re.defaultType+"')")}if(Re.length!==0){q=!1,Z.push(re);for(var ai=0;ai<Re.length;ai++){var cr=Re[ai];if(n(cr)){if(Q===null)Q=cr.unicode;else if(Q!==cr.unicode&&re.fallback===!1)throw new Error("If one rule is /u then all must be")}}var Tn=p(Re.map(u)),Pr=new RegExp(Tn);if(Pr.test(""))throw new Error("RegExp matches empty string: "+Pr);var vn=a(Tn);if(vn>0)throw new Error("RegExp has capture groups: "+Pr+`
Use (?: \u2026 ) instead`);if(!re.lineBreaks&&Pr.test(`
`))throw new Error("Rule should declare lineBreaks: "+Pr);te.push(l(Tn))}}var Qr=I&&I.fallback,Po=r&&!Qr?"ym":"gm",ci=r||Qr?"":"|";Q===!0&&(Po+="u");var Ps=new RegExp(p(te)+ci,Po);return{regexp:Ps,groups:Z,fast:$,error:I||F}}function U(N){var O=M(v(N));return new ae({start:O},"start")}function K(N,O,I){var $=N&&(N.push||N.next);if($&&!I[$])throw new Error("Missing state '"+$+"' (in token '"+N.defaultType+"' of state '"+O+"')");if(N&&N.pop&&+N.pop!=1)throw new Error("pop must be 1 (in token '"+N.defaultType+"' of state '"+O+"')")}function ne(N,O){var I=N.$all?v(N.$all):[];delete N.$all;var $=Object.getOwnPropertyNames(N);O||(O=$[0]);for(var q=Object.create(null),Q=0;Q<$.length;Q++){var Z=$[Q];q[Z]=v(N[Z]).concat(I)}for(var Q=0;Q<$.length;Q++)for(var Z=$[Q],te=q[Z],he=Object.create(null),re=0;re<te.length;re++){var Re=te[re];if(Re.include){var ar=[re,1];if(Re.include!==Z&&!he[Re.include]){he[Re.include]=!0;var ai=q[Re.include];if(!ai)throw new Error("Cannot include nonexistent state '"+Re.include+"' (in state '"+Z+"')");for(var cr=0;cr<ai.length;cr++){var Tn=ai[cr];te.indexOf(Tn)===-1&&ar.push(Tn)}}te.splice.apply(te,ar),re--}}for(var Pr=Object.create(null),Q=0;Q<$.length;Q++){var Z=$[Q];Pr[Z]=M(q[Z],!0)}for(var Q=0;Q<$.length;Q++){for(var vn=$[Q],Qr=Pr[vn],Po=Qr.groups,re=0;re<Po.length;re++)K(Po[re],vn,Pr);for(var ci=Object.getOwnPropertyNames(Qr.fast),re=0;re<ci.length;re++)K(Qr.fast[ci[re]],vn,Pr)}return new ae(Pr,O)}function ie(N){for(var O=typeof Map<"u",I=O?new Map:Object.create(null),$=Object.getOwnPropertyNames(N),q=0;q<$.length;q++){var Q=$[q],Z=N[Q],te=Array.isArray(Z)?Z:[Z];te.forEach(function(he){if(typeof he!="string")throw new Error("keyword must be string (in keyword '"+Q+"')");O?I.set(he,Q):I[he]=Q})}return function(he){return O?I.get(he):I[he]}}var ae=function(N,O){this.startState=O,this.states=N,this.buffer="",this.stack=[],this.reset()};ae.prototype.reset=function(N,O){return this.buffer=N||"",this.index=0,this.line=O?O.line:1,this.col=O?O.col:1,this.queuedToken=O?O.queuedToken:null,this.queuedText=O?O.queuedText:"",this.queuedThrow=O?O.queuedThrow:null,this.setState(O?O.state:this.startState),this.stack=O&&O.stack?O.stack.slice():[],this},ae.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},ae.prototype.setState=function(N){if(!(!N||this.state===N)){this.state=N;var O=this.states[N];this.groups=O.groups,this.error=O.error,this.re=O.regexp,this.fast=O.fast}},ae.prototype.popState=function(){this.setState(this.stack.pop())},ae.prototype.pushState=function(N){this.stack.push(this.state),this.setState(N)};var it=r?function(N,O){return N.exec(O)}:function(N,O){var I=N.exec(O);return I[0].length===0?null:I};ae.prototype._getGroup=function(N){for(var O=this.groups.length,I=0;I<O;I++)if(N[I+1]!==void 0)return this.groups[I];throw new Error("Cannot find token type for matched text")};function Ft(){return this.value}if(ae.prototype.next=function(){var N=this.index;if(this.queuedGroup){var O=this._token(this.queuedGroup,this.queuedText,N);return this.queuedGroup=null,this.queuedText="",O}var I=this.buffer;if(N!==I.length){var Z=this.fast[I.charCodeAt(N)];if(Z)return this._token(Z,I.charAt(N),N);var $=this.re;$.lastIndex=N;var q=it($,I),Q=this.error;if(q==null)return this._token(Q,I.slice(N,I.length),N);var Z=this._getGroup(q),te=q[0];return Q.fallback&&q.index!==N?(this.queuedGroup=Z,this.queuedText=te,this._token(Q,I.slice(N,q.index),N)):this._token(Z,te,N)}},ae.prototype._token=function(N,O,I){var $=0;if(N.lineBreaks){var q=/\n/g,Q=1;if(O===`
`)$=1;else for(;q.exec(O);)$++,Q=q.lastIndex}var Z={type:typeof N.type=="function"&&N.type(O)||N.defaultType,value:typeof N.value=="function"?N.value(O):O,text:O,toString:Ft,offset:I,lineBreaks:$,line:this.line,col:this.col},te=O.length;if(this.index+=te,this.line+=$,$!==0?this.col=te-Q+1:this.col+=te,N.shouldThrow){var he=new Error(this.formatError(Z,"invalid syntax"));throw he}return N.pop?this.popState():N.push?this.pushState(N.push):N.next&&this.setState(N.next),Z},typeof Symbol<"u"&&Symbol.iterator){var ct=function(N){this.lexer=N};ct.prototype.next=function(){var N=this.lexer.next();return{value:N,done:!N}},ct.prototype[Symbol.iterator]=function(){return this},ae.prototype[Symbol.iterator]=function(){return new ct(this)}}return ae.prototype.formatError=function(N,O){if(N==null)var I=this.buffer.slice(this.index),N={text:I,offset:this.index,lineBreaks:I.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var $=2,q=Math.max(N.line-$,1),Q=N.line+$,Z=String(Q).length,te=m(this.buffer,this.line-N.line+$+1).slice(0,5),he=[];he.push(O+" at line "+N.line+" col "+N.col+":"),he.push("");for(var re=0;re<te.length;re++){var Re=te[re],ar=q+re;he.push(d(String(ar),Z)+"  "+Re),ar===N.line&&he.push(d("",Z+N.col+1)+"^")}return he.join(`
`)},ae.prototype.clone=function(){return new ae(this.states,this.state)},ae.prototype.has=function(N){return!0},{compile:U,states:ne,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ie}})});var bl=Ke((Qn,hA)=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});function Dn(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var x5=typeof process=="object"&&process.env.NODE_ENV==="production";function ln(t,e){if(!t)throw x5?new Error("Invariant failed"):new Error(e())}Qn.invariant=ln;var BT=Object.prototype.hasOwnProperty,S5=Array.prototype.splice,T5=Object.prototype.toString;function is(t){return T5.call(t).slice(8,-1)}var Bd=Object.assign||function(t,e){return WT(e).forEach(function(r){BT.call(e,r)&&(t[r]=e[r])}),t},WT=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function uo(t){return Array.isArray(t)?Bd(t.constructor(t.length),t):is(t)==="Map"?new Map(t):is(t)==="Set"?new Set(t):t&&typeof t=="object"?Bd(Object.create(Object.getPrototypeOf(t)),t):t}var dA=function(){function t(){this.commands=Bd({},v5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||ln(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),ln(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return WT(i).forEach(function(a){if(BT.call(n.commands,a)){var l=e===o;o=n.commands[a](i[a],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var p=is(e)==="Map"?n.update(e.get(a),i[a]):n.update(e[a],i[a]),u=is(o)==="Map"?o.get(a):o[a];(!n.isEquals(p,u)||typeof p>"u"&&!BT.call(e,a))&&(o===e&&(o=uo(e)),is(o)==="Map"?o.set(a,p):o[a]=p)}}),o},t}();Qn.Context=dA;var v5={$push:function(t,e,r){return uA(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return uA(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return b5(e,r),t.forEach(function(i){mA(i),e===n&&i.length&&(e=uo(n)),S5.apply(e,i)}),e},$set:function(t,e,r){return _5(r),t},$toggle:function(t,e){vl(t,"$toggle");var r=t.length?uo(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return vl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=uo(n)),delete e[i])}),e},$add:function(t,e,r,n){return fA(e,"$add"),vl(t,"$add"),is(e)==="Map"?t.forEach(function(i){var o=i[0],a=i[1];e===n&&e.get(o)!==a&&(e=uo(n)),e.set(o,a)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=uo(n)),e.add(i)}),e},$remove:function(t,e,r,n){return fA(e,"$remove"),vl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=uo(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return E5(e,t),WT(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=uo(n)),e[i]=t[i])}),e},$apply:function(t,e){return w5(t),t(e)}},$T=new dA;Qn.isEquals=$T.update.isEquals;Qn.extend=$T.extend;Qn.default=$T.update;Qn.default.default=hA.exports=Bd(Qn.default,Qn);function uA(t,e,r){ln(Array.isArray(t),function(){return"update(): expected target of "+Dn(r)+" to be an array; got "+Dn(t)+"."}),vl(e[r],r)}function vl(t,e){ln(Array.isArray(t),function(){return"update(): expected spec of "+Dn(e)+" to be an array; got "+Dn(t)+". Did you forget to wrap your parameter in an array?"})}function b5(t,e){ln(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+Dn(t)}),mA(e.$splice)}function mA(t){ln(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+Dn(t)+". Did you forget to wrap your parameters in an array?"})}function w5(t){ln(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+Dn(t)+"."})}function _5(t){ln(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function E5(t,e){ln(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+Dn(e)}),ln(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+Dn(t)})}function fA(t,e){var r=is(t);ln(r==="Map"||r==="Set",function(){return"update(): "+Dn(e)+" expects a target of type Set or Map; got "+Dn(r)})}});var ob=Ke((ic,fp)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",l=500,p="__lodash_placeholder__",u=1,d=2,m=4,g=1,x=2,b=1,v=2,F=4,M=8,U=16,K=32,ne=64,ie=128,ae=256,it=512,Ft=30,ct="...",N=800,O=16,I=1,$=2,q=3,Q=1/0,Z=9007199254740991,te=17976931348623157e292,he=NaN,re=4294967295,Re=re-1,ar=re>>>1,ai=[["ary",ie],["bind",b],["bindKey",v],["curry",M],["curryRight",U],["flip",it],["partial",K],["partialRight",ne],["rearg",ae]],cr="[object Arguments]",Tn="[object Array]",Pr="[object AsyncFunction]",vn="[object Boolean]",Qr="[object Date]",Po="[object DOMException]",ci="[object Error]",Ps="[object Function]",Pw="[object GeneratorFunction]",bn="[object Map]",Tc="[object Number]",PC="[object Null]",li="[object Object]",Mw="[object Promise]",MC="[object Proxy]",vc="[object RegExp]",wn="[object Set]",bc="[object String]",Bp="[object Symbol]",AC="[object Undefined]",wc="[object WeakMap]",DC="[object WeakSet]",_c="[object ArrayBuffer]",Ms="[object DataView]",By="[object Float32Array]",Wy="[object Float64Array]",$y="[object Int8Array]",jy="[object Int16Array]",qy="[object Int32Array]",zy="[object Uint8Array]",Gy="[object Uint8ClampedArray]",Ky="[object Uint16Array]",Qy="[object Uint32Array]",IC=/\b__p \+= '';/g,FC=/\b(__p \+=) '' \+/g,CC=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Aw=/&(?:amp|lt|gt|quot|#39);/g,Dw=/[&<>"']/g,OC=RegExp(Aw.source),NC=RegExp(Dw.source),LC=/<%-([\s\S]+?)%>/g,UC=/<%([\s\S]+?)%>/g,Iw=/<%=([\s\S]+?)%>/g,HC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,VC=/^\w*$/,BC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zy=/[\\^$.*+?()[\]{}|]/g,WC=RegExp(Zy.source),Yy=/^\s+/,$C=/\s/,jC=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,qC=/\{\n\/\* \[wrapped with (.+)\] \*/,zC=/,? & /,GC=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,KC=/[()=,{}\[\]\/\s]/,QC=/\\(\\)?/g,ZC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Fw=/\w*$/,YC=/^[-+]0x[0-9a-f]+$/i,XC=/^0b[01]+$/i,JC=/^\[object .+?Constructor\]$/,eO=/^0o[0-7]+$/i,tO=/^(?:0|[1-9]\d*)$/,rO=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wp=/($^)/,nO=/['\n\r\u2028\u2029\\]/g,$p="\\ud800-\\udfff",iO="\\u0300-\\u036f",oO="\\ufe20-\\ufe2f",sO="\\u20d0-\\u20ff",Cw=iO+oO+sO,Ow="\\u2700-\\u27bf",Nw="a-z\\xdf-\\xf6\\xf8-\\xff",aO="\\xac\\xb1\\xd7\\xf7",cO="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",lO="\\u2000-\\u206f",pO=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Lw="A-Z\\xc0-\\xd6\\xd8-\\xde",Uw="\\ufe0e\\ufe0f",Hw=aO+cO+lO+pO,Xy="['\u2019]",uO="["+$p+"]",Vw="["+Hw+"]",jp="["+Cw+"]",Bw="\\d+",fO="["+Ow+"]",Ww="["+Nw+"]",$w="[^"+$p+Hw+Bw+Ow+Nw+Lw+"]",Jy="\\ud83c[\\udffb-\\udfff]",dO="(?:"+jp+"|"+Jy+")",jw="[^"+$p+"]",ex="(?:\\ud83c[\\udde6-\\uddff]){2}",tx="[\\ud800-\\udbff][\\udc00-\\udfff]",As="["+Lw+"]",qw="\\u200d",zw="(?:"+Ww+"|"+$w+")",mO="(?:"+As+"|"+$w+")",Gw="(?:"+Xy+"(?:d|ll|m|re|s|t|ve))?",Kw="(?:"+Xy+"(?:D|LL|M|RE|S|T|VE))?",Qw=dO+"?",Zw="["+Uw+"]?",hO="(?:"+qw+"(?:"+[jw,ex,tx].join("|")+")"+Zw+Qw+")*",gO="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yO="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Yw=Zw+Qw+hO,xO="(?:"+[fO,ex,tx].join("|")+")"+Yw,SO="(?:"+[jw+jp+"?",jp,ex,tx,uO].join("|")+")",TO=RegExp(Xy,"g"),vO=RegExp(jp,"g"),rx=RegExp(Jy+"(?="+Jy+")|"+SO+Yw,"g"),bO=RegExp([As+"?"+Ww+"+"+Gw+"(?="+[Vw,As,"$"].join("|")+")",mO+"+"+Kw+"(?="+[Vw,As+zw,"$"].join("|")+")",As+"?"+zw+"+"+Gw,As+"+"+Kw,yO,gO,Bw,xO].join("|"),"g"),wO=RegExp("["+qw+$p+Cw+Uw+"]"),_O=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,EO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],RO=-1,Xe={};Xe[By]=Xe[Wy]=Xe[$y]=Xe[jy]=Xe[qy]=Xe[zy]=Xe[Gy]=Xe[Ky]=Xe[Qy]=!0,Xe[cr]=Xe[Tn]=Xe[_c]=Xe[vn]=Xe[Ms]=Xe[Qr]=Xe[ci]=Xe[Ps]=Xe[bn]=Xe[Tc]=Xe[li]=Xe[vc]=Xe[wn]=Xe[bc]=Xe[wc]=!1;var Qe={};Qe[cr]=Qe[Tn]=Qe[_c]=Qe[Ms]=Qe[vn]=Qe[Qr]=Qe[By]=Qe[Wy]=Qe[$y]=Qe[jy]=Qe[qy]=Qe[bn]=Qe[Tc]=Qe[li]=Qe[vc]=Qe[wn]=Qe[bc]=Qe[Bp]=Qe[zy]=Qe[Gy]=Qe[Ky]=Qe[Qy]=!0,Qe[ci]=Qe[Ps]=Qe[wc]=!1;var kO={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},PO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},MO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},AO={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},DO=parseFloat,IO=parseInt,Xw=typeof global=="object"&&global&&global.Object===Object&&global,FO=typeof self=="object"&&self&&self.Object===Object&&self,Et=Xw||FO||Function("return this")(),nx=typeof ic=="object"&&ic&&!ic.nodeType&&ic,Mo=nx&&typeof fp=="object"&&fp&&!fp.nodeType&&fp,Jw=Mo&&Mo.exports===nx,ix=Jw&&Xw.process,Zr=function(){try{var P=Mo&&Mo.require&&Mo.require("util").types;return P||ix&&ix.binding&&ix.binding("util")}catch{}}(),e_=Zr&&Zr.isArrayBuffer,t_=Zr&&Zr.isDate,r_=Zr&&Zr.isMap,n_=Zr&&Zr.isRegExp,i_=Zr&&Zr.isSet,o_=Zr&&Zr.isTypedArray;function Mr(P,H,L){switch(L.length){case 0:return P.call(H);case 1:return P.call(H,L[0]);case 2:return P.call(H,L[0],L[1]);case 3:return P.call(H,L[0],L[1],L[2])}return P.apply(H,L)}function CO(P,H,L,ee){for(var ye=-1,Ve=P==null?0:P.length;++ye<Ve;){var xt=P[ye];H(ee,xt,L(xt),P)}return ee}function Yr(P,H){for(var L=-1,ee=P==null?0:P.length;++L<ee&&H(P[L],L,P)!==!1;);return P}function OO(P,H){for(var L=P==null?0:P.length;L--&&H(P[L],L,P)!==!1;);return P}function s_(P,H){for(var L=-1,ee=P==null?0:P.length;++L<ee;)if(!H(P[L],L,P))return!1;return!0}function Li(P,H){for(var L=-1,ee=P==null?0:P.length,ye=0,Ve=[];++L<ee;){var xt=P[L];H(xt,L,P)&&(Ve[ye++]=xt)}return Ve}function qp(P,H){var L=P==null?0:P.length;return!!L&&Ds(P,H,0)>-1}function ox(P,H,L){for(var ee=-1,ye=P==null?0:P.length;++ee<ye;)if(L(H,P[ee]))return!0;return!1}function tt(P,H){for(var L=-1,ee=P==null?0:P.length,ye=Array(ee);++L<ee;)ye[L]=H(P[L],L,P);return ye}function Ui(P,H){for(var L=-1,ee=H.length,ye=P.length;++L<ee;)P[ye+L]=H[L];return P}function sx(P,H,L,ee){var ye=-1,Ve=P==null?0:P.length;for(ee&&Ve&&(L=P[++ye]);++ye<Ve;)L=H(L,P[ye],ye,P);return L}function NO(P,H,L,ee){var ye=P==null?0:P.length;for(ee&&ye&&(L=P[--ye]);ye--;)L=H(L,P[ye],ye,P);return L}function ax(P,H){for(var L=-1,ee=P==null?0:P.length;++L<ee;)if(H(P[L],L,P))return!0;return!1}var LO=cx("length");function UO(P){return P.split("")}function HO(P){return P.match(GC)||[]}function a_(P,H,L){var ee;return L(P,function(ye,Ve,xt){if(H(ye,Ve,xt))return ee=Ve,!1}),ee}function zp(P,H,L,ee){for(var ye=P.length,Ve=L+(ee?1:-1);ee?Ve--:++Ve<ye;)if(H(P[Ve],Ve,P))return Ve;return-1}function Ds(P,H,L){return H===H?YO(P,H,L):zp(P,c_,L)}function VO(P,H,L,ee){for(var ye=L-1,Ve=P.length;++ye<Ve;)if(ee(P[ye],H))return ye;return-1}function c_(P){return P!==P}function l_(P,H){var L=P==null?0:P.length;return L?px(P,H)/L:he}function cx(P){return function(H){return H==null?t:H[P]}}function lx(P){return function(H){return P==null?t:P[H]}}function p_(P,H,L,ee,ye){return ye(P,function(Ve,xt,Ge){L=ee?(ee=!1,Ve):H(L,Ve,xt,Ge)}),L}function BO(P,H){var L=P.length;for(P.sort(H);L--;)P[L]=P[L].value;return P}function px(P,H){for(var L,ee=-1,ye=P.length;++ee<ye;){var Ve=H(P[ee]);Ve!==t&&(L=L===t?Ve:L+Ve)}return L}function ux(P,H){for(var L=-1,ee=Array(P);++L<P;)ee[L]=H(L);return ee}function WO(P,H){return tt(H,function(L){return[L,P[L]]})}function u_(P){return P&&P.slice(0,h_(P)+1).replace(Yy,"")}function Ar(P){return function(H){return P(H)}}function fx(P,H){return tt(H,function(L){return P[L]})}function Ec(P,H){return P.has(H)}function f_(P,H){for(var L=-1,ee=P.length;++L<ee&&Ds(H,P[L],0)>-1;);return L}function d_(P,H){for(var L=P.length;L--&&Ds(H,P[L],0)>-1;);return L}function $O(P,H){for(var L=P.length,ee=0;L--;)P[L]===H&&++ee;return ee}var jO=lx(kO),qO=lx(PO);function zO(P){return"\\"+AO[P]}function GO(P,H){return P==null?t:P[H]}function Is(P){return wO.test(P)}function KO(P){return _O.test(P)}function QO(P){for(var H,L=[];!(H=P.next()).done;)L.push(H.value);return L}function dx(P){var H=-1,L=Array(P.size);return P.forEach(function(ee,ye){L[++H]=[ye,ee]}),L}function m_(P,H){return function(L){return P(H(L))}}function Hi(P,H){for(var L=-1,ee=P.length,ye=0,Ve=[];++L<ee;){var xt=P[L];(xt===H||xt===p)&&(P[L]=p,Ve[ye++]=L)}return Ve}function Gp(P){var H=-1,L=Array(P.size);return P.forEach(function(ee){L[++H]=ee}),L}function ZO(P){var H=-1,L=Array(P.size);return P.forEach(function(ee){L[++H]=[ee,ee]}),L}function YO(P,H,L){for(var ee=L-1,ye=P.length;++ee<ye;)if(P[ee]===H)return ee;return-1}function XO(P,H,L){for(var ee=L+1;ee--;)if(P[ee]===H)return ee;return ee}function Fs(P){return Is(P)?eN(P):LO(P)}function _n(P){return Is(P)?tN(P):UO(P)}function h_(P){for(var H=P.length;H--&&$C.test(P.charAt(H)););return H}var JO=lx(MO);function eN(P){for(var H=rx.lastIndex=0;rx.test(P);)++H;return H}function tN(P){return P.match(rx)||[]}function rN(P){return P.match(bO)||[]}var nN=function P(H){H=H==null?Et:Vi.defaults(Et.Object(),H,Vi.pick(Et,EO));var L=H.Array,ee=H.Date,ye=H.Error,Ve=H.Function,xt=H.Math,Ge=H.Object,mx=H.RegExp,iN=H.String,Xr=H.TypeError,Kp=L.prototype,oN=Ve.prototype,Cs=Ge.prototype,Qp=H["__core-js_shared__"],Zp=oN.toString,$e=Cs.hasOwnProperty,sN=0,g_=function(){var s=/[^.]+$/.exec(Qp&&Qp.keys&&Qp.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Yp=Cs.toString,aN=Zp.call(Ge),cN=Et._,lN=mx("^"+Zp.call($e).replace(Zy,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xp=Jw?H.Buffer:t,Bi=H.Symbol,Jp=H.Uint8Array,y_=Xp?Xp.allocUnsafe:t,eu=m_(Ge.getPrototypeOf,Ge),x_=Ge.create,S_=Cs.propertyIsEnumerable,tu=Kp.splice,T_=Bi?Bi.isConcatSpreadable:t,Rc=Bi?Bi.iterator:t,Ao=Bi?Bi.toStringTag:t,ru=function(){try{var s=Oo(Ge,"defineProperty");return s({},"",{}),s}catch{}}(),pN=H.clearTimeout!==Et.clearTimeout&&H.clearTimeout,uN=ee&&ee.now!==Et.Date.now&&ee.now,fN=H.setTimeout!==Et.setTimeout&&H.setTimeout,nu=xt.ceil,iu=xt.floor,hx=Ge.getOwnPropertySymbols,dN=Xp?Xp.isBuffer:t,v_=H.isFinite,mN=Kp.join,hN=m_(Ge.keys,Ge),St=xt.max,Vt=xt.min,gN=ee.now,yN=H.parseInt,b_=xt.random,xN=Kp.reverse,gx=Oo(H,"DataView"),kc=Oo(H,"Map"),yx=Oo(H,"Promise"),Os=Oo(H,"Set"),Pc=Oo(H,"WeakMap"),Mc=Oo(Ge,"create"),ou=Pc&&new Pc,Ns={},SN=No(gx),TN=No(kc),vN=No(yx),bN=No(Os),wN=No(Pc),su=Bi?Bi.prototype:t,Ac=su?su.valueOf:t,w_=su?su.toString:t;function S(s){if(lt(s)&&!xe(s)&&!(s instanceof De)){if(s instanceof Jr)return s;if($e.call(s,"__wrapped__"))return _0(s)}return new Jr(s)}var Ls=function(){function s(){}return function(c){if(!ot(c))return{};if(x_)return x_(c);s.prototype=c;var f=new s;return s.prototype=t,f}}();function au(){}function Jr(s,c){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}S.templateSettings={escape:LC,evaluate:UC,interpolate:Iw,variable:"",imports:{_:S}},S.prototype=au.prototype,S.prototype.constructor=S,Jr.prototype=Ls(au.prototype),Jr.prototype.constructor=Jr;function De(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function _N(){var s=new De(this.__wrapped__);return s.__actions__=lr(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=lr(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=lr(this.__views__),s}function EN(){if(this.__filtered__){var s=new De(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function RN(){var s=this.__wrapped__.value(),c=this.__dir__,f=xe(s),h=c<0,y=f?s.length:0,T=UL(0,y,this.__views__),E=T.start,R=T.end,D=R-E,V=h?R:E-1,B=this.__iteratees__,j=B.length,Y=0,oe=Vt(D,this.__takeCount__);if(!f||!h&&y==D&&oe==D)return G_(s,this.__actions__);var fe=[];e:for(;D--&&Y<oe;){V+=c;for(var Ee=-1,de=s[V];++Ee<j;){var Pe=B[Ee],Ie=Pe.iteratee,Fr=Pe.type,Jt=Ie(de);if(Fr==$)de=Jt;else if(!Jt){if(Fr==I)continue e;break e}}fe[Y++]=de}return fe}De.prototype=Ls(au.prototype),De.prototype.constructor=De;function Do(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var h=s[c];this.set(h[0],h[1])}}function kN(){this.__data__=Mc?Mc(null):{},this.size=0}function PN(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}function MN(s){var c=this.__data__;if(Mc){var f=c[s];return f===a?t:f}return $e.call(c,s)?c[s]:t}function AN(s){var c=this.__data__;return Mc?c[s]!==t:$e.call(c,s)}function DN(s,c){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=Mc&&c===t?a:c,this}Do.prototype.clear=kN,Do.prototype.delete=PN,Do.prototype.get=MN,Do.prototype.has=AN,Do.prototype.set=DN;function pi(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var h=s[c];this.set(h[0],h[1])}}function IN(){this.__data__=[],this.size=0}function FN(s){var c=this.__data__,f=cu(c,s);if(f<0)return!1;var h=c.length-1;return f==h?c.pop():tu.call(c,f,1),--this.size,!0}function CN(s){var c=this.__data__,f=cu(c,s);return f<0?t:c[f][1]}function ON(s){return cu(this.__data__,s)>-1}function NN(s,c){var f=this.__data__,h=cu(f,s);return h<0?(++this.size,f.push([s,c])):f[h][1]=c,this}pi.prototype.clear=IN,pi.prototype.delete=FN,pi.prototype.get=CN,pi.prototype.has=ON,pi.prototype.set=NN;function ui(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var h=s[c];this.set(h[0],h[1])}}function LN(){this.size=0,this.__data__={hash:new Do,map:new(kc||pi),string:new Do}}function UN(s){var c=Tu(this,s).delete(s);return this.size-=c?1:0,c}function HN(s){return Tu(this,s).get(s)}function VN(s){return Tu(this,s).has(s)}function BN(s,c){var f=Tu(this,s),h=f.size;return f.set(s,c),this.size+=f.size==h?0:1,this}ui.prototype.clear=LN,ui.prototype.delete=UN,ui.prototype.get=HN,ui.prototype.has=VN,ui.prototype.set=BN;function Io(s){var c=-1,f=s==null?0:s.length;for(this.__data__=new ui;++c<f;)this.add(s[c])}function WN(s){return this.__data__.set(s,a),this}function $N(s){return this.__data__.has(s)}Io.prototype.add=Io.prototype.push=WN,Io.prototype.has=$N;function En(s){var c=this.__data__=new pi(s);this.size=c.size}function jN(){this.__data__=new pi,this.size=0}function qN(s){var c=this.__data__,f=c.delete(s);return this.size=c.size,f}function zN(s){return this.__data__.get(s)}function GN(s){return this.__data__.has(s)}function KN(s,c){var f=this.__data__;if(f instanceof pi){var h=f.__data__;if(!kc||h.length<r-1)return h.push([s,c]),this.size=++f.size,this;f=this.__data__=new ui(h)}return f.set(s,c),this.size=f.size,this}En.prototype.clear=jN,En.prototype.delete=qN,En.prototype.get=zN,En.prototype.has=GN,En.prototype.set=KN;function __(s,c){var f=xe(s),h=!f&&Lo(s),y=!f&&!h&&zi(s),T=!f&&!h&&!y&&Bs(s),E=f||h||y||T,R=E?ux(s.length,iN):[],D=R.length;for(var V in s)(c||$e.call(s,V))&&!(E&&(V=="length"||y&&(V=="offset"||V=="parent")||T&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||hi(V,D)))&&R.push(V);return R}function E_(s){var c=s.length;return c?s[Px(0,c-1)]:t}function QN(s,c){return vu(lr(s),Fo(c,0,s.length))}function ZN(s){return vu(lr(s))}function xx(s,c,f){(f!==t&&!Rn(s[c],f)||f===t&&!(c in s))&&fi(s,c,f)}function Dc(s,c,f){var h=s[c];(!($e.call(s,c)&&Rn(h,f))||f===t&&!(c in s))&&fi(s,c,f)}function cu(s,c){for(var f=s.length;f--;)if(Rn(s[f][0],c))return f;return-1}function YN(s,c,f,h){return Wi(s,function(y,T,E){c(h,y,f(y),E)}),h}function R_(s,c){return s&&Bn(c,Rt(c),s)}function XN(s,c){return s&&Bn(c,ur(c),s)}function fi(s,c,f){c=="__proto__"&&ru?ru(s,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[c]=f}function Sx(s,c){for(var f=-1,h=c.length,y=L(h),T=s==null;++f<h;)y[f]=T?t:Jx(s,c[f]);return y}function Fo(s,c,f){return s===s&&(f!==t&&(s=s<=f?s:f),c!==t&&(s=s>=c?s:c)),s}function en(s,c,f,h,y,T){var E,R=c&u,D=c&d,V=c&m;if(f&&(E=y?f(s,h,y,T):f(s)),E!==t)return E;if(!ot(s))return s;var B=xe(s);if(B){if(E=VL(s),!R)return lr(s,E)}else{var j=Bt(s),Y=j==Ps||j==Pw;if(zi(s))return Z_(s,R);if(j==li||j==cr||Y&&!y){if(E=D||Y?{}:h0(s),!R)return D?ML(s,XN(E,s)):PL(s,R_(E,s))}else{if(!Qe[j])return y?s:{};E=BL(s,j,R)}}T||(T=new En);var oe=T.get(s);if(oe)return oe;T.set(s,E),j0(s)?s.forEach(function(de){E.add(en(de,c,f,de,s,T))}):W0(s)&&s.forEach(function(de,Pe){E.set(Pe,en(de,c,f,Pe,s,T))});var fe=V?D?Hx:Ux:D?ur:Rt,Ee=B?t:fe(s);return Yr(Ee||s,function(de,Pe){Ee&&(Pe=de,de=s[Pe]),Dc(E,Pe,en(de,c,f,Pe,s,T))}),E}function JN(s){var c=Rt(s);return function(f){return k_(f,s,c)}}function k_(s,c,f){var h=f.length;if(s==null)return!h;for(s=Ge(s);h--;){var y=f[h],T=c[y],E=s[y];if(E===t&&!(y in s)||!T(E))return!1}return!0}function P_(s,c,f){if(typeof s!="function")throw new Xr(i);return Uc(function(){s.apply(t,f)},c)}function Ic(s,c,f,h){var y=-1,T=qp,E=!0,R=s.length,D=[],V=c.length;if(!R)return D;f&&(c=tt(c,Ar(f))),h?(T=ox,E=!1):c.length>=r&&(T=Ec,E=!1,c=new Io(c));e:for(;++y<R;){var B=s[y],j=f==null?B:f(B);if(B=h||B!==0?B:0,E&&j===j){for(var Y=V;Y--;)if(c[Y]===j)continue e;D.push(B)}else T(c,j,h)||D.push(B)}return D}var Wi=t0(Vn),M_=t0(vx,!0);function eL(s,c){var f=!0;return Wi(s,function(h,y,T){return f=!!c(h,y,T),f}),f}function lu(s,c,f){for(var h=-1,y=s.length;++h<y;){var T=s[h],E=c(T);if(E!=null&&(R===t?E===E&&!Ir(E):f(E,R)))var R=E,D=T}return D}function tL(s,c,f,h){var y=s.length;for(f=be(f),f<0&&(f=-f>y?0:y+f),h=h===t||h>y?y:be(h),h<0&&(h+=y),h=f>h?0:z0(h);f<h;)s[f++]=c;return s}function A_(s,c){var f=[];return Wi(s,function(h,y,T){c(h,y,T)&&f.push(h)}),f}function Ct(s,c,f,h,y){var T=-1,E=s.length;for(f||(f=$L),y||(y=[]);++T<E;){var R=s[T];c>0&&f(R)?c>1?Ct(R,c-1,f,h,y):Ui(y,R):h||(y[y.length]=R)}return y}var Tx=r0(),D_=r0(!0);function Vn(s,c){return s&&Tx(s,c,Rt)}function vx(s,c){return s&&D_(s,c,Rt)}function pu(s,c){return Li(c,function(f){return gi(s[f])})}function Co(s,c){c=ji(c,s);for(var f=0,h=c.length;s!=null&&f<h;)s=s[Wn(c[f++])];return f&&f==h?s:t}function I_(s,c,f){var h=c(s);return xe(s)?h:Ui(h,f(s))}function Yt(s){return s==null?s===t?AC:PC:Ao&&Ao in Ge(s)?LL(s):ZL(s)}function bx(s,c){return s>c}function rL(s,c){return s!=null&&$e.call(s,c)}function nL(s,c){return s!=null&&c in Ge(s)}function iL(s,c,f){return s>=Vt(c,f)&&s<St(c,f)}function wx(s,c,f){for(var h=f?ox:qp,y=s[0].length,T=s.length,E=T,R=L(T),D=1/0,V=[];E--;){var B=s[E];E&&c&&(B=tt(B,Ar(c))),D=Vt(B.length,D),R[E]=!f&&(c||y>=120&&B.length>=120)?new Io(E&&B):t}B=s[0];var j=-1,Y=R[0];e:for(;++j<y&&V.length<D;){var oe=B[j],fe=c?c(oe):oe;if(oe=f||oe!==0?oe:0,!(Y?Ec(Y,fe):h(V,fe,f))){for(E=T;--E;){var Ee=R[E];if(!(Ee?Ec(Ee,fe):h(s[E],fe,f)))continue e}Y&&Y.push(fe),V.push(oe)}}return V}function oL(s,c,f,h){return Vn(s,function(y,T,E){c(h,f(y),T,E)}),h}function Fc(s,c,f){c=ji(c,s),s=S0(s,c);var h=s==null?s:s[Wn(rn(c))];return h==null?t:Mr(h,s,f)}function F_(s){return lt(s)&&Yt(s)==cr}function sL(s){return lt(s)&&Yt(s)==_c}function aL(s){return lt(s)&&Yt(s)==Qr}function Cc(s,c,f,h,y){return s===c?!0:s==null||c==null||!lt(s)&&!lt(c)?s!==s&&c!==c:cL(s,c,f,h,Cc,y)}function cL(s,c,f,h,y,T){var E=xe(s),R=xe(c),D=E?Tn:Bt(s),V=R?Tn:Bt(c);D=D==cr?li:D,V=V==cr?li:V;var B=D==li,j=V==li,Y=D==V;if(Y&&zi(s)){if(!zi(c))return!1;E=!0,B=!1}if(Y&&!B)return T||(T=new En),E||Bs(s)?f0(s,c,f,h,y,T):OL(s,c,D,f,h,y,T);if(!(f&g)){var oe=B&&$e.call(s,"__wrapped__"),fe=j&&$e.call(c,"__wrapped__");if(oe||fe){var Ee=oe?s.value():s,de=fe?c.value():c;return T||(T=new En),y(Ee,de,f,h,T)}}return Y?(T||(T=new En),NL(s,c,f,h,y,T)):!1}function lL(s){return lt(s)&&Bt(s)==bn}function _x(s,c,f,h){var y=f.length,T=y,E=!h;if(s==null)return!T;for(s=Ge(s);y--;){var R=f[y];if(E&&R[2]?R[1]!==s[R[0]]:!(R[0]in s))return!1}for(;++y<T;){R=f[y];var D=R[0],V=s[D],B=R[1];if(E&&R[2]){if(V===t&&!(D in s))return!1}else{var j=new En;if(h)var Y=h(V,B,D,s,c,j);if(!(Y===t?Cc(B,V,g|x,h,j):Y))return!1}}return!0}function C_(s){if(!ot(s)||qL(s))return!1;var c=gi(s)?lN:JC;return c.test(No(s))}function pL(s){return lt(s)&&Yt(s)==vc}function uL(s){return lt(s)&&Bt(s)==wn}function fL(s){return lt(s)&&ku(s.length)&&!!Xe[Yt(s)]}function O_(s){return typeof s=="function"?s:s==null?fr:typeof s=="object"?xe(s)?U_(s[0],s[1]):L_(s):nE(s)}function Ex(s){if(!Lc(s))return hN(s);var c=[];for(var f in Ge(s))$e.call(s,f)&&f!="constructor"&&c.push(f);return c}function dL(s){if(!ot(s))return QL(s);var c=Lc(s),f=[];for(var h in s)h=="constructor"&&(c||!$e.call(s,h))||f.push(h);return f}function Rx(s,c){return s<c}function N_(s,c){var f=-1,h=pr(s)?L(s.length):[];return Wi(s,function(y,T,E){h[++f]=c(y,T,E)}),h}function L_(s){var c=Bx(s);return c.length==1&&c[0][2]?y0(c[0][0],c[0][1]):function(f){return f===s||_x(f,s,c)}}function U_(s,c){return $x(s)&&g0(c)?y0(Wn(s),c):function(f){var h=Jx(f,s);return h===t&&h===c?eS(f,s):Cc(c,h,g|x)}}function uu(s,c,f,h,y){s!==c&&Tx(c,function(T,E){if(y||(y=new En),ot(T))mL(s,c,E,f,uu,h,y);else{var R=h?h(qx(s,E),T,E+"",s,c,y):t;R===t&&(R=T),xx(s,E,R)}},ur)}function mL(s,c,f,h,y,T,E){var R=qx(s,f),D=qx(c,f),V=E.get(D);if(V){xx(s,f,V);return}var B=T?T(R,D,f+"",s,c,E):t,j=B===t;if(j){var Y=xe(D),oe=!Y&&zi(D),fe=!Y&&!oe&&Bs(D);B=D,Y||oe||fe?xe(R)?B=R:pt(R)?B=lr(R):oe?(j=!1,B=Z_(D,!0)):fe?(j=!1,B=Y_(D,!0)):B=[]:Hc(D)||Lo(D)?(B=R,Lo(R)?B=G0(R):(!ot(R)||gi(R))&&(B=h0(D))):j=!1}j&&(E.set(D,B),y(B,D,h,T,E),E.delete(D)),xx(s,f,B)}function H_(s,c){var f=s.length;if(f)return c+=c<0?f:0,hi(c,f)?s[c]:t}function V_(s,c,f){c.length?c=tt(c,function(T){return xe(T)?function(E){return Co(E,T.length===1?T[0]:T)}:T}):c=[fr];var h=-1;c=tt(c,Ar(ue()));var y=N_(s,function(T,E,R){var D=tt(c,function(V){return V(T)});return{criteria:D,index:++h,value:T}});return BO(y,function(T,E){return kL(T,E,f)})}function hL(s,c){return B_(s,c,function(f,h){return eS(s,h)})}function B_(s,c,f){for(var h=-1,y=c.length,T={};++h<y;){var E=c[h],R=Co(s,E);f(R,E)&&Oc(T,ji(E,s),R)}return T}function gL(s){return function(c){return Co(c,s)}}function kx(s,c,f,h){var y=h?VO:Ds,T=-1,E=c.length,R=s;for(s===c&&(c=lr(c)),f&&(R=tt(s,Ar(f)));++T<E;)for(var D=0,V=c[T],B=f?f(V):V;(D=y(R,B,D,h))>-1;)R!==s&&tu.call(R,D,1),tu.call(s,D,1);return s}function W_(s,c){for(var f=s?c.length:0,h=f-1;f--;){var y=c[f];if(f==h||y!==T){var T=y;hi(y)?tu.call(s,y,1):Dx(s,y)}}return s}function Px(s,c){return s+iu(b_()*(c-s+1))}function yL(s,c,f,h){for(var y=-1,T=St(nu((c-s)/(f||1)),0),E=L(T);T--;)E[h?T:++y]=s,s+=f;return E}function Mx(s,c){var f="";if(!s||c<1||c>Z)return f;do c%2&&(f+=s),c=iu(c/2),c&&(s+=s);while(c);return f}function ke(s,c){return zx(x0(s,c,fr),s+"")}function xL(s){return E_(Ws(s))}function SL(s,c){var f=Ws(s);return vu(f,Fo(c,0,f.length))}function Oc(s,c,f,h){if(!ot(s))return s;c=ji(c,s);for(var y=-1,T=c.length,E=T-1,R=s;R!=null&&++y<T;){var D=Wn(c[y]),V=f;if(D==="__proto__"||D==="constructor"||D==="prototype")return s;if(y!=E){var B=R[D];V=h?h(B,D,R):t,V===t&&(V=ot(B)?B:hi(c[y+1])?[]:{})}Dc(R,D,V),R=R[D]}return s}var $_=ou?function(s,c){return ou.set(s,c),s}:fr,TL=ru?function(s,c){return ru(s,"toString",{configurable:!0,enumerable:!1,value:rS(c),writable:!0})}:fr;function vL(s){return vu(Ws(s))}function tn(s,c,f){var h=-1,y=s.length;c<0&&(c=-c>y?0:y+c),f=f>y?y:f,f<0&&(f+=y),y=c>f?0:f-c>>>0,c>>>=0;for(var T=L(y);++h<y;)T[h]=s[h+c];return T}function bL(s,c){var f;return Wi(s,function(h,y,T){return f=c(h,y,T),!f}),!!f}function fu(s,c,f){var h=0,y=s==null?h:s.length;if(typeof c=="number"&&c===c&&y<=ar){for(;h<y;){var T=h+y>>>1,E=s[T];E!==null&&!Ir(E)&&(f?E<=c:E<c)?h=T+1:y=T}return y}return Ax(s,c,fr,f)}function Ax(s,c,f,h){var y=0,T=s==null?0:s.length;if(T===0)return 0;c=f(c);for(var E=c!==c,R=c===null,D=Ir(c),V=c===t;y<T;){var B=iu((y+T)/2),j=f(s[B]),Y=j!==t,oe=j===null,fe=j===j,Ee=Ir(j);if(E)var de=h||fe;else V?de=fe&&(h||Y):R?de=fe&&Y&&(h||!oe):D?de=fe&&Y&&!oe&&(h||!Ee):oe||Ee?de=!1:de=h?j<=c:j<c;de?y=B+1:T=B}return Vt(T,Re)}function j_(s,c){for(var f=-1,h=s.length,y=0,T=[];++f<h;){var E=s[f],R=c?c(E):E;if(!f||!Rn(R,D)){var D=R;T[y++]=E===0?0:E}}return T}function q_(s){return typeof s=="number"?s:Ir(s)?he:+s}function Dr(s){if(typeof s=="string")return s;if(xe(s))return tt(s,Dr)+"";if(Ir(s))return w_?w_.call(s):"";var c=s+"";return c=="0"&&1/s==-Q?"-0":c}function $i(s,c,f){var h=-1,y=qp,T=s.length,E=!0,R=[],D=R;if(f)E=!1,y=ox;else if(T>=r){var V=c?null:FL(s);if(V)return Gp(V);E=!1,y=Ec,D=new Io}else D=c?[]:R;e:for(;++h<T;){var B=s[h],j=c?c(B):B;if(B=f||B!==0?B:0,E&&j===j){for(var Y=D.length;Y--;)if(D[Y]===j)continue e;c&&D.push(j),R.push(B)}else y(D,j,f)||(D!==R&&D.push(j),R.push(B))}return R}function Dx(s,c){return c=ji(c,s),s=S0(s,c),s==null||delete s[Wn(rn(c))]}function z_(s,c,f,h){return Oc(s,c,f(Co(s,c)),h)}function du(s,c,f,h){for(var y=s.length,T=h?y:-1;(h?T--:++T<y)&&c(s[T],T,s););return f?tn(s,h?0:T,h?T+1:y):tn(s,h?T+1:0,h?y:T)}function G_(s,c){var f=s;return f instanceof De&&(f=f.value()),sx(c,function(h,y){return y.func.apply(y.thisArg,Ui([h],y.args))},f)}function Ix(s,c,f){var h=s.length;if(h<2)return h?$i(s[0]):[];for(var y=-1,T=L(h);++y<h;)for(var E=s[y],R=-1;++R<h;)R!=y&&(T[y]=Ic(T[y]||E,s[R],c,f));return $i(Ct(T,1),c,f)}function K_(s,c,f){for(var h=-1,y=s.length,T=c.length,E={};++h<y;){var R=h<T?c[h]:t;f(E,s[h],R)}return E}function Fx(s){return pt(s)?s:[]}function Cx(s){return typeof s=="function"?s:fr}function ji(s,c){return xe(s)?s:$x(s,c)?[s]:w0(We(s))}var wL=ke;function qi(s,c,f){var h=s.length;return f=f===t?h:f,!c&&f>=h?s:tn(s,c,f)}var Q_=pN||function(s){return Et.clearTimeout(s)};function Z_(s,c){if(c)return s.slice();var f=s.length,h=y_?y_(f):new s.constructor(f);return s.copy(h),h}function Ox(s){var c=new s.constructor(s.byteLength);return new Jp(c).set(new Jp(s)),c}function _L(s,c){var f=c?Ox(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.byteLength)}function EL(s){var c=new s.constructor(s.source,Fw.exec(s));return c.lastIndex=s.lastIndex,c}function RL(s){return Ac?Ge(Ac.call(s)):{}}function Y_(s,c){var f=c?Ox(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}function X_(s,c){if(s!==c){var f=s!==t,h=s===null,y=s===s,T=Ir(s),E=c!==t,R=c===null,D=c===c,V=Ir(c);if(!R&&!V&&!T&&s>c||T&&E&&D&&!R&&!V||h&&E&&D||!f&&D||!y)return 1;if(!h&&!T&&!V&&s<c||V&&f&&y&&!h&&!T||R&&f&&y||!E&&y||!D)return-1}return 0}function kL(s,c,f){for(var h=-1,y=s.criteria,T=c.criteria,E=y.length,R=f.length;++h<E;){var D=X_(y[h],T[h]);if(D){if(h>=R)return D;var V=f[h];return D*(V=="desc"?-1:1)}}return s.index-c.index}function J_(s,c,f,h){for(var y=-1,T=s.length,E=f.length,R=-1,D=c.length,V=St(T-E,0),B=L(D+V),j=!h;++R<D;)B[R]=c[R];for(;++y<E;)(j||y<T)&&(B[f[y]]=s[y]);for(;V--;)B[R++]=s[y++];return B}function e0(s,c,f,h){for(var y=-1,T=s.length,E=-1,R=f.length,D=-1,V=c.length,B=St(T-R,0),j=L(B+V),Y=!h;++y<B;)j[y]=s[y];for(var oe=y;++D<V;)j[oe+D]=c[D];for(;++E<R;)(Y||y<T)&&(j[oe+f[E]]=s[y++]);return j}function lr(s,c){var f=-1,h=s.length;for(c||(c=L(h));++f<h;)c[f]=s[f];return c}function Bn(s,c,f,h){var y=!f;f||(f={});for(var T=-1,E=c.length;++T<E;){var R=c[T],D=h?h(f[R],s[R],R,f,s):t;D===t&&(D=s[R]),y?fi(f,R,D):Dc(f,R,D)}return f}function PL(s,c){return Bn(s,Wx(s),c)}function ML(s,c){return Bn(s,d0(s),c)}function mu(s,c){return function(f,h){var y=xe(f)?CO:YN,T=c?c():{};return y(f,s,ue(h,2),T)}}function Us(s){return ke(function(c,f){var h=-1,y=f.length,T=y>1?f[y-1]:t,E=y>2?f[2]:t;for(T=s.length>3&&typeof T=="function"?(y--,T):t,E&&Xt(f[0],f[1],E)&&(T=y<3?t:T,y=1),c=Ge(c);++h<y;){var R=f[h];R&&s(c,R,h,T)}return c})}function t0(s,c){return function(f,h){if(f==null)return f;if(!pr(f))return s(f,h);for(var y=f.length,T=c?y:-1,E=Ge(f);(c?T--:++T<y)&&h(E[T],T,E)!==!1;);return f}}function r0(s){return function(c,f,h){for(var y=-1,T=Ge(c),E=h(c),R=E.length;R--;){var D=E[s?R:++y];if(f(T[D],D,T)===!1)break}return c}}function AL(s,c,f){var h=c&b,y=Nc(s);function T(){var E=this&&this!==Et&&this instanceof T?y:s;return E.apply(h?f:this,arguments)}return T}function n0(s){return function(c){c=We(c);var f=Is(c)?_n(c):t,h=f?f[0]:c.charAt(0),y=f?qi(f,1).join(""):c.slice(1);return h[s]()+y}}function Hs(s){return function(c){return sx(tE(eE(c).replace(TO,"")),s,"")}}function Nc(s){return function(){var c=arguments;switch(c.length){case 0:return new s;case 1:return new s(c[0]);case 2:return new s(c[0],c[1]);case 3:return new s(c[0],c[1],c[2]);case 4:return new s(c[0],c[1],c[2],c[3]);case 5:return new s(c[0],c[1],c[2],c[3],c[4]);case 6:return new s(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new s(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=Ls(s.prototype),h=s.apply(f,c);return ot(h)?h:f}}function DL(s,c,f){var h=Nc(s);function y(){for(var T=arguments.length,E=L(T),R=T,D=Vs(y);R--;)E[R]=arguments[R];var V=T<3&&E[0]!==D&&E[T-1]!==D?[]:Hi(E,D);if(T-=V.length,T<f)return c0(s,c,hu,y.placeholder,t,E,V,t,t,f-T);var B=this&&this!==Et&&this instanceof y?h:s;return Mr(B,this,E)}return y}function i0(s){return function(c,f,h){var y=Ge(c);if(!pr(c)){var T=ue(f,3);c=Rt(c),f=function(R){return T(y[R],R,y)}}var E=s(c,f,h);return E>-1?y[T?c[E]:E]:t}}function o0(s){return mi(function(c){var f=c.length,h=f,y=Jr.prototype.thru;for(s&&c.reverse();h--;){var T=c[h];if(typeof T!="function")throw new Xr(i);if(y&&!E&&Su(T)=="wrapper")var E=new Jr([],!0)}for(h=E?h:f;++h<f;){T=c[h];var R=Su(T),D=R=="wrapper"?Vx(T):t;D&&jx(D[0])&&D[1]==(ie|M|K|ae)&&!D[4].length&&D[9]==1?E=E[Su(D[0])].apply(E,D[3]):E=T.length==1&&jx(T)?E[R]():E.thru(T)}return function(){var V=arguments,B=V[0];if(E&&V.length==1&&xe(B))return E.plant(B).value();for(var j=0,Y=f?c[j].apply(this,V):B;++j<f;)Y=c[j].call(this,Y);return Y}})}function hu(s,c,f,h,y,T,E,R,D,V){var B=c&ie,j=c&b,Y=c&v,oe=c&(M|U),fe=c&it,Ee=Y?t:Nc(s);function de(){for(var Pe=arguments.length,Ie=L(Pe),Fr=Pe;Fr--;)Ie[Fr]=arguments[Fr];if(oe)var Jt=Vs(de),Cr=$O(Ie,Jt);if(h&&(Ie=J_(Ie,h,y,oe)),T&&(Ie=e0(Ie,T,E,oe)),Pe-=Cr,oe&&Pe<V){var ut=Hi(Ie,Jt);return c0(s,c,hu,de.placeholder,f,Ie,ut,R,D,V-Pe)}var kn=j?f:this,xi=Y?kn[s]:s;return Pe=Ie.length,R?Ie=YL(Ie,R):fe&&Pe>1&&Ie.reverse(),B&&D<Pe&&(Ie.length=D),this&&this!==Et&&this instanceof de&&(xi=Ee||Nc(xi)),xi.apply(kn,Ie)}return de}function s0(s,c){return function(f,h){return oL(f,s,c(h),{})}}function gu(s,c){return function(f,h){var y;if(f===t&&h===t)return c;if(f!==t&&(y=f),h!==t){if(y===t)return h;typeof f=="string"||typeof h=="string"?(f=Dr(f),h=Dr(h)):(f=q_(f),h=q_(h)),y=s(f,h)}return y}}function Nx(s){return mi(function(c){return c=tt(c,Ar(ue())),ke(function(f){var h=this;return s(c,function(y){return Mr(y,h,f)})})})}function yu(s,c){c=c===t?" ":Dr(c);var f=c.length;if(f<2)return f?Mx(c,s):c;var h=Mx(c,nu(s/Fs(c)));return Is(c)?qi(_n(h),0,s).join(""):h.slice(0,s)}function IL(s,c,f,h){var y=c&b,T=Nc(s);function E(){for(var R=-1,D=arguments.length,V=-1,B=h.length,j=L(B+D),Y=this&&this!==Et&&this instanceof E?T:s;++V<B;)j[V]=h[V];for(;D--;)j[V++]=arguments[++R];return Mr(Y,y?f:this,j)}return E}function a0(s){return function(c,f,h){return h&&typeof h!="number"&&Xt(c,f,h)&&(f=h=t),c=yi(c),f===t?(f=c,c=0):f=yi(f),h=h===t?c<f?1:-1:yi(h),yL(c,f,h,s)}}function xu(s){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=nn(c),f=nn(f)),s(c,f)}}function c0(s,c,f,h,y,T,E,R,D,V){var B=c&M,j=B?E:t,Y=B?t:E,oe=B?T:t,fe=B?t:T;c|=B?K:ne,c&=~(B?ne:K),c&F||(c&=~(b|v));var Ee=[s,c,y,oe,j,fe,Y,R,D,V],de=f.apply(t,Ee);return jx(s)&&T0(de,Ee),de.placeholder=h,v0(de,s,c)}function Lx(s){var c=xt[s];return function(f,h){if(f=nn(f),h=h==null?0:Vt(be(h),292),h&&v_(f)){var y=(We(f)+"e").split("e"),T=c(y[0]+"e"+(+y[1]+h));return y=(We(T)+"e").split("e"),+(y[0]+"e"+(+y[1]-h))}return c(f)}}var FL=Os&&1/Gp(new Os([,-0]))[1]==Q?function(s){return new Os(s)}:oS;function l0(s){return function(c){var f=Bt(c);return f==bn?dx(c):f==wn?ZO(c):WO(c,s(c))}}function di(s,c,f,h,y,T,E,R){var D=c&v;if(!D&&typeof s!="function")throw new Xr(i);var V=h?h.length:0;if(V||(c&=~(K|ne),h=y=t),E=E===t?E:St(be(E),0),R=R===t?R:be(R),V-=y?y.length:0,c&ne){var B=h,j=y;h=y=t}var Y=D?t:Vx(s),oe=[s,c,f,h,y,B,j,T,E,R];if(Y&&KL(oe,Y),s=oe[0],c=oe[1],f=oe[2],h=oe[3],y=oe[4],R=oe[9]=oe[9]===t?D?0:s.length:St(oe[9]-V,0),!R&&c&(M|U)&&(c&=~(M|U)),!c||c==b)var fe=AL(s,c,f);else c==M||c==U?fe=DL(s,c,R):(c==K||c==(b|K))&&!y.length?fe=IL(s,c,f,h):fe=hu.apply(t,oe);var Ee=Y?$_:T0;return v0(Ee(fe,oe),s,c)}function p0(s,c,f,h){return s===t||Rn(s,Cs[f])&&!$e.call(h,f)?c:s}function u0(s,c,f,h,y,T){return ot(s)&&ot(c)&&(T.set(c,s),uu(s,c,t,u0,T),T.delete(c)),s}function CL(s){return Hc(s)?t:s}function f0(s,c,f,h,y,T){var E=f&g,R=s.length,D=c.length;if(R!=D&&!(E&&D>R))return!1;var V=T.get(s),B=T.get(c);if(V&&B)return V==c&&B==s;var j=-1,Y=!0,oe=f&x?new Io:t;for(T.set(s,c),T.set(c,s);++j<R;){var fe=s[j],Ee=c[j];if(h)var de=E?h(Ee,fe,j,c,s,T):h(fe,Ee,j,s,c,T);if(de!==t){if(de)continue;Y=!1;break}if(oe){if(!ax(c,function(Pe,Ie){if(!Ec(oe,Ie)&&(fe===Pe||y(fe,Pe,f,h,T)))return oe.push(Ie)})){Y=!1;break}}else if(!(fe===Ee||y(fe,Ee,f,h,T))){Y=!1;break}}return T.delete(s),T.delete(c),Y}function OL(s,c,f,h,y,T,E){switch(f){case Ms:if(s.byteLength!=c.byteLength||s.byteOffset!=c.byteOffset)return!1;s=s.buffer,c=c.buffer;case _c:return!(s.byteLength!=c.byteLength||!T(new Jp(s),new Jp(c)));case vn:case Qr:case Tc:return Rn(+s,+c);case ci:return s.name==c.name&&s.message==c.message;case vc:case bc:return s==c+"";case bn:var R=dx;case wn:var D=h&g;if(R||(R=Gp),s.size!=c.size&&!D)return!1;var V=E.get(s);if(V)return V==c;h|=x,E.set(s,c);var B=f0(R(s),R(c),h,y,T,E);return E.delete(s),B;case Bp:if(Ac)return Ac.call(s)==Ac.call(c)}return!1}function NL(s,c,f,h,y,T){var E=f&g,R=Ux(s),D=R.length,V=Ux(c),B=V.length;if(D!=B&&!E)return!1;for(var j=D;j--;){var Y=R[j];if(!(E?Y in c:$e.call(c,Y)))return!1}var oe=T.get(s),fe=T.get(c);if(oe&&fe)return oe==c&&fe==s;var Ee=!0;T.set(s,c),T.set(c,s);for(var de=E;++j<D;){Y=R[j];var Pe=s[Y],Ie=c[Y];if(h)var Fr=E?h(Ie,Pe,Y,c,s,T):h(Pe,Ie,Y,s,c,T);if(!(Fr===t?Pe===Ie||y(Pe,Ie,f,h,T):Fr)){Ee=!1;break}de||(de=Y=="constructor")}if(Ee&&!de){var Jt=s.constructor,Cr=c.constructor;Jt!=Cr&&"constructor"in s&&"constructor"in c&&!(typeof Jt=="function"&&Jt instanceof Jt&&typeof Cr=="function"&&Cr instanceof Cr)&&(Ee=!1)}return T.delete(s),T.delete(c),Ee}function mi(s){return zx(x0(s,t,k0),s+"")}function Ux(s){return I_(s,Rt,Wx)}function Hx(s){return I_(s,ur,d0)}var Vx=ou?function(s){return ou.get(s)}:oS;function Su(s){for(var c=s.name+"",f=Ns[c],h=$e.call(Ns,c)?f.length:0;h--;){var y=f[h],T=y.func;if(T==null||T==s)return y.name}return c}function Vs(s){var c=$e.call(S,"placeholder")?S:s;return c.placeholder}function ue(){var s=S.iteratee||nS;return s=s===nS?O_:s,arguments.length?s(arguments[0],arguments[1]):s}function Tu(s,c){var f=s.__data__;return jL(c)?f[typeof c=="string"?"string":"hash"]:f.map}function Bx(s){for(var c=Rt(s),f=c.length;f--;){var h=c[f],y=s[h];c[f]=[h,y,g0(y)]}return c}function Oo(s,c){var f=GO(s,c);return C_(f)?f:t}function LL(s){var c=$e.call(s,Ao),f=s[Ao];try{s[Ao]=t;var h=!0}catch{}var y=Yp.call(s);return h&&(c?s[Ao]=f:delete s[Ao]),y}var Wx=hx?function(s){return s==null?[]:(s=Ge(s),Li(hx(s),function(c){return S_.call(s,c)}))}:sS,d0=hx?function(s){for(var c=[];s;)Ui(c,Wx(s)),s=eu(s);return c}:sS,Bt=Yt;(gx&&Bt(new gx(new ArrayBuffer(1)))!=Ms||kc&&Bt(new kc)!=bn||yx&&Bt(yx.resolve())!=Mw||Os&&Bt(new Os)!=wn||Pc&&Bt(new Pc)!=wc)&&(Bt=function(s){var c=Yt(s),f=c==li?s.constructor:t,h=f?No(f):"";if(h)switch(h){case SN:return Ms;case TN:return bn;case vN:return Mw;case bN:return wn;case wN:return wc}return c});function UL(s,c,f){for(var h=-1,y=f.length;++h<y;){var T=f[h],E=T.size;switch(T.type){case"drop":s+=E;break;case"dropRight":c-=E;break;case"take":c=Vt(c,s+E);break;case"takeRight":s=St(s,c-E);break}}return{start:s,end:c}}function HL(s){var c=s.match(qC);return c?c[1].split(zC):[]}function m0(s,c,f){c=ji(c,s);for(var h=-1,y=c.length,T=!1;++h<y;){var E=Wn(c[h]);if(!(T=s!=null&&f(s,E)))break;s=s[E]}return T||++h!=y?T:(y=s==null?0:s.length,!!y&&ku(y)&&hi(E,y)&&(xe(s)||Lo(s)))}function VL(s){var c=s.length,f=new s.constructor(c);return c&&typeof s[0]=="string"&&$e.call(s,"index")&&(f.index=s.index,f.input=s.input),f}function h0(s){return typeof s.constructor=="function"&&!Lc(s)?Ls(eu(s)):{}}function BL(s,c,f){var h=s.constructor;switch(c){case _c:return Ox(s);case vn:case Qr:return new h(+s);case Ms:return _L(s,f);case By:case Wy:case $y:case jy:case qy:case zy:case Gy:case Ky:case Qy:return Y_(s,f);case bn:return new h;case Tc:case bc:return new h(s);case vc:return EL(s);case wn:return new h;case Bp:return RL(s)}}function WL(s,c){var f=c.length;if(!f)return s;var h=f-1;return c[h]=(f>1?"& ":"")+c[h],c=c.join(f>2?", ":" "),s.replace(jC,`{
/* [wrapped with `+c+`] */
`)}function $L(s){return xe(s)||Lo(s)||!!(T_&&s&&s[T_])}function hi(s,c){var f=typeof s;return c=c??Z,!!c&&(f=="number"||f!="symbol"&&tO.test(s))&&s>-1&&s%1==0&&s<c}function Xt(s,c,f){if(!ot(f))return!1;var h=typeof c;return(h=="number"?pr(f)&&hi(c,f.length):h=="string"&&c in f)?Rn(f[c],s):!1}function $x(s,c){if(xe(s))return!1;var f=typeof s;return f=="number"||f=="symbol"||f=="boolean"||s==null||Ir(s)?!0:VC.test(s)||!HC.test(s)||c!=null&&s in Ge(c)}function jL(s){var c=typeof s;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?s!=="__proto__":s===null}function jx(s){var c=Su(s),f=S[c];if(typeof f!="function"||!(c in De.prototype))return!1;if(s===f)return!0;var h=Vx(f);return!!h&&s===h[0]}function qL(s){return!!g_&&g_ in s}var zL=Qp?gi:aS;function Lc(s){var c=s&&s.constructor,f=typeof c=="function"&&c.prototype||Cs;return s===f}function g0(s){return s===s&&!ot(s)}function y0(s,c){return function(f){return f==null?!1:f[s]===c&&(c!==t||s in Ge(f))}}function GL(s){var c=Eu(s,function(h){return f.size===l&&f.clear(),h}),f=c.cache;return c}function KL(s,c){var f=s[1],h=c[1],y=f|h,T=y<(b|v|ie),E=h==ie&&f==M||h==ie&&f==ae&&s[7].length<=c[8]||h==(ie|ae)&&c[7].length<=c[8]&&f==M;if(!(T||E))return s;h&b&&(s[2]=c[2],y|=f&b?0:F);var R=c[3];if(R){var D=s[3];s[3]=D?J_(D,R,c[4]):R,s[4]=D?Hi(s[3],p):c[4]}return R=c[5],R&&(D=s[5],s[5]=D?e0(D,R,c[6]):R,s[6]=D?Hi(s[5],p):c[6]),R=c[7],R&&(s[7]=R),h&ie&&(s[8]=s[8]==null?c[8]:Vt(s[8],c[8])),s[9]==null&&(s[9]=c[9]),s[0]=c[0],s[1]=y,s}function QL(s){var c=[];if(s!=null)for(var f in Ge(s))c.push(f);return c}function ZL(s){return Yp.call(s)}function x0(s,c,f){return c=St(c===t?s.length-1:c,0),function(){for(var h=arguments,y=-1,T=St(h.length-c,0),E=L(T);++y<T;)E[y]=h[c+y];y=-1;for(var R=L(c+1);++y<c;)R[y]=h[y];return R[c]=f(E),Mr(s,this,R)}}function S0(s,c){return c.length<2?s:Co(s,tn(c,0,-1))}function YL(s,c){for(var f=s.length,h=Vt(c.length,f),y=lr(s);h--;){var T=c[h];s[h]=hi(T,f)?y[T]:t}return s}function qx(s,c){if(!(c==="constructor"&&typeof s[c]=="function")&&c!="__proto__")return s[c]}var T0=b0($_),Uc=fN||function(s,c){return Et.setTimeout(s,c)},zx=b0(TL);function v0(s,c,f){var h=c+"";return zx(s,WL(h,XL(HL(h),f)))}function b0(s){var c=0,f=0;return function(){var h=gN(),y=O-(h-f);if(f=h,y>0){if(++c>=N)return arguments[0]}else c=0;return s.apply(t,arguments)}}function vu(s,c){var f=-1,h=s.length,y=h-1;for(c=c===t?h:c;++f<c;){var T=Px(f,y),E=s[T];s[T]=s[f],s[f]=E}return s.length=c,s}var w0=GL(function(s){var c=[];return s.charCodeAt(0)===46&&c.push(""),s.replace(BC,function(f,h,y,T){c.push(y?T.replace(QC,"$1"):h||f)}),c});function Wn(s){if(typeof s=="string"||Ir(s))return s;var c=s+"";return c=="0"&&1/s==-Q?"-0":c}function No(s){if(s!=null){try{return Zp.call(s)}catch{}try{return s+""}catch{}}return""}function XL(s,c){return Yr(ai,function(f){var h="_."+f[0];c&f[1]&&!qp(s,h)&&s.push(h)}),s.sort()}function _0(s){if(s instanceof De)return s.clone();var c=new Jr(s.__wrapped__,s.__chain__);return c.__actions__=lr(s.__actions__),c.__index__=s.__index__,c.__values__=s.__values__,c}function JL(s,c,f){(f?Xt(s,c,f):c===t)?c=1:c=St(be(c),0);var h=s==null?0:s.length;if(!h||c<1)return[];for(var y=0,T=0,E=L(nu(h/c));y<h;)E[T++]=tn(s,y,y+=c);return E}function eU(s){for(var c=-1,f=s==null?0:s.length,h=0,y=[];++c<f;){var T=s[c];T&&(y[h++]=T)}return y}function tU(){var s=arguments.length;if(!s)return[];for(var c=L(s-1),f=arguments[0],h=s;h--;)c[h-1]=arguments[h];return Ui(xe(f)?lr(f):[f],Ct(c,1))}var rU=ke(function(s,c){return pt(s)?Ic(s,Ct(c,1,pt,!0)):[]}),nU=ke(function(s,c){var f=rn(c);return pt(f)&&(f=t),pt(s)?Ic(s,Ct(c,1,pt,!0),ue(f,2)):[]}),iU=ke(function(s,c){var f=rn(c);return pt(f)&&(f=t),pt(s)?Ic(s,Ct(c,1,pt,!0),t,f):[]});function oU(s,c,f){var h=s==null?0:s.length;return h?(c=f||c===t?1:be(c),tn(s,c<0?0:c,h)):[]}function sU(s,c,f){var h=s==null?0:s.length;return h?(c=f||c===t?1:be(c),c=h-c,tn(s,0,c<0?0:c)):[]}function aU(s,c){return s&&s.length?du(s,ue(c,3),!0,!0):[]}function cU(s,c){return s&&s.length?du(s,ue(c,3),!0):[]}function lU(s,c,f,h){var y=s==null?0:s.length;return y?(f&&typeof f!="number"&&Xt(s,c,f)&&(f=0,h=y),tL(s,c,f,h)):[]}function E0(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=f==null?0:be(f);return y<0&&(y=St(h+y,0)),zp(s,ue(c,3),y)}function R0(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=h-1;return f!==t&&(y=be(f),y=f<0?St(h+y,0):Vt(y,h-1)),zp(s,ue(c,3),y,!0)}function k0(s){var c=s==null?0:s.length;return c?Ct(s,1):[]}function pU(s){var c=s==null?0:s.length;return c?Ct(s,Q):[]}function uU(s,c){var f=s==null?0:s.length;return f?(c=c===t?1:be(c),Ct(s,c)):[]}function fU(s){for(var c=-1,f=s==null?0:s.length,h={};++c<f;){var y=s[c];h[y[0]]=y[1]}return h}function P0(s){return s&&s.length?s[0]:t}function dU(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=f==null?0:be(f);return y<0&&(y=St(h+y,0)),Ds(s,c,y)}function mU(s){var c=s==null?0:s.length;return c?tn(s,0,-1):[]}var hU=ke(function(s){var c=tt(s,Fx);return c.length&&c[0]===s[0]?wx(c):[]}),gU=ke(function(s){var c=rn(s),f=tt(s,Fx);return c===rn(f)?c=t:f.pop(),f.length&&f[0]===s[0]?wx(f,ue(c,2)):[]}),yU=ke(function(s){var c=rn(s),f=tt(s,Fx);return c=typeof c=="function"?c:t,c&&f.pop(),f.length&&f[0]===s[0]?wx(f,t,c):[]});function xU(s,c){return s==null?"":mN.call(s,c)}function rn(s){var c=s==null?0:s.length;return c?s[c-1]:t}function SU(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=h;return f!==t&&(y=be(f),y=y<0?St(h+y,0):Vt(y,h-1)),c===c?XO(s,c,y):zp(s,c_,y,!0)}function TU(s,c){return s&&s.length?H_(s,be(c)):t}var vU=ke(M0);function M0(s,c){return s&&s.length&&c&&c.length?kx(s,c):s}function bU(s,c,f){return s&&s.length&&c&&c.length?kx(s,c,ue(f,2)):s}function wU(s,c,f){return s&&s.length&&c&&c.length?kx(s,c,t,f):s}var _U=mi(function(s,c){var f=s==null?0:s.length,h=Sx(s,c);return W_(s,tt(c,function(y){return hi(y,f)?+y:y}).sort(X_)),h});function EU(s,c){var f=[];if(!(s&&s.length))return f;var h=-1,y=[],T=s.length;for(c=ue(c,3);++h<T;){var E=s[h];c(E,h,s)&&(f.push(E),y.push(h))}return W_(s,y),f}function Gx(s){return s==null?s:xN.call(s)}function RU(s,c,f){var h=s==null?0:s.length;return h?(f&&typeof f!="number"&&Xt(s,c,f)?(c=0,f=h):(c=c==null?0:be(c),f=f===t?h:be(f)),tn(s,c,f)):[]}function kU(s,c){return fu(s,c)}function PU(s,c,f){return Ax(s,c,ue(f,2))}function MU(s,c){var f=s==null?0:s.length;if(f){var h=fu(s,c);if(h<f&&Rn(s[h],c))return h}return-1}function AU(s,c){return fu(s,c,!0)}function DU(s,c,f){return Ax(s,c,ue(f,2),!0)}function IU(s,c){var f=s==null?0:s.length;if(f){var h=fu(s,c,!0)-1;if(Rn(s[h],c))return h}return-1}function FU(s){return s&&s.length?j_(s):[]}function CU(s,c){return s&&s.length?j_(s,ue(c,2)):[]}function OU(s){var c=s==null?0:s.length;return c?tn(s,1,c):[]}function NU(s,c,f){return s&&s.length?(c=f||c===t?1:be(c),tn(s,0,c<0?0:c)):[]}function LU(s,c,f){var h=s==null?0:s.length;return h?(c=f||c===t?1:be(c),c=h-c,tn(s,c<0?0:c,h)):[]}function UU(s,c){return s&&s.length?du(s,ue(c,3),!1,!0):[]}function HU(s,c){return s&&s.length?du(s,ue(c,3)):[]}var VU=ke(function(s){return $i(Ct(s,1,pt,!0))}),BU=ke(function(s){var c=rn(s);return pt(c)&&(c=t),$i(Ct(s,1,pt,!0),ue(c,2))}),WU=ke(function(s){var c=rn(s);return c=typeof c=="function"?c:t,$i(Ct(s,1,pt,!0),t,c)});function $U(s){return s&&s.length?$i(s):[]}function jU(s,c){return s&&s.length?$i(s,ue(c,2)):[]}function qU(s,c){return c=typeof c=="function"?c:t,s&&s.length?$i(s,t,c):[]}function Kx(s){if(!(s&&s.length))return[];var c=0;return s=Li(s,function(f){if(pt(f))return c=St(f.length,c),!0}),ux(c,function(f){return tt(s,cx(f))})}function A0(s,c){if(!(s&&s.length))return[];var f=Kx(s);return c==null?f:tt(f,function(h){return Mr(c,t,h)})}var zU=ke(function(s,c){return pt(s)?Ic(s,c):[]}),GU=ke(function(s){return Ix(Li(s,pt))}),KU=ke(function(s){var c=rn(s);return pt(c)&&(c=t),Ix(Li(s,pt),ue(c,2))}),QU=ke(function(s){var c=rn(s);return c=typeof c=="function"?c:t,Ix(Li(s,pt),t,c)}),ZU=ke(Kx);function YU(s,c){return K_(s||[],c||[],Dc)}function XU(s,c){return K_(s||[],c||[],Oc)}var JU=ke(function(s){var c=s.length,f=c>1?s[c-1]:t;return f=typeof f=="function"?(s.pop(),f):t,A0(s,f)});function D0(s){var c=S(s);return c.__chain__=!0,c}function e2(s,c){return c(s),s}function bu(s,c){return c(s)}var t2=mi(function(s){var c=s.length,f=c?s[0]:0,h=this.__wrapped__,y=function(T){return Sx(T,s)};return c>1||this.__actions__.length||!(h instanceof De)||!hi(f)?this.thru(y):(h=h.slice(f,+f+(c?1:0)),h.__actions__.push({func:bu,args:[y],thisArg:t}),new Jr(h,this.__chain__).thru(function(T){return c&&!T.length&&T.push(t),T}))});function r2(){return D0(this)}function n2(){return new Jr(this.value(),this.__chain__)}function i2(){this.__values__===t&&(this.__values__=q0(this.value()));var s=this.__index__>=this.__values__.length,c=s?t:this.__values__[this.__index__++];return{done:s,value:c}}function o2(){return this}function s2(s){for(var c,f=this;f instanceof au;){var h=_0(f);h.__index__=0,h.__values__=t,c?y.__wrapped__=h:c=h;var y=h;f=f.__wrapped__}return y.__wrapped__=s,c}function a2(){var s=this.__wrapped__;if(s instanceof De){var c=s;return this.__actions__.length&&(c=new De(this)),c=c.reverse(),c.__actions__.push({func:bu,args:[Gx],thisArg:t}),new Jr(c,this.__chain__)}return this.thru(Gx)}function c2(){return G_(this.__wrapped__,this.__actions__)}var l2=mu(function(s,c,f){$e.call(s,f)?++s[f]:fi(s,f,1)});function p2(s,c,f){var h=xe(s)?s_:eL;return f&&Xt(s,c,f)&&(c=t),h(s,ue(c,3))}function u2(s,c){var f=xe(s)?Li:A_;return f(s,ue(c,3))}var f2=i0(E0),d2=i0(R0);function m2(s,c){return Ct(wu(s,c),1)}function h2(s,c){return Ct(wu(s,c),Q)}function g2(s,c,f){return f=f===t?1:be(f),Ct(wu(s,c),f)}function I0(s,c){var f=xe(s)?Yr:Wi;return f(s,ue(c,3))}function F0(s,c){var f=xe(s)?OO:M_;return f(s,ue(c,3))}var y2=mu(function(s,c,f){$e.call(s,f)?s[f].push(c):fi(s,f,[c])});function x2(s,c,f,h){s=pr(s)?s:Ws(s),f=f&&!h?be(f):0;var y=s.length;return f<0&&(f=St(y+f,0)),Pu(s)?f<=y&&s.indexOf(c,f)>-1:!!y&&Ds(s,c,f)>-1}var S2=ke(function(s,c,f){var h=-1,y=typeof c=="function",T=pr(s)?L(s.length):[];return Wi(s,function(E){T[++h]=y?Mr(c,E,f):Fc(E,c,f)}),T}),T2=mu(function(s,c,f){fi(s,f,c)});function wu(s,c){var f=xe(s)?tt:N_;return f(s,ue(c,3))}function v2(s,c,f,h){return s==null?[]:(xe(c)||(c=c==null?[]:[c]),f=h?t:f,xe(f)||(f=f==null?[]:[f]),V_(s,c,f))}var b2=mu(function(s,c,f){s[f?0:1].push(c)},function(){return[[],[]]});function w2(s,c,f){var h=xe(s)?sx:p_,y=arguments.length<3;return h(s,ue(c,4),f,y,Wi)}function _2(s,c,f){var h=xe(s)?NO:p_,y=arguments.length<3;return h(s,ue(c,4),f,y,M_)}function E2(s,c){var f=xe(s)?Li:A_;return f(s,Ru(ue(c,3)))}function R2(s){var c=xe(s)?E_:xL;return c(s)}function k2(s,c,f){(f?Xt(s,c,f):c===t)?c=1:c=be(c);var h=xe(s)?QN:SL;return h(s,c)}function P2(s){var c=xe(s)?ZN:vL;return c(s)}function M2(s){if(s==null)return 0;if(pr(s))return Pu(s)?Fs(s):s.length;var c=Bt(s);return c==bn||c==wn?s.size:Ex(s).length}function A2(s,c,f){var h=xe(s)?ax:bL;return f&&Xt(s,c,f)&&(c=t),h(s,ue(c,3))}var D2=ke(function(s,c){if(s==null)return[];var f=c.length;return f>1&&Xt(s,c[0],c[1])?c=[]:f>2&&Xt(c[0],c[1],c[2])&&(c=[c[0]]),V_(s,Ct(c,1),[])}),_u=uN||function(){return Et.Date.now()};function I2(s,c){if(typeof c!="function")throw new Xr(i);return s=be(s),function(){if(--s<1)return c.apply(this,arguments)}}function C0(s,c,f){return c=f?t:c,c=s&&c==null?s.length:c,di(s,ie,t,t,t,t,c)}function O0(s,c){var f;if(typeof c!="function")throw new Xr(i);return s=be(s),function(){return--s>0&&(f=c.apply(this,arguments)),s<=1&&(c=t),f}}var Qx=ke(function(s,c,f){var h=b;if(f.length){var y=Hi(f,Vs(Qx));h|=K}return di(s,h,c,f,y)}),N0=ke(function(s,c,f){var h=b|v;if(f.length){var y=Hi(f,Vs(N0));h|=K}return di(c,h,s,f,y)});function L0(s,c,f){c=f?t:c;var h=di(s,M,t,t,t,t,t,c);return h.placeholder=L0.placeholder,h}function U0(s,c,f){c=f?t:c;var h=di(s,U,t,t,t,t,t,c);return h.placeholder=U0.placeholder,h}function H0(s,c,f){var h,y,T,E,R,D,V=0,B=!1,j=!1,Y=!0;if(typeof s!="function")throw new Xr(i);c=nn(c)||0,ot(f)&&(B=!!f.leading,j="maxWait"in f,T=j?St(nn(f.maxWait)||0,c):T,Y="trailing"in f?!!f.trailing:Y);function oe(ut){var kn=h,xi=y;return h=y=t,V=ut,E=s.apply(xi,kn),E}function fe(ut){return V=ut,R=Uc(Pe,c),B?oe(ut):E}function Ee(ut){var kn=ut-D,xi=ut-V,iE=c-kn;return j?Vt(iE,T-xi):iE}function de(ut){var kn=ut-D,xi=ut-V;return D===t||kn>=c||kn<0||j&&xi>=T}function Pe(){var ut=_u();if(de(ut))return Ie(ut);R=Uc(Pe,Ee(ut))}function Ie(ut){return R=t,Y&&h?oe(ut):(h=y=t,E)}function Fr(){R!==t&&Q_(R),V=0,h=D=y=R=t}function Jt(){return R===t?E:Ie(_u())}function Cr(){var ut=_u(),kn=de(ut);if(h=arguments,y=this,D=ut,kn){if(R===t)return fe(D);if(j)return Q_(R),R=Uc(Pe,c),oe(D)}return R===t&&(R=Uc(Pe,c)),E}return Cr.cancel=Fr,Cr.flush=Jt,Cr}var F2=ke(function(s,c){return P_(s,1,c)}),C2=ke(function(s,c,f){return P_(s,nn(c)||0,f)});function O2(s){return di(s,it)}function Eu(s,c){if(typeof s!="function"||c!=null&&typeof c!="function")throw new Xr(i);var f=function(){var h=arguments,y=c?c.apply(this,h):h[0],T=f.cache;if(T.has(y))return T.get(y);var E=s.apply(this,h);return f.cache=T.set(y,E)||T,E};return f.cache=new(Eu.Cache||ui),f}Eu.Cache=ui;function Ru(s){if(typeof s!="function")throw new Xr(i);return function(){var c=arguments;switch(c.length){case 0:return!s.call(this);case 1:return!s.call(this,c[0]);case 2:return!s.call(this,c[0],c[1]);case 3:return!s.call(this,c[0],c[1],c[2])}return!s.apply(this,c)}}function N2(s){return O0(2,s)}var L2=wL(function(s,c){c=c.length==1&&xe(c[0])?tt(c[0],Ar(ue())):tt(Ct(c,1),Ar(ue()));var f=c.length;return ke(function(h){for(var y=-1,T=Vt(h.length,f);++y<T;)h[y]=c[y].call(this,h[y]);return Mr(s,this,h)})}),Zx=ke(function(s,c){var f=Hi(c,Vs(Zx));return di(s,K,t,c,f)}),V0=ke(function(s,c){var f=Hi(c,Vs(V0));return di(s,ne,t,c,f)}),U2=mi(function(s,c){return di(s,ae,t,t,t,c)});function H2(s,c){if(typeof s!="function")throw new Xr(i);return c=c===t?c:be(c),ke(s,c)}function V2(s,c){if(typeof s!="function")throw new Xr(i);return c=c==null?0:St(be(c),0),ke(function(f){var h=f[c],y=qi(f,0,c);return h&&Ui(y,h),Mr(s,this,y)})}function B2(s,c,f){var h=!0,y=!0;if(typeof s!="function")throw new Xr(i);return ot(f)&&(h="leading"in f?!!f.leading:h,y="trailing"in f?!!f.trailing:y),H0(s,c,{leading:h,maxWait:c,trailing:y})}function W2(s){return C0(s,1)}function $2(s,c){return Zx(Cx(c),s)}function j2(){if(!arguments.length)return[];var s=arguments[0];return xe(s)?s:[s]}function q2(s){return en(s,m)}function z2(s,c){return c=typeof c=="function"?c:t,en(s,m,c)}function G2(s){return en(s,u|m)}function K2(s,c){return c=typeof c=="function"?c:t,en(s,u|m,c)}function Q2(s,c){return c==null||k_(s,c,Rt(c))}function Rn(s,c){return s===c||s!==s&&c!==c}var Z2=xu(bx),Y2=xu(function(s,c){return s>=c}),Lo=F_(function(){return arguments}())?F_:function(s){return lt(s)&&$e.call(s,"callee")&&!S_.call(s,"callee")},xe=L.isArray,X2=e_?Ar(e_):sL;function pr(s){return s!=null&&ku(s.length)&&!gi(s)}function pt(s){return lt(s)&&pr(s)}function J2(s){return s===!0||s===!1||lt(s)&&Yt(s)==vn}var zi=dN||aS,eH=t_?Ar(t_):aL;function tH(s){return lt(s)&&s.nodeType===1&&!Hc(s)}function rH(s){if(s==null)return!0;if(pr(s)&&(xe(s)||typeof s=="string"||typeof s.splice=="function"||zi(s)||Bs(s)||Lo(s)))return!s.length;var c=Bt(s);if(c==bn||c==wn)return!s.size;if(Lc(s))return!Ex(s).length;for(var f in s)if($e.call(s,f))return!1;return!0}function nH(s,c){return Cc(s,c)}function iH(s,c,f){f=typeof f=="function"?f:t;var h=f?f(s,c):t;return h===t?Cc(s,c,t,f):!!h}function Yx(s){if(!lt(s))return!1;var c=Yt(s);return c==ci||c==Po||typeof s.message=="string"&&typeof s.name=="string"&&!Hc(s)}function oH(s){return typeof s=="number"&&v_(s)}function gi(s){if(!ot(s))return!1;var c=Yt(s);return c==Ps||c==Pw||c==Pr||c==MC}function B0(s){return typeof s=="number"&&s==be(s)}function ku(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Z}function ot(s){var c=typeof s;return s!=null&&(c=="object"||c=="function")}function lt(s){return s!=null&&typeof s=="object"}var W0=r_?Ar(r_):lL;function sH(s,c){return s===c||_x(s,c,Bx(c))}function aH(s,c,f){return f=typeof f=="function"?f:t,_x(s,c,Bx(c),f)}function cH(s){return $0(s)&&s!=+s}function lH(s){if(zL(s))throw new ye(n);return C_(s)}function pH(s){return s===null}function uH(s){return s==null}function $0(s){return typeof s=="number"||lt(s)&&Yt(s)==Tc}function Hc(s){if(!lt(s)||Yt(s)!=li)return!1;var c=eu(s);if(c===null)return!0;var f=$e.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&Zp.call(f)==aN}var Xx=n_?Ar(n_):pL;function fH(s){return B0(s)&&s>=-Z&&s<=Z}var j0=i_?Ar(i_):uL;function Pu(s){return typeof s=="string"||!xe(s)&&lt(s)&&Yt(s)==bc}function Ir(s){return typeof s=="symbol"||lt(s)&&Yt(s)==Bp}var Bs=o_?Ar(o_):fL;function dH(s){return s===t}function mH(s){return lt(s)&&Bt(s)==wc}function hH(s){return lt(s)&&Yt(s)==DC}var gH=xu(Rx),yH=xu(function(s,c){return s<=c});function q0(s){if(!s)return[];if(pr(s))return Pu(s)?_n(s):lr(s);if(Rc&&s[Rc])return QO(s[Rc]());var c=Bt(s),f=c==bn?dx:c==wn?Gp:Ws;return f(s)}function yi(s){if(!s)return s===0?s:0;if(s=nn(s),s===Q||s===-Q){var c=s<0?-1:1;return c*te}return s===s?s:0}function be(s){var c=yi(s),f=c%1;return c===c?f?c-f:c:0}function z0(s){return s?Fo(be(s),0,re):0}function nn(s){if(typeof s=="number")return s;if(Ir(s))return he;if(ot(s)){var c=typeof s.valueOf=="function"?s.valueOf():s;s=ot(c)?c+"":c}if(typeof s!="string")return s===0?s:+s;s=u_(s);var f=XC.test(s);return f||eO.test(s)?IO(s.slice(2),f?2:8):YC.test(s)?he:+s}function G0(s){return Bn(s,ur(s))}function xH(s){return s?Fo(be(s),-Z,Z):s===0?s:0}function We(s){return s==null?"":Dr(s)}var SH=Us(function(s,c){if(Lc(c)||pr(c)){Bn(c,Rt(c),s);return}for(var f in c)$e.call(c,f)&&Dc(s,f,c[f])}),K0=Us(function(s,c){Bn(c,ur(c),s)}),Mu=Us(function(s,c,f,h){Bn(c,ur(c),s,h)}),TH=Us(function(s,c,f,h){Bn(c,Rt(c),s,h)}),vH=mi(Sx);function bH(s,c){var f=Ls(s);return c==null?f:R_(f,c)}var wH=ke(function(s,c){s=Ge(s);var f=-1,h=c.length,y=h>2?c[2]:t;for(y&&Xt(c[0],c[1],y)&&(h=1);++f<h;)for(var T=c[f],E=ur(T),R=-1,D=E.length;++R<D;){var V=E[R],B=s[V];(B===t||Rn(B,Cs[V])&&!$e.call(s,V))&&(s[V]=T[V])}return s}),_H=ke(function(s){return s.push(t,u0),Mr(Q0,t,s)});function EH(s,c){return a_(s,ue(c,3),Vn)}function RH(s,c){return a_(s,ue(c,3),vx)}function kH(s,c){return s==null?s:Tx(s,ue(c,3),ur)}function PH(s,c){return s==null?s:D_(s,ue(c,3),ur)}function MH(s,c){return s&&Vn(s,ue(c,3))}function AH(s,c){return s&&vx(s,ue(c,3))}function DH(s){return s==null?[]:pu(s,Rt(s))}function IH(s){return s==null?[]:pu(s,ur(s))}function Jx(s,c,f){var h=s==null?t:Co(s,c);return h===t?f:h}function FH(s,c){return s!=null&&m0(s,c,rL)}function eS(s,c){return s!=null&&m0(s,c,nL)}var CH=s0(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=Yp.call(c)),s[c]=f},rS(fr)),OH=s0(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=Yp.call(c)),$e.call(s,c)?s[c].push(f):s[c]=[f]},ue),NH=ke(Fc);function Rt(s){return pr(s)?__(s):Ex(s)}function ur(s){return pr(s)?__(s,!0):dL(s)}function LH(s,c){var f={};return c=ue(c,3),Vn(s,function(h,y,T){fi(f,c(h,y,T),h)}),f}function UH(s,c){var f={};return c=ue(c,3),Vn(s,function(h,y,T){fi(f,y,c(h,y,T))}),f}var HH=Us(function(s,c,f){uu(s,c,f)}),Q0=Us(function(s,c,f,h){uu(s,c,f,h)}),VH=mi(function(s,c){var f={};if(s==null)return f;var h=!1;c=tt(c,function(T){return T=ji(T,s),h||(h=T.length>1),T}),Bn(s,Hx(s),f),h&&(f=en(f,u|d|m,CL));for(var y=c.length;y--;)Dx(f,c[y]);return f});function BH(s,c){return Z0(s,Ru(ue(c)))}var WH=mi(function(s,c){return s==null?{}:hL(s,c)});function Z0(s,c){if(s==null)return{};var f=tt(Hx(s),function(h){return[h]});return c=ue(c),B_(s,f,function(h,y){return c(h,y[0])})}function $H(s,c,f){c=ji(c,s);var h=-1,y=c.length;for(y||(y=1,s=t);++h<y;){var T=s==null?t:s[Wn(c[h])];T===t&&(h=y,T=f),s=gi(T)?T.call(s):T}return s}function jH(s,c,f){return s==null?s:Oc(s,c,f)}function qH(s,c,f,h){return h=typeof h=="function"?h:t,s==null?s:Oc(s,c,f,h)}var Y0=l0(Rt),X0=l0(ur);function zH(s,c,f){var h=xe(s),y=h||zi(s)||Bs(s);if(c=ue(c,4),f==null){var T=s&&s.constructor;y?f=h?new T:[]:ot(s)?f=gi(T)?Ls(eu(s)):{}:f={}}return(y?Yr:Vn)(s,function(E,R,D){return c(f,E,R,D)}),f}function GH(s,c){return s==null?!0:Dx(s,c)}function KH(s,c,f){return s==null?s:z_(s,c,Cx(f))}function QH(s,c,f,h){return h=typeof h=="function"?h:t,s==null?s:z_(s,c,Cx(f),h)}function Ws(s){return s==null?[]:fx(s,Rt(s))}function ZH(s){return s==null?[]:fx(s,ur(s))}function YH(s,c,f){return f===t&&(f=c,c=t),f!==t&&(f=nn(f),f=f===f?f:0),c!==t&&(c=nn(c),c=c===c?c:0),Fo(nn(s),c,f)}function XH(s,c,f){return c=yi(c),f===t?(f=c,c=0):f=yi(f),s=nn(s),iL(s,c,f)}function JH(s,c,f){if(f&&typeof f!="boolean"&&Xt(s,c,f)&&(c=f=t),f===t&&(typeof c=="boolean"?(f=c,c=t):typeof s=="boolean"&&(f=s,s=t)),s===t&&c===t?(s=0,c=1):(s=yi(s),c===t?(c=s,s=0):c=yi(c)),s>c){var h=s;s=c,c=h}if(f||s%1||c%1){var y=b_();return Vt(s+y*(c-s+DO("1e-"+((y+"").length-1))),c)}return Px(s,c)}var eV=Hs(function(s,c,f){return c=c.toLowerCase(),s+(f?J0(c):c)});function J0(s){return tS(We(s).toLowerCase())}function eE(s){return s=We(s),s&&s.replace(rO,jO).replace(vO,"")}function tV(s,c,f){s=We(s),c=Dr(c);var h=s.length;f=f===t?h:Fo(be(f),0,h);var y=f;return f-=c.length,f>=0&&s.slice(f,y)==c}function rV(s){return s=We(s),s&&NC.test(s)?s.replace(Dw,qO):s}function nV(s){return s=We(s),s&&WC.test(s)?s.replace(Zy,"\\$&"):s}var iV=Hs(function(s,c,f){return s+(f?"-":"")+c.toLowerCase()}),oV=Hs(function(s,c,f){return s+(f?" ":"")+c.toLowerCase()}),sV=n0("toLowerCase");function aV(s,c,f){s=We(s),c=be(c);var h=c?Fs(s):0;if(!c||h>=c)return s;var y=(c-h)/2;return yu(iu(y),f)+s+yu(nu(y),f)}function cV(s,c,f){s=We(s),c=be(c);var h=c?Fs(s):0;return c&&h<c?s+yu(c-h,f):s}function lV(s,c,f){s=We(s),c=be(c);var h=c?Fs(s):0;return c&&h<c?yu(c-h,f)+s:s}function pV(s,c,f){return f||c==null?c=0:c&&(c=+c),yN(We(s).replace(Yy,""),c||0)}function uV(s,c,f){return(f?Xt(s,c,f):c===t)?c=1:c=be(c),Mx(We(s),c)}function fV(){var s=arguments,c=We(s[0]);return s.length<3?c:c.replace(s[1],s[2])}var dV=Hs(function(s,c,f){return s+(f?"_":"")+c.toLowerCase()});function mV(s,c,f){return f&&typeof f!="number"&&Xt(s,c,f)&&(c=f=t),f=f===t?re:f>>>0,f?(s=We(s),s&&(typeof c=="string"||c!=null&&!Xx(c))&&(c=Dr(c),!c&&Is(s))?qi(_n(s),0,f):s.split(c,f)):[]}var hV=Hs(function(s,c,f){return s+(f?" ":"")+tS(c)});function gV(s,c,f){return s=We(s),f=f==null?0:Fo(be(f),0,s.length),c=Dr(c),s.slice(f,f+c.length)==c}function yV(s,c,f){var h=S.templateSettings;f&&Xt(s,c,f)&&(c=t),s=We(s),c=Mu({},c,h,p0);var y=Mu({},c.imports,h.imports,p0),T=Rt(y),E=fx(y,T),R,D,V=0,B=c.interpolate||Wp,j="__p += '",Y=mx((c.escape||Wp).source+"|"+B.source+"|"+(B===Iw?ZC:Wp).source+"|"+(c.evaluate||Wp).source+"|$","g"),oe="//# sourceURL="+($e.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++RO+"]")+`
`;s.replace(Y,function(de,Pe,Ie,Fr,Jt,Cr){return Ie||(Ie=Fr),j+=s.slice(V,Cr).replace(nO,zO),Pe&&(R=!0,j+=`' +
__e(`+Pe+`) +
'`),Jt&&(D=!0,j+=`';
`+Jt+`;
__p += '`),Ie&&(j+=`' +
((__t = (`+Ie+`)) == null ? '' : __t) +
'`),V=Cr+de.length,de}),j+=`';
`;var fe=$e.call(c,"variable")&&c.variable;if(!fe)j=`with (obj) {
`+j+`
}
`;else if(KC.test(fe))throw new ye(o);j=(D?j.replace(IC,""):j).replace(FC,"$1").replace(CC,"$1;"),j="function("+(fe||"obj")+`) {
`+(fe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(D?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+j+`return __p
}`;var Ee=rE(function(){return Ve(T,oe+"return "+j).apply(t,E)});if(Ee.source=j,Yx(Ee))throw Ee;return Ee}function xV(s){return We(s).toLowerCase()}function SV(s){return We(s).toUpperCase()}function TV(s,c,f){if(s=We(s),s&&(f||c===t))return u_(s);if(!s||!(c=Dr(c)))return s;var h=_n(s),y=_n(c),T=f_(h,y),E=d_(h,y)+1;return qi(h,T,E).join("")}function vV(s,c,f){if(s=We(s),s&&(f||c===t))return s.slice(0,h_(s)+1);if(!s||!(c=Dr(c)))return s;var h=_n(s),y=d_(h,_n(c))+1;return qi(h,0,y).join("")}function bV(s,c,f){if(s=We(s),s&&(f||c===t))return s.replace(Yy,"");if(!s||!(c=Dr(c)))return s;var h=_n(s),y=f_(h,_n(c));return qi(h,y).join("")}function wV(s,c){var f=Ft,h=ct;if(ot(c)){var y="separator"in c?c.separator:y;f="length"in c?be(c.length):f,h="omission"in c?Dr(c.omission):h}s=We(s);var T=s.length;if(Is(s)){var E=_n(s);T=E.length}if(f>=T)return s;var R=f-Fs(h);if(R<1)return h;var D=E?qi(E,0,R).join(""):s.slice(0,R);if(y===t)return D+h;if(E&&(R+=D.length-R),Xx(y)){if(s.slice(R).search(y)){var V,B=D;for(y.global||(y=mx(y.source,We(Fw.exec(y))+"g")),y.lastIndex=0;V=y.exec(B);)var j=V.index;D=D.slice(0,j===t?R:j)}}else if(s.indexOf(Dr(y),R)!=R){var Y=D.lastIndexOf(y);Y>-1&&(D=D.slice(0,Y))}return D+h}function _V(s){return s=We(s),s&&OC.test(s)?s.replace(Aw,JO):s}var EV=Hs(function(s,c,f){return s+(f?" ":"")+c.toUpperCase()}),tS=n0("toUpperCase");function tE(s,c,f){return s=We(s),c=f?t:c,c===t?KO(s)?rN(s):HO(s):s.match(c)||[]}var rE=ke(function(s,c){try{return Mr(s,t,c)}catch(f){return Yx(f)?f:new ye(f)}}),RV=mi(function(s,c){return Yr(c,function(f){f=Wn(f),fi(s,f,Qx(s[f],s))}),s});function kV(s){var c=s==null?0:s.length,f=ue();return s=c?tt(s,function(h){if(typeof h[1]!="function")throw new Xr(i);return[f(h[0]),h[1]]}):[],ke(function(h){for(var y=-1;++y<c;){var T=s[y];if(Mr(T[0],this,h))return Mr(T[1],this,h)}})}function PV(s){return JN(en(s,u))}function rS(s){return function(){return s}}function MV(s,c){return s==null||s!==s?c:s}var AV=o0(),DV=o0(!0);function fr(s){return s}function nS(s){return O_(typeof s=="function"?s:en(s,u))}function IV(s){return L_(en(s,u))}function FV(s,c){return U_(s,en(c,u))}var CV=ke(function(s,c){return function(f){return Fc(f,s,c)}}),OV=ke(function(s,c){return function(f){return Fc(s,f,c)}});function iS(s,c,f){var h=Rt(c),y=pu(c,h);f==null&&!(ot(c)&&(y.length||!h.length))&&(f=c,c=s,s=this,y=pu(c,Rt(c)));var T=!(ot(f)&&"chain"in f)||!!f.chain,E=gi(s);return Yr(y,function(R){var D=c[R];s[R]=D,E&&(s.prototype[R]=function(){var V=this.__chain__;if(T||V){var B=s(this.__wrapped__),j=B.__actions__=lr(this.__actions__);return j.push({func:D,args:arguments,thisArg:s}),B.__chain__=V,B}return D.apply(s,Ui([this.value()],arguments))})}),s}function NV(){return Et._===this&&(Et._=cN),this}function oS(){}function LV(s){return s=be(s),ke(function(c){return H_(c,s)})}var UV=Nx(tt),HV=Nx(s_),VV=Nx(ax);function nE(s){return $x(s)?cx(Wn(s)):gL(s)}function BV(s){return function(c){return s==null?t:Co(s,c)}}var WV=a0(),$V=a0(!0);function sS(){return[]}function aS(){return!1}function jV(){return{}}function qV(){return""}function zV(){return!0}function GV(s,c){if(s=be(s),s<1||s>Z)return[];var f=re,h=Vt(s,re);c=ue(c),s-=re;for(var y=ux(h,c);++f<s;)c(f);return y}function KV(s){return xe(s)?tt(s,Wn):Ir(s)?[s]:lr(w0(We(s)))}function QV(s){var c=++sN;return We(s)+c}var ZV=gu(function(s,c){return s+c},0),YV=Lx("ceil"),XV=gu(function(s,c){return s/c},1),JV=Lx("floor");function eB(s){return s&&s.length?lu(s,fr,bx):t}function tB(s,c){return s&&s.length?lu(s,ue(c,2),bx):t}function rB(s){return l_(s,fr)}function nB(s,c){return l_(s,ue(c,2))}function iB(s){return s&&s.length?lu(s,fr,Rx):t}function oB(s,c){return s&&s.length?lu(s,ue(c,2),Rx):t}var sB=gu(function(s,c){return s*c},1),aB=Lx("round"),cB=gu(function(s,c){return s-c},0);function lB(s){return s&&s.length?px(s,fr):0}function pB(s,c){return s&&s.length?px(s,ue(c,2)):0}return S.after=I2,S.ary=C0,S.assign=SH,S.assignIn=K0,S.assignInWith=Mu,S.assignWith=TH,S.at=vH,S.before=O0,S.bind=Qx,S.bindAll=RV,S.bindKey=N0,S.castArray=j2,S.chain=D0,S.chunk=JL,S.compact=eU,S.concat=tU,S.cond=kV,S.conforms=PV,S.constant=rS,S.countBy=l2,S.create=bH,S.curry=L0,S.curryRight=U0,S.debounce=H0,S.defaults=wH,S.defaultsDeep=_H,S.defer=F2,S.delay=C2,S.difference=rU,S.differenceBy=nU,S.differenceWith=iU,S.drop=oU,S.dropRight=sU,S.dropRightWhile=aU,S.dropWhile=cU,S.fill=lU,S.filter=u2,S.flatMap=m2,S.flatMapDeep=h2,S.flatMapDepth=g2,S.flatten=k0,S.flattenDeep=pU,S.flattenDepth=uU,S.flip=O2,S.flow=AV,S.flowRight=DV,S.fromPairs=fU,S.functions=DH,S.functionsIn=IH,S.groupBy=y2,S.initial=mU,S.intersection=hU,S.intersectionBy=gU,S.intersectionWith=yU,S.invert=CH,S.invertBy=OH,S.invokeMap=S2,S.iteratee=nS,S.keyBy=T2,S.keys=Rt,S.keysIn=ur,S.map=wu,S.mapKeys=LH,S.mapValues=UH,S.matches=IV,S.matchesProperty=FV,S.memoize=Eu,S.merge=HH,S.mergeWith=Q0,S.method=CV,S.methodOf=OV,S.mixin=iS,S.negate=Ru,S.nthArg=LV,S.omit=VH,S.omitBy=BH,S.once=N2,S.orderBy=v2,S.over=UV,S.overArgs=L2,S.overEvery=HV,S.overSome=VV,S.partial=Zx,S.partialRight=V0,S.partition=b2,S.pick=WH,S.pickBy=Z0,S.property=nE,S.propertyOf=BV,S.pull=vU,S.pullAll=M0,S.pullAllBy=bU,S.pullAllWith=wU,S.pullAt=_U,S.range=WV,S.rangeRight=$V,S.rearg=U2,S.reject=E2,S.remove=EU,S.rest=H2,S.reverse=Gx,S.sampleSize=k2,S.set=jH,S.setWith=qH,S.shuffle=P2,S.slice=RU,S.sortBy=D2,S.sortedUniq=FU,S.sortedUniqBy=CU,S.split=mV,S.spread=V2,S.tail=OU,S.take=NU,S.takeRight=LU,S.takeRightWhile=UU,S.takeWhile=HU,S.tap=e2,S.throttle=B2,S.thru=bu,S.toArray=q0,S.toPairs=Y0,S.toPairsIn=X0,S.toPath=KV,S.toPlainObject=G0,S.transform=zH,S.unary=W2,S.union=VU,S.unionBy=BU,S.unionWith=WU,S.uniq=$U,S.uniqBy=jU,S.uniqWith=qU,S.unset=GH,S.unzip=Kx,S.unzipWith=A0,S.update=KH,S.updateWith=QH,S.values=Ws,S.valuesIn=ZH,S.without=zU,S.words=tE,S.wrap=$2,S.xor=GU,S.xorBy=KU,S.xorWith=QU,S.zip=ZU,S.zipObject=YU,S.zipObjectDeep=XU,S.zipWith=JU,S.entries=Y0,S.entriesIn=X0,S.extend=K0,S.extendWith=Mu,iS(S,S),S.add=ZV,S.attempt=rE,S.camelCase=eV,S.capitalize=J0,S.ceil=YV,S.clamp=YH,S.clone=q2,S.cloneDeep=G2,S.cloneDeepWith=K2,S.cloneWith=z2,S.conformsTo=Q2,S.deburr=eE,S.defaultTo=MV,S.divide=XV,S.endsWith=tV,S.eq=Rn,S.escape=rV,S.escapeRegExp=nV,S.every=p2,S.find=f2,S.findIndex=E0,S.findKey=EH,S.findLast=d2,S.findLastIndex=R0,S.findLastKey=RH,S.floor=JV,S.forEach=I0,S.forEachRight=F0,S.forIn=kH,S.forInRight=PH,S.forOwn=MH,S.forOwnRight=AH,S.get=Jx,S.gt=Z2,S.gte=Y2,S.has=FH,S.hasIn=eS,S.head=P0,S.identity=fr,S.includes=x2,S.indexOf=dU,S.inRange=XH,S.invoke=NH,S.isArguments=Lo,S.isArray=xe,S.isArrayBuffer=X2,S.isArrayLike=pr,S.isArrayLikeObject=pt,S.isBoolean=J2,S.isBuffer=zi,S.isDate=eH,S.isElement=tH,S.isEmpty=rH,S.isEqual=nH,S.isEqualWith=iH,S.isError=Yx,S.isFinite=oH,S.isFunction=gi,S.isInteger=B0,S.isLength=ku,S.isMap=W0,S.isMatch=sH,S.isMatchWith=aH,S.isNaN=cH,S.isNative=lH,S.isNil=uH,S.isNull=pH,S.isNumber=$0,S.isObject=ot,S.isObjectLike=lt,S.isPlainObject=Hc,S.isRegExp=Xx,S.isSafeInteger=fH,S.isSet=j0,S.isString=Pu,S.isSymbol=Ir,S.isTypedArray=Bs,S.isUndefined=dH,S.isWeakMap=mH,S.isWeakSet=hH,S.join=xU,S.kebabCase=iV,S.last=rn,S.lastIndexOf=SU,S.lowerCase=oV,S.lowerFirst=sV,S.lt=gH,S.lte=yH,S.max=eB,S.maxBy=tB,S.mean=rB,S.meanBy=nB,S.min=iB,S.minBy=oB,S.stubArray=sS,S.stubFalse=aS,S.stubObject=jV,S.stubString=qV,S.stubTrue=zV,S.multiply=sB,S.nth=TU,S.noConflict=NV,S.noop=oS,S.now=_u,S.pad=aV,S.padEnd=cV,S.padStart=lV,S.parseInt=pV,S.random=JH,S.reduce=w2,S.reduceRight=_2,S.repeat=uV,S.replace=fV,S.result=$H,S.round=aB,S.runInContext=P,S.sample=R2,S.size=M2,S.snakeCase=dV,S.some=A2,S.sortedIndex=kU,S.sortedIndexBy=PU,S.sortedIndexOf=MU,S.sortedLastIndex=AU,S.sortedLastIndexBy=DU,S.sortedLastIndexOf=IU,S.startCase=hV,S.startsWith=gV,S.subtract=cB,S.sum=lB,S.sumBy=pB,S.template=yV,S.times=GV,S.toFinite=yi,S.toInteger=be,S.toLength=z0,S.toLower=xV,S.toNumber=nn,S.toSafeInteger=xH,S.toString=We,S.toUpper=SV,S.trim=TV,S.trimEnd=vV,S.trimStart=bV,S.truncate=wV,S.unescape=_V,S.uniqueId=QV,S.upperCase=EV,S.upperFirst=tS,S.each=I0,S.eachRight=F0,S.first=P0,iS(S,function(){var s={};return Vn(S,function(c,f){$e.call(S.prototype,f)||(s[f]=c)}),s}(),{chain:!1}),S.VERSION=e,Yr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){S[s].placeholder=S}),Yr(["drop","take"],function(s,c){De.prototype[s]=function(f){f=f===t?1:St(be(f),0);var h=this.__filtered__&&!c?new De(this):this.clone();return h.__filtered__?h.__takeCount__=Vt(f,h.__takeCount__):h.__views__.push({size:Vt(f,re),type:s+(h.__dir__<0?"Right":"")}),h},De.prototype[s+"Right"]=function(f){return this.reverse()[s](f).reverse()}}),Yr(["filter","map","takeWhile"],function(s,c){var f=c+1,h=f==I||f==q;De.prototype[s]=function(y){var T=this.clone();return T.__iteratees__.push({iteratee:ue(y,3),type:f}),T.__filtered__=T.__filtered__||h,T}}),Yr(["head","last"],function(s,c){var f="take"+(c?"Right":"");De.prototype[s]=function(){return this[f](1).value()[0]}}),Yr(["initial","tail"],function(s,c){var f="drop"+(c?"":"Right");De.prototype[s]=function(){return this.__filtered__?new De(this):this[f](1)}}),De.prototype.compact=function(){return this.filter(fr)},De.prototype.find=function(s){return this.filter(s).head()},De.prototype.findLast=function(s){return this.reverse().find(s)},De.prototype.invokeMap=ke(function(s,c){return typeof s=="function"?new De(this):this.map(function(f){return Fc(f,s,c)})}),De.prototype.reject=function(s){return this.filter(Ru(ue(s)))},De.prototype.slice=function(s,c){s=be(s);var f=this;return f.__filtered__&&(s>0||c<0)?new De(f):(s<0?f=f.takeRight(-s):s&&(f=f.drop(s)),c!==t&&(c=be(c),f=c<0?f.dropRight(-c):f.take(c-s)),f)},De.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},De.prototype.toArray=function(){return this.take(re)},Vn(De.prototype,function(s,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),h=/^(?:head|last)$/.test(c),y=S[h?"take"+(c=="last"?"Right":""):c],T=h||/^find/.test(c);y&&(S.prototype[c]=function(){var E=this.__wrapped__,R=h?[1]:arguments,D=E instanceof De,V=R[0],B=D||xe(E),j=function(Pe){var Ie=y.apply(S,Ui([Pe],R));return h&&Y?Ie[0]:Ie};B&&f&&typeof V=="function"&&V.length!=1&&(D=B=!1);var Y=this.__chain__,oe=!!this.__actions__.length,fe=T&&!Y,Ee=D&&!oe;if(!T&&B){E=Ee?E:new De(this);var de=s.apply(E,R);return de.__actions__.push({func:bu,args:[j],thisArg:t}),new Jr(de,Y)}return fe&&Ee?s.apply(this,R):(de=this.thru(j),fe?h?de.value()[0]:de.value():de)})}),Yr(["pop","push","shift","sort","splice","unshift"],function(s){var c=Kp[s],f=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",h=/^(?:pop|shift)$/.test(s);S.prototype[s]=function(){var y=arguments;if(h&&!this.__chain__){var T=this.value();return c.apply(xe(T)?T:[],y)}return this[f](function(E){return c.apply(xe(E)?E:[],y)})}}),Vn(De.prototype,function(s,c){var f=S[c];if(f){var h=f.name+"";$e.call(Ns,h)||(Ns[h]=[]),Ns[h].push({name:c,func:f})}}),Ns[hu(t,v).name]=[{name:"wrapper",func:t}],De.prototype.clone=_N,De.prototype.reverse=EN,De.prototype.value=RN,S.prototype.at=t2,S.prototype.chain=r2,S.prototype.commit=n2,S.prototype.next=i2,S.prototype.plant=s2,S.prototype.reverse=a2,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=c2,S.prototype.first=S.prototype.head,Rc&&(S.prototype[Rc]=o2),S},Vi=nN();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Et._=Vi,define(function(){return Vi})):Mo?((Mo.exports=Vi)._=Vi,nx._=Vi):Et._=Vi}).call(ic)});var kF=Ke((YLe,RF)=>{"use strict";RF.exports=_F;function _F(t,e,r){t instanceof RegExp&&(t=wF(t,r)),e instanceof RegExp&&(e=wF(e,r));var n=EF(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function wF(t,e){var r=e.match(t);return r?r[0]:null}_F.range=EF;function EF(t,e,r){var n,i,o,a,l,p=r.indexOf(t),u=r.indexOf(e,p+1),d=p;if(p>=0&&u>0){if(t===e)return[p,u];for(n=[],o=r.length;d>=0&&!l;)d==p?(n.push(d),p=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,d+1)),d=p<u&&p>=0?p:u;n.length&&(l=[o,a])}return l}});var OF=Ke((XLe,CF)=>{var PF=kF();CF.exports=RZ;var MF="\0SLASH"+Math.random()+"\0",AF="\0OPEN"+Math.random()+"\0",cb="\0CLOSE"+Math.random()+"\0",DF="\0COMMA"+Math.random()+"\0",IF="\0PERIOD"+Math.random()+"\0";function ab(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function _Z(t){return t.split("\\\\").join(MF).split("\\{").join(AF).split("\\}").join(cb).split("\\,").join(DF).split("\\.").join(IF)}function EZ(t){return t.split(MF).join("\\").split(AF).join("{").split(cb).join("}").split(DF).join(",").split(IF).join(".")}function FF(t){if(!t)return[""];var e=[],r=PF("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var l=FF(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}function RZ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),gp(_Z(t),!0).map(EZ)):[]}function kZ(t){return"{"+t+"}"}function PZ(t){return/^-?0\d/.test(t)}function MZ(t,e){return t<=e}function AZ(t,e){return t>=e}function gp(t,e){var r=[],n=PF("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?gp(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var l=i+"{"+n.body+"}"+o[a];r.push(l)}else{var p=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=p||u,m=n.body.indexOf(",")>=0;if(!d&&!m)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+cb+n.post,gp(t)):[t];var g;if(d)g=n.body.split(/\.\./);else if(g=FF(n.body),g.length===1&&(g=gp(g[0],!1).map(kZ),g.length===1))return o.map(function(N){return n.pre+g[0]+N});var x;if(d){var b=ab(g[0]),v=ab(g[1]),F=Math.max(g[0].length,g[1].length),M=g.length==3?Math.abs(ab(g[2])):1,U=MZ,K=v<b;K&&(M*=-1,U=AZ);var ne=g.some(PZ);x=[];for(var ie=b;U(ie,v);ie+=M){var ae;if(u)ae=String.fromCharCode(ie),ae==="\\"&&(ae="");else if(ae=String(ie),ne){var it=F-ae.length;if(it>0){var Ft=new Array(it+1).join("0");ie<0?ae="-"+Ft+ae.slice(1):ae=Ft+ae}}x.push(ae)}}else{x=[];for(var ct=0;ct<g.length;ct++)x.push.apply(x,gp(g[ct],!1))}for(var ct=0;ct<x.length;ct++)for(var a=0;a<o.length;a++){var l=i+x[ct]+o[a];(!e||d||l)&&r.push(l)}}return r}});var gX={};gB(gX,{default:()=>kC});module.exports=yB(gX);var cS="cursorless.command",Du=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},ft=class extends Du{constructor(){super(...arguments);this.isVisible=!1}},dt=class extends Du{constructor(){super(...arguments);this.isVisible=!0}};var xX={"cursorless.toggleDecorations":new dt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new dt("Recompute decoration styles"),"cursorless.recordTestCase":new dt("Record test case"),"cursorless.recordOneTestCaseThenPause":new dt("Record one test case, then pause"),"cursorless.pauseRecording":new dt("Pause test case recording"),"cursorless.resumeRecording":new dt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new dt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new dt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new dt("Show documentation"),"cursorless.showInstallationDependencies":new dt("Show installation dependencies"),"cursorless.showScopeVisualizer":new dt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new dt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new dt("Analyze collected command history"),"cursorless.tutorial.start":new ft("Start a tutorial"),"cursorless.tutorial.next":new dt("Tutorial next"),"cursorless.tutorial.previous":new dt("Tutorial previous"),"cursorless.tutorial.restart":new dt("Tutorial restart"),"cursorless.tutorial.resume":new dt("Tutorial resume"),"cursorless.tutorial.list":new dt("Tutorial list"),"cursorless.documentationOpened":new ft("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new ft("The core cursorless command"),"cursorless.repeatPreviousCommand":new dt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new ft("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new ft("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new ft("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new ft("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new ft("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new ft("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new ft("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new ft("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new ft("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new ft("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new ft("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new ft("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new ft("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new ft("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new ft("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new ft("Redo keyboard targeting changes")};var Iu=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Fu=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Cu=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},kt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Ou=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var xB=typeof global=="object"&&global&&global.Object===Object&&global,Nu=xB;var SB=typeof self=="object"&&self&&self.Object===Object&&self,TB=Nu||SB||Function("return this")(),Pt=TB;var vB=Pt.Symbol,er=vB;var sE=Object.prototype,bB=sE.hasOwnProperty,wB=sE.toString,Vc=er?er.toStringTag:void 0;function _B(t){var e=bB.call(t,Vc),r=t[Vc];try{t[Vc]=void 0;var n=!0}catch{}var i=wB.call(t);return n&&(e?t[Vc]=r:delete t[Vc]),i}var aE=_B;var EB=Object.prototype,RB=EB.toString;function kB(t){return RB.call(t)}var cE=kB;var PB="[object Null]",MB="[object Undefined]",lE=er?er.toStringTag:void 0;function AB(t){return t==null?t===void 0?MB:PB:lE&&lE in Object(t)?aE(t):cE(t)}var Pn=AB;function DB(t){return t!=null&&typeof t=="object"}var tr=DB;var IB="[object Symbol]";function FB(t){return typeof t=="symbol"||tr(t)&&Pn(t)==IB}var Or=FB;function CB(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var on=CB;var OB=Array.isArray,je=OB;var NB=1/0,pE=er?er.prototype:void 0,uE=pE?pE.toString:void 0;function fE(t){if(typeof t=="string")return t;if(je(t))return on(t,fE)+"";if(Or(t))return uE?uE.call(t):"";var e=t+"";return e=="0"&&1/t==-NB?"-0":e}var dE=fE;var LB=/\s/;function UB(t){for(var e=t.length;e--&&LB.test(t.charAt(e)););return e}var mE=UB;var HB=/^\s+/;function VB(t){return t&&t.slice(0,mE(t)+1).replace(HB,"")}var hE=VB;function BB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Nr=BB;var gE=NaN,WB=/^[-+]0x[0-9a-f]+$/i,$B=/^0b[01]+$/i,jB=/^0o[0-7]+$/i,qB=parseInt;function zB(t){if(typeof t=="number")return t;if(Or(t))return gE;if(Nr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Nr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=hE(t);var r=$B.test(t);return r||jB.test(t)?qB(t.slice(2),r?2:8):WB.test(t)?gE:+t}var yE=zB;var xE=1/0,GB=17976931348623157e292;function KB(t){if(!t)return t===0?t:0;if(t=yE(t),t===xE||t===-xE){var e=t<0?-1:1;return e*GB}return t===t?t:0}var $s=KB;function QB(t){var e=$s(t),r=e%1;return e===e?r?e-r:e:0}var Lu=QB;function ZB(t){return t}var mr=ZB;var YB="[object AsyncFunction]",XB="[object Function]",JB="[object GeneratorFunction]",eW="[object Proxy]";function tW(t){if(!Nr(t))return!1;var e=Pn(t);return e==XB||e==JB||e==YB||e==eW}var Uu=tW;var rW=Pt["__core-js_shared__"],Hu=rW;var SE=function(){var t=/[^.]+$/.exec(Hu&&Hu.keys&&Hu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function nW(t){return!!SE&&SE in t}var TE=nW;var iW=Function.prototype,oW=iW.toString;function sW(t){if(t!=null){try{return oW.call(t)}catch{}try{return t+""}catch{}}return""}var Si=sW;var aW=/[\\^$.*+?()[\]{}|]/g,cW=/^\[object .+?Constructor\]$/,lW=Function.prototype,pW=Object.prototype,uW=lW.toString,fW=pW.hasOwnProperty,dW=RegExp("^"+uW.call(fW).replace(aW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mW(t){if(!Nr(t)||TE(t))return!1;var e=Uu(t)?dW:cW;return e.test(Si(t))}var vE=mW;function hW(t,e){return t?.[e]}var bE=hW;function gW(t,e){var r=bE(t,e);return vE(r)?r:void 0}var hr=gW;var yW=hr(Pt,"WeakMap"),Uo=yW;var xW=Uo&&new Uo,lS=xW;var wE=Object.create,SW=function(){function t(){}return function(e){if(!Nr(e))return{};if(wE)return wE(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Vu=SW;function TW(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var _E=TW;function vW(){}var js=vW;var bW=4294967295;function Bu(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=bW,this.__views__=[]}Bu.prototype=Vu(js.prototype);Bu.prototype.constructor=Bu;var qs=Bu;function wW(){}var Wu=wW;var _W=lS?function(t){return lS.get(t)}:Wu,$u=_W;var EW={},pS=EW;var RW=Object.prototype,kW=RW.hasOwnProperty;function PW(t){for(var e=t.name+"",r=pS[e],n=kW.call(pS,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var zs=PW;function ju(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}ju.prototype=Vu(js.prototype);ju.prototype.constructor=ju;var Gi=ju;function MW(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Ki=MW;function AW(t){if(t instanceof qs)return t.clone();var e=new Gi(t.__wrapped__,t.__chain__);return e.__actions__=Ki(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var EE=AW;var DW=Object.prototype,IW=DW.hasOwnProperty;function qu(t){if(tr(t)&&!je(t)&&!(t instanceof qs)){if(t instanceof Gi)return t;if(IW.call(t,"__wrapped__"))return EE(t)}return new Gi(t)}qu.prototype=js.prototype;qu.prototype.constructor=qu;var RE=qu;function FW(t){var e=zs(t),r=RE[e];if(typeof r!="function"||!(e in qs.prototype))return!1;if(t===r)return!0;var n=$u(r);return!!n&&t===n[0]}var uS=FW;var CW=800,OW=16,NW=Date.now;function LW(t){var e=0,r=0;return function(){var n=NW(),i=OW-(n-r);if(r=n,i>0){if(++e>=CW)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var kE=LW;function UW(t){return function(){return t}}var PE=UW;var HW=function(){try{var t=hr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),fS=HW;var VW=fS?function(t,e){return fS(t,"toString",{configurable:!0,enumerable:!1,value:PE(e),writable:!0})}:mr,ME=VW;var BW=kE(ME),zu=BW;function WW(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Gu=WW;function $W(t){return t!==t}var AE=$W;function jW(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var DE=jW;function qW(t,e,r){return e===e?DE(t,e,r):Gu(t,AE,r)}var Ku=qW;function zW(t,e){var r=t==null?0:t.length;return!!r&&Ku(t,e,0)>-1}var IE=zW;var GW=9007199254740991,KW=/^(?:0|[1-9]\d*)$/;function QW(t,e){var r=typeof t;return e=e??GW,!!e&&(r=="number"||r!="symbol"&&KW.test(t))&&t>-1&&t%1==0&&t<e}var Gs=QW;function ZW(t,e){return t===e||t!==t&&e!==e}var Ks=ZW;var FE=Math.max;function YW(t,e,r){return e=FE(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=FE(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(a),_E(t,this,l)}}var Qu=YW;function XW(t,e){return zu(Qu(t,e,mr),t+"")}var Qs=XW;var JW=9007199254740991;function e$(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=JW}var Zs=e$;function t$(t){return t!=null&&Zs(t.length)&&!Uu(t)}var $n=t$;function r$(t,e,r){if(!Nr(r))return!1;var n=typeof e;return(n=="number"?$n(r)&&Gs(e,r.length):n=="string"&&e in r)?Ks(r[e],t):!1}var Ho=r$;var n$=Object.prototype;function i$(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||n$;return t===r}var CE=i$;function o$(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Zu=o$;var s$="[object Arguments]";function a$(t){return tr(t)&&Pn(t)==s$}var dS=a$;var OE=Object.prototype,c$=OE.hasOwnProperty,l$=OE.propertyIsEnumerable,p$=dS(function(){return arguments}())?dS:function(t){return tr(t)&&c$.call(t,"callee")&&!l$.call(t,"callee")},Ys=p$;function u$(){return!1}var NE=u$;var HE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,LE=HE&&typeof module=="object"&&module&&!module.nodeType&&module,f$=LE&&LE.exports===HE,UE=f$?Pt.Buffer:void 0,d$=UE?UE.isBuffer:void 0,m$=d$||NE,Bc=m$;var h$="[object Arguments]",g$="[object Array]",y$="[object Boolean]",x$="[object Date]",S$="[object Error]",T$="[object Function]",v$="[object Map]",b$="[object Number]",w$="[object Object]",_$="[object RegExp]",E$="[object Set]",R$="[object String]",k$="[object WeakMap]",P$="[object ArrayBuffer]",M$="[object DataView]",A$="[object Float32Array]",D$="[object Float64Array]",I$="[object Int8Array]",F$="[object Int16Array]",C$="[object Int32Array]",O$="[object Uint8Array]",N$="[object Uint8ClampedArray]",L$="[object Uint16Array]",U$="[object Uint32Array]",Je={};Je[A$]=Je[D$]=Je[I$]=Je[F$]=Je[C$]=Je[O$]=Je[N$]=Je[L$]=Je[U$]=!0;Je[h$]=Je[g$]=Je[P$]=Je[y$]=Je[M$]=Je[x$]=Je[S$]=Je[T$]=Je[v$]=Je[b$]=Je[w$]=Je[_$]=Je[E$]=Je[R$]=Je[k$]=!1;function H$(t){return tr(t)&&Zs(t.length)&&!!Je[Pn(t)]}var VE=H$;function V$(t){return function(e){return t(e)}}var Xs=V$;var BE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Wc=BE&&typeof module=="object"&&module&&!module.nodeType&&module,B$=Wc&&Wc.exports===BE,mS=B$&&Nu.process,W$=function(){try{var t=Wc&&Wc.require&&Wc.require("util").types;return t||mS&&mS.binding&&mS.binding("util")}catch{}}(),hS=W$;var WE=hS&&hS.isTypedArray,$$=WE?Xs(WE):VE,Yu=$$;var j$=Object.prototype,q$=j$.hasOwnProperty;function z$(t,e){var r=je(t),n=!r&&Ys(t),i=!r&&!n&&Bc(t),o=!r&&!n&&!i&&Yu(t),a=r||n||i||o,l=a?Zu(t.length,String):[],p=l.length;for(var u in t)(e||q$.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Gs(u,p)))&&l.push(u);return l}var $E=z$;function G$(t,e){return function(r){return t(e(r))}}var jE=G$;var K$=jE(Object.keys,Object),qE=K$;var Q$=Object.prototype,Z$=Q$.hasOwnProperty;function Y$(t){if(!CE(t))return qE(t);var e=[];for(var r in Object(t))Z$.call(t,r)&&r!="constructor"&&e.push(r);return e}var zE=Y$;function X$(t){return $n(t)?$E(t):zE(t)}var Qi=X$;var J$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ej=/^\w*$/;function tj(t,e){if(je(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Or(t)?!0:ej.test(t)||!J$.test(t)||e!=null&&t in Object(e)}var Js=tj;var rj=hr(Object,"create"),Ti=rj;function nj(){this.__data__=Ti?Ti(null):{},this.size=0}var GE=nj;function ij(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var KE=ij;var oj="__lodash_hash_undefined__",sj=Object.prototype,aj=sj.hasOwnProperty;function cj(t){var e=this.__data__;if(Ti){var r=e[t];return r===oj?void 0:r}return aj.call(e,t)?e[t]:void 0}var QE=cj;var lj=Object.prototype,pj=lj.hasOwnProperty;function uj(t){var e=this.__data__;return Ti?e[t]!==void 0:pj.call(e,t)}var ZE=uj;var fj="__lodash_hash_undefined__";function dj(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Ti&&e===void 0?fj:e,this}var YE=dj;function ea(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ea.prototype.clear=GE;ea.prototype.delete=KE;ea.prototype.get=QE;ea.prototype.has=ZE;ea.prototype.set=YE;var gS=ea;function mj(){this.__data__=[],this.size=0}var XE=mj;function hj(t,e){for(var r=t.length;r--;)if(Ks(t[r][0],e))return r;return-1}var Zi=hj;var gj=Array.prototype,yj=gj.splice;function xj(t){var e=this.__data__,r=Zi(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():yj.call(e,r,1),--this.size,!0}var JE=xj;function Sj(t){var e=this.__data__,r=Zi(e,t);return r<0?void 0:e[r][1]}var eR=Sj;function Tj(t){return Zi(this.__data__,t)>-1}var tR=Tj;function vj(t,e){var r=this.__data__,n=Zi(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var rR=vj;function ta(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ta.prototype.clear=XE;ta.prototype.delete=JE;ta.prototype.get=eR;ta.prototype.has=tR;ta.prototype.set=rR;var Yi=ta;var bj=hr(Pt,"Map"),Xi=bj;function wj(){this.size=0,this.__data__={hash:new gS,map:new(Xi||Yi),string:new gS}}var nR=wj;function _j(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var iR=_j;function Ej(t,e){var r=t.__data__;return iR(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Ji=Ej;function Rj(t){var e=Ji(this,t).delete(t);return this.size-=e?1:0,e}var oR=Rj;function kj(t){return Ji(this,t).get(t)}var sR=kj;function Pj(t){return Ji(this,t).has(t)}var aR=Pj;function Mj(t,e){var r=Ji(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var cR=Mj;function ra(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ra.prototype.clear=nR;ra.prototype.delete=oR;ra.prototype.get=sR;ra.prototype.has=aR;ra.prototype.set=cR;var Vo=ra;var Aj="Expected a function";function yS(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Aj);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(yS.Cache||Vo),r}yS.Cache=Vo;var $c=yS;var Dj=500;function Ij(t){var e=$c(t,function(n){return r.size===Dj&&r.clear(),n}),r=e.cache;return e}var lR=Ij;var Fj=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Cj=/\\(\\)?/g,Oj=lR(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Fj,function(r,n,i,o){e.push(i?o.replace(Cj,"$1"):n||r)}),e}),pR=Oj;function Nj(t){return t==null?"":dE(t)}var Mn=Nj;function Lj(t,e){return je(t)?t:Js(t,e)?[t]:pR(Mn(t))}var Xu=Lj;var Uj=1/0;function Hj(t){if(typeof t=="string"||Or(t))return t;var e=t+"";return e=="0"&&1/t==-Uj?"-0":e}var eo=Hj;function Vj(t,e){e=Xu(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[eo(e[r++])];return r&&r==n?t:void 0}var na=Vj;function Bj(t,e,r){var n=t==null?void 0:na(t,e);return n===void 0?r:n}var Bo=Bj;function Wj(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var ia=Wj;var uR=er?er.isConcatSpreadable:void 0;function $j(t){return je(t)||Ys(t)||!!(uR&&t&&t[uR])}var fR=$j;function dR(t,e,r,n,i){var o=-1,a=t.length;for(r||(r=fR),i||(i=[]);++o<a;){var l=t[o];e>0&&r(l)?e>1?dR(l,e-1,r,n,i):ia(i,l):n||(i[i.length]=l)}return i}var oa=dR;function jj(t){var e=t==null?0:t.length;return e?oa(t,1):[]}var et=jj;function qj(t){return zu(Qu(t,void 0,et),t+"")}var mR=qj;function zj(t){return function(e){return t?.[e]}}var hR=zj;var Gj={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Kj=hR(Gj),gR=Kj;var Qj=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zj="\\u0300-\\u036f",Yj="\\ufe20-\\ufe2f",Xj="\\u20d0-\\u20ff",Jj=Zj+Yj+Xj,eq="["+Jj+"]",tq=RegExp(eq,"g");function rq(t){return t=Mn(t),t&&t.replace(Qj,gR).replace(tq,"")}var xS=rq;function nq(){this.__data__=new Yi,this.size=0}var yR=nq;function iq(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var xR=iq;function oq(t){return this.__data__.get(t)}var SR=oq;function sq(t){return this.__data__.has(t)}var TR=sq;var aq=200;function cq(t,e){var r=this.__data__;if(r instanceof Yi){var n=r.__data__;if(!Xi||n.length<aq-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Vo(n)}return r.set(t,e),this.size=r.size,this}var vR=cq;function sa(t){var e=this.__data__=new Yi(t);this.size=e.size}sa.prototype.clear=yR;sa.prototype.delete=xR;sa.prototype.get=SR;sa.prototype.has=TR;sa.prototype.set=vR;var aa=sa;function lq(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}var Ju=lq;function pq(){return[]}var bR=pq;var uq=Object.prototype,fq=uq.propertyIsEnumerable,wR=Object.getOwnPropertySymbols,dq=wR?function(t){return t==null?[]:(t=Object(t),Ju(wR(t),function(e){return fq.call(t,e)}))}:bR,_R=dq;function mq(t,e,r){var n=e(t);return je(t)?n:ia(n,r(t))}var ER=mq;function hq(t){return ER(t,Qi,_R)}var SS=hq;var gq=hr(Pt,"DataView"),ef=gq;var yq=hr(Pt,"Promise"),tf=yq;var xq=hr(Pt,"Set"),to=xq;var RR="[object Map]",Sq="[object Object]",kR="[object Promise]",PR="[object Set]",MR="[object WeakMap]",AR="[object DataView]",Tq=Si(ef),vq=Si(Xi),bq=Si(tf),wq=Si(to),_q=Si(Uo),Wo=Pn;(ef&&Wo(new ef(new ArrayBuffer(1)))!=AR||Xi&&Wo(new Xi)!=RR||tf&&Wo(tf.resolve())!=kR||to&&Wo(new to)!=PR||Uo&&Wo(new Uo)!=MR)&&(Wo=function(t){var e=Pn(t),r=e==Sq?t.constructor:void 0,n=r?Si(r):"";if(n)switch(n){case Tq:return AR;case vq:return RR;case bq:return kR;case wq:return PR;case _q:return MR}return e});var TS=Wo;var Eq=Pt.Uint8Array,vS=Eq;function Rq(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return ia(je(r)?Ki(r):[r],oa(e,1))}var jc=Rq;var kq="__lodash_hash_undefined__";function Pq(t){return this.__data__.set(t,kq),this}var DR=Pq;function Mq(t){return this.__data__.has(t)}var IR=Mq;function rf(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Vo;++e<r;)this.add(t[e])}rf.prototype.add=rf.prototype.push=DR;rf.prototype.has=IR;var nf=rf;function Aq(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var FR=Aq;function Dq(t,e){return t.has(e)}var of=Dq;var Iq=1,Fq=2;function Cq(t,e,r,n,i,o){var a=r&Iq,l=t.length,p=e.length;if(l!=p&&!(a&&p>l))return!1;var u=o.get(t),d=o.get(e);if(u&&d)return u==e&&d==t;var m=-1,g=!0,x=r&Fq?new nf:void 0;for(o.set(t,e),o.set(e,t);++m<l;){var b=t[m],v=e[m];if(n)var F=a?n(v,b,m,e,t,o):n(b,v,m,t,e,o);if(F!==void 0){if(F)continue;g=!1;break}if(x){if(!FR(e,function(M,U){if(!of(x,U)&&(b===M||i(b,M,r,n,o)))return x.push(U)})){g=!1;break}}else if(!(b===v||i(b,v,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var sf=Cq;function Oq(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var CR=Oq;function Nq(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var ca=Nq;var Lq=1,Uq=2,Hq="[object Boolean]",Vq="[object Date]",Bq="[object Error]",Wq="[object Map]",$q="[object Number]",jq="[object RegExp]",qq="[object Set]",zq="[object String]",Gq="[object Symbol]",Kq="[object ArrayBuffer]",Qq="[object DataView]",OR=er?er.prototype:void 0,bS=OR?OR.valueOf:void 0;function Zq(t,e,r,n,i,o,a){switch(r){case Qq:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Kq:return!(t.byteLength!=e.byteLength||!o(new vS(t),new vS(e)));case Hq:case Vq:case $q:return Ks(+t,+e);case Bq:return t.name==e.name&&t.message==e.message;case jq:case zq:return t==e+"";case Wq:var l=CR;case qq:var p=n&Lq;if(l||(l=ca),t.size!=e.size&&!p)return!1;var u=a.get(t);if(u)return u==e;n|=Uq,a.set(t,e);var d=sf(l(t),l(e),n,i,o,a);return a.delete(t),d;case Gq:if(bS)return bS.call(t)==bS.call(e)}return!1}var NR=Zq;var Yq=1,Xq=Object.prototype,Jq=Xq.hasOwnProperty;function e3(t,e,r,n,i,o){var a=r&Yq,l=SS(t),p=l.length,u=SS(e),d=u.length;if(p!=d&&!a)return!1;for(var m=p;m--;){var g=l[m];if(!(a?g in e:Jq.call(e,g)))return!1}var x=o.get(t),b=o.get(e);if(x&&b)return x==e&&b==t;var v=!0;o.set(t,e),o.set(e,t);for(var F=a;++m<p;){g=l[m];var M=t[g],U=e[g];if(n)var K=a?n(U,M,g,e,t,o):n(M,U,g,t,e,o);if(!(K===void 0?M===U||i(M,U,r,n,o):K)){v=!1;break}F||(F=g=="constructor")}if(v&&!F){var ne=t.constructor,ie=e.constructor;ne!=ie&&"constructor"in t&&"constructor"in e&&!(typeof ne=="function"&&ne instanceof ne&&typeof ie=="function"&&ie instanceof ie)&&(v=!1)}return o.delete(t),o.delete(e),v}var LR=e3;var t3=1,UR="[object Arguments]",HR="[object Array]",af="[object Object]",r3=Object.prototype,VR=r3.hasOwnProperty;function n3(t,e,r,n,i,o){var a=je(t),l=je(e),p=a?HR:TS(t),u=l?HR:TS(e);p=p==UR?af:p,u=u==UR?af:u;var d=p==af,m=u==af,g=p==u;if(g&&Bc(t)){if(!Bc(e))return!1;a=!0,d=!1}if(g&&!d)return o||(o=new aa),a||Yu(t)?sf(t,e,r,n,i,o):NR(t,e,p,r,n,i,o);if(!(r&t3)){var x=d&&VR.call(t,"__wrapped__"),b=m&&VR.call(e,"__wrapped__");if(x||b){var v=x?t.value():t,F=b?e.value():e;return o||(o=new aa),i(v,F,r,n,o)}}return g?(o||(o=new aa),LR(t,e,r,n,i,o)):!1}var BR=n3;function WR(t,e,r,n,i){return t===e?!0:t==null||e==null||!tr(t)&&!tr(e)?t!==t&&e!==e:BR(t,e,r,n,WR,i)}var la=WR;var i3=1,o3=2;function s3(t,e,r,n){var i=r.length,o=i,a=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var p=l[0],u=t[p],d=l[1];if(a&&l[2]){if(u===void 0&&!(p in t))return!1}else{var m=new aa;if(n)var g=n(u,d,p,t,e,m);if(!(g===void 0?la(d,u,i3|o3,n,m):g))return!1}}return!0}var $R=s3;function a3(t){return t===t&&!Nr(t)}var cf=a3;function c3(t){for(var e=Qi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,cf(i)]}return e}var jR=c3;function l3(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var lf=l3;function p3(t){var e=jR(t);return e.length==1&&e[0][2]?lf(e[0][0],e[0][1]):function(r){return r===t||$R(r,t,e)}}var qR=p3;function u3(t,e){return t!=null&&e in Object(t)}var zR=u3;function f3(t,e,r){e=Xu(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var a=eo(e[n]);if(!(o=t!=null&&r(t,a)))break;t=t[a]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Zs(i)&&Gs(a,i)&&(je(t)||Ys(t)))}var GR=f3;function d3(t,e){return t!=null&&GR(t,e,zR)}var KR=d3;var m3=1,h3=2;function g3(t,e){return Js(t)&&cf(e)?lf(eo(t),e):function(r){var n=Bo(r,t);return n===void 0&&n===e?KR(r,t):la(e,n,m3|h3)}}var QR=g3;function y3(t){return function(e){return e?.[t]}}var pf=y3;function x3(t){return function(e){return na(e,t)}}var ZR=x3;function S3(t){return Js(t)?pf(eo(t)):ZR(t)}var YR=S3;function T3(t){return typeof t=="function"?t:t==null?mr:typeof t=="object"?je(t)?QR(t[0],t[1]):qR(t):YR(t)}var ro=T3;function v3(t){return function(e,r,n){for(var i=-1,o=Object(e),a=n(e),l=a.length;l--;){var p=a[t?l:++i];if(r(o[p],p,o)===!1)break}return e}}var XR=v3;var b3=XR(),JR=b3;function w3(t,e){return t&&JR(t,e,Qi)}var ek=w3;function _3(t,e){return function(r,n){if(r==null)return r;if(!$n(r))return t(r,n);for(var i=r.length,o=e?i:-1,a=Object(r);(e?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}var tk=_3;var E3=tk(ek),rk=E3;function R3(t){return tr(t)&&$n(t)}var nk=R3;function k3(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var ik=k3;function P3(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var uf=P3;var ok=/[\\^$.*+?()[\]{}|]/g,M3=RegExp(ok.source);function A3(t){return t=Mn(t),t&&M3.test(t)?t.replace(ok,"\\$&"):t}var Lr=A3;var D3=Math.max,I3=Math.min;function F3(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=Lu(r),i=r<0?D3(n+i,0):I3(i,n-1)),Gu(t,ro(e,3),i,!0)}var $o=F3;function C3(t,e){var r=-1,n=$n(t)?Array(t.length):[];return rk(t,function(i,o,a){n[++r]=e(i,o,a)}),n}var sk=C3;var O3="Expected a function",N3=8,L3=32,U3=128,H3=256;function V3(t){return mR(function(e){var r=e.length,n=r,i=Gi.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(O3);if(i&&!a&&zs(o)=="wrapper")var a=new Gi([],!0)}for(n=a?n:r;++n<r;){o=e[n];var l=zs(o),p=l=="wrapper"?$u(o):void 0;p&&uS(p[0])&&p[1]==(U3|N3|L3|H3)&&!p[4].length&&p[9]==1?a=a[zs(p[0])].apply(a,p[3]):a=o.length==1&&uS(o)?a[l]():a.thru(o)}return function(){var u=arguments,d=u[0];if(a&&u.length==1&&je(d))return a.plant(d).value();for(var m=0,g=r?e[m].apply(this,u):d;++m<r;)g=e[m].call(this,g);return g}})}var ak=V3;var B3=ak(),wS=B3;function W3(t,e){return t>e}var ck=W3;function $3(t,e){return on(e,function(r){return t[r]})}var lk=$3;function j3(t){return t==null?[]:lk(t,Qi(t))}var pk=j3;function q3(t,e){return la(t,e)}var vi=q3;function z3(t,e){return t<e}var uk=z3;function G3(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],a=e(o);if(a!=null&&(l===void 0?a===a&&!Or(a):r(a,l)))var l=a,p=o}return p}var ff=G3;function K3(t,e){return t&&t.length?ff(t,ro(e,2),ck):void 0}var _S=K3;function Q3(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var fk=Q3;function Z3(t){return t&&t.length?ff(t,mr,uk):void 0}var ES=Z3;function Y3(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var dk=Y3;function X3(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Or(t),a=e!==void 0,l=e===null,p=e===e,u=Or(e);if(!l&&!u&&!o&&t>e||o&&a&&p&&!l&&!u||n&&a&&p||!r&&p||!i)return 1;if(!n&&!o&&!u&&t<e||u&&r&&i&&!n&&!o||l&&r&&i||!a&&i||!p)return-1}return 0}var mk=X3;function J3(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,a=i.length,l=r.length;++n<a;){var p=mk(i[n],o[n]);if(p){if(n>=l)return p;var u=r[n];return p*(u=="desc"?-1:1)}}return t.index-e.index}var hk=J3;function ez(t,e,r){e.length?e=on(e,function(o){return je(o)?function(a){return na(a,o.length===1?o[0]:o)}:o}):e=[mr];var n=-1;e=on(e,Xs(ro));var i=sk(t,function(o,a,l){var p=on(e,function(u){return u(o)});return{criteria:p,index:++n,value:o}});return dk(i,function(o,a){return hk(o,a,r)})}var gk=ez;var tz=9007199254740991,rz=Math.floor;function nz(t,e){var r="";if(!t||e<1||e>tz)return r;do e%2&&(r+=t),e=rz(e/2),e&&(t+=t);while(e);return r}var yk=nz;function iz(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var xk=iz;var oz=Array.prototype,Sk=oz.splice;function sz(t,e,r,n){var i=n?xk:Ku,o=-1,a=e.length,l=t;for(t===e&&(e=Ki(e)),r&&(l=on(t,Xs(r)));++o<a;)for(var p=0,u=e[o],d=r?r(u):u;(p=i(l,d,p,n))>-1;)l!==t&&Sk.call(l,p,1),Sk.call(t,p,1);return t}var Tk=sz;function az(t,e){return t&&t.length&&e&&e.length?Tk(t,e):t}var vk=az;var cz=Qs(vk),rr=cz;var lz=Math.floor,pz=Math.random;function uz(t,e){return t+lz(pz()*(e-t+1))}var bk=uz;var fz=Math.ceil,dz=Math.max;function mz(t,e,r,n){for(var i=-1,o=dz(fz((e-t)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=t,t+=r;return a}var wk=mz;function hz(t){return function(e,r,n){return n&&typeof n!="number"&&Ho(e,r,n)&&(r=n=void 0),e=$s(e),r===void 0?(r=e,e=0):r=$s(r),n=n===void 0?e<r?1:-1:$s(n),wk(e,r,n,t)}}var _k=hz;var gz=_k(),RS=gz;function yz(t,e,r){return(r?Ho(t,e,r):e===void 0)?e=1:e=Lu(e),yk(Mn(t),e)}var kS=yz;function xz(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=bk(r,i),a=t[o];t[o]=t[r],t[r]=a}return t.length=e,t}var df=xz;function Sz(t){return df(Ki(t))}var Ek=Sz;function Tz(t){return df(pk(t))}var Rk=Tz;function vz(t){var e=je(t)?Ek:Rk;return e(t)}var PS=vz;var bz=Qs(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Ho(t,e[0],e[1])?e=[]:r>2&&Ho(e[0],e[1],e[2])&&(e=[e[0]]),gk(t,oa(e,1),[])}),MS=bz;function wz(t,e){return t&&t.length?fk(t,ro(e,2)):0}var mf=wz;var _z=1/0,Ez=to&&1/ca(new to([,-0]))[1]==_z?function(t){return new to(t)}:Wu,kk=Ez;var Rz=200;function kz(t,e,r){var n=-1,i=IE,o=t.length,a=!0,l=[],p=l;if(r)a=!1,i=ik;else if(o>=Rz){var u=e?null:kk(t);if(u)return ca(u);a=!1,i=of,p=new nf}else p=e?[]:l;e:for(;++n<o;){var d=t[n],m=e?e(d):d;if(d=r||d!==0?d:0,a&&m===m){for(var g=p.length;g--;)if(p[g]===m)continue e;e&&p.push(m),l.push(d)}else i(p,m,r)||(p!==l&&p.push(m),l.push(d))}return l}var hf=kz;function Pz(t){return t&&t.length?hf(t):[]}var jo=Pz;function Mz(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?hf(t,void 0,e):[]}var qc=Mz;var Az=Math.max;function Dz(t){if(!(t&&t.length))return[];var e=0;return t=Ju(t,function(r){if(nk(r))return e=Az(r.length,e),!0}),Zu(e,function(r){return on(t,pf(r))})}var Pk=Dz;var Iz=Qs(Pk),Tt=Iz;var gf=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0}}};var zc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Wt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{rr(this.listeners,e)}}}};var yf={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var Gc=class{constructor(){this.notifier=new Wt;this.mocks={...yf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(Cz(n,r))return Bo(i,e)??Bo(this.mocks,e)}return Bo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function Cz(t,e){return t.languageId===e.languageId}var xf={hideInferenceWarning:!1,tutorialProgress:{}};var Kc=class{constructor(){this.data={...xf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var Qc=class{async showMessage(e,r,n,...i){}};var Sf=class{constructor(){this.configuration=new Gc;this.messages=new Qc;this.keyValueStore=new Kc;this.clipboard=new zc;this.capabilities=new gf;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=pa;this.onDidCloseTextDocument=pa;this.onDidChangeActiveTextEditor=pa;this.onDidChangeVisibleTextEditors=pa;this.onDidChangeTextEditorSelection=pa;this.onDidChangeTextEditorVisibleRanges=pa}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>rr(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function pa(){return{dispose(){}}}var pe=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new W(this,this)}concise(){return`${this.line}:${this.character}`}conciseOneBased(){return`${this.line+1}:${this.character+1}`}toString(){return this.concise()}};function Mk(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var W=class t{constructor(...e){let[r,n]=e.length===2?e:[new pe(e[0],e[1]),new pe(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof pe?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new we(this.end,this.start):new we(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}-${this.end.conciseOneBased()}`}toString(){return`${this.start.concise()}-${this.end.concise()}`}};function Oz(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function Nz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function Ak(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var Tf=Ak(Oz),vf=Ak(Nz);function AS(t,e){return e.lastIndex=0,t.matchAll(e)}function gr(t,e,r){return Array.from(AS(t,e),r)}function qo(t,e){return t.lastIndex=0,t.test(e)}function Dk(t,e){return t.lastIndex=0,e.match(t)}function Zc(t,e){return gr(t,e,r=>({index:r.index,text:r[0]}))}var ua=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var bf=class extends ua{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function Yc(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function st(t,e,r,...n){return t.showMessage("error",e,r,...n)}var se=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(se||{});var{supported:rt,unsupported:Jle,notApplicable:Ik}=se,DS={ifStatement:rt,disqualifyDelimiter:rt,"comment.line":rt,"comment.block":rt,"string.singleLine":rt,"textFragment.comment.line":rt,"textFragment.comment.block":rt,"textFragment.string.singleLine":rt,class:rt,className:rt,namedFunction:rt,"name.function":rt,"name.class":rt,"name.field":rt,functionName:rt,"name.argument.formal":rt,"name.argument.formal.iteration":rt,"name.variable":rt,"value.variable":rt,"name.assignment":rt,"value.assignment":rt,"statement.class":rt,"type.class":rt,"type.field":rt,"value.argument.formal":Ik,"value.argument.formal.iteration":Ik};var{supported:rpe,unsupported:npe,notApplicable:ipe}=se;var{supported:Fk,unsupported:cpe,notApplicable:lpe}=se,Lz={...DS,"value.argument.formal":Fk,"value.argument.formal.iteration":Fk};var{supported:fpe,unsupported:dpe,notApplicable:mpe}=se;var{supported:Xc,unsupported:Uz,notApplicable:ype}=se,IS={"comment.block":Xc,"string.singleLine":Xc,"name.iteration.block":Xc,"name.iteration.document":Xc,disqualifyDelimiter:Xc,"comment.line":Uz};var{supported:Tpe,unsupported:vpe,notApplicable:bpe}=se;var{supported:Epe,unsupported:Rpe,notApplicable:kpe}=se;var{supported:Ape,notApplicable:Dpe}=se;var{supported:Cpe,notApplicable:Ope}=se;var{supported:z,unsupported:Upe,notApplicable:sn}=se,FS={list:z,map:z,ifStatement:z,regularExpression:z,switchStatementSubject:z,fieldAccess:z,disqualifyDelimiter:z,pairDelimiter:z,"textFragment.string.singleLine":z,"textFragment.string.multiLine":z,"textFragment.comment.line":z,"textFragment.comment.block":z,statement:z,"statement.iteration.document":z,"statement.iteration.block":z,class:z,className:z,anonymousFunction:z,namedFunction:z,"namedFunction.iteration.document":z,"namedFunction.method":z,"namedFunction.method.iteration.class":z,"namedFunction.constructor":z,functionName:z,"functionName.iteration.document":z,"functionName.method":z,"functionName.method.iteration.class":z,"functionName.constructor":z,functionCall:z,"functionCall.constructor":z,functionCallee:z,"functionCallee.constructor":z,"argument.actual":z,"argument.actual.iteration":z,"argument.actual.method":z,"argument.actual.method.iteration":z,"argument.actual.constructor":z,"argument.actual.constructor.iteration":z,"argument.formal":z,"argument.formal.iteration":z,"argument.formal.method":z,"argument.formal.method.iteration":z,"argument.formal.constructor":z,"argument.formal.constructor.iteration":z,"comment.line":z,"comment.block":z,"string.singleLine":z,"string.multiLine":z,"branch.if":z,"branch.if.iteration":z,"branch.try":z,"branch.switchCase":z,"branch.switchCase.iteration":z,"branch.ternary":z,"condition.if":z,"condition.while":z,"condition.doWhile":z,"condition.for":z,"condition.ternary":z,"condition.switchCase":z,"name.argument.formal":z,"name.argument.formal.iteration":z,"name.argument.formal.method":z,"name.argument.formal.method.iteration":z,"name.argument.formal.constructor":z,"name.argument.formal.constructor.iteration":z,"name.foreach":z,"name.assignment":z,"name.assignment.pattern":z,"name.variable":z,"name.variable.pattern":z,"name.function":z,"name.method":z,"name.constructor":z,"name.class":z,"name.field":z,"key.mapPair":z,"key.mapPair.iteration":z,"value.argument.formal":z,"value.argument.formal.iteration":z,"value.argument.formal.method":z,"value.argument.formal.method.iteration":z,"value.argument.formal.constructor":z,"value.argument.formal.constructor.iteration":z,"value.mapPair":z,"value.mapPair.iteration":z,"value.assignment":z,"value.variable":z,"value.variable.pattern":z,"value.foreach":z,"value.return":z,"value.return.lambda":z,"value.field":z,"collectionItem.unenclosed":z},CS={element:z,tags:z,startTag:z,endTag:z,attribute:z,"key.attribute":z,"value.attribute":z},OS={...FS,...CS,"type.variable":sn,"type.argument.formal":sn,"type.argument.formal.iteration":sn,"type.argument.formal.method":sn,"type.argument.formal.method.iteration":sn,"type.argument.formal.constructor":sn,"type.argument.formal.constructor.iteration":sn,"type.return":sn,"type.field":sn,"type.foreach":sn,"type.interface":sn,command:sn};var{supported:Hz,unsupported:Wpe,notApplicable:$pe}=se,Vz={...OS,"textFragment.element":Hz};var{supported:NS}=se,Jc={"comment.line":NS,"comment.block":NS,map:NS};var{supported:Qpe,unsupported:Zpe,notApplicable:Ype}=se,Bz={...Jc};var{supported:tue,unsupported:rue,notApplicable:nue}=se,Wz={...Jc};var{supported:sue,unsupported:aue,notApplicable:cue}=se;var{supported:uue,notApplicable:fue}=se;var{supported:hue,unsupported:gue,notApplicable:yue}=se;var{supported:Tue,unsupported:vue,notApplicable:bue}=se;var{supported:Eue,notApplicable:Rue}=se;var{supported:Mue,unsupported:Aue,notApplicable:Due}=se;var{supported:Cue,unsupported:Oue,notApplicable:Nue}=se;var{supported:Hue,unsupported:Vue,notApplicable:Bue}=se;var{supported:jue,unsupported:que,notApplicable:zue}=se;var{supported:fa,unsupported:Zue,notApplicable:Yue}=se,$z={...IS,"namedFunction.iteration":fa,"namedFunction.iteration.document":fa,"functionName.iteration":fa,"functionName.iteration.document":fa,"comment.line":fa,disqualifyDelimiter:fa};var{supported:efe}=se;var{supported:Ot}=se,LS={...FS,"name.field":Ot,"type.argument.formal":Ot,"type.argument.formal.iteration":Ot,"type.argument.formal.method":Ot,"type.argument.formal.method.iteration":Ot,"type.argument.formal.constructor":Ot,"type.argument.formal.constructor.iteration":Ot,"type.alias":Ot,"type.cast":Ot,"type.field":Ot,"type.interface":Ot,"type.enum":Ot,"type.return":Ot,"type.variable":Ot,"value.field":Ot,"value.typeAlias":Ot,disqualifyDelimiter:Ot};var{supported:cfe,unsupported:lfe,notApplicable:pfe}=se,jz={...LS,...CS};var{supported:dfe,unsupported:mfe,notApplicable:hfe}=se;var{supported:xfe,unsupported:Sfe,notApplicable:Tfe}=se;var da=["that","source","instanceReference","keyboard"];var we=class extends W{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new pe(e[0],e[1]),new pe(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}->${this.end.conciseOneBased()}`}toString(){return this.concise()}};function Ok({line:t,character:e}){return new pe(t,e)}function wf({start:t,end:e}){return new W(Ok(t),Ok(e))}function an({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function vt({start:t,end:e}){return{type:"character",start:t,end:e}}function el(t){return{start:_f(t.start),end:_f(t.end)}}function Nk(t){return{anchor:_f(t.anchor),active:_f(t.active)}}function _f({line:t,character:e}){return{line:t,character:e}}function eP(t){return typeof t>"u"||t===null}function qz(t){return typeof t=="object"&&t!==null}function zz(t){return Array.isArray(t)?t:eP(t)?[]:[t]}function Gz(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function Kz(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function Qz(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Zz=eP,Yz=qz,Xz=zz,Jz=Kz,eG=Qz,tG=Gz,bt={isNothing:Zz,isObject:Yz,toArray:Xz,repeat:Jz,isNegativeZero:eG,extend:tG};function tP(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function rl(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=tP(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}rl.prototype=Object.create(Error.prototype);rl.prototype.constructor=rl;rl.prototype.toString=function(e){return this.name+": "+tP(this,e)};var yr=rl;function US(t,e,r,n,i){var o="",a="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(a=" ...",r=n+l-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}function HS(t,e){return bt.repeat(" ",e-t.length)+t}function rG(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var l="",p,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,m=e.maxLength-(e.indent+d+3);for(p=1;p<=e.linesBefore&&!(a-p<0);p++)u=US(t.buffer,n[a-p],i[a-p],t.position-(n[a]-n[a-p]),m),l=bt.repeat(" ",e.indent)+HS((t.line-p+1).toString(),d)+" | "+u.str+`
`+l;for(u=US(t.buffer,n[a],i[a],t.position,m),l+=bt.repeat(" ",e.indent)+HS((t.line+1).toString(),d)+" | "+u.str+`
`,l+=bt.repeat("-",e.indent+d+3+u.pos)+`^
`,p=1;p<=e.linesAfter&&!(a+p>=i.length);p++)u=US(t.buffer,n[a+p],i[a+p],t.position-(n[a]-n[a+p]),m),l+=bt.repeat(" ",e.indent)+HS((t.line+p+1).toString(),d)+" | "+u.str+`
`;return l.replace(/\n$/,"")}var nG=rG,iG=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],oG=["scalar","sequence","mapping"];function sG(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function aG(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(iG.indexOf(r)===-1)throw new yr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=sG(e.styleAliases||null),oG.indexOf(this.kind)===-1)throw new yr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Nt=aG;function Hk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}function cG(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function BS(t){return this.extend(t)}BS.prototype.extend=function(e){var r=[],n=[];if(e instanceof Nt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new yr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Nt))throw new yr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new yr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new yr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Nt))throw new yr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(BS.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Hk(i,"implicit"),i.compiledExplicit=Hk(i,"explicit"),i.compiledTypeMap=cG(i.compiledImplicit,i.compiledExplicit),i};var lG=BS,pG=new Nt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),uG=new Nt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),fG=new Nt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),dG=new lG({explicit:[pG,uG,fG]});function mG(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function hG(){return null}function gG(t){return t===null}var yG=new Nt("tag:yaml.org,2002:null",{kind:"scalar",resolve:mG,construct:hG,predicate:gG,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function xG(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function SG(t){return t==="true"||t==="True"||t==="TRUE"}function TG(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var vG=new Nt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:xG,construct:SG,predicate:TG,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function bG(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function wG(t){return 48<=t&&t<=55}function _G(t){return 48<=t&&t<=57}function EG(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!bG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!wG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!_G(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function RG(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function kG(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!bt.isNegativeZero(t)}var PG=new Nt("tag:yaml.org,2002:int",{kind:"scalar",resolve:EG,construct:RG,predicate:kG,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),MG=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function AG(t){return!(t===null||!MG.test(t)||t[t.length-1]==="_")}function DG(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var IG=/^[-+]?[0-9]+e/;function FG(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(bt.isNegativeZero(t))return"-0.0";return r=t.toString(10),IG.test(r)?r.replace("e",".e"):r}function CG(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||bt.isNegativeZero(t))}var OG=new Nt("tag:yaml.org,2002:float",{kind:"scalar",resolve:AG,construct:DG,predicate:CG,represent:FG,defaultStyle:"lowercase"}),NG=dG.extend({implicit:[yG,vG,PG,OG]}),LG=NG,rP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),nP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function UG(t){return t===null?!1:rP.exec(t)!==null||nP.exec(t)!==null}function HG(t){var e,r,n,i,o,a,l,p=0,u=null,d,m,g;if(e=rP.exec(t),e===null&&(e=nP.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],l=+e[6],e[7]){for(p=e[7].slice(0,3);p.length<3;)p+="0";p=+p}return e[9]&&(d=+e[10],m=+(e[11]||0),u=(d*60+m)*6e4,e[9]==="-"&&(u=-u)),g=new Date(Date.UTC(r,n,i,o,a,l,p)),u&&g.setTime(g.getTime()-u),g}function VG(t){return t.toISOString()}var BG=new Nt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:UG,construct:HG,instanceOf:Date,represent:VG});function WG(t){return t==="<<"||t===null}var $G=new Nt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:WG}),zS=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function jG(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=zS;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function qG(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=zS,a=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):r===18?(l.push(a>>10&255),l.push(a>>2&255)):r===12&&l.push(a>>4&255),new Uint8Array(l)}function zG(t){var e="",r=0,n,i,o=t.length,a=zS;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}function GG(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var KG=new Nt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:jG,construct:qG,predicate:GG,represent:zG}),QG=Object.prototype.hasOwnProperty,ZG=Object.prototype.toString;function YG(t){if(t===null)return!0;var e=[],r,n,i,o,a,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],a=!1,ZG.call(i)!=="[object Object]")return!1;for(o in i)if(QG.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function XG(t){return t!==null?t:[]}var JG=new Nt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:YG,construct:XG}),eK=Object.prototype.toString;function tK(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],eK.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function rK(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var nK=new Nt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:tK,construct:rK}),iK=Object.prototype.hasOwnProperty;function oK(t){if(t===null)return!0;var e,r=t;for(e in r)if(iK.call(r,e)&&r[e]!==null)return!1;return!0}function sK(t){return t!==null?t:{}}var aK=new Nt("tag:yaml.org,2002:set",{kind:"mapping",resolve:oK,construct:sK}),GS=LG.extend({implicit:[BG,$G],explicit:[KG,JG,nK,aK]}),io=Object.prototype.hasOwnProperty,Ef=1,iP=2,oP=3,Rf=4,VS=1,cK=2,Vk=3,lK=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,pK=/[\x85\u2028\u2029]/,uK=/[,\[\]\{\}]/,sP=/^(?:!|!!|![a-z\-]+!)$/i,aP=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Bk(t){return Object.prototype.toString.call(t)}function jn(t){return t===10||t===13}function Go(t){return t===9||t===32}function xr(t){return t===9||t===32||t===10||t===13}function ha(t){return t===44||t===91||t===93||t===123||t===125}function fK(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function dK(t){return t===120?2:t===117?4:t===85?8:0}function mK(t){return 48<=t&&t<=57?t-48:-1}function Wk(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function hK(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var cP=new Array(256),lP=new Array(256);for(zo=0;zo<256;zo++)cP[zo]=Wk(zo)?1:0,lP[zo]=Wk(zo);var zo;function gK(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||GS,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function pP(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=nG(r),new yr(e,r)}function le(t,e){throw pP(t,e)}function kf(t,e){t.onWarning&&t.onWarning.call(null,pP(t,e))}var $k={YAML:function(e,r,n){var i,o,a;e.version!==null&&le(e,"duplication of %YAML directive"),n.length!==1&&le(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&le(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&le(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&kf(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&le(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],sP.test(i)||le(e,"ill-formed tag handle (first argument) of the TAG directive"),io.call(e.tagMap,i)&&le(e,'there is a previously declared suffix for "'+i+'" tag handle'),aP.test(o)||le(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{le(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function no(t,e,r,n){var i,o,a,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||le(t,"expected valid JSON character");else lK.test(l)&&le(t,"the stream contains non-printable characters");t.result+=l}}function jk(t,e,r,n){var i,o,a,l;for(bt.isObject(r)||le(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,l=i.length;a<l;a+=1)o=i[a],io.call(e,o)||(e[o]=r[o],n[o]=!0)}function ga(t,e,r,n,i,o,a,l,p){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&le(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Bk(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Bk(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)jk(t,e,o[u],r);else jk(t,e,o,r);else!t.json&&!io.call(r,i)&&io.call(e,i)&&(t.line=a||t.line,t.lineStart=l||t.lineStart,t.position=p||t.position,le(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function KS(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):le(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function yt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Go(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(jn(i))for(KS(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&kf(t,"deficient indentation"),n}function Af(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||xr(r)))}function QS(t,e){e===1?t.result+=" ":e>1&&(t.result+=bt.repeat(`
`,e-1))}function yK(t,e,r){var n,i,o,a,l,p,u,d,m=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),xr(x)||ha(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),xr(i)||r&&ha(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),xr(i)||r&&ha(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),xr(n))break}else{if(t.position===t.lineStart&&Af(t)||r&&ha(x))break;if(jn(x))if(p=t.line,u=t.lineStart,d=t.lineIndent,yt(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=p,t.lineStart=u,t.lineIndent=d;break}}l&&(no(t,o,a,!1),QS(t,t.line-p),o=a=t.position,l=!1),Go(x)||(a=t.position+1),x=t.input.charCodeAt(++t.position)}return no(t,o,a,!1),t.result?!0:(t.kind=m,t.result=g,!1)}function xK(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(no(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else jn(r)?(no(t,n,i,!0),QS(t,yt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Af(t)?le(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);le(t,"unexpected end of the stream within a single quoted scalar")}function SK(t,e){var r,n,i,o,a,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return no(t,r,t.position,!0),t.position++,!0;if(l===92){if(no(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),jn(l))yt(t,!1,e);else if(l<256&&cP[l])t.result+=lP[l],t.position++;else if((a=dK(l))>0){for(i=a,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(a=fK(l))>=0?o=(o<<4)+a:le(t,"expected hexadecimal character");t.result+=hK(o),t.position++}else le(t,"unknown escape sequence");r=n=t.position}else jn(l)?(no(t,r,n,!0),QS(t,yt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Af(t)?le(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}le(t,"unexpected end of the stream within a double quoted scalar")}function TK(t,e){var r=!0,n,i,o,a=t.tag,l,p=t.anchor,u,d,m,g,x,b=Object.create(null),v,F,M,U;if(U=t.input.charCodeAt(t.position),U===91)d=93,x=!1,l=[];else if(U===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),U=t.input.charCodeAt(++t.position);U!==0;){if(yt(t,!0,e),U=t.input.charCodeAt(t.position),U===d)return t.position++,t.tag=a,t.anchor=p,t.kind=x?"mapping":"sequence",t.result=l,!0;r?U===44&&le(t,"expected the node content, but found ','"):le(t,"missed comma between flow collection entries"),F=v=M=null,m=g=!1,U===63&&(u=t.input.charCodeAt(t.position+1),xr(u)&&(m=g=!0,t.position++,yt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,ya(t,e,Ef,!1,!0),F=t.tag,v=t.result,yt(t,!0,e),U=t.input.charCodeAt(t.position),(g||t.line===n)&&U===58&&(m=!0,U=t.input.charCodeAt(++t.position),yt(t,!0,e),ya(t,e,Ef,!1,!0),M=t.result),x?ga(t,l,b,F,v,M,n,i,o):m?l.push(ga(t,null,b,F,v,M,n,i,o)):l.push(v),yt(t,!0,e),U=t.input.charCodeAt(t.position),U===44?(r=!0,U=t.input.charCodeAt(++t.position)):r=!1}le(t,"unexpected end of the stream within a flow collection")}function vK(t,e){var r,n,i=VS,o=!1,a=!1,l=e,p=0,u=!1,d,m;if(m=t.input.charCodeAt(t.position),m===124)n=!1;else if(m===62)n=!0;else return!1;for(t.kind="scalar",t.result="";m!==0;)if(m=t.input.charCodeAt(++t.position),m===43||m===45)VS===i?i=m===43?Vk:cK:le(t,"repeat of a chomping mode identifier");else if((d=mK(m))>=0)d===0?le(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?le(t,"repeat of an indentation width identifier"):(l=e+d-1,a=!0);else break;if(Go(m)){do m=t.input.charCodeAt(++t.position);while(Go(m));if(m===35)do m=t.input.charCodeAt(++t.position);while(!jn(m)&&m!==0)}for(;m!==0;){for(KS(t),t.lineIndent=0,m=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&m===32;)t.lineIndent++,m=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),jn(m)){p++;continue}if(t.lineIndent<l){i===Vk?t.result+=bt.repeat(`
`,o?1+p:p):i===VS&&o&&(t.result+=`
`);break}for(n?Go(m)?(u=!0,t.result+=bt.repeat(`
`,o?1+p:p)):u?(u=!1,t.result+=bt.repeat(`
`,p+1)):p===0?o&&(t.result+=" "):t.result+=bt.repeat(`
`,p):t.result+=bt.repeat(`
`,o?1+p:p),o=!0,a=!0,p=0,r=t.position;!jn(m)&&m!==0;)m=t.input.charCodeAt(++t.position);no(t,r,t.position,!1)}return!0}function qk(t,e){var r,n=t.tag,i=t.anchor,o=[],a,l=!1,p;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),p=t.input.charCodeAt(t.position);p!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,le(t,"tab characters must not be used in indentation")),!(p!==45||(a=t.input.charCodeAt(t.position+1),!xr(a))));){if(l=!0,t.position++,yt(t,!0,-1)&&t.lineIndent<=e){o.push(null),p=t.input.charCodeAt(t.position);continue}if(r=t.line,ya(t,e,oP,!1,!0),o.push(t.result),yt(t,!0,-1),p=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&p!==0)le(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function bK(t,e,r){var n,i,o,a,l,p,u=t.tag,d=t.anchor,m={},g=Object.create(null),x=null,b=null,v=null,F=!1,M=!1,U;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=m),U=t.input.charCodeAt(t.position);U!==0;){if(!F&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,le(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(U===63||U===58)&&xr(n))U===63?(F&&(ga(t,m,g,x,b,null,a,l,p),x=b=v=null),M=!0,F=!0,i=!0):F?(F=!1,i=!0):le(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,U=n;else{if(a=t.line,l=t.lineStart,p=t.position,!ya(t,r,iP,!1,!0))break;if(t.line===o){for(U=t.input.charCodeAt(t.position);Go(U);)U=t.input.charCodeAt(++t.position);if(U===58)U=t.input.charCodeAt(++t.position),xr(U)||le(t,"a whitespace character is expected after the key-value separator within a block mapping"),F&&(ga(t,m,g,x,b,null,a,l,p),x=b=v=null),M=!0,F=!1,i=!1,x=t.tag,b=t.result;else if(M)le(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(M)le(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(F&&(a=t.line,l=t.lineStart,p=t.position),ya(t,e,Rf,!0,i)&&(F?b=t.result:v=t.result),F||(ga(t,m,g,x,b,v,a,l,p),x=b=v=null),yt(t,!0,-1),U=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&U!==0)le(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return F&&ga(t,m,g,x,b,null,a,l,p),M&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=m),M}function wK(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&le(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):le(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!xr(a);)a===33&&(n?le(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),sP.test(i)||le(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),uK.test(o)&&le(t,"tag suffix cannot contain flow indicator characters")}o&&!aP.test(o)&&le(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{le(t,"tag name is malformed: "+o)}return r?t.tag=o:io.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:le(t,'undeclared tag handle "'+i+'"'),!0}function _K(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&le(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!xr(r)&&!ha(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&le(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function EK(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!xr(n)&&!ha(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&le(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),io.call(t.anchorMap,r)||le(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],yt(t,!0,-1),!0}function ya(t,e,r,n,i){var o,a,l,p=1,u=!1,d=!1,m,g,x,b,v,F;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=Rf===r||oP===r,n&&yt(t,!0,-1)&&(u=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),p===1)for(;wK(t)||_K(t);)yt(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):l=!1;if(l&&(l=u||i),(p===1||Rf===r)&&(Ef===r||iP===r?v=e:v=e+1,F=t.position-t.lineStart,p===1?l&&(qk(t,F)||bK(t,F,v))||TK(t,v)?d=!0:(a&&vK(t,v)||xK(t,v)||SK(t,v)?d=!0:EK(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&le(t,"alias node should not have any properties")):yK(t,v,Ef===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):p===0&&(d=l&&qk(t,F))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&le(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),m=0,g=t.implicitTypes.length;m<g;m+=1)if(b=t.implicitTypes[m],b.resolve(t.result)){t.result=b.construct(t.result),t.tag=b.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(io.call(t.typeMap[t.kind||"fallback"],t.tag))b=t.typeMap[t.kind||"fallback"][t.tag];else for(b=null,x=t.typeMap.multi[t.kind||"fallback"],m=0,g=x.length;m<g;m+=1)if(t.tag.slice(0,x[m].tag.length)===x[m].tag){b=x[m];break}b||le(t,"unknown tag !<"+t.tag+">"),t.result!==null&&b.kind!==t.kind&&le(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+b.kind+'", not "'+t.kind+'"'),b.resolve(t.result,t.tag)?(t.result=b.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):le(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function RK(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(yt(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!xr(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&le(t,"directive name must not be less than one character in length");a!==0;){for(;Go(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!jn(a));break}if(jn(a))break;for(r=t.position;a!==0&&!xr(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&KS(t),io.call($k,n)?$k[n](t,n,i):kf(t,'unknown document directive "'+n+'"')}if(yt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,yt(t,!0,-1)):o&&le(t,"directives end mark is expected"),ya(t,t.lineIndent-1,Rf,!1,!0),yt(t,!0,-1),t.checkLineBreaks&&pK.test(t.input.slice(e,t.position))&&kf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Af(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,yt(t,!0,-1));return}if(t.position<t.length-1)le(t,"end of the stream or a document separator is expected");else return}function uP(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new gK(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,le(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)RK(r);return r.documents}function kK(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=uP(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function PK(t,e){var r=uP(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new yr("expected a single document in the stream, but found more")}}var MK=kK,AK=PK,fP={loadAll:MK,load:AK},dP=Object.prototype.toString,mP=Object.prototype.hasOwnProperty,ZS=65279,DK=9,nl=10,IK=13,FK=32,CK=33,OK=34,WS=35,NK=37,LK=38,UK=39,HK=42,hP=44,VK=45,Pf=58,BK=61,WK=62,$K=63,jK=64,gP=91,yP=93,qK=96,xP=123,zK=124,SP=125,$t={};$t[0]="\\0";$t[7]="\\a";$t[8]="\\b";$t[9]="\\t";$t[10]="\\n";$t[11]="\\v";$t[12]="\\f";$t[13]="\\r";$t[27]="\\e";$t[34]='\\"';$t[92]="\\\\";$t[133]="\\N";$t[160]="\\_";$t[8232]="\\L";$t[8233]="\\P";var GK=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],KK=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function QK(t,e){var r,n,i,o,a,l,p;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),p=t.compiledTypeMap.fallback[a],p&&mP.call(p.styleAliases,l)&&(l=p.styleAliases[l]),r[a]=l;return r}function ZK(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new yr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+bt.repeat("0",n-e.length)+e}var YK=1,il=2;function XK(t){this.schema=t.schema||GS,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=bt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=QK(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?il:YK,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function zk(t,e){for(var r=bt.repeat(" ",e),n=0,i=-1,o="",a,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=l):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}function $S(t,e){return`
`+bt.repeat(" ",t.indent*e)}function JK(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function Mf(t){return t===FK||t===DK}function ol(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==ZS||65536<=t&&t<=1114111}function Gk(t){return ol(t)&&t!==ZS&&t!==IK&&t!==nl}function Kk(t,e,r){var n=Gk(t),i=n&&!Mf(t);return(r?n:n&&t!==hP&&t!==gP&&t!==yP&&t!==xP&&t!==SP)&&t!==WS&&!(e===Pf&&!i)||Gk(e)&&!Mf(e)&&t===WS||e===Pf&&i}function e4(t){return ol(t)&&t!==ZS&&!Mf(t)&&t!==VK&&t!==$K&&t!==Pf&&t!==hP&&t!==gP&&t!==yP&&t!==xP&&t!==SP&&t!==WS&&t!==LK&&t!==HK&&t!==CK&&t!==zK&&t!==BK&&t!==WK&&t!==UK&&t!==OK&&t!==NK&&t!==jK&&t!==qK}function t4(t){return!Mf(t)&&t!==Pf}function tl(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function TP(t){var e=/^\n* /;return e.test(t)}var vP=1,jS=2,bP=3,wP=4,ma=5;function r4(t,e,r,n,i,o,a,l){var p,u=0,d=null,m=!1,g=!1,x=n!==-1,b=-1,v=e4(tl(t,0))&&t4(tl(t,t.length-1));if(e||a)for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=tl(t,p),!ol(u))return ma;v=v&&Kk(u,d,l),d=u}else{for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=tl(t,p),u===nl)m=!0,x&&(g=g||p-b-1>n&&t[b+1]!==" ",b=p);else if(!ol(u))return ma;v=v&&Kk(u,d,l),d=u}g=g||x&&p-b-1>n&&t[b+1]!==" "}return!m&&!g?v&&!a&&!i(t)?vP:o===il?ma:jS:r>9&&TP(t)?ma:a?o===il?ma:jS:g?wP:bP}function n4(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===il?'""':"''";if(!t.noCompatMode&&(GK.indexOf(e)!==-1||KK.test(e)))return t.quotingType===il?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function p(u){return JK(t,u)}switch(r4(e,l,t.indent,a,p,t.quotingType,t.forceQuotes&&!n,i)){case vP:return e;case jS:return"'"+e.replace(/'/g,"''")+"'";case bP:return"|"+Qk(e,t.indent)+Zk(zk(e,o));case wP:return">"+Qk(e,t.indent)+Zk(zk(i4(e,a),o));case ma:return'"'+o4(e)+'"';default:throw new yr("impossible error: invalid scalar style")}}()}function Qk(t,e){var r=TP(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function Zk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function i4(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,Yk(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var l=a[1],p=a[2];o=p[0]===" ",n+=l+(!i&&!o&&p!==""?`
`:"")+Yk(p,e),i=o}return n}function Yk(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,l=0,p="";n=r.exec(t);)l=n.index,l-i>e&&(o=a>i?a:l,p+=`
`+t.slice(i,o),i=o+1),a=l;return p+=`
`,t.length-i>e&&a>i?p+=t.slice(i,a)+`
`+t.slice(a+1):p+=t.slice(i),p.slice(1)}function o4(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=tl(t,i),n=$t[r],!n&&ol(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||ZK(r);return e}function s4(t,e,r){var n="",i=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(bi(t,e,l,!1,!1)||typeof l>"u"&&bi(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function Xk(t,e,r,n){var i="",o=t.tag,a,l,p;for(a=0,l=r.length;a<l;a+=1)p=r[a],t.replacer&&(p=t.replacer.call(r,String(a),p)),(bi(t,e+1,p,!0,!0,!1,!0)||typeof p>"u"&&bi(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=$S(t,e)),t.dump&&nl===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function a4(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,l,p,u,d;for(a=0,l=o.length;a<l;a+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),p=o[a],u=r[p],t.replacer&&(u=t.replacer.call(r,p,u)),bi(t,e,p,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),bi(t,e,u,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function c4(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),l,p,u,d,m,g;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new yr("sortKeys must be a boolean or a function");for(l=0,p=a.length;l<p;l+=1)g="",(!n||i!=="")&&(g+=$S(t,e)),u=a[l],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),bi(t,e+1,u,!0,!0,!0)&&(m=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,m&&(t.dump&&nl===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,m&&(g+=$S(t,e)),bi(t,e+1,d,!0,m)&&(t.dump&&nl===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function Jk(t,e,r){var n,i,o,a,l,p;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(p=t.styleMap[l.tag]||l.defaultStyle,dP.call(l.represent)==="[object Function]")n=l.represent(e,p);else if(mP.call(l.represent,p))n=l.represent[p](e,p);else throw new yr("!<"+l.tag+'> tag resolver accepts not "'+p+'" style');t.dump=n}return!0}return!1}function bi(t,e,r,n,i,o,a){t.tag=null,t.dump=r,Jk(t,r,!1)||Jk(t,r,!0);var l=dP.call(t.dump),p=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",m,g;if(d&&(m=t.duplicates.indexOf(r),g=m!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[m])t.dump="*ref_"+m;else{if(d&&g&&!t.usedDuplicates[m]&&(t.usedDuplicates[m]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(c4(t,e,t.dump,i),g&&(t.dump="&ref_"+m+t.dump)):(a4(t,e,t.dump),g&&(t.dump="&ref_"+m+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?Xk(t,e-1,t.dump,i):Xk(t,e,t.dump,i),g&&(t.dump="&ref_"+m+t.dump)):(s4(t,e,t.dump),g&&(t.dump="&ref_"+m+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&n4(t,t.dump,e,o,p);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new yr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function l4(t,e){var r=[],n=[],i,o;for(qS(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function qS(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)qS(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)qS(t[n[i]],e,r)}function p4(t,e){e=e||{};var r=new XK(e);r.noRefs||l4(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),bi(r,0,n,!0,!0)?r.dump+`
`:""}var u4=p4,f4={dump:u4};function YS(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var _P=Nt;var EP=GS,d4=fP.load,Nde=fP.loadAll,RP=f4.dump;var Lde=YS("safeLoad","load"),Ude=YS("safeLoadAll","loadAll"),Hde=YS("safeDump","dump");var Df=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=RP(this.data,Object.assign({replacer:y4,schema:h4},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},m4=new _P("!format",{kind:"scalar",resolve:()=>!1,instanceOf:Df,represent:t=>t.represent()}),h4=EP.extend({implicit:[m4]}),XS=t=>typeof t=="object"&&t!=null;function g4(t){if(XS(t))return Object.values(t).every(e=>!XS(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!XS(e)&&!Array.isArray(e))}function y4(t,e){return t===""?e:g4(e)?new Df(e,{flowLevel:0}):e}var JS=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","flashTargets","foldRegion","followLink","followLinkAside","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],S4=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],PP=[...JS,...S4];var T4=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleBacktickQuotes","tripleDoubleQuotes","tripleSingleQuotes"],v4=["string","any","collectionBoundary"],If=[...T4,...v4],Ko=["argumentOrParameter","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function MP(t){return Ko.includes(t.type)}var AP=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],sl=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},xa=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function al(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function Qo(t){return t.version>=7}var oo=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var Sa=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function DP(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function cl(t){return typeof t=="string"||t instanceof String}function Ff(t){let[e,...r]=t;return w4(e,r)}function w4(t,e){let r;if(cl(t)){let n=t,[i,o,...a]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:a,usePrePhraseSnapshot:!1}}else r=t;return r}function ll(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function IP(t){for(let e of t)return!1;return!0}function wi(t){return Object.keys(t)}function pl(t,e){return`${t}.${e}`}var CP={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(FP).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(FP).join("")}};function FP(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}function OP(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,a)=>{let l=r(a),p=o.get(l);return p==null?(o.set(l,[a]),o):(o.get(l).push(a),p.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,qc(i.get(o),e))}),t.flatMap(o=>{let a=r(o),l=i.get(a);if(l==null||l.length===0)return[];let p=l[0];return e(p,o)?(l.shift(),p):[]}))}function Zo(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var BP=Symbol.for("immer-nothing"),NP=Symbol.for("immer-draftable"),Ur=Symbol.for("immer-state"),_4=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function Sr(t,...e){if(process.env.NODE_ENV!=="production"){let r=_4[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ta=Object.getPrototypeOf;function va(t){return!!t&&!!t[Ur]}function Xo(t){return t?WP(t)||Array.isArray(t)||!!t[NP]||!!t.constructor?.[NP]||Uf(t)||Hf(t):!1}var E4=Object.prototype.constructor.toString();function WP(t){if(!t||typeof t!="object")return!1;let e=Ta(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===E4}function Cf(t,e){Lf(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Lf(t){let e=t[Ur];return e?e.type_:Array.isArray(t)?1:Uf(t)?2:Hf(t)?3:0}function rT(t,e){return Lf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function $P(t,e,r){let n=Lf(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function R4(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Uf(t){return t instanceof Map}function Hf(t){return t instanceof Set}function Yo(t){return t.copy_||t.base_}function nT(t,e){if(Uf(t))return new Map(t);if(Hf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=WP(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[Ur];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let a=i[o],l=n[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[a]})}return Object.create(Ta(t),n)}else{let n=Ta(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function cT(t,e=!1){return Vf(t)||va(t)||!Xo(t)||(Lf(t)>1&&(t.set=t.add=t.clear=t.delete=k4),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>cT(n,!0))),t}function k4(){Sr(2)}function Vf(t){return Object.isFrozen(t)}var P4={};function Jo(t){let e=P4[t];return e||Sr(0,t),e}var ul;function jP(){return ul}function M4(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function LP(t,e){e&&(Jo("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function iT(t){oT(t),t.drafts_.forEach(A4),t.drafts_=null}function oT(t){t===ul&&(ul=t.parent_)}function UP(t){return ul=M4(ul,t)}function A4(t){let e=t[Ur];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function HP(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Ur].modified_&&(iT(e),Sr(4)),Xo(t)&&(t=Of(e,t),e.parent_||Nf(e,t)),e.patches_&&Jo("Patches").generateReplacementPatches_(r[Ur].base_,t,e.patches_,e.inversePatches_)):t=Of(e,r,[]),iT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==BP?t:void 0}function Of(t,e,r){if(Vf(e))return e;let n=e[Ur];if(!n)return Cf(e,(i,o)=>VP(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Nf(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,a=!1;n.type_===3&&(o=new Set(i),i.clear(),a=!0),Cf(o,(l,p)=>VP(t,n,i,l,p,r,a)),Nf(t,i,!1),r&&t.patches_&&Jo("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function VP(t,e,r,n,i,o,a){if(process.env.NODE_ENV!=="production"&&i===r&&Sr(5),va(i)){let l=o&&e&&e.type_!==3&&!rT(e.assigned_,n)?o.concat(n):void 0,p=Of(t,i,l);if($P(r,n,p),va(p))t.canAutoFreeze_=!1;else return}else a&&r.add(i);if(Xo(i)&&!Vf(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Of(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Nf(t,i)}}function Nf(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&cT(e,r)}function D4(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:jP(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=lT;r&&(i=[n],o=fl);let{revoke:a,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=a,l}var lT={get(t,e){if(e===Ur)return t;let r=Yo(t);if(!rT(r,e))return I4(t,r,e);let n=r[e];return t.finalized_||!Xo(n)?n:n===eT(t.base_,e)?(tT(t),t.copy_[e]=aT(n,t)):n},has(t,e){return e in Yo(t)},ownKeys(t){return Reflect.ownKeys(Yo(t))},set(t,e,r){let n=qP(Yo(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=eT(Yo(t),e),o=i?.[Ur];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(R4(r,i)&&(r!==void 0||rT(t.base_,e)))return!0;tT(t),sT(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return eT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,tT(t),sT(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=Yo(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Sr(11)},getPrototypeOf(t){return Ta(t.base_)},setPrototypeOf(){Sr(12)}},fl={};Cf(lT,(t,e)=>{fl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});fl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&Sr(13),fl.set.call(this,t,e,void 0)};fl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&Sr(14),lT.set.call(this,t[0],e,r,t[0])};function eT(t,e){let r=t[Ur];return(r?Yo(r):t)[e]}function I4(t,e,r){let n=qP(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function qP(t,e){if(!(e in t))return;let r=Ta(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Ta(r)}}function sT(t){t.modified_||(t.modified_=!0,t.parent_&&sT(t.parent_))}function tT(t){t.copy_||(t.copy_=nT(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var F4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let a=this;return function(p=o,...u){return a.produce(p,d=>r.call(this,d,...u))}}typeof r!="function"&&Sr(6),n!==void 0&&typeof n!="function"&&Sr(7);let i;if(Xo(e)){let o=UP(this),a=aT(e,void 0),l=!0;try{i=r(a),l=!1}finally{l?iT(o):oT(o)}return LP(o,n),HP(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===BP&&(i=void 0),this.autoFreeze_&&cT(i,!0),n){let o=[],a=[];Jo("Patches").generateReplacementPatches_(e,i,o,a),n(o,a)}return i}else Sr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,p=>e(p,...l));let n,i;return[this.produce(e,r,(a,l)=>{n=a,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Xo(t)||Sr(8),va(t)&&(t=C4(t));let e=UP(this),r=aT(t,void 0);return r[Ur].isManual_=!0,oT(e),r}finishDraft(t,e){let r=t&&t[Ur];(!r||!r.isManual_)&&Sr(9);let{scope_:n}=r;return LP(n,e),HP(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=Jo("Patches").applyPatches_;return va(t)?n(t,e):this.produce(t,i=>n(i,e))}};function aT(t,e){let r=Uf(t)?Jo("MapSet").proxyMap_(t,e):Hf(t)?Jo("MapSet").proxySet_(t,e):D4(t,e);return(e?e.scope_:jP()).drafts_.push(r),r}function C4(t){return va(t)||Sr(10,t),zP(t)}function zP(t){if(!Xo(t)||Vf(t))return t;let e=t[Ur],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=nT(t,e.scope_.immer_.useStrictShallowCopy_)}else r=nT(t,!0);return Cf(r,(n,i)=>{$P(r,n,zP(i))}),e&&(e.finalized_=!1),r}var Hr=new F4,Bf=Hr.produce,Hge=Hr.produceWithPatches.bind(Hr),Vge=Hr.setAutoFreeze.bind(Hr),Bge=Hr.setUseStrictShallowCopy.bind(Hr),Wge=Hr.applyPatches.bind(Hr),$ge=Hr.createDraft.bind(Hr),jge=Hr.finishDraft.bind(Hr);var nr=dr(mM(),1),Mye=nr.default.v1,Aye=nr.default.v1ToV6,Dye=nr.default.v3,hM=nr.default.v4,Iye=nr.default.v5,Fye=nr.default.v6,Cye=nr.default.v6ToV1,Oye=nr.default.v7,Nye=nr.default.NIL,Lye=nr.default.MAX,Uye=nr.default.version,Hye=nr.default.validate,Vye=nr.default.stringify,Bye=nr.default.parse;function gM(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function sd(t,e){if(Array.isArray(t))return t.map(r=>sd(r,e));if(typeof t=="object"&&t!=null){if(r9(t))return gM(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=sd(t[n],e));return r}return t}function r9(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var dd=dr(xM(),1);var n9={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},i9={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},cd={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},ld={modulo100:"row",relativeUp:"up",relativeDown:"down"};function SM(t){let e=n9[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function TM(t){let e=i9[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function TT(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var o9=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),s9=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),a9={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},vM={...o9,...s9,...a9};function so(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function wt(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var bM={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:wt("triple quad"),tripleSingleQuotes:wt("triple twin"),tripleBacktickQuotes:wt("triple skis"),any:"pair",string:"string",whitespace:"void",collectionBoundary:wt("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:so("one section"),sectionLevelTwo:so("two section"),sectionLevelThree:so("three section"),sectionLevelFour:so("four section"),sectionLevelFive:so("five section"),sectionLevelSix:so("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:wt("parse tree string"),textFragment:wt("text fragment"),disqualifyDelimiter:wt("disqualify delimiter"),pairDelimiter:wt("pair delimiter"),"private.fieldAccess":wt("access"),"private.switchStatementSubject":wt("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",flashTargets:"flash",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join","private.showParseTree":wt("parse tree"),"experimental.setInstanceReference":so("from"),editNew:wt("edit new"),executeCommand:wt("execute command"),parsed:wt("parsed"),getText:wt("get text"),replace:wt("replace"),"private.getTargets":wt("get targets"),"private.setKeyboardTarget":wt("set keyboard target")},customAction:{},grapheme:vM};var vT=TT(bM,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),Ei=TT(vT,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var mt={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var EM=dr(_M(),1),ud=class{constructor(e){this.mooLexer=EM.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Ri={};for(let t of JS){let{spokenForms:e}=Ei.action[t];for(let r of e)Ri[r]={type:"simpleActionName",value:t}}var c9=["replaceWithTarget","moveToTarget"];for(let t of c9){let{spokenForms:e}=Ei.action[t];for(let r of e)Ri[r]={type:"bringMove",value:t}}var l9=["before","after","to"];for(let t of l9){let e=mt[t==="to"?"sourceDestinationConnective":t];Ri[e]={type:"insertionMode",value:t}}for(let t of Ko){let{spokenForms:e}=Ei.simpleScopeTypeType[t];for(let r of e)Ri[r]={type:"simpleScopeTypeType",value:t}}for(let t of If){let{spokenForms:e}=Ei.pairedDelimiter[t];for(let r of e)Ri[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(cd))e!=null&&(Ri[e]={type:"simpleMarkType",value:t});var ki=new ud({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Ri),type:t=>Ri[t].type,value:t=>Ri[t].value}});function RM(t,e){return{name:t,target:e}}function kM(t,e,r){return{name:t,source:e,destination:r}}function fd(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function PM(t,e){return{type:"primitive",insertionMode:t,target:e}}function MM(t){return{type:"containingScope",scopeType:t}}function AM(t){return{type:t}}function DM(t){return{type:"surroundingPair",delimiter:t}}function IM(t){return{type:t}}function FM(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function bT(t){return t[0]}var p9={Lexer:ki,ParserRules:[{name:"main",symbols:["action"],postprocess:bT},{name:"action",symbols:[ki.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>RM(t,e)},{name:"action",symbols:[ki.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>kM(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:bT},{name:"destination",symbols:[ki.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>PM(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:bT},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>fd(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>fd(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>fd(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>MM(t)},{name:"scopeType",symbols:[ki.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>AM(t)},{name:"scopeType",symbols:[ki.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>DM(t)},{name:"mark",symbols:[ki.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>IM(t)},{name:"mark",symbols:[ki.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>FM(t)}],ParserStart:"main"},CM=p9;function u9(){return new dd.Parser(dd.Grammar.fromCompiled(CM))}function OM(t){let e=u9();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function md(t,e){let r=OM(t);return sd(r,e)}function gl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...NM(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return NM(t.destination);case"parsed":return gl(md(t.content,t.arguments));default:return[t.target]}}function NM(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function _T(t){return t.flatMap(wT)}function wT(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(wT);case"range":return[t.anchor,t.active].flatMap(wT);case"implicit":return[]}}var f9={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},d9={purple:"pink"};function m9(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=f9[e.scopeType.type]??e.scopeType.type)})}function h9(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=d9[t.mark.symbolColor]??t.mark.symbolColor)}function ET(t){_T(t).forEach(e=>{m9(e),h9(e)})}function LM(t){return{...t,version:1}}var g9={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},y9={type:"primitive",isImplicit:!0},UM=t=>vi(t,g9)?y9:t;function HM(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:S9(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function x9(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function RT(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:a,selectionType:l,position:p}=t,u=[];if(p&&p!=="contents"&&(p==="before"?o==="inside"?u.push({type:"position",position:"start"}):e==="remove"?u.push({type:"leading"}):u.push({type:"position",position:"before"}):o==="inside"?u.push({type:"position",position:"end"}):e==="remove"?u.push({type:"trailing"}):u.push({type:"position",position:"after"})),l)switch(l){case"token":if(a?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:u.push({type:"containingScope",scopeType:{type:l}})}return a&&u.push(...x9(a)),{type:r,isImplicit:n,modifiers:u.length>0?u:void 0,mark:i?.type==="cursorToken"?void 0:i}}function VM(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>VM(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:a,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:RT(i,e),active:RT(o,e),excludeAnchor:a??!1,excludeActive:l??!1}}case"primitive":return RT(t,e)}}function S9(t,e){return t.map(r=>VM(r,e)).map(r=>r.type==="primitive"?UM(r):r)}function BM(t){return{...t,version:3,targets:t.targets.map(WM)}}function WM(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>WM(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:kT(e),active:kT(r),...n}}case"primitive":return kT(t)}}function kT(t){let e=t.modifiers!=null?t.modifiers.map(v9):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:xl(r),modifiers:e},active:{type:"primitive",mark:xl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?T9(t.mark):void 0,modifiers:e}}function T9(t){switch(t.type){case"lineNumber":return b9(t);default:return t}}function v9(t){switch(t.type){case"ordinalRange":return w9(t);default:return t}}function b9(t){return vi(t.anchor,t.active)?xl(t.anchor):{type:"range",anchor:xl(t.anchor),active:xl(t.active)}}function w9(t){return t.anchor===t.active?yl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?yl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?yl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:yl(t.scopeType,t.anchor),active:yl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function xl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function yl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function jM(t){return{...t,version:4,targets:t.targets.map(qM)}}function qM(t){switch(t.type){case"primitive":return $M(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:$M(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(qM)}}}}function $M(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function zM(t){return{...t,version:5,action:_9(t.action),targets:t.targets.map(hd)}}function _9(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=E9(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function E9(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function hd(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(hd)};case"range":return{...t,anchor:hd(t.anchor),active:hd(t.active)};case"primitive":return{...t,mark:t.mark!=null?PT(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(MT):void 0}}}function PT(t){return t.type==="range"?{...t,anchor:PT(t.anchor),active:PT(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function MT(t){return t.type==="range"?{...t,anchor:MT(t.anchor),active:MT(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var R9={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function AT(t){let e=R9[t]??t;if(!PP.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function GM(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:k9(t.action,t.targets)}}function k9(t,e){let r=AT(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:cn(e[0]),destination:Sl(e[1])};case"swapTargets":return{name:r,target1:cn(e[0]),target2:cn(e[1])};case"callAsFunction":return{name:r,callee:cn(e[0]),argument:cn(e[1])};case"pasteFromClipboard":return{name:r,destination:Sl(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:cn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:cn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:Sl(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:cn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:cn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:Sl(e[0])};case"highlight":{let n={name:r,target:cn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:Sl(e[0])};case"getText":return{name:r,options:t.args?.[0],target:cn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:cn(e[0])}}}function cn(t){switch(t.type){case"list":case"range":case"primitive":return P9(t);case"implicit":return t}}function P9(t){switch(t.type){case"list":return M9(t);case"range":case"primitive":return gd(t)}}function M9(t){return{...t,elements:t.elements.map(gd)}}function gd(t){switch(t.type){case"range":return KM(t);case"primitive":return yd(t)}}function KM(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:yd(e),active:yd(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function yd(t){let e={type:"primitive"},r=O9(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function Sl(t){switch(t.type){case"list":return A9(t);case"range":return D9(t);case"primitive":return I9(t);case"implicit":return F9()}}function A9(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let a=xd(o);a!=null?(i(),r=[gd(o)],n=a):r.push(gd(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function D9(t){return{type:"primitive",insertionMode:xd(t.anchor)??"to",target:KM(t)}}function I9(t){return{type:"primitive",insertionMode:xd(t)??"to",target:yd(t)}}function F9(){return{type:"implicit"}}function xd(t){switch(t.type){case"implicit":return"to";case"primitive":return C9(t);case"range":return xd(t.anchor)}}function C9(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function O9(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function QM(t){return{...t,version:7}}function IT(t){let e=N9(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Bf(r,o=>{let a=gl(o);ET(a),r.name}),usePrePhraseSnapshot:n}}function N9(t,e){if(t.version>7)throw new Cu;for(;t.version<e;)switch(t.version){case 0:t=LM(t);break;case 1:t=HM(t);break;case 2:t=BM(t);break;case 3:t=jM(t);break;case 4:t=zM(t);break;case 5:t=GM(t);break;case 6:t=QM(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var FT;function Sd(t){FT=t}function k(){if(FT==null)throw Error("Tried to access ide before it was injected");return FT}var Td=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var L9=25,vd=class{constructor(){this.targetMap=new Map;this.targetHistory=new Sa(()=>new Td(L9));this.notifier=new Wt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of da)e(r,this.get(r));return this.notifier.registerListener(e)}};function ao(t,e){return new W(new pe(e.start.line,0),t.document.lineAt(e.end).range.end)}function CT(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function ZM(t,e){let[r,n]=e instanceof pe?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function ts(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var bd=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=H9(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?U9(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=a=>this.updateRange(a,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?ts(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new W(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),a=o+r.length;return new W(this.editor.document.positionAt(o),this.editor.document.positionAt(a))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function U9(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let a=o.rangeTrimmed?.start??o.range.end;a.character<r&&(r=a.character,n=o.text.slice(0,r))}return n}function H9(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function co(t,e,r,n){return Tl(t.contentRange,e.contentRange,r,n)}function Tl(t,e,r,n){return new W(r?t.start:t.end,n?e.end:e.start)}function ba(t,e,r,n){let i=r?t.contentRange.start:new pe(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new W(i,o)}var Ue=class t{constructor(e){this.isLine=!1;this.isToken=!0;this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.isWord=!1;this.joinAs="line";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return this.getRemovalRange()}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:co(this,r,!0,!0)})}isEqual(e){return e instanceof t&&vi(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new bd(this,e)}toPlainObject(){return{type:this.type,contentRange:el(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function wd(t,e){return V9(t,e.start,e.end)}function V9(t,e,r){return{editor:t.editor,selection:B9(t.selection,e,r)}}function B9(t,e,r){return t.isReversed?new we(r,e):new we(e,r)}function rs(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,a=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,p=r.positionAt(a),u=r.positionAt(l);return new W(p,u)}function _d(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var qe=class extends Ue{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.isToken=r.isToken??!0,this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,isToken:this.isToken,insertionDelimiter:this.insertionDelimiter}}};function wa(t,e,r){return _d(qe,t,e,r)}var Ed=class extends Ue{constructor(r){super(r);this.type="DocumentTarget";this.insertionDelimiter=`
`;this.isLine=!0}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getRemovalRange(){return this.contentRange}getInterior(){return[new qe({editor:this.editor,isReversed:this.isReversed,contentRange:rs(this.editor,this.contentRange)})]}getCloneParameters(){return this.state}};var Vr=class t extends Ue{constructor(){super(...arguments);this.type="LineTarget";this.insertionDelimiter=`
`;this.isLine=!0;this.getRemovalHighlightRange=()=>this.fullLineContentRange}get fullLineContentRange(){return ao(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return wa(this.editor,W9(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return wa(this.editor,$9(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:ba(this,n,!0,!0)})}getCloneParameters(){return this.state}};function W9(t,e){let{start:r}=e;return r.line>0?new W(t.document.lineAt(r.line-1).range.end,e.start):void 0}function $9(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new W(e.end,new pe(r.line+1,0)):void 0}function OT(t,e,r){return _d(Vr,t,e,r)}var Rd=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var kd=class extends Ue{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new Rd(this,r)}};var _a=class t extends Ue{constructor(){super(...arguments);this.type="ParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0}getLeadingDelimiterTarget(){return OT(this.editor,j9(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return OT(this.editor,q9(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new Vr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return ao(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:ba(this,n,!0,!0)})}getCloneParameters(){return this.state}};function j9(t,e){let{document:r}=t,n=r.lineAt(e.start),i=z9(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new W(new pe(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new W(new pe(0,0),r.lineAt(n.lineNumber-1).range.end)}function q9(t,e){let{document:r}=t,n=r.lineAt(e.end),i=G9(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new W(new pe(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new W(new pe(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function z9(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function G9(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var lo=class extends Ue{constructor(){super(...arguments);this.type="RawSelectionTarget";this.insertionDelimiter="";this.isRaw=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var Ea=class t extends Ue{constructor(r){super({...r,contentRange:rs(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:Tl(this.fullInteriorRange,n.fullInteriorRange,!0,!0)})}};function Pd(t){let e=ts(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var K9=['"',"'","(","[","{","<"],Q9=['"',"'",")","]","}",">",",",";",":"];function qn(t){let{editor:e}=t,{start:r}=ts(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new qe({contentRange:new W(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function zn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new qe({contentRange:new W(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function Gn(t){let{editor:e}=t,r=ts(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),a=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=ao(e,r);return o.union(a).isRangeEqual(l)?l:!a.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||K9.includes(Z9(e,r)))?r.union(a):!o.isEmpty&&(r.end.isEqual(l.end)||Q9.includes(Y9(e,r)))?r.union(o):r}function Z9(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new W(r.translate(void 0,-1),r)):""}function Y9(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new W(r.translate(void 0,1),r)):""}var po=class t extends Ue{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.interiorRange_=r.interiorRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??X9(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new qe({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return qn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new qe({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return zn(this)}getInterior(){return this.interiorRange_==null?super.getInterior():[new Ea({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?Pd(this):Gn(this)}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?Tl(this.removalRange_??this.contentRange,n.removalRange_??n.contentRange,!0,!0):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:co(this,n,!0,!0)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function X9(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var Md=class t extends Ue{constructor(r){super(r);this.type="SubTokenWordTarget";this.isToken=!1;this.isWord=!0;this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return wa(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return wa(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return Pd(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:co(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var vr=class extends Ue{constructor(){super(...arguments);this.type="TokenTarget";this.insertionDelimiter=" ";this.joinAs="token"}getLeadingDelimiterTarget(){return qn(this)}getTrailingDelimiterTarget(){return zn(this)}getRemovalRange(){return Gn(this)}getCloneParameters(){return this.state}};var Ad=class extends Ue{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return qn(this)}getTrailingDelimiterTarget(){return zn(this)}getRemovalRange(){return Gn(this)}getInterior(){return[new Ea({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new vr({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Mt=class extends Ue{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.isToken=r.isToken??!0}getLeadingDelimiterTarget(){return qn(this)}getTrailingDelimiterTarget(){return zn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:Gn(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,isToken:this.isToken,hasExplicitRange:this.hasExplicitRange}}};var Dd=class extends Ue{constructor(){super(...arguments);this.type="ImplicitTarget";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var Id=class extends Ue{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:YM(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return qn(this)}getTrailingDelimiterTarget(){return zn(this)}getRemovalRange(){return Gn(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new qe({editor:this.editor,contentRange:YM(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function YM(t,e,r){return r?new W(e.start,t.end):new W(t.start,e.end)}var Fd=class t extends Ue{constructor(r){super({...r,contentRange:J9(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new Vr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return ao(this.editor,this.contentRange)}getRemovalHighlightRange(){if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function J9(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function Cd(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var Ra=class{run(){return Cd(k()).map(e=>new Mt({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,isToken:!1}))}};var Kn=class{constructor(e,r){this.debouncer=new Iu(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var Od=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Kn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new Ra().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var Nd=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var e5=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],t5=e5.map(Lr).join("|"),r5=["[a-zA-Z0-9]",t5].join("|"),n5=new RegExp(`^(${r5})$`,"u"),i5="[unk]",o5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Ld=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Wt;this.getTokenGraphemes=e=>gr(e,o5,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;k().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(k().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=k().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=xS(o),n5.test(o)||(o=i5)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function ns(){return NT==null&&(NT=new Ld),NT}var NT;var XM=({penalty:t})=>-t;function JM(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function eA(t,e){let r=$c(n=>ES(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function LT(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function tA(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function rA(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=s5(r,n)}return r[0]}function s5(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function nA({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,a){return rA(a,[LT(i),tA(r),LT(o),JM(t),XM,eA(n,e)])}function iA(t,e,r){let n={},i=new oo(({grapheme:o,hatStyle:a})=>[o,a]);return t.forEach(({token:o,rank:a})=>{let l=e.get(o);l!=null&&i.set(l,a),r.getTokenGraphemes(o.text).forEach(({text:p})=>{let u;p in n?u=n[p]:(u=[],n[p]=u),u.push(a)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function oA(t,e=[]){return new Map(wS(et,jo)(jc([e],t.visibleRanges.map(r=>RS(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function sA(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let a=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return a-l}}var a5=["-","+","*","/","=","<",">","_","#",".","|","&",":"],c5=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],l5=["\\p{L}","\\p{M}","\\p{N}"],p5="[^\\s\\w]",u5="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function f5(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:a}=t,l=r.map(Lr).map(x=>`${x}+`).join("|"),p=e.map(Lr).join("|"),d=`(${n.concat(i.map(Lr)).join("|")})+`,m=`(${n.join("|")})+`,g=[p,o,d,l,a].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(m,"gu"),tokenMatcher:new RegExp(g,"gu")}}var UT=new Map;function br(t){let e=k().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!UT.has(r)){let n={fixedTokens:c5,repeatableSymbols:a5,identifierWordRegexes:l5,identifierWordDelimiters:e,numbersRegex:u5,singleSymbolsRegex:p5};UT.set(r,f5(n))}return UT.get(r)}function aA(t,e,r){return gr(t,br(e).tokenMatcher,r)}function cA(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return aA(n,r,o=>{let a=i+o.index,l=i+o.index+o[0].length,p=new W(t.document.positionAt(a),t.document.positionAt(l));return{editor:t,text:o[0],range:p,offsets:{start:a,end:l}}})}function lA(t,e,r){let i=m5(t,e).flatMap(o=>{let a=o.selections[0].active,l=oA(o,[a.line]),p=et(o.visibleRanges.map(u=>cA(o,u).map(d=>({...d,displayLine:l.get(d.range.start.line)}))));return p.sort(sA(l.get(a.line),a.character)),p});return d5(r,i).map((o,a)=>({token:o,rank:-a}))}function d5(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function m5(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function HT({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:a}){let l=r==null?void 0:pA(r),p=pA(n),u=lA(o,a,l),d=iA(u,p,t),m=Object.keys(e),g=new Sa(()=>[...m]);return u.map(({token:x,rank:b})=>{let v=h5(t,x,g,e),F=nA(d,i,b,l?.get(x),p.get(x),v);if(F!=null)return g.set(F.grapheme.text,g.get(F.grapheme.text).filter(M=>M!==F.style)),g5(x,F)}).filter(x=>x!=null)}function pA(t){let e=new oo(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function h5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text);for(let a of o)for(let l of r.get(a.text))i.push({grapheme:a,style:l,penalty:n[l].penalty});return i}function g5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new W(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var Ud=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];k().disposeOnExit(this);let n=new Kn(k().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeActiveTextEditor(n.run),k().onDidChangeVisibleTextEditors(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorSelection(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),ns().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:ns().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?HT({tokenGraphemeSplitter:ns(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:k().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:k().activeTextEditor,visibleTextEditors:k().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:a}})=>({editor:a,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var Hd=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:a}=n,l=this.makeTokenLive(a);return this.map[pl(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=br(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[pl(e,ns().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var y5=6e4,Vd=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;k().disposeOnExit(this),this.activeMap=new Hd(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new Ud(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>y5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function VT(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var jT=dr(bl(),1);function qT(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:a,end:l}}=e;return(0,jT.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,jT.invariant)(n>=a&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=a?a+o:Math.min(a,i),end:n<=l?l+o:Math.min(l,i)}}var gA=dr(bl(),1);function zT(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,gA.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let a=e.expansionBehavior.end;switch(a.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(vf(a.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let a=e.expansionBehavior.start;switch(a.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(Tf(a.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var GT=dr(bl(),1);function KT(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:a},text:l}=e;if((0,GT.invariant)(a>o,()=>"Selection range expected to be nonempty"),(0,GT.invariant)(n>=o&&n<=a,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<a)return{start:o,end:a+i};if(n===o){let p=e.expansionBehavior.start,u=a+i;switch(p.type){case"closed":return{start:o+i,end:u};case"open":return{start:o,end:u};case"regex":{let d=r+l,m=Tf(p.regex),g=d.search(m);for(;g>r.length;)d=d.slice(0,g),g=d.search(m);return g===-1?{start:o,end:u}:{start:o+g,end:u}}}}else{let p=e.expansionBehavior.end,u=o;switch(p.type){case"closed":return{start:u,end:a};case"open":return{start:u,end:a+i};case"regex":{let d=l+r,m=vf(p.regex),g=d.match(m),x=g==null?0:g[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,g=d.match(m),x=g==null?0:x+g[0].length;return x===0?{start:u,end:a}:{start:u,end:o+x}}}}}function yA(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:a}=e.offsets,l=Math.min(n,o),p="";return o<n&&(p+=e.text.substring(0,n-o)),p+=t.event.text,i<a&&(p+=e.text.substring(a-i,e.text.length)),p.substring(r.start-l,r.end-l)}function xA(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let a=o.text.length-o.rangeLength,l=o.rangeOffset,p=l+o.rangeLength,u=l,d=p+a;return{displacement:a,event:o,originalOffsets:{start:l,end:p},finalOffsets:{start:u,end:d}}});for(let o of e){let a=o.offsets,l=i.map(u=>{let d;return u.originalOffsets.start>a.end?{start:0,end:0}:u.originalOffsets.end<a.start?{start:u.displacement,end:u.displacement}:(u.event.rangeLength===0?o.range.isEmpty?d=zT(u,o):d=KT(u,o):d=qT(u,o),o.text=yA(u,o,d),{start:d.start-a.start,end:d.end-a.end})}),p={start:a.start+mf(l,({start:u})=>u),end:a.end+mf(l,({end:u})=>u)};o.range=o.range.with(r.positionAt(p.start),r.positionAt(p.end)),o.offsets=p}}var Wd=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return VT(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return VT(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>rr(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>rr(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=k().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>R5(r,i)?{...i,isReplace:!0}:i)};xA(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function R5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var $d=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var jd=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var qd=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var zd=class{updateUserSnippets(){throw new Error("Snippets are not implemented.")}registerThirdPartySnippets(e,r){throw new Error("Snippets are not implemented.")}getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e,r){throw new Error("Snippets are not implemented.")}};var Gd=class{getSpokenFormEntries(){throw new xa}onDidChange(){return{dispose:()=>{}}}};var Kd=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getLanguage(e){throw new Error("Tree sitter not provided")}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}};var Ze=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var SA={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleBacktickQuotes:["```","```"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var TA=new oo(t=>t);for(let[t,e]of Object.entries(SA))e!=null&&TA.set(e,t);function vA(t,e,r){let n=TA.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}var k5={ifStatement:"if",ifElseStatement:"if else",tryCatchStatement:"try",functionDeclaration:"funk",link:"link"},P5={"ifElseStatement.alternative":"else","functionDeclaration.body":"funk","ifElseStatement.consequence":"if else","ifStatement.consequence":"if","tryCatchStatement.body":"try","link.text":"link"};function bA(t){if(t.type==="custom")throw new Ze("Custom insertion snippet");let e=k5[t.name];if(e==null)throw new Ze(`Named insertion snippet '${t.name}'`);if(t.substitutions!=null){let r=Object.values(t.substitutions);return`${e} ${r.join(" ")}`}return e}function wA(t){if(t.type==="custom")throw new Ze("Custom wrap with snippet");let e=`${t.name}.${t.variableName}`,r=P5[e];if(r==null)throw new Ze(`Named wrap with snippet '${e}'`);return r}function wl(t,e,r){let n=r==="vertical"?`${mt.verticalRange} `:"";if(t&&e)return n+mt.rangeExclusive;if(t)throw new Ze("Range exclude anchor");return e?n+mt.rangeExcludingEnd:r==="vertical"?mt.verticalRange:mt.rangeInclusive}function _A(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var M5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],A5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function ka(t){let e=M5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function _l(t){let e=A5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Qd=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new Ze(`Modifier '${e.type}'`);case"containingScope":return e.ancestorIndex==null||e.ancestorIndex===0?this.handleScopeType(e.scopeType):[new Array(e.ancestorIndex).fill(this.spokenFormMap.modifierExtra.ancestor),this.handleScopeType(e.scopeType)];case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,_l(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,_l(e.start+1),r];let i=ka(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,El(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,El(r)];throw new Ze(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:_l(e.anchor.start+1),n=this.handleModifier(e.active),i=wl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let a=e.direction==="forward"?mt.forward:mt.backward;return[n,r,a]}let i=ka(e.length),o=El(r);return e.direction==="forward"?[n,i,o]:[n,i,o,mt.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?mt.next:mt.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=ka(e.length);if(e.length===1)return[i,n,r];let a=El(r);return[i,n,o,a]}if(e.length===1){let o=_l(e.offset);return[i,o,n,r]}throw new Ze(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new Ze(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,RA(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(SM(r)),n!=null&&i.push(TM(n)),i.push(RA(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let a=wl(e.excludeAnchor,e.excludeActive);return[r,n,a,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new Ze(`Mark '${e.type}'`);default:return[cd[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new Ze("Absolute line numbers");case"modulo100":return[ld.modulo100,ka(e.lineNumber+1)];case"relative":return[e.lineNumber<0?ld.relativeUp:ld.relativeDown,ka(Math.abs(e.lineNumber))]}}};function El(t){if(typeof t=="string")return EA(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),El(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(EA)}}}function EA(t){return`${t}s`}function RA(t,e,r){let n=t[r];if(n==null)throw new Ze(`${e} '${r}'`);return n}var Pa=class{constructor(e){this.spokenFormMap=_A(e),this.primitiveGenerator=new Qd(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new Ze(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:kA(e())}}catch(r){if(r instanceof Ze)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new Ze(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),mt.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[vA(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],bA(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new Ze(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[wA(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new Ze(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new Ze("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[mt.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=wl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new Ze("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[mt.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return mt.sourceDestinationConnective;case"before":return mt.before;case"after":return mt.after}}};function kA(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:PA(t.map(kA)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${al(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new Ze(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function PA(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=PA(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Zd=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Wt;this.spokenFormMap_={...Ei};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps().catch(()=>{})),this.customSpokenFormsInitialized=this.updateSpokenFormMaps(),this.customSpokenFormsInitialized.catch(()=>{})}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof sl)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof xa)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");st(k().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}throw this.spokenFormMap_={...Ei},this.notifier.notifyListeners(),r}for(let r of AP)D5(this.spokenFormMap_,r,vT[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function D5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let a of i){let{defaultSpokenForms:l=[],isPrivate:p=!1}=r[a]??{},u=n[a];o[a]=u==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!p,isCustom:!1,isPrivate:p}:{defaultSpokenForms:l,spokenForms:u,requiresTalonUpdate:!1,isCustom:!vi(l,u),isPrivate:p}}t[e]=o}var Yd=class{constructor(e){this.customSpokenForms=new Zd(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new Pa(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new Pa(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*I5(t){for(let e of t)for(let r of e)yield r}function*Rl(t,e){let r=Jd(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*QT(t){let e=Jd(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var Uwe=Symbol();function*F5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*Xd(t,e){for(let r of t)e(r)&&(yield r)}function*Ut(t,e){for(let r of t)yield e(r)}function*AA(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let a=-1,l=Jd(t),p;for(;;){if(a++,o!==null&&a>=o||(p=l.next(),p.done))return;a<i||(a-i)%n===0&&(yield p.value)}}function*C5(t,e){let r=Jd(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function Jd(t){return t[Symbol.iterator]()}function Ma(t,e){return Array.from(Ut(t,e))}function MA(t,e,r){let n=F5(t,r),i=r>=0?o=>o<e:o=>o>e;return C5(n,i)}function DA(t,e,r=1){return e!==void 0?MA(t,e,r):MA(0,t,r)}function em(t,e){return I5(Ut(t,e))}function Br(t,e,{domain:r},{domain:n}){return t==="forward"?O5(e,r,n):N5(e,r,n)}function O5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let a=e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&!i){let a=e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&i){let a=e.end.compareTo(r.start);return a!==0?a:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function N5(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let a=-e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&!i){let a=-e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&i){let a=-e.start.compareTo(r.end);return a!==0?a:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function IA(t,e,r,n,i,o){return L5(t,n,i,o)&&(i==null||Br(r,n.includeDescendantScopes?t:e,i,o)<0)}function L5(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:a,skipAncestorScopes:l}=e,{domain:p}=n;switch(i){case"disallowed":if(p.contains(t))return!1;break;case"disallowedIfStrict":if(ZM(p,t))return!1;break;case"required":if(!p.contains(t))return!1;break}return l&&r!=null&&p.contains(r.domain)?!1:U5(new W(t,o),p,a)}function U5(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var H5={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},He=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...H5,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},a,l=r;for(let p of this.generateScopeCandidates(e,r,n,o))if(IA(r,l,n,o,a,p)&&(yield p,a=p,l=n==="forward"?p.domain.end:p.domain.start),this.canStopEarly(r,n,o,a,p))return}canStopEarly(e,r,n,i,o){let{containment:a,distalPosition:l,skipAncestorScopes:p}=n;if(this.isHierarchical&&!p)return!1;let u=this.isHierarchical&&p?i:o;return u==null?!1:!!(a==="required"&&(r==="forward"?u.domain.end.isAfter(e):u.domain.start.isBefore(e))||(r==="forward"?u.domain.end.isAfterOrEqual(l):u.domain.start.isBeforeOrEqual(l)))}};var wr=class extends He{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:a,...l}=o,p=this.searchScopeHandler.generateScopes(r,n,i,{containment:a==="required"?"required":void 0,...l});return em(p,u=>this.generateScopesInSearchScope(i,u))}};var tm=class extends He{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield FA(r,o);else for(let o=n.line;o>=0;o--)yield FA(r,o)}};function FA(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[ZT(t,n,r)]}}function ZT(t,e,r){return new Vr({editor:t,isReversed:e,contentRange:YT(t,r)})}function YT(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new W(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function pn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),a=l=>new W(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Ut(o.matchAll(t),a):Array.from(o.matchAll(t),a).reverse()}var rm=class extends wr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=br(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Ut(pn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new vr({editor:n,contentRange:o,isReversed:a})]}))}};function nm(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let a=qo(o,n),l=qo(o,i);if(a&&!l)return!0;if(l&&!a)return!1}}var V5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,B5=/[$]/g,W5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,im=class extends wr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Ut(pn(V5,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new qe({editor:n,contentRange:o,isReversed:a,isToken:!1})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=br(this.languageId);return nm(r,n,[i,B5,W5])}};var $5=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,om=class{constructor(e){this.wordRegex=br(e).wordMatcher}splitIdentifier(e){let r=Zc(e,this.wordRegex);return r.length>1?r:Zc(e,$5)}};var sm=class extends wr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new om(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(p=>new W(i.positionAt(o+p.index),i.positionAt(o+p.index+p.text.length)));return l.map((p,u)=>({editor:r,domain:p,getTargets:d=>{let m=u>0?l[u-1]:null,g=u+1<l.length?l[u+1]:null;return[j5(d,r,m,p,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function j5(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new W(r.end,n.start):void 0,a=i!=null&&i.start.isAfter(n.end)?new W(n.end,i.start):void 0,p=o!=null||a!=null?e.document.getText(o??a):"";return new Md({editor:e,isReversed:t,contentRange:n,insertionDelimiter:p,leadingDelimiterRange:o,trailingDelimiterRange:a})}var q5=/[$]/g,am=class extends wr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=br(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Ut(pn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new vr({editor:n,contentRange:o,isReversed:a})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=br(this.languageId);return nm(r,n,[i,q5])}};var cm=class extends He{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:a=>[new Ed({editor:r,isReversed:a,contentRange:o})]}}};function CA(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:a,end:l}=z5(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(a),end:t.positionAt(l)}}function z5(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let a=n==="disallowed"?1:-o;return r==="forward"?{start:t+a,end:e+o}:{start:e-o,end:t-a}}function OA(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Aa=class extends He{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:a}=r,{start:l,end:p}=CA(a,n,i,o),u=this.query.matches(a,l,p).map(d=>this.matchToScope(r,d)).filter(d=>d!=null).sort((d,m)=>Br(i,n,d,m));yield*OA(u,(d,m)=>d.domain.isRangeEqual(m.domain),d=>d.length===1?d[0]:{...d[0],getTargets(m){let g=qc(d.flatMap(x=>x.getTargets(m)),(x,b)=>x.isEqual(b));if(g.length>1&&!d.every(x=>x.allowMultiple)){let x="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(st(k().messages,"BaseTreeSitterScopeHandler.allow-multiple",x),k().runMode==="test")throw Error(x)}return g}})}};function XT(t,e,r,n){return n?Da(t,`${e}.${r}`,`_.${r}`):Da(t,`${e}.${r}`)??(Da(t,e)!=null?Da(t,`_.${r}`):void 0)}function Pi(t,e,r,n){return XT(t,e,r,n)?.range}function Da(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var lm=class extends Aa{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n){let i=this.iterateeScopeType.type,o=XT(n,i,"iteration",!1);if(o==null)return;let{range:a,allowMultiple:l}=o,p=Pi(n,i,"iteration.domain",!1)??a;return{editor:r,domain:p,allowMultiple:l,getTargets:u=>[new qe({editor:r,isReversed:u,contentRange:a})]}}};var pm=class extends Aa{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new lm(this.query,this.scopeType)}}matchToScope(r,n){let i=this.scopeType.type,o=Da(n,i);if(o==null)return;let{range:a,allowMultiple:l,insertionDelimiter:p}=o,u=Pi(n,i,"domain",!0)??a,d=Pi(n,i,"removal",!0),m=Pi(n,i,"interior",!0),g=Pi(n,i,"prefix",!0)?.with(void 0,a.start),x=Pi(n,i,"leading",!0)?.with(void 0,g?.start??a.start),b=Pi(n,i,"trailing",!0)?.with(a.end);return{editor:r,domain:u,allowMultiple:l,getTargets:v=>[new po({scopeTypeType:i,editor:r,isReversed:v,contentRange:a,prefixRange:g,removalRange:d,leadingDelimiterRange:x,trailingDelimiterRange:b,interiorRange:m,insertionDelimiter:p})]}}};function NA(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function LA(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,a=!1;for(;!a&&!e(o);)({value:o,done:a}=n.next());return a?[]:[{iterator:n,value:o,index:i}]})}var fo=class t extends He{constructor(r,n,i){super();this.scopeType=r;this.scopeHandlers=n;this.getIterationScopeHandler=i;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(a=>r.create(a,i));return this.createFromScopeHandlers(r,n,o,i)}static createFromScopeHandlers(r,n,i,o){let a=()=>new t(void 0,i.map(l=>r.create(l.iterationScopeType,o)),()=>{throw new Error("Not implemented")});return new t(n,i,a)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let p=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[p].generateScopes(r,n,i,o);return}let a=this.scopeHandlers.map(p=>p.generateScopes(r,n,i,o)[Symbol.iterator]()),l=NA(a);for(;l.length>0;){l.sort((d,m)=>Br(i,n,d.value,m.value));let p=l[0],u=p.value;this.lastYieldedIndex=p.index,yield u,l=LA(l,d=>Br(i,n,u,d)<0)}}};var um=class extends He{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,a=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,p=G5(o,n,i),u=r.document.lineAt(n);for(let d=n.line+a;d!==l;d+=a){let m=r.document.lineAt(d);m.isEmptyOrWhitespace?p!=null&&(yield UA(r,p.range.union(u.range)),p=void 0):p==null&&(p=m),u=m}p!=null&&(yield UA(r,p.range.union(u.range)))}};function G5(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let a=e.line+n;a!==i;a+=n){let l=t.lineAt(a);if(l.isEmptyOrWhitespace)break;o=l}return o}}function UA(t,e){return{editor:t,domain:e,getTargets:r=>[new _a({editor:t,isReversed:r,contentRange:YT(t,e)})]}}function kl(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function HA(t,e){return t.slice(t.length-e.length)===e}var JT,Q5=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function VA(t){t?JT=t:JT=Q5}function ev(t){return/^[A-Z][a-z].*/.test(t)||fm(t)}function BA(t){return ev(t)||/``|"|'/.test(t.substring(0,2))}function WA(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~JT.indexOf(e)}function $A(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function tv(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function jA(t){return t.length<=3?!0:ev(t)}function rv(t,e){return e.length>0?t<5&&e[0].length<6&&ev(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function fm(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function qA(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function zA(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function GA(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function KA(t){return t==="."||t==="!"||t==="?"}var ZA=" @~@ ",QA=ZA.trim(),Y5=new RegExp("\\S",""),X5=new RegExp("\\n+|[-#=_+*]{4,}","g"),J5=new RegExp("\\S+|\\n","g"),e8={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function YA(t,e){if(!t)return[];if(!Y5.test(t))return[];let r={...e8,...e};VA(r.abbreviations),r.newlineBoundaries&&(t=t.replace(X5,ZA));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(m,g){return g%2})):n=t.trim().match(J5)??[];let o=0,a=0,l=[],p=[],u=[];if(!n||!n.length)return[];for(let m=0,g=n.length;m<g;m++){if(o++,u.push(n[m]),~n[m].indexOf(",")&&(o=0),KA(n[m])||kl(n[m],"?!")||n[m]===QA){r.newlineBoundaries&&n[m]===QA&&u.pop(),p.push(u),o=0,u=[];continue}if((kl(n[m],'"')||kl(n[m],"\u201D"))&&(n[m]=n[m].slice(0,-1)),kl(n[m],".")){if(m+1<g){if(n[m].length===2&&isNaN(n[m].charAt(0))||WA(n[m]))continue;if(BA(n[m+1])){if($A(n[m],n[m+1])||rv(o,n.slice(m,6))||fm(n[m+1])&&jA(n[m]))continue}else if(HA(n[m],"..")||tv(n[m])||rv(o,n.slice(m,5)))continue}p.push(u),u=[],o=0;continue}(a=n[m].indexOf("."))>-1&&(fm(n[m],a)||tv(n[m])||zA(n[m])||qA(n[m]))||(l=GA(n[m]))&&(u.pop(),u.push(l[0]),p.push(u),u=[],o=0,u.push(l[1]))}return u.length&&p.push(u),p=p.filter(function(m){return m.length>0}),p.slice(1).reduce(function(m,g){let x=m[m.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(m.pop(),m.push(x.concat(g)),m):(m.push(g),m)},[p[0]]).map(function(m,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=m.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return m.join(" ")})}var t8=/\S*\p{L}/u,XA=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,r8={newlineBoundaries:!1,preserveWhitespace:!0},dm=class{*segment(e){let r=YA(e,r8),n=0;for(let i of r){let o=i.split(XA).filter(a=>a!=null);for(let a of o){if(!i8(a)){let l=n8(a,n);l!=null&&(yield l)}n+=a.length}}}};function n8(t,e){let r=Dk(t8,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function i8(t){return qo(XA,t)}var mm=class extends wr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new dm}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),a=n.document.getText(i),l=u=>{let d=new W(n.document.positionAt(o+u.index),n.document.positionAt(o+u.index+u.text.length));return{editor:n,domain:d,getTargets:m=>[new vr({editor:n,contentRange:d,isReversed:m})]}},p=this.segmenter.segment(a);return r==="forward"?Ut(p,l):Array.from(p,l).reverse()}};var Ia=class extends wr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Ut(pn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new vr({editor:n,contentRange:o,isReversed:a})]}))}},hm=class extends Ia{constructor(){super(...arguments);this.regex=/\S+/g}},gm=class extends Ia{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},ym=class extends Ia{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},xm=class extends Ia{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Lr(this.scopeType.character),"gui")}};var Sm=class extends He{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let a=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment==null&&o.skipAncestorScopes?"required":o.containment}));for(let p of a){let u=[];for(let d of l){let m=p.domain.intersection(d.domain);m!=null&&!m.isEmpty&&u.push({editor:r,domain:m,getTargets:g=>[this.getTargets(JA(p,g),JA(d,g))]})}u.push(p),u.sort((d,m)=>Br(i,n,d,m)),yield*u}}};function JA(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var Tm=class extends Sm{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new vr({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},vm=class extends Sm{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof _a))throw Error("Expected ParagraphTarget");return new Fd({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var Zn=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var Fa=class{constructor(e){this.children=o8(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function o8(t){let e=[],r=[];for(let n of t){let i=new nv(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new Zn(e)}var nv=class{constructor(e){this.item=e;this.children=new Zn([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var s8=",",iv=new RegExp(s8,"g");function eD(t){let e=t.getText();return gr(e,iv,r=>new W(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var tD={type:"fallback",scopeTypes:[{type:"surroundingPairInterior",delimiter:"collectionBoundary"},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return qo(iv,e)}}]};function ov(t,e,r,n,i,o){let a=i!=null?new W(i.end,n.start):void 0,l=o!=null?new W(n.end,o.start):void 0,p=!t&&a!=null&&l!=null&&CT(e,a)>CT(e,l)?n.union(a):void 0,u=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(d){return[new po({scopeTypeType:"collectionItem",editor:e,isReversed:d,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:a,trailingDelimiterRange:l,removalRange:p})]}}}function sv(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new pe(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var bm=class extends He{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return tD}*generateScopeCandidates(r,n,i,o){let a=o.containment==null&&o.skipAncestorScopes,l=eD(r.document),p=sv(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),u=new Fa(p),d=sv(this.scopeHandlerFactory,this.languageId,r,"string"),m=new Zn(d),g=[],x=new Set,b=[];for(let v of l){if(m.contains(v))continue;let F;for(;b.length>0;){let K=b[b.length-1];if(K.iterationRange.contains(v)){F=K;break}this.addScopes(g,K),b.pop()}let M=u.getSmallestContaining(v)?.range,U=M??r.document.lineAt(v.start.line).range;if(F!=null&&F.iterationRange.isRangeEqual(U)){F.delimiters.push(v);continue}M!=null&&x.add(M),b.push({editor:r,isEveryScope:a,iterationRange:U,delimiters:[v]})}for(let v of b)this.addScopes(g,v);for(let v of p)if(!x.has(v.range)&&!v.range.isEmpty){let F=rs(r,v.range);F.isEmpty||g.push(ov(a,r,v.range,F))}g.sort((v,F)=>Br(i,n,v,F)),yield*g}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:a,delimiters:l}=n;if(l.length===0)return;let p=[];for(let m=0;m<l.length;++m){let g=l[m],x=l[m-1]?.end??o.start;p.push(new W(x,g.start))}let u=l[l.length-1];p.push(new W(u.end,o.end));let d=p.map(m=>rs(i,m));for(let m=0;m<d.length;++m)m===d.length-1&&i.document.getText(d[m]).trim()===""||r.push(ov(a,i,o,d[m],d[m-1],d[m+1]))}};var wm=class extends He{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new bm(r,i),a=n.get(i)?.getScopeHandler(this.scopeType);return a==null?o:fo.createFromScopeHandlers(r,{type:"oneOf",scopeTypes:[a.scopeType,o.scopeType]},[a,o],i)})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var _m=class extends He{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new kt("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let a=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return Xd(a.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var Em=class extends He{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.fallbackScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new kt("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){let a=this.fallbackScopeType.scopeTypes.map(l=>this.scopeHandlerFactory.create(l,this.languageId));for(let l of a)yield*l.generateScopes(r,n,i,o)}};var Rm=class extends He{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let a=a8(r,n,i,o);for(let l of a)yield l8(l)}};function a8(t,e,r,n){let i=c8(t);if(i==null)return[];let{notebook:o,cell:a}=i;return n.containment==="required"?[a]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(a.index+1):o.cells.slice(0,a.index).reverse():n.distalPosition!=null&&new W(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(a.index):o.cells.slice(0,a.index+1).reverse()}function c8(t){let e=t.document.uri.toString();for(let r of k().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function l8(t){let e=p8(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new kd({editor:e,isReversed:n,contentRange:r})]}}function p8(t){let e=t.document.uri.toString();for(let r of k().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var km=class extends He{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let a=new Rm,l=n.get(o)?.getScopeHandler(this.scopeType);return l==null?a:fo.createFromScopeHandlers(r,{type:"oneOf",scopeTypes:[l.scopeType,a.scopeType]},[l,a],o)})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Pm=class extends He{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let a=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of a)this.scopeType.requireSingleLine&&!l.domain.isSingleLine||(yield{editor:r,domain:l.domain,getTargets(p){return l.getTargets(p).flatMap(u=>u.getInterior())}})}};function rD(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new W(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:a=>[new Ad({editor:t,isReversed:a,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function nD(t){let e=jo(t.map(({text:r})=>r)).map(Lr).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function oD(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new Zn(av(n.disqualifyDelimiter)),o=new Zn(av(n.pairDelimiter)),a=new Fa(av(n.textFragment)),l=Object.fromEntries(r.map(d=>[d.text,d])),p=AS(e.getText(),nD(r)),u=[];for(let d of p){let m=d[0],g=new W(e.positionAt(d.index),e.positionAt(d.index+m.length));iD(i.getContaining(g))==null&&u.push({delimiterInfo:l[m],textFragmentRange:a.getSmallestContaining(g)?.range,range:iD(o.getContaining(g))?.range??g})}return u}function iD(t){return t!=null&&!t.hasError()?t:void 0}function av(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var Mm=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],curlyBrackets:[["{","${"],"}"],tripleBacktickQuotes:[[],[]],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],backtickQuotes:["`","`"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),sD={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},markdown:{tripleBacktickQuotes:["```","```"]},ruby:{tripleDoubleQuotes:["%Q(",")"]}},HEe=Object.fromEntries(Object.values(Mm)),aD={any:wi(Mm),string:["tripleDoubleQuotes","tripleSingleQuotes","tripleBacktickQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function cD(t){return t!=null&&t in sD?{...Mm,...sD[t]}:Mm}function lD(t,e){let r=aD[t]??[t];return u8(e,r)}function u8(t,e){let r=cD(t);return e.flatMap(n=>{let[i,o,a]=r[n],{isSingleLine:l=!1}=a??{},p=cl(i)?[i]:i,u=cl(o)?[o]:o;return jo(jc(p,u)).map(m=>{let g=p.includes(m),x=u.includes(m);return{text:m,side:g&&!x?"left":!g&&x?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function pD(t){let e=[],r=[];for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:a},textFragmentRange:l,range:p}=n;if(o==="left")r.push(n);else{let u=$o(r,m=>m.delimiterInfo.delimiterName===i&&f8(m.textFragmentRange,l)&&d8(a,m.range,p));if(u===-1){o==="unknown"&&r.push(n);continue}let d=r[u];r.length=u,e.push({delimiterName:i,openingDelimiterRange:d.range,closingDelimiterRange:p})}}return e}function f8(t,e){return t==null||e==null?t===e:t.isRangeEqual(e)}function d8(t,e,r){return!t||e.start.line===r.start.line}var Am=class extends He{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){st(k().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let a=oD(this.languageDefinitions.get(this.languageId),r.document,lD(this.scopeType.delimiter,this.languageId)),l=pD(a);l=m8(i,o,n,l),yield*l.map(p=>rD(r,p,this.scopeType.requireStrongContainment??!1)).sort((p,u)=>Br(i,n,p,u))}};function m8(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var Ca=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new im(this,e,r);case"word":return new sm(this,e,r);case"token":return new am(this,e,r);case"identifier":return new rm(this,e,r);case"line":return new tm(e,r);case"sentence":return new mm(this,e,r);case"paragraph":return new um(e,r);case"boundedParagraph":return new vm(this,e,r);case"document":return new cm(e,r);case"nonWhitespaceSequence":return new hm(this,e,r);case"boundedNonWhitespaceSequence":return new Tm(this,e,r);case"url":return new gm(this,e,r);case"customRegex":return new ym(this,e,r);case"glyph":return new xm(this,e,r);case"collectionItem":return new wm(this,this.languageDefinitions,r);case"surroundingPair":return new Am(this.languageDefinitions,e,r);case"surroundingPairInterior":return new Pm(this,e,r);case"notebookCell":return new km(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return fo.create(this,e,r);case"fallback":return new Em(this,e,r);case"conditional":return new _m(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function un(t,e){return new W(t.row,t.column,e.row,e.column)}function cv(t){return new pe(t.row,t.column)}function uD(t){return new W(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function fD(t,e){return new we(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function Yn(t,e){return{selection:new we(new pe(e.startPosition.row,e.startPosition.column),new pe(e.endPosition.row,e.endPosition.column)),context:{}}}function h8(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new we(new pe(i.startPosition.row,i.startPosition.column),new pe(o.endPosition.row,o.endPosition.column)),context:{}}}function dD(){return lv(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function mD(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new we(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function hD(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=un(i.endPosition,r.startPosition):o=un(n.startPosition,r.startPosition):o=un(n.endPosition,r.startPosition)),{...Yn(e,r),context:{leadingDelimiterRange:o}}}}function Xn(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,a=new Set(t),l=new Set(e);return o=o.filter(p=>a.size>0?!a.has(p.type):l.size>0?l.has(p.type):!0),h8(n,o[0],o[o.length-1])}}function gD(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=un(r.endPosition,i.startPosition):o=un(r.endPosition,n.endPosition):o=un(r.endPosition,n.startPosition)),{...Yn(e,r),context:{trailingDelimiterRange:o}}}}function g8(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function y8(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function lv(t,e,r=mr,n=mr){return(i,o)=>{let a,l,p=r(o),u=n(o),d=y8(p,t),m=g8(u,t);d!=null&&(a=un(d.endPosition,p.startPosition)),m!=null&&(l=un(u.endPosition,m.startPosition));let g=x8(i,a,l,e);return{selection:new we(new pe(p.startPosition.row,p.startPosition.column),new pe(u.endPosition.row,u.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:a,trailingDelimiterRange:l}}}}function x8(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return _S(o,"length")}function yD(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:p})=>p.endsWith(".start")).map(({range:{end:p}})=>p).sort((p,u)=>p.compareTo(u)).at(-1),i=t.filter(({name:p})=>p.endsWith(".end")).map(({range:{start:p}})=>p).sort((p,u)=>p.compareTo(u)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(st(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:p})=>p.endsWith(".start")).length,a=t.filter(({name:p})=>p.endsWith(".end")).length,l=t.length-o-a;return l>0&&(o>0||a>0)&&(st(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),l>1&&(st(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),!r}function xD(t){let e=t;for(;e!=null;){if(e.hasError)return!0;e=e.parent}return!1}function pv(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var Ce;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(let l of o)a[l]=i[l];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ce||(Ce={}));var fv;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(fv||(fv={}));var J=Ce.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),mo=t=>{switch(typeof t){case"undefined":return J.undefined;case"string":return J.string;case"number":return isNaN(t)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(t)?J.array:t===null?J.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?J.promise:typeof Map<"u"&&t instanceof Map?J.map:typeof Set<"u"&&t instanceof Set?J.set:typeof Date<"u"&&t instanceof Date?J.date:J.object;default:return J.unknown}},G=Ce.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),S8=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Wr=class t extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let l=n,p=0;for(;p<a.path.length;){let u=a.path[p];p===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(a))):l[u]=l[u]||{_errors:[]},l=l[u],p++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ce.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Wr.create=t=>new Wr(t);var La=(t,e)=>{let r;switch(t.code){case G.invalid_type:t.received===J.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ce.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ce.joinValues(t.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ce.joinValues(t.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${Ce.joinValues(t.options)}, received '${t.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ce.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case G.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case G.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ce.assertNever(t)}return{message:r}},vD=La;function T8(t){vD=t}function Dm(){return vD}var Im=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",p=n.filter(u=>!!u).slice().reverse();for(let u of p)l=u(a,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},v8=[];function X(t,e){let r=Dm(),n=Im({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===La?void 0:La].filter(i=>!!i)});t.common.issues.push(n)}var qt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return ge;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return ge;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},ge=Object.freeze({status:"aborted"}),Na=t=>({status:"dirty",value:t}),ir=t=>({status:"valid",value:t}),dv=t=>t.status==="aborted",mv=t=>t.status==="dirty",Al=t=>t.status==="valid",Dl=t=>typeof Promise<"u"&&t instanceof Promise;function Fm(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function bD(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var ce;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(ce||(ce={}));var Pl,Ml,dn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},SD=(t,e)=>{if(Al(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Wr(t.common.issues);return this._error=r,this._error}}};function Te(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,l)=>{var p,u;let{message:d}=t;return a.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(p=d??n)!==null&&p!==void 0?p:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:l.defaultError}},description:i}}var ve=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return mo(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:mo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new qt,ctx:{common:e.parent.common,data:e.data,parsedType:mo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Dl(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mo(e)},o=this._parseSync({data:e,path:i.path,parent:i});return SD(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mo(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(Dl(i)?i:Promise.resolve(i));return SD(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let a=e(i),l=()=>o.addIssue({code:G.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(p=>p?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new $r({schema:this,typeName:me.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return fn.create(this,this._def)}nullable(){return ei.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Di.create(this,this._def)}promise(){return yo.create(this,this._def)}or(e){return us.create([this,e],this._def)}and(e){return fs.create(this,e,this._def)}transform(e){return new $r({...Te(this._def),schema:this,typeName:me.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new ys({...Te(this._def),innerType:this,defaultValue:r,typeName:me.ZodDefault})}brand(){return new Il({typeName:me.ZodBranded,type:this,...Te(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new xs({...Te(this._def),innerType:this,catchValue:r,typeName:me.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Fl.create(this,e)}readonly(){return Ss.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},b8=/^c[^\s-]{8,}$/i,w8=/^[0-9a-z]+$/,_8=/^[0-9A-HJKMNP-TV-Z]{26}$/,E8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,R8=/^[a-z0-9_-]{21}$/i,k8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,P8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,M8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",uv,A8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,D8=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,I8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,wD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",F8=new RegExp(`^${wD}$`);function _D(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function C8(t){return new RegExp(`^${_D(t)}$`)}function ED(t){let e=`${wD}T${_D(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function O8(t,e){return!!((e==="v4"||!e)&&A8.test(t)||(e==="v6"||!e)&&D8.test(t))}var ho=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.string,received:o.parsedType}),ge}let n=new qt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?X(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&X(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")P8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"email",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")uv||(uv=new RegExp(M8,"u")),uv.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"emoji",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")E8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"uuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")R8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"nanoid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")b8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")w8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid2",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")_8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ulid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),X(i,{validation:"url",code:G.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"regex",code:G.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?ED(o).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?F8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?C8(o).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?k8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"duration",code:G.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?O8(e.data,o.version)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ip",code:G.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?I8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"base64",code:G.invalid_string,message:o.message}),n.dirty()):Ce.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:G.invalid_string,...ce.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...ce.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...ce.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ce.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...ce.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ce.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ce.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ce.errToObj(r)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ho.create=t=>{var e;return new ho({checks:[],typeName:me.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};function N8(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}var os=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.number,received:o.parsedType}),ge}let n,i=new qt;for(let o of this._def.checks)o.kind==="int"?Ce.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:G.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?N8(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_finite,message:o.message}),i.dirty()):Ce.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ce.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};os.create=t=>new os({checks:[],typeName:me.ZodNumber,coerce:t?.coerce||!1,...Te(t)});var ss=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==J.bigint){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.bigint,received:o.parsedType}),ge}let n,i=new qt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ce.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ss.create=t=>{var e;return new ss({checks:[],typeName:me.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};var as=class extends ve{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.boolean,received:n.parsedType}),ge}return ir(e.data)}};as.create=t=>new as({typeName:me.ZodBoolean,coerce:t?.coerce||!1,...Te(t)});var cs=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.date,received:o.parsedType}),ge}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_date}),ge}let n=new qt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ce.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};cs.create=t=>new cs({checks:[],coerce:t?.coerce||!1,typeName:me.ZodDate,...Te(t)});var Ua=class extends ve{_parse(e){if(this._getType(e)!==J.symbol){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.symbol,received:n.parsedType}),ge}return ir(e.data)}};Ua.create=t=>new Ua({typeName:me.ZodSymbol,...Te(t)});var ls=class extends ve{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.undefined,received:n.parsedType}),ge}return ir(e.data)}};ls.create=t=>new ls({typeName:me.ZodUndefined,...Te(t)});var ps=class extends ve{_parse(e){if(this._getType(e)!==J.null){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.null,received:n.parsedType}),ge}return ir(e.data)}};ps.create=t=>new ps({typeName:me.ZodNull,...Te(t)});var go=class extends ve{constructor(){super(...arguments),this._any=!0}_parse(e){return ir(e.data)}};go.create=t=>new go({typeName:me.ZodAny,...Te(t)});var Ai=class extends ve{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ir(e.data)}};Ai.create=t=>new Ai({typeName:me.ZodUnknown,...Te(t)});var In=class extends ve{_parse(e){let r=this._getOrReturnCtx(e);return X(r,{code:G.invalid_type,expected:J.never,received:r.parsedType}),ge}};In.create=t=>new In({typeName:me.ZodNever,...Te(t)});var Ha=class extends ve{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.void,received:n.parsedType}),ge}return ir(e.data)}};Ha.create=t=>new Ha({typeName:me.ZodVoid,...Te(t)});var Di=class t extends ve{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==J.array)return X(r,{code:G.invalid_type,expected:J.array,received:r.parsedType}),ge;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(a||l)&&(X(r,{code:a?G.too_big:G.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(X(r,{code:G.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(X(r,{code:G.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,l)=>i.type._parseAsync(new dn(r,a,r.path,l)))).then(a=>qt.mergeArray(n,a));let o=[...r.data].map((a,l)=>i.type._parseSync(new dn(r,a,r.path,l)));return qt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:ce.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:ce.toString(r)}})}nonempty(e){return this.min(1,e)}};Di.create=(t,e)=>new Di({type:t,minLength:null,maxLength:null,exactLength:null,typeName:me.ZodArray,...Te(e)});function Oa(t){if(t instanceof _r){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=fn.create(Oa(n))}return new _r({...t._def,shape:()=>e})}else return t instanceof Di?new Di({...t._def,type:Oa(t.element)}):t instanceof fn?fn.create(Oa(t.unwrap())):t instanceof ei?ei.create(Oa(t.unwrap())):t instanceof Jn?Jn.create(t.items.map(e=>Oa(e))):t}var _r=class t extends ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Ce.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==J.object){let u=this._getOrReturnCtx(e);return X(u,{code:G.invalid_type,expected:J.object,received:u.parsedType}),ge}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof In&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||l.push(u);let p=[];for(let u of a){let d=o[u],m=i.data[u];p.push({key:{status:"valid",value:u},value:d._parse(new dn(i,m,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof In){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of l)p.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(X(i,{code:G.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of l){let m=i.data[d];p.push({key:{status:"valid",value:d},value:u._parse(new dn(i,m,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of p){let m=await d.key,g=await d.value;u.push({key:m,value:g,alwaysSet:d.alwaysSet})}return u}).then(u=>qt.mergeObjectSync(n,u)):qt.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,a,l;let p=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=ce.errToObj(e).message)!==null&&l!==void 0?l:p}:{message:p}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:me.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Ce.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Ce.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return Oa(this)}partial(e){let r={};return Ce.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Ce.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof fn;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return RD(Ce.objectKeys(this.shape))}};_r.create=(t,e)=>new _r({shape:()=>t,unknownKeys:"strip",catchall:In.create(),typeName:me.ZodObject,...Te(e)});_r.strictCreate=(t,e)=>new _r({shape:()=>t,unknownKeys:"strict",catchall:In.create(),typeName:me.ZodObject,...Te(e)});_r.lazycreate=(t,e)=>new _r({shape:t,unknownKeys:"strip",catchall:In.create(),typeName:me.ZodObject,...Te(e)});var us=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let a=o.map(l=>new Wr(l.ctx.common.issues));return X(r,{code:G.invalid_union,unionErrors:a}),ge}if(r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let p of n){let u={...r,common:{...r.common,issues:[]},parent:null},d=p._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=a.map(p=>new Wr(p));return X(r,{code:G.invalid_union,unionErrors:l}),ge}}get options(){return this._def.options}};us.create=(t,e)=>new us({options:t,typeName:me.ZodUnion,...Te(e)});var Mi=t=>t instanceof ds?Mi(t.schema):t instanceof $r?Mi(t.innerType()):t instanceof ms?[t.value]:t instanceof hs?t.options:t instanceof gs?Ce.objectValues(t.enum):t instanceof ys?Mi(t._def.innerType):t instanceof ls?[void 0]:t instanceof ps?[null]:t instanceof fn?[void 0,...Mi(t.unwrap())]:t instanceof ei?[null,...Mi(t.unwrap())]:t instanceof Il||t instanceof Ss?Mi(t.unwrap()):t instanceof xs?Mi(t._def.innerType):[],Cm=class t extends ve{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.object)return X(r,{code:G.invalid_type,expected:J.object,received:r.parsedType}),ge;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(X(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ge)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=Mi(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of a){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:me.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Te(n)})}};function hv(t,e){let r=mo(t),n=mo(e);if(t===e)return{valid:!0,data:t};if(r===J.object&&n===J.object){let i=Ce.objectKeys(e),o=Ce.objectKeys(t).filter(l=>i.indexOf(l)!==-1),a={...t,...e};for(let l of o){let p=hv(t[l],e[l]);if(!p.valid)return{valid:!1};a[l]=p.data}return{valid:!0,data:a}}else if(r===J.array&&n===J.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],l=e[o],p=hv(a,l);if(!p.valid)return{valid:!1};i.push(p.data)}return{valid:!0,data:i}}else return r===J.date&&n===J.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var fs=class extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,a)=>{if(dv(o)||dv(a))return ge;let l=hv(o.value,a.value);return l.valid?((mv(o)||mv(a))&&r.dirty(),{status:r.value,value:l.data}):(X(n,{code:G.invalid_intersection_types}),ge)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};fs.create=(t,e,r)=>new fs({left:t,right:e,typeName:me.ZodIntersection,...Te(r)});var Jn=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.array)return X(n,{code:G.invalid_type,expected:J.array,received:n.parsedType}),ge;if(n.data.length<this._def.items.length)return X(n,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ge;!this._def.rest&&n.data.length>this._def.items.length&&(X(n,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,l)=>{let p=this._def.items[l]||this._def.rest;return p?p._parse(new dn(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>qt.mergeArray(r,a)):qt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Jn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Jn({items:t,typeName:me.ZodTuple,rest:null,...Te(e)})};var Om=class t extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.object)return X(n,{code:G.invalid_type,expected:J.object,received:n.parsedType}),ge;let i=[],o=this._def.keyType,a=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new dn(n,l,n.path,l)),value:a._parse(new dn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?qt.mergeObjectAsync(r,i):qt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ve?new t({keyType:e,valueType:r,typeName:me.ZodRecord,...Te(n)}):new t({keyType:ho.create(),valueType:e,typeName:me.ZodRecord,...Te(r)})}},Va=class extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.map)return X(n,{code:G.invalid_type,expected:J.map,received:n.parsedType}),ge;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([l,p],u)=>({key:i._parse(new dn(n,l,n.path,[u,"key"])),value:o._parse(new dn(n,p,n.path,[u,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let p of a){let u=await p.key,d=await p.value;if(u.status==="aborted"||d.status==="aborted")return ge;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let p of a){let u=p.key,d=p.value;if(u.status==="aborted"||d.status==="aborted")return ge;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}};Va.create=(t,e,r)=>new Va({valueType:e,keyType:t,typeName:me.ZodMap,...Te(r)});var Ba=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.set)return X(n,{code:G.invalid_type,expected:J.set,received:n.parsedType}),ge;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(X(n,{code:G.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(X(n,{code:G.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(p){let u=new Set;for(let d of p){if(d.status==="aborted")return ge;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}let l=[...n.data.values()].map((p,u)=>o._parse(new dn(n,p,n.path,u)));return n.common.async?Promise.all(l).then(p=>a(p)):a(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:ce.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Ba.create=(t,e)=>new Ba({valueType:t,minSize:null,maxSize:null,typeName:me.ZodSet,...Te(e)});var Nm=class t extends ve{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.function)return X(r,{code:G.invalid_type,expected:J.function,received:r.parsedType}),ge;function n(l,p){return Im({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Dm(),La].filter(u=>!!u),issueData:{code:G.invalid_arguments,argumentsError:p}})}function i(l,p){return Im({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Dm(),La].filter(u=>!!u),issueData:{code:G.invalid_return_type,returnTypeError:p}})}let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof yo){let l=this;return ir(async function(...p){let u=new Wr([]),d=await l._def.args.parseAsync(p,o).catch(x=>{throw u.addIssue(n(p,x)),u}),m=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(m,o).catch(x=>{throw u.addIssue(i(m,x)),u})})}else{let l=this;return ir(function(...p){let u=l._def.args.safeParse(p,o);if(!u.success)throw new Wr([n(p,u.error)]);let d=Reflect.apply(a,this,u.data),m=l._def.returns.safeParse(d,o);if(!m.success)throw new Wr([i(d,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Jn.create(e).rest(Ai.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Jn.create([]).rest(Ai.create()),returns:r||Ai.create(),typeName:me.ZodFunction,...Te(n)})}},ds=class extends ve{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ds.create=(t,e)=>new ds({getter:t,typeName:me.ZodLazy,...Te(e)});var ms=class extends ve{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return X(r,{received:r.data,code:G.invalid_literal,expected:this._def.value}),ge}return{status:"valid",value:e.data}}get value(){return this._def.value}};ms.create=(t,e)=>new ms({value:t,typeName:me.ZodLiteral,...Te(e)});function RD(t,e){return new hs({values:t,typeName:me.ZodEnum,...Te(e)})}var hs=class t extends ve{constructor(){super(...arguments),Pl.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{expected:Ce.joinValues(n),received:r.parsedType,code:G.invalid_type}),ge}if(Fm(this,Pl,"f")||bD(this,Pl,new Set(this._def.values),"f"),!Fm(this,Pl,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{received:r.data,code:G.invalid_enum_value,options:n}),ge}return ir(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Pl=new WeakMap;hs.create=RD;var gs=class extends ve{constructor(){super(...arguments),Ml.set(this,void 0)}_parse(e){let r=Ce.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==J.string&&n.parsedType!==J.number){let i=Ce.objectValues(r);return X(n,{expected:Ce.joinValues(i),received:n.parsedType,code:G.invalid_type}),ge}if(Fm(this,Ml,"f")||bD(this,Ml,new Set(Ce.getValidEnumValues(this._def.values)),"f"),!Fm(this,Ml,"f").has(e.data)){let i=Ce.objectValues(r);return X(n,{received:n.data,code:G.invalid_enum_value,options:i}),ge}return ir(e.data)}get enum(){return this._def.values}};Ml=new WeakMap;gs.create=(t,e)=>new gs({values:t,typeName:me.ZodNativeEnum,...Te(e)});var yo=class extends ve{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.promise&&r.common.async===!1)return X(r,{code:G.invalid_type,expected:J.promise,received:r.parsedType}),ge;let n=r.parsedType===J.promise?r.data:Promise.resolve(r.data);return ir(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};yo.create=(t,e)=>new yo({type:t,typeName:me.ZodPromise,...Te(e)});var $r=class extends ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===me.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:a=>{X(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async l=>{if(r.value==="aborted")return ge;let p=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return p.status==="aborted"?ge:p.status==="dirty"||r.value==="dirty"?Na(p.value):p});{if(r.value==="aborted")return ge;let l=this._def.schema._parseSync({data:a,path:n.path,parent:n});return l.status==="aborted"?ge:l.status==="dirty"||r.value==="dirty"?Na(l.value):l}}if(i.type==="refinement"){let a=l=>{let p=i.refinement(l,o);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?ge:(l.status==="dirty"&&r.dirty(),a(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?ge:(l.status==="dirty"&&r.dirty(),a(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Al(a))return a;let l=i.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Al(a)?Promise.resolve(i.transform(a.value,o)).then(l=>({status:r.value,value:l})):a);Ce.assertNever(i)}};$r.create=(t,e,r)=>new $r({schema:t,typeName:me.ZodEffects,effect:e,...Te(r)});$r.createWithPreprocess=(t,e,r)=>new $r({schema:e,effect:{type:"preprocess",transform:t},typeName:me.ZodEffects,...Te(r)});var fn=class extends ve{_parse(e){return this._getType(e)===J.undefined?ir(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};fn.create=(t,e)=>new fn({innerType:t,typeName:me.ZodOptional,...Te(e)});var ei=class extends ve{_parse(e){return this._getType(e)===J.null?ir(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ei.create=(t,e)=>new ei({innerType:t,typeName:me.ZodNullable,...Te(e)});var ys=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===J.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};ys.create=(t,e)=>new ys({innerType:t,typeName:me.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Te(e)});var xs=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Dl(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Wr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Wr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};xs.create=(t,e)=>new xs({innerType:t,typeName:me.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Te(e)});var Wa=class extends ve{_parse(e){if(this._getType(e)!==J.nan){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.nan,received:n.parsedType}),ge}return{status:"valid",value:e.data}}};Wa.create=t=>new Wa({typeName:me.ZodNaN,...Te(t)});var L8=Symbol("zod_brand"),Il=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Fl=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ge:o.status==="dirty"?(r.dirty(),Na(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ge:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:me.ZodPipeline})}},Ss=class extends ve{_parse(e){let r=this._def.innerType._parse(e),n=i=>(Al(i)&&(i.value=Object.freeze(i.value)),i);return Dl(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};Ss.create=(t,e)=>new Ss({innerType:t,typeName:me.ZodReadonly,...Te(e)});function kD(t,e={},r){return t?go.create().superRefine((n,i)=>{var o,a;if(!t(n)){let l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,p=(a=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0,u=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...u,fatal:p})}}):go.create()}var U8={object:_r.lazycreate},me;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(me||(me={}));var H8=(t,e={message:`Input not instance of ${t.name}`})=>kD(r=>r instanceof t,e),PD=ho.create,MD=os.create,V8=Wa.create,B8=ss.create,AD=as.create,W8=cs.create,$8=Ua.create,j8=ls.create,q8=ps.create,z8=go.create,G8=Ai.create,K8=In.create,Q8=Ha.create,Z8=Di.create,Y8=_r.create,X8=_r.strictCreate,J8=us.create,e7=Cm.create,t7=fs.create,r7=Jn.create,n7=Om.create,i7=Va.create,o7=Ba.create,s7=Nm.create,a7=ds.create,c7=ms.create,l7=hs.create,p7=gs.create,u7=yo.create,TD=$r.create,f7=fn.create,d7=ei.create,m7=$r.createWithPreprocess,h7=Fl.create,g7=()=>PD().optional(),y7=()=>MD().optional(),x7=()=>AD().optional(),S7={string:t=>ho.create({...t,coerce:!0}),number:t=>os.create({...t,coerce:!0}),boolean:t=>as.create({...t,coerce:!0}),bigint:t=>ss.create({...t,coerce:!0}),date:t=>cs.create({...t,coerce:!0})},T7=ge,Be=Object.freeze({__proto__:null,defaultErrorMap:La,setErrorMap:T8,getErrorMap:Dm,makeIssue:Im,EMPTY_PATH:v8,addIssueToContext:X,ParseStatus:qt,INVALID:ge,DIRTY:Na,OK:ir,isAborted:dv,isDirty:mv,isValid:Al,isAsync:Dl,get util(){return Ce},get objectUtil(){return fv},ZodParsedType:J,getParsedType:mo,ZodType:ve,datetimeRegex:ED,ZodString:ho,ZodNumber:os,ZodBigInt:ss,ZodBoolean:as,ZodDate:cs,ZodSymbol:Ua,ZodUndefined:ls,ZodNull:ps,ZodAny:go,ZodUnknown:Ai,ZodNever:In,ZodVoid:Ha,ZodArray:Di,ZodObject:_r,ZodUnion:us,ZodDiscriminatedUnion:Cm,ZodIntersection:fs,ZodTuple:Jn,ZodRecord:Om,ZodMap:Va,ZodSet:Ba,ZodFunction:Nm,ZodLazy:ds,ZodLiteral:ms,ZodEnum:hs,ZodNativeEnum:gs,ZodPromise:yo,ZodEffects:$r,ZodTransformer:$r,ZodOptional:fn,ZodNullable:ei,ZodDefault:ys,ZodCatch:xs,ZodNaN:Wa,BRAND:L8,ZodBranded:Il,ZodPipeline:Fl,ZodReadonly:Ss,custom:kD,Schema:ve,ZodSchema:ve,late:U8,get ZodFirstPartyTypeKind(){return me},coerce:S7,any:z8,array:Z8,bigint:B8,boolean:AD,date:W8,discriminatedUnion:e7,effect:TD,enum:l7,function:s7,instanceof:H8,intersection:t7,lazy:a7,literal:c7,map:i7,nan:V8,nativeEnum:p7,never:K8,null:q8,nullable:d7,number:MD,object:Y8,oboolean:x7,onumber:y7,optional:f7,ostring:g7,pipeline:h7,preprocess:m7,promise:u7,record:n7,set:o7,strictObject:X8,string:PD,symbol:$8,transformer:TD,tuple:r7,undefined:j8,union:J8,unknown:G8,void:Q8,NEVER:T7,ZodIssueCode:G,quotelessJson:S8,ZodError:Wr});function DD(t){let e=t.operands.map(gv).join(" ");return`(#${t.operator} ${e})`}function gv(t){return t.type==="capture"?`@${t.name}`:t.value}function ID(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>v7(t,r))}function v7(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=gv(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var zt=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof Lm&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:ID(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new Lm(n.name);return i}else return n.value})}},Lm=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var yv=Be.object({type:Be.literal("string"),value:Be.string()}),Se={node:Be.object({type:Be.literal("capture"),name:Be.string()}),string:yv,integer:yv.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:Be.ZodIssueCode.custom,message:"Expected an integer"}),Be.NEVER):{type:"integer",value:r}}),boolean:yv.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:Be.ZodIssueCode.custom,message:"Expected true or false"}),Be.NEVER))};var xv=class extends zt{constructor(){super(...arguments);this.name="not-type?";this.schema=Be.tuple([Se.node,Se.string]).rest(Se.string)}run({node:r},...n){return!n.includes(r.type)}},Sv=class extends zt{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=Be.tuple([Se.node,Se.string]).rest(Se.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},Tv=class extends zt{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=Be.tuple([Se.node,Se.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},vv=class extends zt{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=Be.tuple([Se.node,Se.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},bv=class extends zt{constructor(){super(...arguments);this.name="match?";this.schema=Be.tuple([Se.node,Se.string])}run(r,n){let{document:i,range:o}=r,a=new RegExp(n,"ds"),l=i.getText(o);return a.test(l)}},wv=class extends zt{constructor(){super(...arguments);this.name="child-range!";this.schema=Be.union([Be.tuple([Se.node,Se.integer]),Be.tuple([Se.node,Se.integer,Se.integer]),Be.tuple([Se.node,Se.integer,Se.integer,Se.boolean]),Be.tuple([Se.node,Se.integer,Se.integer,Se.boolean,Se.boolean])])}run(r,n,i,o,a){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let p=l[n],u=l[i];return r.range=un(o?p.endPosition:p.startPosition,a?u.startPosition:u.endPosition),!0}},_v=class extends zt{constructor(){super(...arguments);this.name="character-range!";this.schema=Be.union([Be.tuple([Se.node,Se.integer]),Be.tuple([Se.node,Se.integer,Se.integer])])}run(r,n,i){return r.range=new W(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},Ev=class extends zt{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=Be.tuple([Se.node,Se.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[p,u]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new W(i.positionAt(d+p),i.positionAt(d+u)),!0}},Rv=class extends zt{constructor(){super(...arguments);this.name="trim-end!";this.schema=Be.tuple([Se.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),a=o.length-o.trimEnd().length;return a>0&&(r.range=new W(i.start,Mk(n,i.end,-a))),!0}},kv=class extends zt{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=Be.tuple([Se.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},Pv=class extends zt{constructor(){super(...arguments);this.name="log!";this.schema=Be.tuple([Se.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},Mv=class extends zt{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=Be.tuple([Se.node,Se.string])}run(r,n){return r.insertionDelimiter=n,!0}},Av=class extends zt{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=Be.tuple([Se.node,Se.node,Se.string,Se.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},FD=[new Pv,new xv,new Rv,new Sv,new Tv,new wv,new _v,new Ev,new kv,new Mv,new Av,new vv,new bv];function CD(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((a,l)=>{let p=FD.find(({name:d})=>d===a.operator);if(p==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${a.operator}"`});return}let u=p.createPredicate(a.operands);if(!u.success){e.push(...u.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(u.predicate)}),r.push(o)}),{errors:e,predicates:r}}function OD(t,e){let{errors:r,predicates:n}=CD(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${DD(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");st(k().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(k().runMode==="test")throw new Error("Invalid predicates")}return n}function Dv(t){return{row:t.line,column:t.character}}function ND(t){return t.map(e=>({...e,range:Iv(e),name:b7(e)}))}function Iv(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function b7(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var Fv=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&LD(this.startPosition,r)&&LD(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function LD(t,e){return t==null||e==null?t===e:t.isEqual(e)}var Ts=new Fv;var Cl=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=k().runMode!=="production"}static create(e,r,n){let i=OD(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>pv(r)===e)}matches(e,r,n){if(!Ts.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);Ts.update(e,r,n,i)}return Ts.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let a of i){let l=this.createMutableQueryMatch(e,a);this.runPredicates(l)&&o.push(this.createQueryMatch(l))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?Dv(r):void 0,endPosition:n!=null?Dv(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.pattern,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:uD(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>xD(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=pv(i.name),a=Iv(i),l=n.get(o);if(l==null){let p=[i],u={...i,name:o,range:a,hasError:()=>p.some(d=>d.hasError())};r.push(u),n.set(o,{acc:u,captures:p})}else l.acc.range=l.acc.range.union(a),l.acc.allowMultiple=l.acc.allowMultiple||i.allowMultiple,l.acc.insertionDelimiter=l.acc.insertionDelimiter??i.insertionDelimiter,l.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!yD(ND(r.captures),k().messages)&&k().runMode==="test")throw new Error("Invalid captures")}};var HD="_",w7=[HD,...Ko],_7=["prefix","leading","trailing"],E7=["startOf","endOf"],R7=["domain","removal","interior","iteration","iteration.domain"],UD=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],vs=new Set;for(let t of w7){if(t!==HD){vs.add(t);for(let e of UD)vs.add(`${t}.${e}`)}for(let e of _7){vs.add(`${t}.${e}`);for(let r of E7)vs.add(`${t}.${e}.${r}`)}for(let e of R7){vs.add(`${t}.${e}`);for(let r of UD)vs.add(`${t}.${e}.${r}`)}}var k7=/^(?!;;).*(?<!"\w*)@([\w.]*)/gm;function VD(t,e){let r=e.matchAll(k7),n=[];for(let o of r){let a=o[1];if(!(a.length>1&&!a.includes(".")&&a.startsWith("_"))&&!vs.has(a)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${a}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(st(k().messages,"validateQueryCaptures.invalidCaptureName",i),k().runMode==="test")throw new Error(i)}var Um=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await P7(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let a=n.getLanguage(i).query(o),l=Cl.create(i,n,a);return new t(l)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new pm(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let a=o.name;n[a]==null&&(n[a]=[]),n[a].push(o)}return n}};async function P7(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,a]of Object.entries(n)){if(a!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(st(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&VD(o,l),n[o]=l,gr(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,p=>{let u=p[1];i&&M7(t,o,u,p[0]),n[u]=n[u]??null})}return Object.values(n).join(`
`)}function M7(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(st(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(st(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var BD=Symbol("LANGUAGE_UNDEFINED"),Hm=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Wt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&Ts.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:a})=>this.loadLanguage(a.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(st(this.ide.messages,"Failed to load language definitions",Mn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await Um.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??BD;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),Ts.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===BD?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var Vm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e){for(let r of this.nestedStages)try{return r.run(e)}catch{continue}throw new Error("No modifier could be applied")}};var $a=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e){if(this.shouldModify(e))try{return this.nestedStage.run(e).map(r=>r.withThatTarget(e))}catch(r){if(!this.suppressErrors)throw r}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},ja=class extends $a{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},Ol=class extends $a{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},Bm=class extends $a{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},qa=class extends $a{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function WD(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function za(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&WD(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.isLine&&r.isLine?new Vr({editor:e.editor,isReversed:t,contentRange:ba(e,r,n,i)}):new Mt({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:co(e,r,n,i),isToken:n&&i&&e.isToken&&r.isToken})}function Wm(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[a]=i,l=a.contentRange.start.isAfterOrEqual(o.contentRange.start),[p,u]=l?[o,a]:[a,o];return[za(t,p,u,!0,!0)]}function $m(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,a]=i;return n==="forward"?a:n==="backward"||(t.isPreferredOver?.(o,a)??!1)?o:a}default:throw new Error("Expected no more than 2 scope candidates")}}function jm(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:a}}=t;if(a.isEqual(o)){let u=$m(e,i,o);return u==null||(r>0&&(u=Cv(e,i,u.domain.end,"forward",r,!0)),u==null)?void 0:u.getTargets(n)}let l=Cv(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(a))return l.getTargets(n);let p=Cv(e,i,a,"backward",r);if(p!=null)return Wm(n,l,p)}function Cv(t,e,r,n,i,o=!1){let a=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(a===i)return l;a+=1}}var Ga=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.maybeCreate(r,e.editor.document.languageId);if(i==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let o=jm(e,i,n);if(o==null)throw new kt(this.modifier.scopeType.type);return o}};var qm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,{editor:n,isReversed:i}=e,o=this.scopeHandlerFactory.maybeCreate(r,n.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let a;if(e.hasExplicitRange&&(a=$D(o,n,e.contentRange),a.length===1&&a[0].domain.contains(e.contentRange)&&!e.hasExplicitScopeType&&(a=void 0)),a==null&&(a=this.getDefaultIterationRange(o,this.scopeHandlerFactory,e).flatMap(l=>$D(o,n,l))),a.length===0)throw new kt(r.type);return a.flatMap(l=>l.getTargets(i))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=jm(n,i);if(o==null)throw new kt(`iteration scope for ${e.scopeType.type}`);return o.map(a=>a.contentRange)}};function $D(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var zm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},Gm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Km=class{run(){return Cd(k()).map(e=>new Dd({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var Qm=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new Ov(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},Ov=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return A7(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return Tt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return D7(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[xo(e,r,n,i)];let a=Uv(e,r);return[xo(n?jD(this.modifierStageFactory,e,o,a?"backward":"forward"):e,i?jD(this.modifierStageFactory,r,o,a?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n;e.type==="implicit"?(r=new Km,n=[]):(r=this.markStageFactory.create(e.mark),n=Nv(this.modifierStageFactory,e.modifiers));let i=r.run(),o=[...n,...this.opts.actionFinalStages,...this.opts.noAutomaticTokenExpansion?[]:[new qa(this.modifierStageFactory)]];return Lv(o,i)}};function Nv(t,e){return e.map(t.create).reverse()}function Lv(t,e){return t.forEach(r=>{e=e.flatMap(n=>r.run(n))}),e}function jD(t,e,r,n){return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e)[0]}function Uv(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function A7(t){return OP(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function qD(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function xo(t,e,r=!1,n=!1){qD(t,e);let i=Uv(t,e);return za(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function D7(t,e,r,n){qD(t,e);let i=Uv(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),u=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let m=l;;m+=o){let g=new W(m,t.contentRange.start.character,m,t.contentRange.end.character);if(d.push(new qe({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),m===u)return d}}var Zm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifier.modifiers??[{type:"containingScope",scopeType:{type:"oneOf",scopeTypes:[{type:"line"},{type:"surroundingPairInterior",delimiter:"any",requireSingleLine:!0}]}}],n=Nv(this.modifierStageFactory,r);return Lv(n,[e]).map(o=>{let a=this.modifier.type==="extendThroughStartOf";return new Id({editor:e.editor,isReversed:a,inputTarget:e,modifiedTarget:o,isHead:a})})}};var ti=class extends Error{constructor(e,r){let n=r!=null?` #${r+1}`:"";super(`Scope '${e.type}'${n} is out of range`),this.name="OutOfRangeError"}};function zD(t,e,r,n){return Hv(t,e,r,n),e.slice(r,n+1)}function Hv(t,e,r,n){if(r<0||r>=e.length)throw new ti(t,r);if(n<0||n>=e.length)throw new ti(t,n)}var Ka=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e){let r=new qa(this.modifierStageFactory).run(e)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(r);case"ordinalScope":return this.handleOrdinalScope(r,this.modifier);case"relativeScope":return this.handleRelativeScope(r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e){return Array.from(em(this.getEveryRanges(e),([r,n])=>this.getTargetIterable(e,r,n,"forward")))}handleOrdinalScope(e,{start:r,length:n,scopeType:i}){return this.getEveryRanges(e).flatMap(([o,a])=>GD(i,this.getTargetIterable(e,o,a,r>=0?"forward":"backward"),r>=0?r:-(n+r),n))}handleRelativeScope(e,{direction:r,offset:n,length:i,scopeType:o}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(l=>{let{editor:p}=l,u=r==="forward"?new W(n===0?l.contentRange.start:l.contentRange.end,p.document.range.end):new W(p.document.range.start,n===0?l.contentRange.end:l.contentRange.start);return GD(o,this.getTargetIterable(e,p,u,r),n===0?0:n-1,i)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i){let o=Ut(pn(new RegExp(Lr(e.contentText),"g"),r,n,i),l=>new qe({contentRange:l,editor:r,isReversed:!1,isToken:!1})),a=I7(e);if(a!=null){let l=this.modifierStageFactory.create({type:"containingScope",scopeType:a});return Xd(Ut(o,p=>{try{let u=l.run(p);return u.length===1&&u[0].contentRange.isRangeEqual(p.contentRange)?u[0]:null}catch{return null}}),p=>p!=null)}return o}};function I7(t){return t.isLine?{type:"line"}:t.isToken?{type:"token"}:t.isWord?{type:"word"}:null}function GD(t,e,r,n){Array.from(Rl(r,e));let i=Array.from(Rl(n,e));if(i.length<n)throw new ti(t,r+n-1);return i}var Ym=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoInteriorStage=F7(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoInteriorStage.run(e).flatMap(r=>r.getInterior())}},Xm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=Vv(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoBoundaryStage.run(e).flatMap(r=>r.getBoundary())}};function F7(t){return new Ol(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getInterior()==null)}function Vv(t){return new Ol(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var ri={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},Bv={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var Jm=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},eh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(Bv).run(e).map(r=>{let n=r.getLeadingDelimiterTarget();if(n==null)throw new Jm("leading");return n})}},th=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(Bv).run(e).map(r=>{let n=r.getTrailingDelimiterTarget();if(n==null)throw new Jm("trailing");return n})}};function rh(t,e,r,n,i){return Hv(t,r,n,i),n===i?r[n]:za(e,r[n],r[i],!0,!0)}function nh(t,e,r){return t.create({type:"everyScope",scopeType:r}).run(e)}var ih=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=nh(this.modifierStageFactory,e,this.modifier.scopeType),n=this.modifier.start+(this.modifier.start<0?r.length:0),i=n+this.modifier.length-1;return this.modifier.isEvery?zD(this.modifier.scopeType,r,n,i):[rh(this.modifier.scopeType,e.isReversed,r,n,i)]}};var oh=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new lo(r):new qe({...r,isToken:!1})]}},sh=class extends oh{getContentRange(e){return e.start.toEmptyRange()}},ah=class extends oh{getContentRange(e){return e.end.toEmptyRange()}};var ch=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,n=new Ga(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:r});try{return n.run(e)}catch(a){if(!(a instanceof kt))throw a}let i=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),o=C7(e,i);if(o==null)throw Error(`No scopes found for scope type: ${r.type}`);return o}};function C7(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=KD(r,i),a=KD(n,i),l=o.distance<a.distance?o.scope:a.scope;return l?.getTargets(t.isReversed)}function KD(t,e){let r,n=1/0;for(let i of t){let o=Math.min(QD(e,i.domain.start),QD(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function QD(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var lh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifierStageFactory.create(this.modifier.anchor),n=this.modifierStageFactory.create(this.modifier.active),i=r.run(e),o=n.run(e);if(i.length!==1||o.length!==1)throw new Error("Expected single anchor and active target");return[xo(i[0],o[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var ph=class{constructor(e){this.modifier=e}run(e){return[new lo({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var uh=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function ZD(t,e,r){let n=nh(t,U7(r),e.scopeType),i=L7(r.contentRange,n);return O7(e,r,n,i)}function O7(t,e,r,n){let i=t.direction==="forward",o=N7(t,e.contentRange,r,i,n),a=i?o+t.length-1:o-t.length+1,l=Math.min(o,a),p=Math.max(o,a);return[rh(t.scopeType,e.isReversed,r,l,p)]}function N7(t,e,r,n,i){let o=t.offset===0;if(i==null){let p=n?r.findIndex(u=>u.contentRange.start.isAfter(e.start)):$o(r,u=>u.contentRange.start.isBefore(e.start));if(p===-1)throw new ti(t.scopeType);return o?p:n?p+t.offset-1:p-t.offset+1}let a=i.start,l=i.end;if(o){let p=l-a+1;if(p>t.length)throw new uh(t.length,p,t.scopeType.type);return n?a:l}return n?l+t.offset:a-t.offset}function L7(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function U7(t){return new Mt({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var fh=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let r=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(r==null)return ZD(this.modifierStageFactory,this.modifier,e);let n=Array.from(this.modifier.offset===0?H7(r,e,this.modifier):V7(r,e,this.modifier));if(n.length<this.modifier.length)throw new ti(this.modifier.scopeType,this.modifier.offset+this.modifier.length-1);let{isReversed:i}=e;return this.modifier.isEvery?n.flatMap(o=>o.getTargets(i)):Wm(i,n[0],n[n.length-1])}};function H7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a}=r,l=$m(t,n,a==="forward"?i.start:i.end,a)?.domain;if(l==null)throw new kt(r.scopeType.type);return Rl(o,t.generateScopes(n,a==="forward"?l.start:l.end,a,{skipAncestorScopes:!0}))}function V7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a,offset:l}=r,p=a==="forward"?i.end:i.start,u=i.isEmpty?"disallowed":"disallowedIfStrict";return AA(t.generateScopes(n,p,a,{containment:u,skipAncestorScopes:!0}),l-1,l+o-1)}var dh=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new qe({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};function YD(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function XD(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let a of o){if(n==null||(n=a(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var Wv=t=>new pe(t.row,t.column),JD=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(a,l)=>a!=null&&l.includes(a.type),o=a=>a!=null&&!i(a,n);return(a,l)=>{let p,{start:u,end:d}=l;if(i(a.parent,t))return i(a,e)?p=a.nextNamedSibling:i(a,r)?p=a.previousNamedSibling:a.type===","?p=d.isBeforeOrEqual(Wv(a.startPosition))?a.previousNamedSibling:a.nextNamedSibling:p=a,o(p)?p:null;if(i(a,t)){let m=[...a.children],g=m.find(({startPosition:b})=>Wv(b).isAfterOrEqual(d))??null;if(o(g))return g;m.reverse();let x=m.find(({endPosition:b})=>Wv(b).isBeforeOrEqual(u))??null;if(o(x))return x}return null}};function Ne(...t){let e=B7(t);return r=>{for(let n of e){let i=W7(r,n);if(i!=null)return i}return null}}function B7(t){return t.map(e=>e.split(".").map(r=>new $v(r)))}function W7(t,e){let r=$7(t,e);!r&&e.length>1&&(r=j7(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function $7(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function j7(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let a=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=a.length===1?a[0]:null}}return r}var $v=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Oe(t,e=Yn){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function mh(t,e=Yn){let r=YD(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function Qa(t,e=0,r=Yn){return Oe(XD(e,...t),r)}function _t(...t){return Oe(Ne(...t))}function Za(...t){return Oe(JD(...t),dD())}function Ya(...t){return Oe(Ne(...t),mD)}function Fn(t,e=[]){return Oe(Ne(...t),hD(...e))}function So(t,e=[]){return Oe(Ne(...t),gD(...e))}function ht(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function eI(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function mn(t){return Object.freeze(Object.fromEntries(wi(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,_t(...r)]:typeof r=="string"?[e,_t(r)]:[e,r]})))}function tI(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function q7(t,e){return iI(t,r=>Math.floor(r/2)*2+e)}function rI(t){return q7(Ne("map_lit"),t)}function iI(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=Nl(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let a=e(o);return a===-1?null:i[a]}}var Nl=t=>tI(t,"value"),jv="~quoting_lit.list_lit!",oI=Ne(jv);function qv(...t){return e=>{let r=oI(e);if(r==null)return null;let n=Nl(r)[0];return t.includes(n?.text)?r:null}}function z7(...t){return Oe(qv(...t))}var sI=qv("defn","defmacro"),nI=mh([sI,t=>Nl(t)[1]]),aI=qv("if","if-let","when","when-let"),G7=Oe(aI),K7={collectionKey:Oe(rI(0)),value:Oe(rI(1)),argumentOrParameter:Oe(iI(Ne(jv),t=>t!==0?t:-1)),functionCall:jv,functionCallee:mh([oI,t=>Nl(t)[0]]),namedFunction:Oe(sI),functionName:nI,name:nI,anonymousFunction:ht(z7("fn"),_t("anon_fn_lit")),ifStatement:G7,condition:mh([aI,t=>Nl(t)[1]])},cI=mn(K7);var lI=["command","displayed_equation","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],Q7=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],uI=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],pI=uI.map(t=>`${t}[text]`),Z7=uI.map(t=>`${t}[command]`);function zv(t,e){return{selection:new we(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new we(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function Y7(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new we(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}var X7={argumentOrParameter:ht(Qa([Ne(...lI),Ne(...Q7)],1,zv),Oe(Ne("begin[name]","end[name]",...pI),zv)),functionCall:ht(Oe(Ne(...lI,"begin","end")),Oe(Ne(...Z7),Y7)),name:ht(Oe(Ne(...pI),zv),_t("begin[name][text]","end[name][text]"))},fI=mn(X7);var J7=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],eQ=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],tQ=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],rQ=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],nQ=[":","=>"];function iQ(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var oQ={statement:ht(_t(...J7),Qa([Ne(...tQ),Ne(...eQ)],1)),anonymousFunction:ht(_t("lambda","do_block"),Oe(iQ)),condition:Ya("*[condition]"),argumentOrParameter:Za("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:So(["pair[key]"],[":"]),value:Fn(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],rQ.concat(nQ))},dI=mn(oQ);function Gv(){let t=Xn(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let a=r.childForFieldName("alternative");if(a==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new we(l.start,cv(a.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new we(cv(i.child(0).startPosition),o.end),context:{}}}}function mI(t){let e=Gv();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):Yn(r,n)}}var hI=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],sQ=["source_file","block","declaration_list"];function aQ(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function cQ(t,e){return{selection:fD(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:un(e.children[0].startPosition,e.children[1].startPosition)}}}function lQ(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return hI.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var pQ={statement:Qa([Ne(...sQ),Ne(...hI)],1),condition:ht(_t("while_expression[condition]","if_expression[condition]"),Oe(Ne("while_let_expression","if_let_expression"),Xn(["while","if","block"],[],{includeUnnamedChildren:!0})),Fn(["*.match_pattern![condition]"],["if"])),type:ht(Fn(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Oe(Ne("constrained_type_parameter[bounds]","where_predicate[bounds]"),cQ),Fn(["function_item[return_type]"],["->"]),Oe(aQ),_t("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:Za("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:ht(So(["field_initializer[name]","field_pattern[name]"],[":"])),name:ht(_t("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),So(["field_initializer[name]","field_pattern[name]"],[":"])),value:ht(Fn(["let_declaration[value]"],["="]),Fn(["field_initializer[value]","field_pattern[pattern]"],[":"]),_t("meta_item[value]","const_item[value]"),Oe(lQ)),attribute:So(["mutable_specifier","attribute_item"]),branch:ht(_t("match_arm"),Oe(Ne("else_clause"),mI("if_expression")),Oe(Ne("if_expression"),Gv()))},gI=mn(pQ);var uQ={argumentOrParameter:Za("arguments","parameters","class_parameters","bindings"),branch:Oe(Ne("case_clause"),Xn([],[],{includeUnnamedChildren:!0})),type:Fn(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:Fn(["*[value]","*[default_value]","type_definition[type]"],["="]),condition:Ya("*[condition]")},yI=mn(uQ);var fQ=["apply_statement","at_rule","charset_statement","debug_statement","each_statement","error_statement","for_statement","forward_statement","function_statement","if_statement","import_statement","include_statement","keyframes_statement","media_statement","mixin_statement","namespace_statement","placeholder","rule_set","supports_statement","use_statement","warn_statement","while_statement"];function SI(t){return[",","(",")"].includes(t.type)||TI(t)}function TI(t){return t.type==="plain_value"&&t.text==="at"}function xI(t){return e=>{(TI(e)||e.type===",")&&(e=e.previousSibling);let r=t(e);for(;r&&!SI(r);)e=r,r=t(r);return e}}function dQ(t,e){return e.type!=="declaration"?null:e.descendantsOfType("unit").map(r=>({node:r,selection:Yn(t.editor,r)}))}var mQ={condition:Ya("condition"),statement:ht(_t(...fQ),Oe(Ne("attribute_selector"),Xn([],["attribute_name","string_value"]))),argumentOrParameter:ht(Oe(Ne("arguments.*!","parameters.*!"),lv(t=>SI(t),", ",xI(t=>t.previousSibling),xI(t=>t.nextSibling)))),collectionKey:So(["declaration.property_name!"],[":"]),value:ht(Oe(Ne("declaration"),Xn(["property_name","variable_name"])),Oe(Ne("include_statement","namespace_statement"),Xn()),_t("return_statement.*!","import_statement.*!","attribute_selector.plain_value!","attribute_selector.string_value!","parameter.default_value!")),unit:ht(_t("integer_value.unit!"),dQ)},Kv=mn(mQ);function vI(t,e,r){let n=Ll[t];if(n==null)throw new Fu(t);let i=n[e];return i==null?eI(e):r?hQ(i):i}var Ll={clojure:cI,css:Kv,latex:fI,ruby:dI,rust:gI,scala:yI,scss:Kv};function hQ(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>gQ(i.node,wd(e,i.selection.selection),t)),n.length>0?n:null)}}function gQ(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var hh=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=vI(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new kt(this.modifier.scopeType.type);let i=yQ(n,r,{editor:e.editor,selection:new we(e.contentRange.start,e.contentRange.end)});if(i==null)throw new kt(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:a,leadingDelimiterRange:l,trailingDelimiterRange:p,removalRange:u,interiorRange:d}=o.context;if(u!=null&&(l!=null||p!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:m,selection:g}=o.selection;return new po({scopeTypeType:this.modifier.scopeType.type,editor:m,isReversed:e.isReversed,contentRange:g,removalRange:u,interiorRange:d,insertionDelimiter:a,leadingDelimiterRange:l,trailingDelimiterRange:p})})}};function yQ(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:wd(r,o.selection),context:o.context}));n=n.parent}return null}var Xa=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new sh;case"endOf":return new ah;case"extendThroughStartOf":case"extendThroughEndOf":return new Zm(this,e);case"toRawSelection":return new ph(e);case"interiorOnly":return new Ym(this,e);case"excludeInterior":return new Xm(this,e);case"leading":return new eh(this,e);case"trailing":return new th(this,e);case"visible":return new dh(e);case"containingScope":return new Ga(this,this.scopeHandlerFactory,e);case"preferredScope":return new ch(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new Ka(this,this.storedTargets,e):new qm(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new Ka(this,this.storedTargets,e):new ih(this,e);case"relativeScope":return e.scopeType.type==="instance"?new Ka(this,this.storedTargets,e):new fh(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new zm(e);case"keepEmptyFilter":return new Gm(e);case"cascading":return new Vm(this,e);case"modifyIfUntyped":return new ja(this,e);case"range":return new lh(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}getLegacyScopeStage(e){switch(e.scopeType.type){default:return new hh(this.languageDefinitions,e)}}};async function bI(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Fe({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=wi(r),a=o.map(u=>{let d=r[u],m=xQ(d);return wI(e.document,m.selections,m.behavior)});n||a.push(wI(e.document,e.selections,1));let l=await("edits"in i?vQ(t,e,i.edits,a):_I(t,i.callback,e.document,a));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((u,d)=>[u,l[d]]))}function wI(t,e,r){return e.map(n=>SQ(t,n,n instanceof we?!n.isReversed:!0,r))}function xQ(t){return"selections"in t?t:{selections:t,behavior:1}}function SQ(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function TQ(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new we(r,n):new we(n,r)))}async function _I(t,e,r,n){let i=t.registerRangeInfoList(r,et(n));return await e(),i(),TQ(n)}async function vQ(t,e,r,n){return await _I(t,async()=>{if(!await bI(t,e,r))throw new Error("Could not apply edits")},e.document,n)}function Er(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function Gt(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Fi(t,e,r){return Promise.all(Qv(t,e).map(([n,i])=>r(n,i)))}async function nt(t,e){return Fi(t,r=>r.editor,e)}async function EI(t,e){let r=Qv(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function RI(t){return Qv(t,e=>e.editor)}function Qv(t,e){let n=ll(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function gh(t){return t.contentRange}function hn(t,e){return e!=null?Tt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new we(i.end,i.start):new we(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function yh(t){let e=t.contentRange;return t.isLine?an(e):vt(e)}function Me(t,e,r,n=gh){return t.flashRanges(e.map(i=>{let o=n(i);return o==null?null:{editor:i.editor,range:i.isLine?an(o):vt(o),style:r}}).filter(i=>i!=null))}var xh=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Me(k(),e,"pendingModification0"),{thatSelections:et(await nt(e,async(n,i)=>{let o=i.map(({contentRange:u})=>u),a=bQ(n,o),l=k().getEditableTextEditor(n),{contentRanges:p}=await Fe({rangeUpdater:this.rangeUpdater,editor:l,edits:a,selections:{contentRanges:o}});return Tt(i,p).map(([u,d])=>({editor:u.editor,selection:d.toSelection(u.isReversed)}))}))}}};function bQ(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,a=r.lineAt(o),l=a.text.slice(0,a.rangeTrimmed?.start?.character??a.range.start.character),p=a.text.slice(0,o.character).search(/\s+$/),u=p>-1?new W(new pe(a.lineNumber,p),o):o.toEmptyRange();n.push({range:u,text:`
`+l,isReplace:!u.isEmpty})}return n}function Sh(t){return t.length<2?t:RI(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,a)=>o.contentRange.start.compareTo(a.contentRange.start));let i=!0;for(;i;)[n,i]=wQ(n);return n})}function wQ(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!_Q(r[r.length-1],n)?(e.push(kI(r)),r=[n]):r.push(n)}),e.push(kI(r)),[e,e.length!==t.length]}function kI(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return xo(e,r)}function _Q(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Ul=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Me(k(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Me(k(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((a,l)=>{let p=r[l];if((a==null||p==null)&&!o)throw new Error("Targets must have same number of args");if(p!=null){let u;o?u=e.map((d,m)=>{let g=d.contentText,x=(p.isRaw?null:p.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return m>0&&x!=null?x+g:g}).join(""):u=a.contentText,i.push({edit:p.constructChangeEdit(u),editor:p.editor,originalTarget:p.target,isSource:!1})}else p=r[0];n.includes(a)||(n.push(a),this.type==="bring"&&i.push({edit:a.toDestination("to").constructChangeEdit(p.target.contentText),editor:a.editor,originalTarget:a,isSource:!0}))}),this.type==="move"&&Sh(n).forEach(a=>{i.push({edit:a.constructRemovalEdit(),editor:a.editor,originalTarget:a,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return et(await Fi(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),a=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),p=a.map(({edit:x})=>x.range),u=k().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:m}=await Fe({rangeUpdater:this.rangeUpdater,editor:u,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:p,behavior:0}}}),g=[...this.getMarks(o,d),...this.getMarks(a,m)];return g.sort((x,b)=>n.findIndex(v=>v.originalTarget===x.target)-n.findIndex(v=>v.originalTarget===b.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],a=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:a.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>e.find(i=>i.target===n).selection;return Promise.all([Me(k(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Me(k(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function PI(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var Th=class extends Ul{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0",getSourceRangeCallback:gh};this.run=this.run.bind(this)}async run(r,n){r=PI(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:l}}},vh=class extends Ul{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:EQ};this.run=this.run.bind(this)}async run(r,n){r=PI(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:l}}},bh=class extends Ul{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0",getSourceRangeCallback:gh};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,a)=>{let l=n[a];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function EQ(t){return t.getRemovalHighlightRange()}var Hl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){Gt(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Vl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=Er(e),n=e.map(o=>new qe({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await k().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var Ja=t=>new Mt({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var ec=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Me(k(),e,"referenced"),r.ensureSingleEditor&&Er(e),r.ensureSingleTarget&&Gt(e);let n=k().activeEditableTextEditor,i=r.setSelection?EI:nt,o=et(await i(e,(a,l)=>this.runForEditor(r,a,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=k().getEditableTextEditor(r),o=r.selections,a=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:p,targetSelections:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(p),r.document.version===a?n:u.map(d=>Ja({editor:r,selection:d}))}};var Kt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new ec(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=k().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,a)=>RQ(o,i?a.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},wh=class extends Kt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},_h=class extends Kt{constructor(){super(...arguments);this.command="toggleLineComment"}},Eh=class extends Kt{constructor(){super(...arguments);this.command="indentLine"}},Rh=class extends Kt{constructor(){super(...arguments);this.command="outdentLine"}},kh=class extends Kt{constructor(){super(...arguments);this.command="fold"}},Ph=class extends Kt{constructor(){super(...arguments);this.command="unfold"}},Mh=class extends Kt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},Ah=class extends Kt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},Dh=class extends Kt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},Ih=class extends Kt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Fh=class extends Kt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Ch=class extends Kt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Oh=class extends Kt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Nh=class extends Kt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}};function RQ(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Lh=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(k().capabilities.commands.clipboardCopy!=null)return new wh(this.rangeUpdater).run(e,r);r.showDecorations&&await Me(k(),e,"referenced",i=>i.contentRange);let n=e.map(i=>i.contentText).join(`
`);return await k().clipboard.writeText(n),{thatTargets:e}}};var Uh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await k().flashRanges(e.flatMap(i=>{let{editor:o,contentRange:a}=i,l=i.getRemovalHighlightRange();return i.isLine?[{editor:o,range:vt(a),style:"referenced"},{editor:o,range:an(l),style:"pendingDelete"}]:[{editor:o,range:vt(a),style:"referenced"},...kQ(a,l).map(p=>({editor:o,range:vt(p),style:"pendingDelete"}))]}));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function kQ(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,a=[];return i.isBefore(r)&&a.push(new W(i,r)),o.isAfter(n)&&a.push(new W(n,o)),a}var Bl=class{constructor(){this.run=this.run.bind(this)}async run(e){return await nt(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(a=>{let l=a.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new Zv;await k().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},Zv=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function MI(t,e,r,n){let i=r.destinations.map((b,v)=>{if(n||b.getEditNewActionType()==="edit")return{destination:b,index:v}}).filter(b=>!!b);if(i.length===0)return r;let o=i.map(b=>b.destination.constructChangeEdit("")),a=r.cursorRanges.map((b,v)=>({range:b,index:v})).filter(({range:b})=>b!=null),l=a.map(({index:b})=>b),p=a.map(({range:b})=>b),u=o.map(b=>b.range),{thatRanges:d,cursorRanges:m,editRanges:g}=await Fe({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:p,editRanges:{selections:u,behavior:0}}}),x=[...r.cursorRanges];return Tt(l,m).forEach(([b,v])=>{x[b]=v}),i.forEach((b,v)=>{let M=o[v].updateRange(g[v]);x[b.index]=M}),{destinations:r.destinations,thatRanges:d,cursorRanges:x}}async function AI({acceptsLocation:t},e,r,n){let i=n.destinations.map((m,g)=>{if(m.getEditNewActionType()==="insertLineAfter")return{destination:m,index:g}}).filter(m=>!!m);if(i.length===0)return n;let o=i.map(({destination:m})=>m.contentRange),a=n.destinations.map(({contentRange:m})=>m),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(m=>m.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:p,thatRanges:u}=await Fe({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:a,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((m,g)=>{d[m.index]=r.selections[g]}),{destinations:n.destinations.map((m,g)=>m.withTarget(m.target.withContentRange(p[g]))),thatRanges:u,cursorRanges:d}}async function DI(t,e){let r=Gt(e),n=k().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:hn([r.target.thatTarget])}}var Hh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return DI(this.actions,e);let r=k().getEditableTextEditor(Er(e)),n={destinations:e,thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=k().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await AI(i,this.rangeUpdater,r,n)),n=await MI(this.rangeUpdater,r,n,!o);let a=n.destinations.map((l,p)=>n.cursorRanges[p].toSelection(l.target.isReversed));return await r.setSelections(a,{focusEditor:!0}),{thatSelections:hn(n.destinations.map(l=>l.target),n.thatRanges)}}};var Vh=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ri)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},Bh=class extends Vh{constructor(){super(...arguments);this.insertionMode="before"}},Wh=class extends Vh{constructor(){super(...arguments);this.insertionMode="after"}};var Wl=class{constructor(e){this.callbackAction=new ec(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:a,showDecorations:l}={}){let p=n??[];return this.callbackAction.run(e,{callback:()=>k().executeCommand(r,...p),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:a??!0,showDecorations:l??!0})}};var $h=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){Gt(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),Yc(k().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},jh=class extends $h{find(e){return k().findInDocument(e)}},qh=class extends $h{find(e){return k().findInWorkspace(e)}};var zh=class{constructor(){this.run=this.run.bind(this)}async run(e){return await Me(k(),e,"referenced"),{thatTargets:e}}};var tc=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=Gt(e);return await Me(k(),e,"referenced"),await k().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:hn(e)}}};function II(t){return t.split(/^---$/m).map(PQ).filter(r=>r!=null)}function PQ(t){let e=t.match(/^-$/m),r=e!=null?t.slice(0,e.index):t,n=e!=null?t.slice(e.index+e[0].length):null,i=MQ(r);if(n!=null){let o=IQ(n);o!=null&&(i==null&&(i={variables:[]}),i.body=o)}return i}function MQ(t){let e={variables:[]},r=AQ(t);if(Object.keys(r).length===0)return;let n={};for(let[i,o]of Object.entries(r))switch(i){case"name":e.name=o;break;case"phrase":e.phrases=$l(o);break;case"insertionScope":e.insertionScopes=$l(o);break;case"language":e.languages=$l(o);break;default:if(!i.startsWith("$"))throw Error(`Invalid key '${i}'`);n[i]=o}return e.variables=DQ(n),e}function AQ(t){let e=t.split(/\r?\n/).map(n=>n.trim()).filter(Boolean),r={};for(let n of e){let i=n.split(":");if(i.length!==2)throw Error(`Invalid line '${n}'`);let o=i[0].trim(),a=i[1].trim();if(o.length===0||a.length===0)throw Error(`Invalid line '${n}'`);if(r[o]!=null)throw Error(`Duplicate key '${o}' in '${t}'`);r[o]=a}return r}function DQ(t){let e={},r=n=>(e[n]==null&&(e[n]={name:n}),e[n]);for(let[n,i]of Object.entries(t)){let o=n.split(".");if(o.length!==2)throw Error(`Invalid variable key '${n}'`);let a=o[0].slice(1);switch(o[1]){case"insertionFormatter":r(a).insertionFormatters=$l(i);break;case"wrapperPhrase":r(a).wrapperPhrases=$l(i);break;case"wrapperScope":r(a).wrapperScope=i;break;default:throw Error(`Invalid variable key '${n}'`)}}return Object.values(e)}function IQ(t){let e=t.match(/^[ \t]*\S/m);if(e?.index!=null)return t.slice(e.index).trimEnd().split(/\r?\n/).map(r=>r.trimEnd())}function $l(t){return t.split("|").map(e=>e.trim())}function FI(t){let e=t.map(r=>FQ(r)).filter(Boolean).join(`
---

`);return e?e+`
---
`:""}function FQ(t){let e=[bs("name",t.name),bs("language",t.languages),bs("phrase",t.phrases),bs("insertionScope",t.insertionScopes)].filter(Boolean);return t.variables.length>0&&(e.length>0&&e.push(""),e.push(...CQ(t.variables))),t.body!=null&&e.push("-",...t.body),e.join(`
`)}function CQ(t){let e=[...t];return e.sort(OQ),e.flatMap(r=>[bs(`$${r.name}.insertionFormatter`,r.insertionFormatters),bs(`$${r.name}.wrapperPhrase`,r.wrapperPhrases),bs(`$${r.name}.wrapperScope`,r.wrapperScope)]).filter(Boolean)}function bs(t,e){return e==null?"":Array.isArray(e)?`${t}: ${e.join(" | ")}`:`${t}: ${e}`}function OQ(t,e){return t.name==="0"?1:e.name==="0"?-1:t.name.localeCompare(e.name)}function CI(t){return t.length>0&&t[0].body==null?t[0]:void 0}function Gh(t,e){let r=[],n=0,i=null,[o,...a]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...a.map(p=>({text:p,startIndex:0}))].forEach(({text:p,startIndex:u})=>{let d=p.match(/^\s*/)?.[0]??"",m=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let g=Math.max(m,u),x=kS("	",n),b=p.slice(g);r.push(x+b)}),r}function Kh(t,e){let r=MS(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var jl=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){let i=Gt(e),o=i.editor;if(Me(k(),e,"referenced"),n==null&&(n=await k().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"}),!n))return{};let a=o.document.offsetAt(i.contentRange.start),l=LQ(o,i.contentRange),p=l.map((ie,ae)=>({offsets:{start:o.document.offsetAt(ie.start)-a,end:o.document.offsetAt(ie.end)-a},name:ae===l.length-1?"0":`${ae+1}`})),u=o.document.getText(new W(i.contentRange.start.with(void 0,0),i.contentRange.start)),d=o.document.getText(i.contentRange),m=Kh(d,[...gr(d,/\$|\\/g,ie=>({offsets:{start:ie.index,end:ie.index+ie[0].length},text:`\\${ie[0]}`})),...p.map(({offsets:ie,name:ae})=>({offsets:ie,text:`$${ae}`}))]),g=Gh(m,u),x,b;k().runMode==="test"?(x=k().getEditableTextEditor(o),b=[]):(x=k().getEditableTextEditor(await this.snippets.openNewSnippetFile(n,r)),b=II(x.document.getText())),await x.setSelections([x.document.range.toSelection(!1)]);let v=CI(b),F=1,M=v?.phrases!=null?void 0:[`${Yv}${F++}`],U=ie=>{let ae=v?.variables?.some(it=>it.name===ie.name&&it.wrapperPhrases!=null);return{name:ie.name,wrapperPhrases:ae?void 0:[`${Yv}${F++}`]}},K={name:v?.name===n?void 0:n,phrases:M,languages:NQ(o,v),body:g,variables:p.map(U)};b.push(K);let ne=FI(b).replace(/\$/g,"\\$").replaceAll(Yv,"$");return await x.insertSnippet(ne),{thatSelections:e.map(({editor:ie,contentSelection:ae})=>({editor:ie,selection:ae}))}}};function NQ(t,e){if(!e?.languages?.includes(t.document.languageId))return[t.document.languageId]}function LQ(t,e){let r=t.selections.filter(n=>e.contains(n));return r.sort((n,i)=>n.start.compareTo(i.start)),r}var Yv="PLACEHOLDER_VFA77zcbLD6wXNmfMAay";var ql=class{constructor(){this.substitutions=[]}addSubstitution(e,r=!1){let n=UQ(10);return this.substitutions.push({to:e,randomId:n,isQuoted:r}),n}makeSubstitutions(e){return this.substitutions.forEach(({to:r,randomId:n,isQuoted:i})=>{let o=i?`"${n}"`:n;e=e.split(o).join(r)}),e}};function UQ(t){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}var zl=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r){let n=Gt(e),i=n.editor;if(Me(k(),e,"referenced"),r==null&&(r=await k().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"})),r==null)return{};let o=1,a=i.document.offsetAt(n.contentRange.start),l=i.selections.filter(M=>n.contentRange.contains(M)).map((M,U)=>({offsets:{start:i.document.offsetAt(M.start)-a,end:i.document.offsetAt(M.end)-a},defaultName:`variable${U+1}`,placeholderIndex:o++})),p=new ql,u=i.document.getText(new W(n.contentRange.start.with(void 0,0),n.contentRange.start)),d=i.document.getText(n.contentRange),m=Kh(d,[...gr(d,/\$|\\/g,M=>({offsets:{start:M.index,end:M.index+M[0].length},text:M[0]==="\\"?`\\${M[0]}`:`\\\\${M[0]}`})),...l.map(({offsets:M,defaultName:U,placeholderIndex:K})=>({offsets:M,text:p.addSubstitution(["\\$","${",K,":",U,"}"].join(""))}))]),g=Gh(m,u),x=({placeholderIndex:M})=>{let U="$"+M,K=p.addSubstitution("{$"+o+++"}",!0);return[U,K]},b={[r]:{definitions:[{scope:{langIds:[i.document.languageId]},body:g}],description:"$"+o++,variables:l.length===0?void 0:Object.fromEntries(l.map(x))}},v=p.makeSubstitutions(JSON.stringify(b,null,2)),F=k().getEditableTextEditor(i);return k().runMode==="test"?await F.setSelections([i.document.range.toSelection(!1)]):await this.snippets.openNewSnippetFile(r),await F.insertSnippet(v),{thatSelections:e.map(({editor:M,contentSelection:U})=>({editor:M,selection:U}))}}};var rc=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){return r==null?new zl(this.snippets).run(e,n):new jl(this.snippets).run(e,r,n)}};var Gl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Kl=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Me(k(),e,"referenced"),n&&Gt(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var Ql=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(k().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(k().visibleTextEditors.map(n=>k().setHighlightRanges(r,n,[]))):await nt(e,(n,i)=>k().setHighlightRanges(r,n,i.map(yh))),{thatTargets:e}}};var Qh=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Me(k(),e,"pendingModification0"),{thatTargets:et(await nt(e,this.runForEditor))})}hasCapability(){return this.isIndent?k().capabilities.commands.indentLine!=null:k().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new Eh(this.rangeUpdater):new Rh(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?HQ(e,r):VQ(e,r),{targetSelections:i}=await Fe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return Tt(r,i).map(([o,a])=>Ja({editor:e,selection:a.toSelection(o.isReversed)}))}},Zh=class extends Qh{constructor(e){super(e,!0)}},Yh=class extends Qh{constructor(e){super(e,!1)}};function HQ(t,e){let{document:r}=t,n=OI(e),i=BQ(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function VQ(t,e){let{document:r}=t,n=OI(e),i=WQ(t);return n.map(o=>{let a=r.lineAt(o),l=a.text.match(i),{start:p}=a.range,u=p.translate(void 0,l?.[0].length);return{range:new W(p,u),text:""}})}function OI(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function BQ(t){if(t.options.insertSpaces){let e=NI(t);return" ".repeat(e)}return"	"}function WQ(t){if(t.options.insertSpaces){let e=NI(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function NI(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var Xh=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(ri)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=et(await nt(e,this.runForEditor));return await k().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:vt(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),a=i.map(({range:g})=>g),l=k().getEditableTextEditor(e),{contentSelections:p,editRanges:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:a,behavior:0}}}),d=Tt(i,u).map(([g,x])=>g.updateRange(x)),m=e.selections[0];return p.some(g=>g.intersection(m)!=null)&&await l.revealRange(m),{sourceMark:hn(r,d),thatMark:hn(r,p)}}},Jh=class extends Xh{constructor(e,r){super(e,r,!0)}},eg=class extends Xh{constructor(e,r){super(e,r,!1)}};var Zl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ri)]}async run(e){let r=await nt(e,async(i,o)=>{let a=this.getEdits(o),l=o.map(d=>d.thatTarget.contentSelection),{contentSelections:p,editRanges:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(i),edits:a,selections:{contentSelections:l,editRanges:{selections:a.map(d=>d.range),behavior:0}}});return{thatMark:p.map(d=>({editor:i,selection:d})),flashRanges:Zo(a,u).map(([d,m])=>({editor:i,range:d.isLine?d.updateRange(m):m,isLine:d.isLine}))}});return await k().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:a,isLine:l})=>({editor:o,range:l?an(a):vt(a),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},tg=class extends Zl{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[ig(r,"before"),ig(r,"after")])}},rg=class extends Zl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>ig(r,"before"))}},ng=class extends Zl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>ig(r,"after"))}};function ig(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.isLine}}var Xv=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},To=class{constructor(){this._children=[]}appendChild(e){return e instanceof Rr&&this._children[this._children.length-1]instanceof Rr?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function a(l,p){for(let u of l)u.parent=p,a(u.children,u)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof ag)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Rr=class t extends To{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},og=class extends To{},jr=class t extends og{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof sg?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},sg=class t extends To{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Rr&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},Jv=class t extends To{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(a=>a instanceof Cn&&!!a.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof Cn){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},Cn=class t extends To{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},vo=class t extends og{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Rr(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function LI(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var ag=class t extends To{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof jr&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return LI([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof jr&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof vo&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){LI(this.children,e)}},nc=class{constructor(){this._scanner=new Xv;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new ag;for(;this._parse(i););let o=new Map,a=[],l=0;i.walk(p=>(p instanceof jr&&(l+=1,p.isFinalTabstop?o.set(0,void 0):!o.has(p.index)&&p.children.length>0?o.set(p.index,p.children):a.push(p)),!0));for(let p of a){let u=o.get(p.index);if(u){let d=new jr(p.index);d.transform=p.transform;for(let m of u)d.appendChild(m.clone());i.replace(p,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new jr(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Rr(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new jr(Number(r)):new vo(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new jr(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Rr("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let a=new sg;for(;;){if(this._parseChoiceElement(a)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(a),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Rr(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new vo(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Rr("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new Jv,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Rr(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Cn(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new Cn(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new Cn(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Cn(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Cn(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let a=this._until(4);if(a)return e.appendChild(new Cn(Number(i),void 0,o,a)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Cn(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Rr(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var UI=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function cg(t,e,r){let n=$Q(t)+1,i={};t.walk(o=>{if(o instanceof vo){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Rr(r[o.name])]);else if(!UI[o.name]){let a;o.name in i?a=i[o.name]:(a=n++,i[o.name]=a);let l=new jr(a);o.children.forEach(p=>l.appendChild(p)),o.parent.replace(o,[l])}}else o instanceof jr&&o.index.toString()===e&&o.parent.replace(o,[new vo("TM_SELECTED_TEXT")]);return!0})}function $Q(t){let e=0;return t.walk(r=>(r instanceof jr&&(e=Math.max(e,r.index)),!0)),e}function lg(t,e,r){let n=e.map(o=>jQ(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function jQ(t,e,r){let n=e.editor.document.languageId;return r.findIndex(({scope:i})=>{if(i==null)return!0;let{langIds:o,scopeTypes:a,excludeDescendantScopeTypes:l}=i;if(o!=null&&!o.includes(n))return!1;if(a!=null){let p=a.concat(l??[]),u,d;for(let m of p)try{let g=t.create({type:"containingScope",scopeType:{type:m}}).run(e)[0];e.contentRange.isRangeEqual(g.contentRange)&&(g=t.create({type:"containingScope",scopeType:{type:m},ancestorIndex:1}).run(e)[0]),(u==null||u.contentRange.contains(g.contentRange))&&(u=g,d=m)}catch{continue}return d==null?!1:u!=null&&!(l??[]).includes(d)}return!0})}var Yl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new nc;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new Bm(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){if(e.type==="named"){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}else return e.scopeTypes??[]}getSnippetInfo(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=lg(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(a){return a==null?void 0:qQ(i,o,a)}}}else return{body:e.body,formatSubstitutions(n){return n}}}async run(e,r){let n=k().getEditableTextEditor(Er(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(u=>new Mt({editor:n,contentRange:u,isReversed:!1,hasExplicitRange:!0}))),a=this.snippetParser.parse(i);cg(a,null,o(r.substitutions));let l=a.toTextmateString(),{editorSelections:p}=await Fe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}};function qQ(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let a=CP[o];if(a==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,a(i.split(" "))]}))}var Xl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ri)]}async run(e){return await Me(k(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:et(await nt(e,async(n,i)=>{let{thatRanges:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(n),edits:zQ(n,i),selections:{thatRanges:i.map(({contentRange:a})=>a)}});return Zo(i,o).map(([a,l])=>({editor:n,selection:l.toSelection(a.isReversed)}))}))}}};function zQ(t,e){let r=[];for(let n of e){let i=n.joinAs==="line"?KQ(n):GQ(n);r.push(...i)}return r}function GQ(t){let{editor:e,contentRange:r}=t,n=br(e.document.languageId).tokenMatcher,i=pn(n,e,r,"forward");return Array.from(QT(i)).map(([o,a])=>({range:new W(o.end,a.start),text:"",isReplace:!0}))}function KQ(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=Ma(DA(n,i+1),a=>e.lineAt(a));return Array.from(QT(o)).map(([a,l])=>({range:new W(a.rangeTrimmed?.end??a.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var pg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=k().getEditableTextEditor(Er(e)),n=k().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:a,editorSelections:l}=await Fe({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(a),n!=null&&!n.isActive&&await n.focus(),await k().flashRanges(l.map(p=>({editor:r,range:vt(p),style:"justAdded"}))),{thatSelections:l.map(p=>({editor:r,selection:p}))}}};var ug=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await k().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?Zo(e,n).map(([a,l])=>({destination:a,text:l})):e.map(a=>({destination:a,text:r}));return{thatSelections:et(await Fi(i,({destination:a})=>a.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:a,text:l})=>a.constructChangeEdit(l)),{editSelections:i}=await Fe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:a})=>a),behavior:0}}}),o=Zo(n,i).map(([a,l])=>a.updateRange(l).toSelection(l.isReversed));return await k().flashRanges(o.map(a=>({editor:e,range:vt(a),style:"justAdded"}))),o.map(a=>({editor:e,selection:a}))}};var fg=class{constructor(e,r){this.run=this.run.bind(this),this.runner=k().capabilities.commands.clipboardPaste!=null?new pg(e,r):new ug(e)}run(e){return this.runner.run(e)}};var Jl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=Sh(e),r&&await Me(k(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:et(await nt(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(a=>a.constructRemovalEdit()),i=k().getEditableTextEditor(e),{editRanges:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:a})=>a)}});return Tt(r,o).map(([a,l])=>new lo({editor:a.editor,isReversed:a.isReversed,contentRange:l}))}};var ep=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Me(k(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=Tt(e,n).map(([l,p])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(p)})),o=[],a=[];return await Fi(i,l=>l.editor,async(l,p)=>{let u=p.map(({edit:g})=>g),{contentSelections:d,editRanges:m}=await Fe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(l),edits:u,selections:{contentSelections:p.map(({target:g})=>g.contentSelection),editRanges:{selections:u.map(({range:g})=>g),behavior:0}}});for(let[g,x]of Tt(p,d))o.push(g.target.withContentRange(x));for(let[g,x]of Tt(p,m))a.push({editor:l,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:a}}};var tp=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[Vv(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(a=>{let l=a.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Me(k(),i,"pendingModification0");let o=await nt(i,async(a,l)=>{let p=l.map((m,g)=>({editor:a,range:m.contentRange,text:g%2===0?r:n})),{sourceRanges:u,thatRanges:d}=await Fe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(a),edits:p,selections:{sourceRanges:e.map(m=>m.thatTarget.contentRange),thatRanges:e.map(m=>m.contentRange)}});return{sourceMark:hn(e,u),thatMark:hn(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:a})=>a),thatSelections:o.flatMap(({thatMark:a})=>a)}}};var rp=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=ll(e,a=>a.editor),n=Array.from(r,([a,l])=>({lineNumber:QQ(l,this.at),editor:a})),i=k().activeEditableTextEditor;for(let a of n)await k().getEditableTextEditor(a.editor).revealLine(a.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(a=>{let l=a.editor.visibleRanges,p=l[0].start.line,u=l[l.length-1].end.line;return a.contentRange.start.line>p||a.contentRange.end.line<u||a.contentRange.start.line===p&&a.contentRange.end.line===u});return await k().flashRanges(o.map(a=>({editor:a.editor,range:an(a.contentRange),style:"referenced"}))),{thatTargets:e}}},dg=class extends rp{constructor(){super("top")}},mg=class extends rp{constructor(){super("center")}},hg=class extends rp{constructor(){super("bottom")}};function QQ(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var bo=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=Er(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n,o=this.selectionMode==="set"&&i.length===1&&i[0].isEmpty;return await k().getEditableTextEditor(r).setSelections(i,{focusEditor:!0,highlightWord:o}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new we(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new we(r.contentRange.end,r.contentRange.end))}}},gg=class extends bo{constructor(){super("set","content")}},yg=class extends bo{constructor(){super("set","before")}},xg=class extends bo{constructor(){super("set","after")}},Sg=class extends bo{constructor(){super("add","content")}},Tg=class extends bo{constructor(){super("add","before")}},vg=class extends bo{constructor(){super("add","after")}};var np=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var ip=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Me(k(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,a=this.treeSitter.getTree(i.document);r.push(ZQ(i.document,a,o))}return k().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function ZQ(t,e,r){let n=[],i=[];return HI(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function HI(t,e,r,n,i){for(;;){let o=new W(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let a="  ".repeat(i),l=YQ(n),p=a+l;if(n.nodeIsNamed)t.push(`${p}${n.nodeType} [${o}]`),e.push(`${p}(${n.nodeType}`),n.gotoFirstChild()?(HI(t,e,r,n,i+1),n.gotoParent(),e.push(`${a})`)):e[e.length-1]+=")";else{let u=`"${n.nodeType}"`;t.push(`${p}${u} [${o}]`),e.push(`${p}${u}`)}}if(!n.gotoNextSibling())return}}function YQ(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var op=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&Yc(k().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((a,l)=>a.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(a=>a.toDestination("to")),i);return{thatSelections:o}}},bg=class extends op{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},wg=class extends op{sortTexts(e){return e.reverse()}},_g=class extends op{sortTexts(e){return PS(e)}};var sp=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(ri)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Me(k(),r,"referenced"),await nt(e,async(n,i)=>{let o=i.map(yh);await k().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var ap=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await nt(e,async(o,a)=>{let l=a.map(v=>({start:new we(v.contentRange.start,v.contentRange.start),end:new we(v.contentRange.end,v.contentRange.end)})),p=l.flatMap(({start:v,end:F})=>[{text:r,range:v},{text:n,range:F,isReplace:!0}]),u=a.map(v=>v.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:m,sourceSelections:g,thatSelections:x}=await Fe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(o),edits:p,selections:{boundariesStartSelections:{selections:l.map(({start:v})=>v),behavior:2},boundariesEndSelections:{selections:l.map(({end:v})=>v),behavior:3},sourceSelections:{selections:u,behavior:1},thatSelections:{selections:u,behavior:0}}}),b=[...d,...m];return await k().flashRanges(b.map(v=>({editor:o,range:vt(v),style:"justAdded"}))),{sourceMark:g.map(v=>({editor:o,selection:v})),thatMark:x.map(v=>({editor:o,selection:v}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var cp=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new nc;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new ja(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){if(e.type==="named"){let{name:r,variableName:n}=e,a=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return a==null?void 0:{type:a}}else return e.scopeType}getBody(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return lg(this.modifierStageFactory,r,i.definitions).body.join(`
`)}else return e.body}async run(e,r){let n=k().getEditableTextEditor(Er(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);cg(o,r.variableName);let a=o.toTextmateString();await Me(k(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),p=()=>n.insertSnippet(a,l),{targetSelections:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:n,callback:p,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(d=>({editor:n,selection:d}))}}};var XQ=/-?\d+(\.\d+)?/g,Eg=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Fi(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let p=n.offsetAt(l.contentRange.start),u=l.contentText,d=Zc(u,XQ);for(let m of d)i.push(JQ(e,p,m)),o.push(eZ(this.isIncrement,m.text))}let{thatSelections:a}=await this.actions.replace.run(i,o);return a}},Rg=class extends Eg{constructor(e){super(e,!0)}},kg=class extends Eg{constructor(e){super(e,!1)}};function JQ(t,e,r){return new qe({editor:t,isReversed:!1,contentRange:new W(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function eZ(t,e){return e.includes(".")?rZ(t,e).toString():tZ(t,e).toString()}function tZ(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function rZ(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var Pg=class{constructor(e,r,n,i){this.treeSitter=e;this.snippets=r;this.rangeUpdater=n;this.modifierStageFactory=i;this.addSelection=new Sg;this.addSelectionBefore=new Tg;this.addSelectionAfter=new vg;this.callAsFunction=new Hl(this);this.clearAndSetSelection=new Vl(this);this.copyToClipboard=new Lh(this,this.rangeUpdater);this.cutToClipboard=new Uh(this);this.decrement=new kg(this);this.deselect=new Bl;this.editNew=new Hh(this.rangeUpdater,this);this.editNewLineAfter=new Wh(this,this.modifierStageFactory);this.editNewLineBefore=new Bh(this,this.modifierStageFactory);this.executeCommand=new Wl(this.rangeUpdater);this.extractVariable=new Nh(this.rangeUpdater);this.findInDocument=new jh(this);this.findInWorkspace=new qh(this);this.flashTargets=new zh;this.foldRegion=new kh(this.rangeUpdater);this.followLink=new tc({openAside:!1});this.followLinkAside=new tc({openAside:!0});this.generateSnippet=new rc(this.snippets);this.getText=new Kl;this.highlight=new Ql;this.increment=new Rg(this);this.indentLine=new Zh(this.rangeUpdater);this.insertCopyAfter=new eg(this.rangeUpdater,this.modifierStageFactory);this.insertCopyBefore=new Jh(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineAfter=new ng(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineBefore=new rg(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLinesAround=new tg(this.rangeUpdater,this.modifierStageFactory);this.insertSnippet=new Yl(this.rangeUpdater,this.snippets,this,this.modifierStageFactory);this.joinLines=new Xl(this.rangeUpdater,this.modifierStageFactory);this.breakLine=new xh(this.rangeUpdater);this.moveToTarget=new vh(this.rangeUpdater);this.outdentLine=new Yh(this.rangeUpdater);this.pasteFromClipboard=new fg(this.rangeUpdater,this);this.randomizeTargets=new _g(this);this.remove=new Jl(this.rangeUpdater);this.rename=new Mh(this.rangeUpdater);this.replace=new ep(this.rangeUpdater);this.replaceWithTarget=new Th(this.rangeUpdater);this.revealDefinition=new Ih(this.rangeUpdater);this.revealTypeDefinition=new Fh(this.rangeUpdater);this.reverseTargets=new wg(this);this.rewrapWithPairedDelimiter=new tp(this.rangeUpdater,this.modifierStageFactory);this.scrollToBottom=new hg;this.scrollToCenter=new mg;this.scrollToTop=new dg;this["private.setKeyboardTarget"]=new np("keyboard");this["experimental.setInstanceReference"]=new np("instanceReference");this.setSelection=new gg;this.setSelectionAfter=new xg;this.setSelectionBefore=new yg;this.showDebugHover=new Oh(this.rangeUpdater);this.showHover=new Ch(this.rangeUpdater);this.showQuickFix=new Dh(this.rangeUpdater);this.showReferences=new Ah(this.rangeUpdater);this.sortTargets=new bg(this);this.swapTargets=new bh(this.rangeUpdater);this.toggleLineBreakpoint=new sp(this.modifierStageFactory);this.toggleLineComment=new _h(this.rangeUpdater);this.unfoldRegion=new Ph(this.rangeUpdater);this.wrapWithPairedDelimiter=new ap(this.rangeUpdater);this.wrapWithSnippet=new cp(this.rangeUpdater,this.snippets,this.modifierStageFactory);this["private.showParseTree"]=new ip(this.treeSitter);this["private.getTargets"]=new Gl}};async function VI(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return Mg(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:Ag(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return Mg(i.destination)?{action:"insert",modifiers:Ag(i.destination),text:await eb(e,i.source)}:null;case"moveToTarget":if(Mg(i.destination)){let o=await eb(e,i.source);return await nZ(e,i.source),{action:"insert",modifiers:Ag(i.destination),text:o}}return null;case"callAsFunction":return Dg(i.argument)?{action:i.name,modifiers:Ig(i.argument),callee:await eb(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return Dg(i.target)?{action:i.name,modifiers:Ig(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return Mg(i.destination)?{action:i.name,modifiers:Ag(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return Dg(i.target)?{action:i.name,modifiers:Ig(i.target)}:null}}function Mg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&Dg(t.target):!1}function Dg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function Ag(t){return t.type==="primitive"?Ig(t.target):[]}function Ig(t){if(t.type==="primitive"){if(t.modifiers!=null&&t.modifiers.length>0)return t.modifiers;if(t.mark?.type==="cursor")return[{type:"containingTokenIfEmpty"}]}return[]}async function eb(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function nZ(t,e){await t({name:"remove",target:e})}function BI(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((a,l)=>[a,l]);for(let[a,l]of o.reverse())for(let p of iZ){let u=p.accept(a);if(u.accepted){let[d,m]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],g={...t,anchor:m.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:m},active:Bf(i,x=>{x.modifiers=x.modifiers.slice($o(x.modifiers,b=>p.accept(b).accepted)+1)})};return g=u.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:d}}}return t}var iZ=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function rb(t,e){switch(t.type){case"list":return oZ(t,e);case"range":return WI(t,e);case"primitive":return Fg(t,e);case"implicit":return t}}function oZ(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return WI(r,i);case"primitive":return Fg(r,i)}})}}function WI(t,e){let r=sZ(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return BI(r,n)}function sZ(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:Fg(t.anchor,e),active:Fg(t.active,e.concat(t.anchor))}}function Fg(t,e){let r=tb(t.mark??(aZ(t)?pZ(e):null)??{type:"cursor"}),n=$I(t)??uZ(e)??fZ(e)??[];return{type:t.type,mark:r,modifiers:n}}function aZ(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function $I(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function cZ(t){if(lZ(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function lZ(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function pZ(t){return lp(t,e=>e.mark)}function uZ(t){return lp(t,$I)}function fZ(t){return lp(t,cZ)}function lp(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=lp([n.anchor],e);if(i!=null)return i;break}case"list":{let i=lp(n.elements,e);if(i!=null)return i;break}}}}function tb(t){switch(t.type){case"range":return{...t,anchor:tb(t.anchor),active:tb(t.active)};case"target":return{type:"target",target:rb(t.target,[])};default:return t}}var Cg=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new nb(this.debug)}async run(e){if(Qo(e)){let u=await VI(this.commandServerApi,this.runAction,e);if(u!=null)return{fallback:u}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:a,instanceReferenceTargets:l,keyboardTargets:p}=await this.runAction(e.action);return this.storedTargets.set("that",jI(i,n)),this.storedTargets.set("source",jI(a,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",p,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.directory,e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(md(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},nb=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=rb(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function jI(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(Ja):t}var Og=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Mt({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var Ng=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=k().visibleTextEditors.find(a=>a.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new W(r.line,r.character,n.line,n.character);return[new Mt({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var Lg=class{constructor(e){this.mark=e}run(){let e=k().activeTextEditor;if(e==null)return[];let r=dZ(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[ZT(e,!1,n)]}},dZ=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,a=Math.floor(i/100)*100,l=[],p=[],u=a+r;for(;u<=o;)u>=i&&(t.visibleRanges.find(m=>u>=m.start.line&&u<=m.end.line)?l.push(u):p.push(u)),u+=100;if(l.length===1)return l[0];if(l.length+p.length>1)throw new Error("Multiple lines matching");if(p.length===1)return p[0];throw new Error("Line is not in viewport")}}};var Ug=class{constructor(e){this.mark=e}run(){return[]}};var Hg=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[xo(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var Vg=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var Bg=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var Wg=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new Ra;case"that":case"source":case"keyboard":return new Vg(this.storedTargets,e.type);case"decoratedSymbol":return new Og(this.readableHatMap,e);case"lineNumber":return new Lg(e);case"range":return new Hg(this,e);case"nothing":return new Ug(e);case"target":return new Bg(this.targetPipelineRunner,e);case"explicit":return new Ng(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function qI(t,e,r,n,i,o,a,l,p,u){r.active&&(r.log("command:"),r.log(JSON.stringify(u,null,2)));let d=IT(u),m=await n.getReadableMap(d.usePrePhraseSnapshot),g=hZ(t,e,a,r,o,m,i,l);for(let b of p)g=b.wrapCommandRunner(m,g);let x=await g.run(d);return await mZ(u,x)}async function mZ(t,e){if(Qo(t))return e;if("returnValue"in e)return e.returnValue}function hZ(t,e,r,n,i,o,a,l){let p=new Xa(r,i,new Ca(r)),u=new Wg(o,i),d=new Qm(p,u);return u.setPipelineRunner(d),new Cg(e,n,i,d,new Pg(t,a,l,p))}var zI=["clojure","css","latex","ruby","rust","scala","scss"];async function GI(t,e){await gZ(t,e)}async function gZ(t,e){let r=[];for(let n of zI)await t.loadLanguage(n),await e.loadLanguage(n),wi(Ll[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function KI(t){return MP(t)?al(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${al(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var $g=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{rr(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...Ko.filter(r=>r!=="instance").map(r=>({type:r})),...If.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:KI(e),isLanguageSpecific:yZ(e)}}dispose(){this.disposable.dispose()}};function yZ(t){switch(t.type){case"string":case"argumentOrParameter":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function ib(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((a,l)=>a.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=uf(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=uf(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function ws(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.isLine?an(t.getRemovalHighlightRange()):vt(t.getRemovalHighlightRange()),leadingDelimiter:QI(t.getLeadingDelimiterTarget()),trailingDelimiter:QI(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(ws),boundary:t.getBoundary()?.map(ws),insertionDelimiter:t.insertionDelimiter}}function QI(t){return t!=null?ws(t):void 0}function ZI(t,e,r,n,i){return Ma(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),o=>({domain:o.domain,ranges:o.getTargets(!1).map(a=>({range:a.contentRange,targets:i?xZ(r,a).map(ws):void 0}))}))}function xZ(t,e){try{return t.run(e)}catch(r){if(r.name==="NoContainingScopeError")return[];throw r}}function YI(t,e,r){return Ma(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(ws)}))}var jg=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:YI(e,i,ib(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,a=this.scopeHandlerFactory.maybeCreate(r,o);if(a==null)return[];let l=this.scopeHandlerFactory.maybeCreate(a.iterationScopeType,o);return l==null?[]:ZI(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),ib(e,a,n),i)}};var qg=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Kn(k().configuration,()=>this.onChange());this.disposables.push(k().onDidChangeVisibleTextEditors(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(a){if(st(k().messages,"ScopeRangeWatcher.provide",a.message),o=[],k().runMode==="test")throw a}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{rr(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{rr(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var zg=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?JI(n,r):XI(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return JI(n,r);let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?3:XI(e,o)?0:1}};function XI(t,e){return!IP(e.generateScopes(t,new pe(0,0),"forward"))}function JI(t,e){switch(e.type){case"notebookCell":return 3;default:return Ll[t]?.[e.type]!=null?2:3}}var Gg=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Kn(k().configuration,()=>this.onChange());this.disposable=DP(k().onDidOpenTextDocument(i.run),k().onDidCloseTextDocument(i.run),k().onDidChangeActiveTextEditor(i.run),k().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{rr(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=k().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function eF({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Kd,commandServerApi:i=new $d,talonSpokenForms:o=new Gd,snippets:a=new zd}){Sd(t);let l=new Nd(t),p=new Wd,u=new vd,d=new Od(t,u),m=new Yd(o),g=e!=null?new Vd(p,l,e,i):new jd;g.allocateHats();let x=r?await Hm.create(t,n,r):new qd;t.disposeOnExit(p,x,g,l,d);let b=[],v,F=M=>(v=M,qI(n,i,l,g,a,u,x,p,b,M));return{commandApi:{runCommand(M){return F(M)},runCommandSafe(...M){return F(Ff(M))},repeatPreviousCommand(){if(v==null)throw new Error("No previous command");return F(v)}},scopeProvider:TZ(x,u,m),customSpokenFormGenerator:m,storedTargets:u,hatTokenMap:g,injectIde:Sd,runIntegrationTests:()=>GI(n,x),addCommandRunnerDecorator:M=>{b.push(M)}}}function TZ(t,e,r){let n=new Ca(t),i=new jg(n,new Xa(t,e,n)),o=new qg(t,i),a=new zg(n),l=new $g(r),p=new Gg(t,a,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:a.getScopeSupport,getIterationScopeSupport:a.getIterationScopeSupport,onDidChangeScopeSupport:p.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function tF(t,e){switch(e.type){case"UntypedTarget":return new Mt({editor:t,isReversed:e.isReversed,contentRange:wf(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new Vr({editor:t,isReversed:e.isReversed,contentRange:wf(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var QNe=Symbol("unused");var pp=class{constructor(e){this.position=e}},ZNe={$0:new pp(0),$1:new pp(1),$2:new pp(2)};var rF=require("node:events"),Kg=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new rF.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function qr(){return global._neovimRegistry==null&&(global._neovimRegistry=new Kg),global._neovimRegistry}var nF="pokey.cursorless";async function Qg(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,a,l]=await e.executeLua(r,[]),p;return l===!0?p=[new we(new pe(o-1,a-1),new pe(n-1,i-1))]:p=[new we(new pe(n-1,i-1),new pe(o-1,a-1))],console.debug(`bufferGetSelections(): selections=(${p[0].start.line}, ${p[0].start.character}), (${p[0].end.line}, ${p[0].end.character}) neovim=(${n},${i}),(${o},${a}),reverse=${l}`),p}async function iF(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function oF(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),a=new W(new pe(i-1,0),new pe(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${a.start.line}, ${a.start.character}), (${a.end.line}, ${a.end.character})`),[a]}async function sF(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function Zg(t,e){await e.callFunction("setreg",["*",t])}async function aF(t){return await t.callFunction("getreg",["*"])}async function cF(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function lF(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function pF(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function uF(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var vZ={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0},Yg=class{constructor(){this.commands=vZ}};var up=class{constructor(e){this.client=e}async readText(){return await aF(this.client)}async writeText(e){return await Zg(e,this.client)}};var Xg=dr(ob(),1);var dp=class{constructor(){this.notifier=new Wt;this.mocks={...yf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(bZ(n,r))return(0,Xg.get)(i,e)??(0,Xg.get)(this.mocks,e)}return(0,Xg.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function bZ(t,e){return t.languageId===e.languageId}async function sb(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);n.sort((a,l)=>(fF(a)||dF(a))&&(fF(l)||dF(l))?1:a.range.start.line===l.range.start.line?l.range.start.character-a.range.start.character:l.range.start.line-a.range.start.line),console.debug("neovimEdit() [sorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let a of n)o.push({range:a.range,rangeOffset:i.offsetAt(a.range.start),rangeLength:i.offsetAt(a.range.end)-i.offsetAt(a.range.start),text:a.text});qr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let a of n){let{range:l,text:p,isReplace:u}=a;p===""?await mF(t,l):l.isEmpty&&!u?await hF(t,l.start,p):await wZ(t,l,p)}return await e.updateTextEditor(),!0}async function mF(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(a+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([a,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function hF(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=a+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let p=a+n[0],u=n[n.length-1]+l;await i.setLines([p,...n.slice(1,n.length-1),u],{start:e.line,end:e.line+1,strictIndexing:!0})}async function wZ(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await mF(t,e),await hF(t,e.start,r)}function fF(t){return t.range.isEmpty&&!t.isReplace}function dF(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function gF(t){return qr().onEvent("onDidChangeTextDocument",t),xF()}function yF(t,e,r){return qr().onEvent("onDidOpenTextDocument",t),xF()}function xF(){return{dispose(){}}}var mp=class{constructor(){this.data={...xf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var bC=dr(ob(),1);var hp=class{async showMessage(e,r,n,...i){}};async function SF(t,e){let r=e.activeTextEditor,n=await t.window,i=await Qg(n,t),o=r.document.getText(i[0]);await Zg(o,t)}async function TF(t,e){await cF(t)}var Jg=class{constructor(e,r,n,i,o,a,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=a}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await iF(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await sb(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await SF(this.client,this.neovimIDE)}async clipboardPaste(){await TF(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}};var kw=dr(require("path"),1);var vF;(()=>{"use strict";var t={470:i=>{function o(p){if(typeof p!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(p))}function a(p,u){for(var d,m="",g=0,x=-1,b=0,v=0;v<=p.length;++v){if(v<p.length)d=p.charCodeAt(v);else{if(d===47)break;d=47}if(d===47){if(!(x===v-1||b===1))if(x!==v-1&&b===2){if(m.length<2||g!==2||m.charCodeAt(m.length-1)!==46||m.charCodeAt(m.length-2)!==46){if(m.length>2){var F=m.lastIndexOf("/");if(F!==m.length-1){F===-1?(m="",g=0):g=(m=m.slice(0,F)).length-1-m.lastIndexOf("/"),x=v,b=0;continue}}else if(m.length===2||m.length===1){m="",g=0,x=v,b=0;continue}}u&&(m.length>0?m+="/..":m="..",g=2)}else m.length>0?m+="/"+p.slice(x+1,v):m=p.slice(x+1,v),g=v-x-1;x=v,b=0}else d===46&&b!==-1?++b:b=-1}return m}var l={resolve:function(){for(var p,u="",d=!1,m=arguments.length-1;m>=-1&&!d;m--){var g;m>=0?g=arguments[m]:(p===void 0&&(p=process.cwd()),g=p),o(g),g.length!==0&&(u=g+"/"+u,d=g.charCodeAt(0)===47)}return u=a(u,!d),d?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(p){if(o(p),p.length===0)return".";var u=p.charCodeAt(0)===47,d=p.charCodeAt(p.length-1)===47;return(p=a(p,!u)).length!==0||u||(p="."),p.length>0&&d&&(p+="/"),u?"/"+p:p},isAbsolute:function(p){return o(p),p.length>0&&p.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var p,u=0;u<arguments.length;++u){var d=arguments[u];o(d),d.length>0&&(p===void 0?p=d:p+="/"+d)}return p===void 0?".":l.normalize(p)},relative:function(p,u){if(o(p),o(u),p===u||(p=l.resolve(p))===(u=l.resolve(u)))return"";for(var d=1;d<p.length&&p.charCodeAt(d)===47;++d);for(var m=p.length,g=m-d,x=1;x<u.length&&u.charCodeAt(x)===47;++x);for(var b=u.length-x,v=g<b?g:b,F=-1,M=0;M<=v;++M){if(M===v){if(b>v){if(u.charCodeAt(x+M)===47)return u.slice(x+M+1);if(M===0)return u.slice(x+M)}else g>v&&(p.charCodeAt(d+M)===47?F=M:M===0&&(F=0));break}var U=p.charCodeAt(d+M);if(U!==u.charCodeAt(x+M))break;U===47&&(F=M)}var K="";for(M=d+F+1;M<=m;++M)M!==m&&p.charCodeAt(M)!==47||(K.length===0?K+="..":K+="/..");return K.length>0?K+u.slice(x+F):(x+=F,u.charCodeAt(x)===47&&++x,u.slice(x))},_makeLong:function(p){return p},dirname:function(p){if(o(p),p.length===0)return".";for(var u=p.charCodeAt(0),d=u===47,m=-1,g=!0,x=p.length-1;x>=1;--x)if((u=p.charCodeAt(x))===47){if(!g){m=x;break}}else g=!1;return m===-1?d?"/":".":d&&m===1?"//":p.slice(0,m)},basename:function(p,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');o(p);var d,m=0,g=-1,x=!0;if(u!==void 0&&u.length>0&&u.length<=p.length){if(u.length===p.length&&u===p)return"";var b=u.length-1,v=-1;for(d=p.length-1;d>=0;--d){var F=p.charCodeAt(d);if(F===47){if(!x){m=d+1;break}}else v===-1&&(x=!1,v=d+1),b>=0&&(F===u.charCodeAt(b)?--b==-1&&(g=d):(b=-1,g=v))}return m===g?g=v:g===-1&&(g=p.length),p.slice(m,g)}for(d=p.length-1;d>=0;--d)if(p.charCodeAt(d)===47){if(!x){m=d+1;break}}else g===-1&&(x=!1,g=d+1);return g===-1?"":p.slice(m,g)},extname:function(p){o(p);for(var u=-1,d=0,m=-1,g=!0,x=0,b=p.length-1;b>=0;--b){var v=p.charCodeAt(b);if(v!==47)m===-1&&(g=!1,m=b+1),v===46?u===-1?u=b:x!==1&&(x=1):u!==-1&&(x=-1);else if(!g){d=b+1;break}}return u===-1||m===-1||x===0||x===1&&u===m-1&&u===d+1?"":p.slice(u,m)},format:function(p){if(p===null||typeof p!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof p);return function(u,d){var m=d.dir||d.root,g=d.base||(d.name||"")+(d.ext||"");return m?m===d.root?m+g:m+"/"+g:g}(0,p)},parse:function(p){o(p);var u={root:"",dir:"",base:"",ext:"",name:""};if(p.length===0)return u;var d,m=p.charCodeAt(0),g=m===47;g?(u.root="/",d=1):d=0;for(var x=-1,b=0,v=-1,F=!0,M=p.length-1,U=0;M>=d;--M)if((m=p.charCodeAt(M))!==47)v===-1&&(F=!1,v=M+1),m===46?x===-1?x=M:U!==1&&(U=1):x!==-1&&(U=-1);else if(!F){b=M+1;break}return x===-1||v===-1||U===0||U===1&&x===v-1&&x===b+1?v!==-1&&(u.base=u.name=b===0&&g?p.slice(1,v):p.slice(b,v)):(b===0&&g?(u.name=p.slice(1,x),u.base=p.slice(1,v)):(u.name=p.slice(b,x),u.base=p.slice(b,v)),u.ext=p.slice(x,v)),b>0?u.dir=p.slice(0,b-1):g&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,r),a.exports}r.d=(i,o)=>{for(var a in o)r.o(o,a)&&!r.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:o[a]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>N}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,l=/^\/\//;function p(O,I){if(!O.scheme&&I)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${O.authority}", path: "${O.path}", query: "${O.query}", fragment: "${O.fragment}"}`);if(O.scheme&&!o.test(O.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(O.path){if(O.authority){if(!a.test(O.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(O.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let u="",d="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(I){return I instanceof g||!!I&&typeof I.authority=="string"&&typeof I.fragment=="string"&&typeof I.path=="string"&&typeof I.query=="string"&&typeof I.scheme=="string"&&typeof I.fsPath=="string"&&typeof I.with=="function"&&typeof I.toString=="function"}scheme;authority;path;query;fragment;constructor(I,$,q,Q,Z,te=!1){typeof I=="object"?(this.scheme=I.scheme||u,this.authority=I.authority||u,this.path=I.path||u,this.query=I.query||u,this.fragment=I.fragment||u):(this.scheme=function(he,re){return he||re?he:"file"}(I,te),this.authority=$||u,this.path=function(he,re){switch(he){case"https":case"http":case"file":re?re[0]!==d&&(re=d+re):re=d}return re}(this.scheme,q||u),this.query=Q||u,this.fragment=Z||u,p(this,te))}get fsPath(){return U(this,!1)}with(I){if(!I)return this;let{scheme:$,authority:q,path:Q,query:Z,fragment:te}=I;return $===void 0?$=this.scheme:$===null&&($=u),q===void 0?q=this.authority:q===null&&(q=u),Q===void 0?Q=this.path:Q===null&&(Q=u),Z===void 0?Z=this.query:Z===null&&(Z=u),te===void 0?te=this.fragment:te===null&&(te=u),$===this.scheme&&q===this.authority&&Q===this.path&&Z===this.query&&te===this.fragment?this:new b($,q,Q,Z,te)}static parse(I,$=!1){let q=m.exec(I);return q?new b(q[2]||u,ae(q[4]||u),ae(q[5]||u),ae(q[7]||u),ae(q[9]||u),$):new b(u,u,u,u,u)}static file(I){let $=u;if(i&&(I=I.replace(/\\/g,d)),I[0]===d&&I[1]===d){let q=I.indexOf(d,2);q===-1?($=I.substring(2),I=d):($=I.substring(2,q),I=I.substring(q)||d)}return new b("file",$,I,u,u)}static from(I){let $=new b(I.scheme,I.authority,I.path,I.query,I.fragment);return p($,!0),$}toString(I=!1){return K(this,I)}toJSON(){return this}static revive(I){if(I){if(I instanceof g)return I;{let $=new b(I);return $._formatted=I.external,$._fsPath=I._sep===x?I.fsPath:null,$}}return I}}let x=i?1:void 0;class b extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=U(this,!1)),this._fsPath}toString(I=!1){return I?K(this,!0):(this._formatted||(this._formatted=K(this,!1)),this._formatted)}toJSON(){let I={$mid:1};return this._fsPath&&(I.fsPath=this._fsPath,I._sep=x),this._formatted&&(I.external=this._formatted),this.path&&(I.path=this.path),this.scheme&&(I.scheme=this.scheme),this.authority&&(I.authority=this.authority),this.query&&(I.query=this.query),this.fragment&&(I.fragment=this.fragment),I}}let v={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function F(O,I,$){let q,Q=-1;for(let Z=0;Z<O.length;Z++){let te=O.charCodeAt(Z);if(te>=97&&te<=122||te>=65&&te<=90||te>=48&&te<=57||te===45||te===46||te===95||te===126||I&&te===47||$&&te===91||$&&te===93||$&&te===58)Q!==-1&&(q+=encodeURIComponent(O.substring(Q,Z)),Q=-1),q!==void 0&&(q+=O.charAt(Z));else{q===void 0&&(q=O.substr(0,Z));let he=v[te];he!==void 0?(Q!==-1&&(q+=encodeURIComponent(O.substring(Q,Z)),Q=-1),q+=he):Q===-1&&(Q=Z)}}return Q!==-1&&(q+=encodeURIComponent(O.substring(Q))),q!==void 0?q:O}function M(O){let I;for(let $=0;$<O.length;$++){let q=O.charCodeAt($);q===35||q===63?(I===void 0&&(I=O.substr(0,$)),I+=v[q]):I!==void 0&&(I+=O[$])}return I!==void 0?I:O}function U(O,I){let $;return $=O.authority&&O.path.length>1&&O.scheme==="file"?`//${O.authority}${O.path}`:O.path.charCodeAt(0)===47&&(O.path.charCodeAt(1)>=65&&O.path.charCodeAt(1)<=90||O.path.charCodeAt(1)>=97&&O.path.charCodeAt(1)<=122)&&O.path.charCodeAt(2)===58?I?O.path.substr(1):O.path[1].toLowerCase()+O.path.substr(2):O.path,i&&($=$.replace(/\//g,"\\")),$}function K(O,I){let $=I?M:F,q="",{scheme:Q,authority:Z,path:te,query:he,fragment:re}=O;if(Q&&(q+=Q,q+=":"),(Z||Q==="file")&&(q+=d,q+=d),Z){let Re=Z.indexOf("@");if(Re!==-1){let ar=Z.substr(0,Re);Z=Z.substr(Re+1),Re=ar.lastIndexOf(":"),Re===-1?q+=$(ar,!1,!1):(q+=$(ar.substr(0,Re),!1,!1),q+=":",q+=$(ar.substr(Re+1),!1,!0)),q+="@"}Z=Z.toLowerCase(),Re=Z.lastIndexOf(":"),Re===-1?q+=$(Z,!1,!0):(q+=$(Z.substr(0,Re),!1,!0),q+=Z.substr(Re))}if(te){if(te.length>=3&&te.charCodeAt(0)===47&&te.charCodeAt(2)===58){let Re=te.charCodeAt(1);Re>=65&&Re<=90&&(te=`/${String.fromCharCode(Re+32)}:${te.substr(3)}`)}else if(te.length>=2&&te.charCodeAt(1)===58){let Re=te.charCodeAt(0);Re>=65&&Re<=90&&(te=`${String.fromCharCode(Re+32)}:${te.substr(2)}`)}q+=$(te,!0,!1)}return he&&(q+="?",q+=$(he,!1,!1)),re&&(q+="#",q+=I?re:F(re,!1,!1)),q}function ne(O){try{return decodeURIComponent(O)}catch{return O.length>3?O.substr(0,3)+ne(O.substr(3)):O}}let ie=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ae(O){return O.match(ie)?O.replace(ie,I=>ne(I)):O}var it=r(470);let Ft=it.posix||it,ct="/";var N;(function(O){O.joinPath=function(I,...$){return I.with({path:Ft.join(I.path,...$)})},O.resolvePath=function(I,...$){let q=I.path,Q=!1;q[0]!==ct&&(q=ct+q,Q=!0);let Z=Ft.resolve(q,...$);return Q&&Z[0]===ct&&!I.authority&&(Z=Z.substring(1)),I.with({path:Z})},O.dirname=function(I){if(I.path.length===0||I.path===ct)return I;let $=Ft.dirname(I.path);return $.length===1&&$.charCodeAt(0)===46&&($=""),I.with({path:$})},O.basename=function(I){return Ft.basename(I.path)},O.extname=function(I){return Ft.extname(I.path)}})(N||(N={}))})(),vF=n})();var{URI:bF,Utils:QLe}=vF;var $F=dr(OF(),1);var yp=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var DZ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},xp=t=>t.replace(/[[\]\\-]/g,"\\$&"),IZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),NF=t=>t.join(""),LF=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,l=!1,p=!1,u=!1,d=r,m="";e:for(;o<t.length;){let v=t.charAt(o);if((v==="!"||v==="^")&&o===r+1){u=!0,o++;continue}if(v==="]"&&a&&!p){d=o+1;break}if(a=!0,v==="\\"&&!p){p=!0,o++;continue}if(v==="["&&!p){for(let[F,[M,U,K]]of Object.entries(DZ))if(t.startsWith(F,o)){if(m)return["$.",!1,t.length-r,!0];o+=F.length,K?i.push(M):n.push(M),l=l||U;continue e}}if(p=!1,m){v>m?n.push(xp(m)+"-"+xp(v)):v===m&&n.push(xp(v)),m="",o++;continue}if(t.startsWith("-]",o+1)){n.push(xp(v+"-")),o+=2;continue}if(t.startsWith("-",o+1)){m=v,o+=2;continue}n.push(xp(v)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let v=n[0].length===2?n[0].slice(-1):n[0];return[IZ(v),!1,d-r,!1]}let g="["+(u?"^":"")+NF(n)+"]",x="["+(u?"":"^")+NF(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,l,d-r,!0]};var On=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var FZ=new Set(["!","?","+","*","@"]),UF=t=>FZ.has(t),CZ="(?!(?:^|/)\\.\\.?(?:$|/))",ey="(?!\\.)",OZ=new Set(["[","."]),NZ=new Set(["..","."]),LZ=new Set("().*{}+?[]^$\\!"),UZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),lb="[^/]",HF=lb+"*?",VF=lb+"+?",oc=class t{type;#e;#t;#o=!1;#n=[];#s;#T;#l;#u=!1;#a;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#s=r,this.#e=this.#s?this.#s.#e:this,this.#a=this.#e===this?n:this.#e.#a,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#u&&this.#l.push(this),this.#T=this.#s?this.#s.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#u)return this;this.toString(),this.#u=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#s;for(;n;){for(let i=r.#T+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#s}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#s===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#u&&this.#s?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#s?.isStart())return!1;if(this.#T===0)return!0;let e=this.#s;for(let r=0;r<this.#T;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#s?.type==="!")return!0;if(!this.#s?.isEnd())return!1;if(!this.type)return this.#s?.isEnd();let e=this.#s?this.#s.#n.length:0;return this.#T===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,a=!1,l=-1,p=!1;if(r.type===null){let x=n,b="";for(;x<e.length;){let v=e.charAt(x++);if(o||v==="\\"){o=!o,b+=v;continue}if(a){x===l+1?(v==="^"||v==="!")&&(p=!0):v==="]"&&!(x===l+2&&p)&&(a=!1),b+=v;continue}else if(v==="["){a=!0,l=x,p=!1,b+=v;continue}if(!i.noext&&UF(v)&&e.charAt(x)==="("){r.push(b),b="";let F=new t(v,r);x=t.#y(e,F,x,i),r.push(F);continue}b+=v}return r.push(b),x}let u=n+1,d=new t(null,r),m=[],g="";for(;u<e.length;){let x=e.charAt(u++);if(o||x==="\\"){o=!o,g+=x;continue}if(a){u===l+1?(x==="^"||x==="!")&&(p=!0):x==="]"&&!(u===l+2&&p)&&(a=!1),g+=x;continue}else if(x==="["){a=!0,l=u,p=!1,g+=x;continue}if(UF(x)&&e.charAt(u)==="("){d.push(g),g="";let b=new t(x,d);d.push(b),u=t.#y(e,b,u,i);continue}if(x==="|"){d.push(g),g="",m.push(d),d=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),d.push(g),g="",r.push(...m,d),u;g+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#a.nocase&&!this.#a.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#a.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#a}toRegExpSource(e){let r=e??!!this.#a.dot;if(this.#e===this&&this.#g(),!this.type){let p=this.isStart()&&this.isEnd(),u=this.#n.map(x=>{let[b,v,F,M]=typeof x=="string"?t.#f(x,this.#t,p):x.toRegExpSource(e);return this.#t=this.#t||F,this.#o=this.#o||M,b}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&NZ.has(this.#n[0]))){let b=OZ,v=r&&b.has(u.charAt(0))||u.startsWith("\\.")&&b.has(u.charAt(2))||u.startsWith("\\.\\.")&&b.has(u.charAt(4)),F=!r&&!e&&b.has(u.charAt(0));d=v?CZ:F?ey:""}let m="";return this.isEnd()&&this.#e.#u&&this.#s?.type==="!"&&(m="(?:$|\\/)"),[d+u+m,On(u),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#d(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let p=this.toString();return this.#n=[p],this.type=null,this.#t=void 0,[p,On(this.toString()),!1,!1]}let a=!n||e||r||!ey?"":this.#d(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?ey:"")+VF;else{let p=this.type==="!"?"))"+(this.isStart()&&!r&&!e?ey:"")+HF+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;l=i+o+p}return[l,On(o),this.#t=!!this.#t,this.#o]}#d(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#o=this.#o||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",a=!1;for(let l=0;l<e.length;l++){let p=e.charAt(l);if(i){i=!1,o+=(LZ.has(p)?"\\":"")+p;continue}if(p==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(p==="["){let[u,d,m,g]=LF(e,l);if(m){o+=u,a=a||d,l+=m-1,r=r||g;continue}}if(p==="*"){n&&e==="*"?o+=VF:o+=HF,r=!0;continue}if(p==="?"){o+=lb,r=!0;continue}o+=UZ(p)}return[o,On(e),!!r,a]}};var sc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var or=(t,e,r={})=>(yp(e),!r.nocomment&&e.charAt(0)==="#"?!1:new zr(e,r).match(t)),HZ=/^\*+([^+@!?\*\[\(]*)$/,VZ=t=>e=>!e.startsWith(".")&&e.endsWith(t),BZ=t=>e=>e.endsWith(t),WZ=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),$Z=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),jZ=/^\*+\.\*+$/,qZ=t=>!t.startsWith(".")&&t.includes("."),zZ=t=>t!=="."&&t!==".."&&t.includes("."),GZ=/^\.\*+$/,KZ=t=>t!=="."&&t!==".."&&t.startsWith("."),QZ=/^\*+$/,ZZ=t=>t.length!==0&&!t.startsWith("."),YZ=t=>t.length!==0&&t!=="."&&t!=="..",XZ=/^\?+([^+@!?\*\[\(]*)?$/,JZ=([t,e=""])=>{let r=jF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},eY=([t,e=""])=>{let r=qF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},tY=([t,e=""])=>{let r=qF([t]);return e?n=>r(n)&&n.endsWith(e):r},rY=([t,e=""])=>{let r=jF([t]);return e?n=>r(n)&&n.endsWith(e):r},jF=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},qF=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},zF=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",BF={win32:{sep:"\\"},posix:{sep:"/"}},nY=zF==="win32"?BF.win32.sep:BF.posix.sep;or.sep=nY;var Ht=Symbol("globstar **");or.GLOBSTAR=Ht;var iY="[^/]",oY=iY+"*?",sY="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",aY="(?:(?!(?:\\/|^)\\.).)*?",cY=(t,e={})=>r=>or(r,t,e);or.filter=cY;var gn=(t,e={})=>Object.assign({},t,e),lY=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return or;let e=or;return Object.assign((n,i,o={})=>e(n,i,gn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,gn(t,o))}static defaults(i){return e.defaults(gn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,a={}){super(i,o,gn(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,gn(t,o))}},unescape:(n,i={})=>e.unescape(n,gn(t,i)),escape:(n,i={})=>e.escape(n,gn(t,i)),filter:(n,i={})=>e.filter(n,gn(t,i)),defaults:n=>e.defaults(gn(t,n)),makeRe:(n,i={})=>e.makeRe(n,gn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,gn(t,i)),match:(n,i,o={})=>e.match(n,i,gn(t,o)),sep:e.sep,GLOBSTAR:Ht})};or.defaults=lY;var GF=(t,e={})=>(yp(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,$F.default)(t));or.braceExpand=GF;var pY=(t,e={})=>new zr(t,e).makeRe();or.makeRe=pY;var uY=(t,e,r={})=>{let n=new zr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};or.match=uY;var WF=/[?*]|[+@!]\(.*?\)|\[|\]/,fY=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),zr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){yp(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||zF,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let p=o[0]===""&&o[1]===""&&(o[2]==="?"||!WF.test(o[2]))&&!WF.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(p)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(p=>this.parse(p))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let l=n[i+1],p=n[i+2],u=n[i+3];if(l!==".."||!p||p==="."||p===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let l=n[a];a===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let p=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...p),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let v=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),F=!v&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),M=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),U=!M&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),K=F?3:v?0:void 0,ne=U?3:M?0:void 0;if(typeof K=="number"&&typeof ne=="number"){let[ie,ae]=[e[K],r[ne]];ie.toLowerCase()===ae.toLowerCase()&&(r[ne]=ie,ne>K?r=r.slice(ne):K>ne&&(e=e.slice(K)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,l=0,p=e.length,u=r.length;a<p&&l<u;a++,l++){this.debug("matchOne loop");var d=r[l],m=e[a];if(this.debug(r,d,m),d===!1)return!1;if(d===Ht){this.debug("GLOBSTAR",[r,d,m]);var g=a,x=l+1;if(x===u){for(this.debug("** at the end");a<p;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;g<p;){var b=e[g];if(this.debug(`
globstar while`,e,g,r,x,b),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,p,b),!0;if(b==="."||b===".."||!i.dot&&b.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===p))}let v;if(typeof d=="string"?(v=m===d,this.debug("string match",d,m,v)):(v=d.test(m),this.debug("pattern match",d,m,v)),!v)return!1}if(a===p&&l===u)return!0;if(a===p)return n;if(l===u)return a===p-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return GF(this.pattern,this.options)}parse(e){yp(e);let r=this.options;if(e==="**")return Ht;if(e==="")return"";let n,i=null;(n=e.match(QZ))?i=r.dot?YZ:ZZ:(n=e.match(HZ))?i=(r.nocase?r.dot?$Z:WZ:r.dot?BZ:VZ)(n[1]):(n=e.match(XZ))?i=(r.nocase?r.dot?eY:JZ:r.dot?tY:rY)(n):(n=e.match(jZ))?i=r.dot?zZ:qZ:(n=e.match(GZ))&&(i=KZ);let o=oc.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?oY:r.dot?sY:aY,i=new Set(r.nocase?["i"]:[]),o=e.map(p=>{let u=p.map(d=>{if(d instanceof RegExp)for(let m of d.flags.split(""))i.add(m);return typeof d=="string"?fY(d):d===Ht?Ht:d._src});return u.forEach((d,m)=>{let g=u[m+1],x=u[m-1];d!==Ht||x===Ht||(x===void 0?g!==void 0&&g!==Ht?u[m+1]="(?:\\/|"+n+"\\/)?"+g:u[m]=n:g===void 0?u[m-1]=x+"(?:\\/|"+n+")?":g!==Ht&&(u[m-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,u[m+1]=Ht))}),u.filter(d=>d!==Ht).join("/")}).join("|"),[a,l]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let l=i.length-2;!a&&l>=0;l--)a=i[l];for(let l=0;l<o.length;l++){let p=o[l],u=i;if(n.matchBase&&p.length===1&&(u=[a]),this.matchOne(u,p,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return or.defaults(e).Minimatch}};or.AST=oc;or.Minimatch=zr;or.escape=sc;or.unescape=On;var y1=require("node:url");var ac=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,QF=new Set,pb=typeof process=="object"&&process?process:{},ZF=(t,e,r,n)=>{typeof pb.emitWarning=="function"?pb.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},ty=globalThis.AbortController,KF=globalThis.AbortSignal;if(typeof ty>"u"){KF=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},ty=class{constructor(){e()}signal=new KF;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=pb.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,ZF("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var dY=t=>!QF.has(t),xUe=Symbol("type"),wo=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),YF=t=>wo(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?cc:null:null,cc=class extends Array{constructor(e){super(e),this.fill(0)}},ub=class t{heap;length;static#e=!1;static create(e){let r=YF(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Sp=class t{#e;#t;#o;#n;#s;#T;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#u;#a;#c;#i;#g;#y;#d;#f;#w;#h;#_;#E;#S;#v;#b;#m;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#S,sizes:e.#_,keyMap:e.#a,keyList:e.#c,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#p(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#V(r),indexes:r=>e.#k(r),rindexes:r=>e.#P(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#u}get size(){return this.#l}get fetchMethod(){return this.#s}get memoMethod(){return this.#T}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:p,dispose:u,disposeAfter:d,noDisposeOnSet:m,noUpdateTTL:g,maxSize:x=0,maxEntrySize:b=0,sizeCalculation:v,fetchMethod:F,memoMethod:M,noDeleteOnFetchRejection:U,noDeleteOnStaleGet:K,allowStaleOnFetchRejection:ne,allowStaleOnFetchAbort:ie,ignoreFetchAbort:ae}=e;if(r!==0&&!wo(r))throw new TypeError("max option must be a nonnegative integer");let it=r?YF(r):Array;if(!it)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=b||this.#t,this.sizeCalculation=v,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(M!==void 0&&typeof M!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#T=M,F!==void 0&&typeof F!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#s=F,this.#b=!!F,this.#a=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new it(r),this.#y=new it(r),this.#d=0,this.#f=0,this.#w=ub.create(r),this.#l=0,this.#u=0,typeof u=="function"&&(this.#o=u),typeof d=="function"?(this.#n=d,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#m=!!this.#n,this.noDisposeOnSet=!!m,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!U,this.allowStaleOnFetchRejection=!!ne,this.allowStaleOnFetchAbort=!!ie,this.ignoreFetchAbort=!!ae,this.maxEntrySize!==0){if(this.#t!==0&&!wo(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!wo(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#A()}if(this.allowStale=!!p,this.noDeleteOnStaleGet=!!K,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=wo(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!wo(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let Ft="LRU_CACHE_UNBOUNDED";dY(Ft)&&(QF.add(Ft),ZF("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Ft,t))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#M(){let e=new cc(this.#e),r=new cc(this.#e);this.#S=e,this.#E=r,this.#I=(o,a,l=ac.now())=>{if(r[o]=a!==0?l:0,e[o]=a,a!==0&&this.ttlAutopurge){let p=setTimeout(()=>{this.#x(o)&&this.#D(this.#c[o],"expire")},a+1);p.unref&&p.unref()}},this.#R=o=>{r[o]=e[o]!==0?ac.now():0},this.#r=(o,a)=>{if(e[a]){let l=e[a],p=r[a];if(!l||!p)return;o.ttl=l,o.start=p,o.now=n||i();let u=o.now-p;o.remainingTTL=l-u}};let n=0,i=()=>{let o=ac.now();if(this.ttlResolution>0){n=o;let a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref()}return o};this.getRemainingTTL=o=>{let a=this.#a.get(o);if(a===void 0)return 0;let l=e[a],p=r[a];if(!l||!p)return 1/0;let u=(n||i())-p;return l-u},this.#x=o=>{let a=r[o],l=e[o];return!!l&&!!a&&(n||i())-a>l}}#R=()=>{};#r=()=>{};#I=()=>{};#x=()=>!1;#A(){let e=new cc(this.#e);this.#u=0,this.#_=e,this.#F=r=>{this.#u-=e[r],e[r]=0},this.#O=(r,n,i,o)=>{if(this.#p(n))return 0;if(!wo(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!wo(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#u>o;)this.#L(!0)}this.#u+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#u)}}#F=e=>{};#C=(e,r,n)=>{};#O=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#d));)r=this.#y[r]}*#P({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#d;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#N(e){return e!==void 0&&this.#a.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#P())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#P()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#P())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#P()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#P({allowStale:!0}))this.#x(r)&&(this.#D(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#a.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#p(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#S&&this.#E){let a=this.#S[r],l=this.#E[r];if(a&&l){let p=a-(ac.now()-l);o.ttl=p,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#p(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let a={value:o};if(this.#S&&this.#E){a.ttl=this.#S[r];let l=ac.now()-this.#E[r];a.start=Math.floor(Date.now()-l)}this.#_&&(a.size=this.#_[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=ac.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:p}=n,{noUpdateTTL:u=this.noUpdateTTL}=n,d=this.#O(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return p&&(p.set="miss",p.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let m=this.#l===0?void 0:this.#a.get(e);if(m===void 0)m=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#c[m]=e,this.#i[m]=r,this.#a.set(e,m),this.#g[this.#f]=m,this.#y[m]=this.#f,this.#f=m,this.#l++,this.#C(m,d,p),p&&(p.set="add"),u=!1;else{this.#V(m);let g=this.#i[m];if(r!==g){if(this.#b&&this.#p(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!a&&(this.#v&&this.#o?.(x,e,"set"),this.#m&&this.#h?.push([x,e,"set"]))}else a||(this.#v&&this.#o?.(g,e,"set"),this.#m&&this.#h?.push([g,e,"set"]));if(this.#F(m),this.#C(m,d,p),this.#i[m]=r,p){p.set="replace";let x=g&&this.#p(g)?g.__staleWhileFetching:g;x!==void 0&&(p.oldValue=x)}}else p&&(p.set="update")}if(i!==0&&!this.#S&&this.#M(),this.#S&&(u||this.#I(m,i,o),p&&this.#r(p,m)),!a&&this.#m&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#d];if(this.#L(!0),this.#p(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#m&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#d,n=this.#c[r],i=this.#i[r];return this.#b&&this.#p(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(i,n,"evict"),this.#m&&this.#h?.push([i,n,"evict"])),this.#F(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#d=this.#f=0,this.#w.length=0):this.#d=this.#g[r],this.#a.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#a.get(e);if(o!==void 0){let a=this.#i[o];if(this.#p(a)&&a.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#a.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#p(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#p(o))return o;let a=new ty,{signal:l}=n;l?.addEventListener("abort",()=>a.abort(l.reason),{signal:a.signal});let p={signal:a.signal,options:n,context:i},u=(v,F=!1)=>{let{aborted:M}=a.signal,U=n.ignoreFetchAbort&&v!==void 0;if(n.status&&(M&&!F?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,U&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),M&&!U&&!F)return m(a.signal.reason);let K=x;return this.#i[r]===x&&(v===void 0?K.__staleWhileFetching?this.#i[r]=K.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,v,p.options))),v},d=v=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=v),m(v)),m=v=>{let{aborted:F}=a.signal,M=F&&n.allowStaleOnFetchAbort,U=M||n.allowStaleOnFetchRejection,K=U||n.noDeleteOnFetchRejection,ne=x;if(this.#i[r]===x&&(!K||ne.__staleWhileFetching===void 0?this.#D(e,"fetch"):M||(this.#i[r]=ne.__staleWhileFetching)),U)return n.status&&ne.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),ne.__staleWhileFetching;if(ne.__returned===ne)throw v},g=(v,F)=>{let M=this.#s?.(e,o,p);M&&M instanceof Promise&&M.then(U=>v(U===void 0?void 0:U),F),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(v(void 0),n.allowStaleOnFetchAbort&&(v=U=>u(U,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(u,d),b=Object.assign(x,{__abortController:a,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,b,{...p.options,status:void 0}),r=this.#a.get(e)):this.#i[r]=b,b}#p(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof ty}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:p=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:m=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:v,forceRefresh:F=!1,status:M,signal:U}=r;if(!this.#b)return M&&(M.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:M});let K={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:l,size:p,sizeCalculation:u,noUpdateTTL:d,noDeleteOnFetchRejection:m,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:b,ignoreFetchAbort:x,status:M,signal:U},ne=this.#a.get(e);if(ne===void 0){M&&(M.fetch="miss");let ie=this.#U(e,ne,K,v);return ie.__returned=ie}else{let ie=this.#i[ne];if(this.#p(ie)){let N=n&&ie.__staleWhileFetching!==void 0;return M&&(M.fetch="inflight",N&&(M.returnedStale=!0)),N?ie.__staleWhileFetching:ie.__returned=ie}let ae=this.#x(ne);if(!F&&!ae)return M&&(M.fetch="hit"),this.#V(ne),i&&this.#R(ne),M&&this.#r(M,ne),ie;let it=this.#U(e,ne,K,v),ct=it.__staleWhileFetching!==void 0&&n;return M&&(M.fetch=ae?"stale":"refresh",ct&&ae&&(M.returnedStale=!0)),ct?it.__staleWhileFetching:it.__returned=it}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#T;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...a}=r,l=this.get(e,a);if(!o&&l!==void 0)return l;let p=n(e,l,{options:a,context:i});return this.set(e,p,a),p}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:a}=r,l=this.#a.get(e);if(l!==void 0){let p=this.#i[l],u=this.#p(p);return a&&this.#r(a,l),this.#x(l)?(a&&(a.get="stale"),u?(a&&n&&p.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?p.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),a&&n&&(a.returnedStale=!0),n?p:void 0)):(a&&(a.get="hit"),u?p.__staleWhileFetching:(this.#V(l),i&&this.#R(l),p))}else a&&(a.get="miss")}#H(e,r){this.#y[r]=e,this.#g[e]=r}#V(e){e!==this.#f&&(e===this.#d?this.#d=this.#g[e]:this.#H(this.#y[e],this.#g[e]),this.#H(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#a.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#B(r);else{this.#F(i);let o=this.#i[i];if(this.#p(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(o,e,r),this.#m&&this.#h?.push([o,e,r])),this.#a.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#d)this.#d=this.#g[i];else{let a=this.#y[i];this.#g[a]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#m&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#B("delete")}#B(e){for(let r of this.#P({allowStale:!0})){let n=this.#i[r];if(this.#p(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#m&&this.#h?.push([n,i,e])}}if(this.#a.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#S&&this.#E&&(this.#S.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#d=0,this.#f=0,this.#w.length=0,this.#u=0,this.#l=0,this.#m&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var uc=require("node:path"),a1=require("node:url"),oi=require("fs"),wY=dr(require("node:fs"),1),Ro=require("node:fs/promises");var cy=require("node:events"),xb=dr(require("node:stream"),1),r1=require("node:string_decoder"),XF=typeof process=="object"&&process?process:{stdout:null,stderr:null},mY=t=>!!t&&typeof t=="object"&&(t instanceof Eo||t instanceof xb.default||hY(t)||gY(t)),hY=t=>!!t&&typeof t=="object"&&t instanceof cy.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==xb.default.Writable.prototype.pipe,gY=t=>!!t&&typeof t=="object"&&t instanceof cy.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Ci=Symbol("EOF"),Oi=Symbol("maybeEmitEnd"),_o=Symbol("emittedEnd"),ry=Symbol("emittingEnd"),Tp=Symbol("emittedError"),ny=Symbol("closed"),JF=Symbol("read"),iy=Symbol("flush"),e1=Symbol("flushChunk"),Nn=Symbol("encoding"),lc=Symbol("decoder"),At=Symbol("flowing"),vp=Symbol("paused"),pc=Symbol("resume"),Dt=Symbol("buffer"),sr=Symbol("pipes"),It=Symbol("bufferLength"),fb=Symbol("bufferPush"),oy=Symbol("bufferShift"),Qt=Symbol("objectMode"),gt=Symbol("destroyed"),db=Symbol("error"),mb=Symbol("emitData"),t1=Symbol("emitEnd"),hb=Symbol("emitEnd2"),ni=Symbol("async"),gb=Symbol("abort"),sy=Symbol("aborted"),bp=Symbol("signal"),_s=Symbol("dataListeners"),Gr=Symbol("discarded"),wp=t=>Promise.resolve().then(t),yY=t=>t(),xY=t=>t==="end"||t==="finish"||t==="prefinish",SY=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,TY=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),ay=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[pc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},yb=class extends ay{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},vY=t=>!!t.objectMode,bY=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Eo=class extends cy.EventEmitter{[At]=!1;[vp]=!1;[sr]=[];[Dt]=[];[Qt];[Nn];[ni];[lc];[Ci]=!1;[_o]=!1;[ry]=!1;[ny]=!1;[Tp]=null;[It]=0;[gt]=!1;[bp];[sy]=!1;[_s]=0;[Gr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");vY(r)?(this[Qt]=!0,this[Nn]=null):bY(r)?(this[Nn]=r.encoding,this[Qt]=!1):(this[Qt]=!1,this[Nn]=null),this[ni]=!!r.async,this[lc]=this[Nn]?new r1.StringDecoder(this[Nn]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Dt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[sr]});let{signal:n}=r;n&&(this[bp]=n,n.aborted?this[gb]():n.addEventListener("abort",()=>this[gb]()))}get bufferLength(){return this[It]}get encoding(){return this[Nn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Qt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ni]}set async(e){this[ni]=this[ni]||!!e}[gb](){this[sy]=!0,this.emit("abort",this[bp]?.reason),this.destroy(this[bp]?.reason)}get aborted(){return this[sy]}set aborted(e){}write(e,r,n){if(this[sy])return!1;if(this[Ci])throw new Error("write after end");if(this[gt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ni]?wp:yY;if(!this[Qt]&&!Buffer.isBuffer(e)){if(TY(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(SY(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Qt]?(this[At]&&this[It]!==0&&this[iy](!0),this[At]?this.emit("data",e):this[fb](e),this[It]!==0&&this.emit("readable"),n&&i(n),this[At]):e.length?(typeof e=="string"&&!(r===this[Nn]&&!this[lc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Nn]&&(e=this[lc].write(e)),this[At]&&this[It]!==0&&this[iy](!0),this[At]?this.emit("data",e):this[fb](e),this[It]!==0&&this.emit("readable"),n&&i(n),this[At]):(this[It]!==0&&this.emit("readable"),n&&i(n),this[At])}read(e){if(this[gt])return null;if(this[Gr]=!1,this[It]===0||e===0||e&&e>this[It])return this[Oi](),null;this[Qt]&&(e=null),this[Dt].length>1&&!this[Qt]&&(this[Dt]=[this[Nn]?this[Dt].join(""):Buffer.concat(this[Dt],this[It])]);let r=this[JF](e||null,this[Dt][0]);return this[Oi](),r}[JF](e,r){if(this[Qt])this[oy]();else{let n=r;e===n.length||e===null?this[oy]():typeof n=="string"?(this[Dt][0]=n.slice(e),r=n.slice(0,e),this[It]-=e):(this[Dt][0]=n.subarray(e),r=n.subarray(0,e),this[It]-=e)}return this.emit("data",r),!this[Dt].length&&!this[Ci]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Ci]=!0,this.writable=!1,(this[At]||!this[vp])&&this[Oi](),this}[pc](){this[gt]||(!this[_s]&&!this[sr].length&&(this[Gr]=!0),this[vp]=!1,this[At]=!0,this.emit("resume"),this[Dt].length?this[iy]():this[Ci]?this[Oi]():this.emit("drain"))}resume(){return this[pc]()}pause(){this[At]=!1,this[vp]=!0,this[Gr]=!1}get destroyed(){return this[gt]}get flowing(){return this[At]}get paused(){return this[vp]}[fb](e){this[Qt]?this[It]+=1:this[It]+=e.length,this[Dt].push(e)}[oy](){return this[Qt]?this[It]-=1:this[It]-=this[Dt][0].length,this[Dt].shift()}[iy](e=!1){do;while(this[e1](this[oy]())&&this[Dt].length);!e&&!this[Dt].length&&!this[Ci]&&this.emit("drain")}[e1](e){return this.emit("data",e),this[At]}pipe(e,r){if(this[gt])return e;this[Gr]=!1;let n=this[_o];return r=r||{},e===XF.stdout||e===XF.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[sr].push(r.proxyErrors?new yb(this,e,r):new ay(this,e,r)),this[ni]?wp(()=>this[pc]()):this[pc]()),e}unpipe(e){let r=this[sr].find(n=>n.dest===e);r&&(this[sr].length===1?(this[At]&&this[_s]===0&&(this[At]=!1),this[sr]=[]):this[sr].splice(this[sr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Gr]=!1,this[_s]++,!this[sr].length&&!this[At]&&this[pc]();else if(e==="readable"&&this[It]!==0)super.emit("readable");else if(xY(e)&&this[_o])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[Tp]){let i=r;this[ni]?wp(()=>i.call(this,this[Tp])):i.call(this,this[Tp])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[_s]=this.listeners("data").length,this[_s]===0&&!this[Gr]&&!this[sr].length&&(this[At]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[_s]=0,!this[Gr]&&!this[sr].length&&(this[At]=!1)),r}get emittedEnd(){return this[_o]}[Oi](){!this[ry]&&!this[_o]&&!this[gt]&&this[Dt].length===0&&this[Ci]&&(this[ry]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[ny]&&this.emit("close"),this[ry]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==gt&&this[gt])return!1;if(e==="data")return!this[Qt]&&!n?!1:this[ni]?(wp(()=>this[mb](n)),!0):this[mb](n);if(e==="end")return this[t1]();if(e==="close"){if(this[ny]=!0,!this[_o]&&!this[gt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[Tp]=n,super.emit(db,n);let o=!this[bp]||this.listeners("error").length?super.emit("error",n):!1;return this[Oi](),o}else if(e==="resume"){let o=super.emit("resume");return this[Oi](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Oi](),i}[mb](e){for(let n of this[sr])n.dest.write(e)===!1&&this.pause();let r=this[Gr]?!1:super.emit("data",e);return this[Oi](),r}[t1](){return this[_o]?!1:(this[_o]=!0,this.readable=!1,this[ni]?(wp(()=>this[hb]()),!0):this[hb]())}[hb](){if(this[lc]){let r=this[lc].end();if(r){for(let n of this[sr])n.dest.write(r);this[Gr]||super.emit("data",r)}}for(let r of this[sr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Qt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Qt]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[Qt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Nn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(gt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Gr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Ci])return r();let o,a,l=m=>{this.off("data",p),this.off("end",u),this.off(gt,d),r(),a(m)},p=m=>{this.off("error",l),this.off("end",u),this.off(gt,d),this.pause(),o({value:m,done:!!this[Ci]})},u=()=>{this.off("error",l),this.off("data",p),this.off(gt,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((m,g)=>{a=g,o=m,this.once(gt,d),this.once("error",l),this.once("end",u),this.once("data",p)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Gr]=!1;let e=!1,r=()=>(this.pause(),this.off(db,r),this.off(gt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(db,r),this.once(gt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[gt])return e?this.emit("error",e):this.emit(gt),this;this[gt]=!0,this[Gr]=!0,this[Dt].length=0,this[It]=0;let r=this;return typeof r.close=="function"&&!this[ny]&&r.close(),e?this.emit("error",e):this.emit(gt),this}static get isStream(){return mY}};var _Y=oi.realpathSync.native,Ep={lstatSync:oi.lstatSync,readdir:oi.readdir,readdirSync:oi.readdirSync,readlinkSync:oi.readlinkSync,realpathSync:_Y,promises:{lstat:Ro.lstat,readdir:Ro.readdir,readlink:Ro.readlink,realpath:Ro.realpath}},c1=t=>!t||t===Ep||t===wY?Ep:{...Ep,...t,promises:{...Ep.promises,...t.promises||{}}},l1=/^\\\\\?\\([a-z]:)\\?$/i,EY=t=>t.replace(/\//g,"\\").replace(l1,"$1\\"),RY=/[\\\/]/,xn=0,p1=1,u1=2,ii=4,f1=6,d1=8,Es=10,m1=12,yn=15,_p=~yn,Sb=16,n1=32,Rp=64,Ln=128,ly=256,uy=512,i1=Rp|Ln|uy,kY=1023,Tb=t=>t.isFile()?d1:t.isDirectory()?ii:t.isSymbolicLink()?Es:t.isCharacterDevice()?u1:t.isBlockDevice()?f1:t.isSocket()?m1:t.isFIFO()?p1:xn,o1=new Map,kp=t=>{let e=o1.get(t);if(e)return e;let r=t.normalize("NFKD");return o1.set(t,r),r},s1=new Map,py=t=>{let e=s1.get(t);if(e)return e;let r=kp(t.toLowerCase());return s1.set(t,r),r},fy=class extends Sp{constructor(){super({max:256})}},vb=class extends Sp{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},h1=Symbol("PathScurry setAsCwd"),Zt=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#s;get uid(){return this.#s}#T;get gid(){return this.#T}#l;get rdev(){return this.#l}#u;get blksize(){return this.#u}#a;get ino(){return this.#a}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#S;#v;#b;#m;#M;#R;#r;#I;#x;#A;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=xn,n,i,o,a,l){this.name=e,this.#S=o?py(e):kp(e),this.#r=r&kY,this.nocase=o,this.roots=i,this.root=n||this,this.#I=a,this.#b=l.fullpath,this.#M=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=c1(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#I}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#I.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#I.set(this,r),this.#r&=~Sb,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?py(e):kp(e);for(let p of n)if(p.#S===i)return p;let o=this.parent?this.sep:"",a=this.#b?this.#b+o+e:void 0,l=this.newChild(e,xn,{...r,parent:this,fullpath:a});return this.canReaddir()||(l.#r|=Ln),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#M!==void 0)return this.#M;let e=this.name,r=this.parent;if(!r)return this.#M=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#m!==void 0)return this.#m;if(this.sep==="/")return this.#m=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#m=`//?/${i}`:this.#m=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#m=n}isUnknown(){return(this.#r&yn)===xn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&yn)===d1}isDirectory(){return(this.#r&yn)===ii}isCharacterDevice(){return(this.#r&yn)===u1}isBlockDevice(){return(this.#r&yn)===f1}isFIFO(){return(this.#r&yn)===p1}isSocket(){return(this.#r&yn)===m1}isSymbolicLink(){return(this.#r&Es)===Es}lstatCached(){return this.#r&n1?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#A}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#r&yn;return!(e!==xn&&e!==Es||this.#r&ly||this.#r&Ln)}calledReaddir(){return!!(this.#r&Sb)}isENOENT(){return!!(this.#r&Ln)}isNamed(e){return this.nocase?this.#S===py(e):this.#S===kp(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}#C(e){this.#r|=Sb;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#O()}}#O(){this.#r&Ln||(this.#r=(this.#r|Ln)&_p,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#O()}#P(){this.#r|=uy,this.#N()}#N(){if(this.#r&Rp)return;let e=this.#r;(e&yn)===ii&&(e&=_p),this.#r=e|Rp,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#N():e==="ENOENT"?this.#O():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#N():e==="ENOENT"&&this.#O()}#p(e=""){let r=this.#r;r|=ly,e==="ENOENT"&&(r|=Ln),(e==="EINVAL"||e==="UNKNOWN")&&(r&=_p),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#N()}#H(e,r){return this.#D(e,r)||this.#V(e,r)}#V(e,r){let n=Tb(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&yn;return o!==ii&&o!==Es&&o!==xn&&(i.#r|=Rp),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?py(e.name):kp(e.name))===i.#S)return this.#B(e,i,n,r)}}#B(e,r,n,i){let o=r.name;return r.#r=r.#r&_p|Tb(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if(!(this.#r&Ln))try{return this.#q(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if(!(this.#r&Ln))try{return this.#q(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#q(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:a,blocks:l,ctime:p,ctimeMs:u,dev:d,gid:m,ino:g,mode:x,mtime:b,mtimeMs:v,nlink:F,rdev:M,size:U,uid:K}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#u=a,this.#i=l,this.#_=p,this.#d=u,this.#t=d,this.#T=m,this.#a=g,this.#o=x,this.#h=b,this.#y=v,this.#n=F,this.#l=M,this.#c=U,this.#s=K;let ne=Tb(e);this.#r=this.#r&_p|ne|n1,ne!==xn&&ne!==ii&&ne!==Es&&(this.#r|=Rp)}#$=[];#j=!1;#z(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,a)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of a)this.#H(l,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&i1)return!1;let e=yn&this.#r;return e===xn||e===ii||e===Es}shouldWalk(e,r){return(this.#r&ii)===ii&&!(this.#r&i1)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#A)return this.#A;if(!((uy|ly|Ln)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}realpathSync(){if(this.#A)return this.#A;if(!((uy|ly|Ln)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}[h1](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#M=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#M=void 0,i.#R=void 0,i=i.parent}},dy=class t extends Zt{sep="\\";splitSep=RY;constructor(e,r=xn,n,i,o,a,l){super(e,r,n,i,o,a,l)}newChild(e,r=xn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return uc.win32.parse(e).root}getRoot(e){if(e=EY(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new fc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(l1,"$1\\"),e===r}},my=class t extends Zt{splitSep="/";sep="/";constructor(e,r=xn,n,i,o,a,l){super(e,r,n,i,o,a,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=xn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},hy=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:a=Ep}={}){this.#n=c1(a),(e instanceof URL||e.startsWith("file://"))&&(e=(0,a1.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new fy,this.#t=new fy,this.#o=new vb(o);let p=l.substring(this.rootPath.length).split(n);if(p.length===1&&!p[0]&&p.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let u=this.root,d=p.length-1,m=r.sep,g=this.rootPath,x=!1;for(let b of p){let v=d--;u=u.child(b,{relative:new Array(v).fill("..").join(m),relativePosix:new Array(v).fill("..").join("/"),fullpath:g+=(x?"":m)+b}),x=!0}this.cwd=u}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set,u=(m,g)=>{p.add(m),m.readdirCB((x,b)=>{if(x)return g(x);let v=b.length;if(!v)return g();let F=()=>{--v===0&&g()};for(let M of b)(!o||o(M))&&l.push(n?M:M.fullpath()),i&&M.isSymbolicLink()?M.realpath().then(U=>U?.isUnknown()?U.lstat():U).then(U=>U?.shouldWalk(p,a)?u(U,F):F()):M.shouldWalk(p,a)?u(M,F):F()},!0)},d=e;return new Promise((m,g)=>{u(d,x=>{if(x)return g(x);m(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set([e]);for(let u of p){let d=u.readdirSync();for(let m of d){(!o||o(m))&&l.push(n?m:m.fullpath());let g=m;if(m.isSymbolicLink()){if(!(i&&(g=m.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(p,a)&&p.add(g)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let p of l){let u=p.readdirSync();for(let d of u){(!o||o(d))&&(yield n?d:d.fullpath());let m=d;if(d.isSymbolicLink()){if(!(i&&(m=d.realpathSync())))continue;m.isUnknown()&&m.lstatSync()}m.shouldWalk(l,a)&&l.add(m)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=new Eo({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let p=new Set,u=[e],d=0,m=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&l.end();return}d++,p.add(x);let b=(F,M,U=!1)=>{if(F)return l.emit("error",F);if(i&&!U){let K=[];for(let ne of M)ne.isSymbolicLink()&&K.push(ne.realpath().then(ie=>ie?.isUnknown()?ie.lstat():ie));if(K.length){Promise.all(K).then(()=>b(null,M,!0));return}}for(let K of M)K&&(!o||o(K))&&(l.write(n?K:K.fullpath())||(g=!0));d--;for(let K of M){let ne=K.realpathCached()||K;ne.shouldWalk(p,a)&&u.push(ne)}g&&!l.flowing?l.once("drain",m):v||m()},v=!0;x.readdirCB(b,!0),v=!1}};return m(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=new Eo({objectMode:!0}),p=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let u=[e],d=0,m=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&l.end();return}d++,p.add(x);let b=x.readdirSync();for(let v of b)(!o||o(v))&&(l.write(n?v:v.fullpath())||(g=!0));d--;for(let v of b){let F=v;if(v.isSymbolicLink()){if(!(i&&(F=v.realpathSync())))continue;F.isUnknown()&&F.lstatSync()}F.shouldWalk(p,a)&&u.push(F)}}g&&!l.flowing&&l.once("drain",m)};return m(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[h1](r)}},fc=class extends hy{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,uc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return uc.win32.parse(e).root.toUpperCase()}newRoot(e){return new dy(this.rootPath,ii,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},dc=class extends hy{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,uc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new my(this.rootPath,ii,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},Pp=class extends dc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},wUe=process.platform==="win32"?dy:my,g1=process.platform==="win32"?fc:process.platform==="darwin"?Pp:dc;var PY=t=>t.length>=1,MY=t=>t.length>=1,mc=class t{#e;#t;#o;length;#n;#s;#T;#l;#u;#a;#c=!0;constructor(e,r,n,i){if(!PY(e))throw new TypeError("empty pattern list");if(!MY(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,a,l,p,...u]=this.#e,[d,m,g,x,...b]=this.#t;u[0]===""&&(u.shift(),b.shift());let v=[o,a,l,p,""].join("/"),F=[d,m,g,x,""].join("/");this.#e=[v,...u],this.#t=[F,...b],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...a]=this.#e,[l,...p]=this.#t;a[0]===""&&(a.shift(),p.shift());let u=o+"/",d=l+"/";this.#e=[u,...a],this.#t=[d,...p],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Ht}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#T=this.#T||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#s!==void 0?this.#s:this.hasMore()?(this.#s=new t(this.#e,this.#t,this.#o+1,this.#n),this.#s.#a=this.#a,this.#s.#u=this.#u,this.#s.#l=this.#l,this.#s):this.#s=null}isUNC(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#a!==void 0?this.#a:this.#a=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var AY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",hc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:a=AY}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=a,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:a,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new zr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let a=new mc(i,o,0,this.platform),l=new zr(a.globString(),this.mmopts),p=o[o.length-1]==="**",u=a.isAbsolute();u?this.absolute.push(l):this.relative.push(l),p&&(u?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let a of this.relative)if(a.match(i)||a.match(o))return!0;for(let a of this.absolute)if(a.match(r)||a.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var bb=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},wb=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},_b=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},Mp=class t{hasWalkedCache;matches=new wb;subwalks=new _b;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new bb}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let a=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(a){i=i.resolve(a==="/"&&this.opts.root!==void 0?this.opts.root:a);let m=o.rest();if(m)o=m;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let p,u,d=!1;for(;typeof(p=o.pattern())=="string"&&(u=o.rest());)i=i.resolve(p),o=u,d=!0;if(p=o.pattern(),u=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof p=="string"){let m=p===".."||p===""||p===".";this.matches.add(i.resolve(p),l,m);continue}else if(p===Ht){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let m=u?.pattern(),g=u?.rest();if(!u||(m===""||m===".")&&!g)this.matches.add(i,l,m===""||m===".");else if(m===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,l,!0)}}else p instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let a of n){let l=a.isAbsolute(),p=a.pattern(),u=a.rest();p===Ht?i.testGlobstar(o,a,u,l):p instanceof RegExp?i.testRegExp(o,p,u,l):i.testString(o,p,u,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let a=e.parent||e;this.subwalks.add(a,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var DY=(t,e)=>typeof t=="string"?new hc([t],e):Array.isArray(t)?new hc(t,e):t,gy=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=DY(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#s(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let a=await o.realpath();a&&(a.isUnknown()||this.opts.stat)&&await a.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let a=o.realpathSync();a&&(a?.isUnknown()||this.opts.stat)&&a.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),a=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?a+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new Mp(this.opts),n)}walkCB2(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>a()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirCached();l.calledReaddir()?this.walkCB3(l,p,n,a):l.readdirCB((u,d)=>this.walkCB3(l,d,n,a),!0)}a()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>a()));for(let[l,p]of n.subwalks.entries())o++,this.walkCB2(l,p,n.child(),a);a()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new Mp(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirSync();this.walkCB3Sync(l,p,n,a)}a()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let[l,p]of n.subwalks.entries())o++,this.walkCB2Sync(l,p,n.child(),a);a()}},Ap=class extends gy{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},Dp=class extends gy{results;constructor(e,r,n){super(e,r,n),this.results=new Eo({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var IY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Un=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,y1.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(p=>p.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(p=>p.includes("/")?p:`./**/${p}`)}if(this.pattern=e,this.platform=r.platform||IY,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let p=r.platform==="win32"?fc:r.platform==="darwin"?Pp:r.platform?dc:g1;this.scurry=new p(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(p=>new zr(p,i)),[a,l]=o.reduce((p,u)=>(p[0].push(...u.set),p[1].push(...u.globParts),p),[[],[]]);this.patterns=a.map((p,u)=>{let d=l[u];if(!d)throw new Error("invalid pattern object");return new mc(p,d,0,this.platform)})}async walk(){return[...await new Ap(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Ap(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Dp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Dp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Eb=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new zr(r,e).hasMagic())return!0;return!1};function yy(t,e={}){return new Un(t,e).streamSync()}function S1(t,e={}){return new Un(t,e).stream()}function T1(t,e={}){return new Un(t,e).walkSync()}async function x1(t,e={}){return new Un(t,e).walk()}function xy(t,e={}){return new Un(t,e).iterateSync()}function v1(t,e={}){return new Un(t,e).iterate()}var FY=yy,CY=Object.assign(S1,{sync:yy}),OY=xy,NY=Object.assign(v1,{sync:xy}),LY=Object.assign(T1,{stream:yy,iterate:xy}),Rb=Object.assign(x1,{glob:x1,globSync:T1,sync:LY,globStream:S1,stream:CY,globStreamSync:yy,streamSync:FY,globIterate:v1,iterate:NY,globIterateSync:xy,iterateSync:OY,Glob:Un,hasMagic:Eb,escape:sc,unescape:On});Rb.glob=Rb;function b1(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var I1=Object.defineProperty,VY=Object.getOwnPropertyNames,C=(t,e)=>I1(t,"name",{value:e,configurable:!0}),BY=(t,e)=>function(){return e||(0,t[VY(t)[0]])((e={exports:{}}).exports,e),e.exports},$b=(t,e)=>{for(var r in e)I1(t,r,{get:e[r],enumerable:!0})},WY=BY({"(disabled):util"(){}}),Sy={};$b(Sy,{addChainableMethod:()=>tw,addLengthGuard:()=>Np,addMethod:()=>Xb,addProperty:()=>Yb,checkError:()=>Kr,compareByInspect:()=>wy,eql:()=>oC,expectTypes:()=>V1,flag:()=>_e,getActual:()=>Py,getMessage:()=>zb,getName:()=>Ay,getOperator:()=>ow,getOwnEnumerableProperties:()=>iw,getOwnEnumerablePropertySymbols:()=>nw,getPathInfo:()=>Zb,hasProperty:()=>My,inspect:()=>Le,isNaN:()=>_y,isProxyEnabled:()=>Op,isRegExp:()=>Ey,objDisplay:()=>Rs,overwriteChainableMethod:()=>rw,overwriteMethod:()=>ew,overwriteProperty:()=>Jb,proxify:()=>Sc,test:()=>jb,transferFlags:()=>Hn,type:()=>Ye});var Kr={};$b(Kr,{compatibleConstructor:()=>O1,compatibleInstance:()=>C1,compatibleMessage:()=>N1,getConstructorName:()=>L1,getMessage:()=>U1});function ky(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}C(ky,"isErrorInstance");function F1(t){return Object.prototype.toString.call(t)==="[object RegExp]"}C(F1,"isRegExp");function C1(t,e){return ky(e)&&t===e}C(C1,"compatibleInstance");function O1(t,e){return ky(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}C(O1,"compatibleConstructor");function N1(t,e){let r=typeof t=="string"?t:t.message;return F1(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}C(N1,"compatibleMessage");function L1(t){let e=t;return ky(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}C(L1,"getConstructorName");function U1(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}C(U1,"getMessage");function _e(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}C(_e,"flag");function jb(t,e){var r=_e(t,"negate"),n=e[0];return r?!n:n}C(jb,"test");function Ye(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Ye,"type");var $Y="captureStackTrace"in Error,ze=class H1 extends Error{static{C(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,$Y&&Error.captureStackTrace(this,n||H1);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function V1(t,e){var r=_e(t,"message"),n=_e(t,"ssfi");r=r?r+": ":"",t=_e(t,"object"),e=e.map(function(a){return a.toLowerCase()}),e.sort();var i=e.map(function(a,l){var p=~["a","e","i","o","u"].indexOf(a.charAt(0))?"an":"a",u=e.length>1&&l===e.length-1?"or ":"";return u+p+" "+a}).join(", "),o=Ye(t).toLowerCase();if(!e.some(function(a){return o===a}))throw new ze(r+"object tested must be "+i+", but "+o+" given",void 0,n)}C(V1,"expectTypes");function Py(t,e){return e.length>4?e[4]:t._obj}C(Py,"getActual");var w1={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},jY={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},yc="\u2026";function B1(t,e){let r=w1[jY[e]]||w1[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}C(B1,"colorise");function W1({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:a=1/0,seen:l=[],truncate:p=1/0,stylize:u=String}={},d){let m={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(a),truncate:Number(p),seen:l,inspect:d,stylize:u};return m.colors&&(m.stylize=B1),m}C(W1,"normaliseOptions");function Ni(t,e,r=yc){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}C(Ni,"truncate");function Sn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,a="",l="",p="";for(let u=0;u<i;u+=1){let d=u+1===t.length,m=u+2===t.length;p=`${yc}(${t.length-u})`;let g=t[u];e.truncate=o-a.length-(d?0:n.length);let x=l||r(g,e)+(d?"":n),b=a.length+x.length,v=b+p.length;if(d&&b>o&&a.length+p.length<=o||!d&&!m&&v>o||(l=d?"":r(t[u+1],e)+(m?"":n),!d&&m&&v>o&&b+l.length>o))break;if(a+=x,!d&&!m&&b+l.length>=o){p=`${yc}(${t.length-u-1})`;break}p=""}return`${a}${p}`}C(Sn,"inspectList");function $1(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}C($1,"quoteComplexKey");function xc([t,e],r){return r.truncate-=2,typeof t=="string"?t=$1(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}C(xc,"inspectProperty");function j1(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=Sn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=Sn(r.map(o=>[o,t[o]]),e,xc)),`[ ${n}${i?`, ${i}`:""} ]`}C(j1,"inspectArray");var qY=C(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function si(t,e){let r=qY(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let a=0;a<t.length;a++){let l=`${e.stylize(Ni(t[a],e.truncate),"number")}${a===t.length-1?"":", "}`;if(e.truncate-=l.length,t[a]!==t.length&&e.truncate<=3){i+=`${yc}(${t.length-t[a]+1})`;break}i+=l}let o="";return n.length&&(o=Sn(n.map(a=>[a,t[a]]),e,xc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}C(si,"inspectTypedArray");function q1(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Ni(n[1],e.truncate-i.length-1)}`,"date")}C(q1,"inspectDate");function Mb(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Ni(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}C(Mb,"inspectFunction");function z1([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}C(z1,"inspectMapEntry");function G1(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}C(G1,"mapToEntries");function K1(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${Sn(G1(t),e,z1)} }`)}C(K1,"inspectMap");var zY=Number.isNaN||(t=>t!==t);function Ab(t,e){return zY(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Ni(String(t),e.truncate),"number")}C(Ab,"inspectNumber");function Db(t,e){let r=Ni(t.toString(),e.truncate-1);return r!==yc&&(r+="n"),e.stylize(r,"bigint")}C(Db,"inspectBigInt");function Q1(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Ni(i,n)}/${r}`,"regexp")}C(Q1,"inspectRegExp");function Z1(t){let e=[];return t.forEach(r=>{e.push(r)}),e}C(Z1,"arrayFromSet");function Y1(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${Sn(Z1(t),e)} }`)}C(Y1,"inspectSet");var _1=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),GY={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},KY=16,QY=4;function X1(t){return GY[t]||`\\u${`0000${t.charCodeAt(0).toString(KY)}`.slice(-QY)}`}C(X1,"escape");function Ib(t,e){return _1.test(t)&&(t=t.replace(_1,X1)),e.stylize(`'${Ni(t,e.truncate-2)}'`,"string")}C(Ib,"inspectString");function Fb(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}C(Fb,"inspectSymbol");var J1=C(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(J1=C((n,i)=>{let[o,a]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(a,i)}}`},"getPromiseValue"))}catch{}var ZY=J1;function Fp(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=Sn(r.map(l=>[l,t[l]]),e,xc),o=Sn(n.map(l=>[l,t[l]]),e,xc);e.seen.pop();let a="";return i&&o&&(a=", "),`{ ${i}${a}${o} }`}C(Fp,"inspectObject");var kb=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function eC(t,e){let r="";return kb&&kb in t&&(r=t[kb]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Fp(t,e)}`}C(eC,"inspectClass");function tC(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${Sn(t,e)} ]`)}C(tC,"inspectArguments");var YY=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function rC(t,e){let r=Object.getOwnPropertyNames(t).filter(a=>YY.indexOf(a)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=Ni(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=Sn(r.map(a=>[a,t[a]]),e,xc);return`${n}${i}${o?` { ${o} }`:""}`}C(rC,"inspectObject");function nC([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}C(nC,"inspectAttribute");function Ty(t,e){return Sn(t,e,qb,`
`)}C(Ty,"inspectHTMLCollection");function qb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),a=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=Sn(r.map(d=>[d,t.getAttribute(d)]),e,nC," ")),e.truncate-=l.length;let p=e.truncate,u=Ty(t.children,e);return u&&u.length>p&&(u=`${yc}(${t.children.length})`),`${i}${l}${o}${u}${a}`}C(qb,"inspectHTML");var XY=typeof Symbol=="function"&&typeof Symbol.for=="function",Pb=XY?Symbol.for("chai/inspect"):"@@chai/inspect",gc=!1;try{let t=WY();gc=t.inspect?t.inspect.custom:!1}catch{gc=!1}var E1=new WeakMap,R1={},k1={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:Ab,Number:Ab,bigint:Db,BigInt:Db,string:Ib,String:Ib,function:Mb,Function:Mb,symbol:Fb,Symbol:Fb,Array:j1,Date:q1,Map:K1,Set:Y1,RegExp:Q1,Promise:ZY,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:tC,Int8Array:si,Uint8Array:si,Uint8ClampedArray:si,Int16Array:si,Uint16Array:si,Int32Array:si,Uint32Array:si,Float32Array:si,Float64Array:si,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:rC,HTMLCollection:Ty,NodeList:Ty},JY=C((t,e,r)=>Pb in t&&typeof t[Pb]=="function"?t[Pb](e):gc&&gc in t&&typeof t[gc]=="function"?t[gc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&E1.has(t.constructor)?E1.get(t.constructor)(t,e):R1[r]?R1[r](t,e):"","inspectCustom"),eX=Object.prototype.toString;function vy(t,e={}){let r=W1(e,vy),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=eX.call(t).slice(8,-1)),i in k1)return k1[i](t,r);if(n&&t){let a=JY(t,r,i);if(a)return typeof a=="string"?a:vy(a,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Fp(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?qb(t,r):"constructor"in t?t.constructor!==Object?eC(t,r):Fp(t,r):t===Object(t)?Fp(t,r):r.stylize(String(t),i)}C(vy,"inspect");var kr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Le(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:kr.truncateThreshold?kr.truncateThreshold:1/0};return vy(t,i)}C(Le,"inspect");function Rs(t){var e=Le(t),r=Object.prototype.toString.call(t);if(kr.truncateThreshold&&e.length>=kr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}C(Rs,"objDisplay");function zb(t,e){var r=_e(t,"negate"),n=_e(t,"object"),i=e[3],o=Py(t,e),a=r?e[2]:e[1],l=_e(t,"message");return typeof a=="function"&&(a=a()),a=a||"",a=a.replace(/#\{this\}/g,function(){return Rs(n)}).replace(/#\{act\}/g,function(){return Rs(o)}).replace(/#\{exp\}/g,function(){return Rs(i)}),l?l+": "+a:a}C(zb,"getMessage");function Hn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}C(Hn,"transferFlags");function Cb(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Cb,"type");function Gb(){this._key="chai/deep-eql__"+Math.random()+Date.now()}C(Gb,"FakeMap");Gb.prototype={get:C(function(e){return e[this._key]},"get"),set:C(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var iC=typeof WeakMap=="function"?WeakMap:Gb;function Ob(t,e,r){if(!r||ks(t)||ks(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}C(Ob,"memoizeCompare");function Ip(t,e,r,n){if(!(!r||ks(t)||ks(e))){var i=r.get(t);i?i.set(e,n):(i=new iC,i.set(e,n),r.set(t,i))}}C(Ip,"memoizeSet");var oC=Cp;function Cp(t,e,r){if(r&&r.comparator)return Nb(t,e,r);var n=Kb(t,e);return n!==null?n:Nb(t,e,r)}C(Cp,"deepEqual");function Kb(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:ks(t)||ks(e)?!1:null}C(Kb,"simpleEqual");function Nb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new iC;var n=r&&r.comparator,i=Ob(t,e,r.memoize);if(i!==null)return i;var o=Ob(e,t,r.memoize);if(o!==null)return o;if(n){var a=n(t,e);if(a===!1||a===!0)return Ip(t,e,r.memoize,a),a;var l=Kb(t,e);if(l!==null)return l}var p=Cb(t);if(p!==Cb(e))return Ip(t,e,r.memoize,!1),!1;Ip(t,e,r.memoize,!0);var u=sC(t,e,p,r);return Ip(t,e,r.memoize,u),u}C(Nb,"extensiveDeepEqual");function sC(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Cp(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return Qb(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return ko(t,e,n);case"RegExp":return aC(t,e);case"Generator":return cC(t,e,n);case"DataView":return ko(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return ko(new Uint8Array(t),new Uint8Array(e),n);case"Set":return Lb(t,e,n);case"Map":return Lb(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return pC(t,e,n)}}C(sC,"extensiveDeepEqualByType");function aC(t,e){return t.toString()===e.toString()}C(aC,"regexpEqual");function Lb(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(C(function(a,l){n.push([a,l])},"gatherEntries")),e.forEach(C(function(a,l){i.push([a,l])},"gatherEntries")),ko(n.sort(),i.sort(),r)}C(Lb,"entriesEqual");function ko(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Cp(t[i],e[i],r)===!1)return!1;return!0}C(ko,"iterableEqual");function cC(t,e,r){return ko(by(t),by(e),r)}C(cC,"generatorEqual");function lC(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}C(lC,"hasIteratorFunction");function Ub(t){if(lC(t))try{return by(t[Symbol.iterator]())}catch{return[]}return[]}C(Ub,"getIteratorEntries");function by(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}C(by,"getGeneratorEntries");function Hb(t){var e=[];for(var r in t)e.push(r);return e}C(Hb,"getEnumerableKeys");function Vb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}C(Vb,"getEnumerableSymbols");function Qb(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Cp(t[r[o]],e[r[o]],n)===!1)return!1;return!0}C(Qb,"keysEqual");function pC(t,e,r){var n=Hb(t),i=Hb(e),o=Vb(t),a=Vb(e);if(n=n.concat(o),i=i.concat(a),n.length&&n.length===i.length)return ko(Bb(n).sort(),Bb(i).sort())===!1?!1:Qb(t,e,n,r);var l=Ub(t),p=Ub(e);return l.length&&l.length===p.length?(l.sort(),p.sort(),ko(l,p,r)):n.length===0&&l.length===0&&i.length===0&&p.length===0}C(pC,"objectEqual");function ks(t){return t===null||typeof t!="object"}C(ks,"isPrimitive");function Bb(t){return t.map(C(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}C(Bb,"mapSymbols");function My(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}C(My,"hasProperty");function uC(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),a=null;return o?a={i:parseFloat(o[1])}:a={p:n.replace(/\\([.[\]])/g,"$1")},a})}C(uC,"parsePath");function Wb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let a=e[o];n&&(typeof a.p>"u"?n=n[a.i]:n=n[a.p],o===r-1&&(i=n))}return i}C(Wb,"internalGetPathValue");function Zb(t,e){let r=uC(e),n=r[r.length-1],i={parent:r.length>1?Wb(t,r,r.length-1):t,name:n.p||n.i,value:Wb(t,r)};return i.exists=My(i.parent,i.name),i}C(Zb,"getPathInfo");function _(t,e,r,n){return _e(this,"ssfi",r||_),_e(this,"lockSsfi",n),_e(this,"object",t),_e(this,"message",e),_e(this,"eql",kr.deepEqual||oC),Sc(this)}C(_,"Assertion");Object.defineProperty(_,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),kr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),kr.includeStack=t}});Object.defineProperty(_,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),kr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),kr.showDiff=t}});_.addProperty=function(t,e){Yb(this.prototype,t,e)};_.addMethod=function(t,e){Xb(this.prototype,t,e)};_.addChainableMethod=function(t,e,r){tw(this.prototype,t,e,r)};_.overwriteProperty=function(t,e){Jb(this.prototype,t,e)};_.overwriteMethod=function(t,e){ew(this.prototype,t,e)};_.overwriteChainableMethod=function(t,e,r){rw(this.prototype,t,e,r)};_.prototype.assert=function(t,e,r,n,i,o){var a=jb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),kr.showDiff!==!0&&(o=!1),!a){e=zb(this,arguments);var l=Py(this,arguments),p={actual:l,expected:n,showDiff:o},u=ow(this,arguments);throw u&&(p.operator=u),new ze(e,p,kr.includeStack?this.assert:_e(this,"ssfi"))}};Object.defineProperty(_.prototype,"_obj",{get:function(){return _e(this,"object")},set:function(t){_e(this,"object",t)}});function Op(){return kr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}C(Op,"isProxyEnabled");function Yb(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:C(function n(){!Op()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new _;return Hn(this,o),o},"propertyGetter"),configurable:!0})}C(Yb,"addProperty");var tX=Object.getOwnPropertyDescriptor(function(){},"length");function Np(t,e,r){return tX.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}C(Np,"addLengthGuard");function fC(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}C(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}C(fC,"getProperties");var P1=["__flags","__methods","_obj","assert"];function Sc(t,e){return Op()?new Proxy(t,{get:C(function r(n,i){if(typeof i=="string"&&kr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,a=4;throw fC(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&P1.indexOf(l)===-1){var p=dC(i,l,a);p<a&&(o=l,a=p)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return P1.indexOf(i)===-1&&!_e(n,"lockSsfi")&&_e(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}C(Sc,"proxify");function dC(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var a=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(a===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}C(dC,"stringDistanceCapped");function Xb(t,e,r){var n=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new _;return Hn(this,o),o},"methodWrapper");Np(n,e,!1),t[e]=Sc(n,e)}C(Xb,"addMethod");function Jb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=C(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:C(function o(){!Op()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).call(this);if(_e(this,"lockSsfi",a),l!==void 0)return l;var p=new _;return Hn(this,p),p},"overwritingPropertyGetter"),configurable:!0})}C(Jb,"overwriteProperty");function ew(t,e,r){var n=t[e],i=C(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(_e(this,"lockSsfi",a),l!==void 0)return l;var p=new _;return Hn(this,p),p},"overwritingMethodWrapper");Np(o,e,!1),t[e]=Sc(o,e)}C(ew,"overwriteMethod");var rX=typeof Object.setPrototypeOf=="function",M1=C(function(){},"testFn"),nX=Object.getOwnPropertyNames(M1).filter(function(t){var e=Object.getOwnPropertyDescriptor(M1,t);return typeof e!="object"?!0:!e.configurable}),iX=Function.prototype.call,oX=Function.prototype.apply;function tw(t,e,r,n){typeof n!="function"&&(n=C(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:C(function(){i.chainingBehavior.call(this);var a=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",a);var u=i.method.apply(this,arguments);if(u!==void 0)return u;var d=new _;return Hn(this,d),d},"chainableMethodWrapper");if(Np(a,e,!0),rX){var l=Object.create(this);l.call=iX,l.apply=oX,Object.setPrototypeOf(a,l)}else{var p=Object.getOwnPropertyNames(t);p.forEach(function(u){if(nX.indexOf(u)===-1){var d=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(a,u,d)}})}return Hn(this,a),Sc(a)},"chainableMethodGetter"),configurable:!0})}C(tw,"addChainableMethod");function rw(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=C(function(){var p=n(o).call(this);if(p!==void 0)return p;var u=new _;return Hn(this,u),u},"overwritingChainableMethodGetter");var a=i.method;i.method=C(function(){var p=r(a).apply(this,arguments);if(p!==void 0)return p;var u=new _;return Hn(this,u),u},"overwritingChainableMethodWrapper")}C(rw,"overwriteChainableMethod");function wy(t,e){return Le(t)<Le(e)?-1:1}C(wy,"compareByInspect");function nw(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}C(nw,"getOwnEnumerablePropertySymbols");function iw(t){return Object.keys(t).concat(nw(t))}C(iw,"getOwnEnumerableProperties");function mC(t){return t!==t}C(mC,"_isNaN");var _y=Number.isNaN||mC;function hC(t){var e=Ye(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}C(hC,"isObjectType");function ow(t,e){var r=_e(t,"operator"),n=_e(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var a=hC(i);return/\snot\s/.test(o)?a?"notDeepStrictEqual":"notStrictEqual":a?"deepStrictEqual":"strictEqual"}}C(ow,"getOperator");function Ay(t){return t.name}C(Ay,"getName");function Ey(t){return Object.prototype.toString.call(t)==="[object RegExp]"}C(Ey,"isRegExp");var{flag:A}=Sy;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){_.addProperty(t)});_.addProperty("not",function(){A(this,"negate",!0)});_.addProperty("deep",function(){A(this,"deep",!0)});_.addProperty("nested",function(){A(this,"nested",!0)});_.addProperty("own",function(){A(this,"own",!0)});_.addProperty("ordered",function(){A(this,"ordered",!0)});_.addProperty("any",function(){A(this,"any",!0),A(this,"all",!1)});_.addProperty("all",function(){A(this,"all",!0),A(this,"any",!1)});var A1={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function sw(t,e){e&&A(this,"message",e),t=t.toLowerCase();var r=A(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Ye(r).toLowerCase();A1.function.includes(t)?this.assert(A1[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}C(sw,"an");_.addChainableMethod("an",sw);_.addChainableMethod("a",sw);function gC(t,e){return _y(t)&&_y(e)||t===e}C(gC,"SameValueZero");function Lp(){A(this,"contains",!0)}C(Lp,"includeChainingBehavior");function Up(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=Ye(r).toLowerCase(),i=A(this,"message"),o=A(this,"negate"),a=A(this,"ssfi"),l=A(this,"deep"),p=l?"deep ":"",u=l?A(this,"eql"):gC;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new ze(i+"unable to use .deep.include with WeakSet",void 0,a);d=r.has(t);break;case"map":r.forEach(function(b){d=d||u(b,t)});break;case"set":l?r.forEach(function(b){d=d||u(b,t)}):d=r.has(t);break;case"array":l?d=r.some(function(b){return u(b,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new ze(i+"the given combination of arguments ("+n+" and "+Ye(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Ye(t).toLowerCase(),void 0,a);var m=Object.keys(t),g=null,x=0;if(m.forEach(function(b){var v=new _(r);if(Hn(this,v,!0),A(v,"lockSsfi",!0),!o||m.length===1){v.property(b,t[b]);return}try{v.property(b,t[b])}catch(F){if(!Kr.compatibleConstructor(F,ze))throw F;g===null&&(g=F),x++}},this),o&&m.length>1&&x===m.length)throw g;return}this.assert(d,"expected #{this} to "+p+"include "+Le(t),"expected #{this} to not "+p+"include "+Le(t))}C(Up,"include");_.addChainableMethod("include",Up,Lp);_.addChainableMethod("contain",Up,Lp);_.addChainableMethod("contains",Up,Lp);_.addChainableMethod("includes",Up,Lp);_.addProperty("ok",function(){this.assert(A(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});_.addProperty("true",function(){this.assert(A(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!A(this,"negate"))});_.addProperty("callable",function(){let t=A(this,"object"),e=A(this,"ssfi"),r=A(this,"message"),n=r?`${r}: `:"",i=A(this,"negate"),o=i?`${n}expected ${Le(t)} not to be a callable function`:`${n}expected ${Le(t)} to be a callable function`,a=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Ye(t));if(a&&i||!a&&!i)throw new ze(o,void 0,e)});_.addProperty("false",function(){this.assert(A(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!A(this,"negate"))});_.addProperty("null",function(){this.assert(A(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});_.addProperty("undefined",function(){this.assert(A(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});_.addProperty("NaN",function(){this.assert(_y(A(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function aw(){var t=A(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}C(aw,"assertExist");_.addProperty("exist",aw);_.addProperty("exists",aw);_.addProperty("empty",function(){var t=A(this,"object"),e=A(this,"ssfi"),r=A(this,"message"),n;switch(r=r?r+": ":"",Ye(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new ze(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+Ay(t);throw new ze(i.trim(),void 0,e);default:if(t!==Object(t))throw new ze(r+".empty was passed non-string primitive "+Le(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function cw(){var t=A(this,"object"),e=Ye(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}C(cw,"checkArguments");_.addProperty("arguments",cw);_.addProperty("Arguments",cw);function Dy(t,e){e&&A(this,"message",e);var r=A(this,"object");if(A(this,"deep")){var n=A(this,"lockSsfi");A(this,"lockSsfi",!0),this.eql(t),A(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}C(Dy,"assertEqual");_.addMethod("equal",Dy);_.addMethod("equals",Dy);_.addMethod("eq",Dy);function lw(t,e){e&&A(this,"message",e);var r=A(this,"eql");this.assert(r(t,A(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}C(lw,"assertEql");_.addMethod("eql",lw);_.addMethod("eqls",lw);function Iy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",a=A(this,"ssfi"),l=Ye(r).toLowerCase(),p=Ye(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to above must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to above must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}C(Iy,"assertAbove");_.addMethod("above",Iy);_.addMethod("gt",Iy);_.addMethod("greaterThan",Iy);function Fy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",a=A(this,"ssfi"),l=Ye(r).toLowerCase(),p=Ye(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to least must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to least must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}C(Fy,"assertLeast");_.addMethod("least",Fy);_.addMethod("gte",Fy);_.addMethod("greaterThanOrEqual",Fy);function Cy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",a=A(this,"ssfi"),l=Ye(r).toLowerCase(),p=Ye(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to below must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to below must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}C(Cy,"assertBelow");_.addMethod("below",Cy);_.addMethod("lt",Cy);_.addMethod("lessThan",Cy);function Oy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",a=A(this,"ssfi"),l=Ye(r).toLowerCase(),p=Ye(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to most must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to most must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}C(Oy,"assertMost");_.addMethod("most",Oy);_.addMethod("lte",Oy);_.addMethod("lessThanOrEqual",Oy);_.addMethod("within",function(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"doLength"),o=A(this,"message"),a=o?o+": ":"",l=A(this,"ssfi"),p=Ye(n).toLowerCase(),u=Ye(t).toLowerCase(),d=Ye(e).toLowerCase(),m,g=!0,x=u==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&p!=="map"&&p!=="set"&&new _(n,o,l,!0).to.have.property("length"),!i&&p==="date"&&(u!=="date"||d!=="date"))m=a+"the arguments to within must be dates";else if((u!=="number"||d!=="number")&&(i||p==="number"))m=a+"the arguments to within must be numbers";else if(!i&&p!=="date"&&p!=="number"){var b=p==="string"?"'"+n+"'":n;m=a+"expected "+b+" to be a number or a date"}else g=!1;if(g)throw new ze(m,void 0,l);if(i){var v="length",F;p==="map"||p==="set"?(v="size",F=n.size):F=n.length,this.assert(F>=t&&F<=e,"expected #{this} to have a "+v+" within "+x,"expected #{this} to not have a "+v+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function pw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"ssfi"),i=A(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new ze(i+"The instanceof assertion needs a constructor but "+Ye(t)+" was given.",void 0,n)):l}var a=Ay(t);a==null&&(a="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+a,"expected #{this} to not be an instance of "+a)}C(pw,"assertInstanceOf");_.addMethod("instanceof",pw);_.addMethod("instanceOf",pw);function uw(t,e,r){r&&A(this,"message",r);var n=A(this,"nested"),i=A(this,"own"),o=A(this,"message"),a=A(this,"object"),l=A(this,"ssfi"),p=typeof t;if(o=o?o+": ":"",n){if(p!=="string")throw new ze(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(p!=="string"&&p!=="number"&&p!=="symbol")throw new ze(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new ze(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(a==null)throw new ze(o+"Target cannot be null or undefined.",void 0,l);var u=A(this,"deep"),d=A(this,"negate"),m=n?Zb(a,t):null,g=n?m.value:a[t],x=u?A(this,"eql"):(F,M)=>F===M,b="";u&&(b+="deep "),i&&(b+="own "),n&&(b+="nested "),b+="property ";var v;i?v=Object.prototype.hasOwnProperty.call(a,t):n?v=m.exists:v=My(a,t),(!d||arguments.length===1)&&this.assert(v,"expected #{this} to have "+b+Le(t),"expected #{this} to not have "+b+Le(t)),arguments.length>1&&this.assert(v&&x(e,g),"expected #{this} to have "+b+Le(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+Le(t)+" of #{act}",e,g),A(this,"object",g)}C(uw,"assertProperty");_.addMethod("property",uw);function fw(t,e,r){A(this,"own",!0),uw.apply(this,arguments)}C(fw,"assertOwnProperty");_.addMethod("ownProperty",fw);_.addMethod("haveOwnProperty",fw);function dw(t,e,r){typeof e=="string"&&(r=e,e=null),r&&A(this,"message",r);var n=A(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=A(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Le(t)+" on #{this} to match "+Le(e)+", got "+Le(i),"expected the own property descriptor for "+Le(t)+" on #{this} to not match "+Le(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Le(t),"expected #{this} to not have an own property descriptor for "+Le(t)),A(this,"object",i)}C(dw,"assertOwnPropertyDescriptor");_.addMethod("ownPropertyDescriptor",dw);_.addMethod("haveOwnPropertyDescriptor",dw);function mw(){A(this,"doLength",!0)}C(mw,"assertLengthChain");function hw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=Ye(r).toLowerCase(),i=A(this,"message"),o=A(this,"ssfi"),a="length",l;switch(n){case"map":case"set":a="size",l=r.size;break;default:new _(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+a+" of #{exp} but got #{act}","expected #{this} to not have a "+a+" of #{act}",t,l)}C(hw,"assertLength");_.addChainableMethod("length",hw,mw);_.addChainableMethod("lengthOf",hw,mw);function gw(t,e){e&&A(this,"message",e);var r=A(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}C(gw,"assertMatch");_.addMethod("match",gw);_.addMethod("matches",gw);_.addMethod("string",function(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi");new _(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Le(t),"expected #{this} to not contain "+Le(t))});function yw(t){var e=A(this,"object"),r=Ye(e),n=Ye(t),i=A(this,"ssfi"),o=A(this,"deep"),a,l="",p,u=!0,d=A(this,"message");d=d?d+": ":"";var m=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",p=[],e.forEach(function(U,K){p.push(K)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(p=iw(e),n){case"Array":if(arguments.length>1)throw new ze(m,void 0,i);break;case"Object":if(arguments.length>1)throw new ze(m,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(U){return typeof U=="symbol"?U:String(U)})}if(!t.length)throw new ze(d+"keys required",void 0,i);var g=t.length,x=A(this,"any"),b=A(this,"all"),v=t,F=o?A(this,"eql"):(U,K)=>U===K;if(!x&&!b&&(b=!0),x&&(u=v.some(function(U){return p.some(function(K){return F(U,K)})})),b&&(u=v.every(function(U){return p.some(function(K){return F(U,K)})}),A(this,"contains")||(u=u&&t.length==p.length)),g>1){t=t.map(function(U){return Le(U)});var M=t.pop();b&&(a=t.join(", ")+", and "+M),x&&(a=t.join(", ")+", or "+M)}else a=Le(t[0]);a=(g>1?"keys ":"key ")+a,a=(A(this,"contains")?"contain ":"have ")+a,this.assert(u,"expected #{this} to "+l+a,"expected #{this} to not "+l+a,v.slice(0).sort(wy),p.sort(wy),!0)}C(yw,"assertKeys");_.addMethod("keys",yw);_.addMethod("key",yw);function Ny(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"ssfi"),o=A(this,"message"),a=A(this,"negate")||!1;new _(n,o,i,!0).is.a("function"),(Ey(t)||typeof t=="string")&&(e=t,t=null);let l,p=!1;try{n()}catch(U){p=!0,l=U}var u=t===void 0&&e===void 0,d=!!(t&&e),m=!1,g=!1;if(u||!u&&!a){var x="an error";t instanceof Error?x="#{exp}":t&&(x=Kr.getConstructorName(t));let U=l;if(l instanceof Error)U=l.toString();else if(typeof l=="string")U=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{U=Kr.getConstructorName(l)}catch{}this.assert(p,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),U)}if(t&&l){if(t instanceof Error){var b=Kr.compatibleInstance(l,t);b===a&&(d&&a?m=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!a?" but #{act} was thrown":""),t.toString(),l.toString()))}var v=Kr.compatibleConstructor(l,t);v===a&&(d&&a?m=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Kr.getConstructorName(t),l instanceof Error?l.toString():l&&Kr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var F="including";Ey(e)&&(F="matching");var M=Kr.compatibleMessage(l,e);M===a&&(d&&a?g=!0:this.assert(a,"expected #{this} to throw error "+F+" #{exp} but got #{act}","expected #{this} to throw error not "+F+" #{exp}",e,Kr.getMessage(l)))}m&&g&&this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Kr.getConstructorName(t),l instanceof Error?l.toString():l&&Kr.getConstructorName(l)),A(this,"object",l)}C(Ny,"assertThrows");_.addMethod("throw",Ny);_.addMethod("throws",Ny);_.addMethod("Throw",Ny);function xw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Le(t),"expected #{this} to not respond to "+Le(t))}C(xw,"respondTo");_.addMethod("respondTo",xw);_.addMethod("respondsTo",xw);_.addProperty("itself",function(){A(this,"itself",!0)});function Sw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+Rs(t),"expected #{this} to not satisfy"+Rs(t),!A(this,"negate"),n)}C(Sw,"satisfy");_.addMethod("satisfy",Sw);_.addMethod("satisfies",Sw);function Tw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");if(new _(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var a=e===void 0?", and a delta is required":"";throw new ze(i+"the arguments to closeTo or approximately must be numbers"+a,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}C(Tw,"closeTo");_.addMethod("closeTo",Tw);_.addMethod("approximately",Tw);function yC(t,e,r,n,i){let o=Array.from(e),a=Array.from(t);if(!n){if(a.length!==o.length)return!1;o=o.slice()}return a.every(function(l,p){if(i)return r?r(l,o[p]):l===o[p];if(!r){var u=o.indexOf(l);return u===-1?!1:(n||o.splice(u,1),!0)}return o.some(function(d,m){return r(l,d)?(n||o.splice(m,1),!0):!1})})}C(yC,"isSubsetOf");_.addMethod("members",function(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi");new _(r,n,i,!0).to.be.iterable,new _(t,n,i,!0).to.be.iterable;var o=A(this,"contains"),a=A(this,"ordered"),l,p,u;o?(l=a?"an ordered superset":"a superset",p="expected #{this} to be "+l+" of #{exp}",u="expected #{this} to not be "+l+" of #{exp}"):(l=a?"ordered members":"members",p="expected #{this} to have the same "+l+" as #{exp}",u="expected #{this} to not have the same "+l+" as #{exp}");var d=A(this,"deep")?A(this,"eql"):void 0;this.assert(yC(t,r,d,o,a),p,u,t,r,!0)});_.addProperty("iterable",function(t){t&&A(this,"message",t);var e=A(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function xC(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi"),o=A(this,"contains"),a=A(this,"deep"),l=A(this,"eql");new _(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(p){return r.indexOf(p)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):a?this.assert(t.some(function(p){return l(r,p)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}C(xC,"oneOf");_.addMethod("oneOf",xC);function vw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),n();var l=e==null?t():t[e],p=e==null?a:"."+e;A(this,"deltaMsgObj",p),A(this,"initialDeltaValue",a),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","change"),A(this,"realDelta",l!==a),this.assert(a!==l,"expected "+p+" to change","expected "+p+" to not change")}C(vw,"assertChanges");_.addMethod("change",vw);_.addMethod("changes",vw);function bw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),new _(a,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?a:"."+e;A(this,"deltaMsgObj",p),A(this,"initialDeltaValue",a),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","increase"),A(this,"realDelta",l-a),this.assert(l-a>0,"expected "+p+" to increase","expected "+p+" to not increase")}C(bw,"assertIncreases");_.addMethod("increase",bw);_.addMethod("increases",bw);function ww(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),new _(a,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?a:"."+e;A(this,"deltaMsgObj",p),A(this,"initialDeltaValue",a),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","decrease"),A(this,"realDelta",a-l),this.assert(l-a<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}C(ww,"assertDecreases");_.addMethod("decrease",ww);_.addMethod("decreases",ww);function SC(t,e){e&&A(this,"message",e);var r=A(this,"deltaMsgObj"),n=A(this,"initialDeltaValue"),i=A(this,"finalDeltaValue"),o=A(this,"deltaBehavior"),a=A(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=a===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}C(SC,"assertDelta");_.addMethod("by",SC);_.addProperty("extensible",function(){var t=A(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});_.addProperty("sealed",function(){var t=A(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});_.addProperty("frozen",function(){var t=A(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});_.addProperty("finite",function(t){var e=A(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function Ry(t,e){return new _(t,e)}C(Ry,"expect");Ry.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new ze(r,{actual:t,expected:e,operator:n},Ry.fail)};var TC={};$b(TC,{Should:()=>aX,should:()=>sX});function _w(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new _(this.valueOf(),null,t):new _(this,null,t)}C(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}C(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,a){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new ze(o,{actual:n,expected:i,operator:a},r.fail)},r.equal=function(n,i,o){new _(n,o).to.equal(i)},r.Throw=function(n,i,o,a){new _(n,a).to.Throw(i,o)},r.exist=function(n,i){new _(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new _(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,a){new _(n,a).to.not.Throw(i,o)},r.not.exist=function(n,i){new _(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}C(_w,"loadShould");var sX=_w,aX=_w;function w(t,e){var r=new _(null,null,w,!0);r.assert(t,e,"[ negation message unavailable ]")}C(w,"assert");w.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new ze(r,{actual:t,expected:e,operator:n},w.fail)};w.isOk=function(t,e){new _(t,e,w.isOk,!0).is.ok};w.isNotOk=function(t,e){new _(t,e,w.isNotOk,!0).is.not.ok};w.equal=function(t,e,r){var n=new _(t,r,w.equal,!0);n.assert(e==_e(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};w.notEqual=function(t,e,r){var n=new _(t,r,w.notEqual,!0);n.assert(e!=_e(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};w.strictEqual=function(t,e,r){new _(t,r,w.strictEqual,!0).to.equal(e)};w.notStrictEqual=function(t,e,r){new _(t,r,w.notStrictEqual,!0).to.not.equal(e)};w.deepEqual=w.deepStrictEqual=function(t,e,r){new _(t,r,w.deepEqual,!0).to.eql(e)};w.notDeepEqual=function(t,e,r){new _(t,r,w.notDeepEqual,!0).to.not.eql(e)};w.isAbove=function(t,e,r){new _(t,r,w.isAbove,!0).to.be.above(e)};w.isAtLeast=function(t,e,r){new _(t,r,w.isAtLeast,!0).to.be.least(e)};w.isBelow=function(t,e,r){new _(t,r,w.isBelow,!0).to.be.below(e)};w.isAtMost=function(t,e,r){new _(t,r,w.isAtMost,!0).to.be.most(e)};w.isTrue=function(t,e){new _(t,e,w.isTrue,!0).is.true};w.isNotTrue=function(t,e){new _(t,e,w.isNotTrue,!0).to.not.equal(!0)};w.isFalse=function(t,e){new _(t,e,w.isFalse,!0).is.false};w.isNotFalse=function(t,e){new _(t,e,w.isNotFalse,!0).to.not.equal(!1)};w.isNull=function(t,e){new _(t,e,w.isNull,!0).to.equal(null)};w.isNotNull=function(t,e){new _(t,e,w.isNotNull,!0).to.not.equal(null)};w.isNaN=function(t,e){new _(t,e,w.isNaN,!0).to.be.NaN};w.isNotNaN=function(t,e){new _(t,e,w.isNotNaN,!0).not.to.be.NaN};w.exists=function(t,e){new _(t,e,w.exists,!0).to.exist};w.notExists=function(t,e){new _(t,e,w.notExists,!0).to.not.exist};w.isUndefined=function(t,e){new _(t,e,w.isUndefined,!0).to.equal(void 0)};w.isDefined=function(t,e){new _(t,e,w.isDefined,!0).to.not.equal(void 0)};w.isCallable=function(t,e){new _(t,e,w.isCallable,!0).is.callable};w.isNotCallable=function(t,e){new _(t,e,w.isNotCallable,!0).is.not.callable};w.isObject=function(t,e){new _(t,e,w.isObject,!0).to.be.a("object")};w.isNotObject=function(t,e){new _(t,e,w.isNotObject,!0).to.not.be.a("object")};w.isArray=function(t,e){new _(t,e,w.isArray,!0).to.be.an("array")};w.isNotArray=function(t,e){new _(t,e,w.isNotArray,!0).to.not.be.an("array")};w.isString=function(t,e){new _(t,e,w.isString,!0).to.be.a("string")};w.isNotString=function(t,e){new _(t,e,w.isNotString,!0).to.not.be.a("string")};w.isNumber=function(t,e){new _(t,e,w.isNumber,!0).to.be.a("number")};w.isNotNumber=function(t,e){new _(t,e,w.isNotNumber,!0).to.not.be.a("number")};w.isFinite=function(t,e){new _(t,e,w.isFinite,!0).to.be.finite};w.isBoolean=function(t,e){new _(t,e,w.isBoolean,!0).to.be.a("boolean")};w.isNotBoolean=function(t,e){new _(t,e,w.isNotBoolean,!0).to.not.be.a("boolean")};w.typeOf=function(t,e,r){new _(t,r,w.typeOf,!0).to.be.a(e)};w.notTypeOf=function(t,e,r){new _(t,r,w.notTypeOf,!0).to.not.be.a(e)};w.instanceOf=function(t,e,r){new _(t,r,w.instanceOf,!0).to.be.instanceOf(e)};w.notInstanceOf=function(t,e,r){new _(t,r,w.notInstanceOf,!0).to.not.be.instanceOf(e)};w.include=function(t,e,r){new _(t,r,w.include,!0).include(e)};w.notInclude=function(t,e,r){new _(t,r,w.notInclude,!0).not.include(e)};w.deepInclude=function(t,e,r){new _(t,r,w.deepInclude,!0).deep.include(e)};w.notDeepInclude=function(t,e,r){new _(t,r,w.notDeepInclude,!0).not.deep.include(e)};w.nestedInclude=function(t,e,r){new _(t,r,w.nestedInclude,!0).nested.include(e)};w.notNestedInclude=function(t,e,r){new _(t,r,w.notNestedInclude,!0).not.nested.include(e)};w.deepNestedInclude=function(t,e,r){new _(t,r,w.deepNestedInclude,!0).deep.nested.include(e)};w.notDeepNestedInclude=function(t,e,r){new _(t,r,w.notDeepNestedInclude,!0).not.deep.nested.include(e)};w.ownInclude=function(t,e,r){new _(t,r,w.ownInclude,!0).own.include(e)};w.notOwnInclude=function(t,e,r){new _(t,r,w.notOwnInclude,!0).not.own.include(e)};w.deepOwnInclude=function(t,e,r){new _(t,r,w.deepOwnInclude,!0).deep.own.include(e)};w.notDeepOwnInclude=function(t,e,r){new _(t,r,w.notDeepOwnInclude,!0).not.deep.own.include(e)};w.match=function(t,e,r){new _(t,r,w.match,!0).to.match(e)};w.notMatch=function(t,e,r){new _(t,r,w.notMatch,!0).to.not.match(e)};w.property=function(t,e,r){new _(t,r,w.property,!0).to.have.property(e)};w.notProperty=function(t,e,r){new _(t,r,w.notProperty,!0).to.not.have.property(e)};w.propertyVal=function(t,e,r,n){new _(t,n,w.propertyVal,!0).to.have.property(e,r)};w.notPropertyVal=function(t,e,r,n){new _(t,n,w.notPropertyVal,!0).to.not.have.property(e,r)};w.deepPropertyVal=function(t,e,r,n){new _(t,n,w.deepPropertyVal,!0).to.have.deep.property(e,r)};w.notDeepPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};w.ownProperty=function(t,e,r){new _(t,r,w.ownProperty,!0).to.have.own.property(e)};w.notOwnProperty=function(t,e,r){new _(t,r,w.notOwnProperty,!0).to.not.have.own.property(e)};w.ownPropertyVal=function(t,e,r,n){new _(t,n,w.ownPropertyVal,!0).to.have.own.property(e,r)};w.notOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};w.deepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};w.notDeepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};w.nestedProperty=function(t,e,r){new _(t,r,w.nestedProperty,!0).to.have.nested.property(e)};w.notNestedProperty=function(t,e,r){new _(t,r,w.notNestedProperty,!0).to.not.have.nested.property(e)};w.nestedPropertyVal=function(t,e,r,n){new _(t,n,w.nestedPropertyVal,!0).to.have.nested.property(e,r)};w.notNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};w.deepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};w.notDeepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};w.lengthOf=function(t,e,r){new _(t,r,w.lengthOf,!0).to.have.lengthOf(e)};w.hasAnyKeys=function(t,e,r){new _(t,r,w.hasAnyKeys,!0).to.have.any.keys(e)};w.hasAllKeys=function(t,e,r){new _(t,r,w.hasAllKeys,!0).to.have.all.keys(e)};w.containsAllKeys=function(t,e,r){new _(t,r,w.containsAllKeys,!0).to.contain.all.keys(e)};w.doesNotHaveAnyKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};w.doesNotHaveAllKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};w.hasAnyDeepKeys=function(t,e,r){new _(t,r,w.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};w.hasAllDeepKeys=function(t,e,r){new _(t,r,w.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};w.containsAllDeepKeys=function(t,e,r){new _(t,r,w.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};w.doesNotHaveAnyDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};w.doesNotHaveAllDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};w.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new _(t,n,w.throws,!0).to.throw(e,r);return _e(i,"object")};w.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new _(t,n,w.doesNotThrow,!0).to.not.throw(e,r)};w.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new ze(n+'Invalid operator "'+e+'"',void 0,w.operator)}var o=new _(i,n,w.operator,!0);o.assert(_e(o,"object")===!0,"expected "+Le(t)+" to be "+e+" "+Le(r),"expected "+Le(t)+" to not be "+e+" "+Le(r))};w.closeTo=function(t,e,r,n){new _(t,n,w.closeTo,!0).to.be.closeTo(e,r)};w.approximately=function(t,e,r,n){new _(t,n,w.approximately,!0).to.be.approximately(e,r)};w.sameMembers=function(t,e,r){new _(t,r,w.sameMembers,!0).to.have.same.members(e)};w.notSameMembers=function(t,e,r){new _(t,r,w.notSameMembers,!0).to.not.have.same.members(e)};w.sameDeepMembers=function(t,e,r){new _(t,r,w.sameDeepMembers,!0).to.have.same.deep.members(e)};w.notSameDeepMembers=function(t,e,r){new _(t,r,w.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};w.sameOrderedMembers=function(t,e,r){new _(t,r,w.sameOrderedMembers,!0).to.have.same.ordered.members(e)};w.notSameOrderedMembers=function(t,e,r){new _(t,r,w.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};w.sameDeepOrderedMembers=function(t,e,r){new _(t,r,w.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};w.notSameDeepOrderedMembers=function(t,e,r){new _(t,r,w.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};w.includeMembers=function(t,e,r){new _(t,r,w.includeMembers,!0).to.include.members(e)};w.notIncludeMembers=function(t,e,r){new _(t,r,w.notIncludeMembers,!0).to.not.include.members(e)};w.includeDeepMembers=function(t,e,r){new _(t,r,w.includeDeepMembers,!0).to.include.deep.members(e)};w.notIncludeDeepMembers=function(t,e,r){new _(t,r,w.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};w.includeOrderedMembers=function(t,e,r){new _(t,r,w.includeOrderedMembers,!0).to.include.ordered.members(e)};w.notIncludeOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};w.includeDeepOrderedMembers=function(t,e,r){new _(t,r,w.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};w.notIncludeDeepOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};w.oneOf=function(t,e,r){new _(t,r,w.oneOf,!0).to.be.oneOf(e)};w.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Le(t)} to be an iterable`:`expected ${Le(t)} to be an iterable`,new ze(e,void 0,w.isIterable)};w.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.changes,!0).to.change(e,r)};w.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesBy,!0).to.change(e,r).by(n)};w.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotChange,!0).to.not.change(e,r)};w.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesButNotBy,!0).to.change(e,r).but.not.by(n)};w.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.increases,!0).to.increase(e,r)};w.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesBy,!0).to.increase(e,r).by(n)};w.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotIncrease,!0).to.not.increase(e,r)};w.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};w.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.decreases,!0).to.decrease(e,r)};w.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesBy,!0).to.decrease(e,r).by(n)};w.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotDecrease,!0).to.not.decrease(e,r)};w.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new _(t,i,w.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};w.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};w.ifError=function(t){if(t)throw t};w.isExtensible=function(t,e){new _(t,e,w.isExtensible,!0).to.be.extensible};w.isNotExtensible=function(t,e){new _(t,e,w.isNotExtensible,!0).to.not.be.extensible};w.isSealed=function(t,e){new _(t,e,w.isSealed,!0).to.be.sealed};w.isNotSealed=function(t,e){new _(t,e,w.isNotSealed,!0).to.not.be.sealed};w.isFrozen=function(t,e){new _(t,e,w.isFrozen,!0).to.be.frozen};w.isNotFrozen=function(t,e){new _(t,e,w.isNotFrozen,!0).to.not.be.frozen};w.isEmpty=function(t,e){new _(t,e,w.isEmpty,!0).to.be.empty};w.isNotEmpty=function(t,e){new _(t,e,w.isNotEmpty,!0).to.not.be.empty};C(function t(e,r){return w[r]=w[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var D1=[];function cX(t){let e={AssertionError:ze,util:Sy,config:kr,expect:Ry,assert:w,Assertion:_,...TC};return~D1.indexOf(t)||(t(e,Sy),D1.push(t)),e}C(cX,"use");var Hp=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new W(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new W(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new W(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var vC=dr(require("node:path"),1),Ly=class{get uri(){return this._uri}get filename(){return vC.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new W(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof pe?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Hp(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new pe(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let a=n+1;a<i;a++)o.push(this._lines[a]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof W))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new W(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof pe))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new pe(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new Ew(n)}}};function uX(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var Ew=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=uX(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new Rw(i,e-a)}},Rw=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var Uy=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Vp;this.onDidChangeActiveTextEditor=Vp;this.onDidChangeVisibleTextEditors=Vp;this.onDidChangeTextEditorSelection=Vp;this.onDidChangeTextEditorVisibleRanges=Vp;this.configuration=new dp,this.keyValueStore=new mp,this.messages=new hp,this.clipboard=new up(this.client),this.capabilities=new Yg,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await sF(this.client);this.assetsRoot_=kw.default.join(e,"assets"),this.cursorlessNeovimPath=kw.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return b1()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return gF(e)}onDidOpenTextDocument(e,r,n){return yF(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let a,l;e?(a=[],l=[]):(a=await Qg(r,this.client),l=await oF(r,this.client,i));let p=this.toNeovimEditor(r,n,i,l,a);return qr().emitEvent("onDidOpenTextDocument",p.document),p}toNeovimEditor(e,r,n,i,o){let a=this.getTextDocument(r),l=this.getTextEditor(e);return a?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),a.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),a=new Ly(bF.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,a)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,a)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new Jg(hM(),this.client,this,e,a,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){uF(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,bC.pull)(this.disposables,...e)}};function Vp(){return{dispose(){}}}var Hy=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var dX=BigInt(1e9);function wC(t,e=BigInt(1e6)){return Number(t*e/dX)/Number(e)}async function Vy(t,e=[],r=[],n,i,o,a,l){let p={documentContents:n.document.getText(),selections:n.selections.map(Nk)};o!=null&&(p.marks=o),l!=null&&(p.metadata=l),e.includes("clipboard")||(p.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(p.visibleRanges=n.visibleRanges.map(el));for(let u of da){let d=t?.get(u),m=`${u}Mark`;d!=null&&!e.includes(m)&&(p[m]=d.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let u=a?.startTimestamp;if(u==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-u;p.timeOffsetSeconds=wC(d)}return p}var mX=dr(bl(),1);function _C(t,e,r,n,i,o,a,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:a,scopeProvider:o,takeSnapshot(p,u,d,m,g){return Vy(e,p,u,d,m,g,void 0,void 0)},setStoredTarget(p,u,d){e.set(u,d?.map(m=>tF(p,m)))},hatTokenMap:r,runIntegrationTests:l}}async function EC(t,e,r,n){let i={[cS]:async(...o)=>{(await t.mode).mode==="t"&&lF(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),p=Ff(o);if(await n.getFocusedElementType()==="terminal"&&Qo(p)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&pF(t)}return l}catch(l){if(e.runMode!=="test"){let p=l;console.error(p.stack),e.handleCommandError(p)}throw l}},"cursorless.repeatPreviousCommand":Ae,"cursorless.showCheatsheet":Ae,"cursorless.internal.updateCheatsheetDefaults":Ae,"cursorless.recordTestCase":Ae,"cursorless.recordOneTestCaseThenPause":Ae,"cursorless.pauseRecording":Ae,"cursorless.resumeRecording":Ae,"cursorless.takeSnapshot":Ae,"cursorless.recordScopeTests.showUnimplementedFacets":Ae,"cursorless.recordScopeTests.saveActiveDocument":Ae,"cursorless.showQuickPick":Ae,"cursorless.showDocumentation":Ae,"cursorless.showInstallationDependencies":Ae,"cursorless.private.logQuickActions":Ae,"cursorless.toggleDecorations":Ae,"cursorless.recomputeDecorationStyles":Ae,"cursorless.showScopeVisualizer":Ae,"cursorless.hideScopeVisualizer":Ae,"cursorless.analyzeCommandHistory":Ae,"cursorless.keyboard.escape":Ae,"cursorless.keyboard.targeted.targetHat":Ae,"cursorless.keyboard.targeted.targetScope":Ae,"cursorless.keyboard.targeted.targetSelection":Ae,"cursorless.keyboard.targeted.clearTarget":Ae,"cursorless.keyboard.targeted.runActionOnTarget":Ae,"cursorless.keyboard.modal.modeOn":Ae,"cursorless.keyboard.modal.modeOff":Ae,"cursorless.keyboard.modal.modeToggle":Ae,"cursorless.keyboard.undoTarget":Ae,"cursorless.keyboard.redoTarget":Ae,"cursorless.tutorial.start":Ae,"cursorless.tutorial.next":Ae,"cursorless.tutorial.previous":Ae,"cursorless.tutorial.restart":Ae,"cursorless.tutorial.resume":Ae,"cursorless.tutorial.list":Ae,"cursorless.documentationOpened":Ae};Object.entries(i).map(([o,a])=>qr().registerCommand(o,a))}async function Ae(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function RC(t){let e=t.nvim,r=new Uy(e);await r.init();let n=r.runMode==="production"?r:new bf(r,new Sf,r.runMode==="test",void 0),i=new Ou,o=new Hy(e),a=r.runMode==="test"?i:o,{commandApi:l,storedTargets:p,hatTokenMap:u,scopeProvider:d,injectIde:m,runIntegrationTests:g}=await eF({ide:n,commandServerApi:a});await EC(e,r,l,a);let x={testHelpers:r.runMode==="test"?_C(i,p,u,r,n,d,m,g):void 0};qr().registerExtensionApi(nF,x),console.log("activate(): Cursorless extension loaded")}function kC(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await hX(t),{sync:!1})}async function hX(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await RC(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
