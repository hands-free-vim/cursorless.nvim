"use strict";var rB=Object.create;var Ru=Object.defineProperty;var nB=Object.getOwnPropertyDescriptor;var iB=Object.getOwnPropertyNames;var oB=Object.getPrototypeOf,sB=Object.prototype.hasOwnProperty;var Ke=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),aB=(t,e)=>{for(var r in e)Ru(t,r,{get:e[r],enumerable:!0})},Z0=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of iB(e))!sB.call(t,i)&&i!==r&&Ru(t,i,{get:()=>e[i],enumerable:!(n=nB(e,i))||n.enumerable});return t};var fr=(t,e,r)=>(r=t!=null?rB(oB(t)):{},Z0(e||!t||!t.__esModule?Ru(r,"default",{value:t,enumerable:!0}):r,t)),cB=t=>Z0(Ru({},"__esModule",{value:!0}),t);var UP=Ke(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.default=void 0;var Rge=Uf.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var HP=Ke(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.default=void 0;var Pge=Hf.default="00000000-0000-0000-0000-000000000000"});var VP=Ke(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.default=void 0;var Age=Vf.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var fl=Ke(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.default=void 0;var R4=k4(VP());function k4(t){return t&&t.__esModule?t:{default:t}}function P4(t){return typeof t=="string"&&R4.default.test(t)}var Ige=Bf.default=P4});var dl=Ke(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.default=void 0;var M4=A4(fl());function A4(t){return t&&t.__esModule?t:{default:t}}function D4(t){if(!(0,M4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Cge=Wf.default=D4});var wi=Ke(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.default=void 0;ml.unsafeStringify=BP;var I4=F4(fl());function F4(t){return t&&t.__esModule?t:{default:t}}var Nt=[];for(let t=0;t<256;++t)Nt.push((t+256).toString(16).slice(1));function BP(t,e=0){return(Nt[t[e+0]]+Nt[t[e+1]]+Nt[t[e+2]]+Nt[t[e+3]]+"-"+Nt[t[e+4]]+Nt[t[e+5]]+"-"+Nt[t[e+6]]+Nt[t[e+7]]+"-"+Nt[t[e+8]]+Nt[t[e+9]]+"-"+Nt[t[e+10]]+Nt[t[e+11]]+Nt[t[e+12]]+Nt[t[e+13]]+Nt[t[e+14]]+Nt[t[e+15]]).toLowerCase()}function C4(t,e=0){let r=BP(t,e);if(!(0,I4.default)(r))throw TypeError("Stringified UUID is invalid");return r}var Nge=ml.default=C4});var qf=Ke(rT=>{"use strict";Object.defineProperty(rT,"__esModule",{value:!0});rT.default=L4;var O4=N4(require("node:crypto"));function N4(t){return t&&t.__esModule?t:{default:t}}var jf=new Uint8Array(256),$f=jf.length;function L4(){return $f>jf.length-16&&(O4.default.randomFillSync(jf),$f=0),jf.slice($f,$f+=16)}});var sT=Ke(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.default=void 0;var U4=V4(qf()),H4=wi();function V4(t){return t&&t.__esModule?t:{default:t}}var nT,zf,iT=0,oT=0;function B4(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node,a=t.clockseq;if(t._v6||(o||(o=nT),a==null&&(a=zf)),o==null||a==null){let g=t.random||(t.rng||U4.default)();o==null&&(o=[g[0],g[1],g[2],g[3],g[4],g[5]],!nT&&!t._v6&&(o[0]|=1,nT=o)),a==null&&(a=(g[6]<<8|g[7])&16383,zf===void 0&&!t._v6&&(zf=a))}let l=t.msecs!==void 0?t.msecs:Date.now(),p=t.nsecs!==void 0?t.nsecs:oT+1,u=l-iT+(p-oT)/1e4;if(u<0&&t.clockseq===void 0&&(a=a+1&16383),(u<0||l>iT)&&t.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");iT=l,oT=p,zf=a,l+=122192928e5;let d=((l&268435455)*1e4+p)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=d&255;let m=l/4294967296*1e4&268435455;i[n++]=m>>>8&255,i[n++]=m&255,i[n++]=m>>>24&15|16,i[n++]=m>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,H4.unsafeStringify)(i)}var Hge=Gf.default=B4});var cT=Ke(aT=>{"use strict";Object.defineProperty(aT,"__esModule",{value:!0});aT.default=q4;var W4=j4(dl()),$4=wi();function j4(t){return t&&t.__esModule?t:{default:t}}function q4(t){let e=typeof t=="string"?(0,W4.default)(t):t,r=z4(e);return typeof t=="string"?(0,$4.unsafeStringify)(r):r}function z4(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var lT=Ke(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.URL=es.DNS=void 0;es.default=J4;var G4=wi(),K4=Q4(dl());function Q4(t){return t&&t.__esModule?t:{default:t}}function Z4(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var Y4=es.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",X4=es.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function J4(t,e,r){function n(i,o,a,l){var p;if(typeof i=="string"&&(i=Z4(i)),typeof o=="string"&&(o=(0,K4.default)(o)),((p=o)===null||p===void 0?void 0:p.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){l=l||0;for(let d=0;d<16;++d)a[l+d]=u[d];return a}return(0,G4.unsafeStringify)(u)}try{n.name=t}catch{}return n.DNS=Y4,n.URL=X4,n}});var WP=Ke(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});Kf.default=void 0;var e6=t6(require("node:crypto"));function t6(t){return t&&t.__esModule?t:{default:t}}function r6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),e6.default.createHash("md5").update(t).digest()}var $ge=Kf.default=r6});var jP=Ke(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.default=void 0;var n6=$P(lT()),i6=$P(WP());function $P(t){return t&&t.__esModule?t:{default:t}}var o6=(0,n6.default)("v3",48,i6.default),qge=Qf.default=o6});var qP=Ke(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.default=void 0;var s6=a6(require("node:crypto"));function a6(t){return t&&t.__esModule?t:{default:t}}var Gge=Zf.default={randomUUID:s6.default.randomUUID}});var KP=Ke(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.default=void 0;var zP=GP(qP()),c6=GP(qf()),l6=wi();function GP(t){return t&&t.__esModule?t:{default:t}}function p6(t,e,r){if(zP.default.randomUUID&&!e&&!t)return zP.default.randomUUID();t=t||{};let n=t.random||(t.rng||c6.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,l6.unsafeStringify)(n)}var Qge=Yf.default=p6});var QP=Ke(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.default=void 0;var u6=f6(require("node:crypto"));function f6(t){return t&&t.__esModule?t:{default:t}}function d6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),u6.default.createHash("sha1").update(t).digest()}var Yge=Xf.default=d6});var YP=Ke(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.default=void 0;var m6=ZP(lT()),h6=ZP(QP());function ZP(t){return t&&t.__esModule?t:{default:t}}var g6=(0,m6.default)("v5",80,h6.default),Jge=Jf.default=g6});var JP=Ke(pT=>{"use strict";Object.defineProperty(pT,"__esModule",{value:!0});pT.default=T6;var y6=wi(),x6=XP(sT()),S6=XP(cT());function XP(t){return t&&t.__esModule?t:{default:t}}function T6(t={},e,r=0){let n=(0,x6.default)({...t,_v6:!0},new Uint8Array(16));if(n=(0,S6.default)(n),e){for(let i=0;i<16;i++)e[r+i]=n[i];return e}return(0,y6.unsafeStringify)(n)}});var eM=Ke(uT=>{"use strict";Object.defineProperty(uT,"__esModule",{value:!0});uT.default=_6;var v6=w6(dl()),b6=wi();function w6(t){return t&&t.__esModule?t:{default:t}}function _6(t){let e=typeof t=="string"?(0,v6.default)(t):t,r=E6(e);return typeof t=="string"?(0,b6.unsafeStringify)(r):r}function E6(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var nM=Ke(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.default=void 0;var R6=P6(qf()),k6=wi();function P6(t){return t&&t.__esModule?t:{default:t}}var tM=null,rM=null,An=0;function M6(t,e,r){t=t||{};let n=e&&r||0,i=e||new Uint8Array(16),o=t.random||(t.rng||R6.default)(),a=t.msecs!==void 0?t.msecs:Date.now(),l=t.seq!==void 0?t.seq:null,p=rM,u=tM;return a>An&&t.msecs===void 0&&(An=a,l!==null&&(p=null,u=null)),l!==null&&(l>2147483647&&(l=2147483647),p=l>>>19&4095,u=l&524287),(p===null||u===null)&&(p=o[6]&127,p=p<<8|o[7],u=o[8]&63,u=u<<8|o[9],u=u<<5|o[10]>>>3),a+1e4>An&&l===null?++u>524287&&(u=0,++p>4095&&(p=0,An++)):An=a,rM=p,tM=u,i[n++]=An/1099511627776&255,i[n++]=An/4294967296&255,i[n++]=An/16777216&255,i[n++]=An/65536&255,i[n++]=An/256&255,i[n++]=An&255,i[n++]=p>>>4&15|112,i[n++]=p&255,i[n++]=u>>>13&63|128,i[n++]=u>>>5&255,i[n++]=u<<3&255|o[10]&7,i[n++]=o[11],i[n++]=o[12],i[n++]=o[13],i[n++]=o[14],i[n++]=o[15],e||(0,k6.unsafeStringify)(i)}var nye=ed.default=M6});var iM=Ke(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.default=void 0;var A6=D6(fl());function D6(t){return t&&t.__esModule?t:{default:t}}function I6(t){if(!(0,A6.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var oye=td.default=I6});var oM=Ke(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});Object.defineProperty(jt,"MAX",{enumerable:!0,get:function(){return F6.default}});Object.defineProperty(jt,"NIL",{enumerable:!0,get:function(){return C6.default}});Object.defineProperty(jt,"parse",{enumerable:!0,get:function(){return O6.default}});Object.defineProperty(jt,"stringify",{enumerable:!0,get:function(){return N6.default}});Object.defineProperty(jt,"v1",{enumerable:!0,get:function(){return L6.default}});Object.defineProperty(jt,"v1ToV6",{enumerable:!0,get:function(){return U6.default}});Object.defineProperty(jt,"v3",{enumerable:!0,get:function(){return H6.default}});Object.defineProperty(jt,"v4",{enumerable:!0,get:function(){return V6.default}});Object.defineProperty(jt,"v5",{enumerable:!0,get:function(){return B6.default}});Object.defineProperty(jt,"v6",{enumerable:!0,get:function(){return W6.default}});Object.defineProperty(jt,"v6ToV1",{enumerable:!0,get:function(){return $6.default}});Object.defineProperty(jt,"v7",{enumerable:!0,get:function(){return j6.default}});Object.defineProperty(jt,"validate",{enumerable:!0,get:function(){return q6.default}});Object.defineProperty(jt,"version",{enumerable:!0,get:function(){return z6.default}});var F6=xr(UP()),C6=xr(HP()),O6=xr(dl()),N6=xr(wi()),L6=xr(sT()),U6=xr(cT()),H6=xr(jP()),V6=xr(KP()),B6=xr(YP()),W6=xr(JP()),$6=xr(eM()),j6=xr(nM()),q6=xr(fl()),z6=xr(iM());function xr(t){return t&&t.__esModule?t:{default:t}}});var lM=Ke((cM,nd)=>{(function(t,e){typeof nd=="object"&&nd.exports?nd.exports=e():t.nearley=e()})(cM,function(){function t(p,u,d){return this.id=++t.highestId,this.name=p,this.symbols=u,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(p){var u=typeof p>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,p).map(l).join(" ")+" \u25CF "+this.symbols.slice(p).map(l).join(" ");return this.name+" \u2192 "+u};function e(p,u,d,m){this.rule=p,this.dot=u,this.reference=d,this.data=[],this.wantedBy=m,this.isComplete=this.dot===p.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(p){var u=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return u.left=this,u.right=p,u.isComplete&&(u.data=u.build(),u.right=void 0),u},e.prototype.build=function(){var p=[],u=this;do p.push(u.right.data),u=u.left;while(u.left);return p.reverse(),p},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(p,u){this.grammar=p,this.index=u,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(p){for(var u=this.states,d=this.wants,m=this.completed,g=0;g<u.length;g++){var x=u[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var w=x.wantedBy,v=w.length;v--;){var F=w[v];this.complete(F,x)}if(x.reference===this.index){var M=x.rule.name;(this.completed[M]=this.completed[M]||[]).push(x)}}}else{var M=x.rule.symbols[x.dot];if(typeof M!="string"){this.scannable.push(x);continue}if(d[M]){if(d[M].push(x),m.hasOwnProperty(M))for(var U=m[M],v=0;v<U.length;v++){var K=U[v];this.complete(x,K)}}else d[M]=[x],this.predict(M)}}},r.prototype.predict=function(p){for(var u=this.grammar.byName[p]||[],d=0;d<u.length;d++){var m=u[d],g=this.wants[p],x=new e(m,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(p,u){var d=p.nextState(u);this.states.push(d)};function n(p,u){this.rules=p,this.start=u||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(m){d.hasOwnProperty(m.name)||(d[m.name]=[]),d[m.name].push(m)})}n.fromCompiled=function(m,u){var d=m.Lexer;m.ParserStart&&(u=m.ParserStart,m=m.ParserRules);var m=m.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(m,u);return g.lexer=d,g};function i(){this.reset("")}i.prototype.reset=function(p,u){this.buffer=p,this.index=0,this.line=u?u.line:1,this.lastLineBreak=u?-u.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var p=this.buffer[this.index++];return p===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:p}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(p,u){var d=this.buffer;if(typeof d=="string"){var m=d.split(`
`).slice(Math.max(0,this.line-5),this.line),g=d.indexOf(`
`,this.index);g===-1&&(g=d.length);var x=this.index-this.lastLineBreak,w=String(this.line).length;return u+=" at line "+this.line+" col "+x+`:

`,u+=m.map(function(F,M){return v(this.line-m.length+M+1,w)+" "+F},this).join(`
`),u+=`
`+v("",w+x)+`^
`,u}else return u+" at index "+(this.index-1);function v(F,M){var U=String(F);return Array(M-U.length+1).join(" ")+U}};function o(p,u,d){if(p instanceof n)var m=p,d=u;else var m=n.fromCompiled(p,u);this.grammar=m,this.options={keepHistory:!1,lexer:m.lexer||new i};for(var g in d||{})this.options[g]=d[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(m,0),w=this.table=[x];x.wants[m.start]=[],x.predict(m.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(p){var u=this.lexer;u.reset(p,this.lexerState);for(var d;;){try{if(d=u.next(),!d)break}catch(de){var w=new r(this.grammar,this.current+1);this.table.push(w);var m=new Error(this.reportLexerError(de));throw m.offset=this.current,m.token=de.token,m}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,w=new r(this.grammar,x);this.table.push(w);for(var v=d.text!==void 0?d.text:d.value,F=u.constructor===i?d.value:u.transform?.(d)??d,M=g.scannable,U=M.length;U--;){var K=M[U],ne=K.rule.symbols[K.dot];if(ne.test?ne.test(F):ne.type?ne.type===d.type:ne.literal===v){var ge=K.nextState({data:F,token:d,isToken:!0,reference:x-1});w.states.push(ge)}}if(w.process(),w.states.length===0){var m=new Error(this.reportError(d));throw m.offset=this.current,m.token=d,m}this.options.keepHistory&&(g.lexerState=u.save()),this.current++}return g&&(this.lexerState=u.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(p){var u,d,m=p.token;return m?(u="input "+JSON.stringify(m.text[0])+" (lexer error)",d=this.lexer.formatError(m,"Syntax error")):(u="input (lexer error)",d=p.message),this.reportErrorCommon(d,u)},o.prototype.reportError=function(p){var u=(p.type?p.type+" token: ":"")+JSON.stringify(p.value!==void 0?p.value:p),d=this.lexer.formatError(p,"Syntax error");return this.reportErrorCommon(d,u)},o.prototype.reportErrorCommon=function(p,u){var d=[];d.push(p);var m=this.table.length-2,g=this.table[m],x=g.states.filter(function(v){var F=v.rule.symbols[v.dot];return F&&typeof F!="string"});if(x.length===0)d.push("Unexpected "+u+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,d);else{d.push("Unexpected "+u+`. Instead, I was expecting to see one of the following:
`);var w=x.map(function(v){return this.buildFirstStateStack(v,[])||[v]},this);w.forEach(function(v){var F=v[0],M=F.rule.symbols[F.dot],U=this.getSymbolDisplay(M);d.push("A "+U+" based on:"),this.displayStateStack(v,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(p,u){for(var d,m=0,g=0;g<p.length;g++){var x=p[g],w=x.rule.toString(x.dot);w===d?m++:(m>0&&u.push("    ^ "+m+" more lines identical to this"),m=0,u.push("    "+w)),d=w}},o.prototype.getSymbolDisplay=function(p){return a(p)},o.prototype.buildFirstStateStack=function(p,u){if(u.indexOf(p)!==-1)return null;if(p.wantedBy.length===0)return[p];var d=p.wantedBy[0],m=[p].concat(u),g=this.buildFirstStateStack(d,m);return g===null?null:[p].concat(g)},o.prototype.save=function(){var p=this.table[this.current];return p.lexerState=this.lexerState,p},o.prototype.restore=function(p){var u=p.index;this.current=u,this.table[u]=p,this.table.splice(u+1),this.lexerState=p.lexerState,this.results=this.finish()},o.prototype.rewind=function(p){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[p])},o.prototype.finish=function(){var p=[],u=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(m){m.rule.name===u&&m.dot===m.rule.symbols.length&&m.reference===0&&m.data!==o.fail&&p.push(m)}),p.map(function(m){return m.data})};function a(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return"character matching "+p;if(p.type)return p.type+" token";if(p.test)return"token matching "+String(p.test);throw new Error("Unknown symbol type: "+p)}}function l(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return p.toString();if(p.type)return"%"+p.type;if(p.test)return"<"+String(p.test)+">";throw new Error("Unknown symbol type: "+p)}}return{Parser:o,Grammar:n,Rule:t}})});var hM=Ke((mM,sd)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof sd=="object"&&sd.exports?sd.exports=e():t.moo=e()})(mM,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(N){return N&&e.call(N)==="[object RegExp]"}function i(N){return N&&typeof N=="object"&&!n(N)&&!Array.isArray(N)}function o(N){return N.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function a(N){var O=new RegExp("|"+N);return O.exec("").length-1}function l(N){return"("+N+")"}function p(N){if(!N.length)return"(?!)";var O=N.map(function(I){return"(?:"+I+")"}).join("|");return"(?:"+O+")"}function u(N){if(typeof N=="string")return"(?:"+o(N)+")";if(n(N)){if(N.ignoreCase)throw new Error("RegExp /i flag not allowed");if(N.global)throw new Error("RegExp /g flag is implied");if(N.sticky)throw new Error("RegExp /y flag is implied");if(N.multiline)throw new Error("RegExp /m flag is implied");return N.source}else throw new Error("Not a pattern: "+N)}function d(N,O){return N.length>O?N:Array(O-N.length+1).join(" ")+N}function m(N,O){for(var I=N.length,W=0;;){var q=N.lastIndexOf(`
`,I-1);if(q===-1||(W++,I=q,W===O)||I===0)break}var Q=W<O?0:I+1;return N.substring(Q).split(`
`)}function g(N){for(var O=Object.getOwnPropertyNames(N),I=[],W=0;W<O.length;W++){var q=O[W],Q=N[q],Z=[].concat(Q);if(q==="include"){for(var te=0;te<Z.length;te++)I.push({include:Z[te]});continue}var me=[];Z.forEach(function(re){i(re)?(me.length&&I.push(w(q,me)),I.push(w(q,re)),me=[]):me.push(re)}),me.length&&I.push(w(q,me))}return I}function x(N){for(var O=[],I=0;I<N.length;I++){var W=N[I];if(W.include){for(var q=[].concat(W.include),Q=0;Q<q.length;Q++)O.push({include:q[Q]});continue}if(!W.type)throw new Error("Rule has no type: "+JSON.stringify(W));O.push(w(W.type,W))}return O}function w(N,O){if(i(O)||(O={match:O}),O.include)throw new Error("Matching rules cannot also include states");var I={defaultType:N,lineBreaks:!!O.error||!!O.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var W in O)t.call(O,W)&&(I[W]=O[W]);if(typeof I.type=="string"&&N!==I.type)throw new Error("Type transform cannot be a string (type '"+I.type+"' for token '"+N+"')");var q=I.match;return I.match=Array.isArray(q)?q:q?[q]:[],I.match.sort(function(Q,Z){return n(Q)&&n(Z)?0:n(Z)?-1:n(Q)?1:Z.length-Q.length}),I}function v(N){return Array.isArray(N)?x(N):g(N)}var F=w("error",{lineBreaks:!0,shouldThrow:!0});function M(N,O){for(var I=null,W=Object.create(null),q=!0,Q=null,Z=[],te=[],me=0;me<N.length;me++)N[me].fallback&&(q=!1);for(var me=0;me<N.length;me++){var re=N[me];if(re.include)throw new Error("Inheritance is not allowed in stateless lexers");if(re.error||re.fallback){if(I)throw!re.fallback==!I.fallback?new Error("Multiple "+(re.fallback?"fallback":"error")+" rules not allowed (for token '"+re.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+re.defaultType+"')");I=re}var Re=re.match.slice();if(q)for(;Re.length&&typeof Re[0]=="string"&&Re[0].length===1;){var sr=Re.shift();W[sr.charCodeAt(0)]=re}if(re.pop||re.push||re.next){if(!O)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+re.defaultType+"')");if(re.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+re.defaultType+"')")}if(Re.length!==0){q=!1,Z.push(re);for(var si=0;si<Re.length;si++){var ar=Re[si];if(n(ar)){if(Q===null)Q=ar.unicode;else if(Q!==ar.unicode&&re.fallback===!1)throw new Error("If one rule is /u then all must be")}}var Tn=p(Re.map(u)),kr=new RegExp(Tn);if(kr.test(""))throw new Error("RegExp matches empty string: "+kr);var vn=a(Tn);if(vn>0)throw new Error("RegExp has capture groups: "+kr+`
Use (?: \u2026 ) instead`);if(!re.lineBreaks&&kr.test(`
`))throw new Error("Rule should declare lineBreaks: "+kr);te.push(l(Tn))}}var Kr=I&&I.fallback,Mo=r&&!Kr?"ym":"gm",ai=r||Kr?"":"|";Q===!0&&(Mo+="u");var ks=new RegExp(p(te)+ai,Mo);return{regexp:ks,groups:Z,fast:W,error:I||F}}function U(N){var O=M(v(N));return new de({start:O},"start")}function K(N,O,I){var W=N&&(N.push||N.next);if(W&&!I[W])throw new Error("Missing state '"+W+"' (in token '"+N.defaultType+"' of state '"+O+"')");if(N&&N.pop&&+N.pop!=1)throw new Error("pop must be 1 (in token '"+N.defaultType+"' of state '"+O+"')")}function ne(N,O){var I=N.$all?v(N.$all):[];delete N.$all;var W=Object.getOwnPropertyNames(N);O||(O=W[0]);for(var q=Object.create(null),Q=0;Q<W.length;Q++){var Z=W[Q];q[Z]=v(N[Z]).concat(I)}for(var Q=0;Q<W.length;Q++)for(var Z=W[Q],te=q[Z],me=Object.create(null),re=0;re<te.length;re++){var Re=te[re];if(Re.include){var sr=[re,1];if(Re.include!==Z&&!me[Re.include]){me[Re.include]=!0;var si=q[Re.include];if(!si)throw new Error("Cannot include nonexistent state '"+Re.include+"' (in state '"+Z+"')");for(var ar=0;ar<si.length;ar++){var Tn=si[ar];te.indexOf(Tn)===-1&&sr.push(Tn)}}te.splice.apply(te,sr),re--}}for(var kr=Object.create(null),Q=0;Q<W.length;Q++){var Z=W[Q];kr[Z]=M(q[Z],!0)}for(var Q=0;Q<W.length;Q++){for(var vn=W[Q],Kr=kr[vn],Mo=Kr.groups,re=0;re<Mo.length;re++)K(Mo[re],vn,kr);for(var ai=Object.getOwnPropertyNames(Kr.fast),re=0;re<ai.length;re++)K(Kr.fast[ai[re]],vn,kr)}return new de(kr,O)}function ge(N){for(var O=typeof Map<"u",I=O?new Map:Object.create(null),W=Object.getOwnPropertyNames(N),q=0;q<W.length;q++){var Q=W[q],Z=N[Q],te=Array.isArray(Z)?Z:[Z];te.forEach(function(me){if(typeof me!="string")throw new Error("keyword must be string (in keyword '"+Q+"')");O?I.set(me,Q):I[me]=Q})}return function(me){return O?I.get(me):I[me]}}var de=function(N,O){this.startState=O,this.states=N,this.buffer="",this.stack=[],this.reset()};de.prototype.reset=function(N,O){return this.buffer=N||"",this.index=0,this.line=O?O.line:1,this.col=O?O.col:1,this.queuedToken=O?O.queuedToken:null,this.queuedText=O?O.queuedText:"",this.queuedThrow=O?O.queuedThrow:null,this.setState(O?O.state:this.startState),this.stack=O&&O.stack?O.stack.slice():[],this},de.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},de.prototype.setState=function(N){if(!(!N||this.state===N)){this.state=N;var O=this.states[N];this.groups=O.groups,this.error=O.error,this.re=O.regexp,this.fast=O.fast}},de.prototype.popState=function(){this.setState(this.stack.pop())},de.prototype.pushState=function(N){this.stack.push(this.state),this.setState(N)};var gt=r?function(N,O){return N.exec(O)}:function(N,O){var I=N.exec(O);return I[0].length===0?null:I};de.prototype._getGroup=function(N){for(var O=this.groups.length,I=0;I<O;I++)if(N[I+1]!==void 0)return this.groups[I];throw new Error("Cannot find token type for matched text")};function Ft(){return this.value}if(de.prototype.next=function(){var N=this.index;if(this.queuedGroup){var O=this._token(this.queuedGroup,this.queuedText,N);return this.queuedGroup=null,this.queuedText="",O}var I=this.buffer;if(N!==I.length){var Z=this.fast[I.charCodeAt(N)];if(Z)return this._token(Z,I.charAt(N),N);var W=this.re;W.lastIndex=N;var q=gt(W,I),Q=this.error;if(q==null)return this._token(Q,I.slice(N,I.length),N);var Z=this._getGroup(q),te=q[0];return Q.fallback&&q.index!==N?(this.queuedGroup=Z,this.queuedText=te,this._token(Q,I.slice(N,q.index),N)):this._token(Z,te,N)}},de.prototype._token=function(N,O,I){var W=0;if(N.lineBreaks){var q=/\n/g,Q=1;if(O===`
`)W=1;else for(;q.exec(O);)W++,Q=q.lastIndex}var Z={type:typeof N.type=="function"&&N.type(O)||N.defaultType,value:typeof N.value=="function"?N.value(O):O,text:O,toString:Ft,offset:I,lineBreaks:W,line:this.line,col:this.col},te=O.length;if(this.index+=te,this.line+=W,W!==0?this.col=te-Q+1:this.col+=te,N.shouldThrow){var me=new Error(this.formatError(Z,"invalid syntax"));throw me}return N.pop?this.popState():N.push?this.pushState(N.push):N.next&&this.setState(N.next),Z},typeof Symbol<"u"&&Symbol.iterator){var st=function(N){this.lexer=N};st.prototype.next=function(){var N=this.lexer.next();return{value:N,done:!N}},st.prototype[Symbol.iterator]=function(){return this},de.prototype[Symbol.iterator]=function(){return new st(this)}}return de.prototype.formatError=function(N,O){if(N==null)var I=this.buffer.slice(this.index),N={text:I,offset:this.index,lineBreaks:I.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var W=2,q=Math.max(N.line-W,1),Q=N.line+W,Z=String(Q).length,te=m(this.buffer,this.line-N.line+W+1).slice(0,5),me=[];me.push(O+" at line "+N.line+" col "+N.col+":"),me.push("");for(var re=0;re<te.length;re++){var Re=te[re],sr=q+re;me.push(d(String(sr),Z)+"  "+Re),sr===N.line&&me.push(d("",Z+N.col+1)+"^")}return me.join(`
`)},de.prototype.clone=function(){return new de(this.states,this.state)},de.prototype.has=function(N){return!0},{compile:U,states:ne,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ge}})});var vl=Ke((Qn,sA)=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});function Dn(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var l5=typeof process=="object"&&process.env.NODE_ENV==="production";function ln(t,e){if(!t)throw l5?new Error("Invariant failed"):new Error(e())}Qn.invariant=ln;var FT=Object.prototype.hasOwnProperty,p5=Array.prototype.splice,u5=Object.prototype.toString;function is(t){return u5.call(t).slice(8,-1)}var Ld=Object.assign||function(t,e){return CT(e).forEach(function(r){FT.call(e,r)&&(t[r]=e[r])}),t},CT=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function fo(t){return Array.isArray(t)?Ld(t.constructor(t.length),t):is(t)==="Map"?new Map(t):is(t)==="Set"?new Set(t):t&&typeof t=="object"?Ld(Object.create(Object.getPrototypeOf(t)),t):t}var iA=function(){function t(){this.commands=Ld({},f5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||ln(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),ln(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return CT(i).forEach(function(a){if(FT.call(n.commands,a)){var l=e===o;o=n.commands[a](i[a],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var p=is(e)==="Map"?n.update(e.get(a),i[a]):n.update(e[a],i[a]),u=is(o)==="Map"?o.get(a):o[a];(!n.isEquals(p,u)||typeof p>"u"&&!FT.call(e,a))&&(o===e&&(o=fo(e)),is(o)==="Map"?o.set(a,p):o[a]=p)}}),o},t}();Qn.Context=iA;var f5={$push:function(t,e,r){return rA(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return rA(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return d5(e,r),t.forEach(function(i){oA(i),e===n&&i.length&&(e=fo(n)),p5.apply(e,i)}),e},$set:function(t,e,r){return h5(r),t},$toggle:function(t,e){Tl(t,"$toggle");var r=t.length?fo(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return Tl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=fo(n)),delete e[i])}),e},$add:function(t,e,r,n){return nA(e,"$add"),Tl(t,"$add"),is(e)==="Map"?t.forEach(function(i){var o=i[0],a=i[1];e===n&&e.get(o)!==a&&(e=fo(n)),e.set(o,a)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=fo(n)),e.add(i)}),e},$remove:function(t,e,r,n){return nA(e,"$remove"),Tl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=fo(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return g5(e,t),CT(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=fo(n)),e[i]=t[i])}),e},$apply:function(t,e){return m5(t),t(e)}},OT=new iA;Qn.isEquals=OT.update.isEquals;Qn.extend=OT.extend;Qn.default=OT.update;Qn.default.default=sA.exports=Ld(Qn.default,Qn);function rA(t,e,r){ln(Array.isArray(t),function(){return"update(): expected target of "+Dn(r)+" to be an array; got "+Dn(t)+"."}),Tl(e[r],r)}function Tl(t,e){ln(Array.isArray(t),function(){return"update(): expected spec of "+Dn(e)+" to be an array; got "+Dn(t)+". Did you forget to wrap your parameter in an array?"})}function d5(t,e){ln(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+Dn(t)}),oA(e.$splice)}function oA(t){ln(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+Dn(t)+". Did you forget to wrap your parameters in an array?"})}function m5(t){ln(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+Dn(t)+"."})}function h5(t){ln(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function g5(t,e){ln(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+Dn(e)}),ln(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+Dn(t)})}function nA(t,e){var r=is(t);ln(r==="Map"||r==="Set",function(){return"update(): "+Dn(e)+" expects a target of type Set or Map; got "+Dn(r)})}});var Zv=Ke((rc,cp)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",l=500,p="__lodash_placeholder__",u=1,d=2,m=4,g=1,x=2,w=1,v=2,F=4,M=8,U=16,K=32,ne=64,ge=128,de=256,gt=512,Ft=30,st="...",N=800,O=16,I=1,W=2,q=3,Q=1/0,Z=9007199254740991,te=17976931348623157e292,me=NaN,re=4294967295,Re=re-1,sr=re>>>1,si=[["ary",ge],["bind",w],["bindKey",v],["curry",M],["curryRight",U],["flip",gt],["partial",K],["partialRight",ne],["rearg",de]],ar="[object Arguments]",Tn="[object Array]",kr="[object AsyncFunction]",vn="[object Boolean]",Kr="[object Date]",Mo="[object DOMException]",ai="[object Error]",ks="[object Function]",Sw="[object GeneratorFunction]",bn="[object Map]",xc="[object Number]",SC="[object Null]",ci="[object Object]",Tw="[object Promise]",TC="[object Proxy]",Sc="[object RegExp]",wn="[object Set]",Tc="[object String]",Lp="[object Symbol]",vC="[object Undefined]",vc="[object WeakMap]",bC="[object WeakSet]",bc="[object ArrayBuffer]",Ps="[object DataView]",Fy="[object Float32Array]",Cy="[object Float64Array]",Oy="[object Int8Array]",Ny="[object Int16Array]",Ly="[object Int32Array]",Uy="[object Uint8Array]",Hy="[object Uint8ClampedArray]",Vy="[object Uint16Array]",By="[object Uint32Array]",wC=/\b__p \+= '';/g,_C=/\b(__p \+=) '' \+/g,EC=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vw=/&(?:amp|lt|gt|quot|#39);/g,bw=/[&<>"']/g,RC=RegExp(vw.source),kC=RegExp(bw.source),PC=/<%-([\s\S]+?)%>/g,MC=/<%([\s\S]+?)%>/g,ww=/<%=([\s\S]+?)%>/g,AC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,DC=/^\w*$/,IC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wy=/[\\^$.*+?()[\]{}|]/g,FC=RegExp(Wy.source),$y=/^\s+/,CC=/\s/,OC=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,NC=/\{\n\/\* \[wrapped with (.+)\] \*/,LC=/,? & /,UC=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,HC=/[()=,{}\[\]\/\s]/,VC=/\\(\\)?/g,BC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_w=/\w*$/,WC=/^[-+]0x[0-9a-f]+$/i,$C=/^0b[01]+$/i,jC=/^\[object .+?Constructor\]$/,qC=/^0o[0-7]+$/i,zC=/^(?:0|[1-9]\d*)$/,GC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Up=/($^)/,KC=/['\n\r\u2028\u2029\\]/g,Hp="\\ud800-\\udfff",QC="\\u0300-\\u036f",ZC="\\ufe20-\\ufe2f",YC="\\u20d0-\\u20ff",Ew=QC+ZC+YC,Rw="\\u2700-\\u27bf",kw="a-z\\xdf-\\xf6\\xf8-\\xff",XC="\\xac\\xb1\\xd7\\xf7",JC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",eO="\\u2000-\\u206f",tO=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pw="A-Z\\xc0-\\xd6\\xd8-\\xde",Mw="\\ufe0e\\ufe0f",Aw=XC+JC+eO+tO,jy="['\u2019]",rO="["+Hp+"]",Dw="["+Aw+"]",Vp="["+Ew+"]",Iw="\\d+",nO="["+Rw+"]",Fw="["+kw+"]",Cw="[^"+Hp+Aw+Iw+Rw+kw+Pw+"]",qy="\\ud83c[\\udffb-\\udfff]",iO="(?:"+Vp+"|"+qy+")",Ow="[^"+Hp+"]",zy="(?:\\ud83c[\\udde6-\\uddff]){2}",Gy="[\\ud800-\\udbff][\\udc00-\\udfff]",Ms="["+Pw+"]",Nw="\\u200d",Lw="(?:"+Fw+"|"+Cw+")",oO="(?:"+Ms+"|"+Cw+")",Uw="(?:"+jy+"(?:d|ll|m|re|s|t|ve))?",Hw="(?:"+jy+"(?:D|LL|M|RE|S|T|VE))?",Vw=iO+"?",Bw="["+Mw+"]?",sO="(?:"+Nw+"(?:"+[Ow,zy,Gy].join("|")+")"+Bw+Vw+")*",aO="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",cO="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ww=Bw+Vw+sO,lO="(?:"+[nO,zy,Gy].join("|")+")"+Ww,pO="(?:"+[Ow+Vp+"?",Vp,zy,Gy,rO].join("|")+")",uO=RegExp(jy,"g"),fO=RegExp(Vp,"g"),Ky=RegExp(qy+"(?="+qy+")|"+pO+Ww,"g"),dO=RegExp([Ms+"?"+Fw+"+"+Uw+"(?="+[Dw,Ms,"$"].join("|")+")",oO+"+"+Hw+"(?="+[Dw,Ms+Lw,"$"].join("|")+")",Ms+"?"+Lw+"+"+Uw,Ms+"+"+Hw,cO,aO,Iw,lO].join("|"),"g"),mO=RegExp("["+Nw+Hp+Ew+Mw+"]"),hO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,gO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yO=-1,Xe={};Xe[Fy]=Xe[Cy]=Xe[Oy]=Xe[Ny]=Xe[Ly]=Xe[Uy]=Xe[Hy]=Xe[Vy]=Xe[By]=!0,Xe[ar]=Xe[Tn]=Xe[bc]=Xe[vn]=Xe[Ps]=Xe[Kr]=Xe[ai]=Xe[ks]=Xe[bn]=Xe[xc]=Xe[ci]=Xe[Sc]=Xe[wn]=Xe[Tc]=Xe[vc]=!1;var Ze={};Ze[ar]=Ze[Tn]=Ze[bc]=Ze[Ps]=Ze[vn]=Ze[Kr]=Ze[Fy]=Ze[Cy]=Ze[Oy]=Ze[Ny]=Ze[Ly]=Ze[bn]=Ze[xc]=Ze[ci]=Ze[Sc]=Ze[wn]=Ze[Tc]=Ze[Lp]=Ze[Uy]=Ze[Hy]=Ze[Vy]=Ze[By]=!0,Ze[ai]=Ze[ks]=Ze[vc]=!1;var xO={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},SO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},TO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},vO={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bO=parseFloat,wO=parseInt,$w=typeof global=="object"&&global&&global.Object===Object&&global,_O=typeof self=="object"&&self&&self.Object===Object&&self,_t=$w||_O||Function("return this")(),Qy=typeof rc=="object"&&rc&&!rc.nodeType&&rc,Ao=Qy&&typeof cp=="object"&&cp&&!cp.nodeType&&cp,jw=Ao&&Ao.exports===Qy,Zy=jw&&$w.process,Qr=function(){try{var k=Ao&&Ao.require&&Ao.require("util").types;return k||Zy&&Zy.binding&&Zy.binding("util")}catch{}}(),qw=Qr&&Qr.isArrayBuffer,zw=Qr&&Qr.isDate,Gw=Qr&&Qr.isMap,Kw=Qr&&Qr.isRegExp,Qw=Qr&&Qr.isSet,Zw=Qr&&Qr.isTypedArray;function Pr(k,H,L){switch(L.length){case 0:return k.call(H);case 1:return k.call(H,L[0]);case 2:return k.call(H,L[0],L[1]);case 3:return k.call(H,L[0],L[1],L[2])}return k.apply(H,L)}function EO(k,H,L,ee){for(var ye=-1,Ve=k==null?0:k.length;++ye<Ve;){var xt=k[ye];H(ee,xt,L(xt),k)}return ee}function Zr(k,H){for(var L=-1,ee=k==null?0:k.length;++L<ee&&H(k[L],L,k)!==!1;);return k}function RO(k,H){for(var L=k==null?0:k.length;L--&&H(k[L],L,k)!==!1;);return k}function Yw(k,H){for(var L=-1,ee=k==null?0:k.length;++L<ee;)if(!H(k[L],L,k))return!1;return!0}function Li(k,H){for(var L=-1,ee=k==null?0:k.length,ye=0,Ve=[];++L<ee;){var xt=k[L];H(xt,L,k)&&(Ve[ye++]=xt)}return Ve}function Bp(k,H){var L=k==null?0:k.length;return!!L&&As(k,H,0)>-1}function Yy(k,H,L){for(var ee=-1,ye=k==null?0:k.length;++ee<ye;)if(L(H,k[ee]))return!0;return!1}function tt(k,H){for(var L=-1,ee=k==null?0:k.length,ye=Array(ee);++L<ee;)ye[L]=H(k[L],L,k);return ye}function Ui(k,H){for(var L=-1,ee=H.length,ye=k.length;++L<ee;)k[ye+L]=H[L];return k}function Xy(k,H,L,ee){var ye=-1,Ve=k==null?0:k.length;for(ee&&Ve&&(L=k[++ye]);++ye<Ve;)L=H(L,k[ye],ye,k);return L}function kO(k,H,L,ee){var ye=k==null?0:k.length;for(ee&&ye&&(L=k[--ye]);ye--;)L=H(L,k[ye],ye,k);return L}function Jy(k,H){for(var L=-1,ee=k==null?0:k.length;++L<ee;)if(H(k[L],L,k))return!0;return!1}var PO=ex("length");function MO(k){return k.split("")}function AO(k){return k.match(UC)||[]}function Xw(k,H,L){var ee;return L(k,function(ye,Ve,xt){if(H(ye,Ve,xt))return ee=Ve,!1}),ee}function Wp(k,H,L,ee){for(var ye=k.length,Ve=L+(ee?1:-1);ee?Ve--:++Ve<ye;)if(H(k[Ve],Ve,k))return Ve;return-1}function As(k,H,L){return H===H?WO(k,H,L):Wp(k,Jw,L)}function DO(k,H,L,ee){for(var ye=L-1,Ve=k.length;++ye<Ve;)if(ee(k[ye],H))return ye;return-1}function Jw(k){return k!==k}function e_(k,H){var L=k==null?0:k.length;return L?rx(k,H)/L:me}function ex(k){return function(H){return H==null?t:H[k]}}function tx(k){return function(H){return k==null?t:k[H]}}function t_(k,H,L,ee,ye){return ye(k,function(Ve,xt,Ge){L=ee?(ee=!1,Ve):H(L,Ve,xt,Ge)}),L}function IO(k,H){var L=k.length;for(k.sort(H);L--;)k[L]=k[L].value;return k}function rx(k,H){for(var L,ee=-1,ye=k.length;++ee<ye;){var Ve=H(k[ee]);Ve!==t&&(L=L===t?Ve:L+Ve)}return L}function nx(k,H){for(var L=-1,ee=Array(k);++L<k;)ee[L]=H(L);return ee}function FO(k,H){return tt(H,function(L){return[L,k[L]]})}function r_(k){return k&&k.slice(0,s_(k)+1).replace($y,"")}function Mr(k){return function(H){return k(H)}}function ix(k,H){return tt(H,function(L){return k[L]})}function wc(k,H){return k.has(H)}function n_(k,H){for(var L=-1,ee=k.length;++L<ee&&As(H,k[L],0)>-1;);return L}function i_(k,H){for(var L=k.length;L--&&As(H,k[L],0)>-1;);return L}function CO(k,H){for(var L=k.length,ee=0;L--;)k[L]===H&&++ee;return ee}var OO=tx(xO),NO=tx(SO);function LO(k){return"\\"+vO[k]}function UO(k,H){return k==null?t:k[H]}function Ds(k){return mO.test(k)}function HO(k){return hO.test(k)}function VO(k){for(var H,L=[];!(H=k.next()).done;)L.push(H.value);return L}function ox(k){var H=-1,L=Array(k.size);return k.forEach(function(ee,ye){L[++H]=[ye,ee]}),L}function o_(k,H){return function(L){return k(H(L))}}function Hi(k,H){for(var L=-1,ee=k.length,ye=0,Ve=[];++L<ee;){var xt=k[L];(xt===H||xt===p)&&(k[L]=p,Ve[ye++]=L)}return Ve}function $p(k){var H=-1,L=Array(k.size);return k.forEach(function(ee){L[++H]=ee}),L}function BO(k){var H=-1,L=Array(k.size);return k.forEach(function(ee){L[++H]=[ee,ee]}),L}function WO(k,H,L){for(var ee=L-1,ye=k.length;++ee<ye;)if(k[ee]===H)return ee;return-1}function $O(k,H,L){for(var ee=L+1;ee--;)if(k[ee]===H)return ee;return ee}function Is(k){return Ds(k)?qO(k):PO(k)}function _n(k){return Ds(k)?zO(k):MO(k)}function s_(k){for(var H=k.length;H--&&CC.test(k.charAt(H)););return H}var jO=tx(TO);function qO(k){for(var H=Ky.lastIndex=0;Ky.test(k);)++H;return H}function zO(k){return k.match(Ky)||[]}function GO(k){return k.match(dO)||[]}var KO=function k(H){H=H==null?_t:Vi.defaults(_t.Object(),H,Vi.pick(_t,gO));var L=H.Array,ee=H.Date,ye=H.Error,Ve=H.Function,xt=H.Math,Ge=H.Object,sx=H.RegExp,QO=H.String,Yr=H.TypeError,jp=L.prototype,ZO=Ve.prototype,Fs=Ge.prototype,qp=H["__core-js_shared__"],zp=ZO.toString,$e=Fs.hasOwnProperty,YO=0,a_=function(){var s=/[^.]+$/.exec(qp&&qp.keys&&qp.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Gp=Fs.toString,XO=zp.call(Ge),JO=_t._,eN=sx("^"+zp.call($e).replace(Wy,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kp=jw?H.Buffer:t,Bi=H.Symbol,Qp=H.Uint8Array,c_=Kp?Kp.allocUnsafe:t,Zp=o_(Ge.getPrototypeOf,Ge),l_=Ge.create,p_=Fs.propertyIsEnumerable,Yp=jp.splice,u_=Bi?Bi.isConcatSpreadable:t,_c=Bi?Bi.iterator:t,Do=Bi?Bi.toStringTag:t,Xp=function(){try{var s=No(Ge,"defineProperty");return s({},"",{}),s}catch{}}(),tN=H.clearTimeout!==_t.clearTimeout&&H.clearTimeout,rN=ee&&ee.now!==_t.Date.now&&ee.now,nN=H.setTimeout!==_t.setTimeout&&H.setTimeout,Jp=xt.ceil,eu=xt.floor,ax=Ge.getOwnPropertySymbols,iN=Kp?Kp.isBuffer:t,f_=H.isFinite,oN=jp.join,sN=o_(Ge.keys,Ge),St=xt.max,Ht=xt.min,aN=ee.now,cN=H.parseInt,d_=xt.random,lN=jp.reverse,cx=No(H,"DataView"),Ec=No(H,"Map"),lx=No(H,"Promise"),Cs=No(H,"Set"),Rc=No(H,"WeakMap"),kc=No(Ge,"create"),tu=Rc&&new Rc,Os={},pN=Lo(cx),uN=Lo(Ec),fN=Lo(lx),dN=Lo(Cs),mN=Lo(Rc),ru=Bi?Bi.prototype:t,Pc=ru?ru.valueOf:t,m_=ru?ru.toString:t;function S(s){if(at(s)&&!xe(s)&&!(s instanceof Ae)){if(s instanceof Xr)return s;if($e.call(s,"__wrapped__"))return h0(s)}return new Xr(s)}var Ns=function(){function s(){}return function(c){if(!it(c))return{};if(l_)return l_(c);s.prototype=c;var f=new s;return s.prototype=t,f}}();function nu(){}function Xr(s,c){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}S.templateSettings={escape:PC,evaluate:MC,interpolate:ww,variable:"",imports:{_:S}},S.prototype=nu.prototype,S.prototype.constructor=S,Xr.prototype=Ns(nu.prototype),Xr.prototype.constructor=Xr;function Ae(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function hN(){var s=new Ae(this.__wrapped__);return s.__actions__=cr(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=cr(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=cr(this.__views__),s}function gN(){if(this.__filtered__){var s=new Ae(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function yN(){var s=this.__wrapped__.value(),c=this.__dir__,f=xe(s),h=c<0,y=f?s.length:0,T=ML(0,y,this.__views__),E=T.start,R=T.end,D=R-E,V=h?R:E-1,B=this.__iteratees__,j=B.length,Y=0,ie=Ht(D,this.__takeCount__);if(!f||!h&&y==D&&ie==D)return U_(s,this.__actions__);var pe=[];e:for(;D--&&Y<ie;){V+=c;for(var Ee=-1,ue=s[V];++Ee<j;){var Pe=B[Ee],De=Pe.iteratee,Ir=Pe.type,Xt=De(ue);if(Ir==W)ue=Xt;else if(!Xt){if(Ir==I)continue e;break e}}pe[Y++]=ue}return pe}Ae.prototype=Ns(nu.prototype),Ae.prototype.constructor=Ae;function Io(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var h=s[c];this.set(h[0],h[1])}}function xN(){this.__data__=kc?kc(null):{},this.size=0}function SN(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}function TN(s){var c=this.__data__;if(kc){var f=c[s];return f===a?t:f}return $e.call(c,s)?c[s]:t}function vN(s){var c=this.__data__;return kc?c[s]!==t:$e.call(c,s)}function bN(s,c){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=kc&&c===t?a:c,this}Io.prototype.clear=xN,Io.prototype.delete=SN,Io.prototype.get=TN,Io.prototype.has=vN,Io.prototype.set=bN;function li(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var h=s[c];this.set(h[0],h[1])}}function wN(){this.__data__=[],this.size=0}function _N(s){var c=this.__data__,f=iu(c,s);if(f<0)return!1;var h=c.length-1;return f==h?c.pop():Yp.call(c,f,1),--this.size,!0}function EN(s){var c=this.__data__,f=iu(c,s);return f<0?t:c[f][1]}function RN(s){return iu(this.__data__,s)>-1}function kN(s,c){var f=this.__data__,h=iu(f,s);return h<0?(++this.size,f.push([s,c])):f[h][1]=c,this}li.prototype.clear=wN,li.prototype.delete=_N,li.prototype.get=EN,li.prototype.has=RN,li.prototype.set=kN;function pi(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var h=s[c];this.set(h[0],h[1])}}function PN(){this.size=0,this.__data__={hash:new Io,map:new(Ec||li),string:new Io}}function MN(s){var c=gu(this,s).delete(s);return this.size-=c?1:0,c}function AN(s){return gu(this,s).get(s)}function DN(s){return gu(this,s).has(s)}function IN(s,c){var f=gu(this,s),h=f.size;return f.set(s,c),this.size+=f.size==h?0:1,this}pi.prototype.clear=PN,pi.prototype.delete=MN,pi.prototype.get=AN,pi.prototype.has=DN,pi.prototype.set=IN;function Fo(s){var c=-1,f=s==null?0:s.length;for(this.__data__=new pi;++c<f;)this.add(s[c])}function FN(s){return this.__data__.set(s,a),this}function CN(s){return this.__data__.has(s)}Fo.prototype.add=Fo.prototype.push=FN,Fo.prototype.has=CN;function En(s){var c=this.__data__=new li(s);this.size=c.size}function ON(){this.__data__=new li,this.size=0}function NN(s){var c=this.__data__,f=c.delete(s);return this.size=c.size,f}function LN(s){return this.__data__.get(s)}function UN(s){return this.__data__.has(s)}function HN(s,c){var f=this.__data__;if(f instanceof li){var h=f.__data__;if(!Ec||h.length<r-1)return h.push([s,c]),this.size=++f.size,this;f=this.__data__=new pi(h)}return f.set(s,c),this.size=f.size,this}En.prototype.clear=ON,En.prototype.delete=NN,En.prototype.get=LN,En.prototype.has=UN,En.prototype.set=HN;function h_(s,c){var f=xe(s),h=!f&&Uo(s),y=!f&&!h&&zi(s),T=!f&&!h&&!y&&Vs(s),E=f||h||y||T,R=E?nx(s.length,QO):[],D=R.length;for(var V in s)(c||$e.call(s,V))&&!(E&&(V=="length"||y&&(V=="offset"||V=="parent")||T&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||mi(V,D)))&&R.push(V);return R}function g_(s){var c=s.length;return c?s[Tx(0,c-1)]:t}function VN(s,c){return yu(cr(s),Co(c,0,s.length))}function BN(s){return yu(cr(s))}function px(s,c,f){(f!==t&&!Rn(s[c],f)||f===t&&!(c in s))&&ui(s,c,f)}function Mc(s,c,f){var h=s[c];(!($e.call(s,c)&&Rn(h,f))||f===t&&!(c in s))&&ui(s,c,f)}function iu(s,c){for(var f=s.length;f--;)if(Rn(s[f][0],c))return f;return-1}function WN(s,c,f,h){return Wi(s,function(y,T,E){c(h,y,f(y),E)}),h}function y_(s,c){return s&&Bn(c,Et(c),s)}function $N(s,c){return s&&Bn(c,pr(c),s)}function ui(s,c,f){c=="__proto__"&&Xp?Xp(s,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[c]=f}function ux(s,c){for(var f=-1,h=c.length,y=L(h),T=s==null;++f<h;)y[f]=T?t:qx(s,c[f]);return y}function Co(s,c,f){return s===s&&(f!==t&&(s=s<=f?s:f),c!==t&&(s=s>=c?s:c)),s}function Jr(s,c,f,h,y,T){var E,R=c&u,D=c&d,V=c&m;if(f&&(E=y?f(s,h,y,T):f(s)),E!==t)return E;if(!it(s))return s;var B=xe(s);if(B){if(E=DL(s),!R)return cr(s,E)}else{var j=Vt(s),Y=j==ks||j==Sw;if(zi(s))return B_(s,R);if(j==ci||j==ar||Y&&!y){if(E=D||Y?{}:s0(s),!R)return D?TL(s,$N(E,s)):SL(s,y_(E,s))}else{if(!Ze[j])return y?s:{};E=IL(s,j,R)}}T||(T=new En);var ie=T.get(s);if(ie)return ie;T.set(s,E),O0(s)?s.forEach(function(ue){E.add(Jr(ue,c,f,ue,s,T))}):F0(s)&&s.forEach(function(ue,Pe){E.set(Pe,Jr(ue,c,f,Pe,s,T))});var pe=V?D?Dx:Ax:D?pr:Et,Ee=B?t:pe(s);return Zr(Ee||s,function(ue,Pe){Ee&&(Pe=ue,ue=s[Pe]),Mc(E,Pe,Jr(ue,c,f,Pe,s,T))}),E}function jN(s){var c=Et(s);return function(f){return x_(f,s,c)}}function x_(s,c,f){var h=f.length;if(s==null)return!h;for(s=Ge(s);h--;){var y=f[h],T=c[y],E=s[y];if(E===t&&!(y in s)||!T(E))return!1}return!0}function S_(s,c,f){if(typeof s!="function")throw new Yr(i);return Nc(function(){s.apply(t,f)},c)}function Ac(s,c,f,h){var y=-1,T=Bp,E=!0,R=s.length,D=[],V=c.length;if(!R)return D;f&&(c=tt(c,Mr(f))),h?(T=Yy,E=!1):c.length>=r&&(T=wc,E=!1,c=new Fo(c));e:for(;++y<R;){var B=s[y],j=f==null?B:f(B);if(B=h||B!==0?B:0,E&&j===j){for(var Y=V;Y--;)if(c[Y]===j)continue e;D.push(B)}else T(c,j,h)||D.push(B)}return D}var Wi=z_(Vn),T_=z_(dx,!0);function qN(s,c){var f=!0;return Wi(s,function(h,y,T){return f=!!c(h,y,T),f}),f}function ou(s,c,f){for(var h=-1,y=s.length;++h<y;){var T=s[h],E=c(T);if(E!=null&&(R===t?E===E&&!Dr(E):f(E,R)))var R=E,D=T}return D}function zN(s,c,f,h){var y=s.length;for(f=be(f),f<0&&(f=-f>y?0:y+f),h=h===t||h>y?y:be(h),h<0&&(h+=y),h=f>h?0:L0(h);f<h;)s[f++]=c;return s}function v_(s,c){var f=[];return Wi(s,function(h,y,T){c(h,y,T)&&f.push(h)}),f}function Ct(s,c,f,h,y){var T=-1,E=s.length;for(f||(f=CL),y||(y=[]);++T<E;){var R=s[T];c>0&&f(R)?c>1?Ct(R,c-1,f,h,y):Ui(y,R):h||(y[y.length]=R)}return y}var fx=G_(),b_=G_(!0);function Vn(s,c){return s&&fx(s,c,Et)}function dx(s,c){return s&&b_(s,c,Et)}function su(s,c){return Li(c,function(f){return hi(s[f])})}function Oo(s,c){c=ji(c,s);for(var f=0,h=c.length;s!=null&&f<h;)s=s[Wn(c[f++])];return f&&f==h?s:t}function w_(s,c,f){var h=c(s);return xe(s)?h:Ui(h,f(s))}function Zt(s){return s==null?s===t?vC:SC:Do&&Do in Ge(s)?PL(s):BL(s)}function mx(s,c){return s>c}function GN(s,c){return s!=null&&$e.call(s,c)}function KN(s,c){return s!=null&&c in Ge(s)}function QN(s,c,f){return s>=Ht(c,f)&&s<St(c,f)}function hx(s,c,f){for(var h=f?Yy:Bp,y=s[0].length,T=s.length,E=T,R=L(T),D=1/0,V=[];E--;){var B=s[E];E&&c&&(B=tt(B,Mr(c))),D=Ht(B.length,D),R[E]=!f&&(c||y>=120&&B.length>=120)?new Fo(E&&B):t}B=s[0];var j=-1,Y=R[0];e:for(;++j<y&&V.length<D;){var ie=B[j],pe=c?c(ie):ie;if(ie=f||ie!==0?ie:0,!(Y?wc(Y,pe):h(V,pe,f))){for(E=T;--E;){var Ee=R[E];if(!(Ee?wc(Ee,pe):h(s[E],pe,f)))continue e}Y&&Y.push(pe),V.push(ie)}}return V}function ZN(s,c,f,h){return Vn(s,function(y,T,E){c(h,f(y),T,E)}),h}function Dc(s,c,f){c=ji(c,s),s=p0(s,c);var h=s==null?s:s[Wn(tn(c))];return h==null?t:Pr(h,s,f)}function __(s){return at(s)&&Zt(s)==ar}function YN(s){return at(s)&&Zt(s)==bc}function XN(s){return at(s)&&Zt(s)==Kr}function Ic(s,c,f,h,y){return s===c?!0:s==null||c==null||!at(s)&&!at(c)?s!==s&&c!==c:JN(s,c,f,h,Ic,y)}function JN(s,c,f,h,y,T){var E=xe(s),R=xe(c),D=E?Tn:Vt(s),V=R?Tn:Vt(c);D=D==ar?ci:D,V=V==ar?ci:V;var B=D==ci,j=V==ci,Y=D==V;if(Y&&zi(s)){if(!zi(c))return!1;E=!0,B=!1}if(Y&&!B)return T||(T=new En),E||Vs(s)?n0(s,c,f,h,y,T):RL(s,c,D,f,h,y,T);if(!(f&g)){var ie=B&&$e.call(s,"__wrapped__"),pe=j&&$e.call(c,"__wrapped__");if(ie||pe){var Ee=ie?s.value():s,ue=pe?c.value():c;return T||(T=new En),y(Ee,ue,f,h,T)}}return Y?(T||(T=new En),kL(s,c,f,h,y,T)):!1}function eL(s){return at(s)&&Vt(s)==bn}function gx(s,c,f,h){var y=f.length,T=y,E=!h;if(s==null)return!T;for(s=Ge(s);y--;){var R=f[y];if(E&&R[2]?R[1]!==s[R[0]]:!(R[0]in s))return!1}for(;++y<T;){R=f[y];var D=R[0],V=s[D],B=R[1];if(E&&R[2]){if(V===t&&!(D in s))return!1}else{var j=new En;if(h)var Y=h(V,B,D,s,c,j);if(!(Y===t?Ic(B,V,g|x,h,j):Y))return!1}}return!0}function E_(s){if(!it(s)||NL(s))return!1;var c=hi(s)?eN:jC;return c.test(Lo(s))}function tL(s){return at(s)&&Zt(s)==Sc}function rL(s){return at(s)&&Vt(s)==wn}function nL(s){return at(s)&&wu(s.length)&&!!Xe[Zt(s)]}function R_(s){return typeof s=="function"?s:s==null?ur:typeof s=="object"?xe(s)?M_(s[0],s[1]):P_(s):K0(s)}function yx(s){if(!Oc(s))return sN(s);var c=[];for(var f in Ge(s))$e.call(s,f)&&f!="constructor"&&c.push(f);return c}function iL(s){if(!it(s))return VL(s);var c=Oc(s),f=[];for(var h in s)h=="constructor"&&(c||!$e.call(s,h))||f.push(h);return f}function xx(s,c){return s<c}function k_(s,c){var f=-1,h=lr(s)?L(s.length):[];return Wi(s,function(y,T,E){h[++f]=c(y,T,E)}),h}function P_(s){var c=Fx(s);return c.length==1&&c[0][2]?c0(c[0][0],c[0][1]):function(f){return f===s||gx(f,s,c)}}function M_(s,c){return Ox(s)&&a0(c)?c0(Wn(s),c):function(f){var h=qx(f,s);return h===t&&h===c?zx(f,s):Ic(c,h,g|x)}}function au(s,c,f,h,y){s!==c&&fx(c,function(T,E){if(y||(y=new En),it(T))oL(s,c,E,f,au,h,y);else{var R=h?h(Lx(s,E),T,E+"",s,c,y):t;R===t&&(R=T),px(s,E,R)}},pr)}function oL(s,c,f,h,y,T,E){var R=Lx(s,f),D=Lx(c,f),V=E.get(D);if(V){px(s,f,V);return}var B=T?T(R,D,f+"",s,c,E):t,j=B===t;if(j){var Y=xe(D),ie=!Y&&zi(D),pe=!Y&&!ie&&Vs(D);B=D,Y||ie||pe?xe(R)?B=R:ct(R)?B=cr(R):ie?(j=!1,B=B_(D,!0)):pe?(j=!1,B=W_(D,!0)):B=[]:Lc(D)||Uo(D)?(B=R,Uo(R)?B=U0(R):(!it(R)||hi(R))&&(B=s0(D))):j=!1}j&&(E.set(D,B),y(B,D,h,T,E),E.delete(D)),px(s,f,B)}function A_(s,c){var f=s.length;if(f)return c+=c<0?f:0,mi(c,f)?s[c]:t}function D_(s,c,f){c.length?c=tt(c,function(T){return xe(T)?function(E){return Oo(E,T.length===1?T[0]:T)}:T}):c=[ur];var h=-1;c=tt(c,Mr(le()));var y=k_(s,function(T,E,R){var D=tt(c,function(V){return V(T)});return{criteria:D,index:++h,value:T}});return IO(y,function(T,E){return xL(T,E,f)})}function sL(s,c){return I_(s,c,function(f,h){return zx(s,h)})}function I_(s,c,f){for(var h=-1,y=c.length,T={};++h<y;){var E=c[h],R=Oo(s,E);f(R,E)&&Fc(T,ji(E,s),R)}return T}function aL(s){return function(c){return Oo(c,s)}}function Sx(s,c,f,h){var y=h?DO:As,T=-1,E=c.length,R=s;for(s===c&&(c=cr(c)),f&&(R=tt(s,Mr(f)));++T<E;)for(var D=0,V=c[T],B=f?f(V):V;(D=y(R,B,D,h))>-1;)R!==s&&Yp.call(R,D,1),Yp.call(s,D,1);return s}function F_(s,c){for(var f=s?c.length:0,h=f-1;f--;){var y=c[f];if(f==h||y!==T){var T=y;mi(y)?Yp.call(s,y,1):wx(s,y)}}return s}function Tx(s,c){return s+eu(d_()*(c-s+1))}function cL(s,c,f,h){for(var y=-1,T=St(Jp((c-s)/(f||1)),0),E=L(T);T--;)E[h?T:++y]=s,s+=f;return E}function vx(s,c){var f="";if(!s||c<1||c>Z)return f;do c%2&&(f+=s),c=eu(c/2),c&&(s+=s);while(c);return f}function ke(s,c){return Ux(l0(s,c,ur),s+"")}function lL(s){return g_(Bs(s))}function pL(s,c){var f=Bs(s);return yu(f,Co(c,0,f.length))}function Fc(s,c,f,h){if(!it(s))return s;c=ji(c,s);for(var y=-1,T=c.length,E=T-1,R=s;R!=null&&++y<T;){var D=Wn(c[y]),V=f;if(D==="__proto__"||D==="constructor"||D==="prototype")return s;if(y!=E){var B=R[D];V=h?h(B,D,R):t,V===t&&(V=it(B)?B:mi(c[y+1])?[]:{})}Mc(R,D,V),R=R[D]}return s}var C_=tu?function(s,c){return tu.set(s,c),s}:ur,uL=Xp?function(s,c){return Xp(s,"toString",{configurable:!0,enumerable:!1,value:Kx(c),writable:!0})}:ur;function fL(s){return yu(Bs(s))}function en(s,c,f){var h=-1,y=s.length;c<0&&(c=-c>y?0:y+c),f=f>y?y:f,f<0&&(f+=y),y=c>f?0:f-c>>>0,c>>>=0;for(var T=L(y);++h<y;)T[h]=s[h+c];return T}function dL(s,c){var f;return Wi(s,function(h,y,T){return f=c(h,y,T),!f}),!!f}function cu(s,c,f){var h=0,y=s==null?h:s.length;if(typeof c=="number"&&c===c&&y<=sr){for(;h<y;){var T=h+y>>>1,E=s[T];E!==null&&!Dr(E)&&(f?E<=c:E<c)?h=T+1:y=T}return y}return bx(s,c,ur,f)}function bx(s,c,f,h){var y=0,T=s==null?0:s.length;if(T===0)return 0;c=f(c);for(var E=c!==c,R=c===null,D=Dr(c),V=c===t;y<T;){var B=eu((y+T)/2),j=f(s[B]),Y=j!==t,ie=j===null,pe=j===j,Ee=Dr(j);if(E)var ue=h||pe;else V?ue=pe&&(h||Y):R?ue=pe&&Y&&(h||!ie):D?ue=pe&&Y&&!ie&&(h||!Ee):ie||Ee?ue=!1:ue=h?j<=c:j<c;ue?y=B+1:T=B}return Ht(T,Re)}function O_(s,c){for(var f=-1,h=s.length,y=0,T=[];++f<h;){var E=s[f],R=c?c(E):E;if(!f||!Rn(R,D)){var D=R;T[y++]=E===0?0:E}}return T}function N_(s){return typeof s=="number"?s:Dr(s)?me:+s}function Ar(s){if(typeof s=="string")return s;if(xe(s))return tt(s,Ar)+"";if(Dr(s))return m_?m_.call(s):"";var c=s+"";return c=="0"&&1/s==-Q?"-0":c}function $i(s,c,f){var h=-1,y=Bp,T=s.length,E=!0,R=[],D=R;if(f)E=!1,y=Yy;else if(T>=r){var V=c?null:_L(s);if(V)return $p(V);E=!1,y=wc,D=new Fo}else D=c?[]:R;e:for(;++h<T;){var B=s[h],j=c?c(B):B;if(B=f||B!==0?B:0,E&&j===j){for(var Y=D.length;Y--;)if(D[Y]===j)continue e;c&&D.push(j),R.push(B)}else y(D,j,f)||(D!==R&&D.push(j),R.push(B))}return R}function wx(s,c){return c=ji(c,s),s=p0(s,c),s==null||delete s[Wn(tn(c))]}function L_(s,c,f,h){return Fc(s,c,f(Oo(s,c)),h)}function lu(s,c,f,h){for(var y=s.length,T=h?y:-1;(h?T--:++T<y)&&c(s[T],T,s););return f?en(s,h?0:T,h?T+1:y):en(s,h?T+1:0,h?y:T)}function U_(s,c){var f=s;return f instanceof Ae&&(f=f.value()),Xy(c,function(h,y){return y.func.apply(y.thisArg,Ui([h],y.args))},f)}function _x(s,c,f){var h=s.length;if(h<2)return h?$i(s[0]):[];for(var y=-1,T=L(h);++y<h;)for(var E=s[y],R=-1;++R<h;)R!=y&&(T[y]=Ac(T[y]||E,s[R],c,f));return $i(Ct(T,1),c,f)}function H_(s,c,f){for(var h=-1,y=s.length,T=c.length,E={};++h<y;){var R=h<T?c[h]:t;f(E,s[h],R)}return E}function Ex(s){return ct(s)?s:[]}function Rx(s){return typeof s=="function"?s:ur}function ji(s,c){return xe(s)?s:Ox(s,c)?[s]:m0(We(s))}var mL=ke;function qi(s,c,f){var h=s.length;return f=f===t?h:f,!c&&f>=h?s:en(s,c,f)}var V_=tN||function(s){return _t.clearTimeout(s)};function B_(s,c){if(c)return s.slice();var f=s.length,h=c_?c_(f):new s.constructor(f);return s.copy(h),h}function kx(s){var c=new s.constructor(s.byteLength);return new Qp(c).set(new Qp(s)),c}function hL(s,c){var f=c?kx(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.byteLength)}function gL(s){var c=new s.constructor(s.source,_w.exec(s));return c.lastIndex=s.lastIndex,c}function yL(s){return Pc?Ge(Pc.call(s)):{}}function W_(s,c){var f=c?kx(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}function $_(s,c){if(s!==c){var f=s!==t,h=s===null,y=s===s,T=Dr(s),E=c!==t,R=c===null,D=c===c,V=Dr(c);if(!R&&!V&&!T&&s>c||T&&E&&D&&!R&&!V||h&&E&&D||!f&&D||!y)return 1;if(!h&&!T&&!V&&s<c||V&&f&&y&&!h&&!T||R&&f&&y||!E&&y||!D)return-1}return 0}function xL(s,c,f){for(var h=-1,y=s.criteria,T=c.criteria,E=y.length,R=f.length;++h<E;){var D=$_(y[h],T[h]);if(D){if(h>=R)return D;var V=f[h];return D*(V=="desc"?-1:1)}}return s.index-c.index}function j_(s,c,f,h){for(var y=-1,T=s.length,E=f.length,R=-1,D=c.length,V=St(T-E,0),B=L(D+V),j=!h;++R<D;)B[R]=c[R];for(;++y<E;)(j||y<T)&&(B[f[y]]=s[y]);for(;V--;)B[R++]=s[y++];return B}function q_(s,c,f,h){for(var y=-1,T=s.length,E=-1,R=f.length,D=-1,V=c.length,B=St(T-R,0),j=L(B+V),Y=!h;++y<B;)j[y]=s[y];for(var ie=y;++D<V;)j[ie+D]=c[D];for(;++E<R;)(Y||y<T)&&(j[ie+f[E]]=s[y++]);return j}function cr(s,c){var f=-1,h=s.length;for(c||(c=L(h));++f<h;)c[f]=s[f];return c}function Bn(s,c,f,h){var y=!f;f||(f={});for(var T=-1,E=c.length;++T<E;){var R=c[T],D=h?h(f[R],s[R],R,f,s):t;D===t&&(D=s[R]),y?ui(f,R,D):Mc(f,R,D)}return f}function SL(s,c){return Bn(s,Cx(s),c)}function TL(s,c){return Bn(s,i0(s),c)}function pu(s,c){return function(f,h){var y=xe(f)?EO:WN,T=c?c():{};return y(f,s,le(h,2),T)}}function Ls(s){return ke(function(c,f){var h=-1,y=f.length,T=y>1?f[y-1]:t,E=y>2?f[2]:t;for(T=s.length>3&&typeof T=="function"?(y--,T):t,E&&Yt(f[0],f[1],E)&&(T=y<3?t:T,y=1),c=Ge(c);++h<y;){var R=f[h];R&&s(c,R,h,T)}return c})}function z_(s,c){return function(f,h){if(f==null)return f;if(!lr(f))return s(f,h);for(var y=f.length,T=c?y:-1,E=Ge(f);(c?T--:++T<y)&&h(E[T],T,E)!==!1;);return f}}function G_(s){return function(c,f,h){for(var y=-1,T=Ge(c),E=h(c),R=E.length;R--;){var D=E[s?R:++y];if(f(T[D],D,T)===!1)break}return c}}function vL(s,c,f){var h=c&w,y=Cc(s);function T(){var E=this&&this!==_t&&this instanceof T?y:s;return E.apply(h?f:this,arguments)}return T}function K_(s){return function(c){c=We(c);var f=Ds(c)?_n(c):t,h=f?f[0]:c.charAt(0),y=f?qi(f,1).join(""):c.slice(1);return h[s]()+y}}function Us(s){return function(c){return Xy(z0(q0(c).replace(uO,"")),s,"")}}function Cc(s){return function(){var c=arguments;switch(c.length){case 0:return new s;case 1:return new s(c[0]);case 2:return new s(c[0],c[1]);case 3:return new s(c[0],c[1],c[2]);case 4:return new s(c[0],c[1],c[2],c[3]);case 5:return new s(c[0],c[1],c[2],c[3],c[4]);case 6:return new s(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new s(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=Ns(s.prototype),h=s.apply(f,c);return it(h)?h:f}}function bL(s,c,f){var h=Cc(s);function y(){for(var T=arguments.length,E=L(T),R=T,D=Hs(y);R--;)E[R]=arguments[R];var V=T<3&&E[0]!==D&&E[T-1]!==D?[]:Hi(E,D);if(T-=V.length,T<f)return J_(s,c,uu,y.placeholder,t,E,V,t,t,f-T);var B=this&&this!==_t&&this instanceof y?h:s;return Pr(B,this,E)}return y}function Q_(s){return function(c,f,h){var y=Ge(c);if(!lr(c)){var T=le(f,3);c=Et(c),f=function(R){return T(y[R],R,y)}}var E=s(c,f,h);return E>-1?y[T?c[E]:E]:t}}function Z_(s){return di(function(c){var f=c.length,h=f,y=Xr.prototype.thru;for(s&&c.reverse();h--;){var T=c[h];if(typeof T!="function")throw new Yr(i);if(y&&!E&&hu(T)=="wrapper")var E=new Xr([],!0)}for(h=E?h:f;++h<f;){T=c[h];var R=hu(T),D=R=="wrapper"?Ix(T):t;D&&Nx(D[0])&&D[1]==(ge|M|K|de)&&!D[4].length&&D[9]==1?E=E[hu(D[0])].apply(E,D[3]):E=T.length==1&&Nx(T)?E[R]():E.thru(T)}return function(){var V=arguments,B=V[0];if(E&&V.length==1&&xe(B))return E.plant(B).value();for(var j=0,Y=f?c[j].apply(this,V):B;++j<f;)Y=c[j].call(this,Y);return Y}})}function uu(s,c,f,h,y,T,E,R,D,V){var B=c&ge,j=c&w,Y=c&v,ie=c&(M|U),pe=c&gt,Ee=Y?t:Cc(s);function ue(){for(var Pe=arguments.length,De=L(Pe),Ir=Pe;Ir--;)De[Ir]=arguments[Ir];if(ie)var Xt=Hs(ue),Fr=CO(De,Xt);if(h&&(De=j_(De,h,y,ie)),T&&(De=q_(De,T,E,ie)),Pe-=Fr,ie&&Pe<V){var lt=Hi(De,Xt);return J_(s,c,uu,ue.placeholder,f,De,lt,R,D,V-Pe)}var kn=j?f:this,yi=Y?kn[s]:s;return Pe=De.length,R?De=WL(De,R):pe&&Pe>1&&De.reverse(),B&&D<Pe&&(De.length=D),this&&this!==_t&&this instanceof ue&&(yi=Ee||Cc(yi)),yi.apply(kn,De)}return ue}function Y_(s,c){return function(f,h){return ZN(f,s,c(h),{})}}function fu(s,c){return function(f,h){var y;if(f===t&&h===t)return c;if(f!==t&&(y=f),h!==t){if(y===t)return h;typeof f=="string"||typeof h=="string"?(f=Ar(f),h=Ar(h)):(f=N_(f),h=N_(h)),y=s(f,h)}return y}}function Px(s){return di(function(c){return c=tt(c,Mr(le())),ke(function(f){var h=this;return s(c,function(y){return Pr(y,h,f)})})})}function du(s,c){c=c===t?" ":Ar(c);var f=c.length;if(f<2)return f?vx(c,s):c;var h=vx(c,Jp(s/Is(c)));return Ds(c)?qi(_n(h),0,s).join(""):h.slice(0,s)}function wL(s,c,f,h){var y=c&w,T=Cc(s);function E(){for(var R=-1,D=arguments.length,V=-1,B=h.length,j=L(B+D),Y=this&&this!==_t&&this instanceof E?T:s;++V<B;)j[V]=h[V];for(;D--;)j[V++]=arguments[++R];return Pr(Y,y?f:this,j)}return E}function X_(s){return function(c,f,h){return h&&typeof h!="number"&&Yt(c,f,h)&&(f=h=t),c=gi(c),f===t?(f=c,c=0):f=gi(f),h=h===t?c<f?1:-1:gi(h),cL(c,f,h,s)}}function mu(s){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=rn(c),f=rn(f)),s(c,f)}}function J_(s,c,f,h,y,T,E,R,D,V){var B=c&M,j=B?E:t,Y=B?t:E,ie=B?T:t,pe=B?t:T;c|=B?K:ne,c&=~(B?ne:K),c&F||(c&=~(w|v));var Ee=[s,c,y,ie,j,pe,Y,R,D,V],ue=f.apply(t,Ee);return Nx(s)&&u0(ue,Ee),ue.placeholder=h,f0(ue,s,c)}function Mx(s){var c=xt[s];return function(f,h){if(f=rn(f),h=h==null?0:Ht(be(h),292),h&&f_(f)){var y=(We(f)+"e").split("e"),T=c(y[0]+"e"+(+y[1]+h));return y=(We(T)+"e").split("e"),+(y[0]+"e"+(+y[1]-h))}return c(f)}}var _L=Cs&&1/$p(new Cs([,-0]))[1]==Q?function(s){return new Cs(s)}:Yx;function e0(s){return function(c){var f=Vt(c);return f==bn?ox(c):f==wn?BO(c):FO(c,s(c))}}function fi(s,c,f,h,y,T,E,R){var D=c&v;if(!D&&typeof s!="function")throw new Yr(i);var V=h?h.length:0;if(V||(c&=~(K|ne),h=y=t),E=E===t?E:St(be(E),0),R=R===t?R:be(R),V-=y?y.length:0,c&ne){var B=h,j=y;h=y=t}var Y=D?t:Ix(s),ie=[s,c,f,h,y,B,j,T,E,R];if(Y&&HL(ie,Y),s=ie[0],c=ie[1],f=ie[2],h=ie[3],y=ie[4],R=ie[9]=ie[9]===t?D?0:s.length:St(ie[9]-V,0),!R&&c&(M|U)&&(c&=~(M|U)),!c||c==w)var pe=vL(s,c,f);else c==M||c==U?pe=bL(s,c,R):(c==K||c==(w|K))&&!y.length?pe=wL(s,c,f,h):pe=uu.apply(t,ie);var Ee=Y?C_:u0;return f0(Ee(pe,ie),s,c)}function t0(s,c,f,h){return s===t||Rn(s,Fs[f])&&!$e.call(h,f)?c:s}function r0(s,c,f,h,y,T){return it(s)&&it(c)&&(T.set(c,s),au(s,c,t,r0,T),T.delete(c)),s}function EL(s){return Lc(s)?t:s}function n0(s,c,f,h,y,T){var E=f&g,R=s.length,D=c.length;if(R!=D&&!(E&&D>R))return!1;var V=T.get(s),B=T.get(c);if(V&&B)return V==c&&B==s;var j=-1,Y=!0,ie=f&x?new Fo:t;for(T.set(s,c),T.set(c,s);++j<R;){var pe=s[j],Ee=c[j];if(h)var ue=E?h(Ee,pe,j,c,s,T):h(pe,Ee,j,s,c,T);if(ue!==t){if(ue)continue;Y=!1;break}if(ie){if(!Jy(c,function(Pe,De){if(!wc(ie,De)&&(pe===Pe||y(pe,Pe,f,h,T)))return ie.push(De)})){Y=!1;break}}else if(!(pe===Ee||y(pe,Ee,f,h,T))){Y=!1;break}}return T.delete(s),T.delete(c),Y}function RL(s,c,f,h,y,T,E){switch(f){case Ps:if(s.byteLength!=c.byteLength||s.byteOffset!=c.byteOffset)return!1;s=s.buffer,c=c.buffer;case bc:return!(s.byteLength!=c.byteLength||!T(new Qp(s),new Qp(c)));case vn:case Kr:case xc:return Rn(+s,+c);case ai:return s.name==c.name&&s.message==c.message;case Sc:case Tc:return s==c+"";case bn:var R=ox;case wn:var D=h&g;if(R||(R=$p),s.size!=c.size&&!D)return!1;var V=E.get(s);if(V)return V==c;h|=x,E.set(s,c);var B=n0(R(s),R(c),h,y,T,E);return E.delete(s),B;case Lp:if(Pc)return Pc.call(s)==Pc.call(c)}return!1}function kL(s,c,f,h,y,T){var E=f&g,R=Ax(s),D=R.length,V=Ax(c),B=V.length;if(D!=B&&!E)return!1;for(var j=D;j--;){var Y=R[j];if(!(E?Y in c:$e.call(c,Y)))return!1}var ie=T.get(s),pe=T.get(c);if(ie&&pe)return ie==c&&pe==s;var Ee=!0;T.set(s,c),T.set(c,s);for(var ue=E;++j<D;){Y=R[j];var Pe=s[Y],De=c[Y];if(h)var Ir=E?h(De,Pe,Y,c,s,T):h(Pe,De,Y,s,c,T);if(!(Ir===t?Pe===De||y(Pe,De,f,h,T):Ir)){Ee=!1;break}ue||(ue=Y=="constructor")}if(Ee&&!ue){var Xt=s.constructor,Fr=c.constructor;Xt!=Fr&&"constructor"in s&&"constructor"in c&&!(typeof Xt=="function"&&Xt instanceof Xt&&typeof Fr=="function"&&Fr instanceof Fr)&&(Ee=!1)}return T.delete(s),T.delete(c),Ee}function di(s){return Ux(l0(s,t,x0),s+"")}function Ax(s){return w_(s,Et,Cx)}function Dx(s){return w_(s,pr,i0)}var Ix=tu?function(s){return tu.get(s)}:Yx;function hu(s){for(var c=s.name+"",f=Os[c],h=$e.call(Os,c)?f.length:0;h--;){var y=f[h],T=y.func;if(T==null||T==s)return y.name}return c}function Hs(s){var c=$e.call(S,"placeholder")?S:s;return c.placeholder}function le(){var s=S.iteratee||Qx;return s=s===Qx?R_:s,arguments.length?s(arguments[0],arguments[1]):s}function gu(s,c){var f=s.__data__;return OL(c)?f[typeof c=="string"?"string":"hash"]:f.map}function Fx(s){for(var c=Et(s),f=c.length;f--;){var h=c[f],y=s[h];c[f]=[h,y,a0(y)]}return c}function No(s,c){var f=UO(s,c);return E_(f)?f:t}function PL(s){var c=$e.call(s,Do),f=s[Do];try{s[Do]=t;var h=!0}catch{}var y=Gp.call(s);return h&&(c?s[Do]=f:delete s[Do]),y}var Cx=ax?function(s){return s==null?[]:(s=Ge(s),Li(ax(s),function(c){return p_.call(s,c)}))}:Xx,i0=ax?function(s){for(var c=[];s;)Ui(c,Cx(s)),s=Zp(s);return c}:Xx,Vt=Zt;(cx&&Vt(new cx(new ArrayBuffer(1)))!=Ps||Ec&&Vt(new Ec)!=bn||lx&&Vt(lx.resolve())!=Tw||Cs&&Vt(new Cs)!=wn||Rc&&Vt(new Rc)!=vc)&&(Vt=function(s){var c=Zt(s),f=c==ci?s.constructor:t,h=f?Lo(f):"";if(h)switch(h){case pN:return Ps;case uN:return bn;case fN:return Tw;case dN:return wn;case mN:return vc}return c});function ML(s,c,f){for(var h=-1,y=f.length;++h<y;){var T=f[h],E=T.size;switch(T.type){case"drop":s+=E;break;case"dropRight":c-=E;break;case"take":c=Ht(c,s+E);break;case"takeRight":s=St(s,c-E);break}}return{start:s,end:c}}function AL(s){var c=s.match(NC);return c?c[1].split(LC):[]}function o0(s,c,f){c=ji(c,s);for(var h=-1,y=c.length,T=!1;++h<y;){var E=Wn(c[h]);if(!(T=s!=null&&f(s,E)))break;s=s[E]}return T||++h!=y?T:(y=s==null?0:s.length,!!y&&wu(y)&&mi(E,y)&&(xe(s)||Uo(s)))}function DL(s){var c=s.length,f=new s.constructor(c);return c&&typeof s[0]=="string"&&$e.call(s,"index")&&(f.index=s.index,f.input=s.input),f}function s0(s){return typeof s.constructor=="function"&&!Oc(s)?Ns(Zp(s)):{}}function IL(s,c,f){var h=s.constructor;switch(c){case bc:return kx(s);case vn:case Kr:return new h(+s);case Ps:return hL(s,f);case Fy:case Cy:case Oy:case Ny:case Ly:case Uy:case Hy:case Vy:case By:return W_(s,f);case bn:return new h;case xc:case Tc:return new h(s);case Sc:return gL(s);case wn:return new h;case Lp:return yL(s)}}function FL(s,c){var f=c.length;if(!f)return s;var h=f-1;return c[h]=(f>1?"& ":"")+c[h],c=c.join(f>2?", ":" "),s.replace(OC,`{
/* [wrapped with `+c+`] */
`)}function CL(s){return xe(s)||Uo(s)||!!(u_&&s&&s[u_])}function mi(s,c){var f=typeof s;return c=c??Z,!!c&&(f=="number"||f!="symbol"&&zC.test(s))&&s>-1&&s%1==0&&s<c}function Yt(s,c,f){if(!it(f))return!1;var h=typeof c;return(h=="number"?lr(f)&&mi(c,f.length):h=="string"&&c in f)?Rn(f[c],s):!1}function Ox(s,c){if(xe(s))return!1;var f=typeof s;return f=="number"||f=="symbol"||f=="boolean"||s==null||Dr(s)?!0:DC.test(s)||!AC.test(s)||c!=null&&s in Ge(c)}function OL(s){var c=typeof s;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?s!=="__proto__":s===null}function Nx(s){var c=hu(s),f=S[c];if(typeof f!="function"||!(c in Ae.prototype))return!1;if(s===f)return!0;var h=Ix(f);return!!h&&s===h[0]}function NL(s){return!!a_&&a_ in s}var LL=qp?hi:Jx;function Oc(s){var c=s&&s.constructor,f=typeof c=="function"&&c.prototype||Fs;return s===f}function a0(s){return s===s&&!it(s)}function c0(s,c){return function(f){return f==null?!1:f[s]===c&&(c!==t||s in Ge(f))}}function UL(s){var c=vu(s,function(h){return f.size===l&&f.clear(),h}),f=c.cache;return c}function HL(s,c){var f=s[1],h=c[1],y=f|h,T=y<(w|v|ge),E=h==ge&&f==M||h==ge&&f==de&&s[7].length<=c[8]||h==(ge|de)&&c[7].length<=c[8]&&f==M;if(!(T||E))return s;h&w&&(s[2]=c[2],y|=f&w?0:F);var R=c[3];if(R){var D=s[3];s[3]=D?j_(D,R,c[4]):R,s[4]=D?Hi(s[3],p):c[4]}return R=c[5],R&&(D=s[5],s[5]=D?q_(D,R,c[6]):R,s[6]=D?Hi(s[5],p):c[6]),R=c[7],R&&(s[7]=R),h&ge&&(s[8]=s[8]==null?c[8]:Ht(s[8],c[8])),s[9]==null&&(s[9]=c[9]),s[0]=c[0],s[1]=y,s}function VL(s){var c=[];if(s!=null)for(var f in Ge(s))c.push(f);return c}function BL(s){return Gp.call(s)}function l0(s,c,f){return c=St(c===t?s.length-1:c,0),function(){for(var h=arguments,y=-1,T=St(h.length-c,0),E=L(T);++y<T;)E[y]=h[c+y];y=-1;for(var R=L(c+1);++y<c;)R[y]=h[y];return R[c]=f(E),Pr(s,this,R)}}function p0(s,c){return c.length<2?s:Oo(s,en(c,0,-1))}function WL(s,c){for(var f=s.length,h=Ht(c.length,f),y=cr(s);h--;){var T=c[h];s[h]=mi(T,f)?y[T]:t}return s}function Lx(s,c){if(!(c==="constructor"&&typeof s[c]=="function")&&c!="__proto__")return s[c]}var u0=d0(C_),Nc=nN||function(s,c){return _t.setTimeout(s,c)},Ux=d0(uL);function f0(s,c,f){var h=c+"";return Ux(s,FL(h,$L(AL(h),f)))}function d0(s){var c=0,f=0;return function(){var h=aN(),y=O-(h-f);if(f=h,y>0){if(++c>=N)return arguments[0]}else c=0;return s.apply(t,arguments)}}function yu(s,c){var f=-1,h=s.length,y=h-1;for(c=c===t?h:c;++f<c;){var T=Tx(f,y),E=s[T];s[T]=s[f],s[f]=E}return s.length=c,s}var m0=UL(function(s){var c=[];return s.charCodeAt(0)===46&&c.push(""),s.replace(IC,function(f,h,y,T){c.push(y?T.replace(VC,"$1"):h||f)}),c});function Wn(s){if(typeof s=="string"||Dr(s))return s;var c=s+"";return c=="0"&&1/s==-Q?"-0":c}function Lo(s){if(s!=null){try{return zp.call(s)}catch{}try{return s+""}catch{}}return""}function $L(s,c){return Zr(si,function(f){var h="_."+f[0];c&f[1]&&!Bp(s,h)&&s.push(h)}),s.sort()}function h0(s){if(s instanceof Ae)return s.clone();var c=new Xr(s.__wrapped__,s.__chain__);return c.__actions__=cr(s.__actions__),c.__index__=s.__index__,c.__values__=s.__values__,c}function jL(s,c,f){(f?Yt(s,c,f):c===t)?c=1:c=St(be(c),0);var h=s==null?0:s.length;if(!h||c<1)return[];for(var y=0,T=0,E=L(Jp(h/c));y<h;)E[T++]=en(s,y,y+=c);return E}function qL(s){for(var c=-1,f=s==null?0:s.length,h=0,y=[];++c<f;){var T=s[c];T&&(y[h++]=T)}return y}function zL(){var s=arguments.length;if(!s)return[];for(var c=L(s-1),f=arguments[0],h=s;h--;)c[h-1]=arguments[h];return Ui(xe(f)?cr(f):[f],Ct(c,1))}var GL=ke(function(s,c){return ct(s)?Ac(s,Ct(c,1,ct,!0)):[]}),KL=ke(function(s,c){var f=tn(c);return ct(f)&&(f=t),ct(s)?Ac(s,Ct(c,1,ct,!0),le(f,2)):[]}),QL=ke(function(s,c){var f=tn(c);return ct(f)&&(f=t),ct(s)?Ac(s,Ct(c,1,ct,!0),t,f):[]});function ZL(s,c,f){var h=s==null?0:s.length;return h?(c=f||c===t?1:be(c),en(s,c<0?0:c,h)):[]}function YL(s,c,f){var h=s==null?0:s.length;return h?(c=f||c===t?1:be(c),c=h-c,en(s,0,c<0?0:c)):[]}function XL(s,c){return s&&s.length?lu(s,le(c,3),!0,!0):[]}function JL(s,c){return s&&s.length?lu(s,le(c,3),!0):[]}function eU(s,c,f,h){var y=s==null?0:s.length;return y?(f&&typeof f!="number"&&Yt(s,c,f)&&(f=0,h=y),zN(s,c,f,h)):[]}function g0(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=f==null?0:be(f);return y<0&&(y=St(h+y,0)),Wp(s,le(c,3),y)}function y0(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=h-1;return f!==t&&(y=be(f),y=f<0?St(h+y,0):Ht(y,h-1)),Wp(s,le(c,3),y,!0)}function x0(s){var c=s==null?0:s.length;return c?Ct(s,1):[]}function tU(s){var c=s==null?0:s.length;return c?Ct(s,Q):[]}function rU(s,c){var f=s==null?0:s.length;return f?(c=c===t?1:be(c),Ct(s,c)):[]}function nU(s){for(var c=-1,f=s==null?0:s.length,h={};++c<f;){var y=s[c];h[y[0]]=y[1]}return h}function S0(s){return s&&s.length?s[0]:t}function iU(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=f==null?0:be(f);return y<0&&(y=St(h+y,0)),As(s,c,y)}function oU(s){var c=s==null?0:s.length;return c?en(s,0,-1):[]}var sU=ke(function(s){var c=tt(s,Ex);return c.length&&c[0]===s[0]?hx(c):[]}),aU=ke(function(s){var c=tn(s),f=tt(s,Ex);return c===tn(f)?c=t:f.pop(),f.length&&f[0]===s[0]?hx(f,le(c,2)):[]}),cU=ke(function(s){var c=tn(s),f=tt(s,Ex);return c=typeof c=="function"?c:t,c&&f.pop(),f.length&&f[0]===s[0]?hx(f,t,c):[]});function lU(s,c){return s==null?"":oN.call(s,c)}function tn(s){var c=s==null?0:s.length;return c?s[c-1]:t}function pU(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=h;return f!==t&&(y=be(f),y=y<0?St(h+y,0):Ht(y,h-1)),c===c?$O(s,c,y):Wp(s,Jw,y,!0)}function uU(s,c){return s&&s.length?A_(s,be(c)):t}var fU=ke(T0);function T0(s,c){return s&&s.length&&c&&c.length?Sx(s,c):s}function dU(s,c,f){return s&&s.length&&c&&c.length?Sx(s,c,le(f,2)):s}function mU(s,c,f){return s&&s.length&&c&&c.length?Sx(s,c,t,f):s}var hU=di(function(s,c){var f=s==null?0:s.length,h=ux(s,c);return F_(s,tt(c,function(y){return mi(y,f)?+y:y}).sort($_)),h});function gU(s,c){var f=[];if(!(s&&s.length))return f;var h=-1,y=[],T=s.length;for(c=le(c,3);++h<T;){var E=s[h];c(E,h,s)&&(f.push(E),y.push(h))}return F_(s,y),f}function Hx(s){return s==null?s:lN.call(s)}function yU(s,c,f){var h=s==null?0:s.length;return h?(f&&typeof f!="number"&&Yt(s,c,f)?(c=0,f=h):(c=c==null?0:be(c),f=f===t?h:be(f)),en(s,c,f)):[]}function xU(s,c){return cu(s,c)}function SU(s,c,f){return bx(s,c,le(f,2))}function TU(s,c){var f=s==null?0:s.length;if(f){var h=cu(s,c);if(h<f&&Rn(s[h],c))return h}return-1}function vU(s,c){return cu(s,c,!0)}function bU(s,c,f){return bx(s,c,le(f,2),!0)}function wU(s,c){var f=s==null?0:s.length;if(f){var h=cu(s,c,!0)-1;if(Rn(s[h],c))return h}return-1}function _U(s){return s&&s.length?O_(s):[]}function EU(s,c){return s&&s.length?O_(s,le(c,2)):[]}function RU(s){var c=s==null?0:s.length;return c?en(s,1,c):[]}function kU(s,c,f){return s&&s.length?(c=f||c===t?1:be(c),en(s,0,c<0?0:c)):[]}function PU(s,c,f){var h=s==null?0:s.length;return h?(c=f||c===t?1:be(c),c=h-c,en(s,c<0?0:c,h)):[]}function MU(s,c){return s&&s.length?lu(s,le(c,3),!1,!0):[]}function AU(s,c){return s&&s.length?lu(s,le(c,3)):[]}var DU=ke(function(s){return $i(Ct(s,1,ct,!0))}),IU=ke(function(s){var c=tn(s);return ct(c)&&(c=t),$i(Ct(s,1,ct,!0),le(c,2))}),FU=ke(function(s){var c=tn(s);return c=typeof c=="function"?c:t,$i(Ct(s,1,ct,!0),t,c)});function CU(s){return s&&s.length?$i(s):[]}function OU(s,c){return s&&s.length?$i(s,le(c,2)):[]}function NU(s,c){return c=typeof c=="function"?c:t,s&&s.length?$i(s,t,c):[]}function Vx(s){if(!(s&&s.length))return[];var c=0;return s=Li(s,function(f){if(ct(f))return c=St(f.length,c),!0}),nx(c,function(f){return tt(s,ex(f))})}function v0(s,c){if(!(s&&s.length))return[];var f=Vx(s);return c==null?f:tt(f,function(h){return Pr(c,t,h)})}var LU=ke(function(s,c){return ct(s)?Ac(s,c):[]}),UU=ke(function(s){return _x(Li(s,ct))}),HU=ke(function(s){var c=tn(s);return ct(c)&&(c=t),_x(Li(s,ct),le(c,2))}),VU=ke(function(s){var c=tn(s);return c=typeof c=="function"?c:t,_x(Li(s,ct),t,c)}),BU=ke(Vx);function WU(s,c){return H_(s||[],c||[],Mc)}function $U(s,c){return H_(s||[],c||[],Fc)}var jU=ke(function(s){var c=s.length,f=c>1?s[c-1]:t;return f=typeof f=="function"?(s.pop(),f):t,v0(s,f)});function b0(s){var c=S(s);return c.__chain__=!0,c}function qU(s,c){return c(s),s}function xu(s,c){return c(s)}var zU=di(function(s){var c=s.length,f=c?s[0]:0,h=this.__wrapped__,y=function(T){return ux(T,s)};return c>1||this.__actions__.length||!(h instanceof Ae)||!mi(f)?this.thru(y):(h=h.slice(f,+f+(c?1:0)),h.__actions__.push({func:xu,args:[y],thisArg:t}),new Xr(h,this.__chain__).thru(function(T){return c&&!T.length&&T.push(t),T}))});function GU(){return b0(this)}function KU(){return new Xr(this.value(),this.__chain__)}function QU(){this.__values__===t&&(this.__values__=N0(this.value()));var s=this.__index__>=this.__values__.length,c=s?t:this.__values__[this.__index__++];return{done:s,value:c}}function ZU(){return this}function YU(s){for(var c,f=this;f instanceof nu;){var h=h0(f);h.__index__=0,h.__values__=t,c?y.__wrapped__=h:c=h;var y=h;f=f.__wrapped__}return y.__wrapped__=s,c}function XU(){var s=this.__wrapped__;if(s instanceof Ae){var c=s;return this.__actions__.length&&(c=new Ae(this)),c=c.reverse(),c.__actions__.push({func:xu,args:[Hx],thisArg:t}),new Xr(c,this.__chain__)}return this.thru(Hx)}function JU(){return U_(this.__wrapped__,this.__actions__)}var e2=pu(function(s,c,f){$e.call(s,f)?++s[f]:ui(s,f,1)});function t2(s,c,f){var h=xe(s)?Yw:qN;return f&&Yt(s,c,f)&&(c=t),h(s,le(c,3))}function r2(s,c){var f=xe(s)?Li:v_;return f(s,le(c,3))}var n2=Q_(g0),i2=Q_(y0);function o2(s,c){return Ct(Su(s,c),1)}function s2(s,c){return Ct(Su(s,c),Q)}function a2(s,c,f){return f=f===t?1:be(f),Ct(Su(s,c),f)}function w0(s,c){var f=xe(s)?Zr:Wi;return f(s,le(c,3))}function _0(s,c){var f=xe(s)?RO:T_;return f(s,le(c,3))}var c2=pu(function(s,c,f){$e.call(s,f)?s[f].push(c):ui(s,f,[c])});function l2(s,c,f,h){s=lr(s)?s:Bs(s),f=f&&!h?be(f):0;var y=s.length;return f<0&&(f=St(y+f,0)),_u(s)?f<=y&&s.indexOf(c,f)>-1:!!y&&As(s,c,f)>-1}var p2=ke(function(s,c,f){var h=-1,y=typeof c=="function",T=lr(s)?L(s.length):[];return Wi(s,function(E){T[++h]=y?Pr(c,E,f):Dc(E,c,f)}),T}),u2=pu(function(s,c,f){ui(s,f,c)});function Su(s,c){var f=xe(s)?tt:k_;return f(s,le(c,3))}function f2(s,c,f,h){return s==null?[]:(xe(c)||(c=c==null?[]:[c]),f=h?t:f,xe(f)||(f=f==null?[]:[f]),D_(s,c,f))}var d2=pu(function(s,c,f){s[f?0:1].push(c)},function(){return[[],[]]});function m2(s,c,f){var h=xe(s)?Xy:t_,y=arguments.length<3;return h(s,le(c,4),f,y,Wi)}function h2(s,c,f){var h=xe(s)?kO:t_,y=arguments.length<3;return h(s,le(c,4),f,y,T_)}function g2(s,c){var f=xe(s)?Li:v_;return f(s,bu(le(c,3)))}function y2(s){var c=xe(s)?g_:lL;return c(s)}function x2(s,c,f){(f?Yt(s,c,f):c===t)?c=1:c=be(c);var h=xe(s)?VN:pL;return h(s,c)}function S2(s){var c=xe(s)?BN:fL;return c(s)}function T2(s){if(s==null)return 0;if(lr(s))return _u(s)?Is(s):s.length;var c=Vt(s);return c==bn||c==wn?s.size:yx(s).length}function v2(s,c,f){var h=xe(s)?Jy:dL;return f&&Yt(s,c,f)&&(c=t),h(s,le(c,3))}var b2=ke(function(s,c){if(s==null)return[];var f=c.length;return f>1&&Yt(s,c[0],c[1])?c=[]:f>2&&Yt(c[0],c[1],c[2])&&(c=[c[0]]),D_(s,Ct(c,1),[])}),Tu=rN||function(){return _t.Date.now()};function w2(s,c){if(typeof c!="function")throw new Yr(i);return s=be(s),function(){if(--s<1)return c.apply(this,arguments)}}function E0(s,c,f){return c=f?t:c,c=s&&c==null?s.length:c,fi(s,ge,t,t,t,t,c)}function R0(s,c){var f;if(typeof c!="function")throw new Yr(i);return s=be(s),function(){return--s>0&&(f=c.apply(this,arguments)),s<=1&&(c=t),f}}var Bx=ke(function(s,c,f){var h=w;if(f.length){var y=Hi(f,Hs(Bx));h|=K}return fi(s,h,c,f,y)}),k0=ke(function(s,c,f){var h=w|v;if(f.length){var y=Hi(f,Hs(k0));h|=K}return fi(c,h,s,f,y)});function P0(s,c,f){c=f?t:c;var h=fi(s,M,t,t,t,t,t,c);return h.placeholder=P0.placeholder,h}function M0(s,c,f){c=f?t:c;var h=fi(s,U,t,t,t,t,t,c);return h.placeholder=M0.placeholder,h}function A0(s,c,f){var h,y,T,E,R,D,V=0,B=!1,j=!1,Y=!0;if(typeof s!="function")throw new Yr(i);c=rn(c)||0,it(f)&&(B=!!f.leading,j="maxWait"in f,T=j?St(rn(f.maxWait)||0,c):T,Y="trailing"in f?!!f.trailing:Y);function ie(lt){var kn=h,yi=y;return h=y=t,V=lt,E=s.apply(yi,kn),E}function pe(lt){return V=lt,R=Nc(Pe,c),B?ie(lt):E}function Ee(lt){var kn=lt-D,yi=lt-V,Q0=c-kn;return j?Ht(Q0,T-yi):Q0}function ue(lt){var kn=lt-D,yi=lt-V;return D===t||kn>=c||kn<0||j&&yi>=T}function Pe(){var lt=Tu();if(ue(lt))return De(lt);R=Nc(Pe,Ee(lt))}function De(lt){return R=t,Y&&h?ie(lt):(h=y=t,E)}function Ir(){R!==t&&V_(R),V=0,h=D=y=R=t}function Xt(){return R===t?E:De(Tu())}function Fr(){var lt=Tu(),kn=ue(lt);if(h=arguments,y=this,D=lt,kn){if(R===t)return pe(D);if(j)return V_(R),R=Nc(Pe,c),ie(D)}return R===t&&(R=Nc(Pe,c)),E}return Fr.cancel=Ir,Fr.flush=Xt,Fr}var _2=ke(function(s,c){return S_(s,1,c)}),E2=ke(function(s,c,f){return S_(s,rn(c)||0,f)});function R2(s){return fi(s,gt)}function vu(s,c){if(typeof s!="function"||c!=null&&typeof c!="function")throw new Yr(i);var f=function(){var h=arguments,y=c?c.apply(this,h):h[0],T=f.cache;if(T.has(y))return T.get(y);var E=s.apply(this,h);return f.cache=T.set(y,E)||T,E};return f.cache=new(vu.Cache||pi),f}vu.Cache=pi;function bu(s){if(typeof s!="function")throw new Yr(i);return function(){var c=arguments;switch(c.length){case 0:return!s.call(this);case 1:return!s.call(this,c[0]);case 2:return!s.call(this,c[0],c[1]);case 3:return!s.call(this,c[0],c[1],c[2])}return!s.apply(this,c)}}function k2(s){return R0(2,s)}var P2=mL(function(s,c){c=c.length==1&&xe(c[0])?tt(c[0],Mr(le())):tt(Ct(c,1),Mr(le()));var f=c.length;return ke(function(h){for(var y=-1,T=Ht(h.length,f);++y<T;)h[y]=c[y].call(this,h[y]);return Pr(s,this,h)})}),Wx=ke(function(s,c){var f=Hi(c,Hs(Wx));return fi(s,K,t,c,f)}),D0=ke(function(s,c){var f=Hi(c,Hs(D0));return fi(s,ne,t,c,f)}),M2=di(function(s,c){return fi(s,de,t,t,t,c)});function A2(s,c){if(typeof s!="function")throw new Yr(i);return c=c===t?c:be(c),ke(s,c)}function D2(s,c){if(typeof s!="function")throw new Yr(i);return c=c==null?0:St(be(c),0),ke(function(f){var h=f[c],y=qi(f,0,c);return h&&Ui(y,h),Pr(s,this,y)})}function I2(s,c,f){var h=!0,y=!0;if(typeof s!="function")throw new Yr(i);return it(f)&&(h="leading"in f?!!f.leading:h,y="trailing"in f?!!f.trailing:y),A0(s,c,{leading:h,maxWait:c,trailing:y})}function F2(s){return E0(s,1)}function C2(s,c){return Wx(Rx(c),s)}function O2(){if(!arguments.length)return[];var s=arguments[0];return xe(s)?s:[s]}function N2(s){return Jr(s,m)}function L2(s,c){return c=typeof c=="function"?c:t,Jr(s,m,c)}function U2(s){return Jr(s,u|m)}function H2(s,c){return c=typeof c=="function"?c:t,Jr(s,u|m,c)}function V2(s,c){return c==null||x_(s,c,Et(c))}function Rn(s,c){return s===c||s!==s&&c!==c}var B2=mu(mx),W2=mu(function(s,c){return s>=c}),Uo=__(function(){return arguments}())?__:function(s){return at(s)&&$e.call(s,"callee")&&!p_.call(s,"callee")},xe=L.isArray,$2=qw?Mr(qw):YN;function lr(s){return s!=null&&wu(s.length)&&!hi(s)}function ct(s){return at(s)&&lr(s)}function j2(s){return s===!0||s===!1||at(s)&&Zt(s)==vn}var zi=iN||Jx,q2=zw?Mr(zw):XN;function z2(s){return at(s)&&s.nodeType===1&&!Lc(s)}function G2(s){if(s==null)return!0;if(lr(s)&&(xe(s)||typeof s=="string"||typeof s.splice=="function"||zi(s)||Vs(s)||Uo(s)))return!s.length;var c=Vt(s);if(c==bn||c==wn)return!s.size;if(Oc(s))return!yx(s).length;for(var f in s)if($e.call(s,f))return!1;return!0}function K2(s,c){return Ic(s,c)}function Q2(s,c,f){f=typeof f=="function"?f:t;var h=f?f(s,c):t;return h===t?Ic(s,c,t,f):!!h}function $x(s){if(!at(s))return!1;var c=Zt(s);return c==ai||c==Mo||typeof s.message=="string"&&typeof s.name=="string"&&!Lc(s)}function Z2(s){return typeof s=="number"&&f_(s)}function hi(s){if(!it(s))return!1;var c=Zt(s);return c==ks||c==Sw||c==kr||c==TC}function I0(s){return typeof s=="number"&&s==be(s)}function wu(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Z}function it(s){var c=typeof s;return s!=null&&(c=="object"||c=="function")}function at(s){return s!=null&&typeof s=="object"}var F0=Gw?Mr(Gw):eL;function Y2(s,c){return s===c||gx(s,c,Fx(c))}function X2(s,c,f){return f=typeof f=="function"?f:t,gx(s,c,Fx(c),f)}function J2(s){return C0(s)&&s!=+s}function eH(s){if(LL(s))throw new ye(n);return E_(s)}function tH(s){return s===null}function rH(s){return s==null}function C0(s){return typeof s=="number"||at(s)&&Zt(s)==xc}function Lc(s){if(!at(s)||Zt(s)!=ci)return!1;var c=Zp(s);if(c===null)return!0;var f=$e.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&zp.call(f)==XO}var jx=Kw?Mr(Kw):tL;function nH(s){return I0(s)&&s>=-Z&&s<=Z}var O0=Qw?Mr(Qw):rL;function _u(s){return typeof s=="string"||!xe(s)&&at(s)&&Zt(s)==Tc}function Dr(s){return typeof s=="symbol"||at(s)&&Zt(s)==Lp}var Vs=Zw?Mr(Zw):nL;function iH(s){return s===t}function oH(s){return at(s)&&Vt(s)==vc}function sH(s){return at(s)&&Zt(s)==bC}var aH=mu(xx),cH=mu(function(s,c){return s<=c});function N0(s){if(!s)return[];if(lr(s))return _u(s)?_n(s):cr(s);if(_c&&s[_c])return VO(s[_c]());var c=Vt(s),f=c==bn?ox:c==wn?$p:Bs;return f(s)}function gi(s){if(!s)return s===0?s:0;if(s=rn(s),s===Q||s===-Q){var c=s<0?-1:1;return c*te}return s===s?s:0}function be(s){var c=gi(s),f=c%1;return c===c?f?c-f:c:0}function L0(s){return s?Co(be(s),0,re):0}function rn(s){if(typeof s=="number")return s;if(Dr(s))return me;if(it(s)){var c=typeof s.valueOf=="function"?s.valueOf():s;s=it(c)?c+"":c}if(typeof s!="string")return s===0?s:+s;s=r_(s);var f=$C.test(s);return f||qC.test(s)?wO(s.slice(2),f?2:8):WC.test(s)?me:+s}function U0(s){return Bn(s,pr(s))}function lH(s){return s?Co(be(s),-Z,Z):s===0?s:0}function We(s){return s==null?"":Ar(s)}var pH=Ls(function(s,c){if(Oc(c)||lr(c)){Bn(c,Et(c),s);return}for(var f in c)$e.call(c,f)&&Mc(s,f,c[f])}),H0=Ls(function(s,c){Bn(c,pr(c),s)}),Eu=Ls(function(s,c,f,h){Bn(c,pr(c),s,h)}),uH=Ls(function(s,c,f,h){Bn(c,Et(c),s,h)}),fH=di(ux);function dH(s,c){var f=Ns(s);return c==null?f:y_(f,c)}var mH=ke(function(s,c){s=Ge(s);var f=-1,h=c.length,y=h>2?c[2]:t;for(y&&Yt(c[0],c[1],y)&&(h=1);++f<h;)for(var T=c[f],E=pr(T),R=-1,D=E.length;++R<D;){var V=E[R],B=s[V];(B===t||Rn(B,Fs[V])&&!$e.call(s,V))&&(s[V]=T[V])}return s}),hH=ke(function(s){return s.push(t,r0),Pr(V0,t,s)});function gH(s,c){return Xw(s,le(c,3),Vn)}function yH(s,c){return Xw(s,le(c,3),dx)}function xH(s,c){return s==null?s:fx(s,le(c,3),pr)}function SH(s,c){return s==null?s:b_(s,le(c,3),pr)}function TH(s,c){return s&&Vn(s,le(c,3))}function vH(s,c){return s&&dx(s,le(c,3))}function bH(s){return s==null?[]:su(s,Et(s))}function wH(s){return s==null?[]:su(s,pr(s))}function qx(s,c,f){var h=s==null?t:Oo(s,c);return h===t?f:h}function _H(s,c){return s!=null&&o0(s,c,GN)}function zx(s,c){return s!=null&&o0(s,c,KN)}var EH=Y_(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=Gp.call(c)),s[c]=f},Kx(ur)),RH=Y_(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=Gp.call(c)),$e.call(s,c)?s[c].push(f):s[c]=[f]},le),kH=ke(Dc);function Et(s){return lr(s)?h_(s):yx(s)}function pr(s){return lr(s)?h_(s,!0):iL(s)}function PH(s,c){var f={};return c=le(c,3),Vn(s,function(h,y,T){ui(f,c(h,y,T),h)}),f}function MH(s,c){var f={};return c=le(c,3),Vn(s,function(h,y,T){ui(f,y,c(h,y,T))}),f}var AH=Ls(function(s,c,f){au(s,c,f)}),V0=Ls(function(s,c,f,h){au(s,c,f,h)}),DH=di(function(s,c){var f={};if(s==null)return f;var h=!1;c=tt(c,function(T){return T=ji(T,s),h||(h=T.length>1),T}),Bn(s,Dx(s),f),h&&(f=Jr(f,u|d|m,EL));for(var y=c.length;y--;)wx(f,c[y]);return f});function IH(s,c){return B0(s,bu(le(c)))}var FH=di(function(s,c){return s==null?{}:sL(s,c)});function B0(s,c){if(s==null)return{};var f=tt(Dx(s),function(h){return[h]});return c=le(c),I_(s,f,function(h,y){return c(h,y[0])})}function CH(s,c,f){c=ji(c,s);var h=-1,y=c.length;for(y||(y=1,s=t);++h<y;){var T=s==null?t:s[Wn(c[h])];T===t&&(h=y,T=f),s=hi(T)?T.call(s):T}return s}function OH(s,c,f){return s==null?s:Fc(s,c,f)}function NH(s,c,f,h){return h=typeof h=="function"?h:t,s==null?s:Fc(s,c,f,h)}var W0=e0(Et),$0=e0(pr);function LH(s,c,f){var h=xe(s),y=h||zi(s)||Vs(s);if(c=le(c,4),f==null){var T=s&&s.constructor;y?f=h?new T:[]:it(s)?f=hi(T)?Ns(Zp(s)):{}:f={}}return(y?Zr:Vn)(s,function(E,R,D){return c(f,E,R,D)}),f}function UH(s,c){return s==null?!0:wx(s,c)}function HH(s,c,f){return s==null?s:L_(s,c,Rx(f))}function VH(s,c,f,h){return h=typeof h=="function"?h:t,s==null?s:L_(s,c,Rx(f),h)}function Bs(s){return s==null?[]:ix(s,Et(s))}function BH(s){return s==null?[]:ix(s,pr(s))}function WH(s,c,f){return f===t&&(f=c,c=t),f!==t&&(f=rn(f),f=f===f?f:0),c!==t&&(c=rn(c),c=c===c?c:0),Co(rn(s),c,f)}function $H(s,c,f){return c=gi(c),f===t?(f=c,c=0):f=gi(f),s=rn(s),QN(s,c,f)}function jH(s,c,f){if(f&&typeof f!="boolean"&&Yt(s,c,f)&&(c=f=t),f===t&&(typeof c=="boolean"?(f=c,c=t):typeof s=="boolean"&&(f=s,s=t)),s===t&&c===t?(s=0,c=1):(s=gi(s),c===t?(c=s,s=0):c=gi(c)),s>c){var h=s;s=c,c=h}if(f||s%1||c%1){var y=d_();return Ht(s+y*(c-s+bO("1e-"+((y+"").length-1))),c)}return Tx(s,c)}var qH=Us(function(s,c,f){return c=c.toLowerCase(),s+(f?j0(c):c)});function j0(s){return Gx(We(s).toLowerCase())}function q0(s){return s=We(s),s&&s.replace(GC,OO).replace(fO,"")}function zH(s,c,f){s=We(s),c=Ar(c);var h=s.length;f=f===t?h:Co(be(f),0,h);var y=f;return f-=c.length,f>=0&&s.slice(f,y)==c}function GH(s){return s=We(s),s&&kC.test(s)?s.replace(bw,NO):s}function KH(s){return s=We(s),s&&FC.test(s)?s.replace(Wy,"\\$&"):s}var QH=Us(function(s,c,f){return s+(f?"-":"")+c.toLowerCase()}),ZH=Us(function(s,c,f){return s+(f?" ":"")+c.toLowerCase()}),YH=K_("toLowerCase");function XH(s,c,f){s=We(s),c=be(c);var h=c?Is(s):0;if(!c||h>=c)return s;var y=(c-h)/2;return du(eu(y),f)+s+du(Jp(y),f)}function JH(s,c,f){s=We(s),c=be(c);var h=c?Is(s):0;return c&&h<c?s+du(c-h,f):s}function eV(s,c,f){s=We(s),c=be(c);var h=c?Is(s):0;return c&&h<c?du(c-h,f)+s:s}function tV(s,c,f){return f||c==null?c=0:c&&(c=+c),cN(We(s).replace($y,""),c||0)}function rV(s,c,f){return(f?Yt(s,c,f):c===t)?c=1:c=be(c),vx(We(s),c)}function nV(){var s=arguments,c=We(s[0]);return s.length<3?c:c.replace(s[1],s[2])}var iV=Us(function(s,c,f){return s+(f?"_":"")+c.toLowerCase()});function oV(s,c,f){return f&&typeof f!="number"&&Yt(s,c,f)&&(c=f=t),f=f===t?re:f>>>0,f?(s=We(s),s&&(typeof c=="string"||c!=null&&!jx(c))&&(c=Ar(c),!c&&Ds(s))?qi(_n(s),0,f):s.split(c,f)):[]}var sV=Us(function(s,c,f){return s+(f?" ":"")+Gx(c)});function aV(s,c,f){return s=We(s),f=f==null?0:Co(be(f),0,s.length),c=Ar(c),s.slice(f,f+c.length)==c}function cV(s,c,f){var h=S.templateSettings;f&&Yt(s,c,f)&&(c=t),s=We(s),c=Eu({},c,h,t0);var y=Eu({},c.imports,h.imports,t0),T=Et(y),E=ix(y,T),R,D,V=0,B=c.interpolate||Up,j="__p += '",Y=sx((c.escape||Up).source+"|"+B.source+"|"+(B===ww?BC:Up).source+"|"+(c.evaluate||Up).source+"|$","g"),ie="//# sourceURL="+($e.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yO+"]")+`
`;s.replace(Y,function(ue,Pe,De,Ir,Xt,Fr){return De||(De=Ir),j+=s.slice(V,Fr).replace(KC,LO),Pe&&(R=!0,j+=`' +
__e(`+Pe+`) +
'`),Xt&&(D=!0,j+=`';
`+Xt+`;
__p += '`),De&&(j+=`' +
((__t = (`+De+`)) == null ? '' : __t) +
'`),V=Fr+ue.length,ue}),j+=`';
`;var pe=$e.call(c,"variable")&&c.variable;if(!pe)j=`with (obj) {
`+j+`
}
`;else if(HC.test(pe))throw new ye(o);j=(D?j.replace(wC,""):j).replace(_C,"$1").replace(EC,"$1;"),j="function("+(pe||"obj")+`) {
`+(pe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(D?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+j+`return __p
}`;var Ee=G0(function(){return Ve(T,ie+"return "+j).apply(t,E)});if(Ee.source=j,$x(Ee))throw Ee;return Ee}function lV(s){return We(s).toLowerCase()}function pV(s){return We(s).toUpperCase()}function uV(s,c,f){if(s=We(s),s&&(f||c===t))return r_(s);if(!s||!(c=Ar(c)))return s;var h=_n(s),y=_n(c),T=n_(h,y),E=i_(h,y)+1;return qi(h,T,E).join("")}function fV(s,c,f){if(s=We(s),s&&(f||c===t))return s.slice(0,s_(s)+1);if(!s||!(c=Ar(c)))return s;var h=_n(s),y=i_(h,_n(c))+1;return qi(h,0,y).join("")}function dV(s,c,f){if(s=We(s),s&&(f||c===t))return s.replace($y,"");if(!s||!(c=Ar(c)))return s;var h=_n(s),y=n_(h,_n(c));return qi(h,y).join("")}function mV(s,c){var f=Ft,h=st;if(it(c)){var y="separator"in c?c.separator:y;f="length"in c?be(c.length):f,h="omission"in c?Ar(c.omission):h}s=We(s);var T=s.length;if(Ds(s)){var E=_n(s);T=E.length}if(f>=T)return s;var R=f-Is(h);if(R<1)return h;var D=E?qi(E,0,R).join(""):s.slice(0,R);if(y===t)return D+h;if(E&&(R+=D.length-R),jx(y)){if(s.slice(R).search(y)){var V,B=D;for(y.global||(y=sx(y.source,We(_w.exec(y))+"g")),y.lastIndex=0;V=y.exec(B);)var j=V.index;D=D.slice(0,j===t?R:j)}}else if(s.indexOf(Ar(y),R)!=R){var Y=D.lastIndexOf(y);Y>-1&&(D=D.slice(0,Y))}return D+h}function hV(s){return s=We(s),s&&RC.test(s)?s.replace(vw,jO):s}var gV=Us(function(s,c,f){return s+(f?" ":"")+c.toUpperCase()}),Gx=K_("toUpperCase");function z0(s,c,f){return s=We(s),c=f?t:c,c===t?HO(s)?GO(s):AO(s):s.match(c)||[]}var G0=ke(function(s,c){try{return Pr(s,t,c)}catch(f){return $x(f)?f:new ye(f)}}),yV=di(function(s,c){return Zr(c,function(f){f=Wn(f),ui(s,f,Bx(s[f],s))}),s});function xV(s){var c=s==null?0:s.length,f=le();return s=c?tt(s,function(h){if(typeof h[1]!="function")throw new Yr(i);return[f(h[0]),h[1]]}):[],ke(function(h){for(var y=-1;++y<c;){var T=s[y];if(Pr(T[0],this,h))return Pr(T[1],this,h)}})}function SV(s){return jN(Jr(s,u))}function Kx(s){return function(){return s}}function TV(s,c){return s==null||s!==s?c:s}var vV=Z_(),bV=Z_(!0);function ur(s){return s}function Qx(s){return R_(typeof s=="function"?s:Jr(s,u))}function wV(s){return P_(Jr(s,u))}function _V(s,c){return M_(s,Jr(c,u))}var EV=ke(function(s,c){return function(f){return Dc(f,s,c)}}),RV=ke(function(s,c){return function(f){return Dc(s,f,c)}});function Zx(s,c,f){var h=Et(c),y=su(c,h);f==null&&!(it(c)&&(y.length||!h.length))&&(f=c,c=s,s=this,y=su(c,Et(c)));var T=!(it(f)&&"chain"in f)||!!f.chain,E=hi(s);return Zr(y,function(R){var D=c[R];s[R]=D,E&&(s.prototype[R]=function(){var V=this.__chain__;if(T||V){var B=s(this.__wrapped__),j=B.__actions__=cr(this.__actions__);return j.push({func:D,args:arguments,thisArg:s}),B.__chain__=V,B}return D.apply(s,Ui([this.value()],arguments))})}),s}function kV(){return _t._===this&&(_t._=JO),this}function Yx(){}function PV(s){return s=be(s),ke(function(c){return A_(c,s)})}var MV=Px(tt),AV=Px(Yw),DV=Px(Jy);function K0(s){return Ox(s)?ex(Wn(s)):aL(s)}function IV(s){return function(c){return s==null?t:Oo(s,c)}}var FV=X_(),CV=X_(!0);function Xx(){return[]}function Jx(){return!1}function OV(){return{}}function NV(){return""}function LV(){return!0}function UV(s,c){if(s=be(s),s<1||s>Z)return[];var f=re,h=Ht(s,re);c=le(c),s-=re;for(var y=nx(h,c);++f<s;)c(f);return y}function HV(s){return xe(s)?tt(s,Wn):Dr(s)?[s]:cr(m0(We(s)))}function VV(s){var c=++YO;return We(s)+c}var BV=fu(function(s,c){return s+c},0),WV=Mx("ceil"),$V=fu(function(s,c){return s/c},1),jV=Mx("floor");function qV(s){return s&&s.length?ou(s,ur,mx):t}function zV(s,c){return s&&s.length?ou(s,le(c,2),mx):t}function GV(s){return e_(s,ur)}function KV(s,c){return e_(s,le(c,2))}function QV(s){return s&&s.length?ou(s,ur,xx):t}function ZV(s,c){return s&&s.length?ou(s,le(c,2),xx):t}var YV=fu(function(s,c){return s*c},1),XV=Mx("round"),JV=fu(function(s,c){return s-c},0);function eB(s){return s&&s.length?rx(s,ur):0}function tB(s,c){return s&&s.length?rx(s,le(c,2)):0}return S.after=w2,S.ary=E0,S.assign=pH,S.assignIn=H0,S.assignInWith=Eu,S.assignWith=uH,S.at=fH,S.before=R0,S.bind=Bx,S.bindAll=yV,S.bindKey=k0,S.castArray=O2,S.chain=b0,S.chunk=jL,S.compact=qL,S.concat=zL,S.cond=xV,S.conforms=SV,S.constant=Kx,S.countBy=e2,S.create=dH,S.curry=P0,S.curryRight=M0,S.debounce=A0,S.defaults=mH,S.defaultsDeep=hH,S.defer=_2,S.delay=E2,S.difference=GL,S.differenceBy=KL,S.differenceWith=QL,S.drop=ZL,S.dropRight=YL,S.dropRightWhile=XL,S.dropWhile=JL,S.fill=eU,S.filter=r2,S.flatMap=o2,S.flatMapDeep=s2,S.flatMapDepth=a2,S.flatten=x0,S.flattenDeep=tU,S.flattenDepth=rU,S.flip=R2,S.flow=vV,S.flowRight=bV,S.fromPairs=nU,S.functions=bH,S.functionsIn=wH,S.groupBy=c2,S.initial=oU,S.intersection=sU,S.intersectionBy=aU,S.intersectionWith=cU,S.invert=EH,S.invertBy=RH,S.invokeMap=p2,S.iteratee=Qx,S.keyBy=u2,S.keys=Et,S.keysIn=pr,S.map=Su,S.mapKeys=PH,S.mapValues=MH,S.matches=wV,S.matchesProperty=_V,S.memoize=vu,S.merge=AH,S.mergeWith=V0,S.method=EV,S.methodOf=RV,S.mixin=Zx,S.negate=bu,S.nthArg=PV,S.omit=DH,S.omitBy=IH,S.once=k2,S.orderBy=f2,S.over=MV,S.overArgs=P2,S.overEvery=AV,S.overSome=DV,S.partial=Wx,S.partialRight=D0,S.partition=d2,S.pick=FH,S.pickBy=B0,S.property=K0,S.propertyOf=IV,S.pull=fU,S.pullAll=T0,S.pullAllBy=dU,S.pullAllWith=mU,S.pullAt=hU,S.range=FV,S.rangeRight=CV,S.rearg=M2,S.reject=g2,S.remove=gU,S.rest=A2,S.reverse=Hx,S.sampleSize=x2,S.set=OH,S.setWith=NH,S.shuffle=S2,S.slice=yU,S.sortBy=b2,S.sortedUniq=_U,S.sortedUniqBy=EU,S.split=oV,S.spread=D2,S.tail=RU,S.take=kU,S.takeRight=PU,S.takeRightWhile=MU,S.takeWhile=AU,S.tap=qU,S.throttle=I2,S.thru=xu,S.toArray=N0,S.toPairs=W0,S.toPairsIn=$0,S.toPath=HV,S.toPlainObject=U0,S.transform=LH,S.unary=F2,S.union=DU,S.unionBy=IU,S.unionWith=FU,S.uniq=CU,S.uniqBy=OU,S.uniqWith=NU,S.unset=UH,S.unzip=Vx,S.unzipWith=v0,S.update=HH,S.updateWith=VH,S.values=Bs,S.valuesIn=BH,S.without=LU,S.words=z0,S.wrap=C2,S.xor=UU,S.xorBy=HU,S.xorWith=VU,S.zip=BU,S.zipObject=WU,S.zipObjectDeep=$U,S.zipWith=jU,S.entries=W0,S.entriesIn=$0,S.extend=H0,S.extendWith=Eu,Zx(S,S),S.add=BV,S.attempt=G0,S.camelCase=qH,S.capitalize=j0,S.ceil=WV,S.clamp=WH,S.clone=N2,S.cloneDeep=U2,S.cloneDeepWith=H2,S.cloneWith=L2,S.conformsTo=V2,S.deburr=q0,S.defaultTo=TV,S.divide=$V,S.endsWith=zH,S.eq=Rn,S.escape=GH,S.escapeRegExp=KH,S.every=t2,S.find=n2,S.findIndex=g0,S.findKey=gH,S.findLast=i2,S.findLastIndex=y0,S.findLastKey=yH,S.floor=jV,S.forEach=w0,S.forEachRight=_0,S.forIn=xH,S.forInRight=SH,S.forOwn=TH,S.forOwnRight=vH,S.get=qx,S.gt=B2,S.gte=W2,S.has=_H,S.hasIn=zx,S.head=S0,S.identity=ur,S.includes=l2,S.indexOf=iU,S.inRange=$H,S.invoke=kH,S.isArguments=Uo,S.isArray=xe,S.isArrayBuffer=$2,S.isArrayLike=lr,S.isArrayLikeObject=ct,S.isBoolean=j2,S.isBuffer=zi,S.isDate=q2,S.isElement=z2,S.isEmpty=G2,S.isEqual=K2,S.isEqualWith=Q2,S.isError=$x,S.isFinite=Z2,S.isFunction=hi,S.isInteger=I0,S.isLength=wu,S.isMap=F0,S.isMatch=Y2,S.isMatchWith=X2,S.isNaN=J2,S.isNative=eH,S.isNil=rH,S.isNull=tH,S.isNumber=C0,S.isObject=it,S.isObjectLike=at,S.isPlainObject=Lc,S.isRegExp=jx,S.isSafeInteger=nH,S.isSet=O0,S.isString=_u,S.isSymbol=Dr,S.isTypedArray=Vs,S.isUndefined=iH,S.isWeakMap=oH,S.isWeakSet=sH,S.join=lU,S.kebabCase=QH,S.last=tn,S.lastIndexOf=pU,S.lowerCase=ZH,S.lowerFirst=YH,S.lt=aH,S.lte=cH,S.max=qV,S.maxBy=zV,S.mean=GV,S.meanBy=KV,S.min=QV,S.minBy=ZV,S.stubArray=Xx,S.stubFalse=Jx,S.stubObject=OV,S.stubString=NV,S.stubTrue=LV,S.multiply=YV,S.nth=uU,S.noConflict=kV,S.noop=Yx,S.now=Tu,S.pad=XH,S.padEnd=JH,S.padStart=eV,S.parseInt=tV,S.random=jH,S.reduce=m2,S.reduceRight=h2,S.repeat=rV,S.replace=nV,S.result=CH,S.round=XV,S.runInContext=k,S.sample=y2,S.size=T2,S.snakeCase=iV,S.some=v2,S.sortedIndex=xU,S.sortedIndexBy=SU,S.sortedIndexOf=TU,S.sortedLastIndex=vU,S.sortedLastIndexBy=bU,S.sortedLastIndexOf=wU,S.startCase=sV,S.startsWith=aV,S.subtract=JV,S.sum=eB,S.sumBy=tB,S.template=cV,S.times=UV,S.toFinite=gi,S.toInteger=be,S.toLength=L0,S.toLower=lV,S.toNumber=rn,S.toSafeInteger=lH,S.toString=We,S.toUpper=pV,S.trim=uV,S.trimEnd=fV,S.trimStart=dV,S.truncate=mV,S.unescape=hV,S.uniqueId=VV,S.upperCase=gV,S.upperFirst=Gx,S.each=w0,S.eachRight=_0,S.first=S0,Zx(S,function(){var s={};return Vn(S,function(c,f){$e.call(S.prototype,f)||(s[f]=c)}),s}(),{chain:!1}),S.VERSION=e,Zr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){S[s].placeholder=S}),Zr(["drop","take"],function(s,c){Ae.prototype[s]=function(f){f=f===t?1:St(be(f),0);var h=this.__filtered__&&!c?new Ae(this):this.clone();return h.__filtered__?h.__takeCount__=Ht(f,h.__takeCount__):h.__views__.push({size:Ht(f,re),type:s+(h.__dir__<0?"Right":"")}),h},Ae.prototype[s+"Right"]=function(f){return this.reverse()[s](f).reverse()}}),Zr(["filter","map","takeWhile"],function(s,c){var f=c+1,h=f==I||f==q;Ae.prototype[s]=function(y){var T=this.clone();return T.__iteratees__.push({iteratee:le(y,3),type:f}),T.__filtered__=T.__filtered__||h,T}}),Zr(["head","last"],function(s,c){var f="take"+(c?"Right":"");Ae.prototype[s]=function(){return this[f](1).value()[0]}}),Zr(["initial","tail"],function(s,c){var f="drop"+(c?"":"Right");Ae.prototype[s]=function(){return this.__filtered__?new Ae(this):this[f](1)}}),Ae.prototype.compact=function(){return this.filter(ur)},Ae.prototype.find=function(s){return this.filter(s).head()},Ae.prototype.findLast=function(s){return this.reverse().find(s)},Ae.prototype.invokeMap=ke(function(s,c){return typeof s=="function"?new Ae(this):this.map(function(f){return Dc(f,s,c)})}),Ae.prototype.reject=function(s){return this.filter(bu(le(s)))},Ae.prototype.slice=function(s,c){s=be(s);var f=this;return f.__filtered__&&(s>0||c<0)?new Ae(f):(s<0?f=f.takeRight(-s):s&&(f=f.drop(s)),c!==t&&(c=be(c),f=c<0?f.dropRight(-c):f.take(c-s)),f)},Ae.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Ae.prototype.toArray=function(){return this.take(re)},Vn(Ae.prototype,function(s,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),h=/^(?:head|last)$/.test(c),y=S[h?"take"+(c=="last"?"Right":""):c],T=h||/^find/.test(c);y&&(S.prototype[c]=function(){var E=this.__wrapped__,R=h?[1]:arguments,D=E instanceof Ae,V=R[0],B=D||xe(E),j=function(Pe){var De=y.apply(S,Ui([Pe],R));return h&&Y?De[0]:De};B&&f&&typeof V=="function"&&V.length!=1&&(D=B=!1);var Y=this.__chain__,ie=!!this.__actions__.length,pe=T&&!Y,Ee=D&&!ie;if(!T&&B){E=Ee?E:new Ae(this);var ue=s.apply(E,R);return ue.__actions__.push({func:xu,args:[j],thisArg:t}),new Xr(ue,Y)}return pe&&Ee?s.apply(this,R):(ue=this.thru(j),pe?h?ue.value()[0]:ue.value():ue)})}),Zr(["pop","push","shift","sort","splice","unshift"],function(s){var c=jp[s],f=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",h=/^(?:pop|shift)$/.test(s);S.prototype[s]=function(){var y=arguments;if(h&&!this.__chain__){var T=this.value();return c.apply(xe(T)?T:[],y)}return this[f](function(E){return c.apply(xe(E)?E:[],y)})}}),Vn(Ae.prototype,function(s,c){var f=S[c];if(f){var h=f.name+"";$e.call(Os,h)||(Os[h]=[]),Os[h].push({name:c,func:f})}}),Os[uu(t,v).name]=[{name:"wrapper",func:t}],Ae.prototype.clone=hN,Ae.prototype.reverse=gN,Ae.prototype.value=yN,S.prototype.at=zU,S.prototype.chain=GU,S.prototype.commit=KU,S.prototype.next=QU,S.prototype.plant=YU,S.prototype.reverse=XU,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=JU,S.prototype.first=S.prototype.head,_c&&(S.prototype[_c]=ZU),S},Vi=KO();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(_t._=Vi,define(function(){return Vi})):Ao?((Ao.exports=Vi)._=Vi,Qy._=Vi):_t._=Vi}).call(rc)});var xF=Ke((aLe,yF)=>{"use strict";yF.exports=hF;function hF(t,e,r){t instanceof RegExp&&(t=mF(t,r)),e instanceof RegExp&&(e=mF(e,r));var n=gF(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function mF(t,e){var r=e.match(t);return r?r[0]:null}hF.range=gF;function gF(t,e,r){var n,i,o,a,l,p=r.indexOf(t),u=r.indexOf(e,p+1),d=p;if(p>=0&&u>0){if(t===e)return[p,u];for(n=[],o=r.length;d>=0&&!l;)d==p?(n.push(d),p=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,d+1)),d=p<u&&p>=0?p:u;n.length&&(l=[o,a])}return l}});var RF=Ke((cLe,EF)=>{var SF=xF();EF.exports=oZ;var TF="\0SLASH"+Math.random()+"\0",vF="\0OPEN"+Math.random()+"\0",Jv="\0CLOSE"+Math.random()+"\0",bF="\0COMMA"+Math.random()+"\0",wF="\0PERIOD"+Math.random()+"\0";function Xv(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function nZ(t){return t.split("\\\\").join(TF).split("\\{").join(vF).split("\\}").join(Jv).split("\\,").join(bF).split("\\.").join(wF)}function iZ(t){return t.split(TF).join("\\").split(vF).join("{").split(Jv).join("}").split(bF).join(",").split(wF).join(".")}function _F(t){if(!t)return[""];var e=[],r=SF("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var l=_F(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}function oZ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),fp(nZ(t),!0).map(iZ)):[]}function sZ(t){return"{"+t+"}"}function aZ(t){return/^-?0\d/.test(t)}function cZ(t,e){return t<=e}function lZ(t,e){return t>=e}function fp(t,e){var r=[],n=SF("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?fp(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var l=i+"{"+n.body+"}"+o[a];r.push(l)}else{var p=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=p||u,m=n.body.indexOf(",")>=0;if(!d&&!m)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+Jv+n.post,fp(t)):[t];var g;if(d)g=n.body.split(/\.\./);else if(g=_F(n.body),g.length===1&&(g=fp(g[0],!1).map(sZ),g.length===1))return o.map(function(N){return n.pre+g[0]+N});var x;if(d){var w=Xv(g[0]),v=Xv(g[1]),F=Math.max(g[0].length,g[1].length),M=g.length==3?Math.abs(Xv(g[2])):1,U=cZ,K=v<w;K&&(M*=-1,U=lZ);var ne=g.some(aZ);x=[];for(var ge=w;U(ge,v);ge+=M){var de;if(u)de=String.fromCharCode(ge),de==="\\"&&(de="");else if(de=String(ge),ne){var gt=F-de.length;if(gt>0){var Ft=new Array(gt+1).join("0");ge<0?de="-"+Ft+de.slice(1):de=Ft+de}}x.push(de)}}else{x=[];for(var st=0;st<g.length;st++)x.push.apply(x,fp(g[st],!1))}for(var st=0;st<x.length;st++)for(var a=0;a<o.length;a++){var l=i+x[st]+o[a];(!e||d||l)&&r.push(l)}}return r}});var QY={};aB(QY,{default:()=>xC});module.exports=cB(QY);var eS="cursorless.command",ku=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},pt=class extends ku{constructor(){super(...arguments);this.isVisible=!1}},ut=class extends ku{constructor(){super(...arguments);this.isVisible=!0}};var YY={"cursorless.toggleDecorations":new ut("Toggle decorations"),"cursorless.recomputeDecorationStyles":new ut("Recompute decoration styles"),"cursorless.recordTestCase":new ut("Record test case"),"cursorless.recordOneTestCaseThenPause":new ut("Record one test case, then pause"),"cursorless.pauseRecording":new ut("Pause test case recording"),"cursorless.resumeRecording":new ut("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new ut("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new ut("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new ut("Show documentation"),"cursorless.showInstallationDependencies":new ut("Show installation dependencies"),"cursorless.showScopeVisualizer":new ut("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new ut("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new ut("Analyze collected command history"),"cursorless.tutorial.start":new pt("Start a tutorial"),"cursorless.tutorial.next":new ut("Tutorial next"),"cursorless.tutorial.previous":new ut("Tutorial previous"),"cursorless.tutorial.restart":new ut("Tutorial restart"),"cursorless.tutorial.resume":new ut("Tutorial resume"),"cursorless.tutorial.list":new ut("Tutorial list"),"cursorless.documentationOpened":new pt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new pt("The core cursorless command"),"cursorless.repeatPreviousCommand":new ut("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new pt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new pt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new pt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new pt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new pt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new pt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new pt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new pt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new pt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new pt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new pt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new pt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new pt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new pt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new pt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new pt("Redo keyboard targeting changes")};var Pu=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Mu=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Au=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},Rt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Du=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var lB=typeof global=="object"&&global&&global.Object===Object&&global,Iu=lB;var pB=typeof self=="object"&&self&&self.Object===Object&&self,uB=Iu||pB||Function("return this")(),kt=uB;var fB=kt.Symbol,Jt=fB;var Y0=Object.prototype,dB=Y0.hasOwnProperty,mB=Y0.toString,Uc=Jt?Jt.toStringTag:void 0;function hB(t){var e=dB.call(t,Uc),r=t[Uc];try{t[Uc]=void 0;var n=!0}catch{}var i=mB.call(t);return n&&(e?t[Uc]=r:delete t[Uc]),i}var X0=hB;var gB=Object.prototype,yB=gB.toString;function xB(t){return yB.call(t)}var J0=xB;var SB="[object Null]",TB="[object Undefined]",eE=Jt?Jt.toStringTag:void 0;function vB(t){return t==null?t===void 0?TB:SB:eE&&eE in Object(t)?X0(t):J0(t)}var Pn=vB;function bB(t){return t!=null&&typeof t=="object"}var er=bB;var wB="[object Symbol]";function _B(t){return typeof t=="symbol"||er(t)&&Pn(t)==wB}var Cr=_B;function EB(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var nn=EB;var RB=Array.isArray,je=RB;var kB=1/0,tE=Jt?Jt.prototype:void 0,rE=tE?tE.toString:void 0;function nE(t){if(typeof t=="string")return t;if(je(t))return nn(t,nE)+"";if(Cr(t))return rE?rE.call(t):"";var e=t+"";return e=="0"&&1/t==-kB?"-0":e}var iE=nE;var PB=/\s/;function MB(t){for(var e=t.length;e--&&PB.test(t.charAt(e)););return e}var oE=MB;var AB=/^\s+/;function DB(t){return t&&t.slice(0,oE(t)+1).replace(AB,"")}var sE=DB;function IB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Or=IB;var aE=NaN,FB=/^[-+]0x[0-9a-f]+$/i,CB=/^0b[01]+$/i,OB=/^0o[0-7]+$/i,NB=parseInt;function LB(t){if(typeof t=="number")return t;if(Cr(t))return aE;if(Or(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Or(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=sE(t);var r=CB.test(t);return r||OB.test(t)?NB(t.slice(2),r?2:8):FB.test(t)?aE:+t}var cE=LB;var lE=1/0,UB=17976931348623157e292;function HB(t){if(!t)return t===0?t:0;if(t=cE(t),t===lE||t===-lE){var e=t<0?-1:1;return e*UB}return t===t?t:0}var Ws=HB;function VB(t){var e=Ws(t),r=e%1;return e===e?r?e-r:e:0}var Fu=VB;function BB(t){return t}var dr=BB;var WB="[object AsyncFunction]",$B="[object Function]",jB="[object GeneratorFunction]",qB="[object Proxy]";function zB(t){if(!Or(t))return!1;var e=Pn(t);return e==$B||e==jB||e==WB||e==qB}var Cu=zB;var GB=kt["__core-js_shared__"],Ou=GB;var pE=function(){var t=/[^.]+$/.exec(Ou&&Ou.keys&&Ou.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function KB(t){return!!pE&&pE in t}var uE=KB;var QB=Function.prototype,ZB=QB.toString;function YB(t){if(t!=null){try{return ZB.call(t)}catch{}try{return t+""}catch{}}return""}var xi=YB;var XB=/[\\^$.*+?()[\]{}|]/g,JB=/^\[object .+?Constructor\]$/,eW=Function.prototype,tW=Object.prototype,rW=eW.toString,nW=tW.hasOwnProperty,iW=RegExp("^"+rW.call(nW).replace(XB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function oW(t){if(!Or(t)||uE(t))return!1;var e=Cu(t)?iW:JB;return e.test(xi(t))}var fE=oW;function sW(t,e){return t?.[e]}var dE=sW;function aW(t,e){var r=dE(t,e);return fE(r)?r:void 0}var mr=aW;var cW=mr(kt,"WeakMap"),Ho=cW;var lW=Ho&&new Ho,tS=lW;var mE=Object.create,pW=function(){function t(){}return function(e){if(!Or(e))return{};if(mE)return mE(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Nu=pW;function uW(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var hE=uW;function fW(){}var $s=fW;var dW=4294967295;function Lu(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=dW,this.__views__=[]}Lu.prototype=Nu($s.prototype);Lu.prototype.constructor=Lu;var js=Lu;function mW(){}var Uu=mW;var hW=tS?function(t){return tS.get(t)}:Uu,Hu=hW;var gW={},rS=gW;var yW=Object.prototype,xW=yW.hasOwnProperty;function SW(t){for(var e=t.name+"",r=rS[e],n=xW.call(rS,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var qs=SW;function Vu(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Vu.prototype=Nu($s.prototype);Vu.prototype.constructor=Vu;var Gi=Vu;function TW(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Ki=TW;function vW(t){if(t instanceof js)return t.clone();var e=new Gi(t.__wrapped__,t.__chain__);return e.__actions__=Ki(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var gE=vW;var bW=Object.prototype,wW=bW.hasOwnProperty;function Bu(t){if(er(t)&&!je(t)&&!(t instanceof js)){if(t instanceof Gi)return t;if(wW.call(t,"__wrapped__"))return gE(t)}return new Gi(t)}Bu.prototype=$s.prototype;Bu.prototype.constructor=Bu;var yE=Bu;function _W(t){var e=qs(t),r=yE[e];if(typeof r!="function"||!(e in js.prototype))return!1;if(t===r)return!0;var n=Hu(r);return!!n&&t===n[0]}var nS=_W;var EW=800,RW=16,kW=Date.now;function PW(t){var e=0,r=0;return function(){var n=kW(),i=RW-(n-r);if(r=n,i>0){if(++e>=EW)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var xE=PW;function MW(t){return function(){return t}}var SE=MW;var AW=function(){try{var t=mr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),iS=AW;var DW=iS?function(t,e){return iS(t,"toString",{configurable:!0,enumerable:!1,value:SE(e),writable:!0})}:dr,TE=DW;var IW=xE(TE),Wu=IW;function FW(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var $u=FW;function CW(t){return t!==t}var vE=CW;function OW(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var bE=OW;function NW(t,e,r){return e===e?bE(t,e,r):$u(t,vE,r)}var ju=NW;function LW(t,e){var r=t==null?0:t.length;return!!r&&ju(t,e,0)>-1}var wE=LW;var UW=9007199254740991,HW=/^(?:0|[1-9]\d*)$/;function VW(t,e){var r=typeof t;return e=e??UW,!!e&&(r=="number"||r!="symbol"&&HW.test(t))&&t>-1&&t%1==0&&t<e}var zs=VW;function BW(t,e){return t===e||t!==t&&e!==e}var Gs=BW;var _E=Math.max;function WW(t,e,r){return e=_E(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=_E(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(a),hE(t,this,l)}}var qu=WW;function $W(t,e){return Wu(qu(t,e,dr),t+"")}var Ks=$W;var jW=9007199254740991;function qW(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=jW}var Qs=qW;function zW(t){return t!=null&&Qs(t.length)&&!Cu(t)}var $n=zW;function GW(t,e,r){if(!Or(r))return!1;var n=typeof e;return(n=="number"?$n(r)&&zs(e,r.length):n=="string"&&e in r)?Gs(r[e],t):!1}var Vo=GW;var KW=Object.prototype;function QW(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||KW;return t===r}var EE=QW;function ZW(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var zu=ZW;var YW="[object Arguments]";function XW(t){return er(t)&&Pn(t)==YW}var oS=XW;var RE=Object.prototype,JW=RE.hasOwnProperty,e$=RE.propertyIsEnumerable,t$=oS(function(){return arguments}())?oS:function(t){return er(t)&&JW.call(t,"callee")&&!e$.call(t,"callee")},Zs=t$;function r$(){return!1}var kE=r$;var AE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,PE=AE&&typeof module=="object"&&module&&!module.nodeType&&module,n$=PE&&PE.exports===AE,ME=n$?kt.Buffer:void 0,i$=ME?ME.isBuffer:void 0,o$=i$||kE,Hc=o$;var s$="[object Arguments]",a$="[object Array]",c$="[object Boolean]",l$="[object Date]",p$="[object Error]",u$="[object Function]",f$="[object Map]",d$="[object Number]",m$="[object Object]",h$="[object RegExp]",g$="[object Set]",y$="[object String]",x$="[object WeakMap]",S$="[object ArrayBuffer]",T$="[object DataView]",v$="[object Float32Array]",b$="[object Float64Array]",w$="[object Int8Array]",_$="[object Int16Array]",E$="[object Int32Array]",R$="[object Uint8Array]",k$="[object Uint8ClampedArray]",P$="[object Uint16Array]",M$="[object Uint32Array]",Je={};Je[v$]=Je[b$]=Je[w$]=Je[_$]=Je[E$]=Je[R$]=Je[k$]=Je[P$]=Je[M$]=!0;Je[s$]=Je[a$]=Je[S$]=Je[c$]=Je[T$]=Je[l$]=Je[p$]=Je[u$]=Je[f$]=Je[d$]=Je[m$]=Je[h$]=Je[g$]=Je[y$]=Je[x$]=!1;function A$(t){return er(t)&&Qs(t.length)&&!!Je[Pn(t)]}var DE=A$;function D$(t){return function(e){return t(e)}}var Ys=D$;var IE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Vc=IE&&typeof module=="object"&&module&&!module.nodeType&&module,I$=Vc&&Vc.exports===IE,sS=I$&&Iu.process,F$=function(){try{var t=Vc&&Vc.require&&Vc.require("util").types;return t||sS&&sS.binding&&sS.binding("util")}catch{}}(),aS=F$;var FE=aS&&aS.isTypedArray,C$=FE?Ys(FE):DE,Gu=C$;var O$=Object.prototype,N$=O$.hasOwnProperty;function L$(t,e){var r=je(t),n=!r&&Zs(t),i=!r&&!n&&Hc(t),o=!r&&!n&&!i&&Gu(t),a=r||n||i||o,l=a?zu(t.length,String):[],p=l.length;for(var u in t)(e||N$.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||zs(u,p)))&&l.push(u);return l}var CE=L$;function U$(t,e){return function(r){return t(e(r))}}var OE=U$;var H$=OE(Object.keys,Object),NE=H$;var V$=Object.prototype,B$=V$.hasOwnProperty;function W$(t){if(!EE(t))return NE(t);var e=[];for(var r in Object(t))B$.call(t,r)&&r!="constructor"&&e.push(r);return e}var LE=W$;function $$(t){return $n(t)?CE(t):LE(t)}var Qi=$$;var j$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,q$=/^\w*$/;function z$(t,e){if(je(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Cr(t)?!0:q$.test(t)||!j$.test(t)||e!=null&&t in Object(e)}var Xs=z$;var G$=mr(Object,"create"),Si=G$;function K$(){this.__data__=Si?Si(null):{},this.size=0}var UE=K$;function Q$(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var HE=Q$;var Z$="__lodash_hash_undefined__",Y$=Object.prototype,X$=Y$.hasOwnProperty;function J$(t){var e=this.__data__;if(Si){var r=e[t];return r===Z$?void 0:r}return X$.call(e,t)?e[t]:void 0}var VE=J$;var ej=Object.prototype,tj=ej.hasOwnProperty;function rj(t){var e=this.__data__;return Si?e[t]!==void 0:tj.call(e,t)}var BE=rj;var nj="__lodash_hash_undefined__";function ij(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Si&&e===void 0?nj:e,this}var WE=ij;function Js(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Js.prototype.clear=UE;Js.prototype.delete=HE;Js.prototype.get=VE;Js.prototype.has=BE;Js.prototype.set=WE;var cS=Js;function oj(){this.__data__=[],this.size=0}var $E=oj;function sj(t,e){for(var r=t.length;r--;)if(Gs(t[r][0],e))return r;return-1}var Zi=sj;var aj=Array.prototype,cj=aj.splice;function lj(t){var e=this.__data__,r=Zi(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():cj.call(e,r,1),--this.size,!0}var jE=lj;function pj(t){var e=this.__data__,r=Zi(e,t);return r<0?void 0:e[r][1]}var qE=pj;function uj(t){return Zi(this.__data__,t)>-1}var zE=uj;function fj(t,e){var r=this.__data__,n=Zi(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var GE=fj;function ea(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ea.prototype.clear=$E;ea.prototype.delete=jE;ea.prototype.get=qE;ea.prototype.has=zE;ea.prototype.set=GE;var Yi=ea;var dj=mr(kt,"Map"),Xi=dj;function mj(){this.size=0,this.__data__={hash:new cS,map:new(Xi||Yi),string:new cS}}var KE=mj;function hj(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var QE=hj;function gj(t,e){var r=t.__data__;return QE(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Ji=gj;function yj(t){var e=Ji(this,t).delete(t);return this.size-=e?1:0,e}var ZE=yj;function xj(t){return Ji(this,t).get(t)}var YE=xj;function Sj(t){return Ji(this,t).has(t)}var XE=Sj;function Tj(t,e){var r=Ji(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var JE=Tj;function ta(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ta.prototype.clear=KE;ta.prototype.delete=ZE;ta.prototype.get=YE;ta.prototype.has=XE;ta.prototype.set=JE;var Bo=ta;var vj="Expected a function";function lS(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(vj);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(lS.Cache||Bo),r}lS.Cache=Bo;var Bc=lS;var bj=500;function wj(t){var e=Bc(t,function(n){return r.size===bj&&r.clear(),n}),r=e.cache;return e}var eR=wj;var _j=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ej=/\\(\\)?/g,Rj=eR(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(_j,function(r,n,i,o){e.push(i?o.replace(Ej,"$1"):n||r)}),e}),tR=Rj;function kj(t){return t==null?"":iE(t)}var Mn=kj;function Pj(t,e){return je(t)?t:Xs(t,e)?[t]:tR(Mn(t))}var Ku=Pj;var Mj=1/0;function Aj(t){if(typeof t=="string"||Cr(t))return t;var e=t+"";return e=="0"&&1/t==-Mj?"-0":e}var eo=Aj;function Dj(t,e){e=Ku(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[eo(e[r++])];return r&&r==n?t:void 0}var ra=Dj;function Ij(t,e,r){var n=t==null?void 0:ra(t,e);return n===void 0?r:n}var Wo=Ij;function Fj(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var na=Fj;var rR=Jt?Jt.isConcatSpreadable:void 0;function Cj(t){return je(t)||Zs(t)||!!(rR&&t&&t[rR])}var nR=Cj;function iR(t,e,r,n,i){var o=-1,a=t.length;for(r||(r=nR),i||(i=[]);++o<a;){var l=t[o];e>0&&r(l)?e>1?iR(l,e-1,r,n,i):na(i,l):n||(i[i.length]=l)}return i}var ia=iR;function Oj(t){var e=t==null?0:t.length;return e?ia(t,1):[]}var et=Oj;function Nj(t){return Wu(qu(t,void 0,et),t+"")}var oR=Nj;function Lj(t){return function(e){return t?.[e]}}var sR=Lj;var Uj={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Hj=sR(Uj),aR=Hj;var Vj=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Bj="\\u0300-\\u036f",Wj="\\ufe20-\\ufe2f",$j="\\u20d0-\\u20ff",jj=Bj+Wj+$j,qj="["+jj+"]",zj=RegExp(qj,"g");function Gj(t){return t=Mn(t),t&&t.replace(Vj,aR).replace(zj,"")}var pS=Gj;function Kj(){this.__data__=new Yi,this.size=0}var cR=Kj;function Qj(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var lR=Qj;function Zj(t){return this.__data__.get(t)}var pR=Zj;function Yj(t){return this.__data__.has(t)}var uR=Yj;var Xj=200;function Jj(t,e){var r=this.__data__;if(r instanceof Yi){var n=r.__data__;if(!Xi||n.length<Xj-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Bo(n)}return r.set(t,e),this.size=r.size,this}var fR=Jj;function oa(t){var e=this.__data__=new Yi(t);this.size=e.size}oa.prototype.clear=cR;oa.prototype.delete=lR;oa.prototype.get=pR;oa.prototype.has=uR;oa.prototype.set=fR;var sa=oa;function eq(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}var Qu=eq;function tq(){return[]}var dR=tq;var rq=Object.prototype,nq=rq.propertyIsEnumerable,mR=Object.getOwnPropertySymbols,iq=mR?function(t){return t==null?[]:(t=Object(t),Qu(mR(t),function(e){return nq.call(t,e)}))}:dR,hR=iq;function oq(t,e,r){var n=e(t);return je(t)?n:na(n,r(t))}var gR=oq;function sq(t){return gR(t,Qi,hR)}var uS=sq;var aq=mr(kt,"DataView"),Zu=aq;var cq=mr(kt,"Promise"),Yu=cq;var lq=mr(kt,"Set"),to=lq;var yR="[object Map]",pq="[object Object]",xR="[object Promise]",SR="[object Set]",TR="[object WeakMap]",vR="[object DataView]",uq=xi(Zu),fq=xi(Xi),dq=xi(Yu),mq=xi(to),hq=xi(Ho),$o=Pn;(Zu&&$o(new Zu(new ArrayBuffer(1)))!=vR||Xi&&$o(new Xi)!=yR||Yu&&$o(Yu.resolve())!=xR||to&&$o(new to)!=SR||Ho&&$o(new Ho)!=TR)&&($o=function(t){var e=Pn(t),r=e==pq?t.constructor:void 0,n=r?xi(r):"";if(n)switch(n){case uq:return vR;case fq:return yR;case dq:return xR;case mq:return SR;case hq:return TR}return e});var fS=$o;var gq=kt.Uint8Array,dS=gq;function yq(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return na(je(r)?Ki(r):[r],ia(e,1))}var Wc=yq;var xq="__lodash_hash_undefined__";function Sq(t){return this.__data__.set(t,xq),this}var bR=Sq;function Tq(t){return this.__data__.has(t)}var wR=Tq;function Xu(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Bo;++e<r;)this.add(t[e])}Xu.prototype.add=Xu.prototype.push=bR;Xu.prototype.has=wR;var Ju=Xu;function vq(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var _R=vq;function bq(t,e){return t.has(e)}var ef=bq;var wq=1,_q=2;function Eq(t,e,r,n,i,o){var a=r&wq,l=t.length,p=e.length;if(l!=p&&!(a&&p>l))return!1;var u=o.get(t),d=o.get(e);if(u&&d)return u==e&&d==t;var m=-1,g=!0,x=r&_q?new Ju:void 0;for(o.set(t,e),o.set(e,t);++m<l;){var w=t[m],v=e[m];if(n)var F=a?n(v,w,m,e,t,o):n(w,v,m,t,e,o);if(F!==void 0){if(F)continue;g=!1;break}if(x){if(!_R(e,function(M,U){if(!ef(x,U)&&(w===M||i(w,M,r,n,o)))return x.push(U)})){g=!1;break}}else if(!(w===v||i(w,v,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var tf=Eq;function Rq(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var ER=Rq;function kq(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var aa=kq;var Pq=1,Mq=2,Aq="[object Boolean]",Dq="[object Date]",Iq="[object Error]",Fq="[object Map]",Cq="[object Number]",Oq="[object RegExp]",Nq="[object Set]",Lq="[object String]",Uq="[object Symbol]",Hq="[object ArrayBuffer]",Vq="[object DataView]",RR=Jt?Jt.prototype:void 0,mS=RR?RR.valueOf:void 0;function Bq(t,e,r,n,i,o,a){switch(r){case Vq:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Hq:return!(t.byteLength!=e.byteLength||!o(new dS(t),new dS(e)));case Aq:case Dq:case Cq:return Gs(+t,+e);case Iq:return t.name==e.name&&t.message==e.message;case Oq:case Lq:return t==e+"";case Fq:var l=ER;case Nq:var p=n&Pq;if(l||(l=aa),t.size!=e.size&&!p)return!1;var u=a.get(t);if(u)return u==e;n|=Mq,a.set(t,e);var d=tf(l(t),l(e),n,i,o,a);return a.delete(t),d;case Uq:if(mS)return mS.call(t)==mS.call(e)}return!1}var kR=Bq;var Wq=1,$q=Object.prototype,jq=$q.hasOwnProperty;function qq(t,e,r,n,i,o){var a=r&Wq,l=uS(t),p=l.length,u=uS(e),d=u.length;if(p!=d&&!a)return!1;for(var m=p;m--;){var g=l[m];if(!(a?g in e:jq.call(e,g)))return!1}var x=o.get(t),w=o.get(e);if(x&&w)return x==e&&w==t;var v=!0;o.set(t,e),o.set(e,t);for(var F=a;++m<p;){g=l[m];var M=t[g],U=e[g];if(n)var K=a?n(U,M,g,e,t,o):n(M,U,g,t,e,o);if(!(K===void 0?M===U||i(M,U,r,n,o):K)){v=!1;break}F||(F=g=="constructor")}if(v&&!F){var ne=t.constructor,ge=e.constructor;ne!=ge&&"constructor"in t&&"constructor"in e&&!(typeof ne=="function"&&ne instanceof ne&&typeof ge=="function"&&ge instanceof ge)&&(v=!1)}return o.delete(t),o.delete(e),v}var PR=qq;var zq=1,MR="[object Arguments]",AR="[object Array]",rf="[object Object]",Gq=Object.prototype,DR=Gq.hasOwnProperty;function Kq(t,e,r,n,i,o){var a=je(t),l=je(e),p=a?AR:fS(t),u=l?AR:fS(e);p=p==MR?rf:p,u=u==MR?rf:u;var d=p==rf,m=u==rf,g=p==u;if(g&&Hc(t)){if(!Hc(e))return!1;a=!0,d=!1}if(g&&!d)return o||(o=new sa),a||Gu(t)?tf(t,e,r,n,i,o):kR(t,e,p,r,n,i,o);if(!(r&zq)){var x=d&&DR.call(t,"__wrapped__"),w=m&&DR.call(e,"__wrapped__");if(x||w){var v=x?t.value():t,F=w?e.value():e;return o||(o=new sa),i(v,F,r,n,o)}}return g?(o||(o=new sa),PR(t,e,r,n,i,o)):!1}var IR=Kq;function FR(t,e,r,n,i){return t===e?!0:t==null||e==null||!er(t)&&!er(e)?t!==t&&e!==e:IR(t,e,r,n,FR,i)}var ca=FR;var Qq=1,Zq=2;function Yq(t,e,r,n){var i=r.length,o=i,a=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var p=l[0],u=t[p],d=l[1];if(a&&l[2]){if(u===void 0&&!(p in t))return!1}else{var m=new sa;if(n)var g=n(u,d,p,t,e,m);if(!(g===void 0?ca(d,u,Qq|Zq,n,m):g))return!1}}return!0}var CR=Yq;function Xq(t){return t===t&&!Or(t)}var nf=Xq;function Jq(t){for(var e=Qi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,nf(i)]}return e}var OR=Jq;function e3(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var of=e3;function t3(t){var e=OR(t);return e.length==1&&e[0][2]?of(e[0][0],e[0][1]):function(r){return r===t||CR(r,t,e)}}var NR=t3;function r3(t,e){return t!=null&&e in Object(t)}var LR=r3;function n3(t,e,r){e=Ku(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var a=eo(e[n]);if(!(o=t!=null&&r(t,a)))break;t=t[a]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Qs(i)&&zs(a,i)&&(je(t)||Zs(t)))}var UR=n3;function i3(t,e){return t!=null&&UR(t,e,LR)}var HR=i3;var o3=1,s3=2;function a3(t,e){return Xs(t)&&nf(e)?of(eo(t),e):function(r){var n=Wo(r,t);return n===void 0&&n===e?HR(r,t):ca(e,n,o3|s3)}}var VR=a3;function c3(t){return function(e){return e?.[t]}}var sf=c3;function l3(t){return function(e){return ra(e,t)}}var BR=l3;function p3(t){return Xs(t)?sf(eo(t)):BR(t)}var WR=p3;function u3(t){return typeof t=="function"?t:t==null?dr:typeof t=="object"?je(t)?VR(t[0],t[1]):NR(t):WR(t)}var ro=u3;function f3(t){return function(e,r,n){for(var i=-1,o=Object(e),a=n(e),l=a.length;l--;){var p=a[t?l:++i];if(r(o[p],p,o)===!1)break}return e}}var $R=f3;var d3=$R(),jR=d3;function m3(t,e){return t&&jR(t,e,Qi)}var qR=m3;function h3(t,e){return function(r,n){if(r==null)return r;if(!$n(r))return t(r,n);for(var i=r.length,o=e?i:-1,a=Object(r);(e?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}var zR=h3;var g3=zR(qR),GR=g3;function y3(t){return er(t)&&$n(t)}var KR=y3;function x3(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var QR=x3;function S3(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var af=S3;var ZR=/[\\^$.*+?()[\]{}|]/g,T3=RegExp(ZR.source);function v3(t){return t=Mn(t),t&&T3.test(t)?t.replace(ZR,"\\$&"):t}var Nr=v3;var b3=Math.max,w3=Math.min;function _3(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=Fu(r),i=r<0?b3(n+i,0):w3(i,n-1)),$u(t,ro(e,3),i,!0)}var $c=_3;function E3(t,e){var r=-1,n=$n(t)?Array(t.length):[];return GR(t,function(i,o,a){n[++r]=e(i,o,a)}),n}var YR=E3;var R3="Expected a function",k3=8,P3=32,M3=128,A3=256;function D3(t){return oR(function(e){var r=e.length,n=r,i=Gi.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(R3);if(i&&!a&&qs(o)=="wrapper")var a=new Gi([],!0)}for(n=a?n:r;++n<r;){o=e[n];var l=qs(o),p=l=="wrapper"?Hu(o):void 0;p&&nS(p[0])&&p[1]==(M3|k3|P3|A3)&&!p[4].length&&p[9]==1?a=a[qs(p[0])].apply(a,p[3]):a=o.length==1&&nS(o)?a[l]():a.thru(o)}return function(){var u=arguments,d=u[0];if(a&&u.length==1&&je(d))return a.plant(d).value();for(var m=0,g=r?e[m].apply(this,u):d;++m<r;)g=e[m].call(this,g);return g}})}var XR=D3;var I3=XR(),hS=I3;function F3(t,e){return t>e}var JR=F3;function C3(t,e){return nn(e,function(r){return t[r]})}var ek=C3;function O3(t){return t==null?[]:ek(t,Qi(t))}var tk=O3;function N3(t,e){return ca(t,e)}var Ti=N3;function L3(t,e){return t<e}var rk=L3;function U3(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],a=e(o);if(a!=null&&(l===void 0?a===a&&!Cr(a):r(a,l)))var l=a,p=o}return p}var cf=U3;function H3(t,e){return t&&t.length?cf(t,ro(e,2),JR):void 0}var gS=H3;function V3(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var nk=V3;function B3(t){return t&&t.length?cf(t,dr,rk):void 0}var yS=B3;function W3(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var ik=W3;function $3(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Cr(t),a=e!==void 0,l=e===null,p=e===e,u=Cr(e);if(!l&&!u&&!o&&t>e||o&&a&&p&&!l&&!u||n&&a&&p||!r&&p||!i)return 1;if(!n&&!o&&!u&&t<e||u&&r&&i&&!n&&!o||l&&r&&i||!a&&i||!p)return-1}return 0}var ok=$3;function j3(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,a=i.length,l=r.length;++n<a;){var p=ok(i[n],o[n]);if(p){if(n>=l)return p;var u=r[n];return p*(u=="desc"?-1:1)}}return t.index-e.index}var sk=j3;function q3(t,e,r){e.length?e=nn(e,function(o){return je(o)?function(a){return ra(a,o.length===1?o[0]:o)}:o}):e=[dr];var n=-1;e=nn(e,Ys(ro));var i=YR(t,function(o,a,l){var p=nn(e,function(u){return u(o)});return{criteria:p,index:++n,value:o}});return ik(i,function(o,a){return sk(o,a,r)})}var ak=q3;var z3=9007199254740991,G3=Math.floor;function K3(t,e){var r="";if(!t||e<1||e>z3)return r;do e%2&&(r+=t),e=G3(e/2),e&&(t+=t);while(e);return r}var ck=K3;function Q3(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var lk=Q3;var Z3=Array.prototype,pk=Z3.splice;function Y3(t,e,r,n){var i=n?lk:ju,o=-1,a=e.length,l=t;for(t===e&&(e=Ki(e)),r&&(l=nn(t,Ys(r)));++o<a;)for(var p=0,u=e[o],d=r?r(u):u;(p=i(l,d,p,n))>-1;)l!==t&&pk.call(l,p,1),pk.call(t,p,1);return t}var uk=Y3;function X3(t,e){return t&&t.length&&e&&e.length?uk(t,e):t}var fk=X3;var J3=Ks(fk),tr=J3;var ez=Math.floor,tz=Math.random;function rz(t,e){return t+ez(tz()*(e-t+1))}var dk=rz;var nz=Math.ceil,iz=Math.max;function oz(t,e,r,n){for(var i=-1,o=iz(nz((e-t)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=t,t+=r;return a}var mk=oz;function sz(t){return function(e,r,n){return n&&typeof n!="number"&&Vo(e,r,n)&&(r=n=void 0),e=Ws(e),r===void 0?(r=e,e=0):r=Ws(r),n=n===void 0?e<r?1:-1:Ws(n),mk(e,r,n,t)}}var hk=sz;var az=hk(),xS=az;function cz(t,e,r){return(r?Vo(t,e,r):e===void 0)?e=1:e=Fu(e),ck(Mn(t),e)}var SS=cz;function lz(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=dk(r,i),a=t[o];t[o]=t[r],t[r]=a}return t.length=e,t}var lf=lz;function pz(t){return lf(Ki(t))}var gk=pz;function uz(t){return lf(tk(t))}var yk=uz;function fz(t){var e=je(t)?gk:yk;return e(t)}var TS=fz;var dz=Ks(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Vo(t,e[0],e[1])?e=[]:r>2&&Vo(e[0],e[1],e[2])&&(e=[e[0]]),ak(t,ia(e,1),[])}),vS=dz;function mz(t,e){return t&&t.length?nk(t,ro(e,2)):0}var pf=mz;var hz=1/0,gz=to&&1/aa(new to([,-0]))[1]==hz?function(t){return new to(t)}:Uu,xk=gz;var yz=200;function xz(t,e,r){var n=-1,i=wE,o=t.length,a=!0,l=[],p=l;if(r)a=!1,i=QR;else if(o>=yz){var u=e?null:xk(t);if(u)return aa(u);a=!1,i=ef,p=new Ju}else p=e?[]:l;e:for(;++n<o;){var d=t[n],m=e?e(d):d;if(d=r||d!==0?d:0,a&&m===m){for(var g=p.length;g--;)if(p[g]===m)continue e;e&&p.push(m),l.push(d)}else i(p,m,r)||(p!==l&&p.push(m),l.push(d))}return l}var uf=xz;function Sz(t){return t&&t.length?uf(t):[]}var jo=Sz;function Tz(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?uf(t,void 0,e):[]}var jc=Tz;var vz=Math.max;function bz(t){if(!(t&&t.length))return[];var e=0;return t=Qu(t,function(r){if(KR(r))return e=vz(r.length,e),!0}),zu(e,function(r){return nn(t,sf(r))})}var Sk=bz;var wz=Ks(Sk),Tt=wz;var ff=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0}}};var qc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Bt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{tr(this.listeners,e)}}}};var df={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var zc=class{constructor(){this.notifier=new Bt;this.mocks={...df};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(Ez(n,r))return Wo(i,e)??Wo(this.mocks,e)}return Wo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function Ez(t,e){return t.languageId===e.languageId}var mf={hideInferenceWarning:!1,tutorialProgress:{}};var Gc=class{constructor(){this.data={...mf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var Kc=class{async showMessage(e,r,n,...i){}};var hf=class{constructor(){this.configuration=new zc;this.messages=new Kc;this.keyValueStore=new Gc;this.clipboard=new qc;this.capabilities=new ff;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=la;this.onDidCloseTextDocument=la;this.onDidChangeActiveTextEditor=la;this.onDidChangeVisibleTextEditors=la;this.onDidChangeTextEditorSelection=la;this.onDidChangeTextEditorVisibleRanges=la}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>tr(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function la(){return{dispose(){}}}var ce=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new $(this,this)}concise(){return`${this.line}:${this.character}`}toString(){return this.concise()}};function Tk(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var $=class t{constructor(...e){let[r,n]=e.length===2?e:[new ce(e[0],e[1]),new ce(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof ce?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new we(this.end,this.start):new we(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}toString(){return this.concise()}};function Rz(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function kz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function vk(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var gf=vk(Rz),yf=vk(kz);function bS(t,e){return e.lastIndex=0,t.matchAll(e)}function on(t,e,r){return Array.from(bS(t,e),r)}function qo(t,e){return t.lastIndex=0,t.test(e)}function bk(t,e){return t.lastIndex=0,e.match(t)}function Qc(t,e){return on(t,e,r=>({index:r.index,text:r[0]}))}var pa=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var xf=class extends pa{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function Zc(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function ot(t,e,r,...n){return t.showMessage("error",e,r,...n)}var oe=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(oe||{});var{supported:rt,unsupported:Ile,notApplicable:wk}=oe,wS={ifStatement:rt,disqualifyDelimiter:rt,"comment.line":rt,"comment.block":rt,"string.singleLine":rt,"textFragment.comment.line":rt,"textFragment.comment.block":rt,"textFragment.string.singleLine":rt,class:rt,className:rt,namedFunction:rt,"name.function":rt,"name.class":rt,"name.field":rt,functionName:rt,"name.argument.formal":rt,"name.argument.formal.iteration":rt,"name.variable":rt,"value.variable":rt,"name.assignment":rt,"value.assignment":rt,"statement.class":rt,"type.class":rt,"type.field":rt,"value.argument.formal":wk,"value.argument.formal.iteration":wk};var{supported:Ole,unsupported:Nle,notApplicable:Lle}=oe;var{supported:_k,unsupported:Ble,notApplicable:Wle}=oe,Pz={...wS,"value.argument.formal":_k,"value.argument.formal.iteration":_k};var{supported:qle,unsupported:zle,notApplicable:Gle}=oe;var{supported:Yc,unsupported:Mz,notApplicable:Zle}=oe,_S={"comment.block":Yc,"string.singleLine":Yc,"name.iteration.block":Yc,"name.iteration.document":Yc,disqualifyDelimiter:Yc,"comment.line":Mz};var{supported:Jle,unsupported:epe,notApplicable:tpe}=oe;var{supported:ipe,unsupported:ope,notApplicable:spe}=oe;var{supported:lpe,notApplicable:ppe}=oe;var{supported:dpe,notApplicable:mpe}=oe;var{supported:z,unsupported:ype,notApplicable:sn}=oe,ES={list:z,map:z,ifStatement:z,regularExpression:z,switchStatementSubject:z,fieldAccess:z,disqualifyDelimiter:z,"textFragment.string.singleLine":z,"textFragment.string.multiLine":z,"textFragment.comment.line":z,"textFragment.comment.block":z,statement:z,"statement.iteration.document":z,"statement.iteration.block":z,class:z,className:z,anonymousFunction:z,namedFunction:z,"namedFunction.iteration.document":z,"namedFunction.method":z,"namedFunction.method.iteration.class":z,"namedFunction.constructor":z,functionName:z,"functionName.iteration.document":z,"functionName.method":z,"functionName.method.iteration.class":z,"functionName.constructor":z,functionCall:z,"functionCall.constructor":z,functionCallee:z,"functionCallee.constructor":z,"argument.actual":z,"argument.actual.iteration":z,"argument.actual.method":z,"argument.actual.method.iteration":z,"argument.actual.constructor":z,"argument.actual.constructor.iteration":z,"argument.formal":z,"argument.formal.iteration":z,"argument.formal.method":z,"argument.formal.method.iteration":z,"argument.formal.constructor":z,"argument.formal.constructor.iteration":z,"comment.line":z,"comment.block":z,"string.singleLine":z,"string.multiLine":z,"branch.if":z,"branch.if.iteration":z,"branch.try":z,"branch.switchCase":z,"branch.switchCase.iteration":z,"branch.ternary":z,"condition.if":z,"condition.while":z,"condition.doWhile":z,"condition.for":z,"condition.ternary":z,"condition.switchCase":z,"name.argument.formal":z,"name.argument.formal.iteration":z,"name.argument.formal.method":z,"name.argument.formal.method.iteration":z,"name.argument.formal.constructor":z,"name.argument.formal.constructor.iteration":z,"name.foreach":z,"name.assignment":z,"name.assignment.pattern":z,"name.variable":z,"name.variable.pattern":z,"name.function":z,"name.method":z,"name.constructor":z,"name.class":z,"name.field":z,"key.mapPair":z,"key.mapPair.iteration":z,"value.argument.formal":z,"value.argument.formal.iteration":z,"value.argument.formal.method":z,"value.argument.formal.method.iteration":z,"value.argument.formal.constructor":z,"value.argument.formal.constructor.iteration":z,"value.mapPair":z,"value.mapPair.iteration":z,"value.assignment":z,"value.variable":z,"value.variable.pattern":z,"value.foreach":z,"value.return":z,"value.return.lambda":z,"value.field":z,"collectionItem.unenclosed":z},RS={element:z,tags:z,startTag:z,endTag:z,attribute:z,"key.attribute":z,"value.attribute":z},kS={...ES,...RS,"type.variable":sn,"type.argument.formal":sn,"type.argument.formal.iteration":sn,"type.argument.formal.method":sn,"type.argument.formal.method.iteration":sn,"type.argument.formal.constructor":sn,"type.argument.formal.constructor.iteration":sn,"type.return":sn,"type.field":sn,"type.foreach":sn,"type.interface":sn,command:sn};var{supported:Az,unsupported:vpe,notApplicable:bpe}=oe,Dz={...kS,"textFragment.element":Az};var{supported:PS}=oe,Xc={"comment.line":PS,"comment.block":PS,map:PS};var{supported:Ppe,unsupported:Mpe,notApplicable:Ape}=oe,Iz={...Xc};var{supported:Cpe,unsupported:Ope,notApplicable:Npe}=oe,Fz={...Xc};var{supported:Hpe,unsupported:Vpe,notApplicable:Bpe}=oe;var{supported:jpe,notApplicable:qpe}=oe;var{supported:Kpe,unsupported:Qpe,notApplicable:Zpe}=oe;var{supported:Jpe,unsupported:eue,notApplicable:tue}=oe;var{supported:iue,notApplicable:oue}=oe;var{supported:cue,unsupported:lue,notApplicable:pue}=oe;var{supported:due,unsupported:mue,notApplicable:hue}=oe;var{supported:xue,unsupported:Sue,notApplicable:Tue}=oe;var{supported:wue,unsupported:_ue,notApplicable:Eue}=oe;var{supported:ua,unsupported:Mue,notApplicable:Aue}=oe,Cz={..._S,"namedFunction.iteration":ua,"namedFunction.iteration.document":ua,"functionName.iteration":ua,"functionName.iteration.document":ua,"comment.line":ua,disqualifyDelimiter:ua};var{supported:Fue}=oe;var{supported:Wt}=oe,MS={...ES,"name.field":Wt,"type.argument.formal":Wt,"type.argument.formal.iteration":Wt,"type.argument.formal.method":Wt,"type.argument.formal.method.iteration":Wt,"type.argument.formal.constructor":Wt,"type.argument.formal.constructor.iteration":Wt,"type.alias":Wt,"type.cast":Wt,"type.field":Wt,"type.interface":Wt,"type.return":Wt,"type.variable":Wt,"value.field":Wt,"value.typeAlias":Wt,disqualifyDelimiter:Wt};var{supported:Bue,unsupported:Wue,notApplicable:$ue}=oe,Oz={...MS,...RS};var{supported:zue,unsupported:Gue,notApplicable:Kue}=oe;var{supported:Yue,unsupported:Xue,notApplicable:Jue}=oe;var fa=["that","source","instanceReference","keyboard"];var we=class extends ${get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new ce(e[0],e[1]),new ce(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}toString(){return this.concise()}};function Rk({line:t,character:e}){return new ce(t,e)}function Sf({start:t,end:e}){return new $(Rk(t),Rk(e))}function an({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function vt({start:t,end:e}){return{type:"character",start:t,end:e}}function Jc(t){return{start:Tf(t.start),end:Tf(t.end)}}function kk(t){return{anchor:Tf(t.anchor),active:Tf(t.active)}}function Tf({line:t,character:e}){return{line:t,character:e}}function qk(t){return typeof t>"u"||t===null}function Nz(t){return typeof t=="object"&&t!==null}function Lz(t){return Array.isArray(t)?t:qk(t)?[]:[t]}function Uz(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function Hz(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function Vz(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Bz=qk,Wz=Nz,$z=Lz,jz=Hz,qz=Vz,zz=Uz,bt={isNothing:Bz,isObject:Wz,toArray:$z,repeat:jz,isNegativeZero:qz,extend:zz};function zk(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function tl(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=zk(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}tl.prototype=Object.create(Error.prototype);tl.prototype.constructor=tl;tl.prototype.toString=function(e){return this.name+": "+zk(this,e)};var hr=tl;function AS(t,e,r,n,i){var o="",a="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(a=" ...",r=n+l-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}function DS(t,e){return bt.repeat(" ",e-t.length)+t}function Gz(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var l="",p,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,m=e.maxLength-(e.indent+d+3);for(p=1;p<=e.linesBefore&&!(a-p<0);p++)u=AS(t.buffer,n[a-p],i[a-p],t.position-(n[a]-n[a-p]),m),l=bt.repeat(" ",e.indent)+DS((t.line-p+1).toString(),d)+" | "+u.str+`
`+l;for(u=AS(t.buffer,n[a],i[a],t.position,m),l+=bt.repeat(" ",e.indent)+DS((t.line+1).toString(),d)+" | "+u.str+`
`,l+=bt.repeat("-",e.indent+d+3+u.pos)+`^
`,p=1;p<=e.linesAfter&&!(a+p>=i.length);p++)u=AS(t.buffer,n[a+p],i[a+p],t.position-(n[a]-n[a+p]),m),l+=bt.repeat(" ",e.indent)+DS((t.line+p+1).toString(),d)+" | "+u.str+`
`;return l.replace(/\n$/,"")}var Kz=Gz,Qz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Zz=["scalar","sequence","mapping"];function Yz(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function Xz(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(Qz.indexOf(r)===-1)throw new hr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Yz(e.styleAliases||null),Zz.indexOf(this.kind)===-1)throw new hr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ot=Xz;function Ak(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}function Jz(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function FS(t){return this.extend(t)}FS.prototype.extend=function(e){var r=[],n=[];if(e instanceof Ot)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new hr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Ot))throw new hr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new hr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new hr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Ot))throw new hr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(FS.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Ak(i,"implicit"),i.compiledExplicit=Ak(i,"explicit"),i.compiledTypeMap=Jz(i.compiledImplicit,i.compiledExplicit),i};var eG=FS,tG=new Ot("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),rG=new Ot("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),nG=new Ot("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),iG=new eG({explicit:[tG,rG,nG]});function oG(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function sG(){return null}function aG(t){return t===null}var cG=new Ot("tag:yaml.org,2002:null",{kind:"scalar",resolve:oG,construct:sG,predicate:aG,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function lG(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function pG(t){return t==="true"||t==="True"||t==="TRUE"}function uG(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var fG=new Ot("tag:yaml.org,2002:bool",{kind:"scalar",resolve:lG,construct:pG,predicate:uG,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function dG(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function mG(t){return 48<=t&&t<=55}function hG(t){return 48<=t&&t<=57}function gG(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!dG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!mG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!hG(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function yG(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function xG(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!bt.isNegativeZero(t)}var SG=new Ot("tag:yaml.org,2002:int",{kind:"scalar",resolve:gG,construct:yG,predicate:xG,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),TG=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function vG(t){return!(t===null||!TG.test(t)||t[t.length-1]==="_")}function bG(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var wG=/^[-+]?[0-9]+e/;function _G(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(bt.isNegativeZero(t))return"-0.0";return r=t.toString(10),wG.test(r)?r.replace("e",".e"):r}function EG(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||bt.isNegativeZero(t))}var RG=new Ot("tag:yaml.org,2002:float",{kind:"scalar",resolve:vG,construct:bG,predicate:EG,represent:_G,defaultStyle:"lowercase"}),kG=iG.extend({implicit:[cG,fG,SG,RG]}),PG=kG,Gk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Kk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function MG(t){return t===null?!1:Gk.exec(t)!==null||Kk.exec(t)!==null}function AG(t){var e,r,n,i,o,a,l,p=0,u=null,d,m,g;if(e=Gk.exec(t),e===null&&(e=Kk.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],l=+e[6],e[7]){for(p=e[7].slice(0,3);p.length<3;)p+="0";p=+p}return e[9]&&(d=+e[10],m=+(e[11]||0),u=(d*60+m)*6e4,e[9]==="-"&&(u=-u)),g=new Date(Date.UTC(r,n,i,o,a,l,p)),u&&g.setTime(g.getTime()-u),g}function DG(t){return t.toISOString()}var IG=new Ot("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:MG,construct:AG,instanceOf:Date,represent:DG});function FG(t){return t==="<<"||t===null}var CG=new Ot("tag:yaml.org,2002:merge",{kind:"scalar",resolve:FG}),US=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function OG(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=US;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function NG(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=US,a=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):r===18?(l.push(a>>10&255),l.push(a>>2&255)):r===12&&l.push(a>>4&255),new Uint8Array(l)}function LG(t){var e="",r=0,n,i,o=t.length,a=US;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}function UG(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var HG=new Ot("tag:yaml.org,2002:binary",{kind:"scalar",resolve:OG,construct:NG,predicate:UG,represent:LG}),VG=Object.prototype.hasOwnProperty,BG=Object.prototype.toString;function WG(t){if(t===null)return!0;var e=[],r,n,i,o,a,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],a=!1,BG.call(i)!=="[object Object]")return!1;for(o in i)if(VG.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function $G(t){return t!==null?t:[]}var jG=new Ot("tag:yaml.org,2002:omap",{kind:"sequence",resolve:WG,construct:$G}),qG=Object.prototype.toString;function zG(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],qG.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function GG(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var KG=new Ot("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:zG,construct:GG}),QG=Object.prototype.hasOwnProperty;function ZG(t){if(t===null)return!0;var e,r=t;for(e in r)if(QG.call(r,e)&&r[e]!==null)return!1;return!0}function YG(t){return t!==null?t:{}}var XG=new Ot("tag:yaml.org,2002:set",{kind:"mapping",resolve:ZG,construct:YG}),HS=PG.extend({implicit:[IG,CG],explicit:[HG,jG,KG,XG]}),io=Object.prototype.hasOwnProperty,vf=1,Qk=2,Zk=3,bf=4,IS=1,JG=2,Dk=3,eK=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,tK=/[\x85\u2028\u2029]/,rK=/[,\[\]\{\}]/,Yk=/^(?:!|!!|![a-z\-]+!)$/i,Xk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ik(t){return Object.prototype.toString.call(t)}function jn(t){return t===10||t===13}function Go(t){return t===9||t===32}function gr(t){return t===9||t===32||t===10||t===13}function ma(t){return t===44||t===91||t===93||t===123||t===125}function nK(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function iK(t){return t===120?2:t===117?4:t===85?8:0}function oK(t){return 48<=t&&t<=57?t-48:-1}function Fk(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function sK(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var Jk=new Array(256),eP=new Array(256);for(zo=0;zo<256;zo++)Jk[zo]=Fk(zo)?1:0,eP[zo]=Fk(zo);var zo;function aK(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||HS,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function tP(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=Kz(r),new hr(e,r)}function ae(t,e){throw tP(t,e)}function wf(t,e){t.onWarning&&t.onWarning.call(null,tP(t,e))}var Ck={YAML:function(e,r,n){var i,o,a;e.version!==null&&ae(e,"duplication of %YAML directive"),n.length!==1&&ae(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&ae(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&ae(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&wf(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&ae(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],Yk.test(i)||ae(e,"ill-formed tag handle (first argument) of the TAG directive"),io.call(e.tagMap,i)&&ae(e,'there is a previously declared suffix for "'+i+'" tag handle'),Xk.test(o)||ae(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{ae(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function no(t,e,r,n){var i,o,a,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||ae(t,"expected valid JSON character");else eK.test(l)&&ae(t,"the stream contains non-printable characters");t.result+=l}}function Ok(t,e,r,n){var i,o,a,l;for(bt.isObject(r)||ae(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,l=i.length;a<l;a+=1)o=i[a],io.call(e,o)||(e[o]=r[o],n[o]=!0)}function ha(t,e,r,n,i,o,a,l,p){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&ae(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Ik(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Ik(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)Ok(t,e,o[u],r);else Ok(t,e,o,r);else!t.json&&!io.call(r,i)&&io.call(e,i)&&(t.line=a||t.line,t.lineStart=l||t.lineStart,t.position=p||t.position,ae(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function VS(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ae(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function yt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Go(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(jn(i))for(VS(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&wf(t,"deficient indentation"),n}function Rf(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||gr(r)))}function BS(t,e){e===1?t.result+=" ":e>1&&(t.result+=bt.repeat(`
`,e-1))}function cK(t,e,r){var n,i,o,a,l,p,u,d,m=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),gr(x)||ma(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),gr(i)||r&&ma(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),gr(i)||r&&ma(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),gr(n))break}else{if(t.position===t.lineStart&&Rf(t)||r&&ma(x))break;if(jn(x))if(p=t.line,u=t.lineStart,d=t.lineIndent,yt(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=p,t.lineStart=u,t.lineIndent=d;break}}l&&(no(t,o,a,!1),BS(t,t.line-p),o=a=t.position,l=!1),Go(x)||(a=t.position+1),x=t.input.charCodeAt(++t.position)}return no(t,o,a,!1),t.result?!0:(t.kind=m,t.result=g,!1)}function lK(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(no(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else jn(r)?(no(t,n,i,!0),BS(t,yt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Rf(t)?ae(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);ae(t,"unexpected end of the stream within a single quoted scalar")}function pK(t,e){var r,n,i,o,a,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return no(t,r,t.position,!0),t.position++,!0;if(l===92){if(no(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),jn(l))yt(t,!1,e);else if(l<256&&Jk[l])t.result+=eP[l],t.position++;else if((a=iK(l))>0){for(i=a,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(a=nK(l))>=0?o=(o<<4)+a:ae(t,"expected hexadecimal character");t.result+=sK(o),t.position++}else ae(t,"unknown escape sequence");r=n=t.position}else jn(l)?(no(t,r,n,!0),BS(t,yt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Rf(t)?ae(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}ae(t,"unexpected end of the stream within a double quoted scalar")}function uK(t,e){var r=!0,n,i,o,a=t.tag,l,p=t.anchor,u,d,m,g,x,w=Object.create(null),v,F,M,U;if(U=t.input.charCodeAt(t.position),U===91)d=93,x=!1,l=[];else if(U===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),U=t.input.charCodeAt(++t.position);U!==0;){if(yt(t,!0,e),U=t.input.charCodeAt(t.position),U===d)return t.position++,t.tag=a,t.anchor=p,t.kind=x?"mapping":"sequence",t.result=l,!0;r?U===44&&ae(t,"expected the node content, but found ','"):ae(t,"missed comma between flow collection entries"),F=v=M=null,m=g=!1,U===63&&(u=t.input.charCodeAt(t.position+1),gr(u)&&(m=g=!0,t.position++,yt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,ga(t,e,vf,!1,!0),F=t.tag,v=t.result,yt(t,!0,e),U=t.input.charCodeAt(t.position),(g||t.line===n)&&U===58&&(m=!0,U=t.input.charCodeAt(++t.position),yt(t,!0,e),ga(t,e,vf,!1,!0),M=t.result),x?ha(t,l,w,F,v,M,n,i,o):m?l.push(ha(t,null,w,F,v,M,n,i,o)):l.push(v),yt(t,!0,e),U=t.input.charCodeAt(t.position),U===44?(r=!0,U=t.input.charCodeAt(++t.position)):r=!1}ae(t,"unexpected end of the stream within a flow collection")}function fK(t,e){var r,n,i=IS,o=!1,a=!1,l=e,p=0,u=!1,d,m;if(m=t.input.charCodeAt(t.position),m===124)n=!1;else if(m===62)n=!0;else return!1;for(t.kind="scalar",t.result="";m!==0;)if(m=t.input.charCodeAt(++t.position),m===43||m===45)IS===i?i=m===43?Dk:JG:ae(t,"repeat of a chomping mode identifier");else if((d=oK(m))>=0)d===0?ae(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?ae(t,"repeat of an indentation width identifier"):(l=e+d-1,a=!0);else break;if(Go(m)){do m=t.input.charCodeAt(++t.position);while(Go(m));if(m===35)do m=t.input.charCodeAt(++t.position);while(!jn(m)&&m!==0)}for(;m!==0;){for(VS(t),t.lineIndent=0,m=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&m===32;)t.lineIndent++,m=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),jn(m)){p++;continue}if(t.lineIndent<l){i===Dk?t.result+=bt.repeat(`
`,o?1+p:p):i===IS&&o&&(t.result+=`
`);break}for(n?Go(m)?(u=!0,t.result+=bt.repeat(`
`,o?1+p:p)):u?(u=!1,t.result+=bt.repeat(`
`,p+1)):p===0?o&&(t.result+=" "):t.result+=bt.repeat(`
`,p):t.result+=bt.repeat(`
`,o?1+p:p),o=!0,a=!0,p=0,r=t.position;!jn(m)&&m!==0;)m=t.input.charCodeAt(++t.position);no(t,r,t.position,!1)}return!0}function Nk(t,e){var r,n=t.tag,i=t.anchor,o=[],a,l=!1,p;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),p=t.input.charCodeAt(t.position);p!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ae(t,"tab characters must not be used in indentation")),!(p!==45||(a=t.input.charCodeAt(t.position+1),!gr(a))));){if(l=!0,t.position++,yt(t,!0,-1)&&t.lineIndent<=e){o.push(null),p=t.input.charCodeAt(t.position);continue}if(r=t.line,ga(t,e,Zk,!1,!0),o.push(t.result),yt(t,!0,-1),p=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&p!==0)ae(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function dK(t,e,r){var n,i,o,a,l,p,u=t.tag,d=t.anchor,m={},g=Object.create(null),x=null,w=null,v=null,F=!1,M=!1,U;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=m),U=t.input.charCodeAt(t.position);U!==0;){if(!F&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ae(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(U===63||U===58)&&gr(n))U===63?(F&&(ha(t,m,g,x,w,null,a,l,p),x=w=v=null),M=!0,F=!0,i=!0):F?(F=!1,i=!0):ae(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,U=n;else{if(a=t.line,l=t.lineStart,p=t.position,!ga(t,r,Qk,!1,!0))break;if(t.line===o){for(U=t.input.charCodeAt(t.position);Go(U);)U=t.input.charCodeAt(++t.position);if(U===58)U=t.input.charCodeAt(++t.position),gr(U)||ae(t,"a whitespace character is expected after the key-value separator within a block mapping"),F&&(ha(t,m,g,x,w,null,a,l,p),x=w=v=null),M=!0,F=!1,i=!1,x=t.tag,w=t.result;else if(M)ae(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(M)ae(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(F&&(a=t.line,l=t.lineStart,p=t.position),ga(t,e,bf,!0,i)&&(F?w=t.result:v=t.result),F||(ha(t,m,g,x,w,v,a,l,p),x=w=v=null),yt(t,!0,-1),U=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&U!==0)ae(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return F&&ha(t,m,g,x,w,null,a,l,p),M&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=m),M}function mK(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&ae(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):ae(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!gr(a);)a===33&&(n?ae(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),Yk.test(i)||ae(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),rK.test(o)&&ae(t,"tag suffix cannot contain flow indicator characters")}o&&!Xk.test(o)&&ae(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{ae(t,"tag name is malformed: "+o)}return r?t.tag=o:io.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:ae(t,'undeclared tag handle "'+i+'"'),!0}function hK(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&ae(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!gr(r)&&!ma(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&ae(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function gK(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!gr(n)&&!ma(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&ae(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),io.call(t.anchorMap,r)||ae(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],yt(t,!0,-1),!0}function ga(t,e,r,n,i){var o,a,l,p=1,u=!1,d=!1,m,g,x,w,v,F;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=bf===r||Zk===r,n&&yt(t,!0,-1)&&(u=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),p===1)for(;mK(t)||hK(t);)yt(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):l=!1;if(l&&(l=u||i),(p===1||bf===r)&&(vf===r||Qk===r?v=e:v=e+1,F=t.position-t.lineStart,p===1?l&&(Nk(t,F)||dK(t,F,v))||uK(t,v)?d=!0:(a&&fK(t,v)||lK(t,v)||pK(t,v)?d=!0:gK(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&ae(t,"alias node should not have any properties")):cK(t,v,vf===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):p===0&&(d=l&&Nk(t,F))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ae(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),m=0,g=t.implicitTypes.length;m<g;m+=1)if(w=t.implicitTypes[m],w.resolve(t.result)){t.result=w.construct(t.result),t.tag=w.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(io.call(t.typeMap[t.kind||"fallback"],t.tag))w=t.typeMap[t.kind||"fallback"][t.tag];else for(w=null,x=t.typeMap.multi[t.kind||"fallback"],m=0,g=x.length;m<g;m+=1)if(t.tag.slice(0,x[m].tag.length)===x[m].tag){w=x[m];break}w||ae(t,"unknown tag !<"+t.tag+">"),t.result!==null&&w.kind!==t.kind&&ae(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+w.kind+'", not "'+t.kind+'"'),w.resolve(t.result,t.tag)?(t.result=w.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ae(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function yK(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(yt(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!gr(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&ae(t,"directive name must not be less than one character in length");a!==0;){for(;Go(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!jn(a));break}if(jn(a))break;for(r=t.position;a!==0&&!gr(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&VS(t),io.call(Ck,n)?Ck[n](t,n,i):wf(t,'unknown document directive "'+n+'"')}if(yt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,yt(t,!0,-1)):o&&ae(t,"directives end mark is expected"),ga(t,t.lineIndent-1,bf,!1,!0),yt(t,!0,-1),t.checkLineBreaks&&tK.test(t.input.slice(e,t.position))&&wf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Rf(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,yt(t,!0,-1));return}if(t.position<t.length-1)ae(t,"end of the stream or a document separator is expected");else return}function rP(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new aK(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,ae(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)yK(r);return r.documents}function xK(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=rP(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function SK(t,e){var r=rP(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new hr("expected a single document in the stream, but found more")}}var TK=xK,vK=SK,nP={loadAll:TK,load:vK},iP=Object.prototype.toString,oP=Object.prototype.hasOwnProperty,WS=65279,bK=9,rl=10,wK=13,_K=32,EK=33,RK=34,CS=35,kK=37,PK=38,MK=39,AK=42,sP=44,DK=45,_f=58,IK=61,FK=62,CK=63,OK=64,aP=91,cP=93,NK=96,lP=123,LK=124,pP=125,$t={};$t[0]="\\0";$t[7]="\\a";$t[8]="\\b";$t[9]="\\t";$t[10]="\\n";$t[11]="\\v";$t[12]="\\f";$t[13]="\\r";$t[27]="\\e";$t[34]='\\"';$t[92]="\\\\";$t[133]="\\N";$t[160]="\\_";$t[8232]="\\L";$t[8233]="\\P";var UK=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],HK=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function VK(t,e){var r,n,i,o,a,l,p;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),p=t.compiledTypeMap.fallback[a],p&&oP.call(p.styleAliases,l)&&(l=p.styleAliases[l]),r[a]=l;return r}function BK(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new hr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+bt.repeat("0",n-e.length)+e}var WK=1,nl=2;function $K(t){this.schema=t.schema||HS,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=bt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=VK(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?nl:WK,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Lk(t,e){for(var r=bt.repeat(" ",e),n=0,i=-1,o="",a,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=l):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}function OS(t,e){return`
`+bt.repeat(" ",t.indent*e)}function jK(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function Ef(t){return t===_K||t===bK}function il(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==WS||65536<=t&&t<=1114111}function Uk(t){return il(t)&&t!==WS&&t!==wK&&t!==rl}function Hk(t,e,r){var n=Uk(t),i=n&&!Ef(t);return(r?n:n&&t!==sP&&t!==aP&&t!==cP&&t!==lP&&t!==pP)&&t!==CS&&!(e===_f&&!i)||Uk(e)&&!Ef(e)&&t===CS||e===_f&&i}function qK(t){return il(t)&&t!==WS&&!Ef(t)&&t!==DK&&t!==CK&&t!==_f&&t!==sP&&t!==aP&&t!==cP&&t!==lP&&t!==pP&&t!==CS&&t!==PK&&t!==AK&&t!==EK&&t!==LK&&t!==IK&&t!==FK&&t!==MK&&t!==RK&&t!==kK&&t!==OK&&t!==NK}function zK(t){return!Ef(t)&&t!==_f}function el(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function uP(t){var e=/^\n* /;return e.test(t)}var fP=1,NS=2,dP=3,mP=4,da=5;function GK(t,e,r,n,i,o,a,l){var p,u=0,d=null,m=!1,g=!1,x=n!==-1,w=-1,v=qK(el(t,0))&&zK(el(t,t.length-1));if(e||a)for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=el(t,p),!il(u))return da;v=v&&Hk(u,d,l),d=u}else{for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=el(t,p),u===rl)m=!0,x&&(g=g||p-w-1>n&&t[w+1]!==" ",w=p);else if(!il(u))return da;v=v&&Hk(u,d,l),d=u}g=g||x&&p-w-1>n&&t[w+1]!==" "}return!m&&!g?v&&!a&&!i(t)?fP:o===nl?da:NS:r>9&&uP(t)?da:a?o===nl?da:NS:g?mP:dP}function KK(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===nl?'""':"''";if(!t.noCompatMode&&(UK.indexOf(e)!==-1||HK.test(e)))return t.quotingType===nl?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function p(u){return jK(t,u)}switch(GK(e,l,t.indent,a,p,t.quotingType,t.forceQuotes&&!n,i)){case fP:return e;case NS:return"'"+e.replace(/'/g,"''")+"'";case dP:return"|"+Vk(e,t.indent)+Bk(Lk(e,o));case mP:return">"+Vk(e,t.indent)+Bk(Lk(QK(e,a),o));case da:return'"'+ZK(e)+'"';default:throw new hr("impossible error: invalid scalar style")}}()}function Vk(t,e){var r=uP(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function Bk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function QK(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,Wk(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var l=a[1],p=a[2];o=p[0]===" ",n+=l+(!i&&!o&&p!==""?`
`:"")+Wk(p,e),i=o}return n}function Wk(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,l=0,p="";n=r.exec(t);)l=n.index,l-i>e&&(o=a>i?a:l,p+=`
`+t.slice(i,o),i=o+1),a=l;return p+=`
`,t.length-i>e&&a>i?p+=t.slice(i,a)+`
`+t.slice(a+1):p+=t.slice(i),p.slice(1)}function ZK(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=el(t,i),n=$t[r],!n&&il(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||BK(r);return e}function YK(t,e,r){var n="",i=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(vi(t,e,l,!1,!1)||typeof l>"u"&&vi(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function $k(t,e,r,n){var i="",o=t.tag,a,l,p;for(a=0,l=r.length;a<l;a+=1)p=r[a],t.replacer&&(p=t.replacer.call(r,String(a),p)),(vi(t,e+1,p,!0,!0,!1,!0)||typeof p>"u"&&vi(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=OS(t,e)),t.dump&&rl===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function XK(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,l,p,u,d;for(a=0,l=o.length;a<l;a+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),p=o[a],u=r[p],t.replacer&&(u=t.replacer.call(r,p,u)),vi(t,e,p,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),vi(t,e,u,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function JK(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),l,p,u,d,m,g;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new hr("sortKeys must be a boolean or a function");for(l=0,p=a.length;l<p;l+=1)g="",(!n||i!=="")&&(g+=OS(t,e)),u=a[l],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),vi(t,e+1,u,!0,!0,!0)&&(m=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,m&&(t.dump&&rl===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,m&&(g+=OS(t,e)),vi(t,e+1,d,!0,m)&&(t.dump&&rl===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function jk(t,e,r){var n,i,o,a,l,p;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(p=t.styleMap[l.tag]||l.defaultStyle,iP.call(l.represent)==="[object Function]")n=l.represent(e,p);else if(oP.call(l.represent,p))n=l.represent[p](e,p);else throw new hr("!<"+l.tag+'> tag resolver accepts not "'+p+'" style');t.dump=n}return!0}return!1}function vi(t,e,r,n,i,o,a){t.tag=null,t.dump=r,jk(t,r,!1)||jk(t,r,!0);var l=iP.call(t.dump),p=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",m,g;if(d&&(m=t.duplicates.indexOf(r),g=m!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[m])t.dump="*ref_"+m;else{if(d&&g&&!t.usedDuplicates[m]&&(t.usedDuplicates[m]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(JK(t,e,t.dump,i),g&&(t.dump="&ref_"+m+t.dump)):(XK(t,e,t.dump),g&&(t.dump="&ref_"+m+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?$k(t,e-1,t.dump,i):$k(t,e,t.dump,i),g&&(t.dump="&ref_"+m+t.dump)):(YK(t,e,t.dump),g&&(t.dump="&ref_"+m+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&KK(t,t.dump,e,o,p);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new hr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function e4(t,e){var r=[],n=[],i,o;for(LS(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function LS(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)LS(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)LS(t[n[i]],e,r)}function t4(t,e){e=e||{};var r=new $K(e);r.noRefs||e4(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),vi(r,0,n,!0,!0)?r.dump+`
`:""}var r4=t4,n4={dump:r4};function $S(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var hP=Ot;var gP=HS,i4=nP.load,hde=nP.loadAll,yP=n4.dump;var gde=$S("safeLoad","load"),yde=$S("safeLoadAll","loadAll"),xde=$S("safeDump","dump");var kf=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=yP(this.data,Object.assign({replacer:c4,schema:s4},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},o4=new hP("!format",{kind:"scalar",resolve:()=>!1,instanceOf:kf,represent:t=>t.represent()}),s4=gP.extend({implicit:[o4]}),jS=t=>typeof t=="object"&&t!=null;function a4(t){if(jS(t))return Object.values(t).every(e=>!jS(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!jS(e)&&!Array.isArray(e))}function c4(t,e){return t===""?e:a4(e)?new kf(e,{flowLevel:0}):e}var qS=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","foldRegion","followLink","followLinkAside","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],p4=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],SP=[...qS,...p4];var u4=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleDoubleQuotes","tripleSingleQuotes"],f4=["string","any","collectionBoundary"],Pf=[...u4,...f4],Ko=["argumentOrParameter","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function TP(t){return Ko.includes(t.type)}var vP=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],ol=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},ya=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function sl(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function Qo(t){return t.version>=7}var oo=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var so=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function bP(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function al(t){return typeof t=="string"||t instanceof String}function Mf(t){let[e,...r]=t;return m4(e,r)}function m4(t,e){let r;if(al(t)){let n=t,[i,o,...a]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:a,usePrePhraseSnapshot:!1}}else r=t;return r}function cl(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function wP(t){for(let e of t)return!1;return!0}function bi(t){return Object.keys(t)}function ll(t,e){return`${t}.${e}`}var EP={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(_P).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(_P).join("")}};function _P(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}function RP(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,a)=>{let l=r(a),p=o.get(l);return p==null?(o.set(l,[a]),o):(o.get(l).push(a),p.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,jc(i.get(o),e))}),t.flatMap(o=>{let a=r(o),l=i.get(a);if(l==null||l.length===0)return[];let p=l[0];return e(p,o)?(l.shift(),p):[]}))}function Zo(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var IP=Symbol.for("immer-nothing"),kP=Symbol.for("immer-draftable"),Lr=Symbol.for("immer-state"),h4=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function yr(t,...e){if(process.env.NODE_ENV!=="production"){let r=h4[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var xa=Object.getPrototypeOf;function Sa(t){return!!t&&!!t[Lr]}function Xo(t){return t?FP(t)||Array.isArray(t)||!!t[kP]||!!t.constructor?.[kP]||Cf(t)||Of(t):!1}var g4=Object.prototype.constructor.toString();function FP(t){if(!t||typeof t!="object")return!1;let e=xa(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===g4}function Af(t,e){Ff(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Ff(t){let e=t[Lr];return e?e.type_:Array.isArray(t)?1:Cf(t)?2:Of(t)?3:0}function KS(t,e){return Ff(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function CP(t,e,r){let n=Ff(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function y4(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Cf(t){return t instanceof Map}function Of(t){return t instanceof Set}function Yo(t){return t.copy_||t.base_}function QS(t,e){if(Cf(t))return new Map(t);if(Of(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=FP(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[Lr];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let a=i[o],l=n[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[a]})}return Object.create(xa(t),n)}else{let n=xa(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function eT(t,e=!1){return Nf(t)||Sa(t)||!Xo(t)||(Ff(t)>1&&(t.set=t.add=t.clear=t.delete=x4),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>eT(n,!0))),t}function x4(){yr(2)}function Nf(t){return Object.isFrozen(t)}var S4={};function Jo(t){let e=S4[t];return e||yr(0,t),e}var pl;function OP(){return pl}function T4(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function PP(t,e){e&&(Jo("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function ZS(t){YS(t),t.drafts_.forEach(v4),t.drafts_=null}function YS(t){t===pl&&(pl=t.parent_)}function MP(t){return pl=T4(pl,t)}function v4(t){let e=t[Lr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function AP(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Lr].modified_&&(ZS(e),yr(4)),Xo(t)&&(t=Df(e,t),e.parent_||If(e,t)),e.patches_&&Jo("Patches").generateReplacementPatches_(r[Lr].base_,t,e.patches_,e.inversePatches_)):t=Df(e,r,[]),ZS(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==IP?t:void 0}function Df(t,e,r){if(Nf(e))return e;let n=e[Lr];if(!n)return Af(e,(i,o)=>DP(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return If(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,a=!1;n.type_===3&&(o=new Set(i),i.clear(),a=!0),Af(o,(l,p)=>DP(t,n,i,l,p,r,a)),If(t,i,!1),r&&t.patches_&&Jo("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function DP(t,e,r,n,i,o,a){if(process.env.NODE_ENV!=="production"&&i===r&&yr(5),Sa(i)){let l=o&&e&&e.type_!==3&&!KS(e.assigned_,n)?o.concat(n):void 0,p=Df(t,i,l);if(CP(r,n,p),Sa(p))t.canAutoFreeze_=!1;else return}else a&&r.add(i);if(Xo(i)&&!Nf(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Df(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&If(t,i)}}function If(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&eT(e,r)}function b4(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:OP(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=tT;r&&(i=[n],o=ul);let{revoke:a,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=a,l}var tT={get(t,e){if(e===Lr)return t;let r=Yo(t);if(!KS(r,e))return w4(t,r,e);let n=r[e];return t.finalized_||!Xo(n)?n:n===zS(t.base_,e)?(GS(t),t.copy_[e]=JS(n,t)):n},has(t,e){return e in Yo(t)},ownKeys(t){return Reflect.ownKeys(Yo(t))},set(t,e,r){let n=NP(Yo(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=zS(Yo(t),e),o=i?.[Lr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(y4(r,i)&&(r!==void 0||KS(t.base_,e)))return!0;GS(t),XS(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return zS(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,GS(t),XS(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=Yo(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){yr(11)},getPrototypeOf(t){return xa(t.base_)},setPrototypeOf(){yr(12)}},ul={};Af(tT,(t,e)=>{ul[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});ul.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&yr(13),ul.set.call(this,t,e,void 0)};ul.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&yr(14),tT.set.call(this,t[0],e,r,t[0])};function zS(t,e){let r=t[Lr];return(r?Yo(r):t)[e]}function w4(t,e,r){let n=NP(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function NP(t,e){if(!(e in t))return;let r=xa(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=xa(r)}}function XS(t){t.modified_||(t.modified_=!0,t.parent_&&XS(t.parent_))}function GS(t){t.copy_||(t.copy_=QS(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var _4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let a=this;return function(p=o,...u){return a.produce(p,d=>r.call(this,d,...u))}}typeof r!="function"&&yr(6),n!==void 0&&typeof n!="function"&&yr(7);let i;if(Xo(e)){let o=MP(this),a=JS(e,void 0),l=!0;try{i=r(a),l=!1}finally{l?ZS(o):YS(o)}return PP(o,n),AP(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===IP&&(i=void 0),this.autoFreeze_&&eT(i,!0),n){let o=[],a=[];Jo("Patches").generateReplacementPatches_(e,i,o,a),n(o,a)}return i}else yr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,p=>e(p,...l));let n,i;return[this.produce(e,r,(a,l)=>{n=a,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Xo(t)||yr(8),Sa(t)&&(t=E4(t));let e=MP(this),r=JS(t,void 0);return r[Lr].isManual_=!0,YS(e),r}finishDraft(t,e){let r=t&&t[Lr];(!r||!r.isManual_)&&yr(9);let{scope_:n}=r;return PP(n,e),AP(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=Jo("Patches").applyPatches_;return Sa(t)?n(t,e):this.produce(t,i=>n(i,e))}};function JS(t,e){let r=Cf(t)?Jo("MapSet").proxyMap_(t,e):Of(t)?Jo("MapSet").proxySet_(t,e):b4(t,e);return(e?e.scope_:OP()).drafts_.push(r),r}function E4(t){return Sa(t)||yr(10,t),LP(t)}function LP(t){if(!Xo(t)||Nf(t))return t;let e=t[Lr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=QS(t,e.scope_.immer_.useStrictShallowCopy_)}else r=QS(t,!0);return Af(r,(n,i)=>{CP(r,n,LP(i))}),e&&(e.finalized_=!1),r}var Ur=new _4,Lf=Ur.produce,xge=Ur.produceWithPatches.bind(Ur),Sge=Ur.setAutoFreeze.bind(Ur),Tge=Ur.setUseStrictShallowCopy.bind(Ur),vge=Ur.applyPatches.bind(Ur),bge=Ur.createDraft.bind(Ur),wge=Ur.finishDraft.bind(Ur);var rr=fr(oM(),1),cye=rr.default.v1,lye=rr.default.v1ToV6,pye=rr.default.v3,sM=rr.default.v4,uye=rr.default.v5,fye=rr.default.v6,dye=rr.default.v6ToV1,mye=rr.default.v7,hye=rr.default.NIL,gye=rr.default.MAX,yye=rr.default.version,xye=rr.default.validate,Sye=rr.default.stringify,Tye=rr.default.parse;function aM(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function rd(t,e){if(Array.isArray(t))return t.map(r=>rd(r,e));if(typeof t=="object"&&t!=null){if(G6(t))return aM(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=rd(t[n],e));return r}return t}function G6(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var ld=fr(lM(),1);var K6={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},Q6={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},id={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},od={modulo100:"row",relativeUp:"up",relativeDown:"down"};function pM(t){let e=K6[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function uM(t){let e=Q6[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function fT(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var Z6=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),Y6=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),X6={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},fM={...Z6,...Y6,...X6};function ao(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Pt(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var dM={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Pt("triple quad"),tripleSingleQuotes:Pt("triple twin"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Pt("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:ao("one section"),sectionLevelTwo:ao("two section"),sectionLevelThree:ao("three section"),sectionLevelFour:ao("four section"),sectionLevelFive:ao("five section"),sectionLevelSix:ao("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Pt("parse tree string"),textFragment:Pt("text fragment"),disqualifyDelimiter:Pt("disqualify delimiter"),pairDelimiter:Pt("pair delimiter"),"private.fieldAccess":Pt("access"),"private.switchStatementSubject":Pt("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join","private.showParseTree":Pt("parse tree"),"experimental.setInstanceReference":ao("from"),editNew:Pt("edit new"),executeCommand:Pt("execute command"),parsed:Pt("parsed"),getText:Pt("get text"),replace:Pt("replace"),"private.getTargets":Pt("get targets"),"private.setKeyboardTarget":Pt("set keyboard target")},customAction:{},grapheme:fM};var dT=fT(dM,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),_i=fT(dT,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var ft={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var gM=fr(hM(),1),ad=class{constructor(e){this.mooLexer=gM.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Ei={};for(let t of qS){let{spokenForms:e}=_i.action[t];for(let r of e)Ei[r]={type:"simpleActionName",value:t}}var J6=["replaceWithTarget","moveToTarget"];for(let t of J6){let{spokenForms:e}=_i.action[t];for(let r of e)Ei[r]={type:"bringMove",value:t}}var e9=["before","after","to"];for(let t of e9){let e=ft[t==="to"?"sourceDestinationConnective":t];Ei[e]={type:"insertionMode",value:t}}for(let t of Ko){let{spokenForms:e}=_i.simpleScopeTypeType[t];for(let r of e)Ei[r]={type:"simpleScopeTypeType",value:t}}for(let t of Pf){let{spokenForms:e}=_i.pairedDelimiter[t];for(let r of e)Ei[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(id))e!=null&&(Ei[e]={type:"simpleMarkType",value:t});var Ri=new ad({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Ei),type:t=>Ei[t].type,value:t=>Ei[t].value}});function yM(t,e){return{name:t,target:e}}function xM(t,e,r){return{name:t,source:e,destination:r}}function cd(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function SM(t,e){return{type:"primitive",insertionMode:t,target:e}}function TM(t){return{type:"containingScope",scopeType:t}}function vM(t){return{type:t}}function bM(t){return{type:"surroundingPair",delimiter:t}}function wM(t){return{type:t}}function _M(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function mT(t){return t[0]}var t9={Lexer:Ri,ParserRules:[{name:"main",symbols:["action"],postprocess:mT},{name:"action",symbols:[Ri.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>yM(t,e)},{name:"action",symbols:[Ri.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>xM(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:mT},{name:"destination",symbols:[Ri.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>SM(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:mT},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>cd(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>cd(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>cd(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>TM(t)},{name:"scopeType",symbols:[Ri.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>vM(t)},{name:"scopeType",symbols:[Ri.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>bM(t)},{name:"mark",symbols:[Ri.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>wM(t)},{name:"mark",symbols:[Ri.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>_M(t)}],ParserStart:"main"},EM=t9;function r9(){return new ld.Parser(ld.Grammar.fromCompiled(EM))}function RM(t){let e=r9();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function pd(t,e){let r=RM(t);return rd(r,e)}function hl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...kM(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return kM(t.destination);case"parsed":return hl(pd(t.content,t.arguments));default:return[t.target]}}function kM(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function gT(t){return t.flatMap(hT)}function hT(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(hT);case"range":return[t.anchor,t.active].flatMap(hT);case"implicit":return[]}}var n9={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},i9={purple:"pink"};function o9(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=n9[e.scopeType.type]??e.scopeType.type)})}function s9(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=i9[t.mark.symbolColor]??t.mark.symbolColor)}function yT(t){gT(t).forEach(e=>{o9(e),s9(e)})}function PM(t){return{...t,version:1}}var a9={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},c9={type:"primitive",isImplicit:!0},MM=t=>Ti(t,a9)?c9:t;function AM(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:p9(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function l9(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function xT(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:a,selectionType:l,position:p}=t,u=[];if(p&&p!=="contents"&&(p==="before"?o==="inside"?u.push({type:"position",position:"start"}):e==="remove"?u.push({type:"leading"}):u.push({type:"position",position:"before"}):o==="inside"?u.push({type:"position",position:"end"}):e==="remove"?u.push({type:"trailing"}):u.push({type:"position",position:"after"})),l)switch(l){case"token":if(a?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:u.push({type:"containingScope",scopeType:{type:l}})}return a&&u.push(...l9(a)),{type:r,isImplicit:n,modifiers:u.length>0?u:void 0,mark:i?.type==="cursorToken"?void 0:i}}function DM(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>DM(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:a,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:xT(i,e),active:xT(o,e),excludeAnchor:a??!1,excludeActive:l??!1}}case"primitive":return xT(t,e)}}function p9(t,e){return t.map(r=>DM(r,e)).map(r=>r.type==="primitive"?MM(r):r)}function IM(t){return{...t,version:3,targets:t.targets.map(FM)}}function FM(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>FM(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:ST(e),active:ST(r),...n}}case"primitive":return ST(t)}}function ST(t){let e=t.modifiers!=null?t.modifiers.map(f9):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:yl(r),modifiers:e},active:{type:"primitive",mark:yl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?u9(t.mark):void 0,modifiers:e}}function u9(t){switch(t.type){case"lineNumber":return d9(t);default:return t}}function f9(t){switch(t.type){case"ordinalRange":return m9(t);default:return t}}function d9(t){return Ti(t.anchor,t.active)?yl(t.anchor):{type:"range",anchor:yl(t.anchor),active:yl(t.active)}}function m9(t){return t.anchor===t.active?gl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?gl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?gl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:gl(t.scopeType,t.anchor),active:gl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function yl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function gl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function OM(t){return{...t,version:4,targets:t.targets.map(NM)}}function NM(t){switch(t.type){case"primitive":return CM(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:CM(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(NM)}}}}function CM(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function LM(t){return{...t,version:5,action:h9(t.action),targets:t.targets.map(ud)}}function h9(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=g9(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function g9(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function ud(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(ud)};case"range":return{...t,anchor:ud(t.anchor),active:ud(t.active)};case"primitive":return{...t,mark:t.mark!=null?TT(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(vT):void 0}}}function TT(t){return t.type==="range"?{...t,anchor:TT(t.anchor),active:TT(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function vT(t){return t.type==="range"?{...t,anchor:vT(t.anchor),active:vT(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var y9={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function bT(t){let e=y9[t]??t;if(!SP.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function UM(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:x9(t.action,t.targets)}}function x9(t,e){let r=bT(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:cn(e[0]),destination:xl(e[1])};case"swapTargets":return{name:r,target1:cn(e[0]),target2:cn(e[1])};case"callAsFunction":return{name:r,callee:cn(e[0]),argument:cn(e[1])};case"pasteFromClipboard":return{name:r,destination:xl(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:cn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:cn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:xl(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:cn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:cn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:xl(e[0])};case"highlight":{let n={name:r,target:cn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:xl(e[0])};case"getText":return{name:r,options:t.args?.[0],target:cn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:cn(e[0])}}}function cn(t){switch(t.type){case"list":case"range":case"primitive":return S9(t);case"implicit":return t}}function S9(t){switch(t.type){case"list":return T9(t);case"range":case"primitive":return fd(t)}}function T9(t){return{...t,elements:t.elements.map(fd)}}function fd(t){switch(t.type){case"range":return HM(t);case"primitive":return dd(t)}}function HM(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:dd(e),active:dd(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function dd(t){let e={type:"primitive"},r=R9(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function xl(t){switch(t.type){case"list":return v9(t);case"range":return b9(t);case"primitive":return w9(t);case"implicit":return _9()}}function v9(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let a=md(o);a!=null?(i(),r=[fd(o)],n=a):r.push(fd(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function b9(t){return{type:"primitive",insertionMode:md(t.anchor)??"to",target:HM(t)}}function w9(t){return{type:"primitive",insertionMode:md(t)??"to",target:dd(t)}}function _9(){return{type:"implicit"}}function md(t){switch(t.type){case"implicit":return"to";case"primitive":return E9(t);case"range":return md(t.anchor)}}function E9(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function R9(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function VM(t){return{...t,version:7}}function _T(t){let e=k9(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Lf(r,o=>{let a=hl(o);yT(a),r.name}),usePrePhraseSnapshot:n}}function k9(t,e){if(t.version>7)throw new Au;for(;t.version<e;)switch(t.version){case 0:t=PM(t);break;case 1:t=AM(t);break;case 2:t=IM(t);break;case 3:t=OM(t);break;case 4:t=LM(t);break;case 5:t=UM(t);break;case 6:t=VM(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var ET;function hd(t){ET=t}function A(){if(ET==null)throw Error("Tried to access ide before it was injected");return ET}var gd=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var P9=25,yd=class{constructor(){this.targetMap=new Map;this.targetHistory=new so(()=>new gd(P9));this.notifier=new Bt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of fa)e(r,this.get(r));return this.notifier.registerListener(e)}};function co(t,e){return new $(new ce(e.start.line,0),t.document.lineAt(e.end).range.end)}function RT(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function BM(t,e){let[r,n]=e instanceof ce?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function ts(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var xd=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=A9(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?M9(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=a=>this.updateRange(a,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?ts(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new $(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),a=o+r.length;return new $(this.editor.document.positionAt(o),this.editor.document.positionAt(a))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function M9(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let a=o.rangeTrimmed?.start??o.range.end;a.character<r&&(r=a.character,n=o.text.slice(0,r))}return n}function A9(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function lo(t,e,r,n){return Sl(t.contentRange,e.contentRange,r,n)}function Sl(t,e,r,n){return new $(r?t.start:t.end,n?e.end:e.start)}function Ta(t,e,r,n){let i=r?t.contentRange.start:new ce(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new $(i,o)}var Ue=class t{constructor(e){this.isLine=!1;this.isToken=!0;this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.isWord=!1;this.joinAs="line";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return this.getRemovalRange()}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:lo(this,r,!0,!0)})}isEqual(e){return e instanceof t&&Ti(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new xd(this,e)}toPlainObject(){return{type:this.type,contentRange:Jc(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function Sd(t,e){return D9(t,e.start,e.end)}function D9(t,e,r){return{editor:t.editor,selection:I9(t.selection,e,r)}}function I9(t,e,r){return t.isReversed?new we(r,e):new we(e,r)}function rs(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,a=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,p=r.positionAt(a),u=r.positionAt(l);return new $(p,u)}function Td(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var qe=class extends Ue{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.isToken=r.isToken??!0,this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,isToken:this.isToken,insertionDelimiter:this.insertionDelimiter}}};function va(t,e,r){return Td(qe,t,e,r)}var vd=class extends Ue{constructor(r){super(r);this.type="DocumentTarget";this.insertionDelimiter=`
`;this.isLine=!0}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getRemovalRange(){return this.contentRange}getInterior(){return[new qe({editor:this.editor,isReversed:this.isReversed,contentRange:rs(this.editor,this.contentRange)})]}getCloneParameters(){return this.state}};var Hr=class t extends Ue{constructor(){super(...arguments);this.type="LineTarget";this.insertionDelimiter=`
`;this.isLine=!0;this.getRemovalHighlightRange=()=>this.fullLineContentRange}get fullLineContentRange(){return co(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return va(this.editor,F9(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return va(this.editor,C9(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:Ta(this,n,!0,!0)})}getCloneParameters(){return this.state}};function F9(t,e){let{start:r}=e;return r.line>0?new $(t.document.lineAt(r.line-1).range.end,e.start):void 0}function C9(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new $(e.end,new ce(r.line+1,0)):void 0}function kT(t,e,r){return Td(Hr,t,e,r)}var bd=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var wd=class extends Ue{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new bd(this,r)}};var ba=class t extends Ue{constructor(){super(...arguments);this.type="ParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0}getLeadingDelimiterTarget(){return kT(this.editor,O9(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return kT(this.editor,N9(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new Hr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return co(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Ta(this,n,!0,!0)})}getCloneParameters(){return this.state}};function O9(t,e){let{document:r}=t,n=r.lineAt(e.start),i=L9(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new $(new ce(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new $(new ce(0,0),r.lineAt(n.lineNumber-1).range.end)}function N9(t,e){let{document:r}=t,n=r.lineAt(e.end),i=U9(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new $(new ce(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new $(new ce(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function L9(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function U9(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var po=class extends Ue{constructor(){super(...arguments);this.type="RawSelectionTarget";this.insertionDelimiter="";this.isRaw=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var wa=class t extends Ue{constructor(r){super({...r,contentRange:rs(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:Sl(this.fullInteriorRange,n.fullInteriorRange,!0,!0)})}};function _d(t){let e=ts(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var H9=['"',"'","(","[","{","<"],V9=['"',"'",")","]","}",">",",",";",":"];function qn(t){let{editor:e}=t,{start:r}=ts(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new qe({contentRange:new $(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function zn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new qe({contentRange:new $(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function Gn(t){let{editor:e}=t,r=ts(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),a=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=co(e,r);return o.union(a).isRangeEqual(l)?l:!a.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||H9.includes(B9(e,r)))?r.union(a):!o.isEmpty&&(r.end.isEqual(l.end)||V9.includes(W9(e,r)))?r.union(o):r}function B9(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new $(r.translate(void 0,-1),r)):""}function W9(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new $(r.translate(void 0,1),r)):""}var uo=class t extends Ue{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.interiorRange_=r.interiorRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??$9(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new qe({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return qn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new qe({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return zn(this)}getInterior(){return this.interiorRange_==null?super.getInterior():[new wa({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?_d(this):Gn(this)}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?Sl(this.removalRange_??this.contentRange,n.removalRange_??n.contentRange,!0,!0):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:lo(this,n,!0,!0)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function $9(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var Ed=class t extends Ue{constructor(r){super(r);this.type="SubTokenWordTarget";this.isToken=!1;this.isWord=!0;this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return va(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return va(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return _d(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:lo(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Sr=class extends Ue{constructor(){super(...arguments);this.type="TokenTarget";this.insertionDelimiter=" ";this.joinAs="token"}getLeadingDelimiterTarget(){return qn(this)}getTrailingDelimiterTarget(){return zn(this)}getRemovalRange(){return Gn(this)}getCloneParameters(){return this.state}};var Rd=class extends Ue{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return qn(this)}getTrailingDelimiterTarget(){return zn(this)}getRemovalRange(){return Gn(this)}getInterior(){return[new wa({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new Sr({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Mt=class extends Ue{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.isToken=r.isToken??!0}getLeadingDelimiterTarget(){return qn(this)}getTrailingDelimiterTarget(){return zn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:Gn(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,isToken:this.isToken,hasExplicitRange:this.hasExplicitRange}}};var kd=class extends Ue{constructor(){super(...arguments);this.type="ImplicitTarget";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var Pd=class extends Ue{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:WM(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return qn(this)}getTrailingDelimiterTarget(){return zn(this)}getRemovalRange(){return Gn(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new qe({editor:this.editor,contentRange:WM(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function WM(t,e,r){return r?new $(e.start,t.end):new $(t.start,e.end)}var Md=class t extends Ue{constructor(r){super({...r,contentRange:j9(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new Hr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return co(this.editor,this.contentRange)}getRemovalHighlightRange(){if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function j9(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function Ad(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var _a=class{run(){return Ad(A()).map(e=>new Mt({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,isToken:!1}))}};var Kn=class{constructor(e,r){this.debouncer=new Pu(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var Dd=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Kn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new _a().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var Id=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var q9=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],z9=q9.map(Nr).join("|"),G9=["[a-zA-Z0-9]",z9].join("|"),K9=new RegExp(`^(${G9})$`,"u"),Q9="[unk]",Z9=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Fd=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Bt;this.getTokenGraphemes=e=>on(e,Z9,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;A().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(A().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=A().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=pS(o),K9.test(o)||(o=Q9)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function ns(){return PT==null&&(PT=new Fd),PT}var PT;var $M=({penalty:t})=>-t;function jM(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function qM(t,e){let r=Bc(n=>yS(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function MT(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function zM(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function GM(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=Y9(r,n)}return r[0]}function Y9(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function KM({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,a){return GM(a,[MT(i),zM(r),MT(o),jM(t),$M,qM(n,e)])}function QM(t,e,r){let n={},i=new oo(({grapheme:o,hatStyle:a})=>[o,a]);return t.forEach(({token:o,rank:a})=>{let l=e.get(o);l!=null&&i.set(l,a),r.getTokenGraphemes(o.text).forEach(({text:p})=>{let u;p in n?u=n[p]:(u=[],n[p]=u),u.push(a)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function ZM(t,e=[]){return new Map(hS(et,jo)(Wc([e],t.visibleRanges.map(r=>xS(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function YM(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let a=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return a-l}}var X9=["-","+","*","/","=","<",">","_","#",".","|","&",":"],J9=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],e5=["\\p{L}","\\p{M}","\\p{N}"],t5="[^\\s\\w]",r5="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function n5(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:a}=t,l=r.map(Nr).map(x=>`${x}+`).join("|"),p=e.map(Nr).join("|"),d=`(${n.concat(i.map(Nr)).join("|")})+`,m=`(${n.join("|")})+`,g=[p,o,d,l,a].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(m,"gu"),tokenMatcher:new RegExp(g,"gu")}}var AT=new Map;function Tr(t){let e=A().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!AT.has(r)){let n={fixedTokens:J9,repeatableSymbols:X9,identifierWordRegexes:e5,identifierWordDelimiters:e,numbersRegex:r5,singleSymbolsRegex:t5};AT.set(r,n5(n))}return AT.get(r)}function XM(t,e,r){return on(t,Tr(e).tokenMatcher,r)}function JM(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return XM(n,r,o=>{let a=i+o.index,l=i+o.index+o[0].length,p=new $(t.document.positionAt(a),t.document.positionAt(l));return{editor:t,text:o[0],range:p,offsets:{start:a,end:l}}})}function eA(t,e,r){let i=o5(t,e).flatMap(o=>{let a=o.selections[0].active,l=ZM(o,[a.line]),p=et(o.visibleRanges.map(u=>JM(o,u).map(d=>({...d,displayLine:l.get(d.range.start.line)}))));return p.sort(YM(l.get(a.line),a.character)),p});return i5(r,i).map((o,a)=>({token:o,rank:-a}))}function i5(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function o5(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function DT({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:a}){let l=r==null?void 0:tA(r),p=tA(n),u=eA(o,a,l),d=QM(u,p,t),m=Object.keys(e),g=new so(()=>[...m]);return u.map(({token:x,rank:w})=>{let v=s5(t,x,g,e),F=KM(d,i,w,l?.get(x),p.get(x),v);if(F!=null)return g.set(F.grapheme.text,g.get(F.grapheme.text).filter(M=>M!==F.style)),a5(x,F)}).filter(x=>x!=null)}function tA(t){let e=new oo(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function s5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text);for(let a of o)for(let l of r.get(a.text))i.push({grapheme:a,style:l,penalty:n[l].penalty});return i}function a5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new $(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var Cd=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];A().disposeOnExit(this);let n=new Kn(A().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),A().onDidOpenTextDocument(n.run),A().onDidCloseTextDocument(n.run),A().onDidChangeActiveTextEditor(n.run),A().onDidChangeVisibleTextEditors(n.run),A().onDidChangeTextDocument(n.run),A().onDidChangeTextEditorSelection(n.run),A().onDidChangeTextEditorVisibleRanges(n.run),ns().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:ns().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?DT({tokenGraphemeSplitter:ns(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:A().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:A().activeTextEditor,visibleTextEditors:A().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:a}})=>({editor:a,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var Od=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:a}=n,l=this.makeTokenLive(a);return this.map[ll(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=Tr(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[ll(e,ns().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var c5=6e4,Nd=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;A().disposeOnExit(this),this.activeMap=new Od(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new Cd(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>c5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function IT(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var NT=fr(vl(),1);function LT(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:a,end:l}}=e;return(0,NT.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,NT.invariant)(n>=a&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=a?a+o:Math.min(a,i),end:n<=l?l+o:Math.min(l,i)}}var aA=fr(vl(),1);function UT(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,aA.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let a=e.expansionBehavior.end;switch(a.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(yf(a.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let a=e.expansionBehavior.start;switch(a.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(gf(a.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var HT=fr(vl(),1);function VT(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:a},text:l}=e;if((0,HT.invariant)(a>o,()=>"Selection range expected to be nonempty"),(0,HT.invariant)(n>=o&&n<=a,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<a)return{start:o,end:a+i};if(n===o){let p=e.expansionBehavior.start,u=a+i;switch(p.type){case"closed":return{start:o+i,end:u};case"open":return{start:o,end:u};case"regex":{let d=r+l,m=gf(p.regex),g=d.search(m);for(;g>r.length;)d=d.slice(0,g),g=d.search(m);return g===-1?{start:o,end:u}:{start:o+g,end:u}}}}else{let p=e.expansionBehavior.end,u=o;switch(p.type){case"closed":return{start:u,end:a};case"open":return{start:u,end:a+i};case"regex":{let d=l+r,m=yf(p.regex),g=d.match(m),x=g==null?0:g[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,g=d.match(m),x=g==null?0:x+g[0].length;return x===0?{start:u,end:a}:{start:u,end:o+x}}}}}function cA(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:a}=e.offsets,l=Math.min(n,o),p="";return o<n&&(p+=e.text.substring(0,n-o)),p+=t.event.text,i<a&&(p+=e.text.substring(a-i,e.text.length)),p.substring(r.start-l,r.end-l)}function lA(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let a=o.text.length-o.rangeLength,l=o.rangeOffset,p=l+o.rangeLength,u=l,d=p+a;return{displacement:a,event:o,originalOffsets:{start:l,end:p},finalOffsets:{start:u,end:d}}});for(let o of e){let a=o.offsets,l=i.map(u=>{let d;return u.originalOffsets.start>a.end?{start:0,end:0}:u.originalOffsets.end<a.start?{start:u.displacement,end:u.displacement}:(u.event.rangeLength===0?o.range.isEmpty?d=UT(u,o):d=VT(u,o):d=LT(u,o),o.text=cA(u,o,d),{start:d.start-a.start,end:d.end-a.end})}),p={start:a.start+pf(l,({start:u})=>u),end:a.end+pf(l,({end:u})=>u)};o.range=o.range.with(r.positionAt(p.start),r.positionAt(p.end)),o.offsets=p}}var Ud=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return IT(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return IT(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>tr(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>tr(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=A().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>y5(r,i)?{...i,isReplace:!0}:i)};lA(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function y5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var Hd=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var Vd=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var Bd=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var Wd=class{updateUserSnippets(){throw new Error("Snippets are not implemented.")}registerThirdPartySnippets(e,r){throw new Error("Snippets are not implemented.")}getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e){throw new Error("Snippets are not implemented.")}};var $d=class{getSpokenFormEntries(){throw new ya}onDidChange(){return{dispose:()=>{}}}};var jd=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getLanguage(e){throw new Error("Tree sitter not provided")}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}};var Qe=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var pA={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var uA=new oo(t=>t);for(let[t,e]of Object.entries(pA))e!=null&&uA.set(e,t);function fA(t,e,r){let n=uA.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}var x5={ifStatement:"if",ifElseStatement:"if else",tryCatchStatement:"try",functionDeclaration:"funk",link:"link"},S5={"ifElseStatement.alternative":"else","functionDeclaration.body":"funk","ifElseStatement.consequence":"if else","ifStatement.consequence":"if","tryCatchStatement.body":"try","link.text":"link"};function dA(t){if(t.type==="custom")throw new Qe("Custom insertion snippet");let e=x5[t.name];if(e==null)throw new Qe(`Named insertion snippet '${t.name}'`);if(t.substitutions!=null){let r=Object.values(t.substitutions);return`${e} ${r.join(" ")}`}return e}function mA(t){if(t.type==="custom")throw new Qe("Custom wrap with snippet");let e=`${t.name}.${t.variableName}`,r=S5[e];if(r==null)throw new Qe(`Named wrap with snippet '${e}'`);return r}function bl(t,e,r){let n=r==="vertical"?`${ft.verticalRange} `:"";if(t&&e)return n+ft.rangeExclusive;if(t)throw new Qe("Range exclude anchor");return e?n+ft.rangeExcludingEnd:r==="vertical"?ft.verticalRange:ft.rangeInclusive}function hA(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var T5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],v5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function Ea(t){let e=T5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function wl(t){let e=v5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var qd=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new Qe(`Modifier '${e.type}'`);case"containingScope":if(e.ancestorIndex==null||e.ancestorIndex===0)return this.handleScopeType(e.scopeType);if(e.ancestorIndex===1)return[this.spokenFormMap.modifierExtra.ancestor,this.handleScopeType(e.scopeType)];throw new Qe(`Modifier '${e.type}' with ancestor index ${e.ancestorIndex}`);case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,wl(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,wl(e.start+1),r];let i=Ea(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,_l(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,_l(r)];throw new Qe(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:wl(e.anchor.start+1),n=this.handleModifier(e.active),i=bl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let a=e.direction==="forward"?ft.forward:ft.backward;return[n,r,a]}let i=Ea(e.length),o=_l(r);return e.direction==="forward"?[n,i,o]:[n,i,o,ft.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?ft.next:ft.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=Ea(e.length);if(e.length===1)return[i,n,r];let a=_l(r);return[i,n,o,a]}if(e.length===1){let o=wl(e.offset);return[i,o,n,r]}throw new Qe(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new Qe(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,yA(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(pM(r)),n!=null&&i.push(uM(n)),i.push(yA(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let a=bl(e.excludeAnchor,e.excludeActive);return[r,n,a,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new Qe(`Mark '${e.type}'`);default:return[id[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new Qe("Absolute line numbers");case"modulo100":return[od.modulo100,Ea(e.lineNumber+1)];case"relative":return[e.lineNumber<0?od.relativeUp:od.relativeDown,Ea(Math.abs(e.lineNumber))]}}};function _l(t){if(typeof t=="string")return gA(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),_l(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(gA)}}}function gA(t){return`${t}s`}function yA(t,e,r){let n=t[r];if(n==null)throw new Qe(`${e} '${r}'`);return n}var Ra=class{constructor(e){this.spokenFormMap=hA(e),this.primitiveGenerator=new qd(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new Qe(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:xA(e())}}catch(r){if(r instanceof Qe)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new Qe(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),ft.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[fA(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],dA(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new Qe(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[mA(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new Qe(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new Qe("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[ft.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=bl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new Qe("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[ft.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return ft.sourceDestinationConnective;case"before":return ft.before;case"after":return ft.after}}};function xA(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:SA(t.map(xA)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${sl(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new Qe(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function SA(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=SA(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var zd=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Bt;this.spokenFormMap_={..._i};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps().catch(()=>{})),this.customSpokenFormsInitialized=this.updateSpokenFormMaps(),this.customSpokenFormsInitialized.catch(()=>{})}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof ol)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof ya)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");ot(A().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}throw this.spokenFormMap_={..._i},this.notifier.notifyListeners(),r}for(let r of vP)b5(this.spokenFormMap_,r,dT[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function b5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let a of i){let{defaultSpokenForms:l=[],isPrivate:p=!1}=r[a]??{},u=n[a];o[a]=u==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!p,isCustom:!1,isPrivate:p}:{defaultSpokenForms:l,spokenForms:u,requiresTalonUpdate:!1,isCustom:!Ti(l,u),isPrivate:p}}t[e]=o}var Gd=class{constructor(e){this.customSpokenForms=new zd(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new Ra(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new Ra(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*w5(t){for(let e of t)for(let r of e)yield r}function*El(t,e){let r=Qd(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*BT(t){let e=Qd(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var ywe=Symbol();function*_5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*Kd(t,e){for(let r of t)e(r)&&(yield r)}function*Lt(t,e){for(let r of t)yield e(r)}function*vA(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let a=-1,l=Qd(t),p;for(;;){if(a++,o!==null&&a>=o||(p=l.next(),p.done))return;a<i||(a-i)%n===0&&(yield p.value)}}function*E5(t,e){let r=Qd(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function Qd(t){return t[Symbol.iterator]()}function ka(t,e){return Array.from(Lt(t,e))}function TA(t,e,r){let n=_5(t,r),i=r>=0?o=>o<e:o=>o>e;return E5(n,i)}function bA(t,e,r=1){return e!==void 0?TA(t,e,r):TA(0,t,r)}function Zd(t,e){return w5(Lt(t,e))}function Vr(t,e,{domain:r},{domain:n}){return t==="forward"?R5(e,r,n):k5(e,r,n)}function R5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let a=e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&!i){let a=e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&i){let a=e.end.compareTo(r.start);return a!==0?a:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function k5(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let a=-e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&!i){let a=-e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&i){let a=-e.start.compareTo(r.end);return a!==0?a:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function wA(t,e,r,n,i,o){return P5(t,n,i,o)&&(i==null||Vr(r,n.includeDescendantScopes?t:e,i,o)<0)}function P5(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:a,skipAncestorScopes:l}=e,{domain:p}=n;switch(i){case"disallowed":if(p.contains(t))return!1;break;case"disallowedIfStrict":if(BM(p,t))return!1;break;case"required":if(!p.contains(t))return!1;break}return l&&r!=null&&p.contains(r.domain)?!1:M5(new $(t,o),p,a)}function M5(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var A5={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},He=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...A5,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},a,l=r;for(let p of this.generateScopeCandidates(e,r,n,o))if(wA(r,l,n,o,a,p)&&(yield p,a=p,l=n==="forward"?p.domain.end:p.domain.start),this.canStopEarly(r,n,o,a,p))return}canStopEarly(e,r,n,i,o){let{containment:a,distalPosition:l,skipAncestorScopes:p}=n;if(this.isHierarchical&&!p)return!1;let u=this.isHierarchical&&p?i:o;return u==null?!1:!!(a==="required"&&(r==="forward"?u.domain.end.isAfter(e):u.domain.start.isBefore(e))||(r==="forward"?u.domain.end.isAfterOrEqual(l):u.domain.start.isBeforeOrEqual(l)))}};var vr=class extends He{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:a,...l}=o,p=this.searchScopeHandler.generateScopes(r,n,i,{containment:a==="required"?"required":void 0,...l});return Zd(p,u=>this.generateScopesInSearchScope(i,u))}};var Yd=class extends He{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield _A(r,o);else for(let o=n.line;o>=0;o--)yield _A(r,o)}};function _A(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[WT(t,n,r)]}}function WT(t,e,r){return new Hr({editor:t,isReversed:e,contentRange:$T(t,r)})}function $T(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new $(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function pn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),a=l=>new $(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Lt(o.matchAll(t),a):Array.from(o.matchAll(t),a).reverse()}var Xd=class extends vr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=Tr(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(pn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new Sr({editor:n,contentRange:o,isReversed:a})]}))}};function Jd(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let a=qo(o,n),l=qo(o,i);if(a&&!l)return!0;if(l&&!a)return!1}}var D5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,I5=/[$]/g,F5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,em=class extends vr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(pn(D5,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new qe({editor:n,contentRange:o,isReversed:a,isToken:!1})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Tr(this.languageId);return Jd(r,n,[i,I5,F5])}};var C5=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,tm=class{constructor(e){this.wordRegex=Tr(e).wordMatcher}splitIdentifier(e){let r=Qc(e,this.wordRegex);return r.length>1?r:Qc(e,C5)}};var rm=class extends vr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new tm(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(p=>new $(i.positionAt(o+p.index),i.positionAt(o+p.index+p.text.length)));return l.map((p,u)=>({editor:r,domain:p,getTargets:d=>{let m=u>0?l[u-1]:null,g=u+1<l.length?l[u+1]:null;return[O5(d,r,m,p,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function O5(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new $(r.end,n.start):void 0,a=i!=null&&i.start.isAfter(n.end)?new $(n.end,i.start):void 0,p=o!=null||a!=null?e.document.getText(o??a):"";return new Ed({editor:e,isReversed:t,contentRange:n,insertionDelimiter:p,leadingDelimiterRange:o,trailingDelimiterRange:a})}var N5=/[$]/g,nm=class extends vr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=Tr(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(pn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new Sr({editor:n,contentRange:o,isReversed:a})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Tr(this.languageId);return Jd(r,n,[i,N5])}};var im=class extends He{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:a=>[new vd({editor:r,isReversed:a,contentRange:o})]}}};function EA(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:a,end:l}=L5(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(a),end:t.positionAt(l)}}function L5(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let a=n==="disallowed"?1:-o;return r==="forward"?{start:t+a,end:e+o}:{start:e-o,end:t-a}}function RA(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Pa=class extends He{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:a}=r,{start:l,end:p}=EA(a,n,i,o),u=this.query.matches(a,l,p).map(d=>this.matchToScope(r,d)).filter(d=>d!=null).sort((d,m)=>Vr(i,n,d,m));yield*RA(u,(d,m)=>d.domain.isRangeEqual(m.domain),d=>d.length===1?d[0]:{...d[0],getTargets(m){let g=jc(d.flatMap(x=>x.getTargets(m)),(x,w)=>x.isEqual(w));if(g.length>1&&!d.every(x=>x.allowMultiple)){let x="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(ot(A().messages,"BaseTreeSitterScopeHandler.allow-multiple",x),A().runMode==="test")throw Error(x)}return g}})}};function jT(t,e,r,n){return n?Ma(t,`${e}.${r}`,`_.${r}`):Ma(t,`${e}.${r}`)??(Ma(t,e)!=null?Ma(t,`_.${r}`):void 0)}function ki(t,e,r,n){return jT(t,e,r,n)?.range}function Ma(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var om=class extends Pa{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n){let i=this.iterateeScopeType.type,o=jT(n,i,"iteration",!1);if(o==null)return;let{range:a,allowMultiple:l}=o,p=ki(n,i,"iteration.domain",!1)??a;return{editor:r,domain:p,allowMultiple:l,getTargets:u=>[new qe({editor:r,isReversed:u,contentRange:a})]}}};var sm=class extends Pa{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new om(this.query,this.scopeType)}}matchToScope(r,n){let i=this.scopeType.type,o=Ma(n,i);if(o==null)return;let{range:a,allowMultiple:l,insertionDelimiter:p}=o,u=ki(n,i,"domain",!0)??a,d=ki(n,i,"removal",!0),m=ki(n,i,"interior",!0),g=ki(n,i,"prefix",!0)?.with(void 0,a.start),x=ki(n,i,"leading",!0)?.with(void 0,g?.start??a.start),w=ki(n,i,"trailing",!0)?.with(a.end);return{editor:r,domain:u,allowMultiple:l,getTargets:v=>[new uo({scopeTypeType:i,editor:r,isReversed:v,contentRange:a,prefixRange:g,removalRange:d,leadingDelimiterRange:x,trailingDelimiterRange:w,interiorRange:m,insertionDelimiter:p})]}}};function kA(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function PA(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,a=!1;for(;!a&&!e(o);)({value:o,done:a}=n.next());return a?[]:[{iterator:n,value:o,index:i}]})}var mo=class t extends He{constructor(r,n,i){super();this.scopeType=r;this.scopeHandlers=n;this.getIterationScopeHandler=i;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(a=>r.create(a,i));return this.createFromScopeHandlers(r,n,o,i)}static createFromScopeHandlers(r,n,i,o){let a=()=>new t(void 0,i.map(l=>r.create(l.iterationScopeType,o)),()=>{throw new Error("Not implemented")});return new t(n,i,a)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let p=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[p].generateScopes(r,n,i,o);return}let a=this.scopeHandlers.map(p=>p.generateScopes(r,n,i,o)[Symbol.iterator]()),l=kA(a);for(;l.length>0;){l.sort((d,m)=>Vr(i,n,d.value,m.value));let p=l[0],u=p.value;this.lastYieldedIndex=p.index,yield u,l=PA(l,d=>Vr(i,n,u,d)<0)}}};var am=class extends He{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,a=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,p=U5(o,n,i),u=r.document.lineAt(n);for(let d=n.line+a;d!==l;d+=a){let m=r.document.lineAt(d);m.isEmptyOrWhitespace?p!=null&&(yield MA(r,p.range.union(u.range)),p=void 0):p==null&&(p=m),u=m}p!=null&&(yield MA(r,p.range.union(u.range)))}};function U5(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let a=e.line+n;a!==i;a+=n){let l=t.lineAt(a);if(l.isEmptyOrWhitespace)break;o=l}return o}}function MA(t,e){return{editor:t,domain:e,getTargets:r=>[new ba({editor:t,isReversed:r,contentRange:$T(t,e)})]}}function Rl(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function AA(t,e){return t.slice(t.length-e.length)===e}var qT,V5=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function DA(t){t?qT=t:qT=V5}function zT(t){return/^[A-Z][a-z].*/.test(t)||cm(t)}function IA(t){return zT(t)||/``|"|'/.test(t.substring(0,2))}function FA(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~qT.indexOf(e)}function CA(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function GT(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function OA(t){return t.length<=3?!0:zT(t)}function KT(t,e){return e.length>0?t<5&&e[0].length<6&&zT(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function cm(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function NA(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function LA(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function UA(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function HA(t){return t==="."||t==="!"||t==="?"}var BA=" @~@ ",VA=BA.trim(),W5=new RegExp("\\S",""),$5=new RegExp("\\n+|[-#=_+*]{4,}","g"),j5=new RegExp("\\S+|\\n","g"),q5={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function WA(t,e){if(!t)return[];if(!W5.test(t))return[];let r={...q5,...e};DA(r.abbreviations),r.newlineBoundaries&&(t=t.replace($5,BA));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(m,g){return g%2})):n=t.trim().match(j5)??[];let o=0,a=0,l=[],p=[],u=[];if(!n||!n.length)return[];for(let m=0,g=n.length;m<g;m++){if(o++,u.push(n[m]),~n[m].indexOf(",")&&(o=0),HA(n[m])||Rl(n[m],"?!")||n[m]===VA){r.newlineBoundaries&&n[m]===VA&&u.pop(),p.push(u),o=0,u=[];continue}if((Rl(n[m],'"')||Rl(n[m],"\u201D"))&&(n[m]=n[m].slice(0,-1)),Rl(n[m],".")){if(m+1<g){if(n[m].length===2&&isNaN(n[m].charAt(0))||FA(n[m]))continue;if(IA(n[m+1])){if(CA(n[m],n[m+1])||KT(o,n.slice(m,6))||cm(n[m+1])&&OA(n[m]))continue}else if(AA(n[m],"..")||GT(n[m])||KT(o,n.slice(m,5)))continue}p.push(u),u=[],o=0;continue}(a=n[m].indexOf("."))>-1&&(cm(n[m],a)||GT(n[m])||LA(n[m])||NA(n[m]))||(l=UA(n[m]))&&(u.pop(),u.push(l[0]),p.push(u),u=[],o=0,u.push(l[1]))}return u.length&&p.push(u),p=p.filter(function(m){return m.length>0}),p.slice(1).reduce(function(m,g){let x=m[m.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(m.pop(),m.push(x.concat(g)),m):(m.push(g),m)},[p[0]]).map(function(m,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=m.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return m.join(" ")})}var z5=/\S*\p{L}/u,$A=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,G5={newlineBoundaries:!1,preserveWhitespace:!0},lm=class{*segment(e){let r=WA(e,G5),n=0;for(let i of r){let o=i.split($A).filter(a=>a!=null);for(let a of o){if(!Q5(a)){let l=K5(a,n);l!=null&&(yield l)}n+=a.length}}}};function K5(t,e){let r=bk(z5,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function Q5(t){return qo($A,t)}var pm=class extends vr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new lm}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),a=n.document.getText(i),l=u=>{let d=new $(n.document.positionAt(o+u.index),n.document.positionAt(o+u.index+u.text.length));return{editor:n,domain:d,getTargets:m=>[new Sr({editor:n,contentRange:d,isReversed:m})]}},p=this.segmenter.segment(a);return r==="forward"?Lt(p,l):Array.from(p,l).reverse()}};var Aa=class extends vr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(pn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new Sr({editor:n,contentRange:o,isReversed:a})]}))}},um=class extends Aa{constructor(){super(...arguments);this.regex=/\S+/g}},fm=class extends Aa{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},dm=class extends Aa{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},mm=class extends Aa{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Nr(this.scopeType.character),"gui")}};var hm=class extends He{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let a=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment==null&&o.skipAncestorScopes?"required":o.containment}));for(let p of a){let u=[];for(let d of l){let m=p.domain.intersection(d.domain);m!=null&&!m.isEmpty&&u.push({editor:r,domain:m,getTargets:g=>[this.getTargets(jA(p,g),jA(d,g))]})}u.push(p),u.sort((d,m)=>Vr(i,n,d,m)),yield*u}}};function jA(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var gm=class extends hm{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new Sr({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},ym=class extends hm{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof ba))throw Error("Expected ParagraphTarget");return new Md({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var Zn=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var Da=class{constructor(e){this.children=Z5(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function Z5(t){let e=[],r=[];for(let n of t){let i=new QT(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new Zn(e)}var QT=class{constructor(e){this.item=e;this.children=new Zn([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var Y5=",",ZT=new RegExp(Y5,"g");function qA(t){let e=t.getText();return on(e,ZT,r=>new $(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var zA={type:"fallback",scopeTypes:[{type:"surroundingPairInterior",delimiter:"collectionBoundary"},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return qo(ZT,e)}}]};function YT(t,e,r,n,i,o){let a=i!=null?new $(i.end,n.start):void 0,l=o!=null?new $(n.end,o.start):void 0,p=!t&&a!=null&&l!=null&&RT(e,a)>RT(e,l)?n.union(a):void 0,u=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(d){return[new uo({scopeTypeType:"collectionItem",editor:e,isReversed:d,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:a,trailingDelimiterRange:l,removalRange:p})]}}}function XT(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new ce(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var xm=class extends He{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return zA}*generateScopeCandidates(r,n,i,o){let a=o.containment==null&&o.skipAncestorScopes,l=qA(r.document),p=XT(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),u=new Da(p),d=XT(this.scopeHandlerFactory,this.languageId,r,"string"),m=new Zn(d),g=[],x=new Set,w=[];for(let v of l){if(m.contains(v))continue;let F;for(;w.length>0;){let K=w[w.length-1];if(K.iterationRange.contains(v)){F=K;break}this.addScopes(g,K),w.pop()}let M=u.getSmallestContaining(v)?.range,U=M??r.document.lineAt(v.start.line).range;if(F!=null&&F.iterationRange.isRangeEqual(U)){F.delimiters.push(v);continue}M!=null&&x.add(M),w.push({editor:r,isEveryScope:a,iterationRange:U,delimiters:[v]})}for(let v of w)this.addScopes(g,v);for(let v of p)if(!x.has(v.range)&&!v.range.isEmpty){let F=rs(r,v.range);F.isEmpty||g.push(YT(a,r,v.range,F))}g.sort((v,F)=>Vr(i,n,v,F)),yield*g}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:a,delimiters:l}=n;if(l.length===0)return;let p=[];for(let m=0;m<l.length;++m){let g=l[m],x=l[m-1]?.end??o.start;p.push(new $(x,g.start))}let u=l[l.length-1];p.push(new $(u.end,o.end));let d=p.map(m=>rs(i,m));for(let m=0;m<d.length;++m)m===d.length-1&&i.document.getText(d[m]).trim()===""||r.push(YT(a,i,o,d[m],d[m-1],d[m+1]))}};var Sm=class extends He{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new xm(r,i),a=n.get(i)?.getScopeHandler(this.scopeType);return a==null?o:mo.createFromScopeHandlers(r,{type:"oneOf",scopeTypes:[a.scopeType,o.scopeType]},[a,o],i)})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Tm=class extends He{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new Rt("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let a=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return Kd(a.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var vm=class extends He{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.fallbackScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new Rt("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){let a=this.fallbackScopeType.scopeTypes.map(l=>this.scopeHandlerFactory.create(l,this.languageId));for(let l of a)yield*l.generateScopes(r,n,i,o)}};var bm=class extends He{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let a=X5(r,n,i,o);for(let l of a)yield e8(l)}};function X5(t,e,r,n){let i=J5(t);if(i==null)return[];let{notebook:o,cell:a}=i;return n.containment==="required"?[a]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(a.index+1):o.cells.slice(0,a.index).reverse():n.distalPosition!=null&&new $(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(a.index):o.cells.slice(0,a.index+1).reverse()}function J5(t){let e=t.document.uri.toString();for(let r of A().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function e8(t){let e=t8(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new wd({editor:e,isReversed:n,contentRange:r})]}}function t8(t){let e=t.document.uri.toString();for(let r of A().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var wm=class extends He{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let a=new bm,l=n.get(o)?.getScopeHandler(this.scopeType);return l==null?a:mo.createFromScopeHandlers(r,{type:"oneOf",scopeTypes:[l.scopeType,a.scopeType]},[l,a],o)})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var _m=class extends He{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let a=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of a)this.scopeType.requireSingleLine&&!l.domain.isSingleLine||(yield{editor:r,domain:l.domain,getTargets(p){return l.getTargets(p).flatMap(u=>u.getInterior())}})}};function GA(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new $(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:a=>[new Rd({editor:t,isReversed:a,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function KA(t){let e=jo(t.map(({text:r})=>r)).map(Nr).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function ZA(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new Zn(JT(n.disqualifyDelimiter)),o=new Zn(JT(n.pairDelimiter)),a=new Da(JT(n.textFragment)),l=Object.fromEntries(r.map(d=>[d.text,d])),p=bS(e.getText(),KA(r)),u=[];for(let d of p){let m=d[0],g=new $(e.positionAt(d.index),e.positionAt(d.index+m.length));QA(i.getContaining(g))==null&&u.push({delimiterInfo:l[m],textFragmentRange:a.getSmallestContaining(g)?.range,range:QA(o.getContaining(g))?.range??g})}return u}function QA(t){return t!=null&&!t.hasError()?t:void 0}function JT(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var Em=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],backtickQuotes:["`","`"],curlyBrackets:[["{","${"],"}"],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),YA={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},ruby:{tripleDoubleQuotes:["%Q(",")"]}},xEe=Object.fromEntries(Object.values(Em)),XA={any:bi(Em),string:["tripleDoubleQuotes","tripleSingleQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function JA(t){return t!=null&&t in YA?{...Em,...YA[t]}:Em}function eD(t,e){let r=XA[t]??[t];return r8(e,r)}function r8(t,e){let r=JA(t);return e.flatMap(n=>{let[i,o,a]=r[n],{isSingleLine:l=!1}=a??{},p=al(i)?[i]:i,u=al(o)?[o]:o;return jo(Wc(p,u)).map(m=>{let g=p.includes(m),x=u.includes(m);return{text:m,side:g&&!x?"left":!g&&x?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function tD(t){let e=[],r=new so(()=>[]);for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:a},textFragmentRange:l,range:p}=n,u=r.get(i);a&&(u=u.filter(m=>m.range.start.line===p.start.line),r.set(i,u));let d=u.filter(m=>l==null&&m.textFragmentRange==null||l!=null&&m.textFragmentRange!=null&&m.textFragmentRange.isRangeEqual(l));if(o==="left"||o==="unknown"&&d.length%2===0)u.push(n);else{let m=d.at(-1);if(m==null)continue;u.splice(u.lastIndexOf(m),1),e.push({delimiterName:i,openingDelimiterRange:m.range,closingDelimiterRange:p})}}return e}var Rm=class extends He{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){ot(A().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let a=ZA(this.languageDefinitions.get(this.languageId),r.document,eD(this.scopeType.delimiter,this.languageId)),l=tD(a);l=n8(i,o,n,l),yield*l.map(p=>GA(r,p,this.scopeType.requireStrongContainment??!1)).sort((p,u)=>Vr(i,n,p,u))}};function n8(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var Ia=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new em(this,e,r);case"word":return new rm(this,e,r);case"token":return new nm(this,e,r);case"identifier":return new Xd(this,e,r);case"line":return new Yd(e,r);case"sentence":return new pm(this,e,r);case"paragraph":return new am(e,r);case"boundedParagraph":return new ym(this,e,r);case"document":return new im(e,r);case"nonWhitespaceSequence":return new um(this,e,r);case"boundedNonWhitespaceSequence":return new gm(this,e,r);case"url":return new fm(this,e,r);case"customRegex":return new dm(this,e,r);case"glyph":return new mm(this,e,r);case"collectionItem":return new Sm(this,this.languageDefinitions,r);case"surroundingPair":return new Rm(this.languageDefinitions,e,r);case"surroundingPairInterior":return new _m(this,e,r);case"notebookCell":return new wm(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return mo.create(this,e,r);case"fallback":return new vm(this,e,r);case"conditional":return new Tm(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function un(t,e){return new $(t.row,t.column,e.row,e.column)}function ev(t){return new ce(t.row,t.column)}function rD(t){return new $(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function nD(t,e){return new we(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function Yn(t,e){return{selection:new we(new ce(e.startPosition.row,e.startPosition.column),new ce(e.endPosition.row,e.endPosition.column)),context:{}}}function i8(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new we(new ce(i.startPosition.row,i.startPosition.column),new ce(o.endPosition.row,o.endPosition.column)),context:{}}}function iD(){return tv(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function oD(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new we(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function sD(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=un(i.endPosition,r.startPosition):o=un(n.startPosition,r.startPosition):o=un(n.endPosition,r.startPosition)),{...Yn(e,r),context:{leadingDelimiterRange:o}}}}function Xn(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,a=new Set(t),l=new Set(e);return o=o.filter(p=>a.size>0?!a.has(p.type):l.size>0?l.has(p.type):!0),i8(n,o[0],o[o.length-1])}}function aD(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=un(r.endPosition,i.startPosition):o=un(r.endPosition,n.endPosition):o=un(r.endPosition,n.startPosition)),{...Yn(e,r),context:{trailingDelimiterRange:o}}}}function o8(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function s8(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function tv(t,e,r=dr,n=dr){return(i,o)=>{let a,l,p=r(o),u=n(o),d=s8(p,t),m=o8(u,t);d!=null&&(a=un(d.endPosition,p.startPosition)),m!=null&&(l=un(u.endPosition,m.startPosition));let g=a8(i,a,l,e);return{selection:new we(new ce(p.startPosition.row,p.startPosition.column),new ce(u.endPosition.row,u.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:a,trailingDelimiterRange:l}}}}function a8(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return gS(o,"length")}function cD(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:p})=>p.endsWith(".start")).map(({range:{end:p}})=>p).sort((p,u)=>p.compareTo(u)).at(-1),i=t.filter(({name:p})=>p.endsWith(".end")).map(({range:{start:p}})=>p).sort((p,u)=>p.compareTo(u)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(ot(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:p})=>p.endsWith(".start")).length,a=t.filter(({name:p})=>p.endsWith(".end")).length,l=t.length-o-a;return l>0&&(o>0||a>0)&&(ot(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),l>1&&(ot(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),!r}function lD(t){let e=t;for(;e!=null;){if(e.hasError)return!0;e=e.parent}return!1}function rv(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var Fe;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(let l of o)a[l]=i[l];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Fe||(Fe={}));var iv;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(iv||(iv={}));var J=Fe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ho=t=>{switch(typeof t){case"undefined":return J.undefined;case"string":return J.string;case"number":return isNaN(t)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(t)?J.array:t===null?J.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?J.promise:typeof Map<"u"&&t instanceof Map?J.map:typeof Set<"u"&&t instanceof Set?J.set:typeof Date<"u"&&t instanceof Date?J.date:J.object;default:return J.unknown}},G=Fe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),c8=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Br=class t extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let l=n,p=0;for(;p<a.path.length;){let u=a.path[p];p===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(a))):l[u]=l[u]||{_errors:[]},l=l[u],p++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Fe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Br.create=t=>new Br(t);var Oa=(t,e)=>{let r;switch(t.code){case G.invalid_type:t.received===J.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Fe.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${Fe.joinValues(t.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Fe.joinValues(t.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${Fe.joinValues(t.options)}, received '${t.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Fe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case G.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case G.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=e.defaultError,Fe.assertNever(t)}return{message:r}},fD=Oa;function l8(t){fD=t}function km(){return fD}var Pm=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",p=n.filter(u=>!!u).slice().reverse();for(let u of p)l=u(a,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},p8=[];function X(t,e){let r=km(),n=Pm({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Oa?void 0:Oa].filter(i=>!!i)});t.common.issues.push(n)}var qt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return he;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return he;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},he=Object.freeze({status:"aborted"}),Ca=t=>({status:"dirty",value:t}),nr=t=>({status:"valid",value:t}),ov=t=>t.status==="aborted",sv=t=>t.status==="dirty",Ml=t=>t.status==="valid",Al=t=>typeof Promise<"u"&&t instanceof Promise;function Mm(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function dD(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var se;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(se||(se={}));var kl,Pl,dn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},pD=(t,e)=>{if(Ml(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Br(t.common.issues);return this._error=r,this._error}}};function Te(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,l)=>{var p,u;let{message:d}=t;return a.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(p=d??n)!==null&&p!==void 0?p:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:l.defaultError}},description:i}}var ve=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ho(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:ho(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new qt,ctx:{common:e.parent.common,data:e.data,parsedType:ho(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Al(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ho(e)},o=this._parseSync({data:e,path:i.path,parent:i});return pD(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ho(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(Al(i)?i:Promise.resolve(i));return pD(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let a=e(i),l=()=>o.addIssue({code:G.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(p=>p?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Wr({schema:this,typeName:fe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return fn.create(this,this._def)}nullable(){return ei.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ai.create(this,this._def)}promise(){return xo.create(this,this._def)}or(e){return us.create([this,e],this._def)}and(e){return fs.create(this,e,this._def)}transform(e){return new Wr({...Te(this._def),schema:this,typeName:fe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new ys({...Te(this._def),innerType:this,defaultValue:r,typeName:fe.ZodDefault})}brand(){return new Dl({typeName:fe.ZodBranded,type:this,...Te(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new xs({...Te(this._def),innerType:this,catchValue:r,typeName:fe.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Il.create(this,e)}readonly(){return Ss.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},u8=/^c[^\s-]{8,}$/i,f8=/^[0-9a-z]+$/,d8=/^[0-9A-HJKMNP-TV-Z]{26}$/,m8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,h8=/^[a-z0-9_-]{21}$/i,g8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,y8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,x8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",nv,S8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,T8=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,v8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,mD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",b8=new RegExp(`^${mD}$`);function hD(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function w8(t){return new RegExp(`^${hD(t)}$`)}function gD(t){let e=`${mD}T${hD(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function _8(t,e){return!!((e==="v4"||!e)&&S8.test(t)||(e==="v6"||!e)&&T8.test(t))}var go=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.string,received:o.parsedType}),he}let n=new qt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?X(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&X(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")y8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"email",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")nv||(nv=new RegExp(x8,"u")),nv.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"emoji",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")m8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"uuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")h8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"nanoid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")u8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")f8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid2",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")d8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ulid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),X(i,{validation:"url",code:G.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"regex",code:G.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?gD(o).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?b8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?w8(o).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?g8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"duration",code:G.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?_8(e.data,o.version)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ip",code:G.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?v8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"base64",code:G.invalid_string,message:o.message}),n.dirty()):Fe.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:G.invalid_string,...se.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...se.errToObj(e)})}url(e){return this._addCheck({kind:"url",...se.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...se.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...se.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...se.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...se.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...se.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...se.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...se.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...se.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...se.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...se.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...se.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...se.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...se.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...se.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...se.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...se.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...se.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...se.errToObj(r)})}nonempty(e){return this.min(1,se.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};go.create=t=>{var e;return new go({checks:[],typeName:fe.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};function E8(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}var os=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.number,received:o.parsedType}),he}let n,i=new qt;for(let o of this._def.checks)o.kind==="int"?Fe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:G.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?E8(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_finite,message:o.message}),i.dirty()):Fe.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,se.toString(r))}gt(e,r){return this.setLimit("min",e,!1,se.toString(r))}lte(e,r){return this.setLimit("max",e,!0,se.toString(r))}lt(e,r){return this.setLimit("max",e,!1,se.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:se.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:se.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:se.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:se.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:se.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:se.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Fe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};os.create=t=>new os({checks:[],typeName:fe.ZodNumber,coerce:t?.coerce||!1,...Te(t)});var ss=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==J.bigint){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.bigint,received:o.parsedType}),he}let n,i=new qt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Fe.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,se.toString(r))}gt(e,r){return this.setLimit("min",e,!1,se.toString(r))}lte(e,r){return this.setLimit("max",e,!0,se.toString(r))}lt(e,r){return this.setLimit("max",e,!1,se.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:se.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:se.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ss.create=t=>{var e;return new ss({checks:[],typeName:fe.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};var as=class extends ve{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.boolean,received:n.parsedType}),he}return nr(e.data)}};as.create=t=>new as({typeName:fe.ZodBoolean,coerce:t?.coerce||!1,...Te(t)});var cs=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.date,received:o.parsedType}),he}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_date}),he}let n=new qt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Fe.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:se.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:se.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};cs.create=t=>new cs({checks:[],coerce:t?.coerce||!1,typeName:fe.ZodDate,...Te(t)});var Na=class extends ve{_parse(e){if(this._getType(e)!==J.symbol){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.symbol,received:n.parsedType}),he}return nr(e.data)}};Na.create=t=>new Na({typeName:fe.ZodSymbol,...Te(t)});var ls=class extends ve{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.undefined,received:n.parsedType}),he}return nr(e.data)}};ls.create=t=>new ls({typeName:fe.ZodUndefined,...Te(t)});var ps=class extends ve{_parse(e){if(this._getType(e)!==J.null){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.null,received:n.parsedType}),he}return nr(e.data)}};ps.create=t=>new ps({typeName:fe.ZodNull,...Te(t)});var yo=class extends ve{constructor(){super(...arguments),this._any=!0}_parse(e){return nr(e.data)}};yo.create=t=>new yo({typeName:fe.ZodAny,...Te(t)});var Mi=class extends ve{constructor(){super(...arguments),this._unknown=!0}_parse(e){return nr(e.data)}};Mi.create=t=>new Mi({typeName:fe.ZodUnknown,...Te(t)});var In=class extends ve{_parse(e){let r=this._getOrReturnCtx(e);return X(r,{code:G.invalid_type,expected:J.never,received:r.parsedType}),he}};In.create=t=>new In({typeName:fe.ZodNever,...Te(t)});var La=class extends ve{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.void,received:n.parsedType}),he}return nr(e.data)}};La.create=t=>new La({typeName:fe.ZodVoid,...Te(t)});var Ai=class t extends ve{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==J.array)return X(r,{code:G.invalid_type,expected:J.array,received:r.parsedType}),he;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(a||l)&&(X(r,{code:a?G.too_big:G.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(X(r,{code:G.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(X(r,{code:G.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,l)=>i.type._parseAsync(new dn(r,a,r.path,l)))).then(a=>qt.mergeArray(n,a));let o=[...r.data].map((a,l)=>i.type._parseSync(new dn(r,a,r.path,l)));return qt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:se.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:se.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:se.toString(r)}})}nonempty(e){return this.min(1,e)}};Ai.create=(t,e)=>new Ai({type:t,minLength:null,maxLength:null,exactLength:null,typeName:fe.ZodArray,...Te(e)});function Fa(t){if(t instanceof br){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=fn.create(Fa(n))}return new br({...t._def,shape:()=>e})}else return t instanceof Ai?new Ai({...t._def,type:Fa(t.element)}):t instanceof fn?fn.create(Fa(t.unwrap())):t instanceof ei?ei.create(Fa(t.unwrap())):t instanceof Jn?Jn.create(t.items.map(e=>Fa(e))):t}var br=class t extends ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Fe.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==J.object){let u=this._getOrReturnCtx(e);return X(u,{code:G.invalid_type,expected:J.object,received:u.parsedType}),he}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof In&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||l.push(u);let p=[];for(let u of a){let d=o[u],m=i.data[u];p.push({key:{status:"valid",value:u},value:d._parse(new dn(i,m,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof In){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of l)p.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(X(i,{code:G.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of l){let m=i.data[d];p.push({key:{status:"valid",value:d},value:u._parse(new dn(i,m,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of p){let m=await d.key,g=await d.value;u.push({key:m,value:g,alwaysSet:d.alwaysSet})}return u}).then(u=>qt.mergeObjectSync(n,u)):qt.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return se.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,a,l;let p=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=se.errToObj(e).message)!==null&&l!==void 0?l:p}:{message:p}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:fe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Fe.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Fe.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return Fa(this)}partial(e){let r={};return Fe.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Fe.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof fn;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return yD(Fe.objectKeys(this.shape))}};br.create=(t,e)=>new br({shape:()=>t,unknownKeys:"strip",catchall:In.create(),typeName:fe.ZodObject,...Te(e)});br.strictCreate=(t,e)=>new br({shape:()=>t,unknownKeys:"strict",catchall:In.create(),typeName:fe.ZodObject,...Te(e)});br.lazycreate=(t,e)=>new br({shape:t,unknownKeys:"strip",catchall:In.create(),typeName:fe.ZodObject,...Te(e)});var us=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let a=o.map(l=>new Br(l.ctx.common.issues));return X(r,{code:G.invalid_union,unionErrors:a}),he}if(r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let p of n){let u={...r,common:{...r.common,issues:[]},parent:null},d=p._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=a.map(p=>new Br(p));return X(r,{code:G.invalid_union,unionErrors:l}),he}}get options(){return this._def.options}};us.create=(t,e)=>new us({options:t,typeName:fe.ZodUnion,...Te(e)});var Pi=t=>t instanceof ds?Pi(t.schema):t instanceof Wr?Pi(t.innerType()):t instanceof ms?[t.value]:t instanceof hs?t.options:t instanceof gs?Fe.objectValues(t.enum):t instanceof ys?Pi(t._def.innerType):t instanceof ls?[void 0]:t instanceof ps?[null]:t instanceof fn?[void 0,...Pi(t.unwrap())]:t instanceof ei?[null,...Pi(t.unwrap())]:t instanceof Dl||t instanceof Ss?Pi(t.unwrap()):t instanceof xs?Pi(t._def.innerType):[],Am=class t extends ve{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.object)return X(r,{code:G.invalid_type,expected:J.object,received:r.parsedType}),he;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(X(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),he)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=Pi(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of a){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:fe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Te(n)})}};function av(t,e){let r=ho(t),n=ho(e);if(t===e)return{valid:!0,data:t};if(r===J.object&&n===J.object){let i=Fe.objectKeys(e),o=Fe.objectKeys(t).filter(l=>i.indexOf(l)!==-1),a={...t,...e};for(let l of o){let p=av(t[l],e[l]);if(!p.valid)return{valid:!1};a[l]=p.data}return{valid:!0,data:a}}else if(r===J.array&&n===J.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],l=e[o],p=av(a,l);if(!p.valid)return{valid:!1};i.push(p.data)}return{valid:!0,data:i}}else return r===J.date&&n===J.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var fs=class extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,a)=>{if(ov(o)||ov(a))return he;let l=av(o.value,a.value);return l.valid?((sv(o)||sv(a))&&r.dirty(),{status:r.value,value:l.data}):(X(n,{code:G.invalid_intersection_types}),he)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};fs.create=(t,e,r)=>new fs({left:t,right:e,typeName:fe.ZodIntersection,...Te(r)});var Jn=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.array)return X(n,{code:G.invalid_type,expected:J.array,received:n.parsedType}),he;if(n.data.length<this._def.items.length)return X(n,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),he;!this._def.rest&&n.data.length>this._def.items.length&&(X(n,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,l)=>{let p=this._def.items[l]||this._def.rest;return p?p._parse(new dn(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>qt.mergeArray(r,a)):qt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Jn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Jn({items:t,typeName:fe.ZodTuple,rest:null,...Te(e)})};var Dm=class t extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.object)return X(n,{code:G.invalid_type,expected:J.object,received:n.parsedType}),he;let i=[],o=this._def.keyType,a=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new dn(n,l,n.path,l)),value:a._parse(new dn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?qt.mergeObjectAsync(r,i):qt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ve?new t({keyType:e,valueType:r,typeName:fe.ZodRecord,...Te(n)}):new t({keyType:go.create(),valueType:e,typeName:fe.ZodRecord,...Te(r)})}},Ua=class extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.map)return X(n,{code:G.invalid_type,expected:J.map,received:n.parsedType}),he;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([l,p],u)=>({key:i._parse(new dn(n,l,n.path,[u,"key"])),value:o._parse(new dn(n,p,n.path,[u,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let p of a){let u=await p.key,d=await p.value;if(u.status==="aborted"||d.status==="aborted")return he;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let p of a){let u=p.key,d=p.value;if(u.status==="aborted"||d.status==="aborted")return he;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}};Ua.create=(t,e,r)=>new Ua({valueType:e,keyType:t,typeName:fe.ZodMap,...Te(r)});var Ha=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.set)return X(n,{code:G.invalid_type,expected:J.set,received:n.parsedType}),he;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(X(n,{code:G.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(X(n,{code:G.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(p){let u=new Set;for(let d of p){if(d.status==="aborted")return he;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}let l=[...n.data.values()].map((p,u)=>o._parse(new dn(n,p,n.path,u)));return n.common.async?Promise.all(l).then(p=>a(p)):a(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:se.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:se.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Ha.create=(t,e)=>new Ha({valueType:t,minSize:null,maxSize:null,typeName:fe.ZodSet,...Te(e)});var Im=class t extends ve{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.function)return X(r,{code:G.invalid_type,expected:J.function,received:r.parsedType}),he;function n(l,p){return Pm({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,km(),Oa].filter(u=>!!u),issueData:{code:G.invalid_arguments,argumentsError:p}})}function i(l,p){return Pm({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,km(),Oa].filter(u=>!!u),issueData:{code:G.invalid_return_type,returnTypeError:p}})}let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof xo){let l=this;return nr(async function(...p){let u=new Br([]),d=await l._def.args.parseAsync(p,o).catch(x=>{throw u.addIssue(n(p,x)),u}),m=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(m,o).catch(x=>{throw u.addIssue(i(m,x)),u})})}else{let l=this;return nr(function(...p){let u=l._def.args.safeParse(p,o);if(!u.success)throw new Br([n(p,u.error)]);let d=Reflect.apply(a,this,u.data),m=l._def.returns.safeParse(d,o);if(!m.success)throw new Br([i(d,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Jn.create(e).rest(Mi.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Jn.create([]).rest(Mi.create()),returns:r||Mi.create(),typeName:fe.ZodFunction,...Te(n)})}},ds=class extends ve{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ds.create=(t,e)=>new ds({getter:t,typeName:fe.ZodLazy,...Te(e)});var ms=class extends ve{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return X(r,{received:r.data,code:G.invalid_literal,expected:this._def.value}),he}return{status:"valid",value:e.data}}get value(){return this._def.value}};ms.create=(t,e)=>new ms({value:t,typeName:fe.ZodLiteral,...Te(e)});function yD(t,e){return new hs({values:t,typeName:fe.ZodEnum,...Te(e)})}var hs=class t extends ve{constructor(){super(...arguments),kl.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{expected:Fe.joinValues(n),received:r.parsedType,code:G.invalid_type}),he}if(Mm(this,kl,"f")||dD(this,kl,new Set(this._def.values),"f"),!Mm(this,kl,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{received:r.data,code:G.invalid_enum_value,options:n}),he}return nr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};kl=new WeakMap;hs.create=yD;var gs=class extends ve{constructor(){super(...arguments),Pl.set(this,void 0)}_parse(e){let r=Fe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==J.string&&n.parsedType!==J.number){let i=Fe.objectValues(r);return X(n,{expected:Fe.joinValues(i),received:n.parsedType,code:G.invalid_type}),he}if(Mm(this,Pl,"f")||dD(this,Pl,new Set(Fe.getValidEnumValues(this._def.values)),"f"),!Mm(this,Pl,"f").has(e.data)){let i=Fe.objectValues(r);return X(n,{received:n.data,code:G.invalid_enum_value,options:i}),he}return nr(e.data)}get enum(){return this._def.values}};Pl=new WeakMap;gs.create=(t,e)=>new gs({values:t,typeName:fe.ZodNativeEnum,...Te(e)});var xo=class extends ve{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.promise&&r.common.async===!1)return X(r,{code:G.invalid_type,expected:J.promise,received:r.parsedType}),he;let n=r.parsedType===J.promise?r.data:Promise.resolve(r.data);return nr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};xo.create=(t,e)=>new xo({type:t,typeName:fe.ZodPromise,...Te(e)});var Wr=class extends ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:a=>{X(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async l=>{if(r.value==="aborted")return he;let p=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return p.status==="aborted"?he:p.status==="dirty"||r.value==="dirty"?Ca(p.value):p});{if(r.value==="aborted")return he;let l=this._def.schema._parseSync({data:a,path:n.path,parent:n});return l.status==="aborted"?he:l.status==="dirty"||r.value==="dirty"?Ca(l.value):l}}if(i.type==="refinement"){let a=l=>{let p=i.refinement(l,o);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?he:(l.status==="dirty"&&r.dirty(),a(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?he:(l.status==="dirty"&&r.dirty(),a(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ml(a))return a;let l=i.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Ml(a)?Promise.resolve(i.transform(a.value,o)).then(l=>({status:r.value,value:l})):a);Fe.assertNever(i)}};Wr.create=(t,e,r)=>new Wr({schema:t,typeName:fe.ZodEffects,effect:e,...Te(r)});Wr.createWithPreprocess=(t,e,r)=>new Wr({schema:e,effect:{type:"preprocess",transform:t},typeName:fe.ZodEffects,...Te(r)});var fn=class extends ve{_parse(e){return this._getType(e)===J.undefined?nr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};fn.create=(t,e)=>new fn({innerType:t,typeName:fe.ZodOptional,...Te(e)});var ei=class extends ve{_parse(e){return this._getType(e)===J.null?nr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ei.create=(t,e)=>new ei({innerType:t,typeName:fe.ZodNullable,...Te(e)});var ys=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===J.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};ys.create=(t,e)=>new ys({innerType:t,typeName:fe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Te(e)});var xs=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Al(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Br(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Br(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};xs.create=(t,e)=>new xs({innerType:t,typeName:fe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Te(e)});var Va=class extends ve{_parse(e){if(this._getType(e)!==J.nan){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.nan,received:n.parsedType}),he}return{status:"valid",value:e.data}}};Va.create=t=>new Va({typeName:fe.ZodNaN,...Te(t)});var R8=Symbol("zod_brand"),Dl=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Il=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?he:o.status==="dirty"?(r.dirty(),Ca(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?he:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:fe.ZodPipeline})}},Ss=class extends ve{_parse(e){let r=this._def.innerType._parse(e),n=i=>(Ml(i)&&(i.value=Object.freeze(i.value)),i);return Al(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};Ss.create=(t,e)=>new Ss({innerType:t,typeName:fe.ZodReadonly,...Te(e)});function xD(t,e={},r){return t?yo.create().superRefine((n,i)=>{var o,a;if(!t(n)){let l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,p=(a=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0,u=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...u,fatal:p})}}):yo.create()}var k8={object:br.lazycreate},fe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(fe||(fe={}));var P8=(t,e={message:`Input not instance of ${t.name}`})=>xD(r=>r instanceof t,e),SD=go.create,TD=os.create,M8=Va.create,A8=ss.create,vD=as.create,D8=cs.create,I8=Na.create,F8=ls.create,C8=ps.create,O8=yo.create,N8=Mi.create,L8=In.create,U8=La.create,H8=Ai.create,V8=br.create,B8=br.strictCreate,W8=us.create,$8=Am.create,j8=fs.create,q8=Jn.create,z8=Dm.create,G8=Ua.create,K8=Ha.create,Q8=Im.create,Z8=ds.create,Y8=ms.create,X8=hs.create,J8=gs.create,e7=xo.create,uD=Wr.create,t7=fn.create,r7=ei.create,n7=Wr.createWithPreprocess,i7=Il.create,o7=()=>SD().optional(),s7=()=>TD().optional(),a7=()=>vD().optional(),c7={string:t=>go.create({...t,coerce:!0}),number:t=>os.create({...t,coerce:!0}),boolean:t=>as.create({...t,coerce:!0}),bigint:t=>ss.create({...t,coerce:!0}),date:t=>cs.create({...t,coerce:!0})},l7=he,Be=Object.freeze({__proto__:null,defaultErrorMap:Oa,setErrorMap:l8,getErrorMap:km,makeIssue:Pm,EMPTY_PATH:p8,addIssueToContext:X,ParseStatus:qt,INVALID:he,DIRTY:Ca,OK:nr,isAborted:ov,isDirty:sv,isValid:Ml,isAsync:Al,get util(){return Fe},get objectUtil(){return iv},ZodParsedType:J,getParsedType:ho,ZodType:ve,datetimeRegex:gD,ZodString:go,ZodNumber:os,ZodBigInt:ss,ZodBoolean:as,ZodDate:cs,ZodSymbol:Na,ZodUndefined:ls,ZodNull:ps,ZodAny:yo,ZodUnknown:Mi,ZodNever:In,ZodVoid:La,ZodArray:Ai,ZodObject:br,ZodUnion:us,ZodDiscriminatedUnion:Am,ZodIntersection:fs,ZodTuple:Jn,ZodRecord:Dm,ZodMap:Ua,ZodSet:Ha,ZodFunction:Im,ZodLazy:ds,ZodLiteral:ms,ZodEnum:hs,ZodNativeEnum:gs,ZodPromise:xo,ZodEffects:Wr,ZodTransformer:Wr,ZodOptional:fn,ZodNullable:ei,ZodDefault:ys,ZodCatch:xs,ZodNaN:Va,BRAND:R8,ZodBranded:Dl,ZodPipeline:Il,ZodReadonly:Ss,custom:xD,Schema:ve,ZodSchema:ve,late:k8,get ZodFirstPartyTypeKind(){return fe},coerce:c7,any:O8,array:H8,bigint:A8,boolean:vD,date:D8,discriminatedUnion:$8,effect:uD,enum:X8,function:Q8,instanceof:P8,intersection:j8,lazy:Z8,literal:Y8,map:G8,nan:M8,nativeEnum:J8,never:L8,null:C8,nullable:r7,number:TD,object:V8,oboolean:a7,onumber:s7,optional:t7,ostring:o7,pipeline:i7,preprocess:n7,promise:e7,record:z8,set:K8,strictObject:B8,string:SD,symbol:I8,transformer:uD,tuple:q8,undefined:F8,union:W8,unknown:N8,void:U8,NEVER:l7,ZodIssueCode:G,quotelessJson:c8,ZodError:Br});function bD(t){let e=t.operands.map(cv).join(" ");return`(#${t.operator} ${e})`}function cv(t){return t.type==="capture"?`@${t.name}`:t.value}function wD(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>p7(t,r))}function p7(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=cv(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var zt=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof Fm&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:wD(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new Fm(n.name);return i}else return n.value})}},Fm=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var lv=Be.object({type:Be.literal("string"),value:Be.string()}),Se={node:Be.object({type:Be.literal("capture"),name:Be.string()}),string:lv,integer:lv.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:Be.ZodIssueCode.custom,message:"Expected an integer"}),Be.NEVER):{type:"integer",value:r}}),boolean:lv.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:Be.ZodIssueCode.custom,message:"Expected true or false"}),Be.NEVER))};var pv=class extends zt{constructor(){super(...arguments);this.name="not-type?";this.schema=Be.tuple([Se.node,Se.string]).rest(Se.string)}run({node:r},...n){return!n.includes(r.type)}},uv=class extends zt{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=Be.tuple([Se.node,Se.string]).rest(Se.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},fv=class extends zt{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=Be.tuple([Se.node,Se.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},dv=class extends zt{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=Be.tuple([Se.node,Se.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},mv=class extends zt{constructor(){super(...arguments);this.name="match?";this.schema=Be.tuple([Se.node,Se.string])}run(r,n){let{document:i,range:o}=r,a=new RegExp(n,"ds"),l=i.getText(o);return a.test(l)}},hv=class extends zt{constructor(){super(...arguments);this.name="child-range!";this.schema=Be.union([Be.tuple([Se.node,Se.integer]),Be.tuple([Se.node,Se.integer,Se.integer]),Be.tuple([Se.node,Se.integer,Se.integer,Se.boolean]),Be.tuple([Se.node,Se.integer,Se.integer,Se.boolean,Se.boolean])])}run(r,n,i,o,a){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let p=l[n],u=l[i];return r.range=un(o?p.endPosition:p.startPosition,a?u.startPosition:u.endPosition),!0}},gv=class extends zt{constructor(){super(...arguments);this.name="character-range!";this.schema=Be.union([Be.tuple([Se.node,Se.integer]),Be.tuple([Se.node,Se.integer,Se.integer])])}run(r,n,i){return r.range=new $(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},yv=class extends zt{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=Be.tuple([Se.node,Se.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[p,u]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new $(i.positionAt(d+p),i.positionAt(d+u)),!0}},xv=class extends zt{constructor(){super(...arguments);this.name="trim-end!";this.schema=Be.tuple([Se.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),a=o.length-o.trimEnd().length;return a>0&&(r.range=new $(i.start,Tk(n,i.end,-a))),!0}},Sv=class extends zt{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=Be.tuple([Se.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},Tv=class extends zt{constructor(){super(...arguments);this.name="log!";this.schema=Be.tuple([Se.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},vv=class extends zt{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=Be.tuple([Se.node,Se.string])}run(r,n){return r.insertionDelimiter=n,!0}},bv=class extends zt{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=Be.tuple([Se.node,Se.node,Se.string,Se.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},_D=[new Tv,new pv,new xv,new uv,new fv,new hv,new gv,new yv,new Sv,new vv,new bv,new dv,new mv];function ED(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((a,l)=>{let p=_D.find(({name:d})=>d===a.operator);if(p==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${a.operator}"`});return}let u=p.createPredicate(a.operands);if(!u.success){e.push(...u.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(u.predicate)}),r.push(o)}),{errors:e,predicates:r}}function RD(t,e){let{errors:r,predicates:n}=ED(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${bD(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");ot(A().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(A().runMode==="test")throw new Error("Invalid predicates")}return n}function wv(t){return{row:t.line,column:t.character}}function kD(t){return t.map(e=>({...e,range:_v(e),name:u7(e)}))}function _v(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function u7(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var Ev=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&PD(this.startPosition,r)&&PD(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function PD(t,e){return t==null||e==null?t===e:t.isEqual(e)}var Ts=new Ev;var Fl=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=A().runMode!=="production"}static create(e,r,n){let i=RD(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>rv(r)===e)}matches(e,r,n){if(!Ts.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);Ts.update(e,r,n,i)}return Ts.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let a of i){let l=this.createMutableQueryMatch(e,a);this.runPredicates(l)&&o.push(this.createQueryMatch(l))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?wv(r):void 0,endPosition:n!=null?wv(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.pattern,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:rD(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>lD(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=rv(i.name),a=_v(i),l=n.get(o);if(l==null){let p=[i],u={...i,name:o,range:a,hasError:()=>p.some(d=>d.hasError())};r.push(u),n.set(o,{acc:u,captures:p})}else l.acc.range=l.acc.range.union(a),l.acc.allowMultiple=l.acc.allowMultiple||i.allowMultiple,l.acc.insertionDelimiter=l.acc.insertionDelimiter??i.insertionDelimiter,l.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!cD(kD(r.captures),A().messages)&&A().runMode==="test")throw new Error("Invalid captures")}};var AD="_",f7=[AD,...Ko],d7=["prefix","leading","trailing"],m7=["startOf","endOf"],h7=["domain","removal","interior","iteration","iteration.domain"],MD=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],vs=new Set;for(let t of f7){if(t!==AD){vs.add(t);for(let e of MD)vs.add(`${t}.${e}`)}for(let e of d7){vs.add(`${t}.${e}`);for(let r of m7)vs.add(`${t}.${e}.${r}`)}for(let e of h7){vs.add(`${t}.${e}`);for(let r of MD)vs.add(`${t}.${e}.${r}`)}}var g7=new RegExp("^(?!;;).*@([\\w.]*)","gm");function DD(t,e){let r=e.matchAll(g7),n=[];for(let o of r){let a=o[1];if(!(a.length>1&&!a.includes(".")&&a.startsWith("_"))&&!vs.has(a)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${a}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(ot(A().messages,"validateQueryCaptures.invalidCaptureName",i),A().runMode==="test")throw new Error(i)}var Cm=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await y7(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let a=n.getLanguage(i).query(o),l=Fl.create(i,n,a);return new t(l)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new sm(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let a=o.name;n[a]==null&&(n[a]=[]),n[a].push(o)}return n}};async function y7(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,a]of Object.entries(n)){if(a!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(ot(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&DD(o,l),n[o]=l,on(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,p=>{let u=p[1];i&&x7(t,o,u,p[0]),n[u]=n[u]??null})}return Object.values(n).join(`
`)}function x7(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(ot(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(ot(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var ID=Symbol("LANGUAGE_UNDEFINED"),Om=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Bt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&Ts.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:a})=>this.loadLanguage(a.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(ot(this.ide.messages,"Failed to load language definitions",Mn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await Cm.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??ID;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),Ts.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===ID?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var Nm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e){for(let r of this.nestedStages)try{return r.run(e)}catch{continue}throw new Error("No modifier could be applied")}};var Ba=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e){if(this.shouldModify(e))try{return this.nestedStage.run(e).map(r=>r.withThatTarget(e))}catch(r){if(!this.suppressErrors)throw r}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},Wa=class extends Ba{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},Cl=class extends Ba{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},Lm=class extends Ba{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},$a=class extends Ba{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function FD(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function ja(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&FD(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.isLine&&r.isLine?new Hr({editor:e.editor,isReversed:t,contentRange:Ta(e,r,n,i)}):new Mt({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:lo(e,r,n,i),isToken:n&&i&&e.isToken&&r.isToken})}function Um(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[a]=i,l=a.contentRange.start.isAfterOrEqual(o.contentRange.start),[p,u]=l?[o,a]:[a,o];return[ja(t,p,u,!0,!0)]}function Hm(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,a]=i;return n==="forward"?a:n==="backward"||(t.isPreferredOver?.(o,a)??!1)?o:a}default:throw new Error("Expected no more than 2 scope candidates")}}function Vm(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:a}}=t;if(a.isEqual(o)){let u=Hm(e,i,o);return u==null||(r>0&&(u=Rv(e,i,u.domain.end,"forward",r,!0)),u==null)?void 0:u.getTargets(n)}let l=Rv(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(a))return l.getTargets(n);let p=Rv(e,i,a,"backward",r);if(p!=null)return Um(n,l,p)}function Rv(t,e,r,n,i,o=!1){let a=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(a===i)return l;a+=1}}var qa=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.maybeCreate(r,e.editor.document.languageId);if(i==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let o=Vm(e,i,n);if(o==null)throw new Rt(this.modifier.scopeType.type);return o}};var Bm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,{editor:n,isReversed:i}=e,o=this.scopeHandlerFactory.maybeCreate(r,n.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let a;if(e.hasExplicitRange&&(a=CD(o,n,e.contentRange),a.length===1&&a[0].domain.contains(e.contentRange)&&(a=void 0)),a==null&&(a=this.getDefaultIterationRange(o,this.scopeHandlerFactory,e).flatMap(l=>CD(o,n,l))),a.length===0)throw new Rt(r.type);return a.flatMap(l=>l.getTargets(i))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=Vm(n,i);if(o==null)throw new Rt(`iteration scope for ${e.scopeType.type}`);return o.map(a=>a.contentRange)}};function CD(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var Wm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},$m=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var jm=class{run(){return Ad(A()).map(e=>new kd({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var qm=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new kv(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},kv=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return S7(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return Tt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return T7(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[So(e,r,n,i)];let a=Av(e,r);return[So(n?OD(this.modifierStageFactory,e,o,a?"backward":"forward"):e,i?OD(this.modifierStageFactory,r,o,a?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n;e.type==="implicit"?(r=new jm,n=[]):(r=this.markStageFactory.create(e.mark),n=Pv(this.modifierStageFactory,e.modifiers));let i=r.run(),o=[...n,...this.opts.actionFinalStages,...this.opts.noAutomaticTokenExpansion?[]:[new $a(this.modifierStageFactory)]];return Mv(o,i)}};function Pv(t,e){return e.map(t.create).reverse()}function Mv(t,e){return t.forEach(r=>{e=e.flatMap(n=>r.run(n))}),e}function OD(t,e,r,n){return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e)[0]}function Av(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function S7(t){return RP(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function ND(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function So(t,e,r=!1,n=!1){ND(t,e);let i=Av(t,e);return ja(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function T7(t,e,r,n){ND(t,e);let i=Av(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),u=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let m=l;;m+=o){let g=new $(m,t.contentRange.start.character,m,t.contentRange.end.character);if(d.push(new qe({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),m===u)return d}}var zm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifier.modifiers??[{type:"containingScope",scopeType:{type:"oneOf",scopeTypes:[{type:"line"},{type:"surroundingPairInterior",delimiter:"any",requireSingleLine:!0}]}}],n=Pv(this.modifierStageFactory,r);return Mv(n,[e]).map(o=>{let a=this.modifier.type==="extendThroughStartOf";return new Pd({editor:e.editor,isReversed:a,inputTarget:e,modifiedTarget:o,isHead:a})})}};var Di=class extends Error{constructor(){super("Scope index out of range"),this.name="OutOfRangeError"}};function LD(t,e,r){return Dv(t,e,r),t.slice(e,r+1)}function Dv(t,e,r){if(e<0||r>=t.length)throw new Di}var za=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e){let r=new $a(this.modifierStageFactory).run(e)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(r);case"ordinalScope":return this.handleOrdinalScope(r,this.modifier);case"relativeScope":return this.handleRelativeScope(r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e){return Array.from(Zd(this.getEveryRanges(e),([r,n])=>this.getTargetIterable(e,r,n,"forward")))}handleOrdinalScope(e,{start:r,length:n}){return this.getEveryRanges(e).flatMap(([i,o])=>UD(this.getTargetIterable(e,i,o,r>=0?"forward":"backward"),r>=0?r:-(n+r),n))}handleRelativeScope(e,{direction:r,offset:n,length:i}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(a=>{let{editor:l}=a,p=r==="forward"?new $(n===0?a.contentRange.start:a.contentRange.end,l.document.range.end):new $(l.document.range.start,n===0?a.contentRange.end:a.contentRange.start);return UD(this.getTargetIterable(e,l,p,r),n===0?0:n-1,i)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i){let o=Lt(pn(new RegExp(Nr(e.contentText),"g"),r,n,i),l=>new qe({contentRange:l,editor:r,isReversed:!1,isToken:!1})),a=v7(e);if(a!=null){let l=this.modifierStageFactory.create({type:"containingScope",scopeType:a});return Kd(Lt(o,p=>{try{let u=l.run(p);return u.length===1&&u[0].contentRange.isRangeEqual(p.contentRange)?u[0]:null}catch{return null}}),p=>p!=null)}return o}};function v7(t){return t.isLine?{type:"line"}:t.isToken?{type:"token"}:t.isWord?{type:"word"}:null}function UD(t,e,r){Array.from(El(e,t));let n=Array.from(El(r,t));if(n.length<r)throw new Di;return n}var Gm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoInteriorStage=b7(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoInteriorStage.run(e).flatMap(r=>r.getInterior())}},Km=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=Iv(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoBoundaryStage.run(e).flatMap(r=>r.getBoundary())}};function b7(t){return new Cl(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getInterior()==null)}function Iv(t){return new Cl(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var ti={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},Fv={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var Qm=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},Zm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(Fv).run(e).map(r=>{let n=r.getLeadingDelimiterTarget();if(n==null)throw new Qm("leading");return n})}},Ym=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(Fv).run(e).map(r=>{let n=r.getTrailingDelimiterTarget();if(n==null)throw new Qm("trailing");return n})}};function Xm(t,e,r,n){return Dv(e,r,n),r===n?e[r]:ja(t,e[r],e[n],!0,!0)}function Jm(t,e,r){return t.create({type:"everyScope",scopeType:r}).run(e)}var eh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=Jm(this.modifierStageFactory,e,this.modifier.scopeType),n=this.modifier.start+(this.modifier.start<0?r.length:0),i=n+this.modifier.length-1;return this.modifier.isEvery?LD(r,n,i):[Xm(e.isReversed,r,n,i)]}};var th=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new po(r):new qe({...r,isToken:!1})]}},rh=class extends th{getContentRange(e){return e.start.toEmptyRange()}},nh=class extends th{getContentRange(e){return e.end.toEmptyRange()}};var ih=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,n=new qa(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:r});try{return n.run(e)}catch(a){if(!(a instanceof Rt))throw a}let i=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),o=w7(e,i);if(o==null)throw Error(`No scopes found for scope type: ${r.type}`);return o}};function w7(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=HD(r,i),a=HD(n,i),l=o.distance<a.distance?o.scope:a.scope;return l?.getTargets(t.isReversed)}function HD(t,e){let r,n=1/0;for(let i of t){let o=Math.min(VD(e,i.domain.start),VD(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function VD(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var oh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifierStageFactory.create(this.modifier.anchor),n=this.modifierStageFactory.create(this.modifier.active),i=r.run(e),o=n.run(e);if(i.length!==1||o.length!==1)throw new Error("Expected single anchor and active target");return[So(i[0],o[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var sh=class{constructor(e){this.modifier=e}run(e){return[new po({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var ah=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function BD(t,e,r){let n=Jm(t,k7(r),e.scopeType),i=R7(r.contentRange,n);return _7(e,r,n,i)}function _7(t,e,r,n){let i=t.direction==="forward",o=E7(t,e.contentRange,r,i,n),a=i?o+t.length-1:o-t.length+1,l=Math.min(o,a),p=Math.max(o,a);return[Xm(e.isReversed,r,l,p)]}function E7(t,e,r,n,i){let o=t.offset===0;if(i==null){let p=n?r.findIndex(u=>u.contentRange.start.isAfter(e.start)):$c(r,u=>u.contentRange.start.isBefore(e.start));if(p===-1)throw new Di;return o?p:n?p+t.offset-1:p-t.offset+1}let a=i.start,l=i.end;if(o){let p=l-a+1;if(p>t.length)throw new ah(t.length,p,t.scopeType.type);return n?a:l}return n?l+t.offset:a-t.offset}function R7(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function k7(t){return new Mt({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var ch=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let r=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(r==null)return BD(this.modifierStageFactory,this.modifier,e);let n=Array.from(this.modifier.offset===0?P7(r,e,this.modifier):M7(r,e,this.modifier));if(n.length<this.modifier.length)throw new Di;let{isReversed:i}=e;return this.modifier.isEvery?n.flatMap(o=>o.getTargets(i)):Um(i,n[0],n[n.length-1])}};function P7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a}=r,l=Hm(t,n,a==="forward"?i.start:i.end,a)?.domain;if(l==null)throw new Rt(r.scopeType.type);return El(o,t.generateScopes(n,a==="forward"?l.start:l.end,a,{skipAncestorScopes:!0}))}function M7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a,offset:l}=r,p=a==="forward"?i.end:i.start,u=i.isEmpty?"disallowed":"disallowedIfStrict";return vA(t.generateScopes(n,p,a,{containment:u,skipAncestorScopes:!0}),l-1,l+o-1)}var lh=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new qe({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};function WD(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function $D(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let a of o){if(n==null||(n=a(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var Cv=t=>new ce(t.row,t.column),jD=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(a,l)=>a!=null&&l.includes(a.type),o=a=>a!=null&&!i(a,n);return(a,l)=>{let p,{start:u,end:d}=l;if(i(a.parent,t))return i(a,e)?p=a.nextNamedSibling:i(a,r)?p=a.previousNamedSibling:a.type===","?p=d.isBeforeOrEqual(Cv(a.startPosition))?a.previousNamedSibling:a.nextNamedSibling:p=a,o(p)?p:null;if(i(a,t)){let m=[...a.children],g=m.find(({startPosition:w})=>Cv(w).isAfterOrEqual(d))??null;if(o(g))return g;m.reverse();let x=m.find(({endPosition:w})=>Cv(w).isBeforeOrEqual(u))??null;if(o(x))return x}return null}};function Oe(...t){let e=A7(t);return r=>{for(let n of e){let i=D7(r,n);if(i!=null)return i}return null}}function A7(t){return t.map(e=>e.split(".").map(r=>new Ov(r)))}function D7(t,e){let r=I7(t,e);!r&&e.length>1&&(r=F7(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function I7(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function F7(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let a=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=a.length===1?a[0]:null}}return r}var Ov=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Ce(t,e=Yn){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function ph(t,e=Yn){let r=WD(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function Ga(t,e=0,r=Yn){return Ce($D(e,...t),r)}function wt(...t){return Ce(Oe(...t))}function Ka(...t){return Ce(jD(...t),iD())}function Qa(...t){return Ce(Oe(...t),oD)}function Fn(t,e=[]){return Ce(Oe(...t),sD(...e))}function To(t,e=[]){return Ce(Oe(...t),aD(...e))}function dt(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function qD(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function mn(t){return Object.freeze(Object.fromEntries(bi(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,wt(...r)]:typeof r=="string"?[e,wt(r)]:[e,r]})))}function zD(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function C7(t,e){return QD(t,r=>Math.floor(r/2)*2+e)}function GD(t){return C7(Oe("map_lit"),t)}function QD(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=Ol(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let a=e(o);return a===-1?null:i[a]}}var Ol=t=>zD(t,"value"),Nv="~quoting_lit.list_lit!",ZD=Oe(Nv);function Lv(...t){return e=>{let r=ZD(e);if(r==null)return null;let n=Ol(r)[0];return t.includes(n?.text)?r:null}}function O7(...t){return Ce(Lv(...t))}var YD=Lv("defn","defmacro"),KD=ph([YD,t=>Ol(t)[1]]),XD=Lv("if","if-let","when","when-let"),N7=Ce(XD),L7={collectionKey:Ce(GD(0)),value:Ce(GD(1)),argumentOrParameter:Ce(QD(Oe(Nv),t=>t!==0?t:-1)),functionCall:Nv,functionCallee:ph([ZD,t=>Ol(t)[0]]),namedFunction:Ce(YD),functionName:KD,name:KD,anonymousFunction:dt(O7("fn"),wt("anon_fn_lit")),ifStatement:N7,condition:ph([XD,t=>Ol(t)[1]])},JD=mn(L7);var eI=["command","displayed_equation","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],U7=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],rI=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],tI=rI.map(t=>`${t}[text]`),H7=rI.map(t=>`${t}[command]`);function Uv(t,e){return{selection:new we(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new we(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function V7(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new we(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}var B7={argumentOrParameter:dt(Ga([Oe(...eI),Oe(...U7)],1,Uv),Ce(Oe("begin[name]","end[name]",...tI),Uv)),functionCall:dt(Ce(Oe(...eI,"begin","end")),Ce(Oe(...H7),V7)),name:dt(Ce(Oe(...tI),Uv),wt("begin[name][text]","end[name][text]"))},nI=mn(B7);var W7=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],$7=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],j7=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],q7=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],z7=[":","=>"];function G7(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var K7={statement:dt(wt(...W7),Ga([Oe(...j7),Oe(...$7)],1)),anonymousFunction:dt(wt("lambda","do_block"),Ce(G7)),condition:Qa("*[condition]"),argumentOrParameter:Ka("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:To(["pair[key]"],[":"]),value:Fn(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],q7.concat(z7))},iI=mn(K7);function Hv(){let t=Xn(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let a=r.childForFieldName("alternative");if(a==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new we(l.start,ev(a.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new we(ev(i.child(0).startPosition),o.end),context:{}}}}function oI(t){let e=Hv();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):Yn(r,n)}}var sI=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],Q7=["source_file","block","declaration_list"];function Z7(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function Y7(t,e){return{selection:nD(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:un(e.children[0].startPosition,e.children[1].startPosition)}}}function X7(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return sI.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var J7={statement:Ga([Oe(...Q7),Oe(...sI)],1),condition:dt(wt("while_expression[condition]","if_expression[condition]"),Ce(Oe("while_let_expression","if_let_expression"),Xn(["while","if","block"],[],{includeUnnamedChildren:!0})),Fn(["*.match_pattern![condition]"],["if"])),type:dt(Fn(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Ce(Oe("constrained_type_parameter[bounds]","where_predicate[bounds]"),Y7),Fn(["function_item[return_type]"],["->"]),Ce(Z7),wt("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:Ka("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:dt(To(["field_initializer[name]","field_pattern[name]"],[":"])),name:dt(wt("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),To(["field_initializer[name]","field_pattern[name]"],[":"])),value:dt(Fn(["let_declaration[value]"],["="]),Fn(["field_initializer[value]","field_pattern[pattern]"],[":"]),wt("meta_item[value]","const_item[value]"),Ce(X7)),attribute:To(["mutable_specifier","attribute_item"]),branch:dt(wt("match_arm"),Ce(Oe("else_clause"),oI("if_expression")),Ce(Oe("if_expression"),Hv()))},aI=mn(J7);var eQ={argumentOrParameter:Ka("arguments","parameters","class_parameters","bindings"),branch:Ce(Oe("case_clause"),Xn([],[],{includeUnnamedChildren:!0})),type:Fn(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:Fn(["*[value]","*[default_value]","type_definition[type]"],["="]),condition:Qa("*[condition]")},cI=mn(eQ);var tQ=["apply_statement","at_rule","charset_statement","debug_statement","each_statement","error_statement","for_statement","forward_statement","function_statement","if_statement","import_statement","include_statement","keyframes_statement","media_statement","mixin_statement","namespace_statement","placeholder","rule_set","supports_statement","use_statement","warn_statement","while_statement"];function pI(t){return[",","(",")"].includes(t.type)||uI(t)}function uI(t){return t.type==="plain_value"&&t.text==="at"}function lI(t){return e=>{(uI(e)||e.type===",")&&(e=e.previousSibling);let r=t(e);for(;r&&!pI(r);)e=r,r=t(r);return e}}function rQ(t,e){return e.type!=="declaration"?null:e.descendantsOfType("unit").map(r=>({node:r,selection:Yn(t.editor,r)}))}var nQ={condition:Qa("condition"),statement:dt(wt(...tQ),Ce(Oe("attribute_selector"),Xn([],["attribute_name","string_value"]))),argumentOrParameter:dt(Ce(Oe("arguments.*!","parameters.*!"),tv(t=>pI(t),", ",lI(t=>t.previousSibling),lI(t=>t.nextSibling)))),collectionKey:To(["declaration.property_name!"],[":"]),value:dt(Ce(Oe("declaration"),Xn(["property_name","variable_name"])),Ce(Oe("include_statement","namespace_statement"),Xn()),wt("return_statement.*!","import_statement.*!","attribute_selector.plain_value!","attribute_selector.string_value!","parameter.default_value!")),unit:dt(wt("integer_value.unit!"),rQ)},Vv=mn(nQ);function fI(t,e,r){let n=Nl[t];if(n==null)throw new Mu(t);let i=n[e];return i==null?qD(e):r?iQ(i):i}var Nl={clojure:JD,css:Vv,latex:nI,ruby:iI,rust:aI,scala:cI,scss:Vv};function iQ(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>oQ(i.node,Sd(e,i.selection.selection),t)),n.length>0?n:null)}}function oQ(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var uh=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=fI(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new Rt(this.modifier.scopeType.type);let i=sQ(n,r,{editor:e.editor,selection:new we(e.contentRange.start,e.contentRange.end)});if(i==null)throw new Rt(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:a,leadingDelimiterRange:l,trailingDelimiterRange:p,removalRange:u,interiorRange:d}=o.context;if(u!=null&&(l!=null||p!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:m,selection:g}=o.selection;return new uo({scopeTypeType:this.modifier.scopeType.type,editor:m,isReversed:e.isReversed,contentRange:g,removalRange:u,interiorRange:d,insertionDelimiter:a,leadingDelimiterRange:l,trailingDelimiterRange:p})})}};function sQ(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:Sd(r,o.selection),context:o.context}));n=n.parent}return null}var Za=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new rh;case"endOf":return new nh;case"extendThroughStartOf":case"extendThroughEndOf":return new zm(this,e);case"toRawSelection":return new sh(e);case"interiorOnly":return new Gm(this,e);case"excludeInterior":return new Km(this,e);case"leading":return new Zm(this,e);case"trailing":return new Ym(this,e);case"visible":return new lh(e);case"containingScope":return new qa(this,this.scopeHandlerFactory,e);case"preferredScope":return new ih(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new za(this,this.storedTargets,e):new Bm(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new za(this,this.storedTargets,e):new eh(this,e);case"relativeScope":return e.scopeType.type==="instance"?new za(this,this.storedTargets,e):new ch(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new Wm(e);case"keepEmptyFilter":return new $m(e);case"cascading":return new Nm(this,e);case"modifyIfUntyped":return new Wa(this,e);case"range":return new oh(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}getLegacyScopeStage(e){switch(e.scopeType.type){default:return new uh(this.languageDefinitions,e)}}};async function dI(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Ie({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=bi(r),a=o.map(u=>{let d=r[u],m=aQ(d);return mI(e.document,m.selections,m.behavior)});n||a.push(mI(e.document,e.selections,1));let l=await("edits"in i?pQ(t,e,i.edits,a):hI(t,i.callback,e.document,a));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((u,d)=>[u,l[d]]))}function mI(t,e,r){return e.map(n=>cQ(t,n,n instanceof we?!n.isReversed:!0,r))}function aQ(t){return"selections"in t?t:{selections:t,behavior:1}}function cQ(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function lQ(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new we(r,n):new we(n,r)))}async function hI(t,e,r,n){let i=t.registerRangeInfoList(r,et(n));return await e(),i(),lQ(n)}async function pQ(t,e,r,n){return await hI(t,async()=>{if(!await dI(t,e,r))throw new Error("Could not apply edits")},e.document,n)}function wr(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function _r(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Fi(t,e,r){return Promise.all(Bv(t,e).map(([n,i])=>r(n,i)))}async function nt(t,e){return Fi(t,r=>r.editor,e)}async function gI(t,e){let r=Bv(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function yI(t){return Bv(t,e=>e.editor)}function Bv(t,e){let n=cl(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function fh(t){return t.contentRange}function hn(t,e){return e!=null?Tt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new we(i.end,i.start):new we(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function xI(t){let e=t.contentRange;return t.isLine?an(e):vt(e)}function Ne(t,e,r,n=fh){return t.flashRanges(e.map(i=>{let o=n(i);return o==null?null:{editor:i.editor,range:i.isLine?an(o):vt(o),style:r}}).filter(i=>i!=null))}var dh=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Ne(A(),e,"pendingModification0"),{thatSelections:et(await nt(e,async(n,i)=>{let o=i.map(({contentRange:u})=>u),a=uQ(n,o),l=A().getEditableTextEditor(n),{contentRanges:p}=await Ie({rangeUpdater:this.rangeUpdater,editor:l,edits:a,selections:{contentRanges:o}});return Tt(i,p).map(([u,d])=>({editor:u.editor,selection:d.toSelection(u.isReversed)}))}))}}};function uQ(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,a=r.lineAt(o),l=a.text.slice(0,a.rangeTrimmed?.start?.character??a.range.start.character),p=a.text.slice(0,o.character).search(/\s+$/),u=p>-1?new $(new ce(a.lineNumber,p),o):o.toEmptyRange();n.push({range:u,text:`
`+l,isReplace:!u.isEmpty})}return n}function mh(t){return t.length<2?t:yI(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,a)=>o.contentRange.start.compareTo(a.contentRange.start));let i=!0;for(;i;)[n,i]=fQ(n);return n})}function fQ(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!dQ(r[r.length-1],n)?(e.push(SI(r)),r=[n]):r.push(n)}),e.push(SI(r)),[e,e.length!==t.length]}function SI(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return So(e,r)}function dQ(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Ll=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Ne(A(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Ne(A(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((a,l)=>{let p=r[l];if((a==null||p==null)&&!o)throw new Error("Targets must have same number of args");if(p!=null){let u;o?u=e.map((d,m)=>{let g=d.contentText,x=(p.isRaw?null:p.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return m>0&&x!=null?x+g:g}).join(""):u=a.contentText,i.push({edit:p.constructChangeEdit(u),editor:p.editor,originalTarget:p.target,isSource:!1})}else p=r[0];n.includes(a)||(n.push(a),this.type==="bring"&&i.push({edit:a.toDestination("to").constructChangeEdit(p.target.contentText),editor:a.editor,originalTarget:a,isSource:!0}))}),this.type==="move"&&mh(n).forEach(a=>{i.push({edit:a.constructRemovalEdit(),editor:a.editor,originalTarget:a,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return et(await Fi(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),a=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),p=a.map(({edit:x})=>x.range),u=A().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:m}=await Ie({rangeUpdater:this.rangeUpdater,editor:u,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:p,behavior:0}}}),g=[...this.getMarks(o,d),...this.getMarks(a,m)];return g.sort((x,w)=>n.findIndex(v=>v.originalTarget===x.target)-n.findIndex(v=>v.originalTarget===w.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],a=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:a.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>e.find(i=>i.target===n).selection;return Promise.all([Ne(A(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Ne(A(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function TI(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var hh=class extends Ll{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0",getSourceRangeCallback:fh};this.run=this.run.bind(this)}async run(r,n){r=TI(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:l}}},gh=class extends Ll{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:mQ};this.run=this.run.bind(this)}async run(r,n){r=TI(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:l}}},yh=class extends Ll{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0",getSourceRangeCallback:fh};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,a)=>{let l=n[a];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function mQ(t){return t.getRemovalHighlightRange()}var Ul=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){_r(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Hl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=wr(e),n=e.map(o=>new qe({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await A().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var Ya=t=>new Mt({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var Xa=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Ne(A(),e,"referenced"),r.ensureSingleEditor&&wr(e),r.ensureSingleTarget&&_r(e);let n=A().activeEditableTextEditor,i=r.setSelection?gI:nt,o=et(await i(e,(a,l)=>this.runForEditor(r,a,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=A().getEditableTextEditor(r),o=r.selections,a=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:p,targetSelections:u}=await Ie({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(p),r.document.version===a?n:u.map(d=>Ya({editor:r,selection:d}))}};var Gt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new Xa(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=A().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,a)=>hQ(o,i?a.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},xh=class extends Gt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},Sh=class extends Gt{constructor(){super(...arguments);this.command="toggleLineComment"}},Th=class extends Gt{constructor(){super(...arguments);this.command="indentLine"}},vh=class extends Gt{constructor(){super(...arguments);this.command="outdentLine"}},bh=class extends Gt{constructor(){super(...arguments);this.command="fold"}},wh=class extends Gt{constructor(){super(...arguments);this.command="unfold"}},_h=class extends Gt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},Eh=class extends Gt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},Rh=class extends Gt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},kh=class extends Gt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Ph=class extends Gt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Mh=class extends Gt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Ah=class extends Gt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Dh=class extends Gt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}};function hQ(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Ih=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(A().capabilities.commands.clipboardCopy!=null)return new xh(this.rangeUpdater).run(e,r);r.showDecorations&&await Ne(A(),e,"referenced",i=>i.contentRange);let n=e.map(i=>i.contentText).join(`
`);return await A().clipboard.writeText(n),{thatTargets:e}}};var Fh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await A().flashRanges(e.flatMap(i=>{let{editor:o,contentRange:a}=i,l=i.getRemovalHighlightRange();return i.isLine?[{editor:o,range:vt(a),style:"referenced"},{editor:o,range:an(l),style:"pendingDelete"}]:[{editor:o,range:vt(a),style:"referenced"},...gQ(a,l).map(p=>({editor:o,range:vt(p),style:"pendingDelete"}))]}));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function gQ(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,a=[];return i.isBefore(r)&&a.push(new $(i,r)),o.isAfter(n)&&a.push(new $(n,o)),a}var Vl=class{constructor(){this.run=this.run.bind(this)}async run(e){return await nt(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(a=>{let l=a.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new Wv;await A().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},Wv=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function vI(t,e,r,n){let i=r.destinations.map((w,v)=>{if(n||w.getEditNewActionType()==="edit")return{destination:w,index:v}}).filter(w=>!!w);if(i.length===0)return r;let o=i.map(w=>w.destination.constructChangeEdit("")),a=r.cursorRanges.map((w,v)=>({range:w,index:v})).filter(({range:w})=>w!=null),l=a.map(({index:w})=>w),p=a.map(({range:w})=>w),u=o.map(w=>w.range),{thatRanges:d,cursorRanges:m,editRanges:g}=await Ie({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:p,editRanges:{selections:u,behavior:0}}}),x=[...r.cursorRanges];return Tt(l,m).forEach(([w,v])=>{x[w]=v}),i.forEach((w,v)=>{let M=o[v].updateRange(g[v]);x[w.index]=M}),{destinations:r.destinations,thatRanges:d,cursorRanges:x}}async function bI({acceptsLocation:t},e,r,n){let i=n.destinations.map((m,g)=>{if(m.getEditNewActionType()==="insertLineAfter")return{destination:m,index:g}}).filter(m=>!!m);if(i.length===0)return n;let o=i.map(({destination:m})=>m.contentRange),a=n.destinations.map(({contentRange:m})=>m),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(m=>m.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:p,thatRanges:u}=await Ie({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:a,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((m,g)=>{d[m.index]=r.selections[g]}),{destinations:n.destinations.map((m,g)=>m.withTarget(m.target.withContentRange(p[g]))),thatRanges:u,cursorRanges:d}}async function wI(t,e){let r=_r(e),n=A().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:hn([r.target.thatTarget])}}var Ch=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return wI(this.actions,e);let r=A().getEditableTextEditor(wr(e)),n={destinations:e,thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=A().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await bI(i,this.rangeUpdater,r,n)),n=await vI(this.rangeUpdater,r,n,!o);let a=n.destinations.map((l,p)=>n.cursorRanges[p].toSelection(l.target.isReversed));return await r.setSelections(a,{focusEditor:!0}),{thatSelections:hn(n.destinations.map(l=>l.target),n.thatRanges)}}};var Oh=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ti)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},Nh=class extends Oh{constructor(){super(...arguments);this.insertionMode="before"}},Lh=class extends Oh{constructor(){super(...arguments);this.insertionMode="after"}};var Bl=class{constructor(e){this.callbackAction=new Xa(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:a,showDecorations:l}={}){let p=n??[];return this.callbackAction.run(e,{callback:()=>A().executeCommand(r,...p),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:a??!0,showDecorations:l??!0})}};var Uh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){_r(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),Zc(A().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},Hh=class extends Uh{find(e){return A().findInDocument(e)}},Vh=class extends Uh{find(e){return A().findInWorkspace(e)}};var Ja=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=_r(e);return await Ne(A(),e,"referenced"),await A().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:hn(e)}}};function _I(t,e){let r=[],n=0,i=null,[o,...a]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...a.map(p=>({text:p,startIndex:0}))].forEach(({text:p,startIndex:u})=>{let d=p.match(/^\s*/)?.[0]??"",m=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let g=Math.max(m,u),x=SS("	",n),w=p.slice(g);r.push(x+w)}),r}function EI(t,e){let r=vS(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var Wl=class{constructor(){this.substitutions=[]}addSubstitution(e,r=!1){let n=yQ(10);return this.substitutions.push({to:e,randomId:n,isQuoted:r}),n}makeSubstitutions(e){return this.substitutions.forEach(({to:r,randomId:n,isQuoted:i})=>{let o=i?`"${n}"`:n;e=e.split(o).join(r)}),e}};function yQ(t){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}var ec=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r){let n=_r(e),i=n.editor;if(Ne(A(),e,"referenced"),r==null&&(r=await A().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"})),r==null)return{};let o=1,a=i.document.offsetAt(n.contentRange.start),l=i.selections.filter(M=>n.contentRange.contains(M)).map((M,U)=>({offsets:{start:i.document.offsetAt(M.start)-a,end:i.document.offsetAt(M.end)-a},defaultName:`variable${U+1}`,placeholderIndex:o++})),p=new Wl,u=i.document.getText(new $(n.contentRange.start.with(void 0,0),n.contentRange.start)),d=i.document.getText(n.contentRange),m=EI(d,[...on(d,/\$|\\/g,M=>({offsets:{start:M.index,end:M.index+M[0].length},text:M[0]==="\\"?`\\${M[0]}`:`\\\\${M[0]}`})),...l.map(({offsets:M,defaultName:U,placeholderIndex:K})=>({offsets:M,text:p.addSubstitution(["\\$","${",K,":",U,"}"].join(""))}))]),g=_I(m,u),x=({placeholderIndex:M})=>{let U="$"+M,K=p.addSubstitution("{$"+o+++"}",!0);return[U,K]},w={[r]:{definitions:[{scope:{langIds:[i.document.languageId]},body:g}],description:"$"+o++,variables:l.length===0?void 0:Object.fromEntries(l.map(x))}},v=p.makeSubstitutions(JSON.stringify(w,null,2)),F=A().getEditableTextEditor(i);return A().runMode==="test"?await F.setSelections([i.document.range.toSelection(!1)]):await this.snippets.openNewSnippetFile(r),await F.insertSnippet(v),{thatSelections:e.map(({editor:M,contentSelection:U})=>({editor:M,selection:U}))}}};var $l=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var jl=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Ne(A(),e,"referenced"),n&&_r(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var ql=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(A().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(A().visibleTextEditors.map(n=>A().setHighlightRanges(r,n,[]))):await nt(e,(n,i)=>A().setHighlightRanges(r,n,i.map(xI))),{thatTargets:e}}};var Bh=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Ne(A(),e,"pendingModification0"),{thatTargets:et(await nt(e,this.runForEditor))})}hasCapability(){return this.isIndent?A().capabilities.commands.indentLine!=null:A().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new Th(this.rangeUpdater):new vh(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?xQ(e,r):SQ(e,r),{targetSelections:i}=await Ie({rangeUpdater:this.rangeUpdater,editor:A().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return Tt(r,i).map(([o,a])=>Ya({editor:e,selection:a.toSelection(o.isReversed)}))}},Wh=class extends Bh{constructor(e){super(e,!0)}},$h=class extends Bh{constructor(e){super(e,!1)}};function xQ(t,e){let{document:r}=t,n=RI(e),i=TQ(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function SQ(t,e){let{document:r}=t,n=RI(e),i=vQ(t);return n.map(o=>{let a=r.lineAt(o),l=a.text.match(i),{start:p}=a.range,u=p.translate(void 0,l?.[0].length);return{range:new $(p,u),text:""}})}function RI(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function TQ(t){if(t.options.insertSpaces){let e=kI(t);return" ".repeat(e)}return"	"}function vQ(t){if(t.options.insertSpaces){let e=kI(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function kI(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var jh=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(ti)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=et(await nt(e,this.runForEditor));return await A().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:vt(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),a=i.map(({range:g})=>g),l=A().getEditableTextEditor(e),{contentSelections:p,editRanges:u}=await Ie({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:a,behavior:0}}}),d=Tt(i,u).map(([g,x])=>g.updateRange(x)),m=e.selections[0];return p.some(g=>g.intersection(m)!=null)&&await l.revealRange(m),{sourceMark:hn(r,d),thatMark:hn(r,p)}}},qh=class extends jh{constructor(e,r){super(e,r,!0)}},zh=class extends jh{constructor(e,r){super(e,r,!1)}};var zl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ti)]}async run(e){let r=await nt(e,async(i,o)=>{let a=this.getEdits(o),l=o.map(d=>d.thatTarget.contentSelection),{contentSelections:p,editRanges:u}=await Ie({rangeUpdater:this.rangeUpdater,editor:A().getEditableTextEditor(i),edits:a,selections:{contentSelections:l,editRanges:{selections:a.map(d=>d.range),behavior:0}}});return{thatMark:p.map(d=>({editor:i,selection:d})),flashRanges:Zo(a,u).map(([d,m])=>({editor:i,range:d.isLine?d.updateRange(m):m,isLine:d.isLine}))}});return await A().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:a,isLine:l})=>({editor:o,range:l?an(a):vt(a),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},Gh=class extends zl{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[Zh(r,"before"),Zh(r,"after")])}},Kh=class extends zl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>Zh(r,"before"))}},Qh=class extends zl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>Zh(r,"after"))}};function Zh(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.isLine}}var $v=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},vo=class{constructor(){this._children=[]}appendChild(e){return e instanceof Er&&this._children[this._children.length-1]instanceof Er?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function a(l,p){for(let u of l)u.parent=p,a(u.children,u)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Jh)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Er=class t extends vo{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},Yh=class extends vo{},$r=class t extends Yh{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Xh?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},Xh=class t extends vo{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Er&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},jv=class t extends vo{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(a=>a instanceof Cn&&!!a.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof Cn){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},Cn=class t extends vo{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},bo=class t extends Yh{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Er(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function PI(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var Jh=class t extends vo{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof $r&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return PI([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof $r&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof bo&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){PI(this.children,e)}},tc=class{constructor(){this._scanner=new $v;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new Jh;for(;this._parse(i););let o=new Map,a=[],l=0;i.walk(p=>(p instanceof $r&&(l+=1,p.isFinalTabstop?o.set(0,void 0):!o.has(p.index)&&p.children.length>0?o.set(p.index,p.children):a.push(p)),!0));for(let p of a){let u=o.get(p.index);if(u){let d=new $r(p.index);d.transform=p.transform;for(let m of u)d.appendChild(m.clone());i.replace(p,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new $r(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Er(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new $r(Number(r)):new bo(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new $r(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Er("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let a=new Xh;for(;;){if(this._parseChoiceElement(a)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(a),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Er(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new bo(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Er("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new jv,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Er(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Cn(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new Cn(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new Cn(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Cn(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Cn(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let a=this._until(4);if(a)return e.appendChild(new Cn(Number(i),void 0,o,a)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Cn(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Er(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var MI=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function eg(t,e,r){let n=bQ(t)+1,i={};t.walk(o=>{if(o instanceof bo){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Er(r[o.name])]);else if(!MI[o.name]){let a;o.name in i?a=i[o.name]:(a=n++,i[o.name]=a);let l=new $r(a);o.children.forEach(p=>l.appendChild(p)),o.parent.replace(o,[l])}}else o instanceof $r&&o.index.toString()===e&&o.parent.replace(o,[new bo("TM_SELECTED_TEXT")]);return!0})}function bQ(t){let e=0;return t.walk(r=>(r instanceof $r&&(e=Math.max(e,r.index)),!0)),e}function tg(t,e,r){let n=e.map(o=>wQ(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function wQ(t,e,r){let n=e.editor.document.languageId;return r.findIndex(({scope:i})=>{if(i==null)return!0;let{langIds:o,scopeTypes:a,excludeDescendantScopeTypes:l}=i;if(o!=null&&!o.includes(n))return!1;if(a!=null){let p=a.concat(l??[]),u,d;for(let m of p)try{let g=t.create({type:"containingScope",scopeType:{type:m}}).run(e)[0];e.contentRange.isRangeEqual(g.contentRange)&&(g=t.create({type:"containingScope",scopeType:{type:m},ancestorIndex:1}).run(e)[0]),(u==null||u.contentRange.contains(g.contentRange))&&(u=g,d=m)}catch{continue}return d==null?!1:u!=null&&!(l??[]).includes(d)}return!0})}var Gl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new tc;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new Lm(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){if(e.type==="named"){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}else return e.scopeTypes??[]}getSnippetInfo(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=tg(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(a){return a==null?void 0:_Q(i,o,a)}}}else return{body:e.body,formatSubstitutions(n){return n}}}async run(e,r){let n=A().getEditableTextEditor(wr(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(u=>new Mt({editor:n,contentRange:u,isReversed:!1,hasExplicitRange:!0}))),a=this.snippetParser.parse(i);eg(a,null,o(r.substitutions));let l=a.toTextmateString(),{editorSelections:p}=await Ie({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}};function _Q(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let a=EP[o];if(a==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,a(i.split(" "))]}))}var Kl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ti)]}async run(e){return await Ne(A(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:et(await nt(e,async(n,i)=>{let{thatRanges:o}=await Ie({rangeUpdater:this.rangeUpdater,editor:A().getEditableTextEditor(n),edits:EQ(n,i),selections:{thatRanges:i.map(({contentRange:a})=>a)}});return Zo(i,o).map(([a,l])=>({editor:n,selection:l.toSelection(a.isReversed)}))}))}}};function EQ(t,e){let r=[];for(let n of e){let i=n.joinAs==="line"?kQ(n):RQ(n);r.push(...i)}return r}function RQ(t){let{editor:e,contentRange:r}=t,n=Tr(e.document.languageId).tokenMatcher,i=pn(n,e,r,"forward");return Array.from(BT(i)).map(([o,a])=>({range:new $(o.end,a.start),text:"",isReplace:!0}))}function kQ(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=ka(bA(n,i+1),a=>e.lineAt(a));return Array.from(BT(o)).map(([a,l])=>({range:new $(a.rangeTrimmed?.end??a.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var rg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=A().getEditableTextEditor(wr(e)),n=A().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Ie({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:a,editorSelections:l}=await Ie({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(a),n!=null&&!n.isActive&&await n.focus(),await A().flashRanges(l.map(p=>({editor:r,range:vt(p),style:"justAdded"}))),{thatSelections:l.map(p=>({editor:r,selection:p}))}}};var ng=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await A().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?Zo(e,n).map(([a,l])=>({destination:a,text:l})):e.map(a=>({destination:a,text:r}));return{thatSelections:et(await Fi(i,({destination:a})=>a.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:a,text:l})=>a.constructChangeEdit(l)),{editSelections:i}=await Ie({rangeUpdater:this.rangeUpdater,editor:A().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:a})=>a),behavior:0}}}),o=Zo(n,i).map(([a,l])=>a.updateRange(l).toSelection(l.isReversed));return await A().flashRanges(o.map(a=>({editor:e,range:vt(a),style:"justAdded"}))),o.map(a=>({editor:e,selection:a}))}};var ig=class{constructor(e,r){this.run=this.run.bind(this),this.runner=A().capabilities.commands.clipboardPaste!=null?new rg(e,r):new ng(e)}run(e){return this.runner.run(e)}};var Ql=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=mh(e),r&&await Ne(A(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:et(await nt(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(a=>a.constructRemovalEdit()),i=A().getEditableTextEditor(e),{editRanges:o}=await Ie({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:a})=>a)}});return Tt(r,o).map(([a,l])=>new po({editor:a.editor,isReversed:a.isReversed,contentRange:l}))}};var Zl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Ne(A(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=Tt(e,n).map(([l,p])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(p)})),o=[],a=[];return await Fi(i,l=>l.editor,async(l,p)=>{let u=p.map(({edit:g})=>g),{contentSelections:d,editRanges:m}=await Ie({rangeUpdater:this.rangeUpdater,editor:A().getEditableTextEditor(l),edits:u,selections:{contentSelections:p.map(({target:g})=>g.contentSelection),editRanges:{selections:u.map(({range:g})=>g),behavior:0}}});for(let[g,x]of Tt(p,d))o.push(g.target.withContentRange(x));for(let[g,x]of Tt(p,m))a.push({editor:l,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:a}}};var Yl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[Iv(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(a=>{let l=a.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Ne(A(),i,"pendingModification0");let o=await nt(i,async(a,l)=>{let p=l.map((m,g)=>({editor:a,range:m.contentRange,text:g%2===0?r:n})),{sourceRanges:u,thatRanges:d}=await Ie({rangeUpdater:this.rangeUpdater,editor:A().getEditableTextEditor(a),edits:p,selections:{sourceRanges:e.map(m=>m.thatTarget.contentRange),thatRanges:e.map(m=>m.contentRange)}});return{sourceMark:hn(e,u),thatMark:hn(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:a})=>a),thatSelections:o.flatMap(({thatMark:a})=>a)}}};var Xl=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=cl(e,a=>a.editor),n=Array.from(r,([a,l])=>({lineNumber:PQ(l,this.at),editor:a})),i=A().activeEditableTextEditor;for(let a of n)await A().getEditableTextEditor(a.editor).revealLine(a.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(a=>{let l=a.editor.visibleRanges,p=l[0].start.line,u=l[l.length-1].end.line;return a.contentRange.start.line>p||a.contentRange.end.line<u||a.contentRange.start.line===p&&a.contentRange.end.line===u});return await A().flashRanges(o.map(a=>({editor:a.editor,range:an(a.contentRange),style:"referenced"}))),{thatTargets:e}}},og=class extends Xl{constructor(){super("top")}},sg=class extends Xl{constructor(){super("center")}},ag=class extends Xl{constructor(){super("bottom")}};function PQ(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var wo=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=wr(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n;return await A().getEditableTextEditor(r).setSelections(i,{focusEditor:!0}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new we(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new we(r.contentRange.end,r.contentRange.end))}}},cg=class extends wo{constructor(){super("set","content")}},lg=class extends wo{constructor(){super("set","before")}},pg=class extends wo{constructor(){super("set","after")}},ug=class extends wo{constructor(){super("add","content")}},fg=class extends wo{constructor(){super("add","before")}},dg=class extends wo{constructor(){super("add","after")}};var Jl=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var ep=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Ne(A(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,a=this.treeSitter.getTree(i.document);r.push(MQ(i.document,a,o))}return A().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function MQ(t,e,r){let n=[],i=[];return AI(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function AI(t,e,r,n,i){for(;;){let o=new $(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let a="  ".repeat(i),l=AQ(n),p=a+l;if(n.nodeIsNamed)t.push(`${p}${n.nodeType} [${o}]`),e.push(`${p}(${n.nodeType}`),n.gotoFirstChild()?(AI(t,e,r,n,i+1),n.gotoParent(),e.push(`${a})`)):e[e.length-1]+=")";else{let u=`"${n.nodeType}"`;t.push(`${p}${u} [${o}]`),e.push(`${p}${u}`)}}if(!n.gotoNextSibling())return}}function AQ(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var tp=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&Zc(A().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((a,l)=>a.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(a=>a.toDestination("to")),i);return{thatSelections:o}}},mg=class extends tp{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},hg=class extends tp{sortTexts(e){return e.reverse()}},gg=class extends tp{sortTexts(e){return TS(e)}};var rp=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(ti)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Ne(A(),r,"referenced"),await nt(e,async(n,i)=>{let o=i.map(a=>{let l=a.contentRange;return a.isLine?{type:"line",startLine:l.start.line,endLine:l.end.line}:{type:"inline",range:l}});await A().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var np=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await nt(e,async(o,a)=>{let l=a.map(v=>({start:new we(v.contentRange.start,v.contentRange.start),end:new we(v.contentRange.end,v.contentRange.end)})),p=l.flatMap(({start:v,end:F})=>[{text:r,range:v},{text:n,range:F,isReplace:!0}]),u=a.map(v=>v.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:m,sourceSelections:g,thatSelections:x}=await Ie({rangeUpdater:this.rangeUpdater,editor:A().getEditableTextEditor(o),edits:p,selections:{boundariesStartSelections:{selections:l.map(({start:v})=>v),behavior:2},boundariesEndSelections:{selections:l.map(({end:v})=>v),behavior:3},sourceSelections:{selections:u,behavior:1},thatSelections:{selections:u,behavior:0}}}),w=[...d,...m];return await A().flashRanges(w.map(v=>({editor:o,range:vt(v),style:"justAdded"}))),{sourceMark:g.map(v=>({editor:o,selection:v})),thatMark:x.map(v=>({editor:o,selection:v}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var ip=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new tc;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new Wa(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){if(e.type==="named"){let{name:r,variableName:n}=e,a=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return a==null?void 0:{type:a}}else return e.scopeType}getBody(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return tg(this.modifierStageFactory,r,i.definitions).body.join(`
`)}else return e.body}async run(e,r){let n=A().getEditableTextEditor(wr(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);eg(o,r.variableName);let a=o.toTextmateString();await Ne(A(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),p=()=>n.insertSnippet(a,l),{targetSelections:u}=await Ie({rangeUpdater:this.rangeUpdater,editor:n,callback:p,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(d=>({editor:n,selection:d}))}}};var DQ=/-?\d+(\.\d+)?/g,yg=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Fi(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let p=n.offsetAt(l.contentRange.start),u=l.contentText,d=Qc(u,DQ);for(let m of d)i.push(IQ(e,p,m)),o.push(FQ(this.isIncrement,m.text))}let{thatSelections:a}=await this.actions.replace.run(i,o);return a}},xg=class extends yg{constructor(e){super(e,!0)}},Sg=class extends yg{constructor(e){super(e,!1)}};function IQ(t,e,r){return new qe({editor:t,isReversed:!1,contentRange:new $(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function FQ(t,e){return e.includes(".")?OQ(t,e).toString():CQ(t,e).toString()}function CQ(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function OQ(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var Tg=class{constructor(e,r,n,i){this.treeSitter=e;this.snippets=r;this.rangeUpdater=n;this.modifierStageFactory=i;this.addSelection=new ug;this.addSelectionBefore=new fg;this.addSelectionAfter=new dg;this.callAsFunction=new Ul(this);this.clearAndSetSelection=new Hl(this);this.copyToClipboard=new Ih(this,this.rangeUpdater);this.cutToClipboard=new Fh(this);this.decrement=new Sg(this);this.deselect=new Vl;this.editNew=new Ch(this.rangeUpdater,this);this.editNewLineAfter=new Lh(this,this.modifierStageFactory);this.editNewLineBefore=new Nh(this,this.modifierStageFactory);this.executeCommand=new Bl(this.rangeUpdater);this.extractVariable=new Dh(this.rangeUpdater);this.findInDocument=new Hh(this);this.findInWorkspace=new Vh(this);this.foldRegion=new bh(this.rangeUpdater);this.followLink=new Ja({openAside:!1});this.followLinkAside=new Ja({openAside:!0});this.generateSnippet=new ec(this.snippets);this.getText=new jl;this.highlight=new ql;this.increment=new xg(this);this.indentLine=new Wh(this.rangeUpdater);this.insertCopyAfter=new zh(this.rangeUpdater,this.modifierStageFactory);this.insertCopyBefore=new qh(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineAfter=new Qh(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineBefore=new Kh(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLinesAround=new Gh(this.rangeUpdater,this.modifierStageFactory);this.insertSnippet=new Gl(this.rangeUpdater,this.snippets,this,this.modifierStageFactory);this.joinLines=new Kl(this.rangeUpdater,this.modifierStageFactory);this.breakLine=new dh(this.rangeUpdater);this.moveToTarget=new gh(this.rangeUpdater);this.outdentLine=new $h(this.rangeUpdater);this.pasteFromClipboard=new ig(this.rangeUpdater,this);this.randomizeTargets=new gg(this);this.remove=new Ql(this.rangeUpdater);this.rename=new _h(this.rangeUpdater);this.replace=new Zl(this.rangeUpdater);this.replaceWithTarget=new hh(this.rangeUpdater);this.revealDefinition=new kh(this.rangeUpdater);this.revealTypeDefinition=new Ph(this.rangeUpdater);this.reverseTargets=new hg(this);this.rewrapWithPairedDelimiter=new Yl(this.rangeUpdater,this.modifierStageFactory);this.scrollToBottom=new ag;this.scrollToCenter=new sg;this.scrollToTop=new og;this["private.setKeyboardTarget"]=new Jl("keyboard");this["experimental.setInstanceReference"]=new Jl("instanceReference");this.setSelection=new cg;this.setSelectionAfter=new pg;this.setSelectionBefore=new lg;this.showDebugHover=new Ah(this.rangeUpdater);this.showHover=new Mh(this.rangeUpdater);this.showQuickFix=new Rh(this.rangeUpdater);this.showReferences=new Eh(this.rangeUpdater);this.sortTargets=new mg(this);this.swapTargets=new yh(this.rangeUpdater);this.toggleLineBreakpoint=new rp(this.modifierStageFactory);this.toggleLineComment=new Sh(this.rangeUpdater);this.unfoldRegion=new wh(this.rangeUpdater);this.wrapWithPairedDelimiter=new np(this.rangeUpdater);this.wrapWithSnippet=new ip(this.rangeUpdater,this.snippets,this.modifierStageFactory);this["private.showParseTree"]=new ep(this.treeSitter);this["private.getTargets"]=new $l}};async function DI(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return vg(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:bg(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return vg(i.destination)?{action:"insert",modifiers:bg(i.destination),text:await qv(e,i.source)}:null;case"moveToTarget":if(vg(i.destination)){let o=await qv(e,i.source);return await NQ(e,i.source),{action:"insert",modifiers:bg(i.destination),text:o}}return null;case"callAsFunction":return wg(i.argument)?{action:i.name,modifiers:_g(i.argument),callee:await qv(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return wg(i.target)?{action:i.name,modifiers:_g(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return vg(i.destination)?{action:i.name,modifiers:bg(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return wg(i.target)?{action:i.name,modifiers:_g(i.target)}:null}}function vg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&wg(t.target):!1}function wg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function bg(t){return t.type==="primitive"?_g(t.target):[]}function _g(t){if(t.type==="primitive"){if(t.modifiers!=null&&t.modifiers.length>0)return t.modifiers;if(t.mark?.type==="cursor")return[{type:"containingTokenIfEmpty"}]}return[]}async function qv(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function NQ(t,e){await t({name:"remove",target:e})}function II(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((a,l)=>[a,l]);for(let[a,l]of o.reverse())for(let p of LQ){let u=p.accept(a);if(u.accepted){let[d,m]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],g={...t,anchor:m.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:m},active:Lf(i,x=>{x.modifiers=x.modifiers.slice($c(x.modifiers,w=>p.accept(w).accepted)+1)})};return g=u.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:d}}}return t}var LQ=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function Gv(t,e){switch(t.type){case"list":return UQ(t,e);case"range":return FI(t,e);case"primitive":return Eg(t,e);case"implicit":return t}}function UQ(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return FI(r,i);case"primitive":return Eg(r,i)}})}}function FI(t,e){let r=HQ(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return II(r,n)}function HQ(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:Eg(t.anchor,e),active:Eg(t.active,e.concat(t.anchor))}}function Eg(t,e){let r=zv(t.mark??(VQ(t)?$Q(e):null)??{type:"cursor"}),n=CI(t)??jQ(e)??qQ(e)??[];return{type:t.type,mark:r,modifiers:n}}function VQ(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function CI(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function BQ(t){if(WQ(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function WQ(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function $Q(t){return op(t,e=>e.mark)}function jQ(t){return op(t,CI)}function qQ(t){return op(t,BQ)}function op(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=op([n.anchor],e);if(i!=null)return i;break}case"list":{let i=op(n.elements,e);if(i!=null)return i;break}}}}function zv(t){switch(t.type){case"range":return{...t,anchor:zv(t.anchor),active:zv(t.active)};case"target":return{type:"target",target:Gv(t.target,[])};default:return t}}var Rg=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new Kv(this.debug)}async run(e){if(Qo(e)){let u=await DI(this.commandServerApi,this.runAction,e);if(u!=null)return{fallback:u}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:a,instanceReferenceTargets:l,keyboardTargets:p}=await this.runAction(e.action);return this.storedTargets.set("that",OI(i,n)),this.storedTargets.set("source",OI(a,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",p,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(pd(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},Kv=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=Gv(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function OI(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(Ya):t}var kg=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Mt({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var Pg=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=A().visibleTextEditors.find(a=>a.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new $(r.line,r.character,n.line,n.character);return[new Mt({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var Mg=class{constructor(e){this.mark=e}run(){let e=A().activeTextEditor;if(e==null)return[];let r=zQ(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[WT(e,!1,n)]}},zQ=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,a=Math.floor(i/100)*100,l=[],p=[],u=a+r;for(;u<=o;)u>=i&&(t.visibleRanges.find(m=>u>=m.start.line&&u<=m.end.line)?l.push(u):p.push(u)),u+=100;if(l.length===1)return l[0];if(l.length+p.length>1)throw new Error("Multiple lines matching");if(p.length===1)return p[0];throw new Error("Line is not in viewport")}}};var Ag=class{constructor(e){this.mark=e}run(){return[]}};var Dg=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[So(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var Ig=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var Fg=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var Cg=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new _a;case"that":case"source":case"keyboard":return new Ig(this.storedTargets,e.type);case"decoratedSymbol":return new kg(this.readableHatMap,e);case"lineNumber":return new Mg(e);case"range":return new Dg(this,e);case"nothing":return new Ag(e);case"target":return new Fg(this.targetPipelineRunner,e);case"explicit":return new Pg(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function NI(t,e,r,n,i,o,a,l,p,u){r.active&&(r.log("command:"),r.log(JSON.stringify(u,null,2)));let d=_T(u),m=await n.getReadableMap(d.usePrePhraseSnapshot),g=KQ(t,e,a,r,o,m,i,l);for(let w of p)g=w.wrapCommandRunner(m,g);let x=await g.run(d);return await GQ(u,x)}async function GQ(t,e){if(Qo(t))return e;if("returnValue"in e)return e.returnValue}function KQ(t,e,r,n,i,o,a,l){let p=new Za(r,i,new Ia(r)),u=new Cg(o,i),d=new qm(p,u);return u.setPipelineRunner(d),new Rg(e,n,i,d,new Tg(t,a,l,p))}var LI=["clojure","css","latex","ruby","rust","scala","scss"];async function UI(t,e){await QQ(t,e)}async function QQ(t,e){let r=[];for(let n of LI)await t.loadLanguage(n),await e.loadLanguage(n),bi(Nl[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function HI(t){return TP(t)?sl(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${sl(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var Og=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{tr(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...Ko.filter(r=>r!=="instance").map(r=>({type:r})),...Pf.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:HI(e),isLanguageSpecific:ZQ(e)}}dispose(){this.disposable.dispose()}};function ZQ(t){switch(t.type){case"string":case"argumentOrParameter":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function Qv(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((a,l)=>a.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=af(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=af(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function bs(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.isLine?an(t.getRemovalHighlightRange()):vt(t.getRemovalHighlightRange()),leadingDelimiter:VI(t.getLeadingDelimiterTarget()),trailingDelimiter:VI(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(bs),boundary:t.getBoundary()?.map(bs),insertionDelimiter:t.insertionDelimiter}}function VI(t){return t!=null?bs(t):void 0}function BI(t,e,r,n,i){return ka(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),o=>({domain:o.domain,ranges:o.getTargets(!1).map(a=>({range:a.contentRange,targets:i?YQ(r,a).map(bs):void 0}))}))}function YQ(t,e){try{return t.run(e)}catch(r){if(r.name==="NoContainingScopeError")return[];throw r}}function WI(t,e,r){return ka(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(bs)}))}var Ng=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:WI(e,i,Qv(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,a=this.scopeHandlerFactory.maybeCreate(r,o);if(a==null)return[];let l=this.scopeHandlerFactory.maybeCreate(a.iterationScopeType,o);return l==null?[]:BI(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),Qv(e,a,n),i)}};var Lg=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Kn(A().configuration,()=>this.onChange());this.disposables.push(A().onDidChangeVisibleTextEditors(n.run),A().onDidOpenTextDocument(n.run),A().onDidCloseTextDocument(n.run),A().onDidChangeTextDocument(n.run),A().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{A().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(a){if(ot(A().messages,"ScopeRangeWatcher.provide",a.message),o=[],A().runMode==="test")throw a}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{tr(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{A().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{tr(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var Ug=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?jI(n,r):$I(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return jI(n,r);let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?3:$I(e,o)?0:1}};function $I(t,e){return!wP(e.generateScopes(t,new ce(0,0),"forward"))}function jI(t,e){switch(e.type){case"notebookCell":return 3;default:return Nl[t]?.[e.type]!=null?2:3}}var Hg=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Kn(A().configuration,()=>this.onChange());this.disposable=bP(A().onDidOpenTextDocument(i.run),A().onDidCloseTextDocument(i.run),A().onDidChangeActiveTextEditor(i.run),A().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{tr(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=A().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function qI({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new jd,commandServerApi:i=new Hd,talonSpokenForms:o=new $d,snippets:a=new Wd}){hd(t);let l=new Id(t),p=new Ud,u=new yd,d=new Dd(t,u),m=new Gd(o),g=e!=null?new Nd(p,l,e,i):new Vd;g.allocateHats();let x=r?await Om.create(t,n,r):new Bd;t.disposeOnExit(p,x,g,l,d);let w=[],v,F=M=>(v=M,NI(n,i,l,g,a,u,x,p,w,M));return{commandApi:{runCommand(M){return F(M)},runCommandSafe(...M){return F(Mf(M))},repeatPreviousCommand(){if(v==null)throw new Error("No previous command");return F(v)}},scopeProvider:JQ(x,u,m),customSpokenFormGenerator:m,storedTargets:u,hatTokenMap:g,injectIde:hd,runIntegrationTests:()=>UI(n,x),addCommandRunnerDecorator:M=>{w.push(M)}}}function JQ(t,e,r){let n=new Ia(t),i=new Ng(n,new Za(t,e,n)),o=new Lg(t,i),a=new Ug(n),l=new Og(r),p=new Hg(t,a,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:a.getScopeSupport,getIterationScopeSupport:a.getIterationScopeSupport,onDidChangeScopeSupport:p.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function zI(t,e){switch(e.type){case"UntypedTarget":return new Mt({editor:t,isReversed:e.isReversed,contentRange:Sf(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new Hr({editor:t,isReversed:e.isReversed,contentRange:Sf(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var oNe=Symbol("unused");var sp=class{constructor(e){this.position=e}},sNe={$0:new sp(0),$1:new sp(1),$2:new sp(2)};var GI=require("node:events"),Vg=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new GI.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function jr(){return global._neovimRegistry==null&&(global._neovimRegistry=new Vg),global._neovimRegistry}var KI="pokey.cursorless";async function Bg(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,a,l]=await e.executeLua(r,[]),p;return l===!0?p=[new we(new ce(o-1,a-1),new ce(n-1,i-1))]:p=[new we(new ce(n-1,i-1),new ce(o-1,a-1))],console.debug(`bufferGetSelections(): selections=(${p[0].start.line}, ${p[0].start.character}), (${p[0].end.line}, ${p[0].end.character}) neovim=(${n},${i}),(${o},${a}),reverse=${l}`),p}async function QI(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function ZI(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),a=new $(new ce(i-1,0),new ce(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${a.start.line}, ${a.start.character}), (${a.end.line}, ${a.end.character})`),[a]}async function YI(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function Wg(t,e){await e.callFunction("setreg",["*",t])}async function XI(t){return await t.callFunction("getreg",["*"])}async function JI(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function eF(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function tF(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function rF(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var eZ={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0},$g=class{constructor(){this.commands=eZ}};var ap=class{constructor(e){this.client=e}async readText(){return await XI(this.client)}async writeText(e){return await Wg(e,this.client)}};var jg=fr(Zv(),1);var lp=class{constructor(){this.notifier=new Bt;this.mocks={...df};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(tZ(n,r))return(0,jg.get)(i,e)??(0,jg.get)(this.mocks,e)}return(0,jg.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function tZ(t,e){return t.languageId===e.languageId}async function Yv(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);n.sort((a,l)=>(nF(a)||iF(a))&&(nF(l)||iF(l))?1:a.range.start.line===l.range.start.line?l.range.start.character-a.range.start.character:l.range.start.line-a.range.start.line),console.debug("neovimEdit() [sorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let a of n)o.push({range:a.range,rangeOffset:i.offsetAt(a.range.start),rangeLength:i.offsetAt(a.range.end)-i.offsetAt(a.range.start),text:a.text});jr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let a of n){let{range:l,text:p,isReplace:u}=a;p===""?await oF(t,l):l.isEmpty&&!u?await sF(t,l.start,p):await rZ(t,l,p)}return await e.updateTextEditor(),!0}async function oF(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(a+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([a,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function sF(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=a+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let p=a+n[0],u=n[n.length-1]+l;await i.setLines([p,...n.slice(1,n.length-1),u],{start:e.line,end:e.line+1,strictIndexing:!0})}async function rZ(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await oF(t,e),await sF(t,e.start,r)}function nF(t){return t.range.isEmpty&&!t.isReplace}function iF(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function aF(t){return jr().onEvent("onDidChangeTextDocument",t),lF()}function cF(t,e,r){return jr().onEvent("onDidOpenTextDocument",t),lF()}function lF(){return{dispose(){}}}var pp=class{constructor(){this.data={...mf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var dC=fr(Zv(),1);var up=class{async showMessage(e,r,n,...i){}};async function pF(t,e){let r=e.activeTextEditor,n=await t.window,i=await Bg(n,t),o=r.document.getText(i[0]);await Wg(o,t)}async function uF(t,e){await JI(t)}var qg=class{constructor(e,r,n,i,o,a,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=a}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await QI(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await Yv(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await pF(this.client,this.neovimIDE)}async clipboardPaste(){await uF(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}};var xw=fr(require("path"),1);var fF;(()=>{"use strict";var t={470:i=>{function o(p){if(typeof p!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(p))}function a(p,u){for(var d,m="",g=0,x=-1,w=0,v=0;v<=p.length;++v){if(v<p.length)d=p.charCodeAt(v);else{if(d===47)break;d=47}if(d===47){if(!(x===v-1||w===1))if(x!==v-1&&w===2){if(m.length<2||g!==2||m.charCodeAt(m.length-1)!==46||m.charCodeAt(m.length-2)!==46){if(m.length>2){var F=m.lastIndexOf("/");if(F!==m.length-1){F===-1?(m="",g=0):g=(m=m.slice(0,F)).length-1-m.lastIndexOf("/"),x=v,w=0;continue}}else if(m.length===2||m.length===1){m="",g=0,x=v,w=0;continue}}u&&(m.length>0?m+="/..":m="..",g=2)}else m.length>0?m+="/"+p.slice(x+1,v):m=p.slice(x+1,v),g=v-x-1;x=v,w=0}else d===46&&w!==-1?++w:w=-1}return m}var l={resolve:function(){for(var p,u="",d=!1,m=arguments.length-1;m>=-1&&!d;m--){var g;m>=0?g=arguments[m]:(p===void 0&&(p=process.cwd()),g=p),o(g),g.length!==0&&(u=g+"/"+u,d=g.charCodeAt(0)===47)}return u=a(u,!d),d?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(p){if(o(p),p.length===0)return".";var u=p.charCodeAt(0)===47,d=p.charCodeAt(p.length-1)===47;return(p=a(p,!u)).length!==0||u||(p="."),p.length>0&&d&&(p+="/"),u?"/"+p:p},isAbsolute:function(p){return o(p),p.length>0&&p.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var p,u=0;u<arguments.length;++u){var d=arguments[u];o(d),d.length>0&&(p===void 0?p=d:p+="/"+d)}return p===void 0?".":l.normalize(p)},relative:function(p,u){if(o(p),o(u),p===u||(p=l.resolve(p))===(u=l.resolve(u)))return"";for(var d=1;d<p.length&&p.charCodeAt(d)===47;++d);for(var m=p.length,g=m-d,x=1;x<u.length&&u.charCodeAt(x)===47;++x);for(var w=u.length-x,v=g<w?g:w,F=-1,M=0;M<=v;++M){if(M===v){if(w>v){if(u.charCodeAt(x+M)===47)return u.slice(x+M+1);if(M===0)return u.slice(x+M)}else g>v&&(p.charCodeAt(d+M)===47?F=M:M===0&&(F=0));break}var U=p.charCodeAt(d+M);if(U!==u.charCodeAt(x+M))break;U===47&&(F=M)}var K="";for(M=d+F+1;M<=m;++M)M!==m&&p.charCodeAt(M)!==47||(K.length===0?K+="..":K+="/..");return K.length>0?K+u.slice(x+F):(x+=F,u.charCodeAt(x)===47&&++x,u.slice(x))},_makeLong:function(p){return p},dirname:function(p){if(o(p),p.length===0)return".";for(var u=p.charCodeAt(0),d=u===47,m=-1,g=!0,x=p.length-1;x>=1;--x)if((u=p.charCodeAt(x))===47){if(!g){m=x;break}}else g=!1;return m===-1?d?"/":".":d&&m===1?"//":p.slice(0,m)},basename:function(p,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');o(p);var d,m=0,g=-1,x=!0;if(u!==void 0&&u.length>0&&u.length<=p.length){if(u.length===p.length&&u===p)return"";var w=u.length-1,v=-1;for(d=p.length-1;d>=0;--d){var F=p.charCodeAt(d);if(F===47){if(!x){m=d+1;break}}else v===-1&&(x=!1,v=d+1),w>=0&&(F===u.charCodeAt(w)?--w==-1&&(g=d):(w=-1,g=v))}return m===g?g=v:g===-1&&(g=p.length),p.slice(m,g)}for(d=p.length-1;d>=0;--d)if(p.charCodeAt(d)===47){if(!x){m=d+1;break}}else g===-1&&(x=!1,g=d+1);return g===-1?"":p.slice(m,g)},extname:function(p){o(p);for(var u=-1,d=0,m=-1,g=!0,x=0,w=p.length-1;w>=0;--w){var v=p.charCodeAt(w);if(v!==47)m===-1&&(g=!1,m=w+1),v===46?u===-1?u=w:x!==1&&(x=1):u!==-1&&(x=-1);else if(!g){d=w+1;break}}return u===-1||m===-1||x===0||x===1&&u===m-1&&u===d+1?"":p.slice(u,m)},format:function(p){if(p===null||typeof p!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof p);return function(u,d){var m=d.dir||d.root,g=d.base||(d.name||"")+(d.ext||"");return m?m===d.root?m+g:m+"/"+g:g}(0,p)},parse:function(p){o(p);var u={root:"",dir:"",base:"",ext:"",name:""};if(p.length===0)return u;var d,m=p.charCodeAt(0),g=m===47;g?(u.root="/",d=1):d=0;for(var x=-1,w=0,v=-1,F=!0,M=p.length-1,U=0;M>=d;--M)if((m=p.charCodeAt(M))!==47)v===-1&&(F=!1,v=M+1),m===46?x===-1?x=M:U!==1&&(U=1):x!==-1&&(U=-1);else if(!F){w=M+1;break}return x===-1||v===-1||U===0||U===1&&x===v-1&&x===w+1?v!==-1&&(u.base=u.name=w===0&&g?p.slice(1,v):p.slice(w,v)):(w===0&&g?(u.name=p.slice(1,x),u.base=p.slice(1,v)):(u.name=p.slice(w,x),u.base=p.slice(w,v)),u.ext=p.slice(x,v)),w>0?u.dir=p.slice(0,w-1):g&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,r),a.exports}r.d=(i,o)=>{for(var a in o)r.o(o,a)&&!r.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:o[a]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>N}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,l=/^\/\//;function p(O,I){if(!O.scheme&&I)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${O.authority}", path: "${O.path}", query: "${O.query}", fragment: "${O.fragment}"}`);if(O.scheme&&!o.test(O.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(O.path){if(O.authority){if(!a.test(O.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(O.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let u="",d="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(I){return I instanceof g||!!I&&typeof I.authority=="string"&&typeof I.fragment=="string"&&typeof I.path=="string"&&typeof I.query=="string"&&typeof I.scheme=="string"&&typeof I.fsPath=="string"&&typeof I.with=="function"&&typeof I.toString=="function"}scheme;authority;path;query;fragment;constructor(I,W,q,Q,Z,te=!1){typeof I=="object"?(this.scheme=I.scheme||u,this.authority=I.authority||u,this.path=I.path||u,this.query=I.query||u,this.fragment=I.fragment||u):(this.scheme=function(me,re){return me||re?me:"file"}(I,te),this.authority=W||u,this.path=function(me,re){switch(me){case"https":case"http":case"file":re?re[0]!==d&&(re=d+re):re=d}return re}(this.scheme,q||u),this.query=Q||u,this.fragment=Z||u,p(this,te))}get fsPath(){return U(this,!1)}with(I){if(!I)return this;let{scheme:W,authority:q,path:Q,query:Z,fragment:te}=I;return W===void 0?W=this.scheme:W===null&&(W=u),q===void 0?q=this.authority:q===null&&(q=u),Q===void 0?Q=this.path:Q===null&&(Q=u),Z===void 0?Z=this.query:Z===null&&(Z=u),te===void 0?te=this.fragment:te===null&&(te=u),W===this.scheme&&q===this.authority&&Q===this.path&&Z===this.query&&te===this.fragment?this:new w(W,q,Q,Z,te)}static parse(I,W=!1){let q=m.exec(I);return q?new w(q[2]||u,de(q[4]||u),de(q[5]||u),de(q[7]||u),de(q[9]||u),W):new w(u,u,u,u,u)}static file(I){let W=u;if(i&&(I=I.replace(/\\/g,d)),I[0]===d&&I[1]===d){let q=I.indexOf(d,2);q===-1?(W=I.substring(2),I=d):(W=I.substring(2,q),I=I.substring(q)||d)}return new w("file",W,I,u,u)}static from(I){let W=new w(I.scheme,I.authority,I.path,I.query,I.fragment);return p(W,!0),W}toString(I=!1){return K(this,I)}toJSON(){return this}static revive(I){if(I){if(I instanceof g)return I;{let W=new w(I);return W._formatted=I.external,W._fsPath=I._sep===x?I.fsPath:null,W}}return I}}let x=i?1:void 0;class w extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=U(this,!1)),this._fsPath}toString(I=!1){return I?K(this,!0):(this._formatted||(this._formatted=K(this,!1)),this._formatted)}toJSON(){let I={$mid:1};return this._fsPath&&(I.fsPath=this._fsPath,I._sep=x),this._formatted&&(I.external=this._formatted),this.path&&(I.path=this.path),this.scheme&&(I.scheme=this.scheme),this.authority&&(I.authority=this.authority),this.query&&(I.query=this.query),this.fragment&&(I.fragment=this.fragment),I}}let v={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function F(O,I,W){let q,Q=-1;for(let Z=0;Z<O.length;Z++){let te=O.charCodeAt(Z);if(te>=97&&te<=122||te>=65&&te<=90||te>=48&&te<=57||te===45||te===46||te===95||te===126||I&&te===47||W&&te===91||W&&te===93||W&&te===58)Q!==-1&&(q+=encodeURIComponent(O.substring(Q,Z)),Q=-1),q!==void 0&&(q+=O.charAt(Z));else{q===void 0&&(q=O.substr(0,Z));let me=v[te];me!==void 0?(Q!==-1&&(q+=encodeURIComponent(O.substring(Q,Z)),Q=-1),q+=me):Q===-1&&(Q=Z)}}return Q!==-1&&(q+=encodeURIComponent(O.substring(Q))),q!==void 0?q:O}function M(O){let I;for(let W=0;W<O.length;W++){let q=O.charCodeAt(W);q===35||q===63?(I===void 0&&(I=O.substr(0,W)),I+=v[q]):I!==void 0&&(I+=O[W])}return I!==void 0?I:O}function U(O,I){let W;return W=O.authority&&O.path.length>1&&O.scheme==="file"?`//${O.authority}${O.path}`:O.path.charCodeAt(0)===47&&(O.path.charCodeAt(1)>=65&&O.path.charCodeAt(1)<=90||O.path.charCodeAt(1)>=97&&O.path.charCodeAt(1)<=122)&&O.path.charCodeAt(2)===58?I?O.path.substr(1):O.path[1].toLowerCase()+O.path.substr(2):O.path,i&&(W=W.replace(/\//g,"\\")),W}function K(O,I){let W=I?M:F,q="",{scheme:Q,authority:Z,path:te,query:me,fragment:re}=O;if(Q&&(q+=Q,q+=":"),(Z||Q==="file")&&(q+=d,q+=d),Z){let Re=Z.indexOf("@");if(Re!==-1){let sr=Z.substr(0,Re);Z=Z.substr(Re+1),Re=sr.lastIndexOf(":"),Re===-1?q+=W(sr,!1,!1):(q+=W(sr.substr(0,Re),!1,!1),q+=":",q+=W(sr.substr(Re+1),!1,!0)),q+="@"}Z=Z.toLowerCase(),Re=Z.lastIndexOf(":"),Re===-1?q+=W(Z,!1,!0):(q+=W(Z.substr(0,Re),!1,!0),q+=Z.substr(Re))}if(te){if(te.length>=3&&te.charCodeAt(0)===47&&te.charCodeAt(2)===58){let Re=te.charCodeAt(1);Re>=65&&Re<=90&&(te=`/${String.fromCharCode(Re+32)}:${te.substr(3)}`)}else if(te.length>=2&&te.charCodeAt(1)===58){let Re=te.charCodeAt(0);Re>=65&&Re<=90&&(te=`${String.fromCharCode(Re+32)}:${te.substr(2)}`)}q+=W(te,!0,!1)}return me&&(q+="?",q+=W(me,!1,!1)),re&&(q+="#",q+=I?re:F(re,!1,!1)),q}function ne(O){try{return decodeURIComponent(O)}catch{return O.length>3?O.substr(0,3)+ne(O.substr(3)):O}}let ge=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function de(O){return O.match(ge)?O.replace(ge,I=>ne(I)):O}var gt=r(470);let Ft=gt.posix||gt,st="/";var N;(function(O){O.joinPath=function(I,...W){return I.with({path:Ft.join(I.path,...W)})},O.resolvePath=function(I,...W){let q=I.path,Q=!1;q[0]!==st&&(q=st+q,Q=!0);let Z=Ft.resolve(q,...W);return Q&&Z[0]===st&&!I.authority&&(Z=Z.substring(1)),I.with({path:Z})},O.dirname=function(I){if(I.path.length===0||I.path===st)return I;let W=Ft.dirname(I.path);return W.length===1&&W.charCodeAt(0)===46&&(W=""),I.with({path:W})},O.basename=function(I){return Ft.basename(I.path)},O.extname=function(I){return Ft.extname(I.path)}})(N||(N={}))})(),fF=n})();var{URI:dF,Utils:oLe}=fF;var CF=fr(RF(),1);var dp=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var pZ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},mp=t=>t.replace(/[[\]\\-]/g,"\\$&"),uZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),kF=t=>t.join(""),PF=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,l=!1,p=!1,u=!1,d=r,m="";e:for(;o<t.length;){let v=t.charAt(o);if((v==="!"||v==="^")&&o===r+1){u=!0,o++;continue}if(v==="]"&&a&&!p){d=o+1;break}if(a=!0,v==="\\"&&!p){p=!0,o++;continue}if(v==="["&&!p){for(let[F,[M,U,K]]of Object.entries(pZ))if(t.startsWith(F,o)){if(m)return["$.",!1,t.length-r,!0];o+=F.length,K?i.push(M):n.push(M),l=l||U;continue e}}if(p=!1,m){v>m?n.push(mp(m)+"-"+mp(v)):v===m&&n.push(mp(v)),m="",o++;continue}if(t.startsWith("-]",o+1)){n.push(mp(v+"-")),o+=2;continue}if(t.startsWith("-",o+1)){m=v,o+=2;continue}n.push(mp(v)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let v=n[0].length===2?n[0].slice(-1):n[0];return[uZ(v),!1,d-r,!1]}let g="["+(u?"^":"")+kF(n)+"]",x="["+(u?"":"^")+kF(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,l,d-r,!0]};var On=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var fZ=new Set(["!","?","+","*","@"]),MF=t=>fZ.has(t),dZ="(?!(?:^|/)\\.\\.?(?:$|/))",zg="(?!\\.)",mZ=new Set(["[","."]),hZ=new Set(["..","."]),gZ=new Set("().*{}+?[]^$\\!"),yZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),eb="[^/]",AF=eb+"*?",DF=eb+"+?",nc=class t{type;#e;#t;#o=!1;#n=[];#s;#T;#l;#u=!1;#a;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#s=r,this.#e=this.#s?this.#s.#e:this,this.#a=this.#e===this?n:this.#e.#a,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#u&&this.#l.push(this),this.#T=this.#s?this.#s.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#u)return this;this.toString(),this.#u=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#s;for(;n;){for(let i=r.#T+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#s}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#s===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#u&&this.#s?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#s?.isStart())return!1;if(this.#T===0)return!0;let e=this.#s;for(let r=0;r<this.#T;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#s?.type==="!")return!0;if(!this.#s?.isEnd())return!1;if(!this.type)return this.#s?.isEnd();let e=this.#s?this.#s.#n.length:0;return this.#T===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,a=!1,l=-1,p=!1;if(r.type===null){let x=n,w="";for(;x<e.length;){let v=e.charAt(x++);if(o||v==="\\"){o=!o,w+=v;continue}if(a){x===l+1?(v==="^"||v==="!")&&(p=!0):v==="]"&&!(x===l+2&&p)&&(a=!1),w+=v;continue}else if(v==="["){a=!0,l=x,p=!1,w+=v;continue}if(!i.noext&&MF(v)&&e.charAt(x)==="("){r.push(w),w="";let F=new t(v,r);x=t.#y(e,F,x,i),r.push(F);continue}w+=v}return r.push(w),x}let u=n+1,d=new t(null,r),m=[],g="";for(;u<e.length;){let x=e.charAt(u++);if(o||x==="\\"){o=!o,g+=x;continue}if(a){u===l+1?(x==="^"||x==="!")&&(p=!0):x==="]"&&!(u===l+2&&p)&&(a=!1),g+=x;continue}else if(x==="["){a=!0,l=u,p=!1,g+=x;continue}if(MF(x)&&e.charAt(u)==="("){d.push(g),g="";let w=new t(x,d);d.push(w),u=t.#y(e,w,u,i);continue}if(x==="|"){d.push(g),g="",m.push(d),d=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),d.push(g),g="",r.push(...m,d),u;g+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#a.nocase&&!this.#a.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#a.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#a}toRegExpSource(e){let r=e??!!this.#a.dot;if(this.#e===this&&this.#g(),!this.type){let p=this.isStart()&&this.isEnd(),u=this.#n.map(x=>{let[w,v,F,M]=typeof x=="string"?t.#f(x,this.#t,p):x.toRegExpSource(e);return this.#t=this.#t||F,this.#o=this.#o||M,w}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&hZ.has(this.#n[0]))){let w=mZ,v=r&&w.has(u.charAt(0))||u.startsWith("\\.")&&w.has(u.charAt(2))||u.startsWith("\\.\\.")&&w.has(u.charAt(4)),F=!r&&!e&&w.has(u.charAt(0));d=v?dZ:F?zg:""}let m="";return this.isEnd()&&this.#e.#u&&this.#s?.type==="!"&&(m="(?:$|\\/)"),[d+u+m,On(u),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#d(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let p=this.toString();return this.#n=[p],this.type=null,this.#t=void 0,[p,On(this.toString()),!1,!1]}let a=!n||e||r||!zg?"":this.#d(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?zg:"")+DF;else{let p=this.type==="!"?"))"+(this.isStart()&&!r&&!e?zg:"")+AF+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;l=i+o+p}return[l,On(o),this.#t=!!this.#t,this.#o]}#d(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#o=this.#o||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",a=!1;for(let l=0;l<e.length;l++){let p=e.charAt(l);if(i){i=!1,o+=(gZ.has(p)?"\\":"")+p;continue}if(p==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(p==="["){let[u,d,m,g]=PF(e,l);if(m){o+=u,a=a||d,l+=m-1,r=r||g;continue}}if(p==="*"){n&&e==="*"?o+=DF:o+=AF,r=!0;continue}if(p==="?"){o+=eb,r=!0;continue}o+=yZ(p)}return[o,On(e),!!r,a]}};var ic=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var ir=(t,e,r={})=>(dp(e),!r.nocomment&&e.charAt(0)==="#"?!1:new qr(e,r).match(t)),xZ=/^\*+([^+@!?\*\[\(]*)$/,SZ=t=>e=>!e.startsWith(".")&&e.endsWith(t),TZ=t=>e=>e.endsWith(t),vZ=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),bZ=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),wZ=/^\*+\.\*+$/,_Z=t=>!t.startsWith(".")&&t.includes("."),EZ=t=>t!=="."&&t!==".."&&t.includes("."),RZ=/^\.\*+$/,kZ=t=>t!=="."&&t!==".."&&t.startsWith("."),PZ=/^\*+$/,MZ=t=>t.length!==0&&!t.startsWith("."),AZ=t=>t.length!==0&&t!=="."&&t!=="..",DZ=/^\?+([^+@!?\*\[\(]*)?$/,IZ=([t,e=""])=>{let r=OF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},FZ=([t,e=""])=>{let r=NF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},CZ=([t,e=""])=>{let r=NF([t]);return e?n=>r(n)&&n.endsWith(e):r},OZ=([t,e=""])=>{let r=OF([t]);return e?n=>r(n)&&n.endsWith(e):r},OF=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},NF=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},LF=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",IF={win32:{sep:"\\"},posix:{sep:"/"}},NZ=LF==="win32"?IF.win32.sep:IF.posix.sep;ir.sep=NZ;var Ut=Symbol("globstar **");ir.GLOBSTAR=Ut;var LZ="[^/]",UZ=LZ+"*?",HZ="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",VZ="(?:(?!(?:\\/|^)\\.).)*?",BZ=(t,e={})=>r=>ir(r,t,e);ir.filter=BZ;var gn=(t,e={})=>Object.assign({},t,e),WZ=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return ir;let e=ir;return Object.assign((n,i,o={})=>e(n,i,gn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,gn(t,o))}static defaults(i){return e.defaults(gn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,a={}){super(i,o,gn(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,gn(t,o))}},unescape:(n,i={})=>e.unescape(n,gn(t,i)),escape:(n,i={})=>e.escape(n,gn(t,i)),filter:(n,i={})=>e.filter(n,gn(t,i)),defaults:n=>e.defaults(gn(t,n)),makeRe:(n,i={})=>e.makeRe(n,gn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,gn(t,i)),match:(n,i,o={})=>e.match(n,i,gn(t,o)),sep:e.sep,GLOBSTAR:Ut})};ir.defaults=WZ;var UF=(t,e={})=>(dp(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,CF.default)(t));ir.braceExpand=UF;var $Z=(t,e={})=>new qr(t,e).makeRe();ir.makeRe=$Z;var jZ=(t,e,r={})=>{let n=new qr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};ir.match=jZ;var FF=/[?*]|[+@!]\(.*?\)|\[|\]/,qZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),qr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){dp(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||LF,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let p=o[0]===""&&o[1]===""&&(o[2]==="?"||!FF.test(o[2]))&&!FF.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(p)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(p=>this.parse(p))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let l=n[i+1],p=n[i+2],u=n[i+3];if(l!==".."||!p||p==="."||p===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let l=n[a];a===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let p=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...p),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let v=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),F=!v&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),M=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),U=!M&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),K=F?3:v?0:void 0,ne=U?3:M?0:void 0;if(typeof K=="number"&&typeof ne=="number"){let[ge,de]=[e[K],r[ne]];ge.toLowerCase()===de.toLowerCase()&&(r[ne]=ge,ne>K?r=r.slice(ne):K>ne&&(e=e.slice(K)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,l=0,p=e.length,u=r.length;a<p&&l<u;a++,l++){this.debug("matchOne loop");var d=r[l],m=e[a];if(this.debug(r,d,m),d===!1)return!1;if(d===Ut){this.debug("GLOBSTAR",[r,d,m]);var g=a,x=l+1;if(x===u){for(this.debug("** at the end");a<p;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;g<p;){var w=e[g];if(this.debug(`
globstar while`,e,g,r,x,w),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,p,w),!0;if(w==="."||w===".."||!i.dot&&w.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===p))}let v;if(typeof d=="string"?(v=m===d,this.debug("string match",d,m,v)):(v=d.test(m),this.debug("pattern match",d,m,v)),!v)return!1}if(a===p&&l===u)return!0;if(a===p)return n;if(l===u)return a===p-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return UF(this.pattern,this.options)}parse(e){dp(e);let r=this.options;if(e==="**")return Ut;if(e==="")return"";let n,i=null;(n=e.match(PZ))?i=r.dot?AZ:MZ:(n=e.match(xZ))?i=(r.nocase?r.dot?bZ:vZ:r.dot?TZ:SZ)(n[1]):(n=e.match(DZ))?i=(r.nocase?r.dot?FZ:IZ:r.dot?CZ:OZ)(n):(n=e.match(wZ))?i=r.dot?EZ:_Z:(n=e.match(RZ))&&(i=kZ);let o=nc.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?UZ:r.dot?HZ:VZ,i=new Set(r.nocase?["i"]:[]),o=e.map(p=>{let u=p.map(d=>{if(d instanceof RegExp)for(let m of d.flags.split(""))i.add(m);return typeof d=="string"?qZ(d):d===Ut?Ut:d._src});return u.forEach((d,m)=>{let g=u[m+1],x=u[m-1];d!==Ut||x===Ut||(x===void 0?g!==void 0&&g!==Ut?u[m+1]="(?:\\/|"+n+"\\/)?"+g:u[m]=n:g===void 0?u[m-1]=x+"(?:\\/|"+n+")?":g!==Ut&&(u[m-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,u[m+1]=Ut))}),u.filter(d=>d!==Ut).join("/")}).join("|"),[a,l]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let l=i.length-2;!a&&l>=0;l--)a=i[l];for(let l=0;l<o.length;l++){let p=o[l],u=i;if(n.matchBase&&p.length===1&&(u=[a]),this.matchOne(u,p,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return ir.defaults(e).Minimatch}};ir.AST=nc;ir.Minimatch=qr;ir.escape=ic;ir.unescape=On;var c1=require("node:url");var oc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,VF=new Set,tb=typeof process=="object"&&process?process:{},BF=(t,e,r,n)=>{typeof tb.emitWarning=="function"?tb.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},Gg=globalThis.AbortController,HF=globalThis.AbortSignal;if(typeof Gg>"u"){HF=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},Gg=class{constructor(){e()}signal=new HF;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=tb.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,BF("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var zZ=t=>!VF.has(t),PLe=Symbol("type"),_o=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),WF=t=>_o(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?sc:null:null,sc=class extends Array{constructor(e){super(e),this.fill(0)}},rb=class t{heap;length;static#e=!1;static create(e){let r=WF(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},hp=class t{#e;#t;#o;#n;#s;#T;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#u;#a;#c;#i;#g;#y;#d;#f;#w;#h;#_;#E;#S;#v;#b;#m;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#S,sizes:e.#_,keyMap:e.#a,keyList:e.#c,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#p(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#V(r),indexes:r=>e.#k(r),rindexes:r=>e.#P(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#u}get size(){return this.#l}get fetchMethod(){return this.#s}get memoMethod(){return this.#T}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:p,dispose:u,disposeAfter:d,noDisposeOnSet:m,noUpdateTTL:g,maxSize:x=0,maxEntrySize:w=0,sizeCalculation:v,fetchMethod:F,memoMethod:M,noDeleteOnFetchRejection:U,noDeleteOnStaleGet:K,allowStaleOnFetchRejection:ne,allowStaleOnFetchAbort:ge,ignoreFetchAbort:de}=e;if(r!==0&&!_o(r))throw new TypeError("max option must be a nonnegative integer");let gt=r?WF(r):Array;if(!gt)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=w||this.#t,this.sizeCalculation=v,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(M!==void 0&&typeof M!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#T=M,F!==void 0&&typeof F!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#s=F,this.#b=!!F,this.#a=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new gt(r),this.#y=new gt(r),this.#d=0,this.#f=0,this.#w=rb.create(r),this.#l=0,this.#u=0,typeof u=="function"&&(this.#o=u),typeof d=="function"?(this.#n=d,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#m=!!this.#n,this.noDisposeOnSet=!!m,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!U,this.allowStaleOnFetchRejection=!!ne,this.allowStaleOnFetchAbort=!!ge,this.ignoreFetchAbort=!!de,this.maxEntrySize!==0){if(this.#t!==0&&!_o(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!_o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#A()}if(this.allowStale=!!p,this.noDeleteOnStaleGet=!!K,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=_o(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!_o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let Ft="LRU_CACHE_UNBOUNDED";zZ(Ft)&&(VF.add(Ft),BF("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Ft,t))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#M(){let e=new sc(this.#e),r=new sc(this.#e);this.#S=e,this.#E=r,this.#I=(o,a,l=oc.now())=>{if(r[o]=a!==0?l:0,e[o]=a,a!==0&&this.ttlAutopurge){let p=setTimeout(()=>{this.#x(o)&&this.#D(this.#c[o],"expire")},a+1);p.unref&&p.unref()}},this.#R=o=>{r[o]=e[o]!==0?oc.now():0},this.#r=(o,a)=>{if(e[a]){let l=e[a],p=r[a];if(!l||!p)return;o.ttl=l,o.start=p,o.now=n||i();let u=o.now-p;o.remainingTTL=l-u}};let n=0,i=()=>{let o=oc.now();if(this.ttlResolution>0){n=o;let a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref()}return o};this.getRemainingTTL=o=>{let a=this.#a.get(o);if(a===void 0)return 0;let l=e[a],p=r[a];if(!l||!p)return 1/0;let u=(n||i())-p;return l-u},this.#x=o=>{let a=r[o],l=e[o];return!!l&&!!a&&(n||i())-a>l}}#R=()=>{};#r=()=>{};#I=()=>{};#x=()=>!1;#A(){let e=new sc(this.#e);this.#u=0,this.#_=e,this.#F=r=>{this.#u-=e[r],e[r]=0},this.#O=(r,n,i,o)=>{if(this.#p(n))return 0;if(!_o(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!_o(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#u>o;)this.#L(!0)}this.#u+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#u)}}#F=e=>{};#C=(e,r,n)=>{};#O=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#d));)r=this.#y[r]}*#P({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#d;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#N(e){return e!==void 0&&this.#a.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#P())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#P()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#P())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#P()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#P({allowStale:!0}))this.#x(r)&&(this.#D(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#a.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#p(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#S&&this.#E){let a=this.#S[r],l=this.#E[r];if(a&&l){let p=a-(oc.now()-l);o.ttl=p,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#p(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let a={value:o};if(this.#S&&this.#E){a.ttl=this.#S[r];let l=oc.now()-this.#E[r];a.start=Math.floor(Date.now()-l)}this.#_&&(a.size=this.#_[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=oc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:p}=n,{noUpdateTTL:u=this.noUpdateTTL}=n,d=this.#O(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return p&&(p.set="miss",p.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let m=this.#l===0?void 0:this.#a.get(e);if(m===void 0)m=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#c[m]=e,this.#i[m]=r,this.#a.set(e,m),this.#g[this.#f]=m,this.#y[m]=this.#f,this.#f=m,this.#l++,this.#C(m,d,p),p&&(p.set="add"),u=!1;else{this.#V(m);let g=this.#i[m];if(r!==g){if(this.#b&&this.#p(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!a&&(this.#v&&this.#o?.(x,e,"set"),this.#m&&this.#h?.push([x,e,"set"]))}else a||(this.#v&&this.#o?.(g,e,"set"),this.#m&&this.#h?.push([g,e,"set"]));if(this.#F(m),this.#C(m,d,p),this.#i[m]=r,p){p.set="replace";let x=g&&this.#p(g)?g.__staleWhileFetching:g;x!==void 0&&(p.oldValue=x)}}else p&&(p.set="update")}if(i!==0&&!this.#S&&this.#M(),this.#S&&(u||this.#I(m,i,o),p&&this.#r(p,m)),!a&&this.#m&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#d];if(this.#L(!0),this.#p(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#m&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#d,n=this.#c[r],i=this.#i[r];return this.#b&&this.#p(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(i,n,"evict"),this.#m&&this.#h?.push([i,n,"evict"])),this.#F(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#d=this.#f=0,this.#w.length=0):this.#d=this.#g[r],this.#a.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#a.get(e);if(o!==void 0){let a=this.#i[o];if(this.#p(a)&&a.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#a.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#p(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#p(o))return o;let a=new Gg,{signal:l}=n;l?.addEventListener("abort",()=>a.abort(l.reason),{signal:a.signal});let p={signal:a.signal,options:n,context:i},u=(v,F=!1)=>{let{aborted:M}=a.signal,U=n.ignoreFetchAbort&&v!==void 0;if(n.status&&(M&&!F?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,U&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),M&&!U&&!F)return m(a.signal.reason);let K=x;return this.#i[r]===x&&(v===void 0?K.__staleWhileFetching?this.#i[r]=K.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,v,p.options))),v},d=v=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=v),m(v)),m=v=>{let{aborted:F}=a.signal,M=F&&n.allowStaleOnFetchAbort,U=M||n.allowStaleOnFetchRejection,K=U||n.noDeleteOnFetchRejection,ne=x;if(this.#i[r]===x&&(!K||ne.__staleWhileFetching===void 0?this.#D(e,"fetch"):M||(this.#i[r]=ne.__staleWhileFetching)),U)return n.status&&ne.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),ne.__staleWhileFetching;if(ne.__returned===ne)throw v},g=(v,F)=>{let M=this.#s?.(e,o,p);M&&M instanceof Promise&&M.then(U=>v(U===void 0?void 0:U),F),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(v(void 0),n.allowStaleOnFetchAbort&&(v=U=>u(U,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(u,d),w=Object.assign(x,{__abortController:a,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,w,{...p.options,status:void 0}),r=this.#a.get(e)):this.#i[r]=w,w}#p(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Gg}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:p=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:m=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:w=this.allowStaleOnFetchAbort,context:v,forceRefresh:F=!1,status:M,signal:U}=r;if(!this.#b)return M&&(M.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:M});let K={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:l,size:p,sizeCalculation:u,noUpdateTTL:d,noDeleteOnFetchRejection:m,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:w,ignoreFetchAbort:x,status:M,signal:U},ne=this.#a.get(e);if(ne===void 0){M&&(M.fetch="miss");let ge=this.#U(e,ne,K,v);return ge.__returned=ge}else{let ge=this.#i[ne];if(this.#p(ge)){let N=n&&ge.__staleWhileFetching!==void 0;return M&&(M.fetch="inflight",N&&(M.returnedStale=!0)),N?ge.__staleWhileFetching:ge.__returned=ge}let de=this.#x(ne);if(!F&&!de)return M&&(M.fetch="hit"),this.#V(ne),i&&this.#R(ne),M&&this.#r(M,ne),ge;let gt=this.#U(e,ne,K,v),st=gt.__staleWhileFetching!==void 0&&n;return M&&(M.fetch=de?"stale":"refresh",st&&de&&(M.returnedStale=!0)),st?gt.__staleWhileFetching:gt.__returned=gt}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#T;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...a}=r,l=this.get(e,a);if(!o&&l!==void 0)return l;let p=n(e,l,{options:a,context:i});return this.set(e,p,a),p}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:a}=r,l=this.#a.get(e);if(l!==void 0){let p=this.#i[l],u=this.#p(p);return a&&this.#r(a,l),this.#x(l)?(a&&(a.get="stale"),u?(a&&n&&p.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?p.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),a&&n&&(a.returnedStale=!0),n?p:void 0)):(a&&(a.get="hit"),u?p.__staleWhileFetching:(this.#V(l),i&&this.#R(l),p))}else a&&(a.get="miss")}#H(e,r){this.#y[r]=e,this.#g[e]=r}#V(e){e!==this.#f&&(e===this.#d?this.#d=this.#g[e]:this.#H(this.#y[e],this.#g[e]),this.#H(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#a.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#B(r);else{this.#F(i);let o=this.#i[i];if(this.#p(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(o,e,r),this.#m&&this.#h?.push([o,e,r])),this.#a.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#d)this.#d=this.#g[i];else{let a=this.#y[i];this.#g[a]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#m&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#B("delete")}#B(e){for(let r of this.#P({allowStale:!0})){let n=this.#i[r];if(this.#p(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#m&&this.#h?.push([n,i,e])}}if(this.#a.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#S&&this.#E&&(this.#S.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#d=0,this.#f=0,this.#w.length=0,this.#u=0,this.#l=0,this.#m&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var lc=require("node:path"),XF=require("node:url"),ii=require("fs"),rY=fr(require("node:fs"),1),ko=require("node:fs/promises");var ey=require("node:events"),lb=fr(require("node:stream"),1),GF=require("node:string_decoder"),$F=typeof process=="object"&&process?process:{stdout:null,stderr:null},GZ=t=>!!t&&typeof t=="object"&&(t instanceof Ro||t instanceof lb.default||KZ(t)||QZ(t)),KZ=t=>!!t&&typeof t=="object"&&t instanceof ey.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==lb.default.Writable.prototype.pipe,QZ=t=>!!t&&typeof t=="object"&&t instanceof ey.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Ci=Symbol("EOF"),Oi=Symbol("maybeEmitEnd"),Eo=Symbol("emittedEnd"),Kg=Symbol("emittingEnd"),gp=Symbol("emittedError"),Qg=Symbol("closed"),jF=Symbol("read"),Zg=Symbol("flush"),qF=Symbol("flushChunk"),Nn=Symbol("encoding"),ac=Symbol("decoder"),At=Symbol("flowing"),yp=Symbol("paused"),cc=Symbol("resume"),Dt=Symbol("buffer"),or=Symbol("pipes"),It=Symbol("bufferLength"),nb=Symbol("bufferPush"),Yg=Symbol("bufferShift"),Kt=Symbol("objectMode"),ht=Symbol("destroyed"),ib=Symbol("error"),ob=Symbol("emitData"),zF=Symbol("emitEnd"),sb=Symbol("emitEnd2"),ri=Symbol("async"),ab=Symbol("abort"),Xg=Symbol("aborted"),xp=Symbol("signal"),ws=Symbol("dataListeners"),zr=Symbol("discarded"),Sp=t=>Promise.resolve().then(t),ZZ=t=>t(),YZ=t=>t==="end"||t==="finish"||t==="prefinish",XZ=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,JZ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Jg=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[cc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},cb=class extends Jg{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},eY=t=>!!t.objectMode,tY=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Ro=class extends ey.EventEmitter{[At]=!1;[yp]=!1;[or]=[];[Dt]=[];[Kt];[Nn];[ri];[ac];[Ci]=!1;[Eo]=!1;[Kg]=!1;[Qg]=!1;[gp]=null;[It]=0;[ht]=!1;[xp];[Xg]=!1;[ws]=0;[zr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");eY(r)?(this[Kt]=!0,this[Nn]=null):tY(r)?(this[Nn]=r.encoding,this[Kt]=!1):(this[Kt]=!1,this[Nn]=null),this[ri]=!!r.async,this[ac]=this[Nn]?new GF.StringDecoder(this[Nn]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Dt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[or]});let{signal:n}=r;n&&(this[xp]=n,n.aborted?this[ab]():n.addEventListener("abort",()=>this[ab]()))}get bufferLength(){return this[It]}get encoding(){return this[Nn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Kt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ri]}set async(e){this[ri]=this[ri]||!!e}[ab](){this[Xg]=!0,this.emit("abort",this[xp]?.reason),this.destroy(this[xp]?.reason)}get aborted(){return this[Xg]}set aborted(e){}write(e,r,n){if(this[Xg])return!1;if(this[Ci])throw new Error("write after end");if(this[ht])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ri]?Sp:ZZ;if(!this[Kt]&&!Buffer.isBuffer(e)){if(JZ(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(XZ(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Kt]?(this[At]&&this[It]!==0&&this[Zg](!0),this[At]?this.emit("data",e):this[nb](e),this[It]!==0&&this.emit("readable"),n&&i(n),this[At]):e.length?(typeof e=="string"&&!(r===this[Nn]&&!this[ac]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Nn]&&(e=this[ac].write(e)),this[At]&&this[It]!==0&&this[Zg](!0),this[At]?this.emit("data",e):this[nb](e),this[It]!==0&&this.emit("readable"),n&&i(n),this[At]):(this[It]!==0&&this.emit("readable"),n&&i(n),this[At])}read(e){if(this[ht])return null;if(this[zr]=!1,this[It]===0||e===0||e&&e>this[It])return this[Oi](),null;this[Kt]&&(e=null),this[Dt].length>1&&!this[Kt]&&(this[Dt]=[this[Nn]?this[Dt].join(""):Buffer.concat(this[Dt],this[It])]);let r=this[jF](e||null,this[Dt][0]);return this[Oi](),r}[jF](e,r){if(this[Kt])this[Yg]();else{let n=r;e===n.length||e===null?this[Yg]():typeof n=="string"?(this[Dt][0]=n.slice(e),r=n.slice(0,e),this[It]-=e):(this[Dt][0]=n.subarray(e),r=n.subarray(0,e),this[It]-=e)}return this.emit("data",r),!this[Dt].length&&!this[Ci]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Ci]=!0,this.writable=!1,(this[At]||!this[yp])&&this[Oi](),this}[cc](){this[ht]||(!this[ws]&&!this[or].length&&(this[zr]=!0),this[yp]=!1,this[At]=!0,this.emit("resume"),this[Dt].length?this[Zg]():this[Ci]?this[Oi]():this.emit("drain"))}resume(){return this[cc]()}pause(){this[At]=!1,this[yp]=!0,this[zr]=!1}get destroyed(){return this[ht]}get flowing(){return this[At]}get paused(){return this[yp]}[nb](e){this[Kt]?this[It]+=1:this[It]+=e.length,this[Dt].push(e)}[Yg](){return this[Kt]?this[It]-=1:this[It]-=this[Dt][0].length,this[Dt].shift()}[Zg](e=!1){do;while(this[qF](this[Yg]())&&this[Dt].length);!e&&!this[Dt].length&&!this[Ci]&&this.emit("drain")}[qF](e){return this.emit("data",e),this[At]}pipe(e,r){if(this[ht])return e;this[zr]=!1;let n=this[Eo];return r=r||{},e===$F.stdout||e===$F.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[or].push(r.proxyErrors?new cb(this,e,r):new Jg(this,e,r)),this[ri]?Sp(()=>this[cc]()):this[cc]()),e}unpipe(e){let r=this[or].find(n=>n.dest===e);r&&(this[or].length===1?(this[At]&&this[ws]===0&&(this[At]=!1),this[or]=[]):this[or].splice(this[or].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[zr]=!1,this[ws]++,!this[or].length&&!this[At]&&this[cc]();else if(e==="readable"&&this[It]!==0)super.emit("readable");else if(YZ(e)&&this[Eo])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[gp]){let i=r;this[ri]?Sp(()=>i.call(this,this[gp])):i.call(this,this[gp])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[ws]=this.listeners("data").length,this[ws]===0&&!this[zr]&&!this[or].length&&(this[At]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[ws]=0,!this[zr]&&!this[or].length&&(this[At]=!1)),r}get emittedEnd(){return this[Eo]}[Oi](){!this[Kg]&&!this[Eo]&&!this[ht]&&this[Dt].length===0&&this[Ci]&&(this[Kg]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Qg]&&this.emit("close"),this[Kg]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==ht&&this[ht])return!1;if(e==="data")return!this[Kt]&&!n?!1:this[ri]?(Sp(()=>this[ob](n)),!0):this[ob](n);if(e==="end")return this[zF]();if(e==="close"){if(this[Qg]=!0,!this[Eo]&&!this[ht])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[gp]=n,super.emit(ib,n);let o=!this[xp]||this.listeners("error").length?super.emit("error",n):!1;return this[Oi](),o}else if(e==="resume"){let o=super.emit("resume");return this[Oi](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Oi](),i}[ob](e){for(let n of this[or])n.dest.write(e)===!1&&this.pause();let r=this[zr]?!1:super.emit("data",e);return this[Oi](),r}[zF](){return this[Eo]?!1:(this[Eo]=!0,this.readable=!1,this[ri]?(Sp(()=>this[sb]()),!0):this[sb]())}[sb](){if(this[ac]){let r=this[ac].end();if(r){for(let n of this[or])n.dest.write(r);this[zr]||super.emit("data",r)}}for(let r of this[or])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Kt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Kt]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[Kt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Nn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(ht,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[zr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Ci])return r();let o,a,l=m=>{this.off("data",p),this.off("end",u),this.off(ht,d),r(),a(m)},p=m=>{this.off("error",l),this.off("end",u),this.off(ht,d),this.pause(),o({value:m,done:!!this[Ci]})},u=()=>{this.off("error",l),this.off("data",p),this.off(ht,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((m,g)=>{a=g,o=m,this.once(ht,d),this.once("error",l),this.once("end",u),this.once("data",p)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[zr]=!1;let e=!1,r=()=>(this.pause(),this.off(ib,r),this.off(ht,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(ib,r),this.once(ht,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[ht])return e?this.emit("error",e):this.emit(ht),this;this[ht]=!0,this[zr]=!0,this[Dt].length=0,this[It]=0;let r=this;return typeof r.close=="function"&&!this[Qg]&&r.close(),e?this.emit("error",e):this.emit(ht),this}static get isStream(){return GZ}};var nY=ii.realpathSync.native,vp={lstatSync:ii.lstatSync,readdir:ii.readdir,readdirSync:ii.readdirSync,readlinkSync:ii.readlinkSync,realpathSync:nY,promises:{lstat:ko.lstat,readdir:ko.readdir,readlink:ko.readlink,realpath:ko.realpath}},JF=t=>!t||t===vp||t===rY?vp:{...vp,...t,promises:{...vp.promises,...t.promises||{}}},e1=/^\\\\\?\\([a-z]:)\\?$/i,iY=t=>t.replace(/\//g,"\\").replace(e1,"$1\\"),oY=/[\\\/]/,xn=0,t1=1,r1=2,ni=4,n1=6,i1=8,_s=10,o1=12,yn=15,Tp=~yn,pb=16,KF=32,bp=64,Ln=128,ty=256,ny=512,QF=bp|Ln|ny,sY=1023,ub=t=>t.isFile()?i1:t.isDirectory()?ni:t.isSymbolicLink()?_s:t.isCharacterDevice()?r1:t.isBlockDevice()?n1:t.isSocket()?o1:t.isFIFO()?t1:xn,ZF=new Map,wp=t=>{let e=ZF.get(t);if(e)return e;let r=t.normalize("NFKD");return ZF.set(t,r),r},YF=new Map,ry=t=>{let e=YF.get(t);if(e)return e;let r=wp(t.toLowerCase());return YF.set(t,r),r},iy=class extends hp{constructor(){super({max:256})}},fb=class extends hp{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},s1=Symbol("PathScurry setAsCwd"),Qt=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#s;get uid(){return this.#s}#T;get gid(){return this.#T}#l;get rdev(){return this.#l}#u;get blksize(){return this.#u}#a;get ino(){return this.#a}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#S;#v;#b;#m;#M;#R;#r;#I;#x;#A;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=xn,n,i,o,a,l){this.name=e,this.#S=o?ry(e):wp(e),this.#r=r&sY,this.nocase=o,this.roots=i,this.root=n||this,this.#I=a,this.#b=l.fullpath,this.#M=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=JF(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#I}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#I.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#I.set(this,r),this.#r&=~pb,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?ry(e):wp(e);for(let p of n)if(p.#S===i)return p;let o=this.parent?this.sep:"",a=this.#b?this.#b+o+e:void 0,l=this.newChild(e,xn,{...r,parent:this,fullpath:a});return this.canReaddir()||(l.#r|=Ln),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#M!==void 0)return this.#M;let e=this.name,r=this.parent;if(!r)return this.#M=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#m!==void 0)return this.#m;if(this.sep==="/")return this.#m=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#m=`//?/${i}`:this.#m=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#m=n}isUnknown(){return(this.#r&yn)===xn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&yn)===i1}isDirectory(){return(this.#r&yn)===ni}isCharacterDevice(){return(this.#r&yn)===r1}isBlockDevice(){return(this.#r&yn)===n1}isFIFO(){return(this.#r&yn)===t1}isSocket(){return(this.#r&yn)===o1}isSymbolicLink(){return(this.#r&_s)===_s}lstatCached(){return this.#r&KF?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#A}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#r&yn;return!(e!==xn&&e!==_s||this.#r&ty||this.#r&Ln)}calledReaddir(){return!!(this.#r&pb)}isENOENT(){return!!(this.#r&Ln)}isNamed(e){return this.nocase?this.#S===ry(e):this.#S===wp(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}#C(e){this.#r|=pb;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#O()}}#O(){this.#r&Ln||(this.#r=(this.#r|Ln)&Tp,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#O()}#P(){this.#r|=ny,this.#N()}#N(){if(this.#r&bp)return;let e=this.#r;(e&yn)===ni&&(e&=Tp),this.#r=e|bp,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#N():e==="ENOENT"?this.#O():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#N():e==="ENOENT"&&this.#O()}#p(e=""){let r=this.#r;r|=ty,e==="ENOENT"&&(r|=Ln),(e==="EINVAL"||e==="UNKNOWN")&&(r&=Tp),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#N()}#H(e,r){return this.#D(e,r)||this.#V(e,r)}#V(e,r){let n=ub(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&yn;return o!==ni&&o!==_s&&o!==xn&&(i.#r|=bp),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?ry(e.name):wp(e.name))===i.#S)return this.#B(e,i,n,r)}}#B(e,r,n,i){let o=r.name;return r.#r=r.#r&Tp|ub(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if(!(this.#r&Ln))try{return this.#q(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if(!(this.#r&Ln))try{return this.#q(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#q(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:a,blocks:l,ctime:p,ctimeMs:u,dev:d,gid:m,ino:g,mode:x,mtime:w,mtimeMs:v,nlink:F,rdev:M,size:U,uid:K}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#u=a,this.#i=l,this.#_=p,this.#d=u,this.#t=d,this.#T=m,this.#a=g,this.#o=x,this.#h=w,this.#y=v,this.#n=F,this.#l=M,this.#c=U,this.#s=K;let ne=ub(e);this.#r=this.#r&Tp|ne|KF,ne!==xn&&ne!==ni&&ne!==_s&&(this.#r|=bp)}#$=[];#j=!1;#z(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,a)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of a)this.#H(l,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&QF)return!1;let e=yn&this.#r;return e===xn||e===ni||e===_s}shouldWalk(e,r){return(this.#r&ni)===ni&&!(this.#r&QF)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#A)return this.#A;if(!((ny|ty|Ln)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}realpathSync(){if(this.#A)return this.#A;if(!((ny|ty|Ln)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}[s1](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#M=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#M=void 0,i.#R=void 0,i=i.parent}},oy=class t extends Qt{sep="\\";splitSep=oY;constructor(e,r=xn,n,i,o,a,l){super(e,r,n,i,o,a,l)}newChild(e,r=xn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return lc.win32.parse(e).root}getRoot(e){if(e=iY(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new pc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(e1,"$1\\"),e===r}},sy=class t extends Qt{splitSep="/";sep="/";constructor(e,r=xn,n,i,o,a,l){super(e,r,n,i,o,a,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=xn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},ay=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:a=vp}={}){this.#n=JF(a),(e instanceof URL||e.startsWith("file://"))&&(e=(0,XF.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new iy,this.#t=new iy,this.#o=new fb(o);let p=l.substring(this.rootPath.length).split(n);if(p.length===1&&!p[0]&&p.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let u=this.root,d=p.length-1,m=r.sep,g=this.rootPath,x=!1;for(let w of p){let v=d--;u=u.child(w,{relative:new Array(v).fill("..").join(m),relativePosix:new Array(v).fill("..").join("/"),fullpath:g+=(x?"":m)+w}),x=!0}this.cwd=u}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set,u=(m,g)=>{p.add(m),m.readdirCB((x,w)=>{if(x)return g(x);let v=w.length;if(!v)return g();let F=()=>{--v===0&&g()};for(let M of w)(!o||o(M))&&l.push(n?M:M.fullpath()),i&&M.isSymbolicLink()?M.realpath().then(U=>U?.isUnknown()?U.lstat():U).then(U=>U?.shouldWalk(p,a)?u(U,F):F()):M.shouldWalk(p,a)?u(M,F):F()},!0)},d=e;return new Promise((m,g)=>{u(d,x=>{if(x)return g(x);m(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set([e]);for(let u of p){let d=u.readdirSync();for(let m of d){(!o||o(m))&&l.push(n?m:m.fullpath());let g=m;if(m.isSymbolicLink()){if(!(i&&(g=m.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(p,a)&&p.add(g)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let p of l){let u=p.readdirSync();for(let d of u){(!o||o(d))&&(yield n?d:d.fullpath());let m=d;if(d.isSymbolicLink()){if(!(i&&(m=d.realpathSync())))continue;m.isUnknown()&&m.lstatSync()}m.shouldWalk(l,a)&&l.add(m)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=new Ro({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let p=new Set,u=[e],d=0,m=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&l.end();return}d++,p.add(x);let w=(F,M,U=!1)=>{if(F)return l.emit("error",F);if(i&&!U){let K=[];for(let ne of M)ne.isSymbolicLink()&&K.push(ne.realpath().then(ge=>ge?.isUnknown()?ge.lstat():ge));if(K.length){Promise.all(K).then(()=>w(null,M,!0));return}}for(let K of M)K&&(!o||o(K))&&(l.write(n?K:K.fullpath())||(g=!0));d--;for(let K of M){let ne=K.realpathCached()||K;ne.shouldWalk(p,a)&&u.push(ne)}g&&!l.flowing?l.once("drain",m):v||m()},v=!0;x.readdirCB(w,!0),v=!1}};return m(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Qt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=new Ro({objectMode:!0}),p=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let u=[e],d=0,m=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&l.end();return}d++,p.add(x);let w=x.readdirSync();for(let v of w)(!o||o(v))&&(l.write(n?v:v.fullpath())||(g=!0));d--;for(let v of w){let F=v;if(v.isSymbolicLink()){if(!(i&&(F=v.realpathSync())))continue;F.isUnknown()&&F.lstatSync()}F.shouldWalk(p,a)&&u.push(F)}}g&&!l.flowing&&l.once("drain",m)};return m(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[s1](r)}},pc=class extends ay{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,lc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return lc.win32.parse(e).root.toUpperCase()}newRoot(e){return new oy(this.rootPath,ni,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},uc=class extends ay{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,lc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new sy(this.rootPath,ni,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},_p=class extends uc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},FLe=process.platform==="win32"?oy:sy,a1=process.platform==="win32"?pc:process.platform==="darwin"?_p:uc;var aY=t=>t.length>=1,cY=t=>t.length>=1,fc=class t{#e;#t;#o;length;#n;#s;#T;#l;#u;#a;#c=!0;constructor(e,r,n,i){if(!aY(e))throw new TypeError("empty pattern list");if(!cY(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,a,l,p,...u]=this.#e,[d,m,g,x,...w]=this.#t;u[0]===""&&(u.shift(),w.shift());let v=[o,a,l,p,""].join("/"),F=[d,m,g,x,""].join("/");this.#e=[v,...u],this.#t=[F,...w],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...a]=this.#e,[l,...p]=this.#t;a[0]===""&&(a.shift(),p.shift());let u=o+"/",d=l+"/";this.#e=[u,...a],this.#t=[d,...p],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Ut}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#T=this.#T||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#s!==void 0?this.#s:this.hasMore()?(this.#s=new t(this.#e,this.#t,this.#o+1,this.#n),this.#s.#a=this.#a,this.#s.#u=this.#u,this.#s.#l=this.#l,this.#s):this.#s=null}isUNC(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#a!==void 0?this.#a:this.#a=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var lY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",dc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:a=lY}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=a,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:a,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new qr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let a=new fc(i,o,0,this.platform),l=new qr(a.globString(),this.mmopts),p=o[o.length-1]==="**",u=a.isAbsolute();u?this.absolute.push(l):this.relative.push(l),p&&(u?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let a of this.relative)if(a.match(i)||a.match(o))return!0;for(let a of this.absolute)if(a.match(r)||a.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var db=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},mb=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},hb=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},Ep=class t{hasWalkedCache;matches=new mb;subwalks=new hb;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new db}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let a=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(a){i=i.resolve(a==="/"&&this.opts.root!==void 0?this.opts.root:a);let m=o.rest();if(m)o=m;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let p,u,d=!1;for(;typeof(p=o.pattern())=="string"&&(u=o.rest());)i=i.resolve(p),o=u,d=!0;if(p=o.pattern(),u=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof p=="string"){let m=p===".."||p===""||p===".";this.matches.add(i.resolve(p),l,m);continue}else if(p===Ut){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let m=u?.pattern(),g=u?.rest();if(!u||(m===""||m===".")&&!g)this.matches.add(i,l,m===""||m===".");else if(m===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,l,!0)}}else p instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let a of n){let l=a.isAbsolute(),p=a.pattern(),u=a.rest();p===Ut?i.testGlobstar(o,a,u,l):p instanceof RegExp?i.testRegExp(o,p,u,l):i.testString(o,p,u,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let a=e.parent||e;this.subwalks.add(a,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var pY=(t,e)=>typeof t=="string"?new dc([t],e):Array.isArray(t)?new dc(t,e):t,cy=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=pY(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#s(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let a=await o.realpath();a&&(a.isUnknown()||this.opts.stat)&&await a.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let a=o.realpathSync();a&&(a?.isUnknown()||this.opts.stat)&&a.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),a=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?a+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new Ep(this.opts),n)}walkCB2(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>a()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirCached();l.calledReaddir()?this.walkCB3(l,p,n,a):l.readdirCB((u,d)=>this.walkCB3(l,d,n,a),!0)}a()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>a()));for(let[l,p]of n.subwalks.entries())o++,this.walkCB2(l,p,n.child(),a);a()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new Ep(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirSync();this.walkCB3Sync(l,p,n,a)}a()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let[l,p]of n.subwalks.entries())o++,this.walkCB2Sync(l,p,n.child(),a);a()}},Rp=class extends cy{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},kp=class extends cy{results;constructor(e,r,n){super(e,r,n),this.results=new Ro({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var uY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Un=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,c1.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(p=>p.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(p=>p.includes("/")?p:`./**/${p}`)}if(this.pattern=e,this.platform=r.platform||uY,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let p=r.platform==="win32"?pc:r.platform==="darwin"?_p:r.platform?uc:a1;this.scurry=new p(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(p=>new qr(p,i)),[a,l]=o.reduce((p,u)=>(p[0].push(...u.set),p[1].push(...u.globParts),p),[[],[]]);this.patterns=a.map((p,u)=>{let d=l[u];if(!d)throw new Error("invalid pattern object");return new fc(p,d,0,this.platform)})}async walk(){return[...await new Rp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Rp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new kp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new kp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var gb=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new qr(r,e).hasMagic())return!0;return!1};function ly(t,e={}){return new Un(t,e).streamSync()}function p1(t,e={}){return new Un(t,e).stream()}function u1(t,e={}){return new Un(t,e).walkSync()}async function l1(t,e={}){return new Un(t,e).walk()}function py(t,e={}){return new Un(t,e).iterateSync()}function f1(t,e={}){return new Un(t,e).iterate()}var fY=ly,dY=Object.assign(p1,{sync:ly}),mY=py,hY=Object.assign(f1,{sync:py}),gY=Object.assign(u1,{stream:ly,iterate:py}),yb=Object.assign(l1,{glob:l1,globSync:u1,sync:gY,globStream:p1,stream:dY,globStreamSync:ly,streamSync:fY,globIterate:f1,iterate:hY,globIterateSync:py,iterateSync:mY,Glob:Un,hasMagic:gb,escape:ic,unescape:On});yb.glob=yb;function d1(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var w1=Object.defineProperty,SY=Object.getOwnPropertyNames,C=(t,e)=>w1(t,"name",{value:e,configurable:!0}),TY=(t,e)=>function(){return e||(0,t[SY(t)[0]])((e={exports:{}}).exports,e),e.exports},Cb=(t,e)=>{for(var r in e)w1(t,r,{get:e[r],enumerable:!0})},vY=TY({"(disabled):util"(){}}),uy={};Cb(uy,{addChainableMethod:()=>zb,addLengthGuard:()=>Ip,addMethod:()=>$b,addProperty:()=>Wb,checkError:()=>Gr,compareByInspect:()=>hy,eql:()=>Z1,expectTypes:()=>D1,flag:()=>_e,getActual:()=>Ty,getMessage:()=>Lb,getName:()=>by,getOperator:()=>Zb,getOwnEnumerableProperties:()=>Qb,getOwnEnumerablePropertySymbols:()=>Kb,getPathInfo:()=>Bb,hasProperty:()=>vy,inspect:()=>Le,isNaN:()=>gy,isProxyEnabled:()=>Dp,isRegExp:()=>yy,objDisplay:()=>Es,overwriteChainableMethod:()=>Gb,overwriteMethod:()=>qb,overwriteProperty:()=>jb,proxify:()=>yc,test:()=>Ob,transferFlags:()=>Hn,type:()=>Ye});var Gr={};Cb(Gr,{compatibleConstructor:()=>R1,compatibleInstance:()=>E1,compatibleMessage:()=>k1,getConstructorName:()=>P1,getMessage:()=>M1});function Sy(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}C(Sy,"isErrorInstance");function _1(t){return Object.prototype.toString.call(t)==="[object RegExp]"}C(_1,"isRegExp");function E1(t,e){return Sy(e)&&t===e}C(E1,"compatibleInstance");function R1(t,e){return Sy(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}C(R1,"compatibleConstructor");function k1(t,e){let r=typeof t=="string"?t:t.message;return _1(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}C(k1,"compatibleMessage");function P1(t){let e=t;return Sy(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}C(P1,"getConstructorName");function M1(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}C(M1,"getMessage");function _e(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}C(_e,"flag");function Ob(t,e){var r=_e(t,"negate"),n=e[0];return r?!n:n}C(Ob,"test");function Ye(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Ye,"type");var bY="captureStackTrace"in Error,ze=class A1 extends Error{static{C(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,bY&&Error.captureStackTrace(this,n||A1);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function D1(t,e){var r=_e(t,"message"),n=_e(t,"ssfi");r=r?r+": ":"",t=_e(t,"object"),e=e.map(function(a){return a.toLowerCase()}),e.sort();var i=e.map(function(a,l){var p=~["a","e","i","o","u"].indexOf(a.charAt(0))?"an":"a",u=e.length>1&&l===e.length-1?"or ":"";return u+p+" "+a}).join(", "),o=Ye(t).toLowerCase();if(!e.some(function(a){return o===a}))throw new ze(r+"object tested must be "+i+", but "+o+" given",void 0,n)}C(D1,"expectTypes");function Ty(t,e){return e.length>4?e[4]:t._obj}C(Ty,"getActual");var m1={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},wY={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},hc="\u2026";function I1(t,e){let r=m1[wY[e]]||m1[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}C(I1,"colorise");function F1({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:a=1/0,seen:l=[],truncate:p=1/0,stylize:u=String}={},d){let m={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(a),truncate:Number(p),seen:l,inspect:d,stylize:u};return m.colors&&(m.stylize=I1),m}C(F1,"normaliseOptions");function Ni(t,e,r=hc){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}C(Ni,"truncate");function Sn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,a="",l="",p="";for(let u=0;u<i;u+=1){let d=u+1===t.length,m=u+2===t.length;p=`${hc}(${t.length-u})`;let g=t[u];e.truncate=o-a.length-(d?0:n.length);let x=l||r(g,e)+(d?"":n),w=a.length+x.length,v=w+p.length;if(d&&w>o&&a.length+p.length<=o||!d&&!m&&v>o||(l=d?"":r(t[u+1],e)+(m?"":n),!d&&m&&v>o&&w+l.length>o))break;if(a+=x,!d&&!m&&w+l.length>=o){p=`${hc}(${t.length-u-1})`;break}p=""}return`${a}${p}`}C(Sn,"inspectList");function C1(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}C(C1,"quoteComplexKey");function gc([t,e],r){return r.truncate-=2,typeof t=="string"?t=C1(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}C(gc,"inspectProperty");function O1(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=Sn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=Sn(r.map(o=>[o,t[o]]),e,gc)),`[ ${n}${i?`, ${i}`:""} ]`}C(O1,"inspectArray");var _Y=C(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function oi(t,e){let r=_Y(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let a=0;a<t.length;a++){let l=`${e.stylize(Ni(t[a],e.truncate),"number")}${a===t.length-1?"":", "}`;if(e.truncate-=l.length,t[a]!==t.length&&e.truncate<=3){i+=`${hc}(${t.length-t[a]+1})`;break}i+=l}let o="";return n.length&&(o=Sn(n.map(a=>[a,t[a]]),e,gc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}C(oi,"inspectTypedArray");function N1(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Ni(n[1],e.truncate-i.length-1)}`,"date")}C(N1,"inspectDate");function Tb(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Ni(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}C(Tb,"inspectFunction");function L1([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}C(L1,"inspectMapEntry");function U1(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}C(U1,"mapToEntries");function H1(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${Sn(U1(t),e,L1)} }`)}C(H1,"inspectMap");var EY=Number.isNaN||(t=>t!==t);function vb(t,e){return EY(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Ni(String(t),e.truncate),"number")}C(vb,"inspectNumber");function bb(t,e){let r=Ni(t.toString(),e.truncate-1);return r!==hc&&(r+="n"),e.stylize(r,"bigint")}C(bb,"inspectBigInt");function V1(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Ni(i,n)}/${r}`,"regexp")}C(V1,"inspectRegExp");function B1(t){let e=[];return t.forEach(r=>{e.push(r)}),e}C(B1,"arrayFromSet");function W1(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${Sn(B1(t),e)} }`)}C(W1,"inspectSet");var h1=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),RY={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},kY=16,PY=4;function $1(t){return RY[t]||`\\u${`0000${t.charCodeAt(0).toString(kY)}`.slice(-PY)}`}C($1,"escape");function wb(t,e){return h1.test(t)&&(t=t.replace(h1,$1)),e.stylize(`'${Ni(t,e.truncate-2)}'`,"string")}C(wb,"inspectString");function _b(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}C(_b,"inspectSymbol");var j1=C(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(j1=C((n,i)=>{let[o,a]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(a,i)}}`},"getPromiseValue"))}catch{}var MY=j1;function Mp(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=Sn(r.map(l=>[l,t[l]]),e,gc),o=Sn(n.map(l=>[l,t[l]]),e,gc);e.seen.pop();let a="";return i&&o&&(a=", "),`{ ${i}${a}${o} }`}C(Mp,"inspectObject");var xb=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function q1(t,e){let r="";return xb&&xb in t&&(r=t[xb]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Mp(t,e)}`}C(q1,"inspectClass");function z1(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${Sn(t,e)} ]`)}C(z1,"inspectArguments");var AY=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function G1(t,e){let r=Object.getOwnPropertyNames(t).filter(a=>AY.indexOf(a)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=Ni(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=Sn(r.map(a=>[a,t[a]]),e,gc);return`${n}${i}${o?` { ${o} }`:""}`}C(G1,"inspectObject");function K1([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}C(K1,"inspectAttribute");function fy(t,e){return Sn(t,e,Nb,`
`)}C(fy,"inspectHTMLCollection");function Nb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),a=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=Sn(r.map(d=>[d,t.getAttribute(d)]),e,K1," ")),e.truncate-=l.length;let p=e.truncate,u=fy(t.children,e);return u&&u.length>p&&(u=`${hc}(${t.children.length})`),`${i}${l}${o}${u}${a}`}C(Nb,"inspectHTML");var DY=typeof Symbol=="function"&&typeof Symbol.for=="function",Sb=DY?Symbol.for("chai/inspect"):"@@chai/inspect",mc=!1;try{let t=vY();mc=t.inspect?t.inspect.custom:!1}catch{mc=!1}var g1=new WeakMap,y1={},x1={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:vb,Number:vb,bigint:bb,BigInt:bb,string:wb,String:wb,function:Tb,Function:Tb,symbol:_b,Symbol:_b,Array:O1,Date:N1,Map:H1,Set:W1,RegExp:V1,Promise:MY,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:z1,Int8Array:oi,Uint8Array:oi,Uint8ClampedArray:oi,Int16Array:oi,Uint16Array:oi,Int32Array:oi,Uint32Array:oi,Float32Array:oi,Float64Array:oi,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:G1,HTMLCollection:fy,NodeList:fy},IY=C((t,e,r)=>Sb in t&&typeof t[Sb]=="function"?t[Sb](e):mc&&mc in t&&typeof t[mc]=="function"?t[mc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&g1.has(t.constructor)?g1.get(t.constructor)(t,e):y1[r]?y1[r](t,e):"","inspectCustom"),FY=Object.prototype.toString;function dy(t,e={}){let r=F1(e,dy),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=FY.call(t).slice(8,-1)),i in x1)return x1[i](t,r);if(n&&t){let a=IY(t,r,i);if(a)return typeof a=="string"?a:dy(a,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Mp(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?Nb(t,r):"constructor"in t?t.constructor!==Object?q1(t,r):Mp(t,r):t===Object(t)?Mp(t,r):r.stylize(String(t),i)}C(dy,"inspect");var Rr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Le(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:Rr.truncateThreshold?Rr.truncateThreshold:1/0};return dy(t,i)}C(Le,"inspect");function Es(t){var e=Le(t),r=Object.prototype.toString.call(t);if(Rr.truncateThreshold&&e.length>=Rr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}C(Es,"objDisplay");function Lb(t,e){var r=_e(t,"negate"),n=_e(t,"object"),i=e[3],o=Ty(t,e),a=r?e[2]:e[1],l=_e(t,"message");return typeof a=="function"&&(a=a()),a=a||"",a=a.replace(/#\{this\}/g,function(){return Es(n)}).replace(/#\{act\}/g,function(){return Es(o)}).replace(/#\{exp\}/g,function(){return Es(i)}),l?l+": "+a:a}C(Lb,"getMessage");function Hn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}C(Hn,"transferFlags");function Eb(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Eb,"type");function Ub(){this._key="chai/deep-eql__"+Math.random()+Date.now()}C(Ub,"FakeMap");Ub.prototype={get:C(function(e){return e[this._key]},"get"),set:C(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var Q1=typeof WeakMap=="function"?WeakMap:Ub;function Rb(t,e,r){if(!r||Rs(t)||Rs(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}C(Rb,"memoizeCompare");function Pp(t,e,r,n){if(!(!r||Rs(t)||Rs(e))){var i=r.get(t);i?i.set(e,n):(i=new Q1,i.set(e,n),r.set(t,i))}}C(Pp,"memoizeSet");var Z1=Ap;function Ap(t,e,r){if(r&&r.comparator)return kb(t,e,r);var n=Hb(t,e);return n!==null?n:kb(t,e,r)}C(Ap,"deepEqual");function Hb(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:Rs(t)||Rs(e)?!1:null}C(Hb,"simpleEqual");function kb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new Q1;var n=r&&r.comparator,i=Rb(t,e,r.memoize);if(i!==null)return i;var o=Rb(e,t,r.memoize);if(o!==null)return o;if(n){var a=n(t,e);if(a===!1||a===!0)return Pp(t,e,r.memoize,a),a;var l=Hb(t,e);if(l!==null)return l}var p=Eb(t);if(p!==Eb(e))return Pp(t,e,r.memoize,!1),!1;Pp(t,e,r.memoize,!0);var u=Y1(t,e,p,r);return Pp(t,e,r.memoize,u),u}C(kb,"extensiveDeepEqual");function Y1(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Ap(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return Vb(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Po(t,e,n);case"RegExp":return X1(t,e);case"Generator":return J1(t,e,n);case"DataView":return Po(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return Po(new Uint8Array(t),new Uint8Array(e),n);case"Set":return Pb(t,e,n);case"Map":return Pb(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return tC(t,e,n)}}C(Y1,"extensiveDeepEqualByType");function X1(t,e){return t.toString()===e.toString()}C(X1,"regexpEqual");function Pb(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(C(function(a,l){n.push([a,l])},"gatherEntries")),e.forEach(C(function(a,l){i.push([a,l])},"gatherEntries")),Po(n.sort(),i.sort(),r)}C(Pb,"entriesEqual");function Po(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Ap(t[i],e[i],r)===!1)return!1;return!0}C(Po,"iterableEqual");function J1(t,e,r){return Po(my(t),my(e),r)}C(J1,"generatorEqual");function eC(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}C(eC,"hasIteratorFunction");function Mb(t){if(eC(t))try{return my(t[Symbol.iterator]())}catch{return[]}return[]}C(Mb,"getIteratorEntries");function my(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}C(my,"getGeneratorEntries");function Ab(t){var e=[];for(var r in t)e.push(r);return e}C(Ab,"getEnumerableKeys");function Db(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}C(Db,"getEnumerableSymbols");function Vb(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Ap(t[r[o]],e[r[o]],n)===!1)return!1;return!0}C(Vb,"keysEqual");function tC(t,e,r){var n=Ab(t),i=Ab(e),o=Db(t),a=Db(e);if(n=n.concat(o),i=i.concat(a),n.length&&n.length===i.length)return Po(Ib(n).sort(),Ib(i).sort())===!1?!1:Vb(t,e,n,r);var l=Mb(t),p=Mb(e);return l.length&&l.length===p.length?(l.sort(),p.sort(),Po(l,p,r)):n.length===0&&l.length===0&&i.length===0&&p.length===0}C(tC,"objectEqual");function Rs(t){return t===null||typeof t!="object"}C(Rs,"isPrimitive");function Ib(t){return t.map(C(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}C(Ib,"mapSymbols");function vy(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}C(vy,"hasProperty");function rC(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),a=null;return o?a={i:parseFloat(o[1])}:a={p:n.replace(/\\([.[\]])/g,"$1")},a})}C(rC,"parsePath");function Fb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let a=e[o];n&&(typeof a.p>"u"?n=n[a.i]:n=n[a.p],o===r-1&&(i=n))}return i}C(Fb,"internalGetPathValue");function Bb(t,e){let r=rC(e),n=r[r.length-1],i={parent:r.length>1?Fb(t,r,r.length-1):t,name:n.p||n.i,value:Fb(t,r)};return i.exists=vy(i.parent,i.name),i}C(Bb,"getPathInfo");function _(t,e,r,n){return _e(this,"ssfi",r||_),_e(this,"lockSsfi",n),_e(this,"object",t),_e(this,"message",e),_e(this,"eql",Rr.deepEqual||Z1),yc(this)}C(_,"Assertion");Object.defineProperty(_,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Rr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Rr.includeStack=t}});Object.defineProperty(_,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Rr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Rr.showDiff=t}});_.addProperty=function(t,e){Wb(this.prototype,t,e)};_.addMethod=function(t,e){$b(this.prototype,t,e)};_.addChainableMethod=function(t,e,r){zb(this.prototype,t,e,r)};_.overwriteProperty=function(t,e){jb(this.prototype,t,e)};_.overwriteMethod=function(t,e){qb(this.prototype,t,e)};_.overwriteChainableMethod=function(t,e,r){Gb(this.prototype,t,e,r)};_.prototype.assert=function(t,e,r,n,i,o){var a=Ob(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),Rr.showDiff!==!0&&(o=!1),!a){e=Lb(this,arguments);var l=Ty(this,arguments),p={actual:l,expected:n,showDiff:o},u=Zb(this,arguments);throw u&&(p.operator=u),new ze(e,p,Rr.includeStack?this.assert:_e(this,"ssfi"))}};Object.defineProperty(_.prototype,"_obj",{get:function(){return _e(this,"object")},set:function(t){_e(this,"object",t)}});function Dp(){return Rr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}C(Dp,"isProxyEnabled");function Wb(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:C(function n(){!Dp()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new _;return Hn(this,o),o},"propertyGetter"),configurable:!0})}C(Wb,"addProperty");var CY=Object.getOwnPropertyDescriptor(function(){},"length");function Ip(t,e,r){return CY.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}C(Ip,"addLengthGuard");function nC(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}C(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}C(nC,"getProperties");var S1=["__flags","__methods","_obj","assert"];function yc(t,e){return Dp()?new Proxy(t,{get:C(function r(n,i){if(typeof i=="string"&&Rr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,a=4;throw nC(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&S1.indexOf(l)===-1){var p=iC(i,l,a);p<a&&(o=l,a=p)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return S1.indexOf(i)===-1&&!_e(n,"lockSsfi")&&_e(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}C(yc,"proxify");function iC(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var a=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(a===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}C(iC,"stringDistanceCapped");function $b(t,e,r){var n=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new _;return Hn(this,o),o},"methodWrapper");Ip(n,e,!1),t[e]=yc(n,e)}C($b,"addMethod");function jb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=C(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:C(function o(){!Dp()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).call(this);if(_e(this,"lockSsfi",a),l!==void 0)return l;var p=new _;return Hn(this,p),p},"overwritingPropertyGetter"),configurable:!0})}C(jb,"overwriteProperty");function qb(t,e,r){var n=t[e],i=C(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(_e(this,"lockSsfi",a),l!==void 0)return l;var p=new _;return Hn(this,p),p},"overwritingMethodWrapper");Ip(o,e,!1),t[e]=yc(o,e)}C(qb,"overwriteMethod");var OY=typeof Object.setPrototypeOf=="function",T1=C(function(){},"testFn"),NY=Object.getOwnPropertyNames(T1).filter(function(t){var e=Object.getOwnPropertyDescriptor(T1,t);return typeof e!="object"?!0:!e.configurable}),LY=Function.prototype.call,UY=Function.prototype.apply;function zb(t,e,r,n){typeof n!="function"&&(n=C(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:C(function(){i.chainingBehavior.call(this);var a=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",a);var u=i.method.apply(this,arguments);if(u!==void 0)return u;var d=new _;return Hn(this,d),d},"chainableMethodWrapper");if(Ip(a,e,!0),OY){var l=Object.create(this);l.call=LY,l.apply=UY,Object.setPrototypeOf(a,l)}else{var p=Object.getOwnPropertyNames(t);p.forEach(function(u){if(NY.indexOf(u)===-1){var d=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(a,u,d)}})}return Hn(this,a),yc(a)},"chainableMethodGetter"),configurable:!0})}C(zb,"addChainableMethod");function Gb(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=C(function(){var p=n(o).call(this);if(p!==void 0)return p;var u=new _;return Hn(this,u),u},"overwritingChainableMethodGetter");var a=i.method;i.method=C(function(){var p=r(a).apply(this,arguments);if(p!==void 0)return p;var u=new _;return Hn(this,u),u},"overwritingChainableMethodWrapper")}C(Gb,"overwriteChainableMethod");function hy(t,e){return Le(t)<Le(e)?-1:1}C(hy,"compareByInspect");function Kb(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}C(Kb,"getOwnEnumerablePropertySymbols");function Qb(t){return Object.keys(t).concat(Kb(t))}C(Qb,"getOwnEnumerableProperties");function oC(t){return t!==t}C(oC,"_isNaN");var gy=Number.isNaN||oC;function sC(t){var e=Ye(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}C(sC,"isObjectType");function Zb(t,e){var r=_e(t,"operator"),n=_e(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var a=sC(i);return/\snot\s/.test(o)?a?"notDeepStrictEqual":"notStrictEqual":a?"deepStrictEqual":"strictEqual"}}C(Zb,"getOperator");function by(t){return t.name}C(by,"getName");function yy(t){return Object.prototype.toString.call(t)==="[object RegExp]"}C(yy,"isRegExp");var{flag:P}=uy;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){_.addProperty(t)});_.addProperty("not",function(){P(this,"negate",!0)});_.addProperty("deep",function(){P(this,"deep",!0)});_.addProperty("nested",function(){P(this,"nested",!0)});_.addProperty("own",function(){P(this,"own",!0)});_.addProperty("ordered",function(){P(this,"ordered",!0)});_.addProperty("any",function(){P(this,"any",!0),P(this,"all",!1)});_.addProperty("all",function(){P(this,"all",!0),P(this,"any",!1)});var v1={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function Yb(t,e){e&&P(this,"message",e),t=t.toLowerCase();var r=P(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Ye(r).toLowerCase();v1.function.includes(t)?this.assert(v1[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}C(Yb,"an");_.addChainableMethod("an",Yb);_.addChainableMethod("a",Yb);function aC(t,e){return gy(t)&&gy(e)||t===e}C(aC,"SameValueZero");function Fp(){P(this,"contains",!0)}C(Fp,"includeChainingBehavior");function Cp(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=Ye(r).toLowerCase(),i=P(this,"message"),o=P(this,"negate"),a=P(this,"ssfi"),l=P(this,"deep"),p=l?"deep ":"",u=l?P(this,"eql"):aC;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new ze(i+"unable to use .deep.include with WeakSet",void 0,a);d=r.has(t);break;case"map":r.forEach(function(w){d=d||u(w,t)});break;case"set":l?r.forEach(function(w){d=d||u(w,t)}):d=r.has(t);break;case"array":l?d=r.some(function(w){return u(w,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new ze(i+"the given combination of arguments ("+n+" and "+Ye(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Ye(t).toLowerCase(),void 0,a);var m=Object.keys(t),g=null,x=0;if(m.forEach(function(w){var v=new _(r);if(Hn(this,v,!0),P(v,"lockSsfi",!0),!o||m.length===1){v.property(w,t[w]);return}try{v.property(w,t[w])}catch(F){if(!Gr.compatibleConstructor(F,ze))throw F;g===null&&(g=F),x++}},this),o&&m.length>1&&x===m.length)throw g;return}this.assert(d,"expected #{this} to "+p+"include "+Le(t),"expected #{this} to not "+p+"include "+Le(t))}C(Cp,"include");_.addChainableMethod("include",Cp,Fp);_.addChainableMethod("contain",Cp,Fp);_.addChainableMethod("contains",Cp,Fp);_.addChainableMethod("includes",Cp,Fp);_.addProperty("ok",function(){this.assert(P(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});_.addProperty("true",function(){this.assert(P(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!P(this,"negate"))});_.addProperty("callable",function(){let t=P(this,"object"),e=P(this,"ssfi"),r=P(this,"message"),n=r?`${r}: `:"",i=P(this,"negate"),o=i?`${n}expected ${Le(t)} not to be a callable function`:`${n}expected ${Le(t)} to be a callable function`,a=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Ye(t));if(a&&i||!a&&!i)throw new ze(o,void 0,e)});_.addProperty("false",function(){this.assert(P(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!P(this,"negate"))});_.addProperty("null",function(){this.assert(P(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});_.addProperty("undefined",function(){this.assert(P(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});_.addProperty("NaN",function(){this.assert(gy(P(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function Xb(){var t=P(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}C(Xb,"assertExist");_.addProperty("exist",Xb);_.addProperty("exists",Xb);_.addProperty("empty",function(){var t=P(this,"object"),e=P(this,"ssfi"),r=P(this,"message"),n;switch(r=r?r+": ":"",Ye(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new ze(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+by(t);throw new ze(i.trim(),void 0,e);default:if(t!==Object(t))throw new ze(r+".empty was passed non-string primitive "+Le(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function Jb(){var t=P(this,"object"),e=Ye(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}C(Jb,"checkArguments");_.addProperty("arguments",Jb);_.addProperty("Arguments",Jb);function wy(t,e){e&&P(this,"message",e);var r=P(this,"object");if(P(this,"deep")){var n=P(this,"lockSsfi");P(this,"lockSsfi",!0),this.eql(t),P(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}C(wy,"assertEqual");_.addMethod("equal",wy);_.addMethod("equals",wy);_.addMethod("eq",wy);function ew(t,e){e&&P(this,"message",e);var r=P(this,"eql");this.assert(r(t,P(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}C(ew,"assertEql");_.addMethod("eql",ew);_.addMethod("eqls",ew);function _y(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ye(r).toLowerCase(),p=Ye(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to above must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to above must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}C(_y,"assertAbove");_.addMethod("above",_y);_.addMethod("gt",_y);_.addMethod("greaterThan",_y);function Ey(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ye(r).toLowerCase(),p=Ye(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to least must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to least must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}C(Ey,"assertLeast");_.addMethod("least",Ey);_.addMethod("gte",Ey);_.addMethod("greaterThanOrEqual",Ey);function Ry(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ye(r).toLowerCase(),p=Ye(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to below must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to below must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}C(Ry,"assertBelow");_.addMethod("below",Ry);_.addMethod("lt",Ry);_.addMethod("lessThan",Ry);function ky(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ye(r).toLowerCase(),p=Ye(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to most must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to most must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}C(ky,"assertMost");_.addMethod("most",ky);_.addMethod("lte",ky);_.addMethod("lessThanOrEqual",ky);_.addMethod("within",function(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"doLength"),o=P(this,"message"),a=o?o+": ":"",l=P(this,"ssfi"),p=Ye(n).toLowerCase(),u=Ye(t).toLowerCase(),d=Ye(e).toLowerCase(),m,g=!0,x=u==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&p!=="map"&&p!=="set"&&new _(n,o,l,!0).to.have.property("length"),!i&&p==="date"&&(u!=="date"||d!=="date"))m=a+"the arguments to within must be dates";else if((u!=="number"||d!=="number")&&(i||p==="number"))m=a+"the arguments to within must be numbers";else if(!i&&p!=="date"&&p!=="number"){var w=p==="string"?"'"+n+"'":n;m=a+"expected "+w+" to be a number or a date"}else g=!1;if(g)throw new ze(m,void 0,l);if(i){var v="length",F;p==="map"||p==="set"?(v="size",F=n.size):F=n.length,this.assert(F>=t&&F<=e,"expected #{this} to have a "+v+" within "+x,"expected #{this} to not have a "+v+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function tw(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"ssfi"),i=P(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new ze(i+"The instanceof assertion needs a constructor but "+Ye(t)+" was given.",void 0,n)):l}var a=by(t);a==null&&(a="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+a,"expected #{this} to not be an instance of "+a)}C(tw,"assertInstanceOf");_.addMethod("instanceof",tw);_.addMethod("instanceOf",tw);function rw(t,e,r){r&&P(this,"message",r);var n=P(this,"nested"),i=P(this,"own"),o=P(this,"message"),a=P(this,"object"),l=P(this,"ssfi"),p=typeof t;if(o=o?o+": ":"",n){if(p!=="string")throw new ze(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(p!=="string"&&p!=="number"&&p!=="symbol")throw new ze(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new ze(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(a==null)throw new ze(o+"Target cannot be null or undefined.",void 0,l);var u=P(this,"deep"),d=P(this,"negate"),m=n?Bb(a,t):null,g=n?m.value:a[t],x=u?P(this,"eql"):(F,M)=>F===M,w="";u&&(w+="deep "),i&&(w+="own "),n&&(w+="nested "),w+="property ";var v;i?v=Object.prototype.hasOwnProperty.call(a,t):n?v=m.exists:v=vy(a,t),(!d||arguments.length===1)&&this.assert(v,"expected #{this} to have "+w+Le(t),"expected #{this} to not have "+w+Le(t)),arguments.length>1&&this.assert(v&&x(e,g),"expected #{this} to have "+w+Le(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+w+Le(t)+" of #{act}",e,g),P(this,"object",g)}C(rw,"assertProperty");_.addMethod("property",rw);function nw(t,e,r){P(this,"own",!0),rw.apply(this,arguments)}C(nw,"assertOwnProperty");_.addMethod("ownProperty",nw);_.addMethod("haveOwnProperty",nw);function iw(t,e,r){typeof e=="string"&&(r=e,e=null),r&&P(this,"message",r);var n=P(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=P(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Le(t)+" on #{this} to match "+Le(e)+", got "+Le(i),"expected the own property descriptor for "+Le(t)+" on #{this} to not match "+Le(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Le(t),"expected #{this} to not have an own property descriptor for "+Le(t)),P(this,"object",i)}C(iw,"assertOwnPropertyDescriptor");_.addMethod("ownPropertyDescriptor",iw);_.addMethod("haveOwnPropertyDescriptor",iw);function ow(){P(this,"doLength",!0)}C(ow,"assertLengthChain");function sw(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=Ye(r).toLowerCase(),i=P(this,"message"),o=P(this,"ssfi"),a="length",l;switch(n){case"map":case"set":a="size",l=r.size;break;default:new _(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+a+" of #{exp} but got #{act}","expected #{this} to not have a "+a+" of #{act}",t,l)}C(sw,"assertLength");_.addChainableMethod("length",sw,ow);_.addChainableMethod("lengthOf",sw,ow);function aw(t,e){e&&P(this,"message",e);var r=P(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}C(aw,"assertMatch");_.addMethod("match",aw);_.addMethod("matches",aw);_.addMethod("string",function(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi");new _(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Le(t),"expected #{this} to not contain "+Le(t))});function cw(t){var e=P(this,"object"),r=Ye(e),n=Ye(t),i=P(this,"ssfi"),o=P(this,"deep"),a,l="",p,u=!0,d=P(this,"message");d=d?d+": ":"";var m=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",p=[],e.forEach(function(U,K){p.push(K)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(p=Qb(e),n){case"Array":if(arguments.length>1)throw new ze(m,void 0,i);break;case"Object":if(arguments.length>1)throw new ze(m,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(U){return typeof U=="symbol"?U:String(U)})}if(!t.length)throw new ze(d+"keys required",void 0,i);var g=t.length,x=P(this,"any"),w=P(this,"all"),v=t,F=o?P(this,"eql"):(U,K)=>U===K;if(!x&&!w&&(w=!0),x&&(u=v.some(function(U){return p.some(function(K){return F(U,K)})})),w&&(u=v.every(function(U){return p.some(function(K){return F(U,K)})}),P(this,"contains")||(u=u&&t.length==p.length)),g>1){t=t.map(function(U){return Le(U)});var M=t.pop();w&&(a=t.join(", ")+", and "+M),x&&(a=t.join(", ")+", or "+M)}else a=Le(t[0]);a=(g>1?"keys ":"key ")+a,a=(P(this,"contains")?"contain ":"have ")+a,this.assert(u,"expected #{this} to "+l+a,"expected #{this} to not "+l+a,v.slice(0).sort(hy),p.sort(hy),!0)}C(cw,"assertKeys");_.addMethod("keys",cw);_.addMethod("key",cw);function Py(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"ssfi"),o=P(this,"message"),a=P(this,"negate")||!1;new _(n,o,i,!0).is.a("function"),(yy(t)||typeof t=="string")&&(e=t,t=null);let l,p=!1;try{n()}catch(U){p=!0,l=U}var u=t===void 0&&e===void 0,d=!!(t&&e),m=!1,g=!1;if(u||!u&&!a){var x="an error";t instanceof Error?x="#{exp}":t&&(x=Gr.getConstructorName(t));let U=l;if(l instanceof Error)U=l.toString();else if(typeof l=="string")U=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{U=Gr.getConstructorName(l)}catch{}this.assert(p,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),U)}if(t&&l){if(t instanceof Error){var w=Gr.compatibleInstance(l,t);w===a&&(d&&a?m=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!a?" but #{act} was thrown":""),t.toString(),l.toString()))}var v=Gr.compatibleConstructor(l,t);v===a&&(d&&a?m=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Gr.getConstructorName(t),l instanceof Error?l.toString():l&&Gr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var F="including";yy(e)&&(F="matching");var M=Gr.compatibleMessage(l,e);M===a&&(d&&a?g=!0:this.assert(a,"expected #{this} to throw error "+F+" #{exp} but got #{act}","expected #{this} to throw error not "+F+" #{exp}",e,Gr.getMessage(l)))}m&&g&&this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Gr.getConstructorName(t),l instanceof Error?l.toString():l&&Gr.getConstructorName(l)),P(this,"object",l)}C(Py,"assertThrows");_.addMethod("throw",Py);_.addMethod("throws",Py);_.addMethod("Throw",Py);function lw(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Le(t),"expected #{this} to not respond to "+Le(t))}C(lw,"respondTo");_.addMethod("respondTo",lw);_.addMethod("respondsTo",lw);_.addProperty("itself",function(){P(this,"itself",!0)});function pw(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+Es(t),"expected #{this} to not satisfy"+Es(t),!P(this,"negate"),n)}C(pw,"satisfy");_.addMethod("satisfy",pw);_.addMethod("satisfies",pw);function uw(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");if(new _(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var a=e===void 0?", and a delta is required":"";throw new ze(i+"the arguments to closeTo or approximately must be numbers"+a,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}C(uw,"closeTo");_.addMethod("closeTo",uw);_.addMethod("approximately",uw);function cC(t,e,r,n,i){let o=Array.from(e),a=Array.from(t);if(!n){if(a.length!==o.length)return!1;o=o.slice()}return a.every(function(l,p){if(i)return r?r(l,o[p]):l===o[p];if(!r){var u=o.indexOf(l);return u===-1?!1:(n||o.splice(u,1),!0)}return o.some(function(d,m){return r(l,d)?(n||o.splice(m,1),!0):!1})})}C(cC,"isSubsetOf");_.addMethod("members",function(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi");new _(r,n,i,!0).to.be.iterable,new _(t,n,i,!0).to.be.iterable;var o=P(this,"contains"),a=P(this,"ordered"),l,p,u;o?(l=a?"an ordered superset":"a superset",p="expected #{this} to be "+l+" of #{exp}",u="expected #{this} to not be "+l+" of #{exp}"):(l=a?"ordered members":"members",p="expected #{this} to have the same "+l+" as #{exp}",u="expected #{this} to not have the same "+l+" as #{exp}");var d=P(this,"deep")?P(this,"eql"):void 0;this.assert(cC(t,r,d,o,a),p,u,t,r,!0)});_.addProperty("iterable",function(t){t&&P(this,"message",t);var e=P(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function lC(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi"),o=P(this,"contains"),a=P(this,"deep"),l=P(this,"eql");new _(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(p){return r.indexOf(p)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):a?this.assert(t.some(function(p){return l(r,p)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}C(lC,"oneOf");_.addMethod("oneOf",lC);function fw(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","change"),P(this,"realDelta",l!==a),this.assert(a!==l,"expected "+p+" to change","expected "+p+" to not change")}C(fw,"assertChanges");_.addMethod("change",fw);_.addMethod("changes",fw);function dw(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),new _(a,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","increase"),P(this,"realDelta",l-a),this.assert(l-a>0,"expected "+p+" to increase","expected "+p+" to not increase")}C(dw,"assertIncreases");_.addMethod("increase",dw);_.addMethod("increases",dw);function mw(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),new _(a,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","decrease"),P(this,"realDelta",a-l),this.assert(l-a<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}C(mw,"assertDecreases");_.addMethod("decrease",mw);_.addMethod("decreases",mw);function pC(t,e){e&&P(this,"message",e);var r=P(this,"deltaMsgObj"),n=P(this,"initialDeltaValue"),i=P(this,"finalDeltaValue"),o=P(this,"deltaBehavior"),a=P(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=a===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}C(pC,"assertDelta");_.addMethod("by",pC);_.addProperty("extensible",function(){var t=P(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});_.addProperty("sealed",function(){var t=P(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});_.addProperty("frozen",function(){var t=P(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});_.addProperty("finite",function(t){var e=P(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function xy(t,e){return new _(t,e)}C(xy,"expect");xy.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new ze(r,{actual:t,expected:e,operator:n},xy.fail)};var uC={};Cb(uC,{Should:()=>VY,should:()=>HY});function hw(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new _(this.valueOf(),null,t):new _(this,null,t)}C(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}C(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,a){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new ze(o,{actual:n,expected:i,operator:a},r.fail)},r.equal=function(n,i,o){new _(n,o).to.equal(i)},r.Throw=function(n,i,o,a){new _(n,a).to.Throw(i,o)},r.exist=function(n,i){new _(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new _(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,a){new _(n,a).to.not.Throw(i,o)},r.not.exist=function(n,i){new _(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}C(hw,"loadShould");var HY=hw,VY=hw;function b(t,e){var r=new _(null,null,b,!0);r.assert(t,e,"[ negation message unavailable ]")}C(b,"assert");b.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new ze(r,{actual:t,expected:e,operator:n},b.fail)};b.isOk=function(t,e){new _(t,e,b.isOk,!0).is.ok};b.isNotOk=function(t,e){new _(t,e,b.isNotOk,!0).is.not.ok};b.equal=function(t,e,r){var n=new _(t,r,b.equal,!0);n.assert(e==_e(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};b.notEqual=function(t,e,r){var n=new _(t,r,b.notEqual,!0);n.assert(e!=_e(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};b.strictEqual=function(t,e,r){new _(t,r,b.strictEqual,!0).to.equal(e)};b.notStrictEqual=function(t,e,r){new _(t,r,b.notStrictEqual,!0).to.not.equal(e)};b.deepEqual=b.deepStrictEqual=function(t,e,r){new _(t,r,b.deepEqual,!0).to.eql(e)};b.notDeepEqual=function(t,e,r){new _(t,r,b.notDeepEqual,!0).to.not.eql(e)};b.isAbove=function(t,e,r){new _(t,r,b.isAbove,!0).to.be.above(e)};b.isAtLeast=function(t,e,r){new _(t,r,b.isAtLeast,!0).to.be.least(e)};b.isBelow=function(t,e,r){new _(t,r,b.isBelow,!0).to.be.below(e)};b.isAtMost=function(t,e,r){new _(t,r,b.isAtMost,!0).to.be.most(e)};b.isTrue=function(t,e){new _(t,e,b.isTrue,!0).is.true};b.isNotTrue=function(t,e){new _(t,e,b.isNotTrue,!0).to.not.equal(!0)};b.isFalse=function(t,e){new _(t,e,b.isFalse,!0).is.false};b.isNotFalse=function(t,e){new _(t,e,b.isNotFalse,!0).to.not.equal(!1)};b.isNull=function(t,e){new _(t,e,b.isNull,!0).to.equal(null)};b.isNotNull=function(t,e){new _(t,e,b.isNotNull,!0).to.not.equal(null)};b.isNaN=function(t,e){new _(t,e,b.isNaN,!0).to.be.NaN};b.isNotNaN=function(t,e){new _(t,e,b.isNotNaN,!0).not.to.be.NaN};b.exists=function(t,e){new _(t,e,b.exists,!0).to.exist};b.notExists=function(t,e){new _(t,e,b.notExists,!0).to.not.exist};b.isUndefined=function(t,e){new _(t,e,b.isUndefined,!0).to.equal(void 0)};b.isDefined=function(t,e){new _(t,e,b.isDefined,!0).to.not.equal(void 0)};b.isCallable=function(t,e){new _(t,e,b.isCallable,!0).is.callable};b.isNotCallable=function(t,e){new _(t,e,b.isNotCallable,!0).is.not.callable};b.isObject=function(t,e){new _(t,e,b.isObject,!0).to.be.a("object")};b.isNotObject=function(t,e){new _(t,e,b.isNotObject,!0).to.not.be.a("object")};b.isArray=function(t,e){new _(t,e,b.isArray,!0).to.be.an("array")};b.isNotArray=function(t,e){new _(t,e,b.isNotArray,!0).to.not.be.an("array")};b.isString=function(t,e){new _(t,e,b.isString,!0).to.be.a("string")};b.isNotString=function(t,e){new _(t,e,b.isNotString,!0).to.not.be.a("string")};b.isNumber=function(t,e){new _(t,e,b.isNumber,!0).to.be.a("number")};b.isNotNumber=function(t,e){new _(t,e,b.isNotNumber,!0).to.not.be.a("number")};b.isFinite=function(t,e){new _(t,e,b.isFinite,!0).to.be.finite};b.isBoolean=function(t,e){new _(t,e,b.isBoolean,!0).to.be.a("boolean")};b.isNotBoolean=function(t,e){new _(t,e,b.isNotBoolean,!0).to.not.be.a("boolean")};b.typeOf=function(t,e,r){new _(t,r,b.typeOf,!0).to.be.a(e)};b.notTypeOf=function(t,e,r){new _(t,r,b.notTypeOf,!0).to.not.be.a(e)};b.instanceOf=function(t,e,r){new _(t,r,b.instanceOf,!0).to.be.instanceOf(e)};b.notInstanceOf=function(t,e,r){new _(t,r,b.notInstanceOf,!0).to.not.be.instanceOf(e)};b.include=function(t,e,r){new _(t,r,b.include,!0).include(e)};b.notInclude=function(t,e,r){new _(t,r,b.notInclude,!0).not.include(e)};b.deepInclude=function(t,e,r){new _(t,r,b.deepInclude,!0).deep.include(e)};b.notDeepInclude=function(t,e,r){new _(t,r,b.notDeepInclude,!0).not.deep.include(e)};b.nestedInclude=function(t,e,r){new _(t,r,b.nestedInclude,!0).nested.include(e)};b.notNestedInclude=function(t,e,r){new _(t,r,b.notNestedInclude,!0).not.nested.include(e)};b.deepNestedInclude=function(t,e,r){new _(t,r,b.deepNestedInclude,!0).deep.nested.include(e)};b.notDeepNestedInclude=function(t,e,r){new _(t,r,b.notDeepNestedInclude,!0).not.deep.nested.include(e)};b.ownInclude=function(t,e,r){new _(t,r,b.ownInclude,!0).own.include(e)};b.notOwnInclude=function(t,e,r){new _(t,r,b.notOwnInclude,!0).not.own.include(e)};b.deepOwnInclude=function(t,e,r){new _(t,r,b.deepOwnInclude,!0).deep.own.include(e)};b.notDeepOwnInclude=function(t,e,r){new _(t,r,b.notDeepOwnInclude,!0).not.deep.own.include(e)};b.match=function(t,e,r){new _(t,r,b.match,!0).to.match(e)};b.notMatch=function(t,e,r){new _(t,r,b.notMatch,!0).to.not.match(e)};b.property=function(t,e,r){new _(t,r,b.property,!0).to.have.property(e)};b.notProperty=function(t,e,r){new _(t,r,b.notProperty,!0).to.not.have.property(e)};b.propertyVal=function(t,e,r,n){new _(t,n,b.propertyVal,!0).to.have.property(e,r)};b.notPropertyVal=function(t,e,r,n){new _(t,n,b.notPropertyVal,!0).to.not.have.property(e,r)};b.deepPropertyVal=function(t,e,r,n){new _(t,n,b.deepPropertyVal,!0).to.have.deep.property(e,r)};b.notDeepPropertyVal=function(t,e,r,n){new _(t,n,b.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};b.ownProperty=function(t,e,r){new _(t,r,b.ownProperty,!0).to.have.own.property(e)};b.notOwnProperty=function(t,e,r){new _(t,r,b.notOwnProperty,!0).to.not.have.own.property(e)};b.ownPropertyVal=function(t,e,r,n){new _(t,n,b.ownPropertyVal,!0).to.have.own.property(e,r)};b.notOwnPropertyVal=function(t,e,r,n){new _(t,n,b.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};b.deepOwnPropertyVal=function(t,e,r,n){new _(t,n,b.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};b.notDeepOwnPropertyVal=function(t,e,r,n){new _(t,n,b.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};b.nestedProperty=function(t,e,r){new _(t,r,b.nestedProperty,!0).to.have.nested.property(e)};b.notNestedProperty=function(t,e,r){new _(t,r,b.notNestedProperty,!0).to.not.have.nested.property(e)};b.nestedPropertyVal=function(t,e,r,n){new _(t,n,b.nestedPropertyVal,!0).to.have.nested.property(e,r)};b.notNestedPropertyVal=function(t,e,r,n){new _(t,n,b.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};b.deepNestedPropertyVal=function(t,e,r,n){new _(t,n,b.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};b.notDeepNestedPropertyVal=function(t,e,r,n){new _(t,n,b.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};b.lengthOf=function(t,e,r){new _(t,r,b.lengthOf,!0).to.have.lengthOf(e)};b.hasAnyKeys=function(t,e,r){new _(t,r,b.hasAnyKeys,!0).to.have.any.keys(e)};b.hasAllKeys=function(t,e,r){new _(t,r,b.hasAllKeys,!0).to.have.all.keys(e)};b.containsAllKeys=function(t,e,r){new _(t,r,b.containsAllKeys,!0).to.contain.all.keys(e)};b.doesNotHaveAnyKeys=function(t,e,r){new _(t,r,b.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};b.doesNotHaveAllKeys=function(t,e,r){new _(t,r,b.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};b.hasAnyDeepKeys=function(t,e,r){new _(t,r,b.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};b.hasAllDeepKeys=function(t,e,r){new _(t,r,b.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};b.containsAllDeepKeys=function(t,e,r){new _(t,r,b.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};b.doesNotHaveAnyDeepKeys=function(t,e,r){new _(t,r,b.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};b.doesNotHaveAllDeepKeys=function(t,e,r){new _(t,r,b.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};b.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new _(t,n,b.throws,!0).to.throw(e,r);return _e(i,"object")};b.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new _(t,n,b.doesNotThrow,!0).to.not.throw(e,r)};b.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new ze(n+'Invalid operator "'+e+'"',void 0,b.operator)}var o=new _(i,n,b.operator,!0);o.assert(_e(o,"object")===!0,"expected "+Le(t)+" to be "+e+" "+Le(r),"expected "+Le(t)+" to not be "+e+" "+Le(r))};b.closeTo=function(t,e,r,n){new _(t,n,b.closeTo,!0).to.be.closeTo(e,r)};b.approximately=function(t,e,r,n){new _(t,n,b.approximately,!0).to.be.approximately(e,r)};b.sameMembers=function(t,e,r){new _(t,r,b.sameMembers,!0).to.have.same.members(e)};b.notSameMembers=function(t,e,r){new _(t,r,b.notSameMembers,!0).to.not.have.same.members(e)};b.sameDeepMembers=function(t,e,r){new _(t,r,b.sameDeepMembers,!0).to.have.same.deep.members(e)};b.notSameDeepMembers=function(t,e,r){new _(t,r,b.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};b.sameOrderedMembers=function(t,e,r){new _(t,r,b.sameOrderedMembers,!0).to.have.same.ordered.members(e)};b.notSameOrderedMembers=function(t,e,r){new _(t,r,b.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};b.sameDeepOrderedMembers=function(t,e,r){new _(t,r,b.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};b.notSameDeepOrderedMembers=function(t,e,r){new _(t,r,b.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};b.includeMembers=function(t,e,r){new _(t,r,b.includeMembers,!0).to.include.members(e)};b.notIncludeMembers=function(t,e,r){new _(t,r,b.notIncludeMembers,!0).to.not.include.members(e)};b.includeDeepMembers=function(t,e,r){new _(t,r,b.includeDeepMembers,!0).to.include.deep.members(e)};b.notIncludeDeepMembers=function(t,e,r){new _(t,r,b.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};b.includeOrderedMembers=function(t,e,r){new _(t,r,b.includeOrderedMembers,!0).to.include.ordered.members(e)};b.notIncludeOrderedMembers=function(t,e,r){new _(t,r,b.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};b.includeDeepOrderedMembers=function(t,e,r){new _(t,r,b.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};b.notIncludeDeepOrderedMembers=function(t,e,r){new _(t,r,b.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};b.oneOf=function(t,e,r){new _(t,r,b.oneOf,!0).to.be.oneOf(e)};b.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Le(t)} to be an iterable`:`expected ${Le(t)} to be an iterable`,new ze(e,void 0,b.isIterable)};b.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.changes,!0).to.change(e,r)};b.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.changesBy,!0).to.change(e,r).by(n)};b.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.doesNotChange,!0).to.not.change(e,r)};b.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.changesButNotBy,!0).to.change(e,r).but.not.by(n)};b.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.increases,!0).to.increase(e,r)};b.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.increasesBy,!0).to.increase(e,r).by(n)};b.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.doesNotIncrease,!0).to.not.increase(e,r)};b.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};b.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.decreases,!0).to.decrease(e,r)};b.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.decreasesBy,!0).to.decrease(e,r).by(n)};b.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.doesNotDecrease,!0).to.not.decrease(e,r)};b.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new _(t,i,b.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};b.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};b.ifError=function(t){if(t)throw t};b.isExtensible=function(t,e){new _(t,e,b.isExtensible,!0).to.be.extensible};b.isNotExtensible=function(t,e){new _(t,e,b.isNotExtensible,!0).to.not.be.extensible};b.isSealed=function(t,e){new _(t,e,b.isSealed,!0).to.be.sealed};b.isNotSealed=function(t,e){new _(t,e,b.isNotSealed,!0).to.not.be.sealed};b.isFrozen=function(t,e){new _(t,e,b.isFrozen,!0).to.be.frozen};b.isNotFrozen=function(t,e){new _(t,e,b.isNotFrozen,!0).to.not.be.frozen};b.isEmpty=function(t,e){new _(t,e,b.isEmpty,!0).to.be.empty};b.isNotEmpty=function(t,e){new _(t,e,b.isNotEmpty,!0).to.not.be.empty};C(function t(e,r){return b[r]=b[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var b1=[];function BY(t){let e={AssertionError:ze,util:uy,config:Rr,expect:xy,assert:b,Assertion:_,...uC};return~b1.indexOf(t)||(t(e,uy),b1.push(t)),e}C(BY,"use");var Op=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new $(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new $(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new $(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var fC=fr(require("node:path"),1),My=class{get uri(){return this._uri}get filename(){return fC.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new $(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof ce?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Op(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new ce(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let a=n+1;a<i;a++)o.push(this._lines[a]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof $))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new $(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof ce))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new ce(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new gw(n)}}};function jY(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var gw=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=jY(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new yw(i,e-a)}},yw=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var Ay=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Np;this.onDidChangeActiveTextEditor=Np;this.onDidChangeVisibleTextEditors=Np;this.onDidChangeTextEditorSelection=Np;this.onDidChangeTextEditorVisibleRanges=Np;this.configuration=new lp,this.keyValueStore=new pp,this.messages=new up,this.clipboard=new ap(this.client),this.capabilities=new $g,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await YI(this.client);this.assetsRoot_=xw.default.join(e,"assets"),this.cursorlessNeovimPath=xw.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return d1()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return aF(e)}onDidOpenTextDocument(e,r,n){return cF(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let a,l;e?(a=[],l=[]):(a=await Bg(r,this.client),l=await ZI(r,this.client,i));let p=this.toNeovimEditor(r,n,i,l,a);return jr().emitEvent("onDidOpenTextDocument",p.document),p}toNeovimEditor(e,r,n,i,o){let a=this.getTextDocument(r),l=this.getTextEditor(e);return a?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),a.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),a=new My(dF.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,a)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,a)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new qg(sM(),this.client,this,e,a,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){rF(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,dC.pull)(this.disposables,...e)}};function Np(){return{dispose(){}}}var Dy=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var zY=BigInt(1e9);function mC(t,e=BigInt(1e6)){return Number(t*e/zY)/Number(e)}async function Iy(t,e=[],r=[],n,i,o,a,l){let p={documentContents:n.document.getText(),selections:n.selections.map(kk)};o!=null&&(p.marks=o),l!=null&&(p.metadata=l),e.includes("clipboard")||(p.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(p.visibleRanges=n.visibleRanges.map(Jc));for(let u of fa){let d=t?.get(u),m=`${u}Mark`;d!=null&&!e.includes(m)&&(p[m]=d.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let u=a?.startTimestamp;if(u==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-u;p.timeOffsetSeconds=mC(d)}return p}var GY=fr(vl(),1);function hC(t,e,r,n,i,o,a,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:a,scopeProvider:o,takeSnapshot(p,u,d,m,g){return Iy(e,p,u,d,m,g,void 0,void 0)},setStoredTarget(p,u,d){e.set(u,d?.map(m=>zI(p,m)))},hatTokenMap:r,runIntegrationTests:l}}async function gC(t,e,r,n){let i={[eS]:async(...o)=>{(await t.mode).mode==="t"&&eF(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),p=Mf(o);if(await n.getFocusedElementType()==="terminal"&&Qo(p)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&tF(t)}return l}catch(l){if(e.runMode!=="test"){let p=l;console.error(p.stack),e.handleCommandError(p)}throw l}},"cursorless.repeatPreviousCommand":Me,"cursorless.showCheatsheet":Me,"cursorless.internal.updateCheatsheetDefaults":Me,"cursorless.recordTestCase":Me,"cursorless.recordOneTestCaseThenPause":Me,"cursorless.pauseRecording":Me,"cursorless.resumeRecording":Me,"cursorless.takeSnapshot":Me,"cursorless.recordScopeTests.showUnimplementedFacets":Me,"cursorless.recordScopeTests.saveActiveDocument":Me,"cursorless.showQuickPick":Me,"cursorless.showDocumentation":Me,"cursorless.showInstallationDependencies":Me,"cursorless.private.logQuickActions":Me,"cursorless.toggleDecorations":Me,"cursorless.recomputeDecorationStyles":Me,"cursorless.showScopeVisualizer":Me,"cursorless.hideScopeVisualizer":Me,"cursorless.analyzeCommandHistory":Me,"cursorless.keyboard.escape":Me,"cursorless.keyboard.targeted.targetHat":Me,"cursorless.keyboard.targeted.targetScope":Me,"cursorless.keyboard.targeted.targetSelection":Me,"cursorless.keyboard.targeted.clearTarget":Me,"cursorless.keyboard.targeted.runActionOnTarget":Me,"cursorless.keyboard.modal.modeOn":Me,"cursorless.keyboard.modal.modeOff":Me,"cursorless.keyboard.modal.modeToggle":Me,"cursorless.keyboard.undoTarget":Me,"cursorless.keyboard.redoTarget":Me,"cursorless.tutorial.start":Me,"cursorless.tutorial.next":Me,"cursorless.tutorial.previous":Me,"cursorless.tutorial.restart":Me,"cursorless.tutorial.resume":Me,"cursorless.tutorial.list":Me,"cursorless.documentationOpened":Me};Object.entries(i).map(([o,a])=>jr().registerCommand(o,a))}async function Me(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function yC(t){let e=t.nvim,r=new Ay(e);await r.init();let n=r.runMode==="production"?r:new xf(r,new hf,r.runMode==="test",void 0),i=new Du,o=new Dy(e),a=r.runMode==="test"?i:o,{commandApi:l,storedTargets:p,hatTokenMap:u,scopeProvider:d,injectIde:m,runIntegrationTests:g}=await qI({ide:n,commandServerApi:a});await gC(e,r,l,a);let x={testHelpers:r.runMode==="test"?hC(i,p,u,r,n,d,m,g):void 0};jr().registerExtensionApi(KI,x),console.log("activate(): Cursorless extension loaded")}function xC(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await KY(t),{sync:!1})}async function KY(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await yC(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
