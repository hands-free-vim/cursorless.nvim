"use strict";var wB=Object.create;var yu=Object.defineProperty;var _B=Object.getOwnPropertyDescriptor;var EB=Object.getOwnPropertyNames;var RB=Object.getPrototypeOf,kB=Object.prototype.hasOwnProperty;var st=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),PB=(t,e)=>{for(var r in e)yu(t,r,{get:e[r],enumerable:!0})},xE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of EB(e))!kB.call(t,i)&&i!==r&&yu(t,i,{get:()=>e[i],enumerable:!(n=_B(e,i))||n.enumerable});return t};var ur=(t,e,r)=>(r=t!=null?wB(RB(t)):{},xE(e||!t||!t.__esModule?yu(r,"default",{value:t,enumerable:!0}):r,t)),MB=t=>xE(yu({},"__esModule",{value:!0}),t);var LT=st(NT=>{"use strict";Object.defineProperty(NT,"__esModule",{value:!0});NT.default=t4;var XK=e4(require("crypto"));function e4(t){return t&&t.__esModule?t:{default:t}}var Df=new Uint8Array(256),Af=Df.length;function t4(){return Af>Df.length-16&&(XK.default.randomFillSync(Df),Af=0),Df.slice(Af,Af+=16)}});var lP=st(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});If.default=void 0;var r4=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;If.default=r4});var nl=st(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});Ff.default=void 0;var n4=i4(lP());function i4(t){return t&&t.__esModule?t:{default:t}}function o4(t){return typeof t=="string"&&n4.default.test(t)}var s4=o4;Ff.default=s4});var ol=st(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.default=void 0;il.unsafeStringify=pP;var a4=c4(nl());function c4(t){return t&&t.__esModule?t:{default:t}}var Ot=[];for(let t=0;t<256;++t)Ot.push((t+256).toString(16).slice(1));function pP(t,e=0){return Ot[t[e+0]]+Ot[t[e+1]]+Ot[t[e+2]]+Ot[t[e+3]]+"-"+Ot[t[e+4]]+Ot[t[e+5]]+"-"+Ot[t[e+6]]+Ot[t[e+7]]+"-"+Ot[t[e+8]]+Ot[t[e+9]]+"-"+Ot[t[e+10]]+Ot[t[e+11]]+Ot[t[e+12]]+Ot[t[e+13]]+Ot[t[e+14]]+Ot[t[e+15]]}function l4(t,e=0){let r=pP(t,e);if(!(0,a4.default)(r))throw TypeError("Stringified UUID is invalid");return r}var p4=l4;il.default=p4});var fP=st(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});Cf.default=void 0;var u4=d4(LT()),f4=ol();function d4(t){return t&&t.__esModule?t:{default:t}}var uP,UT,VT=0,BT=0;function m4(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node||uP,a=t.clockseq!==void 0?t.clockseq:UT;if(o==null||a==null){let g=t.random||(t.rng||u4.default)();o==null&&(o=uP=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),a==null&&(a=UT=(g[6]<<8|g[7])&16383)}let l=t.msecs!==void 0?t.msecs:Date.now(),p=t.nsecs!==void 0?t.nsecs:BT+1,u=l-VT+(p-BT)/1e4;if(u<0&&t.clockseq===void 0&&(a=a+1&16383),(u<0||l>VT)&&t.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");VT=l,BT=p,UT=a,l+=122192928e5;let d=((l&268435455)*1e4+p)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=d&255;let h=l/4294967296*1e4&268435455;i[n++]=h>>>8&255,i[n++]=h&255,i[n++]=h>>>24&15|16,i[n++]=h>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,f4.unsafeStringify)(i)}var h4=m4;Cf.default=h4});var HT=st(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.default=void 0;var g4=y4(nl());function y4(t){return t&&t.__esModule?t:{default:t}}function x4(t){if(!(0,g4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var T4=x4;Of.default=T4});var WT=st(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.URL=Ko.DNS=void 0;Ko.default=_4;var S4=ol(),v4=b4(HT());function b4(t){return t&&t.__esModule?t:{default:t}}function w4(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var dP="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Ko.DNS=dP;var mP="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Ko.URL=mP;function _4(t,e,r){function n(i,o,a,l){var p;if(typeof i=="string"&&(i=w4(i)),typeof o=="string"&&(o=(0,v4.default)(o)),((p=o)===null||p===void 0?void 0:p.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){l=l||0;for(let d=0;d<16;++d)a[l+d]=u[d];return a}return(0,S4.unsafeStringify)(u)}try{n.name=t}catch{}return n.DNS=dP,n.URL=mP,n}});var hP=st(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.default=void 0;var E4=R4(require("crypto"));function R4(t){return t&&t.__esModule?t:{default:t}}function k4(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),E4.default.createHash("md5").update(t).digest()}var P4=k4;Nf.default=P4});var yP=st(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.default=void 0;var M4=gP(WT()),A4=gP(hP());function gP(t){return t&&t.__esModule?t:{default:t}}var D4=(0,M4.default)("v3",48,A4.default),I4=D4;Lf.default=I4});var xP=st(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.default=void 0;var F4=C4(require("crypto"));function C4(t){return t&&t.__esModule?t:{default:t}}var O4={randomUUID:F4.default.randomUUID};Uf.default=O4});var vP=st(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.default=void 0;var TP=SP(xP()),N4=SP(LT()),L4=ol();function SP(t){return t&&t.__esModule?t:{default:t}}function U4(t,e,r){if(TP.default.randomUUID&&!e&&!t)return TP.default.randomUUID();t=t||{};let n=t.random||(t.rng||N4.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,L4.unsafeStringify)(n)}var V4=U4;Vf.default=V4});var bP=st(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.default=void 0;var B4=H4(require("crypto"));function H4(t){return t&&t.__esModule?t:{default:t}}function W4(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),B4.default.createHash("sha1").update(t).digest()}var $4=W4;Bf.default=$4});var _P=st(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.default=void 0;var q4=wP(WT()),j4=wP(bP());function wP(t){return t&&t.__esModule?t:{default:t}}var z4=(0,q4.default)("v5",80,j4.default),G4=z4;Hf.default=G4});var EP=st(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.default=void 0;var K4="00000000-0000-0000-0000-000000000000";Wf.default=K4});var RP=st($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.default=void 0;var Q4=Z4(nl());function Z4(t){return t&&t.__esModule?t:{default:t}}function Y4(t){if(!(0,Q4.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var J4=Y4;$f.default=J4});var kP=st(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});Object.defineProperty(En,"NIL",{enumerable:!0,get:function(){return n6.default}});Object.defineProperty(En,"parse",{enumerable:!0,get:function(){return a6.default}});Object.defineProperty(En,"stringify",{enumerable:!0,get:function(){return s6.default}});Object.defineProperty(En,"v1",{enumerable:!0,get:function(){return X4.default}});Object.defineProperty(En,"v3",{enumerable:!0,get:function(){return e6.default}});Object.defineProperty(En,"v4",{enumerable:!0,get:function(){return t6.default}});Object.defineProperty(En,"v5",{enumerable:!0,get:function(){return r6.default}});Object.defineProperty(En,"validate",{enumerable:!0,get:function(){return o6.default}});Object.defineProperty(En,"version",{enumerable:!0,get:function(){return i6.default}});var X4=vi(fP()),e6=vi(yP()),t6=vi(vP()),r6=vi(_P()),n6=vi(EP()),i6=vi(RP()),o6=vi(nl()),s6=vi(ol()),a6=vi(HT());function vi(t){return t&&t.__esModule?t:{default:t}}});var DP=st((AP,jf)=>{(function(t,e){typeof jf=="object"&&jf.exports?jf.exports=e():t.nearley=e()})(AP,function(){function t(p,u,d){return this.id=++t.highestId,this.name=p,this.symbols=u,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(p){var u=typeof p>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,p).map(l).join(" ")+" \u25CF "+this.symbols.slice(p).map(l).join(" ");return this.name+" \u2192 "+u};function e(p,u,d,h){this.rule=p,this.dot=u,this.reference=d,this.data=[],this.wantedBy=h,this.isComplete=this.dot===p.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(p){var u=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return u.left=this,u.right=p,u.isComplete&&(u.data=u.build(),u.right=void 0),u},e.prototype.build=function(){var p=[],u=this;do p.push(u.right.data),u=u.left;while(u.left);return p.reverse(),p},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(p,u){this.grammar=p,this.index=u,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(p){for(var u=this.states,d=this.wants,h=this.completed,g=0;g<u.length;g++){var x=u[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var b=x.wantedBy,w=b.length;w--;){var F=b[w];this.complete(F,x)}if(x.reference===this.index){var M=x.rule.name;(this.completed[M]=this.completed[M]||[]).push(x)}}}else{var M=x.rule.symbols[x.dot];if(typeof M!="string"){this.scannable.push(x);continue}if(d[M]){if(d[M].push(x),h.hasOwnProperty(M))for(var U=h[M],w=0;w<U.length;w++){var Z=U[w];this.complete(x,Z)}}else d[M]=[x],this.predict(M)}}},r.prototype.predict=function(p){for(var u=this.grammar.byName[p]||[],d=0;d<u.length;d++){var h=u[d],g=this.wants[p],x=new e(h,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(p,u){var d=p.nextState(u);this.states.push(d)};function n(p,u){this.rules=p,this.start=u||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(h){d.hasOwnProperty(h.name)||(d[h.name]=[]),d[h.name].push(h)})}n.fromCompiled=function(h,u){var d=h.Lexer;h.ParserStart&&(u=h.ParserStart,h=h.ParserRules);var h=h.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(h,u);return g.lexer=d,g};function i(){this.reset("")}i.prototype.reset=function(p,u){this.buffer=p,this.index=0,this.line=u?u.line:1,this.lastLineBreak=u?-u.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var p=this.buffer[this.index++];return p===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:p}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(p,u){var d=this.buffer;if(typeof d=="string"){var h=d.split(`
`).slice(Math.max(0,this.line-5),this.line),g=d.indexOf(`
`,this.index);g===-1&&(g=d.length);var x=this.index-this.lastLineBreak,b=String(this.line).length;return u+=" at line "+this.line+" col "+x+`:

`,u+=h.map(function(F,M){return w(this.line-h.length+M+1,b)+" "+F},this).join(`
`),u+=`
`+w("",b+x)+`^
`,u}else return u+" at index "+(this.index-1);function w(F,M){var U=String(F);return Array(M-U.length+1).join(" ")+U}};function o(p,u,d){if(p instanceof n)var h=p,d=u;else var h=n.fromCompiled(p,u);this.grammar=h,this.options={keepHistory:!1,lexer:h.lexer||new i};for(var g in d||{})this.options[g]=d[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(h,0),b=this.table=[x];x.wants[h.start]=[],x.predict(h.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(p){var u=this.lexer;u.reset(p,this.lexerState);for(var d;;){try{if(d=u.next(),!d)break}catch(de){var b=new r(this.grammar,this.current+1);this.table.push(b);var h=new Error(this.reportLexerError(de));throw h.offset=this.current,h.token=de.token,h}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,b=new r(this.grammar,x);this.table.push(b);for(var w=d.text!==void 0?d.text:d.value,F=u.constructor===i?d.value:u.transform?.(d)??d,M=g.scannable,U=M.length;U--;){var Z=M[U],ne=Z.rule.symbols[Z.dot];if(ne.test?ne.test(F):ne.type?ne.type===d.type:ne.literal===w){var he=Z.nextState({data:F,token:d,isToken:!0,reference:x-1});b.states.push(he)}}if(b.process(),b.states.length===0){var h=new Error(this.reportError(d));throw h.offset=this.current,h.token=d,h}this.options.keepHistory&&(g.lexerState=u.save()),this.current++}return g&&(this.lexerState=u.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(p){var u,d,h=p.token;return h?(u="input "+JSON.stringify(h.text[0])+" (lexer error)",d=this.lexer.formatError(h,"Syntax error")):(u="input (lexer error)",d=p.message),this.reportErrorCommon(d,u)},o.prototype.reportError=function(p){var u=(p.type?p.type+" token: ":"")+JSON.stringify(p.value!==void 0?p.value:p),d=this.lexer.formatError(p,"Syntax error");return this.reportErrorCommon(d,u)},o.prototype.reportErrorCommon=function(p,u){var d=[];d.push(p);var h=this.table.length-2,g=this.table[h],x=g.states.filter(function(w){var F=w.rule.symbols[w.dot];return F&&typeof F!="string"});if(x.length===0)d.push("Unexpected "+u+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,d);else{d.push("Unexpected "+u+`. Instead, I was expecting to see one of the following:
`);var b=x.map(function(w){return this.buildFirstStateStack(w,[])||[w]},this);b.forEach(function(w){var F=w[0],M=F.rule.symbols[F.dot],U=this.getSymbolDisplay(M);d.push("A "+U+" based on:"),this.displayStateStack(w,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(p,u){for(var d,h=0,g=0;g<p.length;g++){var x=p[g],b=x.rule.toString(x.dot);b===d?h++:(h>0&&u.push("    ^ "+h+" more lines identical to this"),h=0,u.push("    "+b)),d=b}},o.prototype.getSymbolDisplay=function(p){return a(p)},o.prototype.buildFirstStateStack=function(p,u){if(u.indexOf(p)!==-1)return null;if(p.wantedBy.length===0)return[p];var d=p.wantedBy[0],h=[p].concat(u),g=this.buildFirstStateStack(d,h);return g===null?null:[p].concat(g)},o.prototype.save=function(){var p=this.table[this.current];return p.lexerState=this.lexerState,p},o.prototype.restore=function(p){var u=p.index;this.current=u,this.table[u]=p,this.table.splice(u+1),this.lexerState=p.lexerState,this.results=this.finish()},o.prototype.rewind=function(p){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[p])},o.prototype.finish=function(){var p=[],u=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(h){h.rule.name===u&&h.dot===h.rule.symbols.length&&h.reference===0&&h.data!==o.fail&&p.push(h)}),p.map(function(h){return h.data})};function a(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return"character matching "+p;if(p.type)return p.type+" token";if(p.test)return"token matching "+String(p.test);throw new Error("Unknown symbol type: "+p)}}function l(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return p.toString();if(p.type)return"%"+p.type;if(p.test)return"<"+String(p.test)+">";throw new Error("Unknown symbol type: "+p)}}return{Parser:o,Grammar:n,Rule:t}})});var LP=st((NP,Kf)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof Kf=="object"&&Kf.exports?Kf.exports=e():t.moo=e()})(NP,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(N){return N&&e.call(N)==="[object RegExp]"}function i(N){return N&&typeof N=="object"&&!n(N)&&!Array.isArray(N)}function o(N){return N.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function a(N){var O=new RegExp("|"+N);return O.exec("").length-1}function l(N){return"("+N+")"}function p(N){if(!N.length)return"(?!)";var O=N.map(function(I){return"(?:"+I+")"}).join("|");return"(?:"+O+")"}function u(N){if(typeof N=="string")return"(?:"+o(N)+")";if(n(N)){if(N.ignoreCase)throw new Error("RegExp /i flag not allowed");if(N.global)throw new Error("RegExp /g flag is implied");if(N.sticky)throw new Error("RegExp /y flag is implied");if(N.multiline)throw new Error("RegExp /m flag is implied");return N.source}else throw new Error("Not a pattern: "+N)}function d(N,O){return N.length>O?N:Array(O-N.length+1).join(" ")+N}function h(N,O){for(var I=N.length,$=0;;){var j=N.lastIndexOf(`
`,I-1);if(j===-1||($++,I=j,$===O)||I===0)break}var K=$<O?0:I+1;return N.substring(K).split(`
`)}function g(N){for(var O=Object.getOwnPropertyNames(N),I=[],$=0;$<O.length;$++){var j=O[$],K=N[j],Q=[].concat(K);if(j==="include"){for(var te=0;te<Q.length;te++)I.push({include:Q[te]});continue}var me=[];Q.forEach(function(re){i(re)?(me.length&&I.push(b(j,me)),I.push(b(j,re)),me=[]):me.push(re)}),me.length&&I.push(b(j,me))}return I}function x(N){for(var O=[],I=0;I<N.length;I++){var $=N[I];if($.include){for(var j=[].concat($.include),K=0;K<j.length;K++)O.push({include:j[K]});continue}if(!$.type)throw new Error("Rule has no type: "+JSON.stringify($));O.push(b($.type,$))}return O}function b(N,O){if(i(O)||(O={match:O}),O.include)throw new Error("Matching rules cannot also include states");var I={defaultType:N,lineBreaks:!!O.error||!!O.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var $ in O)t.call(O,$)&&(I[$]=O[$]);if(typeof I.type=="string"&&N!==I.type)throw new Error("Type transform cannot be a string (type '"+I.type+"' for token '"+N+"')");var j=I.match;return I.match=Array.isArray(j)?j:j?[j]:[],I.match.sort(function(K,Q){return n(K)&&n(Q)?0:n(Q)?-1:n(K)?1:Q.length-K.length}),I}function w(N){return Array.isArray(N)?x(N):g(N)}var F=b("error",{lineBreaks:!0,shouldThrow:!0});function M(N,O){for(var I=null,$=Object.create(null),j=!0,K=null,Q=[],te=[],me=0;me<N.length;me++)N[me].fallback&&(j=!1);for(var me=0;me<N.length;me++){var re=N[me];if(re.include)throw new Error("Inheritance is not allowed in stateless lexers");if(re.error||re.fallback){if(I)throw!re.fallback==!I.fallback?new Error("Multiple "+(re.fallback?"fallback":"error")+" rules not allowed (for token '"+re.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+re.defaultType+"')");I=re}var Re=re.match.slice();if(j)for(;Re.length&&typeof Re[0]=="string"&&Re[0].length===1;){var or=Re.shift();$[or.charCodeAt(0)]=re}if(re.pop||re.push||re.next){if(!O)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+re.defaultType+"')");if(re.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+re.defaultType+"')")}if(Re.length!==0){j=!1,Q.push(re);for(var ni=0;ni<Re.length;ni++){var sr=Re[ni];if(n(sr)){if(K===null)K=sr.unicode;else if(K!==sr.unicode&&re.fallback===!1)throw new Error("If one rule is /u then all must be")}}var hn=p(Re.map(u)),_r=new RegExp(hn);if(_r.test(""))throw new Error("RegExp matches empty string: "+_r);var gn=a(hn);if(gn>0)throw new Error("RegExp has capture groups: "+_r+`
Use (?: \u2026 ) instead`);if(!re.lineBreaks&&_r.test(`
`))throw new Error("Rule should declare lineBreaks: "+_r);te.push(l(hn))}}var qr=I&&I.fallback,Eo=r&&!qr?"ym":"gm",ii=r||qr?"":"|";K===!0&&(Eo+="u");var ys=new RegExp(p(te)+ii,Eo);return{regexp:ys,groups:Q,fast:$,error:I||F}}function U(N){var O=M(w(N));return new de({start:O},"start")}function Z(N,O,I){var $=N&&(N.push||N.next);if($&&!I[$])throw new Error("Missing state '"+$+"' (in token '"+N.defaultType+"' of state '"+O+"')");if(N&&N.pop&&+N.pop!=1)throw new Error("pop must be 1 (in token '"+N.defaultType+"' of state '"+O+"')")}function ne(N,O){var I=N.$all?w(N.$all):[];delete N.$all;var $=Object.getOwnPropertyNames(N);O||(O=$[0]);for(var j=Object.create(null),K=0;K<$.length;K++){var Q=$[K];j[Q]=w(N[Q]).concat(I)}for(var K=0;K<$.length;K++)for(var Q=$[K],te=j[Q],me=Object.create(null),re=0;re<te.length;re++){var Re=te[re];if(Re.include){var or=[re,1];if(Re.include!==Q&&!me[Re.include]){me[Re.include]=!0;var ni=j[Re.include];if(!ni)throw new Error("Cannot include nonexistent state '"+Re.include+"' (in state '"+Q+"')");for(var sr=0;sr<ni.length;sr++){var hn=ni[sr];te.indexOf(hn)===-1&&or.push(hn)}}te.splice.apply(te,or),re--}}for(var _r=Object.create(null),K=0;K<$.length;K++){var Q=$[K];_r[Q]=M(j[Q],!0)}for(var K=0;K<$.length;K++){for(var gn=$[K],qr=_r[gn],Eo=qr.groups,re=0;re<Eo.length;re++)Z(Eo[re],gn,_r);for(var ii=Object.getOwnPropertyNames(qr.fast),re=0;re<ii.length;re++)Z(qr.fast[ii[re]],gn,_r)}return new de(_r,O)}function he(N){for(var O=typeof Map<"u",I=O?new Map:Object.create(null),$=Object.getOwnPropertyNames(N),j=0;j<$.length;j++){var K=$[j],Q=N[K],te=Array.isArray(Q)?Q:[Q];te.forEach(function(me){if(typeof me!="string")throw new Error("keyword must be string (in keyword '"+K+"')");O?I.set(me,K):I[me]=K})}return function(me){return O?I.get(me):I[me]}}var de=function(N,O){this.startState=O,this.states=N,this.buffer="",this.stack=[],this.reset()};de.prototype.reset=function(N,O){return this.buffer=N||"",this.index=0,this.line=O?O.line:1,this.col=O?O.col:1,this.queuedToken=O?O.queuedToken:null,this.queuedText=O?O.queuedText:"",this.queuedThrow=O?O.queuedThrow:null,this.setState(O?O.state:this.startState),this.stack=O&&O.stack?O.stack.slice():[],this},de.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},de.prototype.setState=function(N){if(!(!N||this.state===N)){this.state=N;var O=this.states[N];this.groups=O.groups,this.error=O.error,this.re=O.regexp,this.fast=O.fast}},de.prototype.popState=function(){this.setState(this.stack.pop())},de.prototype.pushState=function(N){this.stack.push(this.state),this.setState(N)};var mt=r?function(N,O){return N.exec(O)}:function(N,O){var I=N.exec(O);return I[0].length===0?null:I};de.prototype._getGroup=function(N){for(var O=this.groups.length,I=0;I<O;I++)if(N[I+1]!==void 0)return this.groups[I];throw new Error("Cannot find token type for matched text")};function It(){return this.value}if(de.prototype.next=function(){var N=this.index;if(this.queuedGroup){var O=this._token(this.queuedGroup,this.queuedText,N);return this.queuedGroup=null,this.queuedText="",O}var I=this.buffer;if(N!==I.length){var Q=this.fast[I.charCodeAt(N)];if(Q)return this._token(Q,I.charAt(N),N);var $=this.re;$.lastIndex=N;var j=mt($,I),K=this.error;if(j==null)return this._token(K,I.slice(N,I.length),N);var Q=this._getGroup(j),te=j[0];return K.fallback&&j.index!==N?(this.queuedGroup=Q,this.queuedText=te,this._token(K,I.slice(N,j.index),N)):this._token(Q,te,N)}},de.prototype._token=function(N,O,I){var $=0;if(N.lineBreaks){var j=/\n/g,K=1;if(O===`
`)$=1;else for(;j.exec(O);)$++,K=j.lastIndex}var Q={type:typeof N.type=="function"&&N.type(O)||N.defaultType,value:typeof N.value=="function"?N.value(O):O,text:O,toString:It,offset:I,lineBreaks:$,line:this.line,col:this.col},te=O.length;if(this.index+=te,this.line+=$,$!==0?this.col=te-K+1:this.col+=te,N.shouldThrow){var me=new Error(this.formatError(Q,"invalid syntax"));throw me}return N.pop?this.popState():N.push?this.pushState(N.push):N.next&&this.setState(N.next),Q},typeof Symbol<"u"&&Symbol.iterator){var it=function(N){this.lexer=N};it.prototype.next=function(){var N=this.lexer.next();return{value:N,done:!N}},it.prototype[Symbol.iterator]=function(){return this},de.prototype[Symbol.iterator]=function(){return new it(this)}}return de.prototype.formatError=function(N,O){if(N==null)var I=this.buffer.slice(this.index),N={text:I,offset:this.index,lineBreaks:I.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var $=2,j=Math.max(N.line-$,1),K=N.line+$,Q=String(K).length,te=h(this.buffer,this.line-N.line+$+1).slice(0,5),me=[];me.push(O+" at line "+N.line+" col "+N.col+":"),me.push("");for(var re=0;re<te.length;re++){var Re=te[re],or=j+re;me.push(d(String(or),Q)+"  "+Re),or===N.line&&me.push(d("",Q+N.col+1)+"^")}return me.join(`
`)},de.prototype.clone=function(){return new de(this.states,this.state)},de.prototype.has=function(N){return!0},{compile:U,states:ne,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:he}})});var fl=st((Kn,PM)=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});function Rn(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var _5=typeof process=="object"&&process.env.NODE_ENV==="production";function on(t,e){if(!t)throw _5?new Error("Invariant failed"):new Error(e())}Kn.invariant=on;var pS=Object.prototype.hasOwnProperty,E5=Array.prototype.splice,R5=Object.prototype.toString;function Yo(t){return R5.call(t).slice(8,-1)}var Rd=Object.assign||function(t,e){return uS(e).forEach(function(r){pS.call(e,r)&&(t[r]=e[r])}),t},uS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function lo(t){return Array.isArray(t)?Rd(t.constructor(t.length),t):Yo(t)==="Map"?new Map(t):Yo(t)==="Set"?new Set(t):t&&typeof t=="object"?Rd(Object.create(Object.getPrototypeOf(t)),t):t}var RM=function(){function t(){this.commands=Rd({},k5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||on(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),on(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return uS(i).forEach(function(a){if(pS.call(n.commands,a)){var l=e===o;o=n.commands[a](i[a],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var p=Yo(e)==="Map"?n.update(e.get(a),i[a]):n.update(e[a],i[a]),u=Yo(o)==="Map"?o.get(a):o[a];(!n.isEquals(p,u)||typeof p>"u"&&!pS.call(e,a))&&(o===e&&(o=lo(e)),Yo(o)==="Map"?o.set(a,p):o[a]=p)}}),o},t}();Kn.Context=RM;var k5={$push:function(t,e,r){return _M(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return _M(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return P5(e,r),t.forEach(function(i){kM(i),e===n&&i.length&&(e=lo(n)),E5.apply(e,i)}),e},$set:function(t,e,r){return A5(r),t},$toggle:function(t,e){ul(t,"$toggle");var r=t.length?lo(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return ul(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=lo(n)),delete e[i])}),e},$add:function(t,e,r,n){return EM(e,"$add"),ul(t,"$add"),Yo(e)==="Map"?t.forEach(function(i){var o=i[0],a=i[1];e===n&&e.get(o)!==a&&(e=lo(n)),e.set(o,a)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=lo(n)),e.add(i)}),e},$remove:function(t,e,r,n){return EM(e,"$remove"),ul(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=lo(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return D5(e,t),uS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=lo(n)),e[i]=t[i])}),e},$apply:function(t,e){return M5(t),t(e)}},fS=new RM;Kn.isEquals=fS.update.isEquals;Kn.extend=fS.extend;Kn.default=fS.update;Kn.default.default=PM.exports=Rd(Kn.default,Kn);function _M(t,e,r){on(Array.isArray(t),function(){return"update(): expected target of "+Rn(r)+" to be an array; got "+Rn(t)+"."}),ul(e[r],r)}function ul(t,e){on(Array.isArray(t),function(){return"update(): expected spec of "+Rn(e)+" to be an array; got "+Rn(t)+". Did you forget to wrap your parameter in an array?"})}function P5(t,e){on(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+Rn(t)}),kM(e.$splice)}function kM(t){on(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+Rn(t)+". Did you forget to wrap your parameters in an array?"})}function M5(t){on(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+Rn(t)+"."})}function A5(t){on(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function D5(t,e){on(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+Rn(e)}),on(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+Rn(t)})}function EM(t,e){var r=Yo(t);on(r==="Map"||r==="Set",function(){return"update(): "+Rn(e)+" expects a target of type Set or Map; got "+Rn(r)})}});var xv=st((Ga,Jl)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",l=500,p="__lodash_placeholder__",u=1,d=2,h=4,g=1,x=2,b=1,w=2,F=4,M=8,U=16,Z=32,ne=64,he=128,de=256,mt=512,It=30,it="...",N=800,O=16,I=1,$=2,j=3,K=1/0,Q=9007199254740991,te=17976931348623157e292,me=NaN,re=4294967295,Re=re-1,or=re>>>1,ni=[["ary",he],["bind",b],["bindKey",w],["curry",M],["curryRight",U],["flip",mt],["partial",Z],["partialRight",ne],["rearg",de]],sr="[object Arguments]",hn="[object Array]",_r="[object AsyncFunction]",gn="[object Boolean]",qr="[object Date]",Eo="[object DOMException]",ii="[object Error]",ys="[object Function]",Hb="[object GeneratorFunction]",yn="[object Map]",cc="[object Number]",B1="[object Null]",oi="[object Object]",Wb="[object Promise]",H1="[object Proxy]",lc="[object RegExp]",xn="[object Set]",pc="[object String]",Pp="[object Symbol]",W1="[object Undefined]",uc="[object WeakMap]",$1="[object WeakSet]",fc="[object ArrayBuffer]",xs="[object DataView]",hy="[object Float32Array]",gy="[object Float64Array]",yy="[object Int8Array]",xy="[object Int16Array]",Ty="[object Int32Array]",Sy="[object Uint8Array]",vy="[object Uint8ClampedArray]",by="[object Uint16Array]",wy="[object Uint32Array]",q1=/\b__p \+= '';/g,j1=/\b(__p \+=) '' \+/g,z1=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$b=/&(?:amp|lt|gt|quot|#39);/g,qb=/[&<>"']/g,G1=RegExp($b.source),K1=RegExp(qb.source),Q1=/<%-([\s\S]+?)%>/g,Z1=/<%([\s\S]+?)%>/g,jb=/<%=([\s\S]+?)%>/g,Y1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J1=/^\w*$/,X1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_y=/[\\^$.*+?()[\]{}|]/g,eC=RegExp(_y.source),Ey=/^\s+/,tC=/\s/,rC=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nC=/\{\n\/\* \[wrapped with (.+)\] \*/,iC=/,? & /,oC=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,sC=/[()=,{}\[\]\/\s]/,aC=/\\(\\)?/g,cC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zb=/\w*$/,lC=/^[-+]0x[0-9a-f]+$/i,pC=/^0b[01]+$/i,uC=/^\[object .+?Constructor\]$/,fC=/^0o[0-7]+$/i,dC=/^(?:0|[1-9]\d*)$/,mC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mp=/($^)/,hC=/['\n\r\u2028\u2029\\]/g,Ap="\\ud800-\\udfff",gC="\\u0300-\\u036f",yC="\\ufe20-\\ufe2f",xC="\\u20d0-\\u20ff",Gb=gC+yC+xC,Kb="\\u2700-\\u27bf",Qb="a-z\\xdf-\\xf6\\xf8-\\xff",TC="\\xac\\xb1\\xd7\\xf7",SC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",vC="\\u2000-\\u206f",bC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Zb="A-Z\\xc0-\\xd6\\xd8-\\xde",Yb="\\ufe0e\\ufe0f",Jb=TC+SC+vC+bC,Ry="['\u2019]",wC="["+Ap+"]",Xb="["+Jb+"]",Dp="["+Gb+"]",ew="\\d+",_C="["+Kb+"]",tw="["+Qb+"]",rw="[^"+Ap+Jb+ew+Kb+Qb+Zb+"]",ky="\\ud83c[\\udffb-\\udfff]",EC="(?:"+Dp+"|"+ky+")",nw="[^"+Ap+"]",Py="(?:\\ud83c[\\udde6-\\uddff]){2}",My="[\\ud800-\\udbff][\\udc00-\\udfff]",Ts="["+Zb+"]",iw="\\u200d",ow="(?:"+tw+"|"+rw+")",RC="(?:"+Ts+"|"+rw+")",sw="(?:"+Ry+"(?:d|ll|m|re|s|t|ve))?",aw="(?:"+Ry+"(?:D|LL|M|RE|S|T|VE))?",cw=EC+"?",lw="["+Yb+"]?",kC="(?:"+iw+"(?:"+[nw,Py,My].join("|")+")"+lw+cw+")*",PC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",MC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",pw=lw+cw+kC,AC="(?:"+[_C,Py,My].join("|")+")"+pw,DC="(?:"+[nw+Dp+"?",Dp,Py,My,wC].join("|")+")",IC=RegExp(Ry,"g"),FC=RegExp(Dp,"g"),Ay=RegExp(ky+"(?="+ky+")|"+DC+pw,"g"),CC=RegExp([Ts+"?"+tw+"+"+sw+"(?="+[Xb,Ts,"$"].join("|")+")",RC+"+"+aw+"(?="+[Xb,Ts+ow,"$"].join("|")+")",Ts+"?"+ow+"+"+sw,Ts+"+"+aw,MC,PC,ew,AC].join("|"),"g"),OC=RegExp("["+iw+Ap+Gb+Yb+"]"),NC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,LC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],UC=-1,Ze={};Ze[hy]=Ze[gy]=Ze[yy]=Ze[xy]=Ze[Ty]=Ze[Sy]=Ze[vy]=Ze[by]=Ze[wy]=!0,Ze[sr]=Ze[hn]=Ze[fc]=Ze[gn]=Ze[xs]=Ze[qr]=Ze[ii]=Ze[ys]=Ze[yn]=Ze[cc]=Ze[oi]=Ze[lc]=Ze[xn]=Ze[pc]=Ze[uc]=!1;var Ke={};Ke[sr]=Ke[hn]=Ke[fc]=Ke[xs]=Ke[gn]=Ke[qr]=Ke[hy]=Ke[gy]=Ke[yy]=Ke[xy]=Ke[Ty]=Ke[yn]=Ke[cc]=Ke[oi]=Ke[lc]=Ke[xn]=Ke[pc]=Ke[Pp]=Ke[Sy]=Ke[vy]=Ke[by]=Ke[wy]=!0,Ke[ii]=Ke[ys]=Ke[uc]=!1;var VC={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},BC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},HC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},WC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$C=parseFloat,qC=parseInt,uw=typeof global=="object"&&global&&global.Object===Object&&global,jC=typeof self=="object"&&self&&self.Object===Object&&self,_t=uw||jC||Function("return this")(),Dy=typeof Ga=="object"&&Ga&&!Ga.nodeType&&Ga,Ro=Dy&&typeof Jl=="object"&&Jl&&!Jl.nodeType&&Jl,fw=Ro&&Ro.exports===Dy,Iy=fw&&uw.process,jr=function(){try{var k=Ro&&Ro.require&&Ro.require("util").types;return k||Iy&&Iy.binding&&Iy.binding("util")}catch{}}(),dw=jr&&jr.isArrayBuffer,mw=jr&&jr.isDate,hw=jr&&jr.isMap,gw=jr&&jr.isRegExp,yw=jr&&jr.isSet,xw=jr&&jr.isTypedArray;function Er(k,V,L){switch(L.length){case 0:return k.call(V);case 1:return k.call(V,L[0]);case 2:return k.call(V,L[0],L[1]);case 3:return k.call(V,L[0],L[1],L[2])}return k.apply(V,L)}function zC(k,V,L,X){for(var ge=-1,Ve=k==null?0:k.length;++ge<Ve;){var xt=k[ge];V(X,xt,L(xt),k)}return X}function zr(k,V){for(var L=-1,X=k==null?0:k.length;++L<X&&V(k[L],L,k)!==!1;);return k}function GC(k,V){for(var L=k==null?0:k.length;L--&&V(k[L],L,k)!==!1;);return k}function Tw(k,V){for(var L=-1,X=k==null?0:k.length;++L<X;)if(!V(k[L],L,k))return!1;return!0}function Oi(k,V){for(var L=-1,X=k==null?0:k.length,ge=0,Ve=[];++L<X;){var xt=k[L];V(xt,L,k)&&(Ve[ge++]=xt)}return Ve}function Ip(k,V){var L=k==null?0:k.length;return!!L&&Ss(k,V,0)>-1}function Fy(k,V,L){for(var X=-1,ge=k==null?0:k.length;++X<ge;)if(L(V,k[X]))return!0;return!1}function Xe(k,V){for(var L=-1,X=k==null?0:k.length,ge=Array(X);++L<X;)ge[L]=V(k[L],L,k);return ge}function Ni(k,V){for(var L=-1,X=V.length,ge=k.length;++L<X;)k[ge+L]=V[L];return k}function Cy(k,V,L,X){var ge=-1,Ve=k==null?0:k.length;for(X&&Ve&&(L=k[++ge]);++ge<Ve;)L=V(L,k[ge],ge,k);return L}function KC(k,V,L,X){var ge=k==null?0:k.length;for(X&&ge&&(L=k[--ge]);ge--;)L=V(L,k[ge],ge,k);return L}function Oy(k,V){for(var L=-1,X=k==null?0:k.length;++L<X;)if(V(k[L],L,k))return!0;return!1}var QC=Ny("length");function ZC(k){return k.split("")}function YC(k){return k.match(oC)||[]}function Sw(k,V,L){var X;return L(k,function(ge,Ve,xt){if(V(ge,Ve,xt))return X=Ve,!1}),X}function Fp(k,V,L,X){for(var ge=k.length,Ve=L+(X?1:-1);X?Ve--:++Ve<ge;)if(V(k[Ve],Ve,k))return Ve;return-1}function Ss(k,V,L){return V===V?lO(k,V,L):Fp(k,vw,L)}function JC(k,V,L,X){for(var ge=L-1,Ve=k.length;++ge<Ve;)if(X(k[ge],V))return ge;return-1}function vw(k){return k!==k}function bw(k,V){var L=k==null?0:k.length;return L?Uy(k,V)/L:me}function Ny(k){return function(V){return V==null?t:V[k]}}function Ly(k){return function(V){return k==null?t:k[V]}}function ww(k,V,L,X,ge){return ge(k,function(Ve,xt,ze){L=X?(X=!1,Ve):V(L,Ve,xt,ze)}),L}function XC(k,V){var L=k.length;for(k.sort(V);L--;)k[L]=k[L].value;return k}function Uy(k,V){for(var L,X=-1,ge=k.length;++X<ge;){var Ve=V(k[X]);Ve!==t&&(L=L===t?Ve:L+Ve)}return L}function Vy(k,V){for(var L=-1,X=Array(k);++L<k;)X[L]=V(L);return X}function eO(k,V){return Xe(V,function(L){return[L,k[L]]})}function _w(k){return k&&k.slice(0,Pw(k)+1).replace(Ey,"")}function Rr(k){return function(V){return k(V)}}function By(k,V){return Xe(V,function(L){return k[L]})}function dc(k,V){return k.has(V)}function Ew(k,V){for(var L=-1,X=k.length;++L<X&&Ss(V,k[L],0)>-1;);return L}function Rw(k,V){for(var L=k.length;L--&&Ss(V,k[L],0)>-1;);return L}function tO(k,V){for(var L=k.length,X=0;L--;)k[L]===V&&++X;return X}var rO=Ly(VC),nO=Ly(BC);function iO(k){return"\\"+WC[k]}function oO(k,V){return k==null?t:k[V]}function vs(k){return OC.test(k)}function sO(k){return NC.test(k)}function aO(k){for(var V,L=[];!(V=k.next()).done;)L.push(V.value);return L}function Hy(k){var V=-1,L=Array(k.size);return k.forEach(function(X,ge){L[++V]=[ge,X]}),L}function kw(k,V){return function(L){return k(V(L))}}function Li(k,V){for(var L=-1,X=k.length,ge=0,Ve=[];++L<X;){var xt=k[L];(xt===V||xt===p)&&(k[L]=p,Ve[ge++]=L)}return Ve}function Cp(k){var V=-1,L=Array(k.size);return k.forEach(function(X){L[++V]=X}),L}function cO(k){var V=-1,L=Array(k.size);return k.forEach(function(X){L[++V]=[X,X]}),L}function lO(k,V,L){for(var X=L-1,ge=k.length;++X<ge;)if(k[X]===V)return X;return-1}function pO(k,V,L){for(var X=L+1;X--;)if(k[X]===V)return X;return X}function bs(k){return vs(k)?fO(k):QC(k)}function Tn(k){return vs(k)?dO(k):ZC(k)}function Pw(k){for(var V=k.length;V--&&tC.test(k.charAt(V)););return V}var uO=Ly(HC);function fO(k){for(var V=Ay.lastIndex=0;Ay.test(k);)++V;return V}function dO(k){return k.match(Ay)||[]}function mO(k){return k.match(CC)||[]}var hO=function k(V){V=V==null?_t:Ui.defaults(_t.Object(),V,Ui.pick(_t,LC));var L=V.Array,X=V.Date,ge=V.Error,Ve=V.Function,xt=V.Math,ze=V.Object,Wy=V.RegExp,gO=V.String,Gr=V.TypeError,Op=L.prototype,yO=Ve.prototype,ws=ze.prototype,Np=V["__core-js_shared__"],Lp=yO.toString,qe=ws.hasOwnProperty,xO=0,Mw=function(){var s=/[^.]+$/.exec(Np&&Np.keys&&Np.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Up=ws.toString,TO=Lp.call(ze),SO=_t._,vO=Wy("^"+Lp.call(qe).replace(_y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vp=fw?V.Buffer:t,Vi=V.Symbol,Bp=V.Uint8Array,Aw=Vp?Vp.allocUnsafe:t,Hp=kw(ze.getPrototypeOf,ze),Dw=ze.create,Iw=ws.propertyIsEnumerable,Wp=Op.splice,Fw=Vi?Vi.isConcatSpreadable:t,mc=Vi?Vi.iterator:t,ko=Vi?Vi.toStringTag:t,$p=function(){try{var s=Io(ze,"defineProperty");return s({},"",{}),s}catch{}}(),bO=V.clearTimeout!==_t.clearTimeout&&V.clearTimeout,wO=X&&X.now!==_t.Date.now&&X.now,_O=V.setTimeout!==_t.setTimeout&&V.setTimeout,qp=xt.ceil,jp=xt.floor,$y=ze.getOwnPropertySymbols,EO=Vp?Vp.isBuffer:t,Cw=V.isFinite,RO=Op.join,kO=kw(ze.keys,ze),Tt=xt.max,Vt=xt.min,PO=X.now,MO=V.parseInt,Ow=xt.random,AO=Op.reverse,qy=Io(V,"DataView"),hc=Io(V,"Map"),jy=Io(V,"Promise"),_s=Io(V,"Set"),gc=Io(V,"WeakMap"),yc=Io(ze,"create"),zp=gc&&new gc,Es={},DO=Fo(qy),IO=Fo(hc),FO=Fo(jy),CO=Fo(_s),OO=Fo(gc),Gp=Vi?Vi.prototype:t,xc=Gp?Gp.valueOf:t,Nw=Gp?Gp.toString:t;function T(s){if(ot(s)&&!xe(s)&&!(s instanceof Ae)){if(s instanceof Kr)return s;if(qe.call(s,"__wrapped__"))return L_(s)}return new Kr(s)}var Rs=function(){function s(){}return function(c){if(!rt(c))return{};if(Dw)return Dw(c);s.prototype=c;var f=new s;return s.prototype=t,f}}();function Kp(){}function Kr(s,c){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:Q1,evaluate:Z1,interpolate:jb,variable:"",imports:{_:T}},T.prototype=Kp.prototype,T.prototype.constructor=T,Kr.prototype=Rs(Kp.prototype),Kr.prototype.constructor=Kr;function Ae(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function NO(){var s=new Ae(this.__wrapped__);return s.__actions__=ar(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=ar(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=ar(this.__views__),s}function LO(){if(this.__filtered__){var s=new Ae(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function UO(){var s=this.__wrapped__.value(),c=this.__dir__,f=xe(s),m=c<0,y=f?s.length:0,S=ZN(0,y,this.__views__),E=S.start,R=S.end,A=R-E,B=m?R:E-1,H=this.__iteratees__,q=H.length,Y=0,ie=Vt(A,this.__takeCount__);if(!f||!m&&y==A&&ie==A)return s_(s,this.__actions__);var pe=[];e:for(;A--&&Y<ie;){B+=c;for(var Ee=-1,ue=s[B];++Ee<q;){var Pe=H[Ee],Ie=Pe.iteratee,Mr=Pe.type,Zt=Ie(ue);if(Mr==$)ue=Zt;else if(!Zt){if(Mr==I)continue e;break e}}pe[Y++]=ue}return pe}Ae.prototype=Rs(Kp.prototype),Ae.prototype.constructor=Ae;function Po(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var m=s[c];this.set(m[0],m[1])}}function VO(){this.__data__=yc?yc(null):{},this.size=0}function BO(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}function HO(s){var c=this.__data__;if(yc){var f=c[s];return f===a?t:f}return qe.call(c,s)?c[s]:t}function WO(s){var c=this.__data__;return yc?c[s]!==t:qe.call(c,s)}function $O(s,c){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=yc&&c===t?a:c,this}Po.prototype.clear=VO,Po.prototype.delete=BO,Po.prototype.get=HO,Po.prototype.has=WO,Po.prototype.set=$O;function si(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var m=s[c];this.set(m[0],m[1])}}function qO(){this.__data__=[],this.size=0}function jO(s){var c=this.__data__,f=Qp(c,s);if(f<0)return!1;var m=c.length-1;return f==m?c.pop():Wp.call(c,f,1),--this.size,!0}function zO(s){var c=this.__data__,f=Qp(c,s);return f<0?t:c[f][1]}function GO(s){return Qp(this.__data__,s)>-1}function KO(s,c){var f=this.__data__,m=Qp(f,s);return m<0?(++this.size,f.push([s,c])):f[m][1]=c,this}si.prototype.clear=qO,si.prototype.delete=jO,si.prototype.get=zO,si.prototype.has=GO,si.prototype.set=KO;function ai(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var m=s[c];this.set(m[0],m[1])}}function QO(){this.size=0,this.__data__={hash:new Po,map:new(hc||si),string:new Po}}function ZO(s){var c=au(this,s).delete(s);return this.size-=c?1:0,c}function YO(s){return au(this,s).get(s)}function JO(s){return au(this,s).has(s)}function XO(s,c){var f=au(this,s),m=f.size;return f.set(s,c),this.size+=f.size==m?0:1,this}ai.prototype.clear=QO,ai.prototype.delete=ZO,ai.prototype.get=YO,ai.prototype.has=JO,ai.prototype.set=XO;function Mo(s){var c=-1,f=s==null?0:s.length;for(this.__data__=new ai;++c<f;)this.add(s[c])}function eN(s){return this.__data__.set(s,a),this}function tN(s){return this.__data__.has(s)}Mo.prototype.add=Mo.prototype.push=eN,Mo.prototype.has=tN;function Sn(s){var c=this.__data__=new si(s);this.size=c.size}function rN(){this.__data__=new si,this.size=0}function nN(s){var c=this.__data__,f=c.delete(s);return this.size=c.size,f}function iN(s){return this.__data__.get(s)}function oN(s){return this.__data__.has(s)}function sN(s,c){var f=this.__data__;if(f instanceof si){var m=f.__data__;if(!hc||m.length<r-1)return m.push([s,c]),this.size=++f.size,this;f=this.__data__=new ai(m)}return f.set(s,c),this.size=f.size,this}Sn.prototype.clear=rN,Sn.prototype.delete=nN,Sn.prototype.get=iN,Sn.prototype.has=oN,Sn.prototype.set=sN;function Lw(s,c){var f=xe(s),m=!f&&Co(s),y=!f&&!m&&qi(s),S=!f&&!m&&!y&&As(s),E=f||m||y||S,R=E?Vy(s.length,gO):[],A=R.length;for(var B in s)(c||qe.call(s,B))&&!(E&&(B=="length"||y&&(B=="offset"||B=="parent")||S&&(B=="buffer"||B=="byteLength"||B=="byteOffset")||ui(B,A)))&&R.push(B);return R}function Uw(s){var c=s.length;return c?s[rx(0,c-1)]:t}function aN(s,c){return cu(ar(s),Ao(c,0,s.length))}function cN(s){return cu(ar(s))}function zy(s,c,f){(f!==t&&!vn(s[c],f)||f===t&&!(c in s))&&ci(s,c,f)}function Tc(s,c,f){var m=s[c];(!(qe.call(s,c)&&vn(m,f))||f===t&&!(c in s))&&ci(s,c,f)}function Qp(s,c){for(var f=s.length;f--;)if(vn(s[f][0],c))return f;return-1}function lN(s,c,f,m){return Bi(s,function(y,S,E){c(m,y,f(y),E)}),m}function Vw(s,c){return s&&Un(c,Et(c),s)}function pN(s,c){return s&&Un(c,lr(c),s)}function ci(s,c,f){c=="__proto__"&&$p?$p(s,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[c]=f}function Gy(s,c){for(var f=-1,m=c.length,y=L(m),S=s==null;++f<m;)y[f]=S?t:kx(s,c[f]);return y}function Ao(s,c,f){return s===s&&(f!==t&&(s=s<=f?s:f),c!==t&&(s=s>=c?s:c)),s}function Qr(s,c,f,m,y,S){var E,R=c&u,A=c&d,B=c&h;if(f&&(E=y?f(s,m,y,S):f(s)),E!==t)return E;if(!rt(s))return s;var H=xe(s);if(H){if(E=JN(s),!R)return ar(s,E)}else{var q=Bt(s),Y=q==ys||q==Hb;if(qi(s))return l_(s,R);if(q==oi||q==sr||Y&&!y){if(E=A||Y?{}:P_(s),!R)return A?HN(s,pN(E,s)):BN(s,Vw(E,s))}else{if(!Ke[q])return y?s:{};E=XN(s,q,R)}}S||(S=new Sn);var ie=S.get(s);if(ie)return ie;S.set(s,E),nE(s)?s.forEach(function(ue){E.add(Qr(ue,c,f,ue,s,S))}):tE(s)&&s.forEach(function(ue,Pe){E.set(Pe,Qr(ue,c,f,Pe,s,S))});var pe=B?A?dx:fx:A?lr:Et,Ee=H?t:pe(s);return zr(Ee||s,function(ue,Pe){Ee&&(Pe=ue,ue=s[Pe]),Tc(E,Pe,Qr(ue,c,f,Pe,s,S))}),E}function uN(s){var c=Et(s);return function(f){return Bw(f,s,c)}}function Bw(s,c,f){var m=f.length;if(s==null)return!m;for(s=ze(s);m--;){var y=f[m],S=c[y],E=s[y];if(E===t&&!(y in s)||!S(E))return!1}return!0}function Hw(s,c,f){if(typeof s!="function")throw new Gr(i);return Rc(function(){s.apply(t,f)},c)}function Sc(s,c,f,m){var y=-1,S=Ip,E=!0,R=s.length,A=[],B=c.length;if(!R)return A;f&&(c=Xe(c,Rr(f))),m?(S=Fy,E=!1):c.length>=r&&(S=dc,E=!1,c=new Mo(c));e:for(;++y<R;){var H=s[y],q=f==null?H:f(H);if(H=m||H!==0?H:0,E&&q===q){for(var Y=B;Y--;)if(c[Y]===q)continue e;A.push(H)}else S(c,q,m)||A.push(H)}return A}var Bi=m_(Ln),Ww=m_(Qy,!0);function fN(s,c){var f=!0;return Bi(s,function(m,y,S){return f=!!c(m,y,S),f}),f}function Zp(s,c,f){for(var m=-1,y=s.length;++m<y;){var S=s[m],E=c(S);if(E!=null&&(R===t?E===E&&!Pr(E):f(E,R)))var R=E,A=S}return A}function dN(s,c,f,m){var y=s.length;for(f=be(f),f<0&&(f=-f>y?0:y+f),m=m===t||m>y?y:be(m),m<0&&(m+=y),m=f>m?0:oE(m);f<m;)s[f++]=c;return s}function $w(s,c){var f=[];return Bi(s,function(m,y,S){c(m,y,S)&&f.push(m)}),f}function Ft(s,c,f,m,y){var S=-1,E=s.length;for(f||(f=tL),y||(y=[]);++S<E;){var R=s[S];c>0&&f(R)?c>1?Ft(R,c-1,f,m,y):Ni(y,R):m||(y[y.length]=R)}return y}var Ky=h_(),qw=h_(!0);function Ln(s,c){return s&&Ky(s,c,Et)}function Qy(s,c){return s&&qw(s,c,Et)}function Yp(s,c){return Oi(c,function(f){return fi(s[f])})}function Do(s,c){c=Wi(c,s);for(var f=0,m=c.length;s!=null&&f<m;)s=s[Vn(c[f++])];return f&&f==m?s:t}function jw(s,c,f){var m=c(s);return xe(s)?m:Ni(m,f(s))}function Kt(s){return s==null?s===t?W1:B1:ko&&ko in ze(s)?QN(s):cL(s)}function Zy(s,c){return s>c}function mN(s,c){return s!=null&&qe.call(s,c)}function hN(s,c){return s!=null&&c in ze(s)}function gN(s,c,f){return s>=Vt(c,f)&&s<Tt(c,f)}function Yy(s,c,f){for(var m=f?Fy:Ip,y=s[0].length,S=s.length,E=S,R=L(S),A=1/0,B=[];E--;){var H=s[E];E&&c&&(H=Xe(H,Rr(c))),A=Vt(H.length,A),R[E]=!f&&(c||y>=120&&H.length>=120)?new Mo(E&&H):t}H=s[0];var q=-1,Y=R[0];e:for(;++q<y&&B.length<A;){var ie=H[q],pe=c?c(ie):ie;if(ie=f||ie!==0?ie:0,!(Y?dc(Y,pe):m(B,pe,f))){for(E=S;--E;){var Ee=R[E];if(!(Ee?dc(Ee,pe):m(s[E],pe,f)))continue e}Y&&Y.push(pe),B.push(ie)}}return B}function yN(s,c,f,m){return Ln(s,function(y,S,E){c(m,f(y),S,E)}),m}function vc(s,c,f){c=Wi(c,s),s=I_(s,c);var m=s==null?s:s[Vn(Yr(c))];return m==null?t:Er(m,s,f)}function zw(s){return ot(s)&&Kt(s)==sr}function xN(s){return ot(s)&&Kt(s)==fc}function TN(s){return ot(s)&&Kt(s)==qr}function bc(s,c,f,m,y){return s===c?!0:s==null||c==null||!ot(s)&&!ot(c)?s!==s&&c!==c:SN(s,c,f,m,bc,y)}function SN(s,c,f,m,y,S){var E=xe(s),R=xe(c),A=E?hn:Bt(s),B=R?hn:Bt(c);A=A==sr?oi:A,B=B==sr?oi:B;var H=A==oi,q=B==oi,Y=A==B;if(Y&&qi(s)){if(!qi(c))return!1;E=!0,H=!1}if(Y&&!H)return S||(S=new Sn),E||As(s)?E_(s,c,f,m,y,S):GN(s,c,A,f,m,y,S);if(!(f&g)){var ie=H&&qe.call(s,"__wrapped__"),pe=q&&qe.call(c,"__wrapped__");if(ie||pe){var Ee=ie?s.value():s,ue=pe?c.value():c;return S||(S=new Sn),y(Ee,ue,f,m,S)}}return Y?(S||(S=new Sn),KN(s,c,f,m,y,S)):!1}function vN(s){return ot(s)&&Bt(s)==yn}function Jy(s,c,f,m){var y=f.length,S=y,E=!m;if(s==null)return!S;for(s=ze(s);y--;){var R=f[y];if(E&&R[2]?R[1]!==s[R[0]]:!(R[0]in s))return!1}for(;++y<S;){R=f[y];var A=R[0],B=s[A],H=R[1];if(E&&R[2]){if(B===t&&!(A in s))return!1}else{var q=new Sn;if(m)var Y=m(B,H,A,s,c,q);if(!(Y===t?bc(H,B,g|x,m,q):Y))return!1}}return!0}function Gw(s){if(!rt(s)||nL(s))return!1;var c=fi(s)?vO:uC;return c.test(Fo(s))}function bN(s){return ot(s)&&Kt(s)==lc}function wN(s){return ot(s)&&Bt(s)==xn}function _N(s){return ot(s)&&mu(s.length)&&!!Ze[Kt(s)]}function Kw(s){return typeof s=="function"?s:s==null?pr:typeof s=="object"?xe(s)?Yw(s[0],s[1]):Zw(s):gE(s)}function Xy(s){if(!Ec(s))return kO(s);var c=[];for(var f in ze(s))qe.call(s,f)&&f!="constructor"&&c.push(f);return c}function EN(s){if(!rt(s))return aL(s);var c=Ec(s),f=[];for(var m in s)m=="constructor"&&(c||!qe.call(s,m))||f.push(m);return f}function ex(s,c){return s<c}function Qw(s,c){var f=-1,m=cr(s)?L(s.length):[];return Bi(s,function(y,S,E){m[++f]=c(y,S,E)}),m}function Zw(s){var c=hx(s);return c.length==1&&c[0][2]?A_(c[0][0],c[0][1]):function(f){return f===s||Jy(f,s,c)}}function Yw(s,c){return yx(s)&&M_(c)?A_(Vn(s),c):function(f){var m=kx(f,s);return m===t&&m===c?Px(f,s):bc(c,m,g|x)}}function Jp(s,c,f,m,y){s!==c&&Ky(c,function(S,E){if(y||(y=new Sn),rt(S))RN(s,c,E,f,Jp,m,y);else{var R=m?m(Tx(s,E),S,E+"",s,c,y):t;R===t&&(R=S),zy(s,E,R)}},lr)}function RN(s,c,f,m,y,S,E){var R=Tx(s,f),A=Tx(c,f),B=E.get(A);if(B){zy(s,f,B);return}var H=S?S(R,A,f+"",s,c,E):t,q=H===t;if(q){var Y=xe(A),ie=!Y&&qi(A),pe=!Y&&!ie&&As(A);H=A,Y||ie||pe?xe(R)?H=R:ct(R)?H=ar(R):ie?(q=!1,H=l_(A,!0)):pe?(q=!1,H=p_(A,!0)):H=[]:kc(A)||Co(A)?(H=R,Co(R)?H=sE(R):(!rt(R)||fi(R))&&(H=P_(A))):q=!1}q&&(E.set(A,H),y(H,A,m,S,E),E.delete(A)),zy(s,f,H)}function Jw(s,c){var f=s.length;if(f)return c+=c<0?f:0,ui(c,f)?s[c]:t}function Xw(s,c,f){c.length?c=Xe(c,function(S){return xe(S)?function(E){return Do(E,S.length===1?S[0]:S)}:S}):c=[pr];var m=-1;c=Xe(c,Rr(le()));var y=Qw(s,function(S,E,R){var A=Xe(c,function(B){return B(S)});return{criteria:A,index:++m,value:S}});return XC(y,function(S,E){return VN(S,E,f)})}function kN(s,c){return e_(s,c,function(f,m){return Px(s,m)})}function e_(s,c,f){for(var m=-1,y=c.length,S={};++m<y;){var E=c[m],R=Do(s,E);f(R,E)&&wc(S,Wi(E,s),R)}return S}function PN(s){return function(c){return Do(c,s)}}function tx(s,c,f,m){var y=m?JC:Ss,S=-1,E=c.length,R=s;for(s===c&&(c=ar(c)),f&&(R=Xe(s,Rr(f)));++S<E;)for(var A=0,B=c[S],H=f?f(B):B;(A=y(R,H,A,m))>-1;)R!==s&&Wp.call(R,A,1),Wp.call(s,A,1);return s}function t_(s,c){for(var f=s?c.length:0,m=f-1;f--;){var y=c[f];if(f==m||y!==S){var S=y;ui(y)?Wp.call(s,y,1):ox(s,y)}}return s}function rx(s,c){return s+jp(Ow()*(c-s+1))}function MN(s,c,f,m){for(var y=-1,S=Tt(qp((c-s)/(f||1)),0),E=L(S);S--;)E[m?S:++y]=s,s+=f;return E}function nx(s,c){var f="";if(!s||c<1||c>Q)return f;do c%2&&(f+=s),c=jp(c/2),c&&(s+=s);while(c);return f}function ke(s,c){return Sx(D_(s,c,pr),s+"")}function AN(s){return Uw(Ds(s))}function DN(s,c){var f=Ds(s);return cu(f,Ao(c,0,f.length))}function wc(s,c,f,m){if(!rt(s))return s;c=Wi(c,s);for(var y=-1,S=c.length,E=S-1,R=s;R!=null&&++y<S;){var A=Vn(c[y]),B=f;if(A==="__proto__"||A==="constructor"||A==="prototype")return s;if(y!=E){var H=R[A];B=m?m(H,A,R):t,B===t&&(B=rt(H)?H:ui(c[y+1])?[]:{})}Tc(R,A,B),R=R[A]}return s}var r_=zp?function(s,c){return zp.set(s,c),s}:pr,IN=$p?function(s,c){return $p(s,"toString",{configurable:!0,enumerable:!1,value:Ax(c),writable:!0})}:pr;function FN(s){return cu(Ds(s))}function Zr(s,c,f){var m=-1,y=s.length;c<0&&(c=-c>y?0:y+c),f=f>y?y:f,f<0&&(f+=y),y=c>f?0:f-c>>>0,c>>>=0;for(var S=L(y);++m<y;)S[m]=s[m+c];return S}function CN(s,c){var f;return Bi(s,function(m,y,S){return f=c(m,y,S),!f}),!!f}function Xp(s,c,f){var m=0,y=s==null?m:s.length;if(typeof c=="number"&&c===c&&y<=or){for(;m<y;){var S=m+y>>>1,E=s[S];E!==null&&!Pr(E)&&(f?E<=c:E<c)?m=S+1:y=S}return y}return ix(s,c,pr,f)}function ix(s,c,f,m){var y=0,S=s==null?0:s.length;if(S===0)return 0;c=f(c);for(var E=c!==c,R=c===null,A=Pr(c),B=c===t;y<S;){var H=jp((y+S)/2),q=f(s[H]),Y=q!==t,ie=q===null,pe=q===q,Ee=Pr(q);if(E)var ue=m||pe;else B?ue=pe&&(m||Y):R?ue=pe&&Y&&(m||!ie):A?ue=pe&&Y&&!ie&&(m||!Ee):ie||Ee?ue=!1:ue=m?q<=c:q<c;ue?y=H+1:S=H}return Vt(S,Re)}function n_(s,c){for(var f=-1,m=s.length,y=0,S=[];++f<m;){var E=s[f],R=c?c(E):E;if(!f||!vn(R,A)){var A=R;S[y++]=E===0?0:E}}return S}function i_(s){return typeof s=="number"?s:Pr(s)?me:+s}function kr(s){if(typeof s=="string")return s;if(xe(s))return Xe(s,kr)+"";if(Pr(s))return Nw?Nw.call(s):"";var c=s+"";return c=="0"&&1/s==-K?"-0":c}function Hi(s,c,f){var m=-1,y=Ip,S=s.length,E=!0,R=[],A=R;if(f)E=!1,y=Fy;else if(S>=r){var B=c?null:jN(s);if(B)return Cp(B);E=!1,y=dc,A=new Mo}else A=c?[]:R;e:for(;++m<S;){var H=s[m],q=c?c(H):H;if(H=f||H!==0?H:0,E&&q===q){for(var Y=A.length;Y--;)if(A[Y]===q)continue e;c&&A.push(q),R.push(H)}else y(A,q,f)||(A!==R&&A.push(q),R.push(H))}return R}function ox(s,c){return c=Wi(c,s),s=I_(s,c),s==null||delete s[Vn(Yr(c))]}function o_(s,c,f,m){return wc(s,c,f(Do(s,c)),m)}function eu(s,c,f,m){for(var y=s.length,S=m?y:-1;(m?S--:++S<y)&&c(s[S],S,s););return f?Zr(s,m?0:S,m?S+1:y):Zr(s,m?S+1:0,m?y:S)}function s_(s,c){var f=s;return f instanceof Ae&&(f=f.value()),Cy(c,function(m,y){return y.func.apply(y.thisArg,Ni([m],y.args))},f)}function sx(s,c,f){var m=s.length;if(m<2)return m?Hi(s[0]):[];for(var y=-1,S=L(m);++y<m;)for(var E=s[y],R=-1;++R<m;)R!=y&&(S[y]=Sc(S[y]||E,s[R],c,f));return Hi(Ft(S,1),c,f)}function a_(s,c,f){for(var m=-1,y=s.length,S=c.length,E={};++m<y;){var R=m<S?c[m]:t;f(E,s[m],R)}return E}function ax(s){return ct(s)?s:[]}function cx(s){return typeof s=="function"?s:pr}function Wi(s,c){return xe(s)?s:yx(s,c)?[s]:N_(We(s))}var ON=ke;function $i(s,c,f){var m=s.length;return f=f===t?m:f,!c&&f>=m?s:Zr(s,c,f)}var c_=bO||function(s){return _t.clearTimeout(s)};function l_(s,c){if(c)return s.slice();var f=s.length,m=Aw?Aw(f):new s.constructor(f);return s.copy(m),m}function lx(s){var c=new s.constructor(s.byteLength);return new Bp(c).set(new Bp(s)),c}function NN(s,c){var f=c?lx(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.byteLength)}function LN(s){var c=new s.constructor(s.source,zb.exec(s));return c.lastIndex=s.lastIndex,c}function UN(s){return xc?ze(xc.call(s)):{}}function p_(s,c){var f=c?lx(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}function u_(s,c){if(s!==c){var f=s!==t,m=s===null,y=s===s,S=Pr(s),E=c!==t,R=c===null,A=c===c,B=Pr(c);if(!R&&!B&&!S&&s>c||S&&E&&A&&!R&&!B||m&&E&&A||!f&&A||!y)return 1;if(!m&&!S&&!B&&s<c||B&&f&&y&&!m&&!S||R&&f&&y||!E&&y||!A)return-1}return 0}function VN(s,c,f){for(var m=-1,y=s.criteria,S=c.criteria,E=y.length,R=f.length;++m<E;){var A=u_(y[m],S[m]);if(A){if(m>=R)return A;var B=f[m];return A*(B=="desc"?-1:1)}}return s.index-c.index}function f_(s,c,f,m){for(var y=-1,S=s.length,E=f.length,R=-1,A=c.length,B=Tt(S-E,0),H=L(A+B),q=!m;++R<A;)H[R]=c[R];for(;++y<E;)(q||y<S)&&(H[f[y]]=s[y]);for(;B--;)H[R++]=s[y++];return H}function d_(s,c,f,m){for(var y=-1,S=s.length,E=-1,R=f.length,A=-1,B=c.length,H=Tt(S-R,0),q=L(H+B),Y=!m;++y<H;)q[y]=s[y];for(var ie=y;++A<B;)q[ie+A]=c[A];for(;++E<R;)(Y||y<S)&&(q[ie+f[E]]=s[y++]);return q}function ar(s,c){var f=-1,m=s.length;for(c||(c=L(m));++f<m;)c[f]=s[f];return c}function Un(s,c,f,m){var y=!f;f||(f={});for(var S=-1,E=c.length;++S<E;){var R=c[S],A=m?m(f[R],s[R],R,f,s):t;A===t&&(A=s[R]),y?ci(f,R,A):Tc(f,R,A)}return f}function BN(s,c){return Un(s,gx(s),c)}function HN(s,c){return Un(s,R_(s),c)}function tu(s,c){return function(f,m){var y=xe(f)?zC:lN,S=c?c():{};return y(f,s,le(m,2),S)}}function ks(s){return ke(function(c,f){var m=-1,y=f.length,S=y>1?f[y-1]:t,E=y>2?f[2]:t;for(S=s.length>3&&typeof S=="function"?(y--,S):t,E&&Qt(f[0],f[1],E)&&(S=y<3?t:S,y=1),c=ze(c);++m<y;){var R=f[m];R&&s(c,R,m,S)}return c})}function m_(s,c){return function(f,m){if(f==null)return f;if(!cr(f))return s(f,m);for(var y=f.length,S=c?y:-1,E=ze(f);(c?S--:++S<y)&&m(E[S],S,E)!==!1;);return f}}function h_(s){return function(c,f,m){for(var y=-1,S=ze(c),E=m(c),R=E.length;R--;){var A=E[s?R:++y];if(f(S[A],A,S)===!1)break}return c}}function WN(s,c,f){var m=c&b,y=_c(s);function S(){var E=this&&this!==_t&&this instanceof S?y:s;return E.apply(m?f:this,arguments)}return S}function g_(s){return function(c){c=We(c);var f=vs(c)?Tn(c):t,m=f?f[0]:c.charAt(0),y=f?$i(f,1).join(""):c.slice(1);return m[s]()+y}}function Ps(s){return function(c){return Cy(mE(dE(c).replace(IC,"")),s,"")}}function _c(s){return function(){var c=arguments;switch(c.length){case 0:return new s;case 1:return new s(c[0]);case 2:return new s(c[0],c[1]);case 3:return new s(c[0],c[1],c[2]);case 4:return new s(c[0],c[1],c[2],c[3]);case 5:return new s(c[0],c[1],c[2],c[3],c[4]);case 6:return new s(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new s(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=Rs(s.prototype),m=s.apply(f,c);return rt(m)?m:f}}function $N(s,c,f){var m=_c(s);function y(){for(var S=arguments.length,E=L(S),R=S,A=Ms(y);R--;)E[R]=arguments[R];var B=S<3&&E[0]!==A&&E[S-1]!==A?[]:Li(E,A);if(S-=B.length,S<f)return v_(s,c,ru,y.placeholder,t,E,B,t,t,f-S);var H=this&&this!==_t&&this instanceof y?m:s;return Er(H,this,E)}return y}function y_(s){return function(c,f,m){var y=ze(c);if(!cr(c)){var S=le(f,3);c=Et(c),f=function(R){return S(y[R],R,y)}}var E=s(c,f,m);return E>-1?y[S?c[E]:E]:t}}function x_(s){return pi(function(c){var f=c.length,m=f,y=Kr.prototype.thru;for(s&&c.reverse();m--;){var S=c[m];if(typeof S!="function")throw new Gr(i);if(y&&!E&&su(S)=="wrapper")var E=new Kr([],!0)}for(m=E?m:f;++m<f;){S=c[m];var R=su(S),A=R=="wrapper"?mx(S):t;A&&xx(A[0])&&A[1]==(he|M|Z|de)&&!A[4].length&&A[9]==1?E=E[su(A[0])].apply(E,A[3]):E=S.length==1&&xx(S)?E[R]():E.thru(S)}return function(){var B=arguments,H=B[0];if(E&&B.length==1&&xe(H))return E.plant(H).value();for(var q=0,Y=f?c[q].apply(this,B):H;++q<f;)Y=c[q].call(this,Y);return Y}})}function ru(s,c,f,m,y,S,E,R,A,B){var H=c&he,q=c&b,Y=c&w,ie=c&(M|U),pe=c&mt,Ee=Y?t:_c(s);function ue(){for(var Pe=arguments.length,Ie=L(Pe),Mr=Pe;Mr--;)Ie[Mr]=arguments[Mr];if(ie)var Zt=Ms(ue),Ar=tO(Ie,Zt);if(m&&(Ie=f_(Ie,m,y,ie)),S&&(Ie=d_(Ie,S,E,ie)),Pe-=Ar,ie&&Pe<B){var lt=Li(Ie,Zt);return v_(s,c,ru,ue.placeholder,f,Ie,lt,R,A,B-Pe)}var bn=q?f:this,mi=Y?bn[s]:s;return Pe=Ie.length,R?Ie=lL(Ie,R):pe&&Pe>1&&Ie.reverse(),H&&A<Pe&&(Ie.length=A),this&&this!==_t&&this instanceof ue&&(mi=Ee||_c(mi)),mi.apply(bn,Ie)}return ue}function T_(s,c){return function(f,m){return yN(f,s,c(m),{})}}function nu(s,c){return function(f,m){var y;if(f===t&&m===t)return c;if(f!==t&&(y=f),m!==t){if(y===t)return m;typeof f=="string"||typeof m=="string"?(f=kr(f),m=kr(m)):(f=i_(f),m=i_(m)),y=s(f,m)}return y}}function px(s){return pi(function(c){return c=Xe(c,Rr(le())),ke(function(f){var m=this;return s(c,function(y){return Er(y,m,f)})})})}function iu(s,c){c=c===t?" ":kr(c);var f=c.length;if(f<2)return f?nx(c,s):c;var m=nx(c,qp(s/bs(c)));return vs(c)?$i(Tn(m),0,s).join(""):m.slice(0,s)}function qN(s,c,f,m){var y=c&b,S=_c(s);function E(){for(var R=-1,A=arguments.length,B=-1,H=m.length,q=L(H+A),Y=this&&this!==_t&&this instanceof E?S:s;++B<H;)q[B]=m[B];for(;A--;)q[B++]=arguments[++R];return Er(Y,y?f:this,q)}return E}function S_(s){return function(c,f,m){return m&&typeof m!="number"&&Qt(c,f,m)&&(f=m=t),c=di(c),f===t?(f=c,c=0):f=di(f),m=m===t?c<f?1:-1:di(m),MN(c,f,m,s)}}function ou(s){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=Jr(c),f=Jr(f)),s(c,f)}}function v_(s,c,f,m,y,S,E,R,A,B){var H=c&M,q=H?E:t,Y=H?t:E,ie=H?S:t,pe=H?t:S;c|=H?Z:ne,c&=~(H?ne:Z),c&F||(c&=~(b|w));var Ee=[s,c,y,ie,q,pe,Y,R,A,B],ue=f.apply(t,Ee);return xx(s)&&F_(ue,Ee),ue.placeholder=m,C_(ue,s,c)}function ux(s){var c=xt[s];return function(f,m){if(f=Jr(f),m=m==null?0:Vt(be(m),292),m&&Cw(f)){var y=(We(f)+"e").split("e"),S=c(y[0]+"e"+(+y[1]+m));return y=(We(S)+"e").split("e"),+(y[0]+"e"+(+y[1]-m))}return c(f)}}var jN=_s&&1/Cp(new _s([,-0]))[1]==K?function(s){return new _s(s)}:Fx;function b_(s){return function(c){var f=Bt(c);return f==yn?Hy(c):f==xn?cO(c):eO(c,s(c))}}function li(s,c,f,m,y,S,E,R){var A=c&w;if(!A&&typeof s!="function")throw new Gr(i);var B=m?m.length:0;if(B||(c&=~(Z|ne),m=y=t),E=E===t?E:Tt(be(E),0),R=R===t?R:be(R),B-=y?y.length:0,c&ne){var H=m,q=y;m=y=t}var Y=A?t:mx(s),ie=[s,c,f,m,y,H,q,S,E,R];if(Y&&sL(ie,Y),s=ie[0],c=ie[1],f=ie[2],m=ie[3],y=ie[4],R=ie[9]=ie[9]===t?A?0:s.length:Tt(ie[9]-B,0),!R&&c&(M|U)&&(c&=~(M|U)),!c||c==b)var pe=WN(s,c,f);else c==M||c==U?pe=$N(s,c,R):(c==Z||c==(b|Z))&&!y.length?pe=qN(s,c,f,m):pe=ru.apply(t,ie);var Ee=Y?r_:F_;return C_(Ee(pe,ie),s,c)}function w_(s,c,f,m){return s===t||vn(s,ws[f])&&!qe.call(m,f)?c:s}function __(s,c,f,m,y,S){return rt(s)&&rt(c)&&(S.set(c,s),Jp(s,c,t,__,S),S.delete(c)),s}function zN(s){return kc(s)?t:s}function E_(s,c,f,m,y,S){var E=f&g,R=s.length,A=c.length;if(R!=A&&!(E&&A>R))return!1;var B=S.get(s),H=S.get(c);if(B&&H)return B==c&&H==s;var q=-1,Y=!0,ie=f&x?new Mo:t;for(S.set(s,c),S.set(c,s);++q<R;){var pe=s[q],Ee=c[q];if(m)var ue=E?m(Ee,pe,q,c,s,S):m(pe,Ee,q,s,c,S);if(ue!==t){if(ue)continue;Y=!1;break}if(ie){if(!Oy(c,function(Pe,Ie){if(!dc(ie,Ie)&&(pe===Pe||y(pe,Pe,f,m,S)))return ie.push(Ie)})){Y=!1;break}}else if(!(pe===Ee||y(pe,Ee,f,m,S))){Y=!1;break}}return S.delete(s),S.delete(c),Y}function GN(s,c,f,m,y,S,E){switch(f){case xs:if(s.byteLength!=c.byteLength||s.byteOffset!=c.byteOffset)return!1;s=s.buffer,c=c.buffer;case fc:return!(s.byteLength!=c.byteLength||!S(new Bp(s),new Bp(c)));case gn:case qr:case cc:return vn(+s,+c);case ii:return s.name==c.name&&s.message==c.message;case lc:case pc:return s==c+"";case yn:var R=Hy;case xn:var A=m&g;if(R||(R=Cp),s.size!=c.size&&!A)return!1;var B=E.get(s);if(B)return B==c;m|=x,E.set(s,c);var H=E_(R(s),R(c),m,y,S,E);return E.delete(s),H;case Pp:if(xc)return xc.call(s)==xc.call(c)}return!1}function KN(s,c,f,m,y,S){var E=f&g,R=fx(s),A=R.length,B=fx(c),H=B.length;if(A!=H&&!E)return!1;for(var q=A;q--;){var Y=R[q];if(!(E?Y in c:qe.call(c,Y)))return!1}var ie=S.get(s),pe=S.get(c);if(ie&&pe)return ie==c&&pe==s;var Ee=!0;S.set(s,c),S.set(c,s);for(var ue=E;++q<A;){Y=R[q];var Pe=s[Y],Ie=c[Y];if(m)var Mr=E?m(Ie,Pe,Y,c,s,S):m(Pe,Ie,Y,s,c,S);if(!(Mr===t?Pe===Ie||y(Pe,Ie,f,m,S):Mr)){Ee=!1;break}ue||(ue=Y=="constructor")}if(Ee&&!ue){var Zt=s.constructor,Ar=c.constructor;Zt!=Ar&&"constructor"in s&&"constructor"in c&&!(typeof Zt=="function"&&Zt instanceof Zt&&typeof Ar=="function"&&Ar instanceof Ar)&&(Ee=!1)}return S.delete(s),S.delete(c),Ee}function pi(s){return Sx(D_(s,t,B_),s+"")}function fx(s){return jw(s,Et,gx)}function dx(s){return jw(s,lr,R_)}var mx=zp?function(s){return zp.get(s)}:Fx;function su(s){for(var c=s.name+"",f=Es[c],m=qe.call(Es,c)?f.length:0;m--;){var y=f[m],S=y.func;if(S==null||S==s)return y.name}return c}function Ms(s){var c=qe.call(T,"placeholder")?T:s;return c.placeholder}function le(){var s=T.iteratee||Dx;return s=s===Dx?Kw:s,arguments.length?s(arguments[0],arguments[1]):s}function au(s,c){var f=s.__data__;return rL(c)?f[typeof c=="string"?"string":"hash"]:f.map}function hx(s){for(var c=Et(s),f=c.length;f--;){var m=c[f],y=s[m];c[f]=[m,y,M_(y)]}return c}function Io(s,c){var f=oO(s,c);return Gw(f)?f:t}function QN(s){var c=qe.call(s,ko),f=s[ko];try{s[ko]=t;var m=!0}catch{}var y=Up.call(s);return m&&(c?s[ko]=f:delete s[ko]),y}var gx=$y?function(s){return s==null?[]:(s=ze(s),Oi($y(s),function(c){return Iw.call(s,c)}))}:Cx,R_=$y?function(s){for(var c=[];s;)Ni(c,gx(s)),s=Hp(s);return c}:Cx,Bt=Kt;(qy&&Bt(new qy(new ArrayBuffer(1)))!=xs||hc&&Bt(new hc)!=yn||jy&&Bt(jy.resolve())!=Wb||_s&&Bt(new _s)!=xn||gc&&Bt(new gc)!=uc)&&(Bt=function(s){var c=Kt(s),f=c==oi?s.constructor:t,m=f?Fo(f):"";if(m)switch(m){case DO:return xs;case IO:return yn;case FO:return Wb;case CO:return xn;case OO:return uc}return c});function ZN(s,c,f){for(var m=-1,y=f.length;++m<y;){var S=f[m],E=S.size;switch(S.type){case"drop":s+=E;break;case"dropRight":c-=E;break;case"take":c=Vt(c,s+E);break;case"takeRight":s=Tt(s,c-E);break}}return{start:s,end:c}}function YN(s){var c=s.match(nC);return c?c[1].split(iC):[]}function k_(s,c,f){c=Wi(c,s);for(var m=-1,y=c.length,S=!1;++m<y;){var E=Vn(c[m]);if(!(S=s!=null&&f(s,E)))break;s=s[E]}return S||++m!=y?S:(y=s==null?0:s.length,!!y&&mu(y)&&ui(E,y)&&(xe(s)||Co(s)))}function JN(s){var c=s.length,f=new s.constructor(c);return c&&typeof s[0]=="string"&&qe.call(s,"index")&&(f.index=s.index,f.input=s.input),f}function P_(s){return typeof s.constructor=="function"&&!Ec(s)?Rs(Hp(s)):{}}function XN(s,c,f){var m=s.constructor;switch(c){case fc:return lx(s);case gn:case qr:return new m(+s);case xs:return NN(s,f);case hy:case gy:case yy:case xy:case Ty:case Sy:case vy:case by:case wy:return p_(s,f);case yn:return new m;case cc:case pc:return new m(s);case lc:return LN(s);case xn:return new m;case Pp:return UN(s)}}function eL(s,c){var f=c.length;if(!f)return s;var m=f-1;return c[m]=(f>1?"& ":"")+c[m],c=c.join(f>2?", ":" "),s.replace(rC,`{
/* [wrapped with `+c+`] */
`)}function tL(s){return xe(s)||Co(s)||!!(Fw&&s&&s[Fw])}function ui(s,c){var f=typeof s;return c=c??Q,!!c&&(f=="number"||f!="symbol"&&dC.test(s))&&s>-1&&s%1==0&&s<c}function Qt(s,c,f){if(!rt(f))return!1;var m=typeof c;return(m=="number"?cr(f)&&ui(c,f.length):m=="string"&&c in f)?vn(f[c],s):!1}function yx(s,c){if(xe(s))return!1;var f=typeof s;return f=="number"||f=="symbol"||f=="boolean"||s==null||Pr(s)?!0:J1.test(s)||!Y1.test(s)||c!=null&&s in ze(c)}function rL(s){var c=typeof s;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?s!=="__proto__":s===null}function xx(s){var c=su(s),f=T[c];if(typeof f!="function"||!(c in Ae.prototype))return!1;if(s===f)return!0;var m=mx(f);return!!m&&s===m[0]}function nL(s){return!!Mw&&Mw in s}var iL=Np?fi:Ox;function Ec(s){var c=s&&s.constructor,f=typeof c=="function"&&c.prototype||ws;return s===f}function M_(s){return s===s&&!rt(s)}function A_(s,c){return function(f){return f==null?!1:f[s]===c&&(c!==t||s in ze(f))}}function oL(s){var c=fu(s,function(m){return f.size===l&&f.clear(),m}),f=c.cache;return c}function sL(s,c){var f=s[1],m=c[1],y=f|m,S=y<(b|w|he),E=m==he&&f==M||m==he&&f==de&&s[7].length<=c[8]||m==(he|de)&&c[7].length<=c[8]&&f==M;if(!(S||E))return s;m&b&&(s[2]=c[2],y|=f&b?0:F);var R=c[3];if(R){var A=s[3];s[3]=A?f_(A,R,c[4]):R,s[4]=A?Li(s[3],p):c[4]}return R=c[5],R&&(A=s[5],s[5]=A?d_(A,R,c[6]):R,s[6]=A?Li(s[5],p):c[6]),R=c[7],R&&(s[7]=R),m&he&&(s[8]=s[8]==null?c[8]:Vt(s[8],c[8])),s[9]==null&&(s[9]=c[9]),s[0]=c[0],s[1]=y,s}function aL(s){var c=[];if(s!=null)for(var f in ze(s))c.push(f);return c}function cL(s){return Up.call(s)}function D_(s,c,f){return c=Tt(c===t?s.length-1:c,0),function(){for(var m=arguments,y=-1,S=Tt(m.length-c,0),E=L(S);++y<S;)E[y]=m[c+y];y=-1;for(var R=L(c+1);++y<c;)R[y]=m[y];return R[c]=f(E),Er(s,this,R)}}function I_(s,c){return c.length<2?s:Do(s,Zr(c,0,-1))}function lL(s,c){for(var f=s.length,m=Vt(c.length,f),y=ar(s);m--;){var S=c[m];s[m]=ui(S,f)?y[S]:t}return s}function Tx(s,c){if(!(c==="constructor"&&typeof s[c]=="function")&&c!="__proto__")return s[c]}var F_=O_(r_),Rc=_O||function(s,c){return _t.setTimeout(s,c)},Sx=O_(IN);function C_(s,c,f){var m=c+"";return Sx(s,eL(m,pL(YN(m),f)))}function O_(s){var c=0,f=0;return function(){var m=PO(),y=O-(m-f);if(f=m,y>0){if(++c>=N)return arguments[0]}else c=0;return s.apply(t,arguments)}}function cu(s,c){var f=-1,m=s.length,y=m-1;for(c=c===t?m:c;++f<c;){var S=rx(f,y),E=s[S];s[S]=s[f],s[f]=E}return s.length=c,s}var N_=oL(function(s){var c=[];return s.charCodeAt(0)===46&&c.push(""),s.replace(X1,function(f,m,y,S){c.push(y?S.replace(aC,"$1"):m||f)}),c});function Vn(s){if(typeof s=="string"||Pr(s))return s;var c=s+"";return c=="0"&&1/s==-K?"-0":c}function Fo(s){if(s!=null){try{return Lp.call(s)}catch{}try{return s+""}catch{}}return""}function pL(s,c){return zr(ni,function(f){var m="_."+f[0];c&f[1]&&!Ip(s,m)&&s.push(m)}),s.sort()}function L_(s){if(s instanceof Ae)return s.clone();var c=new Kr(s.__wrapped__,s.__chain__);return c.__actions__=ar(s.__actions__),c.__index__=s.__index__,c.__values__=s.__values__,c}function uL(s,c,f){(f?Qt(s,c,f):c===t)?c=1:c=Tt(be(c),0);var m=s==null?0:s.length;if(!m||c<1)return[];for(var y=0,S=0,E=L(qp(m/c));y<m;)E[S++]=Zr(s,y,y+=c);return E}function fL(s){for(var c=-1,f=s==null?0:s.length,m=0,y=[];++c<f;){var S=s[c];S&&(y[m++]=S)}return y}function dL(){var s=arguments.length;if(!s)return[];for(var c=L(s-1),f=arguments[0],m=s;m--;)c[m-1]=arguments[m];return Ni(xe(f)?ar(f):[f],Ft(c,1))}var mL=ke(function(s,c){return ct(s)?Sc(s,Ft(c,1,ct,!0)):[]}),hL=ke(function(s,c){var f=Yr(c);return ct(f)&&(f=t),ct(s)?Sc(s,Ft(c,1,ct,!0),le(f,2)):[]}),gL=ke(function(s,c){var f=Yr(c);return ct(f)&&(f=t),ct(s)?Sc(s,Ft(c,1,ct,!0),t,f):[]});function yL(s,c,f){var m=s==null?0:s.length;return m?(c=f||c===t?1:be(c),Zr(s,c<0?0:c,m)):[]}function xL(s,c,f){var m=s==null?0:s.length;return m?(c=f||c===t?1:be(c),c=m-c,Zr(s,0,c<0?0:c)):[]}function TL(s,c){return s&&s.length?eu(s,le(c,3),!0,!0):[]}function SL(s,c){return s&&s.length?eu(s,le(c,3),!0):[]}function vL(s,c,f,m){var y=s==null?0:s.length;return y?(f&&typeof f!="number"&&Qt(s,c,f)&&(f=0,m=y),dN(s,c,f,m)):[]}function U_(s,c,f){var m=s==null?0:s.length;if(!m)return-1;var y=f==null?0:be(f);return y<0&&(y=Tt(m+y,0)),Fp(s,le(c,3),y)}function V_(s,c,f){var m=s==null?0:s.length;if(!m)return-1;var y=m-1;return f!==t&&(y=be(f),y=f<0?Tt(m+y,0):Vt(y,m-1)),Fp(s,le(c,3),y,!0)}function B_(s){var c=s==null?0:s.length;return c?Ft(s,1):[]}function bL(s){var c=s==null?0:s.length;return c?Ft(s,K):[]}function wL(s,c){var f=s==null?0:s.length;return f?(c=c===t?1:be(c),Ft(s,c)):[]}function _L(s){for(var c=-1,f=s==null?0:s.length,m={};++c<f;){var y=s[c];m[y[0]]=y[1]}return m}function H_(s){return s&&s.length?s[0]:t}function EL(s,c,f){var m=s==null?0:s.length;if(!m)return-1;var y=f==null?0:be(f);return y<0&&(y=Tt(m+y,0)),Ss(s,c,y)}function RL(s){var c=s==null?0:s.length;return c?Zr(s,0,-1):[]}var kL=ke(function(s){var c=Xe(s,ax);return c.length&&c[0]===s[0]?Yy(c):[]}),PL=ke(function(s){var c=Yr(s),f=Xe(s,ax);return c===Yr(f)?c=t:f.pop(),f.length&&f[0]===s[0]?Yy(f,le(c,2)):[]}),ML=ke(function(s){var c=Yr(s),f=Xe(s,ax);return c=typeof c=="function"?c:t,c&&f.pop(),f.length&&f[0]===s[0]?Yy(f,t,c):[]});function AL(s,c){return s==null?"":RO.call(s,c)}function Yr(s){var c=s==null?0:s.length;return c?s[c-1]:t}function DL(s,c,f){var m=s==null?0:s.length;if(!m)return-1;var y=m;return f!==t&&(y=be(f),y=y<0?Tt(m+y,0):Vt(y,m-1)),c===c?pO(s,c,y):Fp(s,vw,y,!0)}function IL(s,c){return s&&s.length?Jw(s,be(c)):t}var FL=ke(W_);function W_(s,c){return s&&s.length&&c&&c.length?tx(s,c):s}function CL(s,c,f){return s&&s.length&&c&&c.length?tx(s,c,le(f,2)):s}function OL(s,c,f){return s&&s.length&&c&&c.length?tx(s,c,t,f):s}var NL=pi(function(s,c){var f=s==null?0:s.length,m=Gy(s,c);return t_(s,Xe(c,function(y){return ui(y,f)?+y:y}).sort(u_)),m});function LL(s,c){var f=[];if(!(s&&s.length))return f;var m=-1,y=[],S=s.length;for(c=le(c,3);++m<S;){var E=s[m];c(E,m,s)&&(f.push(E),y.push(m))}return t_(s,y),f}function vx(s){return s==null?s:AO.call(s)}function UL(s,c,f){var m=s==null?0:s.length;return m?(f&&typeof f!="number"&&Qt(s,c,f)?(c=0,f=m):(c=c==null?0:be(c),f=f===t?m:be(f)),Zr(s,c,f)):[]}function VL(s,c){return Xp(s,c)}function BL(s,c,f){return ix(s,c,le(f,2))}function HL(s,c){var f=s==null?0:s.length;if(f){var m=Xp(s,c);if(m<f&&vn(s[m],c))return m}return-1}function WL(s,c){return Xp(s,c,!0)}function $L(s,c,f){return ix(s,c,le(f,2),!0)}function qL(s,c){var f=s==null?0:s.length;if(f){var m=Xp(s,c,!0)-1;if(vn(s[m],c))return m}return-1}function jL(s){return s&&s.length?n_(s):[]}function zL(s,c){return s&&s.length?n_(s,le(c,2)):[]}function GL(s){var c=s==null?0:s.length;return c?Zr(s,1,c):[]}function KL(s,c,f){return s&&s.length?(c=f||c===t?1:be(c),Zr(s,0,c<0?0:c)):[]}function QL(s,c,f){var m=s==null?0:s.length;return m?(c=f||c===t?1:be(c),c=m-c,Zr(s,c<0?0:c,m)):[]}function ZL(s,c){return s&&s.length?eu(s,le(c,3),!1,!0):[]}function YL(s,c){return s&&s.length?eu(s,le(c,3)):[]}var JL=ke(function(s){return Hi(Ft(s,1,ct,!0))}),XL=ke(function(s){var c=Yr(s);return ct(c)&&(c=t),Hi(Ft(s,1,ct,!0),le(c,2))}),eU=ke(function(s){var c=Yr(s);return c=typeof c=="function"?c:t,Hi(Ft(s,1,ct,!0),t,c)});function tU(s){return s&&s.length?Hi(s):[]}function rU(s,c){return s&&s.length?Hi(s,le(c,2)):[]}function nU(s,c){return c=typeof c=="function"?c:t,s&&s.length?Hi(s,t,c):[]}function bx(s){if(!(s&&s.length))return[];var c=0;return s=Oi(s,function(f){if(ct(f))return c=Tt(f.length,c),!0}),Vy(c,function(f){return Xe(s,Ny(f))})}function $_(s,c){if(!(s&&s.length))return[];var f=bx(s);return c==null?f:Xe(f,function(m){return Er(c,t,m)})}var iU=ke(function(s,c){return ct(s)?Sc(s,c):[]}),oU=ke(function(s){return sx(Oi(s,ct))}),sU=ke(function(s){var c=Yr(s);return ct(c)&&(c=t),sx(Oi(s,ct),le(c,2))}),aU=ke(function(s){var c=Yr(s);return c=typeof c=="function"?c:t,sx(Oi(s,ct),t,c)}),cU=ke(bx);function lU(s,c){return a_(s||[],c||[],Tc)}function pU(s,c){return a_(s||[],c||[],wc)}var uU=ke(function(s){var c=s.length,f=c>1?s[c-1]:t;return f=typeof f=="function"?(s.pop(),f):t,$_(s,f)});function q_(s){var c=T(s);return c.__chain__=!0,c}function fU(s,c){return c(s),s}function lu(s,c){return c(s)}var dU=pi(function(s){var c=s.length,f=c?s[0]:0,m=this.__wrapped__,y=function(S){return Gy(S,s)};return c>1||this.__actions__.length||!(m instanceof Ae)||!ui(f)?this.thru(y):(m=m.slice(f,+f+(c?1:0)),m.__actions__.push({func:lu,args:[y],thisArg:t}),new Kr(m,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function mU(){return q_(this)}function hU(){return new Kr(this.value(),this.__chain__)}function gU(){this.__values__===t&&(this.__values__=iE(this.value()));var s=this.__index__>=this.__values__.length,c=s?t:this.__values__[this.__index__++];return{done:s,value:c}}function yU(){return this}function xU(s){for(var c,f=this;f instanceof Kp;){var m=L_(f);m.__index__=0,m.__values__=t,c?y.__wrapped__=m:c=m;var y=m;f=f.__wrapped__}return y.__wrapped__=s,c}function TU(){var s=this.__wrapped__;if(s instanceof Ae){var c=s;return this.__actions__.length&&(c=new Ae(this)),c=c.reverse(),c.__actions__.push({func:lu,args:[vx],thisArg:t}),new Kr(c,this.__chain__)}return this.thru(vx)}function SU(){return s_(this.__wrapped__,this.__actions__)}var vU=tu(function(s,c,f){qe.call(s,f)?++s[f]:ci(s,f,1)});function bU(s,c,f){var m=xe(s)?Tw:fN;return f&&Qt(s,c,f)&&(c=t),m(s,le(c,3))}function wU(s,c){var f=xe(s)?Oi:$w;return f(s,le(c,3))}var _U=y_(U_),EU=y_(V_);function RU(s,c){return Ft(pu(s,c),1)}function kU(s,c){return Ft(pu(s,c),K)}function PU(s,c,f){return f=f===t?1:be(f),Ft(pu(s,c),f)}function j_(s,c){var f=xe(s)?zr:Bi;return f(s,le(c,3))}function z_(s,c){var f=xe(s)?GC:Ww;return f(s,le(c,3))}var MU=tu(function(s,c,f){qe.call(s,f)?s[f].push(c):ci(s,f,[c])});function AU(s,c,f,m){s=cr(s)?s:Ds(s),f=f&&!m?be(f):0;var y=s.length;return f<0&&(f=Tt(y+f,0)),hu(s)?f<=y&&s.indexOf(c,f)>-1:!!y&&Ss(s,c,f)>-1}var DU=ke(function(s,c,f){var m=-1,y=typeof c=="function",S=cr(s)?L(s.length):[];return Bi(s,function(E){S[++m]=y?Er(c,E,f):vc(E,c,f)}),S}),IU=tu(function(s,c,f){ci(s,f,c)});function pu(s,c){var f=xe(s)?Xe:Qw;return f(s,le(c,3))}function FU(s,c,f,m){return s==null?[]:(xe(c)||(c=c==null?[]:[c]),f=m?t:f,xe(f)||(f=f==null?[]:[f]),Xw(s,c,f))}var CU=tu(function(s,c,f){s[f?0:1].push(c)},function(){return[[],[]]});function OU(s,c,f){var m=xe(s)?Cy:ww,y=arguments.length<3;return m(s,le(c,4),f,y,Bi)}function NU(s,c,f){var m=xe(s)?KC:ww,y=arguments.length<3;return m(s,le(c,4),f,y,Ww)}function LU(s,c){var f=xe(s)?Oi:$w;return f(s,du(le(c,3)))}function UU(s){var c=xe(s)?Uw:AN;return c(s)}function VU(s,c,f){(f?Qt(s,c,f):c===t)?c=1:c=be(c);var m=xe(s)?aN:DN;return m(s,c)}function BU(s){var c=xe(s)?cN:FN;return c(s)}function HU(s){if(s==null)return 0;if(cr(s))return hu(s)?bs(s):s.length;var c=Bt(s);return c==yn||c==xn?s.size:Xy(s).length}function WU(s,c,f){var m=xe(s)?Oy:CN;return f&&Qt(s,c,f)&&(c=t),m(s,le(c,3))}var $U=ke(function(s,c){if(s==null)return[];var f=c.length;return f>1&&Qt(s,c[0],c[1])?c=[]:f>2&&Qt(c[0],c[1],c[2])&&(c=[c[0]]),Xw(s,Ft(c,1),[])}),uu=wO||function(){return _t.Date.now()};function qU(s,c){if(typeof c!="function")throw new Gr(i);return s=be(s),function(){if(--s<1)return c.apply(this,arguments)}}function G_(s,c,f){return c=f?t:c,c=s&&c==null?s.length:c,li(s,he,t,t,t,t,c)}function K_(s,c){var f;if(typeof c!="function")throw new Gr(i);return s=be(s),function(){return--s>0&&(f=c.apply(this,arguments)),s<=1&&(c=t),f}}var wx=ke(function(s,c,f){var m=b;if(f.length){var y=Li(f,Ms(wx));m|=Z}return li(s,m,c,f,y)}),Q_=ke(function(s,c,f){var m=b|w;if(f.length){var y=Li(f,Ms(Q_));m|=Z}return li(c,m,s,f,y)});function Z_(s,c,f){c=f?t:c;var m=li(s,M,t,t,t,t,t,c);return m.placeholder=Z_.placeholder,m}function Y_(s,c,f){c=f?t:c;var m=li(s,U,t,t,t,t,t,c);return m.placeholder=Y_.placeholder,m}function J_(s,c,f){var m,y,S,E,R,A,B=0,H=!1,q=!1,Y=!0;if(typeof s!="function")throw new Gr(i);c=Jr(c)||0,rt(f)&&(H=!!f.leading,q="maxWait"in f,S=q?Tt(Jr(f.maxWait)||0,c):S,Y="trailing"in f?!!f.trailing:Y);function ie(lt){var bn=m,mi=y;return m=y=t,B=lt,E=s.apply(mi,bn),E}function pe(lt){return B=lt,R=Rc(Pe,c),H?ie(lt):E}function Ee(lt){var bn=lt-A,mi=lt-B,yE=c-bn;return q?Vt(yE,S-mi):yE}function ue(lt){var bn=lt-A,mi=lt-B;return A===t||bn>=c||bn<0||q&&mi>=S}function Pe(){var lt=uu();if(ue(lt))return Ie(lt);R=Rc(Pe,Ee(lt))}function Ie(lt){return R=t,Y&&m?ie(lt):(m=y=t,E)}function Mr(){R!==t&&c_(R),B=0,m=A=y=R=t}function Zt(){return R===t?E:Ie(uu())}function Ar(){var lt=uu(),bn=ue(lt);if(m=arguments,y=this,A=lt,bn){if(R===t)return pe(A);if(q)return c_(R),R=Rc(Pe,c),ie(A)}return R===t&&(R=Rc(Pe,c)),E}return Ar.cancel=Mr,Ar.flush=Zt,Ar}var jU=ke(function(s,c){return Hw(s,1,c)}),zU=ke(function(s,c,f){return Hw(s,Jr(c)||0,f)});function GU(s){return li(s,mt)}function fu(s,c){if(typeof s!="function"||c!=null&&typeof c!="function")throw new Gr(i);var f=function(){var m=arguments,y=c?c.apply(this,m):m[0],S=f.cache;if(S.has(y))return S.get(y);var E=s.apply(this,m);return f.cache=S.set(y,E)||S,E};return f.cache=new(fu.Cache||ai),f}fu.Cache=ai;function du(s){if(typeof s!="function")throw new Gr(i);return function(){var c=arguments;switch(c.length){case 0:return!s.call(this);case 1:return!s.call(this,c[0]);case 2:return!s.call(this,c[0],c[1]);case 3:return!s.call(this,c[0],c[1],c[2])}return!s.apply(this,c)}}function KU(s){return K_(2,s)}var QU=ON(function(s,c){c=c.length==1&&xe(c[0])?Xe(c[0],Rr(le())):Xe(Ft(c,1),Rr(le()));var f=c.length;return ke(function(m){for(var y=-1,S=Vt(m.length,f);++y<S;)m[y]=c[y].call(this,m[y]);return Er(s,this,m)})}),_x=ke(function(s,c){var f=Li(c,Ms(_x));return li(s,Z,t,c,f)}),X_=ke(function(s,c){var f=Li(c,Ms(X_));return li(s,ne,t,c,f)}),ZU=pi(function(s,c){return li(s,de,t,t,t,c)});function YU(s,c){if(typeof s!="function")throw new Gr(i);return c=c===t?c:be(c),ke(s,c)}function JU(s,c){if(typeof s!="function")throw new Gr(i);return c=c==null?0:Tt(be(c),0),ke(function(f){var m=f[c],y=$i(f,0,c);return m&&Ni(y,m),Er(s,this,y)})}function XU(s,c,f){var m=!0,y=!0;if(typeof s!="function")throw new Gr(i);return rt(f)&&(m="leading"in f?!!f.leading:m,y="trailing"in f?!!f.trailing:y),J_(s,c,{leading:m,maxWait:c,trailing:y})}function e2(s){return G_(s,1)}function t2(s,c){return _x(cx(c),s)}function r2(){if(!arguments.length)return[];var s=arguments[0];return xe(s)?s:[s]}function n2(s){return Qr(s,h)}function i2(s,c){return c=typeof c=="function"?c:t,Qr(s,h,c)}function o2(s){return Qr(s,u|h)}function s2(s,c){return c=typeof c=="function"?c:t,Qr(s,u|h,c)}function a2(s,c){return c==null||Bw(s,c,Et(c))}function vn(s,c){return s===c||s!==s&&c!==c}var c2=ou(Zy),l2=ou(function(s,c){return s>=c}),Co=zw(function(){return arguments}())?zw:function(s){return ot(s)&&qe.call(s,"callee")&&!Iw.call(s,"callee")},xe=L.isArray,p2=dw?Rr(dw):xN;function cr(s){return s!=null&&mu(s.length)&&!fi(s)}function ct(s){return ot(s)&&cr(s)}function u2(s){return s===!0||s===!1||ot(s)&&Kt(s)==gn}var qi=EO||Ox,f2=mw?Rr(mw):TN;function d2(s){return ot(s)&&s.nodeType===1&&!kc(s)}function m2(s){if(s==null)return!0;if(cr(s)&&(xe(s)||typeof s=="string"||typeof s.splice=="function"||qi(s)||As(s)||Co(s)))return!s.length;var c=Bt(s);if(c==yn||c==xn)return!s.size;if(Ec(s))return!Xy(s).length;for(var f in s)if(qe.call(s,f))return!1;return!0}function h2(s,c){return bc(s,c)}function g2(s,c,f){f=typeof f=="function"?f:t;var m=f?f(s,c):t;return m===t?bc(s,c,t,f):!!m}function Ex(s){if(!ot(s))return!1;var c=Kt(s);return c==ii||c==Eo||typeof s.message=="string"&&typeof s.name=="string"&&!kc(s)}function y2(s){return typeof s=="number"&&Cw(s)}function fi(s){if(!rt(s))return!1;var c=Kt(s);return c==ys||c==Hb||c==_r||c==H1}function eE(s){return typeof s=="number"&&s==be(s)}function mu(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Q}function rt(s){var c=typeof s;return s!=null&&(c=="object"||c=="function")}function ot(s){return s!=null&&typeof s=="object"}var tE=hw?Rr(hw):vN;function x2(s,c){return s===c||Jy(s,c,hx(c))}function T2(s,c,f){return f=typeof f=="function"?f:t,Jy(s,c,hx(c),f)}function S2(s){return rE(s)&&s!=+s}function v2(s){if(iL(s))throw new ge(n);return Gw(s)}function b2(s){return s===null}function w2(s){return s==null}function rE(s){return typeof s=="number"||ot(s)&&Kt(s)==cc}function kc(s){if(!ot(s)||Kt(s)!=oi)return!1;var c=Hp(s);if(c===null)return!0;var f=qe.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&Lp.call(f)==TO}var Rx=gw?Rr(gw):bN;function _2(s){return eE(s)&&s>=-Q&&s<=Q}var nE=yw?Rr(yw):wN;function hu(s){return typeof s=="string"||!xe(s)&&ot(s)&&Kt(s)==pc}function Pr(s){return typeof s=="symbol"||ot(s)&&Kt(s)==Pp}var As=xw?Rr(xw):_N;function E2(s){return s===t}function R2(s){return ot(s)&&Bt(s)==uc}function k2(s){return ot(s)&&Kt(s)==$1}var P2=ou(ex),M2=ou(function(s,c){return s<=c});function iE(s){if(!s)return[];if(cr(s))return hu(s)?Tn(s):ar(s);if(mc&&s[mc])return aO(s[mc]());var c=Bt(s),f=c==yn?Hy:c==xn?Cp:Ds;return f(s)}function di(s){if(!s)return s===0?s:0;if(s=Jr(s),s===K||s===-K){var c=s<0?-1:1;return c*te}return s===s?s:0}function be(s){var c=di(s),f=c%1;return c===c?f?c-f:c:0}function oE(s){return s?Ao(be(s),0,re):0}function Jr(s){if(typeof s=="number")return s;if(Pr(s))return me;if(rt(s)){var c=typeof s.valueOf=="function"?s.valueOf():s;s=rt(c)?c+"":c}if(typeof s!="string")return s===0?s:+s;s=_w(s);var f=pC.test(s);return f||fC.test(s)?qC(s.slice(2),f?2:8):lC.test(s)?me:+s}function sE(s){return Un(s,lr(s))}function A2(s){return s?Ao(be(s),-Q,Q):s===0?s:0}function We(s){return s==null?"":kr(s)}var D2=ks(function(s,c){if(Ec(c)||cr(c)){Un(c,Et(c),s);return}for(var f in c)qe.call(c,f)&&Tc(s,f,c[f])}),aE=ks(function(s,c){Un(c,lr(c),s)}),gu=ks(function(s,c,f,m){Un(c,lr(c),s,m)}),I2=ks(function(s,c,f,m){Un(c,Et(c),s,m)}),F2=pi(Gy);function C2(s,c){var f=Rs(s);return c==null?f:Vw(f,c)}var O2=ke(function(s,c){s=ze(s);var f=-1,m=c.length,y=m>2?c[2]:t;for(y&&Qt(c[0],c[1],y)&&(m=1);++f<m;)for(var S=c[f],E=lr(S),R=-1,A=E.length;++R<A;){var B=E[R],H=s[B];(H===t||vn(H,ws[B])&&!qe.call(s,B))&&(s[B]=S[B])}return s}),N2=ke(function(s){return s.push(t,__),Er(cE,t,s)});function L2(s,c){return Sw(s,le(c,3),Ln)}function U2(s,c){return Sw(s,le(c,3),Qy)}function V2(s,c){return s==null?s:Ky(s,le(c,3),lr)}function B2(s,c){return s==null?s:qw(s,le(c,3),lr)}function H2(s,c){return s&&Ln(s,le(c,3))}function W2(s,c){return s&&Qy(s,le(c,3))}function $2(s){return s==null?[]:Yp(s,Et(s))}function q2(s){return s==null?[]:Yp(s,lr(s))}function kx(s,c,f){var m=s==null?t:Do(s,c);return m===t?f:m}function j2(s,c){return s!=null&&k_(s,c,mN)}function Px(s,c){return s!=null&&k_(s,c,hN)}var z2=T_(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=Up.call(c)),s[c]=f},Ax(pr)),G2=T_(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=Up.call(c)),qe.call(s,c)?s[c].push(f):s[c]=[f]},le),K2=ke(vc);function Et(s){return cr(s)?Lw(s):Xy(s)}function lr(s){return cr(s)?Lw(s,!0):EN(s)}function Q2(s,c){var f={};return c=le(c,3),Ln(s,function(m,y,S){ci(f,c(m,y,S),m)}),f}function Z2(s,c){var f={};return c=le(c,3),Ln(s,function(m,y,S){ci(f,y,c(m,y,S))}),f}var Y2=ks(function(s,c,f){Jp(s,c,f)}),cE=ks(function(s,c,f,m){Jp(s,c,f,m)}),J2=pi(function(s,c){var f={};if(s==null)return f;var m=!1;c=Xe(c,function(S){return S=Wi(S,s),m||(m=S.length>1),S}),Un(s,dx(s),f),m&&(f=Qr(f,u|d|h,zN));for(var y=c.length;y--;)ox(f,c[y]);return f});function X2(s,c){return lE(s,du(le(c)))}var eV=pi(function(s,c){return s==null?{}:kN(s,c)});function lE(s,c){if(s==null)return{};var f=Xe(dx(s),function(m){return[m]});return c=le(c),e_(s,f,function(m,y){return c(m,y[0])})}function tV(s,c,f){c=Wi(c,s);var m=-1,y=c.length;for(y||(y=1,s=t);++m<y;){var S=s==null?t:s[Vn(c[m])];S===t&&(m=y,S=f),s=fi(S)?S.call(s):S}return s}function rV(s,c,f){return s==null?s:wc(s,c,f)}function nV(s,c,f,m){return m=typeof m=="function"?m:t,s==null?s:wc(s,c,f,m)}var pE=b_(Et),uE=b_(lr);function iV(s,c,f){var m=xe(s),y=m||qi(s)||As(s);if(c=le(c,4),f==null){var S=s&&s.constructor;y?f=m?new S:[]:rt(s)?f=fi(S)?Rs(Hp(s)):{}:f={}}return(y?zr:Ln)(s,function(E,R,A){return c(f,E,R,A)}),f}function oV(s,c){return s==null?!0:ox(s,c)}function sV(s,c,f){return s==null?s:o_(s,c,cx(f))}function aV(s,c,f,m){return m=typeof m=="function"?m:t,s==null?s:o_(s,c,cx(f),m)}function Ds(s){return s==null?[]:By(s,Et(s))}function cV(s){return s==null?[]:By(s,lr(s))}function lV(s,c,f){return f===t&&(f=c,c=t),f!==t&&(f=Jr(f),f=f===f?f:0),c!==t&&(c=Jr(c),c=c===c?c:0),Ao(Jr(s),c,f)}function pV(s,c,f){return c=di(c),f===t?(f=c,c=0):f=di(f),s=Jr(s),gN(s,c,f)}function uV(s,c,f){if(f&&typeof f!="boolean"&&Qt(s,c,f)&&(c=f=t),f===t&&(typeof c=="boolean"?(f=c,c=t):typeof s=="boolean"&&(f=s,s=t)),s===t&&c===t?(s=0,c=1):(s=di(s),c===t?(c=s,s=0):c=di(c)),s>c){var m=s;s=c,c=m}if(f||s%1||c%1){var y=Ow();return Vt(s+y*(c-s+$C("1e-"+((y+"").length-1))),c)}return rx(s,c)}var fV=Ps(function(s,c,f){return c=c.toLowerCase(),s+(f?fE(c):c)});function fE(s){return Mx(We(s).toLowerCase())}function dE(s){return s=We(s),s&&s.replace(mC,rO).replace(FC,"")}function dV(s,c,f){s=We(s),c=kr(c);var m=s.length;f=f===t?m:Ao(be(f),0,m);var y=f;return f-=c.length,f>=0&&s.slice(f,y)==c}function mV(s){return s=We(s),s&&K1.test(s)?s.replace(qb,nO):s}function hV(s){return s=We(s),s&&eC.test(s)?s.replace(_y,"\\$&"):s}var gV=Ps(function(s,c,f){return s+(f?"-":"")+c.toLowerCase()}),yV=Ps(function(s,c,f){return s+(f?" ":"")+c.toLowerCase()}),xV=g_("toLowerCase");function TV(s,c,f){s=We(s),c=be(c);var m=c?bs(s):0;if(!c||m>=c)return s;var y=(c-m)/2;return iu(jp(y),f)+s+iu(qp(y),f)}function SV(s,c,f){s=We(s),c=be(c);var m=c?bs(s):0;return c&&m<c?s+iu(c-m,f):s}function vV(s,c,f){s=We(s),c=be(c);var m=c?bs(s):0;return c&&m<c?iu(c-m,f)+s:s}function bV(s,c,f){return f||c==null?c=0:c&&(c=+c),MO(We(s).replace(Ey,""),c||0)}function wV(s,c,f){return(f?Qt(s,c,f):c===t)?c=1:c=be(c),nx(We(s),c)}function _V(){var s=arguments,c=We(s[0]);return s.length<3?c:c.replace(s[1],s[2])}var EV=Ps(function(s,c,f){return s+(f?"_":"")+c.toLowerCase()});function RV(s,c,f){return f&&typeof f!="number"&&Qt(s,c,f)&&(c=f=t),f=f===t?re:f>>>0,f?(s=We(s),s&&(typeof c=="string"||c!=null&&!Rx(c))&&(c=kr(c),!c&&vs(s))?$i(Tn(s),0,f):s.split(c,f)):[]}var kV=Ps(function(s,c,f){return s+(f?" ":"")+Mx(c)});function PV(s,c,f){return s=We(s),f=f==null?0:Ao(be(f),0,s.length),c=kr(c),s.slice(f,f+c.length)==c}function MV(s,c,f){var m=T.templateSettings;f&&Qt(s,c,f)&&(c=t),s=We(s),c=gu({},c,m,w_);var y=gu({},c.imports,m.imports,w_),S=Et(y),E=By(y,S),R,A,B=0,H=c.interpolate||Mp,q="__p += '",Y=Wy((c.escape||Mp).source+"|"+H.source+"|"+(H===jb?cC:Mp).source+"|"+(c.evaluate||Mp).source+"|$","g"),ie="//# sourceURL="+(qe.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++UC+"]")+`
`;s.replace(Y,function(ue,Pe,Ie,Mr,Zt,Ar){return Ie||(Ie=Mr),q+=s.slice(B,Ar).replace(hC,iO),Pe&&(R=!0,q+=`' +
__e(`+Pe+`) +
'`),Zt&&(A=!0,q+=`';
`+Zt+`;
__p += '`),Ie&&(q+=`' +
((__t = (`+Ie+`)) == null ? '' : __t) +
'`),B=Ar+ue.length,ue}),q+=`';
`;var pe=qe.call(c,"variable")&&c.variable;if(!pe)q=`with (obj) {
`+q+`
}
`;else if(sC.test(pe))throw new ge(o);q=(A?q.replace(q1,""):q).replace(j1,"$1").replace(z1,"$1;"),q="function("+(pe||"obj")+`) {
`+(pe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+q+`return __p
}`;var Ee=hE(function(){return Ve(S,ie+"return "+q).apply(t,E)});if(Ee.source=q,Ex(Ee))throw Ee;return Ee}function AV(s){return We(s).toLowerCase()}function DV(s){return We(s).toUpperCase()}function IV(s,c,f){if(s=We(s),s&&(f||c===t))return _w(s);if(!s||!(c=kr(c)))return s;var m=Tn(s),y=Tn(c),S=Ew(m,y),E=Rw(m,y)+1;return $i(m,S,E).join("")}function FV(s,c,f){if(s=We(s),s&&(f||c===t))return s.slice(0,Pw(s)+1);if(!s||!(c=kr(c)))return s;var m=Tn(s),y=Rw(m,Tn(c))+1;return $i(m,0,y).join("")}function CV(s,c,f){if(s=We(s),s&&(f||c===t))return s.replace(Ey,"");if(!s||!(c=kr(c)))return s;var m=Tn(s),y=Ew(m,Tn(c));return $i(m,y).join("")}function OV(s,c){var f=It,m=it;if(rt(c)){var y="separator"in c?c.separator:y;f="length"in c?be(c.length):f,m="omission"in c?kr(c.omission):m}s=We(s);var S=s.length;if(vs(s)){var E=Tn(s);S=E.length}if(f>=S)return s;var R=f-bs(m);if(R<1)return m;var A=E?$i(E,0,R).join(""):s.slice(0,R);if(y===t)return A+m;if(E&&(R+=A.length-R),Rx(y)){if(s.slice(R).search(y)){var B,H=A;for(y.global||(y=Wy(y.source,We(zb.exec(y))+"g")),y.lastIndex=0;B=y.exec(H);)var q=B.index;A=A.slice(0,q===t?R:q)}}else if(s.indexOf(kr(y),R)!=R){var Y=A.lastIndexOf(y);Y>-1&&(A=A.slice(0,Y))}return A+m}function NV(s){return s=We(s),s&&G1.test(s)?s.replace($b,uO):s}var LV=Ps(function(s,c,f){return s+(f?" ":"")+c.toUpperCase()}),Mx=g_("toUpperCase");function mE(s,c,f){return s=We(s),c=f?t:c,c===t?sO(s)?mO(s):YC(s):s.match(c)||[]}var hE=ke(function(s,c){try{return Er(s,t,c)}catch(f){return Ex(f)?f:new ge(f)}}),UV=pi(function(s,c){return zr(c,function(f){f=Vn(f),ci(s,f,wx(s[f],s))}),s});function VV(s){var c=s==null?0:s.length,f=le();return s=c?Xe(s,function(m){if(typeof m[1]!="function")throw new Gr(i);return[f(m[0]),m[1]]}):[],ke(function(m){for(var y=-1;++y<c;){var S=s[y];if(Er(S[0],this,m))return Er(S[1],this,m)}})}function BV(s){return uN(Qr(s,u))}function Ax(s){return function(){return s}}function HV(s,c){return s==null||s!==s?c:s}var WV=x_(),$V=x_(!0);function pr(s){return s}function Dx(s){return Kw(typeof s=="function"?s:Qr(s,u))}function qV(s){return Zw(Qr(s,u))}function jV(s,c){return Yw(s,Qr(c,u))}var zV=ke(function(s,c){return function(f){return vc(f,s,c)}}),GV=ke(function(s,c){return function(f){return vc(s,f,c)}});function Ix(s,c,f){var m=Et(c),y=Yp(c,m);f==null&&!(rt(c)&&(y.length||!m.length))&&(f=c,c=s,s=this,y=Yp(c,Et(c)));var S=!(rt(f)&&"chain"in f)||!!f.chain,E=fi(s);return zr(y,function(R){var A=c[R];s[R]=A,E&&(s.prototype[R]=function(){var B=this.__chain__;if(S||B){var H=s(this.__wrapped__),q=H.__actions__=ar(this.__actions__);return q.push({func:A,args:arguments,thisArg:s}),H.__chain__=B,H}return A.apply(s,Ni([this.value()],arguments))})}),s}function KV(){return _t._===this&&(_t._=SO),this}function Fx(){}function QV(s){return s=be(s),ke(function(c){return Jw(c,s)})}var ZV=px(Xe),YV=px(Tw),JV=px(Oy);function gE(s){return yx(s)?Ny(Vn(s)):PN(s)}function XV(s){return function(c){return s==null?t:Do(s,c)}}var eB=S_(),tB=S_(!0);function Cx(){return[]}function Ox(){return!1}function rB(){return{}}function nB(){return""}function iB(){return!0}function oB(s,c){if(s=be(s),s<1||s>Q)return[];var f=re,m=Vt(s,re);c=le(c),s-=re;for(var y=Vy(m,c);++f<s;)c(f);return y}function sB(s){return xe(s)?Xe(s,Vn):Pr(s)?[s]:ar(N_(We(s)))}function aB(s){var c=++xO;return We(s)+c}var cB=nu(function(s,c){return s+c},0),lB=ux("ceil"),pB=nu(function(s,c){return s/c},1),uB=ux("floor");function fB(s){return s&&s.length?Zp(s,pr,Zy):t}function dB(s,c){return s&&s.length?Zp(s,le(c,2),Zy):t}function mB(s){return bw(s,pr)}function hB(s,c){return bw(s,le(c,2))}function gB(s){return s&&s.length?Zp(s,pr,ex):t}function yB(s,c){return s&&s.length?Zp(s,le(c,2),ex):t}var xB=nu(function(s,c){return s*c},1),TB=ux("round"),SB=nu(function(s,c){return s-c},0);function vB(s){return s&&s.length?Uy(s,pr):0}function bB(s,c){return s&&s.length?Uy(s,le(c,2)):0}return T.after=qU,T.ary=G_,T.assign=D2,T.assignIn=aE,T.assignInWith=gu,T.assignWith=I2,T.at=F2,T.before=K_,T.bind=wx,T.bindAll=UV,T.bindKey=Q_,T.castArray=r2,T.chain=q_,T.chunk=uL,T.compact=fL,T.concat=dL,T.cond=VV,T.conforms=BV,T.constant=Ax,T.countBy=vU,T.create=C2,T.curry=Z_,T.curryRight=Y_,T.debounce=J_,T.defaults=O2,T.defaultsDeep=N2,T.defer=jU,T.delay=zU,T.difference=mL,T.differenceBy=hL,T.differenceWith=gL,T.drop=yL,T.dropRight=xL,T.dropRightWhile=TL,T.dropWhile=SL,T.fill=vL,T.filter=wU,T.flatMap=RU,T.flatMapDeep=kU,T.flatMapDepth=PU,T.flatten=B_,T.flattenDeep=bL,T.flattenDepth=wL,T.flip=GU,T.flow=WV,T.flowRight=$V,T.fromPairs=_L,T.functions=$2,T.functionsIn=q2,T.groupBy=MU,T.initial=RL,T.intersection=kL,T.intersectionBy=PL,T.intersectionWith=ML,T.invert=z2,T.invertBy=G2,T.invokeMap=DU,T.iteratee=Dx,T.keyBy=IU,T.keys=Et,T.keysIn=lr,T.map=pu,T.mapKeys=Q2,T.mapValues=Z2,T.matches=qV,T.matchesProperty=jV,T.memoize=fu,T.merge=Y2,T.mergeWith=cE,T.method=zV,T.methodOf=GV,T.mixin=Ix,T.negate=du,T.nthArg=QV,T.omit=J2,T.omitBy=X2,T.once=KU,T.orderBy=FU,T.over=ZV,T.overArgs=QU,T.overEvery=YV,T.overSome=JV,T.partial=_x,T.partialRight=X_,T.partition=CU,T.pick=eV,T.pickBy=lE,T.property=gE,T.propertyOf=XV,T.pull=FL,T.pullAll=W_,T.pullAllBy=CL,T.pullAllWith=OL,T.pullAt=NL,T.range=eB,T.rangeRight=tB,T.rearg=ZU,T.reject=LU,T.remove=LL,T.rest=YU,T.reverse=vx,T.sampleSize=VU,T.set=rV,T.setWith=nV,T.shuffle=BU,T.slice=UL,T.sortBy=$U,T.sortedUniq=jL,T.sortedUniqBy=zL,T.split=RV,T.spread=JU,T.tail=GL,T.take=KL,T.takeRight=QL,T.takeRightWhile=ZL,T.takeWhile=YL,T.tap=fU,T.throttle=XU,T.thru=lu,T.toArray=iE,T.toPairs=pE,T.toPairsIn=uE,T.toPath=sB,T.toPlainObject=sE,T.transform=iV,T.unary=e2,T.union=JL,T.unionBy=XL,T.unionWith=eU,T.uniq=tU,T.uniqBy=rU,T.uniqWith=nU,T.unset=oV,T.unzip=bx,T.unzipWith=$_,T.update=sV,T.updateWith=aV,T.values=Ds,T.valuesIn=cV,T.without=iU,T.words=mE,T.wrap=t2,T.xor=oU,T.xorBy=sU,T.xorWith=aU,T.zip=cU,T.zipObject=lU,T.zipObjectDeep=pU,T.zipWith=uU,T.entries=pE,T.entriesIn=uE,T.extend=aE,T.extendWith=gu,Ix(T,T),T.add=cB,T.attempt=hE,T.camelCase=fV,T.capitalize=fE,T.ceil=lB,T.clamp=lV,T.clone=n2,T.cloneDeep=o2,T.cloneDeepWith=s2,T.cloneWith=i2,T.conformsTo=a2,T.deburr=dE,T.defaultTo=HV,T.divide=pB,T.endsWith=dV,T.eq=vn,T.escape=mV,T.escapeRegExp=hV,T.every=bU,T.find=_U,T.findIndex=U_,T.findKey=L2,T.findLast=EU,T.findLastIndex=V_,T.findLastKey=U2,T.floor=uB,T.forEach=j_,T.forEachRight=z_,T.forIn=V2,T.forInRight=B2,T.forOwn=H2,T.forOwnRight=W2,T.get=kx,T.gt=c2,T.gte=l2,T.has=j2,T.hasIn=Px,T.head=H_,T.identity=pr,T.includes=AU,T.indexOf=EL,T.inRange=pV,T.invoke=K2,T.isArguments=Co,T.isArray=xe,T.isArrayBuffer=p2,T.isArrayLike=cr,T.isArrayLikeObject=ct,T.isBoolean=u2,T.isBuffer=qi,T.isDate=f2,T.isElement=d2,T.isEmpty=m2,T.isEqual=h2,T.isEqualWith=g2,T.isError=Ex,T.isFinite=y2,T.isFunction=fi,T.isInteger=eE,T.isLength=mu,T.isMap=tE,T.isMatch=x2,T.isMatchWith=T2,T.isNaN=S2,T.isNative=v2,T.isNil=w2,T.isNull=b2,T.isNumber=rE,T.isObject=rt,T.isObjectLike=ot,T.isPlainObject=kc,T.isRegExp=Rx,T.isSafeInteger=_2,T.isSet=nE,T.isString=hu,T.isSymbol=Pr,T.isTypedArray=As,T.isUndefined=E2,T.isWeakMap=R2,T.isWeakSet=k2,T.join=AL,T.kebabCase=gV,T.last=Yr,T.lastIndexOf=DL,T.lowerCase=yV,T.lowerFirst=xV,T.lt=P2,T.lte=M2,T.max=fB,T.maxBy=dB,T.mean=mB,T.meanBy=hB,T.min=gB,T.minBy=yB,T.stubArray=Cx,T.stubFalse=Ox,T.stubObject=rB,T.stubString=nB,T.stubTrue=iB,T.multiply=xB,T.nth=IL,T.noConflict=KV,T.noop=Fx,T.now=uu,T.pad=TV,T.padEnd=SV,T.padStart=vV,T.parseInt=bV,T.random=uV,T.reduce=OU,T.reduceRight=NU,T.repeat=wV,T.replace=_V,T.result=tV,T.round=TB,T.runInContext=k,T.sample=UU,T.size=HU,T.snakeCase=EV,T.some=WU,T.sortedIndex=VL,T.sortedIndexBy=BL,T.sortedIndexOf=HL,T.sortedLastIndex=WL,T.sortedLastIndexBy=$L,T.sortedLastIndexOf=qL,T.startCase=kV,T.startsWith=PV,T.subtract=SB,T.sum=vB,T.sumBy=bB,T.template=MV,T.times=oB,T.toFinite=di,T.toInteger=be,T.toLength=oE,T.toLower=AV,T.toNumber=Jr,T.toSafeInteger=A2,T.toString=We,T.toUpper=DV,T.trim=IV,T.trimEnd=FV,T.trimStart=CV,T.truncate=OV,T.unescape=NV,T.uniqueId=aB,T.upperCase=LV,T.upperFirst=Mx,T.each=j_,T.eachRight=z_,T.first=H_,Ix(T,function(){var s={};return Ln(T,function(c,f){qe.call(T.prototype,f)||(s[f]=c)}),s}(),{chain:!1}),T.VERSION=e,zr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){T[s].placeholder=T}),zr(["drop","take"],function(s,c){Ae.prototype[s]=function(f){f=f===t?1:Tt(be(f),0);var m=this.__filtered__&&!c?new Ae(this):this.clone();return m.__filtered__?m.__takeCount__=Vt(f,m.__takeCount__):m.__views__.push({size:Vt(f,re),type:s+(m.__dir__<0?"Right":"")}),m},Ae.prototype[s+"Right"]=function(f){return this.reverse()[s](f).reverse()}}),zr(["filter","map","takeWhile"],function(s,c){var f=c+1,m=f==I||f==j;Ae.prototype[s]=function(y){var S=this.clone();return S.__iteratees__.push({iteratee:le(y,3),type:f}),S.__filtered__=S.__filtered__||m,S}}),zr(["head","last"],function(s,c){var f="take"+(c?"Right":"");Ae.prototype[s]=function(){return this[f](1).value()[0]}}),zr(["initial","tail"],function(s,c){var f="drop"+(c?"":"Right");Ae.prototype[s]=function(){return this.__filtered__?new Ae(this):this[f](1)}}),Ae.prototype.compact=function(){return this.filter(pr)},Ae.prototype.find=function(s){return this.filter(s).head()},Ae.prototype.findLast=function(s){return this.reverse().find(s)},Ae.prototype.invokeMap=ke(function(s,c){return typeof s=="function"?new Ae(this):this.map(function(f){return vc(f,s,c)})}),Ae.prototype.reject=function(s){return this.filter(du(le(s)))},Ae.prototype.slice=function(s,c){s=be(s);var f=this;return f.__filtered__&&(s>0||c<0)?new Ae(f):(s<0?f=f.takeRight(-s):s&&(f=f.drop(s)),c!==t&&(c=be(c),f=c<0?f.dropRight(-c):f.take(c-s)),f)},Ae.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Ae.prototype.toArray=function(){return this.take(re)},Ln(Ae.prototype,function(s,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),m=/^(?:head|last)$/.test(c),y=T[m?"take"+(c=="last"?"Right":""):c],S=m||/^find/.test(c);y&&(T.prototype[c]=function(){var E=this.__wrapped__,R=m?[1]:arguments,A=E instanceof Ae,B=R[0],H=A||xe(E),q=function(Pe){var Ie=y.apply(T,Ni([Pe],R));return m&&Y?Ie[0]:Ie};H&&f&&typeof B=="function"&&B.length!=1&&(A=H=!1);var Y=this.__chain__,ie=!!this.__actions__.length,pe=S&&!Y,Ee=A&&!ie;if(!S&&H){E=Ee?E:new Ae(this);var ue=s.apply(E,R);return ue.__actions__.push({func:lu,args:[q],thisArg:t}),new Kr(ue,Y)}return pe&&Ee?s.apply(this,R):(ue=this.thru(q),pe?m?ue.value()[0]:ue.value():ue)})}),zr(["pop","push","shift","sort","splice","unshift"],function(s){var c=Op[s],f=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",m=/^(?:pop|shift)$/.test(s);T.prototype[s]=function(){var y=arguments;if(m&&!this.__chain__){var S=this.value();return c.apply(xe(S)?S:[],y)}return this[f](function(E){return c.apply(xe(E)?E:[],y)})}}),Ln(Ae.prototype,function(s,c){var f=T[c];if(f){var m=f.name+"";qe.call(Es,m)||(Es[m]=[]),Es[m].push({name:c,func:f})}}),Es[ru(t,w).name]=[{name:"wrapper",func:t}],Ae.prototype.clone=NO,Ae.prototype.reverse=LO,Ae.prototype.value=UO,T.prototype.at=dU,T.prototype.chain=mU,T.prototype.commit=hU,T.prototype.next=gU,T.prototype.plant=xU,T.prototype.reverse=TU,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=SU,T.prototype.first=T.prototype.head,mc&&(T.prototype[mc]=yU),T},Ui=hO();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(_t._=Ui,define(function(){return Ui})):Ro?((Ro.exports=Ui)._=Ui,Dy._=Ui):_t._=Ui}).call(Ga)});var BI=st((oOe,VI)=>{"use strict";VI.exports=LI;function LI(t,e,r){t instanceof RegExp&&(t=NI(t,r)),e instanceof RegExp&&(e=NI(e,r));var n=UI(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function NI(t,e){var r=e.match(t);return r?r[0]:null}LI.range=UI;function UI(t,e,r){var n,i,o,a,l,p=r.indexOf(t),u=r.indexOf(e,p+1),d=p;if(p>=0&&u>0){if(t===e)return[p,u];for(n=[],o=r.length;d>=0&&!l;)d==p?(n.push(d),p=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,d+1)),d=p<u&&p>=0?p:u;n.length&&(l=[o,a])}return l}});var KI=st((sOe,GI)=>{var HI=BI();GI.exports=xQ;var WI="\0SLASH"+Math.random()+"\0",$I="\0OPEN"+Math.random()+"\0",vv="\0CLOSE"+Math.random()+"\0",qI="\0COMMA"+Math.random()+"\0",jI="\0PERIOD"+Math.random()+"\0";function Sv(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function gQ(t){return t.split("\\\\").join(WI).split("\\{").join($I).split("\\}").join(vv).split("\\,").join(qI).split("\\.").join(jI)}function yQ(t){return t.split(WI).join("\\").split($I).join("{").split(vv).join("}").split(qI).join(",").split(jI).join(".")}function zI(t){if(!t)return[""];var e=[],r=HI("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var l=zI(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}function xQ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),rp(gQ(t),!0).map(yQ)):[]}function TQ(t){return"{"+t+"}"}function SQ(t){return/^-?0\d/.test(t)}function vQ(t,e){return t<=e}function bQ(t,e){return t>=e}function rp(t,e){var r=[],n=HI("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?rp(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var l=i+"{"+n.body+"}"+o[a];r.push(l)}else{var p=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=p||u,h=n.body.indexOf(",")>=0;if(!d&&!h)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+vv+n.post,rp(t)):[t];var g;if(d)g=n.body.split(/\.\./);else if(g=zI(n.body),g.length===1&&(g=rp(g[0],!1).map(TQ),g.length===1))return o.map(function(N){return n.pre+g[0]+N});var x;if(d){var b=Sv(g[0]),w=Sv(g[1]),F=Math.max(g[0].length,g[1].length),M=g.length==3?Math.abs(Sv(g[2])):1,U=vQ,Z=w<b;Z&&(M*=-1,U=bQ);var ne=g.some(SQ);x=[];for(var he=b;U(he,w);he+=M){var de;if(u)de=String.fromCharCode(he),de==="\\"&&(de="");else if(de=String(he),ne){var mt=F-de.length;if(mt>0){var It=new Array(mt+1).join("0");he<0?de="-"+It+de.slice(1):de=It+de}}x.push(de)}}else{x=[];for(var it=0;it<g.length;it++)x.push.apply(x,rp(g[it],!1))}for(var it=0;it<x.length;it++)for(var a=0;a<o.length;a++){var l=i+x[it]+o[a];(!e||d||l)&&r.push(l)}}return r}});var cY={};PB(cY,{default:()=>V1});module.exports=MB(cY);var Nx="cursorless.command",xu=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},pt=class extends xu{constructor(){super(...arguments);this.isVisible=!1}},ht=class extends xu{constructor(){super(...arguments);this.isVisible=!0}};var pY={"cursorless.toggleDecorations":new ht("Toggle decorations"),"cursorless.recomputeDecorationStyles":new ht("Recompute decoration styles"),"cursorless.recordTestCase":new ht("Record test case"),"cursorless.recordOneTestCaseThenPause":new ht("Record one test case, then pause"),"cursorless.pauseRecording":new ht("Pause test case recording"),"cursorless.resumeRecording":new ht("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new ht("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new ht("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new ht("Show documentation"),"cursorless.showScopeVisualizer":new ht("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new ht("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new ht("Analyze collected command history"),"cursorless.tutorial.start":new pt("Start a tutorial"),"cursorless.tutorial.next":new ht("Tutorial next"),"cursorless.tutorial.previous":new ht("Tutorial previous"),"cursorless.tutorial.restart":new ht("Tutorial restart"),"cursorless.tutorial.resume":new ht("Tutorial resume"),"cursorless.tutorial.list":new ht("Tutorial list"),"cursorless.documentationOpened":new pt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new pt("The core cursorless command"),"cursorless.repeatPreviousCommand":new ht("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new pt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new pt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new pt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new pt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new pt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new pt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new pt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new pt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new pt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new pt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new pt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new pt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new pt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new pt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new pt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new pt("Redo keyboard targeting changes")};var Tu=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Su=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var vu=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},Rt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var bu=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var AB=typeof global=="object"&&global&&global.Object===Object&&global,wu=AB;var DB=typeof self=="object"&&self&&self.Object===Object&&self,IB=wu||DB||Function("return this")(),kt=IB;var FB=kt.Symbol,Yt=FB;var TE=Object.prototype,CB=TE.hasOwnProperty,OB=TE.toString,Pc=Yt?Yt.toStringTag:void 0;function NB(t){var e=CB.call(t,Pc),r=t[Pc];try{t[Pc]=void 0;var n=!0}catch{}var i=OB.call(t);return n&&(e?t[Pc]=r:delete t[Pc]),i}var SE=NB;var LB=Object.prototype,UB=LB.toString;function VB(t){return UB.call(t)}var vE=VB;var BB="[object Null]",HB="[object Undefined]",bE=Yt?Yt.toStringTag:void 0;function WB(t){return t==null?t===void 0?HB:BB:bE&&bE in Object(t)?SE(t):vE(t)}var wn=WB;function $B(t){return t!=null&&typeof t=="object"}var Jt=$B;var qB="[object Symbol]";function jB(t){return typeof t=="symbol"||Jt(t)&&wn(t)==qB}var Dr=jB;function zB(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var Xr=zB;var GB=Array.isArray,Be=GB;var KB=1/0,wE=Yt?Yt.prototype:void 0,_E=wE?wE.toString:void 0;function EE(t){if(typeof t=="string")return t;if(Be(t))return Xr(t,EE)+"";if(Dr(t))return _E?_E.call(t):"";var e=t+"";return e=="0"&&1/t==-KB?"-0":e}var RE=EE;var QB=/\s/;function ZB(t){for(var e=t.length;e--&&QB.test(t.charAt(e)););return e}var kE=ZB;var YB=/^\s+/;function JB(t){return t&&t.slice(0,kE(t)+1).replace(YB,"")}var PE=JB;function XB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ir=XB;var ME=NaN,eH=/^[-+]0x[0-9a-f]+$/i,tH=/^0b[01]+$/i,rH=/^0o[0-7]+$/i,nH=parseInt;function iH(t){if(typeof t=="number")return t;if(Dr(t))return ME;if(Ir(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Ir(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=PE(t);var r=tH.test(t);return r||rH.test(t)?nH(t.slice(2),r?2:8):eH.test(t)?ME:+t}var AE=iH;var DE=1/0,oH=17976931348623157e292;function sH(t){if(!t)return t===0?t:0;if(t=AE(t),t===DE||t===-DE){var e=t<0?-1:1;return e*oH}return t===t?t:0}var Is=sH;function aH(t){var e=Is(t),r=e%1;return e===e?r?e-r:e:0}var _u=aH;function cH(t){return t}var Ht=cH;var lH="[object AsyncFunction]",pH="[object Function]",uH="[object GeneratorFunction]",fH="[object Proxy]";function dH(t){if(!Ir(t))return!1;var e=wn(t);return e==pH||e==uH||e==lH||e==fH}var Eu=dH;var mH=kt["__core-js_shared__"],Ru=mH;var IE=function(){var t=/[^.]+$/.exec(Ru&&Ru.keys&&Ru.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function hH(t){return!!IE&&IE in t}var FE=hH;var gH=Function.prototype,yH=gH.toString;function xH(t){if(t!=null){try{return yH.call(t)}catch{}try{return t+""}catch{}}return""}var hi=xH;var TH=/[\\^$.*+?()[\]{}|]/g,SH=/^\[object .+?Constructor\]$/,vH=Function.prototype,bH=Object.prototype,wH=vH.toString,_H=bH.hasOwnProperty,EH=RegExp("^"+wH.call(_H).replace(TH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function RH(t){if(!Ir(t)||FE(t))return!1;var e=Eu(t)?EH:SH;return e.test(hi(t))}var CE=RH;function kH(t,e){return t?.[e]}var OE=kH;function PH(t,e){var r=OE(t,e);return CE(r)?r:void 0}var fr=PH;var MH=fr(kt,"WeakMap"),Oo=MH;var AH=Oo&&new Oo,Lx=AH;var NE=Object.create,DH=function(){function t(){}return function(e){if(!Ir(e))return{};if(NE)return NE(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),ku=DH;function IH(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var LE=IH;function FH(){}var Fs=FH;var CH=4294967295;function Pu(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=CH,this.__views__=[]}Pu.prototype=ku(Fs.prototype);Pu.prototype.constructor=Pu;var Cs=Pu;function OH(){}var Mu=OH;var NH=Lx?function(t){return Lx.get(t)}:Mu,Au=NH;var LH={},Ux=LH;var UH=Object.prototype,VH=UH.hasOwnProperty;function BH(t){for(var e=t.name+"",r=Ux[e],n=VH.call(Ux,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Os=BH;function Du(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Du.prototype=ku(Fs.prototype);Du.prototype.constructor=Du;var ji=Du;function HH(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var zi=HH;function WH(t){if(t instanceof Cs)return t.clone();var e=new ji(t.__wrapped__,t.__chain__);return e.__actions__=zi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var UE=WH;var $H=Object.prototype,qH=$H.hasOwnProperty;function Iu(t){if(Jt(t)&&!Be(t)&&!(t instanceof Cs)){if(t instanceof ji)return t;if(qH.call(t,"__wrapped__"))return UE(t)}return new ji(t)}Iu.prototype=Fs.prototype;Iu.prototype.constructor=Iu;var VE=Iu;function jH(t){var e=Os(t),r=VE[e];if(typeof r!="function"||!(e in Cs.prototype))return!1;if(t===r)return!0;var n=Au(r);return!!n&&t===n[0]}var Vx=jH;var zH=800,GH=16,KH=Date.now;function QH(t){var e=0,r=0;return function(){var n=KH(),i=GH-(n-r);if(r=n,i>0){if(++e>=zH)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var BE=QH;function ZH(t){return function(){return t}}var HE=ZH;var YH=function(){try{var t=fr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Ns=YH;var JH=Ns?function(t,e){return Ns(t,"toString",{configurable:!0,enumerable:!1,value:HE(e),writable:!0})}:Ht,WE=JH;var XH=BE(WE),Fu=XH;function eW(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Cu=eW;function tW(t){return t!==t}var $E=tW;function rW(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var qE=rW;function nW(t,e,r){return e===e?qE(t,e,r):Cu(t,$E,r)}var Ou=nW;function iW(t,e){var r=t==null?0:t.length;return!!r&&Ou(t,e,0)>-1}var jE=iW;var oW=9007199254740991,sW=/^(?:0|[1-9]\d*)$/;function aW(t,e){var r=typeof t;return e=e??oW,!!e&&(r=="number"||r!="symbol"&&sW.test(t))&&t>-1&&t%1==0&&t<e}var Ls=aW;function cW(t,e,r){e=="__proto__"&&Ns?Ns(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var zE=cW;function lW(t,e){return t===e||t!==t&&e!==e}var Us=lW;var GE=Math.max;function pW(t,e,r){return e=GE(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=GE(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(a),LE(t,this,l)}}var Nu=pW;function uW(t,e){return Fu(Nu(t,e,Ht),t+"")}var Vs=uW;var fW=9007199254740991;function dW(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=fW}var Bs=dW;function mW(t){return t!=null&&Bs(t.length)&&!Eu(t)}var Bn=mW;function hW(t,e,r){if(!Ir(r))return!1;var n=typeof e;return(n=="number"?Bn(r)&&Ls(e,r.length):n=="string"&&e in r)?Us(r[e],t):!1}var No=hW;var gW=Object.prototype;function yW(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||gW;return t===r}var KE=yW;function xW(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Lu=xW;var TW="[object Arguments]";function SW(t){return Jt(t)&&wn(t)==TW}var Bx=SW;var QE=Object.prototype,vW=QE.hasOwnProperty,bW=QE.propertyIsEnumerable,wW=Bx(function(){return arguments}())?Bx:function(t){return Jt(t)&&vW.call(t,"callee")&&!bW.call(t,"callee")},Hs=wW;function _W(){return!1}var ZE=_W;var XE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,YE=XE&&typeof module=="object"&&module&&!module.nodeType&&module,EW=YE&&YE.exports===XE,JE=EW?kt.Buffer:void 0,RW=JE?JE.isBuffer:void 0,kW=RW||ZE,Mc=kW;var PW="[object Arguments]",MW="[object Array]",AW="[object Boolean]",DW="[object Date]",IW="[object Error]",FW="[object Function]",CW="[object Map]",OW="[object Number]",NW="[object Object]",LW="[object RegExp]",UW="[object Set]",VW="[object String]",BW="[object WeakMap]",HW="[object ArrayBuffer]",WW="[object DataView]",$W="[object Float32Array]",qW="[object Float64Array]",jW="[object Int8Array]",zW="[object Int16Array]",GW="[object Int32Array]",KW="[object Uint8Array]",QW="[object Uint8ClampedArray]",ZW="[object Uint16Array]",YW="[object Uint32Array]",Ye={};Ye[$W]=Ye[qW]=Ye[jW]=Ye[zW]=Ye[GW]=Ye[KW]=Ye[QW]=Ye[ZW]=Ye[YW]=!0;Ye[PW]=Ye[MW]=Ye[HW]=Ye[AW]=Ye[WW]=Ye[DW]=Ye[IW]=Ye[FW]=Ye[CW]=Ye[OW]=Ye[NW]=Ye[LW]=Ye[UW]=Ye[VW]=Ye[BW]=!1;function JW(t){return Jt(t)&&Bs(t.length)&&!!Ye[wn(t)]}var e0=JW;function XW(t){return function(e){return t(e)}}var Ws=XW;var t0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ac=t0&&typeof module=="object"&&module&&!module.nodeType&&module,e$=Ac&&Ac.exports===t0,Hx=e$&&wu.process,t$=function(){try{var t=Ac&&Ac.require&&Ac.require("util").types;return t||Hx&&Hx.binding&&Hx.binding("util")}catch{}}(),Wx=t$;var r0=Wx&&Wx.isTypedArray,r$=r0?Ws(r0):e0,Uu=r$;var n$=Object.prototype,i$=n$.hasOwnProperty;function o$(t,e){var r=Be(t),n=!r&&Hs(t),i=!r&&!n&&Mc(t),o=!r&&!n&&!i&&Uu(t),a=r||n||i||o,l=a?Lu(t.length,String):[],p=l.length;for(var u in t)(e||i$.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ls(u,p)))&&l.push(u);return l}var n0=o$;function s$(t,e){return function(r){return t(e(r))}}var i0=s$;var a$=i0(Object.keys,Object),o0=a$;var c$=Object.prototype,l$=c$.hasOwnProperty;function p$(t){if(!KE(t))return o0(t);var e=[];for(var r in Object(t))l$.call(t,r)&&r!="constructor"&&e.push(r);return e}var s0=p$;function u$(t){return Bn(t)?n0(t):s0(t)}var Gi=u$;var f$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d$=/^\w*$/;function m$(t,e){if(Be(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Dr(t)?!0:d$.test(t)||!f$.test(t)||e!=null&&t in Object(e)}var $s=m$;var h$=fr(Object,"create"),gi=h$;function g$(){this.__data__=gi?gi(null):{},this.size=0}var a0=g$;function y$(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var c0=y$;var x$="__lodash_hash_undefined__",T$=Object.prototype,S$=T$.hasOwnProperty;function v$(t){var e=this.__data__;if(gi){var r=e[t];return r===x$?void 0:r}return S$.call(e,t)?e[t]:void 0}var l0=v$;var b$=Object.prototype,w$=b$.hasOwnProperty;function _$(t){var e=this.__data__;return gi?e[t]!==void 0:w$.call(e,t)}var p0=_$;var E$="__lodash_hash_undefined__";function R$(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=gi&&e===void 0?E$:e,this}var u0=R$;function qs(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}qs.prototype.clear=a0;qs.prototype.delete=c0;qs.prototype.get=l0;qs.prototype.has=p0;qs.prototype.set=u0;var $x=qs;function k$(){this.__data__=[],this.size=0}var f0=k$;function P$(t,e){for(var r=t.length;r--;)if(Us(t[r][0],e))return r;return-1}var Ki=P$;var M$=Array.prototype,A$=M$.splice;function D$(t){var e=this.__data__,r=Ki(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():A$.call(e,r,1),--this.size,!0}var d0=D$;function I$(t){var e=this.__data__,r=Ki(e,t);return r<0?void 0:e[r][1]}var m0=I$;function F$(t){return Ki(this.__data__,t)>-1}var h0=F$;function C$(t,e){var r=this.__data__,n=Ki(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var g0=C$;function js(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}js.prototype.clear=f0;js.prototype.delete=d0;js.prototype.get=m0;js.prototype.has=h0;js.prototype.set=g0;var Qi=js;var O$=fr(kt,"Map"),Zi=O$;function N$(){this.size=0,this.__data__={hash:new $x,map:new(Zi||Qi),string:new $x}}var y0=N$;function L$(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var x0=L$;function U$(t,e){var r=t.__data__;return x0(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Yi=U$;function V$(t){var e=Yi(this,t).delete(t);return this.size-=e?1:0,e}var T0=V$;function B$(t){return Yi(this,t).get(t)}var S0=B$;function H$(t){return Yi(this,t).has(t)}var v0=H$;function W$(t,e){var r=Yi(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var b0=W$;function zs(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}zs.prototype.clear=y0;zs.prototype.delete=T0;zs.prototype.get=S0;zs.prototype.has=v0;zs.prototype.set=b0;var Lo=zs;var $$="Expected a function";function qx(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError($$);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(qx.Cache||Lo),r}qx.Cache=Lo;var Dc=qx;var q$=500;function j$(t){var e=Dc(t,function(n){return r.size===q$&&r.clear(),n}),r=e.cache;return e}var w0=j$;var z$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G$=/\\(\\)?/g,K$=w0(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(z$,function(r,n,i,o){e.push(i?o.replace(G$,"$1"):n||r)}),e}),_0=K$;function Q$(t){return t==null?"":RE(t)}var _n=Q$;function Z$(t,e){return Be(t)?t:$s(t,e)?[t]:_0(_n(t))}var Vu=Z$;var Y$=1/0;function J$(t){if(typeof t=="string"||Dr(t))return t;var e=t+"";return e=="0"&&1/t==-Y$?"-0":e}var Ji=J$;function X$(t,e){e=Vu(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Ji(e[r++])];return r&&r==n?t:void 0}var Gs=X$;function e3(t,e,r){var n=t==null?void 0:Gs(t,e);return n===void 0?r:n}var Uo=e3;function t3(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var Ks=t3;var E0=Yt?Yt.isConcatSpreadable:void 0;function r3(t){return Be(t)||Hs(t)||!!(E0&&t&&t[E0])}var R0=r3;function k0(t,e,r,n,i){var o=-1,a=t.length;for(r||(r=R0),i||(i=[]);++o<a;){var l=t[o];e>0&&r(l)?e>1?k0(l,e-1,r,n,i):Ks(i,l):n||(i[i.length]=l)}return i}var Qs=k0;function n3(t){var e=t==null?0:t.length;return e?Qs(t,1):[]}var Je=n3;function i3(t){return Fu(Nu(t,void 0,Je),t+"")}var P0=i3;function o3(t){return function(e){return t?.[e]}}var M0=o3;var s3={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},a3=M0(s3),A0=a3;var c3=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,l3="\\u0300-\\u036f",p3="\\ufe20-\\ufe2f",u3="\\u20d0-\\u20ff",f3=l3+p3+u3,d3="["+f3+"]",m3=RegExp(d3,"g");function h3(t){return t=_n(t),t&&t.replace(c3,A0).replace(m3,"")}var jx=h3;function g3(){this.__data__=new Qi,this.size=0}var D0=g3;function y3(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var I0=y3;function x3(t){return this.__data__.get(t)}var F0=x3;function T3(t){return this.__data__.has(t)}var C0=T3;var S3=200;function v3(t,e){var r=this.__data__;if(r instanceof Qi){var n=r.__data__;if(!Zi||n.length<S3-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Lo(n)}return r.set(t,e),this.size=r.size,this}var O0=v3;function Zs(t){var e=this.__data__=new Qi(t);this.size=e.size}Zs.prototype.clear=D0;Zs.prototype.delete=I0;Zs.prototype.get=F0;Zs.prototype.has=C0;Zs.prototype.set=O0;var Ys=Zs;function b3(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}var Bu=b3;function w3(){return[]}var N0=w3;var _3=Object.prototype,E3=_3.propertyIsEnumerable,L0=Object.getOwnPropertySymbols,R3=L0?function(t){return t==null?[]:(t=Object(t),Bu(L0(t),function(e){return E3.call(t,e)}))}:N0,U0=R3;function k3(t,e,r){var n=e(t);return Be(t)?n:Ks(n,r(t))}var V0=k3;function P3(t){return V0(t,Gi,U0)}var zx=P3;var M3=fr(kt,"DataView"),Hu=M3;var A3=fr(kt,"Promise"),Wu=A3;var D3=fr(kt,"Set"),Xi=D3;var B0="[object Map]",I3="[object Object]",H0="[object Promise]",W0="[object Set]",$0="[object WeakMap]",q0="[object DataView]",F3=hi(Hu),C3=hi(Zi),O3=hi(Wu),N3=hi(Xi),L3=hi(Oo),Vo=wn;(Hu&&Vo(new Hu(new ArrayBuffer(1)))!=q0||Zi&&Vo(new Zi)!=B0||Wu&&Vo(Wu.resolve())!=H0||Xi&&Vo(new Xi)!=W0||Oo&&Vo(new Oo)!=$0)&&(Vo=function(t){var e=wn(t),r=e==I3?t.constructor:void 0,n=r?hi(r):"";if(n)switch(n){case F3:return q0;case C3:return B0;case O3:return H0;case N3:return W0;case L3:return $0}return e});var Gx=Vo;var U3=kt.Uint8Array,Kx=U3;function V3(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return Ks(Be(r)?zi(r):[r],Qs(e,1))}var Ic=V3;var B3="__lodash_hash_undefined__";function H3(t){return this.__data__.set(t,B3),this}var j0=H3;function W3(t){return this.__data__.has(t)}var z0=W3;function $u(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Lo;++e<r;)this.add(t[e])}$u.prototype.add=$u.prototype.push=j0;$u.prototype.has=z0;var qu=$u;function $3(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var G0=$3;function q3(t,e){return t.has(e)}var ju=q3;var j3=1,z3=2;function G3(t,e,r,n,i,o){var a=r&j3,l=t.length,p=e.length;if(l!=p&&!(a&&p>l))return!1;var u=o.get(t),d=o.get(e);if(u&&d)return u==e&&d==t;var h=-1,g=!0,x=r&z3?new qu:void 0;for(o.set(t,e),o.set(e,t);++h<l;){var b=t[h],w=e[h];if(n)var F=a?n(w,b,h,e,t,o):n(b,w,h,t,e,o);if(F!==void 0){if(F)continue;g=!1;break}if(x){if(!G0(e,function(M,U){if(!ju(x,U)&&(b===M||i(b,M,r,n,o)))return x.push(U)})){g=!1;break}}else if(!(b===w||i(b,w,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var zu=G3;function K3(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var K0=K3;function Q3(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Js=Q3;var Z3=1,Y3=2,J3="[object Boolean]",X3="[object Date]",eq="[object Error]",tq="[object Map]",rq="[object Number]",nq="[object RegExp]",iq="[object Set]",oq="[object String]",sq="[object Symbol]",aq="[object ArrayBuffer]",cq="[object DataView]",Q0=Yt?Yt.prototype:void 0,Qx=Q0?Q0.valueOf:void 0;function lq(t,e,r,n,i,o,a){switch(r){case cq:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case aq:return!(t.byteLength!=e.byteLength||!o(new Kx(t),new Kx(e)));case J3:case X3:case rq:return Us(+t,+e);case eq:return t.name==e.name&&t.message==e.message;case nq:case oq:return t==e+"";case tq:var l=K0;case iq:var p=n&Z3;if(l||(l=Js),t.size!=e.size&&!p)return!1;var u=a.get(t);if(u)return u==e;n|=Y3,a.set(t,e);var d=zu(l(t),l(e),n,i,o,a);return a.delete(t),d;case sq:if(Qx)return Qx.call(t)==Qx.call(e)}return!1}var Z0=lq;var pq=1,uq=Object.prototype,fq=uq.hasOwnProperty;function dq(t,e,r,n,i,o){var a=r&pq,l=zx(t),p=l.length,u=zx(e),d=u.length;if(p!=d&&!a)return!1;for(var h=p;h--;){var g=l[h];if(!(a?g in e:fq.call(e,g)))return!1}var x=o.get(t),b=o.get(e);if(x&&b)return x==e&&b==t;var w=!0;o.set(t,e),o.set(e,t);for(var F=a;++h<p;){g=l[h];var M=t[g],U=e[g];if(n)var Z=a?n(U,M,g,e,t,o):n(M,U,g,t,e,o);if(!(Z===void 0?M===U||i(M,U,r,n,o):Z)){w=!1;break}F||(F=g=="constructor")}if(w&&!F){var ne=t.constructor,he=e.constructor;ne!=he&&"constructor"in t&&"constructor"in e&&!(typeof ne=="function"&&ne instanceof ne&&typeof he=="function"&&he instanceof he)&&(w=!1)}return o.delete(t),o.delete(e),w}var Y0=dq;var mq=1,J0="[object Arguments]",X0="[object Array]",Gu="[object Object]",hq=Object.prototype,eR=hq.hasOwnProperty;function gq(t,e,r,n,i,o){var a=Be(t),l=Be(e),p=a?X0:Gx(t),u=l?X0:Gx(e);p=p==J0?Gu:p,u=u==J0?Gu:u;var d=p==Gu,h=u==Gu,g=p==u;if(g&&Mc(t)){if(!Mc(e))return!1;a=!0,d=!1}if(g&&!d)return o||(o=new Ys),a||Uu(t)?zu(t,e,r,n,i,o):Z0(t,e,p,r,n,i,o);if(!(r&mq)){var x=d&&eR.call(t,"__wrapped__"),b=h&&eR.call(e,"__wrapped__");if(x||b){var w=x?t.value():t,F=b?e.value():e;return o||(o=new Ys),i(w,F,r,n,o)}}return g?(o||(o=new Ys),Y0(t,e,r,n,i,o)):!1}var tR=gq;function rR(t,e,r,n,i){return t===e?!0:t==null||e==null||!Jt(t)&&!Jt(e)?t!==t&&e!==e:tR(t,e,r,n,rR,i)}var Xs=rR;var yq=1,xq=2;function Tq(t,e,r,n){var i=r.length,o=i,a=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var p=l[0],u=t[p],d=l[1];if(a&&l[2]){if(u===void 0&&!(p in t))return!1}else{var h=new Ys;if(n)var g=n(u,d,p,t,e,h);if(!(g===void 0?Xs(d,u,yq|xq,n,h):g))return!1}}return!0}var nR=Tq;function Sq(t){return t===t&&!Ir(t)}var Ku=Sq;function vq(t){for(var e=Gi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Ku(i)]}return e}var iR=vq;function bq(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var Qu=bq;function wq(t){var e=iR(t);return e.length==1&&e[0][2]?Qu(e[0][0],e[0][1]):function(r){return r===t||nR(r,t,e)}}var oR=wq;function _q(t,e){return t!=null&&e in Object(t)}var sR=_q;function Eq(t,e,r){e=Vu(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var a=Ji(e[n]);if(!(o=t!=null&&r(t,a)))break;t=t[a]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Bs(i)&&Ls(a,i)&&(Be(t)||Hs(t)))}var aR=Eq;function Rq(t,e){return t!=null&&aR(t,e,sR)}var cR=Rq;var kq=1,Pq=2;function Mq(t,e){return $s(t)&&Ku(e)?Qu(Ji(t),e):function(r){var n=Uo(r,t);return n===void 0&&n===e?cR(r,t):Xs(e,n,kq|Pq)}}var lR=Mq;function Aq(t){return function(e){return e?.[t]}}var Zu=Aq;function Dq(t){return function(e){return Gs(e,t)}}var pR=Dq;function Iq(t){return $s(t)?Zu(Ji(t)):pR(t)}var uR=Iq;function Fq(t){return typeof t=="function"?t:t==null?Ht:typeof t=="object"?Be(t)?lR(t[0],t[1]):oR(t):uR(t)}var Hn=Fq;function Cq(t,e,r,n){for(var i=-1,o=t==null?0:t.length;++i<o;){var a=t[i];e(n,a,r(a),t)}return n}var fR=Cq;function Oq(t){return function(e,r,n){for(var i=-1,o=Object(e),a=n(e),l=a.length;l--;){var p=a[t?l:++i];if(r(o[p],p,o)===!1)break}return e}}var dR=Oq;var Nq=dR(),mR=Nq;function Lq(t,e){return t&&mR(t,e,Gi)}var hR=Lq;function Uq(t,e){return function(r,n){if(r==null)return r;if(!Bn(r))return t(r,n);for(var i=r.length,o=e?i:-1,a=Object(r);(e?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}var gR=Uq;var Vq=gR(hR),Yu=Vq;function Bq(t,e,r,n){return Yu(t,function(i,o,a){e(n,i,r(i),a)}),n}var yR=Bq;function Hq(t,e){return function(r,n){var i=Be(r)?fR:yR,o=e?e():{};return i(r,t,Hn(n,2),o)}}var xR=Hq;function Wq(t){return Jt(t)&&Bn(t)}var TR=Wq;function $q(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var SR=$q;function qq(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Ju=qq;var vR=/[\\^$.*+?()[\]{}|]/g,jq=RegExp(vR.source);function zq(t){return t=_n(t),t&&jq.test(t)?t.replace(vR,"\\$&"):t}var Fr=zq;var Gq=Math.max,Kq=Math.min;function Qq(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=_u(r),i=r<0?Gq(n+i,0):Kq(i,n-1)),Cu(t,Hn(e,3),i,!0)}var Fc=Qq;function Zq(t,e){var r=-1,n=Bn(t)?Array(t.length):[];return Yu(t,function(i,o,a){n[++r]=e(i,o,a)}),n}var bR=Zq;var Yq="Expected a function",Jq=8,Xq=32,ej=128,tj=256;function rj(t){return P0(function(e){var r=e.length,n=r,i=ji.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(Yq);if(i&&!a&&Os(o)=="wrapper")var a=new ji([],!0)}for(n=a?n:r;++n<r;){o=e[n];var l=Os(o),p=l=="wrapper"?Au(o):void 0;p&&Vx(p[0])&&p[1]==(ej|Jq|Xq|tj)&&!p[4].length&&p[9]==1?a=a[Os(p[0])].apply(a,p[3]):a=o.length==1&&Vx(o)?a[l]():a.thru(o)}return function(){var u=arguments,d=u[0];if(a&&u.length==1&&Be(d))return a.plant(d).value();for(var h=0,g=r?e[h].apply(this,u):d;++h<r;)g=e[h].call(this,g);return g}})}var wR=rj;var nj=wR(),Zx=nj;var ij=Object.prototype,oj=ij.hasOwnProperty,sj=xR(function(t,e,r){oj.call(t,r)?t[r].push(e):zE(t,r,[e])}),Yx=sj;function aj(t,e){return t>e}var _R=aj;function cj(t,e){return Xr(e,function(r){return t[r]})}var ER=cj;function lj(t){return t==null?[]:ER(t,Gi(t))}var RR=lj;function pj(t,e){return Xs(t,e)}var yi=pj;function uj(t,e){return t<e}var kR=uj;function fj(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],a=e(o);if(a!=null&&(l===void 0?a===a&&!Dr(a):r(a,l)))var l=a,p=o}return p}var Xu=fj;function dj(t,e){return t&&t.length?Xu(t,Hn(e,2),_R):void 0}var Jx=dj;function mj(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var PR=mj;function hj(t){return t&&t.length?Xu(t,Ht,kR):void 0}var Xx=hj;function gj(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var MR=gj;function yj(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Dr(t),a=e!==void 0,l=e===null,p=e===e,u=Dr(e);if(!l&&!u&&!o&&t>e||o&&a&&p&&!l&&!u||n&&a&&p||!r&&p||!i)return 1;if(!n&&!o&&!u&&t<e||u&&r&&i&&!n&&!o||l&&r&&i||!a&&i||!p)return-1}return 0}var AR=yj;function xj(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,a=i.length,l=r.length;++n<a;){var p=AR(i[n],o[n]);if(p){if(n>=l)return p;var u=r[n];return p*(u=="desc"?-1:1)}}return t.index-e.index}var DR=xj;function Tj(t,e,r){e.length?e=Xr(e,function(o){return Be(o)?function(a){return Gs(a,o.length===1?o[0]:o)}:o}):e=[Ht];var n=-1;e=Xr(e,Ws(Hn));var i=bR(t,function(o,a,l){var p=Xr(e,function(u){return u(o)});return{criteria:p,index:++n,value:o}});return MR(i,function(o,a){return DR(o,a,r)})}var IR=Tj;var Sj=9007199254740991,vj=Math.floor;function bj(t,e){var r="";if(!t||e<1||e>Sj)return r;do e%2&&(r+=t),e=vj(e/2),e&&(t+=t);while(e);return r}var FR=bj;function wj(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var CR=wj;var _j=Array.prototype,OR=_j.splice;function Ej(t,e,r,n){var i=n?CR:Ou,o=-1,a=e.length,l=t;for(t===e&&(e=zi(e)),r&&(l=Xr(t,Ws(r)));++o<a;)for(var p=0,u=e[o],d=r?r(u):u;(p=i(l,d,p,n))>-1;)l!==t&&OR.call(l,p,1),OR.call(t,p,1);return t}var NR=Ej;function Rj(t,e){return t&&t.length&&e&&e.length?NR(t,e):t}var LR=Rj;var kj=Vs(LR),Xt=kj;var Pj=Math.floor,Mj=Math.random;function Aj(t,e){return t+Pj(Mj()*(e-t+1))}var UR=Aj;var Dj=Math.ceil,Ij=Math.max;function Fj(t,e,r,n){for(var i=-1,o=Ij(Dj((e-t)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=t,t+=r;return a}var VR=Fj;function Cj(t){return function(e,r,n){return n&&typeof n!="number"&&No(e,r,n)&&(r=n=void 0),e=Is(e),r===void 0?(r=e,e=0):r=Is(r),n=n===void 0?e<r?1:-1:Is(n),VR(e,r,n,t)}}var BR=Cj;var Oj=BR(),eT=Oj;function Nj(t,e,r){return(r?No(t,e,r):e===void 0)?e=1:e=_u(e),FR(_n(t),e)}var tT=Nj;function Lj(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=UR(r,i),a=t[o];t[o]=t[r],t[r]=a}return t.length=e,t}var ef=Lj;function Uj(t){return ef(zi(t))}var HR=Uj;function Vj(t){return ef(RR(t))}var WR=Vj;function Bj(t){var e=Be(t)?HR:WR;return e(t)}var rT=Bj;var Hj=Vs(function(t,e){if(t==null)return[];var r=e.length;return r>1&&No(t,e[0],e[1])?e=[]:r>2&&No(e[0],e[1],e[2])&&(e=[e[0]]),IR(t,Qs(e,1),[])}),nT=Hj;function Wj(t,e){return t&&t.length?PR(t,Hn(e,2)):0}var tf=Wj;var $j=1/0,qj=Xi&&1/Js(new Xi([,-0]))[1]==$j?function(t){return new Xi(t)}:Mu,$R=qj;var jj=200;function zj(t,e,r){var n=-1,i=jE,o=t.length,a=!0,l=[],p=l;if(r)a=!1,i=SR;else if(o>=jj){var u=e?null:$R(t);if(u)return Js(u);a=!1,i=ju,p=new qu}else p=e?[]:l;e:for(;++n<o;){var d=t[n],h=e?e(d):d;if(d=r||d!==0?d:0,a&&h===h){for(var g=p.length;g--;)if(p[g]===h)continue e;e&&p.push(h),l.push(d)}else i(p,h,r)||(p!==l&&p.push(h),l.push(d))}return l}var rf=zj;function Gj(t){return t&&t.length?rf(t):[]}var xi=Gj;function Kj(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?rf(t,void 0,e):[]}var Cc=Kj;var Qj=Math.max;function Zj(t){if(!(t&&t.length))return[];var e=0;return t=Bu(t,function(r){if(TR(r))return e=Qj(r.length,e),!0}),Lu(e,function(r){return Xr(t,Zu(r))})}var qR=Zj;var Yj=Vs(qR),St=Yj;var nf=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0}}};var Oc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Wt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{Xt(this.listeners,e)}}}};var of={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var Nc=class{constructor(){this.notifier=new Wt;this.mocks={...of};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(Xj(n,r))return Uo(i,e)??Uo(this.mocks,e)}return Uo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function Xj(t,e){return t.languageId===e.languageId}var sf={hideInferenceWarning:!1,tutorialProgress:{}};var Lc=class{constructor(){this.data={...sf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var Uc=class{async showMessage(e,r,n,...i){}};var af=class{constructor(){this.configuration=new Nc;this.messages=new Uc;this.keyValueStore=new Lc;this.clipboard=new Oc;this.capabilities=new nf;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=ea;this.onDidCloseTextDocument=ea;this.onDidChangeActiveTextEditor=ea;this.onDidChangeVisibleTextEditors=ea;this.onDidChangeTextEditorSelection=ea;this.onDidChangeTextEditorVisibleRanges=ea}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>Xt(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function ea(){return{dispose(){}}}var ae=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new W(this,this)}concise(){return`${this.line}:${this.character}`}toString(){return this.concise()}};function jR(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var W=class t{constructor(...e){let[r,n]=e.length===2?e:[new ae(e[0],e[1]),new ae(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof ae?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new Te(this.end,this.start):new Te(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}toString(){return this.concise()}};function ez(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function tz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function zR(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var cf=zR(ez),lf=zR(tz);function en(t,e,r){return e.lastIndex=0,Array.from(t.matchAll(e),r)}function Vc(t,e){return t.lastIndex=0,t.test(e)}function GR(t,e){return t.lastIndex=0,e.match(t)}function Bc(t,e){return en(t,e,r=>({index:r.index,text:r[0]}))}var ta=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var pf=class extends ta{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function Hc(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function nt(t,e,r,...n){return t.showMessage("error",e,r,...n)}var oe=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(oe||{});var{supported:et,unsupported:ole,notApplicable:KR}=oe,iT={ifStatement:et,disqualifyDelimiter:et,"comment.line":et,"comment.block":et,"string.singleLine":et,"textFragment.comment.line":et,"textFragment.comment.block":et,"textFragment.string.singleLine":et,class:et,className:et,namedFunction:et,"name.function":et,"name.class":et,"name.field":et,functionName:et,"name.argument.formal":et,"name.argument.formal.iteration":et,"name.variable":et,"value.variable":et,"name.assignment":et,"value.assignment":et,"statement.class":et,"type.class":et,"type.field":et,"value.argument.formal":KR,"value.argument.formal.iteration":KR};var{supported:cle,unsupported:lle,notApplicable:ple}=oe;var{supported:QR,unsupported:mle,notApplicable:hle}=oe,rz={...iT,"value.argument.formal":QR,"value.argument.formal.iteration":QR};var{supported:xle,unsupported:Tle,notApplicable:Sle}=oe;var{supported:Wc,unsupported:nz,notApplicable:wle}=oe,oT={"comment.block":Wc,"string.singleLine":Wc,"name.iteration.block":Wc,"name.iteration.document":Wc,disqualifyDelimiter:Wc,"comment.line":nz};var{supported:Rle,unsupported:kle,notApplicable:Ple}=oe;var{supported:Dle,notApplicable:Ile}=oe;var{supported:Ole,notApplicable:Nle}=oe;var{supported:z,unsupported:Vle,notApplicable:tn}=oe,sT={list:z,map:z,ifStatement:z,regularExpression:z,switchStatementSubject:z,fieldAccess:z,disqualifyDelimiter:z,"textFragment.string.singleLine":z,"textFragment.string.multiLine":z,"textFragment.comment.line":z,"textFragment.comment.block":z,statement:z,"statement.iteration.document":z,"statement.iteration.block":z,class:z,className:z,anonymousFunction:z,namedFunction:z,"namedFunction.iteration.document":z,"namedFunction.method":z,"namedFunction.method.iteration.class":z,"namedFunction.constructor":z,functionName:z,"functionName.iteration.document":z,"functionName.method":z,"functionName.method.iteration.class":z,"functionName.constructor":z,functionCall:z,"functionCall.constructor":z,functionCallee:z,"functionCallee.constructor":z,"argument.actual":z,"argument.actual.iteration":z,"argument.actual.method":z,"argument.actual.method.iteration":z,"argument.actual.constructor":z,"argument.actual.constructor.iteration":z,"argument.formal":z,"argument.formal.iteration":z,"argument.formal.method":z,"argument.formal.method.iteration":z,"argument.formal.constructor":z,"argument.formal.constructor.iteration":z,"comment.line":z,"comment.block":z,"string.singleLine":z,"string.multiLine":z,"branch.if":z,"branch.if.iteration":z,"branch.try":z,"branch.switchCase":z,"branch.switchCase.iteration":z,"branch.ternary":z,"condition.if":z,"condition.while":z,"condition.doWhile":z,"condition.for":z,"condition.ternary":z,"condition.switchCase":z,"name.argument.formal":z,"name.argument.formal.iteration":z,"name.argument.formal.method":z,"name.argument.formal.method.iteration":z,"name.argument.formal.constructor":z,"name.argument.formal.constructor.iteration":z,"name.foreach":z,"name.assignment":z,"name.assignment.pattern":z,"name.variable":z,"name.variable.pattern":z,"name.function":z,"name.method":z,"name.constructor":z,"name.class":z,"name.field":z,"key.mapPair":z,"key.mapPair.iteration":z,"value.argument.formal":z,"value.argument.formal.iteration":z,"value.argument.formal.method":z,"value.argument.formal.method.iteration":z,"value.argument.formal.constructor":z,"value.argument.formal.constructor.iteration":z,"value.mapPair":z,"value.mapPair.iteration":z,"value.assignment":z,"value.variable":z,"value.variable.pattern":z,"value.foreach":z,"value.return":z,"value.return.lambda":z,"value.field":z},aT={element:z,tags:z,startTag:z,endTag:z,attribute:z,"key.attribute":z,"value.attribute":z},iz={...sT,...aT,"type.variable":tn,"type.argument.formal":tn,"type.argument.formal.iteration":tn,"type.argument.formal.method":tn,"type.argument.formal.method.iteration":tn,"type.argument.formal.constructor":tn,"type.argument.formal.constructor.iteration":tn,"type.return":tn,"type.field":tn,"type.foreach":tn,"type.interface":tn,command:tn};var{supported:cT}=oe,$c={"comment.line":cT,"comment.block":cT,map:cT};var{supported:jle,unsupported:zle,notApplicable:Gle}=oe,oz={...$c};var{supported:Yle,unsupported:Jle,notApplicable:Xle}=oe,sz={...$c};var{supported:rpe,unsupported:npe,notApplicable:ipe}=oe;var{supported:ape,notApplicable:cpe}=oe;var{supported:upe,unsupported:fpe,notApplicable:dpe}=oe;var{supported:gpe,unsupported:ype,notApplicable:xpe}=oe;var{supported:vpe,notApplicable:bpe}=oe;var{supported:Epe,unsupported:Rpe,notApplicable:kpe}=oe;var{supported:Ape,unsupported:Dpe,notApplicable:Ipe}=oe;var{supported:Ope,unsupported:Npe,notApplicable:Lpe}=oe;var{supported:Bpe,unsupported:Hpe,notApplicable:Wpe}=oe;var{supported:ra,unsupported:zpe,notApplicable:Gpe}=oe,az={...oT,"namedFunction.iteration":ra,"namedFunction.iteration.document":ra,"functionName.iteration":ra,"functionName.iteration.document":ra,"comment.line":ra,disqualifyDelimiter:ra};var{supported:Zpe}=oe;var{supported:er}=oe,lT={...sT,"name.field":er,"type.argument.formal":er,"type.argument.formal.iteration":er,"type.argument.formal.method":er,"type.argument.formal.method.iteration":er,"type.argument.formal.constructor":er,"type.argument.formal.constructor.iteration":er,"type.alias":er,"type.cast":er,"type.field":er,"type.interface":er,"type.return":er,"type.variable":er,"value.field":er,"value.typeAlias":er};var{supported:iue,unsupported:oue,notApplicable:sue}=oe,cz={...lT,...aT};var{supported:lue,unsupported:pue,notApplicable:uue}=oe;var{supported:mue,unsupported:hue,notApplicable:gue}=oe;var na=["that","source","instanceReference","keyboard"];var Te=class extends W{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new ae(e[0],e[1]),new ae(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}toString(){return this.concise()}};function YR({line:t,character:e}){return new ae(t,e)}function uf({start:t,end:e}){return new W(YR(t),YR(e))}function rn({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function vt({start:t,end:e}){return{type:"character",start:t,end:e}}function qc(t){return{start:ff(t.start),end:ff(t.end)}}function JR(t){return{anchor:ff(t.anchor),active:ff(t.active)}}function ff({line:t,character:e}){return{line:t,character:e}}function gk(t){return typeof t>"u"||t===null}function lz(t){return typeof t=="object"&&t!==null}function pz(t){return Array.isArray(t)?t:gk(t)?[]:[t]}function uz(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function fz(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function dz(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var mz=gk,hz=lz,gz=pz,yz=fz,xz=dz,Tz=uz,bt={isNothing:mz,isObject:hz,toArray:gz,repeat:yz,isNegativeZero:xz,extend:Tz};function yk(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function zc(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=yk(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}zc.prototype=Object.create(Error.prototype);zc.prototype.constructor=zc;zc.prototype.toString=function(e){return this.name+": "+yk(this,e)};var dr=zc;function pT(t,e,r,n,i){var o="",a="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(a=" ...",r=n+l-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}function uT(t,e){return bt.repeat(" ",e-t.length)+t}function Sz(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var l="",p,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,h=e.maxLength-(e.indent+d+3);for(p=1;p<=e.linesBefore&&!(a-p<0);p++)u=pT(t.buffer,n[a-p],i[a-p],t.position-(n[a]-n[a-p]),h),l=bt.repeat(" ",e.indent)+uT((t.line-p+1).toString(),d)+" | "+u.str+`
`+l;for(u=pT(t.buffer,n[a],i[a],t.position,h),l+=bt.repeat(" ",e.indent)+uT((t.line+1).toString(),d)+" | "+u.str+`
`,l+=bt.repeat("-",e.indent+d+3+u.pos)+`^
`,p=1;p<=e.linesAfter&&!(a+p>=i.length);p++)u=pT(t.buffer,n[a+p],i[a+p],t.position-(n[a]-n[a+p]),h),l+=bt.repeat(" ",e.indent)+uT((t.line+p+1).toString(),d)+" | "+u.str+`
`;return l.replace(/\n$/,"")}var vz=Sz,bz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],wz=["scalar","sequence","mapping"];function _z(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function Ez(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(bz.indexOf(r)===-1)throw new dr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=_z(e.styleAliases||null),wz.indexOf(this.kind)===-1)throw new dr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ct=Ez;function tk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}function Rz(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function dT(t){return this.extend(t)}dT.prototype.extend=function(e){var r=[],n=[];if(e instanceof Ct)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new dr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Ct))throw new dr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new dr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new dr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Ct))throw new dr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(dT.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=tk(i,"implicit"),i.compiledExplicit=tk(i,"explicit"),i.compiledTypeMap=Rz(i.compiledImplicit,i.compiledExplicit),i};var kz=dT,Pz=new Ct("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Mz=new Ct("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Az=new Ct("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Dz=new kz({explicit:[Pz,Mz,Az]});function Iz(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function Fz(){return null}function Cz(t){return t===null}var Oz=new Ct("tag:yaml.org,2002:null",{kind:"scalar",resolve:Iz,construct:Fz,predicate:Cz,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Nz(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Lz(t){return t==="true"||t==="True"||t==="TRUE"}function Uz(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Vz=new Ct("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Nz,construct:Lz,predicate:Uz,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Bz(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Hz(t){return 48<=t&&t<=55}function Wz(t){return 48<=t&&t<=57}function $z(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Bz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Hz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Wz(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function qz(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function jz(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!bt.isNegativeZero(t)}var zz=new Ct("tag:yaml.org,2002:int",{kind:"scalar",resolve:$z,construct:qz,predicate:jz,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Gz=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Kz(t){return!(t===null||!Gz.test(t)||t[t.length-1]==="_")}function Qz(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var Zz=/^[-+]?[0-9]+e/;function Yz(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(bt.isNegativeZero(t))return"-0.0";return r=t.toString(10),Zz.test(r)?r.replace("e",".e"):r}function Jz(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||bt.isNegativeZero(t))}var Xz=new Ct("tag:yaml.org,2002:float",{kind:"scalar",resolve:Kz,construct:Qz,predicate:Jz,represent:Yz,defaultStyle:"lowercase"}),eG=Dz.extend({implicit:[Oz,Vz,zz,Xz]}),tG=eG,xk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Tk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function rG(t){return t===null?!1:xk.exec(t)!==null||Tk.exec(t)!==null}function nG(t){var e,r,n,i,o,a,l,p=0,u=null,d,h,g;if(e=xk.exec(t),e===null&&(e=Tk.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],l=+e[6],e[7]){for(p=e[7].slice(0,3);p.length<3;)p+="0";p=+p}return e[9]&&(d=+e[10],h=+(e[11]||0),u=(d*60+h)*6e4,e[9]==="-"&&(u=-u)),g=new Date(Date.UTC(r,n,i,o,a,l,p)),u&&g.setTime(g.getTime()-u),g}function iG(t){return t.toISOString()}var oG=new Ct("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:rG,construct:nG,instanceOf:Date,represent:iG});function sG(t){return t==="<<"||t===null}var aG=new Ct("tag:yaml.org,2002:merge",{kind:"scalar",resolve:sG}),xT=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function cG(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=xT;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function lG(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=xT,a=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):r===18?(l.push(a>>10&255),l.push(a>>2&255)):r===12&&l.push(a>>4&255),new Uint8Array(l)}function pG(t){var e="",r=0,n,i,o=t.length,a=xT;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}function uG(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var fG=new Ct("tag:yaml.org,2002:binary",{kind:"scalar",resolve:cG,construct:lG,predicate:uG,represent:pG}),dG=Object.prototype.hasOwnProperty,mG=Object.prototype.toString;function hG(t){if(t===null)return!0;var e=[],r,n,i,o,a,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],a=!1,mG.call(i)!=="[object Object]")return!1;for(o in i)if(dG.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function gG(t){return t!==null?t:[]}var yG=new Ct("tag:yaml.org,2002:omap",{kind:"sequence",resolve:hG,construct:gG}),xG=Object.prototype.toString;function TG(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],xG.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function SG(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var vG=new Ct("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:TG,construct:SG}),bG=Object.prototype.hasOwnProperty;function wG(t){if(t===null)return!0;var e,r=t;for(e in r)if(bG.call(r,e)&&r[e]!==null)return!1;return!0}function _G(t){return t!==null?t:{}}var EG=new Ct("tag:yaml.org,2002:set",{kind:"mapping",resolve:wG,construct:_G}),TT=tG.extend({implicit:[oG,aG],explicit:[fG,yG,vG,EG]}),to=Object.prototype.hasOwnProperty,df=1,Sk=2,vk=3,mf=4,fT=1,RG=2,rk=3,kG=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PG=/[\x85\u2028\u2029]/,MG=/[,\[\]\{\}]/,bk=/^(?:!|!!|![a-z\-]+!)$/i,wk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function nk(t){return Object.prototype.toString.call(t)}function Wn(t){return t===10||t===13}function Ho(t){return t===9||t===32}function mr(t){return t===9||t===32||t===10||t===13}function oa(t){return t===44||t===91||t===93||t===123||t===125}function AG(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function DG(t){return t===120?2:t===117?4:t===85?8:0}function IG(t){return 48<=t&&t<=57?t-48:-1}function ik(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function FG(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var _k=new Array(256),Ek=new Array(256);for(Bo=0;Bo<256;Bo++)_k[Bo]=ik(Bo)?1:0,Ek[Bo]=ik(Bo);var Bo;function CG(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||TT,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Rk(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=vz(r),new dr(e,r)}function se(t,e){throw Rk(t,e)}function hf(t,e){t.onWarning&&t.onWarning.call(null,Rk(t,e))}var ok={YAML:function(e,r,n){var i,o,a;e.version!==null&&se(e,"duplication of %YAML directive"),n.length!==1&&se(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&se(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&se(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&hf(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&se(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],bk.test(i)||se(e,"ill-formed tag handle (first argument) of the TAG directive"),to.call(e.tagMap,i)&&se(e,'there is a previously declared suffix for "'+i+'" tag handle'),wk.test(o)||se(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{se(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function eo(t,e,r,n){var i,o,a,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||se(t,"expected valid JSON character");else kG.test(l)&&se(t,"the stream contains non-printable characters");t.result+=l}}function sk(t,e,r,n){var i,o,a,l;for(bt.isObject(r)||se(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,l=i.length;a<l;a+=1)o=i[a],to.call(e,o)||(e[o]=r[o],n[o]=!0)}function sa(t,e,r,n,i,o,a,l,p){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&se(t,"nested arrays are not supported inside keys"),typeof i=="object"&&nk(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&nk(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)sk(t,e,o[u],r);else sk(t,e,o,r);else!t.json&&!to.call(r,i)&&to.call(e,i)&&(t.line=a||t.line,t.lineStart=l||t.lineStart,t.position=p||t.position,se(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function ST(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):se(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function gt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Ho(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Wn(i))for(ST(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&hf(t,"deficient indentation"),n}function xf(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||mr(r)))}function vT(t,e){e===1?t.result+=" ":e>1&&(t.result+=bt.repeat(`
`,e-1))}function OG(t,e,r){var n,i,o,a,l,p,u,d,h=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),mr(x)||oa(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),mr(i)||r&&oa(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),mr(i)||r&&oa(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),mr(n))break}else{if(t.position===t.lineStart&&xf(t)||r&&oa(x))break;if(Wn(x))if(p=t.line,u=t.lineStart,d=t.lineIndent,gt(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=p,t.lineStart=u,t.lineIndent=d;break}}l&&(eo(t,o,a,!1),vT(t,t.line-p),o=a=t.position,l=!1),Ho(x)||(a=t.position+1),x=t.input.charCodeAt(++t.position)}return eo(t,o,a,!1),t.result?!0:(t.kind=h,t.result=g,!1)}function NG(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(eo(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Wn(r)?(eo(t,n,i,!0),vT(t,gt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&xf(t)?se(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);se(t,"unexpected end of the stream within a single quoted scalar")}function LG(t,e){var r,n,i,o,a,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return eo(t,r,t.position,!0),t.position++,!0;if(l===92){if(eo(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),Wn(l))gt(t,!1,e);else if(l<256&&_k[l])t.result+=Ek[l],t.position++;else if((a=DG(l))>0){for(i=a,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(a=AG(l))>=0?o=(o<<4)+a:se(t,"expected hexadecimal character");t.result+=FG(o),t.position++}else se(t,"unknown escape sequence");r=n=t.position}else Wn(l)?(eo(t,r,n,!0),vT(t,gt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&xf(t)?se(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}se(t,"unexpected end of the stream within a double quoted scalar")}function UG(t,e){var r=!0,n,i,o,a=t.tag,l,p=t.anchor,u,d,h,g,x,b=Object.create(null),w,F,M,U;if(U=t.input.charCodeAt(t.position),U===91)d=93,x=!1,l=[];else if(U===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),U=t.input.charCodeAt(++t.position);U!==0;){if(gt(t,!0,e),U=t.input.charCodeAt(t.position),U===d)return t.position++,t.tag=a,t.anchor=p,t.kind=x?"mapping":"sequence",t.result=l,!0;r?U===44&&se(t,"expected the node content, but found ','"):se(t,"missed comma between flow collection entries"),F=w=M=null,h=g=!1,U===63&&(u=t.input.charCodeAt(t.position+1),mr(u)&&(h=g=!0,t.position++,gt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,aa(t,e,df,!1,!0),F=t.tag,w=t.result,gt(t,!0,e),U=t.input.charCodeAt(t.position),(g||t.line===n)&&U===58&&(h=!0,U=t.input.charCodeAt(++t.position),gt(t,!0,e),aa(t,e,df,!1,!0),M=t.result),x?sa(t,l,b,F,w,M,n,i,o):h?l.push(sa(t,null,b,F,w,M,n,i,o)):l.push(w),gt(t,!0,e),U=t.input.charCodeAt(t.position),U===44?(r=!0,U=t.input.charCodeAt(++t.position)):r=!1}se(t,"unexpected end of the stream within a flow collection")}function VG(t,e){var r,n,i=fT,o=!1,a=!1,l=e,p=0,u=!1,d,h;if(h=t.input.charCodeAt(t.position),h===124)n=!1;else if(h===62)n=!0;else return!1;for(t.kind="scalar",t.result="";h!==0;)if(h=t.input.charCodeAt(++t.position),h===43||h===45)fT===i?i=h===43?rk:RG:se(t,"repeat of a chomping mode identifier");else if((d=IG(h))>=0)d===0?se(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?se(t,"repeat of an indentation width identifier"):(l=e+d-1,a=!0);else break;if(Ho(h)){do h=t.input.charCodeAt(++t.position);while(Ho(h));if(h===35)do h=t.input.charCodeAt(++t.position);while(!Wn(h)&&h!==0)}for(;h!==0;){for(ST(t),t.lineIndent=0,h=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&h===32;)t.lineIndent++,h=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),Wn(h)){p++;continue}if(t.lineIndent<l){i===rk?t.result+=bt.repeat(`
`,o?1+p:p):i===fT&&o&&(t.result+=`
`);break}for(n?Ho(h)?(u=!0,t.result+=bt.repeat(`
`,o?1+p:p)):u?(u=!1,t.result+=bt.repeat(`
`,p+1)):p===0?o&&(t.result+=" "):t.result+=bt.repeat(`
`,p):t.result+=bt.repeat(`
`,o?1+p:p),o=!0,a=!0,p=0,r=t.position;!Wn(h)&&h!==0;)h=t.input.charCodeAt(++t.position);eo(t,r,t.position,!1)}return!0}function ak(t,e){var r,n=t.tag,i=t.anchor,o=[],a,l=!1,p;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),p=t.input.charCodeAt(t.position);p!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,se(t,"tab characters must not be used in indentation")),!(p!==45||(a=t.input.charCodeAt(t.position+1),!mr(a))));){if(l=!0,t.position++,gt(t,!0,-1)&&t.lineIndent<=e){o.push(null),p=t.input.charCodeAt(t.position);continue}if(r=t.line,aa(t,e,vk,!1,!0),o.push(t.result),gt(t,!0,-1),p=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&p!==0)se(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function BG(t,e,r){var n,i,o,a,l,p,u=t.tag,d=t.anchor,h={},g=Object.create(null),x=null,b=null,w=null,F=!1,M=!1,U;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=h),U=t.input.charCodeAt(t.position);U!==0;){if(!F&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,se(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(U===63||U===58)&&mr(n))U===63?(F&&(sa(t,h,g,x,b,null,a,l,p),x=b=w=null),M=!0,F=!0,i=!0):F?(F=!1,i=!0):se(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,U=n;else{if(a=t.line,l=t.lineStart,p=t.position,!aa(t,r,Sk,!1,!0))break;if(t.line===o){for(U=t.input.charCodeAt(t.position);Ho(U);)U=t.input.charCodeAt(++t.position);if(U===58)U=t.input.charCodeAt(++t.position),mr(U)||se(t,"a whitespace character is expected after the key-value separator within a block mapping"),F&&(sa(t,h,g,x,b,null,a,l,p),x=b=w=null),M=!0,F=!1,i=!1,x=t.tag,b=t.result;else if(M)se(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(M)se(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(F&&(a=t.line,l=t.lineStart,p=t.position),aa(t,e,mf,!0,i)&&(F?b=t.result:w=t.result),F||(sa(t,h,g,x,b,w,a,l,p),x=b=w=null),gt(t,!0,-1),U=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&U!==0)se(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return F&&sa(t,h,g,x,b,null,a,l,p),M&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=h),M}function HG(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&se(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):se(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!mr(a);)a===33&&(n?se(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),bk.test(i)||se(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),MG.test(o)&&se(t,"tag suffix cannot contain flow indicator characters")}o&&!wk.test(o)&&se(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{se(t,"tag name is malformed: "+o)}return r?t.tag=o:to.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:se(t,'undeclared tag handle "'+i+'"'),!0}function WG(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&se(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!mr(r)&&!oa(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&se(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function $G(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!mr(n)&&!oa(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&se(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),to.call(t.anchorMap,r)||se(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],gt(t,!0,-1),!0}function aa(t,e,r,n,i){var o,a,l,p=1,u=!1,d=!1,h,g,x,b,w,F;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=mf===r||vk===r,n&&gt(t,!0,-1)&&(u=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),p===1)for(;HG(t)||WG(t);)gt(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):l=!1;if(l&&(l=u||i),(p===1||mf===r)&&(df===r||Sk===r?w=e:w=e+1,F=t.position-t.lineStart,p===1?l&&(ak(t,F)||BG(t,F,w))||UG(t,w)?d=!0:(a&&VG(t,w)||NG(t,w)||LG(t,w)?d=!0:$G(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&se(t,"alias node should not have any properties")):OG(t,w,df===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):p===0&&(d=l&&ak(t,F))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&se(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),h=0,g=t.implicitTypes.length;h<g;h+=1)if(b=t.implicitTypes[h],b.resolve(t.result)){t.result=b.construct(t.result),t.tag=b.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(to.call(t.typeMap[t.kind||"fallback"],t.tag))b=t.typeMap[t.kind||"fallback"][t.tag];else for(b=null,x=t.typeMap.multi[t.kind||"fallback"],h=0,g=x.length;h<g;h+=1)if(t.tag.slice(0,x[h].tag.length)===x[h].tag){b=x[h];break}b||se(t,"unknown tag !<"+t.tag+">"),t.result!==null&&b.kind!==t.kind&&se(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+b.kind+'", not "'+t.kind+'"'),b.resolve(t.result,t.tag)?(t.result=b.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):se(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function qG(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(gt(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!mr(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&se(t,"directive name must not be less than one character in length");a!==0;){for(;Ho(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!Wn(a));break}if(Wn(a))break;for(r=t.position;a!==0&&!mr(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&ST(t),to.call(ok,n)?ok[n](t,n,i):hf(t,'unknown document directive "'+n+'"')}if(gt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,gt(t,!0,-1)):o&&se(t,"directives end mark is expected"),aa(t,t.lineIndent-1,mf,!1,!0),gt(t,!0,-1),t.checkLineBreaks&&PG.test(t.input.slice(e,t.position))&&hf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&xf(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,gt(t,!0,-1));return}if(t.position<t.length-1)se(t,"end of the stream or a document separator is expected");else return}function kk(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new CG(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,se(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)qG(r);return r.documents}function jG(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=kk(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function zG(t,e){var r=kk(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new dr("expected a single document in the stream, but found more")}}var GG=jG,KG=zG,Pk={loadAll:GG,load:KG},Mk=Object.prototype.toString,Ak=Object.prototype.hasOwnProperty,bT=65279,QG=9,Gc=10,ZG=13,YG=32,JG=33,XG=34,mT=35,eK=37,tK=38,rK=39,nK=42,Dk=44,iK=45,gf=58,oK=61,sK=62,aK=63,cK=64,Ik=91,Fk=93,lK=96,Ck=123,pK=124,Ok=125,$t={};$t[0]="\\0";$t[7]="\\a";$t[8]="\\b";$t[9]="\\t";$t[10]="\\n";$t[11]="\\v";$t[12]="\\f";$t[13]="\\r";$t[27]="\\e";$t[34]='\\"';$t[92]="\\\\";$t[133]="\\N";$t[160]="\\_";$t[8232]="\\L";$t[8233]="\\P";var uK=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],fK=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function dK(t,e){var r,n,i,o,a,l,p;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),p=t.compiledTypeMap.fallback[a],p&&Ak.call(p.styleAliases,l)&&(l=p.styleAliases[l]),r[a]=l;return r}function mK(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new dr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+bt.repeat("0",n-e.length)+e}var hK=1,Kc=2;function gK(t){this.schema=t.schema||TT,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=bt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=dK(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Kc:hK,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ck(t,e){for(var r=bt.repeat(" ",e),n=0,i=-1,o="",a,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=l):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}function hT(t,e){return`
`+bt.repeat(" ",t.indent*e)}function yK(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function yf(t){return t===YG||t===QG}function Qc(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==bT||65536<=t&&t<=1114111}function lk(t){return Qc(t)&&t!==bT&&t!==ZG&&t!==Gc}function pk(t,e,r){var n=lk(t),i=n&&!yf(t);return(r?n:n&&t!==Dk&&t!==Ik&&t!==Fk&&t!==Ck&&t!==Ok)&&t!==mT&&!(e===gf&&!i)||lk(e)&&!yf(e)&&t===mT||e===gf&&i}function xK(t){return Qc(t)&&t!==bT&&!yf(t)&&t!==iK&&t!==aK&&t!==gf&&t!==Dk&&t!==Ik&&t!==Fk&&t!==Ck&&t!==Ok&&t!==mT&&t!==tK&&t!==nK&&t!==JG&&t!==pK&&t!==oK&&t!==sK&&t!==rK&&t!==XG&&t!==eK&&t!==cK&&t!==lK}function TK(t){return!yf(t)&&t!==gf}function jc(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Nk(t){var e=/^\n* /;return e.test(t)}var Lk=1,gT=2,Uk=3,Vk=4,ia=5;function SK(t,e,r,n,i,o,a,l){var p,u=0,d=null,h=!1,g=!1,x=n!==-1,b=-1,w=xK(jc(t,0))&&TK(jc(t,t.length-1));if(e||a)for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=jc(t,p),!Qc(u))return ia;w=w&&pk(u,d,l),d=u}else{for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=jc(t,p),u===Gc)h=!0,x&&(g=g||p-b-1>n&&t[b+1]!==" ",b=p);else if(!Qc(u))return ia;w=w&&pk(u,d,l),d=u}g=g||x&&p-b-1>n&&t[b+1]!==" "}return!h&&!g?w&&!a&&!i(t)?Lk:o===Kc?ia:gT:r>9&&Nk(t)?ia:a?o===Kc?ia:gT:g?Vk:Uk}function vK(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===Kc?'""':"''";if(!t.noCompatMode&&(uK.indexOf(e)!==-1||fK.test(e)))return t.quotingType===Kc?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function p(u){return yK(t,u)}switch(SK(e,l,t.indent,a,p,t.quotingType,t.forceQuotes&&!n,i)){case Lk:return e;case gT:return"'"+e.replace(/'/g,"''")+"'";case Uk:return"|"+uk(e,t.indent)+fk(ck(e,o));case Vk:return">"+uk(e,t.indent)+fk(ck(bK(e,a),o));case ia:return'"'+wK(e)+'"';default:throw new dr("impossible error: invalid scalar style")}}()}function uk(t,e){var r=Nk(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function fk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function bK(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,dk(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var l=a[1],p=a[2];o=p[0]===" ",n+=l+(!i&&!o&&p!==""?`
`:"")+dk(p,e),i=o}return n}function dk(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,l=0,p="";n=r.exec(t);)l=n.index,l-i>e&&(o=a>i?a:l,p+=`
`+t.slice(i,o),i=o+1),a=l;return p+=`
`,t.length-i>e&&a>i?p+=t.slice(i,a)+`
`+t.slice(a+1):p+=t.slice(i),p.slice(1)}function wK(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=jc(t,i),n=$t[r],!n&&Qc(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||mK(r);return e}function _K(t,e,r){var n="",i=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(Ti(t,e,l,!1,!1)||typeof l>"u"&&Ti(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function mk(t,e,r,n){var i="",o=t.tag,a,l,p;for(a=0,l=r.length;a<l;a+=1)p=r[a],t.replacer&&(p=t.replacer.call(r,String(a),p)),(Ti(t,e+1,p,!0,!0,!1,!0)||typeof p>"u"&&Ti(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=hT(t,e)),t.dump&&Gc===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function EK(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,l,p,u,d;for(a=0,l=o.length;a<l;a+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),p=o[a],u=r[p],t.replacer&&(u=t.replacer.call(r,p,u)),Ti(t,e,p,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Ti(t,e,u,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function RK(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),l,p,u,d,h,g;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new dr("sortKeys must be a boolean or a function");for(l=0,p=a.length;l<p;l+=1)g="",(!n||i!=="")&&(g+=hT(t,e)),u=a[l],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),Ti(t,e+1,u,!0,!0,!0)&&(h=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,h&&(t.dump&&Gc===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,h&&(g+=hT(t,e)),Ti(t,e+1,d,!0,h)&&(t.dump&&Gc===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function hk(t,e,r){var n,i,o,a,l,p;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(p=t.styleMap[l.tag]||l.defaultStyle,Mk.call(l.represent)==="[object Function]")n=l.represent(e,p);else if(Ak.call(l.represent,p))n=l.represent[p](e,p);else throw new dr("!<"+l.tag+'> tag resolver accepts not "'+p+'" style');t.dump=n}return!0}return!1}function Ti(t,e,r,n,i,o,a){t.tag=null,t.dump=r,hk(t,r,!1)||hk(t,r,!0);var l=Mk.call(t.dump),p=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",h,g;if(d&&(h=t.duplicates.indexOf(r),g=h!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[h])t.dump="*ref_"+h;else{if(d&&g&&!t.usedDuplicates[h]&&(t.usedDuplicates[h]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(RK(t,e,t.dump,i),g&&(t.dump="&ref_"+h+t.dump)):(EK(t,e,t.dump),g&&(t.dump="&ref_"+h+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?mk(t,e-1,t.dump,i):mk(t,e,t.dump,i),g&&(t.dump="&ref_"+h+t.dump)):(_K(t,e,t.dump),g&&(t.dump="&ref_"+h+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&vK(t,t.dump,e,o,p);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new dr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function kK(t,e){var r=[],n=[],i,o;for(yT(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function yT(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)yT(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)yT(t[n[i]],e,r)}function PK(t,e){e=e||{};var r=new gK(e);r.noRefs||kK(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Ti(r,0,n,!0,!0)?r.dump+`
`:""}var MK=PK,AK={dump:MK};function wT(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Bk=Ct;var Hk=TT,DK=Pk.load,Mfe=Pk.loadAll,Wk=AK.dump;var Afe=wT("safeLoad","load"),Dfe=wT("safeLoadAll","loadAll"),Ife=wT("safeDump","dump");var Tf=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=Wk(this.data,Object.assign({replacer:OK,schema:FK},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},IK=new Bk("!format",{kind:"scalar",resolve:()=>!1,instanceOf:Tf,represent:t=>t.represent()}),FK=Hk.extend({implicit:[IK]}),_T=t=>typeof t=="object"&&t!=null;function CK(t){if(_T(t))return Object.values(t).every(e=>!_T(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!_T(e)&&!Array.isArray(e))}function OK(t,e){return t===""?e:CK(e)?new Tf(e,{flowLevel:0}):e}var ET=["breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","foldRegion","followLink","followLinkAside","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.setKeyboardTarget","private.showParseTree","private.getTargets"],LK=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],qk=[...ET,...LK];var UK=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleDoubleQuotes","tripleSingleQuotes"],VK=["string","any","collectionBoundary"],Sf=[...UK,...VK],Wo=["argumentOrParameter","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter"];function jk(t){return Wo.includes(t.type)}var zk=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],Zc=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},ca=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function Yc(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function $o(t){return t.version>=7}var ro=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var no=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function Gk(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function Jc(t){return typeof t=="string"||t instanceof String}function vf(t){let[e,...r]=t;return HK(e,r)}function HK(t,e){let r;if(Jc(t)){let n=t,[i,o,...a]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:a,usePrePhraseSnapshot:!1}}else r=t;return r}function Xc(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function Kk(t){for(let e of t)return!1;return!0}function Si(t){return Object.keys(t)}function el(t,e){return`${t}.${e}`}var Zk={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(Qk).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(Qk).join("")}};function Qk(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}function Yk(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,a)=>{let l=r(a),p=o.get(l);return p==null?(o.set(l,[a]),o):(o.get(l).push(a),p.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Cc(i.get(o),e))}),t.flatMap(o=>{let a=r(o),l=i.get(a);if(l==null||l.length===0)return[];let p=l[0];return e(p,o)?(l.shift(),p):[]}))}function qo(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var nP=Symbol.for("immer-nothing"),Jk=Symbol.for("immer-draftable"),Cr=Symbol.for("immer-state"),WK=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function hr(t,...e){if(process.env.NODE_ENV!=="production"){let r=WK[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var la=Object.getPrototypeOf;function pa(t){return!!t&&!!t[Cr]}function zo(t){return t?iP(t)||Array.isArray(t)||!!t[Jk]||!!t.constructor?.[Jk]||Rf(t)||kf(t):!1}var $K=Object.prototype.constructor.toString();function iP(t){if(!t||typeof t!="object")return!1;let e=la(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===$K}function bf(t,e){Ef(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Ef(t){let e=t[Cr];return e?e.type_:Array.isArray(t)?1:Rf(t)?2:kf(t)?3:0}function PT(t,e){return Ef(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function oP(t,e,r){let n=Ef(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function qK(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Rf(t){return t instanceof Map}function kf(t){return t instanceof Set}function jo(t){return t.copy_||t.base_}function MT(t,e){if(Rf(t))return new Map(t);if(kf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&iP(t))return la(t)?{...t}:Object.assign(Object.create(null),t);let r=Object.getOwnPropertyDescriptors(t);delete r[Cr];let n=Reflect.ownKeys(r);for(let i=0;i<n.length;i++){let o=n[i],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(la(t),r)}function CT(t,e=!1){return Pf(t)||pa(t)||!zo(t)||(Ef(t)>1&&(t.set=t.add=t.clear=t.delete=jK),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>CT(n,!0))),t}function jK(){hr(2)}function Pf(t){return Object.isFrozen(t)}var zK={};function Go(t){let e=zK[t];return e||hr(0,t),e}var tl;function sP(){return tl}function GK(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Xk(t,e){e&&(Go("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function AT(t){DT(t),t.drafts_.forEach(KK),t.drafts_=null}function DT(t){t===tl&&(tl=t.parent_)}function eP(t){return tl=GK(tl,t)}function KK(t){let e=t[Cr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function tP(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Cr].modified_&&(AT(e),hr(4)),zo(t)&&(t=wf(e,t),e.parent_||_f(e,t)),e.patches_&&Go("Patches").generateReplacementPatches_(r[Cr].base_,t,e.patches_,e.inversePatches_)):t=wf(e,r,[]),AT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==nP?t:void 0}function wf(t,e,r){if(Pf(e))return e;let n=e[Cr];if(!n)return bf(e,(i,o)=>rP(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return _f(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,a=!1;n.type_===3&&(o=new Set(i),i.clear(),a=!0),bf(o,(l,p)=>rP(t,n,i,l,p,r,a)),_f(t,i,!1),r&&t.patches_&&Go("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function rP(t,e,r,n,i,o,a){if(process.env.NODE_ENV!=="production"&&i===r&&hr(5),pa(i)){let l=o&&e&&e.type_!==3&&!PT(e.assigned_,n)?o.concat(n):void 0,p=wf(t,i,l);if(oP(r,n,p),pa(p))t.canAutoFreeze_=!1;else return}else a&&r.add(i);if(zo(i)&&!Pf(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;wf(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&_f(t,i)}}function _f(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&CT(e,r)}function QK(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:sP(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=OT;r&&(i=[n],o=rl);let{revoke:a,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=a,l}var OT={get(t,e){if(e===Cr)return t;let r=jo(t);if(!PT(r,e))return ZK(t,r,e);let n=r[e];return t.finalized_||!zo(n)?n:n===RT(t.base_,e)?(kT(t),t.copy_[e]=FT(n,t)):n},has(t,e){return e in jo(t)},ownKeys(t){return Reflect.ownKeys(jo(t))},set(t,e,r){let n=aP(jo(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=RT(jo(t),e),o=i?.[Cr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(qK(r,i)&&(r!==void 0||PT(t.base_,e)))return!0;kT(t),IT(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return RT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,kT(t),IT(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=jo(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){hr(11)},getPrototypeOf(t){return la(t.base_)},setPrototypeOf(){hr(12)}},rl={};bf(OT,(t,e)=>{rl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});rl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&hr(13),rl.set.call(this,t,e,void 0)};rl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&hr(14),OT.set.call(this,t[0],e,r,t[0])};function RT(t,e){let r=t[Cr];return(r?jo(r):t)[e]}function ZK(t,e,r){let n=aP(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function aP(t,e){if(!(e in t))return;let r=la(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=la(r)}}function IT(t){t.modified_||(t.modified_=!0,t.parent_&&IT(t.parent_))}function kT(t){t.copy_||(t.copy_=MT(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var YK=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let a=this;return function(p=o,...u){return a.produce(p,d=>r.call(this,d,...u))}}typeof r!="function"&&hr(6),n!==void 0&&typeof n!="function"&&hr(7);let i;if(zo(e)){let o=eP(this),a=FT(e,void 0),l=!0;try{i=r(a),l=!1}finally{l?AT(o):DT(o)}return Xk(o,n),tP(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===nP&&(i=void 0),this.autoFreeze_&&CT(i,!0),n){let o=[],a=[];Go("Patches").generateReplacementPatches_(e,i,o,a),n(o,a)}return i}else hr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,p=>e(p,...l));let n,i;return[this.produce(e,r,(a,l)=>{n=a,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){zo(t)||hr(8),pa(t)&&(t=JK(t));let e=eP(this),r=FT(t,void 0);return r[Cr].isManual_=!0,DT(e),r}finishDraft(t,e){let r=t&&t[Cr];(!r||!r.isManual_)&&hr(9);let{scope_:n}=r;return Xk(n,e),tP(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=Go("Patches").applyPatches_;return pa(t)?n(t,e):this.produce(t,i=>n(i,e))}};function FT(t,e){let r=Rf(t)?Go("MapSet").proxyMap_(t,e):kf(t)?Go("MapSet").proxySet_(t,e):QK(t,e);return(e?e.scope_:sP()).drafts_.push(r),r}function JK(t){return pa(t)||hr(10,t),cP(t)}function cP(t){if(!zo(t)||Pf(t))return t;let e=t[Cr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=MT(t,e.scope_.immer_.useStrictShallowCopy_)}else r=MT(t,!0);return bf(r,(n,i)=>{oP(r,n,cP(i))}),e&&(e.finalized_=!1),r}var Or=new YK,Mf=Or.produce,Phe=Or.produceWithPatches.bind(Or),Mhe=Or.setAutoFreeze.bind(Or),Ahe=Or.setUseStrictShallowCopy.bind(Or),Dhe=Or.applyPatches.bind(Or),Ihe=Or.createDraft.bind(Or),Fhe=Or.finishDraft.bind(Or);var $n=ur(kP(),1),Jhe=$n.default.v1,Xhe=$n.default.v3,PP=$n.default.v4,ege=$n.default.v5,tge=$n.default.NIL,rge=$n.default.version,nge=$n.default.validate,ige=$n.default.stringify,oge=$n.default.parse;function MP(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function qf(t,e){if(Array.isArray(t))return t.map(r=>qf(r,e));if(typeof t=="object"&&t!=null){if(c6(t))return MP(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=qf(t[n],e));return r}return t}function c6(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var Yf=ur(DP(),1);var l6={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},p6={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},zf={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},Gf={modulo100:"row",relativeUp:"up",relativeDown:"down"};function IP(t){let e=l6[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function FP(t){let e=p6[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function $T(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var u6=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),f6=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),d6={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},CP={...u6,...f6,...d6};function io(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Nt(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var OP={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Nt("triple quad"),tripleSingleQuotes:Nt("triple twin"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Nt("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:io("one section"),sectionLevelTwo:io("two section"),sectionLevelThree:io("three section"),sectionLevelFour:io("four section"),sectionLevelFive:io("five section"),sectionLevelSix:io("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Nt("parse tree string"),textFragment:Nt("text fragment"),disqualifyDelimiter:Nt("disqualify delimiter"),"private.fieldAccess":Nt("access"),"private.switchStatementSubject":Nt("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join","private.showParseTree":Nt("parse tree"),"experimental.setInstanceReference":io("from"),editNew:Nt("edit new"),executeCommand:Nt("execute command"),parsed:Nt("parsed"),getText:Nt("get text"),replace:Nt("replace"),"private.getTargets":Nt("get targets"),"private.setKeyboardTarget":Nt("set keyboard target")},customAction:{},grapheme:CP};var qT=$T(OP,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),bi=$T(qT,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var ut={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var UP=ur(LP(),1),Qf=class{constructor(e){this.mooLexer=UP.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var wi={};for(let t of ET){let{spokenForms:e}=bi.action[t];for(let r of e)wi[r]={type:"simpleActionName",value:t}}var m6=["replaceWithTarget","moveToTarget"];for(let t of m6){let{spokenForms:e}=bi.action[t];for(let r of e)wi[r]={type:"bringMove",value:t}}var h6=["before","after","to"];for(let t of h6){let e=ut[t==="to"?"sourceDestinationConnective":t];wi[e]={type:"insertionMode",value:t}}for(let t of Wo){let{spokenForms:e}=bi.simpleScopeTypeType[t];for(let r of e)wi[r]={type:"simpleScopeTypeType",value:t}}for(let t of Sf){let{spokenForms:e}=bi.pairedDelimiter[t];for(let r of e)wi[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(zf))e!=null&&(wi[e]={type:"simpleMarkType",value:t});var _i=new Qf({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(wi),type:t=>wi[t].type,value:t=>wi[t].value}});function VP(t,e){return{name:t,target:e}}function BP(t,e,r){return{name:t,source:e,destination:r}}function Zf(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function HP(t,e){return{type:"primitive",insertionMode:t,target:e}}function WP(t){return{type:"containingScope",scopeType:t}}function $P(t){return{type:t}}function qP(t){return{type:"surroundingPair",delimiter:t}}function jP(t){return{type:t}}function zP(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function jT(t){return t[0]}var g6={Lexer:_i,ParserRules:[{name:"main",symbols:["action"],postprocess:jT},{name:"action",symbols:[_i.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>VP(t,e)},{name:"action",symbols:[_i.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>BP(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:jT},{name:"destination",symbols:[_i.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>HP(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:jT},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>Zf(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>Zf(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>Zf(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>WP(t)},{name:"scopeType",symbols:[_i.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>$P(t)},{name:"scopeType",symbols:[_i.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>qP(t)},{name:"mark",symbols:[_i.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>jP(t)},{name:"mark",symbols:[_i.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>zP(t)}],ParserStart:"main"},GP=g6;function y6(){return new Yf.Parser(Yf.Grammar.fromCompiled(GP))}function KP(t){let e=y6();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function Jf(t,e){let r=KP(t);return qf(r,e)}function sl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...QP(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return QP(t.destination);case"parsed":return sl(Jf(t.content,t.arguments));default:return[t.target]}}function QP(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function GT(t){return t.flatMap(zT)}function zT(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(zT);case"range":return[t.anchor,t.active].flatMap(zT);case"implicit":return[]}}var x6={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},T6={purple:"pink"};function S6(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=x6[e.scopeType.type]??e.scopeType.type)})}function v6(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=T6[t.mark.symbolColor]??t.mark.symbolColor)}function KT(t){GT(t).forEach(e=>{S6(e),v6(e)})}function ZP(t){return{...t,version:1}}var b6={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},w6={type:"primitive",isImplicit:!0},YP=t=>yi(t,b6)?w6:t;function JP(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:E6(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function _6(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function QT(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:a,selectionType:l,position:p}=t,u=[];if(p&&p!=="contents"&&(p==="before"?o==="inside"?u.push({type:"position",position:"start"}):e==="remove"?u.push({type:"leading"}):u.push({type:"position",position:"before"}):o==="inside"?u.push({type:"position",position:"end"}):e==="remove"?u.push({type:"trailing"}):u.push({type:"position",position:"after"})),l)switch(l){case"token":if(a?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:u.push({type:"containingScope",scopeType:{type:l}})}return a&&u.push(..._6(a)),{type:r,isImplicit:n,modifiers:u.length>0?u:void 0,mark:i?.type==="cursorToken"?void 0:i}}function XP(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>XP(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:a,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:QT(i,e),active:QT(o,e),excludeAnchor:a??!1,excludeActive:l??!1}}case"primitive":return QT(t,e)}}function E6(t,e){return t.map(r=>XP(r,e)).map(r=>r.type==="primitive"?YP(r):r)}function eM(t){return{...t,version:3,targets:t.targets.map(tM)}}function tM(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>tM(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:ZT(e),active:ZT(r),...n}}case"primitive":return ZT(t)}}function ZT(t){let e=t.modifiers!=null?t.modifiers.map(k6):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:cl(r),modifiers:e},active:{type:"primitive",mark:cl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?R6(t.mark):void 0,modifiers:e}}function R6(t){switch(t.type){case"lineNumber":return P6(t);default:return t}}function k6(t){switch(t.type){case"ordinalRange":return M6(t);default:return t}}function P6(t){return yi(t.anchor,t.active)?cl(t.anchor):{type:"range",anchor:cl(t.anchor),active:cl(t.active)}}function M6(t){return t.anchor===t.active?al(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?al(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?al(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:al(t.scopeType,t.anchor),active:al(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function cl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function al(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function nM(t){return{...t,version:4,targets:t.targets.map(iM)}}function iM(t){switch(t.type){case"primitive":return rM(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:rM(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(iM)}}}}function rM(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function oM(t){return{...t,version:5,action:A6(t.action),targets:t.targets.map(Xf)}}function A6(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=D6(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function D6(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function Xf(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(Xf)};case"range":return{...t,anchor:Xf(t.anchor),active:Xf(t.active)};case"primitive":return{...t,mark:t.mark!=null?YT(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(JT):void 0}}}function YT(t){return t.type==="range"?{...t,anchor:YT(t.anchor),active:YT(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function JT(t){return t.type==="range"?{...t,anchor:JT(t.anchor),active:JT(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var I6={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function XT(t){let e=I6[t]??t;if(!qk.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function sM(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:F6(t.action,t.targets)}}function F6(t,e){let r=XT(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:nn(e[0]),destination:ll(e[1])};case"swapTargets":return{name:r,target1:nn(e[0]),target2:nn(e[1])};case"callAsFunction":return{name:r,callee:nn(e[0]),argument:nn(e[1])};case"pasteFromClipboard":return{name:r,destination:ll(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:nn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:nn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:ll(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:nn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:nn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:ll(e[0])};case"highlight":{let n={name:r,target:nn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:ll(e[0])};case"getText":return{name:r,options:t.args?.[0],target:nn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:nn(e[0])}}}function nn(t){switch(t.type){case"list":case"range":case"primitive":return C6(t);case"implicit":return t}}function C6(t){switch(t.type){case"list":return O6(t);case"range":case"primitive":return ed(t)}}function O6(t){return{...t,elements:t.elements.map(ed)}}function ed(t){switch(t.type){case"range":return aM(t);case"primitive":return td(t)}}function aM(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:td(e),active:td(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function td(t){let e={type:"primitive"},r=H6(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function ll(t){switch(t.type){case"list":return N6(t);case"range":return L6(t);case"primitive":return U6(t);case"implicit":return V6()}}function N6(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let a=rd(o);a!=null?(i(),r=[ed(o)],n=a):r.push(ed(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function L6(t){return{type:"primitive",insertionMode:rd(t.anchor)??"to",target:aM(t)}}function U6(t){return{type:"primitive",insertionMode:rd(t)??"to",target:td(t)}}function V6(){return{type:"implicit"}}function rd(t){switch(t.type){case"implicit":return"to";case"primitive":return B6(t);case"range":return rd(t.anchor)}}function B6(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function H6(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function cM(t){return{...t,version:7}}function tS(t){let e=W6(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Mf(r,o=>{let a=sl(o);KT(a),r.name}),usePrePhraseSnapshot:n}}function W6(t,e){if(t.version>7)throw new vu;for(;t.version<e;)switch(t.version){case 0:t=ZP(t);break;case 1:t=JP(t);break;case 2:t=eM(t);break;case 3:t=nM(t);break;case 4:t=oM(t);break;case 5:t=sM(t);break;case 6:t=cM(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var rS;function nd(t){rS=t}function D(){if(rS==null)throw Error("Tried to access ide before it was injected");return rS}var id=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var $6=25,od=class{constructor(){this.targetMap=new Map;this.targetHistory=new no(()=>new id($6));this.notifier=new Wt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of na)e(r,this.get(r));return this.notifier.registerListener(e)}};function oo(t,e){return new W(new ae(e.start.line,0),t.document.lineAt(e.end).range.end)}function nS(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function lM(t,e){let[r,n]=e instanceof ae?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Qo(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var sd=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=j6(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?q6(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=a=>this.updateRange(a,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Qo(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new W(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),a=o+r.length;return new W(this.editor.document.positionAt(o),this.editor.document.positionAt(a))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function q6(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let a=o.rangeTrimmed?.start??o.range.end;a.character<r&&(r=a.character,n=o.text.slice(0,r))}return n}function j6(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function so(t,e,r,n){return pl(t.contentRange,e.contentRange,r,n)}function pl(t,e,r,n){return new W(r?t.start:t.end,n?e.end:e.start)}function ua(t,e,r,n){let i=r?t.contentRange.start:new ae(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new W(i,o)}var Le=class t{constructor(e){this.isLine=!1;this.isToken=!0;this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.isWord=!1;this.joinAs="line";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return this.getRemovalRange()}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:so(this,r,!0,!0)})}isEqual(e){return e instanceof t&&yi(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new sd(this,e)}toPlainObject(){return{type:this.type,contentRange:qc(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function ad(t,e){return z6(t,e.start,e.end)}function z6(t,e,r){return{editor:t.editor,selection:G6(t.selection,e,r)}}function G6(t,e,r){return t.isReversed?new Te(r,e):new Te(e,r)}function cd(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,a=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,p=r.positionAt(a),u=r.positionAt(l);return new W(p,u)}function ld(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var He=class extends Le{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.isToken=r.isToken??!0,this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,isToken:this.isToken,insertionDelimiter:this.insertionDelimiter}}};function fa(t,e,r){return ld(He,t,e,r)}var pd=class extends Le{constructor(r){super(r);this.type="DocumentTarget";this.insertionDelimiter=`
`;this.isLine=!0}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getRemovalRange(){return this.contentRange}getInterior(){return[new He({editor:this.editor,isReversed:this.isReversed,contentRange:cd(this.editor,this.contentRange)})]}getCloneParameters(){return this.state}};var Nr=class t extends Le{constructor(){super(...arguments);this.type="LineTarget";this.insertionDelimiter=`
`;this.isLine=!0;this.getRemovalHighlightRange=()=>this.fullLineContentRange}get fullLineContentRange(){return oo(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return fa(this.editor,K6(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return fa(this.editor,Q6(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:ua(this,n,!0,!0)})}getCloneParameters(){return this.state}};function K6(t,e){let{start:r}=e;return r.line>0?new W(t.document.lineAt(r.line-1).range.end,e.start):void 0}function Q6(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new W(e.end,new ae(r.line+1,0)):void 0}function iS(t,e,r){return ld(Nr,t,e,r)}var ud=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var fd=class extends Le{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new ud(this,r)}};var da=class t extends Le{constructor(){super(...arguments);this.type="ParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0}getLeadingDelimiterTarget(){return iS(this.editor,Z6(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return iS(this.editor,Y6(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new Nr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return oo(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:ua(this,n,!0,!0)})}getCloneParameters(){return this.state}};function Z6(t,e){let{document:r}=t,n=r.lineAt(e.start),i=J6(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new W(new ae(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new W(new ae(0,0),r.lineAt(n.lineNumber-1).range.end)}function Y6(t,e){let{document:r}=t,n=r.lineAt(e.end),i=X6(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new W(new ae(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new W(new ae(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function J6(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function X6(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var ao=class extends Le{constructor(){super(...arguments);this.type="RawSelectionTarget";this.insertionDelimiter="";this.isRaw=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var ma=class t extends Le{constructor(r){super({...r,contentRange:cd(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:pl(this.fullInteriorRange,n.fullInteriorRange,!0,!0)})}};function dd(t){let e=Qo(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var e5=['"',"'","(","[","{","<"],t5=['"',"'",")","]","}",">",",",";",":"];function qn(t){let{editor:e}=t,{start:r}=Qo(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new He({contentRange:new W(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function jn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new He({contentRange:new W(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function zn(t){let{editor:e}=t,r=Qo(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),a=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=oo(e,r);return o.union(a).isRangeEqual(l)?l:!a.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||e5.includes(r5(e,r)))?r.union(a):!o.isEmpty&&(r.end.isEqual(l.end)||t5.includes(n5(e,r)))?r.union(o):r}function r5(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new W(r.translate(void 0,-1),r)):""}function n5(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new W(r.translate(void 0,1),r)):""}var co=class t extends Le{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.interiorRange_=r.interiorRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??i5(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new He({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return qn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new He({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return jn(this)}getInterior(){return this.interiorRange_==null?super.getInterior():[new ma({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?dd(this):zn(this)}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?pl(this.removalRange_??this.contentRange,n.removalRange_??n.contentRange,!0,!0):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:so(this,n,!0,!0)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function i5(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var md=class t extends Le{constructor(r){super(r);this.type="SubTokenWordTarget";this.isToken=!1;this.isWord=!0;this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return fa(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return fa(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return dd(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:so(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var gr=class extends Le{constructor(){super(...arguments);this.type="TokenTarget";this.insertionDelimiter=" ";this.joinAs="token"}getLeadingDelimiterTarget(){return qn(this)}getTrailingDelimiterTarget(){return jn(this)}getRemovalRange(){return zn(this)}getCloneParameters(){return this.state}};var hd=class extends Le{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return qn(this)}getTrailingDelimiterTarget(){return jn(this)}getRemovalRange(){return zn(this)}getInterior(){return[new ma({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new gr({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Pt=class extends Le{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.isToken=r.isToken??!0}getLeadingDelimiterTarget(){return qn(this)}getTrailingDelimiterTarget(){return jn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:zn(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,isToken:this.isToken,hasExplicitRange:this.hasExplicitRange}}};var gd=class extends Le{constructor(){super(...arguments);this.type="ImplicitTarget";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var yd=class extends Le{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:pM(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return qn(this)}getTrailingDelimiterTarget(){return jn(this)}getRemovalRange(){return zn(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new He({editor:this.editor,contentRange:pM(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function pM(t,e,r){return r?new W(e.start,t.end):new W(t.start,e.end)}var xd=class t extends Le{constructor(r){super({...r,contentRange:o5(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new Nr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return oo(this.editor,this.contentRange)}getRemovalHighlightRange(){if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function o5(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function Td(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var ha=class{run(){return Td(D()).map(e=>new Pt({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,isToken:!1}))}};var Gn=class{constructor(e,r){this.debouncer=new Tu(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var Sd=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Gn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new ha().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var vd=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var s5=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],a5=s5.map(Fr).join("|"),c5=["[a-zA-Z0-9]",a5].join("|"),l5=new RegExp(`^(${c5})$`,"u"),p5="[unk]",u5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,bd=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Wt;this.getTokenGraphemes=e=>en(e,u5,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;D().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(D().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=D().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=jx(o),l5.test(o)||(o=p5)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function Zo(){return oS==null&&(oS=new bd),oS}var oS;var uM=({penalty:t})=>-t;function fM(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function dM(t,e){let r=Dc(n=>Xx(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function sS(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function mM(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function hM(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=f5(r,n)}return r[0]}function f5(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function gM({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,a){return hM(a,[sS(i),mM(r),sS(o),fM(t),uM,dM(n,e)])}function yM(t,e,r){let n={},i=new ro(({grapheme:o,hatStyle:a})=>[o,a]);return t.forEach(({token:o,rank:a})=>{let l=e.get(o);l!=null&&i.set(l,a),r.getTokenGraphemes(o.text).forEach(({text:p})=>{let u;p in n?u=n[p]:(u=[],n[p]=u),u.push(a)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function xM(t,e=[]){return new Map(Zx(Je,xi)(Ic([e],t.visibleRanges.map(r=>eT(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function TM(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let a=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return a-l}}var d5=["-","+","*","/","=","<",">","_","#",".","|","&",":"],m5=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],h5=["\\p{L}","\\p{M}","\\p{N}"],g5="[^\\s\\w]",y5="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function x5(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:a}=t,l=r.map(Fr).map(x=>`${x}+`).join("|"),p=e.map(Fr).join("|"),d=`(${n.concat(i.map(Fr)).join("|")})+`,h=`(${n.join("|")})+`,g=[p,o,d,l,a].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(h,"gu"),tokenMatcher:new RegExp(g,"gu")}}var aS=new Map;function yr(t){let e=D().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!aS.has(r)){let n={fixedTokens:m5,repeatableSymbols:d5,identifierWordRegexes:h5,identifierWordDelimiters:e,numbersRegex:y5,singleSymbolsRegex:g5};aS.set(r,x5(n))}return aS.get(r)}function SM(t,e,r){return en(t,yr(e).tokenMatcher,r)}function vM(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return SM(n,r,o=>{let a=i+o.index,l=i+o.index+o[0].length,p=new W(t.document.positionAt(a),t.document.positionAt(l));return{editor:t,text:o[0],range:p,offsets:{start:a,end:l}}})}function bM(t,e,r){let i=S5(t,e).flatMap(o=>{let a=o.selections[0].active,l=xM(o,[a.line]),p=Je(o.visibleRanges.map(u=>vM(o,u).map(d=>({...d,displayLine:l.get(d.range.start.line)}))));return p.sort(TM(l.get(a.line),a.character)),p});return T5(r,i).map((o,a)=>({token:o,rank:-a}))}function T5(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function S5(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function cS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:a}){let l=r==null?void 0:wM(r),p=wM(n),u=bM(o,a,l),d=yM(u,p,t),h=Object.keys(e),g=new no(()=>[...h]);return u.map(({token:x,rank:b})=>{let w=v5(t,x,g,e),F=gM(d,i,b,l?.get(x),p.get(x),w);if(F!=null)return g.set(F.grapheme.text,g.get(F.grapheme.text).filter(M=>M!==F.style)),b5(x,F)}).filter(x=>x!=null)}function wM(t){let e=new ro(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function v5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text);for(let a of o)for(let l of r.get(a.text))i.push({grapheme:a,style:l,penalty:n[l].penalty});return i}function b5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new W(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var wd=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];D().disposeOnExit(this);let n=new Gn(D().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),D().onDidOpenTextDocument(n.run),D().onDidCloseTextDocument(n.run),D().onDidChangeActiveTextEditor(n.run),D().onDidChangeVisibleTextEditors(n.run),D().onDidChangeTextDocument(n.run),D().onDidChangeTextEditorSelection(n.run),D().onDidChangeTextEditorVisibleRanges(n.run),Zo().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:Zo().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?cS({tokenGraphemeSplitter:Zo(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:D().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:D().activeTextEditor,visibleTextEditors:D().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:a}})=>({editor:a,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var _d=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:a}=n,l=this.makeTokenLive(a);return this.map[el(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=yr(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[el(e,Zo().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var w5=6e4,Ed=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;D().disposeOnExit(this),this.activeMap=new _d(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new wd(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>w5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function lS(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var dS=ur(fl(),1);function mS(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:a,end:l}}=e;return(0,dS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,dS.invariant)(n>=a&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=a?a+o:Math.min(a,i),end:n<=l?l+o:Math.min(l,i)}}var MM=ur(fl(),1);function hS(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,MM.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let a=e.expansionBehavior.end;switch(a.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(lf(a.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let a=e.expansionBehavior.start;switch(a.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(cf(a.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var gS=ur(fl(),1);function yS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:a},text:l}=e;if((0,gS.invariant)(a>o,()=>"Selection range expected to be nonempty"),(0,gS.invariant)(n>=o&&n<=a,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<a)return{start:o,end:a+i};if(n===o){let p=e.expansionBehavior.start,u=a+i;switch(p.type){case"closed":return{start:o+i,end:u};case"open":return{start:o,end:u};case"regex":{let d=r+l,h=cf(p.regex),g=d.search(h);for(;g>r.length;)d=d.slice(0,g),g=d.search(h);return g===-1?{start:o,end:u}:{start:o+g,end:u}}}}else{let p=e.expansionBehavior.end,u=o;switch(p.type){case"closed":return{start:u,end:a};case"open":return{start:u,end:a+i};case"regex":{let d=l+r,h=lf(p.regex),g=d.match(h),x=g==null?0:g[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,g=d.match(h),x=g==null?0:x+g[0].length;return x===0?{start:u,end:a}:{start:u,end:o+x}}}}}function AM(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:a}=e.offsets,l=Math.min(n,o),p="";return o<n&&(p+=e.text.substring(0,n-o)),p+=t.event.text,i<a&&(p+=e.text.substring(a-i,e.text.length)),p.substring(r.start-l,r.end-l)}function DM(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let a=o.text.length-o.rangeLength,l=o.rangeOffset,p=l+o.rangeLength,u=l,d=p+a;return{displacement:a,event:o,originalOffsets:{start:l,end:p},finalOffsets:{start:u,end:d}}});for(let o of e){let a=o.offsets,l=i.map(u=>{let d;return u.originalOffsets.start>a.end?{start:0,end:0}:u.originalOffsets.end<a.start?{start:u.displacement,end:u.displacement}:(u.event.rangeLength===0?o.range.isEmpty?d=hS(u,o):d=yS(u,o):d=mS(u,o),o.text=AM(u,o,d),{start:d.start-a.start,end:d.end-a.end})}),p={start:a.start+tf(l,({start:u})=>u),end:a.end+tf(l,({end:u})=>u)};o.range=o.range.with(r.positionAt(p.start),r.positionAt(p.end)),o.offsets=p}}var kd=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return lS(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return lS(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>Xt(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>Xt(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=D().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>I5(r,i)?{...i,isReplace:!0}:i)};DM(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function I5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var Pd=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var Md=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var Ad=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var Dd=class{updateUserSnippets(){throw new Error("Snippets are not implemented.")}registerThirdPartySnippets(e,r){throw new Error("Snippets are not implemented.")}getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e){throw new Error("Snippets are not implemented.")}};var Id=class{getSpokenFormEntries(){throw new ca}onDidChange(){return{dispose:()=>{}}}};var Fd=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getLanguage(e){throw new Error("Tree sitter not provided")}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}};var Ge=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var IM={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var FM=new ro(t=>t);for(let[t,e]of Object.entries(IM))e!=null&&FM.set(e,t);function CM(t,e,r){let n=FM.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}var F5={ifStatement:"if",ifElseStatement:"if else",tryCatchStatement:"try",functionDeclaration:"funk",link:"link"},C5={"ifElseStatement.alternative":"else","functionDeclaration.body":"funk","ifElseStatement.consequence":"if else","ifStatement.consequence":"if","tryCatchStatement.body":"try","link.text":"link"};function OM(t){if(t.type==="custom")throw new Ge("Custom insertion snippet");let e=F5[t.name];if(e==null)throw new Ge(`Named insertion snippet '${t.name}'`);if(t.substitutions!=null){let r=Object.values(t.substitutions);return`${e} ${r.join(" ")}`}return e}function NM(t){if(t.type==="custom")throw new Ge("Custom wrap with snippet");let e=`${t.name}.${t.variableName}`,r=C5[e];if(r==null)throw new Ge(`Named wrap with snippet '${e}'`);return r}function dl(t,e,r){let n=r==="vertical"?`${ut.verticalRange} `:"";if(t&&e)return n+ut.rangeExclusive;if(t)throw new Ge("Range exclude anchor");return e?n+ut.rangeExcludingEnd:r==="vertical"?ut.verticalRange:ut.rangeInclusive}function LM(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var O5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],N5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function ga(t){let e=O5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function ml(t){let e=N5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Cd=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new Ge(`Modifier '${e.type}'`);case"containingScope":if(e.ancestorIndex==null||e.ancestorIndex===0)return this.handleScopeType(e.scopeType);if(e.ancestorIndex===1)return[this.spokenFormMap.modifierExtra.ancestor,this.handleScopeType(e.scopeType)];throw new Ge(`Modifier '${e.type}' with ancestor index ${e.ancestorIndex}`);case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,ml(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,ml(e.start+1),r];let i=ga(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,hl(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,hl(r)];throw new Ge(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:ml(e.anchor.start+1),n=this.handleModifier(e.active),i=dl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let a=e.direction==="forward"?ut.forward:ut.backward;return[n,r,a]}let i=ga(e.length),o=hl(r);return e.direction==="forward"?[n,i,o]:[n,i,o,ut.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?ut.next:ut.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=ga(e.length);if(e.length===1)return[i,n,r];let a=hl(r);return[i,n,o,a]}if(e.length===1){let o=ml(e.offset);return[i,o,n,r]}throw new Ge(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new Ge(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,VM(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(IP(r)),n!=null&&i.push(FP(n)),i.push(VM(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let a=dl(e.excludeAnchor,e.excludeActive);return[r,n,a,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new Ge(`Mark '${e.type}'`);default:return[zf[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new Ge("Absolute line numbers");case"modulo100":return[Gf.modulo100,ga(e.lineNumber+1)];case"relative":return[e.lineNumber<0?Gf.relativeUp:Gf.relativeDown,ga(Math.abs(e.lineNumber))]}}};function hl(t){if(typeof t=="string")return UM(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),hl(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(UM)}}}function UM(t){return`${t}s`}function VM(t,e,r){let n=t[r];if(n==null)throw new Ge(`${e} '${r}'`);return n}var ya=class{constructor(e){this.spokenFormMap=LM(e),this.primitiveGenerator=new Cd(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new Ge(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:BM(e())}}catch(r){if(r instanceof Ge)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new Ge(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),ut.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[CM(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],OM(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new Ge(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[NM(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new Ge(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new Ge("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[ut.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=dl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new Ge("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[ut.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return ut.sourceDestinationConnective;case"before":return ut.before;case"after":return ut.after}}};function BM(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:HM(t.map(BM)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${Yc(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new Ge(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function HM(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=HM(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Od=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Wt;this.spokenFormMap_={...bi};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps().catch(()=>{})),this.customSpokenFormsInitialized=this.updateSpokenFormMaps(),this.customSpokenFormsInitialized.catch(()=>{})}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof Zc)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof ca)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");nt(D().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}throw this.spokenFormMap_={...bi},this.notifier.notifyListeners(),r}for(let r of zk)L5(this.spokenFormMap_,r,qT[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function L5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let a of i){let{defaultSpokenForms:l=[],isPrivate:p=!1}=r[a]??{},u=n[a];o[a]=u==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!p,isCustom:!1,isPrivate:p}:{defaultSpokenForms:l,spokenForms:u,requiresTalonUpdate:!1,isCustom:!yi(l,u),isPrivate:p}}t[e]=o}var Nd=class{constructor(e){this.customSpokenForms=new Od(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new ya(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new ya(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*U5(t){for(let e of t)for(let r of e)yield r}function*gl(t,e){let r=Ld(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*xS(t){let e=Ld(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var rbe=Symbol();function*V5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*$M(t,e){for(let r of t)e(r)&&(yield r)}function*Lt(t,e){for(let r of t)yield e(r)}function*qM(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let a=-1,l=Ld(t),p;for(;;){if(a++,o!==null&&a>=o||(p=l.next(),p.done))return;a<i||(a-i)%n===0&&(yield p.value)}}function*B5(t,e){let r=Ld(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function Ld(t){return t[Symbol.iterator]()}function xa(t,e){return Array.from(Lt(t,e))}function WM(t,e,r){let n=V5(t,r),i=r>=0?o=>o<e:o=>o>e;return B5(n,i)}function jM(t,e,r=1){return e!==void 0?WM(t,e,r):WM(0,t,r)}function Ud(t,e){return U5(Lt(t,e))}function kn(t,e,{domain:r},{domain:n}){return t==="forward"?H5(e,r,n):W5(e,r,n)}function H5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let a=e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&!i){let a=e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&i){let a=e.end.compareTo(r.start);return a!==0?a:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function W5(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let a=-e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&!i){let a=-e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&i){let a=-e.start.compareTo(r.end);return a!==0?a:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function zM(t,e,r,n,i,o){return $5(t,n,i,o)&&(i==null||kn(r,n.includeDescendantScopes?t:e,i,o)<0)}function $5(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:a,skipAncestorScopes:l}=e,{domain:p}=n;switch(i){case"disallowed":if(p.contains(t))return!1;break;case"disallowedIfStrict":if(lM(p,t))return!1;break;case"required":if(!p.contains(t))return!1;break}return l&&r!=null&&p.contains(r.domain)?!1:q5(new W(t,o),p,a)}function q5(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var j5={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},yt=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...j5,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},a,l=r;for(let p of this.generateScopeCandidates(e,r,n,o))if(zM(r,l,n,o,a,p)&&(yield p,a=p,l=n==="forward"?p.domain.end:p.domain.start),this.canStopEarly(r,n,o,a,p))return}canStopEarly(e,r,n,i,o){let{containment:a,distalPosition:l,skipAncestorScopes:p}=n;if(this.isHierarchical&&!p)return!1;let u=this.isHierarchical&&p?i:o;return u==null?!1:!!(a==="required"&&(r==="forward"?u.domain.end.isAfter(e):u.domain.start.isBefore(e))||(r==="forward"?u.domain.end.isAfterOrEqual(l):u.domain.start.isBeforeOrEqual(l)))}};var xr=class extends yt{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:a,...l}=o,p=this.searchScopeHandler.generateScopes(r,n,i,{containment:a==="required"?"required":void 0,...l});return Ud(p,u=>this.generateScopesInSearchScope(i,u))}};var Vd=class extends yt{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield GM(r,o);else for(let o=n.line;o>=0;o--)yield GM(r,o)}};function GM(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[TS(t,n,r)]}}function TS(t,e,r){return new Nr({editor:t,isReversed:e,contentRange:yl(t,r)})}function yl(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new W(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function sn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),a=l=>new W(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Lt(o.matchAll(t),a):Array.from(o.matchAll(t),a).reverse()}var Bd=class extends xr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=yr(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(sn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new gr({editor:n,contentRange:o,isReversed:a})]}))}};function Hd(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let a=Vc(o,n),l=Vc(o,i);if(a&&!l)return!0;if(l&&!a)return!1}}var z5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,G5=/[$]/g,K5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Wd=class extends xr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(sn(z5,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new He({editor:n,contentRange:o,isReversed:a,isToken:!1})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=yr(this.languageId);return Hd(r,n,[i,G5,K5])}};var Q5=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,$d=class{constructor(e){this.wordRegex=yr(e).wordMatcher}splitIdentifier(e){let r=Bc(e,this.wordRegex);return r.length>1?r:Bc(e,Q5)}};var qd=class extends xr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new $d(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(p=>new W(i.positionAt(o+p.index),i.positionAt(o+p.index+p.text.length)));return l.map((p,u)=>({editor:r,domain:p,getTargets:d=>{let h=u>0?l[u-1]:null,g=u+1<l.length?l[u+1]:null;return[Z5(d,r,h,p,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function Z5(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new W(r.end,n.start):void 0,a=i!=null&&i.start.isAfter(n.end)?new W(n.end,i.start):void 0,p=o!=null||a!=null?e.document.getText(o??a):"";return new md({editor:e,isReversed:t,contentRange:n,insertionDelimiter:p,leadingDelimiterRange:o,trailingDelimiterRange:a})}var Y5=/[$]/g,jd=class extends xr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=yr(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(sn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new gr({editor:n,contentRange:o,isReversed:a})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=yr(this.languageId);return Hd(r,n,[i,Y5])}};var zd=class extends yt{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:a=>[new pd({editor:r,isReversed:a,contentRange:o})]}}};function KM(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Ta=class extends yt{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:a}=r,l=this.query.matches(a).map(p=>this.matchToScope(r,p)).filter(p=>p!=null).sort((p,u)=>kn(i,n,p,u));yield*KM(l,(p,u)=>p.domain.isRangeEqual(u.domain),p=>p.length===1?p[0]:{...p[0],getTargets(u){let d=Cc(p.flatMap(h=>h.getTargets(u)),(h,g)=>h.isEqual(g));if(d.length>1&&!p.every(h=>h.allowMultiple)){let h="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(nt(D().messages,"BaseTreeSitterScopeHandler.allow-multiple",h),D().runMode==="test")throw Error(h)}return d}})}};function SS(t,e,r,n){return n?Sa(t,`${e}.${r}`,`_.${r}`):Sa(t,`${e}.${r}`)??(Sa(t,e)!=null?Sa(t,`_.${r}`):void 0)}function Ei(t,e,r,n){return SS(t,e,r,n)?.range}function Sa(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var Gd=class extends Ta{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n){let i=this.iterateeScopeType.type,o=SS(n,i,"iteration",!1);if(o==null)return;let{range:a,allowMultiple:l}=o,p=Ei(n,i,"iteration.domain",!1)??a;return{editor:r,domain:p,allowMultiple:l,getTargets:u=>[new He({editor:r,isReversed:u,contentRange:a})]}}};var Kd=class extends Ta{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new Gd(this.query,this.scopeType)}}matchToScope(r,n){let i=this.scopeType.type,o=Sa(n,i);if(o==null)return;let{range:a,allowMultiple:l,insertionDelimiter:p}=o,u=Ei(n,i,"domain",!0)??a,d=Ei(n,i,"removal",!0),h=Ei(n,i,"interior",!0),g=Ei(n,i,"prefix",!0)?.with(void 0,a.start),x=Ei(n,i,"leading",!0)?.with(void 0,g?.start??a.start),b=Ei(n,i,"trailing",!0)?.with(a.end);return{editor:r,domain:u,allowMultiple:l,getTargets:w=>[new co({scopeTypeType:i,editor:r,isReversed:w,contentRange:a,prefixRange:g,removalRange:d,leadingDelimiterRange:x,trailingDelimiterRange:b,interiorRange:h,insertionDelimiter:p})]}}};function QM(t){return t.flatMap(e=>{let{value:r,done:n}=e.next();return n?[]:[{iterator:e,value:r}]})}function ZM(t,e){return t.flatMap(r=>{let{iterator:n}=r,{value:i}=r,o=!1;for(;!o&&!e(i);)({value:i,done:o}=n.next());return o?[]:[{iterator:n,value:i}]})}var Qd=class t extends yt{constructor(r,n,i){super();this.scopeType=r;this.scopeHandlers=n;this.getIterationScopeType=i;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(l=>{let p=r.create(l,i);if(p==null)throw new Error(`No available scope handler for '${l.type}'`);return p}),a=()=>({type:"custom",scopeHandler:new t(void 0,o.map(l=>r.create(l.iterationScopeType,i)),()=>{throw new Error("Not implemented")})});return new t(n,o,a)}get iterationScopeType(){return this.getIterationScopeType()}*generateScopeCandidates(r,n,i,o){let a=this.scopeHandlers.map(p=>p.generateScopes(r,n,i,o)[Symbol.iterator]()),l=QM(a);for(;l.length>0;){l.sort((u,d)=>kn(i,n,u.value,d.value));let p=l[0].value;yield p,l=ZM(l,u=>kn(i,n,p,u)<0)}}};var Zd=class extends yt{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,a=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,p=J5(o,n,i),u=r.document.lineAt(n);for(let d=n.line+a;d!==l;d+=a){let h=r.document.lineAt(d);h.isEmptyOrWhitespace?p!=null&&(yield YM(r,p.range.union(u.range)),p=void 0):p==null&&(p=h),u=h}p!=null&&(yield YM(r,p.range.union(u.range)))}};function J5(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let a=e.line+n;a!==i;a+=n){let l=t.lineAt(a);if(l.isEmptyOrWhitespace)break;o=l}return o}}function YM(t,e){return{editor:t,domain:e,getTargets:r=>[new da({editor:t,isReversed:r,contentRange:yl(t,e)})]}}function xl(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function JM(t,e){return t.slice(t.length-e.length)===e}var vS,e9=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function XM(t){t?vS=t:vS=e9}function bS(t){return/^[A-Z][a-z].*/.test(t)||Yd(t)}function eA(t){return bS(t)||/``|"|'/.test(t.substring(0,2))}function tA(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~vS.indexOf(e)}function rA(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function wS(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function nA(t){return t.length<=3?!0:bS(t)}function _S(t,e){return e.length>0?t<5&&e[0].length<6&&bS(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function Yd(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function iA(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function oA(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function sA(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function aA(t){return t==="."||t==="!"||t==="?"}var lA=" @~@ ",cA=lA.trim(),r9=new RegExp("\\S",""),n9=new RegExp("\\n+|[-#=_+*]{4,}","g"),i9=new RegExp("\\S+|\\n","g"),o9={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function pA(t,e){if(!t)return[];if(!r9.test(t))return[];let r={...o9,...e};XM(r.abbreviations),r.newlineBoundaries&&(t=t.replace(n9,lA));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(h,g){return g%2})):n=t.trim().match(i9)??[];let o=0,a=0,l=[],p=[],u=[];if(!n||!n.length)return[];for(let h=0,g=n.length;h<g;h++){if(o++,u.push(n[h]),~n[h].indexOf(",")&&(o=0),aA(n[h])||xl(n[h],"?!")||n[h]===cA){r.newlineBoundaries&&n[h]===cA&&u.pop(),p.push(u),o=0,u=[];continue}if((xl(n[h],'"')||xl(n[h],"\u201D"))&&(n[h]=n[h].slice(0,-1)),xl(n[h],".")){if(h+1<g){if(n[h].length===2&&isNaN(n[h].charAt(0))||tA(n[h]))continue;if(eA(n[h+1])){if(rA(n[h],n[h+1])||_S(o,n.slice(h,6))||Yd(n[h+1])&&nA(n[h]))continue}else if(JM(n[h],"..")||wS(n[h])||_S(o,n.slice(h,5)))continue}p.push(u),u=[],o=0;continue}(a=n[h].indexOf("."))>-1&&(Yd(n[h],a)||wS(n[h])||oA(n[h])||iA(n[h]))||(l=sA(n[h]))&&(u.pop(),u.push(l[0]),p.push(u),u=[],o=0,u.push(l[1]))}return u.length&&p.push(u),p=p.filter(function(h){return h.length>0}),p.slice(1).reduce(function(h,g){let x=h[h.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(h.pop(),h.push(x.concat(g)),h):(h.push(g),h)},[p[0]]).map(function(h,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=h.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return h.join(" ")})}var s9=/\S*\p{L}/u,uA=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,a9={newlineBoundaries:!1,preserveWhitespace:!0},Jd=class{*segment(e){let r=pA(e,a9),n=0;for(let i of r){let o=i.split(uA).filter(a=>a!=null);for(let a of o){if(!l9(a)){let l=c9(a,n);l!=null&&(yield l)}n+=a.length}}}};function c9(t,e){let r=GR(s9,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function l9(t){return Vc(uA,t)}var Xd=class extends xr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new Jd}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),a=n.document.getText(i),l=u=>{let d=new W(n.document.positionAt(o+u.index),n.document.positionAt(o+u.index+u.text.length));return{editor:n,domain:d,getTargets:h=>[new gr({editor:n,contentRange:d,isReversed:h})]}},p=this.segmenter.segment(a);return r==="forward"?Lt(p,l):Array.from(p,l).reverse()}};var va=class extends xr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(sn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new gr({editor:n,contentRange:o,isReversed:a})]}))}},em=class extends va{constructor(){super(...arguments);this.regex=/\S+/g}},tm=class extends va{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},rm=class extends va{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},nm=class extends va{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Fr(this.scopeType.character),"gui")}};var im=class extends yt{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){if(this.targetScopeHandler.iterationScopeType.type==="custom")throw Error("Iteration scope type can't be custom for BoundedBaseScopeHandler");return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let a=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment==null&&o.skipAncestorScopes?"required":o.containment}));for(let p of a){let u=[];for(let d of l){let h=p.domain.intersection(d.domain);h!=null&&!h.isEmpty&&u.push({editor:r,domain:h,getTargets:g=>[this.getTargets(fA(p,g),fA(d,g))]})}u.push(p),u.sort((d,h)=>kn(i,n,d,h)),yield*u}}};function fA(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var om=class extends im{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new gr({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},sm=class extends im{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof da))throw Error("Expected ParagraphTarget");return new xd({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var am=class extends yt{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let a=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of a)this.scopeType.requireSingleLine&&!l.domain.isSingleLine||(yield{editor:r,domain:l.domain,getTargets(p){return l.getTargets(p).flatMap(u=>u.getInterior())}})}};function dA(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new W(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:a=>[new hd({editor:t,isReversed:a,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function mA(t){let e=xi(t.map(({text:r})=>r)).map(Fr).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function hA(t,e,r){if(r.length===0)return[];let n=mA(r),i=t?.getCaptures(e,"disqualifyDelimiter")??[],o=t?.getCaptures(e,"textFragment")??[],a=Object.fromEntries(r.map(p=>[p.text,p])),l=e.getText();return en(l,n,p=>{let u=p[0],d=new W(e.positionAt(p.index),e.positionAt(p.index+u.length)),h=i.some(x=>x.range.contains(d)&&!x.hasError()),g=o.find(x=>x.range.contains(d))?.range;return{delimiterInfo:a[u],isDisqualified:h,textFragmentRange:g,range:d}})}var lm=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],backtickQuotes:["`","`"],curlyBrackets:[["{","${"],"}"],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),cm=["","r","u","R","U","f","F","fr","Fr","fR","FR","rf","rF","Rf","RF","b","B","br","Br","bR","BR","rb","rB","Rb","RB"],gA={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{singleQuotes:[cm.map(t=>`${t}'`),"'",{isSingleLine:!0,isUnknownSide:!0}],doubleQuotes:[cm.map(t=>`${t}"`),'"',{isSingleLine:!0,isUnknownSide:!0}],tripleSingleQuotes:[cm.map(t=>`${t}'''`),"'''",{isUnknownSide:!0}],tripleDoubleQuotes:[cm.map(t=>`${t}"""`),'"""',{isUnknownSide:!0}]},ruby:{tripleDoubleQuotes:["%Q(",")"]}},c_e=Object.fromEntries(Object.values(lm)),yA={any:Si(lm),string:["tripleDoubleQuotes","tripleSingleQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function xA(t){return t!=null&&t in gA?{...lm,...gA[t]}:lm}function TA(t,e){let r=yA[t]??[t];return p9(e,r)}function p9(t,e){let r=xA(t);return e.flatMap(n=>{let[i,o,a]=r[n],{isSingleLine:l=!1,isUnknownSide:p=!1}=a??{},u=Jc(i)?[i]:i,d=Jc(o)?[o]:o;return xi(Ic(u,d)).map(g=>{let x=u.includes(g),b=d.includes(g);return{text:g,side:p?"unknown":x&&!b?"left":!x&&b?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function SA(t){let e=[],r=new no(()=>[]);for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:a},isDisqualified:l,textFragmentRange:p,range:u}=n;if(l)continue;let d=r.get(i);a&&(d=d.filter(g=>g.range.start.line===u.start.line),r.set(i,d));let h=d.filter(g=>p==null&&g.textFragmentRange==null||p!=null&&g.textFragmentRange!=null&&g.textFragmentRange.isRangeEqual(p));if(o==="left"||o==="unknown"&&h.length%2===0)d.push(n);else{let g=h.at(-1);if(g==null)continue;d.splice(d.lastIndexOf(g),1),e.push({delimiterName:i,openingDelimiterRange:g.range,closingDelimiterRange:u})}}return e}var pm=class extends yt{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){nt(D().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let a=hA(this.languageDefinitions.get(this.languageId),r.document,TA(this.scopeType.delimiter,this.languageId)),l=SA(a);l=u9(i,o,n,l),yield*l.map(p=>dA(r,p,this.scopeType.requireStrongContainment??!1)).sort((p,u)=>kn(i,n,p,u))}};function u9(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var ba=class{constructor(e){this.languageDefinitions=e;this.create=this.create.bind(this)}create(e,r){switch(e.type){case"character":return new Wd(this,e,r);case"word":return new qd(this,e,r);case"token":return new jd(this,e,r);case"identifier":return new Bd(this,e,r);case"line":return new Vd(e,r);case"sentence":return new Xd(this,e,r);case"paragraph":return new Zd(e,r);case"boundedParagraph":return new sm(this,e,r);case"document":return new zd(e,r);case"oneOf":return Qd.create(this,e,r);case"nonWhitespaceSequence":return new em(this,e,r);case"boundedNonWhitespaceSequence":return new om(this,e,r);case"url":return new tm(this,e,r);case"customRegex":return new rm(this,e,r);case"glyph":return new nm(this,e,r);case"surroundingPair":return new pm(this.languageDefinitions,e,r);case"surroundingPairInterior":return new am(this,e,r);case"custom":return e.scopeHandler;case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}};function an(t,e){return new W(t.row,t.column,e.row,e.column)}function ES(t){return new ae(t.row,t.column)}function vA(t){return new W(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function bA(t,e){return new Te(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function Qn(t,e){return{selection:new Te(new ae(e.startPosition.row,e.startPosition.column),new ae(e.endPosition.row,e.endPosition.column)),context:{}}}function f9(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new Te(new ae(i.startPosition.row,i.startPosition.column),new ae(o.endPosition.row,o.endPosition.column)),context:{}}}function wA(){return Tl(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function _A(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new Te(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function EA(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=an(i.endPosition,r.startPosition):o=an(n.startPosition,r.startPosition):o=an(n.endPosition,r.startPosition)),{...Qn(e,r),context:{leadingDelimiterRange:o}}}}function Zn(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,a=new Set(t),l=new Set(e);return o=o.filter(p=>a.size>0?!a.has(p.type):l.size>0?l.has(p.type):!0),f9(n,o[0],o[o.length-1])}}function RA(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=an(r.endPosition,i.startPosition):o=an(r.endPosition,n.endPosition):o=an(r.endPosition,n.startPosition)),{...Qn(e,r),context:{trailingDelimiterRange:o}}}}function d9(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function m9(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function Tl(t,e,r=Ht,n=Ht){return(i,o)=>{let a,l,p=r(o),u=n(o),d=m9(p,t),h=d9(u,t);d!=null&&(a=an(d.endPosition,p.startPosition)),h!=null&&(l=an(u.endPosition,h.startPosition));let g=h9(i,a,l,e);return{selection:new Te(new ae(p.startPosition.row,p.startPosition.column),new ae(u.endPosition.row,u.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:a,trailingDelimiterRange:l}}}}function h9(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return Jx(o,"length")}function kA(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:p})=>p.endsWith(".start")).map(({range:{end:p}})=>p).sort((p,u)=>p.compareTo(u)).at(-1),i=t.filter(({name:p})=>p.endsWith(".end")).map(({range:{start:p}})=>p).sort((p,u)=>p.compareTo(u)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(nt(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:p})=>p.endsWith(".start")).length,a=t.filter(({name:p})=>p.endsWith(".end")).length,l=t.length-o-a;return l>0&&(o>0||a>0)&&(nt(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),l>1&&(nt(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),!r}function PA(t){let e=t;for(;e!=null;){if(e.hasError)return!0;e=e.parent}return!1}var Ue;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(let l of o)a[l]=i[l];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ue||(Ue={}));var kS;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(kS||(kS={}));var J=Ue.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),po=t=>{switch(typeof t){case"undefined":return J.undefined;case"string":return J.string;case"number":return isNaN(t)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(t)?J.array:t===null?J.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?J.promise:typeof Map<"u"&&t instanceof Map?J.map:typeof Set<"u"&&t instanceof Set?J.set:typeof Date<"u"&&t instanceof Date?J.date:J.object;default:return J.unknown}},G=Ue.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),g9=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Lr=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let l=n,p=0;for(;p<a.path.length;){let u=a.path[p];p===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(a))):l[u]=l[u]||{_errors:[]},l=l[u],p++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ue.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Lr.create=t=>new Lr(t);var Sl=(t,e)=>{let r;switch(t.code){case G.invalid_type:t.received===J.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ue.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ue.joinValues(t.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ue.joinValues(t.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${Ue.joinValues(t.options)}, received '${t.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ue.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case G.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case G.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ue.assertNever(t)}return{message:r}},DA=Sl;function y9(t){DA=t}function fm(){return DA}var dm=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o},l="",p=n.filter(u=>!!u).slice().reverse();for(let u of p)l=u(a,{data:e,defaultError:l}).message;return{...i,path:o,message:i.message||l}},x9=[];function ee(t,e){let r=dm({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,fm(),Sl].filter(n=>!!n)});t.common.issues.push(r)}var qt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return ye;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r)n.push({key:await i.key,value:await i.value});return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return ye;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},ye=Object.freeze({status:"aborted"}),IA=t=>({status:"dirty",value:t}),tr=t=>({status:"valid",value:t}),PS=t=>t.status==="aborted",MS=t=>t.status==="dirty",vl=t=>t.status==="valid",mm=t=>typeof Promise<"u"&&t instanceof Promise,ce;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(ce||(ce={}));var cn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},MA=(t,e)=>{if(vl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Lr(t.common.issues);return this._error=r,this._error}}};function Se(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,l)=>a.code!=="invalid_type"?{message:l.defaultError}:typeof l.data>"u"?{message:n??l.defaultError}:{message:r??l.defaultError},description:i}}var ve=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return po(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:po(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new qt,ctx:{common:e.parent.common,data:e.data,parsedType:po(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(mm(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:po(e)},o=this._parseSync({data:e,path:i.path,parent:i});return MA(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:po(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(mm(i)?i:Promise.resolve(i));return MA(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let a=e(i),l=()=>o.addIssue({code:G.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(p=>p?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Ur({schema:this,typeName:fe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Pn.create(this,this._def)}nullable(){return Pi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ki.create(this,this._def)}promise(){return mo.create(this,this._def)}or(e){return is.create([this,e],this._def)}and(e){return os.create(this,e,this._def)}transform(e){return new Ur({...Se(this._def),schema:this,typeName:fe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new ps({...Se(this._def),innerType:this,defaultValue:r,typeName:fe.ZodDefault})}brand(){return new xm({typeName:fe.ZodBranded,type:this,...Se(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Pa({...Se(this._def),innerType:this,catchValue:r,typeName:fe.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return bl.create(this,e)}readonly(){return Aa.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},T9=/^c[^\s-]{8,}$/i,S9=/^[a-z][a-z0-9]*$/,v9=/^[0-9A-HJKMNP-TV-Z]{26}$/,b9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,w9=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",RS,E9=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,R9=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,k9=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function P9(t,e){return!!((e==="v4"||!e)&&E9.test(t)||(e==="v6"||!e)&&R9.test(t))}var uo=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:J.string,received:o.parsedType}),ye}let n=new qt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?ee(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&ee(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")w9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"email",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")RS||(RS=new RegExp(_9,"u")),RS.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"emoji",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")b9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"uuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")T9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"cuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")S9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"cuid2",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")v9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"ulid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ee(i,{validation:"url",code:G.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"regex",code:G.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?k9(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="ip"?P9(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"ip",code:G.invalid_string,message:o.message}),n.dirty()):Ue.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:G.invalid_string,...ce.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...ce.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...ce.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ce.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ce.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ce.errToObj(r)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};uo.create=t=>{var e;return new uo({checks:[],typeName:fe.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Se(t)})};function M9(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}var Jo=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:J.number,received:o.parsedType}),ye}let n,i=new qt;for(let o of this._def.checks)o.kind==="int"?Ue.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:G.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?M9(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_finite,message:o.message}),i.dirty()):Ue.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ue.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Jo.create=t=>new Jo({checks:[],typeName:fe.ZodNumber,coerce:t?.coerce||!1,...Se(t)});var Xo=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==J.bigint){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:J.bigint,received:o.parsedType}),ye}let n,i=new qt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ue.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Xo.create=t=>{var e;return new Xo({checks:[],typeName:fe.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Se(t)})};var es=class extends ve{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:J.boolean,received:n.parsedType}),ye}return tr(e.data)}};es.create=t=>new es({typeName:fe.ZodBoolean,coerce:t?.coerce||!1,...Se(t)});var ts=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:J.date,received:o.parsedType}),ye}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_date}),ye}let n=new qt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ue.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};ts.create=t=>new ts({checks:[],coerce:t?.coerce||!1,typeName:fe.ZodDate,...Se(t)});var _a=class extends ve{_parse(e){if(this._getType(e)!==J.symbol){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:J.symbol,received:n.parsedType}),ye}return tr(e.data)}};_a.create=t=>new _a({typeName:fe.ZodSymbol,...Se(t)});var rs=class extends ve{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:J.undefined,received:n.parsedType}),ye}return tr(e.data)}};rs.create=t=>new rs({typeName:fe.ZodUndefined,...Se(t)});var ns=class extends ve{_parse(e){if(this._getType(e)!==J.null){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:J.null,received:n.parsedType}),ye}return tr(e.data)}};ns.create=t=>new ns({typeName:fe.ZodNull,...Se(t)});var fo=class extends ve{constructor(){super(...arguments),this._any=!0}_parse(e){return tr(e.data)}};fo.create=t=>new fo({typeName:fe.ZodAny,...Se(t)});var Ri=class extends ve{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tr(e.data)}};Ri.create=t=>new Ri({typeName:fe.ZodUnknown,...Se(t)});var Mn=class extends ve{_parse(e){let r=this._getOrReturnCtx(e);return ee(r,{code:G.invalid_type,expected:J.never,received:r.parsedType}),ye}};Mn.create=t=>new Mn({typeName:fe.ZodNever,...Se(t)});var Ea=class extends ve{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:J.void,received:n.parsedType}),ye}return tr(e.data)}};Ea.create=t=>new Ea({typeName:fe.ZodVoid,...Se(t)});var ki=class t extends ve{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==J.array)return ee(r,{code:G.invalid_type,expected:J.array,received:r.parsedType}),ye;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(a||l)&&(ee(r,{code:a?G.too_big:G.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ee(r,{code:G.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ee(r,{code:G.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,l)=>i.type._parseAsync(new cn(r,a,r.path,l)))).then(a=>qt.mergeArray(n,a));let o=[...r.data].map((a,l)=>i.type._parseSync(new cn(r,a,r.path,l)));return qt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:ce.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:ce.toString(r)}})}nonempty(e){return this.min(1,e)}};ki.create=(t,e)=>new ki({type:t,minLength:null,maxLength:null,exactLength:null,typeName:fe.ZodArray,...Se(e)});function wa(t){if(t instanceof Tr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Pn.create(wa(n))}return new Tr({...t._def,shape:()=>e})}else return t instanceof ki?new ki({...t._def,type:wa(t.element)}):t instanceof Pn?Pn.create(wa(t.unwrap())):t instanceof Pi?Pi.create(wa(t.unwrap())):t instanceof Yn?Yn.create(t.items.map(e=>wa(e))):t}var Tr=class t extends ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Ue.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==J.object){let u=this._getOrReturnCtx(e);return ee(u,{code:G.invalid_type,expected:J.object,received:u.parsedType}),ye}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof Mn&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||l.push(u);let p=[];for(let u of a){let d=o[u],h=i.data[u];p.push({key:{status:"valid",value:u},value:d._parse(new cn(i,h,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Mn){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of l)p.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(ee(i,{code:G.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of l){let h=i.data[d];p.push({key:{status:"valid",value:d},value:u._parse(new cn(i,h,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of p){let h=await d.key;u.push({key:h,value:await d.value,alwaysSet:d.alwaysSet})}return u}).then(u=>qt.mergeObjectSync(n,u)):qt.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,a,l;let p=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=ce.errToObj(e).message)!==null&&l!==void 0?l:p}:{message:p}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:fe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Ue.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Ue.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return wa(this)}partial(e){let r={};return Ue.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Ue.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof Pn;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return FA(Ue.objectKeys(this.shape))}};Tr.create=(t,e)=>new Tr({shape:()=>t,unknownKeys:"strip",catchall:Mn.create(),typeName:fe.ZodObject,...Se(e)});Tr.strictCreate=(t,e)=>new Tr({shape:()=>t,unknownKeys:"strict",catchall:Mn.create(),typeName:fe.ZodObject,...Se(e)});Tr.lazycreate=(t,e)=>new Tr({shape:t,unknownKeys:"strip",catchall:Mn.create(),typeName:fe.ZodObject,...Se(e)});var is=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let a=o.map(l=>new Lr(l.ctx.common.issues));return ee(r,{code:G.invalid_union,unionErrors:a}),ye}if(r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let p of n){let u={...r,common:{...r.common,issues:[]},parent:null},d=p._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=a.map(p=>new Lr(p));return ee(r,{code:G.invalid_union,unionErrors:l}),ye}}get options(){return this._def.options}};is.create=(t,e)=>new is({options:t,typeName:fe.ZodUnion,...Se(e)});var um=t=>t instanceof ss?um(t.schema):t instanceof Ur?um(t.innerType()):t instanceof as?[t.value]:t instanceof cs?t.options:t instanceof ls?Object.keys(t.enum):t instanceof ps?um(t._def.innerType):t instanceof rs?[void 0]:t instanceof ns?[null]:null,hm=class t extends ve{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.object)return ee(r,{code:G.invalid_type,expected:J.object,received:r.parsedType}),ye;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(ee(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ye)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=um(o.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of a){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:fe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Se(n)})}};function AS(t,e){let r=po(t),n=po(e);if(t===e)return{valid:!0,data:t};if(r===J.object&&n===J.object){let i=Ue.objectKeys(e),o=Ue.objectKeys(t).filter(l=>i.indexOf(l)!==-1),a={...t,...e};for(let l of o){let p=AS(t[l],e[l]);if(!p.valid)return{valid:!1};a[l]=p.data}return{valid:!0,data:a}}else if(r===J.array&&n===J.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],l=e[o],p=AS(a,l);if(!p.valid)return{valid:!1};i.push(p.data)}return{valid:!0,data:i}}else return r===J.date&&n===J.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var os=class extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,a)=>{if(PS(o)||PS(a))return ye;let l=AS(o.value,a.value);return l.valid?((MS(o)||MS(a))&&r.dirty(),{status:r.value,value:l.data}):(ee(n,{code:G.invalid_intersection_types}),ye)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};os.create=(t,e,r)=>new os({left:t,right:e,typeName:fe.ZodIntersection,...Se(r)});var Yn=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.array)return ee(n,{code:G.invalid_type,expected:J.array,received:n.parsedType}),ye;if(n.data.length<this._def.items.length)return ee(n,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ye;!this._def.rest&&n.data.length>this._def.items.length&&(ee(n,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,l)=>{let p=this._def.items[l]||this._def.rest;return p?p._parse(new cn(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>qt.mergeArray(r,a)):qt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Yn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Yn({items:t,typeName:fe.ZodTuple,rest:null,...Se(e)})};var gm=class t extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.object)return ee(n,{code:G.invalid_type,expected:J.object,received:n.parsedType}),ye;let i=[],o=this._def.keyType,a=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new cn(n,l,n.path,l)),value:a._parse(new cn(n,n.data[l],n.path,l))});return n.common.async?qt.mergeObjectAsync(r,i):qt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ve?new t({keyType:e,valueType:r,typeName:fe.ZodRecord,...Se(n)}):new t({keyType:uo.create(),valueType:e,typeName:fe.ZodRecord,...Se(r)})}},Ra=class extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.map)return ee(n,{code:G.invalid_type,expected:J.map,received:n.parsedType}),ye;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([l,p],u)=>({key:i._parse(new cn(n,l,n.path,[u,"key"])),value:o._parse(new cn(n,p,n.path,[u,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let p of a){let u=await p.key,d=await p.value;if(u.status==="aborted"||d.status==="aborted")return ye;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let p of a){let u=p.key,d=p.value;if(u.status==="aborted"||d.status==="aborted")return ye;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}};Ra.create=(t,e,r)=>new Ra({valueType:e,keyType:t,typeName:fe.ZodMap,...Se(r)});var ka=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.set)return ee(n,{code:G.invalid_type,expected:J.set,received:n.parsedType}),ye;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ee(n,{code:G.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ee(n,{code:G.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(p){let u=new Set;for(let d of p){if(d.status==="aborted")return ye;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}let l=[...n.data.values()].map((p,u)=>o._parse(new cn(n,p,n.path,u)));return n.common.async?Promise.all(l).then(p=>a(p)):a(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:ce.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};ka.create=(t,e)=>new ka({valueType:t,minSize:null,maxSize:null,typeName:fe.ZodSet,...Se(e)});var ym=class t extends ve{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.function)return ee(r,{code:G.invalid_type,expected:J.function,received:r.parsedType}),ye;function n(l,p){return dm({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,fm(),Sl].filter(u=>!!u),issueData:{code:G.invalid_arguments,argumentsError:p}})}function i(l,p){return dm({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,fm(),Sl].filter(u=>!!u),issueData:{code:G.invalid_return_type,returnTypeError:p}})}let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof mo){let l=this;return tr(async function(...p){let u=new Lr([]),d=await l._def.args.parseAsync(p,o).catch(x=>{throw u.addIssue(n(p,x)),u}),h=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(h,o).catch(x=>{throw u.addIssue(i(h,x)),u})})}else{let l=this;return tr(function(...p){let u=l._def.args.safeParse(p,o);if(!u.success)throw new Lr([n(p,u.error)]);let d=Reflect.apply(a,this,u.data),h=l._def.returns.safeParse(d,o);if(!h.success)throw new Lr([i(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Yn.create(e).rest(Ri.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Yn.create([]).rest(Ri.create()),returns:r||Ri.create(),typeName:fe.ZodFunction,...Se(n)})}},ss=class extends ve{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ss.create=(t,e)=>new ss({getter:t,typeName:fe.ZodLazy,...Se(e)});var as=class extends ve{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ee(r,{received:r.data,code:G.invalid_literal,expected:this._def.value}),ye}return{status:"valid",value:e.data}}get value(){return this._def.value}};as.create=(t,e)=>new as({value:t,typeName:fe.ZodLiteral,...Se(e)});function FA(t,e){return new cs({values:t,typeName:fe.ZodEnum,...Se(e)})}var cs=class t extends ve{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ee(r,{expected:Ue.joinValues(n),received:r.parsedType,code:G.invalid_type}),ye}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),n=this._def.values;return ee(r,{received:r.data,code:G.invalid_enum_value,options:n}),ye}return tr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return t.create(e)}exclude(e){return t.create(this.options.filter(r=>!e.includes(r)))}};cs.create=FA;var ls=class extends ve{_parse(e){let r=Ue.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==J.string&&n.parsedType!==J.number){let i=Ue.objectValues(r);return ee(n,{expected:Ue.joinValues(i),received:n.parsedType,code:G.invalid_type}),ye}if(r.indexOf(e.data)===-1){let i=Ue.objectValues(r);return ee(n,{received:n.data,code:G.invalid_enum_value,options:i}),ye}return tr(e.data)}get enum(){return this._def.values}};ls.create=(t,e)=>new ls({values:t,typeName:fe.ZodNativeEnum,...Se(e)});var mo=class extends ve{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.promise&&r.common.async===!1)return ee(r,{code:G.invalid_type,expected:J.promise,received:r.parsedType}),ye;let n=r.parsedType===J.promise?r.data:Promise.resolve(r.data);return tr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};mo.create=(t,e)=>new mo({type:t,typeName:fe.ZodPromise,...Se(e)});var Ur=class extends ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:a=>{ee(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(a).then(l=>this._def.schema._parseAsync({data:l,path:n.path,parent:n})):this._def.schema._parseSync({data:a,path:n.path,parent:n})}if(i.type==="refinement"){let a=l=>{let p=i.refinement(l,o);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?ye:(l.status==="dirty"&&r.dirty(),a(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?ye:(l.status==="dirty"&&r.dirty(),a(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!vl(a))return a;let l=i.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>vl(a)?Promise.resolve(i.transform(a.value,o)).then(l=>({status:r.value,value:l})):a);Ue.assertNever(i)}};Ur.create=(t,e,r)=>new Ur({schema:t,typeName:fe.ZodEffects,effect:e,...Se(r)});Ur.createWithPreprocess=(t,e,r)=>new Ur({schema:e,effect:{type:"preprocess",transform:t},typeName:fe.ZodEffects,...Se(r)});var Pn=class extends ve{_parse(e){return this._getType(e)===J.undefined?tr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Pn.create=(t,e)=>new Pn({innerType:t,typeName:fe.ZodOptional,...Se(e)});var Pi=class extends ve{_parse(e){return this._getType(e)===J.null?tr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Pi.create=(t,e)=>new Pi({innerType:t,typeName:fe.ZodNullable,...Se(e)});var ps=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===J.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};ps.create=(t,e)=>new ps({innerType:t,typeName:fe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Se(e)});var Pa=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return mm(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Lr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Lr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Pa.create=(t,e)=>new Pa({innerType:t,typeName:fe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Se(e)});var Ma=class extends ve{_parse(e){if(this._getType(e)!==J.nan){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:J.nan,received:n.parsedType}),ye}return{status:"valid",value:e.data}}};Ma.create=t=>new Ma({typeName:fe.ZodNaN,...Se(t)});var A9=Symbol("zod_brand"),xm=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},bl=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ye:o.status==="dirty"?(r.dirty(),IA(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ye:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:fe.ZodPipeline})}},Aa=class extends ve{_parse(e){let r=this._def.innerType._parse(e);return vl(r)&&(r.value=Object.freeze(r.value)),r}};Aa.create=(t,e)=>new Aa({innerType:t,typeName:fe.ZodReadonly,...Se(e)});var CA=(t,e={},r)=>t?fo.create().superRefine((n,i)=>{var o,a;if(!t(n)){let l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,p=(a=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0,u=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...u,fatal:p})}}):fo.create(),D9={object:Tr.lazycreate},fe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(fe||(fe={}));var I9=(t,e={message:`Input not instance of ${t.name}`})=>CA(r=>r instanceof t,e),OA=uo.create,NA=Jo.create,F9=Ma.create,C9=Xo.create,LA=es.create,O9=ts.create,N9=_a.create,L9=rs.create,U9=ns.create,V9=fo.create,B9=Ri.create,H9=Mn.create,W9=Ea.create,$9=ki.create,q9=Tr.create,j9=Tr.strictCreate,z9=is.create,G9=hm.create,K9=os.create,Q9=Yn.create,Z9=gm.create,Y9=Ra.create,J9=ka.create,X9=ym.create,e8=ss.create,t8=as.create,r8=cs.create,n8=ls.create,i8=mo.create,AA=Ur.create,o8=Pn.create,s8=Pi.create,a8=Ur.createWithPreprocess,c8=bl.create,l8=()=>OA().optional(),p8=()=>NA().optional(),u8=()=>LA().optional(),f8={string:t=>uo.create({...t,coerce:!0}),number:t=>Jo.create({...t,coerce:!0}),boolean:t=>es.create({...t,coerce:!0}),bigint:t=>Xo.create({...t,coerce:!0}),date:t=>ts.create({...t,coerce:!0})},d8=ye,$e=Object.freeze({__proto__:null,defaultErrorMap:Sl,setErrorMap:y9,getErrorMap:fm,makeIssue:dm,EMPTY_PATH:x9,addIssueToContext:ee,ParseStatus:qt,INVALID:ye,DIRTY:IA,OK:tr,isAborted:PS,isDirty:MS,isValid:vl,isAsync:mm,get util(){return Ue},get objectUtil(){return kS},ZodParsedType:J,getParsedType:po,ZodType:ve,ZodString:uo,ZodNumber:Jo,ZodBigInt:Xo,ZodBoolean:es,ZodDate:ts,ZodSymbol:_a,ZodUndefined:rs,ZodNull:ns,ZodAny:fo,ZodUnknown:Ri,ZodNever:Mn,ZodVoid:Ea,ZodArray:ki,ZodObject:Tr,ZodUnion:is,ZodDiscriminatedUnion:hm,ZodIntersection:os,ZodTuple:Yn,ZodRecord:gm,ZodMap:Ra,ZodSet:ka,ZodFunction:ym,ZodLazy:ss,ZodLiteral:as,ZodEnum:cs,ZodNativeEnum:ls,ZodPromise:mo,ZodEffects:Ur,ZodTransformer:Ur,ZodOptional:Pn,ZodNullable:Pi,ZodDefault:ps,ZodCatch:Pa,ZodNaN:Ma,BRAND:A9,ZodBranded:xm,ZodPipeline:bl,ZodReadonly:Aa,custom:CA,Schema:ve,ZodSchema:ve,late:D9,get ZodFirstPartyTypeKind(){return fe},coerce:f8,any:V9,array:$9,bigint:C9,boolean:LA,date:O9,discriminatedUnion:G9,effect:AA,enum:r8,function:X9,instanceof:I9,intersection:K9,lazy:e8,literal:t8,map:Y9,nan:F9,nativeEnum:n8,never:H9,null:U9,nullable:s8,number:NA,object:q9,oboolean:u8,onumber:p8,optional:o8,ostring:l8,pipeline:c8,preprocess:a8,promise:i8,record:Z9,set:J9,strictObject:j9,string:OA,symbol:N9,transformer:AA,tuple:Q9,undefined:L9,union:z9,unknown:B9,void:W9,NEVER:d8,ZodIssueCode:G,quotelessJson:g9,ZodError:Lr});function UA(t){let e=t.operands.map(DS).join(" ");return`(#${t.operator} ${e})`}function DS(t){return t.type==="capture"?`@${t.name}`:t.value}function VA(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>m8(t,r))}function m8(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=DS(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var rr=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof Tm&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:VA(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new Tm(n.name);return i}else return n.value})}},Tm=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var IS=$e.object({type:$e.literal("string"),value:$e.string()}),we={node:$e.object({type:$e.literal("capture"),name:$e.string()}),string:IS,integer:IS.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:$e.ZodIssueCode.custom,message:"Expected an integer"}),$e.NEVER):{type:"integer",value:r}}),boolean:IS.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:$e.ZodIssueCode.custom,message:"Expected true or false"}),$e.NEVER))};var FS=class extends rr{constructor(){super(...arguments);this.name="not-type?";this.schema=$e.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return!n.includes(r.type)}},CS=class extends rr{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=$e.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},OS=class extends rr{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=$e.tuple([we.node,we.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},NS=class extends rr{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=$e.tuple([we.node,we.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},LS=class extends rr{constructor(){super(...arguments);this.name="child-range!";this.schema=$e.union([$e.tuple([we.node,we.integer]),$e.tuple([we.node,we.integer,we.integer]),$e.tuple([we.node,we.integer,we.integer,we.boolean]),$e.tuple([we.node,we.integer,we.integer,we.boolean,we.boolean])])}run(r,n,i,o,a){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let p=l[n],u=l[i];return r.range=an(o?p.endPosition:p.startPosition,a?u.startPosition:u.endPosition),!0}},US=class extends rr{constructor(){super(...arguments);this.name="character-range!";this.schema=$e.union([$e.tuple([we.node,we.integer]),$e.tuple([we.node,we.integer,we.integer])])}run(r,n,i){return r.range=new W(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},VS=class extends rr{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=$e.tuple([we.node,we.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[p,u]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new W(i.positionAt(d+p),i.positionAt(d+u)),!0}},BS=class extends rr{constructor(){super(...arguments);this.name="trim-end!";this.schema=$e.tuple([we.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),a=o.length-o.trimEnd().length;return a>0&&(r.range=new W(i.start,jR(n,i.end,-a))),!0}},HS=class extends rr{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=$e.tuple([we.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},WS=class extends rr{constructor(){super(...arguments);this.name="log!";this.schema=$e.tuple([we.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},$S=class extends rr{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=$e.tuple([we.node,we.string])}run(r,n){return r.insertionDelimiter=n,!0}},qS=class extends rr{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=$e.tuple([we.node,we.node,we.string,we.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},BA=[new WS,new FS,new BS,new CS,new OS,new LS,new US,new VS,new HS,new $S,new qS,new NS];function HA(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((a,l)=>{let p=BA.find(({name:d})=>d===a.operator);if(p==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${a.operator}"`});return}let u=p.createPredicate(a.operands);if(!u.success){e.push(...u.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(u.predicate)}),r.push(o)}),{errors:e,predicates:r}}function WA(t){return t.map(e=>e.name.endsWith(".startOf")?{...e,name:e.name.replace(/\.startOf$/,""),range:e.range.start.toEmptyRange()}:e.name.endsWith(".endOf")?{...e,name:e.name.replace(/\.endOf$/,""),range:e.range.end.toEmptyRange()}:e)}var wl=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n}static create(e,r,n){let{errors:i,predicates:o}=HA(n.predicates);if(i.length>0){for(let a of i){let l=[`language ${e}`,`pattern ${a.patternIdx}`,`predicate \`${UA(n.predicates[a.patternIdx][a.predicateIdx])}\``].join(", ");nt(D().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${l}: ${a.error}`)}if(D().runMode==="test")throw new Error("Invalid predicates")}return new t(r,n,o)}matches(e,r,n){return this.query.matches(this.treeSitter.getTree(e).rootNode,{startPosition:r==null?void 0:qA(r),endPosition:n==null?void 0:qA(n)}).map(({pattern:i,captures:o})=>({patternIdx:i,captures:o.map(({name:a,node:l})=>({name:a,node:l,document:e,range:vA(l),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>PA(l)}))})).filter(i=>this.patternPredicates[i.patternIdx].every(o=>o(i))).map(i=>{let o=Object.entries(Yx(i.captures,({name:a})=>$A(a))).map(([a,l])=>{if(l=WA(l),!kA(l,D().messages)&&D().runMode==="test")throw new Error("Invalid captures");return{name:a,range:l.map(({range:u})=>u).reduce((u,d)=>d.union(u)),allowMultiple:l.some(u=>u.allowMultiple),insertionDelimiter:l.find(u=>u.insertionDelimiter!=null)?.insertionDelimiter,hasError:()=>l.some(u=>u.hasError())}});return{...i,captures:o}})}get captureNames(){return xi(this.query.captureNames.map($A))}};function $A(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}function qA(t){return{row:t.line,column:t.character}}var zA="_",h8=[zA,...Wo],g8=["prefix","leading","trailing"],y8=["startOf","endOf"],x8=["domain","removal","interior","iteration","iteration.domain"],jA=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],us=new Set;for(let t of h8){if(t!==zA){us.add(t);for(let e of jA)us.add(`${t}.${e}`)}for(let e of g8){us.add(`${t}.${e}`);for(let r of y8)us.add(`${t}.${e}.${r}`)}for(let e of x8){us.add(`${t}.${e}`);for(let r of jA)us.add(`${t}.${e}.${r}`)}}var T8=new RegExp("^(?!;;).*@([\\w.]*)","gm");function GA(t,e){let r=e.matchAll(T8),n=[];for(let o of r){let a=o[1];if(!(a.length>1&&!a.includes(".")&&a.startsWith("_"))&&!us.has(a)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${a}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(nt(D().messages,"validateQueryCaptures.invalidCaptureName",i),D().runMode==="test")throw new Error(i)}var Sm=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await S8(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let a=n.getLanguage(i).query(o),l=wl.create(i,n,a);return new t(l)}getScopeHandler(e){if(this.query.captureNames.includes(e.type))return new Kd(this.query,e)}getCaptures(e,r){return this.query.matches(e).map(n=>n.captures.find(({name:i})=>i===r)).filter(n=>n!=null)}};async function S8(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,a]of Object.entries(n)){if(a!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(nt(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&GA(o,l),n[o]=l,en(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,p=>{let u=p[1];i&&v8(t,o,u,p[0]),n[u]=n[u]??null})}return Object.values(n).join(`
`)}function v8(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(nt(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(nt(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var KA=Symbol("LANGUAGE_UNDEFINED"),vm=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Wt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;e.onDidOpenTextDocument(i=>{this.loadLanguage(i.languageId)}),e.onDidChangeVisibleTextEditors(i=>{i.forEach(({document:o})=>this.loadLanguage(o.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(nt(this.ide.messages,"Failed to load language definitions",_n(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await Sm.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??KA;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===KA?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var bm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e){for(let r of this.nestedStages)try{return r.run(e)}catch{continue}throw new Error("No modifier could be applied")}};var Da=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e){if(this.shouldModify(e))try{return this.nestedStage.run(e).map(r=>r.withThatTarget(e))}catch(r){if(!this.suppressErrors)throw r}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},Ia=class extends Da{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},_l=class extends Da{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},wm=class extends Da{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},Fa=class extends Da{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function QA(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function Ca(t,e,r,n,i){if(n&&i&&QA(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.isLine&&r.isLine?new Nr({editor:e.editor,isReversed:t,contentRange:ua(e,r,n,i)}):new Pt({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:so(e,r,n,i),isToken:n&&i&&e.isToken&&r.isToken})}function _m(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[a]=i,l=a.contentRange.start.isAfterOrEqual(o.contentRange.start),[p,u]=l?[o,a]:[a,o];return[Ca(t,p,u,!0,!0)]}function Em(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,a]=i;return n==="forward"?a:n==="backward"||(t.isPreferredOver?.(o,a)??!1)?o:a}default:throw new Error("Expected no more than 2 scope candidates")}}function Rm(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:a}}=t;if(a.isEqual(o)){let u=Em(e,i,o);return u==null||(r>0&&(u=jS(e,i,u.domain.end,"forward",r,!0)),u==null)?void 0:u.getTargets(n)}let l=jS(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(a))return l.getTargets(n);let p=jS(e,i,a,"backward",r);if(p!=null)return _m(n,l,p)}function jS(t,e,r,n,i,o=!1){let a=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(a===i)return l;a+=1}}var Oa=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.create(r,e.editor.document.languageId);if(i==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let o=Rm(e,i,n);if(o==null){if(r.type==="collectionItem")return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);throw new Rt(this.modifier.scopeType.type)}return o}};var km=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,{editor:n,isReversed:i}=e,o=this.scopeHandlerFactory.create(r,n.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let a;if(e.hasExplicitRange&&(a=ZA(o,n,e.contentRange),a.length===1&&a[0].domain.contains(e.contentRange)&&(a=void 0)),a==null)try{a=this.getDefaultIterationRange(o,this.scopeHandlerFactory,e).flatMap(l=>ZA(o,n,l))}catch(l){if(!(l instanceof Rt))throw l;a=[]}if(a.length===0){if(r.type==="collectionItem")return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);throw new Rt(r.type)}return a.flatMap(l=>l.getTargets(i))}getDefaultIterationRange(e,r,n){let i=r.create(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=Rm(n,i);if(o==null)throw new Rt(`iteration scope for ${e.scopeType.type}`);return o.map(a=>a.contentRange)}};function ZA(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var Pm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},Mm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Am=class{run(){return Td(D()).map(e=>new gd({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var Dm=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new zS(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},zS=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return b8(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return St(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return w8(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[ho(e,r,n,i)];let a=QS(e,r);return[ho(n?YA(this.modifierStageFactory,e,o,a?"backward":"forward"):e,i?YA(this.modifierStageFactory,r,o,a?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n;e.type==="implicit"?(r=new Am,n=[]):(r=this.markStageFactory.create(e.mark),n=GS(this.modifierStageFactory,e.modifiers));let i=r.run(),o=[...n,...this.opts.actionFinalStages,...this.opts.noAutomaticTokenExpansion?[]:[new Fa(this.modifierStageFactory)]];return KS(o,i)}};function GS(t,e){return e.map(t.create).reverse()}function KS(t,e){return t.forEach(r=>{e=e.flatMap(n=>r.run(n))}),e}function YA(t,e,r,n){return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e)[0]}function QS(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function b8(t){return Yk(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function JA(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function ho(t,e,r=!1,n=!1){JA(t,e);let i=QS(t,e);return Ca(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function w8(t,e,r,n){JA(t,e);let i=QS(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),u=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let h=l;;h+=o){let g=new W(h,t.contentRange.start.character,h,t.contentRange.end.character);if(d.push(new He({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),h===u)return d}}var Im=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifier.modifiers??[{type:"containingScope",scopeType:{type:"oneOf",scopeTypes:[{type:"line"},{type:"surroundingPairInterior",delimiter:"any",requireSingleLine:!0}]}}],n=GS(this.modifierStageFactory,r);return KS(n,[e]).map(o=>{let a=this.modifier.type==="extendThroughStartOf";return new yd({editor:e.editor,isReversed:a,inputTarget:e,modifiedTarget:o,isHead:a})})}};var Mi=class extends Error{constructor(){super("Scope index out of range"),this.name="OutOfRangeError"}};function XA(t,e,r){return ZS(t,e,r),t.slice(e,r+1)}function ZS(t,e,r){if(e<0||r>=t.length)throw new Mi}var Na=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e){let r=new Fa(this.modifierStageFactory).run(e)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(r);case"ordinalScope":return this.handleOrdinalScope(r,this.modifier);case"relativeScope":return this.handleRelativeScope(r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e){return Array.from(Ud(this.getEveryRanges(e),([r,n])=>this.getTargetIterable(e,r,n,"forward")))}handleOrdinalScope(e,{start:r,length:n}){return this.getEveryRanges(e).flatMap(([i,o])=>eD(this.getTargetIterable(e,i,o,r>=0?"forward":"backward"),r>=0?r:-(n+r),n))}handleRelativeScope(e,{direction:r,offset:n,length:i}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(a=>{let{editor:l}=a,p=r==="forward"?new W(n===0?a.contentRange.start:a.contentRange.end,l.document.range.end):new W(l.document.range.start,n===0?a.contentRange.end:a.contentRange.start);return eD(this.getTargetIterable(e,l,p,r),n===0?0:n-1,i)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i){let o=Lt(sn(new RegExp(Fr(e.contentText),"g"),r,n,i),l=>new He({contentRange:l,editor:r,isReversed:!1,isToken:!1})),a=_8(e);if(a!=null){let l=this.modifierStageFactory.create({type:"containingScope",scopeType:a});return $M(Lt(o,p=>{try{let u=l.run(p);return u.length===1&&u[0].contentRange.isRangeEqual(p.contentRange)?u[0]:null}catch{return null}}),p=>p!=null)}return o}};function _8(t){return t.isLine?{type:"line"}:t.isToken?{type:"token"}:t.isWord?{type:"word"}:null}function eD(t,e,r){Array.from(gl(e,t));let n=Array.from(gl(r,t));if(n.length<r)throw new Mi;return n}var Fm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoInteriorStage=E8(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoInteriorStage.run(e).flatMap(r=>r.getInterior())}},Cm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=YS(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoBoundaryStage.run(e).flatMap(r=>r.getBoundary())}};function E8(t){return new _l(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getInterior()==null)}function YS(t){return new _l(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}function tD(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function rD(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let a of o){if(n==null||(n=a(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var JS=t=>new ae(t.row,t.column),nD=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(a,l)=>a!=null&&l.includes(a.type),o=a=>a!=null&&!i(a,n);return(a,l)=>{let p,{start:u,end:d}=l;if(i(a.parent,t))return i(a,e)?p=a.nextNamedSibling:i(a,r)?p=a.previousNamedSibling:a.type===","?p=d.isBeforeOrEqual(JS(a.startPosition))?a.previousNamedSibling:a.nextNamedSibling:p=a,o(p)?p:null;if(i(a,t)){let h=[...a.children],g=h.find(({startPosition:b})=>JS(b).isAfterOrEqual(d))??null;if(o(g))return g;h.reverse();let x=h.find(({endPosition:b})=>JS(b).isBeforeOrEqual(u))??null;if(o(x))return x}return null}};function Ce(...t){let e=R8(t);return r=>{for(let n of e){let i=k8(r,n);if(i!=null)return i}return null}}function R8(t){return t.map(e=>e.split(".").map(r=>new XS(r)))}function k8(t,e){let r=P8(t,e);!r&&e.length>1&&(r=M8(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function P8(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function M8(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let a=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=a.length===1?a[0]:null}}return r}var XS=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Me(t,e=Qn){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function Om(t,e=Qn){let r=tD(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function La(t,e=0,r=Qn){return Me(rD(e,...t),r)}function wt(...t){return Me(Ce(...t))}function go(...t){return Me(nD(...t),wA())}function Ua(...t){return Me(Ce(...t),_A)}function An(t,e=[]){return Me(Ce(...t),EA(...e))}function yo(t,e=[]){return Me(Ce(...t),RA(...e))}function at(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function iD(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function ln(t){return Object.freeze(Object.fromEntries(Si(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,wt(...r)]:typeof r=="string"?[e,wt(r)]:[e,r]})))}function oD(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function A8(t,e){return tv(t,r=>Math.floor(r/2)*2+e)}function Nm(t){return A8(Ce("map_lit"),t)}function tv(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=El(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let a=e(o);return a===-1?null:i[a]}}function D8(){return tv(t=>t,t=>t)}var El=t=>oD(t,"value"),ev="~quoting_lit.list_lit!",aD=Ce(ev);function rv(...t){return e=>{let r=aD(e);if(r==null)return null;let n=El(r)[0];return t.includes(n?.text)?r:null}}function I8(...t){return Me(rv(...t))}var cD=rv("defn","defmacro"),sD=Om([cD,t=>El(t)[1]]),lD=rv("if","if-let","when","when-let"),F8=Me(lD),C8={collectionKey:Me(Nm(0)),collectionItem:at(Me(Nm(0),Tl(t=>t.type==="{"||t.type==="}",", ",Ht,Nm(1))),Me(D8())),value:Me(Nm(1)),argumentOrParameter:Me(tv(Ce(ev),t=>t!==0?t:-1)),functionCall:ev,functionCallee:Om([aD,t=>El(t)[0]]),namedFunction:Me(cD),functionName:sD,name:sD,anonymousFunction:at(I8("fn"),wt("anon_fn_lit")),ifStatement:F8,condition:Om([lD,t=>El(t)[1]])},pD=ln(C8);var uD=["command","displayed_equation","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],O8=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],dD=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],fD=dD.map(t=>`${t}[text]`),N8=dD.map(t=>`${t}[command]`);function nv(t,e){return{selection:new Te(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new Te(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function L8(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new Te(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function U8(t,e){let r=e.startIndex,n=e.childForFieldName("label");if(n==null){let i=e.childForFieldName("command");i!=null&&(r=i.endIndex+1)}else r=n.endIndex+1;return{selection:new Te(t.document.positionAt(r),t.document.positionAt(e.endIndex)),context:{leadingDelimiterRange:new W(t.document.positionAt(e.startIndex),t.document.positionAt(r-1))}}}var V8={argumentOrParameter:at(La([Ce(...uD),Ce(...O8)],1,nv),Me(Ce("begin[name]","end[name]",...fD),nv)),functionCall:at(Me(Ce(...uD,"begin","end")),Me(Ce(...N8),L8)),name:at(Me(Ce(...fD),nv),wt("begin[name][text]","end[name][text]")),collectionItem:Me(Ce("enum_item"),U8)},mD=ln(V8);var B8=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],H8=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],W8=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],$8=["hash"],q8=["array","string_array","symbol_array"],j8=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],z8=[":","=>"];function G8(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var K8={statement:at(wt(...B8),La([Ce(...W8),Ce(...H8)],1)),anonymousFunction:at(wt("lambda","do_block"),Me(G8)),condition:Ua("*[condition]"),argumentOrParameter:go("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:yo(["pair[key]"],[":"]),value:An(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],j8.concat(z8)),collectionItem:go(...$8,...q8)},hD=ln(K8);function iv(){let t=Zn(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let a=r.childForFieldName("alternative");if(a==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new Te(l.start,ES(a.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new Te(ES(i.child(0).startPosition),o.end),context:{}}}}function gD(t){let e=iv();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):Qn(r,n)}}var yD=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],Q8=["source_file","block","declaration_list"];function Z8(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function Y8(t,e){return{selection:bA(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:an(e.children[0].startPosition,e.children[1].startPosition)}}}function J8(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return yD.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var X8={statement:La([Ce(...Q8),Ce(...yD)],1),condition:at(wt("while_expression[condition]","if_expression[condition]"),Me(Ce("while_let_expression","if_let_expression"),Zn(["while","if","block"],[],{includeUnnamedChildren:!0})),An(["*.match_pattern![condition]"],["if"])),collectionItem:go("array_expression","tuple_expression","tuple_type"),type:at(An(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Me(Ce("constrained_type_parameter[bounds]","where_predicate[bounds]"),Y8),An(["function_item[return_type]"],["->"]),Me(Z8),wt("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:go("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:at(yo(["field_initializer[name]","field_pattern[name]"],[":"])),name:at(wt("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),yo(["field_initializer[name]","field_pattern[name]"],[":"])),value:at(An(["let_declaration[value]"],["="]),An(["field_initializer[value]","field_pattern[pattern]"],[":"]),wt("meta_item[value]","const_item[value]"),Me(J8)),attribute:yo(["mutable_specifier","attribute_item"]),branch:at(wt("match_arm"),Me(Ce("else_clause"),gD("if_expression")),Me(Ce("if_expression"),iv()))},xD=ln(X8);var e7={argumentOrParameter:go("arguments","parameters","class_parameters","bindings"),branch:Me(Ce("case_clause"),Zn([],[],{includeUnnamedChildren:!0})),type:An(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:An(["*[value]","*[default_value]","type_definition[type]"],["="]),condition:Ua("*[condition]")},TD=ln(e7);var t7=["apply_statement","at_rule","charset_statement","debug_statement","each_statement","error_statement","for_statement","forward_statement","function_statement","if_statement","import_statement","include_statement","keyframes_statement","media_statement","mixin_statement","namespace_statement","placeholder","rule_set","supports_statement","use_statement","warn_statement","while_statement"];function vD(t){return[",","(",")"].includes(t.type)||bD(t)}function bD(t){return t.type==="plain_value"&&t.text==="at"}function SD(t){return e=>{(bD(e)||e.type===",")&&(e=e.previousSibling);let r=t(e);for(;r&&!vD(r);)e=r,r=t(r);return e}}function r7(t,e){return e.type!=="declaration"?null:e.descendantsOfType("unit").map(r=>({node:r,selection:Qn(t.editor,r)}))}var n7={condition:Ua("condition"),statement:at(wt(...t7),Me(Ce("attribute_selector"),Zn([],["attribute_name","string_value"]))),argumentOrParameter:at(Me(Ce("arguments.*!","parameters.*!"),Tl(t=>vD(t),", ",SD(t=>t.previousSibling),SD(t=>t.nextSibling)))),collectionKey:yo(["declaration.property_name!"],[":"]),value:at(Me(Ce("declaration"),Zn(["property_name","variable_name"])),Me(Ce("include_statement","namespace_statement"),Zn()),wt("return_statement.*!","import_statement.*!","attribute_selector.plain_value!","attribute_selector.string_value!","parameter.default_value!")),unit:at(wt("integer_value.unit!"),r7)},ov=ln(n7);function wD(t,e,r){let n=Rl[t];if(n==null)throw new Su(t);let i=n[e];return i==null?iD(e):r?i7(i):i}var Rl={clojure:pD,css:ov,latex:mD,ruby:hD,rust:xD,scala:TD,scss:ov};function i7(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>o7(i.node,ad(e,i.selection.selection),t)),n.length>0?n:null)}}function o7(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var Va=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=wD(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new Rt(this.modifier.scopeType.type);let i=s7(n,r,{editor:e.editor,selection:new Te(e.contentRange.start,e.contentRange.end)});if(i==null)throw new Rt(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:a,leadingDelimiterRange:l,trailingDelimiterRange:p,removalRange:u,interiorRange:d}=o.context;if(u!=null&&(l!=null||p!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:h,selection:g}=o.selection;return new co({scopeTypeType:this.modifier.scopeType.type,editor:h,isReversed:e.isReversed,contentRange:g,removalRange:u,interiorRange:d,insertionDelimiter:a,leadingDelimiterRange:l,trailingDelimiterRange:p})})}};function s7(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:ad(r,o.selection),context:o.context}));n=n.parent}return null}function ED(t,e){let r=RD(t,e);for(;r!=null;){if(a7(t,e,r))return{range:r.getInterior()[0].contentRange,boundary:sv(r)};r=c7(t,e.editor,r)}return{range:yl(e.editor,e.contentRange)}}function a7(t,e,r){let{contentRange:n}=e;if(n.isEmpty){let[o,a]=sv(r),l=n.start;if(l.isEqual(o.start)||l.isEqual(a.end))return!1;let p=e.editor.document.lineAt(l);if(l.isEqual(o.end)&&_D(p,l.character)||l.isEqual(a.start)&&_D(p,l.character-1))return!1}else{if(n.isRangeEqual(r.contentRange))return!1;let[o,a]=sv(r);if(n.isRangeEqual(o)||n.isRangeEqual(a))return!1}let i=l7(t,r);return!(i!=null&&r.contentRange.start.isBeforeOrEqual(i.contentRange.start))}function sv(t){return t.getBoundary().map(e=>e.contentRange)}function _D(t,e){return e<t.range.start.character||e>=t.range.end.character||t.text[e].trim()===""}function c7(t,e,r){let n=e.document.offsetAt(r.contentRange.start);if(n===0)return;let i=e.document.positionAt(n-1);return RD(t,new He({editor:e,contentRange:new W(i,i),isReversed:!1}))}function RD(t,e){return kD(t,e,{type:"surroundingPair",delimiter:"collectionBoundary",requireStrongContainment:!0})}function l7(t,e){return kD(t,e,{type:"surroundingPair",delimiter:"string",requireStrongContainment:!0})}function kD(t,e,r){let n=t.create({type:"containingScope",scopeType:r}),i=(()=>{try{return n.run(e)}catch{return[]}})();if(i.length>1)throw Error("Expected only one surrounding pair target");return i[0]}function PD(t,e,r){let{document:n}=t,o=n.getText(e).split(/([,(){}<>[\]"'`])|(?<!\\)(\\"|\\'|\\`)/g).filter(u=>u!=null&&u.length>0),a=p7(o),l=[],p=n.offsetAt(e.start);return a.forEach(u=>{if(u.trim().length===0){p+=u.length;return}if(u===MD)l.push({type:"separator",range:new W(n.positionAt(p),n.positionAt(p+u.length))});else{let d=p+(u.length-u.trimStart().length);l.push({type:"item",range:new W(n.positionAt(d),n.positionAt(d+u.trim().length))})}p+=u.length}),r!=null?[{type:"boundary",range:r[0]},...l,{type:"boundary",range:r[1]}]:l}function p7(t){let e=[],r=0,n=null,i=null,o=-1;return t.forEach((a,l)=>{r>0?a===i?--r:a===n&&++r:(av[a]!=null&&t.indexOf(av[a],l+1)>-1&&(n=a,i=av[a],r=1),o<0&&(o=l));let p=a===MD&&r===0;if(p||l===t.length-1){let u=p?l:l+1;e.push(t.slice(o,u).join("")),o=-1,p&&e.push(a)}}),e}var MD=",",av={"(":")","{":"}","<":">","[":"]",'"':'"',"'":"'","`":"`"};var Lm=class{constructor(e,r,n){this.languageDefinitions=e;this.modifierStageFactory=r;this.modifier=n}run(e){try{return new Va(this.languageDefinitions,this.modifier).run(e)}catch{}return this.modifier.type==="everyScope"?this.getEveryTarget(this.modifierStageFactory,e):[this.getSingleTarget(this.modifierStageFactory,e)]}getEveryTarget(e,r){let n=DD(e,r),i=r.hasExplicitRange?AD(r,n):n;if(i.length===0)throw new Rt(this.modifier.scopeType.type);return i.map(o=>this.itemInfoToTarget(r,o))}getSingleTarget(e,r){let n=DD(e,r),i=AD(r,n);if(i.length===0)throw new Rt(this.modifier.scopeType.type);let o=i[0],a=i[i.length-1],l={contentRange:o.contentRange.union(a.contentRange),domain:o.domain.union(a.domain),leadingDelimiterRange:o.leadingDelimiterRange,trailingDelimiterRange:a.trailingDelimiterRange},p=l.leadingDelimiterRange!=null&&l.trailingDelimiterRange!=null&&nS(r.editor,l.leadingDelimiterRange)>nS(r.editor,l.trailingDelimiterRange)?l.contentRange.union(l.leadingDelimiterRange):void 0;return this.itemInfoToTarget(r,l,p)}itemInfoToTarget(e,r,n){let i=u7(r.leadingDelimiterRange,r.trailingDelimiterRange);return new co({scopeTypeType:this.modifier.scopeType.type,editor:e.editor,isReversed:e.isReversed,contentRange:r.contentRange,insertionDelimiter:i,leadingDelimiterRange:r.leadingDelimiterRange,trailingDelimiterRange:r.trailingDelimiterRange,removalRange:n})}};function u7(t,e){return t!=null&&!t.isSingleLine||e!=null&&!e.isSingleLine?`,
`:", "}function AD(t,e){return e.filter(r=>r.domain.intersection(t.contentRange)!=null)}function DD(t,e){let{range:r,boundary:n}=ED(t,e);return f7(e.editor,r,n)}function f7(t,e,r){let n=PD(t,e,r),i=[];return n.forEach((o,a)=>{if(o.type==="separator"||o.type==="boundary")return;let l=(()=>{if(n[a-2]?.type==="item")return new W(n[a-2].range.end,o.range.start);if(n[a-1]?.type==="separator")return new W(n[a-1].range.start,o.range.start)})(),p=(()=>{if(n[a+2]?.type==="item")return new W(o.range.end,n[a+2].range.start);if(n[a+1]?.type==="separator")return new W(o.range.end,n[a+1].range.end)})(),u=n[a-1]?.type==="boundary"||n[a-1]?.type==="separator"?n[a-1].range.end:o.range.start,d=n[a+1]?.type==="boundary"||n[a+1]?.type==="separator"?n[a+1].range.start:o.range.end;i.push({contentRange:o.range,leadingDelimiterRange:l,trailingDelimiterRange:p,domain:new W(u,d)})}),i}var Jn={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},cv={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var Um=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},Vm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(cv).run(e).map(r=>{let n=r.getLeadingDelimiterTarget();if(n==null)throw new Um("leading");return n})}},Bm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(cv).run(e).map(r=>{let n=r.getTrailingDelimiterTarget();if(n==null)throw new Um("trailing");return n})}};function Hm(t,e,r,n){return ZS(e,r,n),r===n?e[r]:Ca(t,e[r],e[n],!0,!0)}function Wm(t,e,r){return t.create({type:"everyScope",scopeType:r}).run(e)}var $m=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=Wm(this.modifierStageFactory,e,this.modifier.scopeType),n=this.modifier.start+(this.modifier.start<0?r.length:0),i=n+this.modifier.length-1;return this.modifier.isEvery?XA(r,n,i):[Hm(e.isReversed,r,n,i)]}};var qm=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new ao(r):new He({...r,isToken:!1})]}},jm=class extends qm{getContentRange(e){return e.start.toEmptyRange()}},zm=class extends qm{getContentRange(e){return e.end.toEmptyRange()}};var Gm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,n=new Oa(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:r});try{return n.run(e)}catch(a){if(!(a instanceof Rt))throw a}let i=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId);if(i==null)throw Error(`Couldn't create scope handler for: ${r.type}`);let o=d7(e,i);if(o==null)throw Error(`No scopes found for scope type: ${r.type}`);return o}};function d7(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=ID(r,i),a=ID(n,i),l=o.distance<a.distance?o.scope:a.scope;return l?.getTargets(t.isReversed)}function ID(t,e){let r,n=1/0;for(let i of t){let o=Math.min(FD(e,i.domain.start),FD(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function FD(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var Km=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifierStageFactory.create(this.modifier.anchor),n=this.modifierStageFactory.create(this.modifier.active),i=r.run(e),o=n.run(e);if(i.length!==1||o.length!==1)throw new Error("Expected single anchor and active target");return[ho(i[0],o[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var Qm=class{constructor(e){this.modifier=e}run(e){return[new ao({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var Zm=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function CD(t,e,r){let n=Wm(t,y7(r),e.scopeType),i=g7(r.contentRange,n);return m7(e,r,n,i)}function m7(t,e,r,n){let i=t.direction==="forward",o=h7(t,e.contentRange,r,i,n),a=i?o+t.length-1:o-t.length+1,l=Math.min(o,a),p=Math.max(o,a);return[Hm(e.isReversed,r,l,p)]}function h7(t,e,r,n,i){let o=t.offset===0;if(i==null){let p=n?r.findIndex(u=>u.contentRange.start.isAfter(e.start)):Fc(r,u=>u.contentRange.start.isBefore(e.start));if(p===-1)throw new Mi;return o?p:n?p+t.offset-1:p-t.offset+1}let a=i.start,l=i.end;if(o){let p=l-a+1;if(p>t.length)throw new Zm(t.length,p,t.scopeType.type);return n?a:l}return n?l+t.offset:a-t.offset}function g7(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function y7(t){return new Pt({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var Ym=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let r=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId);if(r==null)return CD(this.modifierStageFactory,this.modifier,e);let n=Array.from(this.modifier.offset===0?x7(r,e,this.modifier):T7(r,e,this.modifier));if(n.length<this.modifier.length)throw new Mi;let{isReversed:i}=e;return this.modifier.isEvery?n.flatMap(o=>o.getTargets(i)):_m(i,n[0],n[n.length-1])}};function x7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a}=r,l=Em(t,n,a==="forward"?i.start:i.end,a)?.domain;if(l==null)throw new Rt(r.scopeType.type);return gl(o,t.generateScopes(n,a==="forward"?l.start:l.end,a,{skipAncestorScopes:!0}))}function T7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a,offset:l}=r,p=a==="forward"?i.end:i.start,u=i.isEmpty?"disallowed":"disallowedIfStrict";return qM(t.generateScopes(n,p,a,{containment:u,skipAncestorScopes:!0}),l-1,l+o-1)}var Jm=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new He({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};var Xm=class{constructor(e){this.modifier=e}run(e){if(this.modifier.type==="everyScope")throw new Error(`Every ${this.modifier.type} not yet implemented`);return[new fd({editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange})]}};var Ba=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new jm;case"endOf":return new zm;case"extendThroughStartOf":case"extendThroughEndOf":return new Im(this,e);case"toRawSelection":return new Qm(e);case"interiorOnly":return new Fm(this,e);case"excludeInterior":return new Cm(this,e);case"leading":return new Vm(this,e);case"trailing":return new Bm(this,e);case"visible":return new Jm(e);case"containingScope":return new Oa(this,this.scopeHandlerFactory,e);case"preferredScope":return new Gm(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new Na(this,this.storedTargets,e):new km(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new Na(this,this.storedTargets,e):new $m(this,e);case"relativeScope":return e.scopeType.type==="instance"?new Na(this,this.storedTargets,e):new Ym(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new Pm(e);case"keepEmptyFilter":return new Mm(e);case"cascading":return new bm(this,e);case"modifyIfUntyped":return new Ia(this,e);case"range":return new Km(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`)}}getLegacyScopeStage(e){switch(e.scopeType.type){case"notebookCell":return new Xm(e);case"collectionItem":return new Lm(this.languageDefinitions,this,e);default:return new Va(this.languageDefinitions,e)}}};async function OD(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Fe({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=Si(r),a=o.map(u=>{let d=r[u],h=S7(d);return ND(e.document,h.selections,h.behavior)});n||a.push(ND(e.document,e.selections,1));let l=await("edits"in i?w7(t,e,i.edits,a):LD(t,i.callback,e.document,a));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((u,d)=>[u,l[d]]))}function ND(t,e,r){return e.map(n=>v7(t,n,n instanceof Te?!n.isReversed:!0,r))}function S7(t){return"selections"in t?t:{selections:t,behavior:1}}function v7(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function b7(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new Te(r,n):new Te(n,r)))}async function LD(t,e,r,n){let i=t.registerRangeInfoList(r,Je(n));return await e(),i(),b7(n)}async function w7(t,e,r,n){return await LD(t,async()=>{if(!await OD(t,e,r))throw new Error("Could not apply edits")},e.document,n)}function Sr(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function vr(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Di(t,e,r){return Promise.all(lv(t,e).map(([n,i])=>r(n,i)))}async function tt(t,e){return Di(t,r=>r.editor,e)}async function UD(t,e){let r=lv(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function VD(t){return lv(t,e=>e.editor)}function lv(t,e){let n=Xc(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function eh(t){return t.contentRange}function pn(t,e){return e!=null?St(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new Te(i.end,i.start):new Te(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function BD(t){let e=t.contentRange;return t.isLine?rn(e):vt(e)}function Oe(t,e,r,n=eh){return t.flashRanges(e.map(i=>{let o=n(i);return o==null?null:{editor:i.editor,range:i.isLine?rn(o):vt(o),style:r}}).filter(i=>i!=null))}var th=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Oe(D(),e,"pendingModification0"),{thatSelections:Je(await tt(e,async(n,i)=>{let o=i.map(({contentRange:u})=>u),a=_7(n,o),l=D().getEditableTextEditor(n),{contentRanges:p}=await Fe({rangeUpdater:this.rangeUpdater,editor:l,edits:a,selections:{contentRanges:o}});return St(i,p).map(([u,d])=>({editor:u.editor,selection:d.toSelection(u.isReversed)}))}))}}};function _7(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,a=r.lineAt(o),l=a.text.slice(0,a.rangeTrimmed?.start?.character??a.range.start.character),p=a.text.slice(0,o.character).search(/\s+$/),u=p>-1?new W(new ae(a.lineNumber,p),o):o.toEmptyRange();n.push({range:u,text:`
`+l,isReplace:!u.isEmpty})}return n}function rh(t){return t.length<2?t:VD(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,a)=>o.contentRange.start.compareTo(a.contentRange.start));let i=!0;for(;i;)[n,i]=E7(n);return n})}function E7(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!R7(r[r.length-1],n)?(e.push(HD(r)),r=[n]):r.push(n)}),e.push(HD(r)),[e,e.length!==t.length]}function HD(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return ho(e,r)}function R7(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var kl=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Oe(D(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Oe(D(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((a,l)=>{let p=r[l];if((a==null||p==null)&&!o)throw new Error("Targets must have same number of args");if(p!=null){let u;o?u=e.map((d,h)=>{let g=d.contentText,x=(p.isRaw?null:p.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return h>0&&x!=null?x+g:g}).join(""):u=a.contentText,i.push({edit:p.constructChangeEdit(u),editor:p.editor,originalTarget:p.target,isSource:!1})}else p=r[0];n.includes(a)||(n.push(a),this.type==="bring"&&i.push({edit:a.toDestination("to").constructChangeEdit(p.target.contentText),editor:a.editor,originalTarget:a,isSource:!0}))}),this.type==="move"&&rh(n).forEach(a=>{i.push({edit:a.constructRemovalEdit(),editor:a.editor,originalTarget:a,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return Je(await Di(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),a=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),p=a.map(({edit:x})=>x.range),u=D().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:h}=await Fe({rangeUpdater:this.rangeUpdater,editor:u,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:p,behavior:0}}}),g=[...this.getMarks(o,d),...this.getMarks(a,h)];return g.sort((x,b)=>n.findIndex(w=>w.originalTarget===x.target)-n.findIndex(w=>w.originalTarget===b.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],a=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:a.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>e.find(i=>i.target===n).selection;return Promise.all([Oe(D(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Oe(D(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function WD(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var nh=class extends kl{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0",getSourceRangeCallback:eh};this.run=this.run.bind(this)}async run(r,n){r=WD(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:l}}},ih=class extends kl{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:k7};this.run=this.run.bind(this)}async run(r,n){r=WD(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:l}}},oh=class extends kl{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0",getSourceRangeCallback:eh};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,a)=>{let l=n[a];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function k7(t){return t.getRemovalHighlightRange()}var Pl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){vr(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Ml=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=Sr(e),n=e.map(o=>new He({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await D().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var Ha=t=>new Pt({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var Wa=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Oe(D(),e,"referenced"),r.ensureSingleEditor&&Sr(e),r.ensureSingleTarget&&vr(e);let n=D().activeEditableTextEditor,i=r.setSelection?UD:tt,o=Je(await i(e,(a,l)=>this.runForEditor(r,a,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=D().getEditableTextEditor(r),o=r.selections,a=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:p,targetSelections:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(p),r.document.version===a?n:u.map(d=>Ha({editor:r,selection:d}))}};var jt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new Wa(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=D().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,a)=>P7(o,i?a.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},sh=class extends jt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},ah=class extends jt{constructor(){super(...arguments);this.command="toggleLineComment"}},ch=class extends jt{constructor(){super(...arguments);this.command="indentLine"}},lh=class extends jt{constructor(){super(...arguments);this.command="outdentLine"}},ph=class extends jt{constructor(){super(...arguments);this.command="fold"}},uh=class extends jt{constructor(){super(...arguments);this.command="unfold"}},fh=class extends jt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},dh=class extends jt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},mh=class extends jt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},hh=class extends jt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},gh=class extends jt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},yh=class extends jt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},xh=class extends jt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Th=class extends jt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}};function P7(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Sh=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(D().capabilities.commands.clipboardCopy!=null)return new sh(this.rangeUpdater).run(e,r);r.showDecorations&&await Oe(D(),e,"referenced",i=>i.contentRange);let n=e.map(i=>i.contentText).join(`
`);return await D().clipboard.writeText(n),{thatTargets:e}}};var vh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await D().flashRanges(e.flatMap(i=>{let{editor:o,contentRange:a}=i,l=i.getRemovalHighlightRange();return i.isLine?[{editor:o,range:vt(a),style:"referenced"},{editor:o,range:rn(l),style:"pendingDelete"}]:[{editor:o,range:vt(a),style:"referenced"},...M7(a,l).map(p=>({editor:o,range:vt(p),style:"pendingDelete"}))]}));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function M7(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,a=[];return i.isBefore(r)&&a.push(new W(i,r)),o.isAfter(n)&&a.push(new W(n,o)),a}var Al=class{constructor(){this.run=this.run.bind(this)}async run(e){return await tt(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(a=>{let l=a.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new pv;await D().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},pv=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function $D(t,e,r,n){let i=r.destinations.map((b,w)=>{if(n||b.getEditNewActionType()==="edit")return{destination:b,index:w}}).filter(b=>!!b);if(i.length===0)return r;let o=i.map(b=>b.destination.constructChangeEdit("")),a=r.cursorRanges.map((b,w)=>({range:b,index:w})).filter(({range:b})=>b!=null),l=a.map(({index:b})=>b),p=a.map(({range:b})=>b),u=o.map(b=>b.range),{thatRanges:d,cursorRanges:h,editRanges:g}=await Fe({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:p,editRanges:{selections:u,behavior:0}}}),x=[...r.cursorRanges];return St(l,h).forEach(([b,w])=>{x[b]=w}),i.forEach((b,w)=>{let M=o[w].updateRange(g[w]);x[b.index]=M}),{destinations:r.destinations,thatRanges:d,cursorRanges:x}}async function qD({acceptsLocation:t},e,r,n){let i=n.destinations.map((h,g)=>{if(h.getEditNewActionType()==="insertLineAfter")return{destination:h,index:g}}).filter(h=>!!h);if(i.length===0)return n;let o=i.map(({destination:h})=>h.contentRange),a=n.destinations.map(({contentRange:h})=>h),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(h=>h.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:p,thatRanges:u}=await Fe({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:a,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((h,g)=>{d[h.index]=r.selections[g]}),{destinations:n.destinations.map((h,g)=>h.withTarget(h.target.withContentRange(p[g]))),thatRanges:u,cursorRanges:d}}async function jD(t,e){let r=vr(e),n=D().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);await t.setSelection.run([r.target]);let o=l=>l;i?o=await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow();let a=pn([r.target.thatTarget]);return a[0].selection=o(a[0].selection),{thatSelections:a}}var bh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return jD(this.actions,e);let r=D().getEditableTextEditor(Sr(e)),n={destinations:e,thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=D().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await qD(i,this.rangeUpdater,r,n)),n=await $D(this.rangeUpdater,r,n,!o);let a=n.destinations.map((l,p)=>n.cursorRanges[p].toSelection(l.target.isReversed));return await r.setSelections(a,{focusEditor:!0}),{thatSelections:pn(n.destinations.map(l=>l.target),n.thatRanges)}}};var wh=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(Jn)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},_h=class extends wh{constructor(){super(...arguments);this.insertionMode="before"}},Eh=class extends wh{constructor(){super(...arguments);this.insertionMode="after"}};var Dl=class{constructor(e){this.callbackAction=new Wa(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:a,showDecorations:l}={}){let p=n??[];return this.callbackAction.run(e,{callback:()=>D().executeCommand(r,...p),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:a??!0,showDecorations:l??!0})}};var Rh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){vr(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),Hc(D().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},kh=class extends Rh{find(e){return D().findInDocument(e)}},Ph=class extends Rh{find(e){return D().findInWorkspace(e)}};var $a=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=vr(e);return await Oe(D(),e,"referenced"),await D().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:pn(e)}}};function zD(t,e){let r=[],n=0,i=null,[o,...a]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...a.map(p=>({text:p,startIndex:0}))].forEach(({text:p,startIndex:u})=>{let d=p.match(/^\s*/)?.[0]??"",h=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let g=Math.max(h,u),x=tT("	",n),b=p.slice(g);r.push(x+b)}),r}function GD(t,e){let r=nT(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var Il=class{constructor(){this.substitutions=[]}addSubstitution(e,r=!1){let n=A7(10);return this.substitutions.push({to:e,randomId:n,isQuoted:r}),n}makeSubstitutions(e){return this.substitutions.forEach(({to:r,randomId:n,isQuoted:i})=>{let o=i?`"${n}"`:n;e=e.split(o).join(r)}),e}};function A7(t){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}var qa=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r){let n=vr(e),i=n.editor;if(Oe(D(),e,"referenced"),r==null&&(r=await D().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"})),r==null)return{};let o=1,a=i.document.offsetAt(n.contentRange.start),l=i.selections.filter(M=>n.contentRange.contains(M)).map((M,U)=>({offsets:{start:i.document.offsetAt(M.start)-a,end:i.document.offsetAt(M.end)-a},defaultName:`variable${U+1}`,placeholderIndex:o++})),p=new Il,u=i.document.getText(new W(n.contentRange.start.with(void 0,0),n.contentRange.start)),d=i.document.getText(n.contentRange),h=GD(d,[...en(d,/\$|\\/g,M=>({offsets:{start:M.index,end:M.index+M[0].length},text:M[0]==="\\"?`\\${M[0]}`:`\\\\${M[0]}`})),...l.map(({offsets:M,defaultName:U,placeholderIndex:Z})=>({offsets:M,text:p.addSubstitution(["\\$","${",Z,":",U,"}"].join(""))}))]),g=zD(h,u),x=({placeholderIndex:M})=>{let U="$"+M,Z=p.addSubstitution("{$"+o+++"}",!0);return[U,Z]},b={[r]:{definitions:[{scope:{langIds:[i.document.languageId]},body:g}],description:"$"+o++,variables:l.length===0?void 0:Object.fromEntries(l.map(x))}},w=p.makeSubstitutions(JSON.stringify(b,null,2)),F=D().getEditableTextEditor(i);return D().runMode==="test"?await F.setSelections([i.document.range.toSelection(!1)]):await this.snippets.openNewSnippetFile(r),await F.insertSnippet(w),{thatSelections:e.map(({editor:M,contentSelection:U})=>({editor:M,selection:U}))}}};var Fl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Cl=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Oe(D(),e,"referenced"),n&&vr(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var Ol=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(D().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(D().visibleTextEditors.map(n=>D().setHighlightRanges(r,n,[]))):await tt(e,(n,i)=>D().setHighlightRanges(r,n,i.map(BD))),{thatTargets:e}}};var Mh=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(Jn)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=Je(await tt(e,this.runForEditor));return await D().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:vt(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),a=i.map(({range:g})=>g),l=D().getEditableTextEditor(e),{contentSelections:p,editRanges:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:a,behavior:0}}}),d=St(i,u).map(([g,x])=>g.updateRange(x)),h=e.selections[0];return p.some(g=>g.intersection(h)!=null)&&await l.revealRange(h),{sourceMark:pn(r,d),thatMark:pn(r,p)}}},Ah=class extends Mh{constructor(e,r){super(e,r,!0)}},Dh=class extends Mh{constructor(e,r){super(e,r,!1)}};var Nl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(Jn)]}async run(e){let r=await tt(e,async(i,o)=>{let a=this.getEdits(o),l=o.map(d=>d.thatTarget.contentSelection),{contentSelections:p,editRanges:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(i),edits:a,selections:{contentSelections:l,editRanges:{selections:a.map(d=>d.range),behavior:0}}});return{thatMark:p.map(d=>({editor:i,selection:d})),flashRanges:qo(a,u).map(([d,h])=>({editor:i,range:d.isLine?d.updateRange(h):h,isLine:d.isLine}))}});return await D().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:a,isLine:l})=>({editor:o,range:l?rn(a):vt(a),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},Ih=class extends Nl{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[Oh(r,"before"),Oh(r,"after")])}},Fh=class extends Nl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>Oh(r,"before"))}},Ch=class extends Nl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>Oh(r,"after"))}};function Oh(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.isLine}}var uv=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},xo=class{constructor(){this._children=[]}appendChild(e){return e instanceof br&&this._children[this._children.length-1]instanceof br?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function a(l,p){for(let u of l)u.parent=p,a(u.children,u)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Uh)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},br=class t extends xo{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},Nh=class extends xo{},Vr=class t extends Nh{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Lh?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},Lh=class t extends xo{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof br&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},fv=class t extends xo{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(a=>a instanceof Dn&&!!a.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof Dn){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},Dn=class t extends xo{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},To=class t extends Nh{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new br(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function KD(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var Uh=class t extends xo{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Vr&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return KD([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Vr&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof To&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){KD(this.children,e)}},ja=class{constructor(){this._scanner=new uv;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new Uh;for(;this._parse(i););let o=new Map,a=[],l=0;i.walk(p=>(p instanceof Vr&&(l+=1,p.isFinalTabstop?o.set(0,void 0):!o.has(p.index)&&p.children.length>0?o.set(p.index,p.children):a.push(p)),!0));for(let p of a){let u=o.get(p.index);if(u){let d=new Vr(p.index);d.transform=p.transform;for(let h of u)d.appendChild(h.clone());i.replace(p,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Vr(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new br(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Vr(Number(r)):new To(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Vr(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new br("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let a=new Lh;for(;;){if(this._parseChoiceElement(a)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(a),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new br(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new To(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new br("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new fv,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new br(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Dn(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new Dn(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new Dn(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Dn(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Dn(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let a=this._until(4);if(a)return e.appendChild(new Dn(Number(i),void 0,o,a)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Dn(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new br(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var QD=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function Vh(t,e,r){let n=D7(t)+1,i={};t.walk(o=>{if(o instanceof To){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new br(r[o.name])]);else if(!QD[o.name]){let a;o.name in i?a=i[o.name]:(a=n++,i[o.name]=a);let l=new Vr(a);o.children.forEach(p=>l.appendChild(p)),o.parent.replace(o,[l])}}else o instanceof Vr&&o.index.toString()===e&&o.parent.replace(o,[new To("TM_SELECTED_TEXT")]);return!0})}function D7(t){let e=0;return t.walk(r=>(r instanceof Vr&&(e=Math.max(e,r.index)),!0)),e}function Bh(t,e,r){let n=e.map(o=>I7(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function I7(t,e,r){let n=e.editor.document.languageId;return r.findIndex(({scope:i})=>{if(i==null)return!0;let{langIds:o,scopeTypes:a,excludeDescendantScopeTypes:l}=i;if(o!=null&&!o.includes(n))return!1;if(a!=null){let p=a.concat(l??[]),u,d;for(let h of p)try{let g=t.create({type:"containingScope",scopeType:{type:h}}).run(e)[0];e.contentRange.isRangeEqual(g.contentRange)&&(g=t.create({type:"containingScope",scopeType:{type:h},ancestorIndex:1}).run(e)[0]),(u==null||u.contentRange.contains(g.contentRange))&&(u=g,d=h)}catch{continue}return d==null?!1:u!=null&&!(l??[]).includes(d)}return!0})}var Ll=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new ja;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new wm(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){if(e.type==="named"){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}else return e.scopeTypes??[]}getSnippetInfo(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=Bh(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(a){return a==null?void 0:F7(i,o,a)}}}else return{body:e.body,formatSubstitutions(n){return n}}}async run(e,r){let n=D().getEditableTextEditor(Sr(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(u=>new Pt({editor:n,contentRange:u,isReversed:!1,hasExplicitRange:!0}))),a=this.snippetParser.parse(i);Vh(a,null,o(r.substitutions));let l=a.toTextmateString(),{editorSelections:p}=await Fe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}};function F7(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let a=Zk[o];if(a==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,a(i.split(" "))]}))}var Ul=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(Jn)]}async run(e){return await Oe(D(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:Je(await tt(e,async(n,i)=>{let{thatRanges:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(n),edits:C7(n,i),selections:{thatRanges:i.map(({contentRange:a})=>a)}});return qo(i,o).map(([a,l])=>({editor:n,selection:l.toSelection(a.isReversed)}))}))}}};function C7(t,e){let r=[];for(let n of e){let i=n.joinAs==="line"?N7(n):O7(n);r.push(...i)}return r}function O7(t){let{editor:e,contentRange:r}=t,n=yr(e.document.languageId).tokenMatcher,i=sn(n,e,r,"forward");return Array.from(xS(i)).map(([o,a])=>({range:new W(o.end,a.start),text:"",isReplace:!0}))}function N7(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=xa(jM(n,i+1),a=>e.lineAt(a));return Array.from(xS(o)).map(([a,l])=>({range:new W(a.rangeTrimmed?.end??a.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var Hh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=D().getEditableTextEditor(Sr(e)),n=D().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:a,editorSelections:l}=await Fe({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(a),n!=null&&!n.isActive&&await n.focus(),await D().flashRanges(l.map(p=>({editor:r,range:vt(p),style:"justAdded"}))),{thatSelections:l.map(p=>({editor:r,selection:p}))}}};var Wh=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await D().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?qo(e,n).map(([a,l])=>({destination:a,text:l})):e.map(a=>({destination:a,text:r}));return{thatSelections:Je(await Di(i,({destination:a})=>a.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:a,text:l})=>a.constructChangeEdit(l)),{editSelections:i}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:a})=>a),behavior:0}}}),o=qo(n,i).map(([a,l])=>a.updateRange(l).toSelection(l.isReversed));return await D().flashRanges(o.map(a=>({editor:e,range:vt(a),style:"justAdded"}))),o.map(a=>({editor:e,selection:a}))}};var $h=class{constructor(e,r){this.run=this.run.bind(this),this.runner=D().capabilities.commands.clipboardPaste!=null?new Hh(e,r):new Wh(e)}run(e){return this.runner.run(e)}};var Vl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=rh(e),r&&await Oe(D(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:Je(await tt(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(a=>a.constructRemovalEdit()),i=D().getEditableTextEditor(e),{editRanges:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:a})=>a)}});return St(r,o).map(([a,l])=>new ao({editor:a.editor,isReversed:a.isReversed,contentRange:l}))}};var Bl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Oe(D(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=St(e,n).map(([l,p])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(p)})),o=[],a=[];return await Di(i,l=>l.editor,async(l,p)=>{let u=p.map(({edit:g})=>g),{contentSelections:d,editRanges:h}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(l),edits:u,selections:{contentSelections:p.map(({target:g})=>g.contentSelection),editRanges:{selections:u.map(({range:g})=>g),behavior:0}}});for(let[g,x]of St(p,d))o.push(g.target.withContentRange(x));for(let[g,x]of St(p,h))a.push({editor:l,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:a}}};var Hl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[YS(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(a=>{let l=a.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Oe(D(),i,"pendingModification0");let o=await tt(i,async(a,l)=>{let p=l.map((h,g)=>({editor:a,range:h.contentRange,text:g%2===0?r:n})),{sourceRanges:u,thatRanges:d}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(a),edits:p,selections:{sourceRanges:e.map(h=>h.thatTarget.contentRange),thatRanges:e.map(h=>h.contentRange)}});return{sourceMark:pn(e,u),thatMark:pn(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:a})=>a),thatSelections:o.flatMap(({thatMark:a})=>a)}}};var Wl=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=Xc(e,a=>a.editor),n=Array.from(r,([a,l])=>({lineNumber:L7(l,this.at),editor:a})),i=D().activeEditableTextEditor;for(let a of n)await D().getEditableTextEditor(a.editor).revealLine(a.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(a=>{let l=a.editor.visibleRanges,p=l[0].start.line,u=l[l.length-1].end.line;return a.contentRange.start.line>p||a.contentRange.end.line<u||a.contentRange.start.line===p&&a.contentRange.end.line===u});return await D().flashRanges(o.map(a=>({editor:a.editor,range:rn(a.contentRange),style:"referenced"}))),{thatTargets:e}}},qh=class extends Wl{constructor(){super("top")}},jh=class extends Wl{constructor(){super("center")}},zh=class extends Wl{constructor(){super("bottom")}};function L7(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var za=class{constructor(){this.run=this.run.bind(this)}getSelection(e){return e.contentSelection}async run(e){let r=Sr(e),n=e.map(this.getSelection);return await D().getEditableTextEditor(r).setSelections(n,{focusEditor:!0}),{thatTargets:e}}},Gh=class extends za{getSelection(e){return new Te(e.contentRange.start,e.contentRange.start)}},Kh=class extends za{getSelection(e){return new Te(e.contentRange.end,e.contentRange.end)}};var $l=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var ql=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Oe(D(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,a=this.treeSitter.getTree(i.document);r.push(U7(i.document,a,o))}return D().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function U7(t,e,r){let n=[],i=[];return ZD(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function ZD(t,e,r,n,i){for(;;){let o=new W(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let a="  ".repeat(i),l=V7(n),p=a+l;if(n.nodeIsNamed)t.push(`${p}${n.nodeType} [${o}]`),e.push(`${p}(${n.nodeType}`),n.gotoFirstChild()?(ZD(t,e,r,n,i+1),n.gotoParent(),e.push(`${a})`)):e[e.length-1]+=")";else{let u=`"${n.nodeType}"`;t.push(`${p}${u} [${o}]`),e.push(`${p}${u}`)}}if(!n.gotoNextSibling())return}}function V7(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var Qh=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Oe(D(),e,"pendingModification0"),{thatTargets:Je(await tt(e,this.runForEditor))})}hasCapability(){return this.isIndent?D().capabilities.commands.indentLine!=null:D().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new ch(this.rangeUpdater):new lh(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?B7(e,r):H7(e,r),{targetSelections:i}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return St(r,i).map(([o,a])=>Ha({editor:e,selection:a.toSelection(o.isReversed)}))}},Zh=class extends Qh{constructor(e){super(e,!0)}},Yh=class extends Qh{constructor(e){super(e,!1)}};function B7(t,e){let{document:r}=t,n=YD(e),i=W7(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function H7(t,e){let{document:r}=t,n=YD(e),i=$7(t);return n.map(o=>{let a=r.lineAt(o),l=a.text.match(i),{start:p}=a.range,u=p.translate(void 0,l?.[0].length);return{range:new W(p,u),text:""}})}function YD(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function W7(t){if(t.options.insertSpaces){let e=JD(t);return" ".repeat(e)}return"	"}function $7(t){if(t.options.insertSpaces){let e=JD(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function JD(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var jl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&Hc(D().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((a,l)=>a.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(a=>a.toDestination("to")),i);return{thatSelections:o}}},Jh=class extends jl{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},Xh=class extends jl{sortTexts(e){return e.reverse()}},eg=class extends jl{sortTexts(e){return rT(e)}};var zl=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(Jn)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Oe(D(),r,"referenced"),await tt(e,async(n,i)=>{let o=i.map(a=>{let l=a.contentRange;return a.isLine?{type:"line",startLine:l.start.line,endLine:l.end.line}:{type:"inline",range:l}});await D().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var Gl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await tt(e,async(o,a)=>{let l=a.map(w=>({start:new Te(w.contentRange.start,w.contentRange.start),end:new Te(w.contentRange.end,w.contentRange.end)})),p=l.flatMap(({start:w,end:F})=>[{text:r,range:w},{text:n,range:F,isReplace:!0}]),u=a.map(w=>w.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:h,sourceSelections:g,thatSelections:x}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(o),edits:p,selections:{boundariesStartSelections:{selections:l.map(({start:w})=>w),behavior:2},boundariesEndSelections:{selections:l.map(({end:w})=>w),behavior:3},sourceSelections:{selections:u,behavior:1},thatSelections:{selections:u,behavior:0}}}),b=[...d,...h];return await D().flashRanges(b.map(w=>({editor:o,range:vt(w),style:"justAdded"}))),{sourceMark:g.map(w=>({editor:o,selection:w})),thatMark:x.map(w=>({editor:o,selection:w}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var Kl=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new ja;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new Ia(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){if(e.type==="named"){let{name:r,variableName:n}=e,a=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return a==null?void 0:{type:a}}else return e.scopeType}getBody(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return Bh(this.modifierStageFactory,r,i.definitions).body.join(`
`)}else return e.body}async run(e,r){let n=D().getEditableTextEditor(Sr(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);Vh(o,r.variableName);let a=o.toTextmateString();await Oe(D(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),p=()=>n.insertSnippet(a,l),{targetSelections:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:n,callback:p,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(d=>({editor:n,selection:d}))}}};var q7=/-?\d+(\.\d+)?/g,tg=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Di(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let p=n.offsetAt(l.contentRange.start),u=l.contentText,d=Bc(u,q7);for(let h of d)i.push(j7(e,p,h)),o.push(z7(this.isIncrement,h.text))}let{thatSelections:a}=await this.actions.replace.run(i,o);return a}},rg=class extends tg{constructor(e){super(e,!0)}},ng=class extends tg{constructor(e){super(e,!1)}};function j7(t,e,r){return new He({editor:t,isReversed:!1,contentRange:new W(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function z7(t,e){return e.includes(".")?K7(t,e).toString():G7(t,e).toString()}function G7(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function K7(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var ig=class{constructor(e,r,n,i){this.treeSitter=e;this.snippets=r;this.rangeUpdater=n;this.modifierStageFactory=i;this.callAsFunction=new Pl(this);this.clearAndSetSelection=new Ml(this);this.copyToClipboard=new Sh(this,this.rangeUpdater);this.cutToClipboard=new vh(this);this.decrement=new ng(this);this.deselect=new Al;this.editNew=new bh(this.rangeUpdater,this);this.editNewLineAfter=new Eh(this,this.modifierStageFactory);this.editNewLineBefore=new _h(this,this.modifierStageFactory);this.executeCommand=new Dl(this.rangeUpdater);this.extractVariable=new Th(this.rangeUpdater);this.findInDocument=new kh(this);this.findInWorkspace=new Ph(this);this.foldRegion=new ph(this.rangeUpdater);this.followLink=new $a({openAside:!1});this.followLinkAside=new $a({openAside:!0});this.generateSnippet=new qa(this.snippets);this.getText=new Cl;this.highlight=new Ol;this.increment=new rg(this);this.indentLine=new Zh(this.rangeUpdater);this.insertCopyAfter=new Dh(this.rangeUpdater,this.modifierStageFactory);this.insertCopyBefore=new Ah(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineAfter=new Ch(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineBefore=new Fh(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLinesAround=new Ih(this.rangeUpdater,this.modifierStageFactory);this.insertSnippet=new Ll(this.rangeUpdater,this.snippets,this,this.modifierStageFactory);this.joinLines=new Ul(this.rangeUpdater,this.modifierStageFactory);this.breakLine=new th(this.rangeUpdater);this.moveToTarget=new ih(this.rangeUpdater);this.outdentLine=new Yh(this.rangeUpdater);this.pasteFromClipboard=new $h(this.rangeUpdater,this);this.randomizeTargets=new eg(this);this.remove=new Vl(this.rangeUpdater);this.rename=new fh(this.rangeUpdater);this.replace=new Bl(this.rangeUpdater);this.replaceWithTarget=new nh(this.rangeUpdater);this.revealDefinition=new hh(this.rangeUpdater);this.revealTypeDefinition=new gh(this.rangeUpdater);this.reverseTargets=new Xh(this);this.rewrapWithPairedDelimiter=new Hl(this.rangeUpdater,this.modifierStageFactory);this.scrollToBottom=new zh;this.scrollToCenter=new jh;this.scrollToTop=new qh;this["private.setKeyboardTarget"]=new $l("keyboard");this["experimental.setInstanceReference"]=new $l("instanceReference");this.setSelection=new za;this.setSelectionAfter=new Kh;this.setSelectionBefore=new Gh;this.showDebugHover=new xh(this.rangeUpdater);this.showHover=new yh(this.rangeUpdater);this.showQuickFix=new mh(this.rangeUpdater);this.showReferences=new dh(this.rangeUpdater);this.sortTargets=new Jh(this);this.swapTargets=new oh(this.rangeUpdater);this.toggleLineBreakpoint=new zl(this.modifierStageFactory);this.toggleLineComment=new ah(this.rangeUpdater);this.unfoldRegion=new uh(this.rangeUpdater);this.wrapWithPairedDelimiter=new Gl(this.rangeUpdater);this.wrapWithSnippet=new Kl(this.rangeUpdater,this.snippets,this.modifierStageFactory);this["private.showParseTree"]=new ql(this.treeSitter);this["private.getTargets"]=new Fl}};async function XD(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return og(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:sg(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return og(i.destination)?{action:"insert",modifiers:sg(i.destination),text:await dv(e,i.source)}:null;case"moveToTarget":if(og(i.destination)){let o=await dv(e,i.source);return await Q7(e,i.source),{action:"insert",modifiers:sg(i.destination),text:o}}return null;case"callAsFunction":return ag(i.argument)?{action:i.name,modifiers:cg(i.argument),callee:await dv(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return ag(i.target)?{action:i.name,modifiers:cg(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return og(i.destination)?{action:i.name,modifiers:sg(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return ag(i.target)?{action:i.name,modifiers:cg(i.target)}:null}}function og(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&ag(t.target):!1}function ag(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function sg(t){return t.type==="primitive"?cg(t.target):[]}function cg(t){if(t.type==="primitive"){if(t.modifiers!=null&&t.modifiers.length>0)return t.modifiers;if(t.mark?.type==="cursor")return[{type:"containingTokenIfEmpty"}]}return[]}async function dv(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function Q7(t,e){await t({name:"remove",target:e})}function eI(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((a,l)=>[a,l]);for(let[a,l]of o.reverse())for(let p of Z7){let u=p.accept(a);if(u.accepted){let[d,h]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],g={...t,anchor:h.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:h},active:Mf(i,x=>{x.modifiers=x.modifiers.slice(Fc(x.modifiers,b=>p.accept(b).accepted)+1)})};return g=u.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:d}}}return t}var Z7=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function hv(t,e){switch(t.type){case"list":return Y7(t,e);case"range":return tI(t,e);case"primitive":return lg(t,e);case"implicit":return t}}function Y7(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return tI(r,i);case"primitive":return lg(r,i)}})}}function tI(t,e){let r=J7(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return eI(r,n)}function J7(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:lg(t.anchor,e),active:lg(t.active,e.concat(t.anchor))}}function lg(t,e){let r=mv(t.mark??(X7(t)?rQ(e):null)??{type:"cursor"}),n=rI(t)??nQ(e)??iQ(e)??[];return{type:t.type,mark:r,modifiers:n}}function X7(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function rI(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function eQ(t){if(tQ(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function tQ(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function rQ(t){return Ql(t,e=>e.mark)}function nQ(t){return Ql(t,rI)}function iQ(t){return Ql(t,eQ)}function Ql(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=Ql([n.anchor],e);if(i!=null)return i;break}case"list":{let i=Ql(n.elements,e);if(i!=null)return i;break}}}}function mv(t){switch(t.type){case"range":return{...t,anchor:mv(t.anchor),active:mv(t.active)};case"target":return{type:"target",target:hv(t.target,[])};default:return t}}var pg=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new gv(this.debug)}async run(e){if($o(e)){let u=await XD(this.commandServerApi,this.runAction,e);if(u!=null)return{fallback:u}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:a,instanceReferenceTargets:l,keyboardTargets:p}=await this.runAction(e.action);return this.storedTargets.set("that",nI(i,n)),this.storedTargets.set("source",nI(a,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",p,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(Jf(e.content,e.arguments));default:{let r=this.actions[e.name];return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},gv=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=hv(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function nI(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(Ha):t}var ug=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Pt({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var fg=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=D().visibleTextEditors.find(a=>a.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new W(r.line,r.character,n.line,n.character);return[new Pt({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var dg=class{constructor(e){this.mark=e}run(){let e=D().activeTextEditor;if(e==null)return[];let r=oQ(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[TS(e,!1,n)]}},oQ=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,a=Math.floor(i/100)*100,l=[],p=[],u=a+r;for(;u<=o;)u>=i&&(t.visibleRanges.find(h=>u>=h.start.line&&u<=h.end.line)?l.push(u):p.push(u)),u+=100;if(l.length===1)return l[0];if(l.length+p.length>1)throw new Error("Multiple lines matching");if(p.length===1)return p[0];throw new Error("Line is not in viewport")}}};var mg=class{constructor(e){this.mark=e}run(){return[]}};var hg=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[ho(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var gg=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var yg=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var xg=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new ha;case"that":case"source":case"keyboard":return new gg(this.storedTargets,e.type);case"decoratedSymbol":return new ug(this.readableHatMap,e);case"lineNumber":return new dg(e);case"range":return new hg(this,e);case"nothing":return new mg(e);case"target":return new yg(this.targetPipelineRunner,e);case"explicit":return new fg(e)}}};async function iI(t,e,r,n,i,o,a,l,p,u){r.active&&(r.log("command:"),r.log(JSON.stringify(u,null,2)));let d=tS(u),h=await n.getReadableMap(d.usePrePhraseSnapshot),g=aQ(t,e,a,r,o,h,i,l);for(let b of p)g=b.wrapCommandRunner(h,g);let x=await g.run(d);return await sQ(u,x)}async function sQ(t,e){if($o(t))return e;if("returnValue"in e)return e.returnValue}function aQ(t,e,r,n,i,o,a,l){let p=new Ba(r,i,new ba(r)),u=new xg(o,i),d=new Dm(p,u);return u.setPipelineRunner(d),new pg(e,n,i,d,new ig(t,a,l,p))}var oI=["clojure","css","latex","ruby","rust","scala","scss"];async function sI(t,e){await cQ(t,e)}async function cQ(t,e){let r=[];for(let n of oI)await t.loadLanguage(n),await e.loadLanguage(n),Si(Rl[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function aI(t){return jk(t)?Yc(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${Yc(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var Tg=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{Xt(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...Wo.filter(r=>r!=="instance").map(r=>({type:r})),...Sf.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:aI(e),isLanguageSpecific:lQ(e)}}dispose(){this.disposable.dispose()}};function lQ(t){switch(t.type){case"string":case"argumentOrParameter":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function yv(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((a,l)=>a.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=Ju(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=Ju(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function fs(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.isLine?rn(t.getRemovalHighlightRange()):vt(t.getRemovalHighlightRange()),leadingDelimiter:cI(t.getLeadingDelimiterTarget()),trailingDelimiter:cI(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(fs),boundary:t.getBoundary()?.map(fs),insertionDelimiter:t.insertionDelimiter}}function cI(t){return t!=null?fs(t):void 0}function lI(t,e,r,n,i){return xa(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),o=>({domain:o.domain,ranges:o.getTargets(!1).map(a=>({range:a.contentRange,targets:i?pQ(r,a).map(fs):void 0}))}))}function pQ(t,e){try{return t.run(e)}catch(r){if(r.name==="NoContainingScopeError")return[];throw r}}function pI(t,e,r){return xa(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(fs)}))}var Sg=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.create(r,e.document.languageId);return i==null?[]:pI(e,i,yv(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,a=this.scopeHandlerFactory.create(r,o);if(a==null)return[];let l=this.scopeHandlerFactory.create(a.iterationScopeType,o);return l==null?[]:lI(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),yv(e,a,n),i)}};var vg=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Gn(D().configuration,()=>this.onChange());this.disposables.push(D().onDidChangeVisibleTextEditors(n.run),D().onDidOpenTextDocument(n.run),D().onDidCloseTextDocument(n.run),D().onDidChangeTextDocument(n.run),D().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{D().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(a){if(nt(D().messages,"ScopeRangeWatcher.provide",a.message),o=[],D().runMode==="test")throw a}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{Xt(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{D().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{Xt(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var bg=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.create(r,n);return i==null?fI(n,r):uI(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.create(r,n);if(i==null)return fI(n,r);let o=this.scopeHandlerFactory.create(i.iterationScopeType,n);return o==null?3:uI(e,o)?0:1}};function uI(t,e){return!Kk(e.generateScopes(t,new ae(0,0),"forward"))}function fI(t,e){switch(e.type){case"boundedNonWhitespaceSequence":case"surroundingPair":return 2;case"notebookCell":return 3;default:return Rl[t]?.[e.type]!=null?2:3}}var wg=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Gn(D().configuration,()=>this.onChange());this.disposable=Gk(D().onDidOpenTextDocument(i.run),D().onDidCloseTextDocument(i.run),D().onDidChangeActiveTextEditor(i.run),D().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{Xt(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=D().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function dI({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Fd,commandServerApi:i=new Pd,talonSpokenForms:o=new Id,snippets:a=new Dd}){nd(t);let l=new vd(t),p=new kd,u=new od,d=new Sd(t,u),h=new Nd(o),g=e!=null?new Ed(p,l,e,i):new Md;g.allocateHats();let x=r?await vm.create(t,n,r):new Ad;t.disposeOnExit(p,x,g,l,d);let b=[],w,F=M=>(w=M,iI(n,i,l,g,a,u,x,p,b,M));return{commandApi:{runCommand(M){return F(M)},runCommandSafe(...M){return F(vf(M))},repeatPreviousCommand(){if(w==null)throw new Error("No previous command");return F(w)}},scopeProvider:fQ(x,u,h),customSpokenFormGenerator:h,storedTargets:u,hatTokenMap:g,injectIde:nd,runIntegrationTests:()=>sI(n,x),addCommandRunnerDecorator:M=>{b.push(M)}}}function fQ(t,e,r){let n=new ba(t),i=new Sg(n,new Ba(t,e,n)),o=new vg(t,i),a=new bg(n),l=new Tg(r),p=new wg(t,a,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:a.getScopeSupport,getIterationScopeSupport:a.getIterationScopeSupport,onDidChangeScopeSupport:p.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function mI(t,e){switch(e.type){case"UntypedTarget":return new Pt({editor:t,isReversed:e.isReversed,contentRange:uf(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new Nr({editor:t,isReversed:e.isReversed,contentRange:uf(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var nCe=Symbol("unused");var Zl=class{constructor(e){this.position=e}},iCe={$0:new Zl(0),$1:new Zl(1),$2:new Zl(2)};var hI=require("node:events"),_g=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new hI.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function Br(){return global._neovimRegistry==null&&(global._neovimRegistry=new _g),global._neovimRegistry}var gI="pokey.cursorless";async function Eg(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,a,l]=await e.executeLua(r,[]),p;return l===!0?p=[new Te(new ae(o-1,a-1),new ae(n-1,i-1))]:p=[new Te(new ae(n-1,i-1),new ae(o-1,a-1))],console.debug(`bufferGetSelections(): selections=(${p[0].start.line}, ${p[0].start.character}), (${p[0].end.line}, ${p[0].end.character}) neovim=(${n},${i}),(${o},${a}),reverse=${l}`),p}async function yI(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function xI(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),a=new W(new ae(i-1,0),new ae(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${a.start.line}, ${a.start.character}), (${a.end.line}, ${a.end.character})`),[a]}async function TI(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function Rg(t,e){await e.callFunction("setreg",["*",t])}async function SI(t){return await t.callFunction("getreg",["*"])}async function vI(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function bI(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function wI(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function _I(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var dQ={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0},kg=class{constructor(){this.commands=dQ}};var Yl=class{constructor(e){this.client=e}async readText(){return await SI(this.client)}async writeText(e){return await Rg(e,this.client)}};var Pg=ur(xv(),1);var Xl=class{constructor(){this.notifier=new Wt;this.mocks={...of};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(mQ(n,r))return(0,Pg.get)(i,e)??(0,Pg.get)(this.mocks,e)}return(0,Pg.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function mQ(t,e){return t.languageId===e.languageId}async function Tv(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);n.sort((a,l)=>(EI(a)||RI(a))&&(EI(l)||RI(l))?1:a.range.start.line===l.range.start.line?l.range.start.character-a.range.start.character:l.range.start.line-a.range.start.line),console.debug("neovimEdit() [sorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let a of n)o.push({range:a.range,rangeOffset:i.offsetAt(a.range.start),rangeLength:i.offsetAt(a.range.end)-i.offsetAt(a.range.start),text:a.text});Br().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let a of n){let{range:l,text:p,isReplace:u}=a;p===""?await kI(t,l):l.isEmpty&&!u?await PI(t,l.start,p):await hQ(t,l,p)}return await e.updateTextEditor(),!0}async function kI(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(a+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([a,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function PI(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=a+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let p=a+n[0],u=n[n.length-1]+l;await i.setLines([p,...n.slice(1,n.length-1),u],{start:e.line,end:e.line+1,strictIndexing:!0})}async function hQ(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await kI(t,e),await PI(t,e.start,r)}function EI(t){return t.range.isEmpty&&!t.isReplace}function RI(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function MI(t){return Br().onEvent("onDidChangeTextDocument",t),DI()}function AI(t,e,r){return Br().onEvent("onDidOpenTextDocument",t),DI()}function DI(){return{dispose(){}}}var ep=class{constructor(){this.data={...sf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var C1=ur(xv(),1);var tp=class{async showMessage(e,r,n,...i){}};async function II(t,e){let r=e.activeTextEditor,n=await t.window,i=await Eg(n,t),o=r.document.getText(i[0]);await Rg(o,t)}async function FI(t,e){await vI(t)}var Mg=class{constructor(e,r,n,i,o,a,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=a}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await yI(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await Tv(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await II(this.client,this.neovimIDE)}async clipboardPaste(){await FI(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}};var Bb=ur(require("path"),1);var CI;(()=>{"use strict";var t={470:i=>{function o(p){if(typeof p!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(p))}function a(p,u){for(var d,h="",g=0,x=-1,b=0,w=0;w<=p.length;++w){if(w<p.length)d=p.charCodeAt(w);else{if(d===47)break;d=47}if(d===47){if(!(x===w-1||b===1))if(x!==w-1&&b===2){if(h.length<2||g!==2||h.charCodeAt(h.length-1)!==46||h.charCodeAt(h.length-2)!==46){if(h.length>2){var F=h.lastIndexOf("/");if(F!==h.length-1){F===-1?(h="",g=0):g=(h=h.slice(0,F)).length-1-h.lastIndexOf("/"),x=w,b=0;continue}}else if(h.length===2||h.length===1){h="",g=0,x=w,b=0;continue}}u&&(h.length>0?h+="/..":h="..",g=2)}else h.length>0?h+="/"+p.slice(x+1,w):h=p.slice(x+1,w),g=w-x-1;x=w,b=0}else d===46&&b!==-1?++b:b=-1}return h}var l={resolve:function(){for(var p,u="",d=!1,h=arguments.length-1;h>=-1&&!d;h--){var g;h>=0?g=arguments[h]:(p===void 0&&(p=process.cwd()),g=p),o(g),g.length!==0&&(u=g+"/"+u,d=g.charCodeAt(0)===47)}return u=a(u,!d),d?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(p){if(o(p),p.length===0)return".";var u=p.charCodeAt(0)===47,d=p.charCodeAt(p.length-1)===47;return(p=a(p,!u)).length!==0||u||(p="."),p.length>0&&d&&(p+="/"),u?"/"+p:p},isAbsolute:function(p){return o(p),p.length>0&&p.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var p,u=0;u<arguments.length;++u){var d=arguments[u];o(d),d.length>0&&(p===void 0?p=d:p+="/"+d)}return p===void 0?".":l.normalize(p)},relative:function(p,u){if(o(p),o(u),p===u||(p=l.resolve(p))===(u=l.resolve(u)))return"";for(var d=1;d<p.length&&p.charCodeAt(d)===47;++d);for(var h=p.length,g=h-d,x=1;x<u.length&&u.charCodeAt(x)===47;++x);for(var b=u.length-x,w=g<b?g:b,F=-1,M=0;M<=w;++M){if(M===w){if(b>w){if(u.charCodeAt(x+M)===47)return u.slice(x+M+1);if(M===0)return u.slice(x+M)}else g>w&&(p.charCodeAt(d+M)===47?F=M:M===0&&(F=0));break}var U=p.charCodeAt(d+M);if(U!==u.charCodeAt(x+M))break;U===47&&(F=M)}var Z="";for(M=d+F+1;M<=h;++M)M!==h&&p.charCodeAt(M)!==47||(Z.length===0?Z+="..":Z+="/..");return Z.length>0?Z+u.slice(x+F):(x+=F,u.charCodeAt(x)===47&&++x,u.slice(x))},_makeLong:function(p){return p},dirname:function(p){if(o(p),p.length===0)return".";for(var u=p.charCodeAt(0),d=u===47,h=-1,g=!0,x=p.length-1;x>=1;--x)if((u=p.charCodeAt(x))===47){if(!g){h=x;break}}else g=!1;return h===-1?d?"/":".":d&&h===1?"//":p.slice(0,h)},basename:function(p,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');o(p);var d,h=0,g=-1,x=!0;if(u!==void 0&&u.length>0&&u.length<=p.length){if(u.length===p.length&&u===p)return"";var b=u.length-1,w=-1;for(d=p.length-1;d>=0;--d){var F=p.charCodeAt(d);if(F===47){if(!x){h=d+1;break}}else w===-1&&(x=!1,w=d+1),b>=0&&(F===u.charCodeAt(b)?--b==-1&&(g=d):(b=-1,g=w))}return h===g?g=w:g===-1&&(g=p.length),p.slice(h,g)}for(d=p.length-1;d>=0;--d)if(p.charCodeAt(d)===47){if(!x){h=d+1;break}}else g===-1&&(x=!1,g=d+1);return g===-1?"":p.slice(h,g)},extname:function(p){o(p);for(var u=-1,d=0,h=-1,g=!0,x=0,b=p.length-1;b>=0;--b){var w=p.charCodeAt(b);if(w!==47)h===-1&&(g=!1,h=b+1),w===46?u===-1?u=b:x!==1&&(x=1):u!==-1&&(x=-1);else if(!g){d=b+1;break}}return u===-1||h===-1||x===0||x===1&&u===h-1&&u===d+1?"":p.slice(u,h)},format:function(p){if(p===null||typeof p!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof p);return function(u,d){var h=d.dir||d.root,g=d.base||(d.name||"")+(d.ext||"");return h?h===d.root?h+g:h+"/"+g:g}(0,p)},parse:function(p){o(p);var u={root:"",dir:"",base:"",ext:"",name:""};if(p.length===0)return u;var d,h=p.charCodeAt(0),g=h===47;g?(u.root="/",d=1):d=0;for(var x=-1,b=0,w=-1,F=!0,M=p.length-1,U=0;M>=d;--M)if((h=p.charCodeAt(M))!==47)w===-1&&(F=!1,w=M+1),h===46?x===-1?x=M:U!==1&&(U=1):x!==-1&&(U=-1);else if(!F){b=M+1;break}return x===-1||w===-1||U===0||U===1&&x===w-1&&x===b+1?w!==-1&&(u.base=u.name=b===0&&g?p.slice(1,w):p.slice(b,w)):(b===0&&g?(u.name=p.slice(1,x),u.base=p.slice(1,w)):(u.name=p.slice(b,x),u.base=p.slice(b,w)),u.ext=p.slice(x,w)),b>0?u.dir=p.slice(0,b-1):g&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,r),a.exports}r.d=(i,o)=>{for(var a in o)r.o(o,a)&&!r.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:o[a]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>N}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,l=/^\/\//;function p(O,I){if(!O.scheme&&I)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${O.authority}", path: "${O.path}", query: "${O.query}", fragment: "${O.fragment}"}`);if(O.scheme&&!o.test(O.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(O.path){if(O.authority){if(!a.test(O.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(O.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let u="",d="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(I){return I instanceof g||!!I&&typeof I.authority=="string"&&typeof I.fragment=="string"&&typeof I.path=="string"&&typeof I.query=="string"&&typeof I.scheme=="string"&&typeof I.fsPath=="string"&&typeof I.with=="function"&&typeof I.toString=="function"}scheme;authority;path;query;fragment;constructor(I,$,j,K,Q,te=!1){typeof I=="object"?(this.scheme=I.scheme||u,this.authority=I.authority||u,this.path=I.path||u,this.query=I.query||u,this.fragment=I.fragment||u):(this.scheme=function(me,re){return me||re?me:"file"}(I,te),this.authority=$||u,this.path=function(me,re){switch(me){case"https":case"http":case"file":re?re[0]!==d&&(re=d+re):re=d}return re}(this.scheme,j||u),this.query=K||u,this.fragment=Q||u,p(this,te))}get fsPath(){return U(this,!1)}with(I){if(!I)return this;let{scheme:$,authority:j,path:K,query:Q,fragment:te}=I;return $===void 0?$=this.scheme:$===null&&($=u),j===void 0?j=this.authority:j===null&&(j=u),K===void 0?K=this.path:K===null&&(K=u),Q===void 0?Q=this.query:Q===null&&(Q=u),te===void 0?te=this.fragment:te===null&&(te=u),$===this.scheme&&j===this.authority&&K===this.path&&Q===this.query&&te===this.fragment?this:new b($,j,K,Q,te)}static parse(I,$=!1){let j=h.exec(I);return j?new b(j[2]||u,de(j[4]||u),de(j[5]||u),de(j[7]||u),de(j[9]||u),$):new b(u,u,u,u,u)}static file(I){let $=u;if(i&&(I=I.replace(/\\/g,d)),I[0]===d&&I[1]===d){let j=I.indexOf(d,2);j===-1?($=I.substring(2),I=d):($=I.substring(2,j),I=I.substring(j)||d)}return new b("file",$,I,u,u)}static from(I){let $=new b(I.scheme,I.authority,I.path,I.query,I.fragment);return p($,!0),$}toString(I=!1){return Z(this,I)}toJSON(){return this}static revive(I){if(I){if(I instanceof g)return I;{let $=new b(I);return $._formatted=I.external,$._fsPath=I._sep===x?I.fsPath:null,$}}return I}}let x=i?1:void 0;class b extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=U(this,!1)),this._fsPath}toString(I=!1){return I?Z(this,!0):(this._formatted||(this._formatted=Z(this,!1)),this._formatted)}toJSON(){let I={$mid:1};return this._fsPath&&(I.fsPath=this._fsPath,I._sep=x),this._formatted&&(I.external=this._formatted),this.path&&(I.path=this.path),this.scheme&&(I.scheme=this.scheme),this.authority&&(I.authority=this.authority),this.query&&(I.query=this.query),this.fragment&&(I.fragment=this.fragment),I}}let w={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function F(O,I,$){let j,K=-1;for(let Q=0;Q<O.length;Q++){let te=O.charCodeAt(Q);if(te>=97&&te<=122||te>=65&&te<=90||te>=48&&te<=57||te===45||te===46||te===95||te===126||I&&te===47||$&&te===91||$&&te===93||$&&te===58)K!==-1&&(j+=encodeURIComponent(O.substring(K,Q)),K=-1),j!==void 0&&(j+=O.charAt(Q));else{j===void 0&&(j=O.substr(0,Q));let me=w[te];me!==void 0?(K!==-1&&(j+=encodeURIComponent(O.substring(K,Q)),K=-1),j+=me):K===-1&&(K=Q)}}return K!==-1&&(j+=encodeURIComponent(O.substring(K))),j!==void 0?j:O}function M(O){let I;for(let $=0;$<O.length;$++){let j=O.charCodeAt($);j===35||j===63?(I===void 0&&(I=O.substr(0,$)),I+=w[j]):I!==void 0&&(I+=O[$])}return I!==void 0?I:O}function U(O,I){let $;return $=O.authority&&O.path.length>1&&O.scheme==="file"?`//${O.authority}${O.path}`:O.path.charCodeAt(0)===47&&(O.path.charCodeAt(1)>=65&&O.path.charCodeAt(1)<=90||O.path.charCodeAt(1)>=97&&O.path.charCodeAt(1)<=122)&&O.path.charCodeAt(2)===58?I?O.path.substr(1):O.path[1].toLowerCase()+O.path.substr(2):O.path,i&&($=$.replace(/\//g,"\\")),$}function Z(O,I){let $=I?M:F,j="",{scheme:K,authority:Q,path:te,query:me,fragment:re}=O;if(K&&(j+=K,j+=":"),(Q||K==="file")&&(j+=d,j+=d),Q){let Re=Q.indexOf("@");if(Re!==-1){let or=Q.substr(0,Re);Q=Q.substr(Re+1),Re=or.lastIndexOf(":"),Re===-1?j+=$(or,!1,!1):(j+=$(or.substr(0,Re),!1,!1),j+=":",j+=$(or.substr(Re+1),!1,!0)),j+="@"}Q=Q.toLowerCase(),Re=Q.lastIndexOf(":"),Re===-1?j+=$(Q,!1,!0):(j+=$(Q.substr(0,Re),!1,!0),j+=Q.substr(Re))}if(te){if(te.length>=3&&te.charCodeAt(0)===47&&te.charCodeAt(2)===58){let Re=te.charCodeAt(1);Re>=65&&Re<=90&&(te=`/${String.fromCharCode(Re+32)}:${te.substr(3)}`)}else if(te.length>=2&&te.charCodeAt(1)===58){let Re=te.charCodeAt(0);Re>=65&&Re<=90&&(te=`${String.fromCharCode(Re+32)}:${te.substr(2)}`)}j+=$(te,!0,!1)}return me&&(j+="?",j+=$(me,!1,!1)),re&&(j+="#",j+=I?re:F(re,!1,!1)),j}function ne(O){try{return decodeURIComponent(O)}catch{return O.length>3?O.substr(0,3)+ne(O.substr(3)):O}}let he=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function de(O){return O.match(he)?O.replace(he,I=>ne(I)):O}var mt=r(470);let It=mt.posix||mt,it="/";var N;(function(O){O.joinPath=function(I,...$){return I.with({path:It.join(I.path,...$)})},O.resolvePath=function(I,...$){let j=I.path,K=!1;j[0]!==it&&(j=it+j,K=!0);let Q=It.resolve(j,...$);return K&&Q[0]===it&&!I.authority&&(Q=Q.substring(1)),I.with({path:Q})},O.dirname=function(I){if(I.path.length===0||I.path===it)return I;let $=It.dirname(I.path);return $.length===1&&$.charCodeAt(0)===46&&($=""),I.with({path:$})},O.basename=function(I){return It.basename(I.path)},O.extname=function(I){return It.extname(I.path)}})(N||(N={}))})(),CI=n})();var{URI:OI,Utils:nOe}=CI;var rF=ur(KI(),1);var np=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var wQ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},ip=t=>t.replace(/[[\]\\-]/g,"\\$&"),_Q=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),QI=t=>t.join(""),ZI=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,l=!1,p=!1,u=!1,d=r,h="";e:for(;o<t.length;){let w=t.charAt(o);if((w==="!"||w==="^")&&o===r+1){u=!0,o++;continue}if(w==="]"&&a&&!p){d=o+1;break}if(a=!0,w==="\\"&&!p){p=!0,o++;continue}if(w==="["&&!p){for(let[F,[M,U,Z]]of Object.entries(wQ))if(t.startsWith(F,o)){if(h)return["$.",!1,t.length-r,!0];o+=F.length,Z?i.push(M):n.push(M),l=l||U;continue e}}if(p=!1,h){w>h?n.push(ip(h)+"-"+ip(w)):w===h&&n.push(ip(w)),h="",o++;continue}if(t.startsWith("-]",o+1)){n.push(ip(w+"-")),o+=2;continue}if(t.startsWith("-",o+1)){h=w,o+=2;continue}n.push(ip(w)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let w=n[0].length===2?n[0].slice(-1):n[0];return[_Q(w),!1,d-r,!1]}let g="["+(u?"^":"")+QI(n)+"]",x="["+(u?"":"^")+QI(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,l,d-r,!0]};var In=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var EQ=new Set(["!","?","+","*","@"]),YI=t=>EQ.has(t),RQ="(?!(?:^|/)\\.\\.?(?:$|/))",Ag="(?!\\.)",kQ=new Set(["[","."]),PQ=new Set(["..","."]),MQ=new Set("().*{}+?[]^$\\!"),AQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),bv="[^/]",JI=bv+"*?",XI=bv+"+?",Ka=class t{type;#e;#r;#o=!1;#n=[];#s;#S;#l;#u=!1;#c;#a;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#r=!0),this.#s=r,this.#e=this.#s?this.#s.#e:this,this.#c=this.#e===this?n:this.#e.#c,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#u&&this.#l.push(this),this.#S=this.#s?this.#s.#n.length:0}get hasMagic(){if(this.#r!==void 0)return this.#r;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#r=!0;return this.#r}toString(){return this.#a!==void 0?this.#a:this.type?this.#a=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#a=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#u)return this;this.toString(),this.#u=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#s;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#s}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#s===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#u&&this.#s?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#s?.isStart())return!1;if(this.#S===0)return!0;let e=this.#s;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#s?.type==="!")return!0;if(!this.#s?.isEnd())return!1;if(!this.type)return this.#s?.isEnd();let e=this.#s?this.#s.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,a=!1,l=-1,p=!1;if(r.type===null){let x=n,b="";for(;x<e.length;){let w=e.charAt(x++);if(o||w==="\\"){o=!o,b+=w;continue}if(a){x===l+1?(w==="^"||w==="!")&&(p=!0):w==="]"&&!(x===l+2&&p)&&(a=!1),b+=w;continue}else if(w==="["){a=!0,l=x,p=!1,b+=w;continue}if(!i.noext&&YI(w)&&e.charAt(x)==="("){r.push(b),b="";let F=new t(w,r);x=t.#y(e,F,x,i),r.push(F);continue}b+=w}return r.push(b),x}let u=n+1,d=new t(null,r),h=[],g="";for(;u<e.length;){let x=e.charAt(u++);if(o||x==="\\"){o=!o,g+=x;continue}if(a){u===l+1?(x==="^"||x==="!")&&(p=!0):x==="]"&&!(u===l+2&&p)&&(a=!1),g+=x;continue}else if(x==="["){a=!0,l=u,p=!1,g+=x;continue}if(YI(x)&&e.charAt(u)==="("){d.push(g),g="";let b=new t(x,d);d.push(b),u=t.#y(e,b,u,i);continue}if(x==="|"){d.push(g),g="",h.push(d),d=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),d.push(g),g="",r.push(...h,d),u;g+=x}return r.type=null,r.#r=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#r||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#c.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}toRegExpSource(e){let r=e??!!this.#c.dot;if(this.#e===this&&this.#g(),!this.type){let p=this.isStart()&&this.isEnd(),u=this.#n.map(x=>{let[b,w,F,M]=typeof x=="string"?t.#f(x,this.#r,p):x.toRegExpSource(e);return this.#r=this.#r||F,this.#o=this.#o||M,b}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&PQ.has(this.#n[0]))){let b=kQ,w=r&&b.has(u.charAt(0))||u.startsWith("\\.")&&b.has(u.charAt(2))||u.startsWith("\\.\\.")&&b.has(u.charAt(4)),F=!r&&!e&&b.has(u.charAt(0));d=w?RQ:F?Ag:""}let h="";return this.isEnd()&&this.#e.#u&&this.#s?.type==="!"&&(h="(?:$|\\/)"),[d+u+h,In(u),this.#r=!!this.#r,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#d(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let p=this.toString();return this.#n=[p],this.type=null,this.#r=void 0,[p,In(this.toString()),!1,!1]}let a=!n||e||r||!Ag?"":this.#d(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?Ag:"")+XI;else{let p=this.type==="!"?"))"+(this.isStart()&&!r&&!e?Ag:"")+JI+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;l=i+o+p}return[l,In(o),this.#r=!!this.#r,this.#o]}#d(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#o=this.#o||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",a=!1;for(let l=0;l<e.length;l++){let p=e.charAt(l);if(i){i=!1,o+=(MQ.has(p)?"\\":"")+p;continue}if(p==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(p==="["){let[u,d,h,g]=ZI(e,l);if(h){o+=u,a=a||d,l+=h-1,r=r||g;continue}}if(p==="*"){n&&e==="*"?o+=XI:o+=JI,r=!0;continue}if(p==="?"){o+=bv,r=!0;continue}o+=AQ(p)}return[o,In(e),!!r,a]}};var Qa=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var nr=(t,e,r={})=>(np(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Hr(e,r).match(t)),DQ=/^\*+([^+@!?\*\[\(]*)$/,IQ=t=>e=>!e.startsWith(".")&&e.endsWith(t),FQ=t=>e=>e.endsWith(t),CQ=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),OQ=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),NQ=/^\*+\.\*+$/,LQ=t=>!t.startsWith(".")&&t.includes("."),UQ=t=>t!=="."&&t!==".."&&t.includes("."),VQ=/^\.\*+$/,BQ=t=>t!=="."&&t!==".."&&t.startsWith("."),HQ=/^\*+$/,WQ=t=>t.length!==0&&!t.startsWith("."),$Q=t=>t.length!==0&&t!=="."&&t!=="..",qQ=/^\?+([^+@!?\*\[\(]*)?$/,jQ=([t,e=""])=>{let r=nF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},zQ=([t,e=""])=>{let r=iF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},GQ=([t,e=""])=>{let r=iF([t]);return e?n=>r(n)&&n.endsWith(e):r},KQ=([t,e=""])=>{let r=nF([t]);return e?n=>r(n)&&n.endsWith(e):r},nF=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},iF=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},oF=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",eF={win32:{sep:"\\"},posix:{sep:"/"}},QQ=oF==="win32"?eF.win32.sep:eF.posix.sep;nr.sep=QQ;var Ut=Symbol("globstar **");nr.GLOBSTAR=Ut;var ZQ="[^/]",YQ=ZQ+"*?",JQ="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",XQ="(?:(?!(?:\\/|^)\\.).)*?",eZ=(t,e={})=>r=>nr(r,t,e);nr.filter=eZ;var un=(t,e={})=>Object.assign({},t,e),tZ=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return nr;let e=nr;return Object.assign((n,i,o={})=>e(n,i,un(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,un(t,o))}static defaults(i){return e.defaults(un(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,a={}){super(i,o,un(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,un(t,o))}},unescape:(n,i={})=>e.unescape(n,un(t,i)),escape:(n,i={})=>e.escape(n,un(t,i)),filter:(n,i={})=>e.filter(n,un(t,i)),defaults:n=>e.defaults(un(t,n)),makeRe:(n,i={})=>e.makeRe(n,un(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,un(t,i)),match:(n,i,o={})=>e.match(n,i,un(t,o)),sep:e.sep,GLOBSTAR:Ut})};nr.defaults=tZ;var sF=(t,e={})=>(np(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,rF.default)(t));nr.braceExpand=sF;var rZ=(t,e={})=>new Hr(t,e).makeRe();nr.makeRe=rZ;var nZ=(t,e,r={})=>{let n=new Hr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};nr.match=nZ;var tF=/[?*]|[+@!]\(.*?\)|\[|\]/,iZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Hr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){np(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||oF,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let p=o[0]===""&&o[1]===""&&(o[2]==="?"||!tF.test(o[2]))&&!tF.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(p)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(p=>this.parse(p))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let l=n[i+1],p=n[i+2],u=n[i+3];if(l!==".."||!p||p==="."||p===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let l=n[a];a===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let p=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...p),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);i&&(e[r]=i,e[n]=[])}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let w=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),F=!w&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),M=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),U=!M&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),Z=F?3:w?0:void 0,ne=U?3:M?0:void 0;if(typeof Z=="number"&&typeof ne=="number"){let[he,de]=[e[Z],r[ne]];he.toLowerCase()===de.toLowerCase()&&(r[ne]=he,ne>Z?r=r.slice(ne):Z>ne&&(e=e.slice(Z)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,l=0,p=e.length,u=r.length;a<p&&l<u;a++,l++){this.debug("matchOne loop");var d=r[l],h=e[a];if(this.debug(r,d,h),d===!1)return!1;if(d===Ut){this.debug("GLOBSTAR",[r,d,h]);var g=a,x=l+1;if(x===u){for(this.debug("** at the end");a<p;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;g<p;){var b=e[g];if(this.debug(`
globstar while`,e,g,r,x,b),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,p,b),!0;if(b==="."||b===".."||!i.dot&&b.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===p))}let w;if(typeof d=="string"?(w=h===d,this.debug("string match",d,h,w)):(w=d.test(h),this.debug("pattern match",d,h,w)),!w)return!1}if(a===p&&l===u)return!0;if(a===p)return n;if(l===u)return a===p-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return sF(this.pattern,this.options)}parse(e){np(e);let r=this.options;if(e==="**")return Ut;if(e==="")return"";let n,i=null;(n=e.match(HQ))?i=r.dot?$Q:WQ:(n=e.match(DQ))?i=(r.nocase?r.dot?OQ:CQ:r.dot?FQ:IQ)(n[1]):(n=e.match(qQ))?i=(r.nocase?r.dot?zQ:jQ:r.dot?GQ:KQ)(n):(n=e.match(NQ))?i=r.dot?UQ:LQ:(n=e.match(VQ))&&(i=BQ);let o=Ka.fromGlob(e,this.options).toMMPattern();return i?Object.assign(o,{test:i}):o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?YQ:r.dot?JQ:XQ,i=new Set(r.nocase?["i"]:[]),o=e.map(p=>{let u=p.map(d=>{if(d instanceof RegExp)for(let h of d.flags.split(""))i.add(h);return typeof d=="string"?iZ(d):d===Ut?Ut:d._src});return u.forEach((d,h)=>{let g=u[h+1],x=u[h-1];d!==Ut||x===Ut||(x===void 0?g!==void 0&&g!==Ut?u[h+1]="(?:\\/|"+n+"\\/)?"+g:u[h]=n:g===void 0?u[h-1]=x+"(?:\\/|"+n+")?":g!==Ut&&(u[h-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,u[h+1]=Ut))}),u.filter(d=>d!==Ut).join("/")}).join("|"),[a,l]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let l=i.length-2;!a&&l>=0;l--)a=i[l];for(let l=0;l<o.length;l++){let p=o[l],u=i;if(n.matchBase&&p.length===1&&(u=[a]),this.matchOne(u,p,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return nr.defaults(e).Minimatch}};nr.AST=Ka;nr.Minimatch=Hr;nr.escape=Qa;nr.unescape=In;var Za=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,cF=new Set,wv=typeof process=="object"&&process?process:{},lF=(t,e,r,n)=>{typeof wv.emitWarning=="function"?wv.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},Dg=globalThis.AbortController,aF=globalThis.AbortSignal;if(typeof Dg>"u"){aF=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},Dg=class{constructor(){e()}signal=new aF;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=wv.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,lF("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var oZ=t=>!cF.has(t),ROe=Symbol("type"),So=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),pF=t=>So(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Ya:null:null,Ya=class extends Array{constructor(e){super(e),this.fill(0)}},_v=class t{heap;length;static#e=!1;static create(e){let r=pF(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},op=class t{#e;#r;#o;#n;#s;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#u;#c;#a;#i;#g;#y;#d;#f;#w;#h;#_;#E;#T;#v;#b;#m;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#T,sizes:e.#_,keyMap:e.#c,keyList:e.#a,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#p(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#B(r),indexes:r=>e.#k(r),rindexes:r=>e.#P(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#r}get calculatedSize(){return this.#u}get size(){return this.#l}get fetchMethod(){return this.#s}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:p,dispose:u,disposeAfter:d,noDisposeOnSet:h,noUpdateTTL:g,maxSize:x=0,maxEntrySize:b=0,sizeCalculation:w,fetchMethod:F,memoMethod:M,noDeleteOnFetchRejection:U,noDeleteOnStaleGet:Z,allowStaleOnFetchRejection:ne,allowStaleOnFetchAbort:he,ignoreFetchAbort:de}=e;if(r!==0&&!So(r))throw new TypeError("max option must be a nonnegative integer");let mt=r?pF(r):Array;if(!mt)throw new Error("invalid max value: "+r);if(this.#e=r,this.#r=x,this.maxEntrySize=b||this.#r,this.sizeCalculation=w,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(M!==void 0&&typeof M!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=M,F!==void 0&&typeof F!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#s=F,this.#b=!!F,this.#c=new Map,this.#a=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new mt(r),this.#y=new mt(r),this.#d=0,this.#f=0,this.#w=_v.create(r),this.#l=0,this.#u=0,typeof u=="function"&&(this.#o=u),typeof d=="function"?(this.#n=d,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#m=!!this.#n,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!U,this.allowStaleOnFetchRejection=!!ne,this.allowStaleOnFetchAbort=!!he,this.ignoreFetchAbort=!!de,this.maxEntrySize!==0){if(this.#r!==0&&!So(this.#r))throw new TypeError("maxSize must be a positive integer if specified");if(!So(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#A()}if(this.allowStale=!!p,this.noDeleteOnStaleGet=!!Z,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=So(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!So(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#e===0&&this.ttl===0&&this.#r===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#r){let It="LRU_CACHE_UNBOUNDED";oZ(It)&&(cF.add(It),lF("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",It,t))}}getRemainingTTL(e){return this.#c.has(e)?1/0:0}#M(){let e=new Ya(this.#e),r=new Ya(this.#e);this.#T=e,this.#E=r,this.#I=(o,a,l=Za.now())=>{if(r[o]=a!==0?l:0,e[o]=a,a!==0&&this.ttlAutopurge){let p=setTimeout(()=>{this.#x(o)&&this.#D(this.#a[o],"expire")},a+1);p.unref&&p.unref()}},this.#R=o=>{r[o]=e[o]!==0?Za.now():0},this.#t=(o,a)=>{if(e[a]){let l=e[a],p=r[a];if(!l||!p)return;o.ttl=l,o.start=p,o.now=n||i();let u=o.now-p;o.remainingTTL=l-u}};let n=0,i=()=>{let o=Za.now();if(this.ttlResolution>0){n=o;let a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref()}return o};this.getRemainingTTL=o=>{let a=this.#c.get(o);if(a===void 0)return 0;let l=e[a],p=r[a];if(!l||!p)return 1/0;let u=(n||i())-p;return l-u},this.#x=o=>{let a=r[o],l=e[o];return!!l&&!!a&&(n||i())-a>l}}#R=()=>{};#t=()=>{};#I=()=>{};#x=()=>!1;#A(){let e=new Ya(this.#e);this.#u=0,this.#_=e,this.#F=r=>{this.#u-=e[r],e[r]=0},this.#O=(r,n,i,o)=>{if(this.#p(n))return 0;if(!So(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!So(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#r){let o=this.#r-e[r];for(;this.#u>o;)this.#L(!0)}this.#u+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#u)}}#F=e=>{};#C=(e,r,n)=>{};#O=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#d));)r=this.#y[r]}*#P({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#d;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#N(e){return e!==void 0&&this.#c.get(this.#a[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#a[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#a[e],this.#i[e]])}*rentries(){for(let e of this.#P())this.#i[e]!==void 0&&this.#a[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#a[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#a[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#P()){let r=this.#a[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#P())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#a[n],this))return this.get(this.#a[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#a[n],this)}}rforEach(e,r=this){for(let n of this.#P()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#a[n],this)}}purgeStale(){let e=!1;for(let r of this.#P({allowStale:!0}))this.#x(r)&&(this.#D(this.#a[r],"expire"),e=!0);return e}info(e){let r=this.#c.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#p(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#T&&this.#E){let a=this.#T[r],l=this.#E[r];if(a&&l){let p=a-(Za.now()-l);o.ttl=p,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#a[r],i=this.#i[r],o=this.#p(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let a={value:o};if(this.#T&&this.#E){a.ttl=this.#T[r];let l=Za.now()-this.#E[r];a.start=Math.floor(Date.now()-l)}this.#_&&(a.size=this.#_[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=Za.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:p}=n,{noUpdateTTL:u=this.noUpdateTTL}=n,d=this.#O(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return p&&(p.set="miss",p.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let h=this.#l===0?void 0:this.#c.get(e);if(h===void 0)h=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#a[h]=e,this.#i[h]=r,this.#c.set(e,h),this.#g[this.#f]=h,this.#y[h]=this.#f,this.#f=h,this.#l++,this.#C(h,d,p),p&&(p.set="add"),u=!1;else{this.#B(h);let g=this.#i[h];if(r!==g){if(this.#b&&this.#p(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!a&&(this.#v&&this.#o?.(x,e,"set"),this.#m&&this.#h?.push([x,e,"set"]))}else a||(this.#v&&this.#o?.(g,e,"set"),this.#m&&this.#h?.push([g,e,"set"]));if(this.#F(h),this.#C(h,d,p),this.#i[h]=r,p){p.set="replace";let x=g&&this.#p(g)?g.__staleWhileFetching:g;x!==void 0&&(p.oldValue=x)}}else p&&(p.set="update")}if(i!==0&&!this.#T&&this.#M(),this.#T&&(u||this.#I(h,i,o),p&&this.#t(p,h)),!a&&this.#m&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#d];if(this.#L(!0),this.#p(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#m&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#d,n=this.#a[r],i=this.#i[r];return this.#b&&this.#p(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(i,n,"evict"),this.#m&&this.#h?.push([i,n,"evict"])),this.#F(r),e&&(this.#a[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#d=this.#f=0,this.#w.length=0):this.#d=this.#g[r],this.#c.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#c.get(e);if(o!==void 0){let a=this.#i[o];if(this.#p(a)&&a.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#t(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#t(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#c.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#p(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#p(o))return o;let a=new Dg,{signal:l}=n;l?.addEventListener("abort",()=>a.abort(l.reason),{signal:a.signal});let p={signal:a.signal,options:n,context:i},u=(w,F=!1)=>{let{aborted:M}=a.signal,U=n.ignoreFetchAbort&&w!==void 0;if(n.status&&(M&&!F?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,U&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),M&&!U&&!F)return h(a.signal.reason);let Z=x;return this.#i[r]===x&&(w===void 0?Z.__staleWhileFetching?this.#i[r]=Z.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,w,p.options))),w},d=w=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=w),h(w)),h=w=>{let{aborted:F}=a.signal,M=F&&n.allowStaleOnFetchAbort,U=M||n.allowStaleOnFetchRejection,Z=U||n.noDeleteOnFetchRejection,ne=x;if(this.#i[r]===x&&(!Z||ne.__staleWhileFetching===void 0?this.#D(e,"fetch"):M||(this.#i[r]=ne.__staleWhileFetching)),U)return n.status&&ne.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),ne.__staleWhileFetching;if(ne.__returned===ne)throw w},g=(w,F)=>{let M=this.#s?.(e,o,p);M&&M instanceof Promise&&M.then(U=>w(U===void 0?void 0:U),F),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(w(void 0),n.allowStaleOnFetchAbort&&(w=U=>u(U,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(u,d),b=Object.assign(x,{__abortController:a,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,b,{...p.options,status:void 0}),r=this.#c.get(e)):this.#i[r]=b,b}#p(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Dg}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:p=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:w,forceRefresh:F=!1,status:M,signal:U}=r;if(!this.#b)return M&&(M.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:M});let Z={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:l,size:p,sizeCalculation:u,noUpdateTTL:d,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:b,ignoreFetchAbort:x,status:M,signal:U},ne=this.#c.get(e);if(ne===void 0){M&&(M.fetch="miss");let he=this.#U(e,ne,Z,w);return he.__returned=he}else{let he=this.#i[ne];if(this.#p(he)){let N=n&&he.__staleWhileFetching!==void 0;return M&&(M.fetch="inflight",N&&(M.returnedStale=!0)),N?he.__staleWhileFetching:he.__returned=he}let de=this.#x(ne);if(!F&&!de)return M&&(M.fetch="hit"),this.#B(ne),i&&this.#R(ne),M&&this.#t(M,ne),he;let mt=this.#U(e,ne,Z,w),it=mt.__staleWhileFetching!==void 0&&n;return M&&(M.fetch=de?"stale":"refresh",it&&de&&(M.returnedStale=!0)),it?mt.__staleWhileFetching:mt.__returned=mt}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...a}=r,l=this.get(e,a);if(!o&&l!==void 0)return l;let p=n(e,l,{options:a,context:i});return this.set(e,p,a),p}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:a}=r,l=this.#c.get(e);if(l!==void 0){let p=this.#i[l],u=this.#p(p);return a&&this.#t(a,l),this.#x(l)?(a&&(a.get="stale"),u?(a&&n&&p.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?p.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),a&&n&&(a.returnedStale=!0),n?p:void 0)):(a&&(a.get="hit"),u?p.__staleWhileFetching:(this.#B(l),i&&this.#R(l),p))}else a&&(a.get="miss")}#V(e,r){this.#y[r]=e,this.#g[e]=r}#B(e){e!==this.#f&&(e===this.#d?this.#d=this.#g[e]:this.#V(this.#y[e],this.#g[e]),this.#V(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#c.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#H(r);else{this.#F(i);let o=this.#i[i];if(this.#p(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(o,e,r),this.#m&&this.#h?.push([o,e,r])),this.#c.delete(e),this.#a[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#d)this.#d=this.#g[i];else{let a=this.#y[i];this.#g[a]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#m&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#H("delete")}#H(e){for(let r of this.#P({allowStale:!0})){let n=this.#i[r];if(this.#p(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#a[r];this.#v&&this.#o?.(n,i,e),this.#m&&this.#h?.push([n,i,e])}}if(this.#c.clear(),this.#i.fill(void 0),this.#a.fill(void 0),this.#T&&this.#E&&(this.#T.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#d=0,this.#f=0,this.#w.length=0,this.#u=0,this.#l=0,this.#m&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var ec=require("path"),SF=require("url"),hZ=ur(require("fs"),1),ti=require("fs"),wo=require("fs/promises");var Ug=require("events"),Dv=ur(require("stream"),1),hF=require("string_decoder"),uF=typeof process=="object"&&process?process:{stdout:null,stderr:null},sZ=t=>!!t&&typeof t=="object"&&(t instanceof bo||t instanceof Dv.default||aZ(t)||cZ(t)),aZ=t=>!!t&&typeof t=="object"&&t instanceof Ug.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==Dv.default.Writable.prototype.pipe,cZ=t=>!!t&&typeof t=="object"&&t instanceof Ug.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Ii=Symbol("EOF"),Fi=Symbol("maybeEmitEnd"),vo=Symbol("emittedEnd"),Ig=Symbol("emittingEnd"),sp=Symbol("emittedError"),Fg=Symbol("closed"),fF=Symbol("read"),Cg=Symbol("flush"),dF=Symbol("flushChunk"),Fn=Symbol("encoding"),Ja=Symbol("decoder"),Mt=Symbol("flowing"),ap=Symbol("paused"),Xa=Symbol("resume"),At=Symbol("buffer"),ir=Symbol("pipes"),Dt=Symbol("bufferLength"),Ev=Symbol("bufferPush"),Og=Symbol("bufferShift"),zt=Symbol("objectMode"),dt=Symbol("destroyed"),Rv=Symbol("error"),kv=Symbol("emitData"),mF=Symbol("emitEnd"),Pv=Symbol("emitEnd2"),Xn=Symbol("async"),Mv=Symbol("abort"),Ng=Symbol("aborted"),cp=Symbol("signal"),ds=Symbol("dataListeners"),Wr=Symbol("discarded"),lp=t=>Promise.resolve().then(t),lZ=t=>t(),pZ=t=>t==="end"||t==="finish"||t==="prefinish",uZ=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,fZ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Lg=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[Xa](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Av=class extends Lg{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},dZ=t=>!!t.objectMode,mZ=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",bo=class extends Ug.EventEmitter{[Mt]=!1;[ap]=!1;[ir]=[];[At]=[];[zt];[Fn];[Xn];[Ja];[Ii]=!1;[vo]=!1;[Ig]=!1;[Fg]=!1;[sp]=null;[Dt]=0;[dt]=!1;[cp];[Ng]=!1;[ds]=0;[Wr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");dZ(r)?(this[zt]=!0,this[Fn]=null):mZ(r)?(this[Fn]=r.encoding,this[zt]=!1):(this[zt]=!1,this[Fn]=null),this[Xn]=!!r.async,this[Ja]=this[Fn]?new hF.StringDecoder(this[Fn]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[At]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[ir]});let{signal:n}=r;n&&(this[cp]=n,n.aborted?this[Mv]():n.addEventListener("abort",()=>this[Mv]()))}get bufferLength(){return this[Dt]}get encoding(){return this[Fn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[zt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Xn]}set async(e){this[Xn]=this[Xn]||!!e}[Mv](){this[Ng]=!0,this.emit("abort",this[cp]?.reason),this.destroy(this[cp]?.reason)}get aborted(){return this[Ng]}set aborted(e){}write(e,r,n){if(this[Ng])return!1;if(this[Ii])throw new Error("write after end");if(this[dt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[Xn]?lp:lZ;if(!this[zt]&&!Buffer.isBuffer(e)){if(fZ(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(uZ(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[zt]?(this[Mt]&&this[Dt]!==0&&this[Cg](!0),this[Mt]?this.emit("data",e):this[Ev](e),this[Dt]!==0&&this.emit("readable"),n&&i(n),this[Mt]):e.length?(typeof e=="string"&&!(r===this[Fn]&&!this[Ja]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Fn]&&(e=this[Ja].write(e)),this[Mt]&&this[Dt]!==0&&this[Cg](!0),this[Mt]?this.emit("data",e):this[Ev](e),this[Dt]!==0&&this.emit("readable"),n&&i(n),this[Mt]):(this[Dt]!==0&&this.emit("readable"),n&&i(n),this[Mt])}read(e){if(this[dt])return null;if(this[Wr]=!1,this[Dt]===0||e===0||e&&e>this[Dt])return this[Fi](),null;this[zt]&&(e=null),this[At].length>1&&!this[zt]&&(this[At]=[this[Fn]?this[At].join(""):Buffer.concat(this[At],this[Dt])]);let r=this[fF](e||null,this[At][0]);return this[Fi](),r}[fF](e,r){if(this[zt])this[Og]();else{let n=r;e===n.length||e===null?this[Og]():typeof n=="string"?(this[At][0]=n.slice(e),r=n.slice(0,e),this[Dt]-=e):(this[At][0]=n.subarray(e),r=n.subarray(0,e),this[Dt]-=e)}return this.emit("data",r),!this[At].length&&!this[Ii]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Ii]=!0,this.writable=!1,(this[Mt]||!this[ap])&&this[Fi](),this}[Xa](){this[dt]||(!this[ds]&&!this[ir].length&&(this[Wr]=!0),this[ap]=!1,this[Mt]=!0,this.emit("resume"),this[At].length?this[Cg]():this[Ii]?this[Fi]():this.emit("drain"))}resume(){return this[Xa]()}pause(){this[Mt]=!1,this[ap]=!0,this[Wr]=!1}get destroyed(){return this[dt]}get flowing(){return this[Mt]}get paused(){return this[ap]}[Ev](e){this[zt]?this[Dt]+=1:this[Dt]+=e.length,this[At].push(e)}[Og](){return this[zt]?this[Dt]-=1:this[Dt]-=this[At][0].length,this[At].shift()}[Cg](e=!1){do;while(this[dF](this[Og]())&&this[At].length);!e&&!this[At].length&&!this[Ii]&&this.emit("drain")}[dF](e){return this.emit("data",e),this[Mt]}pipe(e,r){if(this[dt])return e;this[Wr]=!1;let n=this[vo];return r=r||{},e===uF.stdout||e===uF.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[ir].push(r.proxyErrors?new Av(this,e,r):new Lg(this,e,r)),this[Xn]?lp(()=>this[Xa]()):this[Xa]()),e}unpipe(e){let r=this[ir].find(n=>n.dest===e);r&&(this[ir].length===1?(this[Mt]&&this[ds]===0&&(this[Mt]=!1),this[ir]=[]):this[ir].splice(this[ir].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Wr]=!1,this[ds]++,!this[ir].length&&!this[Mt]&&this[Xa]();else if(e==="readable"&&this[Dt]!==0)super.emit("readable");else if(pZ(e)&&this[vo])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[sp]){let i=r;this[Xn]?lp(()=>i.call(this,this[sp])):i.call(this,this[sp])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[ds]=this.listeners("data").length,this[ds]===0&&!this[Wr]&&!this[ir].length&&(this[Mt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[ds]=0,!this[Wr]&&!this[ir].length&&(this[Mt]=!1)),r}get emittedEnd(){return this[vo]}[Fi](){!this[Ig]&&!this[vo]&&!this[dt]&&this[At].length===0&&this[Ii]&&(this[Ig]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Fg]&&this.emit("close"),this[Ig]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==dt&&this[dt])return!1;if(e==="data")return!this[zt]&&!n?!1:this[Xn]?(lp(()=>this[kv](n)),!0):this[kv](n);if(e==="end")return this[mF]();if(e==="close"){if(this[Fg]=!0,!this[vo]&&!this[dt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[sp]=n,super.emit(Rv,n);let o=!this[cp]||this.listeners("error").length?super.emit("error",n):!1;return this[Fi](),o}else if(e==="resume"){let o=super.emit("resume");return this[Fi](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Fi](),i}[kv](e){for(let n of this[ir])n.dest.write(e)===!1&&this.pause();let r=this[Wr]?!1:super.emit("data",e);return this[Fi](),r}[mF](){return this[vo]?!1:(this[vo]=!0,this.readable=!1,this[Xn]?(lp(()=>this[Pv]()),!0):this[Pv]())}[Pv](){if(this[Ja]){let r=this[Ja].end();if(r){for(let n of this[ir])n.dest.write(r);this[Wr]||super.emit("data",r)}}for(let r of this[ir])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[zt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[zt]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[zt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Fn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(dt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Wr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Ii])return r();let o,a,l=h=>{this.off("data",p),this.off("end",u),this.off(dt,d),r(),a(h)},p=h=>{this.off("error",l),this.off("end",u),this.off(dt,d),this.pause(),o({value:h,done:!!this[Ii]})},u=()=>{this.off("error",l),this.off("data",p),this.off(dt,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((h,g)=>{a=g,o=h,this.once(dt,d),this.once("error",l),this.once("end",u),this.once("data",p)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Wr]=!1;let e=!1,r=()=>(this.pause(),this.off(Rv,r),this.off(dt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(Rv,r),this.once(dt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[dt])return e?this.emit("error",e):this.emit(dt),this;this[dt]=!0,this[Wr]=!0,this[At].length=0,this[Dt]=0;let r=this;return typeof r.close=="function"&&!this[Fg]&&r.close(),e?this.emit("error",e):this.emit(dt),this}static get isStream(){return sZ}};var gZ=ti.realpathSync.native,up={lstatSync:ti.lstatSync,readdir:ti.readdir,readdirSync:ti.readdirSync,readlinkSync:ti.readlinkSync,realpathSync:gZ,promises:{lstat:wo.lstat,readdir:wo.readdir,readlink:wo.readlink,realpath:wo.realpath}},vF=t=>!t||t===up||t===hZ?up:{...up,...t,promises:{...up.promises,...t.promises||{}}},bF=/^\\\\\?\\([a-z]:)\\?$/i,yZ=t=>t.replace(/\//g,"\\").replace(bF,"$1\\"),xZ=/[\\\/]/,dn=0,wF=1,_F=2,ei=4,EF=6,RF=8,ms=10,kF=12,fn=15,pp=~fn,Iv=16,gF=32,fp=64,Cn=128,Vg=256,Hg=512,yF=fp|Cn|Hg,TZ=1023,Fv=t=>t.isFile()?RF:t.isDirectory()?ei:t.isSymbolicLink()?ms:t.isCharacterDevice()?_F:t.isBlockDevice()?EF:t.isSocket()?kF:t.isFIFO()?wF:dn,xF=new Map,dp=t=>{let e=xF.get(t);if(e)return e;let r=t.normalize("NFKD");return xF.set(t,r),r},TF=new Map,Bg=t=>{let e=TF.get(t);if(e)return e;let r=dp(t.toLowerCase());return TF.set(t,r),r},Wg=class extends op{constructor(){super({max:256})}},Cv=class extends op{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},PF=Symbol("PathScurry setAsCwd"),Gt=class{name;root;roots;parent;nocase;#e;#r;get dev(){return this.#r}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#s;get uid(){return this.#s}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#u;get blksize(){return this.#u}#c;get ino(){return this.#c}#a;get size(){return this.#a}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#T;#v;#b;#m;#M;#R;#t;#I;#x;#A;get path(){return(this.parent||this).fullpath()}constructor(e,r=dn,n,i,o,a,l){this.name=e,this.#T=o?Bg(e):dp(e),this.#t=r&TZ,this.nocase=o,this.roots=i,this.root=n||this,this.#I=a,this.#b=l.fullpath,this.#M=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=vF(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#I}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#I.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#I.set(this,r),this.#t&=~Iv,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Bg(e):dp(e);for(let p of n)if(p.#T===i)return p;let o=this.parent?this.sep:"",a=this.#b?this.#b+o+e:void 0,l=this.newChild(e,dn,{...r,parent:this,fullpath:a});return this.canReaddir()||(l.#t|=Cn),n.push(l),l}relative(){if(this.#M!==void 0)return this.#M;let e=this.name,r=this.parent;if(!r)return this.#M=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#m!==void 0)return this.#m;if(this.sep==="/")return this.#m=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#m=`//?/${i}`:this.#m=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#m=n}isUnknown(){return(this.#t&fn)===dn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#t&fn)===RF}isDirectory(){return(this.#t&fn)===ei}isCharacterDevice(){return(this.#t&fn)===_F}isBlockDevice(){return(this.#t&fn)===EF}isFIFO(){return(this.#t&fn)===wF}isSocket(){return(this.#t&fn)===kF}isSymbolicLink(){return(this.#t&ms)===ms}lstatCached(){return this.#t&gF?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#A}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#t&fn;return!(e!==dn&&e!==ms||this.#t&Vg||this.#t&Cn)}calledReaddir(){return!!(this.#t&Iv)}isENOENT(){return!!(this.#t&Cn)}isNamed(e){return this.nocase?this.#T===Bg(e):this.#T===dp(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=this.parent.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}#C(e){this.#t|=Iv;for(let r=e.provisional;r<e.length;r++)e[r].#O()}#O(){this.#t&Cn||(this.#t=(this.#t|Cn)&pp,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#O()}#P(){this.#t|=Hg,this.#N()}#N(){if(this.#t&fp)return;let e=this.#t;(e&fn)===ei&&(e&=pp),this.#t=e|fp,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#N():e==="ENOENT"?this.#O():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#N():e==="ENOENT"&&this.#O()}#p(e=""){let r=this.#t;r|=Vg,e==="ENOENT"&&(r|=Cn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=pp),this.#t=r,e==="ENOTDIR"&&this.parent&&this.parent.#N()}#V(e,r){return this.#D(e,r)||this.#B(e,r)}#B(e,r){let n=Fv(e),i=this.newChild(e.name,n,{parent:this}),o=i.#t&fn;return o!==ei&&o!==ms&&o!==dn&&(i.#t|=fp),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Bg(e.name):dp(e.name))===i.#T)return this.#H(e,i,n,r)}}#H(e,r,n,i){let o=r.name;return r.#t=r.#t&pp|Fv(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if(!(this.#t&Cn))try{return this.#j(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if(!(this.#t&Cn))try{return this.#j(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#j(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:a,blocks:l,ctime:p,ctimeMs:u,dev:d,gid:h,ino:g,mode:x,mtime:b,mtimeMs:w,nlink:F,rdev:M,size:U,uid:Z}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#u=a,this.#i=l,this.#_=p,this.#d=u,this.#r=d,this.#S=h,this.#c=g,this.#o=x,this.#h=b,this.#y=w,this.#n=F,this.#l=M,this.#a=U,this.#s=Z;let ne=Fv(e);this.#t=this.#t&pp|ne|gF,ne!==dn&&ne!==ei&&ne!==ms&&(this.#t|=fp)}#$=[];#q=!1;#z(e){this.#q=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#q)return;this.#q=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,a)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of a)this.#V(l,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#V(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#V(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#t&yF)return!1;let e=fn&this.#t;return e===dn||e===ei||e===ms}shouldWalk(e,r){return(this.#t&ei)===ei&&!(this.#t&yF)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#A)return this.#A;if(!((Hg|Vg|Cn)&this.#t))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}realpathSync(){if(this.#A)return this.#A;if(!((Hg|Vg|Cn)&this.#t))try{let e=this.#e.realpathSync(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}[PF](e){if(e===this)return;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#M=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#M=void 0,i.#R=void 0,i=i.parent}},$g=class t extends Gt{sep="\\";splitSep=xZ;constructor(e,r=dn,n,i,o,a,l){super(e,r,n,i,o,a,l)}newChild(e,r=dn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return ec.win32.parse(e).root}getRoot(e){if(e=yZ(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new tc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(bF,"$1\\"),e===r}},qg=class t extends Gt{splitSep="/";sep="/";constructor(e,r=dn,n,i,o,a,l){super(e,r,n,i,o,a,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=dn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},jg=class{root;rootPath;roots;cwd;#e;#r;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:a=up}={}){this.#n=vF(a),(e instanceof URL||e.startsWith("file://"))&&(e=(0,SF.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new Wg,this.#r=new Wg,this.#o=new Cv(o);let p=l.substring(this.rootPath.length).split(n);if(p.length===1&&!p[0]&&p.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let u=this.root,d=p.length-1,h=r.sep,g=this.rootPath,x=!1;for(let b of p){let w=d--;u=u.child(b,{relative:new Array(w).fill("..").join(h),relativePosix:new Array(w).fill("..").join("/"),fullpath:g+=(x?"":h)+b}),x=!0}this.cwd=u}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#r.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#r.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set,u=(h,g)=>{p.add(h),h.readdirCB((x,b)=>{if(x)return g(x);let w=b.length;if(!w)return g();let F=()=>{--w===0&&g()};for(let M of b)(!o||o(M))&&l.push(n?M:M.fullpath()),i&&M.isSymbolicLink()?M.realpath().then(U=>U?.isUnknown()?U.lstat():U).then(U=>U?.shouldWalk(p,a)?u(U,F):F()):M.shouldWalk(p,a)?u(M,F):F()},!0)},d=e;return new Promise((h,g)=>{u(d,x=>{if(x)return g(x);h(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set([e]);for(let u of p){let d=u.readdirSync();for(let h of d){(!o||o(h))&&l.push(n?h:h.fullpath());let g=h;if(h.isSymbolicLink()){if(!(i&&(g=h.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(p,a)&&p.add(g)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let p of l){let u=p.readdirSync();for(let d of u){(!o||o(d))&&(yield n?d:d.fullpath());let h=d;if(d.isSymbolicLink()){if(!(i&&(h=d.realpathSync())))continue;h.isUnknown()&&h.lstatSync()}h.shouldWalk(l,a)&&l.add(h)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=new bo({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let p=new Set,u=[e],d=0,h=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&l.end();return}d++,p.add(x);let b=(F,M,U=!1)=>{if(F)return l.emit("error",F);if(i&&!U){let Z=[];for(let ne of M)ne.isSymbolicLink()&&Z.push(ne.realpath().then(he=>he?.isUnknown()?he.lstat():he));if(Z.length){Promise.all(Z).then(()=>b(null,M,!0));return}}for(let Z of M)Z&&(!o||o(Z))&&(l.write(n?Z:Z.fullpath())||(g=!0));d--;for(let Z of M){let ne=Z.realpathCached()||Z;ne.shouldWalk(p,a)&&u.push(ne)}g&&!l.flowing?l.once("drain",h):w||h()},w=!0;x.readdirCB(b,!0),w=!1}};return h(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=new bo({objectMode:!0}),p=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let u=[e],d=0,h=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&l.end();return}d++,p.add(x);let b=x.readdirSync();for(let w of b)(!o||o(w))&&(l.write(n?w:w.fullpath())||(g=!0));d--;for(let w of b){let F=w;if(w.isSymbolicLink()){if(!(i&&(F=w.realpathSync())))continue;F.isUnknown()&&F.lstatSync()}F.shouldWalk(p,a)&&u.push(F)}}g&&!l.flowing&&l.once("drain",h)};return h(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[PF](r)}},tc=class extends jg{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,ec.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return ec.win32.parse(e).root.toUpperCase()}newRoot(e){return new $g(this.rootPath,ei,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},rc=class extends jg{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,ec.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new qg(this.rootPath,ei,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},mp=class extends rc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},DOe=process.platform==="win32"?$g:qg,MF=process.platform==="win32"?tc:process.platform==="darwin"?mp:rc;var AF=require("url");var SZ=t=>t.length>=1,vZ=t=>t.length>=1,nc=class t{#e;#r;#o;length;#n;#s;#S;#l;#u;#c;#a=!0;constructor(e,r,n,i){if(!SZ(e))throw new TypeError("empty pattern list");if(!vZ(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#r=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,a,l,p,...u]=this.#e,[d,h,g,x,...b]=this.#r;u[0]===""&&(u.shift(),b.shift());let w=[o,a,l,p,""].join("/"),F=[d,h,g,x,""].join("/");this.#e=[w,...u],this.#r=[F,...b],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...a]=this.#e,[l,...p]=this.#r;a[0]===""&&(a.shift(),p.shift());let u=o+"/",d=l+"/";this.#e=[u,...a],this.#r=[d,...p],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Ut}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#r[0]+this.#r.slice(1).join("/"):this.#r.join("/"):this.#r.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#s!==void 0?this.#s:this.hasMore()?(this.#s=new t(this.#e,this.#r,this.#o+1,this.#n),this.#s.#c=this.#c,this.#s.#u=this.#u,this.#s.#l=this.#l,this.#s):this.#s=null}isUNC(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#c!==void 0?this.#c:this.#c=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#a)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#a?!1:(this.#a=!1,!0)}};var bZ=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",hp=class{relative;relativeChildren;absolute;absoluteChildren;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:a=bZ}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[];let l={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:a,nocomment:!0,nonegate:!0};for(let p of e){let u=new Hr(p,l);for(let d=0;d<u.set.length;d++){let h=u.set[d],g=u.globParts[d];if(!h||!g)throw new Error("invalid pattern object");let x=new nc(h,g,0,a),b=new Hr(x.globString(),l),w=g[g.length-1]==="**",F=x.isAbsolute();F?this.absolute.push(b):this.relative.push(b),w&&(F?this.absoluteChildren.push(b):this.relativeChildren.push(b))}}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let a of this.relative)if(a.match(i)||a.match(o))return!0;for(let a of this.absolute)if(a.match(r)||a.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var Ov=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},Nv=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},Lv=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},gp=class t{hasWalkedCache;matches=new Nv;subwalks=new Lv;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Ov}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let a=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(a){i=i.resolve(a==="/"&&this.opts.root!==void 0?this.opts.root:a);let h=o.rest();if(h)o=h;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let p,u,d=!1;for(;typeof(p=o.pattern())=="string"&&(u=o.rest());)i=i.resolve(p),o=u,d=!0;if(p=o.pattern(),u=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof p=="string"){let h=p===".."||p===""||p===".";this.matches.add(i.resolve(p),l,h);continue}else if(p===Ut){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let h=u?.pattern(),g=u?.rest();if(!u||(h===""||h===".")&&!g)this.matches.add(i,l,h===""||h===".");else if(h===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,l,!0)}}else p instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let a of n){let l=a.isAbsolute(),p=a.pattern(),u=a.rest();p===Ut?i.testGlobstar(o,a,u,l):p instanceof RegExp?i.testRegExp(o,p,u,l):i.testString(o,p,u,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let a=e.parent||e;this.subwalks.add(a,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var wZ=(t,e)=>typeof t=="string"?new hp([t],e):Array.isArray(t)?new hp(t,e):t,zg=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#r;#o;signal;maxDepth;constructor(e,r,n){this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",n.ignore&&(this.#r=wZ(n.ignore,n)),this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#r?.ignored?.(e)}#s(e){return!!this.#r?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat;return this.matchCheckTest(i?await e.lstat():e,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat;return this.matchCheckTest(i?e.lstatSync():e,r)}matchFinish(e,r){if(this.#n(e))return;let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),a=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?a+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new gp(this.opts),n)}walkCB2(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>a()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirCached();l.calledReaddir()?this.walkCB3(l,p,n,a):l.readdirCB((u,d)=>this.walkCB3(l,d,n,a),!0)}a()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>a()));for(let[l,p]of n.subwalks.entries())o++,this.walkCB2(l,p,n.child(),a);a()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new gp(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirSync();this.walkCB3Sync(l,p,n,a)}a()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let[l,p]of n.subwalks.entries())o++,this.walkCB2Sync(l,p,n.child(),a);a()}},yp=class extends zg{matches;constructor(e,r,n){super(e,r,n),this.matches=new Set}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},xp=class extends zg{results;constructor(e,r,n){super(e,r,n),this.results=new bo({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var _Z=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",On=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,AF.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(p=>p.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(p=>p.includes("/")?p:`./**/${p}`)}if(this.pattern=e,this.platform=r.platform||_Z,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let p=r.platform==="win32"?tc:r.platform==="darwin"?mp:r.platform?rc:MF;this.scurry=new p(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(p=>new Hr(p,i)),[a,l]=o.reduce((p,u)=>(p[0].push(...u.set),p[1].push(...u.globParts),p),[[],[]]);this.patterns=a.map((p,u)=>{let d=l[u];if(!d)throw new Error("invalid pattern object");return new nc(p,d,0,this.platform)})}async walk(){return[...await new yp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new yp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new xp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new xp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Uv=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Hr(r,e).hasMagic())return!0;return!1};function Gg(t,e={}){return new On(t,e).streamSync()}function IF(t,e={}){return new On(t,e).stream()}function FF(t,e={}){return new On(t,e).walkSync()}async function DF(t,e={}){return new On(t,e).walk()}function Kg(t,e={}){return new On(t,e).iterateSync()}function CF(t,e={}){return new On(t,e).iterate()}var EZ=Gg,RZ=Object.assign(IF,{sync:Gg}),kZ=Kg,PZ=Object.assign(CF,{sync:Kg}),MZ=Object.assign(FF,{stream:Gg,iterate:Kg}),Vv=Object.assign(DF,{glob:DF,globSync:FF,sync:MZ,globStream:IF,stream:RZ,globStreamSync:Gg,streamSync:EZ,globIterate:CF,iterate:PZ,globIterateSync:Kg,iterateSync:kZ,Glob:On,hasMagic:Uv,escape:Qa,unescape:In});Vv.glob=Vv;function OF(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var jF=Object.defineProperty,IZ=Object.getOwnPropertyNames,C=(t,e)=>jF(t,"name",{value:e,configurable:!0}),FZ=(t,e)=>function(){return e||(0,t[IZ(t)[0]])((e={exports:{}}).exports,e),e.exports},rb=(t,e)=>{for(var r in e)jF(t,r,{get:e[r],enumerable:!0})},CZ=FZ({"(disabled):util"(){}}),Qg={};rb(Qg,{addChainableMethod:()=>mb,addLengthGuard:()=>wp,addMethod:()=>ub,addProperty:()=>pb,checkError:()=>$r,compareByInspect:()=>Xg,eql:()=>y1,expectTypes:()=>JF,flag:()=>_e,getActual:()=>ry,getMessage:()=>ob,getName:()=>iy,getOperator:()=>xb,getOwnEnumerableProperties:()=>yb,getOwnEnumerablePropertySymbols:()=>gb,getPathInfo:()=>lb,hasProperty:()=>ny,inspect:()=>Ne,isNaN:()=>ey,isProxyEnabled:()=>bp,objDisplay:()=>hs,overwriteChainableMethod:()=>hb,overwriteMethod:()=>db,overwriteProperty:()=>fb,proxify:()=>ac,test:()=>nb,transferFlags:()=>Nn,type:()=>Qe});var $r={};rb($r,{compatibleConstructor:()=>GF,compatibleInstance:()=>zF,compatibleMessage:()=>KF,getConstructorName:()=>QF,getMessage:()=>ZF});function zF(t,e){return e instanceof Error&&t===e}C(zF,"compatibleInstance");function GF(t,e){return e instanceof Error?t.constructor===e.constructor||t instanceof e.constructor:e.prototype instanceof Error||e===Error?t.constructor===e||t instanceof e:!1}C(GF,"compatibleConstructor");function KF(t,e){let r=typeof t=="string"?t:t.message;return e instanceof RegExp?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}C(KF,"compatibleMessage");function QF(t){let e=t;return t instanceof Error?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}C(QF,"getConstructorName");function ZF(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}C(ZF,"getMessage");function _e(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}C(_e,"flag");function nb(t,e){var r=_e(t,"negate"),n=e[0];return r?!n:n}C(nb,"test");function Qe(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Qe,"type");var OZ="captureStackTrace"in Error,je=class YF extends Error{static{C(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,OZ&&Error.captureStackTrace(this,n||YF);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function JF(t,e){var r=_e(t,"message"),n=_e(t,"ssfi");r=r?r+": ":"",t=_e(t,"object"),e=e.map(function(a){return a.toLowerCase()}),e.sort();var i=e.map(function(a,l){var p=~["a","e","i","o","u"].indexOf(a.charAt(0))?"an":"a",u=e.length>1&&l===e.length-1?"or ":"";return u+p+" "+a}).join(", "),o=Qe(t).toLowerCase();if(!e.some(function(a){return o===a}))throw new je(r+"object tested must be "+i+", but "+o+" given",void 0,n)}C(JF,"expectTypes");function ry(t,e){return e.length>4?e[4]:t._obj}C(ry,"getActual");var NF={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},NZ={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},oc="\u2026";function XF(t,e){let r=NF[NZ[e]]||NF[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}C(XF,"colorise");function e1({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:a=1/0,seen:l=[],truncate:p=1/0,stylize:u=String}={},d){let h={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(a),truncate:Number(p),seen:l,inspect:d,stylize:u};return h.colors&&(h.stylize=XF),h}C(e1,"normaliseOptions");function Ci(t,e,r=oc){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}C(Ci,"truncate");function mn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,a="",l="",p="";for(let u=0;u<i;u+=1){let d=u+1===t.length,h=u+2===t.length;p=`${oc}(${t.length-u})`;let g=t[u];e.truncate=o-a.length-(d?0:n.length);let x=l||r(g,e)+(d?"":n),b=a.length+x.length,w=b+p.length;if(d&&b>o&&a.length+p.length<=o||!d&&!h&&w>o||(l=d?"":r(t[u+1],e)+(h?"":n),!d&&h&&w>o&&b+l.length>o))break;if(a+=x,!d&&!h&&b+l.length>=o){p=`${oc}(${t.length-u-1})`;break}p=""}return`${a}${p}`}C(mn,"inspectList");function t1(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}C(t1,"quoteComplexKey");function sc([t,e],r){return r.truncate-=2,typeof t=="string"?t=t1(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}C(sc,"inspectProperty");function r1(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=mn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=mn(r.map(o=>[o,t[o]]),e,sc)),`[ ${n}${i?`, ${i}`:""} ]`}C(r1,"inspectArray");var LZ=C(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function ri(t,e){let r=LZ(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let a=0;a<t.length;a++){let l=`${e.stylize(Ci(t[a],e.truncate),"number")}${a===t.length-1?"":", "}`;if(e.truncate-=l.length,t[a]!==t.length&&e.truncate<=3){i+=`${oc}(${t.length-t[a]+1})`;break}i+=l}let o="";return n.length&&(o=mn(n.map(a=>[a,t[a]]),e,sc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}C(ri,"inspectTypedArray");function n1(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Ci(n[1],e.truncate-i.length-1)}`,"date")}C(n1,"inspectDate");function Wv(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Ci(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}C(Wv,"inspectFunction");function i1([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}C(i1,"inspectMapEntry");function o1(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}C(o1,"mapToEntries");function s1(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${mn(o1(t),e,i1)} }`)}C(s1,"inspectMap");var UZ=Number.isNaN||(t=>t!==t);function $v(t,e){return UZ(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Ci(String(t),e.truncate),"number")}C($v,"inspectNumber");function qv(t,e){let r=Ci(t.toString(),e.truncate-1);return r!==oc&&(r+="n"),e.stylize(r,"bigint")}C(qv,"inspectBigInt");function a1(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Ci(i,n)}/${r}`,"regexp")}C(a1,"inspectRegExp");function c1(t){let e=[];return t.forEach(r=>{e.push(r)}),e}C(c1,"arrayFromSet");function l1(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${mn(c1(t),e)} }`)}C(l1,"inspectSet");var LF=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),VZ={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},BZ=16,HZ=4;function p1(t){return VZ[t]||`\\u${`0000${t.charCodeAt(0).toString(BZ)}`.slice(-HZ)}`}C(p1,"escape");function jv(t,e){return LF.test(t)&&(t=t.replace(LF,p1)),e.stylize(`'${Ci(t,e.truncate-2)}'`,"string")}C(jv,"inspectString");function zv(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}C(zv,"inspectSymbol");var u1=C(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(u1=C((n,i)=>{let[o,a]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(a,i)}}`},"getPromiseValue"))}catch{}var WZ=u1;function Sp(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=mn(r.map(l=>[l,t[l]]),e,sc),o=mn(n.map(l=>[l,t[l]]),e,sc);e.seen.pop();let a="";return i&&o&&(a=", "),`{ ${i}${a}${o} }`}C(Sp,"inspectObject");var Bv=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function f1(t,e){let r="";return Bv&&Bv in t&&(r=t[Bv]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Sp(t,e)}`}C(f1,"inspectClass");function d1(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${mn(t,e)} ]`)}C(d1,"inspectArguments");var $Z=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function m1(t,e){let r=Object.getOwnPropertyNames(t).filter(a=>$Z.indexOf(a)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=Ci(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=mn(r.map(a=>[a,t[a]]),e,sc);return`${n}${i}${o?` { ${o} }`:""}`}C(m1,"inspectObject");function h1([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}C(h1,"inspectAttribute");function Zg(t,e){return mn(t,e,ib,`
`)}C(Zg,"inspectHTMLCollection");function ib(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),a=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=mn(r.map(d=>[d,t.getAttribute(d)]),e,h1," ")),e.truncate-=l.length;let p=e.truncate,u=Zg(t.children,e);return u&&u.length>p&&(u=`${oc}(${t.children.length})`),`${i}${l}${o}${u}${a}`}C(ib,"inspectHTML");var qZ=typeof Symbol=="function"&&typeof Symbol.for=="function",Hv=qZ?Symbol.for("chai/inspect"):"@@chai/inspect",ic=!1;try{let t=CZ();ic=t.inspect?t.inspect.custom:!1}catch{ic=!1}var UF=new WeakMap,VF={},BF={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:$v,Number:$v,bigint:qv,BigInt:qv,string:jv,String:jv,function:Wv,Function:Wv,symbol:zv,Symbol:zv,Array:r1,Date:n1,Map:s1,Set:l1,RegExp:a1,Promise:WZ,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:d1,Int8Array:ri,Uint8Array:ri,Uint8ClampedArray:ri,Int16Array:ri,Uint16Array:ri,Int32Array:ri,Uint32Array:ri,Float32Array:ri,Float64Array:ri,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:m1,HTMLCollection:Zg,NodeList:Zg},jZ=C((t,e,r)=>Hv in t&&typeof t[Hv]=="function"?t[Hv](e):ic&&ic in t&&typeof t[ic]=="function"?t[ic](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&UF.has(t.constructor)?UF.get(t.constructor)(t,e):VF[r]?VF[r](t,e):"","inspectCustom"),zZ=Object.prototype.toString;function Yg(t,e={}){let r=e1(e,Yg),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=zZ.call(t).slice(8,-1)),i in BF)return BF[i](t,r);if(n&&t){let a=jZ(t,r,i);if(a)return typeof a=="string"?a:Yg(a,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Sp(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?ib(t,r):"constructor"in t?t.constructor!==Object?f1(t,r):Sp(t,r):t===Object(t)?Sp(t,r):r.stylize(String(t),i)}C(Yg,"inspect");var wr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Ne(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:wr.truncateThreshold?wr.truncateThreshold:1/0};return Yg(t,i)}C(Ne,"inspect");function hs(t){var e=Ne(t),r=Object.prototype.toString.call(t);if(wr.truncateThreshold&&e.length>=wr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}C(hs,"objDisplay");function ob(t,e){var r=_e(t,"negate"),n=_e(t,"object"),i=e[3],o=ry(t,e),a=r?e[2]:e[1],l=_e(t,"message");return typeof a=="function"&&(a=a()),a=a||"",a=a.replace(/#\{this\}/g,function(){return hs(n)}).replace(/#\{act\}/g,function(){return hs(o)}).replace(/#\{exp\}/g,function(){return hs(i)}),l?l+": "+a:a}C(ob,"getMessage");function Nn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}C(Nn,"transferFlags");function Gv(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Gv,"type");function sb(){this._key="chai/deep-eql__"+Math.random()+Date.now()}C(sb,"FakeMap");sb.prototype={get:C(function(e){return e[this._key]},"get"),set:C(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var g1=typeof WeakMap=="function"?WeakMap:sb;function Kv(t,e,r){if(!r||gs(t)||gs(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}C(Kv,"memoizeCompare");function Tp(t,e,r,n){if(!(!r||gs(t)||gs(e))){var i=r.get(t);i?i.set(e,n):(i=new g1,i.set(e,n),r.set(t,i))}}C(Tp,"memoizeSet");var y1=vp;function vp(t,e,r){if(r&&r.comparator)return Qv(t,e,r);var n=ab(t,e);return n!==null?n:Qv(t,e,r)}C(vp,"deepEqual");function ab(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:gs(t)||gs(e)?!1:null}C(ab,"simpleEqual");function Qv(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new g1;var n=r&&r.comparator,i=Kv(t,e,r.memoize);if(i!==null)return i;var o=Kv(e,t,r.memoize);if(o!==null)return o;if(n){var a=n(t,e);if(a===!1||a===!0)return Tp(t,e,r.memoize,a),a;var l=ab(t,e);if(l!==null)return l}var p=Gv(t);if(p!==Gv(e))return Tp(t,e,r.memoize,!1),!1;Tp(t,e,r.memoize,!0);var u=x1(t,e,p,r);return Tp(t,e,r.memoize,u),u}C(Qv,"extensiveDeepEqual");function x1(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return vp(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return cb(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return _o(t,e,n);case"RegExp":return T1(t,e);case"Generator":return S1(t,e,n);case"DataView":return _o(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return _o(new Uint8Array(t),new Uint8Array(e),n);case"Set":return Zv(t,e,n);case"Map":return Zv(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return b1(t,e,n)}}C(x1,"extensiveDeepEqualByType");function T1(t,e){return t.toString()===e.toString()}C(T1,"regexpEqual");function Zv(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(C(function(a,l){n.push([a,l])},"gatherEntries")),e.forEach(C(function(a,l){i.push([a,l])},"gatherEntries")),_o(n.sort(),i.sort(),r)}C(Zv,"entriesEqual");function _o(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(vp(t[i],e[i],r)===!1)return!1;return!0}C(_o,"iterableEqual");function S1(t,e,r){return _o(Jg(t),Jg(e),r)}C(S1,"generatorEqual");function v1(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}C(v1,"hasIteratorFunction");function Yv(t){if(v1(t))try{return Jg(t[Symbol.iterator]())}catch{return[]}return[]}C(Yv,"getIteratorEntries");function Jg(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}C(Jg,"getGeneratorEntries");function Jv(t){var e=[];for(var r in t)e.push(r);return e}C(Jv,"getEnumerableKeys");function Xv(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}C(Xv,"getEnumerableSymbols");function cb(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(vp(t[r[o]],e[r[o]],n)===!1)return!1;return!0}C(cb,"keysEqual");function b1(t,e,r){var n=Jv(t),i=Jv(e),o=Xv(t),a=Xv(e);if(n=n.concat(o),i=i.concat(a),n.length&&n.length===i.length)return _o(eb(n).sort(),eb(i).sort())===!1?!1:cb(t,e,n,r);var l=Yv(t),p=Yv(e);return l.length&&l.length===p.length?(l.sort(),p.sort(),_o(l,p,r)):n.length===0&&l.length===0&&i.length===0&&p.length===0}C(b1,"objectEqual");function gs(t){return t===null||typeof t!="object"}C(gs,"isPrimitive");function eb(t){return t.map(C(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}C(eb,"mapSymbols");function ny(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}C(ny,"hasProperty");function w1(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),a=null;return o?a={i:parseFloat(o[1])}:a={p:n.replace(/\\([.[\]])/g,"$1")},a})}C(w1,"parsePath");function tb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let a=e[o];n&&(typeof a.p>"u"?n=n[a.i]:n=n[a.p],o===r-1&&(i=n))}return i}C(tb,"internalGetPathValue");function lb(t,e){let r=w1(e),n=r[r.length-1],i={parent:r.length>1?tb(t,r,r.length-1):t,name:n.p||n.i,value:tb(t,r)};return i.exists=ny(i.parent,i.name),i}C(lb,"getPathInfo");function _(t,e,r,n){return _e(this,"ssfi",r||_),_e(this,"lockSsfi",n),_e(this,"object",t),_e(this,"message",e),_e(this,"eql",wr.deepEqual||y1),ac(this)}C(_,"Assertion");Object.defineProperty(_,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),wr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),wr.includeStack=t}});Object.defineProperty(_,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),wr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),wr.showDiff=t}});_.addProperty=function(t,e){pb(this.prototype,t,e)};_.addMethod=function(t,e){ub(this.prototype,t,e)};_.addChainableMethod=function(t,e,r){mb(this.prototype,t,e,r)};_.overwriteProperty=function(t,e){fb(this.prototype,t,e)};_.overwriteMethod=function(t,e){db(this.prototype,t,e)};_.overwriteChainableMethod=function(t,e,r){hb(this.prototype,t,e,r)};_.prototype.assert=function(t,e,r,n,i,o){var a=nb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),wr.showDiff!==!0&&(o=!1),!a){e=ob(this,arguments);var l=ry(this,arguments),p={actual:l,expected:n,showDiff:o},u=xb(this,arguments);throw u&&(p.operator=u),new je(e,p,wr.includeStack?this.assert:_e(this,"ssfi"))}};Object.defineProperty(_.prototype,"_obj",{get:function(){return _e(this,"object")},set:function(t){_e(this,"object",t)}});function bp(){return wr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}C(bp,"isProxyEnabled");function pb(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:C(function n(){!bp()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new _;return Nn(this,o),o},"propertyGetter"),configurable:!0})}C(pb,"addProperty");var GZ=Object.getOwnPropertyDescriptor(function(){},"length");function wp(t,e,r){return GZ.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}C(wp,"addLengthGuard");function _1(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}C(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}C(_1,"getProperties");var HF=["__flags","__methods","_obj","assert"];function ac(t,e){return bp()?new Proxy(t,{get:C(function r(n,i){if(typeof i=="string"&&wr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,a=4;throw _1(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&HF.indexOf(l)===-1){var p=E1(i,l,a);p<a&&(o=l,a=p)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return HF.indexOf(i)===-1&&!_e(n,"lockSsfi")&&_e(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}C(ac,"proxify");function E1(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var a=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(a===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}C(E1,"stringDistanceCapped");function ub(t,e,r){var n=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new _;return Nn(this,o),o},"methodWrapper");wp(n,e,!1),t[e]=ac(n,e)}C(ub,"addMethod");function fb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=C(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:C(function o(){!bp()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).call(this);if(_e(this,"lockSsfi",a),l!==void 0)return l;var p=new _;return Nn(this,p),p},"overwritingPropertyGetter"),configurable:!0})}C(fb,"overwriteProperty");function db(t,e,r){var n=t[e],i=C(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(_e(this,"lockSsfi",a),l!==void 0)return l;var p=new _;return Nn(this,p),p},"overwritingMethodWrapper");wp(o,e,!1),t[e]=ac(o,e)}C(db,"overwriteMethod");var KZ=typeof Object.setPrototypeOf=="function",WF=C(function(){},"testFn"),QZ=Object.getOwnPropertyNames(WF).filter(function(t){var e=Object.getOwnPropertyDescriptor(WF,t);return typeof e!="object"?!0:!e.configurable}),ZZ=Function.prototype.call,YZ=Function.prototype.apply;function mb(t,e,r,n){typeof n!="function"&&(n=C(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:C(function(){i.chainingBehavior.call(this);var a=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",a);var u=i.method.apply(this,arguments);if(u!==void 0)return u;var d=new _;return Nn(this,d),d},"chainableMethodWrapper");if(wp(a,e,!0),KZ){var l=Object.create(this);l.call=ZZ,l.apply=YZ,Object.setPrototypeOf(a,l)}else{var p=Object.getOwnPropertyNames(t);p.forEach(function(u){if(QZ.indexOf(u)===-1){var d=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(a,u,d)}})}return Nn(this,a),ac(a)},"chainableMethodGetter"),configurable:!0})}C(mb,"addChainableMethod");function hb(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=C(function(){var p=n(o).call(this);if(p!==void 0)return p;var u=new _;return Nn(this,u),u},"overwritingChainableMethodGetter");var a=i.method;i.method=C(function(){var p=r(a).apply(this,arguments);if(p!==void 0)return p;var u=new _;return Nn(this,u),u},"overwritingChainableMethodWrapper")}C(hb,"overwriteChainableMethod");function Xg(t,e){return Ne(t)<Ne(e)?-1:1}C(Xg,"compareByInspect");function gb(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}C(gb,"getOwnEnumerablePropertySymbols");function yb(t){return Object.keys(t).concat(gb(t))}C(yb,"getOwnEnumerableProperties");function R1(t){return t!==t}C(R1,"_isNaN");var ey=Number.isNaN||R1;function k1(t){var e=Qe(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}C(k1,"isObjectType");function xb(t,e){var r=_e(t,"operator"),n=_e(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var a=k1(i);return/\snot\s/.test(o)?a?"notDeepStrictEqual":"notStrictEqual":a?"deepStrictEqual":"strictEqual"}}C(xb,"getOperator");function iy(t){return t.name}C(iy,"getName");var{flag:P}=Qg;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){_.addProperty(t)});_.addProperty("not",function(){P(this,"negate",!0)});_.addProperty("deep",function(){P(this,"deep",!0)});_.addProperty("nested",function(){P(this,"nested",!0)});_.addProperty("own",function(){P(this,"own",!0)});_.addProperty("ordered",function(){P(this,"ordered",!0)});_.addProperty("any",function(){P(this,"any",!0),P(this,"all",!1)});_.addProperty("all",function(){P(this,"all",!0),P(this,"any",!1)});var $F={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function Tb(t,e){e&&P(this,"message",e),t=t.toLowerCase();var r=P(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Qe(r).toLowerCase();$F.function.includes(t)?this.assert($F[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}C(Tb,"an");_.addChainableMethod("an",Tb);_.addChainableMethod("a",Tb);function P1(t,e){return ey(t)&&ey(e)||t===e}C(P1,"SameValueZero");function _p(){P(this,"contains",!0)}C(_p,"includeChainingBehavior");function Ep(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=Qe(r).toLowerCase(),i=P(this,"message"),o=P(this,"negate"),a=P(this,"ssfi"),l=P(this,"deep"),p=l?"deep ":"",u=l?P(this,"eql"):P1;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new je(i+"unable to use .deep.include with WeakSet",void 0,a);d=r.has(t);break;case"map":r.forEach(function(b){d=d||u(b,t)});break;case"set":l?r.forEach(function(b){d=d||u(b,t)}):d=r.has(t);break;case"array":l?d=r.some(function(b){return u(b,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new je(i+"the given combination of arguments ("+n+" and "+Qe(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Qe(t).toLowerCase(),void 0,a);var h=Object.keys(t),g=null,x=0;if(h.forEach(function(b){var w=new _(r);if(Nn(this,w,!0),P(w,"lockSsfi",!0),!o||h.length===1){w.property(b,t[b]);return}try{w.property(b,t[b])}catch(F){if(!$r.compatibleConstructor(F,je))throw F;g===null&&(g=F),x++}},this),o&&h.length>1&&x===h.length)throw g;return}this.assert(d,"expected #{this} to "+p+"include "+Ne(t),"expected #{this} to not "+p+"include "+Ne(t))}C(Ep,"include");_.addChainableMethod("include",Ep,_p);_.addChainableMethod("contain",Ep,_p);_.addChainableMethod("contains",Ep,_p);_.addChainableMethod("includes",Ep,_p);_.addProperty("ok",function(){this.assert(P(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});_.addProperty("true",function(){this.assert(P(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!P(this,"negate"))});_.addProperty("callable",function(){let t=P(this,"object"),e=P(this,"ssfi"),r=P(this,"message"),n=r?`${r}: `:"",i=P(this,"negate"),o=i?`${n}expected ${Ne(t)} not to be a callable function`:`${n}expected ${Ne(t)} to be a callable function`,a=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Qe(t));if(a&&i||!a&&!i)throw new je(o,void 0,e)});_.addProperty("false",function(){this.assert(P(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!P(this,"negate"))});_.addProperty("null",function(){this.assert(P(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});_.addProperty("undefined",function(){this.assert(P(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});_.addProperty("NaN",function(){this.assert(ey(P(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function Sb(){var t=P(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}C(Sb,"assertExist");_.addProperty("exist",Sb);_.addProperty("exists",Sb);_.addProperty("empty",function(){var t=P(this,"object"),e=P(this,"ssfi"),r=P(this,"message"),n;switch(r=r?r+": ":"",Qe(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new je(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+iy(t);throw new je(i.trim(),void 0,e);default:if(t!==Object(t))throw new je(r+".empty was passed non-string primitive "+Ne(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function vb(){var t=P(this,"object"),e=Qe(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}C(vb,"checkArguments");_.addProperty("arguments",vb);_.addProperty("Arguments",vb);function oy(t,e){e&&P(this,"message",e);var r=P(this,"object");if(P(this,"deep")){var n=P(this,"lockSsfi");P(this,"lockSsfi",!0),this.eql(t),P(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}C(oy,"assertEqual");_.addMethod("equal",oy);_.addMethod("equals",oy);_.addMethod("eq",oy);function bb(t,e){e&&P(this,"message",e);var r=P(this,"eql");this.assert(r(t,P(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}C(bb,"assertEql");_.addMethod("eql",bb);_.addMethod("eqls",bb);function sy(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Qe(r).toLowerCase(),p=Qe(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to above must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to above must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;u=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new je(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}C(sy,"assertAbove");_.addMethod("above",sy);_.addMethod("gt",sy);_.addMethod("greaterThan",sy);function ay(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Qe(r).toLowerCase(),p=Qe(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to least must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to least must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;u=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new je(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}C(ay,"assertLeast");_.addMethod("least",ay);_.addMethod("gte",ay);_.addMethod("greaterThanOrEqual",ay);function cy(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Qe(r).toLowerCase(),p=Qe(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to below must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to below must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;u=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new je(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}C(cy,"assertBelow");_.addMethod("below",cy);_.addMethod("lt",cy);_.addMethod("lessThan",cy);function ly(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Qe(r).toLowerCase(),p=Qe(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to most must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to most must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;u=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new je(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}C(ly,"assertMost");_.addMethod("most",ly);_.addMethod("lte",ly);_.addMethod("lessThanOrEqual",ly);_.addMethod("within",function(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"doLength"),o=P(this,"message"),a=o?o+": ":"",l=P(this,"ssfi"),p=Qe(n).toLowerCase(),u=Qe(t).toLowerCase(),d=Qe(e).toLowerCase(),h,g=!0,x=u==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&p!=="map"&&p!=="set"&&new _(n,o,l,!0).to.have.property("length"),!i&&p==="date"&&(u!=="date"||d!=="date"))h=a+"the arguments to within must be dates";else if((u!=="number"||d!=="number")&&(i||p==="number"))h=a+"the arguments to within must be numbers";else if(!i&&p!=="date"&&p!=="number"){var b=p==="string"?"'"+n+"'":n;h=a+"expected "+b+" to be a number or a date"}else g=!1;if(g)throw new je(h,void 0,l);if(i){var w="length",F;p==="map"||p==="set"?(w="size",F=n.size):F=n.length,this.assert(F>=t&&F<=e,"expected #{this} to have a "+w+" within "+x,"expected #{this} to not have a "+w+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function wb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"ssfi"),i=P(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new je(i+"The instanceof assertion needs a constructor but "+Qe(t)+" was given.",void 0,n)):l}var a=iy(t);a==null&&(a="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+a,"expected #{this} to not be an instance of "+a)}C(wb,"assertInstanceOf");_.addMethod("instanceof",wb);_.addMethod("instanceOf",wb);function _b(t,e,r){r&&P(this,"message",r);var n=P(this,"nested"),i=P(this,"own"),o=P(this,"message"),a=P(this,"object"),l=P(this,"ssfi"),p=typeof t;if(o=o?o+": ":"",n){if(p!=="string")throw new je(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(p!=="string"&&p!=="number"&&p!=="symbol")throw new je(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new je(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(a==null)throw new je(o+"Target cannot be null or undefined.",void 0,l);var u=P(this,"deep"),d=P(this,"negate"),h=n?lb(a,t):null,g=n?h.value:a[t],x=u?P(this,"eql"):(F,M)=>F===M,b="";u&&(b+="deep "),i&&(b+="own "),n&&(b+="nested "),b+="property ";var w;i?w=Object.prototype.hasOwnProperty.call(a,t):n?w=h.exists:w=ny(a,t),(!d||arguments.length===1)&&this.assert(w,"expected #{this} to have "+b+Ne(t),"expected #{this} to not have "+b+Ne(t)),arguments.length>1&&this.assert(w&&x(e,g),"expected #{this} to have "+b+Ne(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+Ne(t)+" of #{act}",e,g),P(this,"object",g)}C(_b,"assertProperty");_.addMethod("property",_b);function Eb(t,e,r){P(this,"own",!0),_b.apply(this,arguments)}C(Eb,"assertOwnProperty");_.addMethod("ownProperty",Eb);_.addMethod("haveOwnProperty",Eb);function Rb(t,e,r){typeof e=="string"&&(r=e,e=null),r&&P(this,"message",r);var n=P(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=P(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Ne(t)+" on #{this} to match "+Ne(e)+", got "+Ne(i),"expected the own property descriptor for "+Ne(t)+" on #{this} to not match "+Ne(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Ne(t),"expected #{this} to not have an own property descriptor for "+Ne(t)),P(this,"object",i)}C(Rb,"assertOwnPropertyDescriptor");_.addMethod("ownPropertyDescriptor",Rb);_.addMethod("haveOwnPropertyDescriptor",Rb);function kb(){P(this,"doLength",!0)}C(kb,"assertLengthChain");function Pb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=Qe(r).toLowerCase(),i=P(this,"message"),o=P(this,"ssfi"),a="length",l;switch(n){case"map":case"set":a="size",l=r.size;break;default:new _(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+a+" of #{exp} but got #{act}","expected #{this} to not have a "+a+" of #{act}",t,l)}C(Pb,"assertLength");_.addChainableMethod("length",Pb,kb);_.addChainableMethod("lengthOf",Pb,kb);function Mb(t,e){e&&P(this,"message",e);var r=P(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}C(Mb,"assertMatch");_.addMethod("match",Mb);_.addMethod("matches",Mb);_.addMethod("string",function(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi");new _(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Ne(t),"expected #{this} to not contain "+Ne(t))});function Ab(t){var e=P(this,"object"),r=Qe(e),n=Qe(t),i=P(this,"ssfi"),o=P(this,"deep"),a,l="",p,u=!0,d=P(this,"message");d=d?d+": ":"";var h=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",p=[],e.forEach(function(U,Z){p.push(Z)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(p=yb(e),n){case"Array":if(arguments.length>1)throw new je(h,void 0,i);break;case"Object":if(arguments.length>1)throw new je(h,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(U){return typeof U=="symbol"?U:String(U)})}if(!t.length)throw new je(d+"keys required",void 0,i);var g=t.length,x=P(this,"any"),b=P(this,"all"),w=t,F=o?P(this,"eql"):(U,Z)=>U===Z;if(!x&&!b&&(b=!0),x&&(u=w.some(function(U){return p.some(function(Z){return F(U,Z)})})),b&&(u=w.every(function(U){return p.some(function(Z){return F(U,Z)})}),P(this,"contains")||(u=u&&t.length==p.length)),g>1){t=t.map(function(U){return Ne(U)});var M=t.pop();b&&(a=t.join(", ")+", and "+M),x&&(a=t.join(", ")+", or "+M)}else a=Ne(t[0]);a=(g>1?"keys ":"key ")+a,a=(P(this,"contains")?"contain ":"have ")+a,this.assert(u,"expected #{this} to "+l+a,"expected #{this} to not "+l+a,w.slice(0).sort(Xg),p.sort(Xg),!0)}C(Ab,"assertKeys");_.addMethod("keys",Ab);_.addMethod("key",Ab);function py(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"ssfi"),o=P(this,"message"),a=P(this,"negate")||!1;new _(n,o,i,!0).is.a("function"),(t instanceof RegExp||typeof t=="string")&&(e=t,t=null);var l;try{n()}catch(M){l=M}var p=t===void 0&&e===void 0,u=!!(t&&e),d=!1,h=!1;if(p||!p&&!a){var g="an error";t instanceof Error?g="#{exp}":t&&(g=$r.getConstructorName(t)),this.assert(l,"expected #{this} to throw "+g,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),l instanceof Error?l.toString():typeof l=="string"?l:l&&$r.getConstructorName(l))}if(t&&l){if(t instanceof Error){var x=$r.compatibleInstance(l,t);x===a&&(u&&a?d=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!a?" but #{act} was thrown":""),t.toString(),l.toString()))}var b=$r.compatibleConstructor(l,t);b===a&&(u&&a?d=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&$r.getConstructorName(t),l instanceof Error?l.toString():l&&$r.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var w="including";e instanceof RegExp&&(w="matching");var F=$r.compatibleMessage(l,e);F===a&&(u&&a?h=!0:this.assert(a,"expected #{this} to throw error "+w+" #{exp} but got #{act}","expected #{this} to throw error not "+w+" #{exp}",e,$r.getMessage(l)))}d&&h&&this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&$r.getConstructorName(t),l instanceof Error?l.toString():l&&$r.getConstructorName(l)),P(this,"object",l)}C(py,"assertThrows");_.addMethod("throw",py);_.addMethod("throws",py);_.addMethod("Throw",py);function Db(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Ne(t),"expected #{this} to not respond to "+Ne(t))}C(Db,"respondTo");_.addMethod("respondTo",Db);_.addMethod("respondsTo",Db);_.addProperty("itself",function(){P(this,"itself",!0)});function Ib(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+hs(t),"expected #{this} to not satisfy"+hs(t),!P(this,"negate"),n)}C(Ib,"satisfy");_.addMethod("satisfy",Ib);_.addMethod("satisfies",Ib);function Fb(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");if(new _(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var a=e===void 0?", and a delta is required":"";throw new je(i+"the arguments to closeTo or approximately must be numbers"+a,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}C(Fb,"closeTo");_.addMethod("closeTo",Fb);_.addMethod("approximately",Fb);function M1(t,e,r,n,i){let o=Array.from(e),a=Array.from(t);if(!n){if(a.length!==o.length)return!1;o=o.slice()}return a.every(function(l,p){if(i)return r?r(l,o[p]):l===o[p];if(!r){var u=o.indexOf(l);return u===-1?!1:(n||o.splice(u,1),!0)}return o.some(function(d,h){return r(l,d)?(n||o.splice(h,1),!0):!1})})}C(M1,"isSubsetOf");_.addMethod("members",function(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi");new _(r,n,i,!0).to.be.iterable,new _(t,n,i,!0).to.be.iterable;var o=P(this,"contains"),a=P(this,"ordered"),l,p,u;o?(l=a?"an ordered superset":"a superset",p="expected #{this} to be "+l+" of #{exp}",u="expected #{this} to not be "+l+" of #{exp}"):(l=a?"ordered members":"members",p="expected #{this} to have the same "+l+" as #{exp}",u="expected #{this} to not have the same "+l+" as #{exp}");var d=P(this,"deep")?P(this,"eql"):void 0;this.assert(M1(t,r,d,o,a),p,u,t,r,!0)});_.addProperty("iterable",function(t){t&&P(this,"message",t);var e=P(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function A1(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi"),o=P(this,"contains"),a=P(this,"deep"),l=P(this,"eql");new _(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(p){return r.indexOf(p)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):a?this.assert(t.some(function(p){return l(r,p)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}C(A1,"oneOf");_.addMethod("oneOf",A1);function Cb(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","change"),P(this,"realDelta",l!==a),this.assert(a!==l,"expected "+p+" to change","expected "+p+" to not change")}C(Cb,"assertChanges");_.addMethod("change",Cb);_.addMethod("changes",Cb);function Ob(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),new _(a,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","increase"),P(this,"realDelta",l-a),this.assert(l-a>0,"expected "+p+" to increase","expected "+p+" to not increase")}C(Ob,"assertIncreases");_.addMethod("increase",Ob);_.addMethod("increases",Ob);function Nb(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),new _(a,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","decrease"),P(this,"realDelta",a-l),this.assert(l-a<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}C(Nb,"assertDecreases");_.addMethod("decrease",Nb);_.addMethod("decreases",Nb);function D1(t,e){e&&P(this,"message",e);var r=P(this,"deltaMsgObj"),n=P(this,"initialDeltaValue"),i=P(this,"finalDeltaValue"),o=P(this,"deltaBehavior"),a=P(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=a===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}C(D1,"assertDelta");_.addMethod("by",D1);_.addProperty("extensible",function(){var t=P(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});_.addProperty("sealed",function(){var t=P(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});_.addProperty("frozen",function(){var t=P(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});_.addProperty("finite",function(t){var e=P(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function ty(t,e){return new _(t,e)}C(ty,"expect");ty.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new je(r,{actual:t,expected:e,operator:n},ty.fail)};var I1={};rb(I1,{Should:()=>XZ,should:()=>JZ});function Lb(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new _(this.valueOf(),null,t):new _(this,null,t)}C(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}C(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,a){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new je(o,{actual:n,expected:i,operator:a},r.fail)},r.equal=function(n,i,o){new _(n,o).to.equal(i)},r.Throw=function(n,i,o,a){new _(n,a).to.Throw(i,o)},r.exist=function(n,i){new _(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new _(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,a){new _(n,a).to.not.Throw(i,o)},r.not.exist=function(n,i){new _(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}C(Lb,"loadShould");var JZ=Lb,XZ=Lb;function v(t,e){var r=new _(null,null,v,!0);r.assert(t,e,"[ negation message unavailable ]")}C(v,"assert");v.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new je(r,{actual:t,expected:e,operator:n},v.fail)};v.isOk=function(t,e){new _(t,e,v.isOk,!0).is.ok};v.isNotOk=function(t,e){new _(t,e,v.isNotOk,!0).is.not.ok};v.equal=function(t,e,r){var n=new _(t,r,v.equal,!0);n.assert(e==_e(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};v.notEqual=function(t,e,r){var n=new _(t,r,v.notEqual,!0);n.assert(e!=_e(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};v.strictEqual=function(t,e,r){new _(t,r,v.strictEqual,!0).to.equal(e)};v.notStrictEqual=function(t,e,r){new _(t,r,v.notStrictEqual,!0).to.not.equal(e)};v.deepEqual=v.deepStrictEqual=function(t,e,r){new _(t,r,v.deepEqual,!0).to.eql(e)};v.notDeepEqual=function(t,e,r){new _(t,r,v.notDeepEqual,!0).to.not.eql(e)};v.isAbove=function(t,e,r){new _(t,r,v.isAbove,!0).to.be.above(e)};v.isAtLeast=function(t,e,r){new _(t,r,v.isAtLeast,!0).to.be.least(e)};v.isBelow=function(t,e,r){new _(t,r,v.isBelow,!0).to.be.below(e)};v.isAtMost=function(t,e,r){new _(t,r,v.isAtMost,!0).to.be.most(e)};v.isTrue=function(t,e){new _(t,e,v.isTrue,!0).is.true};v.isNotTrue=function(t,e){new _(t,e,v.isNotTrue,!0).to.not.equal(!0)};v.isFalse=function(t,e){new _(t,e,v.isFalse,!0).is.false};v.isNotFalse=function(t,e){new _(t,e,v.isNotFalse,!0).to.not.equal(!1)};v.isNull=function(t,e){new _(t,e,v.isNull,!0).to.equal(null)};v.isNotNull=function(t,e){new _(t,e,v.isNotNull,!0).to.not.equal(null)};v.isNaN=function(t,e){new _(t,e,v.isNaN,!0).to.be.NaN};v.isNotNaN=function(t,e){new _(t,e,v.isNotNaN,!0).not.to.be.NaN};v.exists=function(t,e){new _(t,e,v.exists,!0).to.exist};v.notExists=function(t,e){new _(t,e,v.notExists,!0).to.not.exist};v.isUndefined=function(t,e){new _(t,e,v.isUndefined,!0).to.equal(void 0)};v.isDefined=function(t,e){new _(t,e,v.isDefined,!0).to.not.equal(void 0)};v.isCallable=function(t,e){new _(t,e,v.isCallable,!0).is.callable};v.isNotCallable=function(t,e){new _(t,e,v.isNotCallable,!0).is.not.callable};v.isObject=function(t,e){new _(t,e,v.isObject,!0).to.be.a("object")};v.isNotObject=function(t,e){new _(t,e,v.isNotObject,!0).to.not.be.a("object")};v.isArray=function(t,e){new _(t,e,v.isArray,!0).to.be.an("array")};v.isNotArray=function(t,e){new _(t,e,v.isNotArray,!0).to.not.be.an("array")};v.isString=function(t,e){new _(t,e,v.isString,!0).to.be.a("string")};v.isNotString=function(t,e){new _(t,e,v.isNotString,!0).to.not.be.a("string")};v.isNumber=function(t,e){new _(t,e,v.isNumber,!0).to.be.a("number")};v.isNotNumber=function(t,e){new _(t,e,v.isNotNumber,!0).to.not.be.a("number")};v.isFinite=function(t,e){new _(t,e,v.isFinite,!0).to.be.finite};v.isBoolean=function(t,e){new _(t,e,v.isBoolean,!0).to.be.a("boolean")};v.isNotBoolean=function(t,e){new _(t,e,v.isNotBoolean,!0).to.not.be.a("boolean")};v.typeOf=function(t,e,r){new _(t,r,v.typeOf,!0).to.be.a(e)};v.notTypeOf=function(t,e,r){new _(t,r,v.notTypeOf,!0).to.not.be.a(e)};v.instanceOf=function(t,e,r){new _(t,r,v.instanceOf,!0).to.be.instanceOf(e)};v.notInstanceOf=function(t,e,r){new _(t,r,v.notInstanceOf,!0).to.not.be.instanceOf(e)};v.include=function(t,e,r){new _(t,r,v.include,!0).include(e)};v.notInclude=function(t,e,r){new _(t,r,v.notInclude,!0).not.include(e)};v.deepInclude=function(t,e,r){new _(t,r,v.deepInclude,!0).deep.include(e)};v.notDeepInclude=function(t,e,r){new _(t,r,v.notDeepInclude,!0).not.deep.include(e)};v.nestedInclude=function(t,e,r){new _(t,r,v.nestedInclude,!0).nested.include(e)};v.notNestedInclude=function(t,e,r){new _(t,r,v.notNestedInclude,!0).not.nested.include(e)};v.deepNestedInclude=function(t,e,r){new _(t,r,v.deepNestedInclude,!0).deep.nested.include(e)};v.notDeepNestedInclude=function(t,e,r){new _(t,r,v.notDeepNestedInclude,!0).not.deep.nested.include(e)};v.ownInclude=function(t,e,r){new _(t,r,v.ownInclude,!0).own.include(e)};v.notOwnInclude=function(t,e,r){new _(t,r,v.notOwnInclude,!0).not.own.include(e)};v.deepOwnInclude=function(t,e,r){new _(t,r,v.deepOwnInclude,!0).deep.own.include(e)};v.notDeepOwnInclude=function(t,e,r){new _(t,r,v.notDeepOwnInclude,!0).not.deep.own.include(e)};v.match=function(t,e,r){new _(t,r,v.match,!0).to.match(e)};v.notMatch=function(t,e,r){new _(t,r,v.notMatch,!0).to.not.match(e)};v.property=function(t,e,r){new _(t,r,v.property,!0).to.have.property(e)};v.notProperty=function(t,e,r){new _(t,r,v.notProperty,!0).to.not.have.property(e)};v.propertyVal=function(t,e,r,n){new _(t,n,v.propertyVal,!0).to.have.property(e,r)};v.notPropertyVal=function(t,e,r,n){new _(t,n,v.notPropertyVal,!0).to.not.have.property(e,r)};v.deepPropertyVal=function(t,e,r,n){new _(t,n,v.deepPropertyVal,!0).to.have.deep.property(e,r)};v.notDeepPropertyVal=function(t,e,r,n){new _(t,n,v.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};v.ownProperty=function(t,e,r){new _(t,r,v.ownProperty,!0).to.have.own.property(e)};v.notOwnProperty=function(t,e,r){new _(t,r,v.notOwnProperty,!0).to.not.have.own.property(e)};v.ownPropertyVal=function(t,e,r,n){new _(t,n,v.ownPropertyVal,!0).to.have.own.property(e,r)};v.notOwnPropertyVal=function(t,e,r,n){new _(t,n,v.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};v.deepOwnPropertyVal=function(t,e,r,n){new _(t,n,v.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};v.notDeepOwnPropertyVal=function(t,e,r,n){new _(t,n,v.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};v.nestedProperty=function(t,e,r){new _(t,r,v.nestedProperty,!0).to.have.nested.property(e)};v.notNestedProperty=function(t,e,r){new _(t,r,v.notNestedProperty,!0).to.not.have.nested.property(e)};v.nestedPropertyVal=function(t,e,r,n){new _(t,n,v.nestedPropertyVal,!0).to.have.nested.property(e,r)};v.notNestedPropertyVal=function(t,e,r,n){new _(t,n,v.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};v.deepNestedPropertyVal=function(t,e,r,n){new _(t,n,v.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};v.notDeepNestedPropertyVal=function(t,e,r,n){new _(t,n,v.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};v.lengthOf=function(t,e,r){new _(t,r,v.lengthOf,!0).to.have.lengthOf(e)};v.hasAnyKeys=function(t,e,r){new _(t,r,v.hasAnyKeys,!0).to.have.any.keys(e)};v.hasAllKeys=function(t,e,r){new _(t,r,v.hasAllKeys,!0).to.have.all.keys(e)};v.containsAllKeys=function(t,e,r){new _(t,r,v.containsAllKeys,!0).to.contain.all.keys(e)};v.doesNotHaveAnyKeys=function(t,e,r){new _(t,r,v.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};v.doesNotHaveAllKeys=function(t,e,r){new _(t,r,v.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};v.hasAnyDeepKeys=function(t,e,r){new _(t,r,v.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};v.hasAllDeepKeys=function(t,e,r){new _(t,r,v.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};v.containsAllDeepKeys=function(t,e,r){new _(t,r,v.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};v.doesNotHaveAnyDeepKeys=function(t,e,r){new _(t,r,v.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};v.doesNotHaveAllDeepKeys=function(t,e,r){new _(t,r,v.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};v.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new _(t,n,v.throws,!0).to.throw(e,r);return _e(i,"object")};v.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new _(t,n,v.doesNotThrow,!0).to.not.throw(e,r)};v.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new je(n+'Invalid operator "'+e+'"',void 0,v.operator)}var o=new _(i,n,v.operator,!0);o.assert(_e(o,"object")===!0,"expected "+Ne(t)+" to be "+e+" "+Ne(r),"expected "+Ne(t)+" to not be "+e+" "+Ne(r))};v.closeTo=function(t,e,r,n){new _(t,n,v.closeTo,!0).to.be.closeTo(e,r)};v.approximately=function(t,e,r,n){new _(t,n,v.approximately,!0).to.be.approximately(e,r)};v.sameMembers=function(t,e,r){new _(t,r,v.sameMembers,!0).to.have.same.members(e)};v.notSameMembers=function(t,e,r){new _(t,r,v.notSameMembers,!0).to.not.have.same.members(e)};v.sameDeepMembers=function(t,e,r){new _(t,r,v.sameDeepMembers,!0).to.have.same.deep.members(e)};v.notSameDeepMembers=function(t,e,r){new _(t,r,v.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};v.sameOrderedMembers=function(t,e,r){new _(t,r,v.sameOrderedMembers,!0).to.have.same.ordered.members(e)};v.notSameOrderedMembers=function(t,e,r){new _(t,r,v.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};v.sameDeepOrderedMembers=function(t,e,r){new _(t,r,v.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};v.notSameDeepOrderedMembers=function(t,e,r){new _(t,r,v.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};v.includeMembers=function(t,e,r){new _(t,r,v.includeMembers,!0).to.include.members(e)};v.notIncludeMembers=function(t,e,r){new _(t,r,v.notIncludeMembers,!0).to.not.include.members(e)};v.includeDeepMembers=function(t,e,r){new _(t,r,v.includeDeepMembers,!0).to.include.deep.members(e)};v.notIncludeDeepMembers=function(t,e,r){new _(t,r,v.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};v.includeOrderedMembers=function(t,e,r){new _(t,r,v.includeOrderedMembers,!0).to.include.ordered.members(e)};v.notIncludeOrderedMembers=function(t,e,r){new _(t,r,v.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};v.includeDeepOrderedMembers=function(t,e,r){new _(t,r,v.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};v.notIncludeDeepOrderedMembers=function(t,e,r){new _(t,r,v.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};v.oneOf=function(t,e,r){new _(t,r,v.oneOf,!0).to.be.oneOf(e)};v.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Ne(t)} to be an iterable`:`expected ${Ne(t)} to be an iterable`,new je(e,void 0,v.isIterable)};v.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,v.changes,!0).to.change(e,r)};v.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,v.changesBy,!0).to.change(e,r).by(n)};v.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,v.doesNotChange,!0).to.not.change(e,r)};v.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,v.changesButNotBy,!0).to.change(e,r).but.not.by(n)};v.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,v.increases,!0).to.increase(e,r)};v.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,v.increasesBy,!0).to.increase(e,r).by(n)};v.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,v.doesNotIncrease,!0).to.not.increase(e,r)};v.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,v.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};v.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,v.decreases,!0).to.decrease(e,r)};v.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,v.decreasesBy,!0).to.decrease(e,r).by(n)};v.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,v.doesNotDecrease,!0).to.not.decrease(e,r)};v.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new _(t,i,v.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};v.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,v.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};v.ifError=function(t){if(t)throw t};v.isExtensible=function(t,e){new _(t,e,v.isExtensible,!0).to.be.extensible};v.isNotExtensible=function(t,e){new _(t,e,v.isNotExtensible,!0).to.not.be.extensible};v.isSealed=function(t,e){new _(t,e,v.isSealed,!0).to.be.sealed};v.isNotSealed=function(t,e){new _(t,e,v.isNotSealed,!0).to.not.be.sealed};v.isFrozen=function(t,e){new _(t,e,v.isFrozen,!0).to.be.frozen};v.isNotFrozen=function(t,e){new _(t,e,v.isNotFrozen,!0).to.not.be.frozen};v.isEmpty=function(t,e){new _(t,e,v.isEmpty,!0).to.be.empty};v.isNotEmpty=function(t,e){new _(t,e,v.isNotEmpty,!0).to.not.be.empty};C(function t(e,r){return v[r]=v[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var qF=[];function eY(t){let e={AssertionError:je,util:Qg,config:wr,expect:ty,assert:v,Assertion:_,...I1};return~qF.indexOf(t)||(t(e,Qg),qF.push(t)),e}C(eY,"use");var Rp=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new W(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new W(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new W(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var F1=ur(require("node:path"),1),uy=class{get uri(){return this._uri}get filename(){return F1.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new W(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof ae?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Rp(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new ae(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let a=n+1;a<i;a++)o.push(this._lines[a]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof W))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new W(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof ae))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new ae(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new Ub(n)}}};function nY(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var Ub=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=nY(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new Vb(i,e-a)}},Vb=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var fy=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=kp;this.onDidChangeActiveTextEditor=kp;this.onDidChangeVisibleTextEditors=kp;this.onDidChangeTextEditorSelection=kp;this.onDidChangeTextEditorVisibleRanges=kp;this.configuration=new Xl,this.keyValueStore=new ep,this.messages=new tp,this.clipboard=new Yl(this.client),this.capabilities=new kg,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await TI(this.client);this.assetsRoot_=Bb.default.join(e,"assets"),this.cursorlessNeovimPath=Bb.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return OF()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return MI(e)}onDidOpenTextDocument(e,r,n){return AI(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let a,l;e?(a=[],l=[]):(a=await Eg(r,this.client),l=await xI(r,this.client,i));let p=this.toNeovimEditor(r,n,i,l,a);return Br().emitEvent("onDidOpenTextDocument",p.document),p}toNeovimEditor(e,r,n,i,o){let a=this.getTextDocument(r),l=this.getTextEditor(e);return a?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),a.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),a=new uy(OI.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,a)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,a)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new Mg(PP(),this.client,this,e,a,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){_I(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,C1.pull)(this.disposables,...e)}};function kp(){return{dispose(){}}}var dy=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var oY=BigInt(1e9);function O1(t,e=BigInt(1e6)){return Number(t*e/oY)/Number(e)}async function my(t,e=[],r=[],n,i,o,a,l){let p={documentContents:n.document.getText(),selections:n.selections.map(JR)};o!=null&&(p.marks=o),l!=null&&(p.metadata=l),e.includes("clipboard")||(p.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(p.visibleRanges=n.visibleRanges.map(qc));for(let u of na){let d=t?.get(u),h=`${u}Mark`;d!=null&&!e.includes(h)&&(p[h]=d.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let u=a?.startTimestamp;if(u==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-u;p.timeOffsetSeconds=O1(d)}return p}var sY=ur(fl(),1);function N1(t,e,r,n,i,o,a,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:a,scopeProvider:o,takeSnapshot(p,u,d,h,g){return my(e,p,u,d,h,g,void 0,void 0)},setStoredTarget(p,u,d){e.set(u,d?.map(h=>mI(p,h)))},hatTokenMap:r,runIntegrationTests:l}}async function L1(t,e,r,n){let i={[Nx]:async(...o)=>{(await t.mode).mode==="t"&&bI(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),p=vf(o);if(await n.getFocusedElementType()==="terminal"&&$o(p)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&wI(t)}return l}catch(l){if(e.runMode!=="test"){let p=l;console.error(p.stack),e.handleCommandError(p)}throw l}},"cursorless.repeatPreviousCommand":De,"cursorless.showCheatsheet":De,"cursorless.internal.updateCheatsheetDefaults":De,"cursorless.recordTestCase":De,"cursorless.recordOneTestCaseThenPause":De,"cursorless.pauseRecording":De,"cursorless.resumeRecording":De,"cursorless.takeSnapshot":De,"cursorless.recordScopeTests.showUnimplementedFacets":De,"cursorless.recordScopeTests.saveActiveDocument":De,"cursorless.showQuickPick":De,"cursorless.showDocumentation":De,"cursorless.private.logQuickActions":De,"cursorless.toggleDecorations":De,"cursorless.recomputeDecorationStyles":De,"cursorless.showScopeVisualizer":De,"cursorless.hideScopeVisualizer":De,"cursorless.analyzeCommandHistory":De,"cursorless.keyboard.escape":De,"cursorless.keyboard.targeted.targetHat":De,"cursorless.keyboard.targeted.targetScope":De,"cursorless.keyboard.targeted.targetSelection":De,"cursorless.keyboard.targeted.clearTarget":De,"cursorless.keyboard.targeted.runActionOnTarget":De,"cursorless.keyboard.modal.modeOn":De,"cursorless.keyboard.modal.modeOff":De,"cursorless.keyboard.modal.modeToggle":De,"cursorless.keyboard.undoTarget":De,"cursorless.keyboard.redoTarget":De,"cursorless.tutorial.start":De,"cursorless.tutorial.next":De,"cursorless.tutorial.previous":De,"cursorless.tutorial.restart":De,"cursorless.tutorial.resume":De,"cursorless.tutorial.list":De,"cursorless.documentationOpened":De};Object.entries(i).map(([o,a])=>Br().registerCommand(o,a))}async function De(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function U1(t){let e=t.nvim,r=new fy(e);await r.init();let n=r.runMode==="production"?r:new pf(r,new af,r.runMode==="test",void 0),i=new bu,o=new dy(e),a=r.runMode==="test"?i:o,{commandApi:l,storedTargets:p,hatTokenMap:u,scopeProvider:d,injectIde:h,runIntegrationTests:g}=await dI({ide:n,commandServerApi:a});await L1(e,r,l,a);let x={testHelpers:r.runMode==="test"?N1(i,p,u,r,n,d,h,g):void 0};Br().registerExtensionApi(gI,x),console.log("activate(): Cursorless extension loaded")}function V1(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await aY(t),{sync:!1})}async function aY(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await U1(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
