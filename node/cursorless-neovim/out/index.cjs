"use strict";var FB=Object.create;var Fu=Object.defineProperty;var IB=Object.getOwnPropertyDescriptor;var CB=Object.getOwnPropertyNames;var NB=Object.getPrototypeOf,OB=Object.prototype.hasOwnProperty;var Qa=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),V_=(t,e)=>{for(var r in e)Fu(t,r,{get:e[r],enumerable:!0})},W_=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of CB(e))!OB.call(t,i)&&i!==r&&Fu(t,i,{get:()=>e[i],enumerable:!(n=IB(e,i))||n.enumerable});return t};var Vr=(t,e,r)=>(r=t!=null?FB(NB(t)):{},W_(e||!t||!t.__esModule?Fu(r,"default",{value:t,enumerable:!0}):r,t)),LB=t=>W_(Fu({},"__esModule",{value:!0}),t);var IA=Qa((FA,Kf)=>{(function(t,e){typeof Kf=="object"&&Kf.exports?Kf.exports=e():t.nearley=e()})(FA,function(){function t(p,f,d){return this.id=++t.highestId,this.name=p,this.symbols=f,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(p){var f=typeof p>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,p).map(l).join(" ")+" \u25CF "+this.symbols.slice(p).map(l).join(" ");return this.name+" \u2192 "+f};function e(p,f,d,h){this.rule=p,this.dot=f,this.reference=d,this.data=[],this.wantedBy=h,this.isComplete=this.dot===p.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(p){var f=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return f.left=this,f.right=p,f.isComplete&&(f.data=f.build(),f.right=void 0),f},e.prototype.build=function(){var p=[],f=this;do p.push(f.right.data),f=f.left;while(f.left);return p.reverse(),p},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(p,f){this.grammar=p,this.index=f,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(p){for(var f=this.states,d=this.wants,h=this.completed,y=0;y<f.length;y++){var T=f[y];if(T.isComplete){if(T.finish(),T.data!==o.fail){for(var w=T.wantedBy,E=w.length;E--;){var U=w[E];this.complete(U,T)}if(T.reference===this.index){var V=T.rule.name;(this.completed[V]=this.completed[V]||[]).push(T)}}}else{var V=T.rule.symbols[T.dot];if(typeof V!="string"){this.scannable.push(T);continue}if(d[V]){if(d[V].push(T),h.hasOwnProperty(V))for(var j=h[V],E=0;E<j.length;E++){var ne=j[E];this.complete(T,ne)}}else d[V]=[T],this.predict(V)}}},r.prototype.predict=function(p){for(var f=this.grammar.byName[p]||[],d=0;d<f.length;d++){var h=f[d],y=this.wants[p],T=new e(h,0,this.index,y);this.states.push(T)}},r.prototype.complete=function(p,f){var d=p.nextState(f);this.states.push(d)};function n(p,f){this.rules=p,this.start=f||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(h){d.hasOwnProperty(h.name)||(d[h.name]=[]),d[h.name].push(h)})}n.fromCompiled=function(h,f){var d=h.Lexer;h.ParserStart&&(f=h.ParserStart,h=h.ParserRules);var h=h.map(function(T){return new t(T.name,T.symbols,T.postprocess)}),y=new n(h,f);return y.lexer=d,y};function i(){this.reset("")}i.prototype.reset=function(p,f){this.buffer=p,this.index=0,this.line=f?f.line:1,this.lastLineBreak=f?-f.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var p=this.buffer[this.index++];return p===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:p}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(p,f){var d=this.buffer;if(typeof d=="string"){var h=d.split(`
`).slice(Math.max(0,this.line-5),this.line),y=d.indexOf(`
`,this.index);y===-1&&(y=d.length);var T=this.index-this.lastLineBreak,w=String(this.line).length;return f+=" at line "+this.line+" col "+T+`:

`,f+=h.map(function(U,V){return E(this.line-h.length+V+1,w)+" "+U},this).join(`
`),f+=`
`+E("",w+T)+`^
`,f}else return f+" at index "+(this.index-1);function E(U,V){var j=String(U);return Array(V-j.length+1).join(" ")+j}};function o(p,f,d){if(p instanceof n)var h=p,d=f;else var h=n.fromCompiled(p,f);this.grammar=h,this.options={keepHistory:!1,lexer:h.lexer||new i};for(var y in d||{})this.options[y]=d[y];this.lexer=this.options.lexer,this.lexerState=void 0;var T=new r(h,0),w=this.table=[T];T.wants[h.start]=[],T.predict(h.start),T.process(),this.current=0}o.fail={},o.prototype.feed=function(p){var f=this.lexer;f.reset(p,this.lexerState);for(var d;;){try{if(d=f.next(),!d)break}catch(fe){var w=new r(this.grammar,this.current+1);this.table.push(w);var h=new Error(this.reportLexerError(fe));throw h.offset=this.current,h.token=fe.token,h}var y=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var T=this.current+1,w=new r(this.grammar,T);this.table.push(w);for(var E=d.text!==void 0?d.text:d.value,U=f.constructor===i?d.value:f.transform?.(d)??d,V=y.scannable,j=V.length;j--;){var ne=V[j],se=ne.rule.symbols[ne.dot];if(se.test?se.test(U):se.type?se.type===d.type:se.literal===E){var ce=ne.nextState({data:U,token:d,isToken:!0,reference:T-1});w.states.push(ce)}}if(w.process(),w.states.length===0){var h=new Error(this.reportError(d));throw h.offset=this.current,h.token=d,h}this.options.keepHistory&&(y.lexerState=f.save()),this.current++}return y&&(this.lexerState=f.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(p){var f,d,h=p.token;return h?(f="input "+JSON.stringify(h.text[0])+" (lexer error)",d=this.lexer.formatError(h,"Syntax error")):(f="input (lexer error)",d=p.message),this.reportErrorCommon(d,f)},o.prototype.reportError=function(p){var f=(p.type?p.type+" token: ":"")+JSON.stringify(p.value!==void 0?p.value:p),d=this.lexer.formatError(p,"Syntax error");return this.reportErrorCommon(d,f)},o.prototype.reportErrorCommon=function(p,f){var d=[];d.push(p);var h=this.table.length-2,y=this.table[h],T=y.states.filter(function(E){var U=E.rule.symbols[E.dot];return U&&typeof U!="string"});if(T.length===0)d.push("Unexpected "+f+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(y.states,d);else{d.push("Unexpected "+f+`. Instead, I was expecting to see one of the following:
`);var w=T.map(function(E){return this.buildFirstStateStack(E,[])||[E]},this);w.forEach(function(E){var U=E[0],V=U.rule.symbols[U.dot],j=this.getSymbolDisplay(V);d.push("A "+j+" based on:"),this.displayStateStack(E,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(p,f){for(var d,h=0,y=0;y<p.length;y++){var T=p[y],w=T.rule.toString(T.dot);w===d?h++:(h>0&&f.push("    ^ "+h+" more lines identical to this"),h=0,f.push("    "+w)),d=w}},o.prototype.getSymbolDisplay=function(p){return s(p)},o.prototype.buildFirstStateStack=function(p,f){if(f.indexOf(p)!==-1)return null;if(p.wantedBy.length===0)return[p];var d=p.wantedBy[0],h=[p].concat(f),y=this.buildFirstStateStack(d,h);return y===null?null:[p].concat(y)},o.prototype.save=function(){var p=this.table[this.current];return p.lexerState=this.lexerState,p},o.prototype.restore=function(p){var f=p.index;this.current=f,this.table[f]=p,this.table.splice(f+1),this.lexerState=p.lexerState,this.results=this.finish()},o.prototype.rewind=function(p){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[p])},o.prototype.finish=function(){var p=[],f=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(h){h.rule.name===f&&h.dot===h.rule.symbols.length&&h.reference===0&&h.data!==o.fail&&p.push(h)}),p.map(function(h){return h.data})};function s(p){var f=typeof p;if(f==="string")return p;if(f==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return"character matching "+p;if(p.type)return p.type+" token";if(p.test)return"token matching "+String(p.test);throw new Error("Unknown symbol type: "+p)}}function l(p){var f=typeof p;if(f==="string")return p;if(f==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return p.toString();if(p.type)return"%"+p.type;if(p.test)return"<"+String(p.test)+">";throw new Error("Unknown symbol type: "+p)}}return{Parser:o,Grammar:n,Rule:t}})});var HA=Qa((UA,Zf)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof Zf=="object"&&Zf.exports?Zf.exports=e():t.moo=e()})(UA,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(H){return H&&e.call(H)==="[object RegExp]"}function i(H){return H&&typeof H=="object"&&!n(H)&&!Array.isArray(H)}function o(H){return H.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(H){var I=new RegExp("|"+H);return I.exec("").length-1}function l(H){return"("+H+")"}function p(H){if(!H.length)return"(?!)";var I=H.map(function(A){return"(?:"+A+")"}).join("|");return"(?:"+I+")"}function f(H){if(typeof H=="string")return"(?:"+o(H)+")";if(n(H)){if(H.ignoreCase)throw new Error("RegExp /i flag not allowed");if(H.global)throw new Error("RegExp /g flag is implied");if(H.sticky)throw new Error("RegExp /y flag is implied");if(H.multiline)throw new Error("RegExp /m flag is implied");return H.source}else throw new Error("Not a pattern: "+H)}function d(H,I){return H.length>I?H:Array(I-H.length+1).join(" ")+H}function h(H,I){for(var A=H.length,z=0;;){var Z=H.lastIndexOf(`
`,A-1);if(Z===-1||(z++,A=Z,z===I)||A===0)break}var F=z<I?0:A+1;return H.substring(F).split(`
`)}function y(H){for(var I=Object.getOwnPropertyNames(H),A=[],z=0;z<I.length;z++){var Z=I[z],F=H[Z],O=[].concat(F);if(Z==="include"){for(var $=0;$<O.length;$++)A.push({include:O[$]});continue}var X=[];O.forEach(function(Q){i(Q)?(X.length&&A.push(w(Z,X)),A.push(w(Z,Q)),X=[]):X.push(Q)}),X.length&&A.push(w(Z,X))}return A}function T(H){for(var I=[],A=0;A<H.length;A++){var z=H[A];if(z.include){for(var Z=[].concat(z.include),F=0;F<Z.length;F++)I.push({include:Z[F]});continue}if(!z.type)throw new Error("Rule has no type: "+JSON.stringify(z));I.push(w(z.type,z))}return I}function w(H,I){if(i(I)||(I={match:I}),I.include)throw new Error("Matching rules cannot also include states");var A={defaultType:H,lineBreaks:!!I.error||!!I.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var z in I)t.call(I,z)&&(A[z]=I[z]);if(typeof A.type=="string"&&H!==A.type)throw new Error("Type transform cannot be a string (type '"+A.type+"' for token '"+H+"')");var Z=A.match;return A.match=Array.isArray(Z)?Z:Z?[Z]:[],A.match.sort(function(F,O){return n(F)&&n(O)?0:n(O)?-1:n(F)?1:O.length-F.length}),A}function E(H){return Array.isArray(H)?T(H):y(H)}var U=w("error",{lineBreaks:!0,shouldThrow:!0});function V(H,I){for(var A=null,z=Object.create(null),Z=!0,F=null,O=[],$=[],X=0;X<H.length;X++)H[X].fallback&&(Z=!1);for(var X=0;X<H.length;X++){var Q=H[X];if(Q.include)throw new Error("Inheritance is not allowed in stateless lexers");if(Q.error||Q.fallback){if(A)throw!Q.fallback==!A.fallback?new Error("Multiple "+(Q.fallback?"fallback":"error")+" rules not allowed (for token '"+Q.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+Q.defaultType+"')");A=Q}var te=Q.match.slice();if(Z)for(;te.length&&typeof te[0]=="string"&&te[0].length===1;){var Te=te.shift();z[Te.charCodeAt(0)]=Q}if(Q.pop||Q.push||Q.next){if(!I)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+Q.defaultType+"')");if(Q.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+Q.defaultType+"')")}if(te.length!==0){Z=!1,O.push(Q);for(var be=0;be<te.length;be++){var qe=te[be];if(n(qe)){if(F===null)F=qe.unicode;else if(F!==qe.unicode&&Q.fallback===!1)throw new Error("If one rule is /u then all must be")}}var Ne=p(te.map(f)),ht=new RegExp(Ne);if(ht.test(""))throw new Error("RegExp matches empty string: "+ht);var $t=s(Ne);if($t>0)throw new Error("RegExp has capture groups: "+ht+`
Use (?: \u2026 ) instead`);if(!Q.lineBreaks&&ht.test(`
`))throw new Error("Rule should declare lineBreaks: "+ht);$.push(l(Ne))}}var en=A&&A.fallback,No=r&&!en?"ym":"gm",fi=r||en?"":"|";F===!0&&(No+="u");var Ca=new RegExp(p($)+fi,No);return{regexp:Ca,groups:O,fast:z,error:A||U}}function j(H){var I=V(E(H));return new fe({start:I},"start")}function ne(H,I,A){var z=H&&(H.push||H.next);if(z&&!A[z])throw new Error("Missing state '"+z+"' (in token '"+H.defaultType+"' of state '"+I+"')");if(H&&H.pop&&+H.pop!=1)throw new Error("pop must be 1 (in token '"+H.defaultType+"' of state '"+I+"')")}function se(H,I){var A=H.$all?E(H.$all):[];delete H.$all;var z=Object.getOwnPropertyNames(H);I||(I=z[0]);for(var Z=Object.create(null),F=0;F<z.length;F++){var O=z[F];Z[O]=E(H[O]).concat(A)}for(var F=0;F<z.length;F++)for(var O=z[F],$=Z[O],X=Object.create(null),Q=0;Q<$.length;Q++){var te=$[Q];if(te.include){var Te=[Q,1];if(te.include!==O&&!X[te.include]){X[te.include]=!0;var be=Z[te.include];if(!be)throw new Error("Cannot include nonexistent state '"+te.include+"' (in state '"+O+"')");for(var qe=0;qe<be.length;qe++){var Ne=be[qe];$.indexOf(Ne)===-1&&Te.push(Ne)}}$.splice.apply($,Te),Q--}}for(var ht=Object.create(null),F=0;F<z.length;F++){var O=z[F];ht[O]=V(Z[O],!0)}for(var F=0;F<z.length;F++){for(var $t=z[F],en=ht[$t],No=en.groups,Q=0;Q<No.length;Q++)ne(No[Q],$t,ht);for(var fi=Object.getOwnPropertyNames(en.fast),Q=0;Q<fi.length;Q++)ne(en.fast[fi[Q]],$t,ht)}return new fe(ht,I)}function ce(H){for(var I=typeof Map<"u",A=I?new Map:Object.create(null),z=Object.getOwnPropertyNames(H),Z=0;Z<z.length;Z++){var F=z[Z],O=H[F],$=Array.isArray(O)?O:[O];$.forEach(function(X){if(typeof X!="string")throw new Error("keyword must be string (in keyword '"+F+"')");I?A.set(X,F):A[X]=F})}return function(X){return I?A.get(X):A[X]}}var fe=function(H,I){this.startState=I,this.states=H,this.buffer="",this.stack=[],this.reset()};fe.prototype.reset=function(H,I){return this.buffer=H||"",this.index=0,this.line=I?I.line:1,this.col=I?I.col:1,this.queuedToken=I?I.queuedToken:null,this.queuedText=I?I.queuedText:"",this.queuedThrow=I?I.queuedThrow:null,this.setState(I?I.state:this.startState),this.stack=I&&I.stack?I.stack.slice():[],this},fe.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},fe.prototype.setState=function(H){if(!(!H||this.state===H)){this.state=H;var I=this.states[H];this.groups=I.groups,this.error=I.error,this.re=I.regexp,this.fast=I.fast}},fe.prototype.popState=function(){this.setState(this.stack.pop())},fe.prototype.pushState=function(H){this.stack.push(this.state),this.setState(H)};var pt=r?function(H,I){return H.exec(I)}:function(H,I){var A=H.exec(I);return A[0].length===0?null:A};fe.prototype._getGroup=function(H){for(var I=this.groups.length,A=0;A<I;A++)if(H[A+1]!==void 0)return this.groups[A];throw new Error("Cannot find token type for matched text")};function Wt(){return this.value}if(fe.prototype.next=function(){var H=this.index;if(this.queuedGroup){var I=this._token(this.queuedGroup,this.queuedText,H);return this.queuedGroup=null,this.queuedText="",I}var A=this.buffer;if(H!==A.length){var O=this.fast[A.charCodeAt(H)];if(O)return this._token(O,A.charAt(H),H);var z=this.re;z.lastIndex=H;var Z=pt(z,A),F=this.error;if(Z==null)return this._token(F,A.slice(H,A.length),H);var O=this._getGroup(Z),$=Z[0];return F.fallback&&Z.index!==H?(this.queuedGroup=O,this.queuedText=$,this._token(F,A.slice(H,Z.index),H)):this._token(O,$,H)}},fe.prototype._token=function(H,I,A){var z=0;if(H.lineBreaks){var Z=/\n/g,F=1;if(I===`
`)z=1;else for(;Z.exec(I);)z++,F=Z.lastIndex}var O={type:typeof H.type=="function"&&H.type(I)||H.defaultType,value:typeof H.value=="function"?H.value(I):I,text:I,toString:Wt,offset:A,lineBreaks:z,line:this.line,col:this.col},$=I.length;if(this.index+=$,this.line+=z,z!==0?this.col=$-F+1:this.col+=$,H.shouldThrow){var X=new Error(this.formatError(O,"invalid syntax"));throw X}return H.pop?this.popState():H.push?this.pushState(H.push):H.next&&this.setState(H.next),O},typeof Symbol<"u"&&Symbol.iterator){var dt=function(H){this.lexer=H};dt.prototype.next=function(){var H=this.lexer.next();return{value:H,done:!H}},dt.prototype[Symbol.iterator]=function(){return this},fe.prototype[Symbol.iterator]=function(){return new dt(this)}}return fe.prototype.formatError=function(H,I){if(H==null)var A=this.buffer.slice(this.index),H={text:A,offset:this.index,lineBreaks:A.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var z=2,Z=Math.max(H.line-z,1),F=H.line+z,O=String(F).length,$=h(this.buffer,this.line-H.line+z+1).slice(0,5),X=[];X.push(I+" at line "+H.line+" col "+H.col+":"),X.push("");for(var Q=0;Q<$.length;Q++){var te=$[Q],Te=Z+Q;X.push(d(String(Te),O)+"  "+te),Te===H.line&&X.push(d("",O+H.col+1)+"^")}return X.join(`
`)},fe.prototype.clone=function(){return new fe(this.states,this.state)},fe.prototype.has=function(H){return!0},{compile:j,states:se,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ce}})});var kl=Qa((Zn,IP)=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});function In(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var b9=typeof process=="object"&&process.env.NODE_ENV==="production";function gn(t,e){if(!t)throw b9?new Error("Invariant failed"):new Error(e())}Zn.invariant=gn;var _S=Object.prototype.hasOwnProperty,w9=Array.prototype.splice,E9=Object.prototype.toString;function pa(t){return E9.call(t).slice(8,-1)}var km=Object.assign||function(t,e){return RS(e).forEach(function(r){_S.call(e,r)&&(t[r]=e[r])}),t},RS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function xo(t){return Array.isArray(t)?km(t.constructor(t.length),t):pa(t)==="Map"?new Map(t):pa(t)==="Set"?new Set(t):t&&typeof t=="object"?km(Object.create(Object.getPrototypeOf(t)),t):t}var DP=function(){function t(){this.commands=km({},_9),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||gn(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),gn(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return RS(i).forEach(function(s){if(_S.call(n.commands,s)){var l=e===o;o=n.commands[s](i[s],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var p=pa(e)==="Map"?n.update(e.get(s),i[s]):n.update(e[s],i[s]),f=pa(o)==="Map"?o.get(s):o[s];(!n.isEquals(p,f)||typeof p>"u"&&!_S.call(e,s))&&(o===e&&(o=xo(e)),pa(o)==="Map"?o.set(s,p):o[s]=p)}}),o},t}();Zn.Context=DP;var _9={$push:function(t,e,r){return PP(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return PP(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return R9(e,r),t.forEach(function(i){FP(i),e===n&&i.length&&(e=xo(n)),w9.apply(e,i)}),e},$set:function(t,e,r){return A9(r),t},$toggle:function(t,e){Rl(t,"$toggle");var r=t.length?xo(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return Rl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=xo(n)),delete e[i])}),e},$add:function(t,e,r,n){return MP(e,"$add"),Rl(t,"$add"),pa(e)==="Map"?t.forEach(function(i){var o=i[0],s=i[1];e===n&&e.get(o)!==s&&(e=xo(n)),e.set(o,s)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=xo(n)),e.add(i)}),e},$remove:function(t,e,r,n){return MP(e,"$remove"),Rl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=xo(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return P9(e,t),RS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=xo(n)),e[i]=t[i])}),e},$apply:function(t,e){return k9(t),t(e)}},kS=new DP;Zn.isEquals=kS.update.isEquals;Zn.extend=kS.extend;Zn.default=kS.update;Zn.default.default=IP.exports=km(Zn.default,Zn);function PP(t,e,r){gn(Array.isArray(t),function(){return"update(): expected target of "+In(r)+" to be an array; got "+In(t)+"."}),Rl(e[r],r)}function Rl(t,e){gn(Array.isArray(t),function(){return"update(): expected spec of "+In(e)+" to be an array; got "+In(t)+". Did you forget to wrap your parameter in an array?"})}function R9(t,e){gn(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+In(t)}),FP(e.$splice)}function FP(t){gn(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+In(t)+". Did you forget to wrap your parameters in an array?"})}function k9(t){gn(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+In(t)+"."})}function A9(t){gn(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function P9(t,e){gn(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+In(e)}),gn(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+In(t)})}function MP(t,e){var r=pa(t);gn(r==="Map"||r==="Set",function(){return"update(): "+In(e)+" expects a target of type Set or Map; got "+In(r)})}});var Vv=Qa((dc,dp)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,p="__lodash_placeholder__",f=1,d=2,h=4,y=1,T=2,w=1,E=2,U=4,V=8,j=16,ne=32,se=64,ce=128,fe=256,pt=512,Wt=30,dt="...",H=800,I=16,A=1,z=2,Z=3,F=1/0,O=9007199254740991,$=17976931348623157e292,X=NaN,Q=4294967295,te=Q-1,Te=Q>>>1,be=[["ary",ce],["bind",w],["bindKey",E],["curry",V],["curryRight",j],["flip",pt],["partial",ne],["partialRight",se],["rearg",fe]],qe="[object Arguments]",Ne="[object Array]",ht="[object AsyncFunction]",$t="[object Boolean]",en="[object Date]",No="[object DOMException]",fi="[object Error]",Ca="[object Function]",pw="[object GeneratorFunction]",_n="[object Map]",Mc="[object Number]",QC="[object Null]",mi="[object Object]",uw="[object Promise]",YC="[object Proxy]",Dc="[object RegExp]",Rn="[object Set]",Fc="[object String]",$p="[object Symbol]",ZC="[object Undefined]",Ic="[object WeakMap]",XC="[object WeakSet]",Cc="[object ArrayBuffer]",Na="[object DataView]",Dy="[object Float32Array]",Fy="[object Float64Array]",Iy="[object Int8Array]",Cy="[object Int16Array]",Ny="[object Int32Array]",Oy="[object Uint8Array]",Ly="[object Uint8ClampedArray]",Uy="[object Uint16Array]",Hy="[object Uint32Array]",JC=/\b__p \+= '';/g,e1=/\b(__p \+=) '' \+/g,t1=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fw=/&(?:amp|lt|gt|quot|#39);/g,mw=/[&<>"']/g,r1=RegExp(fw.source),n1=RegExp(mw.source),i1=/<%-([\s\S]+?)%>/g,o1=/<%([\s\S]+?)%>/g,dw=/<%=([\s\S]+?)%>/g,a1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s1=/^\w*$/,c1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,By=/[\\^$.*+?()[\]{}|]/g,l1=RegExp(By.source),Vy=/^\s+/,p1=/\s/,u1=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,f1=/\{\n\/\* \[wrapped with (.+)\] \*/,m1=/,? & /,d1=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,h1=/[()=,{}\[\]\/\s]/,g1=/\\(\\)?/g,y1=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,hw=/\w*$/,x1=/^[-+]0x[0-9a-f]+$/i,T1=/^0b[01]+$/i,S1=/^\[object .+?Constructor\]$/,v1=/^0o[0-7]+$/i,b1=/^(?:0|[1-9]\d*)$/,w1=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jp=/($^)/,E1=/['\n\r\u2028\u2029\\]/g,zp="\\ud800-\\udfff",_1="\\u0300-\\u036f",R1="\\ufe20-\\ufe2f",k1="\\u20d0-\\u20ff",gw=_1+R1+k1,yw="\\u2700-\\u27bf",xw="a-z\\xdf-\\xf6\\xf8-\\xff",A1="\\xac\\xb1\\xd7\\xf7",P1="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",M1="\\u2000-\\u206f",D1=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Tw="A-Z\\xc0-\\xd6\\xd8-\\xde",Sw="\\ufe0e\\ufe0f",vw=A1+P1+M1+D1,Wy="['\u2019]",F1="["+zp+"]",bw="["+vw+"]",qp="["+gw+"]",ww="\\d+",I1="["+yw+"]",Ew="["+xw+"]",_w="[^"+zp+vw+ww+yw+xw+Tw+"]",$y="\\ud83c[\\udffb-\\udfff]",C1="(?:"+qp+"|"+$y+")",Rw="[^"+zp+"]",jy="(?:\\ud83c[\\udde6-\\uddff]){2}",zy="[\\ud800-\\udbff][\\udc00-\\udfff]",Oa="["+Tw+"]",kw="\\u200d",Aw="(?:"+Ew+"|"+_w+")",N1="(?:"+Oa+"|"+_w+")",Pw="(?:"+Wy+"(?:d|ll|m|re|s|t|ve))?",Mw="(?:"+Wy+"(?:D|LL|M|RE|S|T|VE))?",Dw=C1+"?",Fw="["+Sw+"]?",O1="(?:"+kw+"(?:"+[Rw,jy,zy].join("|")+")"+Fw+Dw+")*",L1="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",U1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Iw=Fw+Dw+O1,H1="(?:"+[I1,jy,zy].join("|")+")"+Iw,B1="(?:"+[Rw+qp+"?",qp,jy,zy,F1].join("|")+")",V1=RegExp(Wy,"g"),W1=RegExp(qp,"g"),qy=RegExp($y+"(?="+$y+")|"+B1+Iw,"g"),$1=RegExp([Oa+"?"+Ew+"+"+Pw+"(?="+[bw,Oa,"$"].join("|")+")",N1+"+"+Mw+"(?="+[bw,Oa+Aw,"$"].join("|")+")",Oa+"?"+Aw+"+"+Pw,Oa+"+"+Mw,U1,L1,ww,H1].join("|"),"g"),j1=RegExp("["+kw+zp+gw+Sw+"]"),z1=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,q1=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],G1=-1,nt={};nt[Dy]=nt[Fy]=nt[Iy]=nt[Cy]=nt[Ny]=nt[Oy]=nt[Ly]=nt[Uy]=nt[Hy]=!0,nt[qe]=nt[Ne]=nt[Cc]=nt[$t]=nt[Na]=nt[en]=nt[fi]=nt[Ca]=nt[_n]=nt[Mc]=nt[mi]=nt[Dc]=nt[Rn]=nt[Fc]=nt[Ic]=!1;var rt={};rt[qe]=rt[Ne]=rt[Cc]=rt[Na]=rt[$t]=rt[en]=rt[Dy]=rt[Fy]=rt[Iy]=rt[Cy]=rt[Ny]=rt[_n]=rt[Mc]=rt[mi]=rt[Dc]=rt[Rn]=rt[Fc]=rt[$p]=rt[Oy]=rt[Ly]=rt[Uy]=rt[Hy]=!0,rt[fi]=rt[Ca]=rt[Ic]=!1;var K1={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Q1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Y1={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Z1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},X1=parseFloat,J1=parseInt,Cw=typeof global=="object"&&global&&global.Object===Object&&global,eN=typeof self=="object"&&self&&self.Object===Object&&self,It=Cw||eN||Function("return this")(),Gy=typeof dc=="object"&&dc&&!dc.nodeType&&dc,Oo=Gy&&typeof dp=="object"&&dp&&!dp.nodeType&&dp,Nw=Oo&&Oo.exports===Gy,Ky=Nw&&Cw.process,tn=function(){try{var P=Oo&&Oo.require&&Oo.require("util").types;return P||Ky&&Ky.binding&&Ky.binding("util")}catch{}}(),Ow=tn&&tn.isArrayBuffer,Lw=tn&&tn.isDate,Uw=tn&&tn.isMap,Hw=tn&&tn.isRegExp,Bw=tn&&tn.isSet,Vw=tn&&tn.isTypedArray;function Nr(P,W,B){switch(B.length){case 0:return P.call(W);case 1:return P.call(W,B[0]);case 2:return P.call(W,B[0],B[1]);case 3:return P.call(W,B[0],B[1],B[2])}return P.apply(W,B)}function tN(P,W,B,ae){for(var we=-1,Ge=P==null?0:P.length;++we<Ge;){var At=P[we];W(ae,At,B(At),P)}return ae}function rn(P,W){for(var B=-1,ae=P==null?0:P.length;++B<ae&&W(P[B],B,P)!==!1;);return P}function rN(P,W){for(var B=P==null?0:P.length;B--&&W(P[B],B,P)!==!1;);return P}function Ww(P,W){for(var B=-1,ae=P==null?0:P.length;++B<ae;)if(!W(P[B],B,P))return!1;return!0}function Vi(P,W){for(var B=-1,ae=P==null?0:P.length,we=0,Ge=[];++B<ae;){var At=P[B];W(At,B,P)&&(Ge[we++]=At)}return Ge}function Gp(P,W){var B=P==null?0:P.length;return!!B&&La(P,W,0)>-1}function Qy(P,W,B){for(var ae=-1,we=P==null?0:P.length;++ae<we;)if(B(W,P[ae]))return!0;return!1}function at(P,W){for(var B=-1,ae=P==null?0:P.length,we=Array(ae);++B<ae;)we[B]=W(P[B],B,P);return we}function Wi(P,W){for(var B=-1,ae=W.length,we=P.length;++B<ae;)P[we+B]=W[B];return P}function Yy(P,W,B,ae){var we=-1,Ge=P==null?0:P.length;for(ae&&Ge&&(B=P[++we]);++we<Ge;)B=W(B,P[we],we,P);return B}function nN(P,W,B,ae){var we=P==null?0:P.length;for(ae&&we&&(B=P[--we]);we--;)B=W(B,P[we],we,P);return B}function Zy(P,W){for(var B=-1,ae=P==null?0:P.length;++B<ae;)if(W(P[B],B,P))return!0;return!1}var iN=Xy("length");function oN(P){return P.split("")}function aN(P){return P.match(d1)||[]}function $w(P,W,B){var ae;return B(P,function(we,Ge,At){if(W(we,Ge,At))return ae=Ge,!1}),ae}function Kp(P,W,B,ae){for(var we=P.length,Ge=B+(ae?1:-1);ae?Ge--:++Ge<we;)if(W(P[Ge],Ge,P))return Ge;return-1}function La(P,W,B){return W===W?xN(P,W,B):Kp(P,jw,B)}function sN(P,W,B,ae){for(var we=B-1,Ge=P.length;++we<Ge;)if(ae(P[we],W))return we;return-1}function jw(P){return P!==P}function zw(P,W){var B=P==null?0:P.length;return B?ex(P,W)/B:X}function Xy(P){return function(W){return W==null?t:W[P]}}function Jy(P){return function(W){return P==null?t:P[W]}}function qw(P,W,B,ae,we){return we(P,function(Ge,At,tt){B=ae?(ae=!1,Ge):W(B,Ge,At,tt)}),B}function cN(P,W){var B=P.length;for(P.sort(W);B--;)P[B]=P[B].value;return P}function ex(P,W){for(var B,ae=-1,we=P.length;++ae<we;){var Ge=W(P[ae]);Ge!==t&&(B=B===t?Ge:B+Ge)}return B}function tx(P,W){for(var B=-1,ae=Array(P);++B<P;)ae[B]=W(B);return ae}function lN(P,W){return at(W,function(B){return[B,P[B]]})}function Gw(P){return P&&P.slice(0,Zw(P)+1).replace(Vy,"")}function Or(P){return function(W){return P(W)}}function rx(P,W){return at(W,function(B){return P[B]})}function Nc(P,W){return P.has(W)}function Kw(P,W){for(var B=-1,ae=P.length;++B<ae&&La(W,P[B],0)>-1;);return B}function Qw(P,W){for(var B=P.length;B--&&La(W,P[B],0)>-1;);return B}function pN(P,W){for(var B=P.length,ae=0;B--;)P[B]===W&&++ae;return ae}var uN=Jy(K1),fN=Jy(Q1);function mN(P){return"\\"+Z1[P]}function dN(P,W){return P==null?t:P[W]}function Ua(P){return j1.test(P)}function hN(P){return z1.test(P)}function gN(P){for(var W,B=[];!(W=P.next()).done;)B.push(W.value);return B}function nx(P){var W=-1,B=Array(P.size);return P.forEach(function(ae,we){B[++W]=[we,ae]}),B}function Yw(P,W){return function(B){return P(W(B))}}function $i(P,W){for(var B=-1,ae=P.length,we=0,Ge=[];++B<ae;){var At=P[B];(At===W||At===p)&&(P[B]=p,Ge[we++]=B)}return Ge}function Qp(P){var W=-1,B=Array(P.size);return P.forEach(function(ae){B[++W]=ae}),B}function yN(P){var W=-1,B=Array(P.size);return P.forEach(function(ae){B[++W]=[ae,ae]}),B}function xN(P,W,B){for(var ae=B-1,we=P.length;++ae<we;)if(P[ae]===W)return ae;return-1}function TN(P,W,B){for(var ae=B+1;ae--;)if(P[ae]===W)return ae;return ae}function Ha(P){return Ua(P)?vN(P):iN(P)}function kn(P){return Ua(P)?bN(P):oN(P)}function Zw(P){for(var W=P.length;W--&&p1.test(P.charAt(W)););return W}var SN=Jy(Y1);function vN(P){for(var W=qy.lastIndex=0;qy.test(P);)++W;return W}function bN(P){return P.match(qy)||[]}function wN(P){return P.match($1)||[]}var EN=function P(W){W=W==null?It:ji.defaults(It.Object(),W,ji.pick(It,q1));var B=W.Array,ae=W.Date,we=W.Error,Ge=W.Function,At=W.Math,tt=W.Object,ix=W.RegExp,_N=W.String,nn=W.TypeError,Yp=B.prototype,RN=Ge.prototype,Ba=tt.prototype,Zp=W["__core-js_shared__"],Xp=RN.toString,Ye=Ba.hasOwnProperty,kN=0,Xw=function(){var a=/[^.]+$/.exec(Zp&&Zp.keys&&Zp.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Jp=Ba.toString,AN=Xp.call(tt),PN=It._,MN=ix("^"+Xp.call(Ye).replace(By,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eu=Nw?W.Buffer:t,zi=W.Symbol,tu=W.Uint8Array,Jw=eu?eu.allocUnsafe:t,ru=Yw(tt.getPrototypeOf,tt),eE=tt.create,tE=Ba.propertyIsEnumerable,nu=Yp.splice,rE=zi?zi.isConcatSpreadable:t,Oc=zi?zi.iterator:t,Lo=zi?zi.toStringTag:t,iu=function(){try{var a=Wo(tt,"defineProperty");return a({},"",{}),a}catch{}}(),DN=W.clearTimeout!==It.clearTimeout&&W.clearTimeout,FN=ae&&ae.now!==It.Date.now&&ae.now,IN=W.setTimeout!==It.setTimeout&&W.setTimeout,ou=At.ceil,au=At.floor,ox=tt.getOwnPropertySymbols,CN=eu?eu.isBuffer:t,nE=W.isFinite,NN=Yp.join,ON=Yw(tt.keys,tt),Pt=At.max,Jt=At.min,LN=ae.now,UN=W.parseInt,iE=At.random,HN=Yp.reverse,ax=Wo(W,"DataView"),Lc=Wo(W,"Map"),sx=Wo(W,"Promise"),Va=Wo(W,"Set"),Uc=Wo(W,"WeakMap"),Hc=Wo(tt,"create"),su=Uc&&new Uc,Wa={},BN=$o(ax),VN=$o(Lc),WN=$o(sx),$N=$o(Va),jN=$o(Uc),cu=zi?zi.prototype:t,Bc=cu?cu.valueOf:t,oE=cu?cu.toString:t;function x(a){if(gt(a)&&!Ee(a)&&!(a instanceof Be)){if(a instanceof on)return a;if(Ye.call(a,"__wrapped__"))return a_(a)}return new on(a)}var $a=function(){function a(){}return function(c){if(!ut(c))return{};if(eE)return eE(c);a.prototype=c;var u=new a;return a.prototype=t,u}}();function lu(){}function on(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}x.templateSettings={escape:i1,evaluate:o1,interpolate:dw,variable:"",imports:{_:x}},x.prototype=lu.prototype,x.prototype.constructor=x,on.prototype=$a(lu.prototype),on.prototype.constructor=on;function Be(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Q,this.__views__=[]}function zN(){var a=new Be(this.__wrapped__);return a.__actions__=vr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=vr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=vr(this.__views__),a}function qN(){if(this.__filtered__){var a=new Be(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function GN(){var a=this.__wrapped__.value(),c=this.__dir__,u=Ee(a),m=c<0,g=u?a.length:0,S=oL(0,g,this.__views__),_=S.start,R=S.end,D=R-_,G=m?R:_-1,K=this.__iteratees__,J=K.length,ie=0,ue=Jt(D,this.__takeCount__);if(!u||!m&&g==D&&ue==D)return PE(a,this.__actions__);var ye=[];e:for(;D--&&ie<ue;){G+=c;for(var Me=-1,xe=a[G];++Me<J;){var Oe=K[Me],Ve=Oe.iteratee,Hr=Oe.type,ur=Ve(xe);if(Hr==z)xe=ur;else if(!ur){if(Hr==A)continue e;break e}}ye[ie++]=xe}return ye}Be.prototype=$a(lu.prototype),Be.prototype.constructor=Be;function Uo(a){var c=-1,u=a==null?0:a.length;for(this.clear();++c<u;){var m=a[c];this.set(m[0],m[1])}}function KN(){this.__data__=Hc?Hc(null):{},this.size=0}function QN(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function YN(a){var c=this.__data__;if(Hc){var u=c[a];return u===s?t:u}return Ye.call(c,a)?c[a]:t}function ZN(a){var c=this.__data__;return Hc?c[a]!==t:Ye.call(c,a)}function XN(a,c){var u=this.__data__;return this.size+=this.has(a)?0:1,u[a]=Hc&&c===t?s:c,this}Uo.prototype.clear=KN,Uo.prototype.delete=QN,Uo.prototype.get=YN,Uo.prototype.has=ZN,Uo.prototype.set=XN;function di(a){var c=-1,u=a==null?0:a.length;for(this.clear();++c<u;){var m=a[c];this.set(m[0],m[1])}}function JN(){this.__data__=[],this.size=0}function eO(a){var c=this.__data__,u=pu(c,a);if(u<0)return!1;var m=c.length-1;return u==m?c.pop():nu.call(c,u,1),--this.size,!0}function tO(a){var c=this.__data__,u=pu(c,a);return u<0?t:c[u][1]}function rO(a){return pu(this.__data__,a)>-1}function nO(a,c){var u=this.__data__,m=pu(u,a);return m<0?(++this.size,u.push([a,c])):u[m][1]=c,this}di.prototype.clear=JN,di.prototype.delete=eO,di.prototype.get=tO,di.prototype.has=rO,di.prototype.set=nO;function hi(a){var c=-1,u=a==null?0:a.length;for(this.clear();++c<u;){var m=a[c];this.set(m[0],m[1])}}function iO(){this.size=0,this.__data__={hash:new Uo,map:new(Lc||di),string:new Uo}}function oO(a){var c=bu(this,a).delete(a);return this.size-=c?1:0,c}function aO(a){return bu(this,a).get(a)}function sO(a){return bu(this,a).has(a)}function cO(a,c){var u=bu(this,a),m=u.size;return u.set(a,c),this.size+=u.size==m?0:1,this}hi.prototype.clear=iO,hi.prototype.delete=oO,hi.prototype.get=aO,hi.prototype.has=sO,hi.prototype.set=cO;function Ho(a){var c=-1,u=a==null?0:a.length;for(this.__data__=new hi;++c<u;)this.add(a[c])}function lO(a){return this.__data__.set(a,s),this}function pO(a){return this.__data__.has(a)}Ho.prototype.add=Ho.prototype.push=lO,Ho.prototype.has=pO;function An(a){var c=this.__data__=new di(a);this.size=c.size}function uO(){this.__data__=new di,this.size=0}function fO(a){var c=this.__data__,u=c.delete(a);return this.size=c.size,u}function mO(a){return this.__data__.get(a)}function dO(a){return this.__data__.has(a)}function hO(a,c){var u=this.__data__;if(u instanceof di){var m=u.__data__;if(!Lc||m.length<r-1)return m.push([a,c]),this.size=++u.size,this;u=this.__data__=new hi(m)}return u.set(a,c),this.size=u.size,this}An.prototype.clear=uO,An.prototype.delete=fO,An.prototype.get=mO,An.prototype.has=dO,An.prototype.set=hO;function aE(a,c){var u=Ee(a),m=!u&&jo(a),g=!u&&!m&&Yi(a),S=!u&&!m&&!g&&Ga(a),_=u||m||g||S,R=_?tx(a.length,_N):[],D=R.length;for(var G in a)(c||Ye.call(a,G))&&!(_&&(G=="length"||g&&(G=="offset"||G=="parent")||S&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||Ti(G,D)))&&R.push(G);return R}function sE(a){var c=a.length;return c?a[xx(0,c-1)]:t}function gO(a,c){return wu(vr(a),Bo(c,0,a.length))}function yO(a){return wu(vr(a))}function cx(a,c,u){(u!==t&&!Pn(a[c],u)||u===t&&!(c in a))&&gi(a,c,u)}function Vc(a,c,u){var m=a[c];(!(Ye.call(a,c)&&Pn(m,u))||u===t&&!(c in a))&&gi(a,c,u)}function pu(a,c){for(var u=a.length;u--;)if(Pn(a[u][0],c))return u;return-1}function xO(a,c,u,m){return qi(a,function(g,S,_){c(m,g,u(g),_)}),m}function cE(a,c){return a&&jn(c,Ct(c),a)}function TO(a,c){return a&&jn(c,wr(c),a)}function gi(a,c,u){c=="__proto__"&&iu?iu(a,c,{configurable:!0,enumerable:!0,value:u,writable:!0}):a[c]=u}function lx(a,c){for(var u=-1,m=c.length,g=B(m),S=a==null;++u<m;)g[u]=S?t:$x(a,c[u]);return g}function Bo(a,c,u){return a===a&&(u!==t&&(a=a<=u?a:u),c!==t&&(a=a>=c?a:c)),a}function an(a,c,u,m,g,S){var _,R=c&f,D=c&d,G=c&h;if(u&&(_=g?u(a,m,g,S):u(a)),_!==t)return _;if(!ut(a))return a;var K=Ee(a);if(K){if(_=sL(a),!R)return vr(a,_)}else{var J=er(a),ie=J==Ca||J==pw;if(Yi(a))return FE(a,R);if(J==mi||J==qe||ie&&!g){if(_=D||ie?{}:ZE(a),!R)return D?YO(a,TO(_,a)):QO(a,cE(_,a))}else{if(!rt[J])return g?a:{};_=cL(a,J,R)}}S||(S=new An);var ue=S.get(a);if(ue)return ue;S.set(a,_),R_(a)?a.forEach(function(xe){_.add(an(xe,c,u,xe,a,S))}):E_(a)&&a.forEach(function(xe,Oe){_.set(Oe,an(xe,c,u,Oe,a,S))});var ye=G?D?Px:Ax:D?wr:Ct,Me=K?t:ye(a);return rn(Me||a,function(xe,Oe){Me&&(Oe=xe,xe=a[Oe]),Vc(_,Oe,an(xe,c,u,Oe,a,S))}),_}function SO(a){var c=Ct(a);return function(u){return lE(u,a,c)}}function lE(a,c,u){var m=u.length;if(a==null)return!m;for(a=tt(a);m--;){var g=u[m],S=c[g],_=a[g];if(_===t&&!(g in a)||!S(_))return!1}return!0}function pE(a,c,u){if(typeof a!="function")throw new nn(i);return Kc(function(){a.apply(t,u)},c)}function Wc(a,c,u,m){var g=-1,S=Gp,_=!0,R=a.length,D=[],G=c.length;if(!R)return D;u&&(c=at(c,Or(u))),m?(S=Qy,_=!1):c.length>=r&&(S=Nc,_=!1,c=new Ho(c));e:for(;++g<R;){var K=a[g],J=u==null?K:u(K);if(K=m||K!==0?K:0,_&&J===J){for(var ie=G;ie--;)if(c[ie]===J)continue e;D.push(K)}else S(c,J,m)||D.push(K)}return D}var qi=LE($n),uE=LE(ux,!0);function vO(a,c){var u=!0;return qi(a,function(m,g,S){return u=!!c(m,g,S),u}),u}function uu(a,c,u){for(var m=-1,g=a.length;++m<g;){var S=a[m],_=c(S);if(_!=null&&(R===t?_===_&&!Ur(_):u(_,R)))var R=_,D=S}return D}function bO(a,c,u,m){var g=a.length;for(u=Ae(u),u<0&&(u=-u>g?0:g+u),m=m===t||m>g?g:Ae(m),m<0&&(m+=g),m=u>m?0:A_(m);u<m;)a[u++]=c;return a}function fE(a,c){var u=[];return qi(a,function(m,g,S){c(m,g,S)&&u.push(m)}),u}function jt(a,c,u,m,g){var S=-1,_=a.length;for(u||(u=pL),g||(g=[]);++S<_;){var R=a[S];c>0&&u(R)?c>1?jt(R,c-1,u,m,g):Wi(g,R):m||(g[g.length]=R)}return g}var px=UE(),mE=UE(!0);function $n(a,c){return a&&px(a,c,Ct)}function ux(a,c){return a&&mE(a,c,Ct)}function fu(a,c){return Vi(c,function(u){return Si(a[u])})}function Vo(a,c){c=Ki(c,a);for(var u=0,m=c.length;a!=null&&u<m;)a=a[zn(c[u++])];return u&&u==m?a:t}function dE(a,c,u){var m=c(a);return Ee(a)?m:Wi(m,u(a))}function lr(a){return a==null?a===t?ZC:QC:Lo&&Lo in tt(a)?iL(a):yL(a)}function fx(a,c){return a>c}function wO(a,c){return a!=null&&Ye.call(a,c)}function EO(a,c){return a!=null&&c in tt(a)}function _O(a,c,u){return a>=Jt(c,u)&&a<Pt(c,u)}function mx(a,c,u){for(var m=u?Qy:Gp,g=a[0].length,S=a.length,_=S,R=B(S),D=1/0,G=[];_--;){var K=a[_];_&&c&&(K=at(K,Or(c))),D=Jt(K.length,D),R[_]=!u&&(c||g>=120&&K.length>=120)?new Ho(_&&K):t}K=a[0];var J=-1,ie=R[0];e:for(;++J<g&&G.length<D;){var ue=K[J],ye=c?c(ue):ue;if(ue=u||ue!==0?ue:0,!(ie?Nc(ie,ye):m(G,ye,u))){for(_=S;--_;){var Me=R[_];if(!(Me?Nc(Me,ye):m(a[_],ye,u)))continue e}ie&&ie.push(ye),G.push(ue)}}return G}function RO(a,c,u,m){return $n(a,function(g,S,_){c(m,u(g),S,_)}),m}function $c(a,c,u){c=Ki(c,a),a=t_(a,c);var m=a==null?a:a[zn(cn(c))];return m==null?t:Nr(m,a,u)}function hE(a){return gt(a)&&lr(a)==qe}function kO(a){return gt(a)&&lr(a)==Cc}function AO(a){return gt(a)&&lr(a)==en}function jc(a,c,u,m,g){return a===c?!0:a==null||c==null||!gt(a)&&!gt(c)?a!==a&&c!==c:PO(a,c,u,m,jc,g)}function PO(a,c,u,m,g,S){var _=Ee(a),R=Ee(c),D=_?Ne:er(a),G=R?Ne:er(c);D=D==qe?mi:D,G=G==qe?mi:G;var K=D==mi,J=G==mi,ie=D==G;if(ie&&Yi(a)){if(!Yi(c))return!1;_=!0,K=!1}if(ie&&!K)return S||(S=new An),_||Ga(a)?KE(a,c,u,m,g,S):rL(a,c,D,u,m,g,S);if(!(u&y)){var ue=K&&Ye.call(a,"__wrapped__"),ye=J&&Ye.call(c,"__wrapped__");if(ue||ye){var Me=ue?a.value():a,xe=ye?c.value():c;return S||(S=new An),g(Me,xe,u,m,S)}}return ie?(S||(S=new An),nL(a,c,u,m,g,S)):!1}function MO(a){return gt(a)&&er(a)==_n}function dx(a,c,u,m){var g=u.length,S=g,_=!m;if(a==null)return!S;for(a=tt(a);g--;){var R=u[g];if(_&&R[2]?R[1]!==a[R[0]]:!(R[0]in a))return!1}for(;++g<S;){R=u[g];var D=R[0],G=a[D],K=R[1];if(_&&R[2]){if(G===t&&!(D in a))return!1}else{var J=new An;if(m)var ie=m(G,K,D,a,c,J);if(!(ie===t?jc(K,G,y|T,m,J):ie))return!1}}return!0}function gE(a){if(!ut(a)||fL(a))return!1;var c=Si(a)?MN:S1;return c.test($o(a))}function DO(a){return gt(a)&&lr(a)==Dc}function FO(a){return gt(a)&&er(a)==Rn}function IO(a){return gt(a)&&Pu(a.length)&&!!nt[lr(a)]}function yE(a){return typeof a=="function"?a:a==null?Er:typeof a=="object"?Ee(a)?SE(a[0],a[1]):TE(a):H_(a)}function hx(a){if(!Gc(a))return ON(a);var c=[];for(var u in tt(a))Ye.call(a,u)&&u!="constructor"&&c.push(u);return c}function CO(a){if(!ut(a))return gL(a);var c=Gc(a),u=[];for(var m in a)m=="constructor"&&(c||!Ye.call(a,m))||u.push(m);return u}function gx(a,c){return a<c}function xE(a,c){var u=-1,m=br(a)?B(a.length):[];return qi(a,function(g,S,_){m[++u]=c(g,S,_)}),m}function TE(a){var c=Dx(a);return c.length==1&&c[0][2]?JE(c[0][0],c[0][1]):function(u){return u===a||dx(u,a,c)}}function SE(a,c){return Ix(a)&&XE(c)?JE(zn(a),c):function(u){var m=$x(u,a);return m===t&&m===c?jx(u,a):jc(c,m,y|T)}}function mu(a,c,u,m,g){a!==c&&px(c,function(S,_){if(g||(g=new An),ut(S))NO(a,c,_,u,mu,m,g);else{var R=m?m(Nx(a,_),S,_+"",a,c,g):t;R===t&&(R=S),cx(a,_,R)}},wr)}function NO(a,c,u,m,g,S,_){var R=Nx(a,u),D=Nx(c,u),G=_.get(D);if(G){cx(a,u,G);return}var K=S?S(R,D,u+"",a,c,_):t,J=K===t;if(J){var ie=Ee(D),ue=!ie&&Yi(D),ye=!ie&&!ue&&Ga(D);K=D,ie||ue||ye?Ee(R)?K=R:Tt(R)?K=vr(R):ue?(J=!1,K=FE(D,!0)):ye?(J=!1,K=IE(D,!0)):K=[]:Qc(D)||jo(D)?(K=R,jo(R)?K=P_(R):(!ut(R)||Si(R))&&(K=ZE(D))):J=!1}J&&(_.set(D,K),g(K,D,m,S,_),_.delete(D)),cx(a,u,K)}function vE(a,c){var u=a.length;if(u)return c+=c<0?u:0,Ti(c,u)?a[c]:t}function bE(a,c,u){c.length?c=at(c,function(S){return Ee(S)?function(_){return Vo(_,S.length===1?S[0]:S)}:S}):c=[Er];var m=-1;c=at(c,Or(he()));var g=xE(a,function(S,_,R){var D=at(c,function(G){return G(S)});return{criteria:D,index:++m,value:S}});return cN(g,function(S,_){return KO(S,_,u)})}function OO(a,c){return wE(a,c,function(u,m){return jx(a,m)})}function wE(a,c,u){for(var m=-1,g=c.length,S={};++m<g;){var _=c[m],R=Vo(a,_);u(R,_)&&zc(S,Ki(_,a),R)}return S}function LO(a){return function(c){return Vo(c,a)}}function yx(a,c,u,m){var g=m?sN:La,S=-1,_=c.length,R=a;for(a===c&&(c=vr(c)),u&&(R=at(a,Or(u)));++S<_;)for(var D=0,G=c[S],K=u?u(G):G;(D=g(R,K,D,m))>-1;)R!==a&&nu.call(R,D,1),nu.call(a,D,1);return a}function EE(a,c){for(var u=a?c.length:0,m=u-1;u--;){var g=c[u];if(u==m||g!==S){var S=g;Ti(g)?nu.call(a,g,1):vx(a,g)}}return a}function xx(a,c){return a+au(iE()*(c-a+1))}function UO(a,c,u,m){for(var g=-1,S=Pt(ou((c-a)/(u||1)),0),_=B(S);S--;)_[m?S:++g]=a,a+=u;return _}function Tx(a,c){var u="";if(!a||c<1||c>O)return u;do c%2&&(u+=a),c=au(c/2),c&&(a+=a);while(c);return u}function Fe(a,c){return Ox(e_(a,c,Er),a+"")}function HO(a){return sE(Ka(a))}function BO(a,c){var u=Ka(a);return wu(u,Bo(c,0,u.length))}function zc(a,c,u,m){if(!ut(a))return a;c=Ki(c,a);for(var g=-1,S=c.length,_=S-1,R=a;R!=null&&++g<S;){var D=zn(c[g]),G=u;if(D==="__proto__"||D==="constructor"||D==="prototype")return a;if(g!=_){var K=R[D];G=m?m(K,D,R):t,G===t&&(G=ut(K)?K:Ti(c[g+1])?[]:{})}Vc(R,D,G),R=R[D]}return a}var _E=su?function(a,c){return su.set(a,c),a}:Er,VO=iu?function(a,c){return iu(a,"toString",{configurable:!0,enumerable:!1,value:qx(c),writable:!0})}:Er;function WO(a){return wu(Ka(a))}function sn(a,c,u){var m=-1,g=a.length;c<0&&(c=-c>g?0:g+c),u=u>g?g:u,u<0&&(u+=g),g=c>u?0:u-c>>>0,c>>>=0;for(var S=B(g);++m<g;)S[m]=a[m+c];return S}function $O(a,c){var u;return qi(a,function(m,g,S){return u=c(m,g,S),!u}),!!u}function du(a,c,u){var m=0,g=a==null?m:a.length;if(typeof c=="number"&&c===c&&g<=Te){for(;m<g;){var S=m+g>>>1,_=a[S];_!==null&&!Ur(_)&&(u?_<=c:_<c)?m=S+1:g=S}return g}return Sx(a,c,Er,u)}function Sx(a,c,u,m){var g=0,S=a==null?0:a.length;if(S===0)return 0;c=u(c);for(var _=c!==c,R=c===null,D=Ur(c),G=c===t;g<S;){var K=au((g+S)/2),J=u(a[K]),ie=J!==t,ue=J===null,ye=J===J,Me=Ur(J);if(_)var xe=m||ye;else G?xe=ye&&(m||ie):R?xe=ye&&ie&&(m||!ue):D?xe=ye&&ie&&!ue&&(m||!Me):ue||Me?xe=!1:xe=m?J<=c:J<c;xe?g=K+1:S=K}return Jt(S,te)}function RE(a,c){for(var u=-1,m=a.length,g=0,S=[];++u<m;){var _=a[u],R=c?c(_):_;if(!u||!Pn(R,D)){var D=R;S[g++]=_===0?0:_}}return S}function kE(a){return typeof a=="number"?a:Ur(a)?X:+a}function Lr(a){if(typeof a=="string")return a;if(Ee(a))return at(a,Lr)+"";if(Ur(a))return oE?oE.call(a):"";var c=a+"";return c=="0"&&1/a==-F?"-0":c}function Gi(a,c,u){var m=-1,g=Gp,S=a.length,_=!0,R=[],D=R;if(u)_=!1,g=Qy;else if(S>=r){var G=c?null:eL(a);if(G)return Qp(G);_=!1,g=Nc,D=new Ho}else D=c?[]:R;e:for(;++m<S;){var K=a[m],J=c?c(K):K;if(K=u||K!==0?K:0,_&&J===J){for(var ie=D.length;ie--;)if(D[ie]===J)continue e;c&&D.push(J),R.push(K)}else g(D,J,u)||(D!==R&&D.push(J),R.push(K))}return R}function vx(a,c){return c=Ki(c,a),a=t_(a,c),a==null||delete a[zn(cn(c))]}function AE(a,c,u,m){return zc(a,c,u(Vo(a,c)),m)}function hu(a,c,u,m){for(var g=a.length,S=m?g:-1;(m?S--:++S<g)&&c(a[S],S,a););return u?sn(a,m?0:S,m?S+1:g):sn(a,m?S+1:0,m?g:S)}function PE(a,c){var u=a;return u instanceof Be&&(u=u.value()),Yy(c,function(m,g){return g.func.apply(g.thisArg,Wi([m],g.args))},u)}function bx(a,c,u){var m=a.length;if(m<2)return m?Gi(a[0]):[];for(var g=-1,S=B(m);++g<m;)for(var _=a[g],R=-1;++R<m;)R!=g&&(S[g]=Wc(S[g]||_,a[R],c,u));return Gi(jt(S,1),c,u)}function ME(a,c,u){for(var m=-1,g=a.length,S=c.length,_={};++m<g;){var R=m<S?c[m]:t;u(_,a[m],R)}return _}function wx(a){return Tt(a)?a:[]}function Ex(a){return typeof a=="function"?a:Er}function Ki(a,c){return Ee(a)?a:Ix(a,c)?[a]:o_(Qe(a))}var jO=Fe;function Qi(a,c,u){var m=a.length;return u=u===t?m:u,!c&&u>=m?a:sn(a,c,u)}var DE=DN||function(a){return It.clearTimeout(a)};function FE(a,c){if(c)return a.slice();var u=a.length,m=Jw?Jw(u):new a.constructor(u);return a.copy(m),m}function _x(a){var c=new a.constructor(a.byteLength);return new tu(c).set(new tu(a)),c}function zO(a,c){var u=c?_x(a.buffer):a.buffer;return new a.constructor(u,a.byteOffset,a.byteLength)}function qO(a){var c=new a.constructor(a.source,hw.exec(a));return c.lastIndex=a.lastIndex,c}function GO(a){return Bc?tt(Bc.call(a)):{}}function IE(a,c){var u=c?_x(a.buffer):a.buffer;return new a.constructor(u,a.byteOffset,a.length)}function CE(a,c){if(a!==c){var u=a!==t,m=a===null,g=a===a,S=Ur(a),_=c!==t,R=c===null,D=c===c,G=Ur(c);if(!R&&!G&&!S&&a>c||S&&_&&D&&!R&&!G||m&&_&&D||!u&&D||!g)return 1;if(!m&&!S&&!G&&a<c||G&&u&&g&&!m&&!S||R&&u&&g||!_&&g||!D)return-1}return 0}function KO(a,c,u){for(var m=-1,g=a.criteria,S=c.criteria,_=g.length,R=u.length;++m<_;){var D=CE(g[m],S[m]);if(D){if(m>=R)return D;var G=u[m];return D*(G=="desc"?-1:1)}}return a.index-c.index}function NE(a,c,u,m){for(var g=-1,S=a.length,_=u.length,R=-1,D=c.length,G=Pt(S-_,0),K=B(D+G),J=!m;++R<D;)K[R]=c[R];for(;++g<_;)(J||g<S)&&(K[u[g]]=a[g]);for(;G--;)K[R++]=a[g++];return K}function OE(a,c,u,m){for(var g=-1,S=a.length,_=-1,R=u.length,D=-1,G=c.length,K=Pt(S-R,0),J=B(K+G),ie=!m;++g<K;)J[g]=a[g];for(var ue=g;++D<G;)J[ue+D]=c[D];for(;++_<R;)(ie||g<S)&&(J[ue+u[_]]=a[g++]);return J}function vr(a,c){var u=-1,m=a.length;for(c||(c=B(m));++u<m;)c[u]=a[u];return c}function jn(a,c,u,m){var g=!u;u||(u={});for(var S=-1,_=c.length;++S<_;){var R=c[S],D=m?m(u[R],a[R],R,u,a):t;D===t&&(D=a[R]),g?gi(u,R,D):Vc(u,R,D)}return u}function QO(a,c){return jn(a,Fx(a),c)}function YO(a,c){return jn(a,QE(a),c)}function gu(a,c){return function(u,m){var g=Ee(u)?tN:xO,S=c?c():{};return g(u,a,he(m,2),S)}}function ja(a){return Fe(function(c,u){var m=-1,g=u.length,S=g>1?u[g-1]:t,_=g>2?u[2]:t;for(S=a.length>3&&typeof S=="function"?(g--,S):t,_&&pr(u[0],u[1],_)&&(S=g<3?t:S,g=1),c=tt(c);++m<g;){var R=u[m];R&&a(c,R,m,S)}return c})}function LE(a,c){return function(u,m){if(u==null)return u;if(!br(u))return a(u,m);for(var g=u.length,S=c?g:-1,_=tt(u);(c?S--:++S<g)&&m(_[S],S,_)!==!1;);return u}}function UE(a){return function(c,u,m){for(var g=-1,S=tt(c),_=m(c),R=_.length;R--;){var D=_[a?R:++g];if(u(S[D],D,S)===!1)break}return c}}function ZO(a,c,u){var m=c&w,g=qc(a);function S(){var _=this&&this!==It&&this instanceof S?g:a;return _.apply(m?u:this,arguments)}return S}function HE(a){return function(c){c=Qe(c);var u=Ua(c)?kn(c):t,m=u?u[0]:c.charAt(0),g=u?Qi(u,1).join(""):c.slice(1);return m[a]()+g}}function za(a){return function(c){return Yy(L_(O_(c).replace(V1,"")),a,"")}}function qc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var u=$a(a.prototype),m=a.apply(u,c);return ut(m)?m:u}}function XO(a,c,u){var m=qc(a);function g(){for(var S=arguments.length,_=B(S),R=S,D=qa(g);R--;)_[R]=arguments[R];var G=S<3&&_[0]!==D&&_[S-1]!==D?[]:$i(_,D);if(S-=G.length,S<u)return jE(a,c,yu,g.placeholder,t,_,G,t,t,u-S);var K=this&&this!==It&&this instanceof g?m:a;return Nr(K,this,_)}return g}function BE(a){return function(c,u,m){var g=tt(c);if(!br(c)){var S=he(u,3);c=Ct(c),u=function(R){return S(g[R],R,g)}}var _=a(c,u,m);return _>-1?g[S?c[_]:_]:t}}function VE(a){return xi(function(c){var u=c.length,m=u,g=on.prototype.thru;for(a&&c.reverse();m--;){var S=c[m];if(typeof S!="function")throw new nn(i);if(g&&!_&&vu(S)=="wrapper")var _=new on([],!0)}for(m=_?m:u;++m<u;){S=c[m];var R=vu(S),D=R=="wrapper"?Mx(S):t;D&&Cx(D[0])&&D[1]==(ce|V|ne|fe)&&!D[4].length&&D[9]==1?_=_[vu(D[0])].apply(_,D[3]):_=S.length==1&&Cx(S)?_[R]():_.thru(S)}return function(){var G=arguments,K=G[0];if(_&&G.length==1&&Ee(K))return _.plant(K).value();for(var J=0,ie=u?c[J].apply(this,G):K;++J<u;)ie=c[J].call(this,ie);return ie}})}function yu(a,c,u,m,g,S,_,R,D,G){var K=c&ce,J=c&w,ie=c&E,ue=c&(V|j),ye=c&pt,Me=ie?t:qc(a);function xe(){for(var Oe=arguments.length,Ve=B(Oe),Hr=Oe;Hr--;)Ve[Hr]=arguments[Hr];if(ue)var ur=qa(xe),Br=pN(Ve,ur);if(m&&(Ve=NE(Ve,m,g,ue)),S&&(Ve=OE(Ve,S,_,ue)),Oe-=Br,ue&&Oe<G){var St=$i(Ve,ur);return jE(a,c,yu,xe.placeholder,u,Ve,St,R,D,G-Oe)}var Mn=J?u:this,bi=ie?Mn[a]:a;return Oe=Ve.length,R?Ve=xL(Ve,R):ye&&Oe>1&&Ve.reverse(),K&&D<Oe&&(Ve.length=D),this&&this!==It&&this instanceof xe&&(bi=Me||qc(bi)),bi.apply(Mn,Ve)}return xe}function WE(a,c){return function(u,m){return RO(u,a,c(m),{})}}function xu(a,c){return function(u,m){var g;if(u===t&&m===t)return c;if(u!==t&&(g=u),m!==t){if(g===t)return m;typeof u=="string"||typeof m=="string"?(u=Lr(u),m=Lr(m)):(u=kE(u),m=kE(m)),g=a(u,m)}return g}}function Rx(a){return xi(function(c){return c=at(c,Or(he())),Fe(function(u){var m=this;return a(c,function(g){return Nr(g,m,u)})})})}function Tu(a,c){c=c===t?" ":Lr(c);var u=c.length;if(u<2)return u?Tx(c,a):c;var m=Tx(c,ou(a/Ha(c)));return Ua(c)?Qi(kn(m),0,a).join(""):m.slice(0,a)}function JO(a,c,u,m){var g=c&w,S=qc(a);function _(){for(var R=-1,D=arguments.length,G=-1,K=m.length,J=B(K+D),ie=this&&this!==It&&this instanceof _?S:a;++G<K;)J[G]=m[G];for(;D--;)J[G++]=arguments[++R];return Nr(ie,g?u:this,J)}return _}function $E(a){return function(c,u,m){return m&&typeof m!="number"&&pr(c,u,m)&&(u=m=t),c=vi(c),u===t?(u=c,c=0):u=vi(u),m=m===t?c<u?1:-1:vi(m),UO(c,u,m,a)}}function Su(a){return function(c,u){return typeof c=="string"&&typeof u=="string"||(c=ln(c),u=ln(u)),a(c,u)}}function jE(a,c,u,m,g,S,_,R,D,G){var K=c&V,J=K?_:t,ie=K?t:_,ue=K?S:t,ye=K?t:S;c|=K?ne:se,c&=~(K?se:ne),c&U||(c&=~(w|E));var Me=[a,c,g,ue,J,ye,ie,R,D,G],xe=u.apply(t,Me);return Cx(a)&&r_(xe,Me),xe.placeholder=m,n_(xe,a,c)}function kx(a){var c=At[a];return function(u,m){if(u=ln(u),m=m==null?0:Jt(Ae(m),292),m&&nE(u)){var g=(Qe(u)+"e").split("e"),S=c(g[0]+"e"+(+g[1]+m));return g=(Qe(S)+"e").split("e"),+(g[0]+"e"+(+g[1]-m))}return c(u)}}var eL=Va&&1/Qp(new Va([,-0]))[1]==F?function(a){return new Va(a)}:Qx;function zE(a){return function(c){var u=er(c);return u==_n?nx(c):u==Rn?yN(c):lN(c,a(c))}}function yi(a,c,u,m,g,S,_,R){var D=c&E;if(!D&&typeof a!="function")throw new nn(i);var G=m?m.length:0;if(G||(c&=~(ne|se),m=g=t),_=_===t?_:Pt(Ae(_),0),R=R===t?R:Ae(R),G-=g?g.length:0,c&se){var K=m,J=g;m=g=t}var ie=D?t:Mx(a),ue=[a,c,u,m,g,K,J,S,_,R];if(ie&&hL(ue,ie),a=ue[0],c=ue[1],u=ue[2],m=ue[3],g=ue[4],R=ue[9]=ue[9]===t?D?0:a.length:Pt(ue[9]-G,0),!R&&c&(V|j)&&(c&=~(V|j)),!c||c==w)var ye=ZO(a,c,u);else c==V||c==j?ye=XO(a,c,R):(c==ne||c==(w|ne))&&!g.length?ye=JO(a,c,u,m):ye=yu.apply(t,ue);var Me=ie?_E:r_;return n_(Me(ye,ue),a,c)}function qE(a,c,u,m){return a===t||Pn(a,Ba[u])&&!Ye.call(m,u)?c:a}function GE(a,c,u,m,g,S){return ut(a)&&ut(c)&&(S.set(c,a),mu(a,c,t,GE,S),S.delete(c)),a}function tL(a){return Qc(a)?t:a}function KE(a,c,u,m,g,S){var _=u&y,R=a.length,D=c.length;if(R!=D&&!(_&&D>R))return!1;var G=S.get(a),K=S.get(c);if(G&&K)return G==c&&K==a;var J=-1,ie=!0,ue=u&T?new Ho:t;for(S.set(a,c),S.set(c,a);++J<R;){var ye=a[J],Me=c[J];if(m)var xe=_?m(Me,ye,J,c,a,S):m(ye,Me,J,a,c,S);if(xe!==t){if(xe)continue;ie=!1;break}if(ue){if(!Zy(c,function(Oe,Ve){if(!Nc(ue,Ve)&&(ye===Oe||g(ye,Oe,u,m,S)))return ue.push(Ve)})){ie=!1;break}}else if(!(ye===Me||g(ye,Me,u,m,S))){ie=!1;break}}return S.delete(a),S.delete(c),ie}function rL(a,c,u,m,g,S,_){switch(u){case Na:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case Cc:return!(a.byteLength!=c.byteLength||!S(new tu(a),new tu(c)));case $t:case en:case Mc:return Pn(+a,+c);case fi:return a.name==c.name&&a.message==c.message;case Dc:case Fc:return a==c+"";case _n:var R=nx;case Rn:var D=m&y;if(R||(R=Qp),a.size!=c.size&&!D)return!1;var G=_.get(a);if(G)return G==c;m|=T,_.set(a,c);var K=KE(R(a),R(c),m,g,S,_);return _.delete(a),K;case $p:if(Bc)return Bc.call(a)==Bc.call(c)}return!1}function nL(a,c,u,m,g,S){var _=u&y,R=Ax(a),D=R.length,G=Ax(c),K=G.length;if(D!=K&&!_)return!1;for(var J=D;J--;){var ie=R[J];if(!(_?ie in c:Ye.call(c,ie)))return!1}var ue=S.get(a),ye=S.get(c);if(ue&&ye)return ue==c&&ye==a;var Me=!0;S.set(a,c),S.set(c,a);for(var xe=_;++J<D;){ie=R[J];var Oe=a[ie],Ve=c[ie];if(m)var Hr=_?m(Ve,Oe,ie,c,a,S):m(Oe,Ve,ie,a,c,S);if(!(Hr===t?Oe===Ve||g(Oe,Ve,u,m,S):Hr)){Me=!1;break}xe||(xe=ie=="constructor")}if(Me&&!xe){var ur=a.constructor,Br=c.constructor;ur!=Br&&"constructor"in a&&"constructor"in c&&!(typeof ur=="function"&&ur instanceof ur&&typeof Br=="function"&&Br instanceof Br)&&(Me=!1)}return S.delete(a),S.delete(c),Me}function xi(a){return Ox(e_(a,t,l_),a+"")}function Ax(a){return dE(a,Ct,Fx)}function Px(a){return dE(a,wr,QE)}var Mx=su?function(a){return su.get(a)}:Qx;function vu(a){for(var c=a.name+"",u=Wa[c],m=Ye.call(Wa,c)?u.length:0;m--;){var g=u[m],S=g.func;if(S==null||S==a)return g.name}return c}function qa(a){var c=Ye.call(x,"placeholder")?x:a;return c.placeholder}function he(){var a=x.iteratee||Gx;return a=a===Gx?yE:a,arguments.length?a(arguments[0],arguments[1]):a}function bu(a,c){var u=a.__data__;return uL(c)?u[typeof c=="string"?"string":"hash"]:u.map}function Dx(a){for(var c=Ct(a),u=c.length;u--;){var m=c[u],g=a[m];c[u]=[m,g,XE(g)]}return c}function Wo(a,c){var u=dN(a,c);return gE(u)?u:t}function iL(a){var c=Ye.call(a,Lo),u=a[Lo];try{a[Lo]=t;var m=!0}catch{}var g=Jp.call(a);return m&&(c?a[Lo]=u:delete a[Lo]),g}var Fx=ox?function(a){return a==null?[]:(a=tt(a),Vi(ox(a),function(c){return tE.call(a,c)}))}:Yx,QE=ox?function(a){for(var c=[];a;)Wi(c,Fx(a)),a=ru(a);return c}:Yx,er=lr;(ax&&er(new ax(new ArrayBuffer(1)))!=Na||Lc&&er(new Lc)!=_n||sx&&er(sx.resolve())!=uw||Va&&er(new Va)!=Rn||Uc&&er(new Uc)!=Ic)&&(er=function(a){var c=lr(a),u=c==mi?a.constructor:t,m=u?$o(u):"";if(m)switch(m){case BN:return Na;case VN:return _n;case WN:return uw;case $N:return Rn;case jN:return Ic}return c});function oL(a,c,u){for(var m=-1,g=u.length;++m<g;){var S=u[m],_=S.size;switch(S.type){case"drop":a+=_;break;case"dropRight":c-=_;break;case"take":c=Jt(c,a+_);break;case"takeRight":a=Pt(a,c-_);break}}return{start:a,end:c}}function aL(a){var c=a.match(f1);return c?c[1].split(m1):[]}function YE(a,c,u){c=Ki(c,a);for(var m=-1,g=c.length,S=!1;++m<g;){var _=zn(c[m]);if(!(S=a!=null&&u(a,_)))break;a=a[_]}return S||++m!=g?S:(g=a==null?0:a.length,!!g&&Pu(g)&&Ti(_,g)&&(Ee(a)||jo(a)))}function sL(a){var c=a.length,u=new a.constructor(c);return c&&typeof a[0]=="string"&&Ye.call(a,"index")&&(u.index=a.index,u.input=a.input),u}function ZE(a){return typeof a.constructor=="function"&&!Gc(a)?$a(ru(a)):{}}function cL(a,c,u){var m=a.constructor;switch(c){case Cc:return _x(a);case $t:case en:return new m(+a);case Na:return zO(a,u);case Dy:case Fy:case Iy:case Cy:case Ny:case Oy:case Ly:case Uy:case Hy:return IE(a,u);case _n:return new m;case Mc:case Fc:return new m(a);case Dc:return qO(a);case Rn:return new m;case $p:return GO(a)}}function lL(a,c){var u=c.length;if(!u)return a;var m=u-1;return c[m]=(u>1?"& ":"")+c[m],c=c.join(u>2?", ":" "),a.replace(u1,`{
/* [wrapped with `+c+`] */
`)}function pL(a){return Ee(a)||jo(a)||!!(rE&&a&&a[rE])}function Ti(a,c){var u=typeof a;return c=c??O,!!c&&(u=="number"||u!="symbol"&&b1.test(a))&&a>-1&&a%1==0&&a<c}function pr(a,c,u){if(!ut(u))return!1;var m=typeof c;return(m=="number"?br(u)&&Ti(c,u.length):m=="string"&&c in u)?Pn(u[c],a):!1}function Ix(a,c){if(Ee(a))return!1;var u=typeof a;return u=="number"||u=="symbol"||u=="boolean"||a==null||Ur(a)?!0:s1.test(a)||!a1.test(a)||c!=null&&a in tt(c)}function uL(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function Cx(a){var c=vu(a),u=x[c];if(typeof u!="function"||!(c in Be.prototype))return!1;if(a===u)return!0;var m=Mx(u);return!!m&&a===m[0]}function fL(a){return!!Xw&&Xw in a}var mL=Zp?Si:Zx;function Gc(a){var c=a&&a.constructor,u=typeof c=="function"&&c.prototype||Ba;return a===u}function XE(a){return a===a&&!ut(a)}function JE(a,c){return function(u){return u==null?!1:u[a]===c&&(c!==t||a in tt(u))}}function dL(a){var c=ku(a,function(m){return u.size===l&&u.clear(),m}),u=c.cache;return c}function hL(a,c){var u=a[1],m=c[1],g=u|m,S=g<(w|E|ce),_=m==ce&&u==V||m==ce&&u==fe&&a[7].length<=c[8]||m==(ce|fe)&&c[7].length<=c[8]&&u==V;if(!(S||_))return a;m&w&&(a[2]=c[2],g|=u&w?0:U);var R=c[3];if(R){var D=a[3];a[3]=D?NE(D,R,c[4]):R,a[4]=D?$i(a[3],p):c[4]}return R=c[5],R&&(D=a[5],a[5]=D?OE(D,R,c[6]):R,a[6]=D?$i(a[5],p):c[6]),R=c[7],R&&(a[7]=R),m&ce&&(a[8]=a[8]==null?c[8]:Jt(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=g,a}function gL(a){var c=[];if(a!=null)for(var u in tt(a))c.push(u);return c}function yL(a){return Jp.call(a)}function e_(a,c,u){return c=Pt(c===t?a.length-1:c,0),function(){for(var m=arguments,g=-1,S=Pt(m.length-c,0),_=B(S);++g<S;)_[g]=m[c+g];g=-1;for(var R=B(c+1);++g<c;)R[g]=m[g];return R[c]=u(_),Nr(a,this,R)}}function t_(a,c){return c.length<2?a:Vo(a,sn(c,0,-1))}function xL(a,c){for(var u=a.length,m=Jt(c.length,u),g=vr(a);m--;){var S=c[m];a[m]=Ti(S,u)?g[S]:t}return a}function Nx(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var r_=i_(_E),Kc=IN||function(a,c){return It.setTimeout(a,c)},Ox=i_(VO);function n_(a,c,u){var m=c+"";return Ox(a,lL(m,TL(aL(m),u)))}function i_(a){var c=0,u=0;return function(){var m=LN(),g=I-(m-u);if(u=m,g>0){if(++c>=H)return arguments[0]}else c=0;return a.apply(t,arguments)}}function wu(a,c){var u=-1,m=a.length,g=m-1;for(c=c===t?m:c;++u<c;){var S=xx(u,g),_=a[S];a[S]=a[u],a[u]=_}return a.length=c,a}var o_=dL(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(c1,function(u,m,g,S){c.push(g?S.replace(g1,"$1"):m||u)}),c});function zn(a){if(typeof a=="string"||Ur(a))return a;var c=a+"";return c=="0"&&1/a==-F?"-0":c}function $o(a){if(a!=null){try{return Xp.call(a)}catch{}try{return a+""}catch{}}return""}function TL(a,c){return rn(be,function(u){var m="_."+u[0];c&u[1]&&!Gp(a,m)&&a.push(m)}),a.sort()}function a_(a){if(a instanceof Be)return a.clone();var c=new on(a.__wrapped__,a.__chain__);return c.__actions__=vr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function SL(a,c,u){(u?pr(a,c,u):c===t)?c=1:c=Pt(Ae(c),0);var m=a==null?0:a.length;if(!m||c<1)return[];for(var g=0,S=0,_=B(ou(m/c));g<m;)_[S++]=sn(a,g,g+=c);return _}function vL(a){for(var c=-1,u=a==null?0:a.length,m=0,g=[];++c<u;){var S=a[c];S&&(g[m++]=S)}return g}function bL(){var a=arguments.length;if(!a)return[];for(var c=B(a-1),u=arguments[0],m=a;m--;)c[m-1]=arguments[m];return Wi(Ee(u)?vr(u):[u],jt(c,1))}var wL=Fe(function(a,c){return Tt(a)?Wc(a,jt(c,1,Tt,!0)):[]}),EL=Fe(function(a,c){var u=cn(c);return Tt(u)&&(u=t),Tt(a)?Wc(a,jt(c,1,Tt,!0),he(u,2)):[]}),_L=Fe(function(a,c){var u=cn(c);return Tt(u)&&(u=t),Tt(a)?Wc(a,jt(c,1,Tt,!0),t,u):[]});function RL(a,c,u){var m=a==null?0:a.length;return m?(c=u||c===t?1:Ae(c),sn(a,c<0?0:c,m)):[]}function kL(a,c,u){var m=a==null?0:a.length;return m?(c=u||c===t?1:Ae(c),c=m-c,sn(a,0,c<0?0:c)):[]}function AL(a,c){return a&&a.length?hu(a,he(c,3),!0,!0):[]}function PL(a,c){return a&&a.length?hu(a,he(c,3),!0):[]}function ML(a,c,u,m){var g=a==null?0:a.length;return g?(u&&typeof u!="number"&&pr(a,c,u)&&(u=0,m=g),bO(a,c,u,m)):[]}function s_(a,c,u){var m=a==null?0:a.length;if(!m)return-1;var g=u==null?0:Ae(u);return g<0&&(g=Pt(m+g,0)),Kp(a,he(c,3),g)}function c_(a,c,u){var m=a==null?0:a.length;if(!m)return-1;var g=m-1;return u!==t&&(g=Ae(u),g=u<0?Pt(m+g,0):Jt(g,m-1)),Kp(a,he(c,3),g,!0)}function l_(a){var c=a==null?0:a.length;return c?jt(a,1):[]}function DL(a){var c=a==null?0:a.length;return c?jt(a,F):[]}function FL(a,c){var u=a==null?0:a.length;return u?(c=c===t?1:Ae(c),jt(a,c)):[]}function IL(a){for(var c=-1,u=a==null?0:a.length,m={};++c<u;){var g=a[c];m[g[0]]=g[1]}return m}function p_(a){return a&&a.length?a[0]:t}function CL(a,c,u){var m=a==null?0:a.length;if(!m)return-1;var g=u==null?0:Ae(u);return g<0&&(g=Pt(m+g,0)),La(a,c,g)}function NL(a){var c=a==null?0:a.length;return c?sn(a,0,-1):[]}var OL=Fe(function(a){var c=at(a,wx);return c.length&&c[0]===a[0]?mx(c):[]}),LL=Fe(function(a){var c=cn(a),u=at(a,wx);return c===cn(u)?c=t:u.pop(),u.length&&u[0]===a[0]?mx(u,he(c,2)):[]}),UL=Fe(function(a){var c=cn(a),u=at(a,wx);return c=typeof c=="function"?c:t,c&&u.pop(),u.length&&u[0]===a[0]?mx(u,t,c):[]});function HL(a,c){return a==null?"":NN.call(a,c)}function cn(a){var c=a==null?0:a.length;return c?a[c-1]:t}function BL(a,c,u){var m=a==null?0:a.length;if(!m)return-1;var g=m;return u!==t&&(g=Ae(u),g=g<0?Pt(m+g,0):Jt(g,m-1)),c===c?TN(a,c,g):Kp(a,jw,g,!0)}function VL(a,c){return a&&a.length?vE(a,Ae(c)):t}var WL=Fe(u_);function u_(a,c){return a&&a.length&&c&&c.length?yx(a,c):a}function $L(a,c,u){return a&&a.length&&c&&c.length?yx(a,c,he(u,2)):a}function jL(a,c,u){return a&&a.length&&c&&c.length?yx(a,c,t,u):a}var zL=xi(function(a,c){var u=a==null?0:a.length,m=lx(a,c);return EE(a,at(c,function(g){return Ti(g,u)?+g:g}).sort(CE)),m});function qL(a,c){var u=[];if(!(a&&a.length))return u;var m=-1,g=[],S=a.length;for(c=he(c,3);++m<S;){var _=a[m];c(_,m,a)&&(u.push(_),g.push(m))}return EE(a,g),u}function Lx(a){return a==null?a:HN.call(a)}function GL(a,c,u){var m=a==null?0:a.length;return m?(u&&typeof u!="number"&&pr(a,c,u)?(c=0,u=m):(c=c==null?0:Ae(c),u=u===t?m:Ae(u)),sn(a,c,u)):[]}function KL(a,c){return du(a,c)}function QL(a,c,u){return Sx(a,c,he(u,2))}function YL(a,c){var u=a==null?0:a.length;if(u){var m=du(a,c);if(m<u&&Pn(a[m],c))return m}return-1}function ZL(a,c){return du(a,c,!0)}function XL(a,c,u){return Sx(a,c,he(u,2),!0)}function JL(a,c){var u=a==null?0:a.length;if(u){var m=du(a,c,!0)-1;if(Pn(a[m],c))return m}return-1}function eU(a){return a&&a.length?RE(a):[]}function tU(a,c){return a&&a.length?RE(a,he(c,2)):[]}function rU(a){var c=a==null?0:a.length;return c?sn(a,1,c):[]}function nU(a,c,u){return a&&a.length?(c=u||c===t?1:Ae(c),sn(a,0,c<0?0:c)):[]}function iU(a,c,u){var m=a==null?0:a.length;return m?(c=u||c===t?1:Ae(c),c=m-c,sn(a,c<0?0:c,m)):[]}function oU(a,c){return a&&a.length?hu(a,he(c,3),!1,!0):[]}function aU(a,c){return a&&a.length?hu(a,he(c,3)):[]}var sU=Fe(function(a){return Gi(jt(a,1,Tt,!0))}),cU=Fe(function(a){var c=cn(a);return Tt(c)&&(c=t),Gi(jt(a,1,Tt,!0),he(c,2))}),lU=Fe(function(a){var c=cn(a);return c=typeof c=="function"?c:t,Gi(jt(a,1,Tt,!0),t,c)});function pU(a){return a&&a.length?Gi(a):[]}function uU(a,c){return a&&a.length?Gi(a,he(c,2)):[]}function fU(a,c){return c=typeof c=="function"?c:t,a&&a.length?Gi(a,t,c):[]}function Ux(a){if(!(a&&a.length))return[];var c=0;return a=Vi(a,function(u){if(Tt(u))return c=Pt(u.length,c),!0}),tx(c,function(u){return at(a,Xy(u))})}function f_(a,c){if(!(a&&a.length))return[];var u=Ux(a);return c==null?u:at(u,function(m){return Nr(c,t,m)})}var mU=Fe(function(a,c){return Tt(a)?Wc(a,c):[]}),dU=Fe(function(a){return bx(Vi(a,Tt))}),hU=Fe(function(a){var c=cn(a);return Tt(c)&&(c=t),bx(Vi(a,Tt),he(c,2))}),gU=Fe(function(a){var c=cn(a);return c=typeof c=="function"?c:t,bx(Vi(a,Tt),t,c)}),yU=Fe(Ux);function xU(a,c){return ME(a||[],c||[],Vc)}function TU(a,c){return ME(a||[],c||[],zc)}var SU=Fe(function(a){var c=a.length,u=c>1?a[c-1]:t;return u=typeof u=="function"?(a.pop(),u):t,f_(a,u)});function m_(a){var c=x(a);return c.__chain__=!0,c}function vU(a,c){return c(a),a}function Eu(a,c){return c(a)}var bU=xi(function(a){var c=a.length,u=c?a[0]:0,m=this.__wrapped__,g=function(S){return lx(S,a)};return c>1||this.__actions__.length||!(m instanceof Be)||!Ti(u)?this.thru(g):(m=m.slice(u,+u+(c?1:0)),m.__actions__.push({func:Eu,args:[g],thisArg:t}),new on(m,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function wU(){return m_(this)}function EU(){return new on(this.value(),this.__chain__)}function _U(){this.__values__===t&&(this.__values__=k_(this.value()));var a=this.__index__>=this.__values__.length,c=a?t:this.__values__[this.__index__++];return{done:a,value:c}}function RU(){return this}function kU(a){for(var c,u=this;u instanceof lu;){var m=a_(u);m.__index__=0,m.__values__=t,c?g.__wrapped__=m:c=m;var g=m;u=u.__wrapped__}return g.__wrapped__=a,c}function AU(){var a=this.__wrapped__;if(a instanceof Be){var c=a;return this.__actions__.length&&(c=new Be(this)),c=c.reverse(),c.__actions__.push({func:Eu,args:[Lx],thisArg:t}),new on(c,this.__chain__)}return this.thru(Lx)}function PU(){return PE(this.__wrapped__,this.__actions__)}var MU=gu(function(a,c,u){Ye.call(a,u)?++a[u]:gi(a,u,1)});function DU(a,c,u){var m=Ee(a)?Ww:vO;return u&&pr(a,c,u)&&(c=t),m(a,he(c,3))}function FU(a,c){var u=Ee(a)?Vi:fE;return u(a,he(c,3))}var IU=BE(s_),CU=BE(c_);function NU(a,c){return jt(_u(a,c),1)}function OU(a,c){return jt(_u(a,c),F)}function LU(a,c,u){return u=u===t?1:Ae(u),jt(_u(a,c),u)}function d_(a,c){var u=Ee(a)?rn:qi;return u(a,he(c,3))}function h_(a,c){var u=Ee(a)?rN:uE;return u(a,he(c,3))}var UU=gu(function(a,c,u){Ye.call(a,u)?a[u].push(c):gi(a,u,[c])});function HU(a,c,u,m){a=br(a)?a:Ka(a),u=u&&!m?Ae(u):0;var g=a.length;return u<0&&(u=Pt(g+u,0)),Mu(a)?u<=g&&a.indexOf(c,u)>-1:!!g&&La(a,c,u)>-1}var BU=Fe(function(a,c,u){var m=-1,g=typeof c=="function",S=br(a)?B(a.length):[];return qi(a,function(_){S[++m]=g?Nr(c,_,u):$c(_,c,u)}),S}),VU=gu(function(a,c,u){gi(a,u,c)});function _u(a,c){var u=Ee(a)?at:xE;return u(a,he(c,3))}function WU(a,c,u,m){return a==null?[]:(Ee(c)||(c=c==null?[]:[c]),u=m?t:u,Ee(u)||(u=u==null?[]:[u]),bE(a,c,u))}var $U=gu(function(a,c,u){a[u?0:1].push(c)},function(){return[[],[]]});function jU(a,c,u){var m=Ee(a)?Yy:qw,g=arguments.length<3;return m(a,he(c,4),u,g,qi)}function zU(a,c,u){var m=Ee(a)?nN:qw,g=arguments.length<3;return m(a,he(c,4),u,g,uE)}function qU(a,c){var u=Ee(a)?Vi:fE;return u(a,Au(he(c,3)))}function GU(a){var c=Ee(a)?sE:HO;return c(a)}function KU(a,c,u){(u?pr(a,c,u):c===t)?c=1:c=Ae(c);var m=Ee(a)?gO:BO;return m(a,c)}function QU(a){var c=Ee(a)?yO:WO;return c(a)}function YU(a){if(a==null)return 0;if(br(a))return Mu(a)?Ha(a):a.length;var c=er(a);return c==_n||c==Rn?a.size:hx(a).length}function ZU(a,c,u){var m=Ee(a)?Zy:$O;return u&&pr(a,c,u)&&(c=t),m(a,he(c,3))}var XU=Fe(function(a,c){if(a==null)return[];var u=c.length;return u>1&&pr(a,c[0],c[1])?c=[]:u>2&&pr(c[0],c[1],c[2])&&(c=[c[0]]),bE(a,jt(c,1),[])}),Ru=FN||function(){return It.Date.now()};function JU(a,c){if(typeof c!="function")throw new nn(i);return a=Ae(a),function(){if(--a<1)return c.apply(this,arguments)}}function g_(a,c,u){return c=u?t:c,c=a&&c==null?a.length:c,yi(a,ce,t,t,t,t,c)}function y_(a,c){var u;if(typeof c!="function")throw new nn(i);return a=Ae(a),function(){return--a>0&&(u=c.apply(this,arguments)),a<=1&&(c=t),u}}var Hx=Fe(function(a,c,u){var m=w;if(u.length){var g=$i(u,qa(Hx));m|=ne}return yi(a,m,c,u,g)}),x_=Fe(function(a,c,u){var m=w|E;if(u.length){var g=$i(u,qa(x_));m|=ne}return yi(c,m,a,u,g)});function T_(a,c,u){c=u?t:c;var m=yi(a,V,t,t,t,t,t,c);return m.placeholder=T_.placeholder,m}function S_(a,c,u){c=u?t:c;var m=yi(a,j,t,t,t,t,t,c);return m.placeholder=S_.placeholder,m}function v_(a,c,u){var m,g,S,_,R,D,G=0,K=!1,J=!1,ie=!0;if(typeof a!="function")throw new nn(i);c=ln(c)||0,ut(u)&&(K=!!u.leading,J="maxWait"in u,S=J?Pt(ln(u.maxWait)||0,c):S,ie="trailing"in u?!!u.trailing:ie);function ue(St){var Mn=m,bi=g;return m=g=t,G=St,_=a.apply(bi,Mn),_}function ye(St){return G=St,R=Kc(Oe,c),K?ue(St):_}function Me(St){var Mn=St-D,bi=St-G,B_=c-Mn;return J?Jt(B_,S-bi):B_}function xe(St){var Mn=St-D,bi=St-G;return D===t||Mn>=c||Mn<0||J&&bi>=S}function Oe(){var St=Ru();if(xe(St))return Ve(St);R=Kc(Oe,Me(St))}function Ve(St){return R=t,ie&&m?ue(St):(m=g=t,_)}function Hr(){R!==t&&DE(R),G=0,m=D=g=R=t}function ur(){return R===t?_:Ve(Ru())}function Br(){var St=Ru(),Mn=xe(St);if(m=arguments,g=this,D=St,Mn){if(R===t)return ye(D);if(J)return DE(R),R=Kc(Oe,c),ue(D)}return R===t&&(R=Kc(Oe,c)),_}return Br.cancel=Hr,Br.flush=ur,Br}var eH=Fe(function(a,c){return pE(a,1,c)}),tH=Fe(function(a,c,u){return pE(a,ln(c)||0,u)});function rH(a){return yi(a,pt)}function ku(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new nn(i);var u=function(){var m=arguments,g=c?c.apply(this,m):m[0],S=u.cache;if(S.has(g))return S.get(g);var _=a.apply(this,m);return u.cache=S.set(g,_)||S,_};return u.cache=new(ku.Cache||hi),u}ku.Cache=hi;function Au(a){if(typeof a!="function")throw new nn(i);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function nH(a){return y_(2,a)}var iH=jO(function(a,c){c=c.length==1&&Ee(c[0])?at(c[0],Or(he())):at(jt(c,1),Or(he()));var u=c.length;return Fe(function(m){for(var g=-1,S=Jt(m.length,u);++g<S;)m[g]=c[g].call(this,m[g]);return Nr(a,this,m)})}),Bx=Fe(function(a,c){var u=$i(c,qa(Bx));return yi(a,ne,t,c,u)}),b_=Fe(function(a,c){var u=$i(c,qa(b_));return yi(a,se,t,c,u)}),oH=xi(function(a,c){return yi(a,fe,t,t,t,c)});function aH(a,c){if(typeof a!="function")throw new nn(i);return c=c===t?c:Ae(c),Fe(a,c)}function sH(a,c){if(typeof a!="function")throw new nn(i);return c=c==null?0:Pt(Ae(c),0),Fe(function(u){var m=u[c],g=Qi(u,0,c);return m&&Wi(g,m),Nr(a,this,g)})}function cH(a,c,u){var m=!0,g=!0;if(typeof a!="function")throw new nn(i);return ut(u)&&(m="leading"in u?!!u.leading:m,g="trailing"in u?!!u.trailing:g),v_(a,c,{leading:m,maxWait:c,trailing:g})}function lH(a){return g_(a,1)}function pH(a,c){return Bx(Ex(c),a)}function uH(){if(!arguments.length)return[];var a=arguments[0];return Ee(a)?a:[a]}function fH(a){return an(a,h)}function mH(a,c){return c=typeof c=="function"?c:t,an(a,h,c)}function dH(a){return an(a,f|h)}function hH(a,c){return c=typeof c=="function"?c:t,an(a,f|h,c)}function gH(a,c){return c==null||lE(a,c,Ct(c))}function Pn(a,c){return a===c||a!==a&&c!==c}var yH=Su(fx),xH=Su(function(a,c){return a>=c}),jo=hE(function(){return arguments}())?hE:function(a){return gt(a)&&Ye.call(a,"callee")&&!tE.call(a,"callee")},Ee=B.isArray,TH=Ow?Or(Ow):kO;function br(a){return a!=null&&Pu(a.length)&&!Si(a)}function Tt(a){return gt(a)&&br(a)}function SH(a){return a===!0||a===!1||gt(a)&&lr(a)==$t}var Yi=CN||Zx,vH=Lw?Or(Lw):AO;function bH(a){return gt(a)&&a.nodeType===1&&!Qc(a)}function wH(a){if(a==null)return!0;if(br(a)&&(Ee(a)||typeof a=="string"||typeof a.splice=="function"||Yi(a)||Ga(a)||jo(a)))return!a.length;var c=er(a);if(c==_n||c==Rn)return!a.size;if(Gc(a))return!hx(a).length;for(var u in a)if(Ye.call(a,u))return!1;return!0}function EH(a,c){return jc(a,c)}function _H(a,c,u){u=typeof u=="function"?u:t;var m=u?u(a,c):t;return m===t?jc(a,c,t,u):!!m}function Vx(a){if(!gt(a))return!1;var c=lr(a);return c==fi||c==No||typeof a.message=="string"&&typeof a.name=="string"&&!Qc(a)}function RH(a){return typeof a=="number"&&nE(a)}function Si(a){if(!ut(a))return!1;var c=lr(a);return c==Ca||c==pw||c==ht||c==YC}function w_(a){return typeof a=="number"&&a==Ae(a)}function Pu(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=O}function ut(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function gt(a){return a!=null&&typeof a=="object"}var E_=Uw?Or(Uw):MO;function kH(a,c){return a===c||dx(a,c,Dx(c))}function AH(a,c,u){return u=typeof u=="function"?u:t,dx(a,c,Dx(c),u)}function PH(a){return __(a)&&a!=+a}function MH(a){if(mL(a))throw new we(n);return gE(a)}function DH(a){return a===null}function FH(a){return a==null}function __(a){return typeof a=="number"||gt(a)&&lr(a)==Mc}function Qc(a){if(!gt(a)||lr(a)!=mi)return!1;var c=ru(a);if(c===null)return!0;var u=Ye.call(c,"constructor")&&c.constructor;return typeof u=="function"&&u instanceof u&&Xp.call(u)==AN}var Wx=Hw?Or(Hw):DO;function IH(a){return w_(a)&&a>=-O&&a<=O}var R_=Bw?Or(Bw):FO;function Mu(a){return typeof a=="string"||!Ee(a)&&gt(a)&&lr(a)==Fc}function Ur(a){return typeof a=="symbol"||gt(a)&&lr(a)==$p}var Ga=Vw?Or(Vw):IO;function CH(a){return a===t}function NH(a){return gt(a)&&er(a)==Ic}function OH(a){return gt(a)&&lr(a)==XC}var LH=Su(gx),UH=Su(function(a,c){return a<=c});function k_(a){if(!a)return[];if(br(a))return Mu(a)?kn(a):vr(a);if(Oc&&a[Oc])return gN(a[Oc]());var c=er(a),u=c==_n?nx:c==Rn?Qp:Ka;return u(a)}function vi(a){if(!a)return a===0?a:0;if(a=ln(a),a===F||a===-F){var c=a<0?-1:1;return c*$}return a===a?a:0}function Ae(a){var c=vi(a),u=c%1;return c===c?u?c-u:c:0}function A_(a){return a?Bo(Ae(a),0,Q):0}function ln(a){if(typeof a=="number")return a;if(Ur(a))return X;if(ut(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=ut(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=Gw(a);var u=T1.test(a);return u||v1.test(a)?J1(a.slice(2),u?2:8):x1.test(a)?X:+a}function P_(a){return jn(a,wr(a))}function HH(a){return a?Bo(Ae(a),-O,O):a===0?a:0}function Qe(a){return a==null?"":Lr(a)}var BH=ja(function(a,c){if(Gc(c)||br(c)){jn(c,Ct(c),a);return}for(var u in c)Ye.call(c,u)&&Vc(a,u,c[u])}),M_=ja(function(a,c){jn(c,wr(c),a)}),Du=ja(function(a,c,u,m){jn(c,wr(c),a,m)}),VH=ja(function(a,c,u,m){jn(c,Ct(c),a,m)}),WH=xi(lx);function $H(a,c){var u=$a(a);return c==null?u:cE(u,c)}var jH=Fe(function(a,c){a=tt(a);var u=-1,m=c.length,g=m>2?c[2]:t;for(g&&pr(c[0],c[1],g)&&(m=1);++u<m;)for(var S=c[u],_=wr(S),R=-1,D=_.length;++R<D;){var G=_[R],K=a[G];(K===t||Pn(K,Ba[G])&&!Ye.call(a,G))&&(a[G]=S[G])}return a}),zH=Fe(function(a){return a.push(t,GE),Nr(D_,t,a)});function qH(a,c){return $w(a,he(c,3),$n)}function GH(a,c){return $w(a,he(c,3),ux)}function KH(a,c){return a==null?a:px(a,he(c,3),wr)}function QH(a,c){return a==null?a:mE(a,he(c,3),wr)}function YH(a,c){return a&&$n(a,he(c,3))}function ZH(a,c){return a&&ux(a,he(c,3))}function XH(a){return a==null?[]:fu(a,Ct(a))}function JH(a){return a==null?[]:fu(a,wr(a))}function $x(a,c,u){var m=a==null?t:Vo(a,c);return m===t?u:m}function e2(a,c){return a!=null&&YE(a,c,wO)}function jx(a,c){return a!=null&&YE(a,c,EO)}var t2=WE(function(a,c,u){c!=null&&typeof c.toString!="function"&&(c=Jp.call(c)),a[c]=u},qx(Er)),r2=WE(function(a,c,u){c!=null&&typeof c.toString!="function"&&(c=Jp.call(c)),Ye.call(a,c)?a[c].push(u):a[c]=[u]},he),n2=Fe($c);function Ct(a){return br(a)?aE(a):hx(a)}function wr(a){return br(a)?aE(a,!0):CO(a)}function i2(a,c){var u={};return c=he(c,3),$n(a,function(m,g,S){gi(u,c(m,g,S),m)}),u}function o2(a,c){var u={};return c=he(c,3),$n(a,function(m,g,S){gi(u,g,c(m,g,S))}),u}var a2=ja(function(a,c,u){mu(a,c,u)}),D_=ja(function(a,c,u,m){mu(a,c,u,m)}),s2=xi(function(a,c){var u={};if(a==null)return u;var m=!1;c=at(c,function(S){return S=Ki(S,a),m||(m=S.length>1),S}),jn(a,Px(a),u),m&&(u=an(u,f|d|h,tL));for(var g=c.length;g--;)vx(u,c[g]);return u});function c2(a,c){return F_(a,Au(he(c)))}var l2=xi(function(a,c){return a==null?{}:OO(a,c)});function F_(a,c){if(a==null)return{};var u=at(Px(a),function(m){return[m]});return c=he(c),wE(a,u,function(m,g){return c(m,g[0])})}function p2(a,c,u){c=Ki(c,a);var m=-1,g=c.length;for(g||(g=1,a=t);++m<g;){var S=a==null?t:a[zn(c[m])];S===t&&(m=g,S=u),a=Si(S)?S.call(a):S}return a}function u2(a,c,u){return a==null?a:zc(a,c,u)}function f2(a,c,u,m){return m=typeof m=="function"?m:t,a==null?a:zc(a,c,u,m)}var I_=zE(Ct),C_=zE(wr);function m2(a,c,u){var m=Ee(a),g=m||Yi(a)||Ga(a);if(c=he(c,4),u==null){var S=a&&a.constructor;g?u=m?new S:[]:ut(a)?u=Si(S)?$a(ru(a)):{}:u={}}return(g?rn:$n)(a,function(_,R,D){return c(u,_,R,D)}),u}function d2(a,c){return a==null?!0:vx(a,c)}function h2(a,c,u){return a==null?a:AE(a,c,Ex(u))}function g2(a,c,u,m){return m=typeof m=="function"?m:t,a==null?a:AE(a,c,Ex(u),m)}function Ka(a){return a==null?[]:rx(a,Ct(a))}function y2(a){return a==null?[]:rx(a,wr(a))}function x2(a,c,u){return u===t&&(u=c,c=t),u!==t&&(u=ln(u),u=u===u?u:0),c!==t&&(c=ln(c),c=c===c?c:0),Bo(ln(a),c,u)}function T2(a,c,u){return c=vi(c),u===t?(u=c,c=0):u=vi(u),a=ln(a),_O(a,c,u)}function S2(a,c,u){if(u&&typeof u!="boolean"&&pr(a,c,u)&&(c=u=t),u===t&&(typeof c=="boolean"?(u=c,c=t):typeof a=="boolean"&&(u=a,a=t)),a===t&&c===t?(a=0,c=1):(a=vi(a),c===t?(c=a,a=0):c=vi(c)),a>c){var m=a;a=c,c=m}if(u||a%1||c%1){var g=iE();return Jt(a+g*(c-a+X1("1e-"+((g+"").length-1))),c)}return xx(a,c)}var v2=za(function(a,c,u){return c=c.toLowerCase(),a+(u?N_(c):c)});function N_(a){return zx(Qe(a).toLowerCase())}function O_(a){return a=Qe(a),a&&a.replace(w1,uN).replace(W1,"")}function b2(a,c,u){a=Qe(a),c=Lr(c);var m=a.length;u=u===t?m:Bo(Ae(u),0,m);var g=u;return u-=c.length,u>=0&&a.slice(u,g)==c}function w2(a){return a=Qe(a),a&&n1.test(a)?a.replace(mw,fN):a}function E2(a){return a=Qe(a),a&&l1.test(a)?a.replace(By,"\\$&"):a}var _2=za(function(a,c,u){return a+(u?"-":"")+c.toLowerCase()}),R2=za(function(a,c,u){return a+(u?" ":"")+c.toLowerCase()}),k2=HE("toLowerCase");function A2(a,c,u){a=Qe(a),c=Ae(c);var m=c?Ha(a):0;if(!c||m>=c)return a;var g=(c-m)/2;return Tu(au(g),u)+a+Tu(ou(g),u)}function P2(a,c,u){a=Qe(a),c=Ae(c);var m=c?Ha(a):0;return c&&m<c?a+Tu(c-m,u):a}function M2(a,c,u){a=Qe(a),c=Ae(c);var m=c?Ha(a):0;return c&&m<c?Tu(c-m,u)+a:a}function D2(a,c,u){return u||c==null?c=0:c&&(c=+c),UN(Qe(a).replace(Vy,""),c||0)}function F2(a,c,u){return(u?pr(a,c,u):c===t)?c=1:c=Ae(c),Tx(Qe(a),c)}function I2(){var a=arguments,c=Qe(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var C2=za(function(a,c,u){return a+(u?"_":"")+c.toLowerCase()});function N2(a,c,u){return u&&typeof u!="number"&&pr(a,c,u)&&(c=u=t),u=u===t?Q:u>>>0,u?(a=Qe(a),a&&(typeof c=="string"||c!=null&&!Wx(c))&&(c=Lr(c),!c&&Ua(a))?Qi(kn(a),0,u):a.split(c,u)):[]}var O2=za(function(a,c,u){return a+(u?" ":"")+zx(c)});function L2(a,c,u){return a=Qe(a),u=u==null?0:Bo(Ae(u),0,a.length),c=Lr(c),a.slice(u,u+c.length)==c}function U2(a,c,u){var m=x.templateSettings;u&&pr(a,c,u)&&(c=t),a=Qe(a),c=Du({},c,m,qE);var g=Du({},c.imports,m.imports,qE),S=Ct(g),_=rx(g,S),R,D,G=0,K=c.interpolate||jp,J="__p += '",ie=ix((c.escape||jp).source+"|"+K.source+"|"+(K===dw?y1:jp).source+"|"+(c.evaluate||jp).source+"|$","g"),ue="//# sourceURL="+(Ye.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++G1+"]")+`
`;a.replace(ie,function(xe,Oe,Ve,Hr,ur,Br){return Ve||(Ve=Hr),J+=a.slice(G,Br).replace(E1,mN),Oe&&(R=!0,J+=`' +
__e(`+Oe+`) +
'`),ur&&(D=!0,J+=`';
`+ur+`;
__p += '`),Ve&&(J+=`' +
((__t = (`+Ve+`)) == null ? '' : __t) +
'`),G=Br+xe.length,xe}),J+=`';
`;var ye=Ye.call(c,"variable")&&c.variable;if(!ye)J=`with (obj) {
`+J+`
}
`;else if(h1.test(ye))throw new we(o);J=(D?J.replace(JC,""):J).replace(e1,"$1").replace(t1,"$1;"),J="function("+(ye||"obj")+`) {
`+(ye?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(D?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+J+`return __p
}`;var Me=U_(function(){return Ge(S,ue+"return "+J).apply(t,_)});if(Me.source=J,Vx(Me))throw Me;return Me}function H2(a){return Qe(a).toLowerCase()}function B2(a){return Qe(a).toUpperCase()}function V2(a,c,u){if(a=Qe(a),a&&(u||c===t))return Gw(a);if(!a||!(c=Lr(c)))return a;var m=kn(a),g=kn(c),S=Kw(m,g),_=Qw(m,g)+1;return Qi(m,S,_).join("")}function W2(a,c,u){if(a=Qe(a),a&&(u||c===t))return a.slice(0,Zw(a)+1);if(!a||!(c=Lr(c)))return a;var m=kn(a),g=Qw(m,kn(c))+1;return Qi(m,0,g).join("")}function $2(a,c,u){if(a=Qe(a),a&&(u||c===t))return a.replace(Vy,"");if(!a||!(c=Lr(c)))return a;var m=kn(a),g=Kw(m,kn(c));return Qi(m,g).join("")}function j2(a,c){var u=Wt,m=dt;if(ut(c)){var g="separator"in c?c.separator:g;u="length"in c?Ae(c.length):u,m="omission"in c?Lr(c.omission):m}a=Qe(a);var S=a.length;if(Ua(a)){var _=kn(a);S=_.length}if(u>=S)return a;var R=u-Ha(m);if(R<1)return m;var D=_?Qi(_,0,R).join(""):a.slice(0,R);if(g===t)return D+m;if(_&&(R+=D.length-R),Wx(g)){if(a.slice(R).search(g)){var G,K=D;for(g.global||(g=ix(g.source,Qe(hw.exec(g))+"g")),g.lastIndex=0;G=g.exec(K);)var J=G.index;D=D.slice(0,J===t?R:J)}}else if(a.indexOf(Lr(g),R)!=R){var ie=D.lastIndexOf(g);ie>-1&&(D=D.slice(0,ie))}return D+m}function z2(a){return a=Qe(a),a&&r1.test(a)?a.replace(fw,SN):a}var q2=za(function(a,c,u){return a+(u?" ":"")+c.toUpperCase()}),zx=HE("toUpperCase");function L_(a,c,u){return a=Qe(a),c=u?t:c,c===t?hN(a)?wN(a):aN(a):a.match(c)||[]}var U_=Fe(function(a,c){try{return Nr(a,t,c)}catch(u){return Vx(u)?u:new we(u)}}),G2=xi(function(a,c){return rn(c,function(u){u=zn(u),gi(a,u,Hx(a[u],a))}),a});function K2(a){var c=a==null?0:a.length,u=he();return a=c?at(a,function(m){if(typeof m[1]!="function")throw new nn(i);return[u(m[0]),m[1]]}):[],Fe(function(m){for(var g=-1;++g<c;){var S=a[g];if(Nr(S[0],this,m))return Nr(S[1],this,m)}})}function Q2(a){return SO(an(a,f))}function qx(a){return function(){return a}}function Y2(a,c){return a==null||a!==a?c:a}var Z2=VE(),X2=VE(!0);function Er(a){return a}function Gx(a){return yE(typeof a=="function"?a:an(a,f))}function J2(a){return TE(an(a,f))}function eB(a,c){return SE(a,an(c,f))}var tB=Fe(function(a,c){return function(u){return $c(u,a,c)}}),rB=Fe(function(a,c){return function(u){return $c(a,u,c)}});function Kx(a,c,u){var m=Ct(c),g=fu(c,m);u==null&&!(ut(c)&&(g.length||!m.length))&&(u=c,c=a,a=this,g=fu(c,Ct(c)));var S=!(ut(u)&&"chain"in u)||!!u.chain,_=Si(a);return rn(g,function(R){var D=c[R];a[R]=D,_&&(a.prototype[R]=function(){var G=this.__chain__;if(S||G){var K=a(this.__wrapped__),J=K.__actions__=vr(this.__actions__);return J.push({func:D,args:arguments,thisArg:a}),K.__chain__=G,K}return D.apply(a,Wi([this.value()],arguments))})}),a}function nB(){return It._===this&&(It._=PN),this}function Qx(){}function iB(a){return a=Ae(a),Fe(function(c){return vE(c,a)})}var oB=Rx(at),aB=Rx(Ww),sB=Rx(Zy);function H_(a){return Ix(a)?Xy(zn(a)):LO(a)}function cB(a){return function(c){return a==null?t:Vo(a,c)}}var lB=$E(),pB=$E(!0);function Yx(){return[]}function Zx(){return!1}function uB(){return{}}function fB(){return""}function mB(){return!0}function dB(a,c){if(a=Ae(a),a<1||a>O)return[];var u=Q,m=Jt(a,Q);c=he(c),a-=Q;for(var g=tx(m,c);++u<a;)c(u);return g}function hB(a){return Ee(a)?at(a,zn):Ur(a)?[a]:vr(o_(Qe(a)))}function gB(a){var c=++kN;return Qe(a)+c}var yB=xu(function(a,c){return a+c},0),xB=kx("ceil"),TB=xu(function(a,c){return a/c},1),SB=kx("floor");function vB(a){return a&&a.length?uu(a,Er,fx):t}function bB(a,c){return a&&a.length?uu(a,he(c,2),fx):t}function wB(a){return zw(a,Er)}function EB(a,c){return zw(a,he(c,2))}function _B(a){return a&&a.length?uu(a,Er,gx):t}function RB(a,c){return a&&a.length?uu(a,he(c,2),gx):t}var kB=xu(function(a,c){return a*c},1),AB=kx("round"),PB=xu(function(a,c){return a-c},0);function MB(a){return a&&a.length?ex(a,Er):0}function DB(a,c){return a&&a.length?ex(a,he(c,2)):0}return x.after=JU,x.ary=g_,x.assign=BH,x.assignIn=M_,x.assignInWith=Du,x.assignWith=VH,x.at=WH,x.before=y_,x.bind=Hx,x.bindAll=G2,x.bindKey=x_,x.castArray=uH,x.chain=m_,x.chunk=SL,x.compact=vL,x.concat=bL,x.cond=K2,x.conforms=Q2,x.constant=qx,x.countBy=MU,x.create=$H,x.curry=T_,x.curryRight=S_,x.debounce=v_,x.defaults=jH,x.defaultsDeep=zH,x.defer=eH,x.delay=tH,x.difference=wL,x.differenceBy=EL,x.differenceWith=_L,x.drop=RL,x.dropRight=kL,x.dropRightWhile=AL,x.dropWhile=PL,x.fill=ML,x.filter=FU,x.flatMap=NU,x.flatMapDeep=OU,x.flatMapDepth=LU,x.flatten=l_,x.flattenDeep=DL,x.flattenDepth=FL,x.flip=rH,x.flow=Z2,x.flowRight=X2,x.fromPairs=IL,x.functions=XH,x.functionsIn=JH,x.groupBy=UU,x.initial=NL,x.intersection=OL,x.intersectionBy=LL,x.intersectionWith=UL,x.invert=t2,x.invertBy=r2,x.invokeMap=BU,x.iteratee=Gx,x.keyBy=VU,x.keys=Ct,x.keysIn=wr,x.map=_u,x.mapKeys=i2,x.mapValues=o2,x.matches=J2,x.matchesProperty=eB,x.memoize=ku,x.merge=a2,x.mergeWith=D_,x.method=tB,x.methodOf=rB,x.mixin=Kx,x.negate=Au,x.nthArg=iB,x.omit=s2,x.omitBy=c2,x.once=nH,x.orderBy=WU,x.over=oB,x.overArgs=iH,x.overEvery=aB,x.overSome=sB,x.partial=Bx,x.partialRight=b_,x.partition=$U,x.pick=l2,x.pickBy=F_,x.property=H_,x.propertyOf=cB,x.pull=WL,x.pullAll=u_,x.pullAllBy=$L,x.pullAllWith=jL,x.pullAt=zL,x.range=lB,x.rangeRight=pB,x.rearg=oH,x.reject=qU,x.remove=qL,x.rest=aH,x.reverse=Lx,x.sampleSize=KU,x.set=u2,x.setWith=f2,x.shuffle=QU,x.slice=GL,x.sortBy=XU,x.sortedUniq=eU,x.sortedUniqBy=tU,x.split=N2,x.spread=sH,x.tail=rU,x.take=nU,x.takeRight=iU,x.takeRightWhile=oU,x.takeWhile=aU,x.tap=vU,x.throttle=cH,x.thru=Eu,x.toArray=k_,x.toPairs=I_,x.toPairsIn=C_,x.toPath=hB,x.toPlainObject=P_,x.transform=m2,x.unary=lH,x.union=sU,x.unionBy=cU,x.unionWith=lU,x.uniq=pU,x.uniqBy=uU,x.uniqWith=fU,x.unset=d2,x.unzip=Ux,x.unzipWith=f_,x.update=h2,x.updateWith=g2,x.values=Ka,x.valuesIn=y2,x.without=mU,x.words=L_,x.wrap=pH,x.xor=dU,x.xorBy=hU,x.xorWith=gU,x.zip=yU,x.zipObject=xU,x.zipObjectDeep=TU,x.zipWith=SU,x.entries=I_,x.entriesIn=C_,x.extend=M_,x.extendWith=Du,Kx(x,x),x.add=yB,x.attempt=U_,x.camelCase=v2,x.capitalize=N_,x.ceil=xB,x.clamp=x2,x.clone=fH,x.cloneDeep=dH,x.cloneDeepWith=hH,x.cloneWith=mH,x.conformsTo=gH,x.deburr=O_,x.defaultTo=Y2,x.divide=TB,x.endsWith=b2,x.eq=Pn,x.escape=w2,x.escapeRegExp=E2,x.every=DU,x.find=IU,x.findIndex=s_,x.findKey=qH,x.findLast=CU,x.findLastIndex=c_,x.findLastKey=GH,x.floor=SB,x.forEach=d_,x.forEachRight=h_,x.forIn=KH,x.forInRight=QH,x.forOwn=YH,x.forOwnRight=ZH,x.get=$x,x.gt=yH,x.gte=xH,x.has=e2,x.hasIn=jx,x.head=p_,x.identity=Er,x.includes=HU,x.indexOf=CL,x.inRange=T2,x.invoke=n2,x.isArguments=jo,x.isArray=Ee,x.isArrayBuffer=TH,x.isArrayLike=br,x.isArrayLikeObject=Tt,x.isBoolean=SH,x.isBuffer=Yi,x.isDate=vH,x.isElement=bH,x.isEmpty=wH,x.isEqual=EH,x.isEqualWith=_H,x.isError=Vx,x.isFinite=RH,x.isFunction=Si,x.isInteger=w_,x.isLength=Pu,x.isMap=E_,x.isMatch=kH,x.isMatchWith=AH,x.isNaN=PH,x.isNative=MH,x.isNil=FH,x.isNull=DH,x.isNumber=__,x.isObject=ut,x.isObjectLike=gt,x.isPlainObject=Qc,x.isRegExp=Wx,x.isSafeInteger=IH,x.isSet=R_,x.isString=Mu,x.isSymbol=Ur,x.isTypedArray=Ga,x.isUndefined=CH,x.isWeakMap=NH,x.isWeakSet=OH,x.join=HL,x.kebabCase=_2,x.last=cn,x.lastIndexOf=BL,x.lowerCase=R2,x.lowerFirst=k2,x.lt=LH,x.lte=UH,x.max=vB,x.maxBy=bB,x.mean=wB,x.meanBy=EB,x.min=_B,x.minBy=RB,x.stubArray=Yx,x.stubFalse=Zx,x.stubObject=uB,x.stubString=fB,x.stubTrue=mB,x.multiply=kB,x.nth=VL,x.noConflict=nB,x.noop=Qx,x.now=Ru,x.pad=A2,x.padEnd=P2,x.padStart=M2,x.parseInt=D2,x.random=S2,x.reduce=jU,x.reduceRight=zU,x.repeat=F2,x.replace=I2,x.result=p2,x.round=AB,x.runInContext=P,x.sample=GU,x.size=YU,x.snakeCase=C2,x.some=ZU,x.sortedIndex=KL,x.sortedIndexBy=QL,x.sortedIndexOf=YL,x.sortedLastIndex=ZL,x.sortedLastIndexBy=XL,x.sortedLastIndexOf=JL,x.startCase=O2,x.startsWith=L2,x.subtract=PB,x.sum=MB,x.sumBy=DB,x.template=U2,x.times=dB,x.toFinite=vi,x.toInteger=Ae,x.toLength=A_,x.toLower=H2,x.toNumber=ln,x.toSafeInteger=HH,x.toString=Qe,x.toUpper=B2,x.trim=V2,x.trimEnd=W2,x.trimStart=$2,x.truncate=j2,x.unescape=z2,x.uniqueId=gB,x.upperCase=q2,x.upperFirst=zx,x.each=d_,x.eachRight=h_,x.first=p_,Kx(x,function(){var a={};return $n(x,function(c,u){Ye.call(x.prototype,u)||(a[u]=c)}),a}(),{chain:!1}),x.VERSION=e,rn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){x[a].placeholder=x}),rn(["drop","take"],function(a,c){Be.prototype[a]=function(u){u=u===t?1:Pt(Ae(u),0);var m=this.__filtered__&&!c?new Be(this):this.clone();return m.__filtered__?m.__takeCount__=Jt(u,m.__takeCount__):m.__views__.push({size:Jt(u,Q),type:a+(m.__dir__<0?"Right":"")}),m},Be.prototype[a+"Right"]=function(u){return this.reverse()[a](u).reverse()}}),rn(["filter","map","takeWhile"],function(a,c){var u=c+1,m=u==A||u==Z;Be.prototype[a]=function(g){var S=this.clone();return S.__iteratees__.push({iteratee:he(g,3),type:u}),S.__filtered__=S.__filtered__||m,S}}),rn(["head","last"],function(a,c){var u="take"+(c?"Right":"");Be.prototype[a]=function(){return this[u](1).value()[0]}}),rn(["initial","tail"],function(a,c){var u="drop"+(c?"":"Right");Be.prototype[a]=function(){return this.__filtered__?new Be(this):this[u](1)}}),Be.prototype.compact=function(){return this.filter(Er)},Be.prototype.find=function(a){return this.filter(a).head()},Be.prototype.findLast=function(a){return this.reverse().find(a)},Be.prototype.invokeMap=Fe(function(a,c){return typeof a=="function"?new Be(this):this.map(function(u){return $c(u,a,c)})}),Be.prototype.reject=function(a){return this.filter(Au(he(a)))},Be.prototype.slice=function(a,c){a=Ae(a);var u=this;return u.__filtered__&&(a>0||c<0)?new Be(u):(a<0?u=u.takeRight(-a):a&&(u=u.drop(a)),c!==t&&(c=Ae(c),u=c<0?u.dropRight(-c):u.take(c-a)),u)},Be.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Be.prototype.toArray=function(){return this.take(Q)},$n(Be.prototype,function(a,c){var u=/^(?:filter|find|map|reject)|While$/.test(c),m=/^(?:head|last)$/.test(c),g=x[m?"take"+(c=="last"?"Right":""):c],S=m||/^find/.test(c);g&&(x.prototype[c]=function(){var _=this.__wrapped__,R=m?[1]:arguments,D=_ instanceof Be,G=R[0],K=D||Ee(_),J=function(Oe){var Ve=g.apply(x,Wi([Oe],R));return m&&ie?Ve[0]:Ve};K&&u&&typeof G=="function"&&G.length!=1&&(D=K=!1);var ie=this.__chain__,ue=!!this.__actions__.length,ye=S&&!ie,Me=D&&!ue;if(!S&&K){_=Me?_:new Be(this);var xe=a.apply(_,R);return xe.__actions__.push({func:Eu,args:[J],thisArg:t}),new on(xe,ie)}return ye&&Me?a.apply(this,R):(xe=this.thru(J),ye?m?xe.value()[0]:xe.value():xe)})}),rn(["pop","push","shift","sort","splice","unshift"],function(a){var c=Yp[a],u=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",m=/^(?:pop|shift)$/.test(a);x.prototype[a]=function(){var g=arguments;if(m&&!this.__chain__){var S=this.value();return c.apply(Ee(S)?S:[],g)}return this[u](function(_){return c.apply(Ee(_)?_:[],g)})}}),$n(Be.prototype,function(a,c){var u=x[c];if(u){var m=u.name+"";Ye.call(Wa,m)||(Wa[m]=[]),Wa[m].push({name:c,func:u})}}),Wa[yu(t,E).name]=[{name:"wrapper",func:t}],Be.prototype.clone=zN,Be.prototype.reverse=qN,Be.prototype.value=GN,x.prototype.at=bU,x.prototype.chain=wU,x.prototype.commit=EU,x.prototype.next=_U,x.prototype.plant=kU,x.prototype.reverse=AU,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=PU,x.prototype.first=x.prototype.head,Oc&&(x.prototype[Oc]=RU),x},ji=EN();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(It._=ji,define(function(){return ji})):Oo?((Oo.exports=ji)._=ji,Gy._=ji):It._=ji}).call(dc)});var GF=Qa((POe,qF)=>{"use strict";qF.exports=jF;function jF(t,e,r){t instanceof RegExp&&(t=$F(t,r)),e instanceof RegExp&&(e=$F(e,r));var n=zF(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function $F(t,e){var r=e.match(t);return r?r[0]:null}jF.range=zF;function zF(t,e,r){var n,i,o,s,l,p=r.indexOf(t),f=r.indexOf(e,p+1),d=p;if(p>=0&&f>0){if(t===e)return[p,f];for(n=[],o=r.length;d>=0&&!l;)d==p?(n.push(d),p=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),f]:(i=n.pop(),i<o&&(o=i,s=f),f=r.indexOf(e,d+1)),d=p<f&&p>=0?p:f;n.length&&(l=[o,s])}return l}});var tI=Qa((MOe,eI)=>{var KF=GF();eI.exports=U7;var QF="\0SLASH"+Math.random()+"\0",YF="\0OPEN"+Math.random()+"\0",jv="\0CLOSE"+Math.random()+"\0",ZF="\0COMMA"+Math.random()+"\0",XF="\0PERIOD"+Math.random()+"\0";function $v(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function O7(t){return t.split("\\\\").join(QF).split("\\{").join(YF).split("\\}").join(jv).split("\\,").join(ZF).split("\\.").join(XF)}function L7(t){return t.split(QF).join("\\").split(YF).join("{").split(jv).join("}").split(ZF).join(",").split(XF).join(".")}function JF(t){if(!t)return[""];var e=[],r=KF("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var l=JF(o);return o.length&&(s[s.length-1]+=l.shift(),s.push.apply(s,l)),e.push.apply(e,s),e}function U7(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),xp(O7(t),!0).map(L7)):[]}function H7(t){return"{"+t+"}"}function B7(t){return/^-?0\d/.test(t)}function V7(t,e){return t<=e}function W7(t,e){return t>=e}function xp(t,e){var r=[],n=KF("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?xp(n.post,!1):[""];if(/\$$/.test(n.pre))for(var s=0;s<o.length;s++){var l=i+"{"+n.body+"}"+o[s];r.push(l)}else{var p=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),f=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=p||f,h=n.body.indexOf(",")>=0;if(!d&&!h)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+jv+n.post,xp(t)):[t];var y;if(d)y=n.body.split(/\.\./);else if(y=JF(n.body),y.length===1&&(y=xp(y[0],!1).map(H7),y.length===1))return o.map(function(H){return n.pre+y[0]+H});var T;if(d){var w=$v(y[0]),E=$v(y[1]),U=Math.max(y[0].length,y[1].length),V=y.length==3?Math.abs($v(y[2])):1,j=V7,ne=E<w;ne&&(V*=-1,j=W7);var se=y.some(B7);T=[];for(var ce=w;j(ce,E);ce+=V){var fe;if(f)fe=String.fromCharCode(ce),fe==="\\"&&(fe="");else if(fe=String(ce),se){var pt=U-fe.length;if(pt>0){var Wt=new Array(pt+1).join("0");ce<0?fe="-"+Wt+fe.slice(1):fe=Wt+fe}}T.push(fe)}}else{T=[];for(var dt=0;dt<y.length;dt++)T.push.apply(T,xp(y[dt],!1))}for(var dt=0;dt<T.length;dt++)for(var s=0;s<o.length;s++){var l=i+T[dt]+o[s];(!e||d||l)&&r.push(l)}}return r}});var AY={};V_(AY,{default:()=>KC});module.exports=LB(AY);var Xx="cursorless.command",Iu=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},yt=class extends Iu{constructor(){super(...arguments);this.isVisible=!1}},vt=class extends Iu{constructor(){super(...arguments);this.isVisible=!0}};var MY={"cursorless.toggleDecorations":new vt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new vt("Recompute decoration styles"),"cursorless.recordTestCase":new vt("Record test case"),"cursorless.recordOneTestCaseThenPause":new vt("Record one test case, then pause"),"cursorless.pauseRecording":new vt("Pause test case recording"),"cursorless.resumeRecording":new vt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new vt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new vt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new vt("Show documentation"),"cursorless.showInstallationDependencies":new vt("Show installation dependencies"),"cursorless.showScopeVisualizer":new vt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new vt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new vt("Analyze collected command history"),"cursorless.tutorial.start":new yt("Start a tutorial"),"cursorless.tutorial.next":new vt("Tutorial next"),"cursorless.tutorial.previous":new vt("Tutorial previous"),"cursorless.tutorial.restart":new vt("Tutorial restart"),"cursorless.tutorial.resume":new vt("Tutorial resume"),"cursorless.tutorial.list":new vt("Tutorial list"),"cursorless.documentationOpened":new yt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new yt("The core cursorless command"),"cursorless.repeatPreviousCommand":new vt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new yt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new yt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new yt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new yt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new yt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new yt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new yt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new yt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new yt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new yt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new yt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new yt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new yt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new yt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new yt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new yt("Redo keyboard targeting changes"),"cursorless.migrateSnippets":new yt("Migrate snippets from the old Cursorless format to the new community format")};var Cu=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Nu=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Ou=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},xt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Lu=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var UB=typeof global=="object"&&global&&global.Object===Object&&global,Uu=UB;var HB=typeof self=="object"&&self&&self.Object===Object&&self,BB=Uu||HB||Function("return this")(),Nt=BB;var VB=Nt.Symbol,fr=VB;var $_=Object.prototype,WB=$_.hasOwnProperty,$B=$_.toString,Yc=fr?fr.toStringTag:void 0;function jB(t){var e=WB.call(t,Yc),r=t[Yc];try{t[Yc]=void 0;var n=!0}catch{}var i=$B.call(t);return n&&(e?t[Yc]=r:delete t[Yc]),i}var j_=jB;var zB=Object.prototype,qB=zB.toString;function GB(t){return qB.call(t)}var z_=GB;var KB="[object Null]",QB="[object Undefined]",q_=fr?fr.toStringTag:void 0;function YB(t){return t==null?t===void 0?QB:KB:q_&&q_ in Object(t)?j_(t):z_(t)}var Dn=YB;function ZB(t){return t!=null&&typeof t=="object"}var mr=ZB;var XB="[object Symbol]";function JB(t){return typeof t=="symbol"||mr(t)&&Dn(t)==XB}var Wr=JB;function eV(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var pn=eV;var tV=Array.isArray,Ze=tV;var rV=1/0,G_=fr?fr.prototype:void 0,K_=G_?G_.toString:void 0;function Q_(t){if(typeof t=="string")return t;if(Ze(t))return pn(t,Q_)+"";if(Wr(t))return K_?K_.call(t):"";var e=t+"";return e=="0"&&1/t==-rV?"-0":e}var Y_=Q_;var nV=/\s/;function iV(t){for(var e=t.length;e--&&nV.test(t.charAt(e)););return e}var Z_=iV;var oV=/^\s+/;function aV(t){return t&&t.slice(0,Z_(t)+1).replace(oV,"")}var X_=aV;function sV(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var $r=sV;var J_=NaN,cV=/^[-+]0x[0-9a-f]+$/i,lV=/^0b[01]+$/i,pV=/^0o[0-7]+$/i,uV=parseInt;function fV(t){if(typeof t=="number")return t;if(Wr(t))return J_;if($r(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=$r(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=X_(t);var r=lV.test(t);return r||pV.test(t)?uV(t.slice(2),r?2:8):cV.test(t)?J_:+t}var e0=fV;var t0=1/0,mV=17976931348623157e292;function dV(t){if(!t)return t===0?t:0;if(t=e0(t),t===t0||t===-t0){var e=t<0?-1:1;return e*mV}return t===t?t:0}var Ya=dV;function hV(t){var e=Ya(t),r=e%1;return e===e?r?e-r:e:0}var Hu=hV;function gV(t){return t}var _r=gV;var yV="[object AsyncFunction]",xV="[object Function]",TV="[object GeneratorFunction]",SV="[object Proxy]";function vV(t){if(!$r(t))return!1;var e=Dn(t);return e==xV||e==TV||e==yV||e==SV}var Bu=vV;var bV=Nt["__core-js_shared__"],Vu=bV;var r0=function(){var t=/[^.]+$/.exec(Vu&&Vu.keys&&Vu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function wV(t){return!!r0&&r0 in t}var n0=wV;var EV=Function.prototype,_V=EV.toString;function RV(t){if(t!=null){try{return _V.call(t)}catch{}try{return t+""}catch{}}return""}var wi=RV;var kV=/[\\^$.*+?()[\]{}|]/g,AV=/^\[object .+?Constructor\]$/,PV=Function.prototype,MV=Object.prototype,DV=PV.toString,FV=MV.hasOwnProperty,IV=RegExp("^"+DV.call(FV).replace(kV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function CV(t){if(!$r(t)||n0(t))return!1;var e=Bu(t)?IV:AV;return e.test(wi(t))}var i0=CV;function NV(t,e){return t?.[e]}var o0=NV;function OV(t,e){var r=o0(t,e);return i0(r)?r:void 0}var Rr=OV;var LV=Rr(Nt,"WeakMap"),zo=LV;var UV=zo&&new zo,Jx=UV;var a0=Object.create,HV=function(){function t(){}return function(e){if(!$r(e))return{};if(a0)return a0(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Wu=HV;function BV(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var s0=BV;function VV(){}var Za=VV;var WV=4294967295;function $u(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=WV,this.__views__=[]}$u.prototype=Wu(Za.prototype);$u.prototype.constructor=$u;var Xa=$u;function $V(){}var ju=$V;var jV=Jx?function(t){return Jx.get(t)}:ju,zu=jV;var zV={},eT=zV;var qV=Object.prototype,GV=qV.hasOwnProperty;function KV(t){for(var e=t.name+"",r=eT[e],n=GV.call(eT,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Ja=KV;function qu(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}qu.prototype=Wu(Za.prototype);qu.prototype.constructor=qu;var Zi=qu;function QV(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Xi=QV;function YV(t){if(t instanceof Xa)return t.clone();var e=new Zi(t.__wrapped__,t.__chain__);return e.__actions__=Xi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var c0=YV;var ZV=Object.prototype,XV=ZV.hasOwnProperty;function Gu(t){if(mr(t)&&!Ze(t)&&!(t instanceof Xa)){if(t instanceof Zi)return t;if(XV.call(t,"__wrapped__"))return c0(t)}return new Zi(t)}Gu.prototype=Za.prototype;Gu.prototype.constructor=Gu;var l0=Gu;function JV(t){var e=Ja(t),r=l0[e];if(typeof r!="function"||!(e in Xa.prototype))return!1;if(t===r)return!0;var n=zu(r);return!!n&&t===n[0]}var tT=JV;var eW=800,tW=16,rW=Date.now;function nW(t){var e=0,r=0;return function(){var n=rW(),i=tW-(n-r);if(r=n,i>0){if(++e>=eW)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var p0=nW;function iW(t){return function(){return t}}var u0=iW;var oW=function(){try{var t=Rr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),rT=oW;var aW=rT?function(t,e){return rT(t,"toString",{configurable:!0,enumerable:!1,value:u0(e),writable:!0})}:_r,f0=aW;var sW=p0(f0),Ku=sW;function cW(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Qu=cW;function lW(t){return t!==t}var m0=lW;function pW(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var d0=pW;function uW(t,e,r){return e===e?d0(t,e,r):Qu(t,m0,r)}var Yu=uW;function fW(t,e){var r=t==null?0:t.length;return!!r&&Yu(t,e,0)>-1}var h0=fW;var mW=9007199254740991,dW=/^(?:0|[1-9]\d*)$/;function hW(t,e){var r=typeof t;return e=e??mW,!!e&&(r=="number"||r!="symbol"&&dW.test(t))&&t>-1&&t%1==0&&t<e}var es=hW;function gW(t,e){return t===e||t!==t&&e!==e}var ts=gW;var g0=Math.max;function yW(t,e,r){return e=g0(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=g0(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),s0(t,this,l)}}var Zu=yW;function xW(t,e){return Ku(Zu(t,e,_r),t+"")}var rs=xW;var TW=9007199254740991;function SW(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=TW}var ns=SW;function vW(t){return t!=null&&ns(t.length)&&!Bu(t)}var qn=vW;function bW(t,e,r){if(!$r(r))return!1;var n=typeof e;return(n=="number"?qn(r)&&es(e,r.length):n=="string"&&e in r)?ts(r[e],t):!1}var qo=bW;var wW=Object.prototype;function EW(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||wW;return t===r}var y0=EW;function _W(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Xu=_W;var RW="[object Arguments]";function kW(t){return mr(t)&&Dn(t)==RW}var nT=kW;var x0=Object.prototype,AW=x0.hasOwnProperty,PW=x0.propertyIsEnumerable,MW=nT(function(){return arguments}())?nT:function(t){return mr(t)&&AW.call(t,"callee")&&!PW.call(t,"callee")},is=MW;function DW(){return!1}var T0=DW;var b0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,S0=b0&&typeof module=="object"&&module&&!module.nodeType&&module,FW=S0&&S0.exports===b0,v0=FW?Nt.Buffer:void 0,IW=v0?v0.isBuffer:void 0,CW=IW||T0,Zc=CW;var NW="[object Arguments]",OW="[object Array]",LW="[object Boolean]",UW="[object Date]",HW="[object Error]",BW="[object Function]",VW="[object Map]",WW="[object Number]",$W="[object Object]",jW="[object RegExp]",zW="[object Set]",qW="[object String]",GW="[object WeakMap]",KW="[object ArrayBuffer]",QW="[object DataView]",YW="[object Float32Array]",ZW="[object Float64Array]",XW="[object Int8Array]",JW="[object Int16Array]",e$="[object Int32Array]",t$="[object Uint8Array]",r$="[object Uint8ClampedArray]",n$="[object Uint16Array]",i$="[object Uint32Array]",it={};it[YW]=it[ZW]=it[XW]=it[JW]=it[e$]=it[t$]=it[r$]=it[n$]=it[i$]=!0;it[NW]=it[OW]=it[KW]=it[LW]=it[QW]=it[UW]=it[HW]=it[BW]=it[VW]=it[WW]=it[$W]=it[jW]=it[zW]=it[qW]=it[GW]=!1;function o$(t){return mr(t)&&ns(t.length)&&!!it[Dn(t)]}var w0=o$;function a$(t){return function(e){return t(e)}}var os=a$;var E0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Xc=E0&&typeof module=="object"&&module&&!module.nodeType&&module,s$=Xc&&Xc.exports===E0,iT=s$&&Uu.process,c$=function(){try{var t=Xc&&Xc.require&&Xc.require("util").types;return t||iT&&iT.binding&&iT.binding("util")}catch{}}(),oT=c$;var _0=oT&&oT.isTypedArray,l$=_0?os(_0):w0,Ju=l$;var p$=Object.prototype,u$=p$.hasOwnProperty;function f$(t,e){var r=Ze(t),n=!r&&is(t),i=!r&&!n&&Zc(t),o=!r&&!n&&!i&&Ju(t),s=r||n||i||o,l=s?Xu(t.length,String):[],p=l.length;for(var f in t)(e||u$.call(t,f))&&!(s&&(f=="length"||i&&(f=="offset"||f=="parent")||o&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||es(f,p)))&&l.push(f);return l}var R0=f$;function m$(t,e){return function(r){return t(e(r))}}var k0=m$;var d$=k0(Object.keys,Object),A0=d$;var h$=Object.prototype,g$=h$.hasOwnProperty;function y$(t){if(!y0(t))return A0(t);var e=[];for(var r in Object(t))g$.call(t,r)&&r!="constructor"&&e.push(r);return e}var P0=y$;function x$(t){return qn(t)?R0(t):P0(t)}var Ji=x$;var T$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,S$=/^\w*$/;function v$(t,e){if(Ze(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Wr(t)?!0:S$.test(t)||!T$.test(t)||e!=null&&t in Object(e)}var as=v$;var b$=Rr(Object,"create"),Ei=b$;function w$(){this.__data__=Ei?Ei(null):{},this.size=0}var M0=w$;function E$(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var D0=E$;var _$="__lodash_hash_undefined__",R$=Object.prototype,k$=R$.hasOwnProperty;function A$(t){var e=this.__data__;if(Ei){var r=e[t];return r===_$?void 0:r}return k$.call(e,t)?e[t]:void 0}var F0=A$;var P$=Object.prototype,M$=P$.hasOwnProperty;function D$(t){var e=this.__data__;return Ei?e[t]!==void 0:M$.call(e,t)}var I0=D$;var F$="__lodash_hash_undefined__";function I$(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Ei&&e===void 0?F$:e,this}var C0=I$;function ss(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ss.prototype.clear=M0;ss.prototype.delete=D0;ss.prototype.get=F0;ss.prototype.has=I0;ss.prototype.set=C0;var aT=ss;function C$(){this.__data__=[],this.size=0}var N0=C$;function N$(t,e){for(var r=t.length;r--;)if(ts(t[r][0],e))return r;return-1}var eo=N$;var O$=Array.prototype,L$=O$.splice;function U$(t){var e=this.__data__,r=eo(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():L$.call(e,r,1),--this.size,!0}var O0=U$;function H$(t){var e=this.__data__,r=eo(e,t);return r<0?void 0:e[r][1]}var L0=H$;function B$(t){return eo(this.__data__,t)>-1}var U0=B$;function V$(t,e){var r=this.__data__,n=eo(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var H0=V$;function cs(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}cs.prototype.clear=N0;cs.prototype.delete=O0;cs.prototype.get=L0;cs.prototype.has=U0;cs.prototype.set=H0;var to=cs;var W$=Rr(Nt,"Map"),ro=W$;function $$(){this.size=0,this.__data__={hash:new aT,map:new(ro||to),string:new aT}}var B0=$$;function j$(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var V0=j$;function z$(t,e){var r=t.__data__;return V0(e)?r[typeof e=="string"?"string":"hash"]:r.map}var no=z$;function q$(t){var e=no(this,t).delete(t);return this.size-=e?1:0,e}var W0=q$;function G$(t){return no(this,t).get(t)}var $0=G$;function K$(t){return no(this,t).has(t)}var j0=K$;function Q$(t,e){var r=no(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var z0=Q$;function ls(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ls.prototype.clear=B0;ls.prototype.delete=W0;ls.prototype.get=$0;ls.prototype.has=j0;ls.prototype.set=z0;var Go=ls;var Y$="Expected a function";function sT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Y$);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(sT.Cache||Go),r}sT.Cache=Go;var Jc=sT;var Z$=500;function X$(t){var e=Jc(t,function(n){return r.size===Z$&&r.clear(),n}),r=e.cache;return e}var q0=X$;var J$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ej=/\\(\\)?/g,tj=q0(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(J$,function(r,n,i,o){e.push(i?o.replace(ej,"$1"):n||r)}),e}),G0=tj;function rj(t){return t==null?"":Y_(t)}var Fn=rj;function nj(t,e){return Ze(t)?t:as(t,e)?[t]:G0(Fn(t))}var ef=nj;var ij=1/0;function oj(t){if(typeof t=="string"||Wr(t))return t;var e=t+"";return e=="0"&&1/t==-ij?"-0":e}var io=oj;function aj(t,e){e=ef(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[io(e[r++])];return r&&r==n?t:void 0}var ps=aj;function sj(t,e,r){var n=t==null?void 0:ps(t,e);return n===void 0?r:n}var Ko=sj;function cj(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var us=cj;var K0=fr?fr.isConcatSpreadable:void 0;function lj(t){return Ze(t)||is(t)||!!(K0&&t&&t[K0])}var Q0=lj;function Y0(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=Q0),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?Y0(l,e-1,r,n,i):us(i,l):n||(i[i.length]=l)}return i}var fs=Y0;function pj(t){var e=t==null?0:t.length;return e?fs(t,1):[]}var ot=pj;function uj(t){return Ku(Zu(t,void 0,ot),t+"")}var Z0=uj;function fj(t){return function(e){return t?.[e]}}var X0=fj;var mj={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},dj=X0(mj),J0=dj;var hj=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gj="\\u0300-\\u036f",yj="\\ufe20-\\ufe2f",xj="\\u20d0-\\u20ff",Tj=gj+yj+xj,Sj="["+Tj+"]",vj=RegExp(Sj,"g");function bj(t){return t=Fn(t),t&&t.replace(hj,J0).replace(vj,"")}var cT=bj;function wj(){this.__data__=new to,this.size=0}var eR=wj;function Ej(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var tR=Ej;function _j(t){return this.__data__.get(t)}var rR=_j;function Rj(t){return this.__data__.has(t)}var nR=Rj;var kj=200;function Aj(t,e){var r=this.__data__;if(r instanceof to){var n=r.__data__;if(!ro||n.length<kj-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Go(n)}return r.set(t,e),this.size=r.size,this}var iR=Aj;function ms(t){var e=this.__data__=new to(t);this.size=e.size}ms.prototype.clear=eR;ms.prototype.delete=tR;ms.prototype.get=rR;ms.prototype.has=nR;ms.prototype.set=iR;var ds=ms;function Pj(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var tf=Pj;function Mj(){return[]}var oR=Mj;var Dj=Object.prototype,Fj=Dj.propertyIsEnumerable,aR=Object.getOwnPropertySymbols,Ij=aR?function(t){return t==null?[]:(t=Object(t),tf(aR(t),function(e){return Fj.call(t,e)}))}:oR,sR=Ij;function Cj(t,e,r){var n=e(t);return Ze(t)?n:us(n,r(t))}var cR=Cj;function Nj(t){return cR(t,Ji,sR)}var lT=Nj;var Oj=Rr(Nt,"DataView"),rf=Oj;var Lj=Rr(Nt,"Promise"),nf=Lj;var Uj=Rr(Nt,"Set"),oo=Uj;var lR="[object Map]",Hj="[object Object]",pR="[object Promise]",uR="[object Set]",fR="[object WeakMap]",mR="[object DataView]",Bj=wi(rf),Vj=wi(ro),Wj=wi(nf),$j=wi(oo),jj=wi(zo),Qo=Dn;(rf&&Qo(new rf(new ArrayBuffer(1)))!=mR||ro&&Qo(new ro)!=lR||nf&&Qo(nf.resolve())!=pR||oo&&Qo(new oo)!=uR||zo&&Qo(new zo)!=fR)&&(Qo=function(t){var e=Dn(t),r=e==Hj?t.constructor:void 0,n=r?wi(r):"";if(n)switch(n){case Bj:return mR;case Vj:return lR;case Wj:return pR;case $j:return uR;case jj:return fR}return e});var pT=Qo;var zj=Nt.Uint8Array,uT=zj;function qj(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return us(Ze(r)?Xi(r):[r],fs(e,1))}var el=qj;var Gj="__lodash_hash_undefined__";function Kj(t){return this.__data__.set(t,Gj),this}var dR=Kj;function Qj(t){return this.__data__.has(t)}var hR=Qj;function of(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Go;++e<r;)this.add(t[e])}of.prototype.add=of.prototype.push=dR;of.prototype.has=hR;var af=of;function Yj(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var gR=Yj;function Zj(t,e){return t.has(e)}var sf=Zj;var Xj=1,Jj=2;function e3(t,e,r,n,i,o){var s=r&Xj,l=t.length,p=e.length;if(l!=p&&!(s&&p>l))return!1;var f=o.get(t),d=o.get(e);if(f&&d)return f==e&&d==t;var h=-1,y=!0,T=r&Jj?new af:void 0;for(o.set(t,e),o.set(e,t);++h<l;){var w=t[h],E=e[h];if(n)var U=s?n(E,w,h,e,t,o):n(w,E,h,t,e,o);if(U!==void 0){if(U)continue;y=!1;break}if(T){if(!gR(e,function(V,j){if(!sf(T,j)&&(w===V||i(w,V,r,n,o)))return T.push(j)})){y=!1;break}}else if(!(w===E||i(w,E,r,n,o))){y=!1;break}}return o.delete(t),o.delete(e),y}var cf=e3;function t3(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var yR=t3;function r3(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var hs=r3;var n3=1,i3=2,o3="[object Boolean]",a3="[object Date]",s3="[object Error]",c3="[object Map]",l3="[object Number]",p3="[object RegExp]",u3="[object Set]",f3="[object String]",m3="[object Symbol]",d3="[object ArrayBuffer]",h3="[object DataView]",xR=fr?fr.prototype:void 0,fT=xR?xR.valueOf:void 0;function g3(t,e,r,n,i,o,s){switch(r){case h3:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case d3:return!(t.byteLength!=e.byteLength||!o(new uT(t),new uT(e)));case o3:case a3:case l3:return ts(+t,+e);case s3:return t.name==e.name&&t.message==e.message;case p3:case f3:return t==e+"";case c3:var l=yR;case u3:var p=n&n3;if(l||(l=hs),t.size!=e.size&&!p)return!1;var f=s.get(t);if(f)return f==e;n|=i3,s.set(t,e);var d=cf(l(t),l(e),n,i,o,s);return s.delete(t),d;case m3:if(fT)return fT.call(t)==fT.call(e)}return!1}var TR=g3;var y3=1,x3=Object.prototype,T3=x3.hasOwnProperty;function S3(t,e,r,n,i,o){var s=r&y3,l=lT(t),p=l.length,f=lT(e),d=f.length;if(p!=d&&!s)return!1;for(var h=p;h--;){var y=l[h];if(!(s?y in e:T3.call(e,y)))return!1}var T=o.get(t),w=o.get(e);if(T&&w)return T==e&&w==t;var E=!0;o.set(t,e),o.set(e,t);for(var U=s;++h<p;){y=l[h];var V=t[y],j=e[y];if(n)var ne=s?n(j,V,y,e,t,o):n(V,j,y,t,e,o);if(!(ne===void 0?V===j||i(V,j,r,n,o):ne)){E=!1;break}U||(U=y=="constructor")}if(E&&!U){var se=t.constructor,ce=e.constructor;se!=ce&&"constructor"in t&&"constructor"in e&&!(typeof se=="function"&&se instanceof se&&typeof ce=="function"&&ce instanceof ce)&&(E=!1)}return o.delete(t),o.delete(e),E}var SR=S3;var v3=1,vR="[object Arguments]",bR="[object Array]",lf="[object Object]",b3=Object.prototype,wR=b3.hasOwnProperty;function w3(t,e,r,n,i,o){var s=Ze(t),l=Ze(e),p=s?bR:pT(t),f=l?bR:pT(e);p=p==vR?lf:p,f=f==vR?lf:f;var d=p==lf,h=f==lf,y=p==f;if(y&&Zc(t)){if(!Zc(e))return!1;s=!0,d=!1}if(y&&!d)return o||(o=new ds),s||Ju(t)?cf(t,e,r,n,i,o):TR(t,e,p,r,n,i,o);if(!(r&v3)){var T=d&&wR.call(t,"__wrapped__"),w=h&&wR.call(e,"__wrapped__");if(T||w){var E=T?t.value():t,U=w?e.value():e;return o||(o=new ds),i(E,U,r,n,o)}}return y?(o||(o=new ds),SR(t,e,r,n,i,o)):!1}var ER=w3;function _R(t,e,r,n,i){return t===e?!0:t==null||e==null||!mr(t)&&!mr(e)?t!==t&&e!==e:ER(t,e,r,n,_R,i)}var gs=_R;var E3=1,_3=2;function R3(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var p=l[0],f=t[p],d=l[1];if(s&&l[2]){if(f===void 0&&!(p in t))return!1}else{var h=new ds;if(n)var y=n(f,d,p,t,e,h);if(!(y===void 0?gs(d,f,E3|_3,n,h):y))return!1}}return!0}var RR=R3;function k3(t){return t===t&&!$r(t)}var pf=k3;function A3(t){for(var e=Ji(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,pf(i)]}return e}var kR=A3;function P3(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var uf=P3;function M3(t){var e=kR(t);return e.length==1&&e[0][2]?uf(e[0][0],e[0][1]):function(r){return r===t||RR(r,t,e)}}var AR=M3;function D3(t,e){return t!=null&&e in Object(t)}var PR=D3;function F3(t,e,r){e=ef(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=io(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&ns(i)&&es(s,i)&&(Ze(t)||is(t)))}var MR=F3;function I3(t,e){return t!=null&&MR(t,e,PR)}var DR=I3;var C3=1,N3=2;function O3(t,e){return as(t)&&pf(e)?uf(io(t),e):function(r){var n=Ko(r,t);return n===void 0&&n===e?DR(r,t):gs(e,n,C3|N3)}}var FR=O3;function L3(t){return function(e){return e?.[t]}}var ff=L3;function U3(t){return function(e){return ps(e,t)}}var IR=U3;function H3(t){return as(t)?ff(io(t)):IR(t)}var CR=H3;function B3(t){return typeof t=="function"?t:t==null?_r:typeof t=="object"?Ze(t)?FR(t[0],t[1]):AR(t):CR(t)}var ao=B3;function V3(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),l=s.length;l--;){var p=s[t?l:++i];if(r(o[p],p,o)===!1)break}return e}}var NR=V3;var W3=NR(),OR=W3;function $3(t,e){return t&&OR(t,e,Ji)}var LR=$3;function j3(t,e){return function(r,n){if(r==null)return r;if(!qn(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var UR=j3;var z3=UR(LR),HR=z3;function q3(t){return mr(t)&&qn(t)}var BR=q3;function G3(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var VR=G3;function K3(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var mf=K3;var WR=/[\\^$.*+?()[\]{}|]/g,Q3=RegExp(WR.source);function Y3(t){return t=Fn(t),t&&Q3.test(t)?t.replace(WR,"\\$&"):t}var jr=Y3;var Z3=Math.max,X3=Math.min;function J3(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=Hu(r),i=r<0?Z3(n+i,0):X3(i,n-1)),Qu(t,ao(e,3),i,!0)}var Yo=J3;function ez(t,e){var r=-1,n=qn(t)?Array(t.length):[];return HR(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var $R=ez;var tz="Expected a function",rz=8,nz=32,iz=128,oz=256;function az(t){return Z0(function(e){var r=e.length,n=r,i=Zi.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(tz);if(i&&!s&&Ja(o)=="wrapper")var s=new Zi([],!0)}for(n=s?n:r;++n<r;){o=e[n];var l=Ja(o),p=l=="wrapper"?zu(o):void 0;p&&tT(p[0])&&p[1]==(iz|rz|nz|oz)&&!p[4].length&&p[9]==1?s=s[Ja(p[0])].apply(s,p[3]):s=o.length==1&&tT(o)?s[l]():s.thru(o)}return function(){var f=arguments,d=f[0];if(s&&f.length==1&&Ze(d))return s.plant(d).value();for(var h=0,y=r?e[h].apply(this,f):d;++h<r;)y=e[h].call(this,y);return y}})}var jR=az;var sz=jR(),mT=sz;function cz(t,e){return t>e}var zR=cz;function lz(t,e){return pn(e,function(r){return t[r]})}var qR=lz;function pz(t){return t==null?[]:qR(t,Ji(t))}var GR=pz;function uz(t,e){return gs(t,e)}var _i=uz;function fz(t,e){return t<e}var KR=fz;function mz(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(l===void 0?s===s&&!Wr(s):r(s,l)))var l=s,p=o}return p}var df=mz;function dz(t,e){return t&&t.length?df(t,ao(e,2),zR):void 0}var dT=dz;function hz(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var QR=hz;function gz(t){return t&&t.length?df(t,_r,KR):void 0}var hT=gz;function yz(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var YR=yz;function xz(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Wr(t),s=e!==void 0,l=e===null,p=e===e,f=Wr(e);if(!l&&!f&&!o&&t>e||o&&s&&p&&!l&&!f||n&&s&&p||!r&&p||!i)return 1;if(!n&&!o&&!f&&t<e||f&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!p)return-1}return 0}var ZR=xz;function Tz(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;++n<s;){var p=ZR(i[n],o[n]);if(p){if(n>=l)return p;var f=r[n];return p*(f=="desc"?-1:1)}}return t.index-e.index}var XR=Tz;function Sz(t,e,r){e.length?e=pn(e,function(o){return Ze(o)?function(s){return ps(s,o.length===1?o[0]:o)}:o}):e=[_r];var n=-1;e=pn(e,os(ao));var i=$R(t,function(o,s,l){var p=pn(e,function(f){return f(o)});return{criteria:p,index:++n,value:o}});return YR(i,function(o,s){return XR(o,s,r)})}var JR=Sz;var vz=9007199254740991,bz=Math.floor;function wz(t,e){var r="";if(!t||e<1||e>vz)return r;do e%2&&(r+=t),e=bz(e/2),e&&(t+=t);while(e);return r}var ek=wz;function Ez(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var tk=Ez;var _z=Array.prototype,rk=_z.splice;function Rz(t,e,r,n){var i=n?tk:Yu,o=-1,s=e.length,l=t;for(t===e&&(e=Xi(e)),r&&(l=pn(t,os(r)));++o<s;)for(var p=0,f=e[o],d=r?r(f):f;(p=i(l,d,p,n))>-1;)l!==t&&rk.call(l,p,1),rk.call(t,p,1);return t}var nk=Rz;function kz(t,e){return t&&t.length&&e&&e.length?nk(t,e):t}var ik=kz;var Az=rs(ik),dr=Az;var Pz=Math.floor,Mz=Math.random;function Dz(t,e){return t+Pz(Mz()*(e-t+1))}var ok=Dz;var Fz=Math.ceil,Iz=Math.max;function Cz(t,e,r,n){for(var i=-1,o=Iz(Fz((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var ak=Cz;function Nz(t){return function(e,r,n){return n&&typeof n!="number"&&qo(e,r,n)&&(r=n=void 0),e=Ya(e),r===void 0?(r=e,e=0):r=Ya(r),n=n===void 0?e<r?1:-1:Ya(n),ak(e,r,n,t)}}var sk=Nz;var Oz=sk(),gT=Oz;function Lz(t,e,r){return(r?qo(t,e,r):e===void 0)?e=1:e=Hu(e),ek(Fn(t),e)}var yT=Lz;function Uz(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=ok(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var hf=Uz;function Hz(t){return hf(Xi(t))}var ck=Hz;function Bz(t){return hf(GR(t))}var lk=Bz;function Vz(t){var e=Ze(t)?ck:lk;return e(t)}var xT=Vz;var Wz=rs(function(t,e){if(t==null)return[];var r=e.length;return r>1&&qo(t,e[0],e[1])?e=[]:r>2&&qo(e[0],e[1],e[2])&&(e=[e[0]]),JR(t,fs(e,1),[])}),TT=Wz;function $z(t,e){return t&&t.length?QR(t,ao(e,2)):0}var gf=$z;var jz=1/0,zz=oo&&1/hs(new oo([,-0]))[1]==jz?function(t){return new oo(t)}:ju,pk=zz;var qz=200;function Gz(t,e,r){var n=-1,i=h0,o=t.length,s=!0,l=[],p=l;if(r)s=!1,i=VR;else if(o>=qz){var f=e?null:pk(t);if(f)return hs(f);s=!1,i=sf,p=new af}else p=e?[]:l;e:for(;++n<o;){var d=t[n],h=e?e(d):d;if(d=r||d!==0?d:0,s&&h===h){for(var y=p.length;y--;)if(p[y]===h)continue e;e&&p.push(h),l.push(d)}else i(p,h,r)||(p!==l&&p.push(h),l.push(d))}return l}var yf=Gz;function Kz(t){return t&&t.length?yf(t):[]}var Zo=Kz;function Qz(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?yf(t,void 0,e):[]}var tl=Qz;var Yz=Math.max;function Zz(t){if(!(t&&t.length))return[];var e=0;return t=tf(t,function(r){if(BR(r))return e=Yz(r.length,e),!0}),Xu(e,function(r){return pn(t,ff(r))})}var uk=Zz;var Xz=rs(uk),Mt=Xz;var xf=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0}}};var rl=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var tr=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{dr(this.listeners,e)}}}};var Tf={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var nl=class{constructor(){this.notifier=new tr;this.mocks={...Tf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(eq(n,r))return Ko(i,e)??Ko(this.mocks,e)}return Ko(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function eq(t,e){return t.languageId===e.languageId}var Sf={hideInferenceWarning:!1,tutorialProgress:{}};var il=class{constructor(){this.data={...Sf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var ol=class{async showMessage(e,r,n,...i){}};var vf=class{constructor(){this.configuration=new nl;this.messages=new ol;this.keyValueStore=new il;this.clipboard=new rl;this.capabilities=new xf;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=ys;this.onDidCloseTextDocument=ys;this.onDidChangeActiveTextEditor=ys;this.onDidChangeVisibleTextEditors=ys;this.onDidChangeTextEditorSelection=ys;this.onDidChangeTextEditorVisibleRanges=ys}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>dr(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function ys(){return{dispose(){}}}var de=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new Y(this,this)}concise(){return`${this.line}:${this.character}`}conciseOneBased(){return`${this.line+1}:${this.character+1}`}toString(){return this.concise()}};function fk(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var Y=class t{constructor(...e){let[r,n]=e.length===2?e:[new de(e[0],e[1]),new de(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof de?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new Pe(this.end,this.start):new Pe(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}-${this.end.conciseOneBased()}`}toString(){return`${this.start.concise()}-${this.end.concise()}`}};function tq(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function rq(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function mk(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var bf=mk(tq),wf=mk(rq);function ST(t,e){return e.lastIndex=0,t.matchAll(e)}function un(t,e,r){return Array.from(ST(t,e),r)}function Xo(t,e){return t.lastIndex=0,t.test(e)}function dk(t,e){return t.lastIndex=0,e.match(t)}function al(t,e){return un(t,e,r=>({index:r.index,text:r[0]}))}var xs=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var Ef=class extends xs{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function Jo(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function ft(t,e,r,...n){return t.showMessage("error",e,r,...n)}var le=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(le||{});var{supported:st,unsupported:uce,notApplicable:hk}=le,vT={ifStatement:st,disqualifyDelimiter:st,"comment.line":st,"comment.block":st,"string.singleLine":st,"textFragment.comment.line":st,"textFragment.comment.block":st,"textFragment.string.singleLine":st,class:st,className:st,namedFunction:st,"name.function":st,"name.class":st,"name.field":st,functionName:st,"name.argument.formal":st,"name.argument.formal.iteration":st,"name.variable":st,"value.variable":st,"name.assignment":st,"value.assignment":st,"statement.class":st,"type.class":st,"type.field":st,"value.argument.formal":hk,"value.argument.formal.iteration":hk};var{supported:dce,unsupported:hce,notApplicable:gce}=le;var{supported:gk,unsupported:Sce,notApplicable:vce}=le,nq={...vT,"value.argument.formal":gk,"value.argument.formal.iteration":gk};var{supported:Ece,notApplicable:_ce}=le;var{supported:Et,notApplicable:L}=le,bT={"comment.block":Et,"string.singleLine":Et,disqualifyDelimiter:Et,map:Et,functionCall:Et,functionCallee:Et,"argument.actual":Et,"argument.actual.iteration":Et,"name.iteration.document":Et,"name.iteration.block":Et,"textFragment.comment.block":Et,"textFragment.string.singleLine":Et,"key.mapPair":Et,"key.mapPair.iteration":Et,"value.mapPair":Et,"value.mapPair.iteration":Et,"collectionItem.unenclosed":Et,"collectionItem.unenclosed.iteration":Et,statement:Et,"statement.iteration.document":Et,anonymousFunction:L,"argument.actual.constructor.iteration":L,"argument.actual.constructor":L,"argument.actual.method.iteration":L,"argument.actual.method":L,"argument.formal.constructor.iteration":L,"argument.formal.constructor":L,"argument.formal.iteration":L,"argument.formal.method.iteration":L,"argument.formal.method":L,"argument.formal":L,"argument.formal.lambda":L,"argument.formal.lambda.iteration":L,"argumentList.formal":L,"argumentList.formal.method":L,"argumentList.formal.constructor":L,"argumentList.formal.lambda":L,attribute:L,"branch.if.iteration":L,"branch.if":L,"branch.loop":L,"branch.switchCase.iteration":L,"branch.switchCase":L,"branch.ternary":L,"branch.try.iteration":L,"branch.try":L,"class.iteration.block":L,"class.iteration.document":L,class:L,"className.iteration.block":L,"className.iteration.document":L,className:L,command:L,"comment.line":L,"condition.doWhile":L,"condition.for":L,"condition.if":L,"condition.switchCase.iteration":L,"condition.switchCase":L,"condition.ternary":L,"condition.while":L,element:L,endTag:L,environment:L,fieldAccess:L,"functionCall.constructor":L,"functionCallee.constructor":L,"functionName.constructor":L,"functionName.iteration.block":L,"functionName.iteration.document":L,"functionName.method.iteration.class":L,"functionName.method":L,functionName:L,ifStatement:L,"interior.cell":L,"interior.class":L,"interior.command":L,"interior.element":L,"interior.function":L,"interior.if":L,"interior.lambda":L,"interior.loop":L,"interior.resource":L,"interior.switchCase":L,"interior.ternary":L,"interior.try":L,"key.attribute":L,list:L,"name.argument.actual.iteration":L,"name.argument.actual":L,"name.argument.formal.constructor.iteration":L,"name.argument.formal.constructor":L,"name.argument.formal.iteration":L,"name.argument.formal.method.iteration":L,"name.argument.formal.method":L,"name.argument.formal":L,"name.assignment.pattern":L,"name.assignment":L,"name.class":L,"name.constructor":L,"name.field":L,"name.foreach":L,"name.function":L,"name.method":L,"name.resource.iteration":L,"name.resource":L,"name.variable.pattern":L,"name.variable":L,"namedFunction.constructor":L,"namedFunction.iteration.block":L,"namedFunction.iteration.document":L,"namedFunction.method.iteration.class":L,"namedFunction.method":L,namedFunction:L,notebookCell:L,pairDelimiter:L,regularExpression:L,"section.iteration.document":L,"section.iteration.parent":L,section:L,startTag:L,"statement.iteration.block":L,"statement.class":L,"string.multiLine":L,switchStatementSubject:L,tags:L,"textFragment.comment.line":L,"textFragment.element":L,"textFragment.string.multiLine":L,"type.alias":L,"type.argument.formal.constructor.iteration":L,"type.argument.formal.constructor":L,"type.argument.formal.iteration":L,"type.argument.formal.method.iteration":L,"type.argument.formal.method":L,"type.argument.formal":L,"type.cast":L,"type.class":L,"type.enum":L,"type.field.iteration":L,"type.field":L,"type.foreach":L,"type.interface":L,"type.resource":L,"type.resource.iteration":L,"type.return":L,"type.typeArgument.iteration":L,"type.typeArgument":L,"type.variable":L,"value.argument.actual.iteration":L,"value.argument.actual":L,"value.argument.formal.constructor.iteration":L,"value.argument.formal.constructor":L,"value.argument.formal.iteration":L,"value.argument.formal.method.iteration":L,"value.argument.formal.method":L,"value.argument.formal":L,"value.assignment":L,"value.attribute":L,"value.field":L,"value.foreach":L,"value.resource.iteration":L,"value.resource":L,"value.return.lambda":L,"value.return":L,"value.typeAlias":L,"value.variable.pattern":L,"value.variable":L,"value.yield":L};var{supported:Mce,unsupported:Dce,notApplicable:Fce}=le;var{supported:Nce,unsupported:Oce,notApplicable:Lce}=le;var{supported:Bce,notApplicable:Vce}=le;var{supported:jce,unsupported:zce,notApplicable:qce}=le;var{supported:q,unsupported:so,notApplicable:_e}=le,wT={list:q,map:q,regularExpression:q,switchStatementSubject:q,fieldAccess:q,disqualifyDelimiter:q,pairDelimiter:q,"collectionItem.unenclosed":q,"collectionItem.unenclosed.iteration":q,"textFragment.string.singleLine":q,"textFragment.string.multiLine":q,"textFragment.comment.line":q,"textFragment.comment.block":q,ifStatement:q,statement:q,"statement.iteration.document":q,"statement.iteration.block":q,"statement.class":q,class:q,"class.iteration.document":q,className:q,"className.iteration.document":q,anonymousFunction:q,namedFunction:q,"namedFunction.iteration.document":q,"namedFunction.method":q,"namedFunction.method.iteration.class":q,"namedFunction.constructor":q,functionName:q,"functionName.iteration.document":q,"functionName.method":q,"functionName.method.iteration.class":q,"functionName.constructor":q,functionCall:q,"functionCall.constructor":q,functionCallee:q,"functionCallee.constructor":q,"argument.actual":q,"argument.actual.iteration":q,"argument.actual.method":q,"argument.actual.method.iteration":q,"argument.actual.constructor":q,"argument.actual.constructor.iteration":q,"argument.formal":q,"argument.formal.iteration":q,"argument.formal.method":q,"argument.formal.method.iteration":q,"argument.formal.constructor":q,"argument.formal.constructor.iteration":q,"argument.formal.lambda":q,"argument.formal.lambda.iteration":q,"argumentList.formal":q,"argumentList.formal.method":q,"argumentList.formal.constructor":q,"argumentList.formal.lambda":q,"comment.line":q,"comment.block":q,"string.singleLine":q,"string.multiLine":q,"branch.if":q,"branch.if.iteration":q,"branch.try":q,"branch.try.iteration":q,"branch.switchCase":q,"branch.switchCase.iteration":q,"branch.ternary":q,"branch.loop":q,"condition.if":q,"condition.while":q,"condition.doWhile":q,"condition.for":q,"condition.ternary":q,"condition.switchCase":q,"condition.switchCase.iteration":q,"name.argument.formal":q,"name.argument.formal.iteration":q,"name.argument.formal.method":q,"name.argument.formal.method.iteration":q,"name.argument.formal.constructor":q,"name.argument.formal.constructor.iteration":q,"name.foreach":q,"name.assignment":q,"name.assignment.pattern":q,"name.variable":q,"name.variable.pattern":q,"name.function":q,"name.method":q,"name.constructor":q,"name.class":q,"name.field":q,"name.iteration.document":q,"name.iteration.block":q,"key.mapPair":q,"key.mapPair.iteration":q,"value.argument.formal":q,"value.argument.formal.iteration":q,"value.argument.formal.method":q,"value.argument.formal.method.iteration":q,"value.argument.formal.constructor":q,"value.argument.formal.constructor.iteration":q,"value.mapPair":q,"value.mapPair.iteration":q,"value.assignment":q,"value.variable":q,"value.variable.pattern":q,"value.foreach":q,"value.return":q,"value.return.lambda":q,"value.field":q,"value.yield":q,"type.class":q,"interior.class":so,"interior.function":so,"interior.if":so,"interior.lambda":so,"interior.loop":so,"interior.switchCase":so,"interior.ternary":so,"interior.try":so,"class.iteration.block":_e,"className.iteration.block":_e,"functionName.iteration.block":_e,"interior.cell":_e,"interior.command":_e,"interior.resource":_e,"name.argument.actual.iteration":_e,"name.argument.actual":_e,"name.resource.iteration":_e,"name.resource":_e,"namedFunction.iteration.block":_e,"section.iteration.document":_e,"section.iteration.parent":_e,"textFragment.element":_e,"type.resource.iteration":_e,"type.resource":_e,"value.argument.actual.iteration":_e,"value.argument.actual":_e,"value.resource.iteration":_e,"value.resource":_e,command:_e,environment:_e,notebookCell:_e,section:_e},ET={element:q,tags:q,startTag:q,endTag:q,attribute:q,"key.attribute":q,"value.attribute":q,"interior.element":q},_T={...wT,...ET,"value.typeAlias":_e,"type.alias":_e,"type.argument.formal.constructor.iteration":_e,"type.argument.formal.constructor":_e,"type.argument.formal.iteration":_e,"type.argument.formal.method.iteration":_e,"type.argument.formal.method":_e,"type.argument.formal":_e,"type.cast":_e,"type.enum":_e,"type.field.iteration":_e,"type.field":_e,"type.foreach":_e,"type.interface":_e,"type.return":_e,"type.typeArgument.iteration":_e,"type.typeArgument":_e,"type.variable":_e};var{supported:iq,unsupported:Xce,notApplicable:Jce}=le,oq={..._T,"textFragment.element":iq};var{supported:fn,notApplicable:C}=le,sl={list:fn,map:fn,"string.singleLine":fn,"key.mapPair.iteration":fn,"key.mapPair":fn,"value.mapPair.iteration":fn,"value.mapPair":fn,"comment.block":fn,"comment.line":fn,"textFragment.comment.block":fn,"textFragment.comment.line":fn,"textFragment.string.singleLine":fn,anonymousFunction:C,"argument.actual":C,"argument.actual.constructor":C,"argument.actual.constructor.iteration":C,"argument.actual.iteration":C,"argument.actual.method":C,"argument.actual.method.iteration":C,"argument.formal":C,"argument.formal.constructor":C,"argument.formal.constructor.iteration":C,"argument.formal.iteration":C,"argument.formal.method":C,"argument.formal.method.iteration":C,"argument.formal.lambda":C,"argument.formal.lambda.iteration":C,"argumentList.formal":C,"argumentList.formal.method":C,"argumentList.formal.constructor":C,"argumentList.formal.lambda":C,attribute:C,"branch.if":C,"branch.if.iteration":C,"branch.loop":C,"branch.switchCase":C,"branch.switchCase.iteration":C,"branch.ternary":C,"branch.try":C,"branch.try.iteration":C,class:C,"class.iteration.block":C,"class.iteration.document":C,className:C,"className.iteration.block":C,"className.iteration.document":C,"collectionItem.unenclosed":C,"collectionItem.unenclosed.iteration":C,command:C,"condition.doWhile":C,"condition.for":C,"condition.if":C,"condition.switchCase":C,"condition.switchCase.iteration":C,"condition.ternary":C,"condition.while":C,disqualifyDelimiter:C,element:C,endTag:C,environment:C,fieldAccess:C,functionCall:C,"functionCall.constructor":C,functionCallee:C,"functionCallee.constructor":C,functionName:C,"functionName.constructor":C,"functionName.iteration.block":C,"functionName.iteration.document":C,"functionName.method":C,"functionName.method.iteration.class":C,ifStatement:C,"interior.cell":C,"interior.class":C,"interior.command":C,"interior.element":C,"interior.function":C,"interior.if":C,"interior.lambda":C,"interior.loop":C,"interior.resource":C,"interior.switchCase":C,"interior.ternary":C,"interior.try":C,"key.attribute":C,"name.argument.actual":C,"name.argument.actual.iteration":C,"name.argument.formal":C,"name.argument.formal.constructor":C,"name.argument.formal.constructor.iteration":C,"name.argument.formal.iteration":C,"name.argument.formal.method":C,"name.argument.formal.method.iteration":C,"name.assignment":C,"name.assignment.pattern":C,"name.class":C,"name.constructor":C,"name.field":C,"name.foreach":C,"name.function":C,"name.iteration.block":C,"name.iteration.document":C,"name.method":C,"name.resource":C,"name.resource.iteration":C,"name.variable":C,"name.variable.pattern":C,namedFunction:C,"namedFunction.constructor":C,"namedFunction.iteration.block":C,"namedFunction.iteration.document":C,"namedFunction.method":C,"namedFunction.method.iteration.class":C,notebookCell:C,pairDelimiter:C,regularExpression:C,section:C,"section.iteration.document":C,"section.iteration.parent":C,startTag:C,statement:C,"statement.class":C,"statement.iteration.block":C,"statement.iteration.document":C,"string.multiLine":C,switchStatementSubject:C,tags:C,"textFragment.element":C,"textFragment.string.multiLine":C,"type.alias":C,"type.argument.formal":C,"type.argument.formal.constructor":C,"type.argument.formal.constructor.iteration":C,"type.argument.formal.iteration":C,"type.argument.formal.method":C,"type.argument.formal.method.iteration":C,"type.cast":C,"type.class":C,"type.enum":C,"type.field":C,"type.field.iteration":C,"type.foreach":C,"type.interface":C,"type.resource":C,"type.resource.iteration":C,"type.return":C,"type.typeArgument":C,"type.typeArgument.iteration":C,"type.variable":C,"value.argument.actual":C,"value.argument.actual.iteration":C,"value.argument.formal":C,"value.argument.formal.constructor":C,"value.argument.formal.constructor.iteration":C,"value.argument.formal.iteration":C,"value.argument.formal.method":C,"value.argument.formal.method.iteration":C,"value.assignment":C,"value.attribute":C,"value.field":C,"value.foreach":C,"value.resource":C,"value.resource.iteration":C,"value.return":C,"value.return.lambda":C,"value.typeAlias":C,"value.variable":C,"value.variable.pattern":C,"value.yield":C};var{supported:ole,unsupported:ale,notApplicable:sle}=le,aq={...sl};var{supported:ule,unsupported:fle,notApplicable:mle}=le,sq={...sl};var{supported:gle,unsupported:yle,notApplicable:xle}=le;var{supported:vle,notApplicable:ble}=le;var{supported:_le,notApplicable:Rle}=le;var{supported:Ple,unsupported:Mle,notApplicable:Dle}=le;var{supported:Cle,notApplicable:Nle}=le;var{supported:Ule,unsupported:Hle,notApplicable:Ble}=le;var{supported:$le,unsupported:jle,notApplicable:zle}=le;var{supported:Kle,unsupported:Qle,notApplicable:Yle}=le;var{supported:Jle,unsupported:epe,notApplicable:tpe}=le;var{supported:ipe,notApplicable:ope}=le;var{supported:rr,unsupported:_f}=le,cq={...bT,"comment.line":rr,"condition.if":rr,namedFunction:rr,"namedFunction.iteration.block":rr,"namedFunction.iteration.document":rr,functionName:rr,"functionName.iteration.block":rr,"functionName.iteration.document":rr,"name.argument.formal":rr,"name.argument.formal.iteration":rr,"name.function":rr,"value.argument.formal":rr,"value.argument.formal.iteration":rr,"value.return":rr,ifStatement:rr,"textFragment.comment.line":rr,"branch.if":_f,"branch.if.iteration":_f,"interior.function":_f,"interior.if":_f};var{supported:upe,unsupported:fpe,notApplicable:mpe}=le;var{supported:zt,notApplicable:Ri}=le,RT={...wT,"type.argument.formal":zt,"type.argument.formal.iteration":zt,"type.argument.formal.method":zt,"type.argument.formal.method.iteration":zt,"type.argument.formal.constructor":zt,"type.argument.formal.constructor.iteration":zt,"type.alias":zt,"type.cast":zt,"type.field":zt,"type.field.iteration":zt,"type.interface":zt,"type.enum":zt,"type.return":zt,"type.variable":zt,"type.typeArgument":zt,"type.typeArgument.iteration":zt,"value.typeAlias":zt,element:Ri,tags:Ri,startTag:Ri,endTag:Ri,attribute:Ri,"key.attribute":Ri,"value.attribute":Ri,"type.foreach":Ri,"interior.element":Ri};var{supported:vpe,unsupported:bpe,notApplicable:wpe}=le,lq={...RT,...ET};var{supported:Rpe,notApplicable:kpe}=le;var{supported:Mpe,unsupported:Dpe,notApplicable:Fpe}=le;var Ts=["that","source","instanceReference","keyboard"];var Pe=class extends Y{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new de(e[0],e[1]),new de(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}->${this.end.conciseOneBased()}`}toString(){return this.concise()}};function xk({line:t,character:e}){return new de(t,e)}function Rf({start:t,end:e}){return new Y(xk(t),xk(e))}function zr({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function hr({start:t,end:e}){return{type:"character",start:t,end:e}}function cl(t){return{start:kf(t.start),end:kf(t.end)}}function Tk(t){return{anchor:kf(t.anchor),active:kf(t.active)}}function kf({line:t,character:e}){return{line:t,character:e}}function Lk(t){return typeof t>"u"||t===null}function pq(t){return typeof t=="object"&&t!==null}function uq(t){return Array.isArray(t)?t:Lk(t)?[]:[t]}function fq(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function mq(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function dq(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var hq=Lk,gq=pq,yq=uq,xq=mq,Tq=dq,Sq=fq,Dt={isNothing:hq,isObject:gq,toArray:yq,repeat:xq,isNegativeZero:Tq,extend:Sq};function Uk(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function pl(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Uk(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}pl.prototype=Object.create(Error.prototype);pl.prototype.constructor=pl;pl.prototype.toString=function(e){return this.name+": "+Uk(this,e)};var kr=pl;function kT(t,e,r,n,i){var o="",s="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function AT(t,e){return Dt.repeat(" ",e-t.length)+t}function vq(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",p,f,d=Math.min(t.line+e.linesAfter,i.length).toString().length,h=e.maxLength-(e.indent+d+3);for(p=1;p<=e.linesBefore&&!(s-p<0);p++)f=kT(t.buffer,n[s-p],i[s-p],t.position-(n[s]-n[s-p]),h),l=Dt.repeat(" ",e.indent)+AT((t.line-p+1).toString(),d)+" | "+f.str+`
`+l;for(f=kT(t.buffer,n[s],i[s],t.position,h),l+=Dt.repeat(" ",e.indent)+AT((t.line+1).toString(),d)+" | "+f.str+`
`,l+=Dt.repeat("-",e.indent+d+3+f.pos)+`^
`,p=1;p<=e.linesAfter&&!(s+p>=i.length);p++)f=kT(t.buffer,n[s+p],i[s+p],t.position-(n[s]-n[s+p]),h),l+=Dt.repeat(" ",e.indent)+AT((t.line+p+1).toString(),d)+" | "+f.str+`
`;return l.replace(/\n$/,"")}var bq=vq,wq=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Eq=["scalar","sequence","mapping"];function _q(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function Rq(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(wq.indexOf(r)===-1)throw new kr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=_q(e.styleAliases||null),Eq.indexOf(this.kind)===-1)throw new kr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var qt=Rq;function bk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function kq(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function MT(t){return this.extend(t)}MT.prototype.extend=function(e){var r=[],n=[];if(e instanceof qt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new kr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof qt))throw new kr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new kr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new kr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof qt))throw new kr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(MT.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=bk(i,"implicit"),i.compiledExplicit=bk(i,"explicit"),i.compiledTypeMap=kq(i.compiledImplicit,i.compiledExplicit),i};var Aq=MT,Pq=new qt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Mq=new qt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Dq=new qt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Fq=new Aq({explicit:[Pq,Mq,Dq]});function Iq(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function Cq(){return null}function Nq(t){return t===null}var Oq=new qt("tag:yaml.org,2002:null",{kind:"scalar",resolve:Iq,construct:Cq,predicate:Nq,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Lq(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Uq(t){return t==="true"||t==="True"||t==="TRUE"}function Hq(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Bq=new qt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Lq,construct:Uq,predicate:Hq,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Vq(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Wq(t){return 48<=t&&t<=55}function $q(t){return 48<=t&&t<=57}function jq(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Vq(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Wq(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!$q(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function zq(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function qq(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Dt.isNegativeZero(t)}var Gq=new qt("tag:yaml.org,2002:int",{kind:"scalar",resolve:jq,construct:zq,predicate:qq,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Kq=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Qq(t){return!(t===null||!Kq.test(t)||t[t.length-1]==="_")}function Yq(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var Zq=/^[-+]?[0-9]+e/;function Xq(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Dt.isNegativeZero(t))return"-0.0";return r=t.toString(10),Zq.test(r)?r.replace("e",".e"):r}function Jq(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Dt.isNegativeZero(t))}var eG=new qt("tag:yaml.org,2002:float",{kind:"scalar",resolve:Qq,construct:Yq,predicate:Jq,represent:Xq,defaultStyle:"lowercase"}),tG=Fq.extend({implicit:[Oq,Bq,Gq,eG]}),rG=tG,Hk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Bk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function nG(t){return t===null?!1:Hk.exec(t)!==null||Bk.exec(t)!==null}function iG(t){var e,r,n,i,o,s,l,p=0,f=null,d,h,y;if(e=Hk.exec(t),e===null&&(e=Bk.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],l=+e[6],e[7]){for(p=e[7].slice(0,3);p.length<3;)p+="0";p=+p}return e[9]&&(d=+e[10],h=+(e[11]||0),f=(d*60+h)*6e4,e[9]==="-"&&(f=-f)),y=new Date(Date.UTC(r,n,i,o,s,l,p)),f&&y.setTime(y.getTime()-f),y}function oG(t){return t.toISOString()}var aG=new qt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:nG,construct:iG,instanceOf:Date,represent:oG});function sG(t){return t==="<<"||t===null}var cG=new qt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:sG}),NT=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function lG(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=NT;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function pG(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=NT,s=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}function uG(t){var e="",r=0,n,i,o=t.length,s=NT;for(n=0;n<o;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function fG(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var mG=new qt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:lG,construct:pG,predicate:fG,represent:uG}),dG=Object.prototype.hasOwnProperty,hG=Object.prototype.toString;function gG(t){if(t===null)return!0;var e=[],r,n,i,o,s,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],s=!1,hG.call(i)!=="[object Object]")return!1;for(o in i)if(dG.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function yG(t){return t!==null?t:[]}var xG=new qt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:gG,construct:yG}),TG=Object.prototype.toString;function SG(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],TG.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function vG(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var bG=new qt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:SG,construct:vG}),wG=Object.prototype.hasOwnProperty;function EG(t){if(t===null)return!0;var e,r=t;for(e in r)if(wG.call(r,e)&&r[e]!==null)return!1;return!0}function _G(t){return t!==null?t:{}}var RG=new qt("tag:yaml.org,2002:set",{kind:"mapping",resolve:EG,construct:_G}),OT=rG.extend({implicit:[aG,cG],explicit:[mG,xG,bG,RG]}),lo=Object.prototype.hasOwnProperty,Af=1,Vk=2,Wk=3,Pf=4,PT=1,kG=2,wk=3,AG=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PG=/[\x85\u2028\u2029]/,MG=/[,\[\]\{\}]/,$k=/^(?:!|!!|![a-z\-]+!)$/i,jk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ek(t){return Object.prototype.toString.call(t)}function Gn(t){return t===10||t===13}function ta(t){return t===9||t===32}function Ar(t){return t===9||t===32||t===10||t===13}function vs(t){return t===44||t===91||t===93||t===123||t===125}function DG(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function FG(t){return t===120?2:t===117?4:t===85?8:0}function IG(t){return 48<=t&&t<=57?t-48:-1}function _k(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function CG(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var zk=new Array(256),qk=new Array(256);for(ea=0;ea<256;ea++)zk[ea]=_k(ea)?1:0,qk[ea]=_k(ea);var ea;function NG(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||OT,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Gk(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=bq(r),new kr(e,r)}function me(t,e){throw Gk(t,e)}function Mf(t,e){t.onWarning&&t.onWarning.call(null,Gk(t,e))}var Rk={YAML:function(e,r,n){var i,o,s;e.version!==null&&me(e,"duplication of %YAML directive"),n.length!==1&&me(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&me(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&me(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&Mf(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&me(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],$k.test(i)||me(e,"ill-formed tag handle (first argument) of the TAG directive"),lo.call(e.tagMap,i)&&me(e,'there is a previously declared suffix for "'+i+'" tag handle'),jk.test(o)||me(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{me(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function co(t,e,r,n){var i,o,s,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)s=l.charCodeAt(i),s===9||32<=s&&s<=1114111||me(t,"expected valid JSON character");else AG.test(l)&&me(t,"the stream contains non-printable characters");t.result+=l}}function kk(t,e,r,n){var i,o,s,l;for(Dt.isObject(r)||me(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,l=i.length;s<l;s+=1)o=i[s],lo.call(e,o)||(e[o]=r[o],n[o]=!0)}function bs(t,e,r,n,i,o,s,l,p){var f,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),f=0,d=i.length;f<d;f+=1)Array.isArray(i[f])&&me(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Ek(i[f])==="[object Object]"&&(i[f]="[object Object]");if(typeof i=="object"&&Ek(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(f=0,d=o.length;f<d;f+=1)kk(t,e,o[f],r);else kk(t,e,o,r);else!t.json&&!lo.call(r,i)&&lo.call(e,i)&&(t.line=s||t.line,t.lineStart=l||t.lineStart,t.position=p||t.position,me(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function LT(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):me(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function _t(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;ta(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Gn(i))for(LT(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Mf(t,"deficient indentation"),n}function If(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Ar(r)))}function UT(t,e){e===1?t.result+=" ":e>1&&(t.result+=Dt.repeat(`
`,e-1))}function OG(t,e,r){var n,i,o,s,l,p,f,d,h=t.kind,y=t.result,T;if(T=t.input.charCodeAt(t.position),Ar(T)||vs(T)||T===35||T===38||T===42||T===33||T===124||T===62||T===39||T===34||T===37||T===64||T===96||(T===63||T===45)&&(i=t.input.charCodeAt(t.position+1),Ar(i)||r&&vs(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,l=!1;T!==0;){if(T===58){if(i=t.input.charCodeAt(t.position+1),Ar(i)||r&&vs(i))break}else if(T===35){if(n=t.input.charCodeAt(t.position-1),Ar(n))break}else{if(t.position===t.lineStart&&If(t)||r&&vs(T))break;if(Gn(T))if(p=t.line,f=t.lineStart,d=t.lineIndent,_t(t,!1,-1),t.lineIndent>=e){l=!0,T=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=p,t.lineStart=f,t.lineIndent=d;break}}l&&(co(t,o,s,!1),UT(t,t.line-p),o=s=t.position,l=!1),ta(T)||(s=t.position+1),T=t.input.charCodeAt(++t.position)}return co(t,o,s,!1),t.result?!0:(t.kind=h,t.result=y,!1)}function LG(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(co(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Gn(r)?(co(t,n,i,!0),UT(t,_t(t,!1,e)),n=i=t.position):t.position===t.lineStart&&If(t)?me(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);me(t,"unexpected end of the stream within a single quoted scalar")}function UG(t,e){var r,n,i,o,s,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return co(t,r,t.position,!0),t.position++,!0;if(l===92){if(co(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),Gn(l))_t(t,!1,e);else if(l<256&&zk[l])t.result+=qk[l],t.position++;else if((s=FG(l))>0){for(i=s,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(s=DG(l))>=0?o=(o<<4)+s:me(t,"expected hexadecimal character");t.result+=CG(o),t.position++}else me(t,"unknown escape sequence");r=n=t.position}else Gn(l)?(co(t,r,n,!0),UT(t,_t(t,!1,e)),r=n=t.position):t.position===t.lineStart&&If(t)?me(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}me(t,"unexpected end of the stream within a double quoted scalar")}function HG(t,e){var r=!0,n,i,o,s=t.tag,l,p=t.anchor,f,d,h,y,T,w=Object.create(null),E,U,V,j;if(j=t.input.charCodeAt(t.position),j===91)d=93,T=!1,l=[];else if(j===123)d=125,T=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),j=t.input.charCodeAt(++t.position);j!==0;){if(_t(t,!0,e),j=t.input.charCodeAt(t.position),j===d)return t.position++,t.tag=s,t.anchor=p,t.kind=T?"mapping":"sequence",t.result=l,!0;r?j===44&&me(t,"expected the node content, but found ','"):me(t,"missed comma between flow collection entries"),U=E=V=null,h=y=!1,j===63&&(f=t.input.charCodeAt(t.position+1),Ar(f)&&(h=y=!0,t.position++,_t(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,ws(t,e,Af,!1,!0),U=t.tag,E=t.result,_t(t,!0,e),j=t.input.charCodeAt(t.position),(y||t.line===n)&&j===58&&(h=!0,j=t.input.charCodeAt(++t.position),_t(t,!0,e),ws(t,e,Af,!1,!0),V=t.result),T?bs(t,l,w,U,E,V,n,i,o):h?l.push(bs(t,null,w,U,E,V,n,i,o)):l.push(E),_t(t,!0,e),j=t.input.charCodeAt(t.position),j===44?(r=!0,j=t.input.charCodeAt(++t.position)):r=!1}me(t,"unexpected end of the stream within a flow collection")}function BG(t,e){var r,n,i=PT,o=!1,s=!1,l=e,p=0,f=!1,d,h;if(h=t.input.charCodeAt(t.position),h===124)n=!1;else if(h===62)n=!0;else return!1;for(t.kind="scalar",t.result="";h!==0;)if(h=t.input.charCodeAt(++t.position),h===43||h===45)PT===i?i=h===43?wk:kG:me(t,"repeat of a chomping mode identifier");else if((d=IG(h))>=0)d===0?me(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?me(t,"repeat of an indentation width identifier"):(l=e+d-1,s=!0);else break;if(ta(h)){do h=t.input.charCodeAt(++t.position);while(ta(h));if(h===35)do h=t.input.charCodeAt(++t.position);while(!Gn(h)&&h!==0)}for(;h!==0;){for(LT(t),t.lineIndent=0,h=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&h===32;)t.lineIndent++,h=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),Gn(h)){p++;continue}if(t.lineIndent<l){i===wk?t.result+=Dt.repeat(`
`,o?1+p:p):i===PT&&o&&(t.result+=`
`);break}for(n?ta(h)?(f=!0,t.result+=Dt.repeat(`
`,o?1+p:p)):f?(f=!1,t.result+=Dt.repeat(`
`,p+1)):p===0?o&&(t.result+=" "):t.result+=Dt.repeat(`
`,p):t.result+=Dt.repeat(`
`,o?1+p:p),o=!0,s=!0,p=0,r=t.position;!Gn(h)&&h!==0;)h=t.input.charCodeAt(++t.position);co(t,r,t.position,!1)}return!0}function Ak(t,e){var r,n=t.tag,i=t.anchor,o=[],s,l=!1,p;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),p=t.input.charCodeAt(t.position);p!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,me(t,"tab characters must not be used in indentation")),!(p!==45||(s=t.input.charCodeAt(t.position+1),!Ar(s))));){if(l=!0,t.position++,_t(t,!0,-1)&&t.lineIndent<=e){o.push(null),p=t.input.charCodeAt(t.position);continue}if(r=t.line,ws(t,e,Wk,!1,!0),o.push(t.result),_t(t,!0,-1),p=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&p!==0)me(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function VG(t,e,r){var n,i,o,s,l,p,f=t.tag,d=t.anchor,h={},y=Object.create(null),T=null,w=null,E=null,U=!1,V=!1,j;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=h),j=t.input.charCodeAt(t.position);j!==0;){if(!U&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,me(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(j===63||j===58)&&Ar(n))j===63?(U&&(bs(t,h,y,T,w,null,s,l,p),T=w=E=null),V=!0,U=!0,i=!0):U?(U=!1,i=!0):me(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,j=n;else{if(s=t.line,l=t.lineStart,p=t.position,!ws(t,r,Vk,!1,!0))break;if(t.line===o){for(j=t.input.charCodeAt(t.position);ta(j);)j=t.input.charCodeAt(++t.position);if(j===58)j=t.input.charCodeAt(++t.position),Ar(j)||me(t,"a whitespace character is expected after the key-value separator within a block mapping"),U&&(bs(t,h,y,T,w,null,s,l,p),T=w=E=null),V=!0,U=!1,i=!1,T=t.tag,w=t.result;else if(V)me(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=f,t.anchor=d,!0}else if(V)me(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=f,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(U&&(s=t.line,l=t.lineStart,p=t.position),ws(t,e,Pf,!0,i)&&(U?w=t.result:E=t.result),U||(bs(t,h,y,T,w,E,s,l,p),T=w=E=null),_t(t,!0,-1),j=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&j!==0)me(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return U&&bs(t,h,y,T,w,null,s,l,p),V&&(t.tag=f,t.anchor=d,t.kind="mapping",t.result=h),V}function WG(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&me(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):me(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Ar(s);)s===33&&(n?me(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),$k.test(i)||me(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),MG.test(o)&&me(t,"tag suffix cannot contain flow indicator characters")}o&&!jk.test(o)&&me(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{me(t,"tag name is malformed: "+o)}return r?t.tag=o:lo.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:me(t,'undeclared tag handle "'+i+'"'),!0}function $G(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&me(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Ar(r)&&!vs(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&me(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function jG(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Ar(n)&&!vs(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&me(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),lo.call(t.anchorMap,r)||me(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],_t(t,!0,-1),!0}function ws(t,e,r,n,i){var o,s,l,p=1,f=!1,d=!1,h,y,T,w,E,U;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=l=Pf===r||Wk===r,n&&_t(t,!0,-1)&&(f=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),p===1)for(;WG(t)||$G(t);)_t(t,!0,-1)?(f=!0,l=o,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):l=!1;if(l&&(l=f||i),(p===1||Pf===r)&&(Af===r||Vk===r?E=e:E=e+1,U=t.position-t.lineStart,p===1?l&&(Ak(t,U)||VG(t,U,E))||HG(t,E)?d=!0:(s&&BG(t,E)||LG(t,E)||UG(t,E)?d=!0:jG(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&me(t,"alias node should not have any properties")):OG(t,E,Af===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):p===0&&(d=l&&Ak(t,U))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&me(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),h=0,y=t.implicitTypes.length;h<y;h+=1)if(w=t.implicitTypes[h],w.resolve(t.result)){t.result=w.construct(t.result),t.tag=w.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(lo.call(t.typeMap[t.kind||"fallback"],t.tag))w=t.typeMap[t.kind||"fallback"][t.tag];else for(w=null,T=t.typeMap.multi[t.kind||"fallback"],h=0,y=T.length;h<y;h+=1)if(t.tag.slice(0,T[h].tag.length)===T[h].tag){w=T[h];break}w||me(t,"unknown tag !<"+t.tag+">"),t.result!==null&&w.kind!==t.kind&&me(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+w.kind+'", not "'+t.kind+'"'),w.resolve(t.result,t.tag)?(t.result=w.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):me(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function zG(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(_t(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!Ar(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&me(t,"directive name must not be less than one character in length");s!==0;){for(;ta(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Gn(s));break}if(Gn(s))break;for(r=t.position;s!==0&&!Ar(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&LT(t),lo.call(Rk,n)?Rk[n](t,n,i):Mf(t,'unknown document directive "'+n+'"')}if(_t(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,_t(t,!0,-1)):o&&me(t,"directives end mark is expected"),ws(t,t.lineIndent-1,Pf,!1,!0),_t(t,!0,-1),t.checkLineBreaks&&PG.test(t.input.slice(e,t.position))&&Mf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&If(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,_t(t,!0,-1));return}if(t.position<t.length-1)me(t,"end of the stream or a document separator is expected");else return}function Kk(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new NG(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,me(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)zG(r);return r.documents}function qG(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=Kk(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function GG(t,e){var r=Kk(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new kr("expected a single document in the stream, but found more")}}var KG=qG,QG=GG,Qk={loadAll:KG,load:QG},Yk=Object.prototype.toString,Zk=Object.prototype.hasOwnProperty,HT=65279,YG=9,ul=10,ZG=13,XG=32,JG=33,eK=34,DT=35,tK=37,rK=38,nK=39,iK=42,Xk=44,oK=45,Df=58,aK=61,sK=62,cK=63,lK=64,Jk=91,eA=93,pK=96,tA=123,uK=124,rA=125,nr={};nr[0]="\\0";nr[7]="\\a";nr[8]="\\b";nr[9]="\\t";nr[10]="\\n";nr[11]="\\v";nr[12]="\\f";nr[13]="\\r";nr[27]="\\e";nr[34]='\\"';nr[92]="\\\\";nr[133]="\\N";nr[160]="\\_";nr[8232]="\\L";nr[8233]="\\P";var fK=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],mK=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function dK(t,e){var r,n,i,o,s,l,p;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),p=t.compiledTypeMap.fallback[s],p&&Zk.call(p.styleAliases,l)&&(l=p.styleAliases[l]),r[s]=l;return r}function hK(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new kr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Dt.repeat("0",n-e.length)+e}var gK=1,fl=2;function yK(t){this.schema=t.schema||OT,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Dt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=dK(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?fl:gK,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Pk(t,e){for(var r=Dt.repeat(" ",e),n=0,i=-1,o="",s,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=l):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function FT(t,e){return`
`+Dt.repeat(" ",t.indent*e)}function xK(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function Ff(t){return t===XG||t===YG}function ml(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==HT||65536<=t&&t<=1114111}function Mk(t){return ml(t)&&t!==HT&&t!==ZG&&t!==ul}function Dk(t,e,r){var n=Mk(t),i=n&&!Ff(t);return(r?n:n&&t!==Xk&&t!==Jk&&t!==eA&&t!==tA&&t!==rA)&&t!==DT&&!(e===Df&&!i)||Mk(e)&&!Ff(e)&&t===DT||e===Df&&i}function TK(t){return ml(t)&&t!==HT&&!Ff(t)&&t!==oK&&t!==cK&&t!==Df&&t!==Xk&&t!==Jk&&t!==eA&&t!==tA&&t!==rA&&t!==DT&&t!==rK&&t!==iK&&t!==JG&&t!==uK&&t!==aK&&t!==sK&&t!==nK&&t!==eK&&t!==tK&&t!==lK&&t!==pK}function SK(t){return!Ff(t)&&t!==Df}function ll(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function nA(t){var e=/^\n* /;return e.test(t)}var iA=1,IT=2,oA=3,aA=4,Ss=5;function vK(t,e,r,n,i,o,s,l){var p,f=0,d=null,h=!1,y=!1,T=n!==-1,w=-1,E=TK(ll(t,0))&&SK(ll(t,t.length-1));if(e||s)for(p=0;p<t.length;f>=65536?p+=2:p++){if(f=ll(t,p),!ml(f))return Ss;E=E&&Dk(f,d,l),d=f}else{for(p=0;p<t.length;f>=65536?p+=2:p++){if(f=ll(t,p),f===ul)h=!0,T&&(y=y||p-w-1>n&&t[w+1]!==" ",w=p);else if(!ml(f))return Ss;E=E&&Dk(f,d,l),d=f}y=y||T&&p-w-1>n&&t[w+1]!==" "}return!h&&!y?E&&!s&&!i(t)?iA:o===fl?Ss:IT:r>9&&nA(t)?Ss:s?o===fl?Ss:IT:y?aA:oA}function bK(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===fl?'""':"''";if(!t.noCompatMode&&(fK.indexOf(e)!==-1||mK.test(e)))return t.quotingType===fl?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function p(f){return xK(t,f)}switch(vK(e,l,t.indent,s,p,t.quotingType,t.forceQuotes&&!n,i)){case iA:return e;case IT:return"'"+e.replace(/'/g,"''")+"'";case oA:return"|"+Fk(e,t.indent)+Ik(Pk(e,o));case aA:return">"+Fk(e,t.indent)+Ik(Pk(wK(e,s),o));case Ss:return'"'+EK(e)+'"';default:throw new kr("impossible error: invalid scalar style")}}()}function Fk(t,e){var r=nA(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function Ik(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function wK(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var f=t.indexOf(`
`);return f=f!==-1?f:t.length,r.lastIndex=f,Ck(t.slice(0,f),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var l=s[1],p=s[2];o=p[0]===" ",n+=l+(!i&&!o&&p!==""?`
`:"")+Ck(p,e),i=o}return n}function Ck(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,l=0,p="";n=r.exec(t);)l=n.index,l-i>e&&(o=s>i?s:l,p+=`
`+t.slice(i,o),i=o+1),s=l;return p+=`
`,t.length-i>e&&s>i?p+=t.slice(i,s)+`
`+t.slice(s+1):p+=t.slice(i),p.slice(1)}function EK(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=ll(t,i),n=nr[r],!n&&ml(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||hK(r);return e}function _K(t,e,r){var n="",i=t.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(ki(t,e,l,!1,!1)||typeof l>"u"&&ki(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function Nk(t,e,r,n){var i="",o=t.tag,s,l,p;for(s=0,l=r.length;s<l;s+=1)p=r[s],t.replacer&&(p=t.replacer.call(r,String(s),p)),(ki(t,e+1,p,!0,!0,!1,!0)||typeof p>"u"&&ki(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=FT(t,e)),t.dump&&ul===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function RK(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,l,p,f,d;for(s=0,l=o.length;s<l;s+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),p=o[s],f=r[p],t.replacer&&(f=t.replacer.call(r,p,f)),ki(t,e,p,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),ki(t,e,f,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function kK(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),l,p,f,d,h,y;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new kr("sortKeys must be a boolean or a function");for(l=0,p=s.length;l<p;l+=1)y="",(!n||i!=="")&&(y+=FT(t,e)),f=s[l],d=r[f],t.replacer&&(d=t.replacer.call(r,f,d)),ki(t,e+1,f,!0,!0,!0)&&(h=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,h&&(t.dump&&ul===t.dump.charCodeAt(0)?y+="?":y+="? "),y+=t.dump,h&&(y+=FT(t,e)),ki(t,e+1,d,!0,h)&&(t.dump&&ul===t.dump.charCodeAt(0)?y+=":":y+=": ",y+=t.dump,i+=y));t.tag=o,t.dump=i||"{}"}function Ok(t,e,r){var n,i,o,s,l,p;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(p=t.styleMap[l.tag]||l.defaultStyle,Yk.call(l.represent)==="[object Function]")n=l.represent(e,p);else if(Zk.call(l.represent,p))n=l.represent[p](e,p);else throw new kr("!<"+l.tag+'> tag resolver accepts not "'+p+'" style');t.dump=n}return!0}return!1}function ki(t,e,r,n,i,o,s){t.tag=null,t.dump=r,Ok(t,r,!1)||Ok(t,r,!0);var l=Yk.call(t.dump),p=n,f;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",h,y;if(d&&(h=t.duplicates.indexOf(r),y=h!==-1),(t.tag!==null&&t.tag!=="?"||y||t.indent!==2&&e>0)&&(i=!1),y&&t.usedDuplicates[h])t.dump="*ref_"+h;else{if(d&&y&&!t.usedDuplicates[h]&&(t.usedDuplicates[h]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(kK(t,e,t.dump,i),y&&(t.dump="&ref_"+h+t.dump)):(RK(t,e,t.dump),y&&(t.dump="&ref_"+h+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?Nk(t,e-1,t.dump,i):Nk(t,e,t.dump,i),y&&(t.dump="&ref_"+h+t.dump)):(_K(t,e,t.dump),y&&(t.dump="&ref_"+h+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&bK(t,t.dump,e,o,p);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new kr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(f=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?f="!"+f:f.slice(0,18)==="tag:yaml.org,2002:"?f="!!"+f.slice(18):f="!<"+f+">",t.dump=f+" "+t.dump)}return!0}function AK(t,e){var r=[],n=[],i,o;for(CT(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function CT(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)CT(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)CT(t[n[i]],e,r)}function PK(t,e){e=e||{};var r=new yK(e);r.noRefs||AK(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),ki(r,0,n,!0,!0)?r.dump+`
`:""}var MK=PK,DK={dump:MK};function BT(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var sA=qt;var cA=OT,FK=Qk.load,Yue=Qk.loadAll,lA=DK.dump;var Zue=BT("safeLoad","load"),Xue=BT("safeLoadAll","loadAll"),Jue=BT("safeDump","dump");var Cf=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=lA(this.data,Object.assign({replacer:OK,schema:CK},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},IK=new sA("!format",{kind:"scalar",resolve:()=>!1,instanceOf:Cf,represent:t=>t.represent()}),CK=cA.extend({implicit:[IK]}),VT=t=>typeof t=="object"&&t!=null;function NK(t){if(VT(t))return Object.values(t).every(e=>!VT(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!VT(e)&&!Array.isArray(e))}function OK(t,e){return t===""?e:NK(e)?new Cf(e,{flowLevel:0}):e}var WT=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","flashTargets","foldRegion","followLink","followLinkAside","gitAccept","gitRevert","gitStage","gitUnstage","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],UK=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],uA=[...WT,...UK];var HK=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleBacktickQuotes","tripleDoubleQuotes","tripleSingleQuotes"],BK=["string","any","collectionBoundary"],Nf=[...HK,...BK],ra=["argumentOrParameter","argumentList","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function fA(t){return ra.includes(t.type)}var mA=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],dl=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},Es=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function hl(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function na(t){return t.version>=7}var po=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var _s=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function dA(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function gl(t){return typeof t=="string"||t instanceof String}function Of(t){let[e,...r]=t;return WK(e,r)}function WK(t,e){let r;if(gl(t)){let n=t,[i,o,...s]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:s,usePrePhraseSnapshot:!1}}else r=t;return r}function yl(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function hA(t){for(let e of t)return!1;return!0}function Ai(t){return Object.keys(t)}function xl(t,e){return`${t}.${e}`}function gA(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,s)=>{let l=r(s),p=o.get(l);return p==null?(o.set(l,[s]),o):(o.get(l).push(s),p.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,tl(i.get(o),e))}),t.flatMap(o=>{let s=r(o),l=i.get(s);if(l==null||l.length===0)return[];let p=l[0];return e(p,o)?(l.shift(),p):[]}))}function ia(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var bA=Symbol.for("immer-nothing"),yA=Symbol.for("immer-draftable"),qr=Symbol.for("immer-state"),$K=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function Pr(t,...e){if(process.env.NODE_ENV!=="production"){let r=$K[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Rs=Object.getPrototypeOf;function ks(t){return!!t&&!!t[qr]}function aa(t){return t?wA(t)||Array.isArray(t)||!!t[yA]||!!t.constructor?.[yA]||Vf(t)||Wf(t):!1}var jK=Object.prototype.constructor.toString();function wA(t){if(!t||typeof t!="object")return!1;let e=Rs(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===jK}function Lf(t,e){Bf(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Bf(t){let e=t[qr];return e?e.type_:Array.isArray(t)?1:Vf(t)?2:Wf(t)?3:0}function zT(t,e){return Bf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function EA(t,e,r){let n=Bf(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function zK(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Vf(t){return t instanceof Map}function Wf(t){return t instanceof Set}function oa(t){return t.copy_||t.base_}function qT(t,e){if(Vf(t))return new Map(t);if(Wf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=wA(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[qr];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let s=i[o],l=n[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(Rs(t),n)}else{let n=Rs(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function ZT(t,e=!1){return $f(t)||ks(t)||!aa(t)||(Bf(t)>1&&(t.set=t.add=t.clear=t.delete=qK),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>ZT(n,!0))),t}function qK(){Pr(2)}function $f(t){return Object.isFrozen(t)}var GK={};function sa(t){let e=GK[t];return e||Pr(0,t),e}var Tl;function _A(){return Tl}function KK(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xA(t,e){e&&(sa("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function GT(t){KT(t),t.drafts_.forEach(QK),t.drafts_=null}function KT(t){t===Tl&&(Tl=t.parent_)}function TA(t){return Tl=KK(Tl,t)}function QK(t){let e=t[qr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function SA(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[qr].modified_&&(GT(e),Pr(4)),aa(t)&&(t=Uf(e,t),e.parent_||Hf(e,t)),e.patches_&&sa("Patches").generateReplacementPatches_(r[qr].base_,t,e.patches_,e.inversePatches_)):t=Uf(e,r,[]),GT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==bA?t:void 0}function Uf(t,e,r){if($f(e))return e;let n=e[qr];if(!n)return Lf(e,(i,o)=>vA(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Hf(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,s=!1;n.type_===3&&(o=new Set(i),i.clear(),s=!0),Lf(o,(l,p)=>vA(t,n,i,l,p,r,s)),Hf(t,i,!1),r&&t.patches_&&sa("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function vA(t,e,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&Pr(5),ks(i)){let l=o&&e&&e.type_!==3&&!zT(e.assigned_,n)?o.concat(n):void 0,p=Uf(t,i,l);if(EA(r,n,p),ks(p))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(aa(i)&&!$f(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Uf(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Hf(t,i)}}function Hf(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&ZT(e,r)}function YK(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:_A(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=XT;r&&(i=[n],o=Sl);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}var XT={get(t,e){if(e===qr)return t;let r=oa(t);if(!zT(r,e))return ZK(t,r,e);let n=r[e];return t.finalized_||!aa(n)?n:n===$T(t.base_,e)?(jT(t),t.copy_[e]=YT(n,t)):n},has(t,e){return e in oa(t)},ownKeys(t){return Reflect.ownKeys(oa(t))},set(t,e,r){let n=RA(oa(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=$T(oa(t),e),o=i?.[qr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(zK(r,i)&&(r!==void 0||zT(t.base_,e)))return!0;jT(t),QT(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return $T(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,jT(t),QT(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=oa(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Pr(11)},getPrototypeOf(t){return Rs(t.base_)},setPrototypeOf(){Pr(12)}},Sl={};Lf(XT,(t,e)=>{Sl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Sl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&Pr(13),Sl.set.call(this,t,e,void 0)};Sl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&Pr(14),XT.set.call(this,t[0],e,r,t[0])};function $T(t,e){let r=t[qr];return(r?oa(r):t)[e]}function ZK(t,e,r){let n=RA(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function RA(t,e){if(!(e in t))return;let r=Rs(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Rs(r)}}function QT(t){t.modified_||(t.modified_=!0,t.parent_&&QT(t.parent_))}function jT(t){t.copy_||(t.copy_=qT(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var XK=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let s=this;return function(p=o,...f){return s.produce(p,d=>r.call(this,d,...f))}}typeof r!="function"&&Pr(6),n!==void 0&&typeof n!="function"&&Pr(7);let i;if(aa(e)){let o=TA(this),s=YT(e,void 0),l=!0;try{i=r(s),l=!1}finally{l?GT(o):KT(o)}return xA(o,n),SA(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===bA&&(i=void 0),this.autoFreeze_&&ZT(i,!0),n){let o=[],s=[];sa("Patches").generateReplacementPatches_(e,i,o,s),n(o,s)}return i}else Pr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,p=>e(p,...l));let n,i;return[this.produce(e,r,(s,l)=>{n=s,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){aa(t)||Pr(8),ks(t)&&(t=JK(t));let e=TA(this),r=YT(t,void 0);return r[qr].isManual_=!0,KT(e),r}finishDraft(t,e){let r=t&&t[qr];(!r||!r.isManual_)&&Pr(9);let{scope_:n}=r;return xA(n,e),SA(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=sa("Patches").applyPatches_;return ks(t)?n(t,e):this.produce(t,i=>n(i,e))}};function YT(t,e){let r=Vf(t)?sa("MapSet").proxyMap_(t,e):Wf(t)?sa("MapSet").proxySet_(t,e):YK(t,e);return(e?e.scope_:_A()).drafts_.push(r),r}function JK(t){return ks(t)||Pr(10,t),kA(t)}function kA(t){if(!aa(t)||$f(t))return t;let e=t[qr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=qT(t,e.scope_.immer_.useStrictShallowCopy_)}else r=qT(t,!0);return Lf(r,(n,i)=>{EA(r,n,kA(i))}),e&&(e.finalized_=!1),r}var Gr=new XK,jf=Gr.produce,Jde=Gr.produceWithPatches.bind(Gr),ehe=Gr.setAutoFreeze.bind(Gr),the=Gr.setUseStrictShallowCopy.bind(Gr),rhe=Gr.applyPatches.bind(Gr),nhe=Gr.createDraft.bind(Gr),ihe=Gr.finishDraft.bind(Gr);var Gt=[];for(let t=0;t<256;++t)Gt.push((t+256).toString(16).slice(1));function AA(t,e=0){return(Gt[t[e+0]]+Gt[t[e+1]]+Gt[t[e+2]]+Gt[t[e+3]]+"-"+Gt[t[e+4]]+Gt[t[e+5]]+"-"+Gt[t[e+6]]+Gt[t[e+7]]+"-"+Gt[t[e+8]]+Gt[t[e+9]]+"-"+Gt[t[e+10]]+Gt[t[e+11]]+Gt[t[e+12]]+Gt[t[e+13]]+Gt[t[e+14]]+Gt[t[e+15]]).toLowerCase()}var PA=require("crypto"),qf=new Uint8Array(256),zf=qf.length;function JT(){return zf>qf.length-16&&((0,PA.randomFillSync)(qf),zf=0),qf.slice(zf,zf+=16)}var MA=require("crypto"),eS={randomUUID:MA.randomUUID};function e4(t,e,r){if(eS.randomUUID&&!e&&!t)return eS.randomUUID();t=t||{};let n=t.random??t.rng?.()??JT();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return AA(n)}var tS=e4;function DA(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function Gf(t,e){if(Array.isArray(t))return t.map(r=>Gf(r,e));if(typeof t=="object"&&t!=null){if(t4(t))return DA(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Gf(t[n],e));return r}return t}function t4(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var em=Vr(IA(),1);var r4={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},n4={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},Qf={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},Yf={modulo100:"row",relativeUp:"up",relativeDown:"down"};function CA(t){let e=r4[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function NA(t){let e=n4[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function rS(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var i4=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),o4=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),a4={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},OA={...i4,...o4,...a4};function uo(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Ft(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var LA={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Ft("triple quad"),tripleSingleQuotes:Ft("triple twin"),tripleBacktickQuotes:Ft("triple skis"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Ft("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",argumentList:"arg list",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:uo("one section"),sectionLevelTwo:uo("two section"),sectionLevelThree:uo("three section"),sectionLevelFour:uo("four section"),sectionLevelFive:uo("five section"),sectionLevelSix:uo("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Ft("parse tree string"),textFragment:Ft("text fragment"),disqualifyDelimiter:Ft("disqualify delimiter"),pairDelimiter:Ft("pair delimiter"),"private.fieldAccess":Ft("access"),"private.switchStatementSubject":Ft("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",flashTargets:"flash",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join",gitAccept:"git accept",gitRevert:"git revert",gitStage:"git stage",gitUnstage:"git unstage","private.showParseTree":Ft("parse tree"),"experimental.setInstanceReference":uo("from"),editNew:Ft("edit new"),executeCommand:Ft("execute command"),parsed:Ft("parsed"),getText:Ft("get text"),replace:Ft("replace"),"private.getTargets":Ft("get targets"),"private.setKeyboardTarget":Ft("set keyboard target")},customAction:{},grapheme:OA};var nS=rS(LA,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),Pi=rS(nS,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var bt={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var BA=Vr(HA(),1),Xf=class{constructor(e){this.mooLexer=BA.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Mi={};for(let t of WT){let{spokenForms:e}=Pi.action[t];for(let r of e)Mi[r]={type:"simpleActionName",value:t}}var s4=["replaceWithTarget","moveToTarget"];for(let t of s4){let{spokenForms:e}=Pi.action[t];for(let r of e)Mi[r]={type:"bringMove",value:t}}var c4=["before","after","to"];for(let t of c4){let e=bt[t==="to"?"sourceDestinationConnective":t];Mi[e]={type:"insertionMode",value:t}}for(let t of ra){let{spokenForms:e}=Pi.simpleScopeTypeType[t];for(let r of e)Mi[r]={type:"simpleScopeTypeType",value:t}}for(let t of Nf){let{spokenForms:e}=Pi.pairedDelimiter[t];for(let r of e)Mi[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(Qf))e!=null&&(Mi[e]={type:"simpleMarkType",value:t});var Di=new Xf({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Mi),type:t=>Mi[t].type,value:t=>Mi[t].value}});function VA(t,e){return{name:t,target:e}}function WA(t,e,r){return{name:t,source:e,destination:r}}function Jf(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function $A(t,e){return{type:"primitive",insertionMode:t,target:e}}function jA(t){return{type:"containingScope",scopeType:t}}function zA(t){return{type:t}}function qA(t){return{type:"surroundingPair",delimiter:t}}function GA(t){return{type:t}}function KA(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function iS(t){return t[0]}var l4={Lexer:Di,ParserRules:[{name:"main",symbols:["action"],postprocess:iS},{name:"action",symbols:[Di.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>VA(t,e)},{name:"action",symbols:[Di.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>WA(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:iS},{name:"destination",symbols:[Di.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>$A(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:iS},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>Jf(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>Jf(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>Jf(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>jA(t)},{name:"scopeType",symbols:[Di.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>zA(t)},{name:"scopeType",symbols:[Di.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>qA(t)},{name:"mark",symbols:[Di.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>GA(t)},{name:"mark",symbols:[Di.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>KA(t)}],ParserStart:"main"},QA=l4;function p4(){return new em.Parser(em.Grammar.fromCompiled(QA))}function YA(t){let e=p4();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function tm(t,e){let r=YA(t);return Gf(r,e)}function vl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...ZA(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return ZA(t.destination);case"parsed":return vl(tm(t.content,t.arguments));default:return[t.target]}}function ZA(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function aS(t){return t.flatMap(oS)}function oS(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(oS);case"range":return[t.anchor,t.active].flatMap(oS);case"implicit":return[]}}var u4={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},f4={purple:"pink"};function m4(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=u4[e.scopeType.type]??e.scopeType.type)})}function d4(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=f4[t.mark.symbolColor]??t.mark.symbolColor)}function sS(t){aS(t).forEach(e=>{m4(e),d4(e)})}function XA(t){return{...t,version:1}}var h4={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},g4={type:"primitive",isImplicit:!0},JA=t=>_i(t,h4)?g4:t;function eP(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:x4(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function y4(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function cS(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:s,selectionType:l,position:p}=t,f=[];if(p&&p!=="contents"&&(p==="before"?o==="inside"?f.push({type:"position",position:"start"}):e==="remove"?f.push({type:"leading"}):f.push({type:"position",position:"before"}):o==="inside"?f.push({type:"position",position:"end"}):e==="remove"?f.push({type:"trailing"}):f.push({type:"position",position:"after"})),l)switch(l){case"token":if(s?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:f.push({type:"containingScope",scopeType:{type:l}})}return s&&f.push(...y4(s)),{type:r,isImplicit:n,modifiers:f.length>0?f:void 0,mark:i?.type==="cursorToken"?void 0:i}}function tP(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>tP(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:s,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:cS(i,e),active:cS(o,e),excludeAnchor:s??!1,excludeActive:l??!1}}case"primitive":return cS(t,e)}}function x4(t,e){return t.map(r=>tP(r,e)).map(r=>r.type==="primitive"?JA(r):r)}function rP(t){return{...t,version:3,targets:t.targets.map(nP)}}function nP(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>nP(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:lS(e),active:lS(r),...n}}case"primitive":return lS(t)}}function lS(t){let e=t.modifiers!=null?t.modifiers.map(S4):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:wl(r),modifiers:e},active:{type:"primitive",mark:wl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?T4(t.mark):void 0,modifiers:e}}function T4(t){switch(t.type){case"lineNumber":return v4(t);default:return t}}function S4(t){switch(t.type){case"ordinalRange":return b4(t);default:return t}}function v4(t){return _i(t.anchor,t.active)?wl(t.anchor):{type:"range",anchor:wl(t.anchor),active:wl(t.active)}}function b4(t){return t.anchor===t.active?bl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?bl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?bl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:bl(t.scopeType,t.anchor),active:bl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function wl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function bl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function oP(t){return{...t,version:4,targets:t.targets.map(aP)}}function aP(t){switch(t.type){case"primitive":return iP(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:iP(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(aP)}}}}function iP(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function sP(t){return{...t,version:5,action:w4(t.action),targets:t.targets.map(rm)}}function w4(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=E4(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function E4(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function rm(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(rm)};case"range":return{...t,anchor:rm(t.anchor),active:rm(t.active)};case"primitive":return{...t,mark:t.mark!=null?pS(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(uS):void 0}}}function pS(t){return t.type==="range"?{...t,anchor:pS(t.anchor),active:pS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function uS(t){return t.type==="range"?{...t,anchor:uS(t.anchor),active:uS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var _4={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function fS(t){let e=_4[t]??t;if(!uA.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function cP(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:R4(t.action,t.targets)}}function R4(t,e){let r=fS(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:mn(e[0]),destination:El(e[1])};case"swapTargets":return{name:r,target1:mn(e[0]),target2:mn(e[1])};case"callAsFunction":return{name:r,callee:mn(e[0]),argument:mn(e[1])};case"pasteFromClipboard":return{name:r,destination:El(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:mn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:mn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:El(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:mn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:mn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:El(e[0])};case"highlight":{let n={name:r,target:mn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:El(e[0])};case"getText":return{name:r,options:t.args?.[0],target:mn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:mn(e[0])}}}function mn(t){switch(t.type){case"list":case"range":case"primitive":return k4(t);case"implicit":return t}}function k4(t){switch(t.type){case"list":return A4(t);case"range":case"primitive":return nm(t)}}function A4(t){return{...t,elements:t.elements.map(nm)}}function nm(t){switch(t.type){case"range":return lP(t);case"primitive":return im(t)}}function lP(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:im(e),active:im(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function im(t){let e={type:"primitive"},r=C4(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function El(t){switch(t.type){case"list":return P4(t);case"range":return M4(t);case"primitive":return D4(t);case"implicit":return F4()}}function P4(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let s=om(o);s!=null?(i(),r=[nm(o)],n=s):r.push(nm(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function M4(t){return{type:"primitive",insertionMode:om(t.anchor)??"to",target:lP(t)}}function D4(t){return{type:"primitive",insertionMode:om(t)??"to",target:im(t)}}function F4(){return{type:"implicit"}}function om(t){switch(t.type){case"implicit":return"to";case"primitive":return I4(t);case"range":return om(t.anchor)}}function I4(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function C4(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function pP(t){return{...t,version:7}}function dS(t){let e=N4(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:jf(r,o=>{let s=vl(o);sS(s),r.name}),usePrePhraseSnapshot:n}}function N4(t,e){if(t.version>7)throw new Ou;for(;t.version<e;)switch(t.version){case 0:t=XA(t);break;case 1:t=eP(t);break;case 2:t=rP(t);break;case 3:t=oP(t);break;case 4:t=sP(t);break;case 5:t=cP(t);break;case 6:t=pP(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var hS;function am(t){hS=t}function k(){if(hS==null)throw Error("Tried to access ide before it was injected");return hS}var sm=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var O4=25,cm=class{constructor(){this.targetMap=new Map;this.targetHistory=new _s(()=>new sm(O4));this.notifier=new tr}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of Ts)e(r,this.get(r));return this.notifier.registerListener(e)}};function Rt(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function Mr(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Fi(t,e,r){return Promise.all(gS(t,e).map(([n,i])=>r(n,i)))}async function ct(t,e){return Fi(t,r=>r.editor,e)}async function uP(t,e){let r=gS(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function fP(t){return gS(t,e=>e.editor)}function gS(t,e){let n=yl(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function dn(t,e){return e!=null?Mt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new Pe(i.end,i.start):new Pe(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function hn(t,e){return t.textualType==="line"?zr(e):hr(e)}function L4(t){return hn(t,t.contentRange)}function Le(t,e,r,n=L4){return t.flashRanges(e.map(i=>({editor:i.editor,range:n(i),style:r})))}function fo(t,e){return new Y(new de(e.start.line,0),t.document.lineAt(e.end).range.end)}function yS(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function mP(t,e){let[r,n]=e instanceof de?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Ii(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var lm=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=H4(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?U4(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=s=>this.updateRange(s,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Ii(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new Y(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),s=o+r.length;return new Y(this.editor.document.positionAt(o),this.editor.document.positionAt(s))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function U4(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let s=o.rangeTrimmed?.start??o.range.end;s.character<r&&(r=s.character,n=o.text.slice(0,r))}return n}function H4(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function As(t,e,r,n){return B4(t.contentRange,e.contentRange,r,n)}function B4(t,e,r,n){return new Y(r?t.start:t.end,n?e.end:e.start)}function Ps(t,e,r,n){let i=r?t.contentRange.start:new de(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new Y(i,o)}var je=class t{constructor(e){this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.textualType="token";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return hn(this,this.getRemovalRange())}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:As(this,r,!0,!0)})}isEqual(e){return e instanceof t&&_i(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new lm(this,e)}toPlainObject(){return{type:this.type,contentRange:cl(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function pm(t,e){return V4(t,e.start,e.end)}function V4(t,e,r){return{editor:t.editor,selection:W4(t.selection,e,r)}}function W4(t,e,r){return t.isReversed?new Pe(r,e):new Pe(e,r)}function ca(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,s=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,p=r.positionAt(s),f=r.positionAt(l);return new Y(p,f)}function um(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var Ke=class extends je{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.textualType=r.textualType??"token",this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,textualType:this.textualType,insertionDelimiter:this.insertionDelimiter}}};function Ms(t,e,r){return um(Ke,t,e,r)}var fm=class extends je{constructor(r){super(r);this.type="DocumentTarget";this.textualType="line";this.insertionDelimiter=`

`}getInterior(){return[new Ke({editor:this.editor,isReversed:this.isReversed,contentRange:ca(this.editor,this.contentRange)})]}getRemovalRange(){return this.contentRange}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getCloneParameters(){return this.state}};var gr=class t extends je{constructor(){super(...arguments);this.type="LineTarget";this.textualType="line";this.insertionDelimiter=`
`;this.getRemovalHighlightRange=()=>zr(this.fullLineContentRange)}get fullLineContentRange(){return fo(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return Ms(this.editor,$4(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return Ms(this.editor,j4(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:Ps(this,n,!0,!0)})}getCloneParameters(){return this.state}};function $4(t,e){let{start:r}=e;return r.line>0?new Y(t.document.lineAt(r.line-1).range.end,e.start):void 0}function j4(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new Y(e.end,new de(r.line+1,0)):void 0}function xS(t,e,r){return um(gr,t,e,r)}var mm=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var dm=class extends je{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new mm(this,r)}};var mo=class t extends je{constructor(){super(...arguments);this.type="ParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`}getLeadingDelimiterTarget(){return xS(this.editor,z4(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return xS(this.editor,q4(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new gr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return fo(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange;return zr(n)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Ps(this,n,!0,!0)})}getCloneParameters(){return this.state}};function z4(t,e){let{document:r}=t,n=r.lineAt(e.start),i=G4(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new Y(new de(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new Y(new de(0,0),r.lineAt(n.lineNumber-1).range.end)}function q4(t,e){let{document:r}=t,n=r.lineAt(e.end),i=K4(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new Y(new de(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new Y(new de(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function G4(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function K4(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var ho=class extends je{constructor(){super(...arguments);this.type="RawSelectionTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};function _l(t){let e=Ii(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var Q4=['"',"'","(","[","{","<"],Y4=['"',"'",")","]","}",">",",",";",":"];function Kn(t){let{editor:e}=t,{start:r}=Ii(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new Ke({contentRange:new Y(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function Qn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new Ke({contentRange:new Y(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function go(t){let{editor:e}=t,r=Ii(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),s=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=fo(e,r);return o.union(s).isRangeEqual(l)?l:!s.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||Q4.includes(Z4(e,r)))?r.union(s):!o.isEmpty&&(r.end.isEqual(l.end)||Y4.includes(X4(e,r)))?r.union(o):r}function Z4(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new Y(r.translate(void 0,-1),r)):""}function X4(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new Y(r.translate(void 0,1),r)):""}var ir=class extends je{constructor(){super(...arguments);this.type="TokenTarget";this.textualType="token";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return Kn(this)}getTrailingDelimiterTarget(){return Qn(this)}getRemovalRange(){return go(this)}getCloneParameters(){return this.state}};function TS(t){let{editor:e,isReversed:r}=t,{document:n}=e,i=Ii(t.contentRange,t.prefixRange);return J4(n,i)?e9(n,i)?new mo({editor:e,isReversed:r,contentRange:i}):new gr({editor:e,isReversed:r,contentRange:i}):new ir({editor:e,isReversed:r,contentRange:i})}function J4(t,e){let r=t.lineAt(e.start).rangeTrimmed?.start,n=t.lineAt(e.end).rangeTrimmed?.end;return r!=null&&n!=null&&r.isEqual(e.start)&&n.isEqual(e.end)}function e9(t,e){let{start:r,end:n}=e;return(r.line===0||t.lineAt(r.line-1).isEmptyOrWhitespace)&&(n.line===t.lineCount-1||t.lineAt(n.line+1).isEmptyOrWhitespace)}var yo=class t extends je{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??t9(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new Ke({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return Kn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new Ke({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return Qn(this)}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?_l(this):TS(this).getRemovalRange()}getRemovalHighlightRange(){return this.removalRange_!=null?hn(this,this.removalRange_):this.hasDelimiterRange_?hn(this,_l(this)):TS(this).getRemovalHighlightRange()}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?(this.removalRange_??this.contentRange).union(n.removalRange_??n.contentRange):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:this.contentRange.union(n.contentRange)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function t9(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var hm=class t extends je{constructor(r){super(r);this.type="SubTokenWordTarget";this.textualType="word";this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return Ms(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return Ms(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return _l(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:As(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Ds=class t extends je{constructor(r){super({...r,contentRange:ca(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:this.fullInteriorRange.union(n.fullInteriorRange)})}};var gm=class extends je{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return Kn(this)}getTrailingDelimiterTarget(){return Qn(this)}getRemovalRange(){return go(this)}getInterior(){return[new Ds({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new ir({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Ot=class extends je{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.textualType=r.textualType??"token"}getLeadingDelimiterTarget(){return Kn(this)}getTrailingDelimiterTarget(){return Qn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:go(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,textualType:this.textualType,hasExplicitRange:this.hasExplicitRange}}};var ym=class extends je{constructor(){super(...arguments);this.type="ImplicitTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var xm=class extends je{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:dP(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return Kn(this)}getTrailingDelimiterTarget(){return Qn(this)}getRemovalRange(){return go(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new Ke({editor:this.editor,contentRange:dP(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function dP(t,e,r){return r?new Y(e.start,t.end):new Y(t.start,e.end)}var Tm=class t extends je{constructor(r){super({...r,contentRange:r9(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new gr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return fo(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=(()=>{if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n!=null?this.fullLineContentRange.union(n.contentRange):this.fullLineContentRange})();return zr(r)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function r9(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function Sm(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var Fs=class{run(){return Sm(k()).map(e=>new Ot({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,textualType:"character"}))}};var Yn=class{constructor(e,r){this.debouncer=new Cu(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var vm=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Yn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new Fs().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var bm=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var n9=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],i9=n9.map(jr).join("|"),o9=["[a-zA-Z0-9]",i9].join("|"),a9=new RegExp(`^(${o9})$`,"u"),s9="[unk]",c9=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,wm=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new tr;this.getTokenGraphemes=e=>un(e,c9,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;k().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(k().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=k().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=cT(o),a9.test(o)||(o=s9)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function la(){return SS==null&&(SS=new wm),SS}var SS;var l9=["-","+","*","/","=","<",">","_","#",".","|","&",":"],p9=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],u9=["\\p{L}","\\p{M}","\\p{N}"],f9="[^\\s\\w]",m9="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function d9(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:s}=t,l=r.map(jr).map(T=>`${T}+`).join("|"),p=e.map(jr).join("|"),d=`(${n.concat(i.map(jr)).join("|")})+`,h=`(${n.join("|")})+`,y=[p,o,d,l,s].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(h,"gu"),tokenMatcher:new RegExp(y,"gu")}}var vS=new Map;function Dr(t){let e=k().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!vS.has(r)){let n={fixedTokens:p9,repeatableSymbols:l9,identifierWordRegexes:u9,identifierWordDelimiters:e,numbersRegex:m9,singleSymbolsRegex:f9};vS.set(r,d9(n))}return vS.get(r)}function hP(t,e,r){return un(t,Dr(e).tokenMatcher,r)}var h9=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,Is=class{constructor(e){this.wordRegex=Dr(e).wordMatcher}splitIdentifier(e){let r=al(e,this.wordRegex);return r.length>1?r:al(e,h9)}};var gP=({penalty:t})=>-t,yP=({isFirstLetter:t})=>t?-1:0;function xP(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function TP(t,e){let r=Jc(n=>hT(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function bS(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function SP(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function vP(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=g9(r,n)}return r[0]}function g9(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function bP({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,s){return vP(s,[bS(i),SP(r),bS(o),xP(t),gP,yP,TP(n,e)])}function wP(t,e,r){let n={},i=new po(({grapheme:o,hatStyle:s})=>[o,s]);return t.forEach(({token:o,rank:s})=>{let l=e.get(o);l!=null&&i.set(l,s),r.getTokenGraphemes(o.text).forEach(({text:p})=>{let f;p in n?f=n[p]:(f=[],n[p]=f),f.push(s)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function EP(t,e=[]){return new Map(mT(ot,Zo)(el([e],t.visibleRanges.map(r=>gT(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function _P(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let s=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return s-l}}function RP(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return hP(n,r,o=>{let s=i+o.index,l=i+o.index+o[0].length,p=new Y(t.document.positionAt(s),t.document.positionAt(l));return{editor:t,text:o[0],range:p,offsets:{start:s,end:l}}})}function kP(t,e,r){let i=x9(t,e).flatMap(o=>{let s=o.selections[0].active,l=EP(o,[s.line]),p=ot(o.visibleRanges.map(f=>RP(o,f).map(d=>({...d,displayLine:l.get(d.range.start.line)}))));return p.sort(_P(l.get(s.line),s.character)),p});return y9(r,i).map((o,s)=>({token:o,rank:-s}))}function y9(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function x9(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function wS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:s}){let l=r==null?void 0:AP(r),p=AP(n),f=kP(o,s,l),d=wP(f,p,t),h=Object.keys(e),y=new _s(()=>[...h]);return f.map(({token:T,rank:w})=>{let E=T9(t,T,y,e),U=bP(d,i,w,l?.get(T),p.get(T),E);if(U!=null)return y.set(U.grapheme.text,y.get(U.grapheme.text).filter(V=>V!==U.style)),S9(T,U)}).filter(T=>T!=null)}function AP(t){let e=new po(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function T9(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text),s=new Set(new Is(e.editor.document.languageId).splitIdentifier(e.text).map(l=>l.index));for(let l of o){let p=s.has(l.tokenStartOffset);for(let f of r.get(l.text))i.push({grapheme:l,style:f,penalty:n[f].penalty,isFirstLetter:p})}return i}function S9(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new Y(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var Em=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];k().disposeOnExit(this);let n=new Yn(k().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeActiveTextEditor(n.run),k().onDidChangeVisibleTextEditors(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorSelection(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),la().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:la().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?wS({tokenGraphemeSplitter:la(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:k().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:k().activeTextEditor,visibleTextEditors:k().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:s}})=>({editor:s,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var _m=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:s}=n,l=this.makeTokenLive(s);return this.map[xl(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=Dr(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[xl(e,la().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var v9=6e4,Rm=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;k().disposeOnExit(this),this.activeMap=new _m(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new Em(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>v9?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function ES(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var AS=Vr(kl(),1);function PS(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:s,end:l}}=e;return(0,AS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,AS.invariant)(n>=s&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=s?s+o:Math.min(s,i),end:n<=l?l+o:Math.min(l,i)}}var CP=Vr(kl(),1);function MS(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,CP.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let s=e.expansionBehavior.end;switch(s.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(wf(s.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let s=e.expansionBehavior.start;switch(s.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(bf(s.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var DS=Vr(kl(),1);function FS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:s},text:l}=e;if((0,DS.invariant)(s>o,()=>"Selection range expected to be nonempty"),(0,DS.invariant)(n>=o&&n<=s,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<s)return{start:o,end:s+i};if(n===o){let p=e.expansionBehavior.start,f=s+i;switch(p.type){case"closed":return{start:o+i,end:f};case"open":return{start:o,end:f};case"regex":{let d=r+l,h=bf(p.regex),y=d.search(h);for(;y>r.length;)d=d.slice(0,y),y=d.search(h);return y===-1?{start:o,end:f}:{start:o+y,end:f}}}}else{let p=e.expansionBehavior.end,f=o;switch(p.type){case"closed":return{start:f,end:s};case"open":return{start:f,end:s+i};case"regex":{let d=l+r,h=wf(p.regex),y=d.match(h),T=y==null?0:y[0].length;for(;T!==0&&T<l.length;)d=l.slice(T)+r,y=d.match(h),T=y==null?0:T+y[0].length;return T===0?{start:f,end:s}:{start:f,end:o+T}}}}}function NP(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:s}=e.offsets,l=Math.min(n,o),p="";return o<n&&(p+=e.text.substring(0,n-o)),p+=t.event.text,i<s&&(p+=e.text.substring(s-i,e.text.length)),p.substring(r.start-l,r.end-l)}function OP(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let s=o.text.length-o.rangeLength,l=o.rangeOffset,p=l+o.rangeLength,f=l,d=p+s;return{displacement:s,event:o,originalOffsets:{start:l,end:p},finalOffsets:{start:f,end:d}}});for(let o of e){let s=o.offsets,l=i.map(f=>{let d;return f.originalOffsets.start>s.end?{start:0,end:0}:f.originalOffsets.end<s.start?{start:f.displacement,end:f.displacement}:(f.event.rangeLength===0?o.range.isEmpty?d=MS(f,o):d=FS(f,o):d=PS(f,o),o.text=NP(f,o,d),{start:d.start-s.start,end:d.end-s.end})}),p={start:s.start+gf(l,({start:f})=>f),end:s.end+gf(l,({end:f})=>f)};o.range=o.range.with(r.positionAt(p.start),r.positionAt(p.end)),o.offsets=p}}var Am=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return ES(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return ES(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>dr(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>dr(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=k().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>M9(r,i)?{...i,isReplace:!0}:i)};OP(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function M9(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var Pm=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var Mm=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var Dm=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var Fm=class{getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e,r){throw new Error("Snippets are not implemented.")}};var Im=class{getSpokenFormEntries(){throw new Es}onDidChange(){return{dispose:()=>{}}}};var Cm=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}createQuery(e,r){throw new Error("Tree sitter not provided")}};var lt=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var LP={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleBacktickQuotes:["```","```"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var UP=new po(t=>t);for(let[t,e]of Object.entries(LP))e!=null&&UP.set(e,t);function HP(t,e,r){let n=UP.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}function BP(t){throw new lt(`${t.type} insertion snippet`)}function VP(t){throw new lt(`${t.type} wrap with snippet`)}function Al(t,e,r){let n=r==="vertical"?`${bt.verticalRange} `:"";if(t&&e)return n+bt.rangeExclusive;if(t)throw new lt("Range exclude anchor");return e?n+bt.rangeExcludingEnd:r==="vertical"?bt.verticalRange:bt.rangeInclusive}function WP(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var D9=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],F9=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function Cs(t){let e=D9[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function Pl(t){let e=F9[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Nm=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new lt(`Modifier '${e.type}'`);case"containingScope":return e.ancestorIndex==null||e.ancestorIndex===0?this.handleScopeType(e.scopeType):[new Array(e.ancestorIndex).fill(this.spokenFormMap.modifierExtra.ancestor),this.handleScopeType(e.scopeType)];case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,Pl(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,Pl(e.start+1),r];let i=Cs(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,Ml(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,Ml(r)];throw new lt(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:Pl(e.anchor.start+1),n=this.handleModifier(e.active),i=Al(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let s=e.direction==="forward"?bt.forward:bt.backward;return[n,r,s]}let i=Cs(e.length),o=Ml(r);return e.direction==="forward"?[n,i,o]:[n,i,o,bt.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?bt.next:bt.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=Cs(e.length);if(e.length===1)return[i,n,r];let s=Ml(r);return[i,n,o,s]}if(e.length===1){let o=Pl(e.offset);return[i,o,n,r]}throw new lt(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new lt(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,jP(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};case"interior":return this.spokenFormMap.simpleModifier.interiorOnly;default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(CA(r)),n!=null&&i.push(NA(n)),i.push(jP(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let s=Al(e.excludeAnchor,e.excludeActive);return[r,n,s,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new lt(`Mark '${e.type}'`);default:return[Qf[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new lt("Absolute line numbers");case"modulo100":return[Yf.modulo100,Cs(e.lineNumber+1)];case"relative":return[e.lineNumber<0?Yf.relativeUp:Yf.relativeDown,Cs(Math.abs(e.lineNumber))]}}};function Ml(t){if(typeof t=="string")return $P(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),Ml(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map($P)}}}function $P(t){return`${t}s`}function jP(t,e,r){let n=t[r];if(n==null)throw new lt(`${e} '${r}'`);return n}var Ns=class{constructor(e){this.spokenFormMap=WP(e),this.primitiveGenerator=new Nm(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new lt(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:zP(e())}}catch(r){if(r instanceof lt)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new lt(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),bt.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[HP(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],BP(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new lt(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[VP(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new lt(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new lt("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[bt.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=Al(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new lt("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[bt.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return bt.sourceDestinationConnective;case"before":return bt.before;case"after":return bt.after}}};function zP(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:qP(t.map(zP)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${hl(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new lt(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function qP(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=qP(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Om=class{constructor(e){this.talonSpokenForms=e;this.notifier=new tr;this.spokenFormMap_={...Pi};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps()),this.customSpokenFormsInitialized=this.updateSpokenFormMaps()}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof dl)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof Es)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");ft(k().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}this.spokenFormMap_={...Pi},this.notifier.notifyListeners();return}for(let r of mA)I9(this.spokenFormMap_,r,nS[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function I9(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let s of i){let{defaultSpokenForms:l=[],isPrivate:p=!1}=r[s]??{},f=n[s];o[s]=f==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!p,isCustom:!1,isPrivate:p}:{defaultSpokenForms:l,spokenForms:f,requiresTalonUpdate:!1,isCustom:!_i(l,f),isPrivate:p}}t[e]=o}var Lm=class{constructor(e){this.customSpokenForms=new Om(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new Ns(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new Ns(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*C9(t){for(let e of t)for(let r of e)yield r}function*Dl(t,e){let r=Hm(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*IS(t){let e=Hm(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var Tve=Symbol();function*N9(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*Um(t,e){let r=0;for(let n of t)e(n,r++)&&(yield n)}function*Kt(t,e){for(let r of t)yield e(r)}function*KP(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let s=-1,l=Hm(t),p;for(;;){if(s++,o!==null&&s>=o||(p=l.next(),p.done))return;s<i||(s-i)%n===0&&(yield p.value)}}function*O9(t,e){let r=0,n=Hm(t),i;for(;!(i=n.next()).done;){let o=i.value;if(!e(o,r++))return;yield o}}function Hm(t){return t[Symbol.iterator]()}function Os(t,e){return Array.from(Kt(t,e))}function GP(t,e,r){let n=N9(t,r),i=r>=0?o=>o<e:o=>o>e;return O9(n,i)}function QP(t,e,r=1){return e!==void 0?GP(t,e,r):GP(0,t,r)}function Bm(t,e){return C9(Kt(t,e))}function Kr(t,e,{domain:r},{domain:n}){return t==="forward"?L9(e,r,n):U9(e,r,n)}function L9(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let s=e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&!i){let s=e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&i){let s=e.end.compareTo(r.start);return s!==0?s:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function U9(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let s=-e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&!i){let s=-e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&i){let s=-e.start.compareTo(r.end);return s!==0?s:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function YP(t,e,r,n,i,o){return H9(t,n,i,o)&&(i==null||Kr(r,n.includeDescendantScopes?t:e,i,o)<0)}function H9(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:s,skipAncestorScopes:l}=e,{domain:p}=n;switch(i){case"disallowed":if(p.contains(t))return!1;break;case"disallowedIfStrict":if(mP(p,t))return!1;break;case"required":if(!p.contains(t))return!1;break}return l&&r!=null&&p.contains(r.domain)?!1:B9(new Y(t,o),p,s)}function B9(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var V9={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},We=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...V9,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},s,l=r;for(let p of this.generateScopeCandidates(e,r,n,o))if(YP(r,l,n,o,s,p)&&(yield p,s=p,l=n==="forward"?p.domain.end:p.domain.start),this.canStopEarly(r,n,o,s,p))return}canStopEarly(e,r,n,i,o){let{containment:s,distalPosition:l,skipAncestorScopes:p}=n;if(this.isHierarchical&&!p)return!1;let f=this.isHierarchical&&p?i:o;return f==null?!1:!!(s==="required"&&(r==="forward"?f.domain.end.isAfter(e):f.domain.start.isBefore(e))||(r==="forward"?f.domain.end.isAfterOrEqual(l):f.domain.start.isBeforeOrEqual(l)))}};var Fr=class extends We{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:s,...l}=o,p=this.searchScopeHandler.generateScopes(r,n,i,{containment:s==="required"?"required":void 0,...l});return Bm(p,f=>this.generateScopesInSearchScope(i,f))}};var Vm=class extends We{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield ZP(r,o);else for(let o=n.line;o>=0;o--)yield ZP(r,o)}};function ZP(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[CS(t,n,r)]}}function CS(t,e,r){return new gr({editor:t,isReversed:e,contentRange:NS(t,r)})}function NS(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new Y(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function yn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),s=l=>new Y(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Kt(o.matchAll(t),s):Array.from(o.matchAll(t),s).reverse()}var Wm=class extends Fr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=Dr(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Kt(yn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new ir({editor:n,contentRange:o,isReversed:s})]}))}};function $m(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let s=Xo(o,n),l=Xo(o,i);if(s&&!l)return!0;if(l&&!s)return!1}}var W9=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,$9=/[$]/g,j9=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,jm=class extends Fr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Kt(yn(W9,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Ke({editor:n,contentRange:o,isReversed:s,textualType:"character"})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Dr(this.languageId);return $m(r,n,[i,$9,j9])}};var zm=class extends Fr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new Is(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(p=>new Y(i.positionAt(o+p.index),i.positionAt(o+p.index+p.text.length)));return l.map((p,f)=>({editor:r,domain:p,getTargets:d=>{let h=f>0?l[f-1]:null,y=f+1<l.length?l[f+1]:null;return[z9(d,r,h,p,y)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function z9(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new Y(r.end,n.start):void 0,s=i!=null&&i.start.isAfter(n.end)?new Y(n.end,i.start):void 0,p=o!=null||s!=null?e.document.getText(o??s):"";return new hm({editor:e,isReversed:t,contentRange:n,insertionDelimiter:p,leadingDelimiterRange:o,trailingDelimiterRange:s})}var q9=/[$]/g,qm=class extends Fr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=Dr(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Kt(yn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new ir({editor:n,contentRange:o,isReversed:s})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Dr(this.languageId);return $m(r,n,[i,q9])}};var Gm=class extends We{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:s=>[new fm({editor:r,isReversed:s,contentRange:o})]}}};function Km(t,e,r,n,i){if(!t&&n!=null&&i!=null&&yS(e,n)>yS(e,i))return r.union(n)}function Ls(t){return t.containment==null&&t.skipAncestorScopes}function XP(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:s,end:l}=G9(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(s),end:t.positionAt(l)}}function G9(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let s=n==="disallowed"?1:-o;return r==="forward"?{start:t+s,end:e+o}:{start:e-o,end:t-s}}function JP(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Us=class extends We{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:s}=r,l=Ls(o),{start:p,end:f}=XP(s,n,i,o),d=this.query.matches(s,p,f).map(h=>this.matchToScope(r,h,l)).filter(h=>h!=null).sort((h,y)=>Kr(i,n,h,y));yield*JP(d,(h,y)=>h.domain.isRangeEqual(y.domain),h=>h.length===1?h[0]:{...h[0],getTargets(y){let T=tl(h.flatMap(w=>w.getTargets(y)),(w,E)=>w.isEqual(E));if(T.length>1&&!h.every(w=>w.allowMultiple)){let w="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(ft(k().messages,"BaseTreeSitterScopeHandler.allow-multiple",w),k().runMode==="test")throw Error(w)}return T}})}};function OS(t,e,r,n){return n?Hs(t,`${e}.${r}`,`_.${r}`):Hs(t,`${e}.${r}`)??(Hs(t,e)!=null?Hs(t,`_.${r}`):void 0)}function To(t,e,r,n){return OS(t,e,r,n)?.range}function Hs(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var Qm=class extends Us{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n,i){let o=this.iterateeScopeType.type,s=OS(n,o,"iteration",!1);if(s==null)return;let{range:l,allowMultiple:p}=s,f=To(n,o,"iteration.domain",!1)??l;return{editor:r,domain:f,allowMultiple:p,getTargets:d=>[new Ke({editor:r,isReversed:d,contentRange:l})]}}};var Ym=class extends Us{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new Qm(this.query,this.scopeType)}}matchToScope(r,n,i){let o=this.scopeType.type,s=Hs(n,o);if(s==null)return;let{range:l,allowMultiple:p,insertionDelimiter:f}=s,d=To(n,o,"domain",!0)??l,h=To(n,o,"prefix",!0)?.with(void 0,l.start),y=To(n,o,"leading",!0)?.with(void 0,h?.start??l.start),T=To(n,o,"trailing",!0)?.with(l.end),w=To(n,o,"removal",!0);return w==null&&(o==="collectionItem"||o==="argumentOrParameter")&&(w=Km(i,r,l,y,T)),{editor:r,domain:d,allowMultiple:p,getTargets:E=>[new yo({scopeTypeType:o,editor:r,isReversed:E,contentRange:l,prefixRange:h,removalRange:w,leadingDelimiterRange:y,trailingDelimiterRange:T,insertionDelimiter:f})]}}};function eM(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function tM(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,s=!1;for(;!s&&!e(o);)({value:o,done:s}=n.next());return s?[]:[{iterator:n,value:o,index:i}]})}var Xn=class t extends We{constructor(r,n){super();this.scopeHandlers=r;this.getIterationScopeHandler=n;this.isHierarchical=!0;this.scopeType=void 0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(r,i,o)}static createFromScopeHandlers(r,n,i){let o=()=>new t(i.map(s=>r.create(s.iterationScopeType,n)),()=>{throw new Error("Not implemented")});return new t(i,o)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let p=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[p].generateScopes(r,n,i,o);return}let s=this.scopeHandlers.map(p=>p.generateScopes(r,n,i,o)[Symbol.iterator]()),l=eM(s);for(;l.length>0;){l.sort((d,h)=>Kr(i,n,d.value,h.value));let p=l[0],f=p.value;this.lastYieldedIndex=p.index,yield f,l=tM(l,d=>Kr(i,n,f,d)<0)}}};var Zm=class extends We{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,s=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,p=K9(o,n,i),f=r.document.lineAt(n);for(let d=n.line+s;d!==l;d+=s){let h=r.document.lineAt(d);h.isEmptyOrWhitespace?p!=null&&(yield rM(r,p.range.union(f.range)),p=void 0):p==null&&(p=h),f=h}p!=null&&(yield rM(r,p.range.union(f.range)))}};function K9(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let s=e.line+n;s!==i;s+=n){let l=t.lineAt(s);if(l.isEmptyOrWhitespace)break;o=l}return o}}function rM(t,e){return{editor:t,domain:e,getTargets:r=>[new mo({editor:t,isReversed:r,contentRange:NS(t,e)})]}}function Fl(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function nM(t,e){return t.slice(t.length-e.length)===e}var LS,Y9=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function iM(t){t?LS=t:LS=Y9}function US(t){return/^[A-Z][a-z].*/.test(t)||Xm(t)}function oM(t){return US(t)||/``|"|'/.test(t.substring(0,2))}function aM(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~LS.indexOf(e)}function sM(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function HS(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function cM(t){return t.length<=3?!0:US(t)}function BS(t,e){return e.length>0?t<5&&e[0].length<6&&US(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function Xm(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function lM(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function pM(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function uM(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function fM(t){return t==="."||t==="!"||t==="?"}var dM=" @~@ ",mM=dM.trim(),X9=new RegExp("\\S",""),J9=new RegExp("\\n+|[-#=_+*]{4,}","g"),e6=new RegExp("\\S+|\\n","g"),t6={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function hM(t,e){if(!t)return[];if(!X9.test(t))return[];let r={...t6,...e};iM(r.abbreviations),r.newlineBoundaries&&(t=t.replace(J9,dM));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(h,y){return y%2})):n=t.trim().match(e6)??[];let o=0,s=0,l=[],p=[],f=[];if(!n||!n.length)return[];for(let h=0,y=n.length;h<y;h++){if(o++,f.push(n[h]),~n[h].indexOf(",")&&(o=0),fM(n[h])||Fl(n[h],"?!")||n[h]===mM){r.newlineBoundaries&&n[h]===mM&&f.pop(),p.push(f),o=0,f=[];continue}if((Fl(n[h],'"')||Fl(n[h],"\u201D"))&&(n[h]=n[h].slice(0,-1)),Fl(n[h],".")){if(h+1<y){if(n[h].length===2&&isNaN(n[h].charAt(0))||aM(n[h]))continue;if(oM(n[h+1])){if(sM(n[h],n[h+1])||BS(o,n.slice(h,6))||Xm(n[h+1])&&cM(n[h]))continue}else if(nM(n[h],"..")||HS(n[h])||BS(o,n.slice(h,5)))continue}p.push(f),f=[],o=0;continue}(s=n[h].indexOf("."))>-1&&(Xm(n[h],s)||HS(n[h])||pM(n[h])||lM(n[h]))||(l=uM(n[h]))&&(f.pop(),f.push(l[0]),p.push(f),f=[],o=0,f.push(l[1]))}return f.length&&p.push(f),p=p.filter(function(h){return h.length>0}),p.slice(1).reduce(function(h,y){let T=h[h.length-1];return T.length===1&&/^.{1,2}[.]$/.test(T[0])&&!/[.]/.test(y[0])?(h.pop(),h.push(T.concat(y)),h):(h.push(y),h)},[p[0]]).map(function(h,y){if(r.preserveWhitespace&&!r.newlineBoundaries){let T=h.length*2;return y===0&&(T+=1),i.splice(0,T).join("")}return h.join(" ")})}var r6=/\S*\p{L}/u,gM=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,n6={newlineBoundaries:!1,preserveWhitespace:!0},Jm=class{*segment(e){let r=hM(e,n6),n=0;for(let i of r){let o=i.split(gM).filter(s=>s!=null);for(let s of o){if(!o6(s)){let l=i6(s,n);l!=null&&(yield l)}n+=s.length}}}};function i6(t,e){let r=dk(r6,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function o6(t){return Xo(gM,t)}var ed=class extends Fr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new Jm}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),s=n.document.getText(i),l=f=>{let d=new Y(n.document.positionAt(o+f.index),n.document.positionAt(o+f.index+f.text.length));return{editor:n,domain:d,getTargets:h=>[new ir({editor:n,contentRange:d,isReversed:h})]}},p=this.segmenter.segment(s);return r==="forward"?Kt(p,l):Array.from(p,l).reverse()}};var Bs=class extends Fr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Kt(yn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new ir({editor:n,contentRange:o,isReversed:s})]}))}},td=class extends Bs{constructor(){super(...arguments);this.regex=/\S+/g}},rd=class extends Bs{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},nd=class extends Bs{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},id=class extends Bs{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(jr(this.scopeType.character),"gui")}};var od=class extends We{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let s=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:Ls(o)?"required":o.containment}));for(let p of s){let f=[];for(let d of l){let h=p.domain.intersection(d.domain);h!=null&&!h.isEmpty&&f.push({editor:r,domain:h,getTargets:y=>[this.getTargets(yM(p,y),yM(d,y))]})}f.push(p),f.sort((d,h)=>Kr(i,n,d,h)),yield*f}}};function yM(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var ad=class extends od{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new ir({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},sd=class extends od{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof mo))throw Error("Expected ParagraphTarget");return new Tm({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var Jn=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var Vs=class{constructor(e){this.children=a6(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function a6(t){let e=[],r=[];for(let n of t){let i=new VS(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new Jn(e)}var VS=class{constructor(e){this.item=e;this.children=new Jn([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var s6=",",WS=new RegExp(s6,"g");function xM(t){let e=t.getText();return un(e,WS,r=>new Y(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var TM={type:"fallback",scopeTypes:[{type:"surroundingPairInterior",delimiter:"collectionBoundary"},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return Xo(WS,e)}}]};function $S(t,e,r,n,i,o){let s=i!=null?new Y(i.end,n.start):void 0,l=o!=null?new Y(n.end,o.start):void 0,p=Km(t,e,n,s,l),f=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(d){return[new yo({scopeTypeType:"collectionItem",editor:e,isReversed:d,contentRange:n,insertionDelimiter:f,leadingDelimiterRange:s,trailingDelimiterRange:l,removalRange:p})]}}}function jS(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new de(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var cd=class extends We{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return TM}*generateScopeCandidates(r,n,i,o){let s=Ls(o),l=xM(r.document),p=jS(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),f=new Vs(p),d=jS(this.scopeHandlerFactory,this.languageId,r,"string"),h=new Jn(d),y=[],T=new Set,w=[];for(let E of l){if(h.contains(E))continue;let U;for(;w.length>0;){let ne=w[w.length-1];if(ne.iterationRange.contains(E)){U=ne;break}this.addScopes(y,ne),w.pop()}let V=f.getSmallestContaining(E)?.range,j=V??r.document.lineAt(E.start.line).range;if(U!=null&&U.iterationRange.isRangeEqual(j)){U.delimiters.push(E);continue}V!=null&&T.add(V),w.push({editor:r,isEveryScope:s,iterationRange:j,delimiters:[E]})}for(let E of w)this.addScopes(y,E);for(let E of p)if(!T.has(E.range)&&!E.range.isEmpty){let U=ca(r,E.range);U.isEmpty||y.push($S(s,r,E.range,U))}y.sort((E,U)=>Kr(i,n,E,U)),yield*y}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:s,delimiters:l}=n;if(l.length===0)return;let p=[];for(let h=0;h<l.length;++h){let y=l[h],T=l[h-1]?.end??o.start;p.push(new Y(T,y.start))}let f=l[l.length-1];p.push(new Y(f.end,o.end));let d=p.map(h=>ca(i,h));for(let h=0;h<d.length;++h)h===d.length-1&&i.document.getText(d[h]).trim()===""||r.push($S(s,i,o,d[h],d[h-1],d[h+1]))}};var ld=class extends We{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new cd(r,i),s=n.get(i)?.getScopeHandler(this.scopeType);return s==null?o:Xn.createFromScopeHandlers(r,i,[s,o])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var pd=class extends We{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new xt("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let s=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return Um(s.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var Ws=class t extends We{constructor(r){super();this.scopeHandlers=r;this.scopeType=void 0;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(o)}static createFromScopeHandlers(r){return new t(r)}get iterationScopeType(){throw new xt("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){for(let s of this.scopeHandlers)yield*s.generateScopes(r,n,i,o)}};var ud=class extends We{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let s=c6(r,n,i,o);for(let l of s)yield p6(l)}};function c6(t,e,r,n){let i=l6(t);if(i==null)return[];let{notebook:o,cell:s}=i;return n.containment==="required"?[s]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(s.index+1):o.cells.slice(0,s.index).reverse():n.distalPosition!=null&&new Y(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(s.index):o.cells.slice(0,s.index+1).reverse()}function l6(t){let e=t.document.uri.toString();for(let r of k().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function p6(t){let e=u6(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new dm({editor:e,isReversed:n,contentRange:r})]}}function u6(t){let e=t.document.uri.toString();for(let r of k().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var fd=class extends We{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let s=new ud,l=n.get(o)?.getScopeHandler(this.scopeType);return l==null?s:Xn.createFromScopeHandlers(r,o,[l,s])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var md=class extends We{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let s=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of s)yield{editor:r,domain:l.domain,getTargets(p){return l.getTargets(p).flatMap(f=>f.getInterior())}}}};function SM(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new Y(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:s=>[new gm({editor:t,isReversed:s,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function vM(t){let e=Zo(t.map(({text:r})=>r)).map(jr).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function wM(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new Jn(zS(n.disqualifyDelimiter)),o=new Jn(zS(n.pairDelimiter)),s=new Vs(zS(n.textFragment)),l=Object.fromEntries(r.map(d=>[d.text,d])),p=ST(e.getText(),vM(r)),f=[];for(let d of p){let h=d[0],y=new Y(e.positionAt(d.index),e.positionAt(d.index+h.length));bM(i.getContaining(y))==null&&f.push({delimiterInfo:l[h],textFragmentRange:s.getSmallestContaining(y)?.range,range:bM(o.getContaining(y))?.range??y})}return f}function bM(t){return t!=null&&!t.hasError()?t:void 0}function zS(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var dd=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],curlyBrackets:[["{","${"],"}"],tripleBacktickQuotes:[[],[]],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],backtickQuotes:["`","`"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),EM={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},markdown:{tripleBacktickQuotes:["```","```"]},ruby:{tripleDoubleQuotes:["%Q(",")"]}},EEe=Object.fromEntries(Object.values(dd)),_M={any:Ai(dd),string:["tripleDoubleQuotes","tripleSingleQuotes","tripleBacktickQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function RM(t){return t!=null&&t in EM?{...dd,...EM[t]}:dd}function kM(t,e){let r=_M[t]??[t];return f6(e,r)}function f6(t,e){let r=RM(t);return e.flatMap(n=>{let[i,o,s]=r[n],{isSingleLine:l=!1}=s??{},p=gl(i)?[i]:i,f=gl(o)?[o]:o;return Zo(el(p,f)).map(h=>{let y=p.includes(h),T=f.includes(h);return{text:h,side:y&&!T?"left":!y&&T?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function AM(t){let e=[],r=[];for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:s},textFragmentRange:l,range:p}=n;if(o==="left")r.push(n);else{let f=Yo(r,h=>h.delimiterInfo.delimiterName===i&&m6(h.textFragmentRange,l)&&d6(s,h.range,p));if(f===-1){o==="unknown"&&r.push(n);continue}let d=r[f];r.length=f,e.push({delimiterName:i,openingDelimiterRange:d.range,closingDelimiterRange:p})}}return e}function m6(t,e){return t==null||e==null?t===e:t.isRangeEqual(e)}function d6(t,e,r){return!t||e.start.line===r.start.line}var hd=class extends We{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){ft(k().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let s=wM(this.languageDefinitions.get(this.languageId),r.document,kM(this.scopeType.delimiter,this.languageId)),l=AM(s);l=h6(i,o,n,l),yield*l.map(p=>SM(r,p,this.scopeType.requireStrongContainment??!1)).sort((p,f)=>Kr(i,n,p,f))}};function h6(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var gd=class extends We{constructor(r,n,i,o){super();this.scopeHandlerFactory=r;this.languageDefinitions=n;this.scopeType=i;this.languageId=o;this.isHierarchical=!0}get iterationScopeType(){throw new xt("Iteration scope for InteriorScopeHandler")}*generateScopeCandidates(r,n,i,o){let s=new Y(n,o.distalPosition),l=this.getScopeHandler();if(l==null)return;let p=l.generateScopes(r,n,i,o);for(let f of p)this.shouldYield(s,f)&&(yield g6(f))}getScopeHandler(){let r=this.languageDefinitions.get(this.languageId)?.getScopeHandler(this.scopeType),n=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:"any"},this.languageId);return this.scopeType.explicitScopeType?r==null?n:Ws.createFromScopeHandlers([r,n]):r==null?n:Xn.createFromScopeHandlers(this.scopeHandlerFactory,this.languageId,[r,n])}shouldYield(r,n){return!this.scopeType.explicitScopeType||r.contains(n.domain)}};function g6(t){return{editor:t.editor,domain:t.domain,getTargets(e){return t.getTargets(e).flatMap(y6)}}}function y6(t){let e=t.getInterior();return e??[new Ds({editor:t.editor,isReversed:t.isReversed,fullInteriorRange:t.contentRange})]}var $s=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new jm(this,e,r);case"word":return new zm(this,e,r);case"token":return new qm(this,e,r);case"identifier":return new Wm(this,e,r);case"line":return new Vm(e,r);case"sentence":return new ed(this,e,r);case"paragraph":return new Zm(e,r);case"boundedParagraph":return new sd(this,e,r);case"document":return new Gm(e,r);case"nonWhitespaceSequence":return new td(this,e,r);case"boundedNonWhitespaceSequence":return new ad(this,e,r);case"url":return new rd(this,e,r);case"customRegex":return new nd(this,e,r);case"glyph":return new id(this,e,r);case"collectionItem":return new ld(this,this.languageDefinitions,r);case"surroundingPair":return new hd(this.languageDefinitions,e,r);case"surroundingPairInterior":return new md(this,e,r);case"notebookCell":return new fd(this,this.languageDefinitions,e,r);case"interior":return new gd(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return Xn.create(this,e,r);case"fallback":return Ws.create(this,e,r);case"conditional":return new pd(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function Qr(t,e){return new Y(t.row,t.column,e.row,e.column)}function qS(t){return new de(t.row,t.column)}function PM(t){return new Y(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function MM(t,e){return new Pe(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function So(t,e){return{selection:new Pe(new de(e.startPosition.row,e.startPosition.column),new de(e.endPosition.row,e.endPosition.column)),context:{}}}function x6(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new Pe(new de(i.startPosition.row,i.startPosition.column),new de(o.endPosition.row,o.endPosition.column)),context:{}}}function DM(){return v6(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function FM(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new Pe(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function IM(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=Qr(i.endPosition,r.startPosition):o=Qr(n.startPosition,r.startPosition):o=Qr(n.endPosition,r.startPosition)),{...So(e,r),context:{leadingDelimiterRange:o}}}}function js(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,s=new Set(t),l=new Set(e);return o=o.filter(p=>s.size>0?!s.has(p.type):l.size>0?l.has(p.type):!0),x6(n,o[0],o[o.length-1])}}function CM(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=Qr(r.endPosition,i.startPosition):o=Qr(r.endPosition,n.endPosition):o=Qr(r.endPosition,n.startPosition)),{...So(e,r),context:{trailingDelimiterRange:o}}}}function T6(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function S6(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function v6(t,e,r=_r,n=_r){return(i,o)=>{let s,l,p=r(o),f=n(o),d=S6(p,t),h=T6(f,t);d!=null&&(s=Qr(d.endPosition,p.startPosition)),h!=null&&(l=Qr(f.endPosition,h.startPosition));let y=b6(i,s,l,e);return{selection:new Pe(new de(p.startPosition.row,p.startPosition.column),new de(f.endPosition.row,f.endPosition.column)),context:{containingListDelimiter:y,leadingDelimiterRange:s,trailingDelimiterRange:l}}}}function b6(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return dT(o,"length")}function NM(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:p})=>p.endsWith(".start")).map(({range:{end:p}})=>p).sort((p,f)=>p.compareTo(f)).at(-1),i=t.filter(({name:p})=>p.endsWith(".end")).map(({range:{start:p}})=>p).sort((p,f)=>p.compareTo(f)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(ft(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:p})=>p.endsWith(".start")).length,s=t.filter(({name:p})=>p.endsWith(".end")).length,l=t.length-o-s;return l>0&&(o>0||s>0)&&(ft(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:p,range:f})=>p+" "+f.toString())}`),r=!0),l>1&&(ft(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:p,range:f})=>p+" "+f.toString())}`),r=!0),!r}function OM(t){if(t.hasError)return!0;let e=t.parent;for(;e!=null;){if(e.isError)return!0;if(e.hasError)return!1;if(e.previousSibling?.isError||e.nextSibling?.isError)return!0;e=e.parent}return!1}function GS(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var He={};V_(He,{BRAND:()=>K6,DIRTY:()=>ua,EMPTY_PATH:()=>R6,INVALID:()=>Se,NEVER:()=>F5,OK:()=>or,ParseStatus:()=>Qt,Schema:()=>De,ZodAny:()=>wo,ZodArray:()=>Li,ZodBigInt:()=>ma,ZodBoolean:()=>da,ZodBranded:()=>Ol,ZodCatch:()=>_a,ZodDate:()=>ha,ZodDefault:()=>Ea,ZodDiscriminatedUnion:()=>Sd,ZodEffects:()=>Sn,ZodEnum:()=>ba,ZodError:()=>Ir,ZodFirstPartyTypeKind:()=>ve,ZodFunction:()=>bd,ZodIntersection:()=>Ta,ZodIssueCode:()=>ee,ZodLazy:()=>Sa,ZodLiteral:()=>va,ZodMap:()=>Ys,ZodNaN:()=>Xs,ZodNativeEnum:()=>wa,ZodNever:()=>Cn,ZodNull:()=>ya,ZodNullable:()=>ri,ZodNumber:()=>fa,ZodObject:()=>Cr,ZodOptional:()=>xn,ZodParsedType:()=>oe,ZodPipeline:()=>Ll,ZodPromise:()=>Eo,ZodReadonly:()=>Ra,ZodRecord:()=>vd,ZodSchema:()=>De,ZodSet:()=>Zs,ZodString:()=>bo,ZodSymbol:()=>Ks,ZodTransformer:()=>Sn,ZodTuple:()=>ti,ZodType:()=>De,ZodUndefined:()=>ga,ZodUnion:()=>xa,ZodUnknown:()=>Oi,ZodVoid:()=>Qs,addIssueToContext:()=>re,any:()=>n5,array:()=>s5,bigint:()=>X6,boolean:()=>KM,coerce:()=>D5,custom:()=>zM,date:()=>J6,datetimeRegex:()=>$M,defaultErrorMap:()=>Ci,discriminatedUnion:()=>u5,effect:()=>w5,enum:()=>S5,function:()=>y5,getErrorMap:()=>zs,getParsedType:()=>ei,instanceof:()=>Y6,intersection:()=>f5,isAborted:()=>yd,isAsync:()=>qs,isDirty:()=>xd,isValid:()=>vo,late:()=>Q6,lazy:()=>x5,literal:()=>T5,makeIssue:()=>Il,map:()=>h5,nan:()=>Z6,nativeEnum:()=>v5,never:()=>o5,null:()=>r5,nullable:()=>_5,number:()=>GM,object:()=>c5,objectUtil:()=>KS,oboolean:()=>M5,onumber:()=>P5,optional:()=>E5,ostring:()=>A5,pipeline:()=>k5,preprocess:()=>R5,promise:()=>b5,quotelessJson:()=>w6,record:()=>d5,set:()=>g5,setErrorMap:()=>_6,strictObject:()=>l5,string:()=>qM,symbol:()=>e5,transformer:()=>w5,tuple:()=>m5,undefined:()=>t5,union:()=>p5,unknown:()=>i5,util:()=>Ue,void:()=>a5});var Ue;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(let l of o)s[l]=i[l];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(let s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ue||(Ue={}));var KS;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(KS||(KS={}));var oe=Ue.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ei=t=>{switch(typeof t){case"undefined":return oe.undefined;case"string":return oe.string;case"number":return Number.isNaN(t)?oe.nan:oe.number;case"boolean":return oe.boolean;case"function":return oe.function;case"bigint":return oe.bigint;case"symbol":return oe.symbol;case"object":return Array.isArray(t)?oe.array:t===null?oe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?oe.promise:typeof Map<"u"&&t instanceof Map?oe.map:typeof Set<"u"&&t instanceof Set?oe.set:typeof Date<"u"&&t instanceof Date?oe.date:oe.object;default:return oe.unknown}};var ee=Ue.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),w6=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Ir=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let l=n,p=0;for(;p<s.path.length;){let f=s.path[p];p===s.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(r(s))):l[f]=l[f]||{_errors:[]},l=l[f],p++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ue.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Ir.create=t=>new Ir(t);var E6=(t,e)=>{let r;switch(t.code){case ee.invalid_type:t.received===oe.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case ee.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ue.jsonStringifyReplacer)}`;break;case ee.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ue.joinValues(t.keys,", ")}`;break;case ee.invalid_union:r="Invalid input";break;case ee.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ue.joinValues(t.options)}`;break;case ee.invalid_enum_value:r=`Invalid enum value. Expected ${Ue.joinValues(t.options)}, received '${t.received}'`;break;case ee.invalid_arguments:r="Invalid function arguments";break;case ee.invalid_return_type:r="Invalid function return type";break;case ee.invalid_date:r="Invalid date";break;case ee.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ue.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case ee.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case ee.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case ee.custom:r="Invalid input";break;case ee.invalid_intersection_types:r="Intersection results could not be merged";break;case ee.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ee.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ue.assertNever(t)}return{message:r}},Ci=E6;var LM=Ci;function _6(t){LM=t}function zs(){return LM}var Il=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",p=n.filter(f=>!!f).slice().reverse();for(let f of p)l=f(s,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},R6=[];function re(t,e){let r=zs(),n=Il({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Ci?void 0:Ci].filter(i=>!!i)});t.common.issues.push(n)}var Qt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Se;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,s=await i.value;n.push({key:o,value:s})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return Se;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},Se=Object.freeze({status:"aborted"}),ua=t=>({status:"dirty",value:t}),or=t=>({status:"valid",value:t}),yd=t=>t.status==="aborted",xd=t=>t.status==="dirty",vo=t=>t.status==="valid",qs=t=>typeof Promise<"u"&&t instanceof Promise;var pe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(pe||(pe={}));var Td=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},BM=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Cl,Nl,Tn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},UM=(t,e)=>{if(vo(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Ir(t.common.issues);return this._error=r,this._error}}};function Re(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,l)=>{let{message:p}=t;return s.code==="invalid_enum_value"?{message:p??l.defaultError}:typeof l.data>"u"?{message:p??n??l.defaultError}:s.code!=="invalid_type"?{message:l.defaultError}:{message:p??r??l.defaultError}},description:i}}var De=class{get description(){return this._def.description}_getType(e){return ei(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:ei(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Qt,ctx:{common:e.parent.common,data:e.data,parsedType:ei(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(qs(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ei(e)},i=this._parseSync({data:e,path:n.path,parent:n});return UM(n,i)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ei(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return vo(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>vo(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ei(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(qs(i)?i:Promise.resolve(i));return UM(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let s=e(i),l=()=>o.addIssue({code:ee.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(p=>p?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Sn({schema:this,typeName:ve.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return xn.create(this,this._def)}nullable(){return ri.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Li.create(this)}promise(){return Eo.create(this,this._def)}or(e){return xa.create([this,e],this._def)}and(e){return Ta.create(this,e,this._def)}transform(e){return new Sn({...Re(this._def),schema:this,typeName:ve.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Ea({...Re(this._def),innerType:this,defaultValue:r,typeName:ve.ZodDefault})}brand(){return new Ol({typeName:ve.ZodBranded,type:this,...Re(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new _a({...Re(this._def),innerType:this,catchValue:r,typeName:ve.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Ll.create(this,e)}readonly(){return Ra.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},k6=/^c[^\s-]{8,}$/i,A6=/^[0-9a-z]+$/,P6=/^[0-9A-HJKMNP-TV-Z]{26}$/i,M6=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,D6=/^[a-z0-9_-]{21}$/i,F6=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,I6=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,C6=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,N6="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",QS,O6=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,L6=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,U6=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,H6=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,B6=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,V6=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,VM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",W6=new RegExp(`^${VM}$`);function WM(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function $6(t){return new RegExp(`^${WM(t)}$`)}function $M(t){let e=`${VM}T${WM(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function j6(t,e){return!!((e==="v4"||!e)&&O6.test(t)||(e==="v6"||!e)&&U6.test(t))}function z6(t,e){if(!F6.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function q6(t,e){return!!((e==="v4"||!e)&&L6.test(t)||(e==="v6"||!e)&&H6.test(t))}var bo=class t extends De{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==oe.string){let o=this._getOrReturnCtx(e);return re(o,{code:ee.invalid_type,expected:oe.string,received:o.parsedType}),Se}let n=new Qt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),re(i,{code:ee.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),re(i,{code:ee.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,l=e.data.length<o.value;(s||l)&&(i=this._getOrReturnCtx(e,i),s?re(i,{code:ee.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&re(i,{code:ee.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")C6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"email",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")QS||(QS=new RegExp(N6,"u")),QS.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"emoji",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")M6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"uuid",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")D6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"nanoid",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")k6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"cuid",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")A6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"cuid2",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")P6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"ulid",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),re(i,{validation:"url",code:ee.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"regex",code:ee.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?$M(o).test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?W6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?$6(o).test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?I6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"duration",code:ee.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?j6(e.data,o.version)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"ip",code:ee.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?z6(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"jwt",code:ee.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?q6(e.data,o.version)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"cidr",code:ee.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?B6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"base64",code:ee.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?V6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"base64url",code:ee.invalid_string,message:o.message}),n.dirty()):Ue.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:ee.invalid_string,...pe.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...pe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...pe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...pe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...pe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...pe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...pe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...pe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...pe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...pe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...pe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...pe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...pe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...pe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...pe.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...pe.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...pe.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...pe.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...pe.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...pe.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...pe.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...pe.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...pe.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...pe.errToObj(r)})}nonempty(e){return this.min(1,pe.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};bo.create=t=>new bo({checks:[],typeName:ve.ZodString,coerce:t?.coerce??!1,...Re(t)});function G6(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=Number.parseInt(t.toFixed(i).replace(".","")),s=Number.parseInt(e.toFixed(i).replace(".",""));return o%s/10**i}var fa=class t extends De{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==oe.number){let o=this._getOrReturnCtx(e);return re(o,{code:ee.invalid_type,expected:oe.number,received:o.parsedType}),Se}let n,i=new Qt;for(let o of this._def.checks)o.kind==="int"?Ue.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),re(n,{code:ee.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?G6(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),re(n,{code:ee.not_finite,message:o.message}),i.dirty()):Ue.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,pe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,pe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,pe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,pe.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:pe.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:pe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:pe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:pe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:pe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:pe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:pe.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:pe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:pe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:pe.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ue.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};fa.create=t=>new fa({checks:[],typeName:ve.ZodNumber,coerce:t?.coerce||!1,...Re(t)});var ma=class t extends De{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==oe.bigint)return this._getInvalidInput(e);let n,i=new Qt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ue.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return re(r,{code:ee.invalid_type,expected:oe.bigint,received:r.parsedType}),Se}gte(e,r){return this.setLimit("min",e,!0,pe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,pe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,pe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,pe.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:pe.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:pe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:pe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:pe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:pe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:pe.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ma.create=t=>new ma({checks:[],typeName:ve.ZodBigInt,coerce:t?.coerce??!1,...Re(t)});var da=class extends De{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==oe.boolean){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.boolean,received:n.parsedType}),Se}return or(e.data)}};da.create=t=>new da({typeName:ve.ZodBoolean,coerce:t?.coerce||!1,...Re(t)});var ha=class t extends De{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==oe.date){let o=this._getOrReturnCtx(e);return re(o,{code:ee.invalid_type,expected:oe.date,received:o.parsedType}),Se}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return re(o,{code:ee.invalid_date}),Se}let n=new Qt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),re(i,{code:ee.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),re(i,{code:ee.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ue.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:pe.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:pe.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};ha.create=t=>new ha({checks:[],coerce:t?.coerce||!1,typeName:ve.ZodDate,...Re(t)});var Ks=class extends De{_parse(e){if(this._getType(e)!==oe.symbol){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.symbol,received:n.parsedType}),Se}return or(e.data)}};Ks.create=t=>new Ks({typeName:ve.ZodSymbol,...Re(t)});var ga=class extends De{_parse(e){if(this._getType(e)!==oe.undefined){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.undefined,received:n.parsedType}),Se}return or(e.data)}};ga.create=t=>new ga({typeName:ve.ZodUndefined,...Re(t)});var ya=class extends De{_parse(e){if(this._getType(e)!==oe.null){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.null,received:n.parsedType}),Se}return or(e.data)}};ya.create=t=>new ya({typeName:ve.ZodNull,...Re(t)});var wo=class extends De{constructor(){super(...arguments),this._any=!0}_parse(e){return or(e.data)}};wo.create=t=>new wo({typeName:ve.ZodAny,...Re(t)});var Oi=class extends De{constructor(){super(...arguments),this._unknown=!0}_parse(e){return or(e.data)}};Oi.create=t=>new Oi({typeName:ve.ZodUnknown,...Re(t)});var Cn=class extends De{_parse(e){let r=this._getOrReturnCtx(e);return re(r,{code:ee.invalid_type,expected:oe.never,received:r.parsedType}),Se}};Cn.create=t=>new Cn({typeName:ve.ZodNever,...Re(t)});var Qs=class extends De{_parse(e){if(this._getType(e)!==oe.undefined){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.void,received:n.parsedType}),Se}return or(e.data)}};Qs.create=t=>new Qs({typeName:ve.ZodVoid,...Re(t)});var Li=class t extends De{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==oe.array)return re(r,{code:ee.invalid_type,expected:oe.array,received:r.parsedType}),Se;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(s||l)&&(re(r,{code:s?ee.too_big:ee.too_small,minimum:l?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(re(r,{code:ee.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(re(r,{code:ee.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>i.type._parseAsync(new Tn(r,s,r.path,l)))).then(s=>Qt.mergeArray(n,s));let o=[...r.data].map((s,l)=>i.type._parseSync(new Tn(r,s,r.path,l)));return Qt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:pe.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:pe.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:pe.toString(r)}})}nonempty(e){return this.min(1,e)}};Li.create=(t,e)=>new Li({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ve.ZodArray,...Re(e)});function Gs(t){if(t instanceof Cr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=xn.create(Gs(n))}return new Cr({...t._def,shape:()=>e})}else return t instanceof Li?new Li({...t._def,type:Gs(t.element)}):t instanceof xn?xn.create(Gs(t.unwrap())):t instanceof ri?ri.create(Gs(t.unwrap())):t instanceof ti?ti.create(t.items.map(e=>Gs(e))):t}var Cr=class t extends De{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Ue.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==oe.object){let f=this._getOrReturnCtx(e);return re(f,{code:ee.invalid_type,expected:oe.object,received:f.parsedType}),Se}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof Cn&&this._def.unknownKeys==="strip"))for(let f in i.data)s.includes(f)||l.push(f);let p=[];for(let f of s){let d=o[f],h=i.data[f];p.push({key:{status:"valid",value:f},value:d._parse(new Tn(i,h,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof Cn){let f=this._def.unknownKeys;if(f==="passthrough")for(let d of l)p.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(f==="strict")l.length>0&&(re(i,{code:ee.unrecognized_keys,keys:l}),n.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let f=this._def.catchall;for(let d of l){let h=i.data[d];p.push({key:{status:"valid",value:d},value:f._parse(new Tn(i,h,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let f=[];for(let d of p){let h=await d.key,y=await d.value;f.push({key:h,value:y,alwaysSet:d.alwaysSet})}return f}).then(f=>Qt.mergeObjectSync(n,f)):Qt.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return pe.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{let i=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:pe.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ve.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of Ue.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let n of Ue.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}deepPartial(){return Gs(this)}partial(e){let r={};for(let n of Ue.objectKeys(this.shape)){let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let n of Ue.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof xn;)o=o._def.innerType;r[n]=o}return new t({...this._def,shape:()=>r})}keyof(){return jM(Ue.objectKeys(this.shape))}};Cr.create=(t,e)=>new Cr({shape:()=>t,unknownKeys:"strip",catchall:Cn.create(),typeName:ve.ZodObject,...Re(e)});Cr.strictCreate=(t,e)=>new Cr({shape:()=>t,unknownKeys:"strict",catchall:Cn.create(),typeName:ve.ZodObject,...Re(e)});Cr.lazycreate=(t,e)=>new Cr({shape:t,unknownKeys:"strip",catchall:Cn.create(),typeName:ve.ZodObject,...Re(e)});var xa=class extends De{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=o.map(l=>new Ir(l.ctx.common.issues));return re(r,{code:ee.invalid_union,unionErrors:s}),Se}if(r.common.async)return Promise.all(n.map(async o=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let p of n){let f={...r,common:{...r.common,issues:[]},parent:null},d=p._parseSync({data:r.data,path:r.path,parent:f});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:f}),f.common.issues.length&&s.push(f.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=s.map(p=>new Ir(p));return re(r,{code:ee.invalid_union,unionErrors:l}),Se}}get options(){return this._def.options}};xa.create=(t,e)=>new xa({options:t,typeName:ve.ZodUnion,...Re(e)});var Ni=t=>t instanceof Sa?Ni(t.schema):t instanceof Sn?Ni(t.innerType()):t instanceof va?[t.value]:t instanceof ba?t.options:t instanceof wa?Ue.objectValues(t.enum):t instanceof Ea?Ni(t._def.innerType):t instanceof ga?[void 0]:t instanceof ya?[null]:t instanceof xn?[void 0,...Ni(t.unwrap())]:t instanceof ri?[null,...Ni(t.unwrap())]:t instanceof Ol||t instanceof Ra?Ni(t.unwrap()):t instanceof _a?Ni(t._def.innerType):[],Sd=class t extends De{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.object)return re(r,{code:ee.invalid_type,expected:oe.object,received:r.parsedType}),Se;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(re(r,{code:ee.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Se)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let s=Ni(o.shape[e]);if(!s.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of s){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:ve.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Re(n)})}};function YS(t,e){let r=ei(t),n=ei(e);if(t===e)return{valid:!0,data:t};if(r===oe.object&&n===oe.object){let i=Ue.objectKeys(e),o=Ue.objectKeys(t).filter(l=>i.indexOf(l)!==-1),s={...t,...e};for(let l of o){let p=YS(t[l],e[l]);if(!p.valid)return{valid:!1};s[l]=p.data}return{valid:!0,data:s}}else if(r===oe.array&&n===oe.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let s=t[o],l=e[o],p=YS(s,l);if(!p.valid)return{valid:!1};i.push(p.data)}return{valid:!0,data:i}}else return r===oe.date&&n===oe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Ta=class extends De{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(yd(o)||yd(s))return Se;let l=YS(o.value,s.value);return l.valid?((xd(o)||xd(s))&&r.dirty(),{status:r.value,value:l.data}):(re(n,{code:ee.invalid_intersection_types}),Se)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Ta.create=(t,e,r)=>new Ta({left:t,right:e,typeName:ve.ZodIntersection,...Re(r)});var ti=class t extends De{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.array)return re(n,{code:ee.invalid_type,expected:oe.array,received:n.parsedType}),Se;if(n.data.length<this._def.items.length)return re(n,{code:ee.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Se;!this._def.rest&&n.data.length>this._def.items.length&&(re(n,{code:ee.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((s,l)=>{let p=this._def.items[l]||this._def.rest;return p?p._parse(new Tn(n,s,n.path,l)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>Qt.mergeArray(r,s)):Qt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};ti.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ti({items:t,typeName:ve.ZodTuple,rest:null,...Re(e)})};var vd=class t extends De{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.object)return re(n,{code:ee.invalid_type,expected:oe.object,received:n.parsedType}),Se;let i=[],o=this._def.keyType,s=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new Tn(n,l,n.path,l)),value:s._parse(new Tn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?Qt.mergeObjectAsync(r,i):Qt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof De?new t({keyType:e,valueType:r,typeName:ve.ZodRecord,...Re(n)}):new t({keyType:bo.create(),valueType:e,typeName:ve.ZodRecord,...Re(r)})}},Ys=class extends De{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.map)return re(n,{code:ee.invalid_type,expected:oe.map,received:n.parsedType}),Se;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([l,p],f)=>({key:i._parse(new Tn(n,l,n.path,[f,"key"])),value:o._parse(new Tn(n,p,n.path,[f,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let p of s){let f=await p.key,d=await p.value;if(f.status==="aborted"||d.status==="aborted")return Se;(f.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(f.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let p of s){let f=p.key,d=p.value;if(f.status==="aborted"||d.status==="aborted")return Se;(f.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(f.value,d.value)}return{status:r.value,value:l}}}};Ys.create=(t,e,r)=>new Ys({valueType:e,keyType:t,typeName:ve.ZodMap,...Re(r)});var Zs=class t extends De{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.set)return re(n,{code:ee.invalid_type,expected:oe.set,received:n.parsedType}),Se;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(re(n,{code:ee.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(re(n,{code:ee.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function s(p){let f=new Set;for(let d of p){if(d.status==="aborted")return Se;d.status==="dirty"&&r.dirty(),f.add(d.value)}return{status:r.value,value:f}}let l=[...n.data.values()].map((p,f)=>o._parse(new Tn(n,p,n.path,f)));return n.common.async?Promise.all(l).then(p=>s(p)):s(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:pe.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:pe.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Zs.create=(t,e)=>new Zs({valueType:t,minSize:null,maxSize:null,typeName:ve.ZodSet,...Re(e)});var bd=class t extends De{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.function)return re(r,{code:ee.invalid_type,expected:oe.function,received:r.parsedType}),Se;function n(l,p){return Il({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,zs(),Ci].filter(f=>!!f),issueData:{code:ee.invalid_arguments,argumentsError:p}})}function i(l,p){return Il({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,zs(),Ci].filter(f=>!!f),issueData:{code:ee.invalid_return_type,returnTypeError:p}})}let o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof Eo){let l=this;return or(async function(...p){let f=new Ir([]),d=await l._def.args.parseAsync(p,o).catch(T=>{throw f.addIssue(n(p,T)),f}),h=await Reflect.apply(s,this,d);return await l._def.returns._def.type.parseAsync(h,o).catch(T=>{throw f.addIssue(i(h,T)),f})})}else{let l=this;return or(function(...p){let f=l._def.args.safeParse(p,o);if(!f.success)throw new Ir([n(p,f.error)]);let d=Reflect.apply(s,this,f.data),h=l._def.returns.safeParse(d,o);if(!h.success)throw new Ir([i(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:ti.create(e).rest(Oi.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||ti.create([]).rest(Oi.create()),returns:r||Oi.create(),typeName:ve.ZodFunction,...Re(n)})}},Sa=class extends De{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Sa.create=(t,e)=>new Sa({getter:t,typeName:ve.ZodLazy,...Re(e)});var va=class extends De{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return re(r,{received:r.data,code:ee.invalid_literal,expected:this._def.value}),Se}return{status:"valid",value:e.data}}get value(){return this._def.value}};va.create=(t,e)=>new va({value:t,typeName:ve.ZodLiteral,...Re(e)});function jM(t,e){return new ba({values:t,typeName:ve.ZodEnum,...Re(e)})}var ba=class t extends De{constructor(){super(...arguments),Cl.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return re(r,{expected:Ue.joinValues(n),received:r.parsedType,code:ee.invalid_type}),Se}if(Td(this,Cl,"f")||BM(this,Cl,new Set(this._def.values),"f"),!Td(this,Cl,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return re(r,{received:r.data,code:ee.invalid_enum_value,options:n}),Se}return or(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Cl=new WeakMap;ba.create=jM;var wa=class extends De{constructor(){super(...arguments),Nl.set(this,void 0)}_parse(e){let r=Ue.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==oe.string&&n.parsedType!==oe.number){let i=Ue.objectValues(r);return re(n,{expected:Ue.joinValues(i),received:n.parsedType,code:ee.invalid_type}),Se}if(Td(this,Nl,"f")||BM(this,Nl,new Set(Ue.getValidEnumValues(this._def.values)),"f"),!Td(this,Nl,"f").has(e.data)){let i=Ue.objectValues(r);return re(n,{received:n.data,code:ee.invalid_enum_value,options:i}),Se}return or(e.data)}get enum(){return this._def.values}};Nl=new WeakMap;wa.create=(t,e)=>new wa({values:t,typeName:ve.ZodNativeEnum,...Re(e)});var Eo=class extends De{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.promise&&r.common.async===!1)return re(r,{code:ee.invalid_type,expected:oe.promise,received:r.parsedType}),Se;let n=r.parsedType===oe.promise?r.data:Promise.resolve(r.data);return or(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Eo.create=(t,e)=>new Eo({type:t,typeName:ve.ZodPromise,...Re(e)});var Sn=class extends De{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ve.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{re(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);if(n.common.async)return Promise.resolve(s).then(async l=>{if(r.value==="aborted")return Se;let p=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return p.status==="aborted"?Se:p.status==="dirty"?ua(p.value):r.value==="dirty"?ua(p.value):p});{if(r.value==="aborted")return Se;let l=this._def.schema._parseSync({data:s,path:n.path,parent:n});return l.status==="aborted"?Se:l.status==="dirty"?ua(l.value):r.value==="dirty"?ua(l.value):l}}if(i.type==="refinement"){let s=l=>{let p=i.refinement(l,o);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Se:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Se:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!vo(s))return s;let l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>vo(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:r.value,value:l})):s);Ue.assertNever(i)}};Sn.create=(t,e,r)=>new Sn({schema:t,typeName:ve.ZodEffects,effect:e,...Re(r)});Sn.createWithPreprocess=(t,e,r)=>new Sn({schema:e,effect:{type:"preprocess",transform:t},typeName:ve.ZodEffects,...Re(r)});var xn=class extends De{_parse(e){return this._getType(e)===oe.undefined?or(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};xn.create=(t,e)=>new xn({innerType:t,typeName:ve.ZodOptional,...Re(e)});var ri=class extends De{_parse(e){return this._getType(e)===oe.null?or(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ri.create=(t,e)=>new ri({innerType:t,typeName:ve.ZodNullable,...Re(e)});var Ea=class extends De{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===oe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Ea.create=(t,e)=>new Ea({innerType:t,typeName:ve.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Re(e)});var _a=class extends De{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return qs(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Ir(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ir(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};_a.create=(t,e)=>new _a({innerType:t,typeName:ve.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Re(e)});var Xs=class extends De{_parse(e){if(this._getType(e)!==oe.nan){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.nan,received:n.parsedType}),Se}return{status:"valid",value:e.data}}};Xs.create=t=>new Xs({typeName:ve.ZodNaN,...Re(t)});var K6=Symbol("zod_brand"),Ol=class extends De{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Ll=class t extends De{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Se:o.status==="dirty"?(r.dirty(),ua(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Se:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:ve.ZodPipeline})}},Ra=class extends De{_parse(e){let r=this._def.innerType._parse(e),n=i=>(vo(i)&&(i.value=Object.freeze(i.value)),i);return qs(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};Ra.create=(t,e)=>new Ra({innerType:t,typeName:ve.ZodReadonly,...Re(e)});function HM(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function zM(t,e={},r){return t?wo.create().superRefine((n,i)=>{let o=t(n);if(o instanceof Promise)return o.then(s=>{if(!s){let l=HM(e,n),p=l.fatal??r??!0;i.addIssue({code:"custom",...l,fatal:p})}});if(!o){let s=HM(e,n),l=s.fatal??r??!0;i.addIssue({code:"custom",...s,fatal:l})}}):wo.create()}var Q6={object:Cr.lazycreate},ve;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ve||(ve={}));var Y6=(t,e={message:`Input not instance of ${t.name}`})=>zM(r=>r instanceof t,e),qM=bo.create,GM=fa.create,Z6=Xs.create,X6=ma.create,KM=da.create,J6=ha.create,e5=Ks.create,t5=ga.create,r5=ya.create,n5=wo.create,i5=Oi.create,o5=Cn.create,a5=Qs.create,s5=Li.create,c5=Cr.create,l5=Cr.strictCreate,p5=xa.create,u5=Sd.create,f5=Ta.create,m5=ti.create,d5=vd.create,h5=Ys.create,g5=Zs.create,y5=bd.create,x5=Sa.create,T5=va.create,S5=ba.create,v5=wa.create,b5=Eo.create,w5=Sn.create,E5=xn.create,_5=ri.create,R5=Sn.createWithPreprocess,k5=Ll.create,A5=()=>qM().optional(),P5=()=>GM().optional(),M5=()=>KM().optional(),D5={string:t=>bo.create({...t,coerce:!0}),number:t=>fa.create({...t,coerce:!0}),boolean:t=>da.create({...t,coerce:!0}),bigint:t=>ma.create({...t,coerce:!0}),date:t=>ha.create({...t,coerce:!0})};var F5=Se;function QM(t){let e=t.operands.map(ZS).join(" ");return`(#${t.operator} ${e})`}function ZS(t){return t.type==="capture"?`@${t.name}`:t.value}function YM(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>I5(t,r))}function I5(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=ZS(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var Lt=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof wd&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:YM(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new wd(n.name);return i}else return n.value})}},wd=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var XS=He.object({type:He.literal("string"),value:He.string()}),ge={node:He.object({type:He.literal("capture"),name:He.string()}),string:XS,integer:XS.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:He.ZodIssueCode.custom,message:"Expected an integer"}),He.NEVER):{type:"integer",value:r}}),boolean:XS.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:He.ZodIssueCode.custom,message:"Expected true or false"}),He.NEVER))};var JS=class extends Lt{constructor(){super(...arguments);this.name="not-type?";this.schema=He.tuple([ge.node,ge.string]).rest(ge.string)}run({node:r},...n){return!n.includes(r.type)}},ev=class extends Lt{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=He.tuple([ge.node,ge.string]).rest(ge.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},tv=class extends Lt{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=He.tuple([ge.node,ge.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},rv=class extends Lt{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=He.tuple([ge.node,ge.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},nv=class extends Lt{constructor(){super(...arguments);this.name="child-range!";this.schema=He.union([He.tuple([ge.node,ge.integer]),He.tuple([ge.node,ge.integer,ge.integer]),He.tuple([ge.node,ge.integer,ge.integer,ge.boolean]),He.tuple([ge.node,ge.integer,ge.integer,ge.boolean,ge.boolean])])}run(r,n,i,o,s){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let p=l[n],f=l[i];return r.range=Qr(o?p.endPosition:p.startPosition,s?f.startPosition:f.endPosition),!0}},iv=class extends Lt{constructor(){super(...arguments);this.name="character-range!";this.schema=He.union([He.tuple([ge.node,ge.integer]),He.tuple([ge.node,ge.integer,ge.integer])])}run(r,n,i){return r.range=new Y(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},ov=class extends Lt{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=He.tuple([ge.node,ge.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[p,f]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new Y(i.positionAt(d+p),i.positionAt(d+f)),!0}},av=class extends Lt{constructor(){super(...arguments);this.name="grow-to-named-siblings!";this.schema=He.union([He.tuple([ge.node]),He.tuple([ge.node,ge.string])])}run(r,n){let{node:i,range:o,document:s}=r;if(i.parent==null)throw Error("Node has no parent");let{children:l}=i.parent,p=l.findIndex(d=>d.id===i.id),f=null;if(p===-1)throw Error("Node not found in parent");for(let d=p+1;d<l.length;++d){let h=l[d];if(!h.isNamed)break;let y=Qr(h.startPosition,h.endPosition);if(n!=null&&n===s.getText(y))break;f=y.end}return f!=null&&(r.range=new Y(o.start,f)),!0}},sv=class extends Lt{constructor(){super(...arguments);this.name="trim-end!";this.schema=He.tuple([ge.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),s=o.length-o.trimEnd().length;return s>0&&(r.range=new Y(i.start,fk(n,i.end,-s))),!0}},cv=class extends Lt{constructor(){super(...arguments);this.name="document-range!";this.schema=He.tuple([ge.node]).rest(ge.node)}run(...r){for(let n of r)n.range=n.document.range;return!0}},lv=class extends Lt{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=He.tuple([ge.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},pv=class extends Lt{constructor(){super(...arguments);this.name="log!";this.schema=He.tuple([ge.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},uv=class extends Lt{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=He.tuple([ge.node,ge.string])}run(r,n){return r.insertionDelimiter=n,!0}},fv=class extends Lt{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=He.tuple([ge.node,ge.node,ge.string,ge.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},mv=class extends Lt{constructor(){super(...arguments);this.name="empty-single-multi-delimiter!";this.schema=He.tuple([ge.node,ge.node,ge.string,ge.string,ge.string])}run(r,n,i,o,s){let l=!n.node.children.some(p=>p.isNamed);return r.insertionDelimiter=l?i:n.range.isSingleLine?o:s,!0}},ZM=[new pv,new JS,new sv,new cv,new ev,new tv,new nv,new iv,new ov,new av,new lv,new uv,new fv,new mv,new rv];function XM(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((s,l)=>{let p=ZM.find(({name:d})=>d===s.operator);if(p==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${s.operator}"`});return}let f=p.createPredicate(s.operands);if(!f.success){e.push(...f.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(f.predicate)}),r.push(o)}),{errors:e,predicates:r}}function JM(t,e){let{errors:r,predicates:n}=XM(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${QM(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");ft(k().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(k().runMode==="test")throw new Error("Invalid predicates")}return n}function dv(t){return{row:t.line,column:t.character}}function eD(t){return t.map(e=>({...e,range:hv(e),name:C5(e)}))}function hv(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function C5(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var gv=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&tD(this.startPosition,r)&&tD(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function tD(t,e){return t==null||e==null?t===e:t.isEqual(e)}var ka=new gv;var Ul=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=k().runMode!=="production"}static create(e,r,n){let i=JM(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>GS(r)===e)}matches(e,r,n){if(!ka.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);ka.update(e,r,n,i)}return ka.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let s of i){let l=this.createMutableQueryMatch(e,s);this.runPredicates(l)&&o.push(this.createQueryMatch(l))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?dv(r):void 0,endPosition:n!=null?dv(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.pattern,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:PM(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>OM(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=GS(i.name),s=hv(i),l=n.get(o);if(l==null){let p=[i],f={...i,name:o,range:s,hasError:()=>p.some(d=>d.hasError())};r.push(f),n.set(o,{acc:f,captures:p})}else l.acc.range=l.acc.range.union(s),l.acc.allowMultiple=l.acc.allowMultiple||i.allowMultiple,l.acc.insertionDelimiter=l.acc.insertionDelimiter??i.insertionDelimiter,l.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!NM(eD(r.captures),k().messages)&&k().runMode==="test")throw new Error("Invalid captures")}};var nD="_",N5=[nD,"interior",...ra],O5=["prefix","leading","trailing"],L5=["startOf","endOf","start.startOf","start.endOf","end.startOf","end.endOf"],U5=["domain","removal","iteration","iteration.domain"],rD=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],Aa=new Set;for(let t of N5){if(t!==nD){Aa.add(t);for(let e of rD)Aa.add(`${t}.${e}`)}for(let e of O5){Aa.add(`${t}.${e}`);for(let r of L5)Aa.add(`${t}.${e}.${r}`)}for(let e of U5){Aa.add(`${t}.${e}`);for(let r of rD)Aa.add(`${t}.${e}.${r}`)}}var H5=/^(?!;;).*(?<!"\w*)@([\w.]*)/gm;function iD(t,e){let r=e.matchAll(H5),n=[];for(let o of r){let s=o[1];if(!(s.length>1&&!s.includes(".")&&s.startsWith("_"))&&!Aa.has(s)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${s}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(ft(k().messages,"validateQueryCaptures.invalidCaptureName",i),k().runMode==="test")throw new Error(i)}var Ed=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await B5(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let s=n.createQuery(i,o);if(s==null)throw Error(`Could not create Tree sitter query for language ${i}`);let l=Ul.create(i,n,s);return new t(l)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new Ym(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let s=o.name;n[s]==null&&(n[s]=[]),n[s].push(o)}return n}};async function B5(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,s]of Object.entries(n)){if(s!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(ft(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&iD(o,l),n[o]=l,un(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,p=>{let f=p[1];i&&V5(t,o,f,p[0]),n[f]=n[f]??null})}return Object.values(n).join(`
`)}function V5(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(ft(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(ft(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var oD=Symbol("LANGUAGE_UNDEFINED"),_d=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new tr;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&ka.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:s})=>this.loadLanguage(s.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(ft(this.ide.messages,"Failed to load language definitions",Fn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await Ed.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??oD;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),ka.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===oD?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var Rd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e,r){for(let n of this.nestedStages)try{return n.run(e,r)}catch{continue}throw new Error("No modifier could be applied")}};var Js=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e,r){if(this.shouldModify(e))try{return this.nestedStage.run(e,r).map(n=>n.withThatTarget(e))}catch(n){if(!this.suppressErrors)throw n}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},_o=class extends Js{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},kd=class extends Js{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},ec=class extends Js{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},tc=class extends Js{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function aD(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function rc(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&aD(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.textualType==="line"&&r.textualType==="line"?new gr({editor:e.editor,isReversed:t,contentRange:Ps(e,r,n,i)}):new Ot({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:As(e,r,n,i),textualType:n&&i&&e.textualType==="token"&&r.textualType==="token"?"token":"character"})}function Ad(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[s]=i,l=s.contentRange.start.isAfterOrEqual(o.contentRange.start),[p,f]=l?[o,s]:[s,o];return[rc(t,p,f,!0,!0)]}function Pd(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,s]=i;return n==="forward"?s:n==="backward"||(t.isPreferredOver?.(o,s)??!1)?o:s}default:throw new Error("Expected no more than 2 scope candidates")}}function Md(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:s}}=t;if(s.isEqual(o)){let f=Pd(e,i,o);return f==null||(r>0&&(f=yv(e,i,f.domain.end,"forward",r,!0)),f==null)?void 0:f.getTargets(n)}let l=yv(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(s))return l.getTargets(n);let p=yv(e,i,s,"backward",r);if(p!=null)return Ad(n,l,p)}function yv(t,e,r,n,i,o=!1){let s=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(s===i)return l;s+=1}}var nc=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n,ancestorIndex:i=0}=this.modifier,o=this.scopeHandlerFactory.maybeCreate(n,e.editor.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e,r);let s=Md(e,o,i);if(s==null)throw new xt(n.type);return s}};var Dd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n}=this.modifier,{editor:i,isReversed:o}=e,s=this.scopeHandlerFactory.maybeCreate(n,i.document.languageId);if(s==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e,r);let l;if(e.hasExplicitRange&&(l=sD(s,i,e.contentRange),l.length===1&&l[0].domain.contains(e.contentRange)&&!e.hasExplicitScopeType&&!r.multipleTargets&&(l=void 0)),l==null&&(l=this.getDefaultIterationRange(s,this.scopeHandlerFactory,e).flatMap(p=>sD(s,i,p))),l.length===0)throw new xt(n.type);return l.flatMap(p=>p.getTargets(o))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=Md(n,i);if(o==null)throw new xt(`iteration scope for ${e.scopeType.type}`);return o.map(s=>s.contentRange)}};function sD(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var Fd=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},Id=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Cd=class{run(){return Sm(k()).map(e=>new ym({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var Nd=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new xv(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},xv=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return $5(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return Mt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return j5(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[Ro(e,r,n,i)];let s=vv(e,r);return[Ro(n?cD(this.modifierStageFactory,e,o,s?"backward":"forward"):e,i?cD(this.modifierStageFactory,r,o,s?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n,i=!1;e.type==="implicit"?(r=new Cd,n=[]):(r=this.markStageFactory.create(e.mark),n=Tv(this.modifierStageFactory,e.modifiers),i=W5(e));let o=r.run(),[s,l]=this.getPreAndPostStages(i),p=[...s,...n,...this.opts.actionFinalStages,...l];return Sv(p,o)}getPreAndPostStages(e){if(this.opts.noAutomaticTokenExpansion)return[[],[]];let r=new tc(this.modifierStageFactory);return e?[[r],[]]:[[],[r]]}};function W5(t){return t.modifiers.length>0&&t.modifiers.every(({type:e})=>e==="startOf"||e==="endOf")}function Tv(t,e){return e.map(t.create).reverse()}function Sv(t,e){return t.forEach(r=>{let n={multipleTargets:e.length>1};e=e.flatMap(i=>r.run(i,n))}),e}function cD(t,e,r,n){let i={multipleTargets:!1};return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e,i)[0]}function vv(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function $5(t){return gA(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function lD(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function Ro(t,e,r=!1,n=!1){lD(t,e);let i=vv(t,e);return rc(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function j5(t,e,r,n){lD(t,e);let i=vv(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),f=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let h=l;;h+=o){let y=new Y(h,t.contentRange.start.character,h,t.contentRange.end.character);if(d.push(new Ke({editor:t.editor,isReversed:t.isReversed,contentRange:y,insertionDelimiter:t.insertionDelimiter})),h===f)return d}}var Od=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getModifierStages(),n=Sv(r,[e]),i=this.modifier.type==="extendThroughStartOf";return n.map(o=>new xm({editor:e.editor,isReversed:i,inputTarget:e,modifiedTarget:o,isHead:i}))}getModifierStages(){return this.modifier.modifiers!=null?Tv(this.modifierStageFactory,this.modifier.modifiers):[new bv(this.modifierStageFactory,this.modifier)]}},bv=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.getContainingLine(e,r),i=this.getContainingPairInterior(e,r),o=i!=null?n.contentRange.intersection(i.contentRange):null;return o==null||o.isEmpty?[n]:[new Ke({editor:e.editor,isReversed:e.isReversed,contentRange:o})]}getContainingPairInterior(e,r){try{return this.getContaining(e,r,{type:"surroundingPairInterior",delimiter:"any"})[0]}catch(n){if(n instanceof xt)return;throw n}}getContainingLine(e,r){return this.getContaining(e,r,{type:"line"})[0]}getContaining(e,r,n){return this.modifierStageFactory.create({type:"containingScope",scopeType:n}).run(e,r)}};var ni=class extends Error{constructor(e,r){let n=r!=null?` #${r+1}`:"";super(`Scope '${e.type}'${n} is out of range`),this.name="OutOfRangeError"}};function pD(t,e,r,n){return wv(t,e,r,n),e.slice(r,n+1)}function wv(t,e,r,n){if(r<0||r>=e.length)throw new ni(t,r);if(n<0||n>=e.length)throw new ni(t,n)}var ic=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e,r){let n=new tc(this.modifierStageFactory).run(e,r)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(n,r);case"ordinalScope":return this.handleOrdinalScope(n,r,this.modifier);case"relativeScope":return this.handleRelativeScope(n,r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e,r){return Array.from(Bm(this.getEveryRanges(e),([n,i])=>this.getTargetIterable(e,r,n,i,"forward")))}handleOrdinalScope(e,r,{start:n,length:i,scopeType:o}){return this.getEveryRanges(e).flatMap(([s,l])=>uD(o,this.getTargetIterable(e,r,s,l,n>=0?"forward":"backward"),n>=0?n:-(i+n),i))}handleRelativeScope(e,r,{direction:n,offset:i,length:o,scopeType:s}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(p=>{let{editor:f}=p,d=n==="forward"?new Y(i===0?p.contentRange.start:p.contentRange.end,f.document.range.end):new Y(f.document.range.start,i===0?p.contentRange.end:p.contentRange.start);return uD(s,this.getTargetIterable(e,r,f,d,n),i===0?0:i-1,o)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i,o){let s=Kt(yn(new RegExp(jr(e.contentText),"g"),n,i,o),p=>new Ke({contentRange:p,editor:n,isReversed:!1,textualType:"character"})),l=z5(e);if(l!=null){let p=this.modifierStageFactory.create({type:"containingScope",scopeType:l});return Um(Kt(s,f=>{try{let d=p.run(f,r);return d.length===1&&d[0].contentRange.isRangeEqual(f.contentRange)?d[0]:null}catch{return null}}),f=>f!=null)}return s}};function z5(t){switch(t.textualType){case"line":case"token":case"word":return{type:t.textualType};default:return null}}function uD(t,e,r,n){Array.from(Dl(r,e));let i=Array.from(Dl(n,e));if(i.length<n)throw new ni(t,r+n-1);return i}var Ld=class{constructor(e,r){this.modifierHandlerFactory=e;this.modifier=r}run(e,r){let n=e.getInterior();return n??this.modifierHandlerFactory.create({type:"containingScope",scopeType:{type:"interior",explicitScopeType:e.hasExplicitScopeType}}).run(e,r)}},Ud=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=Ev(this.modifierStageFactory)}run(e,r){return this.containingSurroundingPairIfNoBoundaryStage.run(e,r).flatMap(n=>n.getBoundary())}};function Ev(t){return new kd(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var ii={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},_v={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var Hd=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},Bd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(_v).run(e,r).map(n=>{let i=n.getLeadingDelimiterTarget();if(i==null)throw new Hd("leading");return i})}},Vd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(_v).run(e,r).map(n=>{let i=n.getTrailingDelimiterTarget();if(i==null)throw new Hd("trailing");return i})}};function Wd(t,e,r,n,i){return wv(t,r,n,i),n===i?r[n]:rc(e,r[n],r[i],!0,!0)}function $d(t,e,r,n){return t.create({type:"everyScope",scopeType:n}).run(e,r)}var jd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=$d(this.modifierStageFactory,e,r,this.modifier.scopeType),i=this.modifier.start+(this.modifier.start<0?n.length:0),o=i+this.modifier.length-1;return this.modifier.isEvery?pD(this.modifier.scopeType,n,i,o):[Wd(this.modifier.scopeType,e.isReversed,n,i,o)]}};var zd=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new ho(r):new Ke({...r,textualType:"character"})]}},qd=class extends zd{getContentRange(e){return e.start.toEmptyRange()}},Gd=class extends zd{getContentRange(e){return e.end.toEmptyRange()}};var Kd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n}=this.modifier,i=new nc(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:n});try{return i.run(e,r)}catch(l){if(!(l instanceof xt))throw l}let o=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),s=q5(e,o);if(s==null)throw Error(`No scopes found for scope type: ${n.type}`);return s}};function q5(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=fD(r,i),s=fD(n,i),l=o.distance<s.distance?o.scope:s.scope;return l?.getTargets(t.isReversed)}function fD(t,e){let r,n=1/0;for(let i of t){let o=Math.min(mD(e,i.domain.start),mD(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function mD(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var Qd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.modifierStageFactory.create(this.modifier.anchor),i=this.modifierStageFactory.create(this.modifier.active),o=n.run(e,r),s=i.run(e,r);if(o.length!==1||s.length!==1)throw new Error("Expected single anchor and active target");return[Ro(o[0],s[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var Yd=class{constructor(e){this.modifier=e}run(e){return[new ho({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var Zd=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function dD(t,e,r,n){let i=$d(t,Y5(r),n,e.scopeType),o=Q5(r.contentRange,i);return G5(e,r,i,o)}function G5(t,e,r,n){let i=t.direction==="forward",o=K5(t,e.contentRange,r,i,n),s=i?o+t.length-1:o-t.length+1,l=Math.min(o,s),p=Math.max(o,s);return[Wd(t.scopeType,e.isReversed,r,l,p)]}function K5(t,e,r,n,i){let o=t.offset===0;if(i==null){let p=n?r.findIndex(f=>f.contentRange.start.isAfter(e.start)):Yo(r,f=>f.contentRange.start.isBefore(e.start));if(p===-1)throw new ni(t.scopeType);return o?p:n?p+t.offset-1:p-t.offset+1}let s=i.start,l=i.end;if(o){let p=l-s+1;if(p>t.length)throw new Zd(t.length,p,t.scopeType.type);return n?s:l}return n?l+t.offset:s-t.offset}function Q5(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function Y5(t){return new Ot({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var Xd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let n=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(n==null)return dD(this.modifierStageFactory,this.modifier,e,r);let i=Array.from(this.modifier.offset===0?Z5(n,e,this.modifier):X5(n,e,this.modifier));if(i.length<this.modifier.length)throw new ni(this.modifier.scopeType,this.modifier.offset+this.modifier.length-1);let{isReversed:o}=e;return this.modifier.isEvery?i.flatMap(s=>s.getTargets(o)):Ad(o,i[0],i[i.length-1])}};function Z5(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s}=r,l=Pd(t,n,s==="forward"?i.start:i.end,s)?.domain;if(l==null)throw new xt(r.scopeType.type);return Dl(o,t.generateScopes(n,s==="forward"?l.start:l.end,s,{skipAncestorScopes:!0}))}function X5(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s,offset:l}=r,p=s==="forward"?i.end:i.start,f=i.isEmpty?"disallowed":"disallowedIfStrict";return KP(t.generateScopes(n,p,s,{containment:f,skipAncestorScopes:!0}),l-1,l+o-1)}var Jd=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new Ke({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};function hD(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function gD(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let s of o){if(n==null||(n=s(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var Rv=t=>new de(t.row,t.column),yD=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(s,l)=>s!=null&&l.includes(s.type),o=s=>s!=null&&!i(s,n);return(s,l)=>{let p,{start:f,end:d}=l;if(i(s.parent,t))return i(s,e)?p=s.nextNamedSibling:i(s,r)?p=s.previousNamedSibling:s.type===","?p=d.isBeforeOrEqual(Rv(s.startPosition))?s.previousNamedSibling:s.nextNamedSibling:p=s,o(p)?p:null;if(i(s,t)){let h=[...s.children],y=h.find(({startPosition:w})=>Rv(w).isAfterOrEqual(d))??null;if(o(y))return y;h.reverse();let T=h.find(({endPosition:w})=>Rv(w).isBeforeOrEqual(f))??null;if(o(T))return T}return null}};function Je(...t){let e=J5(t);return r=>{for(let n of e){let i=eQ(r,n);if(i!=null)return i}return null}}function J5(t){return t.map(e=>e.split(".").map(r=>new kv(r)))}function eQ(t,e){let r=tQ(t,e);!r&&e.length>1&&(r=rQ(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function tQ(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function rQ(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let s=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=s.length===1?s[0]:null}}return r}var kv=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Xe(t,e=So){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function eh(t,e=So){let r=hD(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function oc(t,e=0,r=So){return Xe(gD(e,...t),r)}function yr(...t){return Xe(Je(...t))}function ac(...t){return Xe(yD(...t),DM())}function xD(...t){return Xe(Je(...t),FM)}function Nn(t,e=[]){return Xe(Je(...t),IM(...e))}function sc(t,e=[]){return Xe(Je(...t),CM(...e))}function ar(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function TD(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function oi(t){return Object.freeze(Object.fromEntries(Ai(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,yr(...r)]:typeof r=="string"?[e,yr(r)]:[e,r]})))}function SD(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function nQ(t,e){return wD(t,r=>Math.floor(r/2)*2+e)}function vD(t){return nQ(Je("map_lit"),t)}function wD(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=Hl(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let s=e(o);return s===-1?null:i[s]}}var Hl=t=>SD(t,"value"),Av="~quoting_lit.list_lit!",ED=Je(Av);function Pv(...t){return e=>{let r=ED(e);if(r==null)return null;let n=Hl(r)[0];return t.includes(n?.text)?r:null}}function iQ(...t){return Xe(Pv(...t))}var _D=Pv("defn","defmacro"),bD=eh([_D,t=>Hl(t)[1]]),RD=Pv("if","if-let","when","when-let"),oQ=Xe(RD),aQ={collectionKey:Xe(vD(0)),value:Xe(vD(1)),argumentOrParameter:Xe(wD(Je(Av),t=>t!==0?t:-1)),functionCall:Av,functionCallee:eh([ED,t=>Hl(t)[0]]),namedFunction:Xe(_D),functionName:bD,name:bD,anonymousFunction:ar(iQ("fn"),yr("anon_fn_lit")),ifStatement:oQ,condition:eh([RD,t=>Hl(t)[1]])},kD=oi(aQ);var AD=["command","displayed_equation","generic_command","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],sQ=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],MD=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],PD=MD.map(t=>`${t}[text]`),cQ=MD.map(t=>`${t}[command]`);function Mv(t,e){return{selection:new Pe(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new Pe(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function lQ(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new Pe(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}var pQ={argumentOrParameter:ar(oc([Je(...AD),Je(...sQ)],1,Mv),Xe(Je("begin[name]","end[name]",...PD),Mv)),functionCall:ar(Xe(Je(...AD,"begin","end")),Xe(Je(...cQ),lQ)),name:ar(Xe(Je(...PD),Mv),yr("begin[name][text]","end[name][text]"))},DD=oi(pQ);var uQ=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],fQ=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],mQ=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],dQ=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],hQ=[":","=>"];function gQ(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var yQ={statement:ar(yr(...uQ),oc([Je(...mQ),Je(...fQ)],1)),anonymousFunction:ar(yr("lambda","do_block"),Xe(gQ)),condition:xD("*[condition]"),argumentOrParameter:ac("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:sc(["pair[key]"],[":"]),value:Nn(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],dQ.concat(hQ))},FD=oi(yQ);function Dv(){let t=js(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let s=r.childForFieldName("alternative");if(s==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new Pe(l.start,qS(s.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new Pe(qS(i.child(0).startPosition),o.end),context:{}}}}function ID(t){let e=Dv();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):So(r,n)}}var CD=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],xQ=["source_file","block","declaration_list"];function TQ(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function SQ(t,e){return{selection:MM(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:Qr(e.children[0].startPosition,e.children[1].startPosition)}}}function vQ(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return CD.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var bQ={statement:oc([Je(...xQ),Je(...CD)],1),condition:ar(yr("while_expression[condition]","if_expression[condition]"),Xe(Je("while_let_expression","if_let_expression"),js(["while","if","block"],[],{includeUnnamedChildren:!0})),Nn(["*.match_pattern![condition]"],["if"])),type:ar(Nn(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Xe(Je("constrained_type_parameter[bounds]","where_predicate[bounds]"),SQ),Nn(["function_item[return_type]"],["->"]),Xe(TQ),yr("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:ac("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:ar(sc(["field_initializer[name]","field_pattern[name]"],[":"])),name:ar(yr("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),sc(["field_initializer[name]","field_pattern[name]"],[":"])),value:ar(Nn(["let_declaration[value]"],["="]),Nn(["field_initializer[value]","field_pattern[pattern]"],[":"]),yr("meta_item[value]","const_item[value]"),Xe(vQ)),attribute:sc(["mutable_specifier","attribute_item"]),branch:ar(yr("match_arm"),Xe(Je("else_clause"),ID("if_expression")),Xe(Je("if_expression"),Dv()))},ND=oi(bQ);var wQ={argumentOrParameter:ac("arguments","parameters","class_parameters","bindings"),branch:Xe(Je("case_clause"),js([],[],{includeUnnamedChildren:!0})),type:Nn(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:Nn(["*[value]","*[default_value]","type_definition[type]"],["="])},OD=oi(wQ);function LD(t,e,r){let n=Bl[t];if(n==null)throw new Nu(t);let i=n[e];return i==null?TD(e):r?EQ(i):i}var Bl={clojure:kD,latex:DD,ruby:FD,rust:ND,scala:OD};function EQ(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>_Q(i.node,pm(e,i.selection.selection),t)),n.length>0?n:null)}}function _Q(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var th=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=LD(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new xt(this.modifier.scopeType.type);let i=RQ(n,r,{editor:e.editor,selection:new Pe(e.contentRange.start,e.contentRange.end)});if(i==null)throw new xt(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:p,removalRange:f}=o.context;if(f!=null&&(l!=null||p!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:d,selection:h}=o.selection;return new yo({scopeTypeType:this.modifier.scopeType.type,editor:d,isReversed:e.isReversed,contentRange:h,removalRange:f,insertionDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:p})})}};function RQ(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:pm(r,o.selection),context:o.context}));n=n.parent}return null}var cc=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new qd;case"endOf":return new Gd;case"extendThroughStartOf":case"extendThroughEndOf":return new Od(this,e);case"toRawSelection":return new Yd(e);case"interiorOnly":return new Ld(this,e);case"excludeInterior":return new Ud(this,e);case"leading":return new Bd(this,e);case"trailing":return new Vd(this,e);case"visible":return new Jd(e);case"containingScope":return new nc(this,this.scopeHandlerFactory,e);case"preferredScope":return new Kd(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new ic(this,this.storedTargets,e):new Dd(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new ic(this,this.storedTargets,e):new jd(this,e);case"relativeScope":return e.scopeType.type==="instance"?new ic(this,this.storedTargets,e):new Xd(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new Fd(e);case"keepEmptyFilter":return new Id(e);case"cascading":return new Rd(this,e);case"modifyIfUntyped":return new _o(this,e);case"range":return new Qd(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}getLegacyScopeStage(e){switch(e.scopeType.type){default:return new th(this.languageDefinitions,e)}}};async function UD(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Ie({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=Ai(r),s=o.map(f=>{let d=r[f],h=kQ(d);return HD(e.document,h.selections,h.behavior)});n||s.push(HD(e.document,e.selections,1));let l=await("edits"in i?MQ(t,e,i.edits,s):BD(t,i.callback,e.document,s));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((f,d)=>[f,l[d]]))}function HD(t,e,r){return e.map(n=>AQ(t,n,n instanceof Pe?!n.isReversed:!0,r))}function kQ(t){return"selections"in t?t:{selections:t,behavior:1}}function AQ(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function PQ(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new Pe(r,n):new Pe(n,r)))}async function BD(t,e,r,n){let i=t.registerRangeInfoList(r,ot(n));return await e(),i(),PQ(n)}async function MQ(t,e,r,n){return await BD(t,async()=>{if(!await UD(t,e,r))throw new Error("Could not apply edits")},e.document,n)}var rh=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Le(k(),e,"pendingModification0"),{thatSelections:ot(await ct(e,async(n,i)=>{let o=i.map(({contentRange:f})=>f),s=DQ(n,o),l=k().getEditableTextEditor(n),{contentRanges:p}=await Ie({rangeUpdater:this.rangeUpdater,editor:l,edits:s,selections:{contentRanges:o}});return Mt(i,p).map(([f,d])=>({editor:f.editor,selection:d.toSelection(f.isReversed)}))}))}}};function DQ(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,s=r.lineAt(o),l=s.text.slice(0,s.rangeTrimmed?.start?.character??s.range.start.character),p=s.text.slice(0,o.character).search(/\s+$/),f=p>-1?new Y(new de(s.lineNumber,p),o):o.toEmptyRange();n.push({range:f,text:`
`+l,isReplace:!f.isEmpty})}return n}function nh(t){return t.length<2?t:fP(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,s)=>o.contentRange.start.compareTo(s.contentRange.start));let i=!0;for(;i;)[n,i]=FQ(n);return n})}function FQ(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!IQ(r[r.length-1],n)?(e.push(VD(r)),r=[n]):r.push(n)}),e.push(VD(r)),[e,e.length!==t.length]}function VD(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return Ro(e,r)}function IQ(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Vl=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Le(k(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Le(k(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((s,l)=>{let p=r[l];if((s==null||p==null)&&!o)throw new Error("Targets must have same number of args");if(p!=null){let f;o?f=e.map((d,h)=>{let y=d.contentText,T=(p.isRaw?null:p.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return h>0&&T!=null?T+y:y}).join(""):f=s.contentText,i.push({edit:p.constructChangeEdit(f),editor:p.editor,originalTarget:p.target,isSource:!1})}else p=r[0];n.includes(s)||(n.push(s),this.type==="bring"&&i.push({edit:s.toDestination("to").constructChangeEdit(p.target.contentText),editor:s.editor,originalTarget:s,isSource:!0}))}),this.type==="move"&&nh(n).forEach(s=>{i.push({edit:s.constructRemovalEdit(),editor:s.editor,originalTarget:s,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return ot(await Fi(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:T})=>!T),o=this.type==="swap"?[]:n.filter(({isSource:T})=>T),s=this.type==="swap"?n:n.filter(({isSource:T})=>!T),l=o.map(({edit:T})=>T.range),p=s.map(({edit:T})=>T.range),f=k().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:h}=await Ie({rangeUpdater:this.rangeUpdater,editor:f,edits:i.map(({edit:T})=>T),selections:{sourceEditRanges:l,destinationEditRanges:{selections:p,behavior:0}}}),y=[...this.getMarks(o,d),...this.getMarks(s,h)];return y.sort((T,w)=>n.findIndex(E=>E.originalTarget===T.target)-n.findIndex(E=>E.originalTarget===w.target)),y}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],s=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:s.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>hn(n,e.find(i=>i.target===n).selection);return Promise.all([Le(k(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Le(k(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function WD(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var ih=class extends Vl{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){r=WD(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},oh=class extends Vl{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:CQ};this.run=this.run.bind(this)}async run(r,n){r=WD(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},ah=class extends Vl{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,s)=>{let l=n[s];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function CQ(t){return t.getRemovalHighlightRange()}var Wl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){Mr(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var $l=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=Rt(e),n=e.map(o=>new Ke({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await k().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var lc=t=>new Ot({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var pc=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Le(k(),e,"referenced"),r.ensureSingleEditor&&Rt(e),r.ensureSingleTarget&&Mr(e);let n=k().activeEditableTextEditor,i=r.setSelection?uP:ct,o=ot(await i(e,(s,l)=>this.runForEditor(r,s,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=k().getEditableTextEditor(r),o=r.selections,s=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:p,targetSelections:f}=await Ie({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(p),r.document.version===s?n:f.map(d=>lc({editor:r,selection:d}))}};var kt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new pc(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=k().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,s)=>NQ(o,i?s.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},sh=class extends kt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},ch=class extends kt{constructor(){super(...arguments);this.command="toggleLineComment"}},lh=class extends kt{constructor(){super(...arguments);this.command="indentLine"}},ph=class extends kt{constructor(){super(...arguments);this.command="outdentLine"}},uh=class extends kt{constructor(){super(...arguments);this.command="fold"}},fh=class extends kt{constructor(){super(...arguments);this.command="unfold"}},mh=class extends kt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},dh=class extends kt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},hh=class extends kt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},gh=class extends kt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},yh=class extends kt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},xh=class extends kt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Th=class extends kt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Sh=class extends kt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}},vh=class extends kt{constructor(){super(...arguments);this.command="gitAccept";this.ensureSingleTarget=!0}},bh=class extends kt{constructor(){super(...arguments);this.command="gitRevert";this.ensureSingleTarget=!0}},wh=class extends kt{constructor(){super(...arguments);this.command="gitStage";this.ensureSingleTarget=!0}},Eh=class extends kt{constructor(){super(...arguments);this.command="gitUnstage";this.ensureSingleTarget=!0}};function NQ(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"gitAccept":return t.gitAccept(e?.[0]);case"gitRevert":return t.gitRevert(e?.[0]);case"gitStage":return t.gitStage(e?.[0]);case"gitUnstage":return t.gitUnstage(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var _h=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(k().capabilities.commands.clipboardCopy!=null)return new sh(this.rangeUpdater).run(e,r);r.showDecorations&&await Le(k(),e,"referenced");let n=e.map(i=>i.contentText).join(`
`);return await k().clipboard.writeText(n),{thatTargets:e}}};var Rh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await k().flashRanges(e.flatMap(OQ));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function OQ(t){let{editor:e,contentRange:r}=t,n=t.getRemovalHighlightRange(),i=[{editor:e,range:hr(r),style:"referenced"}];return n.type==="line"?i.push({editor:e,range:n,style:"pendingDelete"}):i.push(...LQ(r,n).map(o=>({editor:e,range:hr(o),style:"pendingDelete"}))),i}function LQ(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,s=[];return i.isBefore(r)&&s.push(new Y(i,r)),o.isAfter(n)&&s.push(new Y(n,o)),s}var jl=class{constructor(){this.run=this.run.bind(this)}async run(e){return await ct(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(s=>{let l=s.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new Fv;await k().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},Fv=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function $D(t,e,r,n){let i=r.destinations.map((w,E)=>{if(n||r.actionTypes[E]==="edit")return{destination:w,index:E}}).filter(w=>!!w);if(i.length===0)return r;let o=i.map(w=>w.destination.constructChangeEdit("")),s=r.cursorRanges.map((w,E)=>({range:w,index:E})).filter(({range:w})=>w!=null),l=s.map(({index:w})=>w),p=s.map(({range:w})=>w),f=o.map(w=>w.range),{thatRanges:d,cursorRanges:h,editRanges:y}=await Ie({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:p,editRanges:{selections:f,behavior:0}}}),T=[...r.cursorRanges];return Mt(l,h).forEach(([w,E])=>{T[w]=E}),i.forEach((w,E)=>{let V=o[E].updateRange(y[E]);T[w.index]=V}),{destinations:r.destinations,actionTypes:r.actionTypes,thatRanges:d,cursorRanges:T}}async function jD({acceptsLocation:t},e,r,n){let i=n.destinations.map((h,y)=>{if(n.actionTypes[y]==="insertLineAfter")return{destination:h,index:y}}).filter(h=>!!h);if(i.length===0)return n;let o=i.map(({destination:h})=>h.contentRange),s=n.destinations.map(({contentRange:h})=>h),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(h=>h.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:p,thatRanges:f}=await Ie({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:s,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((h,y)=>{d[h.index]=r.selections[y]}),{destinations:n.destinations.map((h,y)=>h.withTarget(h.target.withContentRange(p[y]))),actionTypes:n.actionTypes,thatRanges:f,cursorRanges:d}}async function zD(t,e){let r=Mr(e),n=k().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:dn([r.target.thatTarget])}}var kh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return zD(this.actions,e);let r=k().getEditableTextEditor(Rt(e)),n={destinations:e,actionTypes:e.map(l=>l.getEditNewActionType()),thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=k().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await jD(i,this.rangeUpdater,r,n)),n=await $D(this.rangeUpdater,r,n,!o);let s=n.destinations.map((l,p)=>{let f=n.cursorRanges[p];if(f==null)throw Error("Cursor range is undefined for destination");return f.toSelection(l.target.isReversed)});return await r.setSelections(s,{focusEditor:!0}),{thatSelections:dn(n.destinations.map(l=>l.target),n.thatRanges)}}};var Ah=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ii)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},Ph=class extends Ah{constructor(){super(...arguments);this.insertionMode="before"}},Mh=class extends Ah{constructor(){super(...arguments);this.insertionMode="after"}};var zl=class{constructor(e){this.callbackAction=new pc(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:s,showDecorations:l}={}){let p=n??[];return this.callbackAction.run(e,{callback:()=>k().executeCommand(r,...p),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:s??!0,showDecorations:l??!0})}};var Dh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){Mr(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),Jo(k().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},Fh=class extends Dh{find(e){return k().findInDocument(e)}},Ih=class extends Dh{find(e){return k().findInWorkspace(e)}};var Ch=class{constructor(){this.run=this.run.bind(this)}async run(e){return await Le(k(),e,"referenced"),{thatTargets:e}}};var uc=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=Mr(e);return await Le(k(),e,"referenced"),await k().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:dn(e)}}};function qD(t){let e=t.split(/^---$/m),r={snippets:[]};for(let n of e){let i=n.match(/^-$/m),o=i!=null?n.slice(0,i.index):n,s=i!=null?n.slice(i.index+i[0].length):null,l=s?VQ(s):null,p=UQ(o);if(l!=null){p==null&&(p={variables:[]});let{variables:f,...d}=p;r.snippets.push({...d,body:l,variables:f})}else if(p!=null){if(r.header!=null||r.snippets.length!==0)throw Error("Header snippet must be first in file");r.header=p}}return r}function UQ(t){let e={variables:[]},r=HQ(t);if(Object.keys(r).length===0)return;let n={};for(let[i,o]of Object.entries(r))switch(i){case"name":e.name=o;break;case"description":e.description=o;break;case"phrase":e.phrases=ql(o);break;case"insertionScope":e.insertionScopes=ql(o);break;case"language":e.languages=ql(o);break;default:if(!i.startsWith("$"))throw Error(`Invalid key '${i}'`);n[i]=o}return e.variables=BQ(n),e}function HQ(t){let e=t.split(/\r?\n/).map(n=>n.trim()).filter(Boolean),r={};for(let n of e){let i=n.split(":");if(i.length!==2)throw Error(`Invalid line '${n}'`);let o=i[0].trim(),s=i[1].trim();if(o.length===0||s.length===0)throw Error(`Invalid line '${n}'`);if(r[o]!=null)throw Error(`Duplicate key '${o}' in '${t}'`);r[o]=s}return r}function BQ(t){let e={},r=n=>(e[n]==null&&(e[n]={name:n}),e[n]);for(let[n,i]of Object.entries(t)){let o=n.split(".");if(o.length!==2)throw Error(`Invalid variable key '${n}'`);let s=o[0].slice(1);switch(o[1]){case"insertionFormatter":r(s).insertionFormatters=ql(i);break;case"wrapperPhrase":r(s).wrapperPhrases=ql(i);break;case"wrapperScope":r(s).wrapperScope=i;break;default:throw Error(`Invalid variable key '${n}'`)}}return Object.values(e)}function VQ(t){let e=t.match(/^[ \t]*\S/m);if(e?.index!=null)return t.slice(e.index).trimEnd().split(/\r?\n/).map(r=>r.trimEnd())}function ql(t){return t.split("|").map(e=>e.trim())}function KD(t){let e=[];t.header!=null&&e.push(GD(t.header)),e.push(...t.snippets.map(GD));let r=e.filter(Boolean).join(`
---

`);return r?r+`
---
`:""}function GD(t){let e=[ko("name",t.name),ko("description",t.description),ko("language",t.languages),ko("phrase",t.phrases),ko("insertionScope",t.insertionScopes)].filter(Boolean);return t.variables.length>0&&(e.length>0&&e.push(""),e.push(...WQ(t.variables))),"body"in t&&e.push("-",...t.body),e.join(`
`)}function WQ(t){let e=[...t];return e.sort($Q),e.flatMap(r=>[ko(`$${r.name}.insertionFormatter`,r.insertionFormatters),ko(`$${r.name}.wrapperPhrase`,r.wrapperPhrases),ko(`$${r.name}.wrapperScope`,r.wrapperScope)]).filter(Boolean)}function ko(t,e){return e==null?"":Array.isArray(e)?`${t}: ${e.join(" | ")}`:`${t}: ${e}`}function $Q(t,e){return t.name==="0"?1:e.name==="0"?-1:t.name.localeCompare(e.name)}function QD(t,e){let r=[],n=0,i=null,[o,...s]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...s.map(p=>({text:p,startIndex:0}))].forEach(({text:p,startIndex:f})=>{let d=p.match(/^\s*/)?.[0]??"",h=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let y=Math.max(h,f),T=yT("	",n),w=p.slice(y);r.push(T+w)}),r}function YD(t,e){let r=TT(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var fc=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){if(r==null)throw new Error("Directory argument is required for GenerateSnippet action. Please update Cursorless Talon");let i=Mr(e),o=i.editor;if(Le(k(),e,"referenced"),n==null&&(n=await k().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"}),!n))return{};let s=o.document.offsetAt(i.contentRange.start),l=zQ(o,i.contentRange),p=l.map((ce,fe)=>({offsets:{start:o.document.offsetAt(ce.start)-s,end:o.document.offsetAt(ce.end)-s},name:fe===l.length-1?"0":`${fe+1}`})),f=o.document.getText(new Y(i.contentRange.start.with(void 0,0),i.contentRange.start)),d=o.document.getText(i.contentRange),h=YD(d,[...un(d,/\$|\\/g,ce=>({offsets:{start:ce.index,end:ce.index+ce[0].length},text:`\\${ce[0]}`})),...p.map(({offsets:ce,name:fe})=>({offsets:ce,text:`$${fe}`}))]),y=QD(h,f),T,w={snippets:[]};k().runMode==="test"?T=k().getEditableTextEditor(o):(T=k().getEditableTextEditor(await this.snippets.openNewSnippetFile(n,r)),w=qD(T.document.getText())),await T.setSelections([T.document.range.toSelection(!1)]);let E=1,{header:U}=w,V=w.header?.phrases!=null?void 0:[`${Iv}${E++}`],j=ce=>{let fe=U?.variables?.some(pt=>pt.name===ce.name&&pt.wrapperPhrases!=null);return{name:ce.name,wrapperPhrases:fe?void 0:[`${Iv}${E++}`]}},ne={name:U?.name===n?void 0:n,phrases:V,languages:jQ(o,U),body:y,variables:p.map(j)};w.snippets.push(ne);let se=KD(w).replace(/\$/g,"\\$").replaceAll(Iv,"$");return await T.insertSnippet(se),{thatSelections:e.map(({editor:ce,contentSelection:fe})=>({editor:ce,selection:fe}))}}};function jQ(t,e){if(!e?.languages?.includes(t.document.languageId))return[t.document.languageId]}function zQ(t,e){let r=t.selections.filter(n=>e.contains(n));return r.sort((n,i)=>n.start.compareTo(i.start)),r}var Iv="PLACEHOLDER_VFA77zcbLD6wXNmfMAay";var Gl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Kl=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Le(k(),e,"referenced"),n&&Mr(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var Ql=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(k().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(k().visibleTextEditors.map(n=>k().setHighlightRanges(r,n,[]))):await ct(e,(n,i)=>k().setHighlightRanges(r,n,i.map(o=>hn(o,o.contentRange)))),{thatTargets:e}}};var Nh=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Le(k(),e,"pendingModification0"),{thatTargets:ot(await ct(e,this.runForEditor))})}hasCapability(){return this.isIndent?k().capabilities.commands.indentLine!=null:k().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new lh(this.rangeUpdater):new ph(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?qQ(e,r):GQ(e,r),{targetSelections:i}=await Ie({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return Mt(r,i).map(([o,s])=>lc({editor:e,selection:s.toSelection(o.isReversed)}))}},Oh=class extends Nh{constructor(e){super(e,!0)}},Lh=class extends Nh{constructor(e){super(e,!1)}};function qQ(t,e){let{document:r}=t,n=ZD(e),i=KQ(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function GQ(t,e){let{document:r}=t,n=ZD(e),i=QQ(t);return n.map(o=>{let s=r.lineAt(o),l=s.text.match(i),{start:p}=s.range,f=p.translate(void 0,l?.[0].length);return{range:new Y(p,f),text:""}})}function ZD(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function KQ(t){if(t.options.insertSpaces){let e=XD(t);return" ".repeat(e)}return"	"}function QQ(t){if(t.options.insertSpaces){let e=XD(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function XD(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var Uh=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(ii)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=ot(await ct(e,this.runForEditor));return await k().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:hr(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(y=>y.toDestination(n).constructChangeEdit(y.contentText)),o=r.map(({contentSelection:y})=>y),s=i.map(({range:y})=>y),l=k().getEditableTextEditor(e),{contentSelections:p,editRanges:f}=await Ie({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:s,behavior:0}}}),d=Mt(i,f).map(([y,T])=>y.updateRange(T)),h=e.selections[0];return p.some(y=>y.intersection(h)!=null)&&await l.revealRange(h),{sourceMark:dn(r,d),thatMark:dn(r,p)}}},Hh=class extends Uh{constructor(e,r){super(e,r,!0)}},Bh=class extends Uh{constructor(e,r){super(e,r,!1)}};var Yl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ii)]}async run(e){let r=await ct(e,async(i,o)=>{let s=this.getEdits(o),l=o.map(d=>d.thatTarget.contentSelection),{contentSelections:p,editRanges:f}=await Ie({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(i),edits:s,selections:{contentSelections:l,editRanges:{selections:s.map(d=>d.range),behavior:0}}});return{thatMark:p.map(d=>({editor:i,selection:d})),flashRanges:ia(s,f).map(([d,h])=>({editor:i,range:d.isLine?d.updateRange(h):h,isLine:d.isLine}))}});return await k().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:s,isLine:l})=>({editor:o,range:l?zr(s):hr(s),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},Vh=class extends Yl{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[jh(r,"before"),jh(r,"after")])}},Wh=class extends Yl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>jh(r,"before"))}},$h=class extends Yl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>jh(r,"after"))}};function jh(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.textualType==="line"}}function eF(t,e){return YQ(JD(t),JD(e))}function JD(t){if(t.languages!=null)return{langIds:t.languages}}function YQ(t,e){if(t==null&&e==null)return 0;if(t==null)return-1;if(e==null)return 1;if(t.langIds==null&&e.langIds!=null)return-1;if(e.langIds==null&&t.langIds!=null)return 1;let r=ZQ(t.scopeTypes,e.scopeTypes);return r!==0?r:t.langIds==null?0:e.langIds.length-t.langIds.length}function ZQ(t,e){return t==null&&e!=null?-1:e==null&&t!=null?1:0}function mc(t,e){if(t.type==="named")throw new Error("Cursorless snippets are deprecated. Please use community snippets. Update to latest cursorless-talon and say 'cursorless migrate snippets'.");if(t.type==="custom")return t;let r=JQ(t.snippets,e);r.sort(eF);let n=r[0];if(n==null){let i=XQ(t.snippets);throw new Error(`No snippet available for language '${e}'. Available languages: ${i}`)}return n}function XQ(t){let e=new Set(t.flatMap(r=>r.languages??[]));return Array.from(e).sort().join(", ")}function JQ(t,e){return t.filter(r=>r.languages==null?!0:r.languages.includes(e))}var Cv=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},Ao=class{constructor(){this._children=[]}appendChild(e){return e instanceof Yt&&this._children[this._children.length-1]instanceof Yt?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function s(l,p){for(let f of l)f.parent=p,s(f.children,f)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Gh)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Yt=class t extends Ao{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},zh=class extends Ao{},Zt=class t extends zh{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof qh?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},qh=class t extends Ao{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Yt&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},Nv=class t extends Ao{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof On&&!!s.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof On){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},On=class t extends Ao{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},Ln=class t extends zh{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Yt(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function tF(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var Gh=class t extends Ao{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Zt&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return tF([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Zt&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof Ln&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){tF(this.children,e)}},si=class{constructor(){this._scanner=new Cv;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new Gh;for(;this._parse(i););let o=new Map,s=[],l=0;i.walk(p=>(p instanceof Zt&&(l+=1,p.isFinalTabstop?o.set(0,void 0):!o.has(p.index)&&p.children.length>0?o.set(p.index,p.children):s.push(p)),!0));for(let p of s){let f=o.get(p.index);if(f){let d=new Zt(p.index);d.transform=p.transform;for(let h of f)d.appendChild(h.clone());i.replace(p,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Zt(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Yt(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Zt(Number(r)):new Ln(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Zt(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Yt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new qh;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Yt(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new Ln(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Yt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new Nv,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Yt(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new On(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new On(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new On(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new On(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new On(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new On(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new On(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Yt(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var Kh=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function Qh(t,e,r){let n=e7(t)+1,i={};t.walk(o=>{if(o instanceof Ln){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Yt(r[o.name])]);else if(!Kh[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Zt(s);o.children.forEach(p=>l.appendChild(p)),o.parent.replace(o,[l])}}else o instanceof Zt&&(o.index.toString()===e?o.parent.replace(o,[new Ln("TM_SELECTED_TEXT")]):r!=null&&Object.prototype.hasOwnProperty.call(r,o.index)&&o.parent.replace(o,[new Yt(r[o.index])]));return!0})}function e7(t){let e=0;return t.walk(r=>(r instanceof Zt&&(e=Math.max(e,r.index)),!0)),e}function Yh(t,e,r){let n=t7(t)+1,i={};t.walk(o=>{if(o instanceof Ln){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Yt(r[o.name])]);else if(!Kh[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Zt(s);o.children.forEach(p=>l.appendChild(p)),o.parent.replace(o,[l])}}else o instanceof Zt&&o.index.toString()===e&&o.parent.replace(o,[new Ln("TM_SELECTED_TEXT")]);return!0})}function t7(t){let e=0;return t.walk(r=>(r instanceof Zt&&(e=Math.max(e,r.index)),!0)),e}function Zh(t,e,r){let n=e.map(o=>r7(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function r7(t,e,r){let n=e.editor.document.languageId,i={multipleTargets:!1};return r.findIndex(({scope:o})=>{if(o==null)return!0;let{langIds:s,scopeTypes:l,excludeDescendantScopeTypes:p}=o;if(s!=null&&!s.includes(n))return!1;if(l!=null){let f=l.concat(p??[]),d,h;for(let y of f)try{let T=t.create({type:"containingScope",scopeType:{type:y}}).run(e,i)[0];e.contentRange.isRangeEqual(T.contentRange)&&(T=t.create({type:"containingScope",scopeType:{type:y},ancestorIndex:1}).run(e,i)[0]),(d==null||d.contentRange.contains(T.contentRange))&&(d=T,h=y)}catch{continue}return h==null?!1:d!=null&&!(p??[]).includes(h)}return!0})}var rF=!1;function Xh(){rF||(Jo(k().messages,"legacySnippets","Talon community snippets are now fully supported in Cursorless! Cursorless's experimental snippets are now deprecated, but in most cases we can help you migrate automatically. Update cursorless-talon and say 'cursorless migrate snippets'."),rF=!0)}var iF={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(nF).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(nF).join("")}};function nF(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}var Zl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new si;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new ec(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}getSnippetInfo(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=Zh(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(s){return s==null?void 0:n7(i,o,s)}}}async run(e,r){Xh();let n=k().getEditableTextEditor(Rt(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(f=>new Ot({editor:n,contentRange:f,isReversed:!1,hasExplicitRange:!0}))),s=this.snippetParser.parse(i);Yh(s,null,o(r.substitutions));let l=s.toTextmateString(),{editorSelections:p}=await Ie({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:p.map(f=>({editor:n,selection:f}))}}};function n7(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let s=iF[o];if(s==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,s(i.split(" "))]}))}var Xl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new si;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=Rt(e),o=mc(r,n.document.languageId).scopeTypes??[];return o.length===0?[]:[new ec(this.modifierStageFactory,{type:"cascading",modifiers:o.map(s=>({type:"containingScope",scopeType:s}))})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(Rt(e)),i=mc(r,n.document.languageId),o=this.snippetParser.parse(i.body),s=i.substitutions??r.substitutions;Qh(o,null,s);let l=o.toTextmateString();await this.actions.editNew.run(e);let{editorSelections:p}=await Ie({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:p.map(f=>({editor:n,selection:f}))}}legacy(){return new Zl(this.rangeUpdater,this.snippets,this.actions,this.modifierStageFactory)}};var Jl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ii)]}async run(e){return await Le(k(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:ot(await ct(e,async(n,i)=>{let{thatRanges:o}=await Ie({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(n),edits:i7(n,i),selections:{thatRanges:i.map(({contentRange:s})=>s)}});return ia(i,o).map(([s,l])=>({editor:n,selection:l.toSelection(s.isReversed)}))}))}}};function i7(t,e){let r=[];for(let n of e){let i=n.textualType==="token"?o7(n):a7(n);r.push(...i)}return r}function o7(t){let{editor:e,contentRange:r}=t,n=Dr(e.document.languageId).tokenMatcher,i=yn(n,e,r,"forward");return Array.from(IS(i)).map(([o,s])=>({range:new Y(o.end,s.start),text:"",isReplace:!0}))}function a7(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=Os(QP(n,i+1),s=>e.lineAt(s));return Array.from(IS(o)).map(([s,l])=>({range:new Y(s.rangeTrimmed?.end??s.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var Jh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=k().getEditableTextEditor(Rt(e)),n=k().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Ie({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:s,editorSelections:l}=await Ie({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(s),n!=null&&!n.isActive&&await n.focus(),await k().flashRanges(l.map(p=>({editor:r,range:hr(p),style:"justAdded"}))),{thatSelections:l.map(p=>({editor:r,selection:p}))}}};var eg=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await k().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?ia(e,n).map(([s,l])=>({destination:s,text:l})):e.map(s=>({destination:s,text:r}));return{thatSelections:ot(await Fi(i,({destination:s})=>s.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:s,text:l})=>s.constructChangeEdit(l)),{editSelections:i}=await Ie({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:s})=>s),behavior:0}}}),o=ia(n,i).map(([s,l])=>s.updateRange(l).toSelection(l.isReversed));return await k().flashRanges(o.map(s=>({editor:e,range:hr(s),style:"justAdded"}))),o.map(s=>({editor:e,selection:s}))}};var tg=class{constructor(e,r){this.run=this.run.bind(this),this.runner=k().capabilities.commands.clipboardPaste!=null?new Jh(e,r):new eg(e)}run(e){return this.runner.run(e)}};var ep=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=nh(e),r&&await Le(k(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:ot(await ct(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(s=>s.constructRemovalEdit()),i=k().getEditableTextEditor(e),{editRanges:o}=await Ie({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:s})=>s)}});return Mt(r,o).map(([s,l])=>new ho({editor:s.editor,isReversed:s.isReversed,contentRange:l}))}};var tp=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Le(k(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=Mt(e,n).map(([l,p])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(p)})),o=[],s=[];return await Fi(i,l=>l.editor,async(l,p)=>{let f=p.map(({edit:y})=>y),{contentSelections:d,editRanges:h}=await Ie({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(l),edits:f,selections:{contentSelections:p.map(({target:y})=>y.contentSelection),editRanges:{selections:f.map(({range:y})=>y),behavior:0}}});for(let[y,T]of Mt(p,d))o.push(y.target.withContentRange(T));for(let[y,T]of Mt(p,h))s.push({editor:l,selection:y.edit.updateRange(T).toSelection(!1)})}),{sourceTargets:o,thatSelections:s}}};var rp=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[Ev(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(s=>{let l=s.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Le(k(),i,"pendingModification0");let o=await ct(i,async(s,l)=>{let p=l.map((h,y)=>({editor:s,range:h.contentRange,text:y%2===0?r:n})),{sourceRanges:f,thatRanges:d}=await Ie({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(s),edits:p,selections:{sourceRanges:e.map(h=>h.thatTarget.contentRange),thatRanges:e.map(h=>h.contentRange)}});return{sourceMark:dn(e,f),thatMark:dn(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:s})=>s),thatSelections:o.flatMap(({thatMark:s})=>s)}}};var np=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=yl(e,s=>s.editor),n=Array.from(r,([s,l])=>({lineNumber:s7(l,this.at),editor:s})),i=k().activeEditableTextEditor;for(let s of n)await k().getEditableTextEditor(s.editor).revealLine(s.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(s=>{let l=s.editor.visibleRanges,p=l[0].start.line,f=l[l.length-1].end.line;return s.contentRange.start.line>p||s.contentRange.end.line<f||s.contentRange.start.line===p&&s.contentRange.end.line===f});return await k().flashRanges(o.map(s=>({editor:s.editor,range:zr(s.contentRange),style:"referenced"}))),{thatTargets:e}}},rg=class extends np{constructor(){super("top")}},ng=class extends np{constructor(){super("center")}},ig=class extends np{constructor(){super("bottom")}};function s7(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var Po=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=Rt(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n,o=this.selectionMode==="set"&&i.length===1&&i[0].isEmpty;return await k().getEditableTextEditor(r).setSelections(i,{focusEditor:!0,highlightWord:o}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new Pe(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new Pe(r.contentRange.end,r.contentRange.end))}}},og=class extends Po{constructor(){super("set","content")}},ag=class extends Po{constructor(){super("set","before")}},sg=class extends Po{constructor(){super("set","after")}},cg=class extends Po{constructor(){super("add","content")}},lg=class extends Po{constructor(){super("add","before")}},pg=class extends Po{constructor(){super("add","after")}};var ip=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var op=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Le(k(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,s=this.treeSitter.getTree(i.document);r.push(c7(i.document,s,o))}return k().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function c7(t,e,r){let n=[],i=[];return oF(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function oF(t,e,r,n,i){for(;;){let o=new Y(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let s="  ".repeat(i),l=l7(n),p=s+l;if(n.nodeIsNamed)t.push(`${p}${n.nodeType} [${o}]`),e.push(`${p}(${n.nodeType}`),n.gotoFirstChild()?(oF(t,e,r,n,i+1),n.gotoParent(),e.push(`${s})`)):e[e.length-1]+=")";else{let f=`"${n.nodeType}"`;t.push(`${p}${f} [${o}]`),e.push(`${p}${f}`)}}if(!n.gotoNextSibling())return}}function l7(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var ap=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&Jo(k().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((s,l)=>s.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(s=>s.toDestination("to")),i);return{thatSelections:o}}},ug=class extends ap{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},fg=class extends ap{sortTexts(e){return e.reverse()}},mg=class extends ap{sortTexts(e){return xT(e)}};var sp=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(ii)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Le(k(),r,"referenced"),await ct(e,async(n,i)=>{let o=i.map(s=>hn(s,s.contentRange));await k().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var cp=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await ct(e,async(o,s)=>{let l=s.map(E=>({start:new Pe(E.contentRange.start,E.contentRange.start),end:new Pe(E.contentRange.end,E.contentRange.end)})),p=l.flatMap(({start:E,end:U})=>[{text:r,range:E},{text:n,range:U,isReplace:!0}]),f=s.map(E=>E.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:h,sourceSelections:y,thatSelections:T}=await Ie({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(o),edits:p,selections:{boundariesStartSelections:{selections:l.map(({start:E})=>E),behavior:2},boundariesEndSelections:{selections:l.map(({end:E})=>E),behavior:3},sourceSelections:{selections:f,behavior:1},thatSelections:{selections:f,behavior:0}}}),w=[...d,...h];return await k().flashRanges(w.map(E=>({editor:o,range:hr(E),style:"justAdded"}))),{sourceMark:y.map(E=>({editor:o,selection:E})),thatMark:T.map(E=>({editor:o,selection:E}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var lp=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new si;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new _o(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){let{name:r,variableName:n}=e,s=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return s==null?void 0:{type:s}}getBody(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return Zh(this.modifierStageFactory,r,i.definitions).body.join(`
`)}async run(e,r){Xh();let n=k().getEditableTextEditor(Rt(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);Yh(o,r.variableName);let s=o.toTextmateString();await Le(k(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),p=()=>n.insertSnippet(s,l),{targetSelections:f}=await Ie({rangeUpdater:this.rangeUpdater,editor:n,callback:p,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:f.map(d=>({editor:n,selection:d}))}}};var pp=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new si;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=Rt(e),i=mc(r,n.document.languageId);return i.scopeType==null?[]:[new _o(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:i.scopeType}})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(Rt(e)),i=mc(r,n.document.languageId),o=this.snippetParser.parse(i.body);Qh(o,i.variableName);let s=o.toTextmateString();await Le(k(),e,"pendingModification0");let l=e.map(f=>f.contentSelection),{targetSelections:p}=await Ie({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(s,l),preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:p.map(f=>({editor:n,selection:f}))}}legacy(){return new lp(this.rangeUpdater,this.snippets,this.modifierStageFactory)}};var p7=/-?\d+(\.\d+)?/g,dg=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Fi(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let p=n.offsetAt(l.contentRange.start),f=l.contentText,d=al(f,p7);for(let h of d)i.push(u7(e,p,h)),o.push(f7(this.isIncrement,h.text))}let{thatSelections:s}=await this.actions.replace.run(i,o);return s}},hg=class extends dg{constructor(e){super(e,!0)}},gg=class extends dg{constructor(e){super(e,!1)}};function u7(t,e,r){return new Ke({editor:t,isReversed:!1,contentRange:new Y(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function f7(t,e){return e.includes(".")?d7(t,e).toString():m7(t,e).toString()}function m7(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function d7(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var yg=class{constructor(e,r,n,i){this.addSelection=new cg,this.addSelectionBefore=new lg,this.addSelectionAfter=new pg,this.callAsFunction=new Wl(this),this.clearAndSetSelection=new $l(this),this.copyToClipboard=new _h(this,n),this.cutToClipboard=new Rh(this),this.decrement=new gg(this),this.deselect=new jl,this.editNew=new kh(n,this),this.editNewLineAfter=new Mh(this,i),this.editNewLineBefore=new Ph(this,i),this.executeCommand=new zl(n),this.extractVariable=new Sh(n),this.findInDocument=new Fh(this),this.findInWorkspace=new Ih(this),this.flashTargets=new Ch,this.foldRegion=new uh(n),this.followLink=new uc({openAside:!1}),this.followLinkAside=new uc({openAside:!0}),this.generateSnippet=new fc(r),this.getText=new Kl,this.gitAccept=new vh(n),this.gitRevert=new bh(n),this.gitStage=new wh(n),this.gitUnstage=new Eh(n),this.highlight=new Ql,this.increment=new hg(this),this.indentLine=new Oh(n),this.insertCopyAfter=new Bh(n,i),this.insertCopyBefore=new Hh(n,i),this.insertEmptyLineAfter=new $h(n,i),this.insertEmptyLineBefore=new Wh(n,i),this.insertEmptyLinesAround=new Vh(n,i),this.insertSnippet=new Xl(n,r,this,i),this.joinLines=new Jl(n,i),this.breakLine=new rh(n),this.moveToTarget=new oh(n),this.outdentLine=new Lh(n),this.pasteFromClipboard=new tg(n,this),this.randomizeTargets=new mg(this),this.remove=new ep(n),this.rename=new mh(n),this.replace=new tp(n),this.replaceWithTarget=new ih(n),this.revealDefinition=new gh(n),this.revealTypeDefinition=new yh(n),this.reverseTargets=new fg(this),this.rewrapWithPairedDelimiter=new rp(n,i),this.scrollToBottom=new ig,this.scrollToCenter=new ng,this.scrollToTop=new rg,this.setSelection=new og,this.setSelectionAfter=new sg,this.setSelectionBefore=new ag,this.showDebugHover=new Th(n),this.showHover=new xh(n),this.showQuickFix=new hh(n),this.showReferences=new dh(n),this.sortTargets=new ug(this),this.swapTargets=new ah(n),this.toggleLineBreakpoint=new sp(i),this.toggleLineComment=new ch(n),this.unfoldRegion=new fh(n),this.wrapWithPairedDelimiter=new cp(n),this.wrapWithSnippet=new pp(n,r,i),this["experimental.setInstanceReference"]=new ip("instanceReference"),this["private.showParseTree"]=new op(e),this["private.getTargets"]=new Gl,this["private.setKeyboardTarget"]=new ip("keyboard")}};async function aF(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return xg(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:Tg(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return xg(i.destination)?{action:"insert",modifiers:Tg(i.destination),text:await Ov(e,i.source)}:null;case"moveToTarget":if(xg(i.destination)){let o=await Ov(e,i.source);return await h7(e,i.source),{action:"insert",modifiers:Tg(i.destination),text:o}}return null;case"callAsFunction":return Sg(i.argument)?{action:i.name,modifiers:vg(i.argument),callee:await Ov(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return Sg(i.target)?{action:i.name,modifiers:vg(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return xg(i.destination)?{action:i.name,modifiers:Tg(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return Sg(i.target)?{action:i.name,modifiers:vg(i.target)}:null}}function xg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&Sg(t.target):!1}function Sg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function Tg(t){return t.type==="primitive"?vg(t.target):[]}function vg(t){return t.type==="primitive"&&t.modifiers!=null&&t.modifiers.length>0?t.modifiers:[]}async function Ov(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function h7(t,e){await t({name:"remove",target:e})}function sF(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((s,l)=>[s,l]);for(let[s,l]of o.reverse())for(let p of g7){let f=p.accept(s);if(f.accepted){let[d,h]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],y={...t,anchor:h.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:h},active:jf(i,T=>{T.modifiers=T.modifiers.slice(Yo(T.modifiers,w=>p.accept(w).accepted)+1)})};return y=f.transformTarget?.(y)??y,{type:"primitive",mark:{type:"target",target:y},modifiers:d}}}return t}var g7=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function Uv(t,e){switch(t.type){case"list":return y7(t,e);case"range":return cF(t,e);case"primitive":return bg(t,e);case"implicit":return t}}function y7(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return cF(r,i);case"primitive":return bg(r,i)}})}}function cF(t,e){let r=x7(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return sF(r,n)}function x7(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:bg(t.anchor,e),active:bg(t.active,e.concat(t.anchor))}}function bg(t,e){let r=Lv(t.mark??(T7(t)?b7(e):null)??{type:"cursor"}),n=lF(t)??w7(e)??E7(e)??[];return{type:t.type,mark:r,modifiers:n}}function T7(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function lF(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function S7(t){if(v7(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function v7(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function b7(t){return up(t,e=>e.mark)}function w7(t){return up(t,lF)}function E7(t){return up(t,S7)}function up(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=up([n.anchor],e);if(i!=null)return i;break}case"list":{let i=up(n.elements,e);if(i!=null)return i;break}}}}function Lv(t){switch(t.type){case"range":return{...t,anchor:Lv(t.anchor),active:Lv(t.active)};case"target":return{type:"target",target:Uv(t.target,[])};default:return t}}var wg=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new Hv(this.debug)}async run(e){if(na(e)){let f=await aF(this.commandServerApi,this.runAction,e);if(f!=null)return{fallback:f}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:s,instanceReferenceTargets:l,keyboardTargets:p}=await this.runAction(e.action);return this.storedTargets.set("that",pF(i,n)),this.storedTargets.set("source",pF(s,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",p,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.directory,e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(this.getDestinations(e.destination),e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(this.getTargets(e.target),e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(tm(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},Hv=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=Uv(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function pF(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(lc):t}var Eg=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Ot({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var _g=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=k().visibleTextEditors.find(s=>s.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new Y(r.line,r.character,n.line,n.character);return[new Ot({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var Rg=class{constructor(e){this.mark=e}run(){let e=k().activeTextEditor;if(e==null)return[];let r=_7(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[CS(e,!1,n)]}},_7=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,s=Math.floor(i/100)*100,l=[],p=[],f=s+r;for(;f<=o;)f>=i&&(t.visibleRanges.find(h=>f>=h.start.line&&f<=h.end.line)?l.push(f):p.push(f)),f+=100;if(l.length===1)return l[0];if(l.length+p.length>1)throw new Error("Multiple lines matching");if(p.length===1)return p[0];throw new Error("Line is not in viewport")}}};var kg=class{constructor(e){this.mark=e}run(){return[]}};var Ag=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[Ro(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var Pg=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var Mg=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var Dg=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new Fs;case"that":case"source":case"keyboard":return new Pg(this.storedTargets,e.type);case"decoratedSymbol":return new Eg(this.readableHatMap,e);case"lineNumber":return new Rg(e);case"range":return new Ag(this,e);case"nothing":return new kg(e);case"target":return new Mg(this.targetPipelineRunner,e);case"explicit":return new _g(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function uF(t,e,r,n,i,o,s,l,p,f){r.active&&(r.log("command:"),r.log(JSON.stringify(f,null,2)));let d=dS(f),h=await n.getReadableMap(d.usePrePhraseSnapshot),y=k7(t,e,s,r,o,h,i,l);for(let w of p)y=w.wrapCommandRunner(h,y);let T=await y.run(d);return await R7(f,T)}async function R7(t,e){if(na(t))return e;if("returnValue"in e)return e.returnValue}function k7(t,e,r,n,i,o,s,l){let p=new cc(r,i,new $s(r)),f=new Dg(o,i),d=new Nd(p,f);return f.setPipelineRunner(d),new wg(e,n,i,d,new yg(t,s,l,p))}var fF=["clojure","latex","ruby","rust","scala"];async function mF(t,e){await A7(t,e)}async function A7(t,e){let r=[];for(let n of fF)await t.loadLanguage(n),await e.loadLanguage(n),Ai(Bl[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function dF(t){return fA(t)?hl(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${hl(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var Fg=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{dr(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...ra.filter(r=>r!=="instance").map(r=>({type:r})),...Nf.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:dF(e),isLanguageSpecific:P7(e)}}dispose(){this.disposable.dispose()}};function P7(t){switch(t.type){case"string":case"argumentOrParameter":case"argumentList":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"interior":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function Bv(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((s,l)=>s.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=mf(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=mf(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function Pa(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.getRemovalHighlightRange(),leadingDelimiter:hF(t.getLeadingDelimiterTarget()),trailingDelimiter:hF(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(Pa),boundary:t.getBoundary()?.map(Pa),insertionDelimiter:t.insertionDelimiter}}function hF(t){return t!=null?Pa(t):void 0}function gF(t,e,r,n,i){let o={multipleTargets:!0};return Os(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),s=>({domain:s.domain,ranges:s.getTargets(!1).map(l=>({range:l.contentRange,targets:i?M7(r,l,o).map(Pa):void 0}))}))}function M7(t,e,r){try{return t.run(e,r)}catch(n){if(n.name==="NoContainingScopeError")return[];throw n}}function yF(t,e,r){return Os(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(Pa)}))}var Ig=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:yF(e,i,Bv(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,s=this.scopeHandlerFactory.maybeCreate(r,o);if(s==null)return[];let l=this.scopeHandlerFactory.maybeCreate(s.iterationScopeType,o);return l==null?[]:gF(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),Bv(e,s,n),i)}};var Cg=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Yn(k().configuration,()=>this.onChange());this.disposables.push(k().onDidChangeVisibleTextEditors(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(s){if(ft(k().messages,"ScopeRangeWatcher.provide",s.message),o=[],k().runMode==="test")throw s}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{dr(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{dr(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var Ng=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?TF(n,r):xF(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return TF(n,r);let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?3:xF(e,o)?0:1}};function xF(t,e){return!hA(e.generateScopes(t,new de(0,0),"forward"))}function TF(t,e){switch(e.type){case"notebookCell":return 3;default:return Bl[t]?.[e.type]!=null?2:3}}var Og=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Yn(k().configuration,()=>this.onChange());this.disposable=dA(k().onDidOpenTextDocument(i.run),k().onDidCloseTextDocument(i.run),k().onDidChangeActiveTextEditor(i.run),k().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{dr(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=k().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function SF({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Cm,commandServerApi:i=new Pm,talonSpokenForms:o=new Im,snippets:s=new Fm}){am(t);let l=new bm(t),p=new Am,f=new cm,d=new vm(t,f),h=new Lm(o),y=e!=null?new Rm(p,l,e,i):new Mm;y.allocateHats();let T=r?await _d.create(t,n,r):new Dm;t.disposeOnExit(p,T,y,l,d);let w=[],E,U=V=>(E=V,uF(n,i,l,y,s,f,T,p,w,V));return{commandApi:{runCommand(V){return U(V)},runCommandSafe(...V){return U(Of(V))},repeatPreviousCommand(){if(E==null)throw new Error("No previous command");return U(E)}},scopeProvider:F7(T,f,h),customSpokenFormGenerator:h,storedTargets:f,hatTokenMap:y,injectIde:am,runIntegrationTests:()=>mF(n,T),addCommandRunnerDecorator:V=>{w.push(V)}}}function F7(t,e,r){let n=new $s(t),i=new Ig(n,new cc(t,e,n)),o=new Cg(t,i),s=new Ng(n),l=new Fg(r),p=new Og(t,s,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:s.getScopeSupport,getIterationScopeSupport:s.getIterationScopeSupport,onDidChangeScopeSupport:p.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function vF(t,e){switch(e.type){case"UntypedTarget":return new Ot({editor:t,isReversed:e.isReversed,contentRange:Rf(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new gr({editor:t,isReversed:e.isReversed,contentRange:Rf(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var ANe=Symbol("unused");var fp=class{constructor(e){this.position=e}},PNe={$0:new fp(0),$1:new fp(1),$2:new fp(2)};var bF=require("node:events"),Lg=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new bF.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function Yr(){return global._neovimRegistry==null&&(global._neovimRegistry=new Lg),global._neovimRegistry}var wF="pokey.cursorless";async function Ug(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,s,l]=await e.executeLua(r,[]),p;return l===!0?p=[new Pe(new de(o-1,s-1),new de(n-1,i-1))]:p=[new Pe(new de(n-1,i-1),new de(o-1,s-1))],console.debug(`bufferGetSelections(): selections=(${p[0].start.line}, ${p[0].start.character}), (${p[0].end.line}, ${p[0].end.character}) neovim=(${n},${i}),(${o},${s}),reverse=${l}`),p}async function EF(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function _F(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),s=new Y(new de(i-1,0),new de(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${s.start.line}, ${s.start.character}), (${s.end.line}, ${s.end.character})`),[s]}async function RF(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function Hg(t,e){await e.callFunction("setreg",["*",t])}async function kF(t){return await t.callFunction("getreg",["*"])}async function AF(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function PF(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function MF(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function DF(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var I7={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0},Bg=class{constructor(){this.commands=I7}};var mp=class{constructor(e){this.client=e}async readText(){return await kF(this.client)}async writeText(e){return await Hg(e,this.client)}};var Vg=Vr(Vv(),1);var hp=class{constructor(){this.notifier=new tr;this.mocks={...Tf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(C7(n,r))return(0,Vg.get)(i,e)??(0,Vg.get)(this.mocks,e)}return(0,Vg.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function C7(t,e){return t.languageId===e.languageId}async function Wv(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);n.sort((s,l)=>(FF(s)||IF(s))&&(FF(l)||IF(l))?1:s.range.start.line===l.range.start.line?l.range.start.character-s.range.start.character:l.range.start.line-s.range.start.line),console.debug("neovimEdit() [sorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let s of n)o.push({range:s.range,rangeOffset:i.offsetAt(s.range.start),rangeLength:i.offsetAt(s.range.end)-i.offsetAt(s.range.start),text:s.text});Yr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let s of n){let{range:l,text:p,isReplace:f}=s;p===""?await CF(t,l):l.isEmpty&&!f?await NF(t,l.start,p):await N7(t,l,p)}return await e.updateTextEditor(),!0}async function CF(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(s+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([s,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function NF(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=s+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let p=s+n[0],f=n[n.length-1]+l;await i.setLines([p,...n.slice(1,n.length-1),f],{start:e.line,end:e.line+1,strictIndexing:!0})}async function N7(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await CF(t,e),await NF(t,e.start,r)}function FF(t){return t.range.isEmpty&&!t.isReplace}function IF(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function OF(t){return Yr().onEvent("onDidChangeTextDocument",t),UF()}function LF(t,e,r){return Yr().onEvent("onDidOpenTextDocument",t),UF()}function UF(){return{dispose(){}}}var gp=class{constructor(){this.data={...Sf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var $C=Vr(Vv(),1);var yp=class{async showMessage(e,r,n,...i){}};async function HF(t,e){let r=e.activeTextEditor,n=await t.window,i=await Ug(n,t),o=r.document.getText(i[0]);await Hg(o,t)}async function BF(t,e){await AF(t)}var Wg=class{constructor(e,r,n,i,o,s,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=s}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await EF(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await Wv(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await HF(this.client,this.neovimIDE)}async clipboardPaste(){await BF(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}async gitAccept(e){throw Error("gitAccept Not implemented")}async gitRevert(e){throw Error("gitRevert Not implemented")}async gitStage(e){throw Error("gitStage Not implemented")}async gitUnstage(e){throw Error("gitUnstage Not implemented")}};var lw=Vr(require("path"),1);var VF;(()=>{"use strict";var t={975:I=>{function A(F){if(typeof F!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(F))}function z(F,O){for(var $,X="",Q=0,te=-1,Te=0,be=0;be<=F.length;++be){if(be<F.length)$=F.charCodeAt(be);else{if($===47)break;$=47}if($===47){if(!(te===be-1||Te===1))if(te!==be-1&&Te===2){if(X.length<2||Q!==2||X.charCodeAt(X.length-1)!==46||X.charCodeAt(X.length-2)!==46){if(X.length>2){var qe=X.lastIndexOf("/");if(qe!==X.length-1){qe===-1?(X="",Q=0):Q=(X=X.slice(0,qe)).length-1-X.lastIndexOf("/"),te=be,Te=0;continue}}else if(X.length===2||X.length===1){X="",Q=0,te=be,Te=0;continue}}O&&(X.length>0?X+="/..":X="..",Q=2)}else X.length>0?X+="/"+F.slice(te+1,be):X=F.slice(te+1,be),Q=be-te-1;te=be,Te=0}else $===46&&Te!==-1?++Te:Te=-1}return X}var Z={resolve:function(){for(var F,O="",$=!1,X=arguments.length-1;X>=-1&&!$;X--){var Q;X>=0?Q=arguments[X]:(F===void 0&&(F=process.cwd()),Q=F),A(Q),Q.length!==0&&(O=Q+"/"+O,$=Q.charCodeAt(0)===47)}return O=z(O,!$),$?O.length>0?"/"+O:"/":O.length>0?O:"."},normalize:function(F){if(A(F),F.length===0)return".";var O=F.charCodeAt(0)===47,$=F.charCodeAt(F.length-1)===47;return(F=z(F,!O)).length!==0||O||(F="."),F.length>0&&$&&(F+="/"),O?"/"+F:F},isAbsolute:function(F){return A(F),F.length>0&&F.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var F,O=0;O<arguments.length;++O){var $=arguments[O];A($),$.length>0&&(F===void 0?F=$:F+="/"+$)}return F===void 0?".":Z.normalize(F)},relative:function(F,O){if(A(F),A(O),F===O||(F=Z.resolve(F))===(O=Z.resolve(O)))return"";for(var $=1;$<F.length&&F.charCodeAt($)===47;++$);for(var X=F.length,Q=X-$,te=1;te<O.length&&O.charCodeAt(te)===47;++te);for(var Te=O.length-te,be=Q<Te?Q:Te,qe=-1,Ne=0;Ne<=be;++Ne){if(Ne===be){if(Te>be){if(O.charCodeAt(te+Ne)===47)return O.slice(te+Ne+1);if(Ne===0)return O.slice(te+Ne)}else Q>be&&(F.charCodeAt($+Ne)===47?qe=Ne:Ne===0&&(qe=0));break}var ht=F.charCodeAt($+Ne);if(ht!==O.charCodeAt(te+Ne))break;ht===47&&(qe=Ne)}var $t="";for(Ne=$+qe+1;Ne<=X;++Ne)Ne!==X&&F.charCodeAt(Ne)!==47||($t.length===0?$t+="..":$t+="/..");return $t.length>0?$t+O.slice(te+qe):(te+=qe,O.charCodeAt(te)===47&&++te,O.slice(te))},_makeLong:function(F){return F},dirname:function(F){if(A(F),F.length===0)return".";for(var O=F.charCodeAt(0),$=O===47,X=-1,Q=!0,te=F.length-1;te>=1;--te)if((O=F.charCodeAt(te))===47){if(!Q){X=te;break}}else Q=!1;return X===-1?$?"/":".":$&&X===1?"//":F.slice(0,X)},basename:function(F,O){if(O!==void 0&&typeof O!="string")throw new TypeError('"ext" argument must be a string');A(F);var $,X=0,Q=-1,te=!0;if(O!==void 0&&O.length>0&&O.length<=F.length){if(O.length===F.length&&O===F)return"";var Te=O.length-1,be=-1;for($=F.length-1;$>=0;--$){var qe=F.charCodeAt($);if(qe===47){if(!te){X=$+1;break}}else be===-1&&(te=!1,be=$+1),Te>=0&&(qe===O.charCodeAt(Te)?--Te==-1&&(Q=$):(Te=-1,Q=be))}return X===Q?Q=be:Q===-1&&(Q=F.length),F.slice(X,Q)}for($=F.length-1;$>=0;--$)if(F.charCodeAt($)===47){if(!te){X=$+1;break}}else Q===-1&&(te=!1,Q=$+1);return Q===-1?"":F.slice(X,Q)},extname:function(F){A(F);for(var O=-1,$=0,X=-1,Q=!0,te=0,Te=F.length-1;Te>=0;--Te){var be=F.charCodeAt(Te);if(be!==47)X===-1&&(Q=!1,X=Te+1),be===46?O===-1?O=Te:te!==1&&(te=1):O!==-1&&(te=-1);else if(!Q){$=Te+1;break}}return O===-1||X===-1||te===0||te===1&&O===X-1&&O===$+1?"":F.slice(O,X)},format:function(F){if(F===null||typeof F!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof F);return function(O,$){var X=$.dir||$.root,Q=$.base||($.name||"")+($.ext||"");return X?X===$.root?X+Q:X+"/"+Q:Q}(0,F)},parse:function(F){A(F);var O={root:"",dir:"",base:"",ext:"",name:""};if(F.length===0)return O;var $,X=F.charCodeAt(0),Q=X===47;Q?(O.root="/",$=1):$=0;for(var te=-1,Te=0,be=-1,qe=!0,Ne=F.length-1,ht=0;Ne>=$;--Ne)if((X=F.charCodeAt(Ne))!==47)be===-1&&(qe=!1,be=Ne+1),X===46?te===-1?te=Ne:ht!==1&&(ht=1):te!==-1&&(ht=-1);else if(!qe){Te=Ne+1;break}return te===-1||be===-1||ht===0||ht===1&&te===be-1&&te===Te+1?be!==-1&&(O.base=O.name=Te===0&&Q?F.slice(1,be):F.slice(Te,be)):(Te===0&&Q?(O.name=F.slice(1,te),O.base=F.slice(1,be)):(O.name=F.slice(Te,te),O.base=F.slice(Te,be)),O.ext=F.slice(te,be)),Te>0?O.dir=F.slice(0,Te-1):Q&&(O.dir="/"),O},sep:"/",delimiter:":",win32:null,posix:null};Z.posix=Z,I.exports=Z}},e={};function r(I){var A=e[I];if(A!==void 0)return A.exports;var z=e[I]={exports:{}};return t[I](z,z.exports,r),z.exports}r.d=(I,A)=>{for(var z in A)r.o(A,z)&&!r.o(I,z)&&Object.defineProperty(I,z,{enumerable:!0,get:A[z]})},r.o=(I,A)=>Object.prototype.hasOwnProperty.call(I,A),r.r=I=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:()=>y,Utils:()=>H}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function p(I,A){if(!I.scheme&&A)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${I.authority}", path: "${I.path}", query: "${I.query}", fragment: "${I.fragment}"}`);if(I.scheme&&!o.test(I.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(I.path){if(I.authority){if(!s.test(I.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(I.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let f="",d="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class y{static isUri(A){return A instanceof y||!!A&&typeof A.authority=="string"&&typeof A.fragment=="string"&&typeof A.path=="string"&&typeof A.query=="string"&&typeof A.scheme=="string"&&typeof A.fsPath=="string"&&typeof A.with=="function"&&typeof A.toString=="function"}scheme;authority;path;query;fragment;constructor(A,z,Z,F,O,$=!1){typeof A=="object"?(this.scheme=A.scheme||f,this.authority=A.authority||f,this.path=A.path||f,this.query=A.query||f,this.fragment=A.fragment||f):(this.scheme=function(X,Q){return X||Q?X:"file"}(A,$),this.authority=z||f,this.path=function(X,Q){switch(X){case"https":case"http":case"file":Q?Q[0]!==d&&(Q=d+Q):Q=d}return Q}(this.scheme,Z||f),this.query=F||f,this.fragment=O||f,p(this,$))}get fsPath(){return j(this,!1)}with(A){if(!A)return this;let{scheme:z,authority:Z,path:F,query:O,fragment:$}=A;return z===void 0?z=this.scheme:z===null&&(z=f),Z===void 0?Z=this.authority:Z===null&&(Z=f),F===void 0?F=this.path:F===null&&(F=f),O===void 0?O=this.query:O===null&&(O=f),$===void 0?$=this.fragment:$===null&&($=f),z===this.scheme&&Z===this.authority&&F===this.path&&O===this.query&&$===this.fragment?this:new w(z,Z,F,O,$)}static parse(A,z=!1){let Z=h.exec(A);return Z?new w(Z[2]||f,fe(Z[4]||f),fe(Z[5]||f),fe(Z[7]||f),fe(Z[9]||f),z):new w(f,f,f,f,f)}static file(A){let z=f;if(i&&(A=A.replace(/\\/g,d)),A[0]===d&&A[1]===d){let Z=A.indexOf(d,2);Z===-1?(z=A.substring(2),A=d):(z=A.substring(2,Z),A=A.substring(Z)||d)}return new w("file",z,A,f,f)}static from(A){let z=new w(A.scheme,A.authority,A.path,A.query,A.fragment);return p(z,!0),z}toString(A=!1){return ne(this,A)}toJSON(){return this}static revive(A){if(A){if(A instanceof y)return A;{let z=new w(A);return z._formatted=A.external,z._fsPath=A._sep===T?A.fsPath:null,z}}return A}}let T=i?1:void 0;class w extends y{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=j(this,!1)),this._fsPath}toString(A=!1){return A?ne(this,!0):(this._formatted||(this._formatted=ne(this,!1)),this._formatted)}toJSON(){let A={$mid:1};return this._fsPath&&(A.fsPath=this._fsPath,A._sep=T),this._formatted&&(A.external=this._formatted),this.path&&(A.path=this.path),this.scheme&&(A.scheme=this.scheme),this.authority&&(A.authority=this.authority),this.query&&(A.query=this.query),this.fragment&&(A.fragment=this.fragment),A}}let E={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function U(I,A,z){let Z,F=-1;for(let O=0;O<I.length;O++){let $=I.charCodeAt(O);if($>=97&&$<=122||$>=65&&$<=90||$>=48&&$<=57||$===45||$===46||$===95||$===126||A&&$===47||z&&$===91||z&&$===93||z&&$===58)F!==-1&&(Z+=encodeURIComponent(I.substring(F,O)),F=-1),Z!==void 0&&(Z+=I.charAt(O));else{Z===void 0&&(Z=I.substr(0,O));let X=E[$];X!==void 0?(F!==-1&&(Z+=encodeURIComponent(I.substring(F,O)),F=-1),Z+=X):F===-1&&(F=O)}}return F!==-1&&(Z+=encodeURIComponent(I.substring(F))),Z!==void 0?Z:I}function V(I){let A;for(let z=0;z<I.length;z++){let Z=I.charCodeAt(z);Z===35||Z===63?(A===void 0&&(A=I.substr(0,z)),A+=E[Z]):A!==void 0&&(A+=I[z])}return A!==void 0?A:I}function j(I,A){let z;return z=I.authority&&I.path.length>1&&I.scheme==="file"?`//${I.authority}${I.path}`:I.path.charCodeAt(0)===47&&(I.path.charCodeAt(1)>=65&&I.path.charCodeAt(1)<=90||I.path.charCodeAt(1)>=97&&I.path.charCodeAt(1)<=122)&&I.path.charCodeAt(2)===58?A?I.path.substr(1):I.path[1].toLowerCase()+I.path.substr(2):I.path,i&&(z=z.replace(/\//g,"\\")),z}function ne(I,A){let z=A?V:U,Z="",{scheme:F,authority:O,path:$,query:X,fragment:Q}=I;if(F&&(Z+=F,Z+=":"),(O||F==="file")&&(Z+=d,Z+=d),O){let te=O.indexOf("@");if(te!==-1){let Te=O.substr(0,te);O=O.substr(te+1),te=Te.lastIndexOf(":"),te===-1?Z+=z(Te,!1,!1):(Z+=z(Te.substr(0,te),!1,!1),Z+=":",Z+=z(Te.substr(te+1),!1,!0)),Z+="@"}O=O.toLowerCase(),te=O.lastIndexOf(":"),te===-1?Z+=z(O,!1,!0):(Z+=z(O.substr(0,te),!1,!0),Z+=O.substr(te))}if($){if($.length>=3&&$.charCodeAt(0)===47&&$.charCodeAt(2)===58){let te=$.charCodeAt(1);te>=65&&te<=90&&($=`/${String.fromCharCode(te+32)}:${$.substr(3)}`)}else if($.length>=2&&$.charCodeAt(1)===58){let te=$.charCodeAt(0);te>=65&&te<=90&&($=`${String.fromCharCode(te+32)}:${$.substr(2)}`)}Z+=z($,!0,!1)}return X&&(Z+="?",Z+=z(X,!1,!1)),Q&&(Z+="#",Z+=A?Q:U(Q,!1,!1)),Z}function se(I){try{return decodeURIComponent(I)}catch{return I.length>3?I.substr(0,3)+se(I.substr(3)):I}}let ce=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function fe(I){return I.match(ce)?I.replace(ce,A=>se(A)):I}var pt=r(975);let Wt=pt.posix||pt,dt="/";var H;(function(I){I.joinPath=function(A,...z){return A.with({path:Wt.join(A.path,...z)})},I.resolvePath=function(A,...z){let Z=A.path,F=!1;Z[0]!==dt&&(Z=dt+Z,F=!0);let O=Wt.resolve(Z,...z);return F&&O[0]===dt&&!A.authority&&(O=O.substring(1)),A.with({path:O})},I.dirname=function(A){if(A.path.length===0||A.path===dt)return A;let z=Wt.dirname(A.path);return z.length===1&&z.charCodeAt(0)===46&&(z=""),A.with({path:z})},I.basename=function(A){return Wt.basename(A.path)},I.extname=function(A){return Wt.extname(A.path)}})(H||(H={})),VF=n})();var{URI:WF,Utils:kOe}=VF;var lI=Vr(tI(),1);var Tp=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var $7={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Sp=t=>t.replace(/[[\]\\-]/g,"\\$&"),j7=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),rI=t=>t.join(""),nI=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,l=!1,p=!1,f=!1,d=r,h="";e:for(;o<t.length;){let E=t.charAt(o);if((E==="!"||E==="^")&&o===r+1){f=!0,o++;continue}if(E==="]"&&s&&!p){d=o+1;break}if(s=!0,E==="\\"&&!p){p=!0,o++;continue}if(E==="["&&!p){for(let[U,[V,j,ne]]of Object.entries($7))if(t.startsWith(U,o)){if(h)return["$.",!1,t.length-r,!0];o+=U.length,ne?i.push(V):n.push(V),l=l||j;continue e}}if(p=!1,h){E>h?n.push(Sp(h)+"-"+Sp(E)):E===h&&n.push(Sp(E)),h="",o++;continue}if(t.startsWith("-]",o+1)){n.push(Sp(E+"-")),o+=2;continue}if(t.startsWith("-",o+1)){h=E,o+=2;continue}n.push(Sp(E)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!f){let E=n[0].length===2?n[0].slice(-1):n[0];return[j7(E),!1,d-r,!1]}let y="["+(f?"^":"")+rI(n)+"]",T="["+(f?"":"^")+rI(i)+"]";return[n.length&&i.length?"("+y+"|"+T+")":n.length?y:T,l,d-r,!0]};var Un=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var z7=new Set(["!","?","+","*","@"]),iI=t=>z7.has(t),q7="(?!(?:^|/)\\.\\.?(?:$|/))",$g="(?!\\.)",G7=new Set(["[","."]),K7=new Set(["..","."]),Q7=new Set("().*{}+?[]^$\\!"),Y7=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),zv="[^/]",oI=zv+"*?",aI=zv+"+?",hc=class t{type;#e;#t;#o=!1;#n=[];#a;#S;#l;#u=!1;#s;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#a=r,this.#e=this.#a?this.#a.#e:this,this.#s=this.#e===this?n:this.#e.#s,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#u&&this.#l.push(this),this.#S=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#u)return this;this.toString(),this.#u=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#a;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#a}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#a===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#u&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#S===0)return!0;let e=this.#a;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,s=!1,l=-1,p=!1;if(r.type===null){let T=n,w="";for(;T<e.length;){let E=e.charAt(T++);if(o||E==="\\"){o=!o,w+=E;continue}if(s){T===l+1?(E==="^"||E==="!")&&(p=!0):E==="]"&&!(T===l+2&&p)&&(s=!1),w+=E;continue}else if(E==="["){s=!0,l=T,p=!1,w+=E;continue}if(!i.noext&&iI(E)&&e.charAt(T)==="("){r.push(w),w="";let U=new t(E,r);T=t.#y(e,U,T,i),r.push(U);continue}w+=E}return r.push(w),T}let f=n+1,d=new t(null,r),h=[],y="";for(;f<e.length;){let T=e.charAt(f++);if(o||T==="\\"){o=!o,y+=T;continue}if(s){f===l+1?(T==="^"||T==="!")&&(p=!0):T==="]"&&!(f===l+2&&p)&&(s=!1),y+=T;continue}else if(T==="["){s=!0,l=f,p=!1,y+=T;continue}if(iI(T)&&e.charAt(f)==="("){d.push(y),y="";let w=new t(T,d);d.push(w),f=t.#y(e,w,f,i);continue}if(T==="|"){d.push(y),y="",h.push(d),d=new t(null,r);continue}if(T===")")return y===""&&r.#n.length===0&&(r.#i=!0),d.push(y),y="",r.push(...h,d),f;y+=T}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],f}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#s.nocase&&!this.#s.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#s.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#s}toRegExpSource(e){let r=e??!!this.#s.dot;if(this.#e===this&&this.#g(),!this.type){let p=this.isStart()&&this.isEnd(),f=this.#n.map(T=>{let[w,E,U,V]=typeof T=="string"?t.#f(T,this.#t,p):T.toRegExpSource(e);return this.#t=this.#t||U,this.#o=this.#o||V,w}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&K7.has(this.#n[0]))){let w=G7,E=r&&w.has(f.charAt(0))||f.startsWith("\\.")&&w.has(f.charAt(2))||f.startsWith("\\.\\.")&&w.has(f.charAt(4)),U=!r&&!e&&w.has(f.charAt(0));d=E?q7:U?$g:""}let h="";return this.isEnd()&&this.#e.#u&&this.#a?.type==="!"&&(h="(?:$|\\/)"),[d+f+h,Un(f),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#m(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let p=this.toString();return this.#n=[p],this.type=null,this.#t=void 0,[p,Un(this.toString()),!1,!1]}let s=!n||e||r||!$g?"":this.#m(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?$g:"")+aI;else{let p=this.type==="!"?"))"+(this.isStart()&&!r&&!e?$g:"")+oI+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;l=i+o+p}return[l,Un(o),this.#t=!!this.#t,this.#o]}#m(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#o=this.#o||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",s=!1;for(let l=0;l<e.length;l++){let p=e.charAt(l);if(i){i=!1,o+=(Q7.has(p)?"\\":"")+p;continue}if(p==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(p==="["){let[f,d,h,y]=nI(e,l);if(h){o+=f,s=s||d,l+=h-1,r=r||y;continue}}if(p==="*"){n&&e==="*"?o+=aI:o+=oI,r=!0;continue}if(p==="?"){o+=zv,r=!0;continue}o+=Y7(p)}return[o,Un(e),!!r,s]}};var gc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var xr=(t,e,r={})=>(Tp(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Zr(e,r).match(t)),Z7=/^\*+([^+@!?\*\[\(]*)$/,X7=t=>e=>!e.startsWith(".")&&e.endsWith(t),J7=t=>e=>e.endsWith(t),e8=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),t8=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),r8=/^\*+\.\*+$/,n8=t=>!t.startsWith(".")&&t.includes("."),i8=t=>t!=="."&&t!==".."&&t.includes("."),o8=/^\.\*+$/,a8=t=>t!=="."&&t!==".."&&t.startsWith("."),s8=/^\*+$/,c8=t=>t.length!==0&&!t.startsWith("."),l8=t=>t.length!==0&&t!=="."&&t!=="..",p8=/^\?+([^+@!?\*\[\(]*)?$/,u8=([t,e=""])=>{let r=pI([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},f8=([t,e=""])=>{let r=uI([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},m8=([t,e=""])=>{let r=uI([t]);return e?n=>r(n)&&n.endsWith(e):r},d8=([t,e=""])=>{let r=pI([t]);return e?n=>r(n)&&n.endsWith(e):r},pI=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},uI=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},fI=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",sI={win32:{sep:"\\"},posix:{sep:"/"}},h8=fI==="win32"?sI.win32.sep:sI.posix.sep;xr.sep=h8;var Xt=Symbol("globstar **");xr.GLOBSTAR=Xt;var g8="[^/]",y8=g8+"*?",x8="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",T8="(?:(?!(?:\\/|^)\\.).)*?",S8=(t,e={})=>r=>xr(r,t,e);xr.filter=S8;var vn=(t,e={})=>Object.assign({},t,e),v8=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return xr;let e=xr;return Object.assign((n,i,o={})=>e(n,i,vn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,vn(t,o))}static defaults(i){return e.defaults(vn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,vn(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,vn(t,o))}},unescape:(n,i={})=>e.unescape(n,vn(t,i)),escape:(n,i={})=>e.escape(n,vn(t,i)),filter:(n,i={})=>e.filter(n,vn(t,i)),defaults:n=>e.defaults(vn(t,n)),makeRe:(n,i={})=>e.makeRe(n,vn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,vn(t,i)),match:(n,i,o={})=>e.match(n,i,vn(t,o)),sep:e.sep,GLOBSTAR:Xt})};xr.defaults=v8;var mI=(t,e={})=>(Tp(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,lI.default)(t));xr.braceExpand=mI;var b8=(t,e={})=>new Zr(t,e).makeRe();xr.makeRe=b8;var w8=(t,e,r={})=>{let n=new Zr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};xr.match=w8;var cI=/[?*]|[+@!]\(.*?\)|\[|\]/,E8=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Zr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){Tp(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||fI,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let p=o[0]===""&&o[1]===""&&(o[2]==="?"||!cI.test(o[2]))&&!cI.test(o[3]),f=/^[a-z]:/i.test(o[0]);if(p)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(f)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(p=>this.parse(p))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let l=n[i+1],p=n[i+2],f=n[i+3];if(l!==".."||!p||p==="."||p===".."||!f||f==="."||f==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let l=n[s];s===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let p=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...p),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let E=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),U=!E&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),V=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),j=!V&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),ne=U?3:E?0:void 0,se=j?3:V?0:void 0;if(typeof ne=="number"&&typeof se=="number"){let[ce,fe]=[e[ne],r[se]];ce.toLowerCase()===fe.toLowerCase()&&(r[se]=ce,se>ne?r=r.slice(se):ne>se&&(e=e.slice(ne)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,l=0,p=e.length,f=r.length;s<p&&l<f;s++,l++){this.debug("matchOne loop");var d=r[l],h=e[s];if(this.debug(r,d,h),d===!1)return!1;if(d===Xt){this.debug("GLOBSTAR",[r,d,h]);var y=s,T=l+1;if(T===f){for(this.debug("** at the end");s<p;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;y<p;){var w=e[y];if(this.debug(`
globstar while`,e,y,r,T,w),this.matchOne(e.slice(y),r.slice(T),n))return this.debug("globstar found match!",y,p,w),!0;if(w==="."||w===".."||!i.dot&&w.charAt(0)==="."){this.debug("dot detected!",e,y,r,T);break}this.debug("globstar swallow a segment, and continue"),y++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,y,r,T),y===p))}let E;if(typeof d=="string"?(E=h===d,this.debug("string match",d,h,E)):(E=d.test(h),this.debug("pattern match",d,h,E)),!E)return!1}if(s===p&&l===f)return!0;if(s===p)return n;if(l===f)return s===p-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return mI(this.pattern,this.options)}parse(e){Tp(e);let r=this.options;if(e==="**")return Xt;if(e==="")return"";let n,i=null;(n=e.match(s8))?i=r.dot?l8:c8:(n=e.match(Z7))?i=(r.nocase?r.dot?t8:e8:r.dot?J7:X7)(n[1]):(n=e.match(p8))?i=(r.nocase?r.dot?f8:u8:r.dot?m8:d8)(n):(n=e.match(r8))?i=r.dot?i8:n8:(n=e.match(o8))&&(i=a8);let o=hc.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?y8:r.dot?x8:T8,i=new Set(r.nocase?["i"]:[]),o=e.map(p=>{let f=p.map(d=>{if(d instanceof RegExp)for(let h of d.flags.split(""))i.add(h);return typeof d=="string"?E8(d):d===Xt?Xt:d._src});return f.forEach((d,h)=>{let y=f[h+1],T=f[h-1];d!==Xt||T===Xt||(T===void 0?y!==void 0&&y!==Xt?f[h+1]="(?:\\/|"+n+"\\/)?"+y:f[h]=n:y===void 0?f[h-1]=T+"(?:\\/|"+n+")?":y!==Xt&&(f[h-1]=T+"(?:\\/|\\/"+n+"\\/)"+y,f[h+1]=Xt))}),f.filter(d=>d!==Xt).join("/")}).join("|"),[s,l]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let l=i.length-2;!s&&l>=0;l--)s=i[l];for(let l=0;l<o.length;l++){let p=o[l],f=i;if(n.matchBase&&p.length===1&&(f=[s]),this.matchOne(f,p,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return xr.defaults(e).Minimatch}};xr.AST=hc;xr.Minimatch=Zr;xr.escape=gc;xr.unescape=Un;var LI=require("node:url");var yc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,hI=new Set,qv=typeof process=="object"&&process?process:{},gI=(t,e,r,n)=>{typeof qv.emitWarning=="function"?qv.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},jg=globalThis.AbortController,dI=globalThis.AbortSignal;if(typeof jg>"u"){dI=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},jg=class{constructor(){e()}signal=new dI;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=qv.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,gI("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var _8=t=>!hI.has(t),YOe=Symbol("type"),Mo=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),yI=t=>Mo(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?xc:null:null,xc=class extends Array{constructor(e){super(e),this.fill(0)}},Gv=class t{heap;length;static#e=!1;static create(e){let r=yI(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},vp=class t{#e;#t;#o;#n;#a;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#u;#s;#c;#i;#g;#y;#m;#f;#w;#h;#E;#_;#T;#v;#b;#d;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#T,sizes:e.#E,keyMap:e.#s,keyList:e.#c,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#m},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#p(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#B(r),indexes:r=>e.#k(r),rindexes:r=>e.#A(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#u}get size(){return this.#l}get fetchMethod(){return this.#a}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:l,allowStale:p,dispose:f,disposeAfter:d,noDisposeOnSet:h,noUpdateTTL:y,maxSize:T=0,maxEntrySize:w=0,sizeCalculation:E,fetchMethod:U,memoMethod:V,noDeleteOnFetchRejection:j,noDeleteOnStaleGet:ne,allowStaleOnFetchRejection:se,allowStaleOnFetchAbort:ce,ignoreFetchAbort:fe}=e;if(r!==0&&!Mo(r))throw new TypeError("max option must be a nonnegative integer");let pt=r?yI(r):Array;if(!pt)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=T,this.maxEntrySize=w||this.#t,this.sizeCalculation=E,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(V!==void 0&&typeof V!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=V,U!==void 0&&typeof U!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=U,this.#b=!!U,this.#s=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new pt(r),this.#y=new pt(r),this.#m=0,this.#f=0,this.#w=Gv.create(r),this.#l=0,this.#u=0,typeof f=="function"&&(this.#o=f),typeof d=="function"?(this.#n=d,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#d=!!this.#n,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!y,this.noDeleteOnFetchRejection=!!j,this.allowStaleOnFetchRejection=!!se,this.allowStaleOnFetchAbort=!!ce,this.ignoreFetchAbort=!!fe,this.maxEntrySize!==0){if(this.#t!==0&&!Mo(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Mo(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#M()}if(this.allowStale=!!p,this.noDeleteOnStaleGet=!!ne,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!l,this.ttlResolution=Mo(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Mo(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#P()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let Wt="LRU_CACHE_UNBOUNDED";_8(Wt)&&(hI.add(Wt),gI("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Wt,t))}}getRemainingTTL(e){return this.#s.has(e)?1/0:0}#P(){let e=new xc(this.#e),r=new xc(this.#e);this.#T=e,this.#_=r,this.#F=(o,s,l=yc.now())=>{if(r[o]=s!==0?l:0,e[o]=s,s!==0&&this.ttlAutopurge){let p=setTimeout(()=>{this.#x(o)&&this.#D(this.#c[o],"expire")},s+1);p.unref&&p.unref()}},this.#R=o=>{r[o]=e[o]!==0?yc.now():0},this.#r=(o,s)=>{if(e[s]){let l=e[s],p=r[s];if(!l||!p)return;o.ttl=l,o.start=p,o.now=n||i();let f=o.now-p;o.remainingTTL=l-f}};let n=0,i=()=>{let o=yc.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#s.get(o);if(s===void 0)return 0;let l=e[s],p=r[s];if(!l||!p)return 1/0;let f=(n||i())-p;return l-f},this.#x=o=>{let s=r[o],l=e[o];return!!l&&!!s&&(n||i())-s>l}}#R=()=>{};#r=()=>{};#F=()=>{};#x=()=>!1;#M(){let e=new xc(this.#e);this.#u=0,this.#E=e,this.#I=r=>{this.#u-=e[r],e[r]=0},this.#N=(r,n,i,o)=>{if(this.#p(n))return 0;if(!Mo(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Mo(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#u>o;)this.#L(!0)}this.#u+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#u)}}#I=e=>{};#C=(e,r,n)=>{};#N=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#O(r)||((e||!this.#x(r))&&(yield r),r===this.#m));)r=this.#y[r]}*#A({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#m;!(!this.#O(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#O(e){return e!==void 0&&this.#s.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#A())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#A()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#A())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#A()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#A({allowStale:!0}))this.#x(r)&&(this.#D(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#s.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#p(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#T&&this.#_){let s=this.#T[r],l=this.#_[r];if(s&&l){let p=s-(yc.now()-l);o.ttl=p,o.start=Date.now()}}return this.#E&&(o.size=this.#E[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#p(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#T&&this.#_){s.ttl=this.#T[r];let l=yc.now()-this.#_[r];s.start=Math.floor(Date.now()-l)}this.#E&&(s.size=this.#E[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=yc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:p}=n,{noUpdateTTL:f=this.noUpdateTTL}=n,d=this.#N(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return p&&(p.set="miss",p.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let h=this.#l===0?void 0:this.#s.get(e);if(h===void 0)h=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#c[h]=e,this.#i[h]=r,this.#s.set(e,h),this.#g[this.#f]=h,this.#y[h]=this.#f,this.#f=h,this.#l++,this.#C(h,d,p),p&&(p.set="add"),f=!1;else{this.#B(h);let y=this.#i[h];if(r!==y){if(this.#b&&this.#p(y)){y.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:T}=y;T!==void 0&&!s&&(this.#v&&this.#o?.(T,e,"set"),this.#d&&this.#h?.push([T,e,"set"]))}else s||(this.#v&&this.#o?.(y,e,"set"),this.#d&&this.#h?.push([y,e,"set"]));if(this.#I(h),this.#C(h,d,p),this.#i[h]=r,p){p.set="replace";let T=y&&this.#p(y)?y.__staleWhileFetching:y;T!==void 0&&(p.oldValue=T)}}else p&&(p.set="update")}if(i!==0&&!this.#T&&this.#P(),this.#T&&(f||this.#F(h,i,o),p&&this.#r(p,h)),!s&&this.#d&&this.#h){let y=this.#h,T;for(;T=y?.shift();)this.#n?.(...T)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#m];if(this.#L(!0),this.#p(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#m,n=this.#c[r],i=this.#i[r];return this.#b&&this.#p(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(i,n,"evict"),this.#d&&this.#h?.push([i,n,"evict"])),this.#I(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#m=this.#f=0,this.#w.length=0):this.#m=this.#g[r],this.#s.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#s.get(e);if(o!==void 0){let s=this.#i[o];if(this.#p(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#s.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#p(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#p(o))return o;let s=new jg,{signal:l}=n;l?.addEventListener("abort",()=>s.abort(l.reason),{signal:s.signal});let p={signal:s.signal,options:n,context:i},f=(E,U=!1)=>{let{aborted:V}=s.signal,j=n.ignoreFetchAbort&&E!==void 0;if(n.status&&(V&&!U?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,j&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),V&&!j&&!U)return h(s.signal.reason);let ne=T;return this.#i[r]===T&&(E===void 0?ne.__staleWhileFetching?this.#i[r]=ne.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,E,p.options))),E},d=E=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=E),h(E)),h=E=>{let{aborted:U}=s.signal,V=U&&n.allowStaleOnFetchAbort,j=V||n.allowStaleOnFetchRejection,ne=j||n.noDeleteOnFetchRejection,se=T;if(this.#i[r]===T&&(!ne||se.__staleWhileFetching===void 0?this.#D(e,"fetch"):V||(this.#i[r]=se.__staleWhileFetching)),j)return n.status&&se.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),se.__staleWhileFetching;if(se.__returned===se)throw E},y=(E,U)=>{let V=this.#a?.(e,o,p);V&&V instanceof Promise&&V.then(j=>E(j===void 0?void 0:j),U),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(E(void 0),n.allowStaleOnFetchAbort&&(E=j=>f(j,!0)))})};n.status&&(n.status.fetchDispatched=!0);let T=new Promise(y).then(f,d),w=Object.assign(T,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,w,{...p.options,status:void 0}),r=this.#s.get(e)):this.#i[r]=w,w}#p(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof jg}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:p=0,sizeCalculation:f=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:y=this.allowStaleOnFetchRejection,ignoreFetchAbort:T=this.ignoreFetchAbort,allowStaleOnFetchAbort:w=this.allowStaleOnFetchAbort,context:E,forceRefresh:U=!1,status:V,signal:j}=r;if(!this.#b)return V&&(V.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:V});let ne={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:l,size:p,sizeCalculation:f,noUpdateTTL:d,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:y,allowStaleOnFetchAbort:w,ignoreFetchAbort:T,status:V,signal:j},se=this.#s.get(e);if(se===void 0){V&&(V.fetch="miss");let ce=this.#U(e,se,ne,E);return ce.__returned=ce}else{let ce=this.#i[se];if(this.#p(ce)){let H=n&&ce.__staleWhileFetching!==void 0;return V&&(V.fetch="inflight",H&&(V.returnedStale=!0)),H?ce.__staleWhileFetching:ce.__returned=ce}let fe=this.#x(se);if(!U&&!fe)return V&&(V.fetch="hit"),this.#B(se),i&&this.#R(se),V&&this.#r(V,se),ce;let pt=this.#U(e,se,ne,E),dt=pt.__staleWhileFetching!==void 0&&n;return V&&(V.fetch=fe?"stale":"refresh",dt&&fe&&(V.returnedStale=!0)),dt?pt.__staleWhileFetching:pt.__returned=pt}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=r,l=this.get(e,s);if(!o&&l!==void 0)return l;let p=n(e,l,{options:s,context:i});return this.set(e,p,s),p}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,l=this.#s.get(e);if(l!==void 0){let p=this.#i[l],f=this.#p(p);return s&&this.#r(s,l),this.#x(l)?(s&&(s.get="stale"),f?(s&&n&&p.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?p.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),s&&n&&(s.returnedStale=!0),n?p:void 0)):(s&&(s.get="hit"),f?p.__staleWhileFetching:(this.#B(l),i&&this.#R(l),p))}else s&&(s.get="miss")}#H(e,r){this.#y[r]=e,this.#g[e]=r}#B(e){e!==this.#f&&(e===this.#m?this.#m=this.#g[e]:this.#H(this.#y[e],this.#g[e]),this.#H(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#s.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#V(r);else{this.#I(i);let o=this.#i[i];if(this.#p(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(o,e,r),this.#d&&this.#h?.push([o,e,r])),this.#s.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#m)this.#m=this.#g[i];else{let s=this.#y[i];this.#g[s]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#d&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#V("delete")}#V(e){for(let r of this.#A({allowStale:!0})){let n=this.#i[r];if(this.#p(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#d&&this.#h?.push([n,i,e])}}if(this.#s.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#T&&this.#_&&(this.#T.fill(0),this.#_.fill(0)),this.#E&&this.#E.fill(0),this.#m=0,this.#f=0,this.#w.length=0,this.#u=0,this.#l=0,this.#d&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var vc=require("node:path"),kI=require("node:url"),pi=require("fs"),N8=Vr(require("node:fs"),1),Io=require("node:fs/promises");var Zg=require("node:events"),eb=Vr(require("node:stream"),1),bI=require("node:string_decoder"),xI=typeof process=="object"&&process?process:{stdout:null,stderr:null},R8=t=>!!t&&typeof t=="object"&&(t instanceof Fo||t instanceof eb.default||k8(t)||A8(t)),k8=t=>!!t&&typeof t=="object"&&t instanceof Zg.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==eb.default.Writable.prototype.pipe,A8=t=>!!t&&typeof t=="object"&&t instanceof Zg.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Ui=Symbol("EOF"),Hi=Symbol("maybeEmitEnd"),Do=Symbol("emittedEnd"),zg=Symbol("emittingEnd"),bp=Symbol("emittedError"),qg=Symbol("closed"),TI=Symbol("read"),Gg=Symbol("flush"),SI=Symbol("flushChunk"),Hn=Symbol("encoding"),Tc=Symbol("decoder"),Ut=Symbol("flowing"),wp=Symbol("paused"),Sc=Symbol("resume"),Ht=Symbol("buffer"),Tr=Symbol("pipes"),Bt=Symbol("bufferLength"),Kv=Symbol("bufferPush"),Kg=Symbol("bufferShift"),sr=Symbol("objectMode"),wt=Symbol("destroyed"),Qv=Symbol("error"),Yv=Symbol("emitData"),vI=Symbol("emitEnd"),Zv=Symbol("emitEnd2"),ci=Symbol("async"),Xv=Symbol("abort"),Qg=Symbol("aborted"),Ep=Symbol("signal"),Ma=Symbol("dataListeners"),Xr=Symbol("discarded"),_p=t=>Promise.resolve().then(t),P8=t=>t(),M8=t=>t==="end"||t==="finish"||t==="prefinish",D8=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,F8=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Yg=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[Sc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Jv=class extends Yg{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},I8=t=>!!t.objectMode,C8=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Fo=class extends Zg.EventEmitter{[Ut]=!1;[wp]=!1;[Tr]=[];[Ht]=[];[sr];[Hn];[ci];[Tc];[Ui]=!1;[Do]=!1;[zg]=!1;[qg]=!1;[bp]=null;[Bt]=0;[wt]=!1;[Ep];[Qg]=!1;[Ma]=0;[Xr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");I8(r)?(this[sr]=!0,this[Hn]=null):C8(r)?(this[Hn]=r.encoding,this[sr]=!1):(this[sr]=!1,this[Hn]=null),this[ci]=!!r.async,this[Tc]=this[Hn]?new bI.StringDecoder(this[Hn]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Ht]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Tr]});let{signal:n}=r;n&&(this[Ep]=n,n.aborted?this[Xv]():n.addEventListener("abort",()=>this[Xv]()))}get bufferLength(){return this[Bt]}get encoding(){return this[Hn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[sr]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ci]}set async(e){this[ci]=this[ci]||!!e}[Xv](){this[Qg]=!0,this.emit("abort",this[Ep]?.reason),this.destroy(this[Ep]?.reason)}get aborted(){return this[Qg]}set aborted(e){}write(e,r,n){if(this[Qg])return!1;if(this[Ui])throw new Error("write after end");if(this[wt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ci]?_p:P8;if(!this[sr]&&!Buffer.isBuffer(e)){if(F8(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(D8(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[sr]?(this[Ut]&&this[Bt]!==0&&this[Gg](!0),this[Ut]?this.emit("data",e):this[Kv](e),this[Bt]!==0&&this.emit("readable"),n&&i(n),this[Ut]):e.length?(typeof e=="string"&&!(r===this[Hn]&&!this[Tc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Hn]&&(e=this[Tc].write(e)),this[Ut]&&this[Bt]!==0&&this[Gg](!0),this[Ut]?this.emit("data",e):this[Kv](e),this[Bt]!==0&&this.emit("readable"),n&&i(n),this[Ut]):(this[Bt]!==0&&this.emit("readable"),n&&i(n),this[Ut])}read(e){if(this[wt])return null;if(this[Xr]=!1,this[Bt]===0||e===0||e&&e>this[Bt])return this[Hi](),null;this[sr]&&(e=null),this[Ht].length>1&&!this[sr]&&(this[Ht]=[this[Hn]?this[Ht].join(""):Buffer.concat(this[Ht],this[Bt])]);let r=this[TI](e||null,this[Ht][0]);return this[Hi](),r}[TI](e,r){if(this[sr])this[Kg]();else{let n=r;e===n.length||e===null?this[Kg]():typeof n=="string"?(this[Ht][0]=n.slice(e),r=n.slice(0,e),this[Bt]-=e):(this[Ht][0]=n.subarray(e),r=n.subarray(0,e),this[Bt]-=e)}return this.emit("data",r),!this[Ht].length&&!this[Ui]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Ui]=!0,this.writable=!1,(this[Ut]||!this[wp])&&this[Hi](),this}[Sc](){this[wt]||(!this[Ma]&&!this[Tr].length&&(this[Xr]=!0),this[wp]=!1,this[Ut]=!0,this.emit("resume"),this[Ht].length?this[Gg]():this[Ui]?this[Hi]():this.emit("drain"))}resume(){return this[Sc]()}pause(){this[Ut]=!1,this[wp]=!0,this[Xr]=!1}get destroyed(){return this[wt]}get flowing(){return this[Ut]}get paused(){return this[wp]}[Kv](e){this[sr]?this[Bt]+=1:this[Bt]+=e.length,this[Ht].push(e)}[Kg](){return this[sr]?this[Bt]-=1:this[Bt]-=this[Ht][0].length,this[Ht].shift()}[Gg](e=!1){do;while(this[SI](this[Kg]())&&this[Ht].length);!e&&!this[Ht].length&&!this[Ui]&&this.emit("drain")}[SI](e){return this.emit("data",e),this[Ut]}pipe(e,r){if(this[wt])return e;this[Xr]=!1;let n=this[Do];return r=r||{},e===xI.stdout||e===xI.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[Tr].push(r.proxyErrors?new Jv(this,e,r):new Yg(this,e,r)),this[ci]?_p(()=>this[Sc]()):this[Sc]()),e}unpipe(e){let r=this[Tr].find(n=>n.dest===e);r&&(this[Tr].length===1?(this[Ut]&&this[Ma]===0&&(this[Ut]=!1),this[Tr]=[]):this[Tr].splice(this[Tr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Xr]=!1,this[Ma]++,!this[Tr].length&&!this[Ut]&&this[Sc]();else if(e==="readable"&&this[Bt]!==0)super.emit("readable");else if(M8(e)&&this[Do])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[bp]){let i=r;this[ci]?_p(()=>i.call(this,this[bp])):i.call(this,this[bp])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Ma]=this.listeners("data").length,this[Ma]===0&&!this[Xr]&&!this[Tr].length&&(this[Ut]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Ma]=0,!this[Xr]&&!this[Tr].length&&(this[Ut]=!1)),r}get emittedEnd(){return this[Do]}[Hi](){!this[zg]&&!this[Do]&&!this[wt]&&this[Ht].length===0&&this[Ui]&&(this[zg]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[qg]&&this.emit("close"),this[zg]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==wt&&this[wt])return!1;if(e==="data")return!this[sr]&&!n?!1:this[ci]?(_p(()=>this[Yv](n)),!0):this[Yv](n);if(e==="end")return this[vI]();if(e==="close"){if(this[qg]=!0,!this[Do]&&!this[wt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[bp]=n,super.emit(Qv,n);let o=!this[Ep]||this.listeners("error").length?super.emit("error",n):!1;return this[Hi](),o}else if(e==="resume"){let o=super.emit("resume");return this[Hi](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Hi](),i}[Yv](e){for(let n of this[Tr])n.dest.write(e)===!1&&this.pause();let r=this[Xr]?!1:super.emit("data",e);return this[Hi](),r}[vI](){return this[Do]?!1:(this[Do]=!0,this.readable=!1,this[ci]?(_p(()=>this[Zv]()),!0):this[Zv]())}[Zv](){if(this[Tc]){let r=this[Tc].end();if(r){for(let n of this[Tr])n.dest.write(r);this[Xr]||super.emit("data",r)}}for(let r of this[Tr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[sr]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[sr]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[sr])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Hn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(wt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Xr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Ui])return r();let o,s,l=h=>{this.off("data",p),this.off("end",f),this.off(wt,d),r(),s(h)},p=h=>{this.off("error",l),this.off("end",f),this.off(wt,d),this.pause(),o({value:h,done:!!this[Ui]})},f=()=>{this.off("error",l),this.off("data",p),this.off(wt,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((h,y)=>{s=y,o=h,this.once(wt,d),this.once("error",l),this.once("end",f),this.once("data",p)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Xr]=!1;let e=!1,r=()=>(this.pause(),this.off(Qv,r),this.off(wt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(Qv,r),this.once(wt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[wt])return e?this.emit("error",e):this.emit(wt),this;this[wt]=!0,this[Xr]=!0,this[Ht].length=0,this[Bt]=0;let r=this;return typeof r.close=="function"&&!this[qg]&&r.close(),e?this.emit("error",e):this.emit(wt),this}static get isStream(){return R8}};var O8=pi.realpathSync.native,kp={lstatSync:pi.lstatSync,readdir:pi.readdir,readdirSync:pi.readdirSync,readlinkSync:pi.readlinkSync,realpathSync:O8,promises:{lstat:Io.lstat,readdir:Io.readdir,readlink:Io.readlink,realpath:Io.realpath}},AI=t=>!t||t===kp||t===N8?kp:{...kp,...t,promises:{...kp.promises,...t.promises||{}}},PI=/^\\\\\?\\([a-z]:)\\?$/i,L8=t=>t.replace(/\//g,"\\").replace(PI,"$1\\"),U8=/[\\\/]/,wn=0,MI=1,DI=2,li=4,FI=6,II=8,Da=10,CI=12,bn=15,Rp=~bn,tb=16,wI=32,Ap=64,Bn=128,Xg=256,ey=512,EI=Ap|Bn|ey,H8=1023,rb=t=>t.isFile()?II:t.isDirectory()?li:t.isSymbolicLink()?Da:t.isCharacterDevice()?DI:t.isBlockDevice()?FI:t.isSocket()?CI:t.isFIFO()?MI:wn,_I=new Map,Pp=t=>{let e=_I.get(t);if(e)return e;let r=t.normalize("NFKD");return _I.set(t,r),r},RI=new Map,Jg=t=>{let e=RI.get(t);if(e)return e;let r=Pp(t.toLowerCase());return RI.set(t,r),r},ty=class extends vp{constructor(){super({max:256})}},nb=class extends vp{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},NI=Symbol("PathScurry setAsCwd"),cr=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#u;get blksize(){return this.#u}#s;get ino(){return this.#s}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#m;get ctimeMs(){return this.#m}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#E;get ctime(){return this.#E}#_;get birthtime(){return this.#_}#T;#v;#b;#d;#P;#R;#r;#F;#x;#M;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=wn,n,i,o,s,l){this.name=e,this.#T=o?Jg(e):Pp(e),this.#r=r&H8,this.nocase=o,this.roots=i,this.root=n||this,this.#F=s,this.#b=l.fullpath,this.#P=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=AI(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#F}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#I(i):this.#I(i)}#I(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#F.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#F.set(this,r),this.#r&=~tb,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Jg(e):Pp(e);for(let p of n)if(p.#T===i)return p;let o=this.parent?this.sep:"",s=this.#b?this.#b+o+e:void 0,l=this.newChild(e,wn,{...r,parent:this,fullpath:s});return this.canReaddir()||(l.#r|=Bn),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#P!==void 0)return this.#P;let e=this.name,r=this.parent;if(!r)return this.#P=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#d!==void 0)return this.#d;if(this.sep==="/")return this.#d=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#d=`//?/${i}`:this.#d=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#d=n}isUnknown(){return(this.#r&bn)===wn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&bn)===II}isDirectory(){return(this.#r&bn)===li}isCharacterDevice(){return(this.#r&bn)===DI}isBlockDevice(){return(this.#r&bn)===FI}isFIFO(){return(this.#r&bn)===MI}isSocket(){return(this.#r&bn)===CI}isSymbolicLink(){return(this.#r&Da)===Da}lstatCached(){return this.#r&wI?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#M}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#r&bn;return!(e!==wn&&e!==Da||this.#r&Xg||this.#r&Bn)}calledReaddir(){return!!(this.#r&tb)}isENOENT(){return!!(this.#r&Bn)}isNamed(e){return this.nocase?this.#T===Jg(e):this.#T===Pp(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}#C(e){this.#r|=tb;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#N()}}#N(){this.#r&Bn||(this.#r=(this.#r|Bn)&Rp,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#N()}#A(){this.#r|=ey,this.#O()}#O(){if(this.#r&Ap)return;let e=this.#r;(e&bn)===li&&(e&=Rp),this.#r=e|Ap,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#O():e==="ENOENT"?this.#N():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#O():e==="ENOENT"&&this.#N()}#p(e=""){let r=this.#r;r|=Xg,e==="ENOENT"&&(r|=Bn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=Rp),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#O()}#H(e,r){return this.#D(e,r)||this.#B(e,r)}#B(e,r){let n=rb(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&bn;return o!==li&&o!==Da&&o!==wn&&(i.#r|=Ap),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Jg(e.name):Pp(e.name))===i.#T)return this.#V(e,i,n,r)}}#V(e,r,n,i){let o=r.name;return r.#r=r.#r&Rp|rb(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if((this.#r&Bn)===0)try{return this.#z(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if((this.#r&Bn)===0)try{return this.#z(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#z(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:s,blocks:l,ctime:p,ctimeMs:f,dev:d,gid:h,ino:y,mode:T,mtime:w,mtimeMs:E,nlink:U,rdev:V,size:j,uid:ne}=e;this.#w=r,this.#g=n,this.#_=i,this.#f=o,this.#u=s,this.#i=l,this.#E=p,this.#m=f,this.#t=d,this.#S=h,this.#s=y,this.#o=T,this.#h=w,this.#y=E,this.#n=U,this.#l=V,this.#c=j,this.#a=ne;let se=rb(e);this.#r=this.#r&Rp|se|wI,se!==wn&&se!==li&&se!==Da&&(this.#r|=Ap)}#$=[];#j=!1;#q(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,s)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of s)this.#H(l,n);this.#C(n)}this.#q(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&EI)return!1;let e=bn&this.#r;return e===wn||e===li||e===Da}shouldWalk(e,r){return(this.#r&li)===li&&!(this.#r&EI)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#M)return this.#M;if(!((ey|Xg|Bn)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#M=this.resolve(e)}catch{this.#A()}}realpathSync(){if(this.#M)return this.#M;if(!((ey|Xg|Bn)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#M=this.resolve(e)}catch{this.#A()}}[NI](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#P=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#P=void 0,i.#R=void 0,i=i.parent}},ry=class t extends cr{sep="\\";splitSep=U8;constructor(e,r=wn,n,i,o,s,l){super(e,r,n,i,o,s,l)}newChild(e,r=wn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return vc.win32.parse(e).root}getRoot(e){if(e=L8(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new bc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(PI,"$1\\"),e===r}},ny=class t extends cr{splitSep="/";sep="/";constructor(e,r=wn,n,i,o,s,l){super(e,r,n,i,o,s,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=wn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},iy=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:s=kp}={}){this.#n=AI(s),(e instanceof URL||e.startsWith("file://"))&&(e=(0,kI.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new ty,this.#t=new ty,this.#o=new nb(o);let p=l.substring(this.rootPath.length).split(n);if(p.length===1&&!p[0]&&p.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let f=this.root,d=p.length-1,h=r.sep,y=this.rootPath,T=!1;for(let w of p){let E=d--;f=f.child(w,{relative:new Array(E).fill("..").join(h),relativePosix:new Array(E).fill("..").join("/"),fullpath:y+=(T?"":h)+w}),T=!0}this.cwd=f}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set,f=(h,y)=>{p.add(h),h.readdirCB((T,w)=>{if(T)return y(T);let E=w.length;if(!E)return y();let U=()=>{--E===0&&y()};for(let V of w)(!o||o(V))&&l.push(n?V:V.fullpath()),i&&V.isSymbolicLink()?V.realpath().then(j=>j?.isUnknown()?j.lstat():j).then(j=>j?.shouldWalk(p,s)?f(j,U):U()):V.shouldWalk(p,s)?f(V,U):U()},!0)},d=e;return new Promise((h,y)=>{f(d,T=>{if(T)return y(T);h(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set([e]);for(let f of p){let d=f.readdirSync();for(let h of d){(!o||o(h))&&l.push(n?h:h.fullpath());let y=h;if(h.isSymbolicLink()){if(!(i&&(y=h.realpathSync())))continue;y.isUnknown()&&y.lstatSync()}y.shouldWalk(p,s)&&p.add(y)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let p of l){let f=p.readdirSync();for(let d of f){(!o||o(d))&&(yield n?d:d.fullpath());let h=d;if(d.isSymbolicLink()){if(!(i&&(h=d.realpathSync())))continue;h.isUnknown()&&h.lstatSync()}h.shouldWalk(l,s)&&l.add(h)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Fo({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let p=new Set,f=[e],d=0,h=()=>{let y=!1;for(;!y;){let T=f.shift();if(!T){d===0&&l.end();return}d++,p.add(T);let w=(U,V,j=!1)=>{if(U)return l.emit("error",U);if(i&&!j){let ne=[];for(let se of V)se.isSymbolicLink()&&ne.push(se.realpath().then(ce=>ce?.isUnknown()?ce.lstat():ce));if(ne.length){Promise.all(ne).then(()=>w(null,V,!0));return}}for(let ne of V)ne&&(!o||o(ne))&&(l.write(n?ne:ne.fullpath())||(y=!0));d--;for(let ne of V){let se=ne.realpathCached()||ne;se.shouldWalk(p,s)&&f.push(se)}y&&!l.flowing?l.once("drain",h):E||h()},E=!0;T.readdirCB(w,!0),E=!1}};return h(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Fo({objectMode:!0}),p=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let f=[e],d=0,h=()=>{let y=!1;for(;!y;){let T=f.shift();if(!T){d===0&&l.end();return}d++,p.add(T);let w=T.readdirSync();for(let E of w)(!o||o(E))&&(l.write(n?E:E.fullpath())||(y=!0));d--;for(let E of w){let U=E;if(E.isSymbolicLink()){if(!(i&&(U=E.realpathSync())))continue;U.isUnknown()&&U.lstatSync()}U.shouldWalk(p,s)&&f.push(U)}}y&&!l.flowing&&l.once("drain",h)};return h(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[NI](r)}},bc=class extends iy{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,vc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return vc.win32.parse(e).root.toUpperCase()}newRoot(e){return new ry(this.rootPath,li,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},wc=class extends iy{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,vc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new ny(this.rootPath,li,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},Mp=class extends wc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},tLe=process.platform==="win32"?ry:ny,OI=process.platform==="win32"?bc:process.platform==="darwin"?Mp:wc;var B8=t=>t.length>=1,V8=t=>t.length>=1,Ec=class t{#e;#t;#o;length;#n;#a;#S;#l;#u;#s;#c=!0;constructor(e,r,n,i){if(!B8(e))throw new TypeError("empty pattern list");if(!V8(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,s,l,p,...f]=this.#e,[d,h,y,T,...w]=this.#t;f[0]===""&&(f.shift(),w.shift());let E=[o,s,l,p,""].join("/"),U=[d,h,y,T,""].join("/");this.#e=[E,...f],this.#t=[U,...w],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...s]=this.#e,[l,...p]=this.#t;s[0]===""&&(s.shift(),p.shift());let f=o+"/",d=l+"/";this.#e=[f,...s],this.#t=[d,...p],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Xt}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new t(this.#e,this.#t,this.#o+1,this.#n),this.#a.#s=this.#s,this.#a.#u=this.#u,this.#a.#l=this.#l,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#s!==void 0?this.#s:this.#s=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var W8=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",_c=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:s=W8}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=s,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new Zr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let s=new Ec(i,o,0,this.platform),l=new Zr(s.globString(),this.mmopts),p=o[o.length-1]==="**",f=s.isAbsolute();f?this.absolute.push(l):this.relative.push(l),p&&(f?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let s of this.relative)if(s.match(i)||s.match(o))return!0;for(let s of this.absolute)if(s.match(r)||s.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var ib=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},ob=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},ab=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},Dp=class t{hasWalkedCache;matches=new ob;subwalks=new ab;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new ib}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let s=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(s){i=i.resolve(s==="/"&&this.opts.root!==void 0?this.opts.root:s);let h=o.rest();if(h)o=h;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let p,f,d=!1;for(;typeof(p=o.pattern())=="string"&&(f=o.rest());)i=i.resolve(p),o=f,d=!0;if(p=o.pattern(),f=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof p=="string"){let h=p===".."||p===""||p===".";this.matches.add(i.resolve(p),l,h);continue}else if(p===Xt){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let h=f?.pattern(),y=f?.rest();if(!f||(h===""||h===".")&&!y)this.matches.add(i,l,h===""||h===".");else if(h===".."){let T=i.parent||i;y?this.hasWalkedCache.hasWalked(T,y)||this.subwalks.add(T,y):this.matches.add(T,l,!0)}}else p instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let s of n){let l=s.isAbsolute(),p=s.pattern(),f=s.rest();p===Xt?i.testGlobstar(o,s,f,l):p instanceof RegExp?i.testRegExp(o,p,f,l):i.testString(o,p,f,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let s=e.parent||e;this.subwalks.add(s,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var $8=(t,e)=>typeof t=="string"?new _c([t],e):Array.isArray(t)?new _c(t,e):t,oy=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=$8(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#a(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=await o.realpath();s&&(s.isUnknown()||this.opts.stat)&&await s.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=o.realpathSync();s&&(s?.isUnknown()||this.opts.stat)&&s.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),s=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?s+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new Dp(this.opts),n)}walkCB2(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,p,f]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,f).then(()=>s()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirCached();l.calledReaddir()?this.walkCB3(l,p,n,s):l.readdirCB((f,d)=>this.walkCB3(l,d,n,s),!0)}s()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,p,f]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,f).then(()=>s()));for(let[l,p]of n.subwalks.entries())o++,this.walkCB2(l,p,n.child(),s);s()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new Dp(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,p,f]of n.matches.entries())this.#n(l)||this.matchSync(l,p,f);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirSync();this.walkCB3Sync(l,p,n,s)}s()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,p,f]of n.matches.entries())this.#n(l)||this.matchSync(l,p,f);for(let[l,p]of n.subwalks.entries())o++,this.walkCB2Sync(l,p,n.child(),s);s()}},Fp=class extends oy{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},Ip=class extends oy{results;constructor(e,r,n){super(e,r,n),this.results=new Fo({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var j8=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Vn=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,LI.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(p=>p.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(p=>p.includes("/")?p:`./**/${p}`)}if(this.pattern=e,this.platform=r.platform||j8,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let p=r.platform==="win32"?bc:r.platform==="darwin"?Mp:r.platform?wc:OI;this.scurry=new p(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(p=>new Zr(p,i)),[s,l]=o.reduce((p,f)=>(p[0].push(...f.set),p[1].push(...f.globParts),p),[[],[]]);this.patterns=s.map((p,f)=>{let d=l[f];if(!d)throw new Error("invalid pattern object");return new Ec(p,d,0,this.platform)})}async walk(){return[...await new Fp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Fp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Ip(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Ip(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var sb=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Zr(r,e).hasMagic())return!0;return!1};function ay(t,e={}){return new Vn(t,e).streamSync()}function HI(t,e={}){return new Vn(t,e).stream()}function BI(t,e={}){return new Vn(t,e).walkSync()}async function UI(t,e={}){return new Vn(t,e).walk()}function sy(t,e={}){return new Vn(t,e).iterateSync()}function VI(t,e={}){return new Vn(t,e).iterate()}var z8=ay,q8=Object.assign(HI,{sync:ay}),G8=sy,K8=Object.assign(VI,{sync:sy}),Q8=Object.assign(BI,{stream:ay,iterate:sy}),cb=Object.assign(UI,{glob:UI,globSync:BI,sync:Q8,globStream:HI,stream:q8,globStreamSync:ay,streamSync:z8,globIterate:VI,iterate:K8,globIterateSync:sy,iterateSync:G8,Glob:Vn,hasMagic:sb,escape:gc,unescape:Un});cb.glob=cb;function WI(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var XI=Object.defineProperty,X8=Object.getOwnPropertyNames,N=(t,e)=>XI(t,"name",{value:e,configurable:!0}),J8=(t,e)=>function(){return e||(0,t[X8(t)[0]])((e={exports:{}}).exports,e),e.exports},_b=(t,e)=>{for(var r in e)XI(t,r,{get:e[r],enumerable:!0})},eY=J8({"(disabled):util"(){}}),cy={};_b(cy,{addChainableMethod:()=>Lb,addLengthGuard:()=>Up,addMethod:()=>Cb,addProperty:()=>Ib,checkError:()=>Jr,compareByInspect:()=>fy,eql:()=>RC,expectTypes:()=>aC,flag:()=>ke,getActual:()=>xy,getMessage:()=>Ab,getName:()=>Sy,getOperator:()=>Vb,getOwnEnumerableProperties:()=>Bb,getOwnEnumerablePropertySymbols:()=>Hb,getPathInfo:()=>Fb,hasProperty:()=>Ty,inspect:()=>$e,isNaN:()=>my,isNumeric:()=>Vt,isProxyEnabled:()=>Lp,isRegExp:()=>dy,objDisplay:()=>Fa,overwriteChainableMethod:()=>Ub,overwriteMethod:()=>Ob,overwriteProperty:()=>Nb,proxify:()=>Pc,test:()=>Rb,transferFlags:()=>Wn,type:()=>et});var Jr={};_b(Jr,{compatibleConstructor:()=>tC,compatibleInstance:()=>eC,compatibleMessage:()=>rC,getConstructorName:()=>nC,getMessage:()=>iC});function yy(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}N(yy,"isErrorInstance");function JI(t){return Object.prototype.toString.call(t)==="[object RegExp]"}N(JI,"isRegExp");function eC(t,e){return yy(e)&&t===e}N(eC,"compatibleInstance");function tC(t,e){return yy(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}N(tC,"compatibleConstructor");function rC(t,e){let r=typeof t=="string"?t:t.message;return JI(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}N(rC,"compatibleMessage");function nC(t){let e=t;return yy(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}N(nC,"getConstructorName");function iC(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}N(iC,"getMessage");function ke(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}N(ke,"flag");function Rb(t,e){var r=ke(t,"negate"),n=e[0];return r?!n:n}N(Rb,"test");function et(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}N(et,"type");var tY="captureStackTrace"in Error,ze=class oC extends Error{static{N(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,tY&&Error.captureStackTrace(this,n||oC);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function aC(t,e){var r=ke(t,"message"),n=ke(t,"ssfi");r=r?r+": ":"",t=ke(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();var i=e.map(function(s,l){var p=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a",f=e.length>1&&l===e.length-1?"or ":"";return f+p+" "+s}).join(", "),o=et(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new ze(r+"object tested must be "+i+", but "+o+" given",void 0,n)}N(aC,"expectTypes");function xy(t,e){return e.length>4?e[4]:t._obj}N(xy,"getActual");var $I={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},rY={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},kc="\u2026";function sC(t,e){let r=$I[rY[e]]||$I[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}N(sC,"colorise");function cC({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:l=[],truncate:p=1/0,stylize:f=String}={},d){let h={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(p),seen:l,inspect:d,stylize:f};return h.colors&&(h.stylize=sC),h}N(cC,"normaliseOptions");function lC(t){return t>="\uD800"&&t<="\uDBFF"}N(lC,"isHighSurrogate");function Bi(t,e,r=kc){t=String(t);let n=r.length,i=t.length;if(n>e&&i>n)return r;if(i>e&&i>n){let o=e-n;return o>0&&lC(t[o-1])&&(o=o-1),`${t.slice(0,o)}${r}`}return t}N(Bi,"truncate");function En(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",l="",p="";for(let f=0;f<i;f+=1){let d=f+1===t.length,h=f+2===t.length;p=`${kc}(${t.length-f})`;let y=t[f];e.truncate=o-s.length-(d?0:n.length);let T=l||r(y,e)+(d?"":n),w=s.length+T.length,E=w+p.length;if(d&&w>o&&s.length+p.length<=o||!d&&!h&&E>o||(l=d?"":r(t[f+1],e)+(h?"":n),!d&&h&&E>o&&w+l.length>o))break;if(s+=T,!d&&!h&&w+l.length>=o){p=`${kc}(${t.length-f-1})`;break}p=""}return`${s}${p}`}N(En,"inspectList");function pC(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}N(pC,"quoteComplexKey");function Ac([t,e],r){return r.truncate-=2,typeof t=="string"?t=pC(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}N(Ac,"inspectProperty");function uC(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=En(t,e);e.truncate-=n.length;let i="";return r.length&&(i=En(r.map(o=>[o,t[o]]),e,Ac)),`[ ${n}${i?`, ${i}`:""} ]`}N(uC,"inspectArray");var nY=N(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function ui(t,e){let r=nY(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let s=0;s<t.length;s++){let l=`${e.stylize(Bi(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=l.length,t[s]!==t.length&&e.truncate<=3){i+=`${kc}(${t.length-t[s]+1})`;break}i+=l}let o="";return n.length&&(o=En(n.map(s=>[s,t[s]]),e,Ac)),`${r}[ ${i}${o?`, ${o}`:""} ]`}N(ui,"inspectTypedArray");function fC(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Bi(n[1],e.truncate-i.length-1)}`,"date")}N(fC,"inspectDate");function ub(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Bi(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}N(ub,"inspectFunction");function mC([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}N(mC,"inspectMapEntry");function dC(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}N(dC,"mapToEntries");function hC(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${En(dC(t),e,mC)} }`)}N(hC,"inspectMap");var iY=Number.isNaN||(t=>t!==t);function fb(t,e){return iY(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Bi(String(t),e.truncate),"number")}N(fb,"inspectNumber");function mb(t,e){let r=Bi(t.toString(),e.truncate-1);return r!==kc&&(r+="n"),e.stylize(r,"bigint")}N(mb,"inspectBigInt");function gC(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Bi(i,n)}/${r}`,"regexp")}N(gC,"inspectRegExp");function yC(t){let e=[];return t.forEach(r=>{e.push(r)}),e}N(yC,"arrayFromSet");function xC(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${En(yC(t),e)} }`)}N(xC,"inspectSet");var jI=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),oY={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},aY=16,sY=4;function TC(t){return oY[t]||`\\u${`0000${t.charCodeAt(0).toString(aY)}`.slice(-sY)}`}N(TC,"escape");function db(t,e){return jI.test(t)&&(t=t.replace(jI,TC)),e.stylize(`'${Bi(t,e.truncate-2)}'`,"string")}N(db,"inspectString");function hb(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}N(hb,"inspectSymbol");var SC=N(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(SC=N((n,i)=>{let[o,s]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(s,i)}}`},"getPromiseValue"))}catch{}var cY=SC;function Np(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let i=En(r.map(l=>[l,t[l]]),e,Ac),o=En(n.map(l=>[l,t[l]]),e,Ac);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}N(Np,"inspectObject");var lb=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function vC(t,e){let r="";return lb&&lb in t&&(r=t[lb]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Np(t,e)}`}N(vC,"inspectClass");function bC(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${En(t,e)} ]`)}N(bC,"inspectArguments");var lY=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description","cause"];function wC(t,e){let r=Object.getOwnPropertyNames(t).filter(s=>lY.indexOf(s)===-1),n=t.name;e.truncate-=n.length;let i="";if(typeof t.message=="string"?i=Bi(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let o=En(r.map(s=>[s,t[s]]),e,Ac);return`${n}${i}${o?` { ${o} }`:""}`}N(wC,"inspectObject");function EC([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}N(EC,"inspectAttribute");function ly(t,e){return En(t,e,kb,`
`)}N(ly,"inspectHTMLCollection");function kb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=En(r.map(d=>[d,t.getAttribute(d)]),e,EC," ")),e.truncate-=l.length;let p=e.truncate,f=ly(t.children,e);return f&&f.length>p&&(f=`${kc}(${t.children.length})`),`${i}${l}${o}${f}${s}`}N(kb,"inspectHTML");var pY=typeof Symbol=="function"&&typeof Symbol.for=="function",pb=pY?Symbol.for("chai/inspect"):"@@chai/inspect",Rc=!1;try{let t=eY();Rc=t.inspect?t.inspect.custom:!1}catch{Rc=!1}var zI=new WeakMap,qI={},GI={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:fb,Number:fb,bigint:mb,BigInt:mb,string:db,String:db,function:ub,Function:ub,symbol:hb,Symbol:hb,Array:uC,Date:fC,Map:hC,Set:xC,RegExp:gC,Promise:cY,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:bC,Int8Array:ui,Uint8Array:ui,Uint8ClampedArray:ui,Int16Array:ui,Uint16Array:ui,Int32Array:ui,Uint32Array:ui,Float32Array:ui,Float64Array:ui,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:wC,HTMLCollection:ly,NodeList:ly},uY=N((t,e,r)=>pb in t&&typeof t[pb]=="function"?t[pb](e):Rc&&Rc in t&&typeof t[Rc]=="function"?t[Rc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&zI.has(t.constructor)?zI.get(t.constructor)(t,e):qI[r]?qI[r](t,e):"","inspectCustom"),fY=Object.prototype.toString;function py(t,e={}){let r=cC(e,py),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=fY.call(t).slice(8,-1)),i in GI)return GI[i](t,r);if(n&&t){let s=uY(t,r,i);if(s)return typeof s=="string"?s:py(s,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Np(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?kb(t,r):"constructor"in t?t.constructor!==Object?vC(t,r):Np(t,r):t===Object(t)?Np(t,r):r.stylize(String(t),i)}N(py,"inspect");var Sr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function $e(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:Sr.truncateThreshold?Sr.truncateThreshold:1/0};return py(t,i)}N($e,"inspect");function Fa(t){var e=$e(t),r=Object.prototype.toString.call(t);if(Sr.truncateThreshold&&e.length>=Sr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}N(Fa,"objDisplay");function Ab(t,e){var r=ke(t,"negate"),n=ke(t,"object"),i=e[3],o=xy(t,e),s=r?e[2]:e[1],l=ke(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return Fa(n)}).replace(/#\{act\}/g,function(){return Fa(o)}).replace(/#\{exp\}/g,function(){return Fa(i)}),l?l+": "+s:s}N(Ab,"getMessage");function Wn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}N(Wn,"transferFlags");function gb(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}N(gb,"type");function Pb(){this._key="chai/deep-eql__"+Math.random()+Date.now()}N(Pb,"FakeMap");Pb.prototype={get:N(function(e){return e[this._key]},"get"),set:N(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var _C=typeof WeakMap=="function"?WeakMap:Pb;function yb(t,e,r){if(!r||Ia(t)||Ia(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}N(yb,"memoizeCompare");function Cp(t,e,r,n){if(!(!r||Ia(t)||Ia(e))){var i=r.get(t);i?i.set(e,n):(i=new _C,i.set(e,n),r.set(t,i))}}N(Cp,"memoizeSet");var RC=Op;function Op(t,e,r){if(r&&r.comparator)return xb(t,e,r);var n=Mb(t,e);return n!==null?n:xb(t,e,r)}N(Op,"deepEqual");function Mb(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:Ia(t)||Ia(e)?!1:null}N(Mb,"simpleEqual");function xb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new _C;var n=r&&r.comparator,i=yb(t,e,r.memoize);if(i!==null)return i;var o=yb(e,t,r.memoize);if(o!==null)return o;if(n){var s=n(t,e);if(s===!1||s===!0)return Cp(t,e,r.memoize,s),s;var l=Mb(t,e);if(l!==null)return l}var p=gb(t);if(p!==gb(e))return Cp(t,e,r.memoize,!1),!1;Cp(t,e,r.memoize,!0);var f=kC(t,e,p,r);return Cp(t,e,r.memoize,f),f}N(xb,"extensiveDeepEqual");function kC(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Op(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return Db(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Co(t,e,n);case"RegExp":return AC(t,e);case"Generator":return PC(t,e,n);case"DataView":return Co(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return Co(new Uint8Array(t),new Uint8Array(e),n);case"Set":return Tb(t,e,n);case"Map":return Tb(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return DC(t,e,n)}}N(kC,"extensiveDeepEqualByType");function AC(t,e){return t.toString()===e.toString()}N(AC,"regexpEqual");function Tb(t,e,r){try{if(t.size!==e.size)return!1;if(t.size===0)return!0}catch{return!1}var n=[],i=[];return t.forEach(N(function(s,l){n.push([s,l])},"gatherEntries")),e.forEach(N(function(s,l){i.push([s,l])},"gatherEntries")),Co(n.sort(),i.sort(),r)}N(Tb,"entriesEqual");function Co(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Op(t[i],e[i],r)===!1)return!1;return!0}N(Co,"iterableEqual");function PC(t,e,r){return Co(uy(t),uy(e),r)}N(PC,"generatorEqual");function MC(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}N(MC,"hasIteratorFunction");function Sb(t){if(MC(t))try{return uy(t[Symbol.iterator]())}catch{return[]}return[]}N(Sb,"getIteratorEntries");function uy(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}N(uy,"getGeneratorEntries");function vb(t){var e=[];for(var r in t)e.push(r);return e}N(vb,"getEnumerableKeys");function bb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}N(bb,"getEnumerableSymbols");function Db(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Op(t[r[o]],e[r[o]],n)===!1)return!1;return!0}N(Db,"keysEqual");function DC(t,e,r){var n=vb(t),i=vb(e),o=bb(t),s=bb(e);if(n=n.concat(o),i=i.concat(s),n.length&&n.length===i.length)return Co(wb(n).sort(),wb(i).sort())===!1?!1:Db(t,e,n,r);var l=Sb(t),p=Sb(e);return l.length&&l.length===p.length?(l.sort(),p.sort(),Co(l,p,r)):n.length===0&&l.length===0&&i.length===0&&p.length===0}N(DC,"objectEqual");function Ia(t){return t===null||typeof t!="object"}N(Ia,"isPrimitive");function wb(t){return t.map(N(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}N(wb,"mapSymbols");function Ty(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}N(Ty,"hasProperty");function FC(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),s=null;return o?s={i:parseFloat(o[1])}:s={p:n.replace(/\\([.[\]])/g,"$1")},s})}N(FC,"parsePath");function Eb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let s=e[o];n&&(typeof s.p>"u"?n=n[s.i]:n=n[s.p],o===r-1&&(i=n))}return i}N(Eb,"internalGetPathValue");function Fb(t,e){let r=FC(e),n=r[r.length-1],i={parent:r.length>1?Eb(t,r,r.length-1):t,name:n.p||n.i,value:Eb(t,r)};return i.exists=Ty(i.parent,i.name),i}N(Fb,"getPathInfo");function b(t,e,r,n){return ke(this,"ssfi",r||b),ke(this,"lockSsfi",n),ke(this,"object",t),ke(this,"message",e),ke(this,"eql",Sr.deepEqual||RC),Pc(this)}N(b,"Assertion");Object.defineProperty(b,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Sr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Sr.includeStack=t}});Object.defineProperty(b,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Sr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Sr.showDiff=t}});b.addProperty=function(t,e){Ib(this.prototype,t,e)};b.addMethod=function(t,e){Cb(this.prototype,t,e)};b.addChainableMethod=function(t,e,r){Lb(this.prototype,t,e,r)};b.overwriteProperty=function(t,e){Nb(this.prototype,t,e)};b.overwriteMethod=function(t,e){Ob(this.prototype,t,e)};b.overwriteChainableMethod=function(t,e,r){Ub(this.prototype,t,e,r)};b.prototype.assert=function(t,e,r,n,i,o){var s=Rb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),Sr.showDiff!==!0&&(o=!1),!s){e=Ab(this,arguments);var l=xy(this,arguments),p={actual:l,expected:n,showDiff:o},f=Vb(this,arguments);throw f&&(p.operator=f),new ze(e,p,Sr.includeStack?this.assert:ke(this,"ssfi"))}};Object.defineProperty(b.prototype,"_obj",{get:function(){return ke(this,"object")},set:function(t){ke(this,"object",t)}});function Lp(){return Sr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}N(Lp,"isProxyEnabled");function Ib(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:N(function n(){!Lp()&&!ke(this,"lockSsfi")&&ke(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new b;return Wn(this,o),o},"propertyGetter"),configurable:!0})}N(Ib,"addProperty");var mY=Object.getOwnPropertyDescriptor(function(){},"length");function Up(t,e,r){return mY.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}N(Up,"addLengthGuard");function IC(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}N(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}N(IC,"getProperties");var KI=["__flags","__methods","_obj","assert"];function Pc(t,e){return Lp()?new Proxy(t,{get:N(function r(n,i){if(typeof i=="string"&&Sr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,s=4;throw IC(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&KI.indexOf(l)===-1){var p=CC(i,l,s);p<s&&(o=l,s=p)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return KI.indexOf(i)===-1&&!ke(n,"lockSsfi")&&ke(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}N(Pc,"proxify");function CC(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;var n=[];for(let o=0;o<=t.length;o++)n[o]=Array(e.length+1).fill(0),n[o][0]=o;for(let o=0;o<e.length;o++)n[0][o]=o;for(let o=1;o<=t.length;o++){var i=t.charCodeAt(o-1);for(let s=1;s<=e.length;s++){if(Math.abs(o-s)>=r){n[o][s]=r;continue}n[o][s]=Math.min(n[o-1][s]+1,n[o][s-1]+1,n[o-1][s-1]+(i===e.charCodeAt(s-1)?0:1))}}return n[t.length][e.length]}N(CC,"stringDistanceCapped");function Cb(t,e,r){var n=N(function(){ke(this,"lockSsfi")||ke(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new b;return Wn(this,o),o},"methodWrapper");Up(n,e,!1),t[e]=Pc(n,e)}N(Cb,"addMethod");function Nb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=N(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:N(function o(){!Lp()&&!ke(this,"lockSsfi")&&ke(this,"ssfi",o);var s=ke(this,"lockSsfi");ke(this,"lockSsfi",!0);var l=r(i).call(this);if(ke(this,"lockSsfi",s),l!==void 0)return l;var p=new b;return Wn(this,p),p},"overwritingPropertyGetter"),configurable:!0})}N(Nb,"overwriteProperty");function Ob(t,e,r){var n=t[e],i=N(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=N(function(){ke(this,"lockSsfi")||ke(this,"ssfi",o);var s=ke(this,"lockSsfi");ke(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(ke(this,"lockSsfi",s),l!==void 0)return l;var p=new b;return Wn(this,p),p},"overwritingMethodWrapper");Up(o,e,!1),t[e]=Pc(o,e)}N(Ob,"overwriteMethod");var dY=typeof Object.setPrototypeOf=="function",QI=N(function(){},"testFn"),hY=Object.getOwnPropertyNames(QI).filter(function(t){var e=Object.getOwnPropertyDescriptor(QI,t);return typeof e!="object"?!0:!e.configurable}),gY=Function.prototype.call,yY=Function.prototype.apply;function Lb(t,e,r,n){typeof n!="function"&&(n=N(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:N(function(){i.chainingBehavior.call(this);var s=N(function(){ke(this,"lockSsfi")||ke(this,"ssfi",s);var f=i.method.apply(this,arguments);if(f!==void 0)return f;var d=new b;return Wn(this,d),d},"chainableMethodWrapper");if(Up(s,e,!0),dY){var l=Object.create(this);l.call=gY,l.apply=yY,Object.setPrototypeOf(s,l)}else{var p=Object.getOwnPropertyNames(t);p.forEach(function(f){if(hY.indexOf(f)===-1){var d=Object.getOwnPropertyDescriptor(t,f);Object.defineProperty(s,f,d)}})}return Wn(this,s),Pc(s)},"chainableMethodGetter"),configurable:!0})}N(Lb,"addChainableMethod");function Ub(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=N(function(){var p=n(o).call(this);if(p!==void 0)return p;var f=new b;return Wn(this,f),f},"overwritingChainableMethodGetter");var s=i.method;i.method=N(function(){var p=r(s).apply(this,arguments);if(p!==void 0)return p;var f=new b;return Wn(this,f),f},"overwritingChainableMethodWrapper")}N(Ub,"overwriteChainableMethod");function fy(t,e){return $e(t)<$e(e)?-1:1}N(fy,"compareByInspect");function Hb(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}N(Hb,"getOwnEnumerablePropertySymbols");function Bb(t){return Object.keys(t).concat(Hb(t))}N(Bb,"getOwnEnumerableProperties");var my=Number.isNaN;function NC(t){var e=et(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}N(NC,"isObjectType");function Vb(t,e){var r=ke(t,"operator"),n=ke(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var s=NC(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}}N(Vb,"getOperator");function Sy(t){return t.name}N(Sy,"getName");function dy(t){return Object.prototype.toString.call(t)==="[object RegExp]"}N(dy,"isRegExp");function Vt(t){return["Number","BigInt"].includes(et(t))}N(Vt,"isNumeric");var{flag:M}=cy;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){b.addProperty(t)});b.addProperty("not",function(){M(this,"negate",!0)});b.addProperty("deep",function(){M(this,"deep",!0)});b.addProperty("nested",function(){M(this,"nested",!0)});b.addProperty("own",function(){M(this,"own",!0)});b.addProperty("ordered",function(){M(this,"ordered",!0)});b.addProperty("any",function(){M(this,"any",!0),M(this,"all",!1)});b.addProperty("all",function(){M(this,"all",!0),M(this,"any",!1)});var YI={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function Wb(t,e){e&&M(this,"message",e),t=t.toLowerCase();var r=M(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=et(r).toLowerCase();YI.function.includes(t)?this.assert(YI[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}N(Wb,"an");b.addChainableMethod("an",Wb);b.addChainableMethod("a",Wb);function OC(t,e){return my(t)&&my(e)||t===e}N(OC,"SameValueZero");function Hp(){M(this,"contains",!0)}N(Hp,"includeChainingBehavior");function Bp(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=et(r).toLowerCase(),i=M(this,"message"),o=M(this,"negate"),s=M(this,"ssfi"),l=M(this,"deep"),p=l?"deep ":"",f=l?M(this,"eql"):OC;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new ze(i+"unable to use .deep.include with WeakSet",void 0,s);d=r.has(t);break;case"map":r.forEach(function(w){d=d||f(w,t)});break;case"set":l?r.forEach(function(w){d=d||f(w,t)}):d=r.has(t);break;case"array":l?d=r.some(function(w){return f(w,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new ze(i+"the given combination of arguments ("+n+" and "+et(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+et(t).toLowerCase(),void 0,s);var h=Object.keys(t),y=null,T=0;if(h.forEach(function(w){var E=new b(r);if(Wn(this,E,!0),M(E,"lockSsfi",!0),!o||h.length===1){E.property(w,t[w]);return}try{E.property(w,t[w])}catch(U){if(!Jr.compatibleConstructor(U,ze))throw U;y===null&&(y=U),T++}},this),o&&h.length>1&&T===h.length)throw y;return}this.assert(d,"expected #{this} to "+p+"include "+$e(t),"expected #{this} to not "+p+"include "+$e(t))}N(Bp,"include");b.addChainableMethod("include",Bp,Hp);b.addChainableMethod("contain",Bp,Hp);b.addChainableMethod("contains",Bp,Hp);b.addChainableMethod("includes",Bp,Hp);b.addProperty("ok",function(){this.assert(M(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});b.addProperty("true",function(){this.assert(M(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!M(this,"negate"))});b.addProperty("numeric",function(){let t=M(this,"object");this.assert(["Number","BigInt"].includes(et(t)),"expected #{this} to be numeric","expected #{this} to not be numeric",!M(this,"negate"))});b.addProperty("callable",function(){let t=M(this,"object"),e=M(this,"ssfi"),r=M(this,"message"),n=r?`${r}: `:"",i=M(this,"negate"),o=i?`${n}expected ${$e(t)} not to be a callable function`:`${n}expected ${$e(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(et(t));if(s&&i||!s&&!i)throw new ze(o,void 0,e)});b.addProperty("false",function(){this.assert(M(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!M(this,"negate"))});b.addProperty("null",function(){this.assert(M(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});b.addProperty("undefined",function(){this.assert(M(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});b.addProperty("NaN",function(){this.assert(my(M(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function $b(){var t=M(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}N($b,"assertExist");b.addProperty("exist",$b);b.addProperty("exists",$b);b.addProperty("empty",function(){var t=M(this,"object"),e=M(this,"ssfi"),r=M(this,"message"),n;switch(r=r?r+": ":"",et(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new ze(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+Sy(t);throw new ze(i.trim(),void 0,e);default:if(t!==Object(t))throw new ze(r+".empty was passed non-string primitive "+$e(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function jb(){var t=M(this,"object"),e=et(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}N(jb,"checkArguments");b.addProperty("arguments",jb);b.addProperty("Arguments",jb);function vy(t,e){e&&M(this,"message",e);var r=M(this,"object");if(M(this,"deep")){var n=M(this,"lockSsfi");M(this,"lockSsfi",!0),this.eql(t),M(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}N(vy,"assertEqual");b.addMethod("equal",vy);b.addMethod("equals",vy);b.addMethod("eq",vy);function zb(t,e){e&&M(this,"message",e);var r=M(this,"eql");this.assert(r(t,M(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}N(zb,"assertEql");b.addMethod("eql",zb);b.addMethod("eqls",zb);function by(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=et(r).toLowerCase(),p=et(t).toLowerCase();if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")throw new ze(o+"the argument to above must be a date",void 0,s);if(!Vt(t)&&(n||Vt(r)))throw new ze(o+"the argument to above must be a number",void 0,s);if(!n&&l!=="date"&&!Vt(r)){var f=l==="string"?"'"+r+"'":r;throw new ze(o+"expected "+f+" to be a number or a date",void 0,s)}if(n){var d="length",h;l==="map"||l==="set"?(d="size",h=r.size):h=r.length,this.assert(h>t,"expected #{this} to have a "+d+" above #{exp} but got #{act}","expected #{this} to not have a "+d+" above #{exp}",t,h)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}N(by,"assertAbove");b.addMethod("above",by);b.addMethod("gt",by);b.addMethod("greaterThan",by);function wy(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=et(r).toLowerCase(),p=et(t).toLowerCase(),f,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")f=o+"the argument to least must be a date";else if(!Vt(t)&&(n||Vt(r)))f=o+"the argument to least must be a number";else if(!n&&l!=="date"&&!Vt(r)){var h=l==="string"?"'"+r+"'":r;f=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new ze(f,void 0,s);if(n){var y="length",T;l==="map"||l==="set"?(y="size",T=r.size):T=r.length,this.assert(T>=t,"expected #{this} to have a "+y+" at least #{exp} but got #{act}","expected #{this} to have a "+y+" below #{exp}",t,T)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}N(wy,"assertLeast");b.addMethod("least",wy);b.addMethod("gte",wy);b.addMethod("greaterThanOrEqual",wy);function Ey(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=et(r).toLowerCase(),p=et(t).toLowerCase(),f,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")f=o+"the argument to below must be a date";else if(!Vt(t)&&(n||Vt(r)))f=o+"the argument to below must be a number";else if(!n&&l!=="date"&&!Vt(r)){var h=l==="string"?"'"+r+"'":r;f=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new ze(f,void 0,s);if(n){var y="length",T;l==="map"||l==="set"?(y="size",T=r.size):T=r.length,this.assert(T<t,"expected #{this} to have a "+y+" below #{exp} but got #{act}","expected #{this} to not have a "+y+" below #{exp}",t,T)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}N(Ey,"assertBelow");b.addMethod("below",Ey);b.addMethod("lt",Ey);b.addMethod("lessThan",Ey);function _y(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=et(r).toLowerCase(),p=et(t).toLowerCase(),f,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")f=o+"the argument to most must be a date";else if(!Vt(t)&&(n||Vt(r)))f=o+"the argument to most must be a number";else if(!n&&l!=="date"&&!Vt(r)){var h=l==="string"?"'"+r+"'":r;f=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new ze(f,void 0,s);if(n){var y="length",T;l==="map"||l==="set"?(y="size",T=r.size):T=r.length,this.assert(T<=t,"expected #{this} to have a "+y+" at most #{exp} but got #{act}","expected #{this} to have a "+y+" above #{exp}",t,T)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}N(_y,"assertMost");b.addMethod("most",_y);b.addMethod("lte",_y);b.addMethod("lessThanOrEqual",_y);b.addMethod("within",function(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"doLength"),o=M(this,"message"),s=o?o+": ":"",l=M(this,"ssfi"),p=et(n).toLowerCase(),f=et(t).toLowerCase(),d=et(e).toLowerCase(),h,y=!0,T=f==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&p!=="map"&&p!=="set"&&new b(n,o,l,!0).to.have.property("length"),!i&&p==="date"&&(f!=="date"||d!=="date"))h=s+"the arguments to within must be dates";else if((!Vt(t)||!Vt(e))&&(i||Vt(n)))h=s+"the arguments to within must be numbers";else if(!i&&p!=="date"&&!Vt(n)){var w=p==="string"?"'"+n+"'":n;h=s+"expected "+w+" to be a number or a date"}else y=!1;if(y)throw new ze(h,void 0,l);if(i){var E="length",U;p==="map"||p==="set"?(E="size",U=n.size):U=n.length,this.assert(U>=t&&U<=e,"expected #{this} to have a "+E+" within "+T,"expected #{this} to not have a "+E+" within "+T)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+T,"expected #{this} to not be within "+T)});function qb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"ssfi"),i=M(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new ze(i+"The instanceof assertion needs a constructor but "+et(t)+" was given.",void 0,n)):l}var s=Sy(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}N(qb,"assertInstanceOf");b.addMethod("instanceof",qb);b.addMethod("instanceOf",qb);function Gb(t,e,r){r&&M(this,"message",r);var n=M(this,"nested"),i=M(this,"own"),o=M(this,"message"),s=M(this,"object"),l=M(this,"ssfi"),p=typeof t;if(o=o?o+": ":"",n){if(p!=="string")throw new ze(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(p!=="string"&&p!=="number"&&p!=="symbol")throw new ze(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new ze(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(s==null)throw new ze(o+"Target cannot be null or undefined.",void 0,l);var f=M(this,"deep"),d=M(this,"negate"),h=n?Fb(s,t):null,y=n?h.value:s[t],T=f?M(this,"eql"):(U,V)=>U===V,w="";f&&(w+="deep "),i&&(w+="own "),n&&(w+="nested "),w+="property ";var E;i?E=Object.prototype.hasOwnProperty.call(s,t):n?E=h.exists:E=Ty(s,t),(!d||arguments.length===1)&&this.assert(E,"expected #{this} to have "+w+$e(t),"expected #{this} to not have "+w+$e(t)),arguments.length>1&&this.assert(E&&T(e,y),"expected #{this} to have "+w+$e(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+w+$e(t)+" of #{act}",e,y),M(this,"object",y)}N(Gb,"assertProperty");b.addMethod("property",Gb);function Kb(t,e,r){M(this,"own",!0),Gb.apply(this,arguments)}N(Kb,"assertOwnProperty");b.addMethod("ownProperty",Kb);b.addMethod("haveOwnProperty",Kb);function Qb(t,e,r){typeof e=="string"&&(r=e,e=null),r&&M(this,"message",r);var n=M(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=M(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+$e(t)+" on #{this} to match "+$e(e)+", got "+$e(i),"expected the own property descriptor for "+$e(t)+" on #{this} to not match "+$e(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+$e(t),"expected #{this} to not have an own property descriptor for "+$e(t)),M(this,"object",i)}N(Qb,"assertOwnPropertyDescriptor");b.addMethod("ownPropertyDescriptor",Qb);b.addMethod("haveOwnPropertyDescriptor",Qb);function Yb(){M(this,"doLength",!0)}N(Yb,"assertLengthChain");function Zb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=et(r).toLowerCase(),i=M(this,"message"),o=M(this,"ssfi"),s="length",l;switch(n){case"map":case"set":s="size",l=r.size;break;default:new b(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,l)}N(Zb,"assertLength");b.addChainableMethod("length",Zb,Yb);b.addChainableMethod("lengthOf",Zb,Yb);function Xb(t,e){e&&M(this,"message",e);var r=M(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}N(Xb,"assertMatch");b.addMethod("match",Xb);b.addMethod("matches",Xb);b.addMethod("string",function(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi");new b(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+$e(t),"expected #{this} to not contain "+$e(t))});function Jb(t){var e=M(this,"object"),r=et(e),n=et(t),i=M(this,"ssfi"),o=M(this,"deep"),s,l="",p,f=!0,d=M(this,"message");d=d?d+": ":"";var h=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",p=[],e.forEach(function(j,ne){p.push(ne)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(p=Bb(e),n){case"Array":if(arguments.length>1)throw new ze(h,void 0,i);break;case"Object":if(arguments.length>1)throw new ze(h,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(j){return typeof j=="symbol"?j:String(j)})}if(!t.length)throw new ze(d+"keys required",void 0,i);var y=t.length,T=M(this,"any"),w=M(this,"all"),E=t,U=o?M(this,"eql"):(j,ne)=>j===ne;if(!T&&!w&&(w=!0),T&&(f=E.some(function(j){return p.some(function(ne){return U(j,ne)})})),w&&(f=E.every(function(j){return p.some(function(ne){return U(j,ne)})}),M(this,"contains")||(f=f&&t.length==p.length)),y>1){t=t.map(function(j){return $e(j)});var V=t.pop();w&&(s=t.join(", ")+", and "+V),T&&(s=t.join(", ")+", or "+V)}else s=$e(t[0]);s=(y>1?"keys ":"key ")+s,s=(M(this,"contains")?"contain ":"have ")+s,this.assert(f,"expected #{this} to "+l+s,"expected #{this} to not "+l+s,E.slice(0).sort(fy),p.sort(fy),!0)}N(Jb,"assertKeys");b.addMethod("keys",Jb);b.addMethod("key",Jb);function Ry(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"ssfi"),o=M(this,"message"),s=M(this,"negate")||!1;new b(n,o,i,!0).is.a("function"),(dy(t)||typeof t=="string")&&(e=t,t=null);let l,p=!1;try{n()}catch(j){p=!0,l=j}var f=t===void 0&&e===void 0,d=!!(t&&e),h=!1,y=!1;if(f||!f&&!s){var T="an error";t instanceof Error?T="#{exp}":t&&(T=Jr.getConstructorName(t));let j=l;if(l instanceof Error)j=l.toString();else if(typeof l=="string")j=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{j=Jr.getConstructorName(l)}catch{}this.assert(p,"expected #{this} to throw "+T,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),j)}if(t&&l){if(t instanceof Error){var w=Jr.compatibleInstance(l,t);w===s&&(d&&s?h=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!s?" but #{act} was thrown":""),t.toString(),l.toString()))}var E=Jr.compatibleConstructor(l,t);E===s&&(d&&s?h=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Jr.getConstructorName(t),l instanceof Error?l.toString():l&&Jr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var U="including";dy(e)&&(U="matching");var V=Jr.compatibleMessage(l,e);V===s&&(d&&s?y=!0:this.assert(s,"expected #{this} to throw error "+U+" #{exp} but got #{act}","expected #{this} to throw error not "+U+" #{exp}",e,Jr.getMessage(l)))}h&&y&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Jr.getConstructorName(t),l instanceof Error?l.toString():l&&Jr.getConstructorName(l)),M(this,"object",l)}N(Ry,"assertThrows");b.addMethod("throw",Ry);b.addMethod("throws",Ry);b.addMethod("Throw",Ry);function ew(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+$e(t),"expected #{this} to not respond to "+$e(t))}N(ew,"respondTo");b.addMethod("respondTo",ew);b.addMethod("respondsTo",ew);b.addProperty("itself",function(){M(this,"itself",!0)});function tw(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+Fa(t),"expected #{this} to not satisfy"+Fa(t),!M(this,"negate"),n)}N(tw,"satisfy");b.addMethod("satisfy",tw);b.addMethod("satisfies",tw);function rw(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.numeric;let s="A `delta` value is required for `closeTo`";if(e==null)throw new ze(i?`${i}: ${s}`:s,void 0,o);if(new b(e,i,o,!0).is.numeric,s="A `expected` value is required for `closeTo`",t==null)throw new ze(i?`${i}: ${s}`:s,void 0,o);new b(t,i,o,!0).is.numeric;let l=N(f=>f<0n?-f:f,"abs"),p=N(f=>parseFloat(parseFloat(f).toPrecision(12)),"strip");this.assert(p(l(n-t))<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}N(rw,"closeTo");b.addMethod("closeTo",rw);b.addMethod("approximately",rw);function LC(t,e,r,n,i){let o=Array.from(e),s=Array.from(t);if(!n){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(l,p){if(i)return r?r(l,o[p]):l===o[p];if(!r){var f=o.indexOf(l);return f===-1?!1:(n||o.splice(f,1),!0)}return o.some(function(d,h){return r(l,d)?(n||o.splice(h,1),!0):!1})})}N(LC,"isSubsetOf");b.addMethod("members",function(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi");new b(r,n,i,!0).to.be.iterable,new b(t,n,i,!0).to.be.iterable;var o=M(this,"contains"),s=M(this,"ordered"),l,p,f;o?(l=s?"an ordered superset":"a superset",p="expected #{this} to be "+l+" of #{exp}",f="expected #{this} to not be "+l+" of #{exp}"):(l=s?"ordered members":"members",p="expected #{this} to have the same "+l+" as #{exp}",f="expected #{this} to not have the same "+l+" as #{exp}");var d=M(this,"deep")?M(this,"eql"):void 0;this.assert(LC(t,r,d,o,s),p,f,t,r,!0)});b.addProperty("iterable",function(t){t&&M(this,"message",t);var e=M(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function UC(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi"),o=M(this,"contains"),s=M(this,"deep"),l=M(this,"eql");new b(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(p){return r.indexOf(p)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):s?this.assert(t.some(function(p){return l(r,p)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}N(UC,"oneOf");b.addMethod("oneOf",UC);function nw(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),n();var l=e==null?t():t[e],p=e==null?s:"."+e;M(this,"deltaMsgObj",p),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","change"),M(this,"realDelta",l!==s),this.assert(s!==l,"expected "+p+" to change","expected "+p+" to not change")}N(nw,"assertChanges");b.addMethod("change",nw);b.addMethod("changes",nw);function iw(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),new b(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?s:"."+e;M(this,"deltaMsgObj",p),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","increase"),M(this,"realDelta",l-s),this.assert(l-s>0,"expected "+p+" to increase","expected "+p+" to not increase")}N(iw,"assertIncreases");b.addMethod("increase",iw);b.addMethod("increases",iw);function ow(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),new b(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?s:"."+e;M(this,"deltaMsgObj",p),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","decrease"),M(this,"realDelta",s-l),this.assert(l-s<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}N(ow,"assertDecreases");b.addMethod("decrease",ow);b.addMethod("decreases",ow);function HC(t,e){e&&M(this,"message",e);var r=M(this,"deltaMsgObj"),n=M(this,"initialDeltaValue"),i=M(this,"finalDeltaValue"),o=M(this,"deltaBehavior"),s=M(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=s===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}N(HC,"assertDelta");b.addMethod("by",HC);b.addProperty("extensible",function(){var t=M(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});b.addProperty("sealed",function(){var t=M(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});b.addProperty("frozen",function(){var t=M(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});b.addProperty("finite",function(t){var e=M(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function hy(t,e){return t===e?!0:typeof e!=typeof t?!1:typeof t!="object"||t===null?t===e:e?Array.isArray(t)?Array.isArray(e)?t.every(function(r){return e.some(function(n){return hy(r,n)})}):!1:t instanceof Date?e instanceof Date?t.getTime()===e.getTime():!1:Object.keys(t).every(function(r){var n=t[r],i=e[r];return typeof n=="object"&&n!==null&&i!==null?hy(n,i):typeof n=="function"?n(i):i===n}):!1}N(hy,"compareSubset");b.addMethod("containSubset",function(t){let e=ke(this,"object"),r=Sr.showDiff;this.assert(hy(t,e),"expected #{act} to contain subset #{exp}","expected #{act} to not contain subset #{exp}",t,e,r)});function gy(t,e){return new b(t,e)}N(gy,"expect");gy.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new ze(r,{actual:t,expected:e,operator:n},gy.fail)};var BC={};_b(BC,{Should:()=>TY,should:()=>xY});function aw(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new b(this.valueOf(),null,t):new b(this,null,t)}N(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}N(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new ze(o,{actual:n,expected:i,operator:s},r.fail)},r.equal=function(n,i,o){new b(n,o).to.equal(i)},r.Throw=function(n,i,o,s){new b(n,s).to.Throw(i,o)},r.exist=function(n,i){new b(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new b(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,s){new b(n,s).to.not.Throw(i,o)},r.not.exist=function(n,i){new b(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}N(aw,"loadShould");var xY=aw,TY=aw;function v(t,e){var r=new b(null,null,v,!0);r.assert(t,e,"[ negation message unavailable ]")}N(v,"assert");v.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new ze(r,{actual:t,expected:e,operator:n},v.fail)};v.isOk=function(t,e){new b(t,e,v.isOk,!0).is.ok};v.isNotOk=function(t,e){new b(t,e,v.isNotOk,!0).is.not.ok};v.equal=function(t,e,r){var n=new b(t,r,v.equal,!0);n.assert(e==ke(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};v.notEqual=function(t,e,r){var n=new b(t,r,v.notEqual,!0);n.assert(e!=ke(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};v.strictEqual=function(t,e,r){new b(t,r,v.strictEqual,!0).to.equal(e)};v.notStrictEqual=function(t,e,r){new b(t,r,v.notStrictEqual,!0).to.not.equal(e)};v.deepEqual=v.deepStrictEqual=function(t,e,r){new b(t,r,v.deepEqual,!0).to.eql(e)};v.notDeepEqual=function(t,e,r){new b(t,r,v.notDeepEqual,!0).to.not.eql(e)};v.isAbove=function(t,e,r){new b(t,r,v.isAbove,!0).to.be.above(e)};v.isAtLeast=function(t,e,r){new b(t,r,v.isAtLeast,!0).to.be.least(e)};v.isBelow=function(t,e,r){new b(t,r,v.isBelow,!0).to.be.below(e)};v.isAtMost=function(t,e,r){new b(t,r,v.isAtMost,!0).to.be.most(e)};v.isTrue=function(t,e){new b(t,e,v.isTrue,!0).is.true};v.isNotTrue=function(t,e){new b(t,e,v.isNotTrue,!0).to.not.equal(!0)};v.isFalse=function(t,e){new b(t,e,v.isFalse,!0).is.false};v.isNotFalse=function(t,e){new b(t,e,v.isNotFalse,!0).to.not.equal(!1)};v.isNull=function(t,e){new b(t,e,v.isNull,!0).to.equal(null)};v.isNotNull=function(t,e){new b(t,e,v.isNotNull,!0).to.not.equal(null)};v.isNaN=function(t,e){new b(t,e,v.isNaN,!0).to.be.NaN};v.isNotNaN=function(t,e){new b(t,e,v.isNotNaN,!0).not.to.be.NaN};v.exists=function(t,e){new b(t,e,v.exists,!0).to.exist};v.notExists=function(t,e){new b(t,e,v.notExists,!0).to.not.exist};v.isUndefined=function(t,e){new b(t,e,v.isUndefined,!0).to.equal(void 0)};v.isDefined=function(t,e){new b(t,e,v.isDefined,!0).to.not.equal(void 0)};v.isCallable=function(t,e){new b(t,e,v.isCallable,!0).is.callable};v.isNotCallable=function(t,e){new b(t,e,v.isNotCallable,!0).is.not.callable};v.isObject=function(t,e){new b(t,e,v.isObject,!0).to.be.a("object")};v.isNotObject=function(t,e){new b(t,e,v.isNotObject,!0).to.not.be.a("object")};v.isArray=function(t,e){new b(t,e,v.isArray,!0).to.be.an("array")};v.isNotArray=function(t,e){new b(t,e,v.isNotArray,!0).to.not.be.an("array")};v.isString=function(t,e){new b(t,e,v.isString,!0).to.be.a("string")};v.isNotString=function(t,e){new b(t,e,v.isNotString,!0).to.not.be.a("string")};v.isNumber=function(t,e){new b(t,e,v.isNumber,!0).to.be.a("number")};v.isNotNumber=function(t,e){new b(t,e,v.isNotNumber,!0).to.not.be.a("number")};v.isNumeric=function(t,e){new b(t,e,v.isNumeric,!0).is.numeric};v.isNotNumeric=function(t,e){new b(t,e,v.isNotNumeric,!0).is.not.numeric};v.isFinite=function(t,e){new b(t,e,v.isFinite,!0).to.be.finite};v.isBoolean=function(t,e){new b(t,e,v.isBoolean,!0).to.be.a("boolean")};v.isNotBoolean=function(t,e){new b(t,e,v.isNotBoolean,!0).to.not.be.a("boolean")};v.typeOf=function(t,e,r){new b(t,r,v.typeOf,!0).to.be.a(e)};v.notTypeOf=function(t,e,r){new b(t,r,v.notTypeOf,!0).to.not.be.a(e)};v.instanceOf=function(t,e,r){new b(t,r,v.instanceOf,!0).to.be.instanceOf(e)};v.notInstanceOf=function(t,e,r){new b(t,r,v.notInstanceOf,!0).to.not.be.instanceOf(e)};v.include=function(t,e,r){new b(t,r,v.include,!0).include(e)};v.notInclude=function(t,e,r){new b(t,r,v.notInclude,!0).not.include(e)};v.deepInclude=function(t,e,r){new b(t,r,v.deepInclude,!0).deep.include(e)};v.notDeepInclude=function(t,e,r){new b(t,r,v.notDeepInclude,!0).not.deep.include(e)};v.nestedInclude=function(t,e,r){new b(t,r,v.nestedInclude,!0).nested.include(e)};v.notNestedInclude=function(t,e,r){new b(t,r,v.notNestedInclude,!0).not.nested.include(e)};v.deepNestedInclude=function(t,e,r){new b(t,r,v.deepNestedInclude,!0).deep.nested.include(e)};v.notDeepNestedInclude=function(t,e,r){new b(t,r,v.notDeepNestedInclude,!0).not.deep.nested.include(e)};v.ownInclude=function(t,e,r){new b(t,r,v.ownInclude,!0).own.include(e)};v.notOwnInclude=function(t,e,r){new b(t,r,v.notOwnInclude,!0).not.own.include(e)};v.deepOwnInclude=function(t,e,r){new b(t,r,v.deepOwnInclude,!0).deep.own.include(e)};v.notDeepOwnInclude=function(t,e,r){new b(t,r,v.notDeepOwnInclude,!0).not.deep.own.include(e)};v.match=function(t,e,r){new b(t,r,v.match,!0).to.match(e)};v.notMatch=function(t,e,r){new b(t,r,v.notMatch,!0).to.not.match(e)};v.property=function(t,e,r){new b(t,r,v.property,!0).to.have.property(e)};v.notProperty=function(t,e,r){new b(t,r,v.notProperty,!0).to.not.have.property(e)};v.propertyVal=function(t,e,r,n){new b(t,n,v.propertyVal,!0).to.have.property(e,r)};v.notPropertyVal=function(t,e,r,n){new b(t,n,v.notPropertyVal,!0).to.not.have.property(e,r)};v.deepPropertyVal=function(t,e,r,n){new b(t,n,v.deepPropertyVal,!0).to.have.deep.property(e,r)};v.notDeepPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};v.ownProperty=function(t,e,r){new b(t,r,v.ownProperty,!0).to.have.own.property(e)};v.notOwnProperty=function(t,e,r){new b(t,r,v.notOwnProperty,!0).to.not.have.own.property(e)};v.ownPropertyVal=function(t,e,r,n){new b(t,n,v.ownPropertyVal,!0).to.have.own.property(e,r)};v.notOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};v.deepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};v.notDeepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};v.nestedProperty=function(t,e,r){new b(t,r,v.nestedProperty,!0).to.have.nested.property(e)};v.notNestedProperty=function(t,e,r){new b(t,r,v.notNestedProperty,!0).to.not.have.nested.property(e)};v.nestedPropertyVal=function(t,e,r,n){new b(t,n,v.nestedPropertyVal,!0).to.have.nested.property(e,r)};v.notNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};v.deepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};v.notDeepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};v.lengthOf=function(t,e,r){new b(t,r,v.lengthOf,!0).to.have.lengthOf(e)};v.hasAnyKeys=function(t,e,r){new b(t,r,v.hasAnyKeys,!0).to.have.any.keys(e)};v.hasAllKeys=function(t,e,r){new b(t,r,v.hasAllKeys,!0).to.have.all.keys(e)};v.containsAllKeys=function(t,e,r){new b(t,r,v.containsAllKeys,!0).to.contain.all.keys(e)};v.doesNotHaveAnyKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};v.doesNotHaveAllKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};v.hasAnyDeepKeys=function(t,e,r){new b(t,r,v.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};v.hasAllDeepKeys=function(t,e,r){new b(t,r,v.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};v.containsAllDeepKeys=function(t,e,r){new b(t,r,v.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};v.doesNotHaveAnyDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};v.doesNotHaveAllDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};v.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new b(t,n,v.throws,!0).to.throw(e,r);return ke(i,"object")};v.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new b(t,n,v.doesNotThrow,!0).to.not.throw(e,r)};v.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new ze(n+'Invalid operator "'+e+'"',void 0,v.operator)}var o=new b(i,n,v.operator,!0);o.assert(ke(o,"object")===!0,"expected "+$e(t)+" to be "+e+" "+$e(r),"expected "+$e(t)+" to not be "+e+" "+$e(r))};v.closeTo=function(t,e,r,n){new b(t,n,v.closeTo,!0).to.be.closeTo(e,r)};v.approximately=function(t,e,r,n){new b(t,n,v.approximately,!0).to.be.approximately(e,r)};v.sameMembers=function(t,e,r){new b(t,r,v.sameMembers,!0).to.have.same.members(e)};v.notSameMembers=function(t,e,r){new b(t,r,v.notSameMembers,!0).to.not.have.same.members(e)};v.sameDeepMembers=function(t,e,r){new b(t,r,v.sameDeepMembers,!0).to.have.same.deep.members(e)};v.notSameDeepMembers=function(t,e,r){new b(t,r,v.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};v.sameOrderedMembers=function(t,e,r){new b(t,r,v.sameOrderedMembers,!0).to.have.same.ordered.members(e)};v.notSameOrderedMembers=function(t,e,r){new b(t,r,v.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};v.sameDeepOrderedMembers=function(t,e,r){new b(t,r,v.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};v.notSameDeepOrderedMembers=function(t,e,r){new b(t,r,v.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};v.includeMembers=function(t,e,r){new b(t,r,v.includeMembers,!0).to.include.members(e)};v.notIncludeMembers=function(t,e,r){new b(t,r,v.notIncludeMembers,!0).to.not.include.members(e)};v.includeDeepMembers=function(t,e,r){new b(t,r,v.includeDeepMembers,!0).to.include.deep.members(e)};v.notIncludeDeepMembers=function(t,e,r){new b(t,r,v.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};v.includeOrderedMembers=function(t,e,r){new b(t,r,v.includeOrderedMembers,!0).to.include.ordered.members(e)};v.notIncludeOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};v.includeDeepOrderedMembers=function(t,e,r){new b(t,r,v.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};v.notIncludeDeepOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};v.oneOf=function(t,e,r){new b(t,r,v.oneOf,!0).to.be.oneOf(e)};v.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${$e(t)} to be an iterable`:`expected ${$e(t)} to be an iterable`,new ze(e,void 0,v.isIterable)};v.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.changes,!0).to.change(e,r)};v.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesBy,!0).to.change(e,r).by(n)};v.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotChange,!0).to.not.change(e,r)};v.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesButNotBy,!0).to.change(e,r).but.not.by(n)};v.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.increases,!0).to.increase(e,r)};v.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesBy,!0).to.increase(e,r).by(n)};v.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotIncrease,!0).to.not.increase(e,r)};v.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};v.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.decreases,!0).to.decrease(e,r)};v.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesBy,!0).to.decrease(e,r).by(n)};v.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotDecrease,!0).to.not.decrease(e,r)};v.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new b(t,i,v.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};v.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};v.ifError=function(t){if(t)throw t};v.isExtensible=function(t,e){new b(t,e,v.isExtensible,!0).to.be.extensible};v.isNotExtensible=function(t,e){new b(t,e,v.isNotExtensible,!0).to.not.be.extensible};v.isSealed=function(t,e){new b(t,e,v.isSealed,!0).to.be.sealed};v.isNotSealed=function(t,e){new b(t,e,v.isNotSealed,!0).to.not.be.sealed};v.isFrozen=function(t,e){new b(t,e,v.isFrozen,!0).to.be.frozen};v.isNotFrozen=function(t,e){new b(t,e,v.isNotFrozen,!0).to.not.be.frozen};v.isEmpty=function(t,e){new b(t,e,v.isEmpty,!0).to.be.empty};v.isNotEmpty=function(t,e){new b(t,e,v.isNotEmpty,!0).to.not.be.empty};v.containsSubset=function(t,e,r){new b(t,r).to.containSubset(e)};v.doesNotContainSubset=function(t,e,r){new b(t,r).to.not.containSubset(e)};var SY=[["isOk","ok"],["isNotOk","notOk"],["throws","throw"],["throws","Throw"],["isExtensible","extensible"],["isNotExtensible","notExtensible"],["isSealed","sealed"],["isNotSealed","notSealed"],["isFrozen","frozen"],["isNotFrozen","notFrozen"],["isEmpty","empty"],["isNotEmpty","notEmpty"],["isCallable","isFunction"],["isNotCallable","isNotFunction"],["containsSubset","containSubset"]];for(let[t,e]of SY)v[e]=v[t];var ZI=[];function VC(t){let e={use:VC,AssertionError:ze,util:cy,config:Sr,expect:gy,assert:v,Assertion:b,...BC};return~ZI.indexOf(t)||(t(e,cy),ZI.push(t)),e}N(VC,"use");var Vp=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new Y(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new Y(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new Y(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var WC=Vr(require("node:path"),1),ky=class{get uri(){return this._uri}get filename(){return WC.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new Y(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof de?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Vp(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new de(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof Y))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new Y(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof de))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new de(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new sw(n)}}};function wY(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var sw=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=wY(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,s=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)r=i+1;else break;return new cw(i,e-s)}},cw=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var Ay=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Wp;this.onDidChangeActiveTextEditor=Wp;this.onDidChangeVisibleTextEditors=Wp;this.onDidChangeTextEditorSelection=Wp;this.onDidChangeTextEditorVisibleRanges=Wp;this.configuration=new hp,this.keyValueStore=new gp,this.messages=new yp,this.clipboard=new mp(this.client),this.capabilities=new Bg,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await RF(this.client);this.assetsRoot_=lw.default.join(e,"assets"),this.cursorlessNeovimPath=lw.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return WI()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return OF(e)}onDidOpenTextDocument(e,r,n){return LF(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let s,l;e?(s=[],l=[]):(s=await Ug(r,this.client),l=await _F(r,this.client,i));let p=this.toNeovimEditor(r,n,i,l,s);return Yr().emitEvent("onDidOpenTextDocument",p.document),p}toNeovimEditor(e,r,n,i,o){let s=this.getTextDocument(r),l=this.getTextEditor(e);return s?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),s.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),s=new ky(WF.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,s)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,s)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new Wg(tS(),this.client,this,e,s,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){DF(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,$C.pull)(this.disposables,...e)}};function Wp(){return{dispose(){}}}var Py=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var _Y=BigInt(1e9);function jC(t,e=BigInt(1e6)){return Number(t*e/_Y)/Number(e)}async function My(t,e=[],r=[],n,i,o,s,l){let p={documentContents:n.document.getText(),selections:n.selections.map(Tk)};o!=null&&(p.marks=o),l!=null&&(p.metadata=l),e.includes("clipboard")||(p.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(p.visibleRanges=n.visibleRanges.map(cl));for(let f of Ts){let d=t?.get(f),h=`${f}Mark`;d!=null&&!e.includes(h)&&(p[h]=d.map(y=>y.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let f=s?.startTimestamp;if(f==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-f;p.timeOffsetSeconds=jC(d)}return p}var RY=Vr(kl(),1);function zC(t,e,r,n,i,o,s,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:s,scopeProvider:o,takeSnapshot(p,f,d,h,y){return My(e,p,f,d,h,y,void 0,void 0)},setStoredTarget(p,f,d){e.set(f,d?.map(h=>vF(p,h)))},hatTokenMap:r,runIntegrationTests:l}}async function qC(t,e,r,n){let i={[Xx]:async(...o)=>{(await t.mode).mode==="t"&&PF(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),p=Of(o);if(await n.getFocusedElementType()==="terminal"&&na(p)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&MF(t)}return l}catch(l){if(e.runMode!=="test"){let p=l;console.error(p.stack),e.handleCommandError(p)}throw l}},"cursorless.repeatPreviousCommand":Ce,"cursorless.showCheatsheet":Ce,"cursorless.internal.updateCheatsheetDefaults":Ce,"cursorless.recordTestCase":Ce,"cursorless.recordOneTestCaseThenPause":Ce,"cursorless.pauseRecording":Ce,"cursorless.resumeRecording":Ce,"cursorless.takeSnapshot":Ce,"cursorless.recordScopeTests.showUnimplementedFacets":Ce,"cursorless.recordScopeTests.saveActiveDocument":Ce,"cursorless.showQuickPick":Ce,"cursorless.showDocumentation":Ce,"cursorless.showInstallationDependencies":Ce,"cursorless.migrateSnippets":Ce,"cursorless.private.logQuickActions":Ce,"cursorless.toggleDecorations":Ce,"cursorless.recomputeDecorationStyles":Ce,"cursorless.showScopeVisualizer":Ce,"cursorless.hideScopeVisualizer":Ce,"cursorless.analyzeCommandHistory":Ce,"cursorless.keyboard.escape":Ce,"cursorless.keyboard.targeted.targetHat":Ce,"cursorless.keyboard.targeted.targetScope":Ce,"cursorless.keyboard.targeted.targetSelection":Ce,"cursorless.keyboard.targeted.clearTarget":Ce,"cursorless.keyboard.targeted.runActionOnTarget":Ce,"cursorless.keyboard.modal.modeOn":Ce,"cursorless.keyboard.modal.modeOff":Ce,"cursorless.keyboard.modal.modeToggle":Ce,"cursorless.keyboard.undoTarget":Ce,"cursorless.keyboard.redoTarget":Ce,"cursorless.tutorial.start":Ce,"cursorless.tutorial.next":Ce,"cursorless.tutorial.previous":Ce,"cursorless.tutorial.restart":Ce,"cursorless.tutorial.resume":Ce,"cursorless.tutorial.list":Ce,"cursorless.documentationOpened":Ce};Object.entries(i).map(([o,s])=>Yr().registerCommand(o,s))}async function Ce(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function GC(t){let e=t.nvim,r=new Ay(e);await r.init();let n=r.runMode==="production"?r:new Ef(r,new vf,r.runMode==="test",void 0),i=new Lu,o=new Py(e),s=r.runMode==="test"?i:o,{commandApi:l,storedTargets:p,hatTokenMap:f,scopeProvider:d,injectIde:h,runIntegrationTests:y}=await SF({ide:n,commandServerApi:s});await qC(e,r,l,s);let T={testHelpers:r.runMode==="test"?zC(i,p,f,r,n,d,h,y):void 0};Yr().registerExtensionApi(wF,T),console.log("activate(): Cursorless extension loaded")}function KC(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await kY(t),{sync:!1})}async function kY(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await GC(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
