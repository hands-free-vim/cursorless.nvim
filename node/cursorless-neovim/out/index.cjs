"use strict";var iB=Object.create;var dp=Object.defineProperty;var oB=Object.getOwnPropertyDescriptor;var aB=Object.getOwnPropertyNames;var sB=Object.getPrototypeOf,cB=Object.prototype.hasOwnProperty;var ot=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),lB=(t,e)=>{for(var r in e)dp(t,r,{get:e[r],enumerable:!0})},nE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of aB(e))!cB.call(t,i)&&i!==r&&dp(t,i,{get:()=>e[i],enumerable:!(n=oB(e,i))||n.enumerable});return t};var pr=(t,e,r)=>(r=t!=null?iB(sB(t)):{},nE(e||!t||!t.__esModule?dp(r,"default",{value:t,enumerable:!0}):r,t)),uB=t=>nE(dp({},"__esModule",{value:!0}),t);var _T=ot(wT=>{"use strict";Object.defineProperty(wT,"__esModule",{value:!0});wT.default=OK;var CK=NK(require("crypto"));function NK(t){return t&&t.__esModule?t:{default:t}}var kf=new Uint8Array(256),Rf=kf.length;function OK(){return Rf>kf.length-16&&(CK.default.randomFillSync(kf),Rf=0),kf.slice(Rf,Rf+=16)}});var Kk=ot(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});Mf.default=void 0;var LK=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Mf.default=LK});var Jc=ot(Pf=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});Pf.default=void 0;var UK=VK(Kk());function VK(t){return t&&t.__esModule?t:{default:t}}function BK(t){return typeof t=="string"&&UK.default.test(t)}var WK=BK;Pf.default=WK});var tl=ot(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.default=void 0;el.unsafeStringify=Qk;var HK=$K(Jc());function $K(t){return t&&t.__esModule?t:{default:t}}var Ft=[];for(let t=0;t<256;++t)Ft.push((t+256).toString(16).slice(1));function Qk(t,e=0){return Ft[t[e+0]]+Ft[t[e+1]]+Ft[t[e+2]]+Ft[t[e+3]]+"-"+Ft[t[e+4]]+Ft[t[e+5]]+"-"+Ft[t[e+6]]+Ft[t[e+7]]+"-"+Ft[t[e+8]]+Ft[t[e+9]]+"-"+Ft[t[e+10]]+Ft[t[e+11]]+Ft[t[e+12]]+Ft[t[e+13]]+Ft[t[e+14]]+Ft[t[e+15]]}function jK(t,e=0){let r=Qk(t,e);if(!(0,HK.default)(r))throw TypeError("Stringified UUID is invalid");return r}var qK=jK;el.default=qK});var Yk=ot(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});Af.default=void 0;var zK=KK(_T()),GK=tl();function KK(t){return t&&t.__esModule?t:{default:t}}var Zk,ET,RT=0,kT=0;function QK(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node||Zk,s=t.clockseq!==void 0?t.clockseq:ET;if(o==null||s==null){let g=t.random||(t.rng||zK.default)();o==null&&(o=Zk=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),s==null&&(s=ET=(g[6]<<8|g[7])&16383)}let l=t.msecs!==void 0?t.msecs:Date.now(),u=t.nsecs!==void 0?t.nsecs:kT+1,f=l-RT+(u-kT)/1e4;if(f<0&&t.clockseq===void 0&&(s=s+1&16383),(f<0||l>RT)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");RT=l,kT=u,ET=s,l+=122192928e5;let d=((l&268435455)*1e4+u)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=d&255;let h=l/4294967296*1e4&268435455;i[n++]=h>>>8&255,i[n++]=h&255,i[n++]=h>>>24&15|16,i[n++]=h>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,GK.unsafeStringify)(i)}var ZK=QK;Af.default=ZK});var MT=ot(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.default=void 0;var YK=XK(Jc());function XK(t){return t&&t.__esModule?t:{default:t}}function JK(t){if(!(0,YK.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var e4=JK;Df.default=e4});var PT=ot($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.URL=$o.DNS=void 0;$o.default=o4;var t4=tl(),r4=n4(MT());function n4(t){return t&&t.__esModule?t:{default:t}}function i4(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var Xk="6ba7b810-9dad-11d1-80b4-00c04fd430c8";$o.DNS=Xk;var Jk="6ba7b811-9dad-11d1-80b4-00c04fd430c8";$o.URL=Jk;function o4(t,e,r){function n(i,o,s,l){var u;if(typeof i=="string"&&(i=i4(i)),typeof o=="string"&&(o=(0,r4.default)(o)),((u=o)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+i.length);if(f.set(o),f.set(i,o.length),f=r(f),f[6]=f[6]&15|e,f[8]=f[8]&63|128,s){l=l||0;for(let d=0;d<16;++d)s[l+d]=f[d];return s}return(0,t4.unsafeStringify)(f)}try{n.name=t}catch{}return n.DNS=Xk,n.URL=Jk,n}});var eM=ot(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});If.default=void 0;var a4=s4(require("crypto"));function s4(t){return t&&t.__esModule?t:{default:t}}function c4(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),a4.default.createHash("md5").update(t).digest()}var l4=c4;If.default=l4});var rM=ot(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});Ff.default=void 0;var u4=tM(PT()),p4=tM(eM());function tM(t){return t&&t.__esModule?t:{default:t}}var f4=(0,u4.default)("v3",48,p4.default),d4=f4;Ff.default=d4});var nM=ot(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});Cf.default=void 0;var m4=h4(require("crypto"));function h4(t){return t&&t.__esModule?t:{default:t}}var g4={randomUUID:m4.default.randomUUID};Cf.default=g4});var aM=ot(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.default=void 0;var iM=oM(nM()),y4=oM(_T()),x4=tl();function oM(t){return t&&t.__esModule?t:{default:t}}function T4(t,e,r){if(iM.default.randomUUID&&!e&&!t)return iM.default.randomUUID();t=t||{};let n=t.random||(t.rng||y4.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,x4.unsafeStringify)(n)}var S4=T4;Nf.default=S4});var sM=ot(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.default=void 0;var v4=b4(require("crypto"));function b4(t){return t&&t.__esModule?t:{default:t}}function w4(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),v4.default.createHash("sha1").update(t).digest()}var _4=w4;Of.default=_4});var lM=ot(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.default=void 0;var E4=cM(PT()),R4=cM(sM());function cM(t){return t&&t.__esModule?t:{default:t}}var k4=(0,E4.default)("v5",80,R4.default),M4=k4;Lf.default=M4});var uM=ot(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.default=void 0;var P4="00000000-0000-0000-0000-000000000000";Uf.default=P4});var pM=ot(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.default=void 0;var A4=D4(Jc());function D4(t){return t&&t.__esModule?t:{default:t}}function I4(t){if(!(0,A4.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var F4=I4;Vf.default=F4});var fM=ot(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});Object.defineProperty(wn,"NIL",{enumerable:!0,get:function(){return U4.default}});Object.defineProperty(wn,"parse",{enumerable:!0,get:function(){return H4.default}});Object.defineProperty(wn,"stringify",{enumerable:!0,get:function(){return W4.default}});Object.defineProperty(wn,"v1",{enumerable:!0,get:function(){return C4.default}});Object.defineProperty(wn,"v3",{enumerable:!0,get:function(){return N4.default}});Object.defineProperty(wn,"v4",{enumerable:!0,get:function(){return O4.default}});Object.defineProperty(wn,"v5",{enumerable:!0,get:function(){return L4.default}});Object.defineProperty(wn,"validate",{enumerable:!0,get:function(){return B4.default}});Object.defineProperty(wn,"version",{enumerable:!0,get:function(){return V4.default}});var C4=Ti(Yk()),N4=Ti(rM()),O4=Ti(aM()),L4=Ti(lM()),U4=Ti(uM()),V4=Ti(pM()),B4=Ti(Jc()),W4=Ti(tl()),H4=Ti(MT());function Ti(t){return t&&t.__esModule?t:{default:t}}});var gM=ot((hM,Wf)=>{(function(t,e){typeof Wf=="object"&&Wf.exports?Wf.exports=e():t.nearley=e()})(hM,function(){function t(u,f,d){return this.id=++t.highestId,this.name=u,this.symbols=f,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(u){var f=typeof u>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,u).map(l).join(" ")+" \u25CF "+this.symbols.slice(u).map(l).join(" ");return this.name+" \u2192 "+f};function e(u,f,d,h){this.rule=u,this.dot=f,this.reference=d,this.data=[],this.wantedBy=h,this.isComplete=this.dot===u.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(u){var f=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return f.left=this,f.right=u,f.isComplete&&(f.data=f.build(),f.right=void 0),f},e.prototype.build=function(){var u=[],f=this;do u.push(f.right.data),f=f.left;while(f.left);return u.reverse(),u},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(u,f){this.grammar=u,this.index=f,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(u){for(var f=this.states,d=this.wants,h=this.completed,g=0;g<f.length;g++){var x=f[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var v=x.wantedBy,w=v.length;w--;){var N=v[w];this.complete(N,x)}if(x.reference===this.index){var A=x.rule.name;(this.completed[A]=this.completed[A]||[]).push(x)}}}else{var A=x.rule.symbols[x.dot];if(typeof A!="string"){this.scannable.push(x);continue}if(d[A]){if(d[A].push(x),h.hasOwnProperty(A))for(var U=h[A],w=0;w<U.length;w++){var Z=U[w];this.complete(x,Z)}}else d[A]=[x],this.predict(A)}}},r.prototype.predict=function(u){for(var f=this.grammar.byName[u]||[],d=0;d<f.length;d++){var h=f[d],g=this.wants[u],x=new e(h,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(u,f){var d=u.nextState(f);this.states.push(d)};function n(u,f){this.rules=u,this.start=f||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(h){d.hasOwnProperty(h.name)||(d[h.name]=[]),d[h.name].push(h)})}n.fromCompiled=function(h,f){var d=h.Lexer;h.ParserStart&&(f=h.ParserStart,h=h.ParserRules);var h=h.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(h,f);return g.lexer=d,g};function i(){this.reset("")}i.prototype.reset=function(u,f){this.buffer=u,this.index=0,this.line=f?f.line:1,this.lastLineBreak=f?-f.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var u=this.buffer[this.index++];return u===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:u}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(u,f){var d=this.buffer;if(typeof d=="string"){var h=d.split(`
`).slice(Math.max(0,this.line-5),this.line),g=d.indexOf(`
`,this.index);g===-1&&(g=d.length);var x=this.index-this.lastLineBreak,v=String(this.line).length;return f+=" at line "+this.line+" col "+x+`:

`,f+=h.map(function(N,A){return w(this.line-h.length+A+1,v)+" "+N},this).join(`
`),f+=`
`+w("",v+x)+`^
`,f}else return f+" at index "+(this.index-1);function w(N,A){var U=String(N);return Array(A-U.length+1).join(" ")+U}};function o(u,f,d){if(u instanceof n)var h=u,d=f;else var h=n.fromCompiled(u,f);this.grammar=h,this.options={keepHistory:!1,lexer:h.lexer||new i};for(var g in d||{})this.options[g]=d[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(h,0),v=this.table=[x];x.wants[h.start]=[],x.predict(h.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(u){var f=this.lexer;f.reset(u,this.lexerState);for(var d;;){try{if(d=f.next(),!d)break}catch(de){var v=new r(this.grammar,this.current+1);this.table.push(v);var h=new Error(this.reportLexerError(de));throw h.offset=this.current,h.token=de.token,h}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,v=new r(this.grammar,x);this.table.push(v);for(var w=d.text!==void 0?d.text:d.value,N=f.constructor===i?d.value:f.transform?.(d)??d,A=g.scannable,U=A.length;U--;){var Z=A[U],ne=Z.rule.symbols[Z.dot];if(ne.test?ne.test(N):ne.type?ne.type===d.type:ne.literal===w){var he=Z.nextState({data:N,token:d,isToken:!0,reference:x-1});v.states.push(he)}}if(v.process(),v.states.length===0){var h=new Error(this.reportError(d));throw h.offset=this.current,h.token=d,h}this.options.keepHistory&&(g.lexerState=f.save()),this.current++}return g&&(this.lexerState=f.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(u){var f,d,h=u.token;return h?(f="input "+JSON.stringify(h.text[0])+" (lexer error)",d=this.lexer.formatError(h,"Syntax error")):(f="input (lexer error)",d=u.message),this.reportErrorCommon(d,f)},o.prototype.reportError=function(u){var f=(u.type?u.type+" token: ":"")+JSON.stringify(u.value!==void 0?u.value:u),d=this.lexer.formatError(u,"Syntax error");return this.reportErrorCommon(d,f)},o.prototype.reportErrorCommon=function(u,f){var d=[];d.push(u);var h=this.table.length-2,g=this.table[h],x=g.states.filter(function(w){var N=w.rule.symbols[w.dot];return N&&typeof N!="string"});if(x.length===0)d.push("Unexpected "+f+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,d);else{d.push("Unexpected "+f+`. Instead, I was expecting to see one of the following:
`);var v=x.map(function(w){return this.buildFirstStateStack(w,[])||[w]},this);v.forEach(function(w){var N=w[0],A=N.rule.symbols[N.dot],U=this.getSymbolDisplay(A);d.push("A "+U+" based on:"),this.displayStateStack(w,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(u,f){for(var d,h=0,g=0;g<u.length;g++){var x=u[g],v=x.rule.toString(x.dot);v===d?h++:(h>0&&f.push("    ^ "+h+" more lines identical to this"),h=0,f.push("    "+v)),d=v}},o.prototype.getSymbolDisplay=function(u){return s(u)},o.prototype.buildFirstStateStack=function(u,f){if(f.indexOf(u)!==-1)return null;if(u.wantedBy.length===0)return[u];var d=u.wantedBy[0],h=[u].concat(f),g=this.buildFirstStateStack(d,h);return g===null?null:[u].concat(g)},o.prototype.save=function(){var u=this.table[this.current];return u.lexerState=this.lexerState,u},o.prototype.restore=function(u){var f=u.index;this.current=f,this.table[f]=u,this.table.splice(f+1),this.lexerState=u.lexerState,this.results=this.finish()},o.prototype.rewind=function(u){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[u])},o.prototype.finish=function(){var u=[],f=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(h){h.rule.name===f&&h.dot===h.rule.symbols.length&&h.reference===0&&h.data!==o.fail&&u.push(h)}),u.map(function(h){return h.data})};function s(u){var f=typeof u;if(f==="string")return u;if(f==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return"character matching "+u;if(u.type)return u.type+" token";if(u.test)return"token matching "+String(u.test);throw new Error("Unknown symbol type: "+u)}}function l(u){var f=typeof u;if(f==="string")return u;if(f==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return u.toString();if(u.type)return"%"+u.type;if(u.test)return"<"+String(u.test)+">";throw new Error("Unknown symbol type: "+u)}}return{Parser:o,Grammar:n,Rule:t}})});var bM=ot((vM,jf)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof jf=="object"&&jf.exports?jf.exports=e():t.moo=e()})(vM,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(O){return O&&e.call(O)==="[object RegExp]"}function i(O){return O&&typeof O=="object"&&!n(O)&&!Array.isArray(O)}function o(O){return O.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(O){var C=new RegExp("|"+O);return C.exec("").length-1}function l(O){return"("+O+")"}function u(O){if(!O.length)return"(?!)";var C=O.map(function(D){return"(?:"+D+")"}).join("|");return"(?:"+C+")"}function f(O){if(typeof O=="string")return"(?:"+o(O)+")";if(n(O)){if(O.ignoreCase)throw new Error("RegExp /i flag not allowed");if(O.global)throw new Error("RegExp /g flag is implied");if(O.sticky)throw new Error("RegExp /y flag is implied");if(O.multiline)throw new Error("RegExp /m flag is implied");return O.source}else throw new Error("Not a pattern: "+O)}function d(O,C){return O.length>C?O:Array(C-O.length+1).join(" ")+O}function h(O,C){for(var D=O.length,$=0;;){var q=O.lastIndexOf(`
`,D-1);if(q===-1||($++,D=q,$===C)||D===0)break}var K=$<C?0:D+1;return O.substring(K).split(`
`)}function g(O){for(var C=Object.getOwnPropertyNames(O),D=[],$=0;$<C.length;$++){var q=C[$],K=O[q],Q=[].concat(K);if(q==="include"){for(var te=0;te<Q.length;te++)D.push({include:Q[te]});continue}var me=[];Q.forEach(function(re){i(re)?(me.length&&D.push(v(q,me)),D.push(v(q,re)),me=[]):me.push(re)}),me.length&&D.push(v(q,me))}return D}function x(O){for(var C=[],D=0;D<O.length;D++){var $=O[D];if($.include){for(var q=[].concat($.include),K=0;K<q.length;K++)C.push({include:q[K]});continue}if(!$.type)throw new Error("Rule has no type: "+JSON.stringify($));C.push(v($.type,$))}return C}function v(O,C){if(i(C)||(C={match:C}),C.include)throw new Error("Matching rules cannot also include states");var D={defaultType:O,lineBreaks:!!C.error||!!C.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var $ in C)t.call(C,$)&&(D[$]=C[$]);if(typeof D.type=="string"&&O!==D.type)throw new Error("Type transform cannot be a string (type '"+D.type+"' for token '"+O+"')");var q=D.match;return D.match=Array.isArray(q)?q:q?[q]:[],D.match.sort(function(K,Q){return n(K)&&n(Q)?0:n(Q)?-1:n(K)?1:Q.length-K.length}),D}function w(O){return Array.isArray(O)?x(O):g(O)}var N=v("error",{lineBreaks:!0,shouldThrow:!0});function A(O,C){for(var D=null,$=Object.create(null),q=!0,K=null,Q=[],te=[],me=0;me<O.length;me++)O[me].fallback&&(q=!1);for(var me=0;me<O.length;me++){var re=O[me];if(re.include)throw new Error("Inheritance is not allowed in stateless lexers");if(re.error||re.fallback){if(D)throw!re.fallback==!D.fallback?new Error("Multiple "+(re.fallback?"fallback":"error")+" rules not allowed (for token '"+re.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+re.defaultType+"')");D=re}var Re=re.match.slice();if(q)for(;Re.length&&typeof Re[0]=="string"&&Re[0].length===1;){var or=Re.shift();$[or.charCodeAt(0)]=re}if(re.pop||re.push||re.next){if(!C)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+re.defaultType+"')");if(re.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+re.defaultType+"')")}if(Re.length!==0){q=!1,Q.push(re);for(var ti=0;ti<Re.length;ti++){var ar=Re[ti];if(n(ar)){if(K===null)K=ar.unicode;else if(K!==ar.unicode&&re.fallback===!1)throw new Error("If one rule is /u then all must be")}}var dn=u(Re.map(f)),wr=new RegExp(dn);if(wr.test(""))throw new Error("RegExp matches empty string: "+wr);var mn=s(dn);if(mn>0)throw new Error("RegExp has capture groups: "+wr+`
Use (?: \u2026 ) instead`);if(!re.lineBreaks&&wr.test(`
`))throw new Error("Rule should declare lineBreaks: "+wr);te.push(l(dn))}}var Hr=D&&D.fallback,vo=r&&!Hr?"ym":"gm",ri=r||Hr?"":"|";K===!0&&(vo+="u");var da=new RegExp(u(te)+ri,vo);return{regexp:da,groups:Q,fast:$,error:D||N}}function U(O){var C=A(w(O));return new de({start:C},"start")}function Z(O,C,D){var $=O&&(O.push||O.next);if($&&!D[$])throw new Error("Missing state '"+$+"' (in token '"+O.defaultType+"' of state '"+C+"')");if(O&&O.pop&&+O.pop!=1)throw new Error("pop must be 1 (in token '"+O.defaultType+"' of state '"+C+"')")}function ne(O,C){var D=O.$all?w(O.$all):[];delete O.$all;var $=Object.getOwnPropertyNames(O);C||(C=$[0]);for(var q=Object.create(null),K=0;K<$.length;K++){var Q=$[K];q[Q]=w(O[Q]).concat(D)}for(var K=0;K<$.length;K++)for(var Q=$[K],te=q[Q],me=Object.create(null),re=0;re<te.length;re++){var Re=te[re];if(Re.include){var or=[re,1];if(Re.include!==Q&&!me[Re.include]){me[Re.include]=!0;var ti=q[Re.include];if(!ti)throw new Error("Cannot include nonexistent state '"+Re.include+"' (in state '"+Q+"')");for(var ar=0;ar<ti.length;ar++){var dn=ti[ar];te.indexOf(dn)===-1&&or.push(dn)}}te.splice.apply(te,or),re--}}for(var wr=Object.create(null),K=0;K<$.length;K++){var Q=$[K];wr[Q]=A(q[Q],!0)}for(var K=0;K<$.length;K++){for(var mn=$[K],Hr=wr[mn],vo=Hr.groups,re=0;re<vo.length;re++)Z(vo[re],mn,wr);for(var ri=Object.getOwnPropertyNames(Hr.fast),re=0;re<ri.length;re++)Z(Hr.fast[ri[re]],mn,wr)}return new de(wr,C)}function he(O){for(var C=typeof Map<"u",D=C?new Map:Object.create(null),$=Object.getOwnPropertyNames(O),q=0;q<$.length;q++){var K=$[q],Q=O[K],te=Array.isArray(Q)?Q:[Q];te.forEach(function(me){if(typeof me!="string")throw new Error("keyword must be string (in keyword '"+K+"')");C?D.set(me,K):D[me]=K})}return function(me){return C?D.get(me):D[me]}}var de=function(O,C){this.startState=C,this.states=O,this.buffer="",this.stack=[],this.reset()};de.prototype.reset=function(O,C){return this.buffer=O||"",this.index=0,this.line=C?C.line:1,this.col=C?C.col:1,this.queuedToken=C?C.queuedToken:null,this.queuedText=C?C.queuedText:"",this.queuedThrow=C?C.queuedThrow:null,this.setState(C?C.state:this.startState),this.stack=C&&C.stack?C.stack.slice():[],this},de.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},de.prototype.setState=function(O){if(!(!O||this.state===O)){this.state=O;var C=this.states[O];this.groups=C.groups,this.error=C.error,this.re=C.regexp,this.fast=C.fast}},de.prototype.popState=function(){this.setState(this.stack.pop())},de.prototype.pushState=function(O){this.stack.push(this.state),this.setState(O)};var dt=r?function(O,C){return O.exec(C)}:function(O,C){var D=O.exec(C);return D[0].length===0?null:D};de.prototype._getGroup=function(O){for(var C=this.groups.length,D=0;D<C;D++)if(O[D+1]!==void 0)return this.groups[D];throw new Error("Cannot find token type for matched text")};function At(){return this.value}if(de.prototype.next=function(){var O=this.index;if(this.queuedGroup){var C=this._token(this.queuedGroup,this.queuedText,O);return this.queuedGroup=null,this.queuedText="",C}var D=this.buffer;if(O!==D.length){var Q=this.fast[D.charCodeAt(O)];if(Q)return this._token(Q,D.charAt(O),O);var $=this.re;$.lastIndex=O;var q=dt($,D),K=this.error;if(q==null)return this._token(K,D.slice(O,D.length),O);var Q=this._getGroup(q),te=q[0];return K.fallback&&q.index!==O?(this.queuedGroup=Q,this.queuedText=te,this._token(K,D.slice(O,q.index),O)):this._token(Q,te,O)}},de.prototype._token=function(O,C,D){var $=0;if(O.lineBreaks){var q=/\n/g,K=1;if(C===`
`)$=1;else for(;q.exec(C);)$++,K=q.lastIndex}var Q={type:typeof O.type=="function"&&O.type(C)||O.defaultType,value:typeof O.value=="function"?O.value(C):C,text:C,toString:At,offset:D,lineBreaks:$,line:this.line,col:this.col},te=C.length;if(this.index+=te,this.line+=$,$!==0?this.col=te-K+1:this.col+=te,O.shouldThrow){var me=new Error(this.formatError(Q,"invalid syntax"));throw me}return O.pop?this.popState():O.push?this.pushState(O.push):O.next&&this.setState(O.next),Q},typeof Symbol<"u"&&Symbol.iterator){var nt=function(O){this.lexer=O};nt.prototype.next=function(){var O=this.lexer.next();return{value:O,done:!O}},nt.prototype[Symbol.iterator]=function(){return this},de.prototype[Symbol.iterator]=function(){return new nt(this)}}return de.prototype.formatError=function(O,C){if(O==null)var D=this.buffer.slice(this.index),O={text:D,offset:this.index,lineBreaks:D.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var $=2,q=Math.max(O.line-$,1),K=O.line+$,Q=String(K).length,te=h(this.buffer,this.line-O.line+$+1).slice(0,5),me=[];me.push(C+" at line "+O.line+" col "+O.col+":"),me.push("");for(var re=0;re<te.length;re++){var Re=te[re],or=q+re;me.push(d(String(or),Q)+"  "+Re),or===O.line&&me.push(d("",Q+O.col+1)+"^")}return me.join(`
`)},de.prototype.clone=function(){return new de(this.states,this.state)},de.prototype.has=function(O){return!0},{compile:U,states:ne,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:he}})});var cl=ot((zn,dP)=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});function En(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var i5=typeof process=="object"&&process.env.NODE_ENV==="production";function nn(t,e){if(!t)throw i5?new Error("Invariant failed"):new Error(e())}zn.invariant=nn;var ZT=Object.prototype.hasOwnProperty,o5=Array.prototype.splice,a5=Object.prototype.toString;function qo(t){return a5.call(t).slice(8,-1)}var bd=Object.assign||function(t,e){return YT(e).forEach(function(r){ZT.call(e,r)&&(t[r]=e[r])}),t},YT=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function oo(t){return Array.isArray(t)?bd(t.constructor(t.length),t):qo(t)==="Map"?new Map(t):qo(t)==="Set"?new Set(t):t&&typeof t=="object"?bd(Object.create(Object.getPrototypeOf(t)),t):t}var pP=function(){function t(){this.commands=bd({},s5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||nn(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),nn(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return YT(i).forEach(function(s){if(ZT.call(n.commands,s)){var l=e===o;o=n.commands[s](i[s],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var u=qo(e)==="Map"?n.update(e.get(s),i[s]):n.update(e[s],i[s]),f=qo(o)==="Map"?o.get(s):o[s];(!n.isEquals(u,f)||typeof u>"u"&&!ZT.call(e,s))&&(o===e&&(o=oo(e)),qo(o)==="Map"?o.set(s,u):o[s]=u)}}),o},t}();zn.Context=pP;var s5={$push:function(t,e,r){return lP(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return lP(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return c5(e,r),t.forEach(function(i){fP(i),e===n&&i.length&&(e=oo(n)),o5.apply(e,i)}),e},$set:function(t,e,r){return u5(r),t},$toggle:function(t,e){sl(t,"$toggle");var r=t.length?oo(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return sl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=oo(n)),delete e[i])}),e},$add:function(t,e,r,n){return uP(e,"$add"),sl(t,"$add"),qo(e)==="Map"?t.forEach(function(i){var o=i[0],s=i[1];e===n&&e.get(o)!==s&&(e=oo(n)),e.set(o,s)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=oo(n)),e.add(i)}),e},$remove:function(t,e,r,n){return uP(e,"$remove"),sl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=oo(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return p5(e,t),YT(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=oo(n)),e[i]=t[i])}),e},$apply:function(t,e){return l5(t),t(e)}},XT=new pP;zn.isEquals=XT.update.isEquals;zn.extend=XT.extend;zn.default=XT.update;zn.default.default=dP.exports=bd(zn.default,zn);function lP(t,e,r){nn(Array.isArray(t),function(){return"update(): expected target of "+En(r)+" to be an array; got "+En(t)+"."}),sl(e[r],r)}function sl(t,e){nn(Array.isArray(t),function(){return"update(): expected spec of "+En(e)+" to be an array; got "+En(t)+". Did you forget to wrap your parameter in an array?"})}function c5(t,e){nn(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+En(t)}),fP(e.$splice)}function fP(t){nn(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+En(t)+". Did you forget to wrap your parameters in an array?"})}function l5(t){nn(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+En(t)+"."})}function u5(t){nn(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function p5(t,e){nn(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+En(e)}),nn(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+En(t)})}function uP(t,e){var r=qo(t);nn(r==="Map"||r==="Set",function(){return"update(): "+En(e)+" expects a target of type Set or Map; got "+En(r)})}});var nv=ot(($s,Kl)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",f=1,d=2,h=4,g=1,x=2,v=1,w=2,N=4,A=8,U=16,Z=32,ne=64,he=128,de=256,dt=512,At=30,nt="...",O=800,C=16,D=1,$=2,q=3,K=1/0,Q=9007199254740991,te=17976931348623157e292,me=NaN,re=4294967295,Re=re-1,or=re>>>1,ti=[["ary",he],["bind",v],["bindKey",w],["curry",A],["curryRight",U],["flip",dt],["partial",Z],["partialRight",ne],["rearg",de]],ar="[object Arguments]",dn="[object Array]",wr="[object AsyncFunction]",mn="[object Boolean]",Hr="[object Date]",vo="[object DOMException]",ri="[object Error]",da="[object Function]",Rb="[object GeneratorFunction]",hn="[object Map]",ic="[object Number]",vF="[object Null]",ni="[object Object]",kb="[object Promise]",bF="[object Proxy]",oc="[object RegExp]",gn="[object Set]",ac="[object String]",_u="[object Symbol]",wF="[object Undefined]",sc="[object WeakMap]",_F="[object WeakSet]",cc="[object ArrayBuffer]",ma="[object DataView]",ry="[object Float32Array]",ny="[object Float64Array]",iy="[object Int8Array]",oy="[object Int16Array]",ay="[object Int32Array]",sy="[object Uint8Array]",cy="[object Uint8ClampedArray]",ly="[object Uint16Array]",uy="[object Uint32Array]",EF=/\b__p \+= '';/g,RF=/\b(__p \+=) '' \+/g,kF=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mb=/&(?:amp|lt|gt|quot|#39);/g,Pb=/[&<>"']/g,MF=RegExp(Mb.source),PF=RegExp(Pb.source),AF=/<%-([\s\S]+?)%>/g,DF=/<%([\s\S]+?)%>/g,Ab=/<%=([\s\S]+?)%>/g,IF=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,FF=/^\w*$/,CF=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,py=/[\\^$.*+?()[\]{}|]/g,NF=RegExp(py.source),fy=/^\s+/,OF=/\s/,LF=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,UF=/\{\n\/\* \[wrapped with (.+)\] \*/,VF=/,? & /,BF=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,WF=/[()=,{}\[\]\/\s]/,HF=/\\(\\)?/g,$F=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Db=/\w*$/,jF=/^[-+]0x[0-9a-f]+$/i,qF=/^0b[01]+$/i,zF=/^\[object .+?Constructor\]$/,GF=/^0o[0-7]+$/i,KF=/^(?:0|[1-9]\d*)$/,QF=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Eu=/($^)/,ZF=/['\n\r\u2028\u2029\\]/g,Ru="\\ud800-\\udfff",YF="\\u0300-\\u036f",XF="\\ufe20-\\ufe2f",JF="\\u20d0-\\u20ff",Ib=YF+XF+JF,Fb="\\u2700-\\u27bf",Cb="a-z\\xdf-\\xf6\\xf8-\\xff",eC="\\xac\\xb1\\xd7\\xf7",tC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rC="\\u2000-\\u206f",nC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Nb="A-Z\\xc0-\\xd6\\xd8-\\xde",Ob="\\ufe0e\\ufe0f",Lb=eC+tC+rC+nC,dy="['\u2019]",iC="["+Ru+"]",Ub="["+Lb+"]",ku="["+Ib+"]",Vb="\\d+",oC="["+Fb+"]",Bb="["+Cb+"]",Wb="[^"+Ru+Lb+Vb+Fb+Cb+Nb+"]",my="\\ud83c[\\udffb-\\udfff]",aC="(?:"+ku+"|"+my+")",Hb="[^"+Ru+"]",hy="(?:\\ud83c[\\udde6-\\uddff]){2}",gy="[\\ud800-\\udbff][\\udc00-\\udfff]",ha="["+Nb+"]",$b="\\u200d",jb="(?:"+Bb+"|"+Wb+")",sC="(?:"+ha+"|"+Wb+")",qb="(?:"+dy+"(?:d|ll|m|re|s|t|ve))?",zb="(?:"+dy+"(?:D|LL|M|RE|S|T|VE))?",Gb=aC+"?",Kb="["+Ob+"]?",cC="(?:"+$b+"(?:"+[Hb,hy,gy].join("|")+")"+Kb+Gb+")*",lC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",uC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qb=Kb+Gb+cC,pC="(?:"+[oC,hy,gy].join("|")+")"+Qb,fC="(?:"+[Hb+ku+"?",ku,hy,gy,iC].join("|")+")",dC=RegExp(dy,"g"),mC=RegExp(ku,"g"),yy=RegExp(my+"(?="+my+")|"+fC+Qb,"g"),hC=RegExp([ha+"?"+Bb+"+"+qb+"(?="+[Ub,ha,"$"].join("|")+")",sC+"+"+zb+"(?="+[Ub,ha+jb,"$"].join("|")+")",ha+"?"+jb+"+"+qb,ha+"+"+zb,uC,lC,Vb,pC].join("|"),"g"),gC=RegExp("["+$b+Ru+Ib+Ob+"]"),yC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,xC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],TC=-1,Ze={};Ze[ry]=Ze[ny]=Ze[iy]=Ze[oy]=Ze[ay]=Ze[sy]=Ze[cy]=Ze[ly]=Ze[uy]=!0,Ze[ar]=Ze[dn]=Ze[cc]=Ze[mn]=Ze[ma]=Ze[Hr]=Ze[ri]=Ze[da]=Ze[hn]=Ze[ic]=Ze[ni]=Ze[oc]=Ze[gn]=Ze[ac]=Ze[sc]=!1;var Ke={};Ke[ar]=Ke[dn]=Ke[cc]=Ke[ma]=Ke[mn]=Ke[Hr]=Ke[ry]=Ke[ny]=Ke[iy]=Ke[oy]=Ke[ay]=Ke[hn]=Ke[ic]=Ke[ni]=Ke[oc]=Ke[gn]=Ke[ac]=Ke[_u]=Ke[sy]=Ke[cy]=Ke[ly]=Ke[uy]=!0,Ke[ri]=Ke[da]=Ke[sc]=!1;var SC={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},vC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},wC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_C=parseFloat,EC=parseInt,Zb=typeof global=="object"&&global&&global.Object===Object&&global,RC=typeof self=="object"&&self&&self.Object===Object&&self,vt=Zb||RC||Function("return this")(),xy=typeof $s=="object"&&$s&&!$s.nodeType&&$s,bo=xy&&typeof Kl=="object"&&Kl&&!Kl.nodeType&&Kl,Yb=bo&&bo.exports===xy,Ty=Yb&&Zb.process,$r=function(){try{var k=bo&&bo.require&&bo.require("util").types;return k||Ty&&Ty.binding&&Ty.binding("util")}catch{}}(),Xb=$r&&$r.isArrayBuffer,Jb=$r&&$r.isDate,ew=$r&&$r.isMap,tw=$r&&$r.isRegExp,rw=$r&&$r.isSet,nw=$r&&$r.isTypedArray;function _r(k,V,L){switch(L.length){case 0:return k.call(V);case 1:return k.call(V,L[0]);case 2:return k.call(V,L[0],L[1]);case 3:return k.call(V,L[0],L[1],L[2])}return k.apply(V,L)}function kC(k,V,L,J){for(var ge=-1,Oe=k==null?0:k.length;++ge<Oe;){var gt=k[ge];V(J,gt,L(gt),k)}return J}function jr(k,V){for(var L=-1,J=k==null?0:k.length;++L<J&&V(k[L],L,k)!==!1;);return k}function MC(k,V){for(var L=k==null?0:k.length;L--&&V(k[L],L,k)!==!1;);return k}function iw(k,V){for(var L=-1,J=k==null?0:k.length;++L<J;)if(!V(k[L],L,k))return!1;return!0}function Ii(k,V){for(var L=-1,J=k==null?0:k.length,ge=0,Oe=[];++L<J;){var gt=k[L];V(gt,L,k)&&(Oe[ge++]=gt)}return Oe}function Mu(k,V){var L=k==null?0:k.length;return!!L&&ga(k,V,0)>-1}function Sy(k,V,L){for(var J=-1,ge=k==null?0:k.length;++J<ge;)if(L(V,k[J]))return!0;return!1}function Xe(k,V){for(var L=-1,J=k==null?0:k.length,ge=Array(J);++L<J;)ge[L]=V(k[L],L,k);return ge}function Fi(k,V){for(var L=-1,J=V.length,ge=k.length;++L<J;)k[ge+L]=V[L];return k}function vy(k,V,L,J){var ge=-1,Oe=k==null?0:k.length;for(J&&Oe&&(L=k[++ge]);++ge<Oe;)L=V(L,k[ge],ge,k);return L}function PC(k,V,L,J){var ge=k==null?0:k.length;for(J&&ge&&(L=k[--ge]);ge--;)L=V(L,k[ge],ge,k);return L}function by(k,V){for(var L=-1,J=k==null?0:k.length;++L<J;)if(V(k[L],L,k))return!0;return!1}var AC=wy("length");function DC(k){return k.split("")}function IC(k){return k.match(BF)||[]}function ow(k,V,L){var J;return L(k,function(ge,Oe,gt){if(V(ge,Oe,gt))return J=Oe,!1}),J}function Pu(k,V,L,J){for(var ge=k.length,Oe=L+(J?1:-1);J?Oe--:++Oe<ge;)if(V(k[Oe],Oe,k))return Oe;return-1}function ga(k,V,L){return V===V?jC(k,V,L):Pu(k,aw,L)}function FC(k,V,L,J){for(var ge=L-1,Oe=k.length;++ge<Oe;)if(J(k[ge],V))return ge;return-1}function aw(k){return k!==k}function sw(k,V){var L=k==null?0:k.length;return L?Ey(k,V)/L:me}function wy(k){return function(V){return V==null?t:V[k]}}function _y(k){return function(V){return k==null?t:k[V]}}function cw(k,V,L,J,ge){return ge(k,function(Oe,gt,ze){L=J?(J=!1,Oe):V(L,Oe,gt,ze)}),L}function CC(k,V){var L=k.length;for(k.sort(V);L--;)k[L]=k[L].value;return k}function Ey(k,V){for(var L,J=-1,ge=k.length;++J<ge;){var Oe=V(k[J]);Oe!==t&&(L=L===t?Oe:L+Oe)}return L}function Ry(k,V){for(var L=-1,J=Array(k);++L<k;)J[L]=V(L);return J}function NC(k,V){return Xe(V,function(L){return[L,k[L]]})}function lw(k){return k&&k.slice(0,dw(k)+1).replace(fy,"")}function Er(k){return function(V){return k(V)}}function ky(k,V){return Xe(V,function(L){return k[L]})}function lc(k,V){return k.has(V)}function uw(k,V){for(var L=-1,J=k.length;++L<J&&ga(V,k[L],0)>-1;);return L}function pw(k,V){for(var L=k.length;L--&&ga(V,k[L],0)>-1;);return L}function OC(k,V){for(var L=k.length,J=0;L--;)k[L]===V&&++J;return J}var LC=_y(SC),UC=_y(vC);function VC(k){return"\\"+wC[k]}function BC(k,V){return k==null?t:k[V]}function ya(k){return gC.test(k)}function WC(k){return yC.test(k)}function HC(k){for(var V,L=[];!(V=k.next()).done;)L.push(V.value);return L}function My(k){var V=-1,L=Array(k.size);return k.forEach(function(J,ge){L[++V]=[ge,J]}),L}function fw(k,V){return function(L){return k(V(L))}}function Ci(k,V){for(var L=-1,J=k.length,ge=0,Oe=[];++L<J;){var gt=k[L];(gt===V||gt===u)&&(k[L]=u,Oe[ge++]=L)}return Oe}function Au(k){var V=-1,L=Array(k.size);return k.forEach(function(J){L[++V]=J}),L}function $C(k){var V=-1,L=Array(k.size);return k.forEach(function(J){L[++V]=[J,J]}),L}function jC(k,V,L){for(var J=L-1,ge=k.length;++J<ge;)if(k[J]===V)return J;return-1}function qC(k,V,L){for(var J=L+1;J--;)if(k[J]===V)return J;return J}function xa(k){return ya(k)?GC(k):AC(k)}function yn(k){return ya(k)?KC(k):DC(k)}function dw(k){for(var V=k.length;V--&&OF.test(k.charAt(V)););return V}var zC=_y(bC);function GC(k){for(var V=yy.lastIndex=0;yy.test(k);)++V;return V}function KC(k){return k.match(yy)||[]}function QC(k){return k.match(hC)||[]}var ZC=function k(V){V=V==null?vt:Ni.defaults(vt.Object(),V,Ni.pick(vt,xC));var L=V.Array,J=V.Date,ge=V.Error,Oe=V.Function,gt=V.Math,ze=V.Object,Py=V.RegExp,YC=V.String,qr=V.TypeError,Du=L.prototype,XC=Oe.prototype,Ta=ze.prototype,Iu=V["__core-js_shared__"],Fu=XC.toString,$e=Ta.hasOwnProperty,JC=0,mw=function(){var a=/[^.]+$/.exec(Iu&&Iu.keys&&Iu.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Cu=Ta.toString,eN=Fu.call(ze),tN=vt._,rN=Py("^"+Fu.call($e).replace(py,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nu=Yb?V.Buffer:t,Oi=V.Symbol,Ou=V.Uint8Array,hw=Nu?Nu.allocUnsafe:t,Lu=fw(ze.getPrototypeOf,ze),gw=ze.create,yw=Ta.propertyIsEnumerable,Uu=Du.splice,xw=Oi?Oi.isConcatSpreadable:t,uc=Oi?Oi.iterator:t,wo=Oi?Oi.toStringTag:t,Vu=function(){try{var a=Mo(ze,"defineProperty");return a({},"",{}),a}catch{}}(),nN=V.clearTimeout!==vt.clearTimeout&&V.clearTimeout,iN=J&&J.now!==vt.Date.now&&J.now,oN=V.setTimeout!==vt.setTimeout&&V.setTimeout,Bu=gt.ceil,Wu=gt.floor,Ay=ze.getOwnPropertySymbols,aN=Nu?Nu.isBuffer:t,Tw=V.isFinite,sN=Du.join,cN=fw(ze.keys,ze),yt=gt.max,Lt=gt.min,lN=J.now,uN=V.parseInt,Sw=gt.random,pN=Du.reverse,Dy=Mo(V,"DataView"),pc=Mo(V,"Map"),Iy=Mo(V,"Promise"),Sa=Mo(V,"Set"),fc=Mo(V,"WeakMap"),dc=Mo(ze,"create"),Hu=fc&&new fc,va={},fN=Po(Dy),dN=Po(pc),mN=Po(Iy),hN=Po(Sa),gN=Po(fc),$u=Oi?Oi.prototype:t,mc=$u?$u.valueOf:t,vw=$u?$u.toString:t;function T(a){if(it(a)&&!xe(a)&&!(a instanceof Ae)){if(a instanceof zr)return a;if($e.call(a,"__wrapped__"))return b_(a)}return new zr(a)}var ba=function(){function a(){}return function(c){if(!et(c))return{};if(gw)return gw(c);a.prototype=c;var p=new a;return a.prototype=t,p}}();function ju(){}function zr(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:AF,evaluate:DF,interpolate:Ab,variable:"",imports:{_:T}},T.prototype=ju.prototype,T.prototype.constructor=T,zr.prototype=ba(ju.prototype),zr.prototype.constructor=zr;function Ae(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function yN(){var a=new Ae(this.__wrapped__);return a.__actions__=sr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=sr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=sr(this.__views__),a}function xN(){if(this.__filtered__){var a=new Ae(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function TN(){var a=this.__wrapped__.value(),c=this.__dir__,p=xe(a),m=c<0,y=p?a.length:0,S=DO(0,y,this.__views__),E=S.start,R=S.end,P=R-E,B=m?R:E-1,W=this.__iteratees__,j=W.length,Y=0,ie=Lt(P,this.__takeCount__);if(!p||!m&&y==P&&ie==P)return qw(a,this.__actions__);var ue=[];e:for(;P--&&Y<ie;){B+=c;for(var Ee=-1,pe=a[B];++Ee<j;){var Me=W[Ee],Ie=Me.iteratee,Mr=Me.type,Qt=Ie(pe);if(Mr==$)pe=Qt;else if(!Qt){if(Mr==D)continue e;break e}}ue[Y++]=pe}return ue}Ae.prototype=ba(ju.prototype),Ae.prototype.constructor=Ae;function _o(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var m=a[c];this.set(m[0],m[1])}}function SN(){this.__data__=dc?dc(null):{},this.size=0}function vN(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function bN(a){var c=this.__data__;if(dc){var p=c[a];return p===s?t:p}return $e.call(c,a)?c[a]:t}function wN(a){var c=this.__data__;return dc?c[a]!==t:$e.call(c,a)}function _N(a,c){var p=this.__data__;return this.size+=this.has(a)?0:1,p[a]=dc&&c===t?s:c,this}_o.prototype.clear=SN,_o.prototype.delete=vN,_o.prototype.get=bN,_o.prototype.has=wN,_o.prototype.set=_N;function ii(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var m=a[c];this.set(m[0],m[1])}}function EN(){this.__data__=[],this.size=0}function RN(a){var c=this.__data__,p=qu(c,a);if(p<0)return!1;var m=c.length-1;return p==m?c.pop():Uu.call(c,p,1),--this.size,!0}function kN(a){var c=this.__data__,p=qu(c,a);return p<0?t:c[p][1]}function MN(a){return qu(this.__data__,a)>-1}function PN(a,c){var p=this.__data__,m=qu(p,a);return m<0?(++this.size,p.push([a,c])):p[m][1]=c,this}ii.prototype.clear=EN,ii.prototype.delete=RN,ii.prototype.get=kN,ii.prototype.has=MN,ii.prototype.set=PN;function oi(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var m=a[c];this.set(m[0],m[1])}}function AN(){this.size=0,this.__data__={hash:new _o,map:new(pc||ii),string:new _o}}function DN(a){var c=np(this,a).delete(a);return this.size-=c?1:0,c}function IN(a){return np(this,a).get(a)}function FN(a){return np(this,a).has(a)}function CN(a,c){var p=np(this,a),m=p.size;return p.set(a,c),this.size+=p.size==m?0:1,this}oi.prototype.clear=AN,oi.prototype.delete=DN,oi.prototype.get=IN,oi.prototype.has=FN,oi.prototype.set=CN;function Eo(a){var c=-1,p=a==null?0:a.length;for(this.__data__=new oi;++c<p;)this.add(a[c])}function NN(a){return this.__data__.set(a,s),this}function ON(a){return this.__data__.has(a)}Eo.prototype.add=Eo.prototype.push=NN,Eo.prototype.has=ON;function xn(a){var c=this.__data__=new ii(a);this.size=c.size}function LN(){this.__data__=new ii,this.size=0}function UN(a){var c=this.__data__,p=c.delete(a);return this.size=c.size,p}function VN(a){return this.__data__.get(a)}function BN(a){return this.__data__.has(a)}function WN(a,c){var p=this.__data__;if(p instanceof ii){var m=p.__data__;if(!pc||m.length<r-1)return m.push([a,c]),this.size=++p.size,this;p=this.__data__=new oi(m)}return p.set(a,c),this.size=p.size,this}xn.prototype.clear=LN,xn.prototype.delete=UN,xn.prototype.get=VN,xn.prototype.has=BN,xn.prototype.set=WN;function bw(a,c){var p=xe(a),m=!p&&Ao(a),y=!p&&!m&&Wi(a),S=!p&&!m&&!y&&Ra(a),E=p||m||y||S,R=E?Ry(a.length,YC):[],P=R.length;for(var B in a)(c||$e.call(a,B))&&!(E&&(B=="length"||y&&(B=="offset"||B=="parent")||S&&(B=="buffer"||B=="byteLength"||B=="byteOffset")||li(B,P)))&&R.push(B);return R}function ww(a){var c=a.length;return c?a[$y(0,c-1)]:t}function HN(a,c){return ip(sr(a),Ro(c,0,a.length))}function $N(a){return ip(sr(a))}function Fy(a,c,p){(p!==t&&!Tn(a[c],p)||p===t&&!(c in a))&&ai(a,c,p)}function hc(a,c,p){var m=a[c];(!($e.call(a,c)&&Tn(m,p))||p===t&&!(c in a))&&ai(a,c,p)}function qu(a,c){for(var p=a.length;p--;)if(Tn(a[p][0],c))return p;return-1}function jN(a,c,p,m){return Li(a,function(y,S,E){c(m,y,p(y),E)}),m}function _w(a,c){return a&&On(c,bt(c),a)}function qN(a,c){return a&&On(c,lr(c),a)}function ai(a,c,p){c=="__proto__"&&Vu?Vu(a,c,{configurable:!0,enumerable:!0,value:p,writable:!0}):a[c]=p}function Cy(a,c){for(var p=-1,m=c.length,y=L(m),S=a==null;++p<m;)y[p]=S?t:mx(a,c[p]);return y}function Ro(a,c,p){return a===a&&(p!==t&&(a=a<=p?a:p),c!==t&&(a=a>=c?a:c)),a}function Gr(a,c,p,m,y,S){var E,R=c&f,P=c&d,B=c&h;if(p&&(E=y?p(a,m,y,S):p(a)),E!==t)return E;if(!et(a))return a;var W=xe(a);if(W){if(E=FO(a),!R)return sr(a,E)}else{var j=Ut(a),Y=j==da||j==Rb;if(Wi(a))return Kw(a,R);if(j==ni||j==ar||Y&&!y){if(E=P||Y?{}:d_(a),!R)return P?bO(a,qN(E,a)):vO(a,_w(E,a))}else{if(!Ke[j])return y?a:{};E=CO(a,j,R)}}S||(S=new xn);var ie=S.get(a);if(ie)return ie;S.set(a,E),H_(a)?a.forEach(function(pe){E.add(Gr(pe,c,p,pe,a,S))}):B_(a)&&a.forEach(function(pe,Me){E.set(Me,Gr(pe,c,p,Me,a,S))});var ue=B?P?ex:Jy:P?lr:bt,Ee=W?t:ue(a);return jr(Ee||a,function(pe,Me){Ee&&(Me=pe,pe=a[Me]),hc(E,Me,Gr(pe,c,p,Me,a,S))}),E}function zN(a){var c=bt(a);return function(p){return Ew(p,a,c)}}function Ew(a,c,p){var m=p.length;if(a==null)return!m;for(a=ze(a);m--;){var y=p[m],S=c[y],E=a[y];if(E===t&&!(y in a)||!S(E))return!1}return!0}function Rw(a,c,p){if(typeof a!="function")throw new qr(i);return bc(function(){a.apply(t,p)},c)}function gc(a,c,p,m){var y=-1,S=Mu,E=!0,R=a.length,P=[],B=c.length;if(!R)return P;p&&(c=Xe(c,Er(p))),m?(S=Sy,E=!1):c.length>=r&&(S=lc,E=!1,c=new Eo(c));e:for(;++y<R;){var W=a[y],j=p==null?W:p(W);if(W=m||W!==0?W:0,E&&j===j){for(var Y=B;Y--;)if(c[Y]===j)continue e;P.push(W)}else S(c,j,m)||P.push(W)}return P}var Li=Jw(Nn),kw=Jw(Oy,!0);function GN(a,c){var p=!0;return Li(a,function(m,y,S){return p=!!c(m,y,S),p}),p}function zu(a,c,p){for(var m=-1,y=a.length;++m<y;){var S=a[m],E=c(S);if(E!=null&&(R===t?E===E&&!kr(E):p(E,R)))var R=E,P=S}return P}function KN(a,c,p,m){var y=a.length;for(p=be(p),p<0&&(p=-p>y?0:y+p),m=m===t||m>y?y:be(m),m<0&&(m+=y),m=p>m?0:j_(m);p<m;)a[p++]=c;return a}function Mw(a,c){var p=[];return Li(a,function(m,y,S){c(m,y,S)&&p.push(m)}),p}function Dt(a,c,p,m,y){var S=-1,E=a.length;for(p||(p=OO),y||(y=[]);++S<E;){var R=a[S];c>0&&p(R)?c>1?Dt(R,c-1,p,m,y):Fi(y,R):m||(y[y.length]=R)}return y}var Ny=e_(),Pw=e_(!0);function Nn(a,c){return a&&Ny(a,c,bt)}function Oy(a,c){return a&&Pw(a,c,bt)}function Gu(a,c){return Ii(c,function(p){return ui(a[p])})}function ko(a,c){c=Vi(c,a);for(var p=0,m=c.length;a!=null&&p<m;)a=a[Ln(c[p++])];return p&&p==m?a:t}function Aw(a,c,p){var m=c(a);return xe(a)?m:Fi(m,p(a))}function Gt(a){return a==null?a===t?wF:vF:wo&&wo in ze(a)?AO(a):$O(a)}function Ly(a,c){return a>c}function QN(a,c){return a!=null&&$e.call(a,c)}function ZN(a,c){return a!=null&&c in ze(a)}function YN(a,c,p){return a>=Lt(c,p)&&a<yt(c,p)}function Uy(a,c,p){for(var m=p?Sy:Mu,y=a[0].length,S=a.length,E=S,R=L(S),P=1/0,B=[];E--;){var W=a[E];E&&c&&(W=Xe(W,Er(c))),P=Lt(W.length,P),R[E]=!p&&(c||y>=120&&W.length>=120)?new Eo(E&&W):t}W=a[0];var j=-1,Y=R[0];e:for(;++j<y&&B.length<P;){var ie=W[j],ue=c?c(ie):ie;if(ie=p||ie!==0?ie:0,!(Y?lc(Y,ue):m(B,ue,p))){for(E=S;--E;){var Ee=R[E];if(!(Ee?lc(Ee,ue):m(a[E],ue,p)))continue e}Y&&Y.push(ue),B.push(ie)}}return B}function XN(a,c,p,m){return Nn(a,function(y,S,E){c(m,p(y),S,E)}),m}function yc(a,c,p){c=Vi(c,a),a=y_(a,c);var m=a==null?a:a[Ln(Qr(c))];return m==null?t:_r(m,a,p)}function Dw(a){return it(a)&&Gt(a)==ar}function JN(a){return it(a)&&Gt(a)==cc}function eO(a){return it(a)&&Gt(a)==Hr}function xc(a,c,p,m,y){return a===c?!0:a==null||c==null||!it(a)&&!it(c)?a!==a&&c!==c:tO(a,c,p,m,xc,y)}function tO(a,c,p,m,y,S){var E=xe(a),R=xe(c),P=E?dn:Ut(a),B=R?dn:Ut(c);P=P==ar?ni:P,B=B==ar?ni:B;var W=P==ni,j=B==ni,Y=P==B;if(Y&&Wi(a)){if(!Wi(c))return!1;E=!0,W=!1}if(Y&&!W)return S||(S=new xn),E||Ra(a)?u_(a,c,p,m,y,S):MO(a,c,P,p,m,y,S);if(!(p&g)){var ie=W&&$e.call(a,"__wrapped__"),ue=j&&$e.call(c,"__wrapped__");if(ie||ue){var Ee=ie?a.value():a,pe=ue?c.value():c;return S||(S=new xn),y(Ee,pe,p,m,S)}}return Y?(S||(S=new xn),PO(a,c,p,m,y,S)):!1}function rO(a){return it(a)&&Ut(a)==hn}function Vy(a,c,p,m){var y=p.length,S=y,E=!m;if(a==null)return!S;for(a=ze(a);y--;){var R=p[y];if(E&&R[2]?R[1]!==a[R[0]]:!(R[0]in a))return!1}for(;++y<S;){R=p[y];var P=R[0],B=a[P],W=R[1];if(E&&R[2]){if(B===t&&!(P in a))return!1}else{var j=new xn;if(m)var Y=m(B,W,P,a,c,j);if(!(Y===t?xc(W,B,g|x,m,j):Y))return!1}}return!0}function Iw(a){if(!et(a)||UO(a))return!1;var c=ui(a)?rN:zF;return c.test(Po(a))}function nO(a){return it(a)&&Gt(a)==oc}function iO(a){return it(a)&&Ut(a)==gn}function oO(a){return it(a)&&up(a.length)&&!!Ze[Gt(a)]}function Fw(a){return typeof a=="function"?a:a==null?ur:typeof a=="object"?xe(a)?Ow(a[0],a[1]):Nw(a):tE(a)}function By(a){if(!vc(a))return cN(a);var c=[];for(var p in ze(a))$e.call(a,p)&&p!="constructor"&&c.push(p);return c}function aO(a){if(!et(a))return HO(a);var c=vc(a),p=[];for(var m in a)m=="constructor"&&(c||!$e.call(a,m))||p.push(m);return p}function Wy(a,c){return a<c}function Cw(a,c){var p=-1,m=cr(a)?L(a.length):[];return Li(a,function(y,S,E){m[++p]=c(y,S,E)}),m}function Nw(a){var c=rx(a);return c.length==1&&c[0][2]?h_(c[0][0],c[0][1]):function(p){return p===a||Vy(p,a,c)}}function Ow(a,c){return ix(a)&&m_(c)?h_(Ln(a),c):function(p){var m=mx(p,a);return m===t&&m===c?hx(p,a):xc(c,m,g|x)}}function Ku(a,c,p,m,y){a!==c&&Ny(c,function(S,E){if(y||(y=new xn),et(S))sO(a,c,E,p,Ku,m,y);else{var R=m?m(ax(a,E),S,E+"",a,c,y):t;R===t&&(R=S),Fy(a,E,R)}},lr)}function sO(a,c,p,m,y,S,E){var R=ax(a,p),P=ax(c,p),B=E.get(P);if(B){Fy(a,p,B);return}var W=S?S(R,P,p+"",a,c,E):t,j=W===t;if(j){var Y=xe(P),ie=!Y&&Wi(P),ue=!Y&&!ie&&Ra(P);W=P,Y||ie||ue?xe(R)?W=R:ct(R)?W=sr(R):ie?(j=!1,W=Kw(P,!0)):ue?(j=!1,W=Qw(P,!0)):W=[]:wc(P)||Ao(P)?(W=R,Ao(R)?W=q_(R):(!et(R)||ui(R))&&(W=d_(P))):j=!1}j&&(E.set(P,W),y(W,P,m,S,E),E.delete(P)),Fy(a,p,W)}function Lw(a,c){var p=a.length;if(p)return c+=c<0?p:0,li(c,p)?a[c]:t}function Uw(a,c,p){c.length?c=Xe(c,function(S){return xe(S)?function(E){return ko(E,S.length===1?S[0]:S)}:S}):c=[ur];var m=-1;c=Xe(c,Er(le()));var y=Cw(a,function(S,E,R){var P=Xe(c,function(B){return B(S)});return{criteria:P,index:++m,value:S}});return CC(y,function(S,E){return SO(S,E,p)})}function cO(a,c){return Vw(a,c,function(p,m){return hx(a,m)})}function Vw(a,c,p){for(var m=-1,y=c.length,S={};++m<y;){var E=c[m],R=ko(a,E);p(R,E)&&Tc(S,Vi(E,a),R)}return S}function lO(a){return function(c){return ko(c,a)}}function Hy(a,c,p,m){var y=m?FC:ga,S=-1,E=c.length,R=a;for(a===c&&(c=sr(c)),p&&(R=Xe(a,Er(p)));++S<E;)for(var P=0,B=c[S],W=p?p(B):B;(P=y(R,W,P,m))>-1;)R!==a&&Uu.call(R,P,1),Uu.call(a,P,1);return a}function Bw(a,c){for(var p=a?c.length:0,m=p-1;p--;){var y=c[p];if(p==m||y!==S){var S=y;li(y)?Uu.call(a,y,1):zy(a,y)}}return a}function $y(a,c){return a+Wu(Sw()*(c-a+1))}function uO(a,c,p,m){for(var y=-1,S=yt(Bu((c-a)/(p||1)),0),E=L(S);S--;)E[m?S:++y]=a,a+=p;return E}function jy(a,c){var p="";if(!a||c<1||c>Q)return p;do c%2&&(p+=a),c=Wu(c/2),c&&(a+=a);while(c);return p}function ke(a,c){return sx(g_(a,c,ur),a+"")}function pO(a){return ww(ka(a))}function fO(a,c){var p=ka(a);return ip(p,Ro(c,0,p.length))}function Tc(a,c,p,m){if(!et(a))return a;c=Vi(c,a);for(var y=-1,S=c.length,E=S-1,R=a;R!=null&&++y<S;){var P=Ln(c[y]),B=p;if(P==="__proto__"||P==="constructor"||P==="prototype")return a;if(y!=E){var W=R[P];B=m?m(W,P,R):t,B===t&&(B=et(W)?W:li(c[y+1])?[]:{})}hc(R,P,B),R=R[P]}return a}var Ww=Hu?function(a,c){return Hu.set(a,c),a}:ur,dO=Vu?function(a,c){return Vu(a,"toString",{configurable:!0,enumerable:!1,value:yx(c),writable:!0})}:ur;function mO(a){return ip(ka(a))}function Kr(a,c,p){var m=-1,y=a.length;c<0&&(c=-c>y?0:y+c),p=p>y?y:p,p<0&&(p+=y),y=c>p?0:p-c>>>0,c>>>=0;for(var S=L(y);++m<y;)S[m]=a[m+c];return S}function hO(a,c){var p;return Li(a,function(m,y,S){return p=c(m,y,S),!p}),!!p}function Qu(a,c,p){var m=0,y=a==null?m:a.length;if(typeof c=="number"&&c===c&&y<=or){for(;m<y;){var S=m+y>>>1,E=a[S];E!==null&&!kr(E)&&(p?E<=c:E<c)?m=S+1:y=S}return y}return qy(a,c,ur,p)}function qy(a,c,p,m){var y=0,S=a==null?0:a.length;if(S===0)return 0;c=p(c);for(var E=c!==c,R=c===null,P=kr(c),B=c===t;y<S;){var W=Wu((y+S)/2),j=p(a[W]),Y=j!==t,ie=j===null,ue=j===j,Ee=kr(j);if(E)var pe=m||ue;else B?pe=ue&&(m||Y):R?pe=ue&&Y&&(m||!ie):P?pe=ue&&Y&&!ie&&(m||!Ee):ie||Ee?pe=!1:pe=m?j<=c:j<c;pe?y=W+1:S=W}return Lt(S,Re)}function Hw(a,c){for(var p=-1,m=a.length,y=0,S=[];++p<m;){var E=a[p],R=c?c(E):E;if(!p||!Tn(R,P)){var P=R;S[y++]=E===0?0:E}}return S}function $w(a){return typeof a=="number"?a:kr(a)?me:+a}function Rr(a){if(typeof a=="string")return a;if(xe(a))return Xe(a,Rr)+"";if(kr(a))return vw?vw.call(a):"";var c=a+"";return c=="0"&&1/a==-K?"-0":c}function Ui(a,c,p){var m=-1,y=Mu,S=a.length,E=!0,R=[],P=R;if(p)E=!1,y=Sy;else if(S>=r){var B=c?null:RO(a);if(B)return Au(B);E=!1,y=lc,P=new Eo}else P=c?[]:R;e:for(;++m<S;){var W=a[m],j=c?c(W):W;if(W=p||W!==0?W:0,E&&j===j){for(var Y=P.length;Y--;)if(P[Y]===j)continue e;c&&P.push(j),R.push(W)}else y(P,j,p)||(P!==R&&P.push(j),R.push(W))}return R}function zy(a,c){return c=Vi(c,a),a=y_(a,c),a==null||delete a[Ln(Qr(c))]}function jw(a,c,p,m){return Tc(a,c,p(ko(a,c)),m)}function Zu(a,c,p,m){for(var y=a.length,S=m?y:-1;(m?S--:++S<y)&&c(a[S],S,a););return p?Kr(a,m?0:S,m?S+1:y):Kr(a,m?S+1:0,m?y:S)}function qw(a,c){var p=a;return p instanceof Ae&&(p=p.value()),vy(c,function(m,y){return y.func.apply(y.thisArg,Fi([m],y.args))},p)}function Gy(a,c,p){var m=a.length;if(m<2)return m?Ui(a[0]):[];for(var y=-1,S=L(m);++y<m;)for(var E=a[y],R=-1;++R<m;)R!=y&&(S[y]=gc(S[y]||E,a[R],c,p));return Ui(Dt(S,1),c,p)}function zw(a,c,p){for(var m=-1,y=a.length,S=c.length,E={};++m<y;){var R=m<S?c[m]:t;p(E,a[m],R)}return E}function Ky(a){return ct(a)?a:[]}function Qy(a){return typeof a=="function"?a:ur}function Vi(a,c){return xe(a)?a:ix(a,c)?[a]:v_(Be(a))}var gO=ke;function Bi(a,c,p){var m=a.length;return p=p===t?m:p,!c&&p>=m?a:Kr(a,c,p)}var Gw=nN||function(a){return vt.clearTimeout(a)};function Kw(a,c){if(c)return a.slice();var p=a.length,m=hw?hw(p):new a.constructor(p);return a.copy(m),m}function Zy(a){var c=new a.constructor(a.byteLength);return new Ou(c).set(new Ou(a)),c}function yO(a,c){var p=c?Zy(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.byteLength)}function xO(a){var c=new a.constructor(a.source,Db.exec(a));return c.lastIndex=a.lastIndex,c}function TO(a){return mc?ze(mc.call(a)):{}}function Qw(a,c){var p=c?Zy(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.length)}function Zw(a,c){if(a!==c){var p=a!==t,m=a===null,y=a===a,S=kr(a),E=c!==t,R=c===null,P=c===c,B=kr(c);if(!R&&!B&&!S&&a>c||S&&E&&P&&!R&&!B||m&&E&&P||!p&&P||!y)return 1;if(!m&&!S&&!B&&a<c||B&&p&&y&&!m&&!S||R&&p&&y||!E&&y||!P)return-1}return 0}function SO(a,c,p){for(var m=-1,y=a.criteria,S=c.criteria,E=y.length,R=p.length;++m<E;){var P=Zw(y[m],S[m]);if(P){if(m>=R)return P;var B=p[m];return P*(B=="desc"?-1:1)}}return a.index-c.index}function Yw(a,c,p,m){for(var y=-1,S=a.length,E=p.length,R=-1,P=c.length,B=yt(S-E,0),W=L(P+B),j=!m;++R<P;)W[R]=c[R];for(;++y<E;)(j||y<S)&&(W[p[y]]=a[y]);for(;B--;)W[R++]=a[y++];return W}function Xw(a,c,p,m){for(var y=-1,S=a.length,E=-1,R=p.length,P=-1,B=c.length,W=yt(S-R,0),j=L(W+B),Y=!m;++y<W;)j[y]=a[y];for(var ie=y;++P<B;)j[ie+P]=c[P];for(;++E<R;)(Y||y<S)&&(j[ie+p[E]]=a[y++]);return j}function sr(a,c){var p=-1,m=a.length;for(c||(c=L(m));++p<m;)c[p]=a[p];return c}function On(a,c,p,m){var y=!p;p||(p={});for(var S=-1,E=c.length;++S<E;){var R=c[S],P=m?m(p[R],a[R],R,p,a):t;P===t&&(P=a[R]),y?ai(p,R,P):hc(p,R,P)}return p}function vO(a,c){return On(a,nx(a),c)}function bO(a,c){return On(a,p_(a),c)}function Yu(a,c){return function(p,m){var y=xe(p)?kC:jN,S=c?c():{};return y(p,a,le(m,2),S)}}function wa(a){return ke(function(c,p){var m=-1,y=p.length,S=y>1?p[y-1]:t,E=y>2?p[2]:t;for(S=a.length>3&&typeof S=="function"?(y--,S):t,E&&Kt(p[0],p[1],E)&&(S=y<3?t:S,y=1),c=ze(c);++m<y;){var R=p[m];R&&a(c,R,m,S)}return c})}function Jw(a,c){return function(p,m){if(p==null)return p;if(!cr(p))return a(p,m);for(var y=p.length,S=c?y:-1,E=ze(p);(c?S--:++S<y)&&m(E[S],S,E)!==!1;);return p}}function e_(a){return function(c,p,m){for(var y=-1,S=ze(c),E=m(c),R=E.length;R--;){var P=E[a?R:++y];if(p(S[P],P,S)===!1)break}return c}}function wO(a,c,p){var m=c&v,y=Sc(a);function S(){var E=this&&this!==vt&&this instanceof S?y:a;return E.apply(m?p:this,arguments)}return S}function t_(a){return function(c){c=Be(c);var p=ya(c)?yn(c):t,m=p?p[0]:c.charAt(0),y=p?Bi(p,1).join(""):c.slice(1);return m[a]()+y}}function _a(a){return function(c){return vy(J_(X_(c).replace(dC,"")),a,"")}}function Sc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var p=ba(a.prototype),m=a.apply(p,c);return et(m)?m:p}}function _O(a,c,p){var m=Sc(a);function y(){for(var S=arguments.length,E=L(S),R=S,P=Ea(y);R--;)E[R]=arguments[R];var B=S<3&&E[0]!==P&&E[S-1]!==P?[]:Ci(E,P);if(S-=B.length,S<p)return a_(a,c,Xu,y.placeholder,t,E,B,t,t,p-S);var W=this&&this!==vt&&this instanceof y?m:a;return _r(W,this,E)}return y}function r_(a){return function(c,p,m){var y=ze(c);if(!cr(c)){var S=le(p,3);c=bt(c),p=function(R){return S(y[R],R,y)}}var E=a(c,p,m);return E>-1?y[S?c[E]:E]:t}}function n_(a){return ci(function(c){var p=c.length,m=p,y=zr.prototype.thru;for(a&&c.reverse();m--;){var S=c[m];if(typeof S!="function")throw new qr(i);if(y&&!E&&rp(S)=="wrapper")var E=new zr([],!0)}for(m=E?m:p;++m<p;){S=c[m];var R=rp(S),P=R=="wrapper"?tx(S):t;P&&ox(P[0])&&P[1]==(he|A|Z|de)&&!P[4].length&&P[9]==1?E=E[rp(P[0])].apply(E,P[3]):E=S.length==1&&ox(S)?E[R]():E.thru(S)}return function(){var B=arguments,W=B[0];if(E&&B.length==1&&xe(W))return E.plant(W).value();for(var j=0,Y=p?c[j].apply(this,B):W;++j<p;)Y=c[j].call(this,Y);return Y}})}function Xu(a,c,p,m,y,S,E,R,P,B){var W=c&he,j=c&v,Y=c&w,ie=c&(A|U),ue=c&dt,Ee=Y?t:Sc(a);function pe(){for(var Me=arguments.length,Ie=L(Me),Mr=Me;Mr--;)Ie[Mr]=arguments[Mr];if(ie)var Qt=Ea(pe),Pr=OC(Ie,Qt);if(m&&(Ie=Yw(Ie,m,y,ie)),S&&(Ie=Xw(Ie,S,E,ie)),Me-=Pr,ie&&Me<B){var lt=Ci(Ie,Qt);return a_(a,c,Xu,pe.placeholder,p,Ie,lt,R,P,B-Me)}var Sn=j?p:this,fi=Y?Sn[a]:a;return Me=Ie.length,R?Ie=jO(Ie,R):ue&&Me>1&&Ie.reverse(),W&&P<Me&&(Ie.length=P),this&&this!==vt&&this instanceof pe&&(fi=Ee||Sc(fi)),fi.apply(Sn,Ie)}return pe}function i_(a,c){return function(p,m){return XN(p,a,c(m),{})}}function Ju(a,c){return function(p,m){var y;if(p===t&&m===t)return c;if(p!==t&&(y=p),m!==t){if(y===t)return m;typeof p=="string"||typeof m=="string"?(p=Rr(p),m=Rr(m)):(p=$w(p),m=$w(m)),y=a(p,m)}return y}}function Yy(a){return ci(function(c){return c=Xe(c,Er(le())),ke(function(p){var m=this;return a(c,function(y){return _r(y,m,p)})})})}function ep(a,c){c=c===t?" ":Rr(c);var p=c.length;if(p<2)return p?jy(c,a):c;var m=jy(c,Bu(a/xa(c)));return ya(c)?Bi(yn(m),0,a).join(""):m.slice(0,a)}function EO(a,c,p,m){var y=c&v,S=Sc(a);function E(){for(var R=-1,P=arguments.length,B=-1,W=m.length,j=L(W+P),Y=this&&this!==vt&&this instanceof E?S:a;++B<W;)j[B]=m[B];for(;P--;)j[B++]=arguments[++R];return _r(Y,y?p:this,j)}return E}function o_(a){return function(c,p,m){return m&&typeof m!="number"&&Kt(c,p,m)&&(p=m=t),c=pi(c),p===t?(p=c,c=0):p=pi(p),m=m===t?c<p?1:-1:pi(m),uO(c,p,m,a)}}function tp(a){return function(c,p){return typeof c=="string"&&typeof p=="string"||(c=Zr(c),p=Zr(p)),a(c,p)}}function a_(a,c,p,m,y,S,E,R,P,B){var W=c&A,j=W?E:t,Y=W?t:E,ie=W?S:t,ue=W?t:S;c|=W?Z:ne,c&=~(W?ne:Z),c&N||(c&=~(v|w));var Ee=[a,c,y,ie,j,ue,Y,R,P,B],pe=p.apply(t,Ee);return ox(a)&&x_(pe,Ee),pe.placeholder=m,T_(pe,a,c)}function Xy(a){var c=gt[a];return function(p,m){if(p=Zr(p),m=m==null?0:Lt(be(m),292),m&&Tw(p)){var y=(Be(p)+"e").split("e"),S=c(y[0]+"e"+(+y[1]+m));return y=(Be(S)+"e").split("e"),+(y[0]+"e"+(+y[1]-m))}return c(p)}}var RO=Sa&&1/Au(new Sa([,-0]))[1]==K?function(a){return new Sa(a)}:Sx;function s_(a){return function(c){var p=Ut(c);return p==hn?My(c):p==gn?$C(c):NC(c,a(c))}}function si(a,c,p,m,y,S,E,R){var P=c&w;if(!P&&typeof a!="function")throw new qr(i);var B=m?m.length:0;if(B||(c&=~(Z|ne),m=y=t),E=E===t?E:yt(be(E),0),R=R===t?R:be(R),B-=y?y.length:0,c&ne){var W=m,j=y;m=y=t}var Y=P?t:tx(a),ie=[a,c,p,m,y,W,j,S,E,R];if(Y&&WO(ie,Y),a=ie[0],c=ie[1],p=ie[2],m=ie[3],y=ie[4],R=ie[9]=ie[9]===t?P?0:a.length:yt(ie[9]-B,0),!R&&c&(A|U)&&(c&=~(A|U)),!c||c==v)var ue=wO(a,c,p);else c==A||c==U?ue=_O(a,c,R):(c==Z||c==(v|Z))&&!y.length?ue=EO(a,c,p,m):ue=Xu.apply(t,ie);var Ee=Y?Ww:x_;return T_(Ee(ue,ie),a,c)}function c_(a,c,p,m){return a===t||Tn(a,Ta[p])&&!$e.call(m,p)?c:a}function l_(a,c,p,m,y,S){return et(a)&&et(c)&&(S.set(c,a),Ku(a,c,t,l_,S),S.delete(c)),a}function kO(a){return wc(a)?t:a}function u_(a,c,p,m,y,S){var E=p&g,R=a.length,P=c.length;if(R!=P&&!(E&&P>R))return!1;var B=S.get(a),W=S.get(c);if(B&&W)return B==c&&W==a;var j=-1,Y=!0,ie=p&x?new Eo:t;for(S.set(a,c),S.set(c,a);++j<R;){var ue=a[j],Ee=c[j];if(m)var pe=E?m(Ee,ue,j,c,a,S):m(ue,Ee,j,a,c,S);if(pe!==t){if(pe)continue;Y=!1;break}if(ie){if(!by(c,function(Me,Ie){if(!lc(ie,Ie)&&(ue===Me||y(ue,Me,p,m,S)))return ie.push(Ie)})){Y=!1;break}}else if(!(ue===Ee||y(ue,Ee,p,m,S))){Y=!1;break}}return S.delete(a),S.delete(c),Y}function MO(a,c,p,m,y,S,E){switch(p){case ma:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case cc:return!(a.byteLength!=c.byteLength||!S(new Ou(a),new Ou(c)));case mn:case Hr:case ic:return Tn(+a,+c);case ri:return a.name==c.name&&a.message==c.message;case oc:case ac:return a==c+"";case hn:var R=My;case gn:var P=m&g;if(R||(R=Au),a.size!=c.size&&!P)return!1;var B=E.get(a);if(B)return B==c;m|=x,E.set(a,c);var W=u_(R(a),R(c),m,y,S,E);return E.delete(a),W;case _u:if(mc)return mc.call(a)==mc.call(c)}return!1}function PO(a,c,p,m,y,S){var E=p&g,R=Jy(a),P=R.length,B=Jy(c),W=B.length;if(P!=W&&!E)return!1;for(var j=P;j--;){var Y=R[j];if(!(E?Y in c:$e.call(c,Y)))return!1}var ie=S.get(a),ue=S.get(c);if(ie&&ue)return ie==c&&ue==a;var Ee=!0;S.set(a,c),S.set(c,a);for(var pe=E;++j<P;){Y=R[j];var Me=a[Y],Ie=c[Y];if(m)var Mr=E?m(Ie,Me,Y,c,a,S):m(Me,Ie,Y,a,c,S);if(!(Mr===t?Me===Ie||y(Me,Ie,p,m,S):Mr)){Ee=!1;break}pe||(pe=Y=="constructor")}if(Ee&&!pe){var Qt=a.constructor,Pr=c.constructor;Qt!=Pr&&"constructor"in a&&"constructor"in c&&!(typeof Qt=="function"&&Qt instanceof Qt&&typeof Pr=="function"&&Pr instanceof Pr)&&(Ee=!1)}return S.delete(a),S.delete(c),Ee}function ci(a){return sx(g_(a,t,E_),a+"")}function Jy(a){return Aw(a,bt,nx)}function ex(a){return Aw(a,lr,p_)}var tx=Hu?function(a){return Hu.get(a)}:Sx;function rp(a){for(var c=a.name+"",p=va[c],m=$e.call(va,c)?p.length:0;m--;){var y=p[m],S=y.func;if(S==null||S==a)return y.name}return c}function Ea(a){var c=$e.call(T,"placeholder")?T:a;return c.placeholder}function le(){var a=T.iteratee||xx;return a=a===xx?Fw:a,arguments.length?a(arguments[0],arguments[1]):a}function np(a,c){var p=a.__data__;return LO(c)?p[typeof c=="string"?"string":"hash"]:p.map}function rx(a){for(var c=bt(a),p=c.length;p--;){var m=c[p],y=a[m];c[p]=[m,y,m_(y)]}return c}function Mo(a,c){var p=BC(a,c);return Iw(p)?p:t}function AO(a){var c=$e.call(a,wo),p=a[wo];try{a[wo]=t;var m=!0}catch{}var y=Cu.call(a);return m&&(c?a[wo]=p:delete a[wo]),y}var nx=Ay?function(a){return a==null?[]:(a=ze(a),Ii(Ay(a),function(c){return yw.call(a,c)}))}:vx,p_=Ay?function(a){for(var c=[];a;)Fi(c,nx(a)),a=Lu(a);return c}:vx,Ut=Gt;(Dy&&Ut(new Dy(new ArrayBuffer(1)))!=ma||pc&&Ut(new pc)!=hn||Iy&&Ut(Iy.resolve())!=kb||Sa&&Ut(new Sa)!=gn||fc&&Ut(new fc)!=sc)&&(Ut=function(a){var c=Gt(a),p=c==ni?a.constructor:t,m=p?Po(p):"";if(m)switch(m){case fN:return ma;case dN:return hn;case mN:return kb;case hN:return gn;case gN:return sc}return c});function DO(a,c,p){for(var m=-1,y=p.length;++m<y;){var S=p[m],E=S.size;switch(S.type){case"drop":a+=E;break;case"dropRight":c-=E;break;case"take":c=Lt(c,a+E);break;case"takeRight":a=yt(a,c-E);break}}return{start:a,end:c}}function IO(a){var c=a.match(UF);return c?c[1].split(VF):[]}function f_(a,c,p){c=Vi(c,a);for(var m=-1,y=c.length,S=!1;++m<y;){var E=Ln(c[m]);if(!(S=a!=null&&p(a,E)))break;a=a[E]}return S||++m!=y?S:(y=a==null?0:a.length,!!y&&up(y)&&li(E,y)&&(xe(a)||Ao(a)))}function FO(a){var c=a.length,p=new a.constructor(c);return c&&typeof a[0]=="string"&&$e.call(a,"index")&&(p.index=a.index,p.input=a.input),p}function d_(a){return typeof a.constructor=="function"&&!vc(a)?ba(Lu(a)):{}}function CO(a,c,p){var m=a.constructor;switch(c){case cc:return Zy(a);case mn:case Hr:return new m(+a);case ma:return yO(a,p);case ry:case ny:case iy:case oy:case ay:case sy:case cy:case ly:case uy:return Qw(a,p);case hn:return new m;case ic:case ac:return new m(a);case oc:return xO(a);case gn:return new m;case _u:return TO(a)}}function NO(a,c){var p=c.length;if(!p)return a;var m=p-1;return c[m]=(p>1?"& ":"")+c[m],c=c.join(p>2?", ":" "),a.replace(LF,`{
/* [wrapped with `+c+`] */
`)}function OO(a){return xe(a)||Ao(a)||!!(xw&&a&&a[xw])}function li(a,c){var p=typeof a;return c=c??Q,!!c&&(p=="number"||p!="symbol"&&KF.test(a))&&a>-1&&a%1==0&&a<c}function Kt(a,c,p){if(!et(p))return!1;var m=typeof c;return(m=="number"?cr(p)&&li(c,p.length):m=="string"&&c in p)?Tn(p[c],a):!1}function ix(a,c){if(xe(a))return!1;var p=typeof a;return p=="number"||p=="symbol"||p=="boolean"||a==null||kr(a)?!0:FF.test(a)||!IF.test(a)||c!=null&&a in ze(c)}function LO(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function ox(a){var c=rp(a),p=T[c];if(typeof p!="function"||!(c in Ae.prototype))return!1;if(a===p)return!0;var m=tx(p);return!!m&&a===m[0]}function UO(a){return!!mw&&mw in a}var VO=Iu?ui:bx;function vc(a){var c=a&&a.constructor,p=typeof c=="function"&&c.prototype||Ta;return a===p}function m_(a){return a===a&&!et(a)}function h_(a,c){return function(p){return p==null?!1:p[a]===c&&(c!==t||a in ze(p))}}function BO(a){var c=cp(a,function(m){return p.size===l&&p.clear(),m}),p=c.cache;return c}function WO(a,c){var p=a[1],m=c[1],y=p|m,S=y<(v|w|he),E=m==he&&p==A||m==he&&p==de&&a[7].length<=c[8]||m==(he|de)&&c[7].length<=c[8]&&p==A;if(!(S||E))return a;m&v&&(a[2]=c[2],y|=p&v?0:N);var R=c[3];if(R){var P=a[3];a[3]=P?Yw(P,R,c[4]):R,a[4]=P?Ci(a[3],u):c[4]}return R=c[5],R&&(P=a[5],a[5]=P?Xw(P,R,c[6]):R,a[6]=P?Ci(a[5],u):c[6]),R=c[7],R&&(a[7]=R),m&he&&(a[8]=a[8]==null?c[8]:Lt(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=y,a}function HO(a){var c=[];if(a!=null)for(var p in ze(a))c.push(p);return c}function $O(a){return Cu.call(a)}function g_(a,c,p){return c=yt(c===t?a.length-1:c,0),function(){for(var m=arguments,y=-1,S=yt(m.length-c,0),E=L(S);++y<S;)E[y]=m[c+y];y=-1;for(var R=L(c+1);++y<c;)R[y]=m[y];return R[c]=p(E),_r(a,this,R)}}function y_(a,c){return c.length<2?a:ko(a,Kr(c,0,-1))}function jO(a,c){for(var p=a.length,m=Lt(c.length,p),y=sr(a);m--;){var S=c[m];a[m]=li(S,p)?y[S]:t}return a}function ax(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var x_=S_(Ww),bc=oN||function(a,c){return vt.setTimeout(a,c)},sx=S_(dO);function T_(a,c,p){var m=c+"";return sx(a,NO(m,qO(IO(m),p)))}function S_(a){var c=0,p=0;return function(){var m=lN(),y=C-(m-p);if(p=m,y>0){if(++c>=O)return arguments[0]}else c=0;return a.apply(t,arguments)}}function ip(a,c){var p=-1,m=a.length,y=m-1;for(c=c===t?m:c;++p<c;){var S=$y(p,y),E=a[S];a[S]=a[p],a[p]=E}return a.length=c,a}var v_=BO(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(CF,function(p,m,y,S){c.push(y?S.replace(HF,"$1"):m||p)}),c});function Ln(a){if(typeof a=="string"||kr(a))return a;var c=a+"";return c=="0"&&1/a==-K?"-0":c}function Po(a){if(a!=null){try{return Fu.call(a)}catch{}try{return a+""}catch{}}return""}function qO(a,c){return jr(ti,function(p){var m="_."+p[0];c&p[1]&&!Mu(a,m)&&a.push(m)}),a.sort()}function b_(a){if(a instanceof Ae)return a.clone();var c=new zr(a.__wrapped__,a.__chain__);return c.__actions__=sr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function zO(a,c,p){(p?Kt(a,c,p):c===t)?c=1:c=yt(be(c),0);var m=a==null?0:a.length;if(!m||c<1)return[];for(var y=0,S=0,E=L(Bu(m/c));y<m;)E[S++]=Kr(a,y,y+=c);return E}function GO(a){for(var c=-1,p=a==null?0:a.length,m=0,y=[];++c<p;){var S=a[c];S&&(y[m++]=S)}return y}function KO(){var a=arguments.length;if(!a)return[];for(var c=L(a-1),p=arguments[0],m=a;m--;)c[m-1]=arguments[m];return Fi(xe(p)?sr(p):[p],Dt(c,1))}var QO=ke(function(a,c){return ct(a)?gc(a,Dt(c,1,ct,!0)):[]}),ZO=ke(function(a,c){var p=Qr(c);return ct(p)&&(p=t),ct(a)?gc(a,Dt(c,1,ct,!0),le(p,2)):[]}),YO=ke(function(a,c){var p=Qr(c);return ct(p)&&(p=t),ct(a)?gc(a,Dt(c,1,ct,!0),t,p):[]});function XO(a,c,p){var m=a==null?0:a.length;return m?(c=p||c===t?1:be(c),Kr(a,c<0?0:c,m)):[]}function JO(a,c,p){var m=a==null?0:a.length;return m?(c=p||c===t?1:be(c),c=m-c,Kr(a,0,c<0?0:c)):[]}function eL(a,c){return a&&a.length?Zu(a,le(c,3),!0,!0):[]}function tL(a,c){return a&&a.length?Zu(a,le(c,3),!0):[]}function rL(a,c,p,m){var y=a==null?0:a.length;return y?(p&&typeof p!="number"&&Kt(a,c,p)&&(p=0,m=y),KN(a,c,p,m)):[]}function w_(a,c,p){var m=a==null?0:a.length;if(!m)return-1;var y=p==null?0:be(p);return y<0&&(y=yt(m+y,0)),Pu(a,le(c,3),y)}function __(a,c,p){var m=a==null?0:a.length;if(!m)return-1;var y=m-1;return p!==t&&(y=be(p),y=p<0?yt(m+y,0):Lt(y,m-1)),Pu(a,le(c,3),y,!0)}function E_(a){var c=a==null?0:a.length;return c?Dt(a,1):[]}function nL(a){var c=a==null?0:a.length;return c?Dt(a,K):[]}function iL(a,c){var p=a==null?0:a.length;return p?(c=c===t?1:be(c),Dt(a,c)):[]}function oL(a){for(var c=-1,p=a==null?0:a.length,m={};++c<p;){var y=a[c];m[y[0]]=y[1]}return m}function R_(a){return a&&a.length?a[0]:t}function aL(a,c,p){var m=a==null?0:a.length;if(!m)return-1;var y=p==null?0:be(p);return y<0&&(y=yt(m+y,0)),ga(a,c,y)}function sL(a){var c=a==null?0:a.length;return c?Kr(a,0,-1):[]}var cL=ke(function(a){var c=Xe(a,Ky);return c.length&&c[0]===a[0]?Uy(c):[]}),lL=ke(function(a){var c=Qr(a),p=Xe(a,Ky);return c===Qr(p)?c=t:p.pop(),p.length&&p[0]===a[0]?Uy(p,le(c,2)):[]}),uL=ke(function(a){var c=Qr(a),p=Xe(a,Ky);return c=typeof c=="function"?c:t,c&&p.pop(),p.length&&p[0]===a[0]?Uy(p,t,c):[]});function pL(a,c){return a==null?"":sN.call(a,c)}function Qr(a){var c=a==null?0:a.length;return c?a[c-1]:t}function fL(a,c,p){var m=a==null?0:a.length;if(!m)return-1;var y=m;return p!==t&&(y=be(p),y=y<0?yt(m+y,0):Lt(y,m-1)),c===c?qC(a,c,y):Pu(a,aw,y,!0)}function dL(a,c){return a&&a.length?Lw(a,be(c)):t}var mL=ke(k_);function k_(a,c){return a&&a.length&&c&&c.length?Hy(a,c):a}function hL(a,c,p){return a&&a.length&&c&&c.length?Hy(a,c,le(p,2)):a}function gL(a,c,p){return a&&a.length&&c&&c.length?Hy(a,c,t,p):a}var yL=ci(function(a,c){var p=a==null?0:a.length,m=Cy(a,c);return Bw(a,Xe(c,function(y){return li(y,p)?+y:y}).sort(Zw)),m});function xL(a,c){var p=[];if(!(a&&a.length))return p;var m=-1,y=[],S=a.length;for(c=le(c,3);++m<S;){var E=a[m];c(E,m,a)&&(p.push(E),y.push(m))}return Bw(a,y),p}function cx(a){return a==null?a:pN.call(a)}function TL(a,c,p){var m=a==null?0:a.length;return m?(p&&typeof p!="number"&&Kt(a,c,p)?(c=0,p=m):(c=c==null?0:be(c),p=p===t?m:be(p)),Kr(a,c,p)):[]}function SL(a,c){return Qu(a,c)}function vL(a,c,p){return qy(a,c,le(p,2))}function bL(a,c){var p=a==null?0:a.length;if(p){var m=Qu(a,c);if(m<p&&Tn(a[m],c))return m}return-1}function wL(a,c){return Qu(a,c,!0)}function _L(a,c,p){return qy(a,c,le(p,2),!0)}function EL(a,c){var p=a==null?0:a.length;if(p){var m=Qu(a,c,!0)-1;if(Tn(a[m],c))return m}return-1}function RL(a){return a&&a.length?Hw(a):[]}function kL(a,c){return a&&a.length?Hw(a,le(c,2)):[]}function ML(a){var c=a==null?0:a.length;return c?Kr(a,1,c):[]}function PL(a,c,p){return a&&a.length?(c=p||c===t?1:be(c),Kr(a,0,c<0?0:c)):[]}function AL(a,c,p){var m=a==null?0:a.length;return m?(c=p||c===t?1:be(c),c=m-c,Kr(a,c<0?0:c,m)):[]}function DL(a,c){return a&&a.length?Zu(a,le(c,3),!1,!0):[]}function IL(a,c){return a&&a.length?Zu(a,le(c,3)):[]}var FL=ke(function(a){return Ui(Dt(a,1,ct,!0))}),CL=ke(function(a){var c=Qr(a);return ct(c)&&(c=t),Ui(Dt(a,1,ct,!0),le(c,2))}),NL=ke(function(a){var c=Qr(a);return c=typeof c=="function"?c:t,Ui(Dt(a,1,ct,!0),t,c)});function OL(a){return a&&a.length?Ui(a):[]}function LL(a,c){return a&&a.length?Ui(a,le(c,2)):[]}function UL(a,c){return c=typeof c=="function"?c:t,a&&a.length?Ui(a,t,c):[]}function lx(a){if(!(a&&a.length))return[];var c=0;return a=Ii(a,function(p){if(ct(p))return c=yt(p.length,c),!0}),Ry(c,function(p){return Xe(a,wy(p))})}function M_(a,c){if(!(a&&a.length))return[];var p=lx(a);return c==null?p:Xe(p,function(m){return _r(c,t,m)})}var VL=ke(function(a,c){return ct(a)?gc(a,c):[]}),BL=ke(function(a){return Gy(Ii(a,ct))}),WL=ke(function(a){var c=Qr(a);return ct(c)&&(c=t),Gy(Ii(a,ct),le(c,2))}),HL=ke(function(a){var c=Qr(a);return c=typeof c=="function"?c:t,Gy(Ii(a,ct),t,c)}),$L=ke(lx);function jL(a,c){return zw(a||[],c||[],hc)}function qL(a,c){return zw(a||[],c||[],Tc)}var zL=ke(function(a){var c=a.length,p=c>1?a[c-1]:t;return p=typeof p=="function"?(a.pop(),p):t,M_(a,p)});function P_(a){var c=T(a);return c.__chain__=!0,c}function GL(a,c){return c(a),a}function op(a,c){return c(a)}var KL=ci(function(a){var c=a.length,p=c?a[0]:0,m=this.__wrapped__,y=function(S){return Cy(S,a)};return c>1||this.__actions__.length||!(m instanceof Ae)||!li(p)?this.thru(y):(m=m.slice(p,+p+(c?1:0)),m.__actions__.push({func:op,args:[y],thisArg:t}),new zr(m,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function QL(){return P_(this)}function ZL(){return new zr(this.value(),this.__chain__)}function YL(){this.__values__===t&&(this.__values__=$_(this.value()));var a=this.__index__>=this.__values__.length,c=a?t:this.__values__[this.__index__++];return{done:a,value:c}}function XL(){return this}function JL(a){for(var c,p=this;p instanceof ju;){var m=b_(p);m.__index__=0,m.__values__=t,c?y.__wrapped__=m:c=m;var y=m;p=p.__wrapped__}return y.__wrapped__=a,c}function eU(){var a=this.__wrapped__;if(a instanceof Ae){var c=a;return this.__actions__.length&&(c=new Ae(this)),c=c.reverse(),c.__actions__.push({func:op,args:[cx],thisArg:t}),new zr(c,this.__chain__)}return this.thru(cx)}function tU(){return qw(this.__wrapped__,this.__actions__)}var rU=Yu(function(a,c,p){$e.call(a,p)?++a[p]:ai(a,p,1)});function nU(a,c,p){var m=xe(a)?iw:GN;return p&&Kt(a,c,p)&&(c=t),m(a,le(c,3))}function iU(a,c){var p=xe(a)?Ii:Mw;return p(a,le(c,3))}var oU=r_(w_),aU=r_(__);function sU(a,c){return Dt(ap(a,c),1)}function cU(a,c){return Dt(ap(a,c),K)}function lU(a,c,p){return p=p===t?1:be(p),Dt(ap(a,c),p)}function A_(a,c){var p=xe(a)?jr:Li;return p(a,le(c,3))}function D_(a,c){var p=xe(a)?MC:kw;return p(a,le(c,3))}var uU=Yu(function(a,c,p){$e.call(a,p)?a[p].push(c):ai(a,p,[c])});function pU(a,c,p,m){a=cr(a)?a:ka(a),p=p&&!m?be(p):0;var y=a.length;return p<0&&(p=yt(y+p,0)),pp(a)?p<=y&&a.indexOf(c,p)>-1:!!y&&ga(a,c,p)>-1}var fU=ke(function(a,c,p){var m=-1,y=typeof c=="function",S=cr(a)?L(a.length):[];return Li(a,function(E){S[++m]=y?_r(c,E,p):yc(E,c,p)}),S}),dU=Yu(function(a,c,p){ai(a,p,c)});function ap(a,c){var p=xe(a)?Xe:Cw;return p(a,le(c,3))}function mU(a,c,p,m){return a==null?[]:(xe(c)||(c=c==null?[]:[c]),p=m?t:p,xe(p)||(p=p==null?[]:[p]),Uw(a,c,p))}var hU=Yu(function(a,c,p){a[p?0:1].push(c)},function(){return[[],[]]});function gU(a,c,p){var m=xe(a)?vy:cw,y=arguments.length<3;return m(a,le(c,4),p,y,Li)}function yU(a,c,p){var m=xe(a)?PC:cw,y=arguments.length<3;return m(a,le(c,4),p,y,kw)}function xU(a,c){var p=xe(a)?Ii:Mw;return p(a,lp(le(c,3)))}function TU(a){var c=xe(a)?ww:pO;return c(a)}function SU(a,c,p){(p?Kt(a,c,p):c===t)?c=1:c=be(c);var m=xe(a)?HN:fO;return m(a,c)}function vU(a){var c=xe(a)?$N:mO;return c(a)}function bU(a){if(a==null)return 0;if(cr(a))return pp(a)?xa(a):a.length;var c=Ut(a);return c==hn||c==gn?a.size:By(a).length}function wU(a,c,p){var m=xe(a)?by:hO;return p&&Kt(a,c,p)&&(c=t),m(a,le(c,3))}var _U=ke(function(a,c){if(a==null)return[];var p=c.length;return p>1&&Kt(a,c[0],c[1])?c=[]:p>2&&Kt(c[0],c[1],c[2])&&(c=[c[0]]),Uw(a,Dt(c,1),[])}),sp=iN||function(){return vt.Date.now()};function EU(a,c){if(typeof c!="function")throw new qr(i);return a=be(a),function(){if(--a<1)return c.apply(this,arguments)}}function I_(a,c,p){return c=p?t:c,c=a&&c==null?a.length:c,si(a,he,t,t,t,t,c)}function F_(a,c){var p;if(typeof c!="function")throw new qr(i);return a=be(a),function(){return--a>0&&(p=c.apply(this,arguments)),a<=1&&(c=t),p}}var ux=ke(function(a,c,p){var m=v;if(p.length){var y=Ci(p,Ea(ux));m|=Z}return si(a,m,c,p,y)}),C_=ke(function(a,c,p){var m=v|w;if(p.length){var y=Ci(p,Ea(C_));m|=Z}return si(c,m,a,p,y)});function N_(a,c,p){c=p?t:c;var m=si(a,A,t,t,t,t,t,c);return m.placeholder=N_.placeholder,m}function O_(a,c,p){c=p?t:c;var m=si(a,U,t,t,t,t,t,c);return m.placeholder=O_.placeholder,m}function L_(a,c,p){var m,y,S,E,R,P,B=0,W=!1,j=!1,Y=!0;if(typeof a!="function")throw new qr(i);c=Zr(c)||0,et(p)&&(W=!!p.leading,j="maxWait"in p,S=j?yt(Zr(p.maxWait)||0,c):S,Y="trailing"in p?!!p.trailing:Y);function ie(lt){var Sn=m,fi=y;return m=y=t,B=lt,E=a.apply(fi,Sn),E}function ue(lt){return B=lt,R=bc(Me,c),W?ie(lt):E}function Ee(lt){var Sn=lt-P,fi=lt-B,rE=c-Sn;return j?Lt(rE,S-fi):rE}function pe(lt){var Sn=lt-P,fi=lt-B;return P===t||Sn>=c||Sn<0||j&&fi>=S}function Me(){var lt=sp();if(pe(lt))return Ie(lt);R=bc(Me,Ee(lt))}function Ie(lt){return R=t,Y&&m?ie(lt):(m=y=t,E)}function Mr(){R!==t&&Gw(R),B=0,m=P=y=R=t}function Qt(){return R===t?E:Ie(sp())}function Pr(){var lt=sp(),Sn=pe(lt);if(m=arguments,y=this,P=lt,Sn){if(R===t)return ue(P);if(j)return Gw(R),R=bc(Me,c),ie(P)}return R===t&&(R=bc(Me,c)),E}return Pr.cancel=Mr,Pr.flush=Qt,Pr}var RU=ke(function(a,c){return Rw(a,1,c)}),kU=ke(function(a,c,p){return Rw(a,Zr(c)||0,p)});function MU(a){return si(a,dt)}function cp(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new qr(i);var p=function(){var m=arguments,y=c?c.apply(this,m):m[0],S=p.cache;if(S.has(y))return S.get(y);var E=a.apply(this,m);return p.cache=S.set(y,E)||S,E};return p.cache=new(cp.Cache||oi),p}cp.Cache=oi;function lp(a){if(typeof a!="function")throw new qr(i);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function PU(a){return F_(2,a)}var AU=gO(function(a,c){c=c.length==1&&xe(c[0])?Xe(c[0],Er(le())):Xe(Dt(c,1),Er(le()));var p=c.length;return ke(function(m){for(var y=-1,S=Lt(m.length,p);++y<S;)m[y]=c[y].call(this,m[y]);return _r(a,this,m)})}),px=ke(function(a,c){var p=Ci(c,Ea(px));return si(a,Z,t,c,p)}),U_=ke(function(a,c){var p=Ci(c,Ea(U_));return si(a,ne,t,c,p)}),DU=ci(function(a,c){return si(a,de,t,t,t,c)});function IU(a,c){if(typeof a!="function")throw new qr(i);return c=c===t?c:be(c),ke(a,c)}function FU(a,c){if(typeof a!="function")throw new qr(i);return c=c==null?0:yt(be(c),0),ke(function(p){var m=p[c],y=Bi(p,0,c);return m&&Fi(y,m),_r(a,this,y)})}function CU(a,c,p){var m=!0,y=!0;if(typeof a!="function")throw new qr(i);return et(p)&&(m="leading"in p?!!p.leading:m,y="trailing"in p?!!p.trailing:y),L_(a,c,{leading:m,maxWait:c,trailing:y})}function NU(a){return I_(a,1)}function OU(a,c){return px(Qy(c),a)}function LU(){if(!arguments.length)return[];var a=arguments[0];return xe(a)?a:[a]}function UU(a){return Gr(a,h)}function VU(a,c){return c=typeof c=="function"?c:t,Gr(a,h,c)}function BU(a){return Gr(a,f|h)}function WU(a,c){return c=typeof c=="function"?c:t,Gr(a,f|h,c)}function HU(a,c){return c==null||Ew(a,c,bt(c))}function Tn(a,c){return a===c||a!==a&&c!==c}var $U=tp(Ly),jU=tp(function(a,c){return a>=c}),Ao=Dw(function(){return arguments}())?Dw:function(a){return it(a)&&$e.call(a,"callee")&&!yw.call(a,"callee")},xe=L.isArray,qU=Xb?Er(Xb):JN;function cr(a){return a!=null&&up(a.length)&&!ui(a)}function ct(a){return it(a)&&cr(a)}function zU(a){return a===!0||a===!1||it(a)&&Gt(a)==mn}var Wi=aN||bx,GU=Jb?Er(Jb):eO;function KU(a){return it(a)&&a.nodeType===1&&!wc(a)}function QU(a){if(a==null)return!0;if(cr(a)&&(xe(a)||typeof a=="string"||typeof a.splice=="function"||Wi(a)||Ra(a)||Ao(a)))return!a.length;var c=Ut(a);if(c==hn||c==gn)return!a.size;if(vc(a))return!By(a).length;for(var p in a)if($e.call(a,p))return!1;return!0}function ZU(a,c){return xc(a,c)}function YU(a,c,p){p=typeof p=="function"?p:t;var m=p?p(a,c):t;return m===t?xc(a,c,t,p):!!m}function fx(a){if(!it(a))return!1;var c=Gt(a);return c==ri||c==vo||typeof a.message=="string"&&typeof a.name=="string"&&!wc(a)}function XU(a){return typeof a=="number"&&Tw(a)}function ui(a){if(!et(a))return!1;var c=Gt(a);return c==da||c==Rb||c==wr||c==bF}function V_(a){return typeof a=="number"&&a==be(a)}function up(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Q}function et(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function it(a){return a!=null&&typeof a=="object"}var B_=ew?Er(ew):rO;function JU(a,c){return a===c||Vy(a,c,rx(c))}function e2(a,c,p){return p=typeof p=="function"?p:t,Vy(a,c,rx(c),p)}function t2(a){return W_(a)&&a!=+a}function r2(a){if(VO(a))throw new ge(n);return Iw(a)}function n2(a){return a===null}function i2(a){return a==null}function W_(a){return typeof a=="number"||it(a)&&Gt(a)==ic}function wc(a){if(!it(a)||Gt(a)!=ni)return!1;var c=Lu(a);if(c===null)return!0;var p=$e.call(c,"constructor")&&c.constructor;return typeof p=="function"&&p instanceof p&&Fu.call(p)==eN}var dx=tw?Er(tw):nO;function o2(a){return V_(a)&&a>=-Q&&a<=Q}var H_=rw?Er(rw):iO;function pp(a){return typeof a=="string"||!xe(a)&&it(a)&&Gt(a)==ac}function kr(a){return typeof a=="symbol"||it(a)&&Gt(a)==_u}var Ra=nw?Er(nw):oO;function a2(a){return a===t}function s2(a){return it(a)&&Ut(a)==sc}function c2(a){return it(a)&&Gt(a)==_F}var l2=tp(Wy),u2=tp(function(a,c){return a<=c});function $_(a){if(!a)return[];if(cr(a))return pp(a)?yn(a):sr(a);if(uc&&a[uc])return HC(a[uc]());var c=Ut(a),p=c==hn?My:c==gn?Au:ka;return p(a)}function pi(a){if(!a)return a===0?a:0;if(a=Zr(a),a===K||a===-K){var c=a<0?-1:1;return c*te}return a===a?a:0}function be(a){var c=pi(a),p=c%1;return c===c?p?c-p:c:0}function j_(a){return a?Ro(be(a),0,re):0}function Zr(a){if(typeof a=="number")return a;if(kr(a))return me;if(et(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=et(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=lw(a);var p=qF.test(a);return p||GF.test(a)?EC(a.slice(2),p?2:8):jF.test(a)?me:+a}function q_(a){return On(a,lr(a))}function p2(a){return a?Ro(be(a),-Q,Q):a===0?a:0}function Be(a){return a==null?"":Rr(a)}var f2=wa(function(a,c){if(vc(c)||cr(c)){On(c,bt(c),a);return}for(var p in c)$e.call(c,p)&&hc(a,p,c[p])}),z_=wa(function(a,c){On(c,lr(c),a)}),fp=wa(function(a,c,p,m){On(c,lr(c),a,m)}),d2=wa(function(a,c,p,m){On(c,bt(c),a,m)}),m2=ci(Cy);function h2(a,c){var p=ba(a);return c==null?p:_w(p,c)}var g2=ke(function(a,c){a=ze(a);var p=-1,m=c.length,y=m>2?c[2]:t;for(y&&Kt(c[0],c[1],y)&&(m=1);++p<m;)for(var S=c[p],E=lr(S),R=-1,P=E.length;++R<P;){var B=E[R],W=a[B];(W===t||Tn(W,Ta[B])&&!$e.call(a,B))&&(a[B]=S[B])}return a}),y2=ke(function(a){return a.push(t,l_),_r(G_,t,a)});function x2(a,c){return ow(a,le(c,3),Nn)}function T2(a,c){return ow(a,le(c,3),Oy)}function S2(a,c){return a==null?a:Ny(a,le(c,3),lr)}function v2(a,c){return a==null?a:Pw(a,le(c,3),lr)}function b2(a,c){return a&&Nn(a,le(c,3))}function w2(a,c){return a&&Oy(a,le(c,3))}function _2(a){return a==null?[]:Gu(a,bt(a))}function E2(a){return a==null?[]:Gu(a,lr(a))}function mx(a,c,p){var m=a==null?t:ko(a,c);return m===t?p:m}function R2(a,c){return a!=null&&f_(a,c,QN)}function hx(a,c){return a!=null&&f_(a,c,ZN)}var k2=i_(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Cu.call(c)),a[c]=p},yx(ur)),M2=i_(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Cu.call(c)),$e.call(a,c)?a[c].push(p):a[c]=[p]},le),P2=ke(yc);function bt(a){return cr(a)?bw(a):By(a)}function lr(a){return cr(a)?bw(a,!0):aO(a)}function A2(a,c){var p={};return c=le(c,3),Nn(a,function(m,y,S){ai(p,c(m,y,S),m)}),p}function D2(a,c){var p={};return c=le(c,3),Nn(a,function(m,y,S){ai(p,y,c(m,y,S))}),p}var I2=wa(function(a,c,p){Ku(a,c,p)}),G_=wa(function(a,c,p,m){Ku(a,c,p,m)}),F2=ci(function(a,c){var p={};if(a==null)return p;var m=!1;c=Xe(c,function(S){return S=Vi(S,a),m||(m=S.length>1),S}),On(a,ex(a),p),m&&(p=Gr(p,f|d|h,kO));for(var y=c.length;y--;)zy(p,c[y]);return p});function C2(a,c){return K_(a,lp(le(c)))}var N2=ci(function(a,c){return a==null?{}:cO(a,c)});function K_(a,c){if(a==null)return{};var p=Xe(ex(a),function(m){return[m]});return c=le(c),Vw(a,p,function(m,y){return c(m,y[0])})}function O2(a,c,p){c=Vi(c,a);var m=-1,y=c.length;for(y||(y=1,a=t);++m<y;){var S=a==null?t:a[Ln(c[m])];S===t&&(m=y,S=p),a=ui(S)?S.call(a):S}return a}function L2(a,c,p){return a==null?a:Tc(a,c,p)}function U2(a,c,p,m){return m=typeof m=="function"?m:t,a==null?a:Tc(a,c,p,m)}var Q_=s_(bt),Z_=s_(lr);function V2(a,c,p){var m=xe(a),y=m||Wi(a)||Ra(a);if(c=le(c,4),p==null){var S=a&&a.constructor;y?p=m?new S:[]:et(a)?p=ui(S)?ba(Lu(a)):{}:p={}}return(y?jr:Nn)(a,function(E,R,P){return c(p,E,R,P)}),p}function B2(a,c){return a==null?!0:zy(a,c)}function W2(a,c,p){return a==null?a:jw(a,c,Qy(p))}function H2(a,c,p,m){return m=typeof m=="function"?m:t,a==null?a:jw(a,c,Qy(p),m)}function ka(a){return a==null?[]:ky(a,bt(a))}function $2(a){return a==null?[]:ky(a,lr(a))}function j2(a,c,p){return p===t&&(p=c,c=t),p!==t&&(p=Zr(p),p=p===p?p:0),c!==t&&(c=Zr(c),c=c===c?c:0),Ro(Zr(a),c,p)}function q2(a,c,p){return c=pi(c),p===t?(p=c,c=0):p=pi(p),a=Zr(a),YN(a,c,p)}function z2(a,c,p){if(p&&typeof p!="boolean"&&Kt(a,c,p)&&(c=p=t),p===t&&(typeof c=="boolean"?(p=c,c=t):typeof a=="boolean"&&(p=a,a=t)),a===t&&c===t?(a=0,c=1):(a=pi(a),c===t?(c=a,a=0):c=pi(c)),a>c){var m=a;a=c,c=m}if(p||a%1||c%1){var y=Sw();return Lt(a+y*(c-a+_C("1e-"+((y+"").length-1))),c)}return $y(a,c)}var G2=_a(function(a,c,p){return c=c.toLowerCase(),a+(p?Y_(c):c)});function Y_(a){return gx(Be(a).toLowerCase())}function X_(a){return a=Be(a),a&&a.replace(QF,LC).replace(mC,"")}function K2(a,c,p){a=Be(a),c=Rr(c);var m=a.length;p=p===t?m:Ro(be(p),0,m);var y=p;return p-=c.length,p>=0&&a.slice(p,y)==c}function Q2(a){return a=Be(a),a&&PF.test(a)?a.replace(Pb,UC):a}function Z2(a){return a=Be(a),a&&NF.test(a)?a.replace(py,"\\$&"):a}var Y2=_a(function(a,c,p){return a+(p?"-":"")+c.toLowerCase()}),X2=_a(function(a,c,p){return a+(p?" ":"")+c.toLowerCase()}),J2=t_("toLowerCase");function eV(a,c,p){a=Be(a),c=be(c);var m=c?xa(a):0;if(!c||m>=c)return a;var y=(c-m)/2;return ep(Wu(y),p)+a+ep(Bu(y),p)}function tV(a,c,p){a=Be(a),c=be(c);var m=c?xa(a):0;return c&&m<c?a+ep(c-m,p):a}function rV(a,c,p){a=Be(a),c=be(c);var m=c?xa(a):0;return c&&m<c?ep(c-m,p)+a:a}function nV(a,c,p){return p||c==null?c=0:c&&(c=+c),uN(Be(a).replace(fy,""),c||0)}function iV(a,c,p){return(p?Kt(a,c,p):c===t)?c=1:c=be(c),jy(Be(a),c)}function oV(){var a=arguments,c=Be(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var aV=_a(function(a,c,p){return a+(p?"_":"")+c.toLowerCase()});function sV(a,c,p){return p&&typeof p!="number"&&Kt(a,c,p)&&(c=p=t),p=p===t?re:p>>>0,p?(a=Be(a),a&&(typeof c=="string"||c!=null&&!dx(c))&&(c=Rr(c),!c&&ya(a))?Bi(yn(a),0,p):a.split(c,p)):[]}var cV=_a(function(a,c,p){return a+(p?" ":"")+gx(c)});function lV(a,c,p){return a=Be(a),p=p==null?0:Ro(be(p),0,a.length),c=Rr(c),a.slice(p,p+c.length)==c}function uV(a,c,p){var m=T.templateSettings;p&&Kt(a,c,p)&&(c=t),a=Be(a),c=fp({},c,m,c_);var y=fp({},c.imports,m.imports,c_),S=bt(y),E=ky(y,S),R,P,B=0,W=c.interpolate||Eu,j="__p += '",Y=Py((c.escape||Eu).source+"|"+W.source+"|"+(W===Ab?$F:Eu).source+"|"+(c.evaluate||Eu).source+"|$","g"),ie="//# sourceURL="+($e.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++TC+"]")+`
`;a.replace(Y,function(pe,Me,Ie,Mr,Qt,Pr){return Ie||(Ie=Mr),j+=a.slice(B,Pr).replace(ZF,VC),Me&&(R=!0,j+=`' +
__e(`+Me+`) +
'`),Qt&&(P=!0,j+=`';
`+Qt+`;
__p += '`),Ie&&(j+=`' +
((__t = (`+Ie+`)) == null ? '' : __t) +
'`),B=Pr+pe.length,pe}),j+=`';
`;var ue=$e.call(c,"variable")&&c.variable;if(!ue)j=`with (obj) {
`+j+`
}
`;else if(WF.test(ue))throw new ge(o);j=(P?j.replace(EF,""):j).replace(RF,"$1").replace(kF,"$1;"),j="function("+(ue||"obj")+`) {
`+(ue?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(P?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+j+`return __p
}`;var Ee=eE(function(){return Oe(S,ie+"return "+j).apply(t,E)});if(Ee.source=j,fx(Ee))throw Ee;return Ee}function pV(a){return Be(a).toLowerCase()}function fV(a){return Be(a).toUpperCase()}function dV(a,c,p){if(a=Be(a),a&&(p||c===t))return lw(a);if(!a||!(c=Rr(c)))return a;var m=yn(a),y=yn(c),S=uw(m,y),E=pw(m,y)+1;return Bi(m,S,E).join("")}function mV(a,c,p){if(a=Be(a),a&&(p||c===t))return a.slice(0,dw(a)+1);if(!a||!(c=Rr(c)))return a;var m=yn(a),y=pw(m,yn(c))+1;return Bi(m,0,y).join("")}function hV(a,c,p){if(a=Be(a),a&&(p||c===t))return a.replace(fy,"");if(!a||!(c=Rr(c)))return a;var m=yn(a),y=uw(m,yn(c));return Bi(m,y).join("")}function gV(a,c){var p=At,m=nt;if(et(c)){var y="separator"in c?c.separator:y;p="length"in c?be(c.length):p,m="omission"in c?Rr(c.omission):m}a=Be(a);var S=a.length;if(ya(a)){var E=yn(a);S=E.length}if(p>=S)return a;var R=p-xa(m);if(R<1)return m;var P=E?Bi(E,0,R).join(""):a.slice(0,R);if(y===t)return P+m;if(E&&(R+=P.length-R),dx(y)){if(a.slice(R).search(y)){var B,W=P;for(y.global||(y=Py(y.source,Be(Db.exec(y))+"g")),y.lastIndex=0;B=y.exec(W);)var j=B.index;P=P.slice(0,j===t?R:j)}}else if(a.indexOf(Rr(y),R)!=R){var Y=P.lastIndexOf(y);Y>-1&&(P=P.slice(0,Y))}return P+m}function yV(a){return a=Be(a),a&&MF.test(a)?a.replace(Mb,zC):a}var xV=_a(function(a,c,p){return a+(p?" ":"")+c.toUpperCase()}),gx=t_("toUpperCase");function J_(a,c,p){return a=Be(a),c=p?t:c,c===t?WC(a)?QC(a):IC(a):a.match(c)||[]}var eE=ke(function(a,c){try{return _r(a,t,c)}catch(p){return fx(p)?p:new ge(p)}}),TV=ci(function(a,c){return jr(c,function(p){p=Ln(p),ai(a,p,ux(a[p],a))}),a});function SV(a){var c=a==null?0:a.length,p=le();return a=c?Xe(a,function(m){if(typeof m[1]!="function")throw new qr(i);return[p(m[0]),m[1]]}):[],ke(function(m){for(var y=-1;++y<c;){var S=a[y];if(_r(S[0],this,m))return _r(S[1],this,m)}})}function vV(a){return zN(Gr(a,f))}function yx(a){return function(){return a}}function bV(a,c){return a==null||a!==a?c:a}var wV=n_(),_V=n_(!0);function ur(a){return a}function xx(a){return Fw(typeof a=="function"?a:Gr(a,f))}function EV(a){return Nw(Gr(a,f))}function RV(a,c){return Ow(a,Gr(c,f))}var kV=ke(function(a,c){return function(p){return yc(p,a,c)}}),MV=ke(function(a,c){return function(p){return yc(a,p,c)}});function Tx(a,c,p){var m=bt(c),y=Gu(c,m);p==null&&!(et(c)&&(y.length||!m.length))&&(p=c,c=a,a=this,y=Gu(c,bt(c)));var S=!(et(p)&&"chain"in p)||!!p.chain,E=ui(a);return jr(y,function(R){var P=c[R];a[R]=P,E&&(a.prototype[R]=function(){var B=this.__chain__;if(S||B){var W=a(this.__wrapped__),j=W.__actions__=sr(this.__actions__);return j.push({func:P,args:arguments,thisArg:a}),W.__chain__=B,W}return P.apply(a,Fi([this.value()],arguments))})}),a}function PV(){return vt._===this&&(vt._=tN),this}function Sx(){}function AV(a){return a=be(a),ke(function(c){return Lw(c,a)})}var DV=Yy(Xe),IV=Yy(iw),FV=Yy(by);function tE(a){return ix(a)?wy(Ln(a)):lO(a)}function CV(a){return function(c){return a==null?t:ko(a,c)}}var NV=o_(),OV=o_(!0);function vx(){return[]}function bx(){return!1}function LV(){return{}}function UV(){return""}function VV(){return!0}function BV(a,c){if(a=be(a),a<1||a>Q)return[];var p=re,m=Lt(a,re);c=le(c),a-=re;for(var y=Ry(m,c);++p<a;)c(p);return y}function WV(a){return xe(a)?Xe(a,Ln):kr(a)?[a]:sr(v_(Be(a)))}function HV(a){var c=++JC;return Be(a)+c}var $V=Ju(function(a,c){return a+c},0),jV=Xy("ceil"),qV=Ju(function(a,c){return a/c},1),zV=Xy("floor");function GV(a){return a&&a.length?zu(a,ur,Ly):t}function KV(a,c){return a&&a.length?zu(a,le(c,2),Ly):t}function QV(a){return sw(a,ur)}function ZV(a,c){return sw(a,le(c,2))}function YV(a){return a&&a.length?zu(a,ur,Wy):t}function XV(a,c){return a&&a.length?zu(a,le(c,2),Wy):t}var JV=Ju(function(a,c){return a*c},1),eB=Xy("round"),tB=Ju(function(a,c){return a-c},0);function rB(a){return a&&a.length?Ey(a,ur):0}function nB(a,c){return a&&a.length?Ey(a,le(c,2)):0}return T.after=EU,T.ary=I_,T.assign=f2,T.assignIn=z_,T.assignInWith=fp,T.assignWith=d2,T.at=m2,T.before=F_,T.bind=ux,T.bindAll=TV,T.bindKey=C_,T.castArray=LU,T.chain=P_,T.chunk=zO,T.compact=GO,T.concat=KO,T.cond=SV,T.conforms=vV,T.constant=yx,T.countBy=rU,T.create=h2,T.curry=N_,T.curryRight=O_,T.debounce=L_,T.defaults=g2,T.defaultsDeep=y2,T.defer=RU,T.delay=kU,T.difference=QO,T.differenceBy=ZO,T.differenceWith=YO,T.drop=XO,T.dropRight=JO,T.dropRightWhile=eL,T.dropWhile=tL,T.fill=rL,T.filter=iU,T.flatMap=sU,T.flatMapDeep=cU,T.flatMapDepth=lU,T.flatten=E_,T.flattenDeep=nL,T.flattenDepth=iL,T.flip=MU,T.flow=wV,T.flowRight=_V,T.fromPairs=oL,T.functions=_2,T.functionsIn=E2,T.groupBy=uU,T.initial=sL,T.intersection=cL,T.intersectionBy=lL,T.intersectionWith=uL,T.invert=k2,T.invertBy=M2,T.invokeMap=fU,T.iteratee=xx,T.keyBy=dU,T.keys=bt,T.keysIn=lr,T.map=ap,T.mapKeys=A2,T.mapValues=D2,T.matches=EV,T.matchesProperty=RV,T.memoize=cp,T.merge=I2,T.mergeWith=G_,T.method=kV,T.methodOf=MV,T.mixin=Tx,T.negate=lp,T.nthArg=AV,T.omit=F2,T.omitBy=C2,T.once=PU,T.orderBy=mU,T.over=DV,T.overArgs=AU,T.overEvery=IV,T.overSome=FV,T.partial=px,T.partialRight=U_,T.partition=hU,T.pick=N2,T.pickBy=K_,T.property=tE,T.propertyOf=CV,T.pull=mL,T.pullAll=k_,T.pullAllBy=hL,T.pullAllWith=gL,T.pullAt=yL,T.range=NV,T.rangeRight=OV,T.rearg=DU,T.reject=xU,T.remove=xL,T.rest=IU,T.reverse=cx,T.sampleSize=SU,T.set=L2,T.setWith=U2,T.shuffle=vU,T.slice=TL,T.sortBy=_U,T.sortedUniq=RL,T.sortedUniqBy=kL,T.split=sV,T.spread=FU,T.tail=ML,T.take=PL,T.takeRight=AL,T.takeRightWhile=DL,T.takeWhile=IL,T.tap=GL,T.throttle=CU,T.thru=op,T.toArray=$_,T.toPairs=Q_,T.toPairsIn=Z_,T.toPath=WV,T.toPlainObject=q_,T.transform=V2,T.unary=NU,T.union=FL,T.unionBy=CL,T.unionWith=NL,T.uniq=OL,T.uniqBy=LL,T.uniqWith=UL,T.unset=B2,T.unzip=lx,T.unzipWith=M_,T.update=W2,T.updateWith=H2,T.values=ka,T.valuesIn=$2,T.without=VL,T.words=J_,T.wrap=OU,T.xor=BL,T.xorBy=WL,T.xorWith=HL,T.zip=$L,T.zipObject=jL,T.zipObjectDeep=qL,T.zipWith=zL,T.entries=Q_,T.entriesIn=Z_,T.extend=z_,T.extendWith=fp,Tx(T,T),T.add=$V,T.attempt=eE,T.camelCase=G2,T.capitalize=Y_,T.ceil=jV,T.clamp=j2,T.clone=UU,T.cloneDeep=BU,T.cloneDeepWith=WU,T.cloneWith=VU,T.conformsTo=HU,T.deburr=X_,T.defaultTo=bV,T.divide=qV,T.endsWith=K2,T.eq=Tn,T.escape=Q2,T.escapeRegExp=Z2,T.every=nU,T.find=oU,T.findIndex=w_,T.findKey=x2,T.findLast=aU,T.findLastIndex=__,T.findLastKey=T2,T.floor=zV,T.forEach=A_,T.forEachRight=D_,T.forIn=S2,T.forInRight=v2,T.forOwn=b2,T.forOwnRight=w2,T.get=mx,T.gt=$U,T.gte=jU,T.has=R2,T.hasIn=hx,T.head=R_,T.identity=ur,T.includes=pU,T.indexOf=aL,T.inRange=q2,T.invoke=P2,T.isArguments=Ao,T.isArray=xe,T.isArrayBuffer=qU,T.isArrayLike=cr,T.isArrayLikeObject=ct,T.isBoolean=zU,T.isBuffer=Wi,T.isDate=GU,T.isElement=KU,T.isEmpty=QU,T.isEqual=ZU,T.isEqualWith=YU,T.isError=fx,T.isFinite=XU,T.isFunction=ui,T.isInteger=V_,T.isLength=up,T.isMap=B_,T.isMatch=JU,T.isMatchWith=e2,T.isNaN=t2,T.isNative=r2,T.isNil=i2,T.isNull=n2,T.isNumber=W_,T.isObject=et,T.isObjectLike=it,T.isPlainObject=wc,T.isRegExp=dx,T.isSafeInteger=o2,T.isSet=H_,T.isString=pp,T.isSymbol=kr,T.isTypedArray=Ra,T.isUndefined=a2,T.isWeakMap=s2,T.isWeakSet=c2,T.join=pL,T.kebabCase=Y2,T.last=Qr,T.lastIndexOf=fL,T.lowerCase=X2,T.lowerFirst=J2,T.lt=l2,T.lte=u2,T.max=GV,T.maxBy=KV,T.mean=QV,T.meanBy=ZV,T.min=YV,T.minBy=XV,T.stubArray=vx,T.stubFalse=bx,T.stubObject=LV,T.stubString=UV,T.stubTrue=VV,T.multiply=JV,T.nth=dL,T.noConflict=PV,T.noop=Sx,T.now=sp,T.pad=eV,T.padEnd=tV,T.padStart=rV,T.parseInt=nV,T.random=z2,T.reduce=gU,T.reduceRight=yU,T.repeat=iV,T.replace=oV,T.result=O2,T.round=eB,T.runInContext=k,T.sample=TU,T.size=bU,T.snakeCase=aV,T.some=wU,T.sortedIndex=SL,T.sortedIndexBy=vL,T.sortedIndexOf=bL,T.sortedLastIndex=wL,T.sortedLastIndexBy=_L,T.sortedLastIndexOf=EL,T.startCase=cV,T.startsWith=lV,T.subtract=tB,T.sum=rB,T.sumBy=nB,T.template=uV,T.times=BV,T.toFinite=pi,T.toInteger=be,T.toLength=j_,T.toLower=pV,T.toNumber=Zr,T.toSafeInteger=p2,T.toString=Be,T.toUpper=fV,T.trim=dV,T.trimEnd=mV,T.trimStart=hV,T.truncate=gV,T.unescape=yV,T.uniqueId=HV,T.upperCase=xV,T.upperFirst=gx,T.each=A_,T.eachRight=D_,T.first=R_,Tx(T,function(){var a={};return Nn(T,function(c,p){$e.call(T.prototype,p)||(a[p]=c)}),a}(),{chain:!1}),T.VERSION=e,jr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){T[a].placeholder=T}),jr(["drop","take"],function(a,c){Ae.prototype[a]=function(p){p=p===t?1:yt(be(p),0);var m=this.__filtered__&&!c?new Ae(this):this.clone();return m.__filtered__?m.__takeCount__=Lt(p,m.__takeCount__):m.__views__.push({size:Lt(p,re),type:a+(m.__dir__<0?"Right":"")}),m},Ae.prototype[a+"Right"]=function(p){return this.reverse()[a](p).reverse()}}),jr(["filter","map","takeWhile"],function(a,c){var p=c+1,m=p==D||p==q;Ae.prototype[a]=function(y){var S=this.clone();return S.__iteratees__.push({iteratee:le(y,3),type:p}),S.__filtered__=S.__filtered__||m,S}}),jr(["head","last"],function(a,c){var p="take"+(c?"Right":"");Ae.prototype[a]=function(){return this[p](1).value()[0]}}),jr(["initial","tail"],function(a,c){var p="drop"+(c?"":"Right");Ae.prototype[a]=function(){return this.__filtered__?new Ae(this):this[p](1)}}),Ae.prototype.compact=function(){return this.filter(ur)},Ae.prototype.find=function(a){return this.filter(a).head()},Ae.prototype.findLast=function(a){return this.reverse().find(a)},Ae.prototype.invokeMap=ke(function(a,c){return typeof a=="function"?new Ae(this):this.map(function(p){return yc(p,a,c)})}),Ae.prototype.reject=function(a){return this.filter(lp(le(a)))},Ae.prototype.slice=function(a,c){a=be(a);var p=this;return p.__filtered__&&(a>0||c<0)?new Ae(p):(a<0?p=p.takeRight(-a):a&&(p=p.drop(a)),c!==t&&(c=be(c),p=c<0?p.dropRight(-c):p.take(c-a)),p)},Ae.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Ae.prototype.toArray=function(){return this.take(re)},Nn(Ae.prototype,function(a,c){var p=/^(?:filter|find|map|reject)|While$/.test(c),m=/^(?:head|last)$/.test(c),y=T[m?"take"+(c=="last"?"Right":""):c],S=m||/^find/.test(c);y&&(T.prototype[c]=function(){var E=this.__wrapped__,R=m?[1]:arguments,P=E instanceof Ae,B=R[0],W=P||xe(E),j=function(Me){var Ie=y.apply(T,Fi([Me],R));return m&&Y?Ie[0]:Ie};W&&p&&typeof B=="function"&&B.length!=1&&(P=W=!1);var Y=this.__chain__,ie=!!this.__actions__.length,ue=S&&!Y,Ee=P&&!ie;if(!S&&W){E=Ee?E:new Ae(this);var pe=a.apply(E,R);return pe.__actions__.push({func:op,args:[j],thisArg:t}),new zr(pe,Y)}return ue&&Ee?a.apply(this,R):(pe=this.thru(j),ue?m?pe.value()[0]:pe.value():pe)})}),jr(["pop","push","shift","sort","splice","unshift"],function(a){var c=Du[a],p=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",m=/^(?:pop|shift)$/.test(a);T.prototype[a]=function(){var y=arguments;if(m&&!this.__chain__){var S=this.value();return c.apply(xe(S)?S:[],y)}return this[p](function(E){return c.apply(xe(E)?E:[],y)})}}),Nn(Ae.prototype,function(a,c){var p=T[c];if(p){var m=p.name+"";$e.call(va,m)||(va[m]=[]),va[m].push({name:c,func:p})}}),va[Xu(t,w).name]=[{name:"wrapper",func:t}],Ae.prototype.clone=yN,Ae.prototype.reverse=xN,Ae.prototype.value=TN,T.prototype.at=KL,T.prototype.chain=QL,T.prototype.commit=ZL,T.prototype.next=YL,T.prototype.plant=JL,T.prototype.reverse=eU,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=tU,T.prototype.first=T.prototype.head,uc&&(T.prototype[uc]=XL),T},Ni=ZC();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(vt._=Ni,define(function(){return Ni})):bo?((bo.exports=Ni)._=Ni,xy._=Ni):vt._=Ni}).call($s)});var vI=ot((qUe,SI)=>{"use strict";SI.exports=xI;function xI(t,e,r){t instanceof RegExp&&(t=yI(t,r)),e instanceof RegExp&&(e=yI(e,r));var n=TI(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function yI(t,e){var r=e.match(t);return r?r[0]:null}xI.range=TI;function TI(t,e,r){var n,i,o,s,l,u=r.indexOf(t),f=r.indexOf(e,u+1),d=u;if(u>=0&&f>0){if(t===e)return[u,f];for(n=[],o=r.length;d>=0&&!l;)d==u?(n.push(d),u=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),f]:(i=n.pop(),i<o&&(o=i,s=f),f=r.indexOf(e,d+1)),d=u<f&&u>=0?u:f;n.length&&(l=[o,s])}return l}});var PI=ot((zUe,MI)=>{var bI=vI();MI.exports=q7;var wI="\0SLASH"+Math.random()+"\0",_I="\0OPEN"+Math.random()+"\0",av="\0CLOSE"+Math.random()+"\0",EI="\0COMMA"+Math.random()+"\0",RI="\0PERIOD"+Math.random()+"\0";function ov(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function $7(t){return t.split("\\\\").join(wI).split("\\{").join(_I).split("\\}").join(av).split("\\,").join(EI).split("\\.").join(RI)}function j7(t){return t.split(wI).join("\\").split(_I).join("{").split(av).join("}").split(EI).join(",").split(RI).join(".")}function kI(t){if(!t)return[""];var e=[],r=bI("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var l=kI(o);return o.length&&(s[s.length-1]+=l.shift(),s.push.apply(s,l)),e.push.apply(e,s),e}function q7(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Xl($7(t),!0).map(j7)):[]}function z7(t){return"{"+t+"}"}function G7(t){return/^-?0\d/.test(t)}function K7(t,e){return t<=e}function Q7(t,e){return t>=e}function Xl(t,e){var r=[],n=bI("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?Xl(n.post,!1):[""];if(/\$$/.test(n.pre))for(var s=0;s<o.length;s++){var l=i+"{"+n.body+"}"+o[s];r.push(l)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),f=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=u||f,h=n.body.indexOf(",")>=0;if(!d&&!h)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+av+n.post,Xl(t)):[t];var g;if(d)g=n.body.split(/\.\./);else if(g=kI(n.body),g.length===1&&(g=Xl(g[0],!1).map(z7),g.length===1))return o.map(function(O){return n.pre+g[0]+O});var x;if(d){var v=ov(g[0]),w=ov(g[1]),N=Math.max(g[0].length,g[1].length),A=g.length==3?Math.abs(ov(g[2])):1,U=K7,Z=w<v;Z&&(A*=-1,U=Q7);var ne=g.some(G7);x=[];for(var he=v;U(he,w);he+=A){var de;if(f)de=String.fromCharCode(he),de==="\\"&&(de="");else if(de=String(he),ne){var dt=N-de.length;if(dt>0){var At=new Array(dt+1).join("0");he<0?de="-"+At+de.slice(1):de=At+de}}x.push(de)}}else{x=[];for(var nt=0;nt<g.length;nt++)x.push.apply(x,Xl(g[nt],!1))}for(var nt=0;nt<x.length;nt++)for(var s=0;s<o.length;s++){var l=i+x[nt]+o[s];(!e||d||l)&&r.push(l)}}return r}});var NZ={};lB(NZ,{default:()=>SF});module.exports=uB(NZ);var wx="cursorless.command",mp=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},ut=class extends mp{constructor(){super(...arguments);this.isVisible=!1}},mt=class extends mp{constructor(){super(...arguments);this.isVisible=!0}};var LZ={"cursorless.toggleDecorations":new mt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new mt("Recompute decoration styles"),"cursorless.recordTestCase":new mt("Record test case"),"cursorless.recordOneTestCaseThenPause":new mt("Record one test case, then pause"),"cursorless.pauseRecording":new mt("Pause test case recording"),"cursorless.resumeRecording":new mt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new mt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new mt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new mt("Show documentation"),"cursorless.showScopeVisualizer":new mt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new mt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new mt("Analyze collected command history"),"cursorless.tutorial.start":new ut("Start a tutorial"),"cursorless.tutorial.next":new mt("Tutorial next"),"cursorless.tutorial.previous":new mt("Tutorial previous"),"cursorless.tutorial.restart":new mt("Tutorial restart"),"cursorless.tutorial.resume":new mt("Tutorial resume"),"cursorless.tutorial.list":new mt("Tutorial list"),"cursorless.documentationOpened":new ut("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new ut("The core cursorless command"),"cursorless.repeatPreviousCommand":new mt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new ut("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new ut("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new ut("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new ut("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new ut("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new ut("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new ut("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new ut("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new ut("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new ut("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new ut("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new ut("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new ut("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new ut("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new ut("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new ut("Redo keyboard targeting changes")};var hp=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var gp=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var yp=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},wt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var xp=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var pB=typeof global=="object"&&global&&global.Object===Object&&global,Tp=pB;var fB=typeof self=="object"&&self&&self.Object===Object&&self,dB=Tp||fB||Function("return this")(),_t=dB;var mB=_t.Symbol,Zt=mB;var iE=Object.prototype,hB=iE.hasOwnProperty,gB=iE.toString,_c=Zt?Zt.toStringTag:void 0;function yB(t){var e=hB.call(t,_c),r=t[_c];try{t[_c]=void 0;var n=!0}catch{}var i=gB.call(t);return n&&(e?t[_c]=r:delete t[_c]),i}var oE=yB;var xB=Object.prototype,TB=xB.toString;function SB(t){return TB.call(t)}var aE=SB;var vB="[object Null]",bB="[object Undefined]",sE=Zt?Zt.toStringTag:void 0;function wB(t){return t==null?t===void 0?bB:vB:sE&&sE in Object(t)?oE(t):aE(t)}var vn=wB;function _B(t){return t!=null&&typeof t=="object"}var Yt=_B;var EB="[object Symbol]";function RB(t){return typeof t=="symbol"||Yt(t)&&vn(t)==EB}var Ar=RB;function kB(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var Yr=kB;var MB=Array.isArray,Le=MB;var PB=1/0,cE=Zt?Zt.prototype:void 0,lE=cE?cE.toString:void 0;function uE(t){if(typeof t=="string")return t;if(Le(t))return Yr(t,uE)+"";if(Ar(t))return lE?lE.call(t):"";var e=t+"";return e=="0"&&1/t==-PB?"-0":e}var pE=uE;var AB=/\s/;function DB(t){for(var e=t.length;e--&&AB.test(t.charAt(e)););return e}var fE=DB;var IB=/^\s+/;function FB(t){return t&&t.slice(0,fE(t)+1).replace(IB,"")}var dE=FB;function CB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Dr=CB;var mE=NaN,NB=/^[-+]0x[0-9a-f]+$/i,OB=/^0b[01]+$/i,LB=/^0o[0-7]+$/i,UB=parseInt;function VB(t){if(typeof t=="number")return t;if(Ar(t))return mE;if(Dr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Dr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=dE(t);var r=OB.test(t);return r||LB.test(t)?UB(t.slice(2),r?2:8):NB.test(t)?mE:+t}var hE=VB;var gE=1/0,BB=17976931348623157e292;function WB(t){if(!t)return t===0?t:0;if(t=hE(t),t===gE||t===-gE){var e=t<0?-1:1;return e*BB}return t===t?t:0}var Ma=WB;function HB(t){var e=Ma(t),r=e%1;return e===e?r?e-r:e:0}var Sp=HB;function $B(t){return t}var Vt=$B;var jB="[object AsyncFunction]",qB="[object Function]",zB="[object GeneratorFunction]",GB="[object Proxy]";function KB(t){if(!Dr(t))return!1;var e=vn(t);return e==qB||e==zB||e==jB||e==GB}var vp=KB;var QB=_t["__core-js_shared__"],bp=QB;var yE=function(){var t=/[^.]+$/.exec(bp&&bp.keys&&bp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function ZB(t){return!!yE&&yE in t}var xE=ZB;var YB=Function.prototype,XB=YB.toString;function JB(t){if(t!=null){try{return XB.call(t)}catch{}try{return t+""}catch{}}return""}var di=JB;var eW=/[\\^$.*+?()[\]{}|]/g,tW=/^\[object .+?Constructor\]$/,rW=Function.prototype,nW=Object.prototype,iW=rW.toString,oW=nW.hasOwnProperty,aW=RegExp("^"+iW.call(oW).replace(eW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function sW(t){if(!Dr(t)||xE(t))return!1;var e=vp(t)?aW:tW;return e.test(di(t))}var TE=sW;function cW(t,e){return t?.[e]}var SE=cW;function lW(t,e){var r=SE(t,e);return TE(r)?r:void 0}var fr=lW;var uW=fr(_t,"WeakMap"),Do=uW;var pW=Do&&new Do,_x=pW;var vE=Object.create,fW=function(){function t(){}return function(e){if(!Dr(e))return{};if(vE)return vE(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),wp=fW;function dW(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var bE=dW;function mW(){}var Pa=mW;var hW=4294967295;function _p(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=hW,this.__views__=[]}_p.prototype=wp(Pa.prototype);_p.prototype.constructor=_p;var Aa=_p;function gW(){}var Ep=gW;var yW=_x?function(t){return _x.get(t)}:Ep,Rp=yW;var xW={},Ex=xW;var TW=Object.prototype,SW=TW.hasOwnProperty;function vW(t){for(var e=t.name+"",r=Ex[e],n=SW.call(Ex,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Da=vW;function kp(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}kp.prototype=wp(Pa.prototype);kp.prototype.constructor=kp;var Hi=kp;function bW(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var $i=bW;function wW(t){if(t instanceof Aa)return t.clone();var e=new Hi(t.__wrapped__,t.__chain__);return e.__actions__=$i(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var wE=wW;var _W=Object.prototype,EW=_W.hasOwnProperty;function Mp(t){if(Yt(t)&&!Le(t)&&!(t instanceof Aa)){if(t instanceof Hi)return t;if(EW.call(t,"__wrapped__"))return wE(t)}return new Hi(t)}Mp.prototype=Pa.prototype;Mp.prototype.constructor=Mp;var _E=Mp;function RW(t){var e=Da(t),r=_E[e];if(typeof r!="function"||!(e in Aa.prototype))return!1;if(t===r)return!0;var n=Rp(r);return!!n&&t===n[0]}var Rx=RW;var kW=800,MW=16,PW=Date.now;function AW(t){var e=0,r=0;return function(){var n=PW(),i=MW-(n-r);if(r=n,i>0){if(++e>=kW)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var EE=AW;function DW(t){return function(){return t}}var RE=DW;var IW=function(){try{var t=fr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Ia=IW;var FW=Ia?function(t,e){return Ia(t,"toString",{configurable:!0,enumerable:!1,value:RE(e),writable:!0})}:Vt,kE=FW;var CW=EE(kE),Pp=CW;function NW(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Ap=NW;function OW(t){return t!==t}var ME=OW;function LW(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var PE=LW;function UW(t,e,r){return e===e?PE(t,e,r):Ap(t,ME,r)}var Dp=UW;function VW(t,e){var r=t==null?0:t.length;return!!r&&Dp(t,e,0)>-1}var AE=VW;var BW=9007199254740991,WW=/^(?:0|[1-9]\d*)$/;function HW(t,e){var r=typeof t;return e=e??BW,!!e&&(r=="number"||r!="symbol"&&WW.test(t))&&t>-1&&t%1==0&&t<e}var Fa=HW;function $W(t,e,r){e=="__proto__"&&Ia?Ia(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var DE=$W;function jW(t,e){return t===e||t!==t&&e!==e}var Ca=jW;var IE=Math.max;function qW(t,e,r){return e=IE(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=IE(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),bE(t,this,l)}}var Ip=qW;function zW(t,e){return Pp(Ip(t,e,Vt),t+"")}var Na=zW;var GW=9007199254740991;function KW(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=GW}var Oa=KW;function QW(t){return t!=null&&Oa(t.length)&&!vp(t)}var Un=QW;function ZW(t,e,r){if(!Dr(r))return!1;var n=typeof e;return(n=="number"?Un(r)&&Fa(e,r.length):n=="string"&&e in r)?Ca(r[e],t):!1}var Io=ZW;var YW=Object.prototype;function XW(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||YW;return t===r}var FE=XW;function JW(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Fp=JW;var eH="[object Arguments]";function tH(t){return Yt(t)&&vn(t)==eH}var kx=tH;var CE=Object.prototype,rH=CE.hasOwnProperty,nH=CE.propertyIsEnumerable,iH=kx(function(){return arguments}())?kx:function(t){return Yt(t)&&rH.call(t,"callee")&&!nH.call(t,"callee")},La=iH;function oH(){return!1}var NE=oH;var UE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,OE=UE&&typeof module=="object"&&module&&!module.nodeType&&module,aH=OE&&OE.exports===UE,LE=aH?_t.Buffer:void 0,sH=LE?LE.isBuffer:void 0,cH=sH||NE,Ec=cH;var lH="[object Arguments]",uH="[object Array]",pH="[object Boolean]",fH="[object Date]",dH="[object Error]",mH="[object Function]",hH="[object Map]",gH="[object Number]",yH="[object Object]",xH="[object RegExp]",TH="[object Set]",SH="[object String]",vH="[object WeakMap]",bH="[object ArrayBuffer]",wH="[object DataView]",_H="[object Float32Array]",EH="[object Float64Array]",RH="[object Int8Array]",kH="[object Int16Array]",MH="[object Int32Array]",PH="[object Uint8Array]",AH="[object Uint8ClampedArray]",DH="[object Uint16Array]",IH="[object Uint32Array]",Ye={};Ye[_H]=Ye[EH]=Ye[RH]=Ye[kH]=Ye[MH]=Ye[PH]=Ye[AH]=Ye[DH]=Ye[IH]=!0;Ye[lH]=Ye[uH]=Ye[bH]=Ye[pH]=Ye[wH]=Ye[fH]=Ye[dH]=Ye[mH]=Ye[hH]=Ye[gH]=Ye[yH]=Ye[xH]=Ye[TH]=Ye[SH]=Ye[vH]=!1;function FH(t){return Yt(t)&&Oa(t.length)&&!!Ye[vn(t)]}var VE=FH;function CH(t){return function(e){return t(e)}}var Ua=CH;var BE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Rc=BE&&typeof module=="object"&&module&&!module.nodeType&&module,NH=Rc&&Rc.exports===BE,Mx=NH&&Tp.process,OH=function(){try{var t=Rc&&Rc.require&&Rc.require("util").types;return t||Mx&&Mx.binding&&Mx.binding("util")}catch{}}(),Px=OH;var WE=Px&&Px.isTypedArray,LH=WE?Ua(WE):VE,Cp=LH;var UH=Object.prototype,VH=UH.hasOwnProperty;function BH(t,e){var r=Le(t),n=!r&&La(t),i=!r&&!n&&Ec(t),o=!r&&!n&&!i&&Cp(t),s=r||n||i||o,l=s?Fp(t.length,String):[],u=l.length;for(var f in t)(e||VH.call(t,f))&&!(s&&(f=="length"||i&&(f=="offset"||f=="parent")||o&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||Fa(f,u)))&&l.push(f);return l}var HE=BH;function WH(t,e){return function(r){return t(e(r))}}var $E=WH;var HH=$E(Object.keys,Object),jE=HH;var $H=Object.prototype,jH=$H.hasOwnProperty;function qH(t){if(!FE(t))return jE(t);var e=[];for(var r in Object(t))jH.call(t,r)&&r!="constructor"&&e.push(r);return e}var qE=qH;function zH(t){return Un(t)?HE(t):qE(t)}var ji=zH;var GH=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,KH=/^\w*$/;function QH(t,e){if(Le(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Ar(t)?!0:KH.test(t)||!GH.test(t)||e!=null&&t in Object(e)}var Va=QH;var ZH=fr(Object,"create"),mi=ZH;function YH(){this.__data__=mi?mi(null):{},this.size=0}var zE=YH;function XH(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var GE=XH;var JH="__lodash_hash_undefined__",e$=Object.prototype,t$=e$.hasOwnProperty;function r$(t){var e=this.__data__;if(mi){var r=e[t];return r===JH?void 0:r}return t$.call(e,t)?e[t]:void 0}var KE=r$;var n$=Object.prototype,i$=n$.hasOwnProperty;function o$(t){var e=this.__data__;return mi?e[t]!==void 0:i$.call(e,t)}var QE=o$;var a$="__lodash_hash_undefined__";function s$(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=mi&&e===void 0?a$:e,this}var ZE=s$;function Ba(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ba.prototype.clear=zE;Ba.prototype.delete=GE;Ba.prototype.get=KE;Ba.prototype.has=QE;Ba.prototype.set=ZE;var Ax=Ba;function c$(){this.__data__=[],this.size=0}var YE=c$;function l$(t,e){for(var r=t.length;r--;)if(Ca(t[r][0],e))return r;return-1}var qi=l$;var u$=Array.prototype,p$=u$.splice;function f$(t){var e=this.__data__,r=qi(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():p$.call(e,r,1),--this.size,!0}var XE=f$;function d$(t){var e=this.__data__,r=qi(e,t);return r<0?void 0:e[r][1]}var JE=d$;function m$(t){return qi(this.__data__,t)>-1}var e0=m$;function h$(t,e){var r=this.__data__,n=qi(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var t0=h$;function Wa(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Wa.prototype.clear=YE;Wa.prototype.delete=XE;Wa.prototype.get=JE;Wa.prototype.has=e0;Wa.prototype.set=t0;var zi=Wa;var g$=fr(_t,"Map"),Gi=g$;function y$(){this.size=0,this.__data__={hash:new Ax,map:new(Gi||zi),string:new Ax}}var r0=y$;function x$(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var n0=x$;function T$(t,e){var r=t.__data__;return n0(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Ki=T$;function S$(t){var e=Ki(this,t).delete(t);return this.size-=e?1:0,e}var i0=S$;function v$(t){return Ki(this,t).get(t)}var o0=v$;function b$(t){return Ki(this,t).has(t)}var a0=b$;function w$(t,e){var r=Ki(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var s0=w$;function Ha(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ha.prototype.clear=r0;Ha.prototype.delete=i0;Ha.prototype.get=o0;Ha.prototype.has=a0;Ha.prototype.set=s0;var Fo=Ha;var _$="Expected a function";function Dx(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(_$);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Dx.Cache||Fo),r}Dx.Cache=Fo;var kc=Dx;var E$=500;function R$(t){var e=kc(t,function(n){return r.size===E$&&r.clear(),n}),r=e.cache;return e}var c0=R$;var k$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M$=/\\(\\)?/g,P$=c0(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(k$,function(r,n,i,o){e.push(i?o.replace(M$,"$1"):n||r)}),e}),l0=P$;function A$(t){return t==null?"":pE(t)}var bn=A$;function D$(t,e){return Le(t)?t:Va(t,e)?[t]:l0(bn(t))}var Np=D$;var I$=1/0;function F$(t){if(typeof t=="string"||Ar(t))return t;var e=t+"";return e=="0"&&1/t==-I$?"-0":e}var Qi=F$;function C$(t,e){e=Np(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Qi(e[r++])];return r&&r==n?t:void 0}var $a=C$;function N$(t,e,r){var n=t==null?void 0:$a(t,e);return n===void 0?r:n}var Co=N$;function O$(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var ja=O$;var u0=Zt?Zt.isConcatSpreadable:void 0;function L$(t){return Le(t)||La(t)||!!(u0&&t&&t[u0])}var p0=L$;function f0(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=p0),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?f0(l,e-1,r,n,i):ja(i,l):n||(i[i.length]=l)}return i}var qa=f0;function U$(t){var e=t==null?0:t.length;return e?qa(t,1):[]}var tt=U$;function V$(t){return Pp(Ip(t,void 0,tt),t+"")}var d0=V$;function B$(t){return function(e){return t?.[e]}}var m0=B$;var W$={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},H$=m0(W$),h0=H$;var $$=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,j$="\\u0300-\\u036f",q$="\\ufe20-\\ufe2f",z$="\\u20d0-\\u20ff",G$=j$+q$+z$,K$="["+G$+"]",Q$=RegExp(K$,"g");function Z$(t){return t=bn(t),t&&t.replace($$,h0).replace(Q$,"")}var Ix=Z$;function Y$(){this.__data__=new zi,this.size=0}var g0=Y$;function X$(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var y0=X$;function J$(t){return this.__data__.get(t)}var x0=J$;function e3(t){return this.__data__.has(t)}var T0=e3;var t3=200;function r3(t,e){var r=this.__data__;if(r instanceof zi){var n=r.__data__;if(!Gi||n.length<t3-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Fo(n)}return r.set(t,e),this.size=r.size,this}var S0=r3;function za(t){var e=this.__data__=new zi(t);this.size=e.size}za.prototype.clear=g0;za.prototype.delete=y0;za.prototype.get=x0;za.prototype.has=T0;za.prototype.set=S0;var Ga=za;function n3(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var Op=n3;function i3(){return[]}var v0=i3;var o3=Object.prototype,a3=o3.propertyIsEnumerable,b0=Object.getOwnPropertySymbols,s3=b0?function(t){return t==null?[]:(t=Object(t),Op(b0(t),function(e){return a3.call(t,e)}))}:v0,w0=s3;function c3(t,e,r){var n=e(t);return Le(t)?n:ja(n,r(t))}var _0=c3;function l3(t){return _0(t,ji,w0)}var Fx=l3;var u3=fr(_t,"DataView"),Lp=u3;var p3=fr(_t,"Promise"),Up=p3;var f3=fr(_t,"Set"),Zi=f3;var E0="[object Map]",d3="[object Object]",R0="[object Promise]",k0="[object Set]",M0="[object WeakMap]",P0="[object DataView]",m3=di(Lp),h3=di(Gi),g3=di(Up),y3=di(Zi),x3=di(Do),No=vn;(Lp&&No(new Lp(new ArrayBuffer(1)))!=P0||Gi&&No(new Gi)!=E0||Up&&No(Up.resolve())!=R0||Zi&&No(new Zi)!=k0||Do&&No(new Do)!=M0)&&(No=function(t){var e=vn(t),r=e==d3?t.constructor:void 0,n=r?di(r):"";if(n)switch(n){case m3:return P0;case h3:return E0;case g3:return R0;case y3:return k0;case x3:return M0}return e});var Cx=No;var T3=_t.Uint8Array,Nx=T3;function S3(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return ja(Le(r)?$i(r):[r],qa(e,1))}var Mc=S3;var v3="__lodash_hash_undefined__";function b3(t){return this.__data__.set(t,v3),this}var A0=b3;function w3(t){return this.__data__.has(t)}var D0=w3;function Vp(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Fo;++e<r;)this.add(t[e])}Vp.prototype.add=Vp.prototype.push=A0;Vp.prototype.has=D0;var Bp=Vp;function _3(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var I0=_3;function E3(t,e){return t.has(e)}var Wp=E3;var R3=1,k3=2;function M3(t,e,r,n,i,o){var s=r&R3,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var f=o.get(t),d=o.get(e);if(f&&d)return f==e&&d==t;var h=-1,g=!0,x=r&k3?new Bp:void 0;for(o.set(t,e),o.set(e,t);++h<l;){var v=t[h],w=e[h];if(n)var N=s?n(w,v,h,e,t,o):n(v,w,h,t,e,o);if(N!==void 0){if(N)continue;g=!1;break}if(x){if(!I0(e,function(A,U){if(!Wp(x,U)&&(v===A||i(v,A,r,n,o)))return x.push(U)})){g=!1;break}}else if(!(v===w||i(v,w,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var Hp=M3;function P3(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var F0=P3;function A3(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Ka=A3;var D3=1,I3=2,F3="[object Boolean]",C3="[object Date]",N3="[object Error]",O3="[object Map]",L3="[object Number]",U3="[object RegExp]",V3="[object Set]",B3="[object String]",W3="[object Symbol]",H3="[object ArrayBuffer]",$3="[object DataView]",C0=Zt?Zt.prototype:void 0,Ox=C0?C0.valueOf:void 0;function j3(t,e,r,n,i,o,s){switch(r){case $3:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case H3:return!(t.byteLength!=e.byteLength||!o(new Nx(t),new Nx(e)));case F3:case C3:case L3:return Ca(+t,+e);case N3:return t.name==e.name&&t.message==e.message;case U3:case B3:return t==e+"";case O3:var l=F0;case V3:var u=n&D3;if(l||(l=Ka),t.size!=e.size&&!u)return!1;var f=s.get(t);if(f)return f==e;n|=I3,s.set(t,e);var d=Hp(l(t),l(e),n,i,o,s);return s.delete(t),d;case W3:if(Ox)return Ox.call(t)==Ox.call(e)}return!1}var N0=j3;var q3=1,z3=Object.prototype,G3=z3.hasOwnProperty;function K3(t,e,r,n,i,o){var s=r&q3,l=Fx(t),u=l.length,f=Fx(e),d=f.length;if(u!=d&&!s)return!1;for(var h=u;h--;){var g=l[h];if(!(s?g in e:G3.call(e,g)))return!1}var x=o.get(t),v=o.get(e);if(x&&v)return x==e&&v==t;var w=!0;o.set(t,e),o.set(e,t);for(var N=s;++h<u;){g=l[h];var A=t[g],U=e[g];if(n)var Z=s?n(U,A,g,e,t,o):n(A,U,g,t,e,o);if(!(Z===void 0?A===U||i(A,U,r,n,o):Z)){w=!1;break}N||(N=g=="constructor")}if(w&&!N){var ne=t.constructor,he=e.constructor;ne!=he&&"constructor"in t&&"constructor"in e&&!(typeof ne=="function"&&ne instanceof ne&&typeof he=="function"&&he instanceof he)&&(w=!1)}return o.delete(t),o.delete(e),w}var O0=K3;var Q3=1,L0="[object Arguments]",U0="[object Array]",$p="[object Object]",Z3=Object.prototype,V0=Z3.hasOwnProperty;function Y3(t,e,r,n,i,o){var s=Le(t),l=Le(e),u=s?U0:Cx(t),f=l?U0:Cx(e);u=u==L0?$p:u,f=f==L0?$p:f;var d=u==$p,h=f==$p,g=u==f;if(g&&Ec(t)){if(!Ec(e))return!1;s=!0,d=!1}if(g&&!d)return o||(o=new Ga),s||Cp(t)?Hp(t,e,r,n,i,o):N0(t,e,u,r,n,i,o);if(!(r&Q3)){var x=d&&V0.call(t,"__wrapped__"),v=h&&V0.call(e,"__wrapped__");if(x||v){var w=x?t.value():t,N=v?e.value():e;return o||(o=new Ga),i(w,N,r,n,o)}}return g?(o||(o=new Ga),O0(t,e,r,n,i,o)):!1}var B0=Y3;function W0(t,e,r,n,i){return t===e?!0:t==null||e==null||!Yt(t)&&!Yt(e)?t!==t&&e!==e:B0(t,e,r,n,W0,i)}var Qa=W0;var X3=1,J3=2;function ej(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var u=l[0],f=t[u],d=l[1];if(s&&l[2]){if(f===void 0&&!(u in t))return!1}else{var h=new Ga;if(n)var g=n(f,d,u,t,e,h);if(!(g===void 0?Qa(d,f,X3|J3,n,h):g))return!1}}return!0}var H0=ej;function tj(t){return t===t&&!Dr(t)}var jp=tj;function rj(t){for(var e=ji(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,jp(i)]}return e}var $0=rj;function nj(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var qp=nj;function ij(t){var e=$0(t);return e.length==1&&e[0][2]?qp(e[0][0],e[0][1]):function(r){return r===t||H0(r,t,e)}}var j0=ij;function oj(t,e){return t!=null&&e in Object(t)}var q0=oj;function aj(t,e,r){e=Np(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=Qi(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Oa(i)&&Fa(s,i)&&(Le(t)||La(t)))}var z0=aj;function sj(t,e){return t!=null&&z0(t,e,q0)}var G0=sj;var cj=1,lj=2;function uj(t,e){return Va(t)&&jp(e)?qp(Qi(t),e):function(r){var n=Co(r,t);return n===void 0&&n===e?G0(r,t):Qa(e,n,cj|lj)}}var K0=uj;function pj(t){return function(e){return e?.[t]}}var zp=pj;function fj(t){return function(e){return $a(e,t)}}var Q0=fj;function dj(t){return Va(t)?zp(Qi(t)):Q0(t)}var Z0=dj;function mj(t){return typeof t=="function"?t:t==null?Vt:typeof t=="object"?Le(t)?K0(t[0],t[1]):j0(t):Z0(t)}var Vn=mj;function hj(t,e,r,n){for(var i=-1,o=t==null?0:t.length;++i<o;){var s=t[i];e(n,s,r(s),t)}return n}var Y0=hj;function gj(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),l=s.length;l--;){var u=s[t?l:++i];if(r(o[u],u,o)===!1)break}return e}}var X0=gj;var yj=X0(),J0=yj;function xj(t,e){return t&&J0(t,e,ji)}var eR=xj;function Tj(t,e){return function(r,n){if(r==null)return r;if(!Un(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var tR=Tj;var Sj=tR(eR),Gp=Sj;function vj(t,e,r,n){return Gp(t,function(i,o,s){e(n,i,r(i),s)}),n}var rR=vj;function bj(t,e){return function(r,n){var i=Le(r)?Y0:rR,o=e?e():{};return i(r,t,Vn(n,2),o)}}var nR=bj;function wj(t){return Yt(t)&&Un(t)}var iR=wj;function _j(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var oR=_j;function Ej(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Kp=Ej;var aR=/[\\^$.*+?()[\]{}|]/g,Rj=RegExp(aR.source);function kj(t){return t=bn(t),t&&Rj.test(t)?t.replace(aR,"\\$&"):t}var Ir=kj;var Mj=Math.max,Pj=Math.min;function Aj(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=Sp(r),i=r<0?Mj(n+i,0):Pj(i,n-1)),Ap(t,Vn(e,3),i,!0)}var Pc=Aj;function Dj(t,e){var r=-1,n=Un(t)?Array(t.length):[];return Gp(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var sR=Dj;var Ij="Expected a function",Fj=8,Cj=32,Nj=128,Oj=256;function Lj(t){return d0(function(e){var r=e.length,n=r,i=Hi.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(Ij);if(i&&!s&&Da(o)=="wrapper")var s=new Hi([],!0)}for(n=s?n:r;++n<r;){o=e[n];var l=Da(o),u=l=="wrapper"?Rp(o):void 0;u&&Rx(u[0])&&u[1]==(Nj|Fj|Cj|Oj)&&!u[4].length&&u[9]==1?s=s[Da(u[0])].apply(s,u[3]):s=o.length==1&&Rx(o)?s[l]():s.thru(o)}return function(){var f=arguments,d=f[0];if(s&&f.length==1&&Le(d))return s.plant(d).value();for(var h=0,g=r?e[h].apply(this,f):d;++h<r;)g=e[h].call(this,g);return g}})}var cR=Lj;var Uj=cR(),Lx=Uj;var Vj=Object.prototype,Bj=Vj.hasOwnProperty,Wj=nR(function(t,e,r){Bj.call(t,r)?t[r].push(e):DE(t,r,[e])}),Ux=Wj;function Hj(t,e){return t>e}var lR=Hj;function $j(t,e){return Yr(e,function(r){return t[r]})}var uR=$j;function jj(t){return t==null?[]:uR(t,ji(t))}var pR=jj;function qj(t,e){return Qa(t,e)}var hi=qj;function zj(t,e){return t<e}var fR=zj;function Gj(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(l===void 0?s===s&&!Ar(s):r(s,l)))var l=s,u=o}return u}var Qp=Gj;function Kj(t,e){return t&&t.length?Qp(t,Vn(e,2),lR):void 0}var Vx=Kj;function Qj(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var dR=Qj;function Zj(t){return t&&t.length?Qp(t,Vt,fR):void 0}var Bx=Zj;function Yj(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var mR=Yj;function Xj(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Ar(t),s=e!==void 0,l=e===null,u=e===e,f=Ar(e);if(!l&&!f&&!o&&t>e||o&&s&&u&&!l&&!f||n&&s&&u||!r&&u||!i)return 1;if(!n&&!o&&!f&&t<e||f&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!u)return-1}return 0}var hR=Xj;function Jj(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;++n<s;){var u=hR(i[n],o[n]);if(u){if(n>=l)return u;var f=r[n];return u*(f=="desc"?-1:1)}}return t.index-e.index}var gR=Jj;function eq(t,e,r){e.length?e=Yr(e,function(o){return Le(o)?function(s){return $a(s,o.length===1?o[0]:o)}:o}):e=[Vt];var n=-1;e=Yr(e,Ua(Vn));var i=sR(t,function(o,s,l){var u=Yr(e,function(f){return f(o)});return{criteria:u,index:++n,value:o}});return mR(i,function(o,s){return gR(o,s,r)})}var yR=eq;var tq=9007199254740991,rq=Math.floor;function nq(t,e){var r="";if(!t||e<1||e>tq)return r;do e%2&&(r+=t),e=rq(e/2),e&&(t+=t);while(e);return r}var xR=nq;function iq(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var TR=iq;var oq=Array.prototype,SR=oq.splice;function aq(t,e,r,n){var i=n?TR:Dp,o=-1,s=e.length,l=t;for(t===e&&(e=$i(e)),r&&(l=Yr(t,Ua(r)));++o<s;)for(var u=0,f=e[o],d=r?r(f):f;(u=i(l,d,u,n))>-1;)l!==t&&SR.call(l,u,1),SR.call(t,u,1);return t}var vR=aq;function sq(t,e){return t&&t.length&&e&&e.length?vR(t,e):t}var bR=sq;var cq=Na(bR),Xt=cq;var lq=Math.floor,uq=Math.random;function pq(t,e){return t+lq(uq()*(e-t+1))}var wR=pq;var fq=Math.ceil,dq=Math.max;function mq(t,e,r,n){for(var i=-1,o=dq(fq((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var _R=mq;function hq(t){return function(e,r,n){return n&&typeof n!="number"&&Io(e,r,n)&&(r=n=void 0),e=Ma(e),r===void 0?(r=e,e=0):r=Ma(r),n=n===void 0?e<r?1:-1:Ma(n),_R(e,r,n,t)}}var ER=hq;var gq=ER(),Wx=gq;function yq(t,e,r){return(r?Io(t,e,r):e===void 0)?e=1:e=Sp(e),xR(bn(t),e)}var Hx=yq;function xq(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=wR(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var Zp=xq;function Tq(t){return Zp($i(t))}var RR=Tq;function Sq(t){return Zp(pR(t))}var kR=Sq;function vq(t){var e=Le(t)?RR:kR;return e(t)}var $x=vq;var bq=Na(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Io(t,e[0],e[1])?e=[]:r>2&&Io(e[0],e[1],e[2])&&(e=[e[0]]),yR(t,qa(e,1),[])}),jx=bq;function wq(t,e){return t&&t.length?dR(t,Vn(e,2)):0}var Yp=wq;var _q=1/0,Eq=Zi&&1/Ka(new Zi([,-0]))[1]==_q?function(t){return new Zi(t)}:Ep,MR=Eq;var Rq=200;function kq(t,e,r){var n=-1,i=AE,o=t.length,s=!0,l=[],u=l;if(r)s=!1,i=oR;else if(o>=Rq){var f=e?null:MR(t);if(f)return Ka(f);s=!1,i=Wp,u=new Bp}else u=e?[]:l;e:for(;++n<o;){var d=t[n],h=e?e(d):d;if(d=r||d!==0?d:0,s&&h===h){for(var g=u.length;g--;)if(u[g]===h)continue e;e&&u.push(h),l.push(d)}else i(u,h,r)||(u!==l&&u.push(h),l.push(d))}return l}var Xp=kq;function Mq(t){return t&&t.length?Xp(t):[]}var gi=Mq;function Pq(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?Xp(t,void 0,e):[]}var Ac=Pq;var Aq=Math.max;function Dq(t){if(!(t&&t.length))return[];var e=0;return t=Op(t,function(r){if(iR(r))return e=Aq(r.length,e),!0}),Fp(e,function(r){return Yr(t,zp(r))})}var PR=Dq;var Iq=Na(PR),xt=Iq;var Jp=class{constructor(){this.commands={clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0}}};var Dc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Bt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{Xt(this.listeners,e)}}}};var ef={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var Ic=class{constructor(){this.notifier=new Bt;this.mocks={...ef};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(Cq(n,r))return Co(i,e)??Co(this.mocks,e)}return Co(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function Cq(t,e){return t.languageId===e.languageId}var tf={hideInferenceWarning:!1,tutorialProgress:{}};var Fc=class{constructor(){this.data={...tf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var Cc=class{async showMessage(e,r,n,...i){}};var rf=class{constructor(){this.configuration=new Ic;this.messages=new Cc;this.keyValueStore=new Fc;this.clipboard=new Dc;this.capabilities=new Jp;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=Za;this.onDidCloseTextDocument=Za;this.onDidChangeActiveTextEditor=Za;this.onDidChangeVisibleTextEditors=Za;this.onDidChangeTextEditorSelection=Za;this.onDidChangeTextEditorVisibleRanges=Za}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>Xt(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function Za(){return{dispose(){}}}var se=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new H(this,this)}concise(){return`${this.line}:${this.character}`}toString(){return this.concise()}};function AR(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var H=class t{constructor(...e){let[r,n]=e.length===2?e:[new se(e[0],e[1]),new se(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof se?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new Te(this.end,this.start):new Te(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}toString(){return this.concise()}};function Nq(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function Oq(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function DR(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var nf=DR(Nq),of=DR(Oq);function Xr(t,e,r){return e.lastIndex=0,Array.from(t.matchAll(e),r)}function Nc(t,e){return t.lastIndex=0,t.test(e)}function IR(t,e){return t.lastIndex=0,e.match(t)}function Oc(t,e){return Xr(t,e,r=>({index:r.index,text:r[0]}))}var Ya=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var af=class extends Ya{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function Lc(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function rt(t,e,r,...n){return t.showMessage("error",e,r,...n)}var oe=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(oe||{});var{supported:Je,unsupported:Wce,notApplicable:FR}=oe,qx={ifStatement:Je,disqualifyDelimiter:Je,"comment.line":Je,"comment.block":Je,"string.singleLine":Je,"textFragment.comment.line":Je,"textFragment.comment.block":Je,"textFragment.string.singleLine":Je,class:Je,className:Je,namedFunction:Je,"name.function":Je,"name.class":Je,"name.field":Je,functionName:Je,"name.argument.formal":Je,"name.argument.formal.iteration":Je,"name.variable":Je,"value.variable":Je,"name.assignment":Je,"value.assignment":Je,"statement.class":Je,"type.class":Je,"type.field":Je,"value.argument.formal":FR,"value.argument.formal.iteration":FR};var{supported:qce,unsupported:zce,notApplicable:Gce}=oe;var{supported:CR,unsupported:Xce,notApplicable:Jce}=oe,Lq={...qx,"value.argument.formal":CR,"value.argument.formal.iteration":CR};var{supported:nle,unsupported:ile,notApplicable:ole}=oe;var{supported:Uc,unsupported:Uq,notApplicable:lle}=oe,zx={"comment.block":Uc,"string.singleLine":Uc,"name.iteration.block":Uc,"name.iteration.document":Uc,disqualifyDelimiter:Uc,"comment.line":Uq};var{supported:dle,unsupported:mle,notApplicable:hle}=oe;var{supported:Tle,notApplicable:Sle}=oe;var{supported:_le,notApplicable:Ele}=oe;var{supported:z,unsupported:Ple,notApplicable:Jr}=oe,Gx={list:z,map:z,ifStatement:z,regularExpression:z,switchStatementSubject:z,fieldAccess:z,disqualifyDelimiter:z,"textFragment.string.singleLine":z,"textFragment.string.multiLine":z,"textFragment.comment.line":z,"textFragment.comment.block":z,statement:z,"statement.iteration.document":z,"statement.iteration.block":z,class:z,className:z,anonymousFunction:z,namedFunction:z,"namedFunction.iteration.document":z,"namedFunction.method":z,"namedFunction.method.iteration.class":z,"namedFunction.constructor":z,functionName:z,"functionName.iteration.document":z,"functionName.method":z,"functionName.method.iteration.class":z,"functionName.constructor":z,functionCall:z,"functionCall.constructor":z,functionCallee:z,"functionCallee.constructor":z,"argument.actual":z,"argument.actual.iteration":z,"argument.actual.method":z,"argument.actual.method.iteration":z,"argument.actual.constructor":z,"argument.actual.constructor.iteration":z,"argument.formal":z,"argument.formal.iteration":z,"argument.formal.method":z,"argument.formal.method.iteration":z,"argument.formal.constructor":z,"argument.formal.constructor.iteration":z,"comment.line":z,"comment.block":z,"string.singleLine":z,"string.multiLine":z,"branch.if":z,"branch.if.iteration":z,"branch.try":z,"branch.switchCase":z,"branch.switchCase.iteration":z,"branch.ternary":z,"condition.if":z,"condition.while":z,"condition.doWhile":z,"condition.for":z,"condition.ternary":z,"condition.switchCase":z,"name.argument.formal":z,"name.argument.formal.iteration":z,"name.argument.formal.method":z,"name.argument.formal.method.iteration":z,"name.argument.formal.constructor":z,"name.argument.formal.constructor.iteration":z,"name.foreach":z,"name.assignment":z,"name.assignment.pattern":z,"name.variable":z,"name.variable.pattern":z,"name.function":z,"name.method":z,"name.constructor":z,"name.class":z,"name.field":z,"key.mapPair":z,"key.mapPair.iteration":z,"value.argument.formal":z,"value.argument.formal.iteration":z,"value.argument.formal.method":z,"value.argument.formal.method.iteration":z,"value.argument.formal.constructor":z,"value.argument.formal.constructor.iteration":z,"value.mapPair":z,"value.mapPair.iteration":z,"value.assignment":z,"value.variable":z,"value.variable.pattern":z,"value.foreach":z,"value.return":z,"value.return.lambda":z,"value.field":z},Kx={element:z,tags:z,startTag:z,endTag:z,attribute:z,"key.attribute":z,"value.attribute":z},Vq={...Gx,...Kx,"type.variable":Jr,"type.argument.formal":Jr,"type.argument.formal.iteration":Jr,"type.argument.formal.method":Jr,"type.argument.formal.method.iteration":Jr,"type.argument.formal.constructor":Jr,"type.argument.formal.constructor.iteration":Jr,"type.return":Jr,"type.field":Jr,"type.foreach":Jr,"type.interface":Jr,command:Jr};var{supported:Qx}=oe,Vc={"comment.line":Qx,"comment.block":Qx,map:Qx};var{supported:Lle,unsupported:Ule,notApplicable:Vle}=oe,Bq={...Vc};var{supported:jle,unsupported:qle,notApplicable:zle}=oe,Wq={...Vc};var{supported:Zle,unsupported:Yle,notApplicable:Xle}=oe;var{supported:rue,notApplicable:nue}=oe;var{supported:sue,unsupported:cue,notApplicable:lue}=oe;var{supported:due,unsupported:mue,notApplicable:hue}=oe;var{supported:Tue,notApplicable:Sue}=oe;var{supported:_ue,unsupported:Eue,notApplicable:Rue}=oe;var{supported:Aue,unsupported:Due,notApplicable:Iue}=oe;var{supported:Oue,unsupported:Lue,notApplicable:Uue}=oe;var{supported:Hue,unsupported:$ue,notApplicable:jue}=oe;var{supported:Xa,unsupported:Que,notApplicable:Zue}=oe,Hq={...zx,"namedFunction.iteration":Xa,"namedFunction.iteration.document":Xa,"functionName.iteration":Xa,"functionName.iteration.document":Xa,"comment.line":Xa,disqualifyDelimiter:Xa};var{supported:epe}=oe;var{supported:Jt}=oe,Zx={...Gx,"name.field":Jt,"type.argument.formal":Jt,"type.argument.formal.iteration":Jt,"type.argument.formal.method":Jt,"type.argument.formal.method.iteration":Jt,"type.argument.formal.constructor":Jt,"type.argument.formal.constructor.iteration":Jt,"type.alias":Jt,"type.cast":Jt,"type.field":Jt,"type.interface":Jt,"type.return":Jt,"type.variable":Jt,"value.field":Jt,"value.typeAlias":Jt};var{supported:upe,unsupported:ppe,notApplicable:fpe}=oe,$q={...Zx,...Kx};var{supported:gpe,unsupported:ype,notApplicable:xpe}=oe;var{supported:bpe,unsupported:wpe,notApplicable:_pe}=oe;var Ja=["that","source","instanceReference","keyboard"];var Te=class extends H{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new se(e[0],e[1]),new se(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}toString(){return this.concise()}};function OR({line:t,character:e}){return new se(t,e)}function sf({start:t,end:e}){return new H(OR(t),OR(e))}function en(t){return{type:"line",start:t.start.line,end:t.end.line}}function er({start:t,end:e}){return{type:"character",start:t,end:e}}function Bc(t){return{start:cf(t.start),end:cf(t.end)}}function LR(t){return{anchor:cf(t.anchor),active:cf(t.active)}}function cf({line:t,character:e}){return{line:t,character:e}}function tk(t){return typeof t>"u"||t===null}function jq(t){return typeof t=="object"&&t!==null}function qq(t){return Array.isArray(t)?t:tk(t)?[]:[t]}function zq(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function Gq(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function Kq(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Qq=tk,Zq=jq,Yq=qq,Xq=Gq,Jq=Kq,ez=zq,Tt={isNothing:Qq,isObject:Zq,toArray:Yq,repeat:Xq,isNegativeZero:Jq,extend:ez};function rk(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function Hc(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=rk(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Hc.prototype=Object.create(Error.prototype);Hc.prototype.constructor=Hc;Hc.prototype.toString=function(e){return this.name+": "+rk(this,e)};var dr=Hc;function Yx(t,e,r,n,i){var o="",s="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function Xx(t,e){return Tt.repeat(" ",e-t.length)+t}function tz(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",u,f,d=Math.min(t.line+e.linesAfter,i.length).toString().length,h=e.maxLength-(e.indent+d+3);for(u=1;u<=e.linesBefore&&!(s-u<0);u++)f=Yx(t.buffer,n[s-u],i[s-u],t.position-(n[s]-n[s-u]),h),l=Tt.repeat(" ",e.indent)+Xx((t.line-u+1).toString(),d)+" | "+f.str+`
`+l;for(f=Yx(t.buffer,n[s],i[s],t.position,h),l+=Tt.repeat(" ",e.indent)+Xx((t.line+1).toString(),d)+" | "+f.str+`
`,l+=Tt.repeat("-",e.indent+d+3+f.pos)+`^
`,u=1;u<=e.linesAfter&&!(s+u>=i.length);u++)f=Yx(t.buffer,n[s+u],i[s+u],t.position-(n[s]-n[s+u]),h),l+=Tt.repeat(" ",e.indent)+Xx((t.line+u+1).toString(),d)+" | "+f.str+`
`;return l.replace(/\n$/,"")}var rz=tz,nz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],iz=["scalar","sequence","mapping"];function oz(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function az(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(nz.indexOf(r)===-1)throw new dr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=oz(e.styleAliases||null),iz.indexOf(this.kind)===-1)throw new dr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var It=az;function BR(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function sz(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function eT(t){return this.extend(t)}eT.prototype.extend=function(e){var r=[],n=[];if(e instanceof It)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new dr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof It))throw new dr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new dr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new dr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof It))throw new dr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(eT.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=BR(i,"implicit"),i.compiledExplicit=BR(i,"explicit"),i.compiledTypeMap=sz(i.compiledImplicit,i.compiledExplicit),i};var cz=eT,lz=new It("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),uz=new It("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),pz=new It("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),fz=new cz({explicit:[lz,uz,pz]});function dz(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function mz(){return null}function hz(t){return t===null}var gz=new It("tag:yaml.org,2002:null",{kind:"scalar",resolve:dz,construct:mz,predicate:hz,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function yz(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function xz(t){return t==="true"||t==="True"||t==="TRUE"}function Tz(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Sz=new It("tag:yaml.org,2002:bool",{kind:"scalar",resolve:yz,construct:xz,predicate:Tz,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function vz(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function bz(t){return 48<=t&&t<=55}function wz(t){return 48<=t&&t<=57}function _z(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!vz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!bz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!wz(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function Ez(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function Rz(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Tt.isNegativeZero(t)}var kz=new It("tag:yaml.org,2002:int",{kind:"scalar",resolve:_z,construct:Ez,predicate:Rz,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Mz=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Pz(t){return!(t===null||!Mz.test(t)||t[t.length-1]==="_")}function Az(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var Dz=/^[-+]?[0-9]+e/;function Iz(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Tt.isNegativeZero(t))return"-0.0";return r=t.toString(10),Dz.test(r)?r.replace("e",".e"):r}function Fz(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Tt.isNegativeZero(t))}var Cz=new It("tag:yaml.org,2002:float",{kind:"scalar",resolve:Pz,construct:Az,predicate:Fz,represent:Iz,defaultStyle:"lowercase"}),Nz=fz.extend({implicit:[gz,Sz,kz,Cz]}),Oz=Nz,nk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ik=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Lz(t){return t===null?!1:nk.exec(t)!==null||ik.exec(t)!==null}function Uz(t){var e,r,n,i,o,s,l,u=0,f=null,d,h,g;if(e=nk.exec(t),e===null&&(e=ik.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(d=+e[10],h=+(e[11]||0),f=(d*60+h)*6e4,e[9]==="-"&&(f=-f)),g=new Date(Date.UTC(r,n,i,o,s,l,u)),f&&g.setTime(g.getTime()-f),g}function Vz(t){return t.toISOString()}var Bz=new It("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Lz,construct:Uz,instanceOf:Date,represent:Vz});function Wz(t){return t==="<<"||t===null}var Hz=new It("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Wz}),oT=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function $z(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=oT;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function jz(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=oT,s=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}function qz(t){var e="",r=0,n,i,o=t.length,s=oT;for(n=0;n<o;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function zz(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var Gz=new It("tag:yaml.org,2002:binary",{kind:"scalar",resolve:$z,construct:jz,predicate:zz,represent:qz}),Kz=Object.prototype.hasOwnProperty,Qz=Object.prototype.toString;function Zz(t){if(t===null)return!0;var e=[],r,n,i,o,s,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],s=!1,Qz.call(i)!=="[object Object]")return!1;for(o in i)if(Kz.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function Yz(t){return t!==null?t:[]}var Xz=new It("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Zz,construct:Yz}),Jz=Object.prototype.toString;function eG(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],Jz.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function tG(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var rG=new It("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:eG,construct:tG}),nG=Object.prototype.hasOwnProperty;function iG(t){if(t===null)return!0;var e,r=t;for(e in r)if(nG.call(r,e)&&r[e]!==null)return!1;return!0}function oG(t){return t!==null?t:{}}var aG=new It("tag:yaml.org,2002:set",{kind:"mapping",resolve:iG,construct:oG}),aT=Oz.extend({implicit:[Bz,Hz],explicit:[Gz,Xz,rG,aG]}),Xi=Object.prototype.hasOwnProperty,lf=1,ok=2,ak=3,uf=4,Jx=1,sG=2,WR=3,cG=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,lG=/[\x85\u2028\u2029]/,uG=/[,\[\]\{\}]/,sk=/^(?:!|!!|![a-z\-]+!)$/i,ck=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function HR(t){return Object.prototype.toString.call(t)}function Bn(t){return t===10||t===13}function Lo(t){return t===9||t===32}function mr(t){return t===9||t===32||t===10||t===13}function ts(t){return t===44||t===91||t===93||t===123||t===125}function pG(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function fG(t){return t===120?2:t===117?4:t===85?8:0}function dG(t){return 48<=t&&t<=57?t-48:-1}function $R(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function mG(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var lk=new Array(256),uk=new Array(256);for(Oo=0;Oo<256;Oo++)lk[Oo]=$R(Oo)?1:0,uk[Oo]=$R(Oo);var Oo;function hG(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||aT,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function pk(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=rz(r),new dr(e,r)}function ae(t,e){throw pk(t,e)}function pf(t,e){t.onWarning&&t.onWarning.call(null,pk(t,e))}var jR={YAML:function(e,r,n){var i,o,s;e.version!==null&&ae(e,"duplication of %YAML directive"),n.length!==1&&ae(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&ae(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&ae(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&pf(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&ae(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],sk.test(i)||ae(e,"ill-formed tag handle (first argument) of the TAG directive"),Xi.call(e.tagMap,i)&&ae(e,'there is a previously declared suffix for "'+i+'" tag handle'),ck.test(o)||ae(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{ae(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function Yi(t,e,r,n){var i,o,s,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)s=l.charCodeAt(i),s===9||32<=s&&s<=1114111||ae(t,"expected valid JSON character");else cG.test(l)&&ae(t,"the stream contains non-printable characters");t.result+=l}}function qR(t,e,r,n){var i,o,s,l;for(Tt.isObject(r)||ae(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,l=i.length;s<l;s+=1)o=i[s],Xi.call(e,o)||(e[o]=r[o],n[o]=!0)}function rs(t,e,r,n,i,o,s,l,u){var f,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),f=0,d=i.length;f<d;f+=1)Array.isArray(i[f])&&ae(t,"nested arrays are not supported inside keys"),typeof i=="object"&&HR(i[f])==="[object Object]"&&(i[f]="[object Object]");if(typeof i=="object"&&HR(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(f=0,d=o.length;f<d;f+=1)qR(t,e,o[f],r);else qR(t,e,o,r);else!t.json&&!Xi.call(r,i)&&Xi.call(e,i)&&(t.line=s||t.line,t.lineStart=l||t.lineStart,t.position=u||t.position,ae(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function sT(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ae(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ht(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Lo(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Bn(i))for(sT(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&pf(t,"deficient indentation"),n}function mf(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||mr(r)))}function cT(t,e){e===1?t.result+=" ":e>1&&(t.result+=Tt.repeat(`
`,e-1))}function gG(t,e,r){var n,i,o,s,l,u,f,d,h=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),mr(x)||ts(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),mr(i)||r&&ts(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),mr(i)||r&&ts(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),mr(n))break}else{if(t.position===t.lineStart&&mf(t)||r&&ts(x))break;if(Bn(x))if(u=t.line,f=t.lineStart,d=t.lineIndent,ht(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=u,t.lineStart=f,t.lineIndent=d;break}}l&&(Yi(t,o,s,!1),cT(t,t.line-u),o=s=t.position,l=!1),Lo(x)||(s=t.position+1),x=t.input.charCodeAt(++t.position)}return Yi(t,o,s,!1),t.result?!0:(t.kind=h,t.result=g,!1)}function yG(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Yi(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Bn(r)?(Yi(t,n,i,!0),cT(t,ht(t,!1,e)),n=i=t.position):t.position===t.lineStart&&mf(t)?ae(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);ae(t,"unexpected end of the stream within a single quoted scalar")}function xG(t,e){var r,n,i,o,s,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return Yi(t,r,t.position,!0),t.position++,!0;if(l===92){if(Yi(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),Bn(l))ht(t,!1,e);else if(l<256&&lk[l])t.result+=uk[l],t.position++;else if((s=fG(l))>0){for(i=s,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(s=pG(l))>=0?o=(o<<4)+s:ae(t,"expected hexadecimal character");t.result+=mG(o),t.position++}else ae(t,"unknown escape sequence");r=n=t.position}else Bn(l)?(Yi(t,r,n,!0),cT(t,ht(t,!1,e)),r=n=t.position):t.position===t.lineStart&&mf(t)?ae(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}ae(t,"unexpected end of the stream within a double quoted scalar")}function TG(t,e){var r=!0,n,i,o,s=t.tag,l,u=t.anchor,f,d,h,g,x,v=Object.create(null),w,N,A,U;if(U=t.input.charCodeAt(t.position),U===91)d=93,x=!1,l=[];else if(U===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),U=t.input.charCodeAt(++t.position);U!==0;){if(ht(t,!0,e),U=t.input.charCodeAt(t.position),U===d)return t.position++,t.tag=s,t.anchor=u,t.kind=x?"mapping":"sequence",t.result=l,!0;r?U===44&&ae(t,"expected the node content, but found ','"):ae(t,"missed comma between flow collection entries"),N=w=A=null,h=g=!1,U===63&&(f=t.input.charCodeAt(t.position+1),mr(f)&&(h=g=!0,t.position++,ht(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,ns(t,e,lf,!1,!0),N=t.tag,w=t.result,ht(t,!0,e),U=t.input.charCodeAt(t.position),(g||t.line===n)&&U===58&&(h=!0,U=t.input.charCodeAt(++t.position),ht(t,!0,e),ns(t,e,lf,!1,!0),A=t.result),x?rs(t,l,v,N,w,A,n,i,o):h?l.push(rs(t,null,v,N,w,A,n,i,o)):l.push(w),ht(t,!0,e),U=t.input.charCodeAt(t.position),U===44?(r=!0,U=t.input.charCodeAt(++t.position)):r=!1}ae(t,"unexpected end of the stream within a flow collection")}function SG(t,e){var r,n,i=Jx,o=!1,s=!1,l=e,u=0,f=!1,d,h;if(h=t.input.charCodeAt(t.position),h===124)n=!1;else if(h===62)n=!0;else return!1;for(t.kind="scalar",t.result="";h!==0;)if(h=t.input.charCodeAt(++t.position),h===43||h===45)Jx===i?i=h===43?WR:sG:ae(t,"repeat of a chomping mode identifier");else if((d=dG(h))>=0)d===0?ae(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?ae(t,"repeat of an indentation width identifier"):(l=e+d-1,s=!0);else break;if(Lo(h)){do h=t.input.charCodeAt(++t.position);while(Lo(h));if(h===35)do h=t.input.charCodeAt(++t.position);while(!Bn(h)&&h!==0)}for(;h!==0;){for(sT(t),t.lineIndent=0,h=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&h===32;)t.lineIndent++,h=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),Bn(h)){u++;continue}if(t.lineIndent<l){i===WR?t.result+=Tt.repeat(`
`,o?1+u:u):i===Jx&&o&&(t.result+=`
`);break}for(n?Lo(h)?(f=!0,t.result+=Tt.repeat(`
`,o?1+u:u)):f?(f=!1,t.result+=Tt.repeat(`
`,u+1)):u===0?o&&(t.result+=" "):t.result+=Tt.repeat(`
`,u):t.result+=Tt.repeat(`
`,o?1+u:u),o=!0,s=!0,u=0,r=t.position;!Bn(h)&&h!==0;)h=t.input.charCodeAt(++t.position);Yi(t,r,t.position,!1)}return!0}function zR(t,e){var r,n=t.tag,i=t.anchor,o=[],s,l=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ae(t,"tab characters must not be used in indentation")),!(u!==45||(s=t.input.charCodeAt(t.position+1),!mr(s))));){if(l=!0,t.position++,ht(t,!0,-1)&&t.lineIndent<=e){o.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,ns(t,e,ak,!1,!0),o.push(t.result),ht(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)ae(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function vG(t,e,r){var n,i,o,s,l,u,f=t.tag,d=t.anchor,h={},g=Object.create(null),x=null,v=null,w=null,N=!1,A=!1,U;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=h),U=t.input.charCodeAt(t.position);U!==0;){if(!N&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ae(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(U===63||U===58)&&mr(n))U===63?(N&&(rs(t,h,g,x,v,null,s,l,u),x=v=w=null),A=!0,N=!0,i=!0):N?(N=!1,i=!0):ae(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,U=n;else{if(s=t.line,l=t.lineStart,u=t.position,!ns(t,r,ok,!1,!0))break;if(t.line===o){for(U=t.input.charCodeAt(t.position);Lo(U);)U=t.input.charCodeAt(++t.position);if(U===58)U=t.input.charCodeAt(++t.position),mr(U)||ae(t,"a whitespace character is expected after the key-value separator within a block mapping"),N&&(rs(t,h,g,x,v,null,s,l,u),x=v=w=null),A=!0,N=!1,i=!1,x=t.tag,v=t.result;else if(A)ae(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=f,t.anchor=d,!0}else if(A)ae(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=f,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(N&&(s=t.line,l=t.lineStart,u=t.position),ns(t,e,uf,!0,i)&&(N?v=t.result:w=t.result),N||(rs(t,h,g,x,v,w,s,l,u),x=v=w=null),ht(t,!0,-1),U=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&U!==0)ae(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return N&&rs(t,h,g,x,v,null,s,l,u),A&&(t.tag=f,t.anchor=d,t.kind="mapping",t.result=h),A}function bG(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&ae(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):ae(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!mr(s);)s===33&&(n?ae(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),sk.test(i)||ae(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),uG.test(o)&&ae(t,"tag suffix cannot contain flow indicator characters")}o&&!ck.test(o)&&ae(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{ae(t,"tag name is malformed: "+o)}return r?t.tag=o:Xi.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:ae(t,'undeclared tag handle "'+i+'"'),!0}function wG(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&ae(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!mr(r)&&!ts(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&ae(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function _G(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!mr(n)&&!ts(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&ae(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),Xi.call(t.anchorMap,r)||ae(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],ht(t,!0,-1),!0}function ns(t,e,r,n,i){var o,s,l,u=1,f=!1,d=!1,h,g,x,v,w,N;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=l=uf===r||ak===r,n&&ht(t,!0,-1)&&(f=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;bG(t)||wG(t);)ht(t,!0,-1)?(f=!0,l=o,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=f||i),(u===1||uf===r)&&(lf===r||ok===r?w=e:w=e+1,N=t.position-t.lineStart,u===1?l&&(zR(t,N)||vG(t,N,w))||TG(t,w)?d=!0:(s&&SG(t,w)||yG(t,w)||xG(t,w)?d=!0:_G(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&ae(t,"alias node should not have any properties")):gG(t,w,lf===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(d=l&&zR(t,N))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ae(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),h=0,g=t.implicitTypes.length;h<g;h+=1)if(v=t.implicitTypes[h],v.resolve(t.result)){t.result=v.construct(t.result),t.tag=v.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Xi.call(t.typeMap[t.kind||"fallback"],t.tag))v=t.typeMap[t.kind||"fallback"][t.tag];else for(v=null,x=t.typeMap.multi[t.kind||"fallback"],h=0,g=x.length;h<g;h+=1)if(t.tag.slice(0,x[h].tag.length)===x[h].tag){v=x[h];break}v||ae(t,"unknown tag !<"+t.tag+">"),t.result!==null&&v.kind!==t.kind&&ae(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+v.kind+'", not "'+t.kind+'"'),v.resolve(t.result,t.tag)?(t.result=v.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ae(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function EG(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(ht(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!mr(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&ae(t,"directive name must not be less than one character in length");s!==0;){for(;Lo(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Bn(s));break}if(Bn(s))break;for(r=t.position;s!==0&&!mr(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&sT(t),Xi.call(jR,n)?jR[n](t,n,i):pf(t,'unknown document directive "'+n+'"')}if(ht(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,ht(t,!0,-1)):o&&ae(t,"directives end mark is expected"),ns(t,t.lineIndent-1,uf,!1,!0),ht(t,!0,-1),t.checkLineBreaks&&lG.test(t.input.slice(e,t.position))&&pf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&mf(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,ht(t,!0,-1));return}if(t.position<t.length-1)ae(t,"end of the stream or a document separator is expected");else return}function fk(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new hG(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,ae(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)EG(r);return r.documents}function RG(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=fk(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function kG(t,e){var r=fk(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new dr("expected a single document in the stream, but found more")}}var MG=RG,PG=kG,dk={loadAll:MG,load:PG},mk=Object.prototype.toString,hk=Object.prototype.hasOwnProperty,lT=65279,AG=9,$c=10,DG=13,IG=32,FG=33,CG=34,tT=35,NG=37,OG=38,LG=39,UG=42,gk=44,VG=45,ff=58,BG=61,WG=62,HG=63,$G=64,yk=91,xk=93,jG=96,Tk=123,qG=124,Sk=125,Wt={};Wt[0]="\\0";Wt[7]="\\a";Wt[8]="\\b";Wt[9]="\\t";Wt[10]="\\n";Wt[11]="\\v";Wt[12]="\\f";Wt[13]="\\r";Wt[27]="\\e";Wt[34]='\\"';Wt[92]="\\\\";Wt[133]="\\N";Wt[160]="\\_";Wt[8232]="\\L";Wt[8233]="\\P";var zG=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],GG=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function KG(t,e){var r,n,i,o,s,l,u;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=t.compiledTypeMap.fallback[s],u&&hk.call(u.styleAliases,l)&&(l=u.styleAliases[l]),r[s]=l;return r}function QG(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new dr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Tt.repeat("0",n-e.length)+e}var ZG=1,jc=2;function YG(t){this.schema=t.schema||aT,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Tt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=KG(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?jc:ZG,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function GR(t,e){for(var r=Tt.repeat(" ",e),n=0,i=-1,o="",s,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=l):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function rT(t,e){return`
`+Tt.repeat(" ",t.indent*e)}function XG(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function df(t){return t===IG||t===AG}function qc(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==lT||65536<=t&&t<=1114111}function KR(t){return qc(t)&&t!==lT&&t!==DG&&t!==$c}function QR(t,e,r){var n=KR(t),i=n&&!df(t);return(r?n:n&&t!==gk&&t!==yk&&t!==xk&&t!==Tk&&t!==Sk)&&t!==tT&&!(e===ff&&!i)||KR(e)&&!df(e)&&t===tT||e===ff&&i}function JG(t){return qc(t)&&t!==lT&&!df(t)&&t!==VG&&t!==HG&&t!==ff&&t!==gk&&t!==yk&&t!==xk&&t!==Tk&&t!==Sk&&t!==tT&&t!==OG&&t!==UG&&t!==FG&&t!==qG&&t!==BG&&t!==WG&&t!==LG&&t!==CG&&t!==NG&&t!==$G&&t!==jG}function eK(t){return!df(t)&&t!==ff}function Wc(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function vk(t){var e=/^\n* /;return e.test(t)}var bk=1,nT=2,wk=3,_k=4,es=5;function tK(t,e,r,n,i,o,s,l){var u,f=0,d=null,h=!1,g=!1,x=n!==-1,v=-1,w=JG(Wc(t,0))&&eK(Wc(t,t.length-1));if(e||s)for(u=0;u<t.length;f>=65536?u+=2:u++){if(f=Wc(t,u),!qc(f))return es;w=w&&QR(f,d,l),d=f}else{for(u=0;u<t.length;f>=65536?u+=2:u++){if(f=Wc(t,u),f===$c)h=!0,x&&(g=g||u-v-1>n&&t[v+1]!==" ",v=u);else if(!qc(f))return es;w=w&&QR(f,d,l),d=f}g=g||x&&u-v-1>n&&t[v+1]!==" "}return!h&&!g?w&&!s&&!i(t)?bk:o===jc?es:nT:r>9&&vk(t)?es:s?o===jc?es:nT:g?_k:wk}function rK(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===jc?'""':"''";if(!t.noCompatMode&&(zG.indexOf(e)!==-1||GG.test(e)))return t.quotingType===jc?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function u(f){return XG(t,f)}switch(tK(e,l,t.indent,s,u,t.quotingType,t.forceQuotes&&!n,i)){case bk:return e;case nT:return"'"+e.replace(/'/g,"''")+"'";case wk:return"|"+ZR(e,t.indent)+YR(GR(e,o));case _k:return">"+ZR(e,t.indent)+YR(GR(nK(e,s),o));case es:return'"'+iK(e)+'"';default:throw new dr("impossible error: invalid scalar style")}}()}function ZR(t,e){var r=vk(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function YR(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function nK(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var f=t.indexOf(`
`);return f=f!==-1?f:t.length,r.lastIndex=f,XR(t.slice(0,f),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var l=s[1],u=s[2];o=u[0]===" ",n+=l+(!i&&!o&&u!==""?`
`:"")+XR(u,e),i=o}return n}function XR(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,l=0,u="";n=r.exec(t);)l=n.index,l-i>e&&(o=s>i?s:l,u+=`
`+t.slice(i,o),i=o+1),s=l;return u+=`
`,t.length-i>e&&s>i?u+=t.slice(i,s)+`
`+t.slice(s+1):u+=t.slice(i),u.slice(1)}function iK(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=Wc(t,i),n=Wt[r],!n&&qc(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||QG(r);return e}function oK(t,e,r){var n="",i=t.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(yi(t,e,l,!1,!1)||typeof l>"u"&&yi(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function JR(t,e,r,n){var i="",o=t.tag,s,l,u;for(s=0,l=r.length;s<l;s+=1)u=r[s],t.replacer&&(u=t.replacer.call(r,String(s),u)),(yi(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&yi(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=rT(t,e)),t.dump&&$c===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function aK(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,l,u,f,d;for(s=0,l=o.length;s<l;s+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),u=o[s],f=r[u],t.replacer&&(f=t.replacer.call(r,u,f)),yi(t,e,u,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),yi(t,e,f,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function sK(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),l,u,f,d,h,g;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new dr("sortKeys must be a boolean or a function");for(l=0,u=s.length;l<u;l+=1)g="",(!n||i!=="")&&(g+=rT(t,e)),f=s[l],d=r[f],t.replacer&&(d=t.replacer.call(r,f,d)),yi(t,e+1,f,!0,!0,!0)&&(h=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,h&&(t.dump&&$c===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,h&&(g+=rT(t,e)),yi(t,e+1,d,!0,h)&&(t.dump&&$c===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function ek(t,e,r){var n,i,o,s,l,u;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(u=t.styleMap[l.tag]||l.defaultStyle,mk.call(l.represent)==="[object Function]")n=l.represent(e,u);else if(hk.call(l.represent,u))n=l.represent[u](e,u);else throw new dr("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}function yi(t,e,r,n,i,o,s){t.tag=null,t.dump=r,ek(t,r,!1)||ek(t,r,!0);var l=mk.call(t.dump),u=n,f;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",h,g;if(d&&(h=t.duplicates.indexOf(r),g=h!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[h])t.dump="*ref_"+h;else{if(d&&g&&!t.usedDuplicates[h]&&(t.usedDuplicates[h]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(sK(t,e,t.dump,i),g&&(t.dump="&ref_"+h+t.dump)):(aK(t,e,t.dump),g&&(t.dump="&ref_"+h+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?JR(t,e-1,t.dump,i):JR(t,e,t.dump,i),g&&(t.dump="&ref_"+h+t.dump)):(oK(t,e,t.dump),g&&(t.dump="&ref_"+h+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&rK(t,t.dump,e,o,u);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new dr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(f=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?f="!"+f:f.slice(0,18)==="tag:yaml.org,2002:"?f="!!"+f.slice(18):f="!<"+f+">",t.dump=f+" "+t.dump)}return!0}function cK(t,e){var r=[],n=[],i,o;for(iT(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function iT(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)iT(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)iT(t[n[i]],e,r)}function lK(t,e){e=e||{};var r=new YG(e);r.noRefs||cK(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),yi(r,0,n,!0,!0)?r.dump+`
`:""}var uK=lK,pK={dump:uK};function uT(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Ek=It;var Rk=aT,fK=dk.load,Lfe=dk.loadAll,kk=pK.dump;var Ufe=uT("safeLoad","load"),Vfe=uT("safeLoadAll","loadAll"),Bfe=uT("safeDump","dump");var hf=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=kk(this.data,Object.assign({replacer:gK,schema:mK},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},dK=new Ek("!format",{kind:"scalar",resolve:()=>!1,instanceOf:hf,represent:t=>t.represent()}),mK=Rk.extend({implicit:[dK]}),pT=t=>typeof t=="object"&&t!=null;function hK(t){if(pT(t))return Object.values(t).every(e=>!pT(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!pT(e)&&!Array.isArray(e))}function gK(t,e){return t===""?e:hK(e)?new hf(e,{flowLevel:0}):e}var fT=["breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","foldRegion","followLink","followLinkAside","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.setKeyboardTarget","private.showParseTree","private.getTargets"],xK=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],Pk=[...fT,...xK];var TK=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleDoubleQuotes","tripleSingleQuotes"],SK=["string","any","collectionBoundary"],gf=[...TK,...SK],Uo=["argumentOrParameter","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter"];function Ak(t){return Uo.includes(t.type)}var Dk=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],zc=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},is=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function Gc(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function Vo(t){return t.version>=7}var Ji=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var eo=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function Ik(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function Kc(t){return typeof t=="string"||t instanceof String}function yf(t){let[e,...r]=t;return bK(e,r)}function bK(t,e){let r;if(Kc(t)){let n=t,[i,o,...s]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:s,usePrePhraseSnapshot:!1}}else r=t;return r}function Qc(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function Fk(t){for(let e of t)return!1;return!0}function xi(t){return Object.keys(t)}function Zc(t,e){return`${t}.${e}`}var Nk={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(Ck).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(Ck).join("")}};function Ck(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}function Ok(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,s)=>{let l=r(s),u=o.get(l);return u==null?(o.set(l,[s]),o):(o.get(l).push(s),u.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Ac(i.get(o),e))}),t.flatMap(o=>{let s=r(o),l=i.get(s);if(l==null||l.length===0)return[];let u=l[0];return e(u,o)?(l.shift(),u):[]}))}var Hk=Symbol.for("immer-nothing"),Lk=Symbol.for("immer-draftable"),Fr=Symbol.for("immer-state"),wK=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function hr(t,...e){if(process.env.NODE_ENV!=="production"){let r=wK[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var os=Object.getPrototypeOf;function as(t){return!!t&&!!t[Fr]}function Wo(t){return t?$k(t)||Array.isArray(t)||!!t[Lk]||!!t.constructor?.[Lk]||bf(t)||wf(t):!1}var _K=Object.prototype.constructor.toString();function $k(t){if(!t||typeof t!="object")return!1;let e=os(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===_K}function xf(t,e){vf(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function vf(t){let e=t[Fr];return e?e.type_:Array.isArray(t)?1:bf(t)?2:wf(t)?3:0}function hT(t,e){return vf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function jk(t,e,r){let n=vf(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function EK(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function bf(t){return t instanceof Map}function wf(t){return t instanceof Set}function Bo(t){return t.copy_||t.base_}function gT(t,e){if(bf(t))return new Map(t);if(wf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&$k(t))return os(t)?{...t}:Object.assign(Object.create(null),t);let r=Object.getOwnPropertyDescriptors(t);delete r[Fr];let n=Reflect.ownKeys(r);for(let i=0;i<n.length;i++){let o=n[i],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[o]})}return Object.create(os(t),r)}function vT(t,e=!1){return _f(t)||as(t)||!Wo(t)||(vf(t)>1&&(t.set=t.add=t.clear=t.delete=RK),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>vT(n,!0))),t}function RK(){hr(2)}function _f(t){return Object.isFrozen(t)}var kK={};function Ho(t){let e=kK[t];return e||hr(0,t),e}var Yc;function qk(){return Yc}function MK(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Uk(t,e){e&&(Ho("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function yT(t){xT(t),t.drafts_.forEach(PK),t.drafts_=null}function xT(t){t===Yc&&(Yc=t.parent_)}function Vk(t){return Yc=MK(Yc,t)}function PK(t){let e=t[Fr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Bk(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Fr].modified_&&(yT(e),hr(4)),Wo(t)&&(t=Tf(e,t),e.parent_||Sf(e,t)),e.patches_&&Ho("Patches").generateReplacementPatches_(r[Fr].base_,t,e.patches_,e.inversePatches_)):t=Tf(e,r,[]),yT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Hk?t:void 0}function Tf(t,e,r){if(_f(e))return e;let n=e[Fr];if(!n)return xf(e,(i,o)=>Wk(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Sf(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,s=!1;n.type_===3&&(o=new Set(i),i.clear(),s=!0),xf(o,(l,u)=>Wk(t,n,i,l,u,r,s)),Sf(t,i,!1),r&&t.patches_&&Ho("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function Wk(t,e,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&hr(5),as(i)){let l=o&&e&&e.type_!==3&&!hT(e.assigned_,n)?o.concat(n):void 0,u=Tf(t,i,l);if(jk(r,n,u),as(u))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(Wo(i)&&!_f(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Tf(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Sf(t,i)}}function Sf(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&vT(e,r)}function AK(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:qk(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=bT;r&&(i=[n],o=Xc);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}var bT={get(t,e){if(e===Fr)return t;let r=Bo(t);if(!hT(r,e))return DK(t,r,e);let n=r[e];return t.finalized_||!Wo(n)?n:n===dT(t.base_,e)?(mT(t),t.copy_[e]=ST(n,t)):n},has(t,e){return e in Bo(t)},ownKeys(t){return Reflect.ownKeys(Bo(t))},set(t,e,r){let n=zk(Bo(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=dT(Bo(t),e),o=i?.[Fr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(EK(r,i)&&(r!==void 0||hT(t.base_,e)))return!0;mT(t),TT(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return dT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,mT(t),TT(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=Bo(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){hr(11)},getPrototypeOf(t){return os(t.base_)},setPrototypeOf(){hr(12)}},Xc={};xf(bT,(t,e)=>{Xc[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Xc.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&hr(13),Xc.set.call(this,t,e,void 0)};Xc.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&hr(14),bT.set.call(this,t[0],e,r,t[0])};function dT(t,e){let r=t[Fr];return(r?Bo(r):t)[e]}function DK(t,e,r){let n=zk(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function zk(t,e){if(!(e in t))return;let r=os(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=os(r)}}function TT(t){t.modified_||(t.modified_=!0,t.parent_&&TT(t.parent_))}function mT(t){t.copy_||(t.copy_=gT(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var IK=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let s=this;return function(u=o,...f){return s.produce(u,d=>r.call(this,d,...f))}}typeof r!="function"&&hr(6),n!==void 0&&typeof n!="function"&&hr(7);let i;if(Wo(e)){let o=Vk(this),s=ST(e,void 0),l=!0;try{i=r(s),l=!1}finally{l?yT(o):xT(o)}return Uk(o,n),Bk(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===Hk&&(i=void 0),this.autoFreeze_&&vT(i,!0),n){let o=[],s=[];Ho("Patches").generateReplacementPatches_(e,i,o,s),n(o,s)}return i}else hr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,u=>e(u,...l));let n,i;return[this.produce(e,r,(s,l)=>{n=s,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Wo(t)||hr(8),as(t)&&(t=FK(t));let e=Vk(this),r=ST(t,void 0);return r[Fr].isManual_=!0,xT(e),r}finishDraft(t,e){let r=t&&t[Fr];(!r||!r.isManual_)&&hr(9);let{scope_:n}=r;return Uk(n,e),Bk(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=Ho("Patches").applyPatches_;return as(t)?n(t,e):this.produce(t,i=>n(i,e))}};function ST(t,e){let r=bf(t)?Ho("MapSet").proxyMap_(t,e):wf(t)?Ho("MapSet").proxySet_(t,e):AK(t,e);return(e?e.scope_:qk()).drafts_.push(r),r}function FK(t){return as(t)||hr(10,t),Gk(t)}function Gk(t){if(!Wo(t)||_f(t))return t;let e=t[Fr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=gT(t,e.scope_.immer_.useStrictShallowCopy_)}else r=gT(t,!0);return xf(r,(n,i)=>{jk(r,n,Gk(i))}),e&&(e.finalized_=!1),r}var Cr=new IK,Ef=Cr.produce,Che=Cr.produceWithPatches.bind(Cr),Nhe=Cr.setAutoFreeze.bind(Cr),Ohe=Cr.setUseStrictShallowCopy.bind(Cr),Lhe=Cr.applyPatches.bind(Cr),Uhe=Cr.createDraft.bind(Cr),Vhe=Cr.finishDraft.bind(Cr);var Wn=pr(fM(),1),ige=Wn.default.v1,oge=Wn.default.v3,dM=Wn.default.v4,age=Wn.default.v5,sge=Wn.default.NIL,cge=Wn.default.version,lge=Wn.default.validate,uge=Wn.default.stringify,pge=Wn.default.parse;function mM(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function Bf(t,e){if(Array.isArray(t))return t.map(r=>Bf(r,e));if(typeof t=="object"&&t!=null){if($4(t))return mM(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Bf(t[n],e));return r}return t}function $4(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var Gf=pr(gM(),1);var j4={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},q4={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},Hf={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},$f={modulo100:"row",relativeUp:"up",relativeDown:"down"};function yM(t){let e=j4[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function xM(t){let e=q4[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function AT(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var z4=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),G4=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),K4={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},TM={...z4,...G4,...K4};function to(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Ct(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var SM={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Ct("triple quad"),tripleSingleQuotes:Ct("triple twin"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Ct("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:to("one section"),sectionLevelTwo:to("two section"),sectionLevelThree:to("three section"),sectionLevelFour:to("four section"),sectionLevelFive:to("five section"),sectionLevelSix:to("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Ct("parse tree string"),textFragment:Ct("text fragment"),disqualifyDelimiter:Ct("disqualify delimiter"),"private.fieldAccess":Ct("access"),"private.switchStatementSubject":Ct("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join","private.showParseTree":Ct("parse tree"),"experimental.setInstanceReference":to("from"),editNew:Ct("edit new"),executeCommand:Ct("execute command"),parsed:Ct("parsed"),getText:Ct("get text"),replace:Ct("replace"),"private.getTargets":Ct("get targets"),"private.setKeyboardTarget":Ct("set keyboard target")},customAction:{},grapheme:TM};var DT=AT(SM,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),Si=AT(DT,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var pt={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var wM=pr(bM(),1),qf=class{constructor(e){this.mooLexer=wM.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var vi={};for(let t of fT){let{spokenForms:e}=Si.action[t];for(let r of e)vi[r]={type:"simpleActionName",value:t}}var Q4=["replaceWithTarget","moveToTarget"];for(let t of Q4){let{spokenForms:e}=Si.action[t];for(let r of e)vi[r]={type:"bringMove",value:t}}var Z4=["before","after","to"];for(let t of Z4){let e=pt[t==="to"?"sourceDestinationConnective":t];vi[e]={type:"insertionMode",value:t}}for(let t of Uo){let{spokenForms:e}=Si.simpleScopeTypeType[t];for(let r of e)vi[r]={type:"simpleScopeTypeType",value:t}}for(let t of gf){let{spokenForms:e}=Si.pairedDelimiter[t];for(let r of e)vi[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(Hf))e!=null&&(vi[e]={type:"simpleMarkType",value:t});var bi=new qf({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(vi),type:t=>vi[t].type,value:t=>vi[t].value}});function _M(t,e){return{name:t,target:e}}function EM(t,e,r){return{name:t,source:e,destination:r}}function zf(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function RM(t,e){return{type:"primitive",insertionMode:t,target:e}}function kM(t){return{type:"containingScope",scopeType:t}}function MM(t){return{type:t}}function PM(t){return{type:"surroundingPair",delimiter:t}}function AM(t){return{type:t}}function DM(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function IT(t){return t[0]}var Y4={Lexer:bi,ParserRules:[{name:"main",symbols:["action"],postprocess:IT},{name:"action",symbols:[bi.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>_M(t,e)},{name:"action",symbols:[bi.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>EM(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:IT},{name:"destination",symbols:[bi.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>RM(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:IT},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>zf(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>zf(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>zf(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>kM(t)},{name:"scopeType",symbols:[bi.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>MM(t)},{name:"scopeType",symbols:[bi.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>PM(t)},{name:"mark",symbols:[bi.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>AM(t)},{name:"mark",symbols:[bi.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>DM(t)}],ParserStart:"main"},IM=Y4;function X4(){return new Gf.Parser(Gf.Grammar.fromCompiled(IM))}function FM(t){let e=X4();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function Kf(t,e){let r=FM(t);return Bf(r,e)}function rl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...CM(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return CM(t.destination);case"parsed":return rl(Kf(t.content,t.arguments));default:return[t.target]}}function CM(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function CT(t){return t.flatMap(FT)}function FT(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(FT);case"range":return[t.anchor,t.active].flatMap(FT);case"implicit":return[]}}var J4={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},e6={purple:"pink"};function t6(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=J4[e.scopeType.type]??e.scopeType.type)})}function r6(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=e6[t.mark.symbolColor]??t.mark.symbolColor)}function NT(t){CT(t).forEach(e=>{t6(e),r6(e)})}function NM(t){return{...t,version:1}}var n6={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},i6={type:"primitive",isImplicit:!0},OM=t=>hi(t,n6)?i6:t;function LM(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:a6(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function o6(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function OT(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:s,selectionType:l,position:u}=t,f=[];if(u&&u!=="contents"&&(u==="before"?o==="inside"?f.push({type:"position",position:"start"}):e==="remove"?f.push({type:"leading"}):f.push({type:"position",position:"before"}):o==="inside"?f.push({type:"position",position:"end"}):e==="remove"?f.push({type:"trailing"}):f.push({type:"position",position:"after"})),l)switch(l){case"token":if(s?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:f.push({type:"containingScope",scopeType:{type:l}})}return s&&f.push(...o6(s)),{type:r,isImplicit:n,modifiers:f.length>0?f:void 0,mark:i?.type==="cursorToken"?void 0:i}}function UM(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>UM(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:s,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:OT(i,e),active:OT(o,e),excludeAnchor:s??!1,excludeActive:l??!1}}case"primitive":return OT(t,e)}}function a6(t,e){return t.map(r=>UM(r,e)).map(r=>r.type==="primitive"?OM(r):r)}function VM(t){return{...t,version:3,targets:t.targets.map(BM)}}function BM(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>BM(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:LT(e),active:LT(r),...n}}case"primitive":return LT(t)}}function LT(t){let e=t.modifiers!=null?t.modifiers.map(c6):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:il(r),modifiers:e},active:{type:"primitive",mark:il(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?s6(t.mark):void 0,modifiers:e}}function s6(t){switch(t.type){case"lineNumber":return l6(t);default:return t}}function c6(t){switch(t.type){case"ordinalRange":return u6(t);default:return t}}function l6(t){return hi(t.anchor,t.active)?il(t.anchor):{type:"range",anchor:il(t.anchor),active:il(t.active)}}function u6(t){return t.anchor===t.active?nl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?nl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?nl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:nl(t.scopeType,t.anchor),active:nl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function il(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function nl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function HM(t){return{...t,version:4,targets:t.targets.map($M)}}function $M(t){switch(t.type){case"primitive":return WM(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:WM(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map($M)}}}}function WM(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function jM(t){return{...t,version:5,action:p6(t.action),targets:t.targets.map(Qf)}}function p6(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=f6(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function f6(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function Qf(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(Qf)};case"range":return{...t,anchor:Qf(t.anchor),active:Qf(t.active)};case"primitive":return{...t,mark:t.mark!=null?UT(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(VT):void 0}}}function UT(t){return t.type==="range"?{...t,anchor:UT(t.anchor),active:UT(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function VT(t){return t.type==="range"?{...t,anchor:VT(t.anchor),active:VT(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var d6={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function BT(t){let e=d6[t]??t;if(!Pk.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function qM(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:m6(t.action,t.targets)}}function m6(t,e){let r=BT(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:tn(e[0]),destination:ol(e[1])};case"swapTargets":return{name:r,target1:tn(e[0]),target2:tn(e[1])};case"callAsFunction":return{name:r,callee:tn(e[0]),argument:tn(e[1])};case"pasteFromClipboard":return{name:r,destination:ol(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:tn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:tn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:ol(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:tn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:tn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:ol(e[0])};case"highlight":{let n={name:r,target:tn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:ol(e[0])};case"getText":return{name:r,options:t.args?.[0],target:tn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:tn(e[0])}}}function tn(t){switch(t.type){case"list":case"range":case"primitive":return h6(t);case"implicit":return t}}function h6(t){switch(t.type){case"list":return g6(t);case"range":case"primitive":return Zf(t)}}function g6(t){return{...t,elements:t.elements.map(Zf)}}function Zf(t){switch(t.type){case"range":return zM(t);case"primitive":return Yf(t)}}function zM(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:Yf(e),active:Yf(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function Yf(t){let e={type:"primitive"},r=b6(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function ol(t){switch(t.type){case"list":return y6(t);case"range":return x6(t);case"primitive":return T6(t);case"implicit":return S6()}}function y6(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let s=Xf(o);s!=null?(i(),r=[Zf(o)],n=s):r.push(Zf(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function x6(t){return{type:"primitive",insertionMode:Xf(t.anchor)??"to",target:zM(t)}}function T6(t){return{type:"primitive",insertionMode:Xf(t)??"to",target:Yf(t)}}function S6(){return{type:"implicit"}}function Xf(t){switch(t.type){case"implicit":return"to";case"primitive":return v6(t);case"range":return Xf(t.anchor)}}function v6(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function b6(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function GM(t){return{...t,version:7}}function HT(t){let e=w6(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Ef(r,o=>{let s=rl(o);NT(s),r.name}),usePrePhraseSnapshot:n}}function w6(t,e){if(t.version>7)throw new yp;for(;t.version<e;)switch(t.version){case 0:t=NM(t);break;case 1:t=LM(t);break;case 2:t=VM(t);break;case 3:t=HM(t);break;case 4:t=jM(t);break;case 5:t=qM(t);break;case 6:t=GM(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var $T;function Jf(t){$T=t}function I(){if($T==null)throw Error("Tried to access ide before it was injected");return $T}var ed=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var _6=25,td=class{constructor(){this.targetMap=new Map;this.targetHistory=new eo(()=>new ed(_6));this.notifier=new Bt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of Ja)e(r,this.get(r));return this.notifier.registerListener(e)}};function ss(t,e){return new H(new se(e.start.line,0),t.document.lineAt(e.end).range.end)}function jT(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function KM(t,e){let[r,n]=e instanceof se?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function jo(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var rd=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=R6(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?E6(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e){let r=this.getEditRange(),n=this.getEditText(e),i=o=>this.updateRange(o,e);return{range:r,text:n,isReplace:this.insertionMode==="after",updateRange:i}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?jo(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.firstNonWhitespaceCharacterIndex:n.lastNonWhitespaceCharacterIndex;if(r.character===i)return this.isBefore?n.range.start:n.range.end}return r})();return new H(e,e)}getEditText(e){let r=this.indentationString+(this.insertionPrefix??"")+e;return this.isBefore?r+this.insertionDelimiter:this.insertionDelimiter+r}updateRange(e,r){let n=this.editor.document.offsetAt(e.start)+this.indentationString.length+(this.insertionPrefix?.length??0),i=this.isBefore?n:n+this.getLengthOfInsertionDelimiter(),o=i+r.length;return new H(this.editor.document.positionAt(i),this.editor.document.positionAt(o))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function E6(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine||o.firstNonWhitespaceCharacterIndex<r&&(r=o.firstNonWhitespaceCharacterIndex,n=o.text.slice(0,r))}return n}function R6(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function ro(t,e,r,n){return al(t.contentRange,e.contentRange,r,n)}function al(t,e,r,n){return new H(r?t.start:t.end,n?e.end:e.start)}function cs(t,e,r,n){let i=r?t.contentRange.start:new se(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new H(i,o)}var We=class t{constructor(e){this.isLine=!1;this.isToken=!0;this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.isWord=!1;this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return this.getRemovalRange()}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:ro(this,r,!0,!0)})}isEqual(e){return e instanceof t&&hi(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new rd(this,e)}toPlainObject(){return{type:this.type,contentRange:Bc(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function nd(t,e){return k6(t,e.start,e.end)}function k6(t,e,r){return{editor:t.editor,selection:M6(t.selection,e,r)}}function M6(t,e,r){return t.isReversed?new Te(r,e):new Te(e,r)}function id(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,s=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,u=r.positionAt(s),f=r.positionAt(l);return new H(u,f)}function od(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var Ue=class extends We{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.isToken=r.isToken??!0,this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,isToken:this.isToken,insertionDelimiter:this.insertionDelimiter}}};function ls(t,e,r){return od(Ue,t,e,r)}var ad=class extends We{constructor(r){super(r);this.type="DocumentTarget";this.insertionDelimiter=`
`;this.isLine=!0}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getRemovalRange(){return this.contentRange}getInterior(){return[new Ue({editor:this.editor,isReversed:this.isReversed,contentRange:id(this.editor,this.contentRange)})]}getCloneParameters(){return this.state}};var _n=class t extends We{constructor(){super(...arguments);this.type="LineTarget";this.insertionDelimiter=`
`;this.isLine=!0;this.getRemovalHighlightRange=()=>this.fullLineContentRange}get fullLineContentRange(){return ss(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return ls(this.editor,P6(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return ls(this.editor,A6(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:cs(this,n,!0,!0)})}getCloneParameters(){return this.state}};function P6(t,e){let{start:r}=e;return r.line>0?new H(t.document.lineAt(r.line-1).range.end,e.start):void 0}function A6(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new H(e.end,new se(r.line+1,0)):void 0}function qT(t,e,r){return od(_n,t,e,r)}var sd=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var cd=class extends We{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new sd(this,r)}};var ld=class t extends We{constructor(){super(...arguments);this.type="ParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0}getLeadingDelimiterTarget(){return qT(this.editor,D6(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return qT(this.editor,I6(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new _n({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return ss(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:cs(this,n,!0,!0)})}getCloneParameters(){return this.state}};function D6(t,e){let{document:r}=t,n=r.lineAt(e.start),i=F6(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new H(new se(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new H(new se(0,0),r.lineAt(n.lineNumber-1).range.end)}function I6(t,e){let{document:r}=t,n=r.lineAt(e.end),i=C6(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new H(new se(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new H(new se(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function F6(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function C6(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var no=class extends We{constructor(){super(...arguments);this.type="RawSelectionTarget";this.insertionDelimiter="";this.isRaw=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var us=class t extends We{constructor(r){super({...r,contentRange:id(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:al(this.fullInteriorRange,n.fullInteriorRange,!0,!0)})}};function ud(t){let e=jo(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var N6=['"',"'","(","[","{","<"],O6=['"',"'",")","]","}",">",",",";",":"];function Hn(t){let{editor:e}=t,{start:r}=jo(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new Ue({contentRange:new H(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function $n(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new Ue({contentRange:new H(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function jn(t){let{editor:e}=t,r=jo(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),s=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=ss(e,r);return o.union(s).isRangeEqual(l)?l:!s.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||N6.includes(L6(e,r)))?r.union(s):!o.isEmpty&&(r.end.isEqual(l.end)||O6.includes(U6(e,r)))?r.union(o):r}function L6(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new H(r.translate(void 0,-1),r)):""}function U6(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new H(r.translate(void 0,1),r)):""}var io=class t extends We{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.interiorRange_=r.interiorRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??V6(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new Ue({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return Hn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new Ue({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return $n(this)}getInterior(){return this.interiorRange_==null?super.getInterior():[new us({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?ud(this):jn(this)}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?al(this.removalRange_??this.contentRange,n.removalRange_??n.contentRange,!0,!0):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:ro(this,n,!0,!0)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function V6(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var pd=class t extends We{constructor(r){super(r);this.type="SubTokenWordTarget";this.isToken=!1;this.isWord=!0;this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return ls(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return ls(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return ud(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:ro(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var gr=class extends We{constructor(){super(...arguments);this.type="TokenTarget";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return Hn(this)}getTrailingDelimiterTarget(){return $n(this)}getRemovalRange(){return jn(this)}getCloneParameters(){return this.state}};var fd=class extends We{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return Hn(this)}getTrailingDelimiterTarget(){return $n(this)}getRemovalRange(){return jn(this)}getInterior(){return[new us({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new gr({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Et=class extends We{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.isToken=r.isToken??!0}getLeadingDelimiterTarget(){return Hn(this)}getTrailingDelimiterTarget(){return $n(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:jn(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,isToken:this.isToken,hasExplicitRange:this.hasExplicitRange}}};var dd=class extends We{constructor(){super(...arguments);this.type="ImplicitTarget";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var md=class extends We{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:QM(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return Hn(this)}getTrailingDelimiterTarget(){return $n(this)}getRemovalRange(){return jn(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new Ue({editor:this.editor,contentRange:QM(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function QM(t,e,r){return r?new H(e.start,t.end):new H(t.start,e.end)}function hd(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var ps=class{run(){return hd(I()).map(e=>new Et({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,isToken:!1}))}};var qn=class{constructor(e,r){this.debouncer=new hp(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var gd=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new qn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new ps().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var yd=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var B6=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],W6=B6.map(Ir).join("|"),H6=["[a-zA-Z0-9]",W6].join("|"),$6=new RegExp(`^(${H6})$`,"u"),j6="[unk]",q6=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,xd=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Bt;this.getTokenGraphemes=e=>Xr(e,q6,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;I().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(I().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=I().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=Ix(o),$6.test(o)||(o=j6)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function fs(){return zT==null&&(zT=new xd),zT}var zT;var ZM=({penalty:t})=>-t;function YM(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function XM(t,e){let r=kc(n=>Bx(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function JM(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function eP(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function tP(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=z6(r,n)}return r[0]}function z6(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function rP({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o){return tP(o,[eP(r),JM(i),YM(t),ZM,XM(n,e)])}function nP(t,e,r){let n={},i=new Ji(({grapheme:o,hatStyle:s})=>[o,s]);return t.forEach(({token:o,rank:s})=>{let l=e.get(o);l!=null&&i.set(l,s),r.getTokenGraphemes(o.text).forEach(({text:u})=>{let f;u in n?f=n[u]:(f=[],n[u]=f),f.push(s)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function iP(t,e=[]){return new Map(Lx(tt,gi)(Mc([e],t.visibleRanges.map(r=>Wx(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function oP(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let s=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return s-l}}var G6=["-","+","*","/","=","<",">","_","#",".","|","&",":"],K6=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],Q6=["\\p{L}","\\p{M}","\\p{N}"],Z6="[^\\s\\w]",Y6="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function X6(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:s}=t,l=r.map(Ir).map(x=>`${x}+`).join("|"),u=e.map(Ir).join("|"),d=`(${n.concat(i.map(Ir)).join("|")})+`,h=`(${n.join("|")})+`,g=[u,o,d,l,s].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(h,"gu"),tokenMatcher:new RegExp(g,"gu")}}var GT=new Map;function rn(t){let e=I().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!GT.has(r)){let n={fixedTokens:K6,repeatableSymbols:G6,identifierWordRegexes:Q6,identifierWordDelimiters:e,numbersRegex:Y6,singleSymbolsRegex:Z6};GT.set(r,X6(n))}return GT.get(r)}function aP(t,e,r){return Xr(t,rn(e).tokenMatcher,r)}function sP(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return aP(n,r,o=>{let s=i+o.index,l=i+o.index+o[0].length,u=new H(t.document.positionAt(s),t.document.positionAt(l));return{editor:t,text:o[0],range:u,offsets:{start:s,end:l}}})}function cP(t,e){return J6(t,e).flatMap(n=>{let i=n.selections[0].active,o=iP(n,[i.line]),s=tt(n.visibleRanges.map(l=>sP(n,l).map(u=>({...u,displayLine:o.get(u.range.start.line)}))));return s.sort(oP(o.get(i.line),i.character)),s.map((l,u)=>({token:l,rank:-u}))})}function J6(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function KT(t,e,r,n,i,o){let s=e5(r),l=cP(i,o),u=nP(l,s,t),f=Object.keys(e),d=new eo(()=>[...f]);return l.map(({token:h,rank:g})=>{let x=t5(t,h,d,e),v=rP(u,n,g,s.get(h),x);if(v!=null)return d.set(v.grapheme.text,d.get(v.grapheme.text).filter(w=>w!==v.style)),r5(h,v)}).filter(h=>h!=null)}function e5(t){let e=new Ji(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function t5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text);for(let s of o)for(let l of r.get(s.text))i.push({grapheme:s,style:l,penalty:n[l].penalty});return i}function r5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new H(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var Td=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];I().disposeOnExit(this);let n=new qn(I().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),I().onDidOpenTextDocument(n.run),I().onDidCloseTextDocument(n.run),I().onDidChangeActiveTextEditor(n.run),I().onDidChangeVisibleTextEditors(n.run),I().onDidChangeTextDocument(n.run),I().onDidChangeTextEditorSelection(n.run),I().onDidChangeTextEditorVisibleRanges(n.run),fs().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap(),n=this.hats.isEnabled?KT(fs(),this.hats.enabledHatStyles,e??r.tokenHats,I().configuration.getOwnConfiguration("experimental.hatStability"),I().activeTextEditor,I().visibleTextEditors):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:s}})=>({editor:s,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var Sd=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:s}=n,l=this.makeTokenLive(s);return this.map[Zc(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=rn(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[Zc(e,fs().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var n5=6e4,vd=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;I().disposeOnExit(this),this.activeMap=new Sd(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new Td(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>n5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function QT(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var JT=pr(cl(),1);function eS(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:s,end:l}}=e;return(0,JT.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,JT.invariant)(n>=s&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=s?s+o:Math.min(s,i),end:n<=l?l+o:Math.min(l,i)}}var mP=pr(cl(),1);function tS(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,mP.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let s=e.expansionBehavior.end;switch(s.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(of(s.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let s=e.expansionBehavior.start;switch(s.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(nf(s.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var rS=pr(cl(),1);function nS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:s},text:l}=e;if((0,rS.invariant)(s>o,()=>"Selection range expected to be nonempty"),(0,rS.invariant)(n>=o&&n<=s,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<s)return{start:o,end:s+i};if(n===o){let u=e.expansionBehavior.start,f=s+i;switch(u.type){case"closed":return{start:o+i,end:f};case"open":return{start:o,end:f};case"regex":{let d=r+l,h=nf(u.regex),g=d.search(h);for(;g>r.length;)d=d.slice(0,g),g=d.search(h);return g===-1?{start:o,end:f}:{start:o+g,end:f}}}}else{let u=e.expansionBehavior.end,f=o;switch(u.type){case"closed":return{start:f,end:s};case"open":return{start:f,end:s+i};case"regex":{let d=l+r,h=of(u.regex),g=d.match(h),x=g==null?0:g[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,g=d.match(h),x=g==null?0:x+g[0].length;return x===0?{start:f,end:s}:{start:f,end:o+x}}}}}function hP(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:s}=e.offsets,l=Math.min(n,o),u="";return o<n&&(u+=e.text.substring(0,n-o)),u+=t.event.text,i<s&&(u+=e.text.substring(s-i,e.text.length)),u.substring(r.start-l,r.end-l)}function gP(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let s=o.text.length-o.rangeLength,l=o.rangeOffset,u=l+o.rangeLength,f=l,d=u+s;return{displacement:s,event:o,originalOffsets:{start:l,end:u},finalOffsets:{start:f,end:d}}});for(let o of e){let s=o.offsets,l=i.map(f=>{let d;return f.originalOffsets.start>s.end?{start:0,end:0}:f.originalOffsets.end<s.start?{start:f.displacement,end:f.displacement}:(f.event.rangeLength===0?o.range.isEmpty?d=tS(f,o):d=nS(f,o):d=eS(f,o),o.text=hP(f,o,d),{start:d.start-s.start,end:d.end-s.end})}),u={start:s.start+Yp(l,({start:f})=>f),end:s.end+Yp(l,({end:f})=>f)};o.range=o.range.with(r.positionAt(u.start),r.positionAt(u.end)),o.offsets=u}}var wd=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return QT(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return QT(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>Xt(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>Xt(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=I().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>f5(r,i)?{...i,isReplace:!0}:i)};gP(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function f5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var _d=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var Ed=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var Rd=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var kd=class{updateUserSnippets(){throw new Error("Snippets are not implemented.")}registerThirdPartySnippets(e,r){throw new Error("Snippets are not implemented.")}getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e){throw new Error("Snippets are not implemented.")}};var Md=class{getSpokenFormEntries(){throw new is}onDidChange(){return{dispose:()=>{}}}};var Pd=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getLanguage(e){throw new Error("Tree sitter not provided")}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}};var Ge=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var yP={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var xP=new Ji(t=>t);for(let[t,e]of Object.entries(yP))e!=null&&xP.set(e,t);function TP(t,e,r){let n=xP.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}var d5={ifStatement:"if",ifElseStatement:"if else",tryCatchStatement:"try",functionDeclaration:"funk",link:"link"},m5={"ifElseStatement.alternative":"else","functionDeclaration.body":"funk","ifElseStatement.consequence":"if else","ifStatement.consequence":"if","tryCatchStatement.body":"try","link.text":"link"};function SP(t){if(t.type==="custom")throw new Ge("Custom insertion snippet");let e=d5[t.name];if(e==null)throw new Ge(`Named insertion snippet '${t.name}'`);if(t.substitutions!=null){let r=Object.values(t.substitutions);return`${e} ${r.join(" ")}`}return e}function vP(t){if(t.type==="custom")throw new Ge("Custom wrap with snippet");let e=`${t.name}.${t.variableName}`,r=m5[e];if(r==null)throw new Ge(`Named wrap with snippet '${e}'`);return r}function ll(t,e,r){let n=r==="vertical"?`${pt.verticalRange} `:"";if(t&&e)return n+pt.rangeExclusive;if(t)throw new Ge("Range exclude anchor");return e?n+pt.rangeExcludingEnd:r==="vertical"?pt.verticalRange:pt.rangeInclusive}function bP(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var h5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],g5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function ds(t){let e=h5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function ul(t){let e=g5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Ad=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":throw new Ge(`Modifier '${e.type}'`);case"containingScope":if(e.ancestorIndex==null||e.ancestorIndex===0)return this.handleScopeType(e.scopeType);if(e.ancestorIndex===1)return[this.spokenFormMap.modifierExtra.ancestor,this.handleScopeType(e.scopeType)];throw new Ge(`Modifier '${e.type}' with ancestor index ${e.ancestorIndex}`);case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,ul(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,ul(e.start+1),r];let i=ds(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,pl(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,pl(r)];throw new Ge(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:ul(e.anchor.start+1),n=this.handleModifier(e.active),i=ll(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let s=e.direction==="forward"?pt.forward:pt.backward;return[n,r,s]}let i=ds(e.length),o=pl(r);return e.direction==="forward"?[n,i,o]:[n,i,o,pt.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?pt.next:pt.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=ds(e.length);if(e.length===1)return[i,n,r];let s=pl(r);return[i,n,o,s]}if(e.length===1){let o=ul(e.offset);return[i,o,n,r]}throw new Ge(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":throw new Ge(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,_P(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(yM(r)),n!=null&&i.push(xM(n)),i.push(_P(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let s=ll(e.excludeAnchor,e.excludeActive);return[r,n,s,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new Ge(`Mark '${e.type}'`);default:return[Hf[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new Ge("Absolute line numbers");case"modulo100":return[$f.modulo100,ds(e.lineNumber+1)];case"relative":return[e.lineNumber<0?$f.relativeUp:$f.relativeDown,ds(Math.abs(e.lineNumber))]}}};function pl(t){if(typeof t=="string")return wP(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),pl(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(wP)}}}function wP(t){return`${t}s`}function _P(t,e,r){let n=t[r];if(n==null)throw new Ge(`${e} '${r}'`);return n}var ms=class{constructor(e){this.spokenFormMap=bP(e),this.primitiveGenerator=new Ad(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new Ge(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:EP(e())}}catch(r){if(r instanceof Ge)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new Ge(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),pt.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[TP(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],SP(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new Ge(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[vP(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new Ge(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new Ge("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[pt.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=ll(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new Ge("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[pt.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return pt.sourceDestinationConnective;case"before":return pt.before;case"after":return pt.after}}};function EP(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:RP(t.map(EP)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${Gc(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new Ge(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function RP(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=RP(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Dd=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Bt;this.spokenFormMap_={...Si};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps().catch(()=>{})),this.customSpokenFormsInitialized=this.updateSpokenFormMaps(),this.customSpokenFormsInitialized.catch(()=>{})}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof zc)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof is)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");rt(I().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}throw this.spokenFormMap_={...Si},this.notifier.notifyListeners(),r}for(let r of Dk)y5(this.spokenFormMap_,r,DT[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function y5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let s of i){let{defaultSpokenForms:l=[],isPrivate:u=!1}=r[s]??{},f=n[s];o[s]=f==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!u,isCustom:!1,isPrivate:u}:{defaultSpokenForms:l,spokenForms:f,requiresTalonUpdate:!1,isCustom:!hi(l,f),isPrivate:u}}t[e]=o}var Id=class{constructor(e){this.customSpokenForms=new Dd(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new ms(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new ms(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*x5(t){for(let e of t)for(let r of e)yield r}function*fl(t,e){let r=Fd(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*MP(t){let e=Fd(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var Awe=Symbol();function*T5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*PP(t,e){for(let r of t)e(r)&&(yield r)}function*Nt(t,e){for(let r of t)yield e(r)}function*AP(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let s=-1,l=Fd(t),u;for(;;){if(s++,o!==null&&s>=o||(u=l.next(),u.done))return;s<i||(s-i)%n===0&&(yield u.value)}}function*S5(t,e){let r=Fd(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function Fd(t){return t[Symbol.iterator]()}function hs(t,e){return Array.from(Nt(t,e))}function kP(t,e,r){let n=T5(t,r),i=r>=0?o=>o<e:o=>o>e;return S5(n,i)}function DP(t,e,r=1){return e!==void 0?kP(t,e,r):kP(0,t,r)}function Cd(t,e){return x5(Nt(t,e))}function wi(t,e,{domain:r},{domain:n}){return t==="forward"?v5(e,r,n):b5(e,r,n)}function v5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let s=e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&!i){let s=e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&i){let s=e.end.compareTo(r.start);return s!==0?s:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function b5(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let s=-e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&!i){let s=-e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&i){let s=-e.start.compareTo(r.end);return s!==0?s:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function IP(t,e,r,n,i,o){return w5(t,n,i,o)&&(i==null||wi(r,n.includeDescendantScopes?t:e,i,o)<0)}function w5(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:s,skipAncestorScopes:l}=e,{domain:u}=n;switch(i){case"disallowed":if(u.contains(t))return!1;break;case"disallowedIfStrict":if(KM(u,t))return!1;break;case"required":if(!u.contains(t))return!1;break}return l&&r!=null&&u.contains(r.domain)?!1:_5(new H(t,o),u,s)}function _5(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var E5={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},Ht=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...E5,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},s,l=r;for(let u of this.generateScopeCandidates(e,r,n,o))if(IP(r,l,n,o,s,u)&&(yield u,s=u,l=n==="forward"?u.domain.end:u.domain.start),this.canStopEarly(r,n,o,s,u))return}canStopEarly(e,r,n,i,o){let{containment:s,distalPosition:l,skipAncestorScopes:u}=n;if(this.isHierarchical&&!u)return!1;let f=this.isHierarchical&&u?i:o;return f==null?!1:!!(s==="required"&&(r==="forward"?f.domain.end.isAfter(e):f.domain.start.isBefore(e))||(r==="forward"?f.domain.end.isAfterOrEqual(l):f.domain.start.isBeforeOrEqual(l)))}};var yr=class extends Ht{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:s,...l}=o,u=this.searchScopeHandler.generateScopes(r,n,i,{containment:s==="required"?"required":void 0,...l});return Cd(u,f=>this.generateScopesInSearchScope(i,f))}};var Nd=class extends Ht{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield FP(r,o);else for(let o=n.line;o>=0;o--)yield FP(r,o)}};function FP(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[iS(t,n,r)]}}function iS(t,e,r){return new _n({editor:t,isReversed:e,contentRange:dl(t,r)})}function dl(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new H(r.lineNumber,r.firstNonWhitespaceCharacterIndex,n.lineNumber,n.lastNonWhitespaceCharacterIndex)}function Gn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),s=l=>new H(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Nt(o.matchAll(t),s):Array.from(o.matchAll(t),s).reverse()}var Od=class extends yr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=rn(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(Gn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new gr({editor:n,contentRange:o,isReversed:s})]}))}};function Ld(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let s=Nc(o,n),l=Nc(o,i);if(s&&!l)return!0;if(l&&!s)return!1}}var R5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,k5=/[$]/g,M5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Ud=class extends yr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(Gn(R5,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Ue({editor:n,contentRange:o,isReversed:s,isToken:!1})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=rn(this.languageId);return Ld(r,n,[i,k5,M5])}};var P5=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,Vd=class{constructor(e){this.wordRegex=rn(e).wordMatcher}splitIdentifier(e){let r=Oc(e,this.wordRegex);return r.length>1?r:Oc(e,P5)}};var Bd=class extends yr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new Vd(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(u=>new H(i.positionAt(o+u.index),i.positionAt(o+u.index+u.text.length)));return l.map((u,f)=>({editor:r,domain:u,getTargets:d=>{let h=f>0?l[f-1]:null,g=f+1<l.length?l[f+1]:null;return[A5(d,r,h,u,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function A5(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new H(r.end,n.start):void 0,s=i!=null&&i.start.isAfter(n.end)?new H(n.end,i.start):void 0,u=o!=null||s!=null?e.document.getText(o??s):"";return new pd({editor:e,isReversed:t,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:o,trailingDelimiterRange:s})}var D5=/[$]/g,Wd=class extends yr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=rn(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(Gn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new gr({editor:n,contentRange:o,isReversed:s})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=rn(this.languageId);return Ld(r,n,[i,D5])}};var Hd=class extends Ht{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:s=>[new ad({editor:r,isReversed:s,contentRange:o})]}}};function CP(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var gs=class extends Ht{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:s}=r,l=this.query.matches(s).map(u=>this.matchToScope(r,u)).filter(u=>u!=null).sort((u,f)=>wi(i,n,u,f));yield*CP(l,(u,f)=>u.domain.isRangeEqual(f.domain),u=>u.length===1?u[0]:{...u[0],getTargets(f){let d=Ac(u.flatMap(h=>h.getTargets(f)),(h,g)=>h.isEqual(g));if(d.length>1&&!u.every(h=>h.allowMultiple)){let h="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(rt(I().messages,"BaseTreeSitterScopeHandler.allow-multiple",h),I().runMode==="test")throw Error(h)}return d}})}};function oS(t,e,r,n){return n?ys(t,`${e}.${r}`,`_.${r}`):ys(t,`${e}.${r}`)??(ys(t,e)!=null?ys(t,`_.${r}`):void 0)}function _i(t,e,r,n){return oS(t,e,r,n)?.range}function ys(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var $d=class extends gs{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n){let i=this.iterateeScopeType.type,o=oS(n,i,"iteration",!1);if(o==null)return;let{range:s,allowMultiple:l}=o,u=_i(n,i,"iteration.domain",!1)??s;return{editor:r,domain:u,allowMultiple:l,getTargets:f=>[new Ue({editor:r,isReversed:f,contentRange:s})]}}};var jd=class extends gs{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new $d(this.query,this.scopeType)}}matchToScope(r,n){let i=this.scopeType.type,o=ys(n,i);if(o==null)return;let{range:s,allowMultiple:l,insertionDelimiter:u}=o,f=_i(n,i,"domain",!0)??s,d=_i(n,i,"removal",!0),h=_i(n,i,"interior",!0),g=_i(n,i,"prefix",!0)?.with(void 0,s.start),x=_i(n,i,"leading",!0)?.with(void 0,g?.start??s.start),v=_i(n,i,"trailing",!0)?.with(s.end);return{editor:r,domain:f,allowMultiple:l,getTargets:w=>[new io({scopeTypeType:i,editor:r,isReversed:w,contentRange:s,prefixRange:g,removalRange:d,leadingDelimiterRange:x,trailingDelimiterRange:v,interiorRange:h,insertionDelimiter:u})]}}};function NP(t){return t.flatMap(e=>{let{value:r,done:n}=e.next();return n?[]:[{iterator:e,value:r}]})}function OP(t,e){return t.flatMap(r=>{let{iterator:n}=r,{value:i}=r,o=!1;for(;!o&&!e(i);)({value:i,done:o}=n.next());return o?[]:[{iterator:n,value:i}]})}var qd=class t extends Ht{constructor(r,n,i){super();this.scopeType=r;this.scopeHandlers=n;this.getIterationScopeType=i;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(l=>{let u=r.create(l,i);if(u==null)throw new Error(`No available scope handler for '${l.type}'`);return u}),s=()=>({type:"custom",scopeHandler:new t(void 0,o.map(l=>r.create(l.iterationScopeType,i)),()=>{throw new Error("Not implemented")})});return new t(n,o,s)}get iterationScopeType(){return this.getIterationScopeType()}*generateScopeCandidates(r,n,i,o){let s=this.scopeHandlers.map(u=>u.generateScopes(r,n,i,o)[Symbol.iterator]()),l=NP(s);for(;l.length>0;){l.sort((f,d)=>wi(i,n,f.value,d.value));let u=l[0].value;yield u,l=OP(l,f=>wi(i,n,u,f)<0)}}};var zd=class extends Ht{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,s=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,u=I5(o,n,i),f=r.document.lineAt(n);for(let d=n.line+s;d!==l;d+=s){let h=r.document.lineAt(d);h.isEmptyOrWhitespace?u!=null&&(yield LP(r,u.range.union(f.range)),u=void 0):u==null&&(u=h),f=h}u!=null&&(yield LP(r,u.range.union(f.range)))}};function I5(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let s=e.line+n;s!==i;s+=n){let l=t.lineAt(s);if(l.isEmptyOrWhitespace)break;o=l}return o}}function LP(t,e){return{editor:t,domain:e,getTargets:r=>[new ld({editor:t,isReversed:r,contentRange:dl(t,e)})]}}function ml(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function UP(t,e){return t.slice(t.length-e.length)===e}var aS,C5=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function VP(t){t?aS=t:aS=C5}function sS(t){return/^[A-Z][a-z].*/.test(t)||Gd(t)}function BP(t){return sS(t)||/``|"|'/.test(t.substring(0,2))}function WP(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~aS.indexOf(e)}function HP(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function cS(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function $P(t){return t.length<=3?!0:sS(t)}function lS(t,e){return e.length>0?t<5&&e[0].length<6&&sS(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function Gd(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function jP(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function qP(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function zP(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function GP(t){return t==="."||t==="!"||t==="?"}var QP=" @~@ ",KP=QP.trim(),O5=new RegExp("\\S",""),L5=new RegExp("\\n+|[-#=_+*]{4,}","g"),U5=new RegExp("\\S+|\\n","g"),V5={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function ZP(t,e){if(!t)return[];if(!O5.test(t))return[];let r={...V5,...e};VP(r.abbreviations),r.newlineBoundaries&&(t=t.replace(L5,QP));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(h,g){return g%2})):n=t.trim().match(U5)??[];let o=0,s=0,l=[],u=[],f=[];if(!n||!n.length)return[];for(let h=0,g=n.length;h<g;h++){if(o++,f.push(n[h]),~n[h].indexOf(",")&&(o=0),GP(n[h])||ml(n[h],"?!")||n[h]===KP){r.newlineBoundaries&&n[h]===KP&&f.pop(),u.push(f),o=0,f=[];continue}if((ml(n[h],'"')||ml(n[h],"\u201D"))&&(n[h]=n[h].slice(0,-1)),ml(n[h],".")){if(h+1<g){if(n[h].length===2&&isNaN(n[h].charAt(0))||WP(n[h]))continue;if(BP(n[h+1])){if(HP(n[h],n[h+1])||lS(o,n.slice(h,6))||Gd(n[h+1])&&$P(n[h]))continue}else if(UP(n[h],"..")||cS(n[h])||lS(o,n.slice(h,5)))continue}u.push(f),f=[],o=0;continue}(s=n[h].indexOf("."))>-1&&(Gd(n[h],s)||cS(n[h])||qP(n[h])||jP(n[h]))||(l=zP(n[h]))&&(f.pop(),f.push(l[0]),u.push(f),f=[],o=0,f.push(l[1]))}return f.length&&u.push(f),u=u.filter(function(h){return h.length>0}),u.slice(1).reduce(function(h,g){let x=h[h.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(h.pop(),h.push(x.concat(g)),h):(h.push(g),h)},[u[0]]).map(function(h,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=h.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return h.join(" ")})}var B5=/\S*\p{L}/u,YP=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,W5={newlineBoundaries:!1,preserveWhitespace:!0},Kd=class{*segment(e){let r=ZP(e,W5),n=0;for(let i of r){let o=i.split(YP).filter(s=>s!=null);for(let s of o){if(!$5(s)){let l=H5(s,n);l!=null&&(yield l)}n+=s.length}}}};function H5(t,e){let r=IR(B5,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function $5(t){return Nc(YP,t)}var Qd=class extends yr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new Kd}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),s=n.document.getText(i),l=f=>{let d=new H(n.document.positionAt(o+f.index),n.document.positionAt(o+f.index+f.text.length));return{editor:n,domain:d,getTargets:h=>[new gr({editor:n,contentRange:d,isReversed:h})]}},u=this.segmenter.segment(s);return r==="forward"?Nt(u,l):Array.from(u,l).reverse()}};var xs=class extends yr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(Gn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new gr({editor:n,contentRange:o,isReversed:s})]}))}},Zd=class extends xs{constructor(){super(...arguments);this.regex=/\S+/g}},Yd=class extends xs{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},Xd=class extends xs{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,"gu")}},Jd=class extends xs{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Ir(this.scopeType.character),"gui")}};function XP(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new H(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:s=>[new fd({editor:t,isReversed:s,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function JP(t){let e=gi(t.map(({text:r})=>r)).map(Ir).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function eA(t,e,r){if(r.length===0)return[];let n=JP(r),i=t?.getCaptures(e,"disqualifyDelimiter")??[],o=t?.getCaptures(e,"textFragment")??[],s=Object.fromEntries(r.map(u=>[u.text,u])),l=e.getText();return Xr(l,n,u=>{let f=u[0],d=new H(e.positionAt(u.index),e.positionAt(u.index+f.length)),h=i.some(x=>x.range.contains(d)&&!x.hasError()),g=o.find(x=>x.range.contains(d))?.range;return{delimiterInfo:s[f],isDisqualified:h,textFragmentRange:g,range:d}})}var tm=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],backtickQuotes:["`","`"],curlyBrackets:[["{","${"],"}"],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),em=["","r","u","R","U","f","F","fr","Fr","fR","FR","rf","rF","Rf","RF","b","B","br","Br","bR","BR","rb","rB","Rb","RB"],tA={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{singleQuotes:[em.map(t=>`${t}'`),"'",{isSingleLine:!0,isUnknownSide:!0}],doubleQuotes:[em.map(t=>`${t}"`),'"',{isSingleLine:!0,isUnknownSide:!0}],tripleSingleQuotes:[em.map(t=>`${t}'''`),"'''",{isUnknownSide:!0}],tripleDoubleQuotes:[em.map(t=>`${t}"""`),'"""',{isUnknownSide:!0}]},ruby:{tripleDoubleQuotes:["%Q(",")"]}},QEe=Object.fromEntries(Object.values(tm)),rA={any:xi(tm),string:["tripleDoubleQuotes","tripleSingleQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function nA(t){return t!=null&&t in tA?{...tm,...tA[t]}:tm}function iA(t,e){let r=rA[t]??[t];return j5(e,r)}function j5(t,e){let r=nA(t);return e.flatMap(n=>{let[i,o,s]=r[n],{isSingleLine:l=!1,isUnknownSide:u=!1}=s??{},f=Kc(i)?[i]:i,d=Kc(o)?[o]:o;return gi(Mc(f,d)).map(g=>{let x=f.includes(g),v=d.includes(g);return{text:g,side:u?"unknown":x&&!v?"left":!x&&v?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function oA(t){let e=[],r=new eo(()=>[]);for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:s},isDisqualified:l,textFragmentRange:u,range:f}=n;if(l)continue;let d=r.get(i);s&&(d=d.filter(g=>g.range.start.line===f.start.line),r.set(i,d));let h=d.filter(g=>u==null&&g.textFragmentRange==null||u!=null&&g.textFragmentRange!=null&&g.textFragmentRange.isRangeEqual(u));if(o==="left"||o==="unknown"&&h.length%2===0)d.push(n);else{let g=h.at(-1);if(g==null)continue;d.splice(d.lastIndexOf(g),1),e.push({delimiterName:i,openingDelimiterRange:g.range,closingDelimiterRange:f})}}return e}var rm=class extends Ht{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){rt(I().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let s=eA(this.languageDefinitions.get(this.languageId),r.document,iA(this.scopeType.delimiter,this.languageId)),l=oA(s);l=q5(i,o,n,l),yield*l.map(u=>XP(r,u,this.scopeType.requireStrongContainment??!1)).sort((u,f)=>wi(i,n,u,f))}};function q5(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var Ts=class{constructor(e){this.languageDefinitions=e;this.create=this.create.bind(this)}create(e,r){switch(e.type){case"character":return new Ud(this,e,r);case"word":return new Bd(this,e,r);case"token":return new Wd(this,e,r);case"identifier":return new Od(this,e,r);case"line":return new Nd(e,r);case"sentence":return new Qd(this,e,r);case"paragraph":return new zd(e,r);case"document":return new Hd(e,r);case"oneOf":return qd.create(this,e,r);case"nonWhitespaceSequence":return new Zd(this,e,r);case"url":return new Yd(this,e,r);case"customRegex":return new Xd(this,e,r);case"glyph":return new Jd(this,e,r);case"surroundingPair":return new rm(this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}};function on(t,e){return new H(t.row,t.column,e.row,e.column)}function uS(t){return new se(t.row,t.column)}function aA(t){return new H(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function sA(t,e){return new Te(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function Kn(t,e){return{selection:new Te(new se(e.startPosition.row,e.startPosition.column),new se(e.endPosition.row,e.endPosition.column)),context:{}}}function z5(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new Te(new se(i.startPosition.row,i.startPosition.column),new se(o.endPosition.row,o.endPosition.column)),context:{}}}function cA(){return hl(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function lA(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new Te(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function uA(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=on(i.endPosition,r.startPosition):o=on(n.startPosition,r.startPosition):o=on(n.endPosition,r.startPosition)),{...Kn(e,r),context:{leadingDelimiterRange:o}}}}function Qn(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,s=new Set(t),l=new Set(e);return o=o.filter(u=>s.size>0?!s.has(u.type):l.size>0?l.has(u.type):!0),z5(n,o[0],o[o.length-1])}}function pA(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=on(r.endPosition,i.startPosition):o=on(r.endPosition,n.endPosition):o=on(r.endPosition,n.startPosition)),{...Kn(e,r),context:{trailingDelimiterRange:o}}}}function G5(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function K5(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function hl(t,e,r=Vt,n=Vt){return(i,o)=>{let s,l,u=r(o),f=n(o),d=K5(u,t),h=G5(f,t);d!=null&&(s=on(d.endPosition,u.startPosition)),h!=null&&(l=on(f.endPosition,h.startPosition));let g=Q5(i,s,l,e);return{selection:new Te(new se(u.startPosition.row,u.startPosition.column),new se(f.endPosition.row,f.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:s,trailingDelimiterRange:l}}}}function Q5(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return Vx(o,"length")}function fA(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:u})=>u.endsWith(".start")).map(({range:{end:u}})=>u).sort((u,f)=>u.compareTo(f)).at(-1),i=t.filter(({name:u})=>u.endsWith(".end")).map(({range:{start:u}})=>u).sort((u,f)=>u.compareTo(f)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(rt(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:u})=>u.endsWith(".start")).length,s=t.filter(({name:u})=>u.endsWith(".end")).length,l=t.length-o-s;return l>0&&(o>0||s>0)&&(rt(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:u,range:f})=>u+" "+f.toString())}`),r=!0),l>1&&(rt(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:u,range:f})=>u+" "+f.toString())}`),r=!0),!r}function dA(t){let e=t;for(;e!=null;){if(e.hasError)return!0;e=e.parent}return!1}var Ne;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(let l of o)s[l]=i[l];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(let s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ne||(Ne={}));var fS;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(fS||(fS={}));var X=Ne.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ao=t=>{switch(typeof t){case"undefined":return X.undefined;case"string":return X.string;case"number":return isNaN(t)?X.nan:X.number;case"boolean":return X.boolean;case"function":return X.function;case"bigint":return X.bigint;case"symbol":return X.symbol;case"object":return Array.isArray(t)?X.array:t===null?X.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?X.promise:typeof Map<"u"&&t instanceof Map?X.map:typeof Set<"u"&&t instanceof Set?X.set:typeof Date<"u"&&t instanceof Date?X.date:X.object;default:return X.unknown}},G=Ne.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Z5=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Nr=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let l=n,u=0;for(;u<s.path.length;){let f=s.path[u];u===s.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(r(s))):l[f]=l[f]||{_errors:[]},l=l[f],u++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ne.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Nr.create=t=>new Nr(t);var gl=(t,e)=>{let r;switch(t.code){case G.invalid_type:t.received===X.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ne.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ne.joinValues(t.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ne.joinValues(t.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${Ne.joinValues(t.options)}, received '${t.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ne.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case G.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case G.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ne.assertNever(t)}return{message:r}},gA=gl;function Y5(t){gA=t}function im(){return gA}var om=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],s={...i,path:o},l="",u=n.filter(f=>!!f).slice().reverse();for(let f of u)l=f(s,{data:e,defaultError:l}).message;return{...i,path:o,message:i.message||l}},X5=[];function ee(t,e){let r=om({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,im(),gl].filter(n=>!!n)});t.common.issues.push(r)}var $t=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return ye;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r)n.push({key:await i.key,value:await i.value});return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return ye;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},ye=Object.freeze({status:"aborted"}),yA=t=>({status:"dirty",value:t}),tr=t=>({status:"valid",value:t}),dS=t=>t.status==="aborted",mS=t=>t.status==="dirty",yl=t=>t.status==="valid",am=t=>typeof Promise<"u"&&t instanceof Promise,ce;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(ce||(ce={}));var an=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},mA=(t,e)=>{if(yl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Nr(t.common.issues);return this._error=r,this._error}}};function Se(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,l)=>s.code!=="invalid_type"?{message:l.defaultError}:typeof l.data>"u"?{message:n??l.defaultError}:{message:r??l.defaultError},description:i}}var ve=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ao(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:ao(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new $t,ctx:{common:e.parent.common,data:e.data,parsedType:ao(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(am(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ao(e)},o=this._parseSync({data:e,path:i.path,parent:i});return mA(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ao(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(am(i)?i:Promise.resolve(i));return mA(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let s=e(i),l=()=>o.addIssue({code:G.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Or({schema:this,typeName:fe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Rn.create(this,this._def)}nullable(){return ki.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ri.create(this,this._def)}promise(){return lo.create(this,this._def)}or(e){return Xo.create([this,e],this._def)}and(e){return Jo.create(this,e,this._def)}transform(e){return new Or({...Se(this._def),schema:this,typeName:fe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new ia({...Se(this._def),innerType:this,defaultValue:r,typeName:fe.ZodDefault})}brand(){return new um({typeName:fe.ZodBranded,type:this,...Se(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Es({...Se(this._def),innerType:this,catchValue:r,typeName:fe.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return xl.create(this,e)}readonly(){return ks.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},J5=/^c[^\s-]{8,}$/i,e9=/^[a-z][a-z0-9]*$/,t9=/^[0-9A-HJKMNP-TV-Z]{26}$/,r9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,n9=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,i9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",pS,o9=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,a9=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,s9=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function c9(t,e){return!!((e==="v4"||!e)&&o9.test(t)||(e==="v6"||!e)&&a9.test(t))}var so=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==X.string){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.string,received:o.parsedType}),ye}let n=new $t,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,l=e.data.length<o.value;(s||l)&&(i=this._getOrReturnCtx(e,i),s?ee(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&ee(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")n9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"email",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")pS||(pS=new RegExp(i9,"u")),pS.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"emoji",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")r9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"uuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")J5.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"cuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")e9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"cuid2",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")t9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"ulid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ee(i,{validation:"url",code:G.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"regex",code:G.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?s9(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="ip"?c9(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"ip",code:G.invalid_string,message:o.message}),n.dirty()):Ne.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:G.invalid_string,...ce.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...ce.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...ce.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ce.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ce.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ce.errToObj(r)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};so.create=t=>{var e;return new so({checks:[],typeName:fe.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Se(t)})};function l9(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),s=parseInt(e.toFixed(i).replace(".",""));return o%s/Math.pow(10,i)}var zo=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==X.number){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.number,received:o.parsedType}),ye}let n,i=new $t;for(let o of this._def.checks)o.kind==="int"?Ne.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:G.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?l9(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_finite,message:o.message}),i.dirty()):Ne.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ne.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};zo.create=t=>new zo({checks:[],typeName:fe.ZodNumber,coerce:t?.coerce||!1,...Se(t)});var Go=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==X.bigint){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.bigint,received:o.parsedType}),ye}let n,i=new $t;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ne.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Go.create=t=>{var e;return new Go({checks:[],typeName:fe.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Se(t)})};var Ko=class extends ve{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==X.boolean){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.boolean,received:n.parsedType}),ye}return tr(e.data)}};Ko.create=t=>new Ko({typeName:fe.ZodBoolean,coerce:t?.coerce||!1,...Se(t)});var Qo=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==X.date){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.date,received:o.parsedType}),ye}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_date}),ye}let n=new $t,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ne.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Qo.create=t=>new Qo({checks:[],coerce:t?.coerce||!1,typeName:fe.ZodDate,...Se(t)});var vs=class extends ve{_parse(e){if(this._getType(e)!==X.symbol){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.symbol,received:n.parsedType}),ye}return tr(e.data)}};vs.create=t=>new vs({typeName:fe.ZodSymbol,...Se(t)});var Zo=class extends ve{_parse(e){if(this._getType(e)!==X.undefined){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.undefined,received:n.parsedType}),ye}return tr(e.data)}};Zo.create=t=>new Zo({typeName:fe.ZodUndefined,...Se(t)});var Yo=class extends ve{_parse(e){if(this._getType(e)!==X.null){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.null,received:n.parsedType}),ye}return tr(e.data)}};Yo.create=t=>new Yo({typeName:fe.ZodNull,...Se(t)});var co=class extends ve{constructor(){super(...arguments),this._any=!0}_parse(e){return tr(e.data)}};co.create=t=>new co({typeName:fe.ZodAny,...Se(t)});var Ei=class extends ve{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tr(e.data)}};Ei.create=t=>new Ei({typeName:fe.ZodUnknown,...Se(t)});var kn=class extends ve{_parse(e){let r=this._getOrReturnCtx(e);return ee(r,{code:G.invalid_type,expected:X.never,received:r.parsedType}),ye}};kn.create=t=>new kn({typeName:fe.ZodNever,...Se(t)});var bs=class extends ve{_parse(e){if(this._getType(e)!==X.undefined){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.void,received:n.parsedType}),ye}return tr(e.data)}};bs.create=t=>new bs({typeName:fe.ZodVoid,...Se(t)});var Ri=class t extends ve{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==X.array)return ee(r,{code:G.invalid_type,expected:X.array,received:r.parsedType}),ye;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(s||l)&&(ee(r,{code:s?G.too_big:G.too_small,minimum:l?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ee(r,{code:G.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ee(r,{code:G.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>i.type._parseAsync(new an(r,s,r.path,l)))).then(s=>$t.mergeArray(n,s));let o=[...r.data].map((s,l)=>i.type._parseSync(new an(r,s,r.path,l)));return $t.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:ce.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:ce.toString(r)}})}nonempty(e){return this.min(1,e)}};Ri.create=(t,e)=>new Ri({type:t,minLength:null,maxLength:null,exactLength:null,typeName:fe.ZodArray,...Se(e)});function Ss(t){if(t instanceof xr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Rn.create(Ss(n))}return new xr({...t._def,shape:()=>e})}else return t instanceof Ri?new Ri({...t._def,type:Ss(t.element)}):t instanceof Rn?Rn.create(Ss(t.unwrap())):t instanceof ki?ki.create(Ss(t.unwrap())):t instanceof Zn?Zn.create(t.items.map(e=>Ss(e))):t}var xr=class t extends ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Ne.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==X.object){let f=this._getOrReturnCtx(e);return ee(f,{code:G.invalid_type,expected:X.object,received:f.parsedType}),ye}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof kn&&this._def.unknownKeys==="strip"))for(let f in i.data)s.includes(f)||l.push(f);let u=[];for(let f of s){let d=o[f],h=i.data[f];u.push({key:{status:"valid",value:f},value:d._parse(new an(i,h,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof kn){let f=this._def.unknownKeys;if(f==="passthrough")for(let d of l)u.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(f==="strict")l.length>0&&(ee(i,{code:G.unrecognized_keys,keys:l}),n.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let f=this._def.catchall;for(let d of l){let h=i.data[d];u.push({key:{status:"valid",value:d},value:f._parse(new an(i,h,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let f=[];for(let d of u){let h=await d.key;f.push({key:h,value:await d.value,alwaysSet:d.alwaysSet})}return f}).then(f=>$t.mergeObjectSync(n,f)):$t.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,s,l;let u=(s=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&s!==void 0?s:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=ce.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:fe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Ne.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Ne.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return Ss(this)}partial(e){let r={};return Ne.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Ne.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof Rn;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return xA(Ne.objectKeys(this.shape))}};xr.create=(t,e)=>new xr({shape:()=>t,unknownKeys:"strip",catchall:kn.create(),typeName:fe.ZodObject,...Se(e)});xr.strictCreate=(t,e)=>new xr({shape:()=>t,unknownKeys:"strict",catchall:kn.create(),typeName:fe.ZodObject,...Se(e)});xr.lazycreate=(t,e)=>new xr({shape:t,unknownKeys:"strip",catchall:kn.create(),typeName:fe.ZodObject,...Se(e)});var Xo=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=o.map(l=>new Nr(l.ctx.common.issues));return ee(r,{code:G.invalid_union,unionErrors:s}),ye}if(r.common.async)return Promise.all(n.map(async o=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let u of n){let f={...r,common:{...r.common,issues:[]},parent:null},d=u._parseSync({data:r.data,path:r.path,parent:f});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:f}),f.common.issues.length&&s.push(f.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=s.map(u=>new Nr(u));return ee(r,{code:G.invalid_union,unionErrors:l}),ye}}get options(){return this._def.options}};Xo.create=(t,e)=>new Xo({options:t,typeName:fe.ZodUnion,...Se(e)});var nm=t=>t instanceof ea?nm(t.schema):t instanceof Or?nm(t.innerType()):t instanceof ta?[t.value]:t instanceof ra?t.options:t instanceof na?Object.keys(t.enum):t instanceof ia?nm(t._def.innerType):t instanceof Zo?[void 0]:t instanceof Yo?[null]:null,sm=class t extends ve{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.object)return ee(r,{code:G.invalid_type,expected:X.object,received:r.parsedType}),ye;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(ee(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ye)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let s=nm(o.shape[e]);if(!s)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of s){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:fe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Se(n)})}};function hS(t,e){let r=ao(t),n=ao(e);if(t===e)return{valid:!0,data:t};if(r===X.object&&n===X.object){let i=Ne.objectKeys(e),o=Ne.objectKeys(t).filter(l=>i.indexOf(l)!==-1),s={...t,...e};for(let l of o){let u=hS(t[l],e[l]);if(!u.valid)return{valid:!1};s[l]=u.data}return{valid:!0,data:s}}else if(r===X.array&&n===X.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let s=t[o],l=e[o],u=hS(s,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return r===X.date&&n===X.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Jo=class extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(dS(o)||dS(s))return ye;let l=hS(o.value,s.value);return l.valid?((mS(o)||mS(s))&&r.dirty(),{status:r.value,value:l.data}):(ee(n,{code:G.invalid_intersection_types}),ye)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Jo.create=(t,e,r)=>new Jo({left:t,right:e,typeName:fe.ZodIntersection,...Se(r)});var Zn=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.array)return ee(n,{code:G.invalid_type,expected:X.array,received:n.parsedType}),ye;if(n.data.length<this._def.items.length)return ee(n,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ye;!this._def.rest&&n.data.length>this._def.items.length&&(ee(n,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((s,l)=>{let u=this._def.items[l]||this._def.rest;return u?u._parse(new an(n,s,n.path,l)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>$t.mergeArray(r,s)):$t.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Zn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Zn({items:t,typeName:fe.ZodTuple,rest:null,...Se(e)})};var cm=class t extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.object)return ee(n,{code:G.invalid_type,expected:X.object,received:n.parsedType}),ye;let i=[],o=this._def.keyType,s=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new an(n,l,n.path,l)),value:s._parse(new an(n,n.data[l],n.path,l))});return n.common.async?$t.mergeObjectAsync(r,i):$t.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ve?new t({keyType:e,valueType:r,typeName:fe.ZodRecord,...Se(n)}):new t({keyType:so.create(),valueType:e,typeName:fe.ZodRecord,...Se(r)})}},ws=class extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.map)return ee(n,{code:G.invalid_type,expected:X.map,received:n.parsedType}),ye;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([l,u],f)=>({key:i._parse(new an(n,l,n.path,[f,"key"])),value:o._parse(new an(n,u,n.path,[f,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let u of s){let f=await u.key,d=await u.value;if(f.status==="aborted"||d.status==="aborted")return ye;(f.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(f.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let u of s){let f=u.key,d=u.value;if(f.status==="aborted"||d.status==="aborted")return ye;(f.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(f.value,d.value)}return{status:r.value,value:l}}}};ws.create=(t,e,r)=>new ws({valueType:e,keyType:t,typeName:fe.ZodMap,...Se(r)});var _s=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.set)return ee(n,{code:G.invalid_type,expected:X.set,received:n.parsedType}),ye;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ee(n,{code:G.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ee(n,{code:G.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function s(u){let f=new Set;for(let d of u){if(d.status==="aborted")return ye;d.status==="dirty"&&r.dirty(),f.add(d.value)}return{status:r.value,value:f}}let l=[...n.data.values()].map((u,f)=>o._parse(new an(n,u,n.path,f)));return n.common.async?Promise.all(l).then(u=>s(u)):s(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:ce.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};_s.create=(t,e)=>new _s({valueType:t,minSize:null,maxSize:null,typeName:fe.ZodSet,...Se(e)});var lm=class t extends ve{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.function)return ee(r,{code:G.invalid_type,expected:X.function,received:r.parsedType}),ye;function n(l,u){return om({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,im(),gl].filter(f=>!!f),issueData:{code:G.invalid_arguments,argumentsError:u}})}function i(l,u){return om({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,im(),gl].filter(f=>!!f),issueData:{code:G.invalid_return_type,returnTypeError:u}})}let o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof lo){let l=this;return tr(async function(...u){let f=new Nr([]),d=await l._def.args.parseAsync(u,o).catch(x=>{throw f.addIssue(n(u,x)),f}),h=await Reflect.apply(s,this,d);return await l._def.returns._def.type.parseAsync(h,o).catch(x=>{throw f.addIssue(i(h,x)),f})})}else{let l=this;return tr(function(...u){let f=l._def.args.safeParse(u,o);if(!f.success)throw new Nr([n(u,f.error)]);let d=Reflect.apply(s,this,f.data),h=l._def.returns.safeParse(d,o);if(!h.success)throw new Nr([i(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Zn.create(e).rest(Ei.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Zn.create([]).rest(Ei.create()),returns:r||Ei.create(),typeName:fe.ZodFunction,...Se(n)})}},ea=class extends ve{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ea.create=(t,e)=>new ea({getter:t,typeName:fe.ZodLazy,...Se(e)});var ta=class extends ve{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ee(r,{received:r.data,code:G.invalid_literal,expected:this._def.value}),ye}return{status:"valid",value:e.data}}get value(){return this._def.value}};ta.create=(t,e)=>new ta({value:t,typeName:fe.ZodLiteral,...Se(e)});function xA(t,e){return new ra({values:t,typeName:fe.ZodEnum,...Se(e)})}var ra=class t extends ve{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ee(r,{expected:Ne.joinValues(n),received:r.parsedType,code:G.invalid_type}),ye}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),n=this._def.values;return ee(r,{received:r.data,code:G.invalid_enum_value,options:n}),ye}return tr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return t.create(e)}exclude(e){return t.create(this.options.filter(r=>!e.includes(r)))}};ra.create=xA;var na=class extends ve{_parse(e){let r=Ne.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==X.string&&n.parsedType!==X.number){let i=Ne.objectValues(r);return ee(n,{expected:Ne.joinValues(i),received:n.parsedType,code:G.invalid_type}),ye}if(r.indexOf(e.data)===-1){let i=Ne.objectValues(r);return ee(n,{received:n.data,code:G.invalid_enum_value,options:i}),ye}return tr(e.data)}get enum(){return this._def.values}};na.create=(t,e)=>new na({values:t,typeName:fe.ZodNativeEnum,...Se(e)});var lo=class extends ve{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.promise&&r.common.async===!1)return ee(r,{code:G.invalid_type,expected:X.promise,received:r.parsedType}),ye;let n=r.parsedType===X.promise?r.data:Promise.resolve(r.data);return tr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};lo.create=(t,e)=>new lo({type:t,typeName:fe.ZodPromise,...Se(e)});var Or=class extends ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{ee(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(s).then(l=>this._def.schema._parseAsync({data:l,path:n.path,parent:n})):this._def.schema._parseSync({data:s,path:n.path,parent:n})}if(i.type==="refinement"){let s=l=>{let u=i.refinement(l,o);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?ye:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?ye:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!yl(s))return s;let l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>yl(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:r.value,value:l})):s);Ne.assertNever(i)}};Or.create=(t,e,r)=>new Or({schema:t,typeName:fe.ZodEffects,effect:e,...Se(r)});Or.createWithPreprocess=(t,e,r)=>new Or({schema:e,effect:{type:"preprocess",transform:t},typeName:fe.ZodEffects,...Se(r)});var Rn=class extends ve{_parse(e){return this._getType(e)===X.undefined?tr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Rn.create=(t,e)=>new Rn({innerType:t,typeName:fe.ZodOptional,...Se(e)});var ki=class extends ve{_parse(e){return this._getType(e)===X.null?tr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ki.create=(t,e)=>new ki({innerType:t,typeName:fe.ZodNullable,...Se(e)});var ia=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===X.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};ia.create=(t,e)=>new ia({innerType:t,typeName:fe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Se(e)});var Es=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return am(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Nr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Nr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Es.create=(t,e)=>new Es({innerType:t,typeName:fe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Se(e)});var Rs=class extends ve{_parse(e){if(this._getType(e)!==X.nan){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.nan,received:n.parsedType}),ye}return{status:"valid",value:e.data}}};Rs.create=t=>new Rs({typeName:fe.ZodNaN,...Se(t)});var u9=Symbol("zod_brand"),um=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},xl=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ye:o.status==="dirty"?(r.dirty(),yA(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ye:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:fe.ZodPipeline})}},ks=class extends ve{_parse(e){let r=this._def.innerType._parse(e);return yl(r)&&(r.value=Object.freeze(r.value)),r}};ks.create=(t,e)=>new ks({innerType:t,typeName:fe.ZodReadonly,...Se(e)});var TA=(t,e={},r)=>t?co.create().superRefine((n,i)=>{var o,s;if(!t(n)){let l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,u=(s=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&s!==void 0?s:!0,f=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...f,fatal:u})}}):co.create(),p9={object:xr.lazycreate},fe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(fe||(fe={}));var f9=(t,e={message:`Input not instance of ${t.name}`})=>TA(r=>r instanceof t,e),SA=so.create,vA=zo.create,d9=Rs.create,m9=Go.create,bA=Ko.create,h9=Qo.create,g9=vs.create,y9=Zo.create,x9=Yo.create,T9=co.create,S9=Ei.create,v9=kn.create,b9=bs.create,w9=Ri.create,_9=xr.create,E9=xr.strictCreate,R9=Xo.create,k9=sm.create,M9=Jo.create,P9=Zn.create,A9=cm.create,D9=ws.create,I9=_s.create,F9=lm.create,C9=ea.create,N9=ta.create,O9=ra.create,L9=na.create,U9=lo.create,hA=Or.create,V9=Rn.create,B9=ki.create,W9=Or.createWithPreprocess,H9=xl.create,$9=()=>SA().optional(),j9=()=>vA().optional(),q9=()=>bA().optional(),z9={string:t=>so.create({...t,coerce:!0}),number:t=>zo.create({...t,coerce:!0}),boolean:t=>Ko.create({...t,coerce:!0}),bigint:t=>Go.create({...t,coerce:!0}),date:t=>Qo.create({...t,coerce:!0})},G9=ye,He=Object.freeze({__proto__:null,defaultErrorMap:gl,setErrorMap:Y5,getErrorMap:im,makeIssue:om,EMPTY_PATH:X5,addIssueToContext:ee,ParseStatus:$t,INVALID:ye,DIRTY:yA,OK:tr,isAborted:dS,isDirty:mS,isValid:yl,isAsync:am,get util(){return Ne},get objectUtil(){return fS},ZodParsedType:X,getParsedType:ao,ZodType:ve,ZodString:so,ZodNumber:zo,ZodBigInt:Go,ZodBoolean:Ko,ZodDate:Qo,ZodSymbol:vs,ZodUndefined:Zo,ZodNull:Yo,ZodAny:co,ZodUnknown:Ei,ZodNever:kn,ZodVoid:bs,ZodArray:Ri,ZodObject:xr,ZodUnion:Xo,ZodDiscriminatedUnion:sm,ZodIntersection:Jo,ZodTuple:Zn,ZodRecord:cm,ZodMap:ws,ZodSet:_s,ZodFunction:lm,ZodLazy:ea,ZodLiteral:ta,ZodEnum:ra,ZodNativeEnum:na,ZodPromise:lo,ZodEffects:Or,ZodTransformer:Or,ZodOptional:Rn,ZodNullable:ki,ZodDefault:ia,ZodCatch:Es,ZodNaN:Rs,BRAND:u9,ZodBranded:um,ZodPipeline:xl,ZodReadonly:ks,custom:TA,Schema:ve,ZodSchema:ve,late:p9,get ZodFirstPartyTypeKind(){return fe},coerce:z9,any:T9,array:w9,bigint:m9,boolean:bA,date:h9,discriminatedUnion:k9,effect:hA,enum:O9,function:F9,instanceof:f9,intersection:M9,lazy:C9,literal:N9,map:D9,nan:d9,nativeEnum:L9,never:v9,null:x9,nullable:B9,number:vA,object:_9,oboolean:q9,onumber:j9,optional:V9,ostring:$9,pipeline:H9,preprocess:W9,promise:U9,record:A9,set:I9,strictObject:E9,string:SA,symbol:g9,transformer:hA,tuple:P9,undefined:y9,union:R9,unknown:S9,void:b9,NEVER:G9,ZodIssueCode:G,quotelessJson:Z5,ZodError:Nr});function wA(t){let e=t.operands.map(gS).join(" ");return`(#${t.operator} ${e})`}function gS(t){return t.type==="capture"?`@${t.name}`:t.value}function _A(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>K9(t,r))}function K9(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=gS(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var rr=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof pm&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:_A(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new pm(n.name);return i}else return n.value})}},pm=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var yS=He.object({type:He.literal("string"),value:He.string()}),we={node:He.object({type:He.literal("capture"),name:He.string()}),string:yS,integer:yS.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:He.ZodIssueCode.custom,message:"Expected an integer"}),He.NEVER):{type:"integer",value:r}}),boolean:yS.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:He.ZodIssueCode.custom,message:"Expected true or false"}),He.NEVER))};var xS=class extends rr{constructor(){super(...arguments);this.name="not-type?";this.schema=He.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return!n.includes(r.type)}},TS=class extends rr{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=He.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},SS=class extends rr{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=He.tuple([we.node,we.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},vS=class extends rr{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=He.tuple([we.node,we.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},bS=class extends rr{constructor(){super(...arguments);this.name="child-range!";this.schema=He.union([He.tuple([we.node,we.integer]),He.tuple([we.node,we.integer,we.integer]),He.tuple([we.node,we.integer,we.integer,we.boolean]),He.tuple([we.node,we.integer,we.integer,we.boolean,we.boolean])])}run(r,n,i,o,s){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let u=l[n],f=l[i];return r.range=on(o?u.endPosition:u.startPosition,s?f.startPosition:f.endPosition),!0}},wS=class extends rr{constructor(){super(...arguments);this.name="character-range!";this.schema=He.union([He.tuple([we.node,we.integer]),He.tuple([we.node,we.integer,we.integer])])}run(r,n,i){return r.range=new H(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},_S=class extends rr{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=He.tuple([we.node,we.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[u,f]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new H(i.positionAt(d+u),i.positionAt(d+f)),!0}},ES=class extends rr{constructor(){super(...arguments);this.name="trim-end!";this.schema=He.tuple([we.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),s=o.length-o.trimEnd().length;return s>0&&(r.range=new H(i.start,AR(n,i.end,-s))),!0}},RS=class extends rr{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=He.tuple([we.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},kS=class extends rr{constructor(){super(...arguments);this.name="log!";this.schema=He.tuple([we.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},MS=class extends rr{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=He.tuple([we.node,we.string])}run(r,n){return r.insertionDelimiter=n,!0}},PS=class extends rr{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=He.tuple([we.node,we.node,we.string,we.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},EA=[new kS,new xS,new ES,new TS,new SS,new bS,new wS,new _S,new RS,new MS,new PS,new vS];function RA(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((s,l)=>{let u=EA.find(({name:d})=>d===s.operator);if(u==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${s.operator}"`});return}let f=u.createPredicate(s.operands);if(!f.success){e.push(...f.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(f.predicate)}),r.push(o)}),{errors:e,predicates:r}}function kA(t){return t.map(e=>e.name.endsWith(".startOf")?{...e,name:e.name.replace(/\.startOf$/,""),range:e.range.start.toEmptyRange()}:e.name.endsWith(".endOf")?{...e,name:e.name.replace(/\.endOf$/,""),range:e.range.end.toEmptyRange()}:e)}var Tl=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n}static create(e,r,n){let{errors:i,predicates:o}=RA(n.predicates);if(i.length>0){for(let s of i){let l=[`language ${e}`,`pattern ${s.patternIdx}`,`predicate \`${wA(n.predicates[s.patternIdx][s.predicateIdx])}\``].join(", ");rt(I().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${l}: ${s.error}`)}if(I().runMode==="test")throw new Error("Invalid predicates")}return new t(r,n,o)}matches(e,r,n){return this.query.matches(this.treeSitter.getTree(e).rootNode,{startPosition:r==null?void 0:PA(r),endPosition:n==null?void 0:PA(n)}).map(({pattern:i,captures:o})=>({patternIdx:i,captures:o.map(({name:s,node:l})=>({name:s,node:l,document:e,range:aA(l),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>dA(l)}))})).filter(i=>this.patternPredicates[i.patternIdx].every(o=>o(i))).map(i=>{let o=Object.entries(Ux(i.captures,({name:s})=>MA(s))).map(([s,l])=>{if(l=kA(l),!fA(l,I().messages)&&I().runMode==="test")throw new Error("Invalid captures");return{name:s,range:l.map(({range:f})=>f).reduce((f,d)=>d.union(f)),allowMultiple:l.some(f=>f.allowMultiple),insertionDelimiter:l.find(f=>f.insertionDelimiter!=null)?.insertionDelimiter,hasError:()=>l.some(f=>f.hasError())}});return{...i,captures:o}})}get captureNames(){return gi(this.query.captureNames.map(MA))}};function MA(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}function PA(t){return{row:t.line,column:t.character}}var DA="_",Q9=[DA,...Uo],Z9=["prefix","leading","trailing"],Y9=["startOf","endOf"],X9=["domain","removal","interior","iteration","iteration.domain"],AA=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],oa=new Set;for(let t of Q9){if(t!==DA){oa.add(t);for(let e of AA)oa.add(`${t}.${e}`)}for(let e of Z9){oa.add(`${t}.${e}`);for(let r of Y9)oa.add(`${t}.${e}.${r}`)}for(let e of X9){oa.add(`${t}.${e}`);for(let r of AA)oa.add(`${t}.${e}.${r}`)}}var J9=new RegExp("^(?!;;).*@([\\w.]*)","gm");function IA(t,e){let r=e.matchAll(J9),n=[];for(let o of r){let s=o[1];if(!(s.length>1&&!s.includes(".")&&s.startsWith("_"))&&!oa.has(s)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${s}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(rt(I().messages,"validateQueryCaptures.invalidCaptureName",i),I().runMode==="test")throw new Error(i)}var fm=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await e8(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let s=n.getLanguage(i).query(o),l=Tl.create(i,n,s);return new t(l)}getScopeHandler(e){if(this.query.captureNames.includes(e.type))return new jd(this.query,e)}getCaptures(e,r){return this.query.matches(e).map(n=>n.captures.find(({name:i})=>i===r)).filter(n=>n!=null)}};async function e8(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,s]of Object.entries(n)){if(s!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(rt(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&IA(o,l),n[o]=l,Xr(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,u=>{let f=u[1];i&&t8(t,o,f,u[0]),n[f]=n[f]??null})}return Object.values(n).join(`
`)}function t8(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(rt(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(rt(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var FA=Symbol("LANGUAGE_UNDEFINED"),dm=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Bt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;e.onDidOpenTextDocument(i=>{this.loadLanguage(i.languageId)}),e.onDidChangeVisibleTextEditors(i=>{i.forEach(({document:o})=>this.loadLanguage(o.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(rt(this.ide.messages,"Failed to load language definitions",bn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await fm.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??FA;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===FA?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var mm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e){for(let r of this.nestedStages)try{return r.run(e)}catch{continue}throw new Error("No modifier could be applied")}};var Ms=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e){if(this.shouldModify(e))try{return this.nestedStage.run(e).map(r=>r.withThatTarget(e))}catch(r){if(!this.suppressErrors)throw r}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},Ps=class extends Ms{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},Sl=class extends Ms{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},hm=class extends Ms{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},As=class extends Ms{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function CA(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function Ds(t,e,r,n,i){if(n&&i&&CA(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.isLine&&r.isLine?new _n({editor:e.editor,isReversed:t,contentRange:cs(e,r,n,i)}):new Et({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:ro(e,r,n,i),isToken:n&&i&&e.isToken&&r.isToken})}function gm(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[s]=i,l=s.contentRange.start.isAfterOrEqual(o.contentRange.start),[u,f]=l?[o,s]:[s,o];return[Ds(t,u,f,!0,!0)]}function ym(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,s]=i;return n==="forward"?s:n==="backward"||(t.isPreferredOver?.(o,s)??!1)?o:s}default:throw new Error("Expected no more than 2 scope candidates")}}function xm(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:s}}=t;if(s.isEqual(o)){let f=ym(e,i,o);return f==null||(r>0&&(f=AS(e,i,f.domain.end,"forward",r,!0)),f==null)?void 0:f.getTargets(n)}let l=AS(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(s))return l.getTargets(n);let u=AS(e,i,s,"backward",r);if(u!=null)return gm(n,l,u)}function AS(t,e,r,n,i,o=!1){let s=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(s===i)return l;s+=1}}var Tm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.create(r,e.editor.document.languageId);if(i==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let o=xm(e,i,n);if(o==null){if(r.type==="collectionItem")return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);throw new wt(this.modifier.scopeType.type)}return o}};var Sm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,{editor:n,isReversed:i}=e,o=this.scopeHandlerFactory.create(r,n.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let s;if(e.hasExplicitRange&&(s=NA(o,n,e.contentRange),s.length===1&&s[0].domain.contains(e.contentRange)&&(s=void 0)),s==null)try{s=this.getDefaultIterationRange(o,this.scopeHandlerFactory,e).flatMap(l=>NA(o,n,l))}catch(l){if(!(l instanceof wt))throw l;s=[]}if(s.length===0){if(r.type==="collectionItem")return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);throw new wt(r.type)}return s.flatMap(l=>l.getTargets(i))}getDefaultIterationRange(e,r,n){let i=r.create(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=xm(n,i);if(o==null)throw new wt(`iteration scope for ${e.scopeType.type}`);return o.map(s=>s.contentRange)}};function NA(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var vm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},bm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var wm=class{run(){return hd(I()).map(e=>new dd({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var _m=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new DS(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},DS=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return r8(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return xt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return n8(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[uo(e,r,n,i)];let s=CS(e,r);return[uo(n?OA(this.modifierStageFactory,e,o,s?"backward":"forward"):e,i?OA(this.modifierStageFactory,r,o,s?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n;e.type==="implicit"?(r=new wm,n=[]):(r=this.markStageFactory.create(e.mark),n=IS(this.modifierStageFactory,e.modifiers));let i=r.run(),o=[...n,...this.opts.actionFinalStages,...this.opts.noAutomaticTokenExpansion?[]:[new As(this.modifierStageFactory)]];return FS(o,i)}};function IS(t,e){return e.map(t.create).reverse()}function FS(t,e){return t.forEach(r=>{e=e.flatMap(n=>r.run(n))}),e}function OA(t,e,r,n){return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e)[0]}function CS(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function r8(t){return Ok(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function LA(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function uo(t,e,r=!1,n=!1){LA(t,e);let i=CS(t,e);return Ds(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function n8(t,e,r,n){LA(t,e);let i=CS(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),f=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let h=l;;h+=o){let g=new H(h,t.contentRange.start.character,h,t.contentRange.end.character);if(d.push(new Ue({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),h===f)return d}}var Em=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifier.modifiers??[{type:"containingScope",scopeType:{type:"line"}}],n=IS(this.modifierStageFactory,r);return FS(n,[e]).map(o=>{let s=this.modifier.type==="extendThroughStartOf";return new md({editor:e.editor,isReversed:s,inputTarget:e,modifiedTarget:o,isHead:s})})}};var Mi=class extends Error{constructor(){super("Scope index out of range"),this.name="OutOfRangeError"}};function UA(t,e,r){return NS(t,e,r),t.slice(e,r+1)}function NS(t,e,r){if(e<0||r>=t.length)throw new Mi}var Is=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e){let r=new As(this.modifierStageFactory).run(e)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(r);case"ordinalScope":return this.handleOrdinalScope(r,this.modifier);case"relativeScope":return this.handleRelativeScope(r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e){return Array.from(Cd(this.getEveryRanges(e),([r,n])=>this.getTargetIterable(e,r,n,"forward")))}handleOrdinalScope(e,{start:r,length:n}){return this.getEveryRanges(e).flatMap(([i,o])=>VA(this.getTargetIterable(e,i,o,r>=0?"forward":"backward"),r>=0?r:-(n+r),n))}handleRelativeScope(e,{direction:r,offset:n,length:i}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(s=>{let{editor:l}=s,u=r==="forward"?new H(n===0?s.contentRange.start:s.contentRange.end,l.document.range.end):new H(l.document.range.start,n===0?s.contentRange.end:s.contentRange.start);return VA(this.getTargetIterable(e,l,u,r),n===0?0:n-1,i)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i){let o=Nt(Gn(new RegExp(Ir(e.contentText),"g"),r,n,i),l=>new Ue({contentRange:l,editor:r,isReversed:!1,isToken:!1})),s=i8(e);if(s!=null){let l=this.modifierStageFactory.create({type:"containingScope",scopeType:s});return PP(Nt(o,u=>{try{let f=l.run(u);return f.length===1&&f[0].contentRange.isRangeEqual(u.contentRange)?f[0]:null}catch{return null}}),u=>u!=null)}return o}};function i8(t){return t.isLine?{type:"line"}:t.isToken?{type:"token"}:t.isWord?{type:"word"}:null}function VA(t,e,r){Array.from(fl(e,t));let n=Array.from(fl(r,t));if(n.length<r)throw new Mi;return n}var Rm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoInteriorStage=o8(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoInteriorStage.run(e).flatMap(r=>r.getInterior())}},km=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=OS(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoBoundaryStage.run(e).flatMap(r=>r.getBoundary())}};function o8(t){return new Sl(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getInterior()==null)}function OS(t){return new Sl(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}function BA(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function WA(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let s of o){if(n==null||(n=s(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var LS=t=>new se(t.row,t.column),HA=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(s,l)=>s!=null&&l.includes(s.type),o=s=>s!=null&&!i(s,n);return(s,l)=>{let u,{start:f,end:d}=l;if(i(s.parent,t))return i(s,e)?u=s.nextNamedSibling:i(s,r)?u=s.previousNamedSibling:s.type===","?u=d.isBeforeOrEqual(LS(s.startPosition))?s.previousNamedSibling:s.nextNamedSibling:u=s,o(u)?u:null;if(i(s,t)){let h=[...s.children],g=h.find(({startPosition:v})=>LS(v).isAfterOrEqual(d))??null;if(o(g))return g;h.reverse();let x=h.find(({endPosition:v})=>LS(v).isBeforeOrEqual(f))??null;if(o(x))return x}return null}};function Fe(...t){let e=a8(t);return r=>{for(let n of e){let i=s8(r,n);if(i!=null)return i}return null}}function a8(t){return t.map(e=>e.split(".").map(r=>new US(r)))}function s8(t,e){let r=c8(t,e);!r&&e.length>1&&(r=l8(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function c8(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function l8(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let s=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=s.length===1?s[0]:null}}return r}var US=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Pe(t,e=Kn){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function Mm(t,e=Kn){let r=BA(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function Fs(t,e=0,r=Kn){return Pe(WA(e,...t),r)}function St(...t){return Pe(Fe(...t))}function po(...t){return Pe(HA(...t),cA())}function Cs(...t){return Pe(Fe(...t),lA)}function Mn(t,e=[]){return Pe(Fe(...t),uA(...e))}function fo(t,e=[]){return Pe(Fe(...t),pA(...e))}function at(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function $A(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function sn(t){return Object.freeze(Object.fromEntries(xi(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,St(...r)]:typeof r=="string"?[e,St(r)]:[e,r]})))}function jA(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function u8(t,e){return BS(t,r=>Math.floor(r/2)*2+e)}function Pm(t){return u8(Fe("map_lit"),t)}function BS(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=vl(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let s=e(o);return s===-1?null:i[s]}}function p8(){return BS(t=>t,t=>t)}var vl=t=>jA(t,"value"),VS="~quoting_lit.list_lit!",zA=Fe(VS);function WS(...t){return e=>{let r=zA(e);if(r==null)return null;let n=vl(r)[0];return t.includes(n?.text)?r:null}}function f8(...t){return Pe(WS(...t))}var GA=WS("defn","defmacro"),qA=Mm([GA,t=>vl(t)[1]]),KA=WS("if","if-let","when","when-let"),d8=Pe(KA),m8={collectionKey:Pe(Pm(0)),collectionItem:at(Pe(Pm(0),hl(t=>t.type==="{"||t.type==="}",", ",Vt,Pm(1))),Pe(p8())),value:Pe(Pm(1)),argumentOrParameter:Pe(BS(Fe(VS),t=>t!==0?t:-1)),functionCall:VS,functionCallee:Mm([zA,t=>vl(t)[0]]),namedFunction:Pe(GA),functionName:qA,name:qA,anonymousFunction:at(f8("fn"),St("anon_fn_lit")),ifStatement:d8,condition:Mm([KA,t=>vl(t)[1]])},QA=sn(m8);var ZA=["command","displayed_equation","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],h8=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],XA=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],YA=XA.map(t=>`${t}[text]`),g8=XA.map(t=>`${t}[command]`);function HS(t,e){return{selection:new Te(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new Te(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function y8(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new Te(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function x8(t,e){let r=e.startIndex,n=e.childForFieldName("label");if(n==null){let i=e.childForFieldName("command");i!=null&&(r=i.endIndex+1)}else r=n.endIndex+1;return{selection:new Te(t.document.positionAt(r),t.document.positionAt(e.endIndex)),context:{leadingDelimiterRange:new H(t.document.positionAt(e.startIndex),t.document.positionAt(r-1))}}}var T8={argumentOrParameter:at(Fs([Fe(...ZA),Fe(...h8)],1,HS),Pe(Fe("begin[name]","end[name]",...YA),HS)),functionCall:at(Pe(Fe(...ZA,"begin","end")),Pe(Fe(...g8),y8)),name:at(Pe(Fe(...YA),HS),St("begin[name][text]","end[name][text]")),collectionItem:Pe(Fe("enum_item"),x8)},JA=sn(T8);var S8=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],v8=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],b8=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],w8=["hash"],_8=["array","string_array","symbol_array"],E8=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],R8=[":","=>"];function k8(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var M8={statement:at(St(...S8),Fs([Fe(...b8),Fe(...v8)],1)),anonymousFunction:at(St("lambda","do_block"),Pe(k8)),condition:Cs("*[condition]"),argumentOrParameter:po("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:fo(["pair[key]"],[":"]),value:Mn(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],E8.concat(R8)),collectionItem:po(...w8,..._8)},eD=sn(M8);function $S(){let t=Qn(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let s=r.childForFieldName("alternative");if(s==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new Te(l.start,uS(s.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new Te(uS(i.child(0).startPosition),o.end),context:{}}}}function tD(t){let e=$S();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):Kn(r,n)}}var rD=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],P8=["source_file","block","declaration_list"];function A8(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function D8(t,e){return{selection:sA(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:on(e.children[0].startPosition,e.children[1].startPosition)}}}function I8(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return rD.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var F8={statement:Fs([Fe(...P8),Fe(...rD)],1),condition:at(St("while_expression[condition]","if_expression[condition]"),Pe(Fe("while_let_expression","if_let_expression"),Qn(["while","if","block"],[],{includeUnnamedChildren:!0})),Mn(["*.match_pattern![condition]"],["if"])),collectionItem:po("array_expression","tuple_expression","tuple_type"),type:at(Mn(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Pe(Fe("constrained_type_parameter[bounds]","where_predicate[bounds]"),D8),Mn(["function_item[return_type]"],["->"]),Pe(A8),St("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:po("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:at(fo(["field_initializer[name]","field_pattern[name]"],[":"])),name:at(St("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),fo(["field_initializer[name]","field_pattern[name]"],[":"])),value:at(Mn(["let_declaration[value]"],["="]),Mn(["field_initializer[value]","field_pattern[pattern]"],[":"]),St("meta_item[value]","const_item[value]"),Pe(I8)),attribute:fo(["mutable_specifier","attribute_item"]),branch:at(St("match_arm"),Pe(Fe("else_clause"),tD("if_expression")),Pe(Fe("if_expression"),$S()))},nD=sn(F8);var C8={argumentOrParameter:po("arguments","parameters","class_parameters","bindings"),branch:Pe(Fe("case_clause"),Qn([],[],{includeUnnamedChildren:!0})),type:Mn(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:Mn(["*[value]","*[default_value]","type_definition[type]"],["="]),condition:Cs("*[condition]")},iD=sn(C8);var N8=["apply_statement","at_rule","charset_statement","debug_statement","each_statement","error_statement","for_statement","forward_statement","function_statement","if_statement","import_statement","include_statement","keyframes_statement","media_statement","mixin_statement","namespace_statement","placeholder","rule_set","supports_statement","use_statement","warn_statement","while_statement"];function aD(t){return[",","(",")"].includes(t.type)||sD(t)}function sD(t){return t.type==="plain_value"&&t.text==="at"}function oD(t){return e=>{(sD(e)||e.type===",")&&(e=e.previousSibling);let r=t(e);for(;r&&!aD(r);)e=r,r=t(r);return e}}function O8(t,e){return e.type!=="declaration"?null:e.descendantsOfType("unit").map(r=>({node:r,selection:Kn(t.editor,r)}))}var L8={condition:Cs("condition"),statement:at(St(...N8),Pe(Fe("attribute_selector"),Qn([],["attribute_name","string_value"]))),argumentOrParameter:at(Pe(Fe("arguments.*!","parameters.*!"),hl(t=>aD(t),", ",oD(t=>t.previousSibling),oD(t=>t.nextSibling)))),collectionKey:fo(["declaration.property_name!"],[":"]),value:at(Pe(Fe("declaration"),Qn(["property_name","variable_name"])),Pe(Fe("include_statement","namespace_statement"),Qn()),St("return_statement.*!","import_statement.*!","attribute_selector.plain_value!","attribute_selector.string_value!","parameter.default_value!")),unit:at(St("integer_value.unit!"),O8)},jS=sn(L8);function cD(t,e,r){let n=bl[t];if(n==null)throw new gp(t);let i=n[e];return i==null?$A(e):r?U8(i):i}var bl={clojure:QA,css:jS,latex:JA,ruby:eD,rust:nD,scala:iD,scss:jS};function U8(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>V8(i.node,nd(e,i.selection.selection),t)),n.length>0?n:null)}}function V8(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var Ns=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=cD(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new wt(this.modifier.scopeType.type);let i=B8(n,r,{editor:e.editor,selection:new Te(e.contentRange.start,e.contentRange.end)});if(i==null)throw new wt(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:u,removalRange:f,interiorRange:d}=o.context;if(f!=null&&(l!=null||u!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:h,selection:g}=o.selection;return new io({scopeTypeType:this.modifier.scopeType.type,editor:h,isReversed:e.isReversed,contentRange:g,removalRange:f,interiorRange:d,insertionDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:u})})}};function B8(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:nd(r,o.selection),context:o.context}));n=n.parent}return null}function uD(t,e){let r=pD(t,e);for(;r!=null;){if(W8(t,e,r))return{range:r.getInterior()[0].contentRange,boundary:qS(r)};r=H8(t,e.editor,r)}return{range:dl(e.editor,e.contentRange)}}function W8(t,e,r){let{contentRange:n}=e;if(n.isEmpty){let[o,s]=qS(r),l=n.start;if(l.isEqual(o.start)||l.isEqual(s.end))return!1;let u=e.editor.document.lineAt(l);if(l.isEqual(o.end)&&lD(u,l.character)||l.isEqual(s.start)&&lD(u,l.character-1))return!1}else{if(n.isRangeEqual(r.contentRange))return!1;let[o,s]=qS(r);if(n.isRangeEqual(o)||n.isRangeEqual(s))return!1}let i=$8(t,r);return!(i!=null&&r.contentRange.start.isBeforeOrEqual(i.contentRange.start))}function qS(t){return t.getBoundary().map(e=>e.contentRange)}function lD(t,e){return e<t.range.start.character||e>=t.range.end.character||t.text[e].trim()===""}function H8(t,e,r){let n=e.document.offsetAt(r.contentRange.start);if(n===0)return;let i=e.document.positionAt(n-1);return pD(t,new Ue({editor:e,contentRange:new H(i,i),isReversed:!1}))}function pD(t,e){return fD(t,e,{type:"surroundingPair",delimiter:"collectionBoundary",requireStrongContainment:!0})}function $8(t,e){return fD(t,e,{type:"surroundingPair",delimiter:"string",requireStrongContainment:!0})}function fD(t,e,r){let n=t.create({type:"containingScope",scopeType:r}),i=(()=>{try{return n.run(e)}catch{return[]}})();if(i.length>1)throw Error("Expected only one surrounding pair target");return i[0]}function dD(t,e,r){let{document:n}=t,o=n.getText(e).split(/([,(){}<>[\]"'`])|(?<!\\)(\\"|\\'|\\`)/g).filter(f=>f!=null&&f.length>0),s=j8(o),l=[],u=n.offsetAt(e.start);return s.forEach(f=>{if(f.trim().length===0){u+=f.length;return}if(f===mD)l.push({type:"separator",range:new H(n.positionAt(u),n.positionAt(u+f.length))});else{let d=u+(f.length-f.trimStart().length);l.push({type:"item",range:new H(n.positionAt(d),n.positionAt(d+f.trim().length))})}u+=f.length}),r!=null?[{type:"boundary",range:r[0]},...l,{type:"boundary",range:r[1]}]:l}function j8(t){let e=[],r=0,n=null,i=null,o=-1;return t.forEach((s,l)=>{r>0?s===i?--r:s===n&&++r:(zS[s]!=null&&t.indexOf(zS[s],l+1)>-1&&(n=s,i=zS[s],r=1),o<0&&(o=l));let u=s===mD&&r===0;if(u||l===t.length-1){let f=u?l:l+1;e.push(t.slice(o,f).join("")),o=-1,u&&e.push(s)}}),e}var mD=",",zS={"(":")","{":"}","<":">","[":"]",'"':'"',"'":"'","`":"`"};var Am=class{constructor(e,r,n){this.languageDefinitions=e;this.modifierStageFactory=r;this.modifier=n}run(e){try{return new Ns(this.languageDefinitions,this.modifier).run(e)}catch{}return this.modifier.type==="everyScope"?this.getEveryTarget(this.modifierStageFactory,e):[this.getSingleTarget(this.modifierStageFactory,e)]}getEveryTarget(e,r){let n=gD(e,r),i=r.hasExplicitRange?hD(r,n):n;if(i.length===0)throw new wt(this.modifier.scopeType.type);return i.map(o=>this.itemInfoToTarget(r,o))}getSingleTarget(e,r){let n=gD(e,r),i=hD(r,n);if(i.length===0)throw new wt(this.modifier.scopeType.type);let o=i[0],s=i[i.length-1],l={contentRange:o.contentRange.union(s.contentRange),domain:o.domain.union(s.domain),leadingDelimiterRange:o.leadingDelimiterRange,trailingDelimiterRange:s.trailingDelimiterRange},u=l.leadingDelimiterRange!=null&&l.trailingDelimiterRange!=null&&jT(r.editor,l.leadingDelimiterRange)>jT(r.editor,l.trailingDelimiterRange)?l.contentRange.union(l.leadingDelimiterRange):void 0;return this.itemInfoToTarget(r,l,u)}itemInfoToTarget(e,r,n){let i=q8(r.leadingDelimiterRange,r.trailingDelimiterRange);return new io({scopeTypeType:this.modifier.scopeType.type,editor:e.editor,isReversed:e.isReversed,contentRange:r.contentRange,insertionDelimiter:i,leadingDelimiterRange:r.leadingDelimiterRange,trailingDelimiterRange:r.trailingDelimiterRange,removalRange:n})}};function q8(t,e){return t!=null&&!t.isSingleLine||e!=null&&!e.isSingleLine?`,
`:", "}function hD(t,e){return e.filter(r=>r.domain.intersection(t.contentRange)!=null)}function gD(t,e){let{range:r,boundary:n}=uD(t,e);return z8(e.editor,r,n)}function z8(t,e,r){let n=dD(t,e,r),i=[];return n.forEach((o,s)=>{if(o.type==="separator"||o.type==="boundary")return;let l=(()=>{if(n[s-2]?.type==="item")return new H(n[s-2].range.end,o.range.start);if(n[s-1]?.type==="separator")return new H(n[s-1].range.start,o.range.start)})(),u=(()=>{if(n[s+2]?.type==="item")return new H(o.range.end,n[s+2].range.start);if(n[s+1]?.type==="separator")return new H(o.range.end,n[s+1].range.end)})(),f=n[s-1]?.type==="boundary"||n[s-1]?.type==="separator"?n[s-1].range.end:o.range.start,d=n[s+1]?.type==="boundary"||n[s+1]?.type==="separator"?n[s+1].range.start:o.range.end;i.push({contentRange:o.range,leadingDelimiterRange:l,trailingDelimiterRange:u,domain:new H(f,d)})}),i}var Os={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},GS={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var Dm=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},Im=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(GS).run(e).map(r=>{let n=r.getLeadingDelimiterTarget();if(n==null)throw new Dm("leading");return n})}},Fm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(GS).run(e).map(r=>{let n=r.getTrailingDelimiterTarget();if(n==null)throw new Dm("trailing");return n})}};function Cm(t,e,r,n){return NS(e,r,n),r===n?e[r]:Ds(t,e[r],e[n],!0,!0)}function Nm(t,e,r){return t.create({type:"everyScope",scopeType:r}).run(e)}var Om=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=Nm(this.modifierStageFactory,e,this.modifier.scopeType),n=this.modifier.start+(this.modifier.start<0?r.length:0),i=n+this.modifier.length-1;return this.modifier.isEvery?UA(r,n,i):[Cm(e.isReversed,r,n,i)]}};var Lm=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new no(r):new Ue({...r,isToken:!1})]}},Um=class extends Lm{getContentRange(e){return e.start.toEmptyRange()}},Vm=class extends Lm{getContentRange(e){return e.end.toEmptyRange()}};var Bm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifierStageFactory.create(this.modifier.anchor),n=this.modifierStageFactory.create(this.modifier.active),i=r.run(e),o=n.run(e);if(i.length!==1||o.length!==1)throw new Error("Expected single anchor and active target");return[uo(i[0],o[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var Wm=class{constructor(e){this.modifier=e}run(e){return[new no({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var Hm=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function yD(t,e,r){let n=Nm(t,Z8(r),e.scopeType),i=Q8(r.contentRange,n);return G8(e,r,n,i)}function G8(t,e,r,n){let i=t.direction==="forward",o=K8(t,e.contentRange,r,i,n),s=i?o+t.length-1:o-t.length+1,l=Math.min(o,s),u=Math.max(o,s);return[Cm(e.isReversed,r,l,u)]}function K8(t,e,r,n,i){let o=t.offset===0;if(i==null){let u=n?r.findIndex(f=>f.contentRange.start.isAfter(e.start)):Pc(r,f=>f.contentRange.start.isBefore(e.start));if(u===-1)throw new Mi;return o?u:n?u+t.offset-1:u-t.offset+1}let s=i.start,l=i.end;if(o){let u=l-s+1;if(u>t.length)throw new Hm(t.length,u,t.scopeType.type);return n?s:l}return n?l+t.offset:s-t.offset}function Q8(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function Z8(t){return new Et({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var $m=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let r=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId);if(r==null)return yD(this.modifierStageFactory,this.modifier,e);let n=Array.from(this.modifier.offset===0?Y8(r,e,this.modifier):X8(r,e,this.modifier));if(n.length<this.modifier.length)throw new Mi;let{isReversed:i}=e;return this.modifier.isEvery?n.flatMap(o=>o.getTargets(i)):gm(i,n[0],n[n.length-1])}};function Y8(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s}=r,l=ym(t,n,s==="forward"?i.start:i.end,s)?.domain;if(l==null)throw new wt(r.scopeType.type);return fl(o,t.generateScopes(n,s==="forward"?l.start:l.end,s,{skipAncestorScopes:!0}))}function X8(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s,offset:l}=r,u=s==="forward"?i.end:i.start,f=i.isEmpty?"disallowed":"disallowedIfStrict";return AP(t.generateScopes(n,u,s,{containment:f,skipAncestorScopes:!0}),l-1,l+o-1)}var jm=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new Ue({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};var qm=class{constructor(e,r,n){this.languageDefinitions=e;this.modifierStageFactory=r;this.modifier=n}run(e){let n=this.modifierStageFactory.create({type:this.modifier.type,scopeType:{type:"nonWhitespaceSequence"}}).run(e),i=this.getPairTarget(e);if(i==null)return n;let o=n.flatMap(s=>{let l=s.contentRange.intersection(i.getInterior()[0].contentRange);return l==null||l.isEmpty?[]:[new gr({editor:e.editor,isReversed:e.isReversed,contentRange:l})]});if(o.length===0)throw new wt(this.modifier.scopeType.type);return o}getPairTarget(e){let r=this.modifierStageFactory.create({type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any",requireStrongContainment:!0}}),n=(()=>{try{return r.run(e)}catch{return[]}})();if(n.length>1)throw Error("Expected only one surrounding pair target");return n[0]}};var zm=class{constructor(e){this.modifier=e}run(e){if(this.modifier.type==="everyScope")throw new Error(`Every ${this.modifier.type} not yet implemented`);return[new cd({editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange})]}};var Ls=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new Um;case"endOf":return new Vm;case"extendThroughStartOf":case"extendThroughEndOf":return new Em(this,e);case"toRawSelection":return new Wm(e);case"interiorOnly":return new Rm(this,e);case"excludeInterior":return new km(this,e);case"leading":return new Im(this,e);case"trailing":return new Fm(this,e);case"visible":return new jm(e);case"containingScope":return new Tm(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new Is(this,this.storedTargets,e):new Sm(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new Is(this,this.storedTargets,e):new Om(this,e);case"relativeScope":return e.scopeType.type==="instance"?new Is(this,this.storedTargets,e):new $m(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new vm(e);case"keepEmptyFilter":return new bm(e);case"cascading":return new mm(this,e);case"modifyIfUntyped":return new Ps(this,e);case"range":return new Bm(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`)}}getLegacyScopeStage(e){switch(e.scopeType.type){case"notebookCell":return new zm(e);case"boundedNonWhitespaceSequence":return new qm(this.languageDefinitions,this,e);case"collectionItem":return new Am(this.languageDefinitions,this,e);default:return new Ns(this.languageDefinitions,e)}}};async function xD(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Ve({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=xi(r),s=o.map(f=>{let d=r[f],h=J8(d);return TD(e.document,h.selections,h.behavior)});n||s.push(TD(e.document,e.selections,1));let l=await("edits"in i?r7(t,e,i.edits,s):SD(t,i.callback,e.document,s));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((f,d)=>[f,l[d]]))}function TD(t,e,r){return e.map(n=>e7(t,n,n instanceof Te?!n.isReversed:!0,r))}function J8(t){return"selections"in t?t:{selections:t,behavior:1}}function e7(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function t7(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new Te(r,n):new Te(n,r)))}async function SD(t,e,r,n){let i=t.registerRangeInfoList(r,tt(n));return await e(),i(),t7(n)}async function r7(t,e,r,n){return await SD(t,async()=>{if(!await xD(t,e,r))throw new Error("Could not apply edits")},e.document,n)}function Tr(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function Sr(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function sa(t,e,r){return Promise.all(KS(t,e).map(([n,i])=>r(n,i)))}async function st(t,e){return sa(t,r=>r.editor,e)}async function vD(t,e){let r=KS(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function bD(t){return KS(t,e=>e.editor)}function KS(t,e){let n=Qc(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function Gm(t){return t.contentRange}function cn(t,e){return e!=null?xt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new Te(i.end,i.start):new Te(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function wD(t){let e=t.contentRange;return t.isLine?en(e):er(e)}function je(t,e,r,n=Gm){return t.flashRanges(e.map(i=>{let o=n(i);return o==null?null:{editor:i.editor,range:i.isLine?en(o):er(o),style:r}}).filter(i=>i!=null))}var Km=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await je(I(),e,"pendingModification0"),{thatSelections:tt(await st(e,async(n,i)=>{let o=i.map(({contentRange:f})=>f),s=n7(n,o),l=I().getEditableTextEditor(n),{contentRanges:u}=await Ve({rangeUpdater:this.rangeUpdater,editor:l,edits:s,selections:{contentRanges:o}});return xt(i,u).map(([f,d])=>({editor:f.editor,selection:d.toSelection(f.isReversed)}))}))}}};function n7(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,s=r.lineAt(o),l=s.text.slice(0,s.firstNonWhitespaceCharacterIndex),u=s.text.slice(0,o.character).search(/\s+$/),f=u>-1?new H(new se(s.lineNumber,u),o):o.toEmptyRange();n.push({range:f,text:`
`+l,isReplace:!f.isEmpty})}return n}function Qm(t){return t.length<2?t:bD(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,s)=>o.contentRange.start.compareTo(s.contentRange.start));let i=!0;for(;i;)[n,i]=i7(n);return n})}function i7(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!o7(r[r.length-1],n)?(e.push(_D(r)),r=[n]):r.push(n)}),e.push(_D(r)),[e,e.length!==t.length]}function _D(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return uo(e,r)}function o7(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var wl=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([je(I(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),je(I(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((s,l)=>{let u=r[l];if((s==null||u==null)&&!o)throw new Error("Targets must have same number of args");if(u!=null){let f;o?f=e.map((d,h)=>{let g=d.contentText,x=(u.isRaw?null:u.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return h>0&&x!=null?x+g:g}).join(""):f=s.contentText,i.push({edit:u.constructChangeEdit(f),editor:u.editor,originalTarget:u.target,isSource:!1})}else u=r[0];n.includes(s)||(n.push(s),this.type==="bring"&&i.push({edit:s.toDestination("to").constructChangeEdit(u.target.contentText),editor:s.editor,originalTarget:s,isSource:!0}))}),this.type==="move"&&Qm(n).forEach(s=>{i.push({edit:s.constructRemovalEdit(),editor:s.editor,originalTarget:s,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return tt(await sa(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),s=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),u=s.map(({edit:x})=>x.range),f=I().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:h}=await Ve({rangeUpdater:this.rangeUpdater,editor:f,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:u,behavior:0}}}),g=[...this.getMarks(o,d),...this.getMarks(s,h)];return g.sort((x,v)=>n.findIndex(w=>w.originalTarget===x.target)-n.findIndex(w=>w.originalTarget===v.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],s=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:s.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>e.find(i=>i.target===n).selection;return Promise.all([je(I(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),je(I(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function ED(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var Zm=class extends wl{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0",getSourceRangeCallback:Gm};this.run=this.run.bind(this)}async run(r,n){r=ED(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},Ym=class extends wl{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:a7};this.run=this.run.bind(this)}async run(r,n){r=ED(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},Xm=class extends wl{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0",getSourceRangeCallback:Gm};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,s)=>{let l=n[s];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function a7(t){return t.getRemovalHighlightRange()}var _l=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){Sr(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var El=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=Tr(e),n=e.map(o=>new Ue({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await I().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var Jm=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await I().flashRanges(e.flatMap(i=>{let{editor:o,contentRange:s}=i,l=i.getRemovalHighlightRange();return i.isLine?[{editor:o,range:er(s),style:"referenced"},{editor:o,range:en(l),style:"pendingDelete"}]:[{editor:o,range:er(s),style:"referenced"},...s7(s,l).map(u=>({editor:o,range:er(u),style:"pendingDelete"}))]}));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function s7(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,s=[];return i.isBefore(r)&&s.push(new H(i,r)),o.isAfter(n)&&s.push(new H(n,o)),s}var Rl=class{constructor(){this.run=this.run.bind(this)}async run(e){return await st(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(s=>{let l=s.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new QS;await I().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},QS=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function RD(t,e,r,n){let i=r.destinations.map((v,w)=>{if(n||v.getEditNewActionType()==="edit")return{destination:v,index:w}}).filter(v=>!!v);if(i.length===0)return r;let o=i.map(v=>v.destination.constructChangeEdit("")),s=r.cursorRanges.map((v,w)=>({range:v,index:w})).filter(({range:v})=>v!=null),l=s.map(({index:v})=>v),u=s.map(({range:v})=>v),f=o.map(v=>v.range),{thatRanges:d,cursorRanges:h,editRanges:g}=await Ve({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:u,editRanges:{selections:f,behavior:0}}}),x=[...r.cursorRanges];return xt(l,h).forEach(([v,w])=>{x[v]=w}),i.forEach((v,w)=>{let A=o[w].updateRange(g[w]);x[v.index]=A}),{destinations:r.destinations,thatRanges:d,cursorRanges:x}}async function kD({acceptsLocation:t},e,r,n){let i=n.destinations.map((h,g)=>{if(h.getEditNewActionType()==="insertLineAfter")return{destination:h,index:g}}).filter(h=>!!h);if(i.length===0)return n;let o=i.map(({destination:h})=>h.contentRange),s=n.destinations.map(({contentRange:h})=>h),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(h=>h.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:u,thatRanges:f}=await Ve({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:s,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((h,g)=>{d[h.index]=r.selections[g]}),{destinations:n.destinations.map((h,g)=>h.withTarget(h.target.withContentRange(u[g]))),thatRanges:f,cursorRanges:d}}async function MD(t,e){let r=Sr(e),n=I().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);await t.setSelection.run([r.target]);let o=l=>l;i?o=await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow();let s=cn([r.target.thatTarget]);return s[0].selection=o(s[0].selection),{thatSelections:s}}var eh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return MD(this.actions,e);let r=I().getEditableTextEditor(Tr(e)),n={destinations:e,thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=I().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await kD(i,this.rangeUpdater,r,n)),n=await RD(this.rangeUpdater,r,n,!o);let s=n.destinations.map((l,u)=>n.cursorRanges[u].toSelection(l.target.isReversed));return await r.setSelections(s,{focusEditor:!0}),{thatSelections:cn(n.destinations.map(l=>l.target),n.thatRanges)}}};var th=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(Os)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},rh=class extends th{constructor(){super(...arguments);this.insertionMode="before"}},nh=class extends th{constructor(){super(...arguments);this.insertionMode="after"}};var ih=t=>new Et({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var Us=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await je(I(),e,"referenced"),r.ensureSingleEditor&&Tr(e),r.ensureSingleTarget&&Sr(e);let n=I().activeEditableTextEditor,i=r.setSelection?vD:st,o=tt(await i(e,(s,l)=>this.runForEditor(r,s,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=I().getEditableTextEditor(r),o=r.selections,s=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:u,targetSelections:f}=await Ve({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(u),r.document.version===s?n:f.map(d=>ih({editor:r,selection:d}))}};var kl=class{constructor(e){this.callbackAction=new Us(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:s,showDecorations:l}={}){let u=n??[];return this.callbackAction.run(e,{callback:()=>I().executeCommand(r,...u),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:s??!0,showDecorations:l??!0})}};var oh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){Sr(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),Lc(I().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},ah=class extends oh{find(e){return I().findInDocument(e)}},sh=class extends oh{find(e){return I().findInWorkspace(e)}};var Vs=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=Sr(e);return await je(I(),e,"referenced"),await I().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:cn(e)}}};function PD(t,e){let r=[],n=0,i=null,[o,...s]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...s.map(u=>({text:u,startIndex:0}))].forEach(({text:u,startIndex:f})=>{let d=u.match(/^\s*/)?.[0]??"",h=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let g=Math.max(h,f),x=Hx("	",n),v=u.slice(g);r.push(x+v)}),r}function AD(t,e){let r=jx(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var Ml=class{constructor(){this.substitutions=[]}addSubstitution(e,r=!1){let n=c7(10);return this.substitutions.push({to:e,randomId:n,isQuoted:r}),n}makeSubstitutions(e){return this.substitutions.forEach(({to:r,randomId:n,isQuoted:i})=>{let o=i?`"${n}"`:n;e=e.split(o).join(r)}),e}};function c7(t){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}var Bs=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r){let n=Sr(e),i=n.editor;if(je(I(),e,"referenced"),r==null&&(r=await I().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"})),r==null)return{};let o=1,s=i.document.offsetAt(n.contentRange.start),l=i.selections.filter(A=>n.contentRange.contains(A)).map((A,U)=>({offsets:{start:i.document.offsetAt(A.start)-s,end:i.document.offsetAt(A.end)-s},defaultName:`variable${U+1}`,placeholderIndex:o++})),u=new Ml,f=i.document.getText(new H(n.contentRange.start.with(void 0,0),n.contentRange.start)),d=i.document.getText(n.contentRange),h=AD(d,[...Xr(d,/\$|\\/g,A=>({offsets:{start:A.index,end:A.index+A[0].length},text:A[0]==="\\"?`\\${A[0]}`:`\\\\${A[0]}`})),...l.map(({offsets:A,defaultName:U,placeholderIndex:Z})=>({offsets:A,text:u.addSubstitution(["\\$","${",Z,":",U,"}"].join(""))}))]),g=PD(h,f),x=({placeholderIndex:A})=>{let U="$"+A,Z=u.addSubstitution("{$"+o+++"}",!0);return[U,Z]},v={[r]:{definitions:[{scope:{langIds:[i.document.languageId]},body:g}],description:"$"+o++,variables:l.length===0?void 0:Object.fromEntries(l.map(x))}},w=u.makeSubstitutions(JSON.stringify(v,null,2)),N=I().getEditableTextEditor(i);return I().runMode==="test"?await N.setSelections([i.document.range.toSelection(!1)]):await this.snippets.openNewSnippetFile(r),await N.insertSnippet(w),{thatSelections:e.map(({editor:A,contentSelection:U})=>({editor:A,selection:U}))}}};var Pl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Al=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await je(I(),e,"referenced"),n&&Sr(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var Dl=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(I().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(I().visibleTextEditors.map(n=>I().setHighlightRanges(r,n,[]))):await st(e,(n,i)=>I().setHighlightRanges(r,n,i.map(wD))),{thatTargets:e}}};var ch=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(Os)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=tt(await st(e,this.runForEditor));return await I().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:er(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),s=i.map(({range:g})=>g),l=I().getEditableTextEditor(e),{contentSelections:u,editRanges:f}=await Ve({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:s,behavior:0}}}),d=xt(i,f).map(([g,x])=>g.updateRange(x)),h=e.selections[0];return u.some(g=>g.intersection(h)!=null)&&await l.revealRange(h),{sourceMark:cn(r,d),thatMark:cn(r,u)}}},lh=class extends ch{constructor(e,r){super(e,r,!0)}},uh=class extends ch{constructor(e,r){super(e,r,!1)}};var Il=class{constructor(e,r,n){this.rangeUpdater=e;this.insertAbove=r;this.insertBelow=n;this.run=this.run.bind(this)}getRanges(e){let r=e.flatMap(n=>{let i=[];return this.insertAbove&&i.push(n.contentRange.start.line),this.insertBelow&&i.push(n.contentRange.end.line+1),i});return r=[...new Set(r)],r.map(n=>new H(n,0,n,0))}getEdits(e){return e.map(r=>({range:r,text:`
`}))}async run(e){let r=tt(await st(e,async(i,o)=>{let s=this.getRanges(o),l=this.getEdits(s),u=o.map(g=>g.thatTarget.contentSelection),f=I().getEditableTextEditor(i),{contentSelections:d,ranges:h}=await Ve({rangeUpdater:this.rangeUpdater,editor:f,edits:l,selections:{contentSelections:u,ranges:s}});return{thatMark:d.map(g=>({editor:i,selection:g})),lineSelections:h.map((g,x)=>({editor:i,range:s[x].start.line<i.document.lineCount-1?new H(g.start.translate(-1,void 0),g.end.translate(-1,void 0)):g}))}}));return await I().flashRanges(r.flatMap(i=>i.lineSelections.map(({editor:o,range:s})=>({editor:o,range:en(s),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},ph=class extends Il{constructor(e){super(e,!0,!0)}},fh=class extends Il{constructor(e){super(e,!0,!1)}},dh=class extends Il{constructor(e){super(e,!1,!0)}};var ZS=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},mo=class{constructor(){this._children=[]}appendChild(e){return e instanceof vr&&this._children[this._children.length-1]instanceof vr?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function s(l,u){for(let f of l)f.parent=u,s(f.children,f)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof gh)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},vr=class t extends mo{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},mh=class extends mo{},Lr=class t extends mh{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof hh?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},hh=class t extends mo{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof vr&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},YS=class t extends mo{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof Pn&&!!s.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof Pn){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},Pn=class t extends mo{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},ho=class t extends mh{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new vr(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function DD(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var gh=class t extends mo{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Lr&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return DD([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Lr&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof ho&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){DD(this.children,e)}},Ws=class{constructor(){this._scanner=new ZS;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new gh;for(;this._parse(i););let o=new Map,s=[],l=0;i.walk(u=>(u instanceof Lr&&(l+=1,u.isFinalTabstop?o.set(0,void 0):!o.has(u.index)&&u.children.length>0?o.set(u.index,u.children):s.push(u)),!0));for(let u of s){let f=o.get(u.index);if(f){let d=new Lr(u.index);d.transform=u.transform;for(let h of f)d.appendChild(h.clone());i.replace(u,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Lr(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new vr(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Lr(Number(r)):new ho(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Lr(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new vr("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new hh;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new vr(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new ho(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new vr("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new YS,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new vr(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Pn(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new Pn(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new Pn(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Pn(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Pn(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new Pn(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Pn(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new vr(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var ID=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function yh(t,e,r){let n=l7(t)+1,i={};t.walk(o=>{if(o instanceof ho){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new vr(r[o.name])]);else if(!ID[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Lr(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Lr&&o.index.toString()===e&&o.parent.replace(o,[new ho("TM_SELECTED_TEXT")]);return!0})}function l7(t){let e=0;return t.walk(r=>(r instanceof Lr&&(e=Math.max(e,r.index)),!0)),e}function xh(t,e,r){let n=e.map(o=>u7(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function u7(t,e,r){let n=e.editor.document.languageId;return r.findIndex(({scope:i})=>{if(i==null)return!0;let{langIds:o,scopeTypes:s,excludeDescendantScopeTypes:l}=i;if(o!=null&&!o.includes(n))return!1;if(s!=null){let u=s.concat(l??[]),f,d;for(let h of u)try{let g=t.create({type:"containingScope",scopeType:{type:h}}).run(e)[0];e.contentRange.isRangeEqual(g.contentRange)&&(g=t.create({type:"containingScope",scopeType:{type:h},ancestorIndex:1}).run(e)[0]),(f==null||f.contentRange.contains(g.contentRange))&&(f=g,d=h)}catch{continue}return f!=null&&!(l??[]).includes(d)}return!0})}var Fl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new Ws;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new hm(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){if(e.type==="named"){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}else return e.scopeTypes??[]}getSnippetInfo(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=xh(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(s){return s==null?void 0:p7(i,o,s)}}}else return{body:e.body,formatSubstitutions(n){return n}}}async run(e,r){let n=I().getEditableTextEditor(Tr(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(f=>new Et({editor:n,contentRange:f,isReversed:!1,hasExplicitRange:!0}))),s=this.snippetParser.parse(i);yh(s,null,o(r.substitutions));let l=s.toTextmateString(),{editorSelections:u}=await Ve({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(f=>({editor:n,selection:f}))}}};function p7(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let s=Nk[o];if(s==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,s(i.split(" "))]}))}var Cl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await je(I(),e,"pendingModification0"),{thatSelections:tt(await st(e,async(n,i)=>{let o=i.map(({contentRange:l})=>l),{contentRanges:s}=await Ve({rangeUpdater:this.rangeUpdater,editor:I().getEditableTextEditor(n),edits:f7(n,o),selections:{contentRanges:o}});return xt(i,s).map(([l,u])=>({editor:l.editor,selection:u.toSelection(l.isReversed)}))}))}}};function f7(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start.line,s=i.isSingleLine?o+1:i.end.line,l=hs(DP(o,s+1),u=>r.lineAt(u));for(let[u,f]of MP(l))n.push({range:new H(u.range.end.line,u.lastNonWhitespaceCharacterIndex,f.range.start.line,f.firstNonWhitespaceCharacterIndex),text:f.isEmptyOrWhitespace?"":" ",isReplace:!0})}return n}var Th=class{constructor(e,r){this.rangeUpdater=e;this.actions=r}async run(e){let r=I().getEditableTextEditor(Tr(e)),n=I().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Ve({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:s,editorSelections:l}=await Ve({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(s),n!=null&&!n.isActive&&await n.focus(),await I().flashRanges(l.map(u=>({editor:r,range:er(u),style:"justAdded"}))),{thatSelections:l.map(u=>({editor:r,selection:u}))}}};var Nl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=Qm(e),r&&await je(I(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:tt(await st(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(s=>s.constructRemovalEdit()),i=I().getEditableTextEditor(e),{editRanges:o}=await Ve({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:s})=>s)}});return xt(r,o).map(([s,l])=>new no({editor:s.editor,isReversed:s.isReversed,contentRange:l}))}};var Ol=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await je(I(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=xt(e,n).map(([l,u])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(u)})),o=[],s=[];return await sa(i,l=>l.editor,async(l,u)=>{let f=u.map(({edit:g})=>g),{contentSelections:d,editRanges:h}=await Ve({rangeUpdater:this.rangeUpdater,editor:I().getEditableTextEditor(l),edits:f,selections:{contentSelections:u.map(({target:g})=>g.contentSelection),editRanges:{selections:f.map(({range:g})=>g),behavior:0}}});for(let[g,x]of xt(u,d))o.push(g.target.withContentRange(x));for(let[g,x]of xt(u,h))s.push({editor:l,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:s}}};var Ll=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[OS(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(s=>{let l=s.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await je(I(),i,"pendingModification0");let o=await st(i,async(s,l)=>{let u=l.map((h,g)=>({editor:s,range:h.contentRange,text:g%2===0?r:n})),{sourceRanges:f,thatRanges:d}=await Ve({rangeUpdater:this.rangeUpdater,editor:I().getEditableTextEditor(s),edits:u,selections:{sourceRanges:e.map(h=>h.thatTarget.contentRange),thatRanges:e.map(h=>h.contentRange)}});return{sourceMark:cn(e,f),thatMark:cn(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:s})=>s),thatSelections:o.flatMap(({thatMark:s})=>s)}}};var Ul=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=Qc(e,s=>s.editor),n=Array.from(r,([s,l])=>({lineNumber:d7(l,this.at),editor:s})),i=I().activeEditableTextEditor;for(let s of n)await I().getEditableTextEditor(s.editor).revealLine(s.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(s=>{let l=s.editor.visibleRanges,u=l[0].start.line,f=l[l.length-1].end.line;return s.contentRange.start.line>u||s.contentRange.end.line<f||s.contentRange.start.line===u&&s.contentRange.end.line===f});return await I().flashRanges(o.map(s=>({editor:s.editor,range:en(s.contentRange),style:"referenced"}))),{thatTargets:e}}},Sh=class extends Ul{constructor(){super("top")}},vh=class extends Ul{constructor(){super("center")}},bh=class extends Ul{constructor(){super("bottom")}};function d7(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var Hs=class{constructor(){this.run=this.run.bind(this)}getSelection(e){return e.contentSelection}async run(e){let r=Tr(e),n=e.map(this.getSelection);return await I().getEditableTextEditor(r).setSelections(n,{focusEditor:!0}),{thatTargets:e}}},wh=class extends Hs{getSelection(e){return new Te(e.contentRange.start,e.contentRange.start)}},_h=class extends Hs{getSelection(e){return new Te(e.contentRange.end,e.contentRange.end)}};var Vl=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var Bl=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await je(I(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,s=this.treeSitter.getTree(i.document);r.push(m7(i.document,s,o))}return I().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function m7(t,e,r){let n=[],i=[];return FD(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function FD(t,e,r,n,i){for(;;){let o=new H(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let s="  ".repeat(i),l=h7(n),u=s+l;if(n.nodeIsNamed)t.push(`${u}${n.nodeType} [${o}]`),e.push(`${u}(${n.nodeType}`),n.gotoFirstChild()?(FD(t,e,r,n,i+1),n.gotoParent(),e.push(`${s})`)):e[e.length-1]+=")";else{let f=`"${n.nodeType}"`;t.push(`${u}${f} [${o}]`),e.push(`${u}${f}`)}}if(!n.gotoNextSibling())return}}function h7(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var jt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new Us(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=I().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,s)=>g7(o,i?s.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},Eh=class extends jt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},Rh=class extends jt{constructor(){super(...arguments);this.command="toggleLineComment"}},kh=class extends jt{constructor(){super(...arguments);this.command="indentLine"}},Mh=class extends jt{constructor(){super(...arguments);this.command="outdentLine"}},Ph=class extends jt{constructor(){super(...arguments);this.command="fold"}},Ah=class extends jt{constructor(){super(...arguments);this.command="unfold"}},Dh=class extends jt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},Ih=class extends jt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},Fh=class extends jt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},Ch=class extends jt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Nh=class extends jt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Oh=class extends jt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Lh=class extends jt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Uh=class extends jt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}};function g7(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Wl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&Lc(I().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((s,l)=>s.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(s=>s.toDestination("to")),i);return{thatSelections:o}}},Vh=class extends Wl{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},Bh=class extends Wl{sortTexts(e){return e.reverse()}},Wh=class extends Wl{sortTexts(e){return $x(e)}};var Hl=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(Os)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await je(I(),r,"referenced"),await st(e,async(n,i)=>{let o=i.map(s=>{let l=s.contentRange;return s.isLine?{type:"line",startLine:l.start.line,endLine:l.end.line}:{type:"inline",range:l}});await I().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var $l=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await st(e,async(o,s)=>{let l=s.map(w=>({start:new Te(w.contentRange.start,w.contentRange.start),end:new Te(w.contentRange.end,w.contentRange.end)})),u=l.flatMap(({start:w,end:N})=>[{text:r,range:w},{text:n,range:N,isReplace:!0}]),f=s.map(w=>w.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:h,sourceSelections:g,thatSelections:x}=await Ve({rangeUpdater:this.rangeUpdater,editor:I().getEditableTextEditor(o),edits:u,selections:{boundariesStartSelections:{selections:l.map(({start:w})=>w),behavior:2},boundariesEndSelections:{selections:l.map(({end:w})=>w),behavior:3},sourceSelections:{selections:f,behavior:1},thatSelections:{selections:f,behavior:0}}}),v=[...d,...h];return await I().flashRanges(v.map(w=>({editor:o,range:er(w),style:"justAdded"}))),{sourceMark:g.map(w=>({editor:o,selection:w})),thatMark:x.map(w=>({editor:o,selection:w}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var jl=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new Ws;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new Ps(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){if(e.type==="named"){let{name:r,variableName:n}=e,s=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return s==null?void 0:{type:s}}else return e.scopeType}getBody(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return xh(this.modifierStageFactory,r,i.definitions).body.join(`
`)}else return e.body}async run(e,r){let n=I().getEditableTextEditor(Tr(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);yh(o,r.variableName);let s=o.toTextmateString();await je(I(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),u=()=>n.insertSnippet(s,l),{targetSelections:f}=await Ve({rangeUpdater:this.rangeUpdater,editor:n,callback:u,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:f.map(d=>({editor:n,selection:d}))}}};var y7=/-?\d+(\.\d+)?/g,Hh=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await sa(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let u=n.offsetAt(l.contentRange.start),f=l.contentText,d=Oc(f,y7);for(let h of d)i.push(x7(e,u,h)),o.push(T7(this.isIncrement,h.text))}let{thatSelections:s}=await this.actions.replace.run(i,o);return s}},$h=class extends Hh{constructor(e){super(e,!0)}},jh=class extends Hh{constructor(e){super(e,!1)}};function x7(t,e,r){return new Ue({editor:t,isReversed:!1,contentRange:new H(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function T7(t,e){return e.includes(".")?v7(t,e).toString():S7(t,e).toString()}function S7(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function v7(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var qh=class{constructor(e,r,n,i){this.treeSitter=e;this.snippets=r;this.rangeUpdater=n;this.modifierStageFactory=i;this.callAsFunction=new _l(this);this.clearAndSetSelection=new El(this);this.copyToClipboard=new Eh(this.rangeUpdater);this.cutToClipboard=new Jm(this);this.decrement=new jh(this);this.deselect=new Rl;this.editNew=new eh(this.rangeUpdater,this);this.editNewLineAfter=new nh(this,this.modifierStageFactory);this.editNewLineBefore=new rh(this,this.modifierStageFactory);this.executeCommand=new kl(this.rangeUpdater);this.extractVariable=new Uh(this.rangeUpdater);this.findInDocument=new ah(this);this.findInWorkspace=new sh(this);this.foldRegion=new Ph(this.rangeUpdater);this.followLink=new Vs({openAside:!1});this.followLinkAside=new Vs({openAside:!0});this.generateSnippet=new Bs(this.snippets);this.getText=new Al;this.highlight=new Dl;this.increment=new $h(this);this.indentLine=new kh(this.rangeUpdater);this.insertCopyAfter=new uh(this.rangeUpdater,this.modifierStageFactory);this.insertCopyBefore=new lh(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineAfter=new dh(this.rangeUpdater);this.insertEmptyLineBefore=new fh(this.rangeUpdater);this.insertEmptyLinesAround=new ph(this.rangeUpdater);this.insertSnippet=new Fl(this.rangeUpdater,this.snippets,this,this.modifierStageFactory);this.joinLines=new Cl(this.rangeUpdater);this.breakLine=new Km(this.rangeUpdater);this.moveToTarget=new Ym(this.rangeUpdater);this.outdentLine=new Mh(this.rangeUpdater);this.pasteFromClipboard=new Th(this.rangeUpdater,this);this.randomizeTargets=new Wh(this);this.remove=new Nl(this.rangeUpdater);this.rename=new Dh(this.rangeUpdater);this.replace=new Ol(this.rangeUpdater);this.replaceWithTarget=new Zm(this.rangeUpdater);this.revealDefinition=new Ch(this.rangeUpdater);this.revealTypeDefinition=new Nh(this.rangeUpdater);this.reverseTargets=new Bh(this);this.rewrapWithPairedDelimiter=new Ll(this.rangeUpdater,this.modifierStageFactory);this.scrollToBottom=new bh;this.scrollToCenter=new vh;this.scrollToTop=new Sh;this["private.setKeyboardTarget"]=new Vl("keyboard");this["experimental.setInstanceReference"]=new Vl("instanceReference");this.setSelection=new Hs;this.setSelectionAfter=new _h;this.setSelectionBefore=new wh;this.showDebugHover=new Lh(this.rangeUpdater);this.showHover=new Oh(this.rangeUpdater);this.showQuickFix=new Fh(this.rangeUpdater);this.showReferences=new Ih(this.rangeUpdater);this.sortTargets=new Vh(this);this.swapTargets=new Xm(this.rangeUpdater);this.toggleLineBreakpoint=new Hl(this.modifierStageFactory);this.toggleLineComment=new Rh(this.rangeUpdater);this.unfoldRegion=new Ah(this.rangeUpdater);this.wrapWithPairedDelimiter=new $l(this.rangeUpdater);this.wrapWithSnippet=new jl(this.rangeUpdater,this.snippets,this.modifierStageFactory);this["private.showParseTree"]=new Bl(this.treeSitter);this["private.getTargets"]=new Pl}};async function CD(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return zh(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:Gh(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return zh(i.destination)?{action:"insert",modifiers:Gh(i.destination),text:await XS(e,i.source)}:null;case"moveToTarget":if(zh(i.destination)){let o=await XS(e,i.source);return await b7(e,i.source),{action:"insert",modifiers:Gh(i.destination),text:o}}return null;case"callAsFunction":return Kh(i.argument)?{action:i.name,modifiers:Qh(i.argument),callee:await XS(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return Kh(i.target)?{action:i.name,modifiers:Qh(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return zh(i.destination)?{action:i.name,modifiers:Gh(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return Kh(i.target)?{action:i.name,modifiers:Qh(i.target)}:null}}function zh(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&Kh(t.target):!1}function Kh(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function Gh(t){return t.type==="primitive"?Qh(t.target):[]}function Qh(t){if(t.type==="primitive"){if(t.modifiers!=null&&t.modifiers.length>0)return t.modifiers;if(t.mark?.type==="cursor")return[{type:"containingTokenIfEmpty"}]}return[]}async function XS(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function b7(t,e){await t({name:"remove",target:e})}function ND(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((s,l)=>[s,l]);for(let[s,l]of o.reverse())for(let u of w7){let f=u.accept(s);if(f.accepted){let[d,h]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],g={...t,anchor:h.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:h},active:Ef(i,x=>{x.modifiers=x.modifiers.slice(Pc(x.modifiers,v=>u.accept(v).accepted)+1)})};return g=f.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:d}}}return t}var w7=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function ev(t,e){switch(t.type){case"list":return _7(t,e);case"range":return OD(t,e);case"primitive":return Zh(t,e);case"implicit":return t}}function _7(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return OD(r,i);case"primitive":return Zh(r,i)}})}}function OD(t,e){let r=E7(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return ND(r,n)}function E7(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:Zh(t.anchor,e),active:Zh(t.active,e.concat(t.anchor))}}function Zh(t,e){let r=JS(t.mark??(R7(t)?P7(e):null)??{type:"cursor"}),n=LD(t)??A7(e)??D7(e)??[];return{type:t.type,mark:r,modifiers:n}}function R7(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function LD(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function k7(t){if(M7(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function M7(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function P7(t){return ql(t,e=>e.mark)}function A7(t){return ql(t,LD)}function D7(t){return ql(t,k7)}function ql(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=ql([n.anchor],e);if(i!=null)return i;break}case"list":{let i=ql(n.elements,e);if(i!=null)return i;break}}}}function JS(t){switch(t.type){case"range":return{...t,anchor:JS(t.anchor),active:JS(t.active)};case"target":return{type:"target",target:ev(t.target,[])};default:return t}}var Yh=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new tv(this.debug)}async run(e){if(Vo(e)){let f=await CD(this.commandServerApi,this.runAction,e);if(f!=null)return{fallback:f}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:s,instanceReferenceTargets:l,keyboardTargets:u}=await this.runAction(e.action);return this.storedTargets.set("that",UD(i,n)),this.storedTargets.set("source",UD(s,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",u,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(Kf(e.content,e.arguments));default:{let r=this.actions[e.name];return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},tv=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=ev(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function UD(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(ih):t}var Xh=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Et({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var Jh=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=I().visibleTextEditors.find(s=>s.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new H(r.line,r.character,n.line,n.character);return[new Et({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var eg=class{constructor(e){this.mark=e}run(){let e=I().activeTextEditor;if(e==null)return[];let r=I7(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[iS(e,!1,n)]}},I7=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,s=Math.floor(i/100)*100,l=[],u=[],f=s+r;for(;f<=o;)f>=i&&(t.visibleRanges.find(h=>f>=h.start.line&&f<=h.end.line)?l.push(f):u.push(f)),f+=100;if(l.length===1)return l[0];if(l.length+u.length>1)throw new Error("Multiple lines matching");if(u.length===1)return u[0];throw new Error("Line is not in viewport")}}};var tg=class{constructor(e){this.mark=e}run(){return[]}};var rg=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[uo(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var ng=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var ig=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var og=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new ps;case"that":case"source":case"keyboard":return new ng(this.storedTargets,e.type);case"decoratedSymbol":return new Xh(this.readableHatMap,e);case"lineNumber":return new eg(e);case"range":return new rg(this,e);case"nothing":return new tg(e);case"target":return new ig(this.targetPipelineRunner,e);case"explicit":return new Jh(e)}}};async function VD(t,e,r,n,i,o,s,l,u,f){r.active&&(r.log("command:"),r.log(JSON.stringify(f,null,2)));let d=HT(f),h=await n.getReadableMap(d.usePrePhraseSnapshot),g=C7(t,e,s,r,o,h,i,l);for(let v of u)g=v.wrapCommandRunner(h,g);let x=await g.run(d);return await F7(f,x)}async function F7(t,e){if(Vo(t))return e;if("returnValue"in e)return e.returnValue}function C7(t,e,r,n,i,o,s,l){let u=new Ls(r,i,new Ts(r)),f=new og(o,i),d=new _m(u,f);return f.setPipelineRunner(d),new Yh(e,n,i,d,new qh(t,s,l,u))}var BD=["clojure","css","latex","ruby","rust","scala","scss"];async function WD(t,e){await N7(t,e)}async function N7(t,e){let r=[];for(let n of BD)await t.loadLanguage(n),await e.loadLanguage(n),xi(bl[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function HD(t){return Ak(t)?Gc(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${Gc(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var ag=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{Xt(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...Uo.filter(r=>r!=="instance").map(r=>({type:r})),...gf.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:HD(e),isLanguageSpecific:O7(e)}}dispose(){this.disposable.dispose()}};function O7(t){switch(t.type){case"string":case"argumentOrParameter":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function rv(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((s,l)=>s.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=Kp(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=Kp(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function ca(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.isLine?en(t.getRemovalHighlightRange()):er(t.getRemovalHighlightRange()),leadingDelimiter:$D(t.getLeadingDelimiterTarget()),trailingDelimiter:$D(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(ca),boundary:t.getBoundary()?.map(ca),insertionDelimiter:t.insertionDelimiter}}function $D(t){return t!=null?ca(t):void 0}function jD(t,e,r,n,i){return hs(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),o=>({domain:o.domain,ranges:o.getTargets(!1).map(s=>({range:s.contentRange,targets:i?L7(r,s).map(ca):void 0}))}))}function L7(t,e){try{return t.run(e)}catch(r){if(r.name==="NoContainingScopeError")return[];throw r}}function qD(t,e,r){return hs(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(ca)}))}var sg=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.create(r,e.document.languageId);return i==null?[]:qD(e,i,rv(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,s=this.scopeHandlerFactory.create(r,o);if(s==null)return[];let l=this.scopeHandlerFactory.create(s.iterationScopeType,o);return l==null?[]:jD(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),rv(e,s,n),i)}};var cg=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new qn(I().configuration,()=>this.onChange());this.disposables.push(I().onDidChangeVisibleTextEditors(n.run),I().onDidOpenTextDocument(n.run),I().onDidCloseTextDocument(n.run),I().onDidChangeTextDocument(n.run),I().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{I().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(s){if(rt(I().messages,"ScopeRangeWatcher.provide",s.message),o=[],I().runMode==="test")throw s}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{Xt(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{I().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{Xt(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var lg=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.create(r,n);return i==null?GD(n,r):zD(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.create(r,n);if(i==null)return GD(n,r);let o=this.scopeHandlerFactory.create(i.iterationScopeType,n);return o==null?3:zD(e,o)?0:1}};function zD(t,e){return!Fk(e.generateScopes(t,new se(0,0),"forward"))}function GD(t,e){switch(e.type){case"boundedNonWhitespaceSequence":case"surroundingPair":return 2;case"notebookCell":return 3;default:return bl[t]?.[e.type]!=null?2:3}}var ug=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new qn(I().configuration,()=>this.onChange());this.disposable=Ik(I().onDidOpenTextDocument(i.run),I().onDidCloseTextDocument(i.run),I().onDidChangeActiveTextEditor(i.run),I().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{Xt(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=I().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function KD({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Pd,commandServerApi:i=new _d,talonSpokenForms:o=new Md,snippets:s=new kd}){Jf(t);let l=new yd(t),u=new wd,f=new td,d=new gd(t,f),h=new Id(o),g=e!=null?new vd(u,l,e,i):new Ed;g.allocateHats();let x=r?await dm.create(t,n,r):new Rd;t.disposeOnExit(u,x,g,l,d);let v=[],w,N=A=>(w=A,VD(n,i,l,g,s,f,x,u,v,A));return{commandApi:{runCommand(A){return N(A)},runCommandSafe(...A){return N(yf(A))},repeatPreviousCommand(){if(w==null)throw new Error("No previous command");return N(w)}},scopeProvider:V7(x,f,h),customSpokenFormGenerator:h,storedTargets:f,hatTokenMap:g,injectIde:Jf,runIntegrationTests:()=>WD(n,x),addCommandRunnerDecorator:A=>{v.push(A)}}}function V7(t,e,r){let n=new Ts(t),i=new sg(n,new Ls(t,e,n)),o=new cg(t,i),s=new lg(n),l=new ag(r),u=new ug(t,s,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:s.getScopeSupport,getIterationScopeSupport:s.getIterationScopeSupport,onDidChangeScopeSupport:u.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function QD(t,e){switch(e.type){case"UntypedTarget":return new Et({editor:t,isReversed:e.isReversed,contentRange:sf(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new _n({editor:t,isReversed:e.isReversed,contentRange:sf(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var CLe=Symbol("unused");var zl=class{constructor(e){this.position=e}},NLe={$0:new zl(0),$1:new zl(1),$2:new zl(2)};var ZD=require("node:events"),pg=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new ZD.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function Ur(){return global._neovimRegistry==null&&(global._neovimRegistry=new pg),global._neovimRegistry}var YD="pokey.cursorless";async function fg(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,s,l]=await e.executeLua(r,[]),u;return l===!0?u=[new Te(new se(o-1,s-1),new se(n-1,i-1))]:u=[new Te(new se(n-1,i-1),new se(o-1,s-1))],console.debug(`bufferGetSelections(): selections=(${u[0].start.line}, ${u[0].start.character}), (${u[0].end.line}, ${u[0].end.character}) neovim=(${n},${i}),(${o},${s}),reverse=${l}`),u}async function XD(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function JD(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),s=new H(new se(i-1,0),new se(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${s.start.line}, ${s.start.character}), (${s.end.line}, ${s.end.character})`),[s]}async function eI(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function dg(t,e){await e.callFunction("setreg",["*",t])}async function tI(t){return await t.callFunction("getreg",["*"])}async function rI(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function nI(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function iI(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function oI(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var B7={clipboardCopy:{acceptsLocation:!1},toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0},mg=class{constructor(){this.commands=B7}};var Gl=class{constructor(e){this.client=e}async readText(){return await tI(this.client)}async writeText(e){return await dg(e,this.client)}};var hg=pr(nv(),1);var Ql=class{constructor(){this.notifier=new Bt;this.mocks={...ef};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(W7(n,r))return(0,hg.get)(i,e)??(0,hg.get)(this.mocks,e)}return(0,hg.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function W7(t,e){return t.languageId===e.languageId}async function iv(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);n.sort((s,l)=>(aI(s)||sI(s))&&(aI(l)||sI(l))?1:s.range.start.line===l.range.start.line?l.range.start.character-s.range.start.character:l.range.start.line-s.range.start.line),console.debug("neovimEdit() [sorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let s of n)o.push({range:s.range,rangeOffset:i.offsetAt(s.range.start),rangeLength:i.offsetAt(s.range.end)-i.offsetAt(s.range.start),text:s.text});Ur().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let s of n){let{range:l,text:u,isReplace:f}=s;u===""?await cI(t,l):l.isEmpty&&!f?await lI(t,l.start,u):await H7(t,l,u)}return await e.updateTextEditor(),!0}async function cI(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(s+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([s,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function lI(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=s+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let u=s+n[0],f=n[n.length-1]+l;await i.setLines([u,...n.slice(1,n.length-1),f],{start:e.line,end:e.line+1,strictIndexing:!0})}async function H7(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await cI(t,e),await lI(t,e.start,r)}function aI(t){return t.range.isEmpty&&!t.isReplace}function sI(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function uI(t){return Ur().onEvent("onDidChangeTextDocument",t),fI()}function pI(t,e,r){return Ur().onEvent("onDidOpenTextDocument",t),fI()}function fI(){return{dispose(){}}}var Zl=class{constructor(){this.data={...tf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var hF=pr(nv(),1);var Yl=class{async showMessage(e,r,n,...i){}};async function dI(t,e){let r=e.activeTextEditor,n=await t.window,i=await fg(n,t),o=r.document.getText(i[0]);await dg(o,t)}async function mI(t,e){await rI(t)}var gg=class{constructor(e,r,n,i,o,s,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=s}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await XD(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await iv(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await dI(this.client,this.neovimIDE)}async clipboardPaste(e){await mI(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}};var Eb=pr(require("path"),1);var hI;(()=>{"use strict";var t={470:i=>{function o(u){if(typeof u!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(u))}function s(u,f){for(var d,h="",g=0,x=-1,v=0,w=0;w<=u.length;++w){if(w<u.length)d=u.charCodeAt(w);else{if(d===47)break;d=47}if(d===47){if(!(x===w-1||v===1))if(x!==w-1&&v===2){if(h.length<2||g!==2||h.charCodeAt(h.length-1)!==46||h.charCodeAt(h.length-2)!==46){if(h.length>2){var N=h.lastIndexOf("/");if(N!==h.length-1){N===-1?(h="",g=0):g=(h=h.slice(0,N)).length-1-h.lastIndexOf("/"),x=w,v=0;continue}}else if(h.length===2||h.length===1){h="",g=0,x=w,v=0;continue}}f&&(h.length>0?h+="/..":h="..",g=2)}else h.length>0?h+="/"+u.slice(x+1,w):h=u.slice(x+1,w),g=w-x-1;x=w,v=0}else d===46&&v!==-1?++v:v=-1}return h}var l={resolve:function(){for(var u,f="",d=!1,h=arguments.length-1;h>=-1&&!d;h--){var g;h>=0?g=arguments[h]:(u===void 0&&(u=process.cwd()),g=u),o(g),g.length!==0&&(f=g+"/"+f,d=g.charCodeAt(0)===47)}return f=s(f,!d),d?f.length>0?"/"+f:"/":f.length>0?f:"."},normalize:function(u){if(o(u),u.length===0)return".";var f=u.charCodeAt(0)===47,d=u.charCodeAt(u.length-1)===47;return(u=s(u,!f)).length!==0||f||(u="."),u.length>0&&d&&(u+="/"),f?"/"+u:u},isAbsolute:function(u){return o(u),u.length>0&&u.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var u,f=0;f<arguments.length;++f){var d=arguments[f];o(d),d.length>0&&(u===void 0?u=d:u+="/"+d)}return u===void 0?".":l.normalize(u)},relative:function(u,f){if(o(u),o(f),u===f||(u=l.resolve(u))===(f=l.resolve(f)))return"";for(var d=1;d<u.length&&u.charCodeAt(d)===47;++d);for(var h=u.length,g=h-d,x=1;x<f.length&&f.charCodeAt(x)===47;++x);for(var v=f.length-x,w=g<v?g:v,N=-1,A=0;A<=w;++A){if(A===w){if(v>w){if(f.charCodeAt(x+A)===47)return f.slice(x+A+1);if(A===0)return f.slice(x+A)}else g>w&&(u.charCodeAt(d+A)===47?N=A:A===0&&(N=0));break}var U=u.charCodeAt(d+A);if(U!==f.charCodeAt(x+A))break;U===47&&(N=A)}var Z="";for(A=d+N+1;A<=h;++A)A!==h&&u.charCodeAt(A)!==47||(Z.length===0?Z+="..":Z+="/..");return Z.length>0?Z+f.slice(x+N):(x+=N,f.charCodeAt(x)===47&&++x,f.slice(x))},_makeLong:function(u){return u},dirname:function(u){if(o(u),u.length===0)return".";for(var f=u.charCodeAt(0),d=f===47,h=-1,g=!0,x=u.length-1;x>=1;--x)if((f=u.charCodeAt(x))===47){if(!g){h=x;break}}else g=!1;return h===-1?d?"/":".":d&&h===1?"//":u.slice(0,h)},basename:function(u,f){if(f!==void 0&&typeof f!="string")throw new TypeError('"ext" argument must be a string');o(u);var d,h=0,g=-1,x=!0;if(f!==void 0&&f.length>0&&f.length<=u.length){if(f.length===u.length&&f===u)return"";var v=f.length-1,w=-1;for(d=u.length-1;d>=0;--d){var N=u.charCodeAt(d);if(N===47){if(!x){h=d+1;break}}else w===-1&&(x=!1,w=d+1),v>=0&&(N===f.charCodeAt(v)?--v==-1&&(g=d):(v=-1,g=w))}return h===g?g=w:g===-1&&(g=u.length),u.slice(h,g)}for(d=u.length-1;d>=0;--d)if(u.charCodeAt(d)===47){if(!x){h=d+1;break}}else g===-1&&(x=!1,g=d+1);return g===-1?"":u.slice(h,g)},extname:function(u){o(u);for(var f=-1,d=0,h=-1,g=!0,x=0,v=u.length-1;v>=0;--v){var w=u.charCodeAt(v);if(w!==47)h===-1&&(g=!1,h=v+1),w===46?f===-1?f=v:x!==1&&(x=1):f!==-1&&(x=-1);else if(!g){d=v+1;break}}return f===-1||h===-1||x===0||x===1&&f===h-1&&f===d+1?"":u.slice(f,h)},format:function(u){if(u===null||typeof u!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof u);return function(f,d){var h=d.dir||d.root,g=d.base||(d.name||"")+(d.ext||"");return h?h===d.root?h+g:h+"/"+g:g}(0,u)},parse:function(u){o(u);var f={root:"",dir:"",base:"",ext:"",name:""};if(u.length===0)return f;var d,h=u.charCodeAt(0),g=h===47;g?(f.root="/",d=1):d=0;for(var x=-1,v=0,w=-1,N=!0,A=u.length-1,U=0;A>=d;--A)if((h=u.charCodeAt(A))!==47)w===-1&&(N=!1,w=A+1),h===46?x===-1?x=A:U!==1&&(U=1):x!==-1&&(U=-1);else if(!N){v=A+1;break}return x===-1||w===-1||U===0||U===1&&x===w-1&&x===v+1?w!==-1&&(f.base=f.name=v===0&&g?u.slice(1,w):u.slice(v,w)):(v===0&&g?(f.name=u.slice(1,x),f.base=u.slice(1,w)):(f.name=u.slice(v,x),f.base=u.slice(v,w)),f.ext=u.slice(x,w)),v>0?f.dir=u.slice(0,v-1):g&&(f.dir="/"),f},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,r),s.exports}r.d=(i,o)=>{for(var s in o)r.o(o,s)&&!r.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>O}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function u(C,D){if(!C.scheme&&D)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${C.authority}", path: "${C.path}", query: "${C.query}", fragment: "${C.fragment}"}`);if(C.scheme&&!o.test(C.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(C.path){if(C.authority){if(!s.test(C.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(C.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let f="",d="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(D){return D instanceof g||!!D&&typeof D.authority=="string"&&typeof D.fragment=="string"&&typeof D.path=="string"&&typeof D.query=="string"&&typeof D.scheme=="string"&&typeof D.fsPath=="string"&&typeof D.with=="function"&&typeof D.toString=="function"}scheme;authority;path;query;fragment;constructor(D,$,q,K,Q,te=!1){typeof D=="object"?(this.scheme=D.scheme||f,this.authority=D.authority||f,this.path=D.path||f,this.query=D.query||f,this.fragment=D.fragment||f):(this.scheme=function(me,re){return me||re?me:"file"}(D,te),this.authority=$||f,this.path=function(me,re){switch(me){case"https":case"http":case"file":re?re[0]!==d&&(re=d+re):re=d}return re}(this.scheme,q||f),this.query=K||f,this.fragment=Q||f,u(this,te))}get fsPath(){return U(this,!1)}with(D){if(!D)return this;let{scheme:$,authority:q,path:K,query:Q,fragment:te}=D;return $===void 0?$=this.scheme:$===null&&($=f),q===void 0?q=this.authority:q===null&&(q=f),K===void 0?K=this.path:K===null&&(K=f),Q===void 0?Q=this.query:Q===null&&(Q=f),te===void 0?te=this.fragment:te===null&&(te=f),$===this.scheme&&q===this.authority&&K===this.path&&Q===this.query&&te===this.fragment?this:new v($,q,K,Q,te)}static parse(D,$=!1){let q=h.exec(D);return q?new v(q[2]||f,de(q[4]||f),de(q[5]||f),de(q[7]||f),de(q[9]||f),$):new v(f,f,f,f,f)}static file(D){let $=f;if(i&&(D=D.replace(/\\/g,d)),D[0]===d&&D[1]===d){let q=D.indexOf(d,2);q===-1?($=D.substring(2),D=d):($=D.substring(2,q),D=D.substring(q)||d)}return new v("file",$,D,f,f)}static from(D){let $=new v(D.scheme,D.authority,D.path,D.query,D.fragment);return u($,!0),$}toString(D=!1){return Z(this,D)}toJSON(){return this}static revive(D){if(D){if(D instanceof g)return D;{let $=new v(D);return $._formatted=D.external,$._fsPath=D._sep===x?D.fsPath:null,$}}return D}}let x=i?1:void 0;class v extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=U(this,!1)),this._fsPath}toString(D=!1){return D?Z(this,!0):(this._formatted||(this._formatted=Z(this,!1)),this._formatted)}toJSON(){let D={$mid:1};return this._fsPath&&(D.fsPath=this._fsPath,D._sep=x),this._formatted&&(D.external=this._formatted),this.path&&(D.path=this.path),this.scheme&&(D.scheme=this.scheme),this.authority&&(D.authority=this.authority),this.query&&(D.query=this.query),this.fragment&&(D.fragment=this.fragment),D}}let w={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function N(C,D,$){let q,K=-1;for(let Q=0;Q<C.length;Q++){let te=C.charCodeAt(Q);if(te>=97&&te<=122||te>=65&&te<=90||te>=48&&te<=57||te===45||te===46||te===95||te===126||D&&te===47||$&&te===91||$&&te===93||$&&te===58)K!==-1&&(q+=encodeURIComponent(C.substring(K,Q)),K=-1),q!==void 0&&(q+=C.charAt(Q));else{q===void 0&&(q=C.substr(0,Q));let me=w[te];me!==void 0?(K!==-1&&(q+=encodeURIComponent(C.substring(K,Q)),K=-1),q+=me):K===-1&&(K=Q)}}return K!==-1&&(q+=encodeURIComponent(C.substring(K))),q!==void 0?q:C}function A(C){let D;for(let $=0;$<C.length;$++){let q=C.charCodeAt($);q===35||q===63?(D===void 0&&(D=C.substr(0,$)),D+=w[q]):D!==void 0&&(D+=C[$])}return D!==void 0?D:C}function U(C,D){let $;return $=C.authority&&C.path.length>1&&C.scheme==="file"?`//${C.authority}${C.path}`:C.path.charCodeAt(0)===47&&(C.path.charCodeAt(1)>=65&&C.path.charCodeAt(1)<=90||C.path.charCodeAt(1)>=97&&C.path.charCodeAt(1)<=122)&&C.path.charCodeAt(2)===58?D?C.path.substr(1):C.path[1].toLowerCase()+C.path.substr(2):C.path,i&&($=$.replace(/\//g,"\\")),$}function Z(C,D){let $=D?A:N,q="",{scheme:K,authority:Q,path:te,query:me,fragment:re}=C;if(K&&(q+=K,q+=":"),(Q||K==="file")&&(q+=d,q+=d),Q){let Re=Q.indexOf("@");if(Re!==-1){let or=Q.substr(0,Re);Q=Q.substr(Re+1),Re=or.lastIndexOf(":"),Re===-1?q+=$(or,!1,!1):(q+=$(or.substr(0,Re),!1,!1),q+=":",q+=$(or.substr(Re+1),!1,!0)),q+="@"}Q=Q.toLowerCase(),Re=Q.lastIndexOf(":"),Re===-1?q+=$(Q,!1,!0):(q+=$(Q.substr(0,Re),!1,!0),q+=Q.substr(Re))}if(te){if(te.length>=3&&te.charCodeAt(0)===47&&te.charCodeAt(2)===58){let Re=te.charCodeAt(1);Re>=65&&Re<=90&&(te=`/${String.fromCharCode(Re+32)}:${te.substr(3)}`)}else if(te.length>=2&&te.charCodeAt(1)===58){let Re=te.charCodeAt(0);Re>=65&&Re<=90&&(te=`${String.fromCharCode(Re+32)}:${te.substr(2)}`)}q+=$(te,!0,!1)}return me&&(q+="?",q+=$(me,!1,!1)),re&&(q+="#",q+=D?re:N(re,!1,!1)),q}function ne(C){try{return decodeURIComponent(C)}catch{return C.length>3?C.substr(0,3)+ne(C.substr(3)):C}}let he=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function de(C){return C.match(he)?C.replace(he,D=>ne(D)):C}var dt=r(470);let At=dt.posix||dt,nt="/";var O;(function(C){C.joinPath=function(D,...$){return D.with({path:At.join(D.path,...$)})},C.resolvePath=function(D,...$){let q=D.path,K=!1;q[0]!==nt&&(q=nt+q,K=!0);let Q=At.resolve(q,...$);return K&&Q[0]===nt&&!D.authority&&(Q=Q.substring(1)),D.with({path:Q})},C.dirname=function(D){if(D.path.length===0||D.path===nt)return D;let $=At.dirname(D.path);return $.length===1&&$.charCodeAt(0)===46&&($=""),D.with({path:$})},C.basename=function(D){return At.basename(D.path)},C.extname=function(D){return At.extname(D.path)}})(O||(O={}))})(),hI=n})();var{URI:gI,Utils:$Ue}=hI;var LI=pr(PI(),1);var Jl=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var Z7={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},eu=t=>t.replace(/[[\]\\-]/g,"\\$&"),Y7=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),AI=t=>t.join(""),DI=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,l=!1,u=!1,f=!1,d=r,h="";e:for(;o<t.length;){let w=t.charAt(o);if((w==="!"||w==="^")&&o===r+1){f=!0,o++;continue}if(w==="]"&&s&&!u){d=o+1;break}if(s=!0,w==="\\"&&!u){u=!0,o++;continue}if(w==="["&&!u){for(let[N,[A,U,Z]]of Object.entries(Z7))if(t.startsWith(N,o)){if(h)return["$.",!1,t.length-r,!0];o+=N.length,Z?i.push(A):n.push(A),l=l||U;continue e}}if(u=!1,h){w>h?n.push(eu(h)+"-"+eu(w)):w===h&&n.push(eu(w)),h="",o++;continue}if(t.startsWith("-]",o+1)){n.push(eu(w+"-")),o+=2;continue}if(t.startsWith("-",o+1)){h=w,o+=2;continue}n.push(eu(w)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!f){let w=n[0].length===2?n[0].slice(-1):n[0];return[Y7(w),!1,d-r,!1]}let g="["+(f?"^":"")+AI(n)+"]",x="["+(f?"":"^")+AI(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,l,d-r,!0]};var An=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var X7=new Set(["!","?","+","*","@"]),II=t=>X7.has(t),J7="(?!(?:^|/)\\.\\.?(?:$|/))",yg="(?!\\.)",eQ=new Set(["[","."]),tQ=new Set(["..","."]),rQ=new Set("().*{}+?[]^$\\!"),nQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),sv="[^/]",FI=sv+"*?",CI=sv+"+?",js=class t{type;#e;#r;#o=!1;#n=[];#a;#S;#l;#p=!1;#c;#s;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#r=!0),this.#a=r,this.#e=this.#a?this.#a.#e:this,this.#c=this.#e===this?n:this.#e.#c,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#p&&this.#l.push(this),this.#S=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#r!==void 0)return this.#r;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#r=!0;return this.#r}toString(){return this.#s!==void 0?this.#s:this.type?this.#s=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#s=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#p)return this;this.toString(),this.#p=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#a;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#a}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#a===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#p&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#S===0)return!0;let e=this.#a;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,s=!1,l=-1,u=!1;if(r.type===null){let x=n,v="";for(;x<e.length;){let w=e.charAt(x++);if(o||w==="\\"){o=!o,v+=w;continue}if(s){x===l+1?(w==="^"||w==="!")&&(u=!0):w==="]"&&!(x===l+2&&u)&&(s=!1),v+=w;continue}else if(w==="["){s=!0,l=x,u=!1,v+=w;continue}if(!i.noext&&II(w)&&e.charAt(x)==="("){r.push(v),v="";let N=new t(w,r);x=t.#y(e,N,x,i),r.push(N);continue}v+=w}return r.push(v),x}let f=n+1,d=new t(null,r),h=[],g="";for(;f<e.length;){let x=e.charAt(f++);if(o||x==="\\"){o=!o,g+=x;continue}if(s){f===l+1?(x==="^"||x==="!")&&(u=!0):x==="]"&&!(f===l+2&&u)&&(s=!1),g+=x;continue}else if(x==="["){s=!0,l=f,u=!1,g+=x;continue}if(II(x)&&e.charAt(f)==="("){d.push(g),g="";let v=new t(x,d);d.push(v),f=t.#y(e,v,f,i);continue}if(x==="|"){d.push(g),g="",h.push(d),d=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),d.push(g),g="",r.push(...h,d),f;g+=x}return r.type=null,r.#r=void 0,r.#n=[e.substring(n-1)],f}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#r||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#c.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}toRegExpSource(e){let r=e??!!this.#c.dot;if(this.#e===this&&this.#g(),!this.type){let u=this.isStart()&&this.isEnd(),f=this.#n.map(x=>{let[v,w,N,A]=typeof x=="string"?t.#f(x,this.#r,u):x.toRegExpSource(e);return this.#r=this.#r||N,this.#o=this.#o||A,v}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&tQ.has(this.#n[0]))){let v=eQ,w=r&&v.has(f.charAt(0))||f.startsWith("\\.")&&v.has(f.charAt(2))||f.startsWith("\\.\\.")&&v.has(f.charAt(4)),N=!r&&!e&&v.has(f.charAt(0));d=w?J7:N?yg:""}let h="";return this.isEnd()&&this.#e.#p&&this.#a?.type==="!"&&(h="(?:$|\\/)"),[d+f+h,An(f),this.#r=!!this.#r,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#d(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let u=this.toString();return this.#n=[u],this.type=null,this.#r=void 0,[u,An(this.toString()),!1,!1]}let s=!n||e||r||!yg?"":this.#d(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?yg:"")+CI;else{let u=this.type==="!"?"))"+(this.isStart()&&!r&&!e?yg:"")+FI+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;l=i+o+u}return[l,An(o),this.#r=!!this.#r,this.#o]}#d(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#o=this.#o||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",s=!1;for(let l=0;l<e.length;l++){let u=e.charAt(l);if(i){i=!1,o+=(rQ.has(u)?"\\":"")+u;continue}if(u==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(u==="["){let[f,d,h,g]=DI(e,l);if(h){o+=f,s=s||d,l+=h-1,r=r||g;continue}}if(u==="*"){n&&e==="*"?o+=CI:o+=FI,r=!0;continue}if(u==="?"){o+=sv,r=!0;continue}o+=nQ(u)}return[o,An(e),!!r,s]}};var qs=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var nr=(t,e,r={})=>(Jl(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Vr(e,r).match(t)),iQ=/^\*+([^+@!?\*\[\(]*)$/,oQ=t=>e=>!e.startsWith(".")&&e.endsWith(t),aQ=t=>e=>e.endsWith(t),sQ=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),cQ=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),lQ=/^\*+\.\*+$/,uQ=t=>!t.startsWith(".")&&t.includes("."),pQ=t=>t!=="."&&t!==".."&&t.includes("."),fQ=/^\.\*+$/,dQ=t=>t!=="."&&t!==".."&&t.startsWith("."),mQ=/^\*+$/,hQ=t=>t.length!==0&&!t.startsWith("."),gQ=t=>t.length!==0&&t!=="."&&t!=="..",yQ=/^\?+([^+@!?\*\[\(]*)?$/,xQ=([t,e=""])=>{let r=UI([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},TQ=([t,e=""])=>{let r=VI([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},SQ=([t,e=""])=>{let r=VI([t]);return e?n=>r(n)&&n.endsWith(e):r},vQ=([t,e=""])=>{let r=UI([t]);return e?n=>r(n)&&n.endsWith(e):r},UI=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},VI=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},BI=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",NI={win32:{sep:"\\"},posix:{sep:"/"}},bQ=BI==="win32"?NI.win32.sep:NI.posix.sep;nr.sep=bQ;var Ot=Symbol("globstar **");nr.GLOBSTAR=Ot;var wQ="[^/]",_Q=wQ+"*?",EQ="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",RQ="(?:(?!(?:\\/|^)\\.).)*?",kQ=(t,e={})=>r=>nr(r,t,e);nr.filter=kQ;var ln=(t,e={})=>Object.assign({},t,e),MQ=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return nr;let e=nr;return Object.assign((n,i,o={})=>e(n,i,ln(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,ln(t,o))}static defaults(i){return e.defaults(ln(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,ln(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,ln(t,o))}},unescape:(n,i={})=>e.unescape(n,ln(t,i)),escape:(n,i={})=>e.escape(n,ln(t,i)),filter:(n,i={})=>e.filter(n,ln(t,i)),defaults:n=>e.defaults(ln(t,n)),makeRe:(n,i={})=>e.makeRe(n,ln(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,ln(t,i)),match:(n,i,o={})=>e.match(n,i,ln(t,o)),sep:e.sep,GLOBSTAR:Ot})};nr.defaults=MQ;var WI=(t,e={})=>(Jl(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,LI.default)(t));nr.braceExpand=WI;var PQ=(t,e={})=>new Vr(t,e).makeRe();nr.makeRe=PQ;var AQ=(t,e,r={})=>{let n=new Vr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};nr.match=AQ;var OI=/[?*]|[+@!]\(.*?\)|\[|\]/,DQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Vr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){Jl(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||BI,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=o[0]===""&&o[1]===""&&(o[2]==="?"||!OI.test(o[2]))&&!OI.test(o[3]),f=/^[a-z]:/i.test(o[0]);if(u)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(f)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(u=>this.parse(u))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let l=n[i+1],u=n[i+2],f=n[i+3];if(l!==".."||!u||u==="."||u===".."||!f||f==="."||f==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let l=n[s];s===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let u=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...u),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);i&&(e[r]=i,e[n]=[])}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let w=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),N=!w&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),A=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),U=!A&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),Z=N?3:w?0:void 0,ne=U?3:A?0:void 0;if(typeof Z=="number"&&typeof ne=="number"){let[he,de]=[e[Z],r[ne]];he.toLowerCase()===de.toLowerCase()&&(r[ne]=he,ne>Z?r=r.slice(ne):Z>ne&&(e=e.slice(Z)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,l=0,u=e.length,f=r.length;s<u&&l<f;s++,l++){this.debug("matchOne loop");var d=r[l],h=e[s];if(this.debug(r,d,h),d===!1)return!1;if(d===Ot){this.debug("GLOBSTAR",[r,d,h]);var g=s,x=l+1;if(x===f){for(this.debug("** at the end");s<u;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;g<u;){var v=e[g];if(this.debug(`
globstar while`,e,g,r,x,v),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,u,v),!0;if(v==="."||v===".."||!i.dot&&v.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===u))}let w;if(typeof d=="string"?(w=h===d,this.debug("string match",d,h,w)):(w=d.test(h),this.debug("pattern match",d,h,w)),!w)return!1}if(s===u&&l===f)return!0;if(s===u)return n;if(l===f)return s===u-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return WI(this.pattern,this.options)}parse(e){Jl(e);let r=this.options;if(e==="**")return Ot;if(e==="")return"";let n,i=null;(n=e.match(mQ))?i=r.dot?gQ:hQ:(n=e.match(iQ))?i=(r.nocase?r.dot?cQ:sQ:r.dot?aQ:oQ)(n[1]):(n=e.match(yQ))?i=(r.nocase?r.dot?TQ:xQ:r.dot?SQ:vQ)(n):(n=e.match(lQ))?i=r.dot?pQ:uQ:(n=e.match(fQ))&&(i=dQ);let o=js.fromGlob(e,this.options).toMMPattern();return i?Object.assign(o,{test:i}):o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?_Q:r.dot?EQ:RQ,i=new Set(r.nocase?["i"]:[]),o=e.map(u=>{let f=u.map(d=>{if(d instanceof RegExp)for(let h of d.flags.split(""))i.add(h);return typeof d=="string"?DQ(d):d===Ot?Ot:d._src});return f.forEach((d,h)=>{let g=f[h+1],x=f[h-1];d!==Ot||x===Ot||(x===void 0?g!==void 0&&g!==Ot?f[h+1]="(?:\\/|"+n+"\\/)?"+g:f[h]=n:g===void 0?f[h-1]=x+"(?:\\/|"+n+")?":g!==Ot&&(f[h-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,f[h+1]=Ot))}),f.filter(d=>d!==Ot).join("/")}).join("|"),[s,l]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let l=i.length-2;!s&&l>=0;l--)s=i[l];for(let l=0;l<o.length;l++){let u=o[l],f=i;if(n.matchBase&&u.length===1&&(f=[s]),this.matchOne(f,u,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return nr.defaults(e).Minimatch}};nr.AST=js;nr.Minimatch=Vr;nr.escape=qs;nr.unescape=An;var zs=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,$I=new Set,cv=typeof process=="object"&&process?process:{},jI=(t,e,r,n)=>{typeof cv.emitWarning=="function"?cv.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},xg=globalThis.AbortController,HI=globalThis.AbortSignal;if(typeof xg>"u"){HI=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},xg=class{constructor(){e()}signal=new HI;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=cv.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,jI("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var IQ=t=>!$I.has(t),f2e=Symbol("type"),go=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),qI=t=>go(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Gs:null:null,Gs=class extends Array{constructor(e){super(e),this.fill(0)}},lv=class t{heap;length;static#e=!1;static create(e){let r=qI(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},tu=class t{#e;#r;#o;#n;#a;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#p;#c;#s;#i;#g;#y;#d;#f;#w;#h;#_;#E;#T;#v;#b;#m;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#T,sizes:e.#_,keyMap:e.#c,keyList:e.#s,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#u(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#B(r),indexes:r=>e.#k(r),rindexes:r=>e.#M(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#r}get calculatedSize(){return this.#p}get size(){return this.#l}get fetchMethod(){return this.#a}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:l,allowStale:u,dispose:f,disposeAfter:d,noDisposeOnSet:h,noUpdateTTL:g,maxSize:x=0,maxEntrySize:v=0,sizeCalculation:w,fetchMethod:N,memoMethod:A,noDeleteOnFetchRejection:U,noDeleteOnStaleGet:Z,allowStaleOnFetchRejection:ne,allowStaleOnFetchAbort:he,ignoreFetchAbort:de}=e;if(r!==0&&!go(r))throw new TypeError("max option must be a nonnegative integer");let dt=r?qI(r):Array;if(!dt)throw new Error("invalid max value: "+r);if(this.#e=r,this.#r=x,this.maxEntrySize=v||this.#r,this.sizeCalculation=w,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(A!==void 0&&typeof A!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=A,N!==void 0&&typeof N!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=N,this.#b=!!N,this.#c=new Map,this.#s=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new dt(r),this.#y=new dt(r),this.#d=0,this.#f=0,this.#w=lv.create(r),this.#l=0,this.#p=0,typeof f=="function"&&(this.#o=f),typeof d=="function"?(this.#n=d,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#m=!!this.#n,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!U,this.allowStaleOnFetchRejection=!!ne,this.allowStaleOnFetchAbort=!!he,this.ignoreFetchAbort=!!de,this.maxEntrySize!==0){if(this.#r!==0&&!go(this.#r))throw new TypeError("maxSize must be a positive integer if specified");if(!go(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#A()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!Z,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!l,this.ttlResolution=go(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!go(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#P()}if(this.#e===0&&this.ttl===0&&this.#r===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#r){let At="LRU_CACHE_UNBOUNDED";IQ(At)&&($I.add(At),jI("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",At,t))}}getRemainingTTL(e){return this.#c.has(e)?1/0:0}#P(){let e=new Gs(this.#e),r=new Gs(this.#e);this.#T=e,this.#E=r,this.#I=(o,s,l=zs.now())=>{if(r[o]=s!==0?l:0,e[o]=s,s!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#x(o)&&this.#D(this.#s[o],"expire")},s+1);u.unref&&u.unref()}},this.#R=o=>{r[o]=e[o]!==0?zs.now():0},this.#t=(o,s)=>{if(e[s]){let l=e[s],u=r[s];if(!l||!u)return;o.ttl=l,o.start=u,o.now=n||i();let f=o.now-u;o.remainingTTL=l-f}};let n=0,i=()=>{let o=zs.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#c.get(o);if(s===void 0)return 0;let l=e[s],u=r[s];if(!l||!u)return 1/0;let f=(n||i())-u;return l-f},this.#x=o=>{let s=r[o],l=e[o];return!!l&&!!s&&(n||i())-s>l}}#R=()=>{};#t=()=>{};#I=()=>{};#x=()=>!1;#A(){let e=new Gs(this.#e);this.#p=0,this.#_=e,this.#F=r=>{this.#p-=e[r],e[r]=0},this.#N=(r,n,i,o)=>{if(this.#u(n))return 0;if(!go(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!go(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#r){let o=this.#r-e[r];for(;this.#p>o;)this.#L(!0)}this.#p+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#p)}}#F=e=>{};#C=(e,r,n)=>{};#N=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#O(r)||((e||!this.#x(r))&&(yield r),r===this.#d));)r=this.#y[r]}*#M({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#d;!(!this.#O(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#O(e){return e!==void 0&&this.#c.get(this.#s[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#s[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#s[e],this.#i[e]])}*rentries(){for(let e of this.#M())this.#i[e]!==void 0&&this.#s[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#s[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#s[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#M()){let r=this.#s[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#M())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#s[n],this))return this.get(this.#s[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#s[n],this)}}rforEach(e,r=this){for(let n of this.#M()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#s[n],this)}}purgeStale(){let e=!1;for(let r of this.#M({allowStale:!0}))this.#x(r)&&(this.#D(this.#s[r],"expire"),e=!0);return e}info(e){let r=this.#c.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#u(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#T&&this.#E){let s=this.#T[r],l=this.#E[r];if(s&&l){let u=s-(zs.now()-l);o.ttl=u,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#s[r],i=this.#i[r],o=this.#u(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#T&&this.#E){s.ttl=this.#T[r];let l=zs.now()-this.#E[r];s.start=Math.floor(Date.now()-l)}this.#_&&(s.size=this.#_[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=zs.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:u}=n,{noUpdateTTL:f=this.noUpdateTTL}=n,d=this.#N(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let h=this.#l===0?void 0:this.#c.get(e);if(h===void 0)h=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#s[h]=e,this.#i[h]=r,this.#c.set(e,h),this.#g[this.#f]=h,this.#y[h]=this.#f,this.#f=h,this.#l++,this.#C(h,d,u),u&&(u.set="add"),f=!1;else{this.#B(h);let g=this.#i[h];if(r!==g){if(this.#b&&this.#u(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!s&&(this.#v&&this.#o?.(x,e,"set"),this.#m&&this.#h?.push([x,e,"set"]))}else s||(this.#v&&this.#o?.(g,e,"set"),this.#m&&this.#h?.push([g,e,"set"]));if(this.#F(h),this.#C(h,d,u),this.#i[h]=r,u){u.set="replace";let x=g&&this.#u(g)?g.__staleWhileFetching:g;x!==void 0&&(u.oldValue=x)}}else u&&(u.set="update")}if(i!==0&&!this.#T&&this.#P(),this.#T&&(f||this.#I(h,i,o),u&&this.#t(u,h)),!s&&this.#m&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#d];if(this.#L(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#m&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#d,n=this.#s[r],i=this.#i[r];return this.#b&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(i,n,"evict"),this.#m&&this.#h?.push([i,n,"evict"])),this.#F(r),e&&(this.#s[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#d=this.#f=0,this.#w.length=0):this.#d=this.#g[r],this.#c.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#c.get(e);if(o!==void 0){let s=this.#i[o];if(this.#u(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#t(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#t(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#c.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#u(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#u(o))return o;let s=new xg,{signal:l}=n;l?.addEventListener("abort",()=>s.abort(l.reason),{signal:s.signal});let u={signal:s.signal,options:n,context:i},f=(w,N=!1)=>{let{aborted:A}=s.signal,U=n.ignoreFetchAbort&&w!==void 0;if(n.status&&(A&&!N?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,U&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),A&&!U&&!N)return h(s.signal.reason);let Z=x;return this.#i[r]===x&&(w===void 0?Z.__staleWhileFetching?this.#i[r]=Z.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,w,u.options))),w},d=w=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=w),h(w)),h=w=>{let{aborted:N}=s.signal,A=N&&n.allowStaleOnFetchAbort,U=A||n.allowStaleOnFetchRejection,Z=U||n.noDeleteOnFetchRejection,ne=x;if(this.#i[r]===x&&(!Z||ne.__staleWhileFetching===void 0?this.#D(e,"fetch"):A||(this.#i[r]=ne.__staleWhileFetching)),U)return n.status&&ne.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),ne.__staleWhileFetching;if(ne.__returned===ne)throw w},g=(w,N)=>{let A=this.#a?.(e,o,u);A&&A instanceof Promise&&A.then(U=>w(U===void 0?void 0:U),N),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(w(void 0),n.allowStaleOnFetchAbort&&(w=U=>f(U,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(f,d),v=Object.assign(x,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,v,{...u.options,status:void 0}),r=this.#c.get(e)):this.#i[r]=v,v}#u(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof xg}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:u=0,sizeCalculation:f=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:v=this.allowStaleOnFetchAbort,context:w,forceRefresh:N=!1,status:A,signal:U}=r;if(!this.#b)return A&&(A.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:A});let Z={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:l,size:u,sizeCalculation:f,noUpdateTTL:d,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:v,ignoreFetchAbort:x,status:A,signal:U},ne=this.#c.get(e);if(ne===void 0){A&&(A.fetch="miss");let he=this.#U(e,ne,Z,w);return he.__returned=he}else{let he=this.#i[ne];if(this.#u(he)){let O=n&&he.__staleWhileFetching!==void 0;return A&&(A.fetch="inflight",O&&(A.returnedStale=!0)),O?he.__staleWhileFetching:he.__returned=he}let de=this.#x(ne);if(!N&&!de)return A&&(A.fetch="hit"),this.#B(ne),i&&this.#R(ne),A&&this.#t(A,ne),he;let dt=this.#U(e,ne,Z,w),nt=dt.__staleWhileFetching!==void 0&&n;return A&&(A.fetch=de?"stale":"refresh",nt&&de&&(A.returnedStale=!0)),nt?dt.__staleWhileFetching:dt.__returned=dt}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=r,l=this.get(e,s);if(!o&&l!==void 0)return l;let u=n(e,l,{options:s,context:i});return this.set(e,u,s),u}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,l=this.#c.get(e);if(l!==void 0){let u=this.#i[l],f=this.#u(u);return s&&this.#t(s,l),this.#x(l)?(s&&(s.get="stale"),f?(s&&n&&u.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?u.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),s&&n&&(s.returnedStale=!0),n?u:void 0)):(s&&(s.get="hit"),f?u.__staleWhileFetching:(this.#B(l),i&&this.#R(l),u))}else s&&(s.get="miss")}#V(e,r){this.#y[r]=e,this.#g[e]=r}#B(e){e!==this.#f&&(e===this.#d?this.#d=this.#g[e]:this.#V(this.#y[e],this.#g[e]),this.#V(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#c.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#W(r);else{this.#F(i);let o=this.#i[i];if(this.#u(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(o,e,r),this.#m&&this.#h?.push([o,e,r])),this.#c.delete(e),this.#s[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#d)this.#d=this.#g[i];else{let s=this.#y[i];this.#g[s]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#m&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#W("delete")}#W(e){for(let r of this.#M({allowStale:!0})){let n=this.#i[r];if(this.#u(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#s[r];this.#v&&this.#o?.(n,i,e),this.#m&&this.#h?.push([n,i,e])}}if(this.#c.clear(),this.#i.fill(void 0),this.#s.fill(void 0),this.#T&&this.#E&&(this.#T.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#d=0,this.#f=0,this.#w.length=0,this.#p=0,this.#l=0,this.#m&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var Zs=require("path"),t1=require("url"),HQ=pr(require("fs"),1),Jn=require("fs"),To=require("fs/promises");var Eg=require("events"),gv=pr(require("stream"),1),ZI=require("string_decoder"),zI=typeof process=="object"&&process?process:{stdout:null,stderr:null},FQ=t=>!!t&&typeof t=="object"&&(t instanceof xo||t instanceof gv.default||CQ(t)||NQ(t)),CQ=t=>!!t&&typeof t=="object"&&t instanceof Eg.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==gv.default.Writable.prototype.pipe,NQ=t=>!!t&&typeof t=="object"&&t instanceof Eg.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Pi=Symbol("EOF"),Ai=Symbol("maybeEmitEnd"),yo=Symbol("emittedEnd"),Tg=Symbol("emittingEnd"),ru=Symbol("emittedError"),Sg=Symbol("closed"),GI=Symbol("read"),vg=Symbol("flush"),KI=Symbol("flushChunk"),Dn=Symbol("encoding"),Ks=Symbol("decoder"),kt=Symbol("flowing"),nu=Symbol("paused"),Qs=Symbol("resume"),Mt=Symbol("buffer"),ir=Symbol("pipes"),Pt=Symbol("bufferLength"),uv=Symbol("bufferPush"),bg=Symbol("bufferShift"),qt=Symbol("objectMode"),ft=Symbol("destroyed"),pv=Symbol("error"),fv=Symbol("emitData"),QI=Symbol("emitEnd"),dv=Symbol("emitEnd2"),Yn=Symbol("async"),mv=Symbol("abort"),wg=Symbol("aborted"),iu=Symbol("signal"),la=Symbol("dataListeners"),Br=Symbol("discarded"),ou=t=>Promise.resolve().then(t),OQ=t=>t(),LQ=t=>t==="end"||t==="finish"||t==="prefinish",UQ=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,VQ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),_g=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[Qs](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},hv=class extends _g{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},BQ=t=>!!t.objectMode,WQ=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",xo=class extends Eg.EventEmitter{[kt]=!1;[nu]=!1;[ir]=[];[Mt]=[];[qt];[Dn];[Yn];[Ks];[Pi]=!1;[yo]=!1;[Tg]=!1;[Sg]=!1;[ru]=null;[Pt]=0;[ft]=!1;[iu];[wg]=!1;[la]=0;[Br]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");BQ(r)?(this[qt]=!0,this[Dn]=null):WQ(r)?(this[Dn]=r.encoding,this[qt]=!1):(this[qt]=!1,this[Dn]=null),this[Yn]=!!r.async,this[Ks]=this[Dn]?new ZI.StringDecoder(this[Dn]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Mt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[ir]});let{signal:n}=r;n&&(this[iu]=n,n.aborted?this[mv]():n.addEventListener("abort",()=>this[mv]()))}get bufferLength(){return this[Pt]}get encoding(){return this[Dn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[qt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Yn]}set async(e){this[Yn]=this[Yn]||!!e}[mv](){this[wg]=!0,this.emit("abort",this[iu]?.reason),this.destroy(this[iu]?.reason)}get aborted(){return this[wg]}set aborted(e){}write(e,r,n){if(this[wg])return!1;if(this[Pi])throw new Error("write after end");if(this[ft])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[Yn]?ou:OQ;if(!this[qt]&&!Buffer.isBuffer(e)){if(VQ(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(UQ(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[qt]?(this[kt]&&this[Pt]!==0&&this[vg](!0),this[kt]?this.emit("data",e):this[uv](e),this[Pt]!==0&&this.emit("readable"),n&&i(n),this[kt]):e.length?(typeof e=="string"&&!(r===this[Dn]&&!this[Ks]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Dn]&&(e=this[Ks].write(e)),this[kt]&&this[Pt]!==0&&this[vg](!0),this[kt]?this.emit("data",e):this[uv](e),this[Pt]!==0&&this.emit("readable"),n&&i(n),this[kt]):(this[Pt]!==0&&this.emit("readable"),n&&i(n),this[kt])}read(e){if(this[ft])return null;if(this[Br]=!1,this[Pt]===0||e===0||e&&e>this[Pt])return this[Ai](),null;this[qt]&&(e=null),this[Mt].length>1&&!this[qt]&&(this[Mt]=[this[Dn]?this[Mt].join(""):Buffer.concat(this[Mt],this[Pt])]);let r=this[GI](e||null,this[Mt][0]);return this[Ai](),r}[GI](e,r){if(this[qt])this[bg]();else{let n=r;e===n.length||e===null?this[bg]():typeof n=="string"?(this[Mt][0]=n.slice(e),r=n.slice(0,e),this[Pt]-=e):(this[Mt][0]=n.subarray(e),r=n.subarray(0,e),this[Pt]-=e)}return this.emit("data",r),!this[Mt].length&&!this[Pi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Pi]=!0,this.writable=!1,(this[kt]||!this[nu])&&this[Ai](),this}[Qs](){this[ft]||(!this[la]&&!this[ir].length&&(this[Br]=!0),this[nu]=!1,this[kt]=!0,this.emit("resume"),this[Mt].length?this[vg]():this[Pi]?this[Ai]():this.emit("drain"))}resume(){return this[Qs]()}pause(){this[kt]=!1,this[nu]=!0,this[Br]=!1}get destroyed(){return this[ft]}get flowing(){return this[kt]}get paused(){return this[nu]}[uv](e){this[qt]?this[Pt]+=1:this[Pt]+=e.length,this[Mt].push(e)}[bg](){return this[qt]?this[Pt]-=1:this[Pt]-=this[Mt][0].length,this[Mt].shift()}[vg](e=!1){do;while(this[KI](this[bg]())&&this[Mt].length);!e&&!this[Mt].length&&!this[Pi]&&this.emit("drain")}[KI](e){return this.emit("data",e),this[kt]}pipe(e,r){if(this[ft])return e;this[Br]=!1;let n=this[yo];return r=r||{},e===zI.stdout||e===zI.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[ir].push(r.proxyErrors?new hv(this,e,r):new _g(this,e,r)),this[Yn]?ou(()=>this[Qs]()):this[Qs]()),e}unpipe(e){let r=this[ir].find(n=>n.dest===e);r&&(this[ir].length===1?(this[kt]&&this[la]===0&&(this[kt]=!1),this[ir]=[]):this[ir].splice(this[ir].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Br]=!1,this[la]++,!this[ir].length&&!this[kt]&&this[Qs]();else if(e==="readable"&&this[Pt]!==0)super.emit("readable");else if(LQ(e)&&this[yo])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[ru]){let i=r;this[Yn]?ou(()=>i.call(this,this[ru])):i.call(this,this[ru])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[la]=this.listeners("data").length,this[la]===0&&!this[Br]&&!this[ir].length&&(this[kt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[la]=0,!this[Br]&&!this[ir].length&&(this[kt]=!1)),r}get emittedEnd(){return this[yo]}[Ai](){!this[Tg]&&!this[yo]&&!this[ft]&&this[Mt].length===0&&this[Pi]&&(this[Tg]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Sg]&&this.emit("close"),this[Tg]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==ft&&this[ft])return!1;if(e==="data")return!this[qt]&&!n?!1:this[Yn]?(ou(()=>this[fv](n)),!0):this[fv](n);if(e==="end")return this[QI]();if(e==="close"){if(this[Sg]=!0,!this[yo]&&!this[ft])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[ru]=n,super.emit(pv,n);let o=!this[iu]||this.listeners("error").length?super.emit("error",n):!1;return this[Ai](),o}else if(e==="resume"){let o=super.emit("resume");return this[Ai](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Ai](),i}[fv](e){for(let n of this[ir])n.dest.write(e)===!1&&this.pause();let r=this[Br]?!1:super.emit("data",e);return this[Ai](),r}[QI](){return this[yo]?!1:(this[yo]=!0,this.readable=!1,this[Yn]?(ou(()=>this[dv]()),!0):this[dv]())}[dv](){if(this[Ks]){let r=this[Ks].end();if(r){for(let n of this[ir])n.dest.write(r);this[Br]||super.emit("data",r)}}for(let r of this[ir])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[qt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[qt]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[qt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Dn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(ft,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Br]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Pi])return r();let o,s,l=h=>{this.off("data",u),this.off("end",f),this.off(ft,d),r(),s(h)},u=h=>{this.off("error",l),this.off("end",f),this.off(ft,d),this.pause(),o({value:h,done:!!this[Pi]})},f=()=>{this.off("error",l),this.off("data",u),this.off(ft,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((h,g)=>{s=g,o=h,this.once(ft,d),this.once("error",l),this.once("end",f),this.once("data",u)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Br]=!1;let e=!1,r=()=>(this.pause(),this.off(pv,r),this.off(ft,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(pv,r),this.once(ft,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[ft])return e?this.emit("error",e):this.emit(ft),this;this[ft]=!0,this[Br]=!0,this[Mt].length=0,this[Pt]=0;let r=this;return typeof r.close=="function"&&!this[Sg]&&r.close(),e?this.emit("error",e):this.emit(ft),this}static get isStream(){return FQ}};var $Q=Jn.realpathSync.native,su={lstatSync:Jn.lstatSync,readdir:Jn.readdir,readdirSync:Jn.readdirSync,readlinkSync:Jn.readlinkSync,realpathSync:$Q,promises:{lstat:To.lstat,readdir:To.readdir,readlink:To.readlink,realpath:To.realpath}},r1=t=>!t||t===su||t===HQ?su:{...su,...t,promises:{...su.promises,...t.promises||{}}},n1=/^\\\\\?\\([a-z]:)\\?$/i,jQ=t=>t.replace(/\//g,"\\").replace(n1,"$1\\"),qQ=/[\\\/]/,pn=0,i1=1,o1=2,Xn=4,a1=6,s1=8,ua=10,c1=12,un=15,au=~un,yv=16,YI=32,cu=64,In=128,Rg=256,Mg=512,XI=cu|In|Mg,zQ=1023,xv=t=>t.isFile()?s1:t.isDirectory()?Xn:t.isSymbolicLink()?ua:t.isCharacterDevice()?o1:t.isBlockDevice()?a1:t.isSocket()?c1:t.isFIFO()?i1:pn,JI=new Map,lu=t=>{let e=JI.get(t);if(e)return e;let r=t.normalize("NFKD");return JI.set(t,r),r},e1=new Map,kg=t=>{let e=e1.get(t);if(e)return e;let r=lu(t.toLowerCase());return e1.set(t,r),r},Pg=class extends tu{constructor(){super({max:256})}},Tv=class extends tu{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},l1=Symbol("PathScurry setAsCwd"),zt=class{name;root;roots;parent;nocase;#e;#r;get dev(){return this.#r}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#p;get blksize(){return this.#p}#c;get ino(){return this.#c}#s;get size(){return this.#s}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#T;#v;#b;#m;#P;#R;#t;#I;#x;#A;get path(){return(this.parent||this).fullpath()}constructor(e,r=pn,n,i,o,s,l){this.name=e,this.#T=o?kg(e):lu(e),this.#t=r&zQ,this.nocase=o,this.roots=i,this.root=n||this,this.#I=s,this.#b=l.fullpath,this.#P=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=r1(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#I}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#I.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#I.set(this,r),this.#t&=~yv,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?kg(e):lu(e);for(let u of n)if(u.#T===i)return u;let o=this.parent?this.sep:"",s=this.#b?this.#b+o+e:void 0,l=this.newChild(e,pn,{...r,parent:this,fullpath:s});return this.canReaddir()||(l.#t|=In),n.push(l),l}relative(){if(this.#P!==void 0)return this.#P;let e=this.name,r=this.parent;if(!r)return this.#P=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#m!==void 0)return this.#m;if(this.sep==="/")return this.#m=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#m=`//?/${i}`:this.#m=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#m=n}isUnknown(){return(this.#t&un)===pn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#t&un)===s1}isDirectory(){return(this.#t&un)===Xn}isCharacterDevice(){return(this.#t&un)===o1}isBlockDevice(){return(this.#t&un)===a1}isFIFO(){return(this.#t&un)===i1}isSocket(){return(this.#t&un)===c1}isSymbolicLink(){return(this.#t&ua)===ua}lstatCached(){return this.#t&YI?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#A}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#t&un;return!(e!==pn&&e!==ua||this.#t&Rg||this.#t&In)}calledReaddir(){return!!(this.#t&yv)}isENOENT(){return!!(this.#t&In)}isNamed(e){return this.nocase?this.#T===kg(e):this.#T===lu(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=this.parent.resolve(r);if(n)return this.#x=n}catch(r){this.#u(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.resolve(r);if(n)return this.#x=n}catch(r){this.#u(r.code);return}}#C(e){this.#t|=yv;for(let r=e.provisional;r<e.length;r++)e[r].#N()}#N(){this.#t&In||(this.#t=(this.#t|In)&au,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#N()}#M(){this.#t|=Mg,this.#O()}#O(){if(this.#t&cu)return;let e=this.#t;(e&un)===Xn&&(e&=au),this.#t=e|cu,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#O():e==="ENOENT"?this.#N():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#O():e==="ENOENT"&&this.#N()}#u(e=""){let r=this.#t;r|=Rg,e==="ENOENT"&&(r|=In),(e==="EINVAL"||e==="UNKNOWN")&&(r&=au),this.#t=r,e==="ENOTDIR"&&this.parent&&this.parent.#O()}#V(e,r){return this.#D(e,r)||this.#B(e,r)}#B(e,r){let n=xv(e),i=this.newChild(e.name,n,{parent:this}),o=i.#t&un;return o!==Xn&&o!==ua&&o!==pn&&(i.#t|=cu),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?kg(e.name):lu(e.name))===i.#T)return this.#W(e,i,n,r)}}#W(e,r,n,i){let o=r.name;return r.#t=r.#t&au|xv(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if(!(this.#t&In))try{return this.#q(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if(!(this.#t&In))try{return this.#q(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#q(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:s,blocks:l,ctime:u,ctimeMs:f,dev:d,gid:h,ino:g,mode:x,mtime:v,mtimeMs:w,nlink:N,rdev:A,size:U,uid:Z}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#p=s,this.#i=l,this.#_=u,this.#d=f,this.#r=d,this.#S=h,this.#c=g,this.#o=x,this.#h=v,this.#y=w,this.#n=N,this.#l=A,this.#s=U,this.#a=Z;let ne=xv(e);this.#t=this.#t&au|ne|YI,ne!==pn&&ne!==Xn&&ne!==ua&&(this.#t|=cu)}#$=[];#j=!1;#z(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,s)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of s)this.#V(l,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#H;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#H)await this.#H;else{let n=()=>{};this.#H=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#V(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#H=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#V(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#t&XI)return!1;let e=un&this.#t;return e===pn||e===Xn||e===ua}shouldWalk(e,r){return(this.#t&Xn)===Xn&&!(this.#t&XI)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#A)return this.#A;if(!((Mg|Rg|In)&this.#t))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#A=this.resolve(e)}catch{this.#M()}}realpathSync(){if(this.#A)return this.#A;if(!((Mg|Rg|In)&this.#t))try{let e=this.#e.realpathSync(this.fullpath());return this.#A=this.resolve(e)}catch{this.#M()}}[l1](e){if(e===this)return;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#P=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#P=void 0,i.#R=void 0,i=i.parent}},Ag=class t extends zt{sep="\\";splitSep=qQ;constructor(e,r=pn,n,i,o,s,l){super(e,r,n,i,o,s,l)}newChild(e,r=pn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return Zs.win32.parse(e).root}getRoot(e){if(e=jQ(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new Ys(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(n1,"$1\\"),e===r}},Dg=class t extends zt{splitSep="/";sep="/";constructor(e,r=pn,n,i,o,s,l){super(e,r,n,i,o,s,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=pn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},Ig=class{root;rootPath;roots;cwd;#e;#r;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:s=su}={}){this.#n=r1(s),(e instanceof URL||e.startsWith("file://"))&&(e=(0,t1.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new Pg,this.#r=new Pg,this.#o=new Tv(o);let u=l.substring(this.rootPath.length).split(n);if(u.length===1&&!u[0]&&u.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let f=this.root,d=u.length-1,h=r.sep,g=this.rootPath,x=!1;for(let v of u){let w=d--;f=f.child(v,{relative:new Array(w).fill("..").join(h),relativePosix:new Array(w).fill("..").join("/"),fullpath:g+=(x?"":h)+v}),x=!0}this.cwd=f}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#r.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#r.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set,f=(h,g)=>{u.add(h),h.readdirCB((x,v)=>{if(x)return g(x);let w=v.length;if(!w)return g();let N=()=>{--w===0&&g()};for(let A of v)(!o||o(A))&&l.push(n?A:A.fullpath()),i&&A.isSymbolicLink()?A.realpath().then(U=>U?.isUnknown()?U.lstat():U).then(U=>U?.shouldWalk(u,s)?f(U,N):N()):A.shouldWalk(u,s)?f(A,N):N()},!0)},d=e;return new Promise((h,g)=>{f(d,x=>{if(x)return g(x);h(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set([e]);for(let f of u){let d=f.readdirSync();for(let h of d){(!o||o(h))&&l.push(n?h:h.fullpath());let g=h;if(h.isSymbolicLink()){if(!(i&&(g=h.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(u,s)&&u.add(g)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let u of l){let f=u.readdirSync();for(let d of f){(!o||o(d))&&(yield n?d:d.fullpath());let h=d;if(d.isSymbolicLink()){if(!(i&&(h=d.realpathSync())))continue;h.isUnknown()&&h.lstatSync()}h.shouldWalk(l,s)&&l.add(h)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new xo({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let u=new Set,f=[e],d=0,h=()=>{let g=!1;for(;!g;){let x=f.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let v=(N,A,U=!1)=>{if(N)return l.emit("error",N);if(i&&!U){let Z=[];for(let ne of A)ne.isSymbolicLink()&&Z.push(ne.realpath().then(he=>he?.isUnknown()?he.lstat():he));if(Z.length){Promise.all(Z).then(()=>v(null,A,!0));return}}for(let Z of A)Z&&(!o||o(Z))&&(l.write(n?Z:Z.fullpath())||(g=!0));d--;for(let Z of A){let ne=Z.realpathCached()||Z;ne.shouldWalk(u,s)&&f.push(ne)}g&&!l.flowing?l.once("drain",h):w||h()},w=!0;x.readdirCB(v,!0),w=!1}};return h(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new xo({objectMode:!0}),u=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let f=[e],d=0,h=()=>{let g=!1;for(;!g;){let x=f.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let v=x.readdirSync();for(let w of v)(!o||o(w))&&(l.write(n?w:w.fullpath())||(g=!0));d--;for(let w of v){let N=w;if(w.isSymbolicLink()){if(!(i&&(N=w.realpathSync())))continue;N.isUnknown()&&N.lstatSync()}N.shouldWalk(u,s)&&f.push(N)}}g&&!l.flowing&&l.once("drain",h)};return h(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[l1](r)}},Ys=class extends Ig{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,Zs.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return Zs.win32.parse(e).root.toUpperCase()}newRoot(e){return new Ag(this.rootPath,Xn,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},Xs=class extends Ig{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,Zs.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Dg(this.rootPath,Xn,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},uu=class extends Xs{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},y2e=process.platform==="win32"?Ag:Dg,u1=process.platform==="win32"?Ys:process.platform==="darwin"?uu:Xs;var p1=require("url");var GQ=t=>t.length>=1,KQ=t=>t.length>=1,Js=class t{#e;#r;#o;length;#n;#a;#S;#l;#p;#c;#s=!0;constructor(e,r,n,i){if(!GQ(e))throw new TypeError("empty pattern list");if(!KQ(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#r=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,s,l,u,...f]=this.#e,[d,h,g,x,...v]=this.#r;f[0]===""&&(f.shift(),v.shift());let w=[o,s,l,u,""].join("/"),N=[d,h,g,x,""].join("/");this.#e=[w,...f],this.#r=[N,...v],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...s]=this.#e,[l,...u]=this.#r;s[0]===""&&(s.shift(),u.shift());let f=o+"/",d=l+"/";this.#e=[f,...s],this.#r=[d,...u],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Ot}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#r[0]+this.#r.slice(1).join("/"):this.#r.join("/"):this.#r.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new t(this.#e,this.#r,this.#o+1,this.#n),this.#a.#c=this.#c,this.#a.#p=this.#p,this.#a.#l=this.#l,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#p!==void 0?this.#p:this.#p=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#c!==void 0?this.#c:this.#c=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#s)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#s?!1:(this.#s=!1,!0)}};var QQ=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",pu=class{relative;relativeChildren;absolute;absoluteChildren;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:s=QQ}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[];let l={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(let u of e){let f=new Vr(u,l);for(let d=0;d<f.set.length;d++){let h=f.set[d],g=f.globParts[d];if(!h||!g)throw new Error("invalid pattern object");let x=new Js(h,g,0,s),v=new Vr(x.globString(),l),w=g[g.length-1]==="**",N=x.isAbsolute();N?this.absolute.push(v):this.relative.push(v),w&&(N?this.absoluteChildren.push(v):this.relativeChildren.push(v))}}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let s of this.relative)if(s.match(i)||s.match(o))return!0;for(let s of this.absolute)if(s.match(r)||s.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var Sv=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},vv=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},bv=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},fu=class t{hasWalkedCache;matches=new vv;subwalks=new bv;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Sv}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let s=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(s){i=i.resolve(s==="/"&&this.opts.root!==void 0?this.opts.root:s);let h=o.rest();if(h)o=h;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let u,f,d=!1;for(;typeof(u=o.pattern())=="string"&&(f=o.rest());)i=i.resolve(u),o=f,d=!0;if(u=o.pattern(),f=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof u=="string"){let h=u===".."||u===""||u===".";this.matches.add(i.resolve(u),l,h);continue}else if(u===Ot){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let h=f?.pattern(),g=f?.rest();if(!f||(h===""||h===".")&&!g)this.matches.add(i,l,h===""||h===".");else if(h===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,l,!0)}}else u instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let s of n){let l=s.isAbsolute(),u=s.pattern(),f=s.rest();u===Ot?i.testGlobstar(o,s,f,l):u instanceof RegExp?i.testRegExp(o,u,f,l):i.testString(o,u,f,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let s=e.parent||e;this.subwalks.add(s,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var ZQ=(t,e)=>typeof t=="string"?new pu([t],e):Array.isArray(t)?new pu(t,e):t,Fg=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#r;#o;signal;maxDepth;constructor(e,r,n){this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",n.ignore&&(this.#r=ZQ(n.ignore,n)),this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#r?.ignored?.(e)}#a(e){return!!this.#r?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat;return this.matchCheckTest(i?await e.lstat():e,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat;return this.matchCheckTest(i?e.lstatSync():e,r)}matchFinish(e,r){if(this.#n(e))return;let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),s=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?s+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new fu(this.opts),n)}walkCB2(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,f]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,f).then(()=>s()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirCached();l.calledReaddir()?this.walkCB3(l,u,n,s):l.readdirCB((f,d)=>this.walkCB3(l,d,n,s),!0)}s()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,f]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,f).then(()=>s()));for(let[l,u]of n.subwalks.entries())o++,this.walkCB2(l,u,n.child(),s);s()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new fu(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,f]of n.matches.entries())this.#n(l)||this.matchSync(l,u,f);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirSync();this.walkCB3Sync(l,u,n,s)}s()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,f]of n.matches.entries())this.#n(l)||this.matchSync(l,u,f);for(let[l,u]of n.subwalks.entries())o++,this.walkCB2Sync(l,u,n.child(),s);s()}},du=class extends Fg{matches;constructor(e,r,n){super(e,r,n),this.matches=new Set}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},mu=class extends Fg{results;constructor(e,r,n){super(e,r,n),this.results=new xo({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var YQ=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Fn=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,p1.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(u=>u.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(u=>u.includes("/")?u:`./**/${u}`)}if(this.pattern=e,this.platform=r.platform||YQ,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let u=r.platform==="win32"?Ys:r.platform==="darwin"?uu:r.platform?Xs:u1;this.scurry=new u(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(u=>new Vr(u,i)),[s,l]=o.reduce((u,f)=>(u[0].push(...f.set),u[1].push(...f.globParts),u),[[],[]]);this.patterns=s.map((u,f)=>{let d=l[f];if(!d)throw new Error("invalid pattern object");return new Js(u,d,0,this.platform)})}async walk(){return[...await new du(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new du(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new mu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new mu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var wv=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Vr(r,e).hasMagic())return!0;return!1};function Cg(t,e={}){return new Fn(t,e).streamSync()}function d1(t,e={}){return new Fn(t,e).stream()}function m1(t,e={}){return new Fn(t,e).walkSync()}async function f1(t,e={}){return new Fn(t,e).walk()}function Ng(t,e={}){return new Fn(t,e).iterateSync()}function h1(t,e={}){return new Fn(t,e).iterate()}var XQ=Cg,JQ=Object.assign(d1,{sync:Cg}),eZ=Ng,tZ=Object.assign(h1,{sync:Ng}),rZ=Object.assign(m1,{stream:Cg,iterate:Ng}),_v=Object.assign(f1,{glob:f1,globSync:m1,sync:rZ,globStream:d1,stream:JQ,globStreamSync:Cg,streamSync:XQ,globIterate:h1,iterate:tZ,globIterateSync:Ng,iterateSync:eZ,Glob:Fn,hasMagic:wv,escape:qs,unescape:An});_v.glob=_v;function g1(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var R1=Object.defineProperty,oZ=Object.getOwnPropertyNames,F=(t,e)=>R1(t,"name",{value:e,configurable:!0}),aZ=(t,e)=>function(){return e||(0,t[oZ(t)[0]])((e={exports:{}}).exports,e),e.exports},Wv=(t,e)=>{for(var r in e)R1(t,r,{get:e[r],enumerable:!0})},sZ=aZ({"(disabled):util"(){}}),Og={};Wv(Og,{addChainableMethod:()=>Jv,addLengthGuard:()=>Tu,addMethod:()=>Zv,addProperty:()=>Qv,checkError:()=>Wr,compareByInspect:()=>Bg,eql:()=>X1,expectTypes:()=>F1,flag:()=>_e,getActual:()=>$g,getMessage:()=>jv,getName:()=>qg,getOperator:()=>nb,getOwnEnumerableProperties:()=>rb,getOwnEnumerablePropertySymbols:()=>tb,getPathInfo:()=>Kv,hasProperty:()=>jg,inspect:()=>Ce,isNaN:()=>Wg,isProxyEnabled:()=>xu,objDisplay:()=>pa,overwriteChainableMethod:()=>eb,overwriteMethod:()=>Xv,overwriteProperty:()=>Yv,proxify:()=>nc,test:()=>Hv,transferFlags:()=>Cn,type:()=>Qe});var Wr={};Wv(Wr,{compatibleConstructor:()=>M1,compatibleInstance:()=>k1,compatibleMessage:()=>P1,getConstructorName:()=>A1,getMessage:()=>D1});function k1(t,e){return e instanceof Error&&t===e}F(k1,"compatibleInstance");function M1(t,e){return e instanceof Error?t.constructor===e.constructor||t instanceof e.constructor:e.prototype instanceof Error||e===Error?t.constructor===e||t instanceof e:!1}F(M1,"compatibleConstructor");function P1(t,e){let r=typeof t=="string"?t:t.message;return e instanceof RegExp?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}F(P1,"compatibleMessage");function A1(t){let e=t;return t instanceof Error?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}F(A1,"getConstructorName");function D1(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}F(D1,"getMessage");function _e(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}F(_e,"flag");function Hv(t,e){var r=_e(t,"negate"),n=e[0];return r?!n:n}F(Hv,"test");function Qe(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}F(Qe,"type");var cZ="captureStackTrace"in Error,qe=class I1 extends Error{static{F(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,cZ&&Error.captureStackTrace(this,n||I1);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function F1(t,e){var r=_e(t,"message"),n=_e(t,"ssfi");r=r?r+": ":"",t=_e(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();var i=e.map(function(s,l){var u=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a",f=e.length>1&&l===e.length-1?"or ":"";return f+u+" "+s}).join(", "),o=Qe(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new qe(r+"object tested must be "+i+", but "+o+" given",void 0,n)}F(F1,"expectTypes");function $g(t,e){return e.length>4?e[4]:t._obj}F($g,"getActual");var y1={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},lZ={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},tc="\u2026";function C1(t,e){let r=y1[lZ[e]]||y1[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}F(C1,"colorise");function N1({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:l=[],truncate:u=1/0,stylize:f=String}={},d){let h={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(u),seen:l,inspect:d,stylize:f};return h.colors&&(h.stylize=C1),h}F(N1,"normaliseOptions");function Di(t,e,r=tc){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}F(Di,"truncate");function fn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",l="",u="";for(let f=0;f<i;f+=1){let d=f+1===t.length,h=f+2===t.length;u=`${tc}(${t.length-f})`;let g=t[f];e.truncate=o-s.length-(d?0:n.length);let x=l||r(g,e)+(d?"":n),v=s.length+x.length,w=v+u.length;if(d&&v>o&&s.length+u.length<=o||!d&&!h&&w>o||(l=d?"":r(t[f+1],e)+(h?"":n),!d&&h&&w>o&&v+l.length>o))break;if(s+=x,!d&&!h&&v+l.length>=o){u=`${tc}(${t.length-f-1})`;break}u=""}return`${s}${u}`}F(fn,"inspectList");function O1(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}F(O1,"quoteComplexKey");function rc([t,e],r){return r.truncate-=2,typeof t=="string"?t=O1(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}F(rc,"inspectProperty");function L1(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=fn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=fn(r.map(o=>[o,t[o]]),e,rc)),`[ ${n}${i?`, ${i}`:""} ]`}F(L1,"inspectArray");var uZ=F(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function ei(t,e){let r=uZ(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let s=0;s<t.length;s++){let l=`${e.stylize(Di(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=l.length,t[s]!==t.length&&e.truncate<=3){i+=`${tc}(${t.length-t[s]+1})`;break}i+=l}let o="";return n.length&&(o=fn(n.map(s=>[s,t[s]]),e,rc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}F(ei,"inspectTypedArray");function U1(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Di(n[1],e.truncate-i.length-1)}`,"date")}F(U1,"inspectDate");function kv(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Di(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}F(kv,"inspectFunction");function V1([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}F(V1,"inspectMapEntry");function B1(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}F(B1,"mapToEntries");function W1(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${fn(B1(t),e,V1)} }`)}F(W1,"inspectMap");var pZ=Number.isNaN||(t=>t!==t);function Mv(t,e){return pZ(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Di(String(t),e.truncate),"number")}F(Mv,"inspectNumber");function Pv(t,e){let r=Di(t.toString(),e.truncate-1);return r!==tc&&(r+="n"),e.stylize(r,"bigint")}F(Pv,"inspectBigInt");function H1(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Di(i,n)}/${r}`,"regexp")}F(H1,"inspectRegExp");function $1(t){let e=[];return t.forEach(r=>{e.push(r)}),e}F($1,"arrayFromSet");function j1(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${fn($1(t),e)} }`)}F(j1,"inspectSet");var x1=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),fZ={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},dZ=16,mZ=4;function q1(t){return fZ[t]||`\\u${`0000${t.charCodeAt(0).toString(dZ)}`.slice(-mZ)}`}F(q1,"escape");function Av(t,e){return x1.test(t)&&(t=t.replace(x1,q1)),e.stylize(`'${Di(t,e.truncate-2)}'`,"string")}F(Av,"inspectString");function Dv(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}F(Dv,"inspectSymbol");var z1=F(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(z1=F((n,i)=>{let[o,s]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(s,i)}}`},"getPromiseValue"))}catch{}var hZ=z1;function gu(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=fn(r.map(l=>[l,t[l]]),e,rc),o=fn(n.map(l=>[l,t[l]]),e,rc);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}F(gu,"inspectObject");var Ev=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function G1(t,e){let r="";return Ev&&Ev in t&&(r=t[Ev]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${gu(t,e)}`}F(G1,"inspectClass");function K1(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${fn(t,e)} ]`)}F(K1,"inspectArguments");var gZ=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function Q1(t,e){let r=Object.getOwnPropertyNames(t).filter(s=>gZ.indexOf(s)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=Di(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=fn(r.map(s=>[s,t[s]]),e,rc);return`${n}${i}${o?` { ${o} }`:""}`}F(Q1,"inspectObject");function Z1([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}F(Z1,"inspectAttribute");function Lg(t,e){return fn(t,e,$v,`
`)}F(Lg,"inspectHTMLCollection");function $v(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=fn(r.map(d=>[d,t.getAttribute(d)]),e,Z1," ")),e.truncate-=l.length;let u=e.truncate,f=Lg(t.children,e);return f&&f.length>u&&(f=`${tc}(${t.children.length})`),`${i}${l}${o}${f}${s}`}F($v,"inspectHTML");var yZ=typeof Symbol=="function"&&typeof Symbol.for=="function",Rv=yZ?Symbol.for("chai/inspect"):"@@chai/inspect",ec=!1;try{let t=sZ();ec=t.inspect?t.inspect.custom:!1}catch{ec=!1}var T1=new WeakMap,S1={},v1={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:Mv,Number:Mv,bigint:Pv,BigInt:Pv,string:Av,String:Av,function:kv,Function:kv,symbol:Dv,Symbol:Dv,Array:L1,Date:U1,Map:W1,Set:j1,RegExp:H1,Promise:hZ,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:K1,Int8Array:ei,Uint8Array:ei,Uint8ClampedArray:ei,Int16Array:ei,Uint16Array:ei,Int32Array:ei,Uint32Array:ei,Float32Array:ei,Float64Array:ei,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:Q1,HTMLCollection:Lg,NodeList:Lg},xZ=F((t,e,r)=>Rv in t&&typeof t[Rv]=="function"?t[Rv](e):ec&&ec in t&&typeof t[ec]=="function"?t[ec](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&T1.has(t.constructor)?T1.get(t.constructor)(t,e):S1[r]?S1[r](t,e):"","inspectCustom"),TZ=Object.prototype.toString;function Ug(t,e={}){let r=N1(e,Ug),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=TZ.call(t).slice(8,-1)),i in v1)return v1[i](t,r);if(n&&t){let s=xZ(t,r,i);if(s)return typeof s=="string"?s:Ug(s,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?gu(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?$v(t,r):"constructor"in t?t.constructor!==Object?G1(t,r):gu(t,r):t===Object(t)?gu(t,r):r.stylize(String(t),i)}F(Ug,"inspect");var br={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Ce(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:br.truncateThreshold?br.truncateThreshold:1/0};return Ug(t,i)}F(Ce,"inspect");function pa(t){var e=Ce(t),r=Object.prototype.toString.call(t);if(br.truncateThreshold&&e.length>=br.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}F(pa,"objDisplay");function jv(t,e){var r=_e(t,"negate"),n=_e(t,"object"),i=e[3],o=$g(t,e),s=r?e[2]:e[1],l=_e(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return pa(n)}).replace(/#\{act\}/g,function(){return pa(o)}).replace(/#\{exp\}/g,function(){return pa(i)}),l?l+": "+s:s}F(jv,"getMessage");function Cn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}F(Cn,"transferFlags");function Iv(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}F(Iv,"type");function qv(){this._key="chai/deep-eql__"+Math.random()+Date.now()}F(qv,"FakeMap");qv.prototype={get:F(function(e){return e[this._key]},"get"),set:F(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var Y1=typeof WeakMap=="function"?WeakMap:qv;function Fv(t,e,r){if(!r||fa(t)||fa(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}F(Fv,"memoizeCompare");function hu(t,e,r,n){if(!(!r||fa(t)||fa(e))){var i=r.get(t);i?i.set(e,n):(i=new Y1,i.set(e,n),r.set(t,i))}}F(hu,"memoizeSet");var X1=yu;function yu(t,e,r){if(r&&r.comparator)return Cv(t,e,r);var n=zv(t,e);return n!==null?n:Cv(t,e,r)}F(yu,"deepEqual");function zv(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:fa(t)||fa(e)?!1:null}F(zv,"simpleEqual");function Cv(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new Y1;var n=r&&r.comparator,i=Fv(t,e,r.memoize);if(i!==null)return i;var o=Fv(e,t,r.memoize);if(o!==null)return o;if(n){var s=n(t,e);if(s===!1||s===!0)return hu(t,e,r.memoize,s),s;var l=zv(t,e);if(l!==null)return l}var u=Iv(t);if(u!==Iv(e))return hu(t,e,r.memoize,!1),!1;hu(t,e,r.memoize,!0);var f=J1(t,e,u,r);return hu(t,e,r.memoize,f),f}F(Cv,"extensiveDeepEqual");function J1(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return yu(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return Gv(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return So(t,e,n);case"RegExp":return eF(t,e);case"Generator":return tF(t,e,n);case"DataView":return So(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return So(new Uint8Array(t),new Uint8Array(e),n);case"Set":return Nv(t,e,n);case"Map":return Nv(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return nF(t,e,n)}}F(J1,"extensiveDeepEqualByType");function eF(t,e){return t.toString()===e.toString()}F(eF,"regexpEqual");function Nv(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(F(function(s,l){n.push([s,l])},"gatherEntries")),e.forEach(F(function(s,l){i.push([s,l])},"gatherEntries")),So(n.sort(),i.sort(),r)}F(Nv,"entriesEqual");function So(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(yu(t[i],e[i],r)===!1)return!1;return!0}F(So,"iterableEqual");function tF(t,e,r){return So(Vg(t),Vg(e),r)}F(tF,"generatorEqual");function rF(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}F(rF,"hasIteratorFunction");function Ov(t){if(rF(t))try{return Vg(t[Symbol.iterator]())}catch{return[]}return[]}F(Ov,"getIteratorEntries");function Vg(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}F(Vg,"getGeneratorEntries");function Lv(t){var e=[];for(var r in t)e.push(r);return e}F(Lv,"getEnumerableKeys");function Uv(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}F(Uv,"getEnumerableSymbols");function Gv(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(yu(t[r[o]],e[r[o]],n)===!1)return!1;return!0}F(Gv,"keysEqual");function nF(t,e,r){var n=Lv(t),i=Lv(e),o=Uv(t),s=Uv(e);if(n=n.concat(o),i=i.concat(s),n.length&&n.length===i.length)return So(Vv(n).sort(),Vv(i).sort())===!1?!1:Gv(t,e,n,r);var l=Ov(t),u=Ov(e);return l.length&&l.length===u.length?(l.sort(),u.sort(),So(l,u,r)):n.length===0&&l.length===0&&i.length===0&&u.length===0}F(nF,"objectEqual");function fa(t){return t===null||typeof t!="object"}F(fa,"isPrimitive");function Vv(t){return t.map(F(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}F(Vv,"mapSymbols");function jg(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}F(jg,"hasProperty");function iF(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),s=null;return o?s={i:parseFloat(o[1])}:s={p:n.replace(/\\([.[\]])/g,"$1")},s})}F(iF,"parsePath");function Bv(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let s=e[o];n&&(typeof s.p>"u"?n=n[s.i]:n=n[s.p],o===r-1&&(i=n))}return i}F(Bv,"internalGetPathValue");function Kv(t,e){let r=iF(e),n=r[r.length-1],i={parent:r.length>1?Bv(t,r,r.length-1):t,name:n.p||n.i,value:Bv(t,r)};return i.exists=jg(i.parent,i.name),i}F(Kv,"getPathInfo");function _(t,e,r,n){return _e(this,"ssfi",r||_),_e(this,"lockSsfi",n),_e(this,"object",t),_e(this,"message",e),_e(this,"eql",br.deepEqual||X1),nc(this)}F(_,"Assertion");Object.defineProperty(_,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),br.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),br.includeStack=t}});Object.defineProperty(_,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),br.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),br.showDiff=t}});_.addProperty=function(t,e){Qv(this.prototype,t,e)};_.addMethod=function(t,e){Zv(this.prototype,t,e)};_.addChainableMethod=function(t,e,r){Jv(this.prototype,t,e,r)};_.overwriteProperty=function(t,e){Yv(this.prototype,t,e)};_.overwriteMethod=function(t,e){Xv(this.prototype,t,e)};_.overwriteChainableMethod=function(t,e,r){eb(this.prototype,t,e,r)};_.prototype.assert=function(t,e,r,n,i,o){var s=Hv(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),br.showDiff!==!0&&(o=!1),!s){e=jv(this,arguments);var l=$g(this,arguments),u={actual:l,expected:n,showDiff:o},f=nb(this,arguments);throw f&&(u.operator=f),new qe(e,u,br.includeStack?this.assert:_e(this,"ssfi"))}};Object.defineProperty(_.prototype,"_obj",{get:function(){return _e(this,"object")},set:function(t){_e(this,"object",t)}});function xu(){return br.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}F(xu,"isProxyEnabled");function Qv(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:F(function n(){!xu()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new _;return Cn(this,o),o},"propertyGetter"),configurable:!0})}F(Qv,"addProperty");var SZ=Object.getOwnPropertyDescriptor(function(){},"length");function Tu(t,e,r){return SZ.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}F(Tu,"addLengthGuard");function oF(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}F(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}F(oF,"getProperties");var b1=["__flags","__methods","_obj","assert"];function nc(t,e){return xu()?new Proxy(t,{get:F(function r(n,i){if(typeof i=="string"&&br.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,s=4;throw oF(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&b1.indexOf(l)===-1){var u=aF(i,l,s);u<s&&(o=l,s=u)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return b1.indexOf(i)===-1&&!_e(n,"lockSsfi")&&_e(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}F(nc,"proxify");function aF(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var s=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(s===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}F(aF,"stringDistanceCapped");function Zv(t,e,r){var n=F(function(){_e(this,"lockSsfi")||_e(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new _;return Cn(this,o),o},"methodWrapper");Tu(n,e,!1),t[e]=nc(n,e)}F(Zv,"addMethod");function Yv(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=F(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:F(function o(){!xu()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",o);var s=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).call(this);if(_e(this,"lockSsfi",s),l!==void 0)return l;var u=new _;return Cn(this,u),u},"overwritingPropertyGetter"),configurable:!0})}F(Yv,"overwriteProperty");function Xv(t,e,r){var n=t[e],i=F(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=F(function(){_e(this,"lockSsfi")||_e(this,"ssfi",o);var s=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(_e(this,"lockSsfi",s),l!==void 0)return l;var u=new _;return Cn(this,u),u},"overwritingMethodWrapper");Tu(o,e,!1),t[e]=nc(o,e)}F(Xv,"overwriteMethod");var vZ=typeof Object.setPrototypeOf=="function",w1=F(function(){},"testFn"),bZ=Object.getOwnPropertyNames(w1).filter(function(t){var e=Object.getOwnPropertyDescriptor(w1,t);return typeof e!="object"?!0:!e.configurable}),wZ=Function.prototype.call,_Z=Function.prototype.apply;function Jv(t,e,r,n){typeof n!="function"&&(n=F(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:F(function(){i.chainingBehavior.call(this);var s=F(function(){_e(this,"lockSsfi")||_e(this,"ssfi",s);var f=i.method.apply(this,arguments);if(f!==void 0)return f;var d=new _;return Cn(this,d),d},"chainableMethodWrapper");if(Tu(s,e,!0),vZ){var l=Object.create(this);l.call=wZ,l.apply=_Z,Object.setPrototypeOf(s,l)}else{var u=Object.getOwnPropertyNames(t);u.forEach(function(f){if(bZ.indexOf(f)===-1){var d=Object.getOwnPropertyDescriptor(t,f);Object.defineProperty(s,f,d)}})}return Cn(this,s),nc(s)},"chainableMethodGetter"),configurable:!0})}F(Jv,"addChainableMethod");function eb(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=F(function(){var u=n(o).call(this);if(u!==void 0)return u;var f=new _;return Cn(this,f),f},"overwritingChainableMethodGetter");var s=i.method;i.method=F(function(){var u=r(s).apply(this,arguments);if(u!==void 0)return u;var f=new _;return Cn(this,f),f},"overwritingChainableMethodWrapper")}F(eb,"overwriteChainableMethod");function Bg(t,e){return Ce(t)<Ce(e)?-1:1}F(Bg,"compareByInspect");function tb(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}F(tb,"getOwnEnumerablePropertySymbols");function rb(t){return Object.keys(t).concat(tb(t))}F(rb,"getOwnEnumerableProperties");function sF(t){return t!==t}F(sF,"_isNaN");var Wg=Number.isNaN||sF;function cF(t){var e=Qe(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}F(cF,"isObjectType");function nb(t,e){var r=_e(t,"operator"),n=_e(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var s=cF(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}}F(nb,"getOperator");function qg(t){return t.name}F(qg,"getName");var{flag:M}=Og;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){_.addProperty(t)});_.addProperty("not",function(){M(this,"negate",!0)});_.addProperty("deep",function(){M(this,"deep",!0)});_.addProperty("nested",function(){M(this,"nested",!0)});_.addProperty("own",function(){M(this,"own",!0)});_.addProperty("ordered",function(){M(this,"ordered",!0)});_.addProperty("any",function(){M(this,"any",!0),M(this,"all",!1)});_.addProperty("all",function(){M(this,"all",!0),M(this,"any",!1)});var _1={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function ib(t,e){e&&M(this,"message",e),t=t.toLowerCase();var r=M(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Qe(r).toLowerCase();_1.function.includes(t)?this.assert(_1[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}F(ib,"an");_.addChainableMethod("an",ib);_.addChainableMethod("a",ib);function lF(t,e){return Wg(t)&&Wg(e)||t===e}F(lF,"SameValueZero");function Su(){M(this,"contains",!0)}F(Su,"includeChainingBehavior");function vu(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=Qe(r).toLowerCase(),i=M(this,"message"),o=M(this,"negate"),s=M(this,"ssfi"),l=M(this,"deep"),u=l?"deep ":"",f=l?M(this,"eql"):lF;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new qe(i+"unable to use .deep.include with WeakSet",void 0,s);d=r.has(t);break;case"map":r.forEach(function(v){d=d||f(v,t)});break;case"set":l?r.forEach(function(v){d=d||f(v,t)}):d=r.has(t);break;case"array":l?d=r.some(function(v){return f(v,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new qe(i+"the given combination of arguments ("+n+" and "+Qe(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Qe(t).toLowerCase(),void 0,s);var h=Object.keys(t),g=null,x=0;if(h.forEach(function(v){var w=new _(r);if(Cn(this,w,!0),M(w,"lockSsfi",!0),!o||h.length===1){w.property(v,t[v]);return}try{w.property(v,t[v])}catch(N){if(!Wr.compatibleConstructor(N,qe))throw N;g===null&&(g=N),x++}},this),o&&h.length>1&&x===h.length)throw g;return}this.assert(d,"expected #{this} to "+u+"include "+Ce(t),"expected #{this} to not "+u+"include "+Ce(t))}F(vu,"include");_.addChainableMethod("include",vu,Su);_.addChainableMethod("contain",vu,Su);_.addChainableMethod("contains",vu,Su);_.addChainableMethod("includes",vu,Su);_.addProperty("ok",function(){this.assert(M(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});_.addProperty("true",function(){this.assert(M(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!M(this,"negate"))});_.addProperty("callable",function(){let t=M(this,"object"),e=M(this,"ssfi"),r=M(this,"message"),n=r?`${r}: `:"",i=M(this,"negate"),o=i?`${n}expected ${Ce(t)} not to be a callable function`:`${n}expected ${Ce(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Qe(t));if(s&&i||!s&&!i)throw new qe(o,void 0,e)});_.addProperty("false",function(){this.assert(M(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!M(this,"negate"))});_.addProperty("null",function(){this.assert(M(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});_.addProperty("undefined",function(){this.assert(M(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});_.addProperty("NaN",function(){this.assert(Wg(M(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function ob(){var t=M(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}F(ob,"assertExist");_.addProperty("exist",ob);_.addProperty("exists",ob);_.addProperty("empty",function(){var t=M(this,"object"),e=M(this,"ssfi"),r=M(this,"message"),n;switch(r=r?r+": ":"",Qe(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new qe(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+qg(t);throw new qe(i.trim(),void 0,e);default:if(t!==Object(t))throw new qe(r+".empty was passed non-string primitive "+Ce(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function ab(){var t=M(this,"object"),e=Qe(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}F(ab,"checkArguments");_.addProperty("arguments",ab);_.addProperty("Arguments",ab);function zg(t,e){e&&M(this,"message",e);var r=M(this,"object");if(M(this,"deep")){var n=M(this,"lockSsfi");M(this,"lockSsfi",!0),this.eql(t),M(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}F(zg,"assertEqual");_.addMethod("equal",zg);_.addMethod("equals",zg);_.addMethod("eq",zg);function sb(t,e){e&&M(this,"message",e);var r=M(this,"eql");this.assert(r(t,M(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}F(sb,"assertEql");_.addMethod("eql",sb);_.addMethod("eqls",sb);function Gg(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=Qe(r).toLowerCase(),u=Qe(t).toLowerCase(),f,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")f=o+"the argument to above must be a date";else if(u!=="number"&&(n||l==="number"))f=o+"the argument to above must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;f=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new qe(f,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}F(Gg,"assertAbove");_.addMethod("above",Gg);_.addMethod("gt",Gg);_.addMethod("greaterThan",Gg);function Kg(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=Qe(r).toLowerCase(),u=Qe(t).toLowerCase(),f,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")f=o+"the argument to least must be a date";else if(u!=="number"&&(n||l==="number"))f=o+"the argument to least must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;f=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new qe(f,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}F(Kg,"assertLeast");_.addMethod("least",Kg);_.addMethod("gte",Kg);_.addMethod("greaterThanOrEqual",Kg);function Qg(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=Qe(r).toLowerCase(),u=Qe(t).toLowerCase(),f,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")f=o+"the argument to below must be a date";else if(u!=="number"&&(n||l==="number"))f=o+"the argument to below must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;f=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new qe(f,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}F(Qg,"assertBelow");_.addMethod("below",Qg);_.addMethod("lt",Qg);_.addMethod("lessThan",Qg);function Zg(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=Qe(r).toLowerCase(),u=Qe(t).toLowerCase(),f,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")f=o+"the argument to most must be a date";else if(u!=="number"&&(n||l==="number"))f=o+"the argument to most must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;f=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new qe(f,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}F(Zg,"assertMost");_.addMethod("most",Zg);_.addMethod("lte",Zg);_.addMethod("lessThanOrEqual",Zg);_.addMethod("within",function(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"doLength"),o=M(this,"message"),s=o?o+": ":"",l=M(this,"ssfi"),u=Qe(n).toLowerCase(),f=Qe(t).toLowerCase(),d=Qe(e).toLowerCase(),h,g=!0,x=f==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&u!=="map"&&u!=="set"&&new _(n,o,l,!0).to.have.property("length"),!i&&u==="date"&&(f!=="date"||d!=="date"))h=s+"the arguments to within must be dates";else if((f!=="number"||d!=="number")&&(i||u==="number"))h=s+"the arguments to within must be numbers";else if(!i&&u!=="date"&&u!=="number"){var v=u==="string"?"'"+n+"'":n;h=s+"expected "+v+" to be a number or a date"}else g=!1;if(g)throw new qe(h,void 0,l);if(i){var w="length",N;u==="map"||u==="set"?(w="size",N=n.size):N=n.length,this.assert(N>=t&&N<=e,"expected #{this} to have a "+w+" within "+x,"expected #{this} to not have a "+w+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function cb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"ssfi"),i=M(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new qe(i+"The instanceof assertion needs a constructor but "+Qe(t)+" was given.",void 0,n)):l}var s=qg(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}F(cb,"assertInstanceOf");_.addMethod("instanceof",cb);_.addMethod("instanceOf",cb);function lb(t,e,r){r&&M(this,"message",r);var n=M(this,"nested"),i=M(this,"own"),o=M(this,"message"),s=M(this,"object"),l=M(this,"ssfi"),u=typeof t;if(o=o?o+": ":"",n){if(u!=="string")throw new qe(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(u!=="string"&&u!=="number"&&u!=="symbol")throw new qe(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new qe(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(s==null)throw new qe(o+"Target cannot be null or undefined.",void 0,l);var f=M(this,"deep"),d=M(this,"negate"),h=n?Kv(s,t):null,g=n?h.value:s[t],x=f?M(this,"eql"):(N,A)=>N===A,v="";f&&(v+="deep "),i&&(v+="own "),n&&(v+="nested "),v+="property ";var w;i?w=Object.prototype.hasOwnProperty.call(s,t):n?w=h.exists:w=jg(s,t),(!d||arguments.length===1)&&this.assert(w,"expected #{this} to have "+v+Ce(t),"expected #{this} to not have "+v+Ce(t)),arguments.length>1&&this.assert(w&&x(e,g),"expected #{this} to have "+v+Ce(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+v+Ce(t)+" of #{act}",e,g),M(this,"object",g)}F(lb,"assertProperty");_.addMethod("property",lb);function ub(t,e,r){M(this,"own",!0),lb.apply(this,arguments)}F(ub,"assertOwnProperty");_.addMethod("ownProperty",ub);_.addMethod("haveOwnProperty",ub);function pb(t,e,r){typeof e=="string"&&(r=e,e=null),r&&M(this,"message",r);var n=M(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=M(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Ce(t)+" on #{this} to match "+Ce(e)+", got "+Ce(i),"expected the own property descriptor for "+Ce(t)+" on #{this} to not match "+Ce(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Ce(t),"expected #{this} to not have an own property descriptor for "+Ce(t)),M(this,"object",i)}F(pb,"assertOwnPropertyDescriptor");_.addMethod("ownPropertyDescriptor",pb);_.addMethod("haveOwnPropertyDescriptor",pb);function fb(){M(this,"doLength",!0)}F(fb,"assertLengthChain");function db(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=Qe(r).toLowerCase(),i=M(this,"message"),o=M(this,"ssfi"),s="length",l;switch(n){case"map":case"set":s="size",l=r.size;break;default:new _(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,l)}F(db,"assertLength");_.addChainableMethod("length",db,fb);_.addChainableMethod("lengthOf",db,fb);function mb(t,e){e&&M(this,"message",e);var r=M(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}F(mb,"assertMatch");_.addMethod("match",mb);_.addMethod("matches",mb);_.addMethod("string",function(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi");new _(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Ce(t),"expected #{this} to not contain "+Ce(t))});function hb(t){var e=M(this,"object"),r=Qe(e),n=Qe(t),i=M(this,"ssfi"),o=M(this,"deep"),s,l="",u,f=!0,d=M(this,"message");d=d?d+": ":"";var h=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",u=[],e.forEach(function(U,Z){u.push(Z)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(u=rb(e),n){case"Array":if(arguments.length>1)throw new qe(h,void 0,i);break;case"Object":if(arguments.length>1)throw new qe(h,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(U){return typeof U=="symbol"?U:String(U)})}if(!t.length)throw new qe(d+"keys required",void 0,i);var g=t.length,x=M(this,"any"),v=M(this,"all"),w=t,N=o?M(this,"eql"):(U,Z)=>U===Z;if(!x&&!v&&(v=!0),x&&(f=w.some(function(U){return u.some(function(Z){return N(U,Z)})})),v&&(f=w.every(function(U){return u.some(function(Z){return N(U,Z)})}),M(this,"contains")||(f=f&&t.length==u.length)),g>1){t=t.map(function(U){return Ce(U)});var A=t.pop();v&&(s=t.join(", ")+", and "+A),x&&(s=t.join(", ")+", or "+A)}else s=Ce(t[0]);s=(g>1?"keys ":"key ")+s,s=(M(this,"contains")?"contain ":"have ")+s,this.assert(f,"expected #{this} to "+l+s,"expected #{this} to not "+l+s,w.slice(0).sort(Bg),u.sort(Bg),!0)}F(hb,"assertKeys");_.addMethod("keys",hb);_.addMethod("key",hb);function Yg(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"ssfi"),o=M(this,"message"),s=M(this,"negate")||!1;new _(n,o,i,!0).is.a("function"),(t instanceof RegExp||typeof t=="string")&&(e=t,t=null);var l;try{n()}catch(A){l=A}var u=t===void 0&&e===void 0,f=!!(t&&e),d=!1,h=!1;if(u||!u&&!s){var g="an error";t instanceof Error?g="#{exp}":t&&(g=Wr.getConstructorName(t)),this.assert(l,"expected #{this} to throw "+g,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),l instanceof Error?l.toString():typeof l=="string"?l:l&&Wr.getConstructorName(l))}if(t&&l){if(t instanceof Error){var x=Wr.compatibleInstance(l,t);x===s&&(f&&s?d=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!s?" but #{act} was thrown":""),t.toString(),l.toString()))}var v=Wr.compatibleConstructor(l,t);v===s&&(f&&s?d=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Wr.getConstructorName(t),l instanceof Error?l.toString():l&&Wr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var w="including";e instanceof RegExp&&(w="matching");var N=Wr.compatibleMessage(l,e);N===s&&(f&&s?h=!0:this.assert(s,"expected #{this} to throw error "+w+" #{exp} but got #{act}","expected #{this} to throw error not "+w+" #{exp}",e,Wr.getMessage(l)))}d&&h&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Wr.getConstructorName(t),l instanceof Error?l.toString():l&&Wr.getConstructorName(l)),M(this,"object",l)}F(Yg,"assertThrows");_.addMethod("throw",Yg);_.addMethod("throws",Yg);_.addMethod("Throw",Yg);function gb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Ce(t),"expected #{this} to not respond to "+Ce(t))}F(gb,"respondTo");_.addMethod("respondTo",gb);_.addMethod("respondsTo",gb);_.addProperty("itself",function(){M(this,"itself",!0)});function yb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+pa(t),"expected #{this} to not satisfy"+pa(t),!M(this,"negate"),n)}F(yb,"satisfy");_.addMethod("satisfy",yb);_.addMethod("satisfies",yb);function xb(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");if(new _(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var s=e===void 0?", and a delta is required":"";throw new qe(i+"the arguments to closeTo or approximately must be numbers"+s,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}F(xb,"closeTo");_.addMethod("closeTo",xb);_.addMethod("approximately",xb);function uF(t,e,r,n,i){let o=Array.from(e),s=Array.from(t);if(!n){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(l,u){if(i)return r?r(l,o[u]):l===o[u];if(!r){var f=o.indexOf(l);return f===-1?!1:(n||o.splice(f,1),!0)}return o.some(function(d,h){return r(l,d)?(n||o.splice(h,1),!0):!1})})}F(uF,"isSubsetOf");_.addMethod("members",function(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi");new _(r,n,i,!0).to.be.iterable,new _(t,n,i,!0).to.be.iterable;var o=M(this,"contains"),s=M(this,"ordered"),l,u,f;o?(l=s?"an ordered superset":"a superset",u="expected #{this} to be "+l+" of #{exp}",f="expected #{this} to not be "+l+" of #{exp}"):(l=s?"ordered members":"members",u="expected #{this} to have the same "+l+" as #{exp}",f="expected #{this} to not have the same "+l+" as #{exp}");var d=M(this,"deep")?M(this,"eql"):void 0;this.assert(uF(t,r,d,o,s),u,f,t,r,!0)});_.addProperty("iterable",function(t){t&&M(this,"message",t);var e=M(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function pF(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi"),o=M(this,"contains"),s=M(this,"deep"),l=M(this,"eql");new _(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(u){return r.indexOf(u)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):s?this.assert(t.some(function(u){return l(r,u)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}F(pF,"oneOf");_.addMethod("oneOf",pF);function Tb(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","change"),M(this,"realDelta",l!==s),this.assert(s!==l,"expected "+u+" to change","expected "+u+" to not change")}F(Tb,"assertChanges");_.addMethod("change",Tb);_.addMethod("changes",Tb);function Sb(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),new _(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","increase"),M(this,"realDelta",l-s),this.assert(l-s>0,"expected "+u+" to increase","expected "+u+" to not increase")}F(Sb,"assertIncreases");_.addMethod("increase",Sb);_.addMethod("increases",Sb);function vb(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),new _(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","decrease"),M(this,"realDelta",s-l),this.assert(l-s<0,"expected "+u+" to decrease","expected "+u+" to not decrease")}F(vb,"assertDecreases");_.addMethod("decrease",vb);_.addMethod("decreases",vb);function fF(t,e){e&&M(this,"message",e);var r=M(this,"deltaMsgObj"),n=M(this,"initialDeltaValue"),i=M(this,"finalDeltaValue"),o=M(this,"deltaBehavior"),s=M(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=s===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}F(fF,"assertDelta");_.addMethod("by",fF);_.addProperty("extensible",function(){var t=M(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});_.addProperty("sealed",function(){var t=M(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});_.addProperty("frozen",function(){var t=M(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});_.addProperty("finite",function(t){var e=M(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function Hg(t,e){return new _(t,e)}F(Hg,"expect");Hg.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new qe(r,{actual:t,expected:e,operator:n},Hg.fail)};var dF={};Wv(dF,{Should:()=>RZ,should:()=>EZ});function bb(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new _(this.valueOf(),null,t):new _(this,null,t)}F(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}F(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new qe(o,{actual:n,expected:i,operator:s},r.fail)},r.equal=function(n,i,o){new _(n,o).to.equal(i)},r.Throw=function(n,i,o,s){new _(n,s).to.Throw(i,o)},r.exist=function(n,i){new _(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new _(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,s){new _(n,s).to.not.Throw(i,o)},r.not.exist=function(n,i){new _(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}F(bb,"loadShould");var EZ=bb,RZ=bb;function b(t,e){var r=new _(null,null,b,!0);r.assert(t,e,"[ negation message unavailable ]")}F(b,"assert");b.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new qe(r,{actual:t,expected:e,operator:n},b.fail)};b.isOk=function(t,e){new _(t,e,b.isOk,!0).is.ok};b.isNotOk=function(t,e){new _(t,e,b.isNotOk,!0).is.not.ok};b.equal=function(t,e,r){var n=new _(t,r,b.equal,!0);n.assert(e==_e(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};b.notEqual=function(t,e,r){var n=new _(t,r,b.notEqual,!0);n.assert(e!=_e(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};b.strictEqual=function(t,e,r){new _(t,r,b.strictEqual,!0).to.equal(e)};b.notStrictEqual=function(t,e,r){new _(t,r,b.notStrictEqual,!0).to.not.equal(e)};b.deepEqual=b.deepStrictEqual=function(t,e,r){new _(t,r,b.deepEqual,!0).to.eql(e)};b.notDeepEqual=function(t,e,r){new _(t,r,b.notDeepEqual,!0).to.not.eql(e)};b.isAbove=function(t,e,r){new _(t,r,b.isAbove,!0).to.be.above(e)};b.isAtLeast=function(t,e,r){new _(t,r,b.isAtLeast,!0).to.be.least(e)};b.isBelow=function(t,e,r){new _(t,r,b.isBelow,!0).to.be.below(e)};b.isAtMost=function(t,e,r){new _(t,r,b.isAtMost,!0).to.be.most(e)};b.isTrue=function(t,e){new _(t,e,b.isTrue,!0).is.true};b.isNotTrue=function(t,e){new _(t,e,b.isNotTrue,!0).to.not.equal(!0)};b.isFalse=function(t,e){new _(t,e,b.isFalse,!0).is.false};b.isNotFalse=function(t,e){new _(t,e,b.isNotFalse,!0).to.not.equal(!1)};b.isNull=function(t,e){new _(t,e,b.isNull,!0).to.equal(null)};b.isNotNull=function(t,e){new _(t,e,b.isNotNull,!0).to.not.equal(null)};b.isNaN=function(t,e){new _(t,e,b.isNaN,!0).to.be.NaN};b.isNotNaN=function(t,e){new _(t,e,b.isNotNaN,!0).not.to.be.NaN};b.exists=function(t,e){new _(t,e,b.exists,!0).to.exist};b.notExists=function(t,e){new _(t,e,b.notExists,!0).to.not.exist};b.isUndefined=function(t,e){new _(t,e,b.isUndefined,!0).to.equal(void 0)};b.isDefined=function(t,e){new _(t,e,b.isDefined,!0).to.not.equal(void 0)};b.isCallable=function(t,e){new _(t,e,b.isCallable,!0).is.callable};b.isNotCallable=function(t,e){new _(t,e,b.isNotCallable,!0).is.not.callable};b.isObject=function(t,e){new _(t,e,b.isObject,!0).to.be.a("object")};b.isNotObject=function(t,e){new _(t,e,b.isNotObject,!0).to.not.be.a("object")};b.isArray=function(t,e){new _(t,e,b.isArray,!0).to.be.an("array")};b.isNotArray=function(t,e){new _(t,e,b.isNotArray,!0).to.not.be.an("array")};b.isString=function(t,e){new _(t,e,b.isString,!0).to.be.a("string")};b.isNotString=function(t,e){new _(t,e,b.isNotString,!0).to.not.be.a("string")};b.isNumber=function(t,e){new _(t,e,b.isNumber,!0).to.be.a("number")};b.isNotNumber=function(t,e){new _(t,e,b.isNotNumber,!0).to.not.be.a("number")};b.isFinite=function(t,e){new _(t,e,b.isFinite,!0).to.be.finite};b.isBoolean=function(t,e){new _(t,e,b.isBoolean,!0).to.be.a("boolean")};b.isNotBoolean=function(t,e){new _(t,e,b.isNotBoolean,!0).to.not.be.a("boolean")};b.typeOf=function(t,e,r){new _(t,r,b.typeOf,!0).to.be.a(e)};b.notTypeOf=function(t,e,r){new _(t,r,b.notTypeOf,!0).to.not.be.a(e)};b.instanceOf=function(t,e,r){new _(t,r,b.instanceOf,!0).to.be.instanceOf(e)};b.notInstanceOf=function(t,e,r){new _(t,r,b.notInstanceOf,!0).to.not.be.instanceOf(e)};b.include=function(t,e,r){new _(t,r,b.include,!0).include(e)};b.notInclude=function(t,e,r){new _(t,r,b.notInclude,!0).not.include(e)};b.deepInclude=function(t,e,r){new _(t,r,b.deepInclude,!0).deep.include(e)};b.notDeepInclude=function(t,e,r){new _(t,r,b.notDeepInclude,!0).not.deep.include(e)};b.nestedInclude=function(t,e,r){new _(t,r,b.nestedInclude,!0).nested.include(e)};b.notNestedInclude=function(t,e,r){new _(t,r,b.notNestedInclude,!0).not.nested.include(e)};b.deepNestedInclude=function(t,e,r){new _(t,r,b.deepNestedInclude,!0).deep.nested.include(e)};b.notDeepNestedInclude=function(t,e,r){new _(t,r,b.notDeepNestedInclude,!0).not.deep.nested.include(e)};b.ownInclude=function(t,e,r){new _(t,r,b.ownInclude,!0).own.include(e)};b.notOwnInclude=function(t,e,r){new _(t,r,b.notOwnInclude,!0).not.own.include(e)};b.deepOwnInclude=function(t,e,r){new _(t,r,b.deepOwnInclude,!0).deep.own.include(e)};b.notDeepOwnInclude=function(t,e,r){new _(t,r,b.notDeepOwnInclude,!0).not.deep.own.include(e)};b.match=function(t,e,r){new _(t,r,b.match,!0).to.match(e)};b.notMatch=function(t,e,r){new _(t,r,b.notMatch,!0).to.not.match(e)};b.property=function(t,e,r){new _(t,r,b.property,!0).to.have.property(e)};b.notProperty=function(t,e,r){new _(t,r,b.notProperty,!0).to.not.have.property(e)};b.propertyVal=function(t,e,r,n){new _(t,n,b.propertyVal,!0).to.have.property(e,r)};b.notPropertyVal=function(t,e,r,n){new _(t,n,b.notPropertyVal,!0).to.not.have.property(e,r)};b.deepPropertyVal=function(t,e,r,n){new _(t,n,b.deepPropertyVal,!0).to.have.deep.property(e,r)};b.notDeepPropertyVal=function(t,e,r,n){new _(t,n,b.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};b.ownProperty=function(t,e,r){new _(t,r,b.ownProperty,!0).to.have.own.property(e)};b.notOwnProperty=function(t,e,r){new _(t,r,b.notOwnProperty,!0).to.not.have.own.property(e)};b.ownPropertyVal=function(t,e,r,n){new _(t,n,b.ownPropertyVal,!0).to.have.own.property(e,r)};b.notOwnPropertyVal=function(t,e,r,n){new _(t,n,b.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};b.deepOwnPropertyVal=function(t,e,r,n){new _(t,n,b.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};b.notDeepOwnPropertyVal=function(t,e,r,n){new _(t,n,b.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};b.nestedProperty=function(t,e,r){new _(t,r,b.nestedProperty,!0).to.have.nested.property(e)};b.notNestedProperty=function(t,e,r){new _(t,r,b.notNestedProperty,!0).to.not.have.nested.property(e)};b.nestedPropertyVal=function(t,e,r,n){new _(t,n,b.nestedPropertyVal,!0).to.have.nested.property(e,r)};b.notNestedPropertyVal=function(t,e,r,n){new _(t,n,b.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};b.deepNestedPropertyVal=function(t,e,r,n){new _(t,n,b.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};b.notDeepNestedPropertyVal=function(t,e,r,n){new _(t,n,b.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};b.lengthOf=function(t,e,r){new _(t,r,b.lengthOf,!0).to.have.lengthOf(e)};b.hasAnyKeys=function(t,e,r){new _(t,r,b.hasAnyKeys,!0).to.have.any.keys(e)};b.hasAllKeys=function(t,e,r){new _(t,r,b.hasAllKeys,!0).to.have.all.keys(e)};b.containsAllKeys=function(t,e,r){new _(t,r,b.containsAllKeys,!0).to.contain.all.keys(e)};b.doesNotHaveAnyKeys=function(t,e,r){new _(t,r,b.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};b.doesNotHaveAllKeys=function(t,e,r){new _(t,r,b.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};b.hasAnyDeepKeys=function(t,e,r){new _(t,r,b.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};b.hasAllDeepKeys=function(t,e,r){new _(t,r,b.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};b.containsAllDeepKeys=function(t,e,r){new _(t,r,b.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};b.doesNotHaveAnyDeepKeys=function(t,e,r){new _(t,r,b.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};b.doesNotHaveAllDeepKeys=function(t,e,r){new _(t,r,b.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};b.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new _(t,n,b.throws,!0).to.throw(e,r);return _e(i,"object")};b.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new _(t,n,b.doesNotThrow,!0).to.not.throw(e,r)};b.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new qe(n+'Invalid operator "'+e+'"',void 0,b.operator)}var o=new _(i,n,b.operator,!0);o.assert(_e(o,"object")===!0,"expected "+Ce(t)+" to be "+e+" "+Ce(r),"expected "+Ce(t)+" to not be "+e+" "+Ce(r))};b.closeTo=function(t,e,r,n){new _(t,n,b.closeTo,!0).to.be.closeTo(e,r)};b.approximately=function(t,e,r,n){new _(t,n,b.approximately,!0).to.be.approximately(e,r)};b.sameMembers=function(t,e,r){new _(t,r,b.sameMembers,!0).to.have.same.members(e)};b.notSameMembers=function(t,e,r){new _(t,r,b.notSameMembers,!0).to.not.have.same.members(e)};b.sameDeepMembers=function(t,e,r){new _(t,r,b.sameDeepMembers,!0).to.have.same.deep.members(e)};b.notSameDeepMembers=function(t,e,r){new _(t,r,b.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};b.sameOrderedMembers=function(t,e,r){new _(t,r,b.sameOrderedMembers,!0).to.have.same.ordered.members(e)};b.notSameOrderedMembers=function(t,e,r){new _(t,r,b.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};b.sameDeepOrderedMembers=function(t,e,r){new _(t,r,b.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};b.notSameDeepOrderedMembers=function(t,e,r){new _(t,r,b.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};b.includeMembers=function(t,e,r){new _(t,r,b.includeMembers,!0).to.include.members(e)};b.notIncludeMembers=function(t,e,r){new _(t,r,b.notIncludeMembers,!0).to.not.include.members(e)};b.includeDeepMembers=function(t,e,r){new _(t,r,b.includeDeepMembers,!0).to.include.deep.members(e)};b.notIncludeDeepMembers=function(t,e,r){new _(t,r,b.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};b.includeOrderedMembers=function(t,e,r){new _(t,r,b.includeOrderedMembers,!0).to.include.ordered.members(e)};b.notIncludeOrderedMembers=function(t,e,r){new _(t,r,b.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};b.includeDeepOrderedMembers=function(t,e,r){new _(t,r,b.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};b.notIncludeDeepOrderedMembers=function(t,e,r){new _(t,r,b.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};b.oneOf=function(t,e,r){new _(t,r,b.oneOf,!0).to.be.oneOf(e)};b.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Ce(t)} to be an iterable`:`expected ${Ce(t)} to be an iterable`,new qe(e,void 0,b.isIterable)};b.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.changes,!0).to.change(e,r)};b.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.changesBy,!0).to.change(e,r).by(n)};b.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.doesNotChange,!0).to.not.change(e,r)};b.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.changesButNotBy,!0).to.change(e,r).but.not.by(n)};b.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.increases,!0).to.increase(e,r)};b.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.increasesBy,!0).to.increase(e,r).by(n)};b.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.doesNotIncrease,!0).to.not.increase(e,r)};b.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};b.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.decreases,!0).to.decrease(e,r)};b.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.decreasesBy,!0).to.decrease(e,r).by(n)};b.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.doesNotDecrease,!0).to.not.decrease(e,r)};b.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new _(t,i,b.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};b.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};b.ifError=function(t){if(t)throw t};b.isExtensible=function(t,e){new _(t,e,b.isExtensible,!0).to.be.extensible};b.isNotExtensible=function(t,e){new _(t,e,b.isNotExtensible,!0).to.not.be.extensible};b.isSealed=function(t,e){new _(t,e,b.isSealed,!0).to.be.sealed};b.isNotSealed=function(t,e){new _(t,e,b.isNotSealed,!0).to.not.be.sealed};b.isFrozen=function(t,e){new _(t,e,b.isFrozen,!0).to.be.frozen};b.isNotFrozen=function(t,e){new _(t,e,b.isNotFrozen,!0).to.not.be.frozen};b.isEmpty=function(t,e){new _(t,e,b.isEmpty,!0).to.be.empty};b.isNotEmpty=function(t,e){new _(t,e,b.isNotEmpty,!0).to.not.be.empty};F(function t(e,r){return b[r]=b[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var E1=[];function kZ(t){let e={AssertionError:qe,util:Og,config:br,expect:Hg,assert:b,Assertion:_,...dF};return~E1.indexOf(t)||(t(e,Og),E1.push(t)),e}F(kZ,"use");var bu=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new H(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new H(this._lineNumber,0,this._lineNumber+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this._text)[1].length}get lastNonWhitespaceCharacterIndex(){return this.text.trimEnd().length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this._text.length}};var mF=pr(require("node:path"),1),Xg=class{get uri(){return this._uri}get filename(){return mF.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new H(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof se?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new bu(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new se(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof H))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new H(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof se))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new se(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new wb(n)}}};function AZ(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var wb=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=AZ(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,s=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)r=i+1;else break;return new _b(i,e-s)}},_b=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var Jg=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=wu;this.onDidChangeActiveTextEditor=wu;this.onDidChangeVisibleTextEditors=wu;this.onDidChangeTextEditorSelection=wu;this.onDidChangeTextEditorVisibleRanges=wu;this.configuration=new Ql,this.keyValueStore=new Zl,this.messages=new Yl,this.clipboard=new Gl(this.client),this.capabilities=new mg,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await eI(this.client);this.assetsRoot_=Eb.default.join(e,"assets"),this.cursorlessNeovimPath=Eb.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return g1()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return uI(e)}onDidOpenTextDocument(e,r,n){return pI(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let s,l;e?(s=[],l=[]):(s=await fg(r,this.client),l=await JD(r,this.client,i));let u=this.toNeovimEditor(r,n,i,l,s);return Ur().emitEvent("onDidOpenTextDocument",u.document),u}toNeovimEditor(e,r,n,i,o){let s=this.getTextDocument(r),l=this.getTextEditor(e);return s?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),s.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),s=new Xg(gI.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,s)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,s)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new gg(dM(),this.client,this,e,s,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){oI(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,hF.pull)(this.disposables,...e)}};function wu(){return{dispose(){}}}var ey=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var IZ=BigInt(1e9);function gF(t,e=BigInt(1e6)){return Number(t*e/IZ)/Number(e)}async function ty(t,e=[],r=[],n,i,o,s,l){let u={documentContents:n.document.getText(),selections:n.selections.map(LR)};o!=null&&(u.marks=o),l!=null&&(u.metadata=l),e.includes("clipboard")||(u.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(u.visibleRanges=n.visibleRanges.map(Bc));for(let f of Ja){let d=t?.get(f),h=`${f}Mark`;d!=null&&!e.includes(h)&&(u[h]=d.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let f=s?.startTimestamp;if(f==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-f;u.timeOffsetSeconds=gF(d)}return u}var FZ=pr(cl(),1);function yF(t,e,r,n,i,o,s,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:s,scopeProvider:o,takeSnapshot(u,f,d,h,g){return ty(e,u,f,d,h,g,void 0,void 0)},setStoredTarget(u,f,d){e.set(f,d?.map(h=>QD(u,h)))},hatTokenMap:r,runIntegrationTests:l}}async function xF(t,e,r,n){let i={[wx]:async(...o)=>{(await t.mode).mode==="t"&&nI(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),u=yf(o);if(await n.getFocusedElementType()==="terminal"&&Vo(u)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&iI(t)}return l}catch(l){if(e.runMode!=="test"){let u=l;console.error(u.stack),e.handleCommandError(u)}throw l}},"cursorless.repeatPreviousCommand":De,"cursorless.showCheatsheet":De,"cursorless.internal.updateCheatsheetDefaults":De,"cursorless.recordTestCase":De,"cursorless.recordOneTestCaseThenPause":De,"cursorless.pauseRecording":De,"cursorless.resumeRecording":De,"cursorless.takeSnapshot":De,"cursorless.recordScopeTests.showUnimplementedFacets":De,"cursorless.recordScopeTests.saveActiveDocument":De,"cursorless.showQuickPick":De,"cursorless.showDocumentation":De,"cursorless.private.logQuickActions":De,"cursorless.toggleDecorations":De,"cursorless.recomputeDecorationStyles":De,"cursorless.showScopeVisualizer":De,"cursorless.hideScopeVisualizer":De,"cursorless.analyzeCommandHistory":De,"cursorless.keyboard.escape":De,"cursorless.keyboard.targeted.targetHat":De,"cursorless.keyboard.targeted.targetScope":De,"cursorless.keyboard.targeted.targetSelection":De,"cursorless.keyboard.targeted.clearTarget":De,"cursorless.keyboard.targeted.runActionOnTarget":De,"cursorless.keyboard.modal.modeOn":De,"cursorless.keyboard.modal.modeOff":De,"cursorless.keyboard.modal.modeToggle":De,"cursorless.keyboard.undoTarget":De,"cursorless.keyboard.redoTarget":De,"cursorless.tutorial.start":De,"cursorless.tutorial.next":De,"cursorless.tutorial.previous":De,"cursorless.tutorial.restart":De,"cursorless.tutorial.resume":De,"cursorless.tutorial.list":De,"cursorless.documentationOpened":De};Object.entries(i).map(([o,s])=>Ur().registerCommand(o,s))}async function De(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function TF(t){let e=t.nvim,r=new Jg(e);await r.init();let n=r.runMode==="production"?r:new af(r,new rf,r.runMode==="test",void 0),i=new xp,o=new ey(e),s=r.runMode==="test"?i:o,{commandApi:l,storedTargets:u,hatTokenMap:f,scopeProvider:d,injectIde:h,runIntegrationTests:g}=await KD({ide:n,commandServerApi:s});await xF(e,r,l,s);let x={testHelpers:r.runMode==="test"?yF(i,u,f,r,n,d,h,g):void 0};Ur().registerExtensionApi(YD,x),console.log("activate(): Cursorless extension loaded")}function SF(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await CZ(t),{sync:!1})}async function CZ(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await TF(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
