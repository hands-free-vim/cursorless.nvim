"use strict";var KH=Object.create;var kp=Object.defineProperty;var QH=Object.getOwnPropertyDescriptor;var YH=Object.getOwnPropertyNames;var ZH=Object.getPrototypeOf,JH=Object.prototype.hasOwnProperty;var Ap=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),IE=(t,e)=>{for(var r in e)kp(t,r,{get:e[r],enumerable:!0})},OE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of YH(e))!JH.call(t,i)&&i!==r&&kp(t,i,{get:()=>e[i],enumerable:!(n=QH(e,i))||n.enumerable});return t};var ln=(t,e,r)=>(r=t!=null?KH(ZH(t)):{},OE(e||!t||!t.__esModule?kp(r,"default",{value:t,enumerable:!0}):r,t)),XH=t=>OE(kp({},"__esModule",{value:!0}),t);var NA=Ap((OA,qm)=>{(function(t,e){typeof qm=="object"&&qm.exports?qm.exports=e():t.nearley=e()})(OA,function(){function t(u,m,d){return this.id=++t.highestId,this.name=u,this.symbols=m,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(u){var m=typeof u>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,u).map(l).join(" ")+" \u25CF "+this.symbols.slice(u).map(l).join(" ");return this.name+" \u2192 "+m};function e(u,m,d,g){this.rule=u,this.dot=m,this.reference=d,this.data=[],this.wantedBy=g,this.isComplete=this.dot===u.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(u){var m=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return m.left=this,m.right=u,m.isComplete&&(m.data=m.build(),m.right=void 0),m},e.prototype.build=function(){var u=[],m=this;do u.push(m.right.data),m=m.left;while(m.left);return u.reverse(),u},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(u,m){this.grammar=u,this.index=m,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(u){for(var m=this.states,d=this.wants,g=this.completed,y=0;y<m.length;y++){var x=m[y];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var E=x.wantedBy,w=E.length;w--;){var H=E[w];this.complete(H,x)}if(x.reference===this.index){var W=x.rule.name;(this.completed[W]=this.completed[W]||[]).push(x)}}}else{var W=x.rule.symbols[x.dot];if(typeof W!="string"){this.scannable.push(x);continue}if(d[W]){if(d[W].push(x),g.hasOwnProperty(W))for(var G=g[W],w=0;w<G.length;w++){var ie=G[w];this.complete(x,ie)}}else d[W]=[x],this.predict(W)}}},r.prototype.predict=function(u){for(var m=this.grammar.byName[u]||[],d=0;d<m.length;d++){var g=m[d],y=this.wants[u],x=new e(g,0,this.index,y);this.states.push(x)}},r.prototype.complete=function(u,m){var d=u.nextState(m);this.states.push(d)};function n(u,m){this.rules=u,this.start=m||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(g){d.hasOwnProperty(g.name)||(d[g.name]=[]),d[g.name].push(g)})}n.fromCompiled=function(g,m){var d=g.Lexer;g.ParserStart&&(m=g.ParserStart,g=g.ParserRules);var g=g.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),y=new n(g,m);return y.lexer=d,y};function i(){this.reset("")}i.prototype.reset=function(u,m){this.buffer=u,this.index=0,this.line=m?m.line:1,this.lastLineBreak=m?-m.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var u=this.buffer[this.index++];return u===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:u}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(u,m){var d=this.buffer;if(typeof d=="string"){var g=d.split(`
`).slice(Math.max(0,this.line-5),this.line),y=d.indexOf(`
`,this.index);y===-1&&(y=d.length);var x=this.index-this.lastLineBreak,E=String(this.line).length;return m+=" at line "+this.line+" col "+x+`:

`,m+=g.map(function(H,W){return w(this.line-g.length+W+1,E)+" "+H},this).join(`
`),m+=`
`+w("",E+x)+`^
`,m}else return m+" at index "+(this.index-1);function w(H,W){var G=String(H);return Array(W-G.length+1).join(" ")+G}};function o(u,m,d){if(u instanceof n)var g=u,d=m;else var g=n.fromCompiled(u,m);this.grammar=g,this.options={keepHistory:!1,lexer:g.lexer||new i};for(var y in d||{})this.options[y]=d[y];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(g,0),E=this.table=[x];x.wants[g.start]=[],x.predict(g.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(u){var m=this.lexer;m.reset(u,this.lexerState);for(var d;;){try{if(d=m.next(),!d)break}catch(we){var E=new r(this.grammar,this.current+1);this.table.push(E);var g=new Error(this.reportLexerError(we));throw g.offset=this.current,g.token=we.token,g}var y=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,E=new r(this.grammar,x);this.table.push(E);for(var w=d.text!==void 0?d.text:d.value,H=m.constructor===i?d.value:m.transform?.(d)??d,W=y.scannable,G=W.length;G--;){var ie=W[G],se=ie.rule.symbols[ie.dot];if(se.test?se.test(H):se.type?se.type===d.type:se.literal===w){var ge=ie.nextState({data:H,token:d,isToken:!0,reference:x-1});E.states.push(ge)}}if(E.process(),E.states.length===0){var g=new Error(this.reportError(d));throw g.offset=this.current,g.token=d,g}this.options.keepHistory&&(y.lexerState=m.save()),this.current++}return y&&(this.lexerState=m.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(u){var m,d,g=u.token;return g?(m="input "+JSON.stringify(g.text[0])+" (lexer error)",d=this.lexer.formatError(g,"Syntax error")):(m="input (lexer error)",d=u.message),this.reportErrorCommon(d,m)},o.prototype.reportError=function(u){var m=(u.type?u.type+" token: ":"")+JSON.stringify(u.value!==void 0?u.value:u),d=this.lexer.formatError(u,"Syntax error");return this.reportErrorCommon(d,m)},o.prototype.reportErrorCommon=function(u,m){var d=[];d.push(u);var g=this.table.length-2,y=this.table[g],x=y.states.filter(function(w){var H=w.rule.symbols[w.dot];return H&&typeof H!="string"});if(x.length===0)d.push("Unexpected "+m+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(y.states,d);else{d.push("Unexpected "+m+`. Instead, I was expecting to see one of the following:
`);var E=x.map(function(w){return this.buildFirstStateStack(w,[])||[w]},this);E.forEach(function(w){var H=w[0],W=H.rule.symbols[H.dot],G=this.getSymbolDisplay(W);d.push("A "+G+" based on:"),this.displayStateStack(w,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(u,m){for(var d,g=0,y=0;y<u.length;y++){var x=u[y],E=x.rule.toString(x.dot);E===d?g++:(g>0&&m.push("    ^ "+g+" more lines identical to this"),g=0,m.push("    "+E)),d=E}},o.prototype.getSymbolDisplay=function(u){return s(u)},o.prototype.buildFirstStateStack=function(u,m){if(m.indexOf(u)!==-1)return null;if(u.wantedBy.length===0)return[u];var d=u.wantedBy[0],g=[u].concat(m),y=this.buildFirstStateStack(d,g);return y===null?null:[u].concat(y)},o.prototype.save=function(){var u=this.table[this.current];return u.lexerState=this.lexerState,u},o.prototype.restore=function(u){var m=u.index;this.current=m,this.table[m]=u,this.table.splice(m+1),this.lexerState=u.lexerState,this.results=this.finish()},o.prototype.rewind=function(u){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[u])},o.prototype.finish=function(){var u=[],m=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(g){g.rule.name===m&&g.dot===g.rule.symbols.length&&g.reference===0&&g.data!==o.fail&&u.push(g)}),u.map(function(g){return g.data})};function s(u){var m=typeof u;if(m==="string")return u;if(m==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return"character matching "+u;if(u.type)return u.type+" token";if(u.test)return"token matching "+String(u.test);throw new Error("Unknown symbol type: "+u)}}function l(u){var m=typeof u;if(m==="string")return u;if(m==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return u.toString();if(u.type)return"%"+u.type;if(u.test)return"<"+String(u.test)+">";throw new Error("Unknown symbol type: "+u)}}return{Parser:o,Grammar:n,Rule:t}})});var $A=Ap((WA,Qm)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof Qm=="object"&&Qm.exports?Qm.exports=e():t.moo=e()})(WA,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(B){return B&&e.call(B)==="[object RegExp]"}function i(B){return B&&typeof B=="object"&&!n(B)&&!Array.isArray(B)}function o(B){return B.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(B){var O=new RegExp("|"+B);return O.exec("").length-1}function l(B){return"("+B+")"}function u(B){if(!B.length)return"(?!)";var O=B.map(function(L){return"(?:"+L+")"}).join("|");return"(?:"+O+")"}function m(B){if(typeof B=="string")return"(?:"+o(B)+")";if(n(B)){if(B.ignoreCase)throw new Error("RegExp /i flag not allowed");if(B.global)throw new Error("RegExp /g flag is implied");if(B.sticky)throw new Error("RegExp /y flag is implied");if(B.multiline)throw new Error("RegExp /m flag is implied");return B.source}else throw new Error("Not a pattern: "+B)}function d(B,O){return B.length>O?B:Array(O-B.length+1).join(" ")+B}function g(B,O){for(var L=B.length,q=0;;){var J=B.lastIndexOf(`
`,L-1);if(J===-1||(q++,L=J,q===O)||L===0)break}var C=q<O?0:L+1;return B.substring(C).split(`
`)}function y(B){for(var O=Object.getOwnPropertyNames(B),L=[],q=0;q<O.length;q++){var J=O[q],C=B[J],U=[].concat(C);if(J==="include"){for(var z=0;z<U.length;z++)L.push({include:U[z]});continue}var X=[];U.forEach(function(Z){i(Z)?(X.length&&L.push(E(J,X)),L.push(E(J,Z)),X=[]):X.push(Z)}),X.length&&L.push(E(J,X))}return L}function x(B){for(var O=[],L=0;L<B.length;L++){var q=B[L];if(q.include){for(var J=[].concat(q.include),C=0;C<J.length;C++)O.push({include:J[C]});continue}if(!q.type)throw new Error("Rule has no type: "+JSON.stringify(q));O.push(E(q.type,q))}return O}function E(B,O){if(i(O)||(O={match:O}),O.include)throw new Error("Matching rules cannot also include states");var L={defaultType:B,lineBreaks:!!O.error||!!O.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var q in O)t.call(O,q)&&(L[q]=O[q]);if(typeof L.type=="string"&&B!==L.type)throw new Error("Type transform cannot be a string (type '"+L.type+"' for token '"+B+"')");var J=L.match;return L.match=Array.isArray(J)?J:J?[J]:[],L.match.sort(function(C,U){return n(C)&&n(U)?0:n(U)?-1:n(C)?1:U.length-C.length}),L}function w(B){return Array.isArray(B)?x(B):y(B)}var H=E("error",{lineBreaks:!0,shouldThrow:!0});function W(B,O){for(var L=null,q=Object.create(null),J=!0,C=null,U=[],z=[],X=0;X<B.length;X++)B[X].fallback&&(J=!1);for(var X=0;X<B.length;X++){var Z=B[X];if(Z.include)throw new Error("Inheritance is not allowed in stateless lexers");if(Z.error||Z.fallback){if(L)throw!Z.fallback==!L.fallback?new Error("Multiple "+(Z.fallback?"fallback":"error")+" rules not allowed (for token '"+Z.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+Z.defaultType+"')");L=Z}var ne=Z.match.slice();if(J)for(;ne.length&&typeof ne[0]=="string"&&ne[0].length===1;){var Ee=ne.shift();q[Ee.charCodeAt(0)]=Z}if(Z.pop||Z.push||Z.next){if(!O)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+Z.defaultType+"')");if(Z.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+Z.defaultType+"')")}if(ne.length!==0){J=!1,U.push(Z);for(var Re=0;Re<ne.length;Re++){var Ze=ne[Re];if(n(Ze)){if(C===null)C=Ze.unicode;else if(C!==Ze.unicode&&Z.fallback===!1)throw new Error("If one rule is /u then all must be")}}var He=u(ne.map(m)),xt=new RegExp(He);if(xt.test(""))throw new Error("RegExp matches empty string: "+xt);var qt=s(He);if(qt>0)throw new Error("RegExp has capture groups: "+xt+`
Use (?: \u2026 ) instead`);if(!Z.lineBreaks&&xt.test(`
`))throw new Error("Rule should declare lineBreaks: "+xt);z.push(l(He))}}var Xr=L&&L.fallback,Co=r&&!Xr?"ym":"gm",yi=r||Xr?"":"|";C===!0&&(Co+="u");var Fa=new RegExp(u(z)+yi,Co);return{regexp:Fa,groups:U,fast:q,error:L||H}}function G(B){var O=W(w(B));return new we({start:O},"start")}function ie(B,O,L){var q=B&&(B.push||B.next);if(q&&!L[q])throw new Error("Missing state '"+q+"' (in token '"+B.defaultType+"' of state '"+O+"')");if(B&&B.pop&&+B.pop!=1)throw new Error("pop must be 1 (in token '"+B.defaultType+"' of state '"+O+"')")}function se(B,O){var L=B.$all?w(B.$all):[];delete B.$all;var q=Object.getOwnPropertyNames(B);O||(O=q[0]);for(var J=Object.create(null),C=0;C<q.length;C++){var U=q[C];J[U]=w(B[U]).concat(L)}for(var C=0;C<q.length;C++)for(var U=q[C],z=J[U],X=Object.create(null),Z=0;Z<z.length;Z++){var ne=z[Z];if(ne.include){var Ee=[Z,1];if(ne.include!==U&&!X[ne.include]){X[ne.include]=!0;var Re=J[ne.include];if(!Re)throw new Error("Cannot include nonexistent state '"+ne.include+"' (in state '"+U+"')");for(var Ze=0;Ze<Re.length;Ze++){var He=Re[Ze];z.indexOf(He)===-1&&Ee.push(He)}}z.splice.apply(z,Ee),Z--}}for(var xt=Object.create(null),C=0;C<q.length;C++){var U=q[C];xt[U]=W(J[U],!0)}for(var C=0;C<q.length;C++){for(var qt=q[C],Xr=xt[qt],Co=Xr.groups,Z=0;Z<Co.length;Z++)ie(Co[Z],qt,xt);for(var yi=Object.getOwnPropertyNames(Xr.fast),Z=0;Z<yi.length;Z++)ie(Xr.fast[yi[Z]],qt,xt)}return new we(xt,O)}function ge(B){for(var O=typeof Map<"u",L=O?new Map:Object.create(null),q=Object.getOwnPropertyNames(B),J=0;J<q.length;J++){var C=q[J],U=B[C],z=Array.isArray(U)?U:[U];z.forEach(function(X){if(typeof X!="string")throw new Error("keyword must be string (in keyword '"+C+"')");O?L.set(X,C):L[X]=C})}return function(X){return O?L.get(X):L[X]}}var we=function(B,O){this.startState=O,this.states=B,this.buffer="",this.stack=[],this.reset()};we.prototype.reset=function(B,O){return this.buffer=B||"",this.index=0,this.line=O?O.line:1,this.col=O?O.col:1,this.queuedToken=O?O.queuedToken:null,this.queuedText=O?O.queuedText:"",this.queuedThrow=O?O.queuedThrow:null,this.setState(O?O.state:this.startState),this.stack=O&&O.stack?O.stack.slice():[],this},we.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},we.prototype.setState=function(B){if(!(!B||this.state===B)){this.state=B;var O=this.states[B];this.groups=O.groups,this.error=O.error,this.re=O.regexp,this.fast=O.fast}},we.prototype.popState=function(){this.setState(this.stack.pop())},we.prototype.pushState=function(B){this.stack.push(this.state),this.setState(B)};var Pt=r?function(B,O){return B.exec(O)}:function(B,O){var L=B.exec(O);return L[0].length===0?null:L};we.prototype._getGroup=function(B){for(var O=this.groups.length,L=0;L<O;L++)if(B[L+1]!==void 0)return this.groups[L];throw new Error("Cannot find token type for matched text")};function Sr(){return this.value}if(we.prototype.next=function(){var B=this.index;if(this.queuedGroup){var O=this._token(this.queuedGroup,this.queuedText,B);return this.queuedGroup=null,this.queuedText="",O}var L=this.buffer;if(B!==L.length){var U=this.fast[L.charCodeAt(B)];if(U)return this._token(U,L.charAt(B),B);var q=this.re;q.lastIndex=B;var J=Pt(q,L),C=this.error;if(J==null)return this._token(C,L.slice(B,L.length),B);var U=this._getGroup(J),z=J[0];return C.fallback&&J.index!==B?(this.queuedGroup=U,this.queuedText=z,this._token(C,L.slice(B,J.index),B)):this._token(U,z,B)}},we.prototype._token=function(B,O,L){var q=0;if(B.lineBreaks){var J=/\n/g,C=1;if(O===`
`)q=1;else for(;J.exec(O);)q++,C=J.lastIndex}var U={type:typeof B.type=="function"&&B.type(O)||B.defaultType,value:typeof B.value=="function"?B.value(O):O,text:O,toString:Sr,offset:L,lineBreaks:q,line:this.line,col:this.col},z=O.length;if(this.index+=z,this.line+=q,q!==0?this.col=z-C+1:this.col+=z,B.shouldThrow){var X=new Error(this.formatError(U,"invalid syntax"));throw X}return B.pop?this.popState():B.push?this.pushState(B.push):B.next&&this.setState(B.next),U},typeof Symbol<"u"&&Symbol.iterator){var vr=function(B){this.lexer=B};vr.prototype.next=function(){var B=this.lexer.next();return{value:B,done:!B}},vr.prototype[Symbol.iterator]=function(){return this},we.prototype[Symbol.iterator]=function(){return new vr(this)}}return we.prototype.formatError=function(B,O){if(B==null)var L=this.buffer.slice(this.index),B={text:L,offset:this.index,lineBreaks:L.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var q=2,J=Math.max(B.line-q,1),C=B.line+q,U=String(C).length,z=g(this.buffer,this.line-B.line+q+1).slice(0,5),X=[];X.push(O+" at line "+B.line+" col "+B.col+":"),X.push("");for(var Z=0;Z<z.length;Z++){var ne=z[Z],Ee=J+Z;X.push(d(String(Ee),U)+"  "+ne),Ee===B.line&&X.push(d("",U+B.col+1)+"^")}return X.join(`
`)},we.prototype.clone=function(){return new we(this.states,this.state)},we.prototype.has=function(B){return!0},{compile:G,states:se,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ge}})});var kl=Ap((ni,UP)=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});function Nn(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var m9=typeof process=="object"&&process.env.NODE_ENV==="production";function hn(t,e){if(!t)throw m9?new Error("Invariant failed"):new Error(e())}ni.invariant=hn;var SS=Object.prototype.hasOwnProperty,f9=Array.prototype.splice,d9=Object.prototype.toString;function la(t){return d9.call(t).slice(8,-1)}var _f=Object.assign||function(t,e){return vS(e).forEach(function(r){SS.call(e,r)&&(t[r]=e[r])}),t},vS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function To(t){return Array.isArray(t)?_f(t.constructor(t.length),t):la(t)==="Map"?new Map(t):la(t)==="Set"?new Set(t):t&&typeof t=="object"?_f(Object.create(Object.getPrototypeOf(t)),t):t}var OP=function(){function t(){this.commands=_f({},g9),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||hn(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),hn(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return vS(i).forEach(function(s){if(SS.call(n.commands,s)){var l=e===o;o=n.commands[s](i[s],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var u=la(e)==="Map"?n.update(e.get(s),i[s]):n.update(e[s],i[s]),m=la(o)==="Map"?o.get(s):o[s];(!n.isEquals(u,m)||typeof u>"u"&&!SS.call(e,s))&&(o===e&&(o=To(e)),la(o)==="Map"?o.set(s,u):o[s]=u)}}),o},t}();ni.Context=OP;var g9={$push:function(t,e,r){return CP(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return CP(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return h9(e,r),t.forEach(function(i){NP(i),e===n&&i.length&&(e=To(n)),f9.apply(e,i)}),e},$set:function(t,e,r){return T9(r),t},$toggle:function(t,e){Rl(t,"$toggle");var r=t.length?To(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return Rl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=To(n)),delete e[i])}),e},$add:function(t,e,r,n){return IP(e,"$add"),Rl(t,"$add"),la(e)==="Map"?t.forEach(function(i){var o=i[0],s=i[1];e===n&&e.get(o)!==s&&(e=To(n)),e.set(o,s)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=To(n)),e.add(i)}),e},$remove:function(t,e,r,n){return IP(e,"$remove"),Rl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=To(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return x9(e,t),vS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=To(n)),e[i]=t[i])}),e},$apply:function(t,e){return y9(t),t(e)}},bS=new OP;ni.isEquals=bS.update.isEquals;ni.extend=bS.extend;ni.default=bS.update;ni.default.default=UP.exports=_f(ni.default,ni);function CP(t,e,r){hn(Array.isArray(t),function(){return"update(): expected target of "+Nn(r)+" to be an array; got "+Nn(t)+"."}),Rl(e[r],r)}function Rl(t,e){hn(Array.isArray(t),function(){return"update(): expected spec of "+Nn(e)+" to be an array; got "+Nn(t)+". Did you forget to wrap your parameter in an array?"})}function h9(t,e){hn(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+Nn(t)}),NP(e.$splice)}function NP(t){hn(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+Nn(t)+". Did you forget to wrap your parameters in an array?"})}function y9(t){hn(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+Nn(t)+"."})}function T9(t){hn(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function x9(t,e){hn(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+Nn(e)}),hn(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+Nn(t)})}function IP(t,e){var r=la(t);hn(r==="Map"||r==="Set",function(){return"update(): "+Nn(e)+" expects a target of type Set or Map; got "+Nn(r)})}});var Cv=Ap((mc,lu)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",m=1,d=2,g=4,y=1,x=2,E=1,w=2,H=4,W=8,G=16,ie=32,se=64,ge=128,we=256,Pt=512,Sr=30,vr="...",B=800,O=16,L=1,q=2,J=3,C=1/0,U=9007199254740991,z=17976931348623157e292,X=NaN,Z=4294967295,ne=Z-1,Ee=Z>>>1,Re=[["ary",ge],["bind",E],["bindKey",w],["curry",W],["curryRight",G],["flip",Pt],["partial",ie],["partialRight",se],["rearg",we]],Ze="[object Arguments]",He="[object Array]",xt="[object AsyncFunction]",qt="[object Boolean]",Xr="[object Date]",Co="[object DOMException]",yi="[object Error]",Fa="[object Function]",iw="[object GeneratorFunction]",_n="[object Map]",Ac="[object Number]",p1="[object Null]",Ti="[object Object]",ow="[object Promise]",m1="[object Proxy]",Pc="[object RegExp]",Rn="[object Set]",Lc="[object String]",Uu="[object Symbol]",f1="[object Undefined]",Mc="[object WeakMap]",d1="[object WeakSet]",Dc="[object ArrayBuffer]",Ca="[object DataView]",wy="[object Float32Array]",Ey="[object Float64Array]",_y="[object Int8Array]",Ry="[object Int16Array]",ky="[object Int32Array]",Ay="[object Uint8Array]",Py="[object Uint8ClampedArray]",Ly="[object Uint16Array]",My="[object Uint32Array]",g1=/\b__p \+= '';/g,h1=/\b(__p \+=) '' \+/g,y1=/(__e\(.*?\)|\b__t\)) \+\n'';/g,aw=/&(?:amp|lt|gt|quot|#39);/g,sw=/[&<>"']/g,T1=RegExp(aw.source),x1=RegExp(sw.source),S1=/<%-([\s\S]+?)%>/g,v1=/<%([\s\S]+?)%>/g,cw=/<%=([\s\S]+?)%>/g,b1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,w1=/^\w*$/,E1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dy=/[\\^$.*+?()[\]{}|]/g,_1=RegExp(Dy.source),Fy=/^\s+/,R1=/\s/,k1=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,A1=/\{\n\/\* \[wrapped with (.+)\] \*/,P1=/,? & /,L1=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,M1=/[()=,{}\[\]\/\s]/,D1=/\\(\\)?/g,F1=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,lw=/\w*$/,C1=/^[-+]0x[0-9a-f]+$/i,I1=/^0b[01]+$/i,O1=/^\[object .+?Constructor\]$/,N1=/^0o[0-7]+$/i,U1=/^(?:0|[1-9]\d*)$/,H1=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hu=/($^)/,B1=/['\n\r\u2028\u2029\\]/g,Bu="\\ud800-\\udfff",V1="\\u0300-\\u036f",W1="\\ufe20-\\ufe2f",$1="\\u20d0-\\u20ff",uw=V1+W1+$1,pw="\\u2700-\\u27bf",mw="a-z\\xdf-\\xf6\\xf8-\\xff",j1="\\xac\\xb1\\xd7\\xf7",z1="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",q1="\\u2000-\\u206f",G1=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fw="A-Z\\xc0-\\xd6\\xd8-\\xde",dw="\\ufe0e\\ufe0f",gw=j1+z1+q1+G1,Cy="['\u2019]",K1="["+Bu+"]",hw="["+gw+"]",Vu="["+uw+"]",yw="\\d+",Q1="["+pw+"]",Tw="["+mw+"]",xw="[^"+Bu+gw+yw+pw+mw+fw+"]",Iy="\\ud83c[\\udffb-\\udfff]",Y1="(?:"+Vu+"|"+Iy+")",Sw="[^"+Bu+"]",Oy="(?:\\ud83c[\\udde6-\\uddff]){2}",Ny="[\\ud800-\\udbff][\\udc00-\\udfff]",Ia="["+fw+"]",vw="\\u200d",bw="(?:"+Tw+"|"+xw+")",Z1="(?:"+Ia+"|"+xw+")",ww="(?:"+Cy+"(?:d|ll|m|re|s|t|ve))?",Ew="(?:"+Cy+"(?:D|LL|M|RE|S|T|VE))?",_w=Y1+"?",Rw="["+dw+"]?",J1="(?:"+vw+"(?:"+[Sw,Oy,Ny].join("|")+")"+Rw+_w+")*",X1="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",eC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",kw=Rw+_w+J1,tC="(?:"+[Q1,Oy,Ny].join("|")+")"+kw,rC="(?:"+[Sw+Vu+"?",Vu,Oy,Ny,K1].join("|")+")",nC=RegExp(Cy,"g"),iC=RegExp(Vu,"g"),Uy=RegExp(Iy+"(?="+Iy+")|"+rC+kw,"g"),oC=RegExp([Ia+"?"+Tw+"+"+ww+"(?="+[hw,Ia,"$"].join("|")+")",Z1+"+"+Ew+"(?="+[hw,Ia+bw,"$"].join("|")+")",Ia+"?"+bw+"+"+ww,Ia+"+"+Ew,eC,X1,yw,tC].join("|"),"g"),aC=RegExp("["+vw+Bu+uw+dw+"]"),sC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,cC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],lC=-1,at={};at[wy]=at[Ey]=at[_y]=at[Ry]=at[ky]=at[Ay]=at[Py]=at[Ly]=at[My]=!0,at[Ze]=at[He]=at[Dc]=at[qt]=at[Ca]=at[Xr]=at[yi]=at[Fa]=at[_n]=at[Ac]=at[Ti]=at[Pc]=at[Rn]=at[Lc]=at[Mc]=!1;var ot={};ot[Ze]=ot[He]=ot[Dc]=ot[Ca]=ot[qt]=ot[Xr]=ot[wy]=ot[Ey]=ot[_y]=ot[Ry]=ot[ky]=ot[_n]=ot[Ac]=ot[Ti]=ot[Pc]=ot[Rn]=ot[Lc]=ot[Uu]=ot[Ay]=ot[Py]=ot[Ly]=ot[My]=!0,ot[yi]=ot[Fa]=ot[Mc]=!1;var uC={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},pC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},dC=parseFloat,gC=parseInt,Aw=typeof global=="object"&&global&&global.Object===Object&&global,hC=typeof self=="object"&&self&&self.Object===Object&&self,Nt=Aw||hC||Function("return this")(),Hy=typeof mc=="object"&&mc&&!mc.nodeType&&mc,Io=Hy&&typeof lu=="object"&&lu&&!lu.nodeType&&lu,Pw=Io&&Io.exports===Hy,By=Pw&&Aw.process,en=function(){try{var M=Io&&Io.require&&Io.require("util").types;return M||By&&By.binding&&By.binding("util")}catch{}}(),Lw=en&&en.isArrayBuffer,Mw=en&&en.isDate,Dw=en&&en.isMap,Fw=en&&en.isRegExp,Cw=en&&en.isSet,Iw=en&&en.isTypedArray;function Ir(M,j,V){switch(V.length){case 0:return M.call(j);case 1:return M.call(j,V[0]);case 2:return M.call(j,V[0],V[1]);case 3:return M.call(j,V[0],V[1],V[2])}return M.apply(j,V)}function yC(M,j,V,ue){for(var Ae=-1,Je=M==null?0:M.length;++Ae<Je;){var Ft=M[Ae];j(ue,Ft,V(Ft),M)}return ue}function tn(M,j){for(var V=-1,ue=M==null?0:M.length;++V<ue&&j(M[V],V,M)!==!1;);return M}function TC(M,j){for(var V=M==null?0:M.length;V--&&j(M[V],V,M)!==!1;);return M}function Ow(M,j){for(var V=-1,ue=M==null?0:M.length;++V<ue;)if(!j(M[V],V,M))return!1;return!0}function $i(M,j){for(var V=-1,ue=M==null?0:M.length,Ae=0,Je=[];++V<ue;){var Ft=M[V];j(Ft,V,M)&&(Je[Ae++]=Ft)}return Je}function Wu(M,j){var V=M==null?0:M.length;return!!V&&Oa(M,j,0)>-1}function Vy(M,j,V){for(var ue=-1,Ae=M==null?0:M.length;++ue<Ae;)if(V(j,M[ue]))return!0;return!1}function ut(M,j){for(var V=-1,ue=M==null?0:M.length,Ae=Array(ue);++V<ue;)Ae[V]=j(M[V],V,M);return Ae}function ji(M,j){for(var V=-1,ue=j.length,Ae=M.length;++V<ue;)M[Ae+V]=j[V];return M}function Wy(M,j,V,ue){var Ae=-1,Je=M==null?0:M.length;for(ue&&Je&&(V=M[++Ae]);++Ae<Je;)V=j(V,M[Ae],Ae,M);return V}function xC(M,j,V,ue){var Ae=M==null?0:M.length;for(ue&&Ae&&(V=M[--Ae]);Ae--;)V=j(V,M[Ae],Ae,M);return V}function $y(M,j){for(var V=-1,ue=M==null?0:M.length;++V<ue;)if(j(M[V],V,M))return!0;return!1}var SC=jy("length");function vC(M){return M.split("")}function bC(M){return M.match(L1)||[]}function Nw(M,j,V){var ue;return V(M,function(Ae,Je,Ft){if(j(Ae,Je,Ft))return ue=Je,!1}),ue}function $u(M,j,V,ue){for(var Ae=M.length,Je=V+(ue?1:-1);ue?Je--:++Je<Ae;)if(j(M[Je],Je,M))return Je;return-1}function Oa(M,j,V){return j===j?CC(M,j,V):$u(M,Uw,V)}function wC(M,j,V,ue){for(var Ae=V-1,Je=M.length;++Ae<Je;)if(ue(M[Ae],j))return Ae;return-1}function Uw(M){return M!==M}function Hw(M,j){var V=M==null?0:M.length;return V?qy(M,j)/V:X}function jy(M){return function(j){return j==null?t:j[M]}}function zy(M){return function(j){return M==null?t:M[j]}}function Bw(M,j,V,ue,Ae){return Ae(M,function(Je,Ft,it){V=ue?(ue=!1,Je):j(V,Je,Ft,it)}),V}function EC(M,j){var V=M.length;for(M.sort(j);V--;)M[V]=M[V].value;return M}function qy(M,j){for(var V,ue=-1,Ae=M.length;++ue<Ae;){var Je=j(M[ue]);Je!==t&&(V=V===t?Je:V+Je)}return V}function Gy(M,j){for(var V=-1,ue=Array(M);++V<M;)ue[V]=j(V);return ue}function _C(M,j){return ut(j,function(V){return[V,M[V]]})}function Vw(M){return M&&M.slice(0,zw(M)+1).replace(Fy,"")}function Or(M){return function(j){return M(j)}}function Ky(M,j){return ut(j,function(V){return M[V]})}function Fc(M,j){return M.has(j)}function Ww(M,j){for(var V=-1,ue=M.length;++V<ue&&Oa(j,M[V],0)>-1;);return V}function $w(M,j){for(var V=M.length;V--&&Oa(j,M[V],0)>-1;);return V}function RC(M,j){for(var V=M.length,ue=0;V--;)M[V]===j&&++ue;return ue}var kC=zy(uC),AC=zy(pC);function PC(M){return"\\"+fC[M]}function LC(M,j){return M==null?t:M[j]}function Na(M){return aC.test(M)}function MC(M){return sC.test(M)}function DC(M){for(var j,V=[];!(j=M.next()).done;)V.push(j.value);return V}function Qy(M){var j=-1,V=Array(M.size);return M.forEach(function(ue,Ae){V[++j]=[Ae,ue]}),V}function jw(M,j){return function(V){return M(j(V))}}function zi(M,j){for(var V=-1,ue=M.length,Ae=0,Je=[];++V<ue;){var Ft=M[V];(Ft===j||Ft===u)&&(M[V]=u,Je[Ae++]=V)}return Je}function ju(M){var j=-1,V=Array(M.size);return M.forEach(function(ue){V[++j]=ue}),V}function FC(M){var j=-1,V=Array(M.size);return M.forEach(function(ue){V[++j]=[ue,ue]}),V}function CC(M,j,V){for(var ue=V-1,Ae=M.length;++ue<Ae;)if(M[ue]===j)return ue;return-1}function IC(M,j,V){for(var ue=V+1;ue--;)if(M[ue]===j)return ue;return ue}function Ua(M){return Na(M)?NC(M):SC(M)}function kn(M){return Na(M)?UC(M):vC(M)}function zw(M){for(var j=M.length;j--&&R1.test(M.charAt(j)););return j}var OC=zy(mC);function NC(M){for(var j=Uy.lastIndex=0;Uy.test(M);)++j;return j}function UC(M){return M.match(Uy)||[]}function HC(M){return M.match(oC)||[]}var BC=function M(j){j=j==null?Nt:qi.defaults(Nt.Object(),j,qi.pick(Nt,cC));var V=j.Array,ue=j.Date,Ae=j.Error,Je=j.Function,Ft=j.Math,it=j.Object,Yy=j.RegExp,VC=j.String,rn=j.TypeError,zu=V.prototype,WC=Je.prototype,Ha=it.prototype,qu=j["__core-js_shared__"],Gu=WC.toString,tt=Ha.hasOwnProperty,$C=0,qw=function(){var a=/[^.]+$/.exec(qu&&qu.keys&&qu.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Ku=Ha.toString,jC=Gu.call(it),zC=Nt._,qC=Yy("^"+Gu.call(tt).replace(Dy,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qu=Pw?j.Buffer:t,Gi=j.Symbol,Yu=j.Uint8Array,Gw=Qu?Qu.allocUnsafe:t,Zu=jw(it.getPrototypeOf,it),Kw=it.create,Qw=Ha.propertyIsEnumerable,Ju=zu.splice,Yw=Gi?Gi.isConcatSpreadable:t,Cc=Gi?Gi.iterator:t,Oo=Gi?Gi.toStringTag:t,Xu=function(){try{var a=Vo(it,"defineProperty");return a({},"",{}),a}catch{}}(),GC=j.clearTimeout!==Nt.clearTimeout&&j.clearTimeout,KC=ue&&ue.now!==Nt.Date.now&&ue.now,QC=j.setTimeout!==Nt.setTimeout&&j.setTimeout,ep=Ft.ceil,tp=Ft.floor,Zy=it.getOwnPropertySymbols,YC=Qu?Qu.isBuffer:t,Zw=j.isFinite,ZC=zu.join,JC=jw(it.keys,it),Ct=Ft.max,tr=Ft.min,XC=ue.now,eI=j.parseInt,Jw=Ft.random,tI=zu.reverse,Jy=Vo(j,"DataView"),Ic=Vo(j,"Map"),Xy=Vo(j,"Promise"),Ba=Vo(j,"Set"),Oc=Vo(j,"WeakMap"),Nc=Vo(it,"create"),rp=Oc&&new Oc,Va={},rI=Wo(Jy),nI=Wo(Ic),iI=Wo(Xy),oI=Wo(Ba),aI=Wo(Oc),np=Gi?Gi.prototype:t,Uc=np?np.valueOf:t,Xw=np?np.toString:t;function T(a){if(St(a)&&!Pe(a)&&!(a instanceof ze)){if(a instanceof nn)return a;if(tt.call(a,"__wrapped__"))return eE(a)}return new nn(a)}var Wa=function(){function a(){}return function(c){if(!ht(c))return{};if(Kw)return Kw(c);a.prototype=c;var p=new a;return a.prototype=t,p}}();function ip(){}function nn(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:S1,evaluate:v1,interpolate:cw,variable:"",imports:{_:T}},T.prototype=ip.prototype,T.prototype.constructor=T,nn.prototype=Wa(ip.prototype),nn.prototype.constructor=nn;function ze(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Z,this.__views__=[]}function sI(){var a=new ze(this.__wrapped__);return a.__actions__=br(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=br(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=br(this.__views__),a}function cI(){if(this.__filtered__){var a=new ze(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function lI(){var a=this.__wrapped__.value(),c=this.__dir__,p=Pe(a),f=c<0,h=p?a.length:0,S=vO(0,h,this.__views__),_=S.start,A=S.end,F=A-_,K=f?A:_-1,Q=this.__iteratees__,te=Q.length,ae=0,de=tr(F,this.__takeCount__);if(!p||!f&&h==F&&de==F)return w0(a,this.__actions__);var ve=[];e:for(;F--&&ae<de;){K+=c;for(var Ce=-1,be=a[K];++Ce<te;){var Be=Q[Ce],qe=Be.iteratee,Hr=Be.type,pr=qe(be);if(Hr==q)be=pr;else if(!pr){if(Hr==L)continue e;break e}}ve[ae++]=be}return ve}ze.prototype=Wa(ip.prototype),ze.prototype.constructor=ze;function No(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function uI(){this.__data__=Nc?Nc(null):{},this.size=0}function pI(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function mI(a){var c=this.__data__;if(Nc){var p=c[a];return p===s?t:p}return tt.call(c,a)?c[a]:t}function fI(a){var c=this.__data__;return Nc?c[a]!==t:tt.call(c,a)}function dI(a,c){var p=this.__data__;return this.size+=this.has(a)?0:1,p[a]=Nc&&c===t?s:c,this}No.prototype.clear=uI,No.prototype.delete=pI,No.prototype.get=mI,No.prototype.has=fI,No.prototype.set=dI;function xi(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function gI(){this.__data__=[],this.size=0}function hI(a){var c=this.__data__,p=op(c,a);if(p<0)return!1;var f=c.length-1;return p==f?c.pop():Ju.call(c,p,1),--this.size,!0}function yI(a){var c=this.__data__,p=op(c,a);return p<0?t:c[p][1]}function TI(a){return op(this.__data__,a)>-1}function xI(a,c){var p=this.__data__,f=op(p,a);return f<0?(++this.size,p.push([a,c])):p[f][1]=c,this}xi.prototype.clear=gI,xi.prototype.delete=hI,xi.prototype.get=yI,xi.prototype.has=TI,xi.prototype.set=xI;function Si(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function SI(){this.size=0,this.__data__={hash:new No,map:new(Ic||xi),string:new No}}function vI(a){var c=yp(this,a).delete(a);return this.size-=c?1:0,c}function bI(a){return yp(this,a).get(a)}function wI(a){return yp(this,a).has(a)}function EI(a,c){var p=yp(this,a),f=p.size;return p.set(a,c),this.size+=p.size==f?0:1,this}Si.prototype.clear=SI,Si.prototype.delete=vI,Si.prototype.get=bI,Si.prototype.has=wI,Si.prototype.set=EI;function Uo(a){var c=-1,p=a==null?0:a.length;for(this.__data__=new Si;++c<p;)this.add(a[c])}function _I(a){return this.__data__.set(a,s),this}function RI(a){return this.__data__.has(a)}Uo.prototype.add=Uo.prototype.push=_I,Uo.prototype.has=RI;function An(a){var c=this.__data__=new xi(a);this.size=c.size}function kI(){this.__data__=new xi,this.size=0}function AI(a){var c=this.__data__,p=c.delete(a);return this.size=c.size,p}function PI(a){return this.__data__.get(a)}function LI(a){return this.__data__.has(a)}function MI(a,c){var p=this.__data__;if(p instanceof xi){var f=p.__data__;if(!Ic||f.length<r-1)return f.push([a,c]),this.size=++p.size,this;p=this.__data__=new Si(f)}return p.set(a,c),this.size=p.size,this}An.prototype.clear=kI,An.prototype.delete=AI,An.prototype.get=PI,An.prototype.has=LI,An.prototype.set=MI;function e0(a,c){var p=Pe(a),f=!p&&$o(a),h=!p&&!f&&Ji(a),S=!p&&!f&&!h&&qa(a),_=p||f||h||S,A=_?Gy(a.length,VC):[],F=A.length;for(var K in a)(c||tt.call(a,K))&&!(_&&(K=="length"||h&&(K=="offset"||K=="parent")||S&&(K=="buffer"||K=="byteLength"||K=="byteOffset")||Ei(K,F)))&&A.push(K);return A}function t0(a){var c=a.length;return c?a[uT(0,c-1)]:t}function DI(a,c){return Tp(br(a),Ho(c,0,a.length))}function FI(a){return Tp(br(a))}function eT(a,c,p){(p!==t&&!Pn(a[c],p)||p===t&&!(c in a))&&vi(a,c,p)}function Hc(a,c,p){var f=a[c];(!(tt.call(a,c)&&Pn(f,p))||p===t&&!(c in a))&&vi(a,c,p)}function op(a,c){for(var p=a.length;p--;)if(Pn(a[p][0],c))return p;return-1}function CI(a,c,p,f){return Ki(a,function(h,S,_){c(f,h,p(h),_)}),f}function r0(a,c){return a&&Gn(c,Ut(c),a)}function II(a,c){return a&&Gn(c,Er(c),a)}function vi(a,c,p){c=="__proto__"&&Xu?Xu(a,c,{configurable:!0,enumerable:!0,value:p,writable:!0}):a[c]=p}function tT(a,c){for(var p=-1,f=c.length,h=V(f),S=a==null;++p<f;)h[p]=S?t:IT(a,c[p]);return h}function Ho(a,c,p){return a===a&&(p!==t&&(a=a<=p?a:p),c!==t&&(a=a>=c?a:c)),a}function on(a,c,p,f,h,S){var _,A=c&m,F=c&d,K=c&g;if(p&&(_=h?p(a,f,h,S):p(a)),_!==t)return _;if(!ht(a))return a;var Q=Pe(a);if(Q){if(_=wO(a),!A)return br(a,_)}else{var te=rr(a),ae=te==Fa||te==iw;if(Ji(a))return R0(a,A);if(te==Ti||te==Ze||ae&&!h){if(_=F||ae?{}:z0(a),!A)return F?mO(a,II(_,a)):pO(a,r0(_,a))}else{if(!ot[te])return h?a:{};_=EO(a,te,A)}}S||(S=new An);var de=S.get(a);if(de)return de;S.set(a,_),SE(a)?a.forEach(function(be){_.add(on(be,c,p,be,a,S))}):TE(a)&&a.forEach(function(be,Be){_.set(Be,on(be,c,p,Be,a,S))});var ve=K?F?vT:ST:F?Er:Ut,Ce=Q?t:ve(a);return tn(Ce||a,function(be,Be){Ce&&(Be=be,be=a[Be]),Hc(_,Be,on(be,c,p,Be,a,S))}),_}function OI(a){var c=Ut(a);return function(p){return n0(p,a,c)}}function n0(a,c,p){var f=p.length;if(a==null)return!f;for(a=it(a);f--;){var h=p[f],S=c[h],_=a[h];if(_===t&&!(h in a)||!S(_))return!1}return!0}function i0(a,c,p){if(typeof a!="function")throw new rn(i);return qc(function(){a.apply(t,p)},c)}function Bc(a,c,p,f){var h=-1,S=Wu,_=!0,A=a.length,F=[],K=c.length;if(!A)return F;p&&(c=ut(c,Or(p))),f?(S=Vy,_=!1):c.length>=r&&(S=Fc,_=!1,c=new Uo(c));e:for(;++h<A;){var Q=a[h],te=p==null?Q:p(Q);if(Q=f||Q!==0?Q:0,_&&te===te){for(var ae=K;ae--;)if(c[ae]===te)continue e;F.push(Q)}else S(c,te,f)||F.push(Q)}return F}var Ki=M0(qn),o0=M0(nT,!0);function NI(a,c){var p=!0;return Ki(a,function(f,h,S){return p=!!c(f,h,S),p}),p}function ap(a,c,p){for(var f=-1,h=a.length;++f<h;){var S=a[f],_=c(S);if(_!=null&&(A===t?_===_&&!Ur(_):p(_,A)))var A=_,F=S}return F}function UI(a,c,p,f){var h=a.length;for(p=De(p),p<0&&(p=-p>h?0:h+p),f=f===t||f>h?h:De(f),f<0&&(f+=h),f=p>f?0:bE(f);p<f;)a[p++]=c;return a}function a0(a,c){var p=[];return Ki(a,function(f,h,S){c(f,h,S)&&p.push(f)}),p}function Gt(a,c,p,f,h){var S=-1,_=a.length;for(p||(p=RO),h||(h=[]);++S<_;){var A=a[S];c>0&&p(A)?c>1?Gt(A,c-1,p,f,h):ji(h,A):f||(h[h.length]=A)}return h}var rT=D0(),s0=D0(!0);function qn(a,c){return a&&rT(a,c,Ut)}function nT(a,c){return a&&s0(a,c,Ut)}function sp(a,c){return $i(c,function(p){return _i(a[p])})}function Bo(a,c){c=Yi(c,a);for(var p=0,f=c.length;a!=null&&p<f;)a=a[Kn(c[p++])];return p&&p==f?a:t}function c0(a,c,p){var f=c(a);return Pe(a)?f:ji(f,p(a))}function lr(a){return a==null?a===t?f1:p1:Oo&&Oo in it(a)?SO(a):FO(a)}function iT(a,c){return a>c}function HI(a,c){return a!=null&&tt.call(a,c)}function BI(a,c){return a!=null&&c in it(a)}function VI(a,c,p){return a>=tr(c,p)&&a<Ct(c,p)}function oT(a,c,p){for(var f=p?Vy:Wu,h=a[0].length,S=a.length,_=S,A=V(S),F=1/0,K=[];_--;){var Q=a[_];_&&c&&(Q=ut(Q,Or(c))),F=tr(Q.length,F),A[_]=!p&&(c||h>=120&&Q.length>=120)?new Uo(_&&Q):t}Q=a[0];var te=-1,ae=A[0];e:for(;++te<h&&K.length<F;){var de=Q[te],ve=c?c(de):de;if(de=p||de!==0?de:0,!(ae?Fc(ae,ve):f(K,ve,p))){for(_=S;--_;){var Ce=A[_];if(!(Ce?Fc(Ce,ve):f(a[_],ve,p)))continue e}ae&&ae.push(ve),K.push(de)}}return K}function WI(a,c,p,f){return qn(a,function(h,S,_){c(f,p(h),S,_)}),f}function Vc(a,c,p){c=Yi(c,a),a=Q0(a,c);var f=a==null?a:a[Kn(sn(c))];return f==null?t:Ir(f,a,p)}function l0(a){return St(a)&&lr(a)==Ze}function $I(a){return St(a)&&lr(a)==Dc}function jI(a){return St(a)&&lr(a)==Xr}function Wc(a,c,p,f,h){return a===c?!0:a==null||c==null||!St(a)&&!St(c)?a!==a&&c!==c:zI(a,c,p,f,Wc,h)}function zI(a,c,p,f,h,S){var _=Pe(a),A=Pe(c),F=_?He:rr(a),K=A?He:rr(c);F=F==Ze?Ti:F,K=K==Ze?Ti:K;var Q=F==Ti,te=K==Ti,ae=F==K;if(ae&&Ji(a)){if(!Ji(c))return!1;_=!0,Q=!1}if(ae&&!Q)return S||(S=new An),_||qa(a)?W0(a,c,p,f,h,S):TO(a,c,F,p,f,h,S);if(!(p&y)){var de=Q&&tt.call(a,"__wrapped__"),ve=te&&tt.call(c,"__wrapped__");if(de||ve){var Ce=de?a.value():a,be=ve?c.value():c;return S||(S=new An),h(Ce,be,p,f,S)}}return ae?(S||(S=new An),xO(a,c,p,f,h,S)):!1}function qI(a){return St(a)&&rr(a)==_n}function aT(a,c,p,f){var h=p.length,S=h,_=!f;if(a==null)return!S;for(a=it(a);h--;){var A=p[h];if(_&&A[2]?A[1]!==a[A[0]]:!(A[0]in a))return!1}for(;++h<S;){A=p[h];var F=A[0],K=a[F],Q=A[1];if(_&&A[2]){if(K===t&&!(F in a))return!1}else{var te=new An;if(f)var ae=f(K,Q,F,a,c,te);if(!(ae===t?Wc(Q,K,y|x,f,te):ae))return!1}}return!0}function u0(a){if(!ht(a)||AO(a))return!1;var c=_i(a)?qC:O1;return c.test(Wo(a))}function GI(a){return St(a)&&lr(a)==Pc}function KI(a){return St(a)&&rr(a)==Rn}function QI(a){return St(a)&&Ep(a.length)&&!!at[lr(a)]}function p0(a){return typeof a=="function"?a:a==null?_r:typeof a=="object"?Pe(a)?d0(a[0],a[1]):f0(a):FE(a)}function sT(a){if(!zc(a))return JC(a);var c=[];for(var p in it(a))tt.call(a,p)&&p!="constructor"&&c.push(p);return c}function YI(a){if(!ht(a))return DO(a);var c=zc(a),p=[];for(var f in a)f=="constructor"&&(c||!tt.call(a,f))||p.push(f);return p}function cT(a,c){return a<c}function m0(a,c){var p=-1,f=wr(a)?V(a.length):[];return Ki(a,function(h,S,_){f[++p]=c(h,S,_)}),f}function f0(a){var c=wT(a);return c.length==1&&c[0][2]?G0(c[0][0],c[0][1]):function(p){return p===a||aT(p,a,c)}}function d0(a,c){return _T(a)&&q0(c)?G0(Kn(a),c):function(p){var f=IT(p,a);return f===t&&f===c?OT(p,a):Wc(c,f,y|x)}}function cp(a,c,p,f,h){a!==c&&rT(c,function(S,_){if(h||(h=new An),ht(S))ZI(a,c,_,p,cp,f,h);else{var A=f?f(kT(a,_),S,_+"",a,c,h):t;A===t&&(A=S),eT(a,_,A)}},Er)}function ZI(a,c,p,f,h,S,_){var A=kT(a,p),F=kT(c,p),K=_.get(F);if(K){eT(a,p,K);return}var Q=S?S(A,F,p+"",a,c,_):t,te=Q===t;if(te){var ae=Pe(F),de=!ae&&Ji(F),ve=!ae&&!de&&qa(F);Q=F,ae||de||ve?Pe(A)?Q=A:Et(A)?Q=br(A):de?(te=!1,Q=R0(F,!0)):ve?(te=!1,Q=k0(F,!0)):Q=[]:Gc(F)||$o(F)?(Q=A,$o(A)?Q=wE(A):(!ht(A)||_i(A))&&(Q=z0(F))):te=!1}te&&(_.set(F,Q),h(Q,F,f,S,_),_.delete(F)),eT(a,p,Q)}function g0(a,c){var p=a.length;if(p)return c+=c<0?p:0,Ei(c,p)?a[c]:t}function h0(a,c,p){c.length?c=ut(c,function(S){return Pe(S)?function(_){return Bo(_,S.length===1?S[0]:S)}:S}):c=[_r];var f=-1;c=ut(c,Or(xe()));var h=m0(a,function(S,_,A){var F=ut(c,function(K){return K(S)});return{criteria:F,index:++f,value:S}});return EC(h,function(S,_){return uO(S,_,p)})}function JI(a,c){return y0(a,c,function(p,f){return OT(a,f)})}function y0(a,c,p){for(var f=-1,h=c.length,S={};++f<h;){var _=c[f],A=Bo(a,_);p(A,_)&&$c(S,Yi(_,a),A)}return S}function XI(a){return function(c){return Bo(c,a)}}function lT(a,c,p,f){var h=f?wC:Oa,S=-1,_=c.length,A=a;for(a===c&&(c=br(c)),p&&(A=ut(a,Or(p)));++S<_;)for(var F=0,K=c[S],Q=p?p(K):K;(F=h(A,Q,F,f))>-1;)A!==a&&Ju.call(A,F,1),Ju.call(a,F,1);return a}function T0(a,c){for(var p=a?c.length:0,f=p-1;p--;){var h=c[p];if(p==f||h!==S){var S=h;Ei(h)?Ju.call(a,h,1):fT(a,h)}}return a}function uT(a,c){return a+tp(Jw()*(c-a+1))}function eO(a,c,p,f){for(var h=-1,S=Ct(ep((c-a)/(p||1)),0),_=V(S);S--;)_[f?S:++h]=a,a+=p;return _}function pT(a,c){var p="";if(!a||c<1||c>U)return p;do c%2&&(p+=a),c=tp(c/2),c&&(a+=a);while(c);return p}function Oe(a,c){return AT(K0(a,c,_r),a+"")}function tO(a){return t0(Ga(a))}function rO(a,c){var p=Ga(a);return Tp(p,Ho(c,0,p.length))}function $c(a,c,p,f){if(!ht(a))return a;c=Yi(c,a);for(var h=-1,S=c.length,_=S-1,A=a;A!=null&&++h<S;){var F=Kn(c[h]),K=p;if(F==="__proto__"||F==="constructor"||F==="prototype")return a;if(h!=_){var Q=A[F];K=f?f(Q,F,A):t,K===t&&(K=ht(Q)?Q:Ei(c[h+1])?[]:{})}Hc(A,F,K),A=A[F]}return a}var x0=rp?function(a,c){return rp.set(a,c),a}:_r,nO=Xu?function(a,c){return Xu(a,"toString",{configurable:!0,enumerable:!1,value:UT(c),writable:!0})}:_r;function iO(a){return Tp(Ga(a))}function an(a,c,p){var f=-1,h=a.length;c<0&&(c=-c>h?0:h+c),p=p>h?h:p,p<0&&(p+=h),h=c>p?0:p-c>>>0,c>>>=0;for(var S=V(h);++f<h;)S[f]=a[f+c];return S}function oO(a,c){var p;return Ki(a,function(f,h,S){return p=c(f,h,S),!p}),!!p}function lp(a,c,p){var f=0,h=a==null?f:a.length;if(typeof c=="number"&&c===c&&h<=Ee){for(;f<h;){var S=f+h>>>1,_=a[S];_!==null&&!Ur(_)&&(p?_<=c:_<c)?f=S+1:h=S}return h}return mT(a,c,_r,p)}function mT(a,c,p,f){var h=0,S=a==null?0:a.length;if(S===0)return 0;c=p(c);for(var _=c!==c,A=c===null,F=Ur(c),K=c===t;h<S;){var Q=tp((h+S)/2),te=p(a[Q]),ae=te!==t,de=te===null,ve=te===te,Ce=Ur(te);if(_)var be=f||ve;else K?be=ve&&(f||ae):A?be=ve&&ae&&(f||!de):F?be=ve&&ae&&!de&&(f||!Ce):de||Ce?be=!1:be=f?te<=c:te<c;be?h=Q+1:S=Q}return tr(S,ne)}function S0(a,c){for(var p=-1,f=a.length,h=0,S=[];++p<f;){var _=a[p],A=c?c(_):_;if(!p||!Pn(A,F)){var F=A;S[h++]=_===0?0:_}}return S}function v0(a){return typeof a=="number"?a:Ur(a)?X:+a}function Nr(a){if(typeof a=="string")return a;if(Pe(a))return ut(a,Nr)+"";if(Ur(a))return Xw?Xw.call(a):"";var c=a+"";return c=="0"&&1/a==-C?"-0":c}function Qi(a,c,p){var f=-1,h=Wu,S=a.length,_=!0,A=[],F=A;if(p)_=!1,h=Vy;else if(S>=r){var K=c?null:hO(a);if(K)return ju(K);_=!1,h=Fc,F=new Uo}else F=c?[]:A;e:for(;++f<S;){var Q=a[f],te=c?c(Q):Q;if(Q=p||Q!==0?Q:0,_&&te===te){for(var ae=F.length;ae--;)if(F[ae]===te)continue e;c&&F.push(te),A.push(Q)}else h(F,te,p)||(F!==A&&F.push(te),A.push(Q))}return A}function fT(a,c){return c=Yi(c,a),a=Q0(a,c),a==null||delete a[Kn(sn(c))]}function b0(a,c,p,f){return $c(a,c,p(Bo(a,c)),f)}function up(a,c,p,f){for(var h=a.length,S=f?h:-1;(f?S--:++S<h)&&c(a[S],S,a););return p?an(a,f?0:S,f?S+1:h):an(a,f?S+1:0,f?h:S)}function w0(a,c){var p=a;return p instanceof ze&&(p=p.value()),Wy(c,function(f,h){return h.func.apply(h.thisArg,ji([f],h.args))},p)}function dT(a,c,p){var f=a.length;if(f<2)return f?Qi(a[0]):[];for(var h=-1,S=V(f);++h<f;)for(var _=a[h],A=-1;++A<f;)A!=h&&(S[h]=Bc(S[h]||_,a[A],c,p));return Qi(Gt(S,1),c,p)}function E0(a,c,p){for(var f=-1,h=a.length,S=c.length,_={};++f<h;){var A=f<S?c[f]:t;p(_,a[f],A)}return _}function gT(a){return Et(a)?a:[]}function hT(a){return typeof a=="function"?a:_r}function Yi(a,c){return Pe(a)?a:_T(a,c)?[a]:X0(et(a))}var aO=Oe;function Zi(a,c,p){var f=a.length;return p=p===t?f:p,!c&&p>=f?a:an(a,c,p)}var _0=GC||function(a){return Nt.clearTimeout(a)};function R0(a,c){if(c)return a.slice();var p=a.length,f=Gw?Gw(p):new a.constructor(p);return a.copy(f),f}function yT(a){var c=new a.constructor(a.byteLength);return new Yu(c).set(new Yu(a)),c}function sO(a,c){var p=c?yT(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.byteLength)}function cO(a){var c=new a.constructor(a.source,lw.exec(a));return c.lastIndex=a.lastIndex,c}function lO(a){return Uc?it(Uc.call(a)):{}}function k0(a,c){var p=c?yT(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.length)}function A0(a,c){if(a!==c){var p=a!==t,f=a===null,h=a===a,S=Ur(a),_=c!==t,A=c===null,F=c===c,K=Ur(c);if(!A&&!K&&!S&&a>c||S&&_&&F&&!A&&!K||f&&_&&F||!p&&F||!h)return 1;if(!f&&!S&&!K&&a<c||K&&p&&h&&!f&&!S||A&&p&&h||!_&&h||!F)return-1}return 0}function uO(a,c,p){for(var f=-1,h=a.criteria,S=c.criteria,_=h.length,A=p.length;++f<_;){var F=A0(h[f],S[f]);if(F){if(f>=A)return F;var K=p[f];return F*(K=="desc"?-1:1)}}return a.index-c.index}function P0(a,c,p,f){for(var h=-1,S=a.length,_=p.length,A=-1,F=c.length,K=Ct(S-_,0),Q=V(F+K),te=!f;++A<F;)Q[A]=c[A];for(;++h<_;)(te||h<S)&&(Q[p[h]]=a[h]);for(;K--;)Q[A++]=a[h++];return Q}function L0(a,c,p,f){for(var h=-1,S=a.length,_=-1,A=p.length,F=-1,K=c.length,Q=Ct(S-A,0),te=V(Q+K),ae=!f;++h<Q;)te[h]=a[h];for(var de=h;++F<K;)te[de+F]=c[F];for(;++_<A;)(ae||h<S)&&(te[de+p[_]]=a[h++]);return te}function br(a,c){var p=-1,f=a.length;for(c||(c=V(f));++p<f;)c[p]=a[p];return c}function Gn(a,c,p,f){var h=!p;p||(p={});for(var S=-1,_=c.length;++S<_;){var A=c[S],F=f?f(p[A],a[A],A,p,a):t;F===t&&(F=a[A]),h?vi(p,A,F):Hc(p,A,F)}return p}function pO(a,c){return Gn(a,ET(a),c)}function mO(a,c){return Gn(a,$0(a),c)}function pp(a,c){return function(p,f){var h=Pe(p)?yC:CI,S=c?c():{};return h(p,a,xe(f,2),S)}}function $a(a){return Oe(function(c,p){var f=-1,h=p.length,S=h>1?p[h-1]:t,_=h>2?p[2]:t;for(S=a.length>3&&typeof S=="function"?(h--,S):t,_&&ur(p[0],p[1],_)&&(S=h<3?t:S,h=1),c=it(c);++f<h;){var A=p[f];A&&a(c,A,f,S)}return c})}function M0(a,c){return function(p,f){if(p==null)return p;if(!wr(p))return a(p,f);for(var h=p.length,S=c?h:-1,_=it(p);(c?S--:++S<h)&&f(_[S],S,_)!==!1;);return p}}function D0(a){return function(c,p,f){for(var h=-1,S=it(c),_=f(c),A=_.length;A--;){var F=_[a?A:++h];if(p(S[F],F,S)===!1)break}return c}}function fO(a,c,p){var f=c&E,h=jc(a);function S(){var _=this&&this!==Nt&&this instanceof S?h:a;return _.apply(f?p:this,arguments)}return S}function F0(a){return function(c){c=et(c);var p=Na(c)?kn(c):t,f=p?p[0]:c.charAt(0),h=p?Zi(p,1).join(""):c.slice(1);return f[a]()+h}}function ja(a){return function(c){return Wy(ME(LE(c).replace(nC,"")),a,"")}}function jc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var p=Wa(a.prototype),f=a.apply(p,c);return ht(f)?f:p}}function dO(a,c,p){var f=jc(a);function h(){for(var S=arguments.length,_=V(S),A=S,F=za(h);A--;)_[A]=arguments[A];var K=S<3&&_[0]!==F&&_[S-1]!==F?[]:zi(_,F);if(S-=K.length,S<p)return U0(a,c,mp,h.placeholder,t,_,K,t,t,p-S);var Q=this&&this!==Nt&&this instanceof h?f:a;return Ir(Q,this,_)}return h}function C0(a){return function(c,p,f){var h=it(c);if(!wr(c)){var S=xe(p,3);c=Ut(c),p=function(A){return S(h[A],A,h)}}var _=a(c,p,f);return _>-1?h[S?c[_]:_]:t}}function I0(a){return wi(function(c){var p=c.length,f=p,h=nn.prototype.thru;for(a&&c.reverse();f--;){var S=c[f];if(typeof S!="function")throw new rn(i);if(h&&!_&&hp(S)=="wrapper")var _=new nn([],!0)}for(f=_?f:p;++f<p;){S=c[f];var A=hp(S),F=A=="wrapper"?bT(S):t;F&&RT(F[0])&&F[1]==(ge|W|ie|we)&&!F[4].length&&F[9]==1?_=_[hp(F[0])].apply(_,F[3]):_=S.length==1&&RT(S)?_[A]():_.thru(S)}return function(){var K=arguments,Q=K[0];if(_&&K.length==1&&Pe(Q))return _.plant(Q).value();for(var te=0,ae=p?c[te].apply(this,K):Q;++te<p;)ae=c[te].call(this,ae);return ae}})}function mp(a,c,p,f,h,S,_,A,F,K){var Q=c&ge,te=c&E,ae=c&w,de=c&(W|G),ve=c&Pt,Ce=ae?t:jc(a);function be(){for(var Be=arguments.length,qe=V(Be),Hr=Be;Hr--;)qe[Hr]=arguments[Hr];if(de)var pr=za(be),Br=RC(qe,pr);if(f&&(qe=P0(qe,f,h,de)),S&&(qe=L0(qe,S,_,de)),Be-=Br,de&&Be<K){var _t=zi(qe,pr);return U0(a,c,mp,be.placeholder,p,qe,_t,A,F,K-Be)}var Ln=te?p:this,ki=ae?Ln[a]:a;return Be=qe.length,A?qe=CO(qe,A):ve&&Be>1&&qe.reverse(),Q&&F<Be&&(qe.length=F),this&&this!==Nt&&this instanceof be&&(ki=Ce||jc(ki)),ki.apply(Ln,qe)}return be}function O0(a,c){return function(p,f){return WI(p,a,c(f),{})}}function fp(a,c){return function(p,f){var h;if(p===t&&f===t)return c;if(p!==t&&(h=p),f!==t){if(h===t)return f;typeof p=="string"||typeof f=="string"?(p=Nr(p),f=Nr(f)):(p=v0(p),f=v0(f)),h=a(p,f)}return h}}function TT(a){return wi(function(c){return c=ut(c,Or(xe())),Oe(function(p){var f=this;return a(c,function(h){return Ir(h,f,p)})})})}function dp(a,c){c=c===t?" ":Nr(c);var p=c.length;if(p<2)return p?pT(c,a):c;var f=pT(c,ep(a/Ua(c)));return Na(c)?Zi(kn(f),0,a).join(""):f.slice(0,a)}function gO(a,c,p,f){var h=c&E,S=jc(a);function _(){for(var A=-1,F=arguments.length,K=-1,Q=f.length,te=V(Q+F),ae=this&&this!==Nt&&this instanceof _?S:a;++K<Q;)te[K]=f[K];for(;F--;)te[K++]=arguments[++A];return Ir(ae,h?p:this,te)}return _}function N0(a){return function(c,p,f){return f&&typeof f!="number"&&ur(c,p,f)&&(p=f=t),c=Ri(c),p===t?(p=c,c=0):p=Ri(p),f=f===t?c<p?1:-1:Ri(f),eO(c,p,f,a)}}function gp(a){return function(c,p){return typeof c=="string"&&typeof p=="string"||(c=cn(c),p=cn(p)),a(c,p)}}function U0(a,c,p,f,h,S,_,A,F,K){var Q=c&W,te=Q?_:t,ae=Q?t:_,de=Q?S:t,ve=Q?t:S;c|=Q?ie:se,c&=~(Q?se:ie),c&H||(c&=~(E|w));var Ce=[a,c,h,de,te,ve,ae,A,F,K],be=p.apply(t,Ce);return RT(a)&&Y0(be,Ce),be.placeholder=f,Z0(be,a,c)}function xT(a){var c=Ft[a];return function(p,f){if(p=cn(p),f=f==null?0:tr(De(f),292),f&&Zw(p)){var h=(et(p)+"e").split("e"),S=c(h[0]+"e"+(+h[1]+f));return h=(et(S)+"e").split("e"),+(h[0]+"e"+(+h[1]-f))}return c(p)}}var hO=Ba&&1/ju(new Ba([,-0]))[1]==C?function(a){return new Ba(a)}:VT;function H0(a){return function(c){var p=rr(c);return p==_n?Qy(c):p==Rn?FC(c):_C(c,a(c))}}function bi(a,c,p,f,h,S,_,A){var F=c&w;if(!F&&typeof a!="function")throw new rn(i);var K=f?f.length:0;if(K||(c&=~(ie|se),f=h=t),_=_===t?_:Ct(De(_),0),A=A===t?A:De(A),K-=h?h.length:0,c&se){var Q=f,te=h;f=h=t}var ae=F?t:bT(a),de=[a,c,p,f,h,Q,te,S,_,A];if(ae&&MO(de,ae),a=de[0],c=de[1],p=de[2],f=de[3],h=de[4],A=de[9]=de[9]===t?F?0:a.length:Ct(de[9]-K,0),!A&&c&(W|G)&&(c&=~(W|G)),!c||c==E)var ve=fO(a,c,p);else c==W||c==G?ve=dO(a,c,A):(c==ie||c==(E|ie))&&!h.length?ve=gO(a,c,p,f):ve=mp.apply(t,de);var Ce=ae?x0:Y0;return Z0(Ce(ve,de),a,c)}function B0(a,c,p,f){return a===t||Pn(a,Ha[p])&&!tt.call(f,p)?c:a}function V0(a,c,p,f,h,S){return ht(a)&&ht(c)&&(S.set(c,a),cp(a,c,t,V0,S),S.delete(c)),a}function yO(a){return Gc(a)?t:a}function W0(a,c,p,f,h,S){var _=p&y,A=a.length,F=c.length;if(A!=F&&!(_&&F>A))return!1;var K=S.get(a),Q=S.get(c);if(K&&Q)return K==c&&Q==a;var te=-1,ae=!0,de=p&x?new Uo:t;for(S.set(a,c),S.set(c,a);++te<A;){var ve=a[te],Ce=c[te];if(f)var be=_?f(Ce,ve,te,c,a,S):f(ve,Ce,te,a,c,S);if(be!==t){if(be)continue;ae=!1;break}if(de){if(!$y(c,function(Be,qe){if(!Fc(de,qe)&&(ve===Be||h(ve,Be,p,f,S)))return de.push(qe)})){ae=!1;break}}else if(!(ve===Ce||h(ve,Ce,p,f,S))){ae=!1;break}}return S.delete(a),S.delete(c),ae}function TO(a,c,p,f,h,S,_){switch(p){case Ca:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case Dc:return!(a.byteLength!=c.byteLength||!S(new Yu(a),new Yu(c)));case qt:case Xr:case Ac:return Pn(+a,+c);case yi:return a.name==c.name&&a.message==c.message;case Pc:case Lc:return a==c+"";case _n:var A=Qy;case Rn:var F=f&y;if(A||(A=ju),a.size!=c.size&&!F)return!1;var K=_.get(a);if(K)return K==c;f|=x,_.set(a,c);var Q=W0(A(a),A(c),f,h,S,_);return _.delete(a),Q;case Uu:if(Uc)return Uc.call(a)==Uc.call(c)}return!1}function xO(a,c,p,f,h,S){var _=p&y,A=ST(a),F=A.length,K=ST(c),Q=K.length;if(F!=Q&&!_)return!1;for(var te=F;te--;){var ae=A[te];if(!(_?ae in c:tt.call(c,ae)))return!1}var de=S.get(a),ve=S.get(c);if(de&&ve)return de==c&&ve==a;var Ce=!0;S.set(a,c),S.set(c,a);for(var be=_;++te<F;){ae=A[te];var Be=a[ae],qe=c[ae];if(f)var Hr=_?f(qe,Be,ae,c,a,S):f(Be,qe,ae,a,c,S);if(!(Hr===t?Be===qe||h(Be,qe,p,f,S):Hr)){Ce=!1;break}be||(be=ae=="constructor")}if(Ce&&!be){var pr=a.constructor,Br=c.constructor;pr!=Br&&"constructor"in a&&"constructor"in c&&!(typeof pr=="function"&&pr instanceof pr&&typeof Br=="function"&&Br instanceof Br)&&(Ce=!1)}return S.delete(a),S.delete(c),Ce}function wi(a){return AT(K0(a,t,nE),a+"")}function ST(a){return c0(a,Ut,ET)}function vT(a){return c0(a,Er,$0)}var bT=rp?function(a){return rp.get(a)}:VT;function hp(a){for(var c=a.name+"",p=Va[c],f=tt.call(Va,c)?p.length:0;f--;){var h=p[f],S=h.func;if(S==null||S==a)return h.name}return c}function za(a){var c=tt.call(T,"placeholder")?T:a;return c.placeholder}function xe(){var a=T.iteratee||HT;return a=a===HT?p0:a,arguments.length?a(arguments[0],arguments[1]):a}function yp(a,c){var p=a.__data__;return kO(c)?p[typeof c=="string"?"string":"hash"]:p.map}function wT(a){for(var c=Ut(a),p=c.length;p--;){var f=c[p],h=a[f];c[p]=[f,h,q0(h)]}return c}function Vo(a,c){var p=LC(a,c);return u0(p)?p:t}function SO(a){var c=tt.call(a,Oo),p=a[Oo];try{a[Oo]=t;var f=!0}catch{}var h=Ku.call(a);return f&&(c?a[Oo]=p:delete a[Oo]),h}var ET=Zy?function(a){return a==null?[]:(a=it(a),$i(Zy(a),function(c){return Qw.call(a,c)}))}:WT,$0=Zy?function(a){for(var c=[];a;)ji(c,ET(a)),a=Zu(a);return c}:WT,rr=lr;(Jy&&rr(new Jy(new ArrayBuffer(1)))!=Ca||Ic&&rr(new Ic)!=_n||Xy&&rr(Xy.resolve())!=ow||Ba&&rr(new Ba)!=Rn||Oc&&rr(new Oc)!=Mc)&&(rr=function(a){var c=lr(a),p=c==Ti?a.constructor:t,f=p?Wo(p):"";if(f)switch(f){case rI:return Ca;case nI:return _n;case iI:return ow;case oI:return Rn;case aI:return Mc}return c});function vO(a,c,p){for(var f=-1,h=p.length;++f<h;){var S=p[f],_=S.size;switch(S.type){case"drop":a+=_;break;case"dropRight":c-=_;break;case"take":c=tr(c,a+_);break;case"takeRight":a=Ct(a,c-_);break}}return{start:a,end:c}}function bO(a){var c=a.match(A1);return c?c[1].split(P1):[]}function j0(a,c,p){c=Yi(c,a);for(var f=-1,h=c.length,S=!1;++f<h;){var _=Kn(c[f]);if(!(S=a!=null&&p(a,_)))break;a=a[_]}return S||++f!=h?S:(h=a==null?0:a.length,!!h&&Ep(h)&&Ei(_,h)&&(Pe(a)||$o(a)))}function wO(a){var c=a.length,p=new a.constructor(c);return c&&typeof a[0]=="string"&&tt.call(a,"index")&&(p.index=a.index,p.input=a.input),p}function z0(a){return typeof a.constructor=="function"&&!zc(a)?Wa(Zu(a)):{}}function EO(a,c,p){var f=a.constructor;switch(c){case Dc:return yT(a);case qt:case Xr:return new f(+a);case Ca:return sO(a,p);case wy:case Ey:case _y:case Ry:case ky:case Ay:case Py:case Ly:case My:return k0(a,p);case _n:return new f;case Ac:case Lc:return new f(a);case Pc:return cO(a);case Rn:return new f;case Uu:return lO(a)}}function _O(a,c){var p=c.length;if(!p)return a;var f=p-1;return c[f]=(p>1?"& ":"")+c[f],c=c.join(p>2?", ":" "),a.replace(k1,`{
/* [wrapped with `+c+`] */
`)}function RO(a){return Pe(a)||$o(a)||!!(Yw&&a&&a[Yw])}function Ei(a,c){var p=typeof a;return c=c??U,!!c&&(p=="number"||p!="symbol"&&U1.test(a))&&a>-1&&a%1==0&&a<c}function ur(a,c,p){if(!ht(p))return!1;var f=typeof c;return(f=="number"?wr(p)&&Ei(c,p.length):f=="string"&&c in p)?Pn(p[c],a):!1}function _T(a,c){if(Pe(a))return!1;var p=typeof a;return p=="number"||p=="symbol"||p=="boolean"||a==null||Ur(a)?!0:w1.test(a)||!b1.test(a)||c!=null&&a in it(c)}function kO(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function RT(a){var c=hp(a),p=T[c];if(typeof p!="function"||!(c in ze.prototype))return!1;if(a===p)return!0;var f=bT(p);return!!f&&a===f[0]}function AO(a){return!!qw&&qw in a}var PO=qu?_i:$T;function zc(a){var c=a&&a.constructor,p=typeof c=="function"&&c.prototype||Ha;return a===p}function q0(a){return a===a&&!ht(a)}function G0(a,c){return function(p){return p==null?!1:p[a]===c&&(c!==t||a in it(p))}}function LO(a){var c=bp(a,function(f){return p.size===l&&p.clear(),f}),p=c.cache;return c}function MO(a,c){var p=a[1],f=c[1],h=p|f,S=h<(E|w|ge),_=f==ge&&p==W||f==ge&&p==we&&a[7].length<=c[8]||f==(ge|we)&&c[7].length<=c[8]&&p==W;if(!(S||_))return a;f&E&&(a[2]=c[2],h|=p&E?0:H);var A=c[3];if(A){var F=a[3];a[3]=F?P0(F,A,c[4]):A,a[4]=F?zi(a[3],u):c[4]}return A=c[5],A&&(F=a[5],a[5]=F?L0(F,A,c[6]):A,a[6]=F?zi(a[5],u):c[6]),A=c[7],A&&(a[7]=A),f&ge&&(a[8]=a[8]==null?c[8]:tr(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=h,a}function DO(a){var c=[];if(a!=null)for(var p in it(a))c.push(p);return c}function FO(a){return Ku.call(a)}function K0(a,c,p){return c=Ct(c===t?a.length-1:c,0),function(){for(var f=arguments,h=-1,S=Ct(f.length-c,0),_=V(S);++h<S;)_[h]=f[c+h];h=-1;for(var A=V(c+1);++h<c;)A[h]=f[h];return A[c]=p(_),Ir(a,this,A)}}function Q0(a,c){return c.length<2?a:Bo(a,an(c,0,-1))}function CO(a,c){for(var p=a.length,f=tr(c.length,p),h=br(a);f--;){var S=c[f];a[f]=Ei(S,p)?h[S]:t}return a}function kT(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var Y0=J0(x0),qc=QC||function(a,c){return Nt.setTimeout(a,c)},AT=J0(nO);function Z0(a,c,p){var f=c+"";return AT(a,_O(f,IO(bO(f),p)))}function J0(a){var c=0,p=0;return function(){var f=XC(),h=O-(f-p);if(p=f,h>0){if(++c>=B)return arguments[0]}else c=0;return a.apply(t,arguments)}}function Tp(a,c){var p=-1,f=a.length,h=f-1;for(c=c===t?f:c;++p<c;){var S=uT(p,h),_=a[S];a[S]=a[p],a[p]=_}return a.length=c,a}var X0=LO(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(E1,function(p,f,h,S){c.push(h?S.replace(D1,"$1"):f||p)}),c});function Kn(a){if(typeof a=="string"||Ur(a))return a;var c=a+"";return c=="0"&&1/a==-C?"-0":c}function Wo(a){if(a!=null){try{return Gu.call(a)}catch{}try{return a+""}catch{}}return""}function IO(a,c){return tn(Re,function(p){var f="_."+p[0];c&p[1]&&!Wu(a,f)&&a.push(f)}),a.sort()}function eE(a){if(a instanceof ze)return a.clone();var c=new nn(a.__wrapped__,a.__chain__);return c.__actions__=br(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function OO(a,c,p){(p?ur(a,c,p):c===t)?c=1:c=Ct(De(c),0);var f=a==null?0:a.length;if(!f||c<1)return[];for(var h=0,S=0,_=V(ep(f/c));h<f;)_[S++]=an(a,h,h+=c);return _}function NO(a){for(var c=-1,p=a==null?0:a.length,f=0,h=[];++c<p;){var S=a[c];S&&(h[f++]=S)}return h}function UO(){var a=arguments.length;if(!a)return[];for(var c=V(a-1),p=arguments[0],f=a;f--;)c[f-1]=arguments[f];return ji(Pe(p)?br(p):[p],Gt(c,1))}var HO=Oe(function(a,c){return Et(a)?Bc(a,Gt(c,1,Et,!0)):[]}),BO=Oe(function(a,c){var p=sn(c);return Et(p)&&(p=t),Et(a)?Bc(a,Gt(c,1,Et,!0),xe(p,2)):[]}),VO=Oe(function(a,c){var p=sn(c);return Et(p)&&(p=t),Et(a)?Bc(a,Gt(c,1,Et,!0),t,p):[]});function WO(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:De(c),an(a,c<0?0:c,f)):[]}function $O(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:De(c),c=f-c,an(a,0,c<0?0:c)):[]}function jO(a,c){return a&&a.length?up(a,xe(c,3),!0,!0):[]}function zO(a,c){return a&&a.length?up(a,xe(c,3),!0):[]}function qO(a,c,p,f){var h=a==null?0:a.length;return h?(p&&typeof p!="number"&&ur(a,c,p)&&(p=0,f=h),UI(a,c,p,f)):[]}function tE(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=p==null?0:De(p);return h<0&&(h=Ct(f+h,0)),$u(a,xe(c,3),h)}function rE(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=f-1;return p!==t&&(h=De(p),h=p<0?Ct(f+h,0):tr(h,f-1)),$u(a,xe(c,3),h,!0)}function nE(a){var c=a==null?0:a.length;return c?Gt(a,1):[]}function GO(a){var c=a==null?0:a.length;return c?Gt(a,C):[]}function KO(a,c){var p=a==null?0:a.length;return p?(c=c===t?1:De(c),Gt(a,c)):[]}function QO(a){for(var c=-1,p=a==null?0:a.length,f={};++c<p;){var h=a[c];f[h[0]]=h[1]}return f}function iE(a){return a&&a.length?a[0]:t}function YO(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=p==null?0:De(p);return h<0&&(h=Ct(f+h,0)),Oa(a,c,h)}function ZO(a){var c=a==null?0:a.length;return c?an(a,0,-1):[]}var JO=Oe(function(a){var c=ut(a,gT);return c.length&&c[0]===a[0]?oT(c):[]}),XO=Oe(function(a){var c=sn(a),p=ut(a,gT);return c===sn(p)?c=t:p.pop(),p.length&&p[0]===a[0]?oT(p,xe(c,2)):[]}),eN=Oe(function(a){var c=sn(a),p=ut(a,gT);return c=typeof c=="function"?c:t,c&&p.pop(),p.length&&p[0]===a[0]?oT(p,t,c):[]});function tN(a,c){return a==null?"":ZC.call(a,c)}function sn(a){var c=a==null?0:a.length;return c?a[c-1]:t}function rN(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=f;return p!==t&&(h=De(p),h=h<0?Ct(f+h,0):tr(h,f-1)),c===c?IC(a,c,h):$u(a,Uw,h,!0)}function nN(a,c){return a&&a.length?g0(a,De(c)):t}var iN=Oe(oE);function oE(a,c){return a&&a.length&&c&&c.length?lT(a,c):a}function oN(a,c,p){return a&&a.length&&c&&c.length?lT(a,c,xe(p,2)):a}function aN(a,c,p){return a&&a.length&&c&&c.length?lT(a,c,t,p):a}var sN=wi(function(a,c){var p=a==null?0:a.length,f=tT(a,c);return T0(a,ut(c,function(h){return Ei(h,p)?+h:h}).sort(A0)),f});function cN(a,c){var p=[];if(!(a&&a.length))return p;var f=-1,h=[],S=a.length;for(c=xe(c,3);++f<S;){var _=a[f];c(_,f,a)&&(p.push(_),h.push(f))}return T0(a,h),p}function PT(a){return a==null?a:tI.call(a)}function lN(a,c,p){var f=a==null?0:a.length;return f?(p&&typeof p!="number"&&ur(a,c,p)?(c=0,p=f):(c=c==null?0:De(c),p=p===t?f:De(p)),an(a,c,p)):[]}function uN(a,c){return lp(a,c)}function pN(a,c,p){return mT(a,c,xe(p,2))}function mN(a,c){var p=a==null?0:a.length;if(p){var f=lp(a,c);if(f<p&&Pn(a[f],c))return f}return-1}function fN(a,c){return lp(a,c,!0)}function dN(a,c,p){return mT(a,c,xe(p,2),!0)}function gN(a,c){var p=a==null?0:a.length;if(p){var f=lp(a,c,!0)-1;if(Pn(a[f],c))return f}return-1}function hN(a){return a&&a.length?S0(a):[]}function yN(a,c){return a&&a.length?S0(a,xe(c,2)):[]}function TN(a){var c=a==null?0:a.length;return c?an(a,1,c):[]}function xN(a,c,p){return a&&a.length?(c=p||c===t?1:De(c),an(a,0,c<0?0:c)):[]}function SN(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:De(c),c=f-c,an(a,c<0?0:c,f)):[]}function vN(a,c){return a&&a.length?up(a,xe(c,3),!1,!0):[]}function bN(a,c){return a&&a.length?up(a,xe(c,3)):[]}var wN=Oe(function(a){return Qi(Gt(a,1,Et,!0))}),EN=Oe(function(a){var c=sn(a);return Et(c)&&(c=t),Qi(Gt(a,1,Et,!0),xe(c,2))}),_N=Oe(function(a){var c=sn(a);return c=typeof c=="function"?c:t,Qi(Gt(a,1,Et,!0),t,c)});function RN(a){return a&&a.length?Qi(a):[]}function kN(a,c){return a&&a.length?Qi(a,xe(c,2)):[]}function AN(a,c){return c=typeof c=="function"?c:t,a&&a.length?Qi(a,t,c):[]}function LT(a){if(!(a&&a.length))return[];var c=0;return a=$i(a,function(p){if(Et(p))return c=Ct(p.length,c),!0}),Gy(c,function(p){return ut(a,jy(p))})}function aE(a,c){if(!(a&&a.length))return[];var p=LT(a);return c==null?p:ut(p,function(f){return Ir(c,t,f)})}var PN=Oe(function(a,c){return Et(a)?Bc(a,c):[]}),LN=Oe(function(a){return dT($i(a,Et))}),MN=Oe(function(a){var c=sn(a);return Et(c)&&(c=t),dT($i(a,Et),xe(c,2))}),DN=Oe(function(a){var c=sn(a);return c=typeof c=="function"?c:t,dT($i(a,Et),t,c)}),FN=Oe(LT);function CN(a,c){return E0(a||[],c||[],Hc)}function IN(a,c){return E0(a||[],c||[],$c)}var ON=Oe(function(a){var c=a.length,p=c>1?a[c-1]:t;return p=typeof p=="function"?(a.pop(),p):t,aE(a,p)});function sE(a){var c=T(a);return c.__chain__=!0,c}function NN(a,c){return c(a),a}function xp(a,c){return c(a)}var UN=wi(function(a){var c=a.length,p=c?a[0]:0,f=this.__wrapped__,h=function(S){return tT(S,a)};return c>1||this.__actions__.length||!(f instanceof ze)||!Ei(p)?this.thru(h):(f=f.slice(p,+p+(c?1:0)),f.__actions__.push({func:xp,args:[h],thisArg:t}),new nn(f,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function HN(){return sE(this)}function BN(){return new nn(this.value(),this.__chain__)}function VN(){this.__values__===t&&(this.__values__=vE(this.value()));var a=this.__index__>=this.__values__.length,c=a?t:this.__values__[this.__index__++];return{done:a,value:c}}function WN(){return this}function $N(a){for(var c,p=this;p instanceof ip;){var f=eE(p);f.__index__=0,f.__values__=t,c?h.__wrapped__=f:c=f;var h=f;p=p.__wrapped__}return h.__wrapped__=a,c}function jN(){var a=this.__wrapped__;if(a instanceof ze){var c=a;return this.__actions__.length&&(c=new ze(this)),c=c.reverse(),c.__actions__.push({func:xp,args:[PT],thisArg:t}),new nn(c,this.__chain__)}return this.thru(PT)}function zN(){return w0(this.__wrapped__,this.__actions__)}var qN=pp(function(a,c,p){tt.call(a,p)?++a[p]:vi(a,p,1)});function GN(a,c,p){var f=Pe(a)?Ow:NI;return p&&ur(a,c,p)&&(c=t),f(a,xe(c,3))}function KN(a,c){var p=Pe(a)?$i:a0;return p(a,xe(c,3))}var QN=C0(tE),YN=C0(rE);function ZN(a,c){return Gt(Sp(a,c),1)}function JN(a,c){return Gt(Sp(a,c),C)}function XN(a,c,p){return p=p===t?1:De(p),Gt(Sp(a,c),p)}function cE(a,c){var p=Pe(a)?tn:Ki;return p(a,xe(c,3))}function lE(a,c){var p=Pe(a)?TC:o0;return p(a,xe(c,3))}var e2=pp(function(a,c,p){tt.call(a,p)?a[p].push(c):vi(a,p,[c])});function t2(a,c,p,f){a=wr(a)?a:Ga(a),p=p&&!f?De(p):0;var h=a.length;return p<0&&(p=Ct(h+p,0)),_p(a)?p<=h&&a.indexOf(c,p)>-1:!!h&&Oa(a,c,p)>-1}var r2=Oe(function(a,c,p){var f=-1,h=typeof c=="function",S=wr(a)?V(a.length):[];return Ki(a,function(_){S[++f]=h?Ir(c,_,p):Vc(_,c,p)}),S}),n2=pp(function(a,c,p){vi(a,p,c)});function Sp(a,c){var p=Pe(a)?ut:m0;return p(a,xe(c,3))}function i2(a,c,p,f){return a==null?[]:(Pe(c)||(c=c==null?[]:[c]),p=f?t:p,Pe(p)||(p=p==null?[]:[p]),h0(a,c,p))}var o2=pp(function(a,c,p){a[p?0:1].push(c)},function(){return[[],[]]});function a2(a,c,p){var f=Pe(a)?Wy:Bw,h=arguments.length<3;return f(a,xe(c,4),p,h,Ki)}function s2(a,c,p){var f=Pe(a)?xC:Bw,h=arguments.length<3;return f(a,xe(c,4),p,h,o0)}function c2(a,c){var p=Pe(a)?$i:a0;return p(a,wp(xe(c,3)))}function l2(a){var c=Pe(a)?t0:tO;return c(a)}function u2(a,c,p){(p?ur(a,c,p):c===t)?c=1:c=De(c);var f=Pe(a)?DI:rO;return f(a,c)}function p2(a){var c=Pe(a)?FI:iO;return c(a)}function m2(a){if(a==null)return 0;if(wr(a))return _p(a)?Ua(a):a.length;var c=rr(a);return c==_n||c==Rn?a.size:sT(a).length}function f2(a,c,p){var f=Pe(a)?$y:oO;return p&&ur(a,c,p)&&(c=t),f(a,xe(c,3))}var d2=Oe(function(a,c){if(a==null)return[];var p=c.length;return p>1&&ur(a,c[0],c[1])?c=[]:p>2&&ur(c[0],c[1],c[2])&&(c=[c[0]]),h0(a,Gt(c,1),[])}),vp=KC||function(){return Nt.Date.now()};function g2(a,c){if(typeof c!="function")throw new rn(i);return a=De(a),function(){if(--a<1)return c.apply(this,arguments)}}function uE(a,c,p){return c=p?t:c,c=a&&c==null?a.length:c,bi(a,ge,t,t,t,t,c)}function pE(a,c){var p;if(typeof c!="function")throw new rn(i);return a=De(a),function(){return--a>0&&(p=c.apply(this,arguments)),a<=1&&(c=t),p}}var MT=Oe(function(a,c,p){var f=E;if(p.length){var h=zi(p,za(MT));f|=ie}return bi(a,f,c,p,h)}),mE=Oe(function(a,c,p){var f=E|w;if(p.length){var h=zi(p,za(mE));f|=ie}return bi(c,f,a,p,h)});function fE(a,c,p){c=p?t:c;var f=bi(a,W,t,t,t,t,t,c);return f.placeholder=fE.placeholder,f}function dE(a,c,p){c=p?t:c;var f=bi(a,G,t,t,t,t,t,c);return f.placeholder=dE.placeholder,f}function gE(a,c,p){var f,h,S,_,A,F,K=0,Q=!1,te=!1,ae=!0;if(typeof a!="function")throw new rn(i);c=cn(c)||0,ht(p)&&(Q=!!p.leading,te="maxWait"in p,S=te?Ct(cn(p.maxWait)||0,c):S,ae="trailing"in p?!!p.trailing:ae);function de(_t){var Ln=f,ki=h;return f=h=t,K=_t,_=a.apply(ki,Ln),_}function ve(_t){return K=_t,A=qc(Be,c),Q?de(_t):_}function Ce(_t){var Ln=_t-F,ki=_t-K,CE=c-Ln;return te?tr(CE,S-ki):CE}function be(_t){var Ln=_t-F,ki=_t-K;return F===t||Ln>=c||Ln<0||te&&ki>=S}function Be(){var _t=vp();if(be(_t))return qe(_t);A=qc(Be,Ce(_t))}function qe(_t){return A=t,ae&&f?de(_t):(f=h=t,_)}function Hr(){A!==t&&_0(A),K=0,f=F=h=A=t}function pr(){return A===t?_:qe(vp())}function Br(){var _t=vp(),Ln=be(_t);if(f=arguments,h=this,F=_t,Ln){if(A===t)return ve(F);if(te)return _0(A),A=qc(Be,c),de(F)}return A===t&&(A=qc(Be,c)),_}return Br.cancel=Hr,Br.flush=pr,Br}var h2=Oe(function(a,c){return i0(a,1,c)}),y2=Oe(function(a,c,p){return i0(a,cn(c)||0,p)});function T2(a){return bi(a,Pt)}function bp(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new rn(i);var p=function(){var f=arguments,h=c?c.apply(this,f):f[0],S=p.cache;if(S.has(h))return S.get(h);var _=a.apply(this,f);return p.cache=S.set(h,_)||S,_};return p.cache=new(bp.Cache||Si),p}bp.Cache=Si;function wp(a){if(typeof a!="function")throw new rn(i);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function x2(a){return pE(2,a)}var S2=aO(function(a,c){c=c.length==1&&Pe(c[0])?ut(c[0],Or(xe())):ut(Gt(c,1),Or(xe()));var p=c.length;return Oe(function(f){for(var h=-1,S=tr(f.length,p);++h<S;)f[h]=c[h].call(this,f[h]);return Ir(a,this,f)})}),DT=Oe(function(a,c){var p=zi(c,za(DT));return bi(a,ie,t,c,p)}),hE=Oe(function(a,c){var p=zi(c,za(hE));return bi(a,se,t,c,p)}),v2=wi(function(a,c){return bi(a,we,t,t,t,c)});function b2(a,c){if(typeof a!="function")throw new rn(i);return c=c===t?c:De(c),Oe(a,c)}function w2(a,c){if(typeof a!="function")throw new rn(i);return c=c==null?0:Ct(De(c),0),Oe(function(p){var f=p[c],h=Zi(p,0,c);return f&&ji(h,f),Ir(a,this,h)})}function E2(a,c,p){var f=!0,h=!0;if(typeof a!="function")throw new rn(i);return ht(p)&&(f="leading"in p?!!p.leading:f,h="trailing"in p?!!p.trailing:h),gE(a,c,{leading:f,maxWait:c,trailing:h})}function _2(a){return uE(a,1)}function R2(a,c){return DT(hT(c),a)}function k2(){if(!arguments.length)return[];var a=arguments[0];return Pe(a)?a:[a]}function A2(a){return on(a,g)}function P2(a,c){return c=typeof c=="function"?c:t,on(a,g,c)}function L2(a){return on(a,m|g)}function M2(a,c){return c=typeof c=="function"?c:t,on(a,m|g,c)}function D2(a,c){return c==null||n0(a,c,Ut(c))}function Pn(a,c){return a===c||a!==a&&c!==c}var F2=gp(iT),C2=gp(function(a,c){return a>=c}),$o=l0(function(){return arguments}())?l0:function(a){return St(a)&&tt.call(a,"callee")&&!Qw.call(a,"callee")},Pe=V.isArray,I2=Lw?Or(Lw):$I;function wr(a){return a!=null&&Ep(a.length)&&!_i(a)}function Et(a){return St(a)&&wr(a)}function O2(a){return a===!0||a===!1||St(a)&&lr(a)==qt}var Ji=YC||$T,N2=Mw?Or(Mw):jI;function U2(a){return St(a)&&a.nodeType===1&&!Gc(a)}function H2(a){if(a==null)return!0;if(wr(a)&&(Pe(a)||typeof a=="string"||typeof a.splice=="function"||Ji(a)||qa(a)||$o(a)))return!a.length;var c=rr(a);if(c==_n||c==Rn)return!a.size;if(zc(a))return!sT(a).length;for(var p in a)if(tt.call(a,p))return!1;return!0}function B2(a,c){return Wc(a,c)}function V2(a,c,p){p=typeof p=="function"?p:t;var f=p?p(a,c):t;return f===t?Wc(a,c,t,p):!!f}function FT(a){if(!St(a))return!1;var c=lr(a);return c==yi||c==Co||typeof a.message=="string"&&typeof a.name=="string"&&!Gc(a)}function W2(a){return typeof a=="number"&&Zw(a)}function _i(a){if(!ht(a))return!1;var c=lr(a);return c==Fa||c==iw||c==xt||c==m1}function yE(a){return typeof a=="number"&&a==De(a)}function Ep(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=U}function ht(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function St(a){return a!=null&&typeof a=="object"}var TE=Dw?Or(Dw):qI;function $2(a,c){return a===c||aT(a,c,wT(c))}function j2(a,c,p){return p=typeof p=="function"?p:t,aT(a,c,wT(c),p)}function z2(a){return xE(a)&&a!=+a}function q2(a){if(PO(a))throw new Ae(n);return u0(a)}function G2(a){return a===null}function K2(a){return a==null}function xE(a){return typeof a=="number"||St(a)&&lr(a)==Ac}function Gc(a){if(!St(a)||lr(a)!=Ti)return!1;var c=Zu(a);if(c===null)return!0;var p=tt.call(c,"constructor")&&c.constructor;return typeof p=="function"&&p instanceof p&&Gu.call(p)==jC}var CT=Fw?Or(Fw):GI;function Q2(a){return yE(a)&&a>=-U&&a<=U}var SE=Cw?Or(Cw):KI;function _p(a){return typeof a=="string"||!Pe(a)&&St(a)&&lr(a)==Lc}function Ur(a){return typeof a=="symbol"||St(a)&&lr(a)==Uu}var qa=Iw?Or(Iw):QI;function Y2(a){return a===t}function Z2(a){return St(a)&&rr(a)==Mc}function J2(a){return St(a)&&lr(a)==d1}var X2=gp(cT),eU=gp(function(a,c){return a<=c});function vE(a){if(!a)return[];if(wr(a))return _p(a)?kn(a):br(a);if(Cc&&a[Cc])return DC(a[Cc]());var c=rr(a),p=c==_n?Qy:c==Rn?ju:Ga;return p(a)}function Ri(a){if(!a)return a===0?a:0;if(a=cn(a),a===C||a===-C){var c=a<0?-1:1;return c*z}return a===a?a:0}function De(a){var c=Ri(a),p=c%1;return c===c?p?c-p:c:0}function bE(a){return a?Ho(De(a),0,Z):0}function cn(a){if(typeof a=="number")return a;if(Ur(a))return X;if(ht(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=ht(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=Vw(a);var p=I1.test(a);return p||N1.test(a)?gC(a.slice(2),p?2:8):C1.test(a)?X:+a}function wE(a){return Gn(a,Er(a))}function tU(a){return a?Ho(De(a),-U,U):a===0?a:0}function et(a){return a==null?"":Nr(a)}var rU=$a(function(a,c){if(zc(c)||wr(c)){Gn(c,Ut(c),a);return}for(var p in c)tt.call(c,p)&&Hc(a,p,c[p])}),EE=$a(function(a,c){Gn(c,Er(c),a)}),Rp=$a(function(a,c,p,f){Gn(c,Er(c),a,f)}),nU=$a(function(a,c,p,f){Gn(c,Ut(c),a,f)}),iU=wi(tT);function oU(a,c){var p=Wa(a);return c==null?p:r0(p,c)}var aU=Oe(function(a,c){a=it(a);var p=-1,f=c.length,h=f>2?c[2]:t;for(h&&ur(c[0],c[1],h)&&(f=1);++p<f;)for(var S=c[p],_=Er(S),A=-1,F=_.length;++A<F;){var K=_[A],Q=a[K];(Q===t||Pn(Q,Ha[K])&&!tt.call(a,K))&&(a[K]=S[K])}return a}),sU=Oe(function(a){return a.push(t,V0),Ir(_E,t,a)});function cU(a,c){return Nw(a,xe(c,3),qn)}function lU(a,c){return Nw(a,xe(c,3),nT)}function uU(a,c){return a==null?a:rT(a,xe(c,3),Er)}function pU(a,c){return a==null?a:s0(a,xe(c,3),Er)}function mU(a,c){return a&&qn(a,xe(c,3))}function fU(a,c){return a&&nT(a,xe(c,3))}function dU(a){return a==null?[]:sp(a,Ut(a))}function gU(a){return a==null?[]:sp(a,Er(a))}function IT(a,c,p){var f=a==null?t:Bo(a,c);return f===t?p:f}function hU(a,c){return a!=null&&j0(a,c,HI)}function OT(a,c){return a!=null&&j0(a,c,BI)}var yU=O0(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Ku.call(c)),a[c]=p},UT(_r)),TU=O0(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Ku.call(c)),tt.call(a,c)?a[c].push(p):a[c]=[p]},xe),xU=Oe(Vc);function Ut(a){return wr(a)?e0(a):sT(a)}function Er(a){return wr(a)?e0(a,!0):YI(a)}function SU(a,c){var p={};return c=xe(c,3),qn(a,function(f,h,S){vi(p,c(f,h,S),f)}),p}function vU(a,c){var p={};return c=xe(c,3),qn(a,function(f,h,S){vi(p,h,c(f,h,S))}),p}var bU=$a(function(a,c,p){cp(a,c,p)}),_E=$a(function(a,c,p,f){cp(a,c,p,f)}),wU=wi(function(a,c){var p={};if(a==null)return p;var f=!1;c=ut(c,function(S){return S=Yi(S,a),f||(f=S.length>1),S}),Gn(a,vT(a),p),f&&(p=on(p,m|d|g,yO));for(var h=c.length;h--;)fT(p,c[h]);return p});function EU(a,c){return RE(a,wp(xe(c)))}var _U=wi(function(a,c){return a==null?{}:JI(a,c)});function RE(a,c){if(a==null)return{};var p=ut(vT(a),function(f){return[f]});return c=xe(c),y0(a,p,function(f,h){return c(f,h[0])})}function RU(a,c,p){c=Yi(c,a);var f=-1,h=c.length;for(h||(h=1,a=t);++f<h;){var S=a==null?t:a[Kn(c[f])];S===t&&(f=h,S=p),a=_i(S)?S.call(a):S}return a}function kU(a,c,p){return a==null?a:$c(a,c,p)}function AU(a,c,p,f){return f=typeof f=="function"?f:t,a==null?a:$c(a,c,p,f)}var kE=H0(Ut),AE=H0(Er);function PU(a,c,p){var f=Pe(a),h=f||Ji(a)||qa(a);if(c=xe(c,4),p==null){var S=a&&a.constructor;h?p=f?new S:[]:ht(a)?p=_i(S)?Wa(Zu(a)):{}:p={}}return(h?tn:qn)(a,function(_,A,F){return c(p,_,A,F)}),p}function LU(a,c){return a==null?!0:fT(a,c)}function MU(a,c,p){return a==null?a:b0(a,c,hT(p))}function DU(a,c,p,f){return f=typeof f=="function"?f:t,a==null?a:b0(a,c,hT(p),f)}function Ga(a){return a==null?[]:Ky(a,Ut(a))}function FU(a){return a==null?[]:Ky(a,Er(a))}function CU(a,c,p){return p===t&&(p=c,c=t),p!==t&&(p=cn(p),p=p===p?p:0),c!==t&&(c=cn(c),c=c===c?c:0),Ho(cn(a),c,p)}function IU(a,c,p){return c=Ri(c),p===t?(p=c,c=0):p=Ri(p),a=cn(a),VI(a,c,p)}function OU(a,c,p){if(p&&typeof p!="boolean"&&ur(a,c,p)&&(c=p=t),p===t&&(typeof c=="boolean"?(p=c,c=t):typeof a=="boolean"&&(p=a,a=t)),a===t&&c===t?(a=0,c=1):(a=Ri(a),c===t?(c=a,a=0):c=Ri(c)),a>c){var f=a;a=c,c=f}if(p||a%1||c%1){var h=Jw();return tr(a+h*(c-a+dC("1e-"+((h+"").length-1))),c)}return uT(a,c)}var NU=ja(function(a,c,p){return c=c.toLowerCase(),a+(p?PE(c):c)});function PE(a){return NT(et(a).toLowerCase())}function LE(a){return a=et(a),a&&a.replace(H1,kC).replace(iC,"")}function UU(a,c,p){a=et(a),c=Nr(c);var f=a.length;p=p===t?f:Ho(De(p),0,f);var h=p;return p-=c.length,p>=0&&a.slice(p,h)==c}function HU(a){return a=et(a),a&&x1.test(a)?a.replace(sw,AC):a}function BU(a){return a=et(a),a&&_1.test(a)?a.replace(Dy,"\\$&"):a}var VU=ja(function(a,c,p){return a+(p?"-":"")+c.toLowerCase()}),WU=ja(function(a,c,p){return a+(p?" ":"")+c.toLowerCase()}),$U=F0("toLowerCase");function jU(a,c,p){a=et(a),c=De(c);var f=c?Ua(a):0;if(!c||f>=c)return a;var h=(c-f)/2;return dp(tp(h),p)+a+dp(ep(h),p)}function zU(a,c,p){a=et(a),c=De(c);var f=c?Ua(a):0;return c&&f<c?a+dp(c-f,p):a}function qU(a,c,p){a=et(a),c=De(c);var f=c?Ua(a):0;return c&&f<c?dp(c-f,p)+a:a}function GU(a,c,p){return p||c==null?c=0:c&&(c=+c),eI(et(a).replace(Fy,""),c||0)}function KU(a,c,p){return(p?ur(a,c,p):c===t)?c=1:c=De(c),pT(et(a),c)}function QU(){var a=arguments,c=et(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var YU=ja(function(a,c,p){return a+(p?"_":"")+c.toLowerCase()});function ZU(a,c,p){return p&&typeof p!="number"&&ur(a,c,p)&&(c=p=t),p=p===t?Z:p>>>0,p?(a=et(a),a&&(typeof c=="string"||c!=null&&!CT(c))&&(c=Nr(c),!c&&Na(a))?Zi(kn(a),0,p):a.split(c,p)):[]}var JU=ja(function(a,c,p){return a+(p?" ":"")+NT(c)});function XU(a,c,p){return a=et(a),p=p==null?0:Ho(De(p),0,a.length),c=Nr(c),a.slice(p,p+c.length)==c}function eH(a,c,p){var f=T.templateSettings;p&&ur(a,c,p)&&(c=t),a=et(a),c=Rp({},c,f,B0);var h=Rp({},c.imports,f.imports,B0),S=Ut(h),_=Ky(h,S),A,F,K=0,Q=c.interpolate||Hu,te="__p += '",ae=Yy((c.escape||Hu).source+"|"+Q.source+"|"+(Q===cw?F1:Hu).source+"|"+(c.evaluate||Hu).source+"|$","g"),de="//# sourceURL="+(tt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++lC+"]")+`
`;a.replace(ae,function(be,Be,qe,Hr,pr,Br){return qe||(qe=Hr),te+=a.slice(K,Br).replace(B1,PC),Be&&(A=!0,te+=`' +
__e(`+Be+`) +
'`),pr&&(F=!0,te+=`';
`+pr+`;
__p += '`),qe&&(te+=`' +
((__t = (`+qe+`)) == null ? '' : __t) +
'`),K=Br+be.length,be}),te+=`';
`;var ve=tt.call(c,"variable")&&c.variable;if(!ve)te=`with (obj) {
`+te+`
}
`;else if(M1.test(ve))throw new Ae(o);te=(F?te.replace(g1,""):te).replace(h1,"$1").replace(y1,"$1;"),te="function("+(ve||"obj")+`) {
`+(ve?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(A?", __e = _.escape":"")+(F?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+te+`return __p
}`;var Ce=DE(function(){return Je(S,de+"return "+te).apply(t,_)});if(Ce.source=te,FT(Ce))throw Ce;return Ce}function tH(a){return et(a).toLowerCase()}function rH(a){return et(a).toUpperCase()}function nH(a,c,p){if(a=et(a),a&&(p||c===t))return Vw(a);if(!a||!(c=Nr(c)))return a;var f=kn(a),h=kn(c),S=Ww(f,h),_=$w(f,h)+1;return Zi(f,S,_).join("")}function iH(a,c,p){if(a=et(a),a&&(p||c===t))return a.slice(0,zw(a)+1);if(!a||!(c=Nr(c)))return a;var f=kn(a),h=$w(f,kn(c))+1;return Zi(f,0,h).join("")}function oH(a,c,p){if(a=et(a),a&&(p||c===t))return a.replace(Fy,"");if(!a||!(c=Nr(c)))return a;var f=kn(a),h=Ww(f,kn(c));return Zi(f,h).join("")}function aH(a,c){var p=Sr,f=vr;if(ht(c)){var h="separator"in c?c.separator:h;p="length"in c?De(c.length):p,f="omission"in c?Nr(c.omission):f}a=et(a);var S=a.length;if(Na(a)){var _=kn(a);S=_.length}if(p>=S)return a;var A=p-Ua(f);if(A<1)return f;var F=_?Zi(_,0,A).join(""):a.slice(0,A);if(h===t)return F+f;if(_&&(A+=F.length-A),CT(h)){if(a.slice(A).search(h)){var K,Q=F;for(h.global||(h=Yy(h.source,et(lw.exec(h))+"g")),h.lastIndex=0;K=h.exec(Q);)var te=K.index;F=F.slice(0,te===t?A:te)}}else if(a.indexOf(Nr(h),A)!=A){var ae=F.lastIndexOf(h);ae>-1&&(F=F.slice(0,ae))}return F+f}function sH(a){return a=et(a),a&&T1.test(a)?a.replace(aw,OC):a}var cH=ja(function(a,c,p){return a+(p?" ":"")+c.toUpperCase()}),NT=F0("toUpperCase");function ME(a,c,p){return a=et(a),c=p?t:c,c===t?MC(a)?HC(a):bC(a):a.match(c)||[]}var DE=Oe(function(a,c){try{return Ir(a,t,c)}catch(p){return FT(p)?p:new Ae(p)}}),lH=wi(function(a,c){return tn(c,function(p){p=Kn(p),vi(a,p,MT(a[p],a))}),a});function uH(a){var c=a==null?0:a.length,p=xe();return a=c?ut(a,function(f){if(typeof f[1]!="function")throw new rn(i);return[p(f[0]),f[1]]}):[],Oe(function(f){for(var h=-1;++h<c;){var S=a[h];if(Ir(S[0],this,f))return Ir(S[1],this,f)}})}function pH(a){return OI(on(a,m))}function UT(a){return function(){return a}}function mH(a,c){return a==null||a!==a?c:a}var fH=I0(),dH=I0(!0);function _r(a){return a}function HT(a){return p0(typeof a=="function"?a:on(a,m))}function gH(a){return f0(on(a,m))}function hH(a,c){return d0(a,on(c,m))}var yH=Oe(function(a,c){return function(p){return Vc(p,a,c)}}),TH=Oe(function(a,c){return function(p){return Vc(a,p,c)}});function BT(a,c,p){var f=Ut(c),h=sp(c,f);p==null&&!(ht(c)&&(h.length||!f.length))&&(p=c,c=a,a=this,h=sp(c,Ut(c)));var S=!(ht(p)&&"chain"in p)||!!p.chain,_=_i(a);return tn(h,function(A){var F=c[A];a[A]=F,_&&(a.prototype[A]=function(){var K=this.__chain__;if(S||K){var Q=a(this.__wrapped__),te=Q.__actions__=br(this.__actions__);return te.push({func:F,args:arguments,thisArg:a}),Q.__chain__=K,Q}return F.apply(a,ji([this.value()],arguments))})}),a}function xH(){return Nt._===this&&(Nt._=zC),this}function VT(){}function SH(a){return a=De(a),Oe(function(c){return g0(c,a)})}var vH=TT(ut),bH=TT(Ow),wH=TT($y);function FE(a){return _T(a)?jy(Kn(a)):XI(a)}function EH(a){return function(c){return a==null?t:Bo(a,c)}}var _H=N0(),RH=N0(!0);function WT(){return[]}function $T(){return!1}function kH(){return{}}function AH(){return""}function PH(){return!0}function LH(a,c){if(a=De(a),a<1||a>U)return[];var p=Z,f=tr(a,Z);c=xe(c),a-=Z;for(var h=Gy(f,c);++p<a;)c(p);return h}function MH(a){return Pe(a)?ut(a,Kn):Ur(a)?[a]:br(X0(et(a)))}function DH(a){var c=++$C;return et(a)+c}var FH=fp(function(a,c){return a+c},0),CH=xT("ceil"),IH=fp(function(a,c){return a/c},1),OH=xT("floor");function NH(a){return a&&a.length?ap(a,_r,iT):t}function UH(a,c){return a&&a.length?ap(a,xe(c,2),iT):t}function HH(a){return Hw(a,_r)}function BH(a,c){return Hw(a,xe(c,2))}function VH(a){return a&&a.length?ap(a,_r,cT):t}function WH(a,c){return a&&a.length?ap(a,xe(c,2),cT):t}var $H=fp(function(a,c){return a*c},1),jH=xT("round"),zH=fp(function(a,c){return a-c},0);function qH(a){return a&&a.length?qy(a,_r):0}function GH(a,c){return a&&a.length?qy(a,xe(c,2)):0}return T.after=g2,T.ary=uE,T.assign=rU,T.assignIn=EE,T.assignInWith=Rp,T.assignWith=nU,T.at=iU,T.before=pE,T.bind=MT,T.bindAll=lH,T.bindKey=mE,T.castArray=k2,T.chain=sE,T.chunk=OO,T.compact=NO,T.concat=UO,T.cond=uH,T.conforms=pH,T.constant=UT,T.countBy=qN,T.create=oU,T.curry=fE,T.curryRight=dE,T.debounce=gE,T.defaults=aU,T.defaultsDeep=sU,T.defer=h2,T.delay=y2,T.difference=HO,T.differenceBy=BO,T.differenceWith=VO,T.drop=WO,T.dropRight=$O,T.dropRightWhile=jO,T.dropWhile=zO,T.fill=qO,T.filter=KN,T.flatMap=ZN,T.flatMapDeep=JN,T.flatMapDepth=XN,T.flatten=nE,T.flattenDeep=GO,T.flattenDepth=KO,T.flip=T2,T.flow=fH,T.flowRight=dH,T.fromPairs=QO,T.functions=dU,T.functionsIn=gU,T.groupBy=e2,T.initial=ZO,T.intersection=JO,T.intersectionBy=XO,T.intersectionWith=eN,T.invert=yU,T.invertBy=TU,T.invokeMap=r2,T.iteratee=HT,T.keyBy=n2,T.keys=Ut,T.keysIn=Er,T.map=Sp,T.mapKeys=SU,T.mapValues=vU,T.matches=gH,T.matchesProperty=hH,T.memoize=bp,T.merge=bU,T.mergeWith=_E,T.method=yH,T.methodOf=TH,T.mixin=BT,T.negate=wp,T.nthArg=SH,T.omit=wU,T.omitBy=EU,T.once=x2,T.orderBy=i2,T.over=vH,T.overArgs=S2,T.overEvery=bH,T.overSome=wH,T.partial=DT,T.partialRight=hE,T.partition=o2,T.pick=_U,T.pickBy=RE,T.property=FE,T.propertyOf=EH,T.pull=iN,T.pullAll=oE,T.pullAllBy=oN,T.pullAllWith=aN,T.pullAt=sN,T.range=_H,T.rangeRight=RH,T.rearg=v2,T.reject=c2,T.remove=cN,T.rest=b2,T.reverse=PT,T.sampleSize=u2,T.set=kU,T.setWith=AU,T.shuffle=p2,T.slice=lN,T.sortBy=d2,T.sortedUniq=hN,T.sortedUniqBy=yN,T.split=ZU,T.spread=w2,T.tail=TN,T.take=xN,T.takeRight=SN,T.takeRightWhile=vN,T.takeWhile=bN,T.tap=NN,T.throttle=E2,T.thru=xp,T.toArray=vE,T.toPairs=kE,T.toPairsIn=AE,T.toPath=MH,T.toPlainObject=wE,T.transform=PU,T.unary=_2,T.union=wN,T.unionBy=EN,T.unionWith=_N,T.uniq=RN,T.uniqBy=kN,T.uniqWith=AN,T.unset=LU,T.unzip=LT,T.unzipWith=aE,T.update=MU,T.updateWith=DU,T.values=Ga,T.valuesIn=FU,T.without=PN,T.words=ME,T.wrap=R2,T.xor=LN,T.xorBy=MN,T.xorWith=DN,T.zip=FN,T.zipObject=CN,T.zipObjectDeep=IN,T.zipWith=ON,T.entries=kE,T.entriesIn=AE,T.extend=EE,T.extendWith=Rp,BT(T,T),T.add=FH,T.attempt=DE,T.camelCase=NU,T.capitalize=PE,T.ceil=CH,T.clamp=CU,T.clone=A2,T.cloneDeep=L2,T.cloneDeepWith=M2,T.cloneWith=P2,T.conformsTo=D2,T.deburr=LE,T.defaultTo=mH,T.divide=IH,T.endsWith=UU,T.eq=Pn,T.escape=HU,T.escapeRegExp=BU,T.every=GN,T.find=QN,T.findIndex=tE,T.findKey=cU,T.findLast=YN,T.findLastIndex=rE,T.findLastKey=lU,T.floor=OH,T.forEach=cE,T.forEachRight=lE,T.forIn=uU,T.forInRight=pU,T.forOwn=mU,T.forOwnRight=fU,T.get=IT,T.gt=F2,T.gte=C2,T.has=hU,T.hasIn=OT,T.head=iE,T.identity=_r,T.includes=t2,T.indexOf=YO,T.inRange=IU,T.invoke=xU,T.isArguments=$o,T.isArray=Pe,T.isArrayBuffer=I2,T.isArrayLike=wr,T.isArrayLikeObject=Et,T.isBoolean=O2,T.isBuffer=Ji,T.isDate=N2,T.isElement=U2,T.isEmpty=H2,T.isEqual=B2,T.isEqualWith=V2,T.isError=FT,T.isFinite=W2,T.isFunction=_i,T.isInteger=yE,T.isLength=Ep,T.isMap=TE,T.isMatch=$2,T.isMatchWith=j2,T.isNaN=z2,T.isNative=q2,T.isNil=K2,T.isNull=G2,T.isNumber=xE,T.isObject=ht,T.isObjectLike=St,T.isPlainObject=Gc,T.isRegExp=CT,T.isSafeInteger=Q2,T.isSet=SE,T.isString=_p,T.isSymbol=Ur,T.isTypedArray=qa,T.isUndefined=Y2,T.isWeakMap=Z2,T.isWeakSet=J2,T.join=tN,T.kebabCase=VU,T.last=sn,T.lastIndexOf=rN,T.lowerCase=WU,T.lowerFirst=$U,T.lt=X2,T.lte=eU,T.max=NH,T.maxBy=UH,T.mean=HH,T.meanBy=BH,T.min=VH,T.minBy=WH,T.stubArray=WT,T.stubFalse=$T,T.stubObject=kH,T.stubString=AH,T.stubTrue=PH,T.multiply=$H,T.nth=nN,T.noConflict=xH,T.noop=VT,T.now=vp,T.pad=jU,T.padEnd=zU,T.padStart=qU,T.parseInt=GU,T.random=OU,T.reduce=a2,T.reduceRight=s2,T.repeat=KU,T.replace=QU,T.result=RU,T.round=jH,T.runInContext=M,T.sample=l2,T.size=m2,T.snakeCase=YU,T.some=f2,T.sortedIndex=uN,T.sortedIndexBy=pN,T.sortedIndexOf=mN,T.sortedLastIndex=fN,T.sortedLastIndexBy=dN,T.sortedLastIndexOf=gN,T.startCase=JU,T.startsWith=XU,T.subtract=zH,T.sum=qH,T.sumBy=GH,T.template=eH,T.times=LH,T.toFinite=Ri,T.toInteger=De,T.toLength=bE,T.toLower=tH,T.toNumber=cn,T.toSafeInteger=tU,T.toString=et,T.toUpper=rH,T.trim=nH,T.trimEnd=iH,T.trimStart=oH,T.truncate=aH,T.unescape=sH,T.uniqueId=DH,T.upperCase=cH,T.upperFirst=NT,T.each=cE,T.eachRight=lE,T.first=iE,BT(T,function(){var a={};return qn(T,function(c,p){tt.call(T.prototype,p)||(a[p]=c)}),a}(),{chain:!1}),T.VERSION=e,tn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){T[a].placeholder=T}),tn(["drop","take"],function(a,c){ze.prototype[a]=function(p){p=p===t?1:Ct(De(p),0);var f=this.__filtered__&&!c?new ze(this):this.clone();return f.__filtered__?f.__takeCount__=tr(p,f.__takeCount__):f.__views__.push({size:tr(p,Z),type:a+(f.__dir__<0?"Right":"")}),f},ze.prototype[a+"Right"]=function(p){return this.reverse()[a](p).reverse()}}),tn(["filter","map","takeWhile"],function(a,c){var p=c+1,f=p==L||p==J;ze.prototype[a]=function(h){var S=this.clone();return S.__iteratees__.push({iteratee:xe(h,3),type:p}),S.__filtered__=S.__filtered__||f,S}}),tn(["head","last"],function(a,c){var p="take"+(c?"Right":"");ze.prototype[a]=function(){return this[p](1).value()[0]}}),tn(["initial","tail"],function(a,c){var p="drop"+(c?"":"Right");ze.prototype[a]=function(){return this.__filtered__?new ze(this):this[p](1)}}),ze.prototype.compact=function(){return this.filter(_r)},ze.prototype.find=function(a){return this.filter(a).head()},ze.prototype.findLast=function(a){return this.reverse().find(a)},ze.prototype.invokeMap=Oe(function(a,c){return typeof a=="function"?new ze(this):this.map(function(p){return Vc(p,a,c)})}),ze.prototype.reject=function(a){return this.filter(wp(xe(a)))},ze.prototype.slice=function(a,c){a=De(a);var p=this;return p.__filtered__&&(a>0||c<0)?new ze(p):(a<0?p=p.takeRight(-a):a&&(p=p.drop(a)),c!==t&&(c=De(c),p=c<0?p.dropRight(-c):p.take(c-a)),p)},ze.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},ze.prototype.toArray=function(){return this.take(Z)},qn(ze.prototype,function(a,c){var p=/^(?:filter|find|map|reject)|While$/.test(c),f=/^(?:head|last)$/.test(c),h=T[f?"take"+(c=="last"?"Right":""):c],S=f||/^find/.test(c);h&&(T.prototype[c]=function(){var _=this.__wrapped__,A=f?[1]:arguments,F=_ instanceof ze,K=A[0],Q=F||Pe(_),te=function(Be){var qe=h.apply(T,ji([Be],A));return f&&ae?qe[0]:qe};Q&&p&&typeof K=="function"&&K.length!=1&&(F=Q=!1);var ae=this.__chain__,de=!!this.__actions__.length,ve=S&&!ae,Ce=F&&!de;if(!S&&Q){_=Ce?_:new ze(this);var be=a.apply(_,A);return be.__actions__.push({func:xp,args:[te],thisArg:t}),new nn(be,ae)}return ve&&Ce?a.apply(this,A):(be=this.thru(te),ve?f?be.value()[0]:be.value():be)})}),tn(["pop","push","shift","sort","splice","unshift"],function(a){var c=zu[a],p=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",f=/^(?:pop|shift)$/.test(a);T.prototype[a]=function(){var h=arguments;if(f&&!this.__chain__){var S=this.value();return c.apply(Pe(S)?S:[],h)}return this[p](function(_){return c.apply(Pe(_)?_:[],h)})}}),qn(ze.prototype,function(a,c){var p=T[c];if(p){var f=p.name+"";tt.call(Va,f)||(Va[f]=[]),Va[f].push({name:c,func:p})}}),Va[mp(t,w).name]=[{name:"wrapper",func:t}],ze.prototype.clone=sI,ze.prototype.reverse=cI,ze.prototype.value=lI,T.prototype.at=UN,T.prototype.chain=HN,T.prototype.commit=BN,T.prototype.next=VN,T.prototype.plant=$N,T.prototype.reverse=jN,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=zN,T.prototype.first=T.prototype.head,Cc&&(T.prototype[Cc]=WN),T},qi=BC();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Nt._=qi,define(function(){return qi})):Io?((Io.exports=qi)._=qi,Hy._=qi):Nt._=qi}).call(mc)});var $Q={};IE($Q,{default:()=>u1});module.exports=XH($Q);var eB="https://www.cursorless.org",Pp=`${eB}/docs`;var jT="cursorless.command",Lp=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},vt=class extends Lp{constructor(){super(...arguments);this.isVisible=!1}},bt=class extends Lp{constructor(){super(...arguments);this.isVisible=!0}};var qQ={"cursorless.toggleDecorations":new bt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new bt("Recompute decoration styles"),"cursorless.recordTestCase":new bt("Record test case"),"cursorless.recordOneTestCaseThenPause":new bt("Record one test case, then pause"),"cursorless.pauseRecording":new bt("Pause test case recording"),"cursorless.resumeRecording":new bt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new bt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new bt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new bt("Show documentation"),"cursorless.showInstallationDependencies":new bt("Show installation dependencies"),"cursorless.showScopeVisualizer":new bt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new bt("Hide the scope visualizer"),"cursorless.scopeVisualizer.openUrl":new bt("Open in browser"),"cursorless.analyzeCommandHistory":new bt("Analyze collected command history"),"cursorless.tutorial.start":new vt("Start a tutorial"),"cursorless.tutorial.next":new bt("Tutorial next"),"cursorless.tutorial.previous":new bt("Tutorial previous"),"cursorless.tutorial.restart":new bt("Tutorial restart"),"cursorless.tutorial.resume":new bt("Tutorial resume"),"cursorless.tutorial.list":new bt("Tutorial list"),"cursorless.documentationOpened":new vt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new vt("The core cursorless command"),"cursorless.repeatPreviousCommand":new bt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new vt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new vt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new vt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new vt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new vt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new vt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new vt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new vt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new vt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new vt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new vt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new vt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new vt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new vt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new vt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new vt("Redo keyboard targeting changes"),"cursorless.migrateSnippets":new vt("Migrate snippets from the old Cursorless format to the new community format")};var Mp=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Dp=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},Rt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Fp=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var tB=typeof global=="object"&&global&&global.Object===Object&&global,Cp=tB;var rB=typeof self=="object"&&self&&self.Object===Object&&self,nB=Cp||rB||Function("return this")(),Ht=nB;var iB=Ht.Symbol,mr=iB;var NE=Object.prototype,oB=NE.hasOwnProperty,aB=NE.toString,Kc=mr?mr.toStringTag:void 0;function sB(t){var e=oB.call(t,Kc),r=t[Kc];try{t[Kc]=void 0;var n=!0}catch{}var i=aB.call(t);return n&&(e?t[Kc]=r:delete t[Kc]),i}var UE=sB;var cB=Object.prototype,lB=cB.toString;function uB(t){return lB.call(t)}var HE=uB;var pB="[object Null]",mB="[object Undefined]",BE=mr?mr.toStringTag:void 0;function fB(t){return t==null?t===void 0?mB:pB:BE&&BE in Object(t)?UE(t):HE(t)}var Mn=fB;function dB(t){return t!=null&&typeof t=="object"}var fr=dB;var gB="[object Symbol]";function hB(t){return typeof t=="symbol"||fr(t)&&Mn(t)==gB}var Vr=hB;function yB(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var un=yB;var TB=Array.isArray,rt=TB;var xB=1/0,VE=mr?mr.prototype:void 0,WE=VE?VE.toString:void 0;function $E(t){if(typeof t=="string")return t;if(rt(t))return un(t,$E)+"";if(Vr(t))return WE?WE.call(t):"";var e=t+"";return e=="0"&&1/t==-xB?"-0":e}var jE=$E;var SB=/\s/;function vB(t){for(var e=t.length;e--&&SB.test(t.charAt(e)););return e}var zE=vB;var bB=/^\s+/;function wB(t){return t&&t.slice(0,zE(t)+1).replace(bB,"")}var qE=wB;function EB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Wr=EB;var GE=NaN,_B=/^[-+]0x[0-9a-f]+$/i,RB=/^0b[01]+$/i,kB=/^0o[0-7]+$/i,AB=parseInt;function PB(t){if(typeof t=="number")return t;if(Vr(t))return GE;if(Wr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Wr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=qE(t);var r=RB.test(t);return r||kB.test(t)?AB(t.slice(2),r?2:8):_B.test(t)?GE:+t}var KE=PB;var QE=1/0,LB=17976931348623157e292;function MB(t){if(!t)return t===0?t:0;if(t=KE(t),t===QE||t===-QE){var e=t<0?-1:1;return e*LB}return t===t?t:0}var Ka=MB;function DB(t){var e=Ka(t),r=e%1;return e===e?r?e-r:e:0}var Ip=DB;function FB(t){return t}var Qn=FB;var CB="[object AsyncFunction]",IB="[object Function]",OB="[object GeneratorFunction]",NB="[object Proxy]";function UB(t){if(!Wr(t))return!1;var e=Mn(t);return e==IB||e==OB||e==CB||e==NB}var Op=UB;var HB=Ht["__core-js_shared__"],Np=HB;var YE=function(){var t=/[^.]+$/.exec(Np&&Np.keys&&Np.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function BB(t){return!!YE&&YE in t}var ZE=BB;var VB=Function.prototype,WB=VB.toString;function $B(t){if(t!=null){try{return WB.call(t)}catch{}try{return t+""}catch{}}return""}var Ai=$B;var jB=/[\\^$.*+?()[\]{}|]/g,zB=/^\[object .+?Constructor\]$/,qB=Function.prototype,GB=Object.prototype,KB=qB.toString,QB=GB.hasOwnProperty,YB=RegExp("^"+KB.call(QB).replace(jB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ZB(t){if(!Wr(t)||ZE(t))return!1;var e=Op(t)?YB:zB;return e.test(Ai(t))}var JE=ZB;function JB(t,e){return t?.[e]}var XE=JB;function XB(t,e){var r=XE(t,e);return JE(r)?r:void 0}var Rr=XB;var eV=Rr(Ht,"WeakMap"),jo=eV;var tV=jo&&new jo,zT=tV;var e_=Object.create,rV=function(){function t(){}return function(e){if(!Wr(e))return{};if(e_)return e_(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Up=rV;function nV(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var t_=nV;function iV(){}var Qa=iV;var oV=4294967295;function Hp(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=oV,this.__views__=[]}Hp.prototype=Up(Qa.prototype);Hp.prototype.constructor=Hp;var Ya=Hp;function aV(){}var Bp=aV;var sV=zT?function(t){return zT.get(t)}:Bp,Vp=sV;var cV={},qT=cV;var lV=Object.prototype,uV=lV.hasOwnProperty;function pV(t){for(var e=t.name+"",r=qT[e],n=uV.call(qT,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Za=pV;function Wp(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Wp.prototype=Up(Qa.prototype);Wp.prototype.constructor=Wp;var Xi=Wp;function mV(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var eo=mV;function fV(t){if(t instanceof Ya)return t.clone();var e=new Xi(t.__wrapped__,t.__chain__);return e.__actions__=eo(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var r_=fV;var dV=Object.prototype,gV=dV.hasOwnProperty;function $p(t){if(fr(t)&&!rt(t)&&!(t instanceof Ya)){if(t instanceof Xi)return t;if(gV.call(t,"__wrapped__"))return r_(t)}return new Xi(t)}$p.prototype=Qa.prototype;$p.prototype.constructor=$p;var n_=$p;function hV(t){var e=Za(t),r=n_[e];if(typeof r!="function"||!(e in Ya.prototype))return!1;if(t===r)return!0;var n=Vp(r);return!!n&&t===n[0]}var GT=hV;var yV=800,TV=16,xV=Date.now;function SV(t){var e=0,r=0;return function(){var n=xV(),i=TV-(n-r);if(r=n,i>0){if(++e>=yV)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var i_=SV;function vV(t){return function(){return t}}var o_=vV;var bV=function(){try{var t=Rr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),KT=bV;var wV=KT?function(t,e){return KT(t,"toString",{configurable:!0,enumerable:!1,value:o_(e),writable:!0})}:Qn,a_=wV;var EV=i_(a_),jp=EV;function _V(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var zp=_V;function RV(t){return t!==t}var s_=RV;function kV(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var c_=kV;function AV(t,e,r){return e===e?c_(t,e,r):zp(t,s_,r)}var qp=AV;function PV(t,e){var r=t==null?0:t.length;return!!r&&qp(t,e,0)>-1}var l_=PV;var LV=9007199254740991,MV=/^(?:0|[1-9]\d*)$/;function DV(t,e){var r=typeof t;return e=e??LV,!!e&&(r=="number"||r!="symbol"&&MV.test(t))&&t>-1&&t%1==0&&t<e}var Ja=DV;function FV(t,e){return t===e||t!==t&&e!==e}var Xa=FV;var u_=Math.max;function CV(t,e,r){return e=u_(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=u_(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),t_(t,this,l)}}var Gp=CV;function IV(t,e){return jp(Gp(t,e,Qn),t+"")}var es=IV;var OV=9007199254740991;function NV(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=OV}var ts=NV;function UV(t){return t!=null&&ts(t.length)&&!Op(t)}var Yn=UV;function HV(t,e,r){if(!Wr(r))return!1;var n=typeof e;return(n=="number"?Yn(r)&&Ja(e,r.length):n=="string"&&e in r)?Xa(r[e],t):!1}var zo=HV;var BV=Object.prototype;function VV(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||BV;return t===r}var p_=VV;function WV(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Kp=WV;var $V="[object Arguments]";function jV(t){return fr(t)&&Mn(t)==$V}var QT=jV;var m_=Object.prototype,zV=m_.hasOwnProperty,qV=m_.propertyIsEnumerable,GV=QT(function(){return arguments}())?QT:function(t){return fr(t)&&zV.call(t,"callee")&&!qV.call(t,"callee")},rs=GV;function KV(){return!1}var f_=KV;var h_=typeof exports=="object"&&exports&&!exports.nodeType&&exports,d_=h_&&typeof module=="object"&&module&&!module.nodeType&&module,QV=d_&&d_.exports===h_,g_=QV?Ht.Buffer:void 0,YV=g_?g_.isBuffer:void 0,ZV=YV||f_,Qc=ZV;var JV="[object Arguments]",XV="[object Array]",eW="[object Boolean]",tW="[object Date]",rW="[object Error]",nW="[object Function]",iW="[object Map]",oW="[object Number]",aW="[object Object]",sW="[object RegExp]",cW="[object Set]",lW="[object String]",uW="[object WeakMap]",pW="[object ArrayBuffer]",mW="[object DataView]",fW="[object Float32Array]",dW="[object Float64Array]",gW="[object Int8Array]",hW="[object Int16Array]",yW="[object Int32Array]",TW="[object Uint8Array]",xW="[object Uint8ClampedArray]",SW="[object Uint16Array]",vW="[object Uint32Array]",st={};st[fW]=st[dW]=st[gW]=st[hW]=st[yW]=st[TW]=st[xW]=st[SW]=st[vW]=!0;st[JV]=st[XV]=st[pW]=st[eW]=st[mW]=st[tW]=st[rW]=st[nW]=st[iW]=st[oW]=st[aW]=st[sW]=st[cW]=st[lW]=st[uW]=!1;function bW(t){return fr(t)&&ts(t.length)&&!!st[Mn(t)]}var y_=bW;function wW(t){return function(e){return t(e)}}var ns=wW;var T_=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Yc=T_&&typeof module=="object"&&module&&!module.nodeType&&module,EW=Yc&&Yc.exports===T_,YT=EW&&Cp.process,_W=function(){try{var t=Yc&&Yc.require&&Yc.require("util").types;return t||YT&&YT.binding&&YT.binding("util")}catch{}}(),ZT=_W;var x_=ZT&&ZT.isTypedArray,RW=x_?ns(x_):y_,Qp=RW;var kW=Object.prototype,AW=kW.hasOwnProperty;function PW(t,e){var r=rt(t),n=!r&&rs(t),i=!r&&!n&&Qc(t),o=!r&&!n&&!i&&Qp(t),s=r||n||i||o,l=s?Kp(t.length,String):[],u=l.length;for(var m in t)(e||AW.call(t,m))&&!(s&&(m=="length"||i&&(m=="offset"||m=="parent")||o&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||Ja(m,u)))&&l.push(m);return l}var S_=PW;function LW(t,e){return function(r){return t(e(r))}}var v_=LW;var MW=v_(Object.keys,Object),b_=MW;var DW=Object.prototype,FW=DW.hasOwnProperty;function CW(t){if(!p_(t))return b_(t);var e=[];for(var r in Object(t))FW.call(t,r)&&r!="constructor"&&e.push(r);return e}var w_=CW;function IW(t){return Yn(t)?S_(t):w_(t)}var to=IW;var OW=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,NW=/^\w*$/;function UW(t,e){if(rt(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Vr(t)?!0:NW.test(t)||!OW.test(t)||e!=null&&t in Object(e)}var is=UW;var HW=Rr(Object,"create"),Pi=HW;function BW(){this.__data__=Pi?Pi(null):{},this.size=0}var E_=BW;function VW(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var __=VW;var WW="__lodash_hash_undefined__",$W=Object.prototype,jW=$W.hasOwnProperty;function zW(t){var e=this.__data__;if(Pi){var r=e[t];return r===WW?void 0:r}return jW.call(e,t)?e[t]:void 0}var R_=zW;var qW=Object.prototype,GW=qW.hasOwnProperty;function KW(t){var e=this.__data__;return Pi?e[t]!==void 0:GW.call(e,t)}var k_=KW;var QW="__lodash_hash_undefined__";function YW(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Pi&&e===void 0?QW:e,this}var A_=YW;function os(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}os.prototype.clear=E_;os.prototype.delete=__;os.prototype.get=R_;os.prototype.has=k_;os.prototype.set=A_;var JT=os;function ZW(){this.__data__=[],this.size=0}var P_=ZW;function JW(t,e){for(var r=t.length;r--;)if(Xa(t[r][0],e))return r;return-1}var ro=JW;var XW=Array.prototype,e$=XW.splice;function t$(t){var e=this.__data__,r=ro(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():e$.call(e,r,1),--this.size,!0}var L_=t$;function r$(t){var e=this.__data__,r=ro(e,t);return r<0?void 0:e[r][1]}var M_=r$;function n$(t){return ro(this.__data__,t)>-1}var D_=n$;function i$(t,e){var r=this.__data__,n=ro(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var F_=i$;function as(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}as.prototype.clear=P_;as.prototype.delete=L_;as.prototype.get=M_;as.prototype.has=D_;as.prototype.set=F_;var no=as;var o$=Rr(Ht,"Map"),io=o$;function a$(){this.size=0,this.__data__={hash:new JT,map:new(io||no),string:new JT}}var C_=a$;function s$(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var I_=s$;function c$(t,e){var r=t.__data__;return I_(e)?r[typeof e=="string"?"string":"hash"]:r.map}var oo=c$;function l$(t){var e=oo(this,t).delete(t);return this.size-=e?1:0,e}var O_=l$;function u$(t){return oo(this,t).get(t)}var N_=u$;function p$(t){return oo(this,t).has(t)}var U_=p$;function m$(t,e){var r=oo(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var H_=m$;function ss(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ss.prototype.clear=C_;ss.prototype.delete=O_;ss.prototype.get=N_;ss.prototype.has=U_;ss.prototype.set=H_;var qo=ss;var f$="Expected a function";function XT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(f$);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(XT.Cache||qo),r}XT.Cache=qo;var Zc=XT;var d$=500;function g$(t){var e=Zc(t,function(n){return r.size===d$&&r.clear(),n}),r=e.cache;return e}var B_=g$;var h$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y$=/\\(\\)?/g,T$=B_(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(h$,function(r,n,i,o){e.push(i?o.replace(y$,"$1"):n||r)}),e}),V_=T$;function x$(t){return t==null?"":jE(t)}var Dn=x$;function S$(t,e){return rt(t)?t:is(t,e)?[t]:V_(Dn(t))}var Yp=S$;var v$=1/0;function b$(t){if(typeof t=="string"||Vr(t))return t;var e=t+"";return e=="0"&&1/t==-v$?"-0":e}var ao=b$;function w$(t,e){e=Yp(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[ao(e[r++])];return r&&r==n?t:void 0}var cs=w$;function E$(t,e,r){var n=t==null?void 0:cs(t,e);return n===void 0?r:n}var Go=E$;function _$(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var ls=_$;var W_=mr?mr.isConcatSpreadable:void 0;function R$(t){return rt(t)||rs(t)||!!(W_&&t&&t[W_])}var $_=R$;function j_(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=$_),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?j_(l,e-1,r,n,i):ls(i,l):n||(i[i.length]=l)}return i}var us=j_;function k$(t){var e=t==null?0:t.length;return e?us(t,1):[]}var ct=k$;function A$(t){return jp(Gp(t,void 0,ct),t+"")}var z_=A$;function P$(t){return function(e){return t?.[e]}}var q_=P$;var L$={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},M$=q_(L$),G_=M$;var D$=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,F$="\\u0300-\\u036f",C$="\\ufe20-\\ufe2f",I$="\\u20d0-\\u20ff",O$=F$+C$+I$,N$="["+O$+"]",U$=RegExp(N$,"g");function H$(t){return t=Dn(t),t&&t.replace(D$,G_).replace(U$,"")}var ex=H$;function B$(){this.__data__=new no,this.size=0}var K_=B$;function V$(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var Q_=V$;function W$(t){return this.__data__.get(t)}var Y_=W$;function $$(t){return this.__data__.has(t)}var Z_=$$;var j$=200;function z$(t,e){var r=this.__data__;if(r instanceof no){var n=r.__data__;if(!io||n.length<j$-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new qo(n)}return r.set(t,e),this.size=r.size,this}var J_=z$;function ps(t){var e=this.__data__=new no(t);this.size=e.size}ps.prototype.clear=K_;ps.prototype.delete=Q_;ps.prototype.get=Y_;ps.prototype.has=Z_;ps.prototype.set=J_;var ms=ps;function q$(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var Zp=q$;function G$(){return[]}var X_=G$;var K$=Object.prototype,Q$=K$.propertyIsEnumerable,eR=Object.getOwnPropertySymbols,Y$=eR?function(t){return t==null?[]:(t=Object(t),Zp(eR(t),function(e){return Q$.call(t,e)}))}:X_,tR=Y$;function Z$(t,e,r){var n=e(t);return rt(t)?n:ls(n,r(t))}var rR=Z$;function J$(t){return rR(t,to,tR)}var tx=J$;var X$=Rr(Ht,"DataView"),Jp=X$;var e3=Rr(Ht,"Promise"),Xp=e3;var t3=Rr(Ht,"Set"),so=t3;var nR="[object Map]",r3="[object Object]",iR="[object Promise]",oR="[object Set]",aR="[object WeakMap]",sR="[object DataView]",n3=Ai(Jp),i3=Ai(io),o3=Ai(Xp),a3=Ai(so),s3=Ai(jo),Ko=Mn;(Jp&&Ko(new Jp(new ArrayBuffer(1)))!=sR||io&&Ko(new io)!=nR||Xp&&Ko(Xp.resolve())!=iR||so&&Ko(new so)!=oR||jo&&Ko(new jo)!=aR)&&(Ko=function(t){var e=Mn(t),r=e==r3?t.constructor:void 0,n=r?Ai(r):"";if(n)switch(n){case n3:return sR;case i3:return nR;case o3:return iR;case a3:return oR;case s3:return aR}return e});var rx=Ko;var c3=Ht.Uint8Array,nx=c3;function l3(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return ls(rt(r)?eo(r):[r],us(e,1))}var Jc=l3;var u3="__lodash_hash_undefined__";function p3(t){return this.__data__.set(t,u3),this}var cR=p3;function m3(t){return this.__data__.has(t)}var lR=m3;function em(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new qo;++e<r;)this.add(t[e])}em.prototype.add=em.prototype.push=cR;em.prototype.has=lR;var tm=em;function f3(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var uR=f3;function d3(t,e){return t.has(e)}var rm=d3;var g3=1,h3=2;function y3(t,e,r,n,i,o){var s=r&g3,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var m=o.get(t),d=o.get(e);if(m&&d)return m==e&&d==t;var g=-1,y=!0,x=r&h3?new tm:void 0;for(o.set(t,e),o.set(e,t);++g<l;){var E=t[g],w=e[g];if(n)var H=s?n(w,E,g,e,t,o):n(E,w,g,t,e,o);if(H!==void 0){if(H)continue;y=!1;break}if(x){if(!uR(e,function(W,G){if(!rm(x,G)&&(E===W||i(E,W,r,n,o)))return x.push(G)})){y=!1;break}}else if(!(E===w||i(E,w,r,n,o))){y=!1;break}}return o.delete(t),o.delete(e),y}var nm=y3;function T3(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var pR=T3;function x3(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var fs=x3;var S3=1,v3=2,b3="[object Boolean]",w3="[object Date]",E3="[object Error]",_3="[object Map]",R3="[object Number]",k3="[object RegExp]",A3="[object Set]",P3="[object String]",L3="[object Symbol]",M3="[object ArrayBuffer]",D3="[object DataView]",mR=mr?mr.prototype:void 0,ix=mR?mR.valueOf:void 0;function F3(t,e,r,n,i,o,s){switch(r){case D3:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case M3:return!(t.byteLength!=e.byteLength||!o(new nx(t),new nx(e)));case b3:case w3:case R3:return Xa(+t,+e);case E3:return t.name==e.name&&t.message==e.message;case k3:case P3:return t==e+"";case _3:var l=pR;case A3:var u=n&S3;if(l||(l=fs),t.size!=e.size&&!u)return!1;var m=s.get(t);if(m)return m==e;n|=v3,s.set(t,e);var d=nm(l(t),l(e),n,i,o,s);return s.delete(t),d;case L3:if(ix)return ix.call(t)==ix.call(e)}return!1}var fR=F3;var C3=1,I3=Object.prototype,O3=I3.hasOwnProperty;function N3(t,e,r,n,i,o){var s=r&C3,l=tx(t),u=l.length,m=tx(e),d=m.length;if(u!=d&&!s)return!1;for(var g=u;g--;){var y=l[g];if(!(s?y in e:O3.call(e,y)))return!1}var x=o.get(t),E=o.get(e);if(x&&E)return x==e&&E==t;var w=!0;o.set(t,e),o.set(e,t);for(var H=s;++g<u;){y=l[g];var W=t[y],G=e[y];if(n)var ie=s?n(G,W,y,e,t,o):n(W,G,y,t,e,o);if(!(ie===void 0?W===G||i(W,G,r,n,o):ie)){w=!1;break}H||(H=y=="constructor")}if(w&&!H){var se=t.constructor,ge=e.constructor;se!=ge&&"constructor"in t&&"constructor"in e&&!(typeof se=="function"&&se instanceof se&&typeof ge=="function"&&ge instanceof ge)&&(w=!1)}return o.delete(t),o.delete(e),w}var dR=N3;var U3=1,gR="[object Arguments]",hR="[object Array]",im="[object Object]",H3=Object.prototype,yR=H3.hasOwnProperty;function B3(t,e,r,n,i,o){var s=rt(t),l=rt(e),u=s?hR:rx(t),m=l?hR:rx(e);u=u==gR?im:u,m=m==gR?im:m;var d=u==im,g=m==im,y=u==m;if(y&&Qc(t)){if(!Qc(e))return!1;s=!0,d=!1}if(y&&!d)return o||(o=new ms),s||Qp(t)?nm(t,e,r,n,i,o):fR(t,e,u,r,n,i,o);if(!(r&U3)){var x=d&&yR.call(t,"__wrapped__"),E=g&&yR.call(e,"__wrapped__");if(x||E){var w=x?t.value():t,H=E?e.value():e;return o||(o=new ms),i(w,H,r,n,o)}}return y?(o||(o=new ms),dR(t,e,r,n,i,o)):!1}var TR=B3;function xR(t,e,r,n,i){return t===e?!0:t==null||e==null||!fr(t)&&!fr(e)?t!==t&&e!==e:TR(t,e,r,n,xR,i)}var ds=xR;var V3=1,W3=2;function $3(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var u=l[0],m=t[u],d=l[1];if(s&&l[2]){if(m===void 0&&!(u in t))return!1}else{var g=new ms;if(n)var y=n(m,d,u,t,e,g);if(!(y===void 0?ds(d,m,V3|W3,n,g):y))return!1}}return!0}var SR=$3;function j3(t){return t===t&&!Wr(t)}var om=j3;function z3(t){for(var e=to(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,om(i)]}return e}var vR=z3;function q3(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var am=q3;function G3(t){var e=vR(t);return e.length==1&&e[0][2]?am(e[0][0],e[0][1]):function(r){return r===t||SR(r,t,e)}}var bR=G3;function K3(t,e){return t!=null&&e in Object(t)}var wR=K3;function Q3(t,e,r){e=Yp(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=ao(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&ts(i)&&Ja(s,i)&&(rt(t)||rs(t)))}var ER=Q3;function Y3(t,e){return t!=null&&ER(t,e,wR)}var _R=Y3;var Z3=1,J3=2;function X3(t,e){return is(t)&&om(e)?am(ao(t),e):function(r){var n=Go(r,t);return n===void 0&&n===e?_R(r,t):ds(e,n,Z3|J3)}}var RR=X3;function ej(t){return function(e){return e?.[t]}}var sm=ej;function tj(t){return function(e){return cs(e,t)}}var kR=tj;function rj(t){return is(t)?sm(ao(t)):kR(t)}var AR=rj;function nj(t){return typeof t=="function"?t:t==null?Qn:typeof t=="object"?rt(t)?RR(t[0],t[1]):bR(t):AR(t)}var gs=nj;function ij(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),l=s.length;l--;){var u=s[t?l:++i];if(r(o[u],u,o)===!1)break}return e}}var PR=ij;var oj=PR(),LR=oj;function aj(t,e){return t&&LR(t,e,to)}var MR=aj;function sj(t,e){return function(r,n){if(r==null)return r;if(!Yn(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var DR=sj;var cj=DR(MR),FR=cj;function lj(t){return fr(t)&&Yn(t)}var CR=lj;function uj(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var IR=uj;function pj(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var cm=pj;var OR=/[\\^$.*+?()[\]{}|]/g,mj=RegExp(OR.source);function fj(t){return t=Dn(t),t&&mj.test(t)?t.replace(OR,"\\$&"):t}var $r=fj;var dj=Math.max,gj=Math.min;function hj(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=Ip(r),i=r<0?dj(n+i,0):gj(i,n-1)),zp(t,gs(e,3),i,!0)}var Qo=hj;function yj(t,e){var r=-1,n=Yn(t)?Array(t.length):[];return FR(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var NR=yj;var Tj="Expected a function",xj=8,Sj=32,vj=128,bj=256;function wj(t){return z_(function(e){var r=e.length,n=r,i=Xi.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(Tj);if(i&&!s&&Za(o)=="wrapper")var s=new Xi([],!0)}for(n=s?n:r;++n<r;){o=e[n];var l=Za(o),u=l=="wrapper"?Vp(o):void 0;u&&GT(u[0])&&u[1]==(vj|xj|Sj|bj)&&!u[4].length&&u[9]==1?s=s[Za(u[0])].apply(s,u[3]):s=o.length==1&&GT(o)?s[l]():s.thru(o)}return function(){var m=arguments,d=m[0];if(s&&m.length==1&&rt(d))return s.plant(d).value();for(var g=0,y=r?e[g].apply(this,m):d;++g<r;)y=e[g].call(this,y);return y}})}var UR=wj;var Ej=UR(),ox=Ej;function _j(t,e){return un(e,function(r){return t[r]})}var HR=_j;function Rj(t){return t==null?[]:HR(t,to(t))}var BR=Rj;function kj(t,e){return ds(t,e)}var Li=kj;function Aj(t,e){return t<e}var VR=Aj;function Pj(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(l===void 0?s===s&&!Vr(s):r(s,l)))var l=s,u=o}return u}var WR=Pj;function Lj(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var $R=Lj;function Mj(t){return t&&t.length?WR(t,Qn,VR):void 0}var ax=Mj;function Dj(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var jR=Dj;function Fj(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Vr(t),s=e!==void 0,l=e===null,u=e===e,m=Vr(e);if(!l&&!m&&!o&&t>e||o&&s&&u&&!l&&!m||n&&s&&u||!r&&u||!i)return 1;if(!n&&!o&&!m&&t<e||m&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!u)return-1}return 0}var zR=Fj;function Cj(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;++n<s;){var u=zR(i[n],o[n]);if(u){if(n>=l)return u;var m=r[n];return u*(m=="desc"?-1:1)}}return t.index-e.index}var qR=Cj;function Ij(t,e,r){e.length?e=un(e,function(o){return rt(o)?function(s){return cs(s,o.length===1?o[0]:o)}:o}):e=[Qn];var n=-1;e=un(e,ns(gs));var i=NR(t,function(o,s,l){var u=un(e,function(m){return m(o)});return{criteria:u,index:++n,value:o}});return jR(i,function(o,s){return qR(o,s,r)})}var GR=Ij;var Oj=9007199254740991,Nj=Math.floor;function Uj(t,e){var r="";if(!t||e<1||e>Oj)return r;do e%2&&(r+=t),e=Nj(e/2),e&&(t+=t);while(e);return r}var KR=Uj;function Hj(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var QR=Hj;var Bj=Array.prototype,YR=Bj.splice;function Vj(t,e,r,n){var i=n?QR:qp,o=-1,s=e.length,l=t;for(t===e&&(e=eo(e)),r&&(l=un(t,ns(r)));++o<s;)for(var u=0,m=e[o],d=r?r(m):m;(u=i(l,d,u,n))>-1;)l!==t&&YR.call(l,u,1),YR.call(t,u,1);return t}var ZR=Vj;function Wj(t,e){return t&&t.length&&e&&e.length?ZR(t,e):t}var JR=Wj;var $j=es(JR),dr=$j;var jj=Math.floor,zj=Math.random;function qj(t,e){return t+jj(zj()*(e-t+1))}var XR=qj;var Gj=Math.ceil,Kj=Math.max;function Qj(t,e,r,n){for(var i=-1,o=Kj(Gj((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var ek=Qj;function Yj(t){return function(e,r,n){return n&&typeof n!="number"&&zo(e,r,n)&&(r=n=void 0),e=Ka(e),r===void 0?(r=e,e=0):r=Ka(r),n=n===void 0?e<r?1:-1:Ka(n),ek(e,r,n,t)}}var tk=Yj;var Zj=tk(),sx=Zj;function Jj(t,e,r){return(r?zo(t,e,r):e===void 0)?e=1:e=Ip(e),KR(Dn(t),e)}var cx=Jj;function Xj(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=XR(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var lm=Xj;function ez(t){return lm(eo(t))}var rk=ez;function tz(t){return lm(BR(t))}var nk=tz;function rz(t){var e=rt(t)?rk:nk;return e(t)}var lx=rz;var nz=es(function(t,e){if(t==null)return[];var r=e.length;return r>1&&zo(t,e[0],e[1])?e=[]:r>2&&zo(e[0],e[1],e[2])&&(e=[e[0]]),GR(t,us(e,1),[])}),ux=nz;function iz(t,e){return t&&t.length?$R(t,gs(e,2)):0}var um=iz;var oz=1/0,az=so&&1/fs(new so([,-0]))[1]==oz?function(t){return new so(t)}:Bp,ik=az;var sz=200;function cz(t,e,r){var n=-1,i=l_,o=t.length,s=!0,l=[],u=l;if(r)s=!1,i=IR;else if(o>=sz){var m=e?null:ik(t);if(m)return fs(m);s=!1,i=rm,u=new tm}else u=e?[]:l;e:for(;++n<o;){var d=t[n],g=e?e(d):d;if(d=r||d!==0?d:0,s&&g===g){for(var y=u.length;y--;)if(u[y]===g)continue e;e&&u.push(g),l.push(d)}else i(u,g,r)||(u!==l&&u.push(g),l.push(d))}return l}var pm=cz;function lz(t){return t&&t.length?pm(t):[]}var Yo=lz;function uz(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?pm(t,void 0,e):[]}var Xc=uz;var pz=Math.max;function mz(t){if(!(t&&t.length))return[];var e=0;return t=Zp(t,function(r){if(CR(r))return e=pz(r.length,e),!0}),Kp(e,function(r){return un(t,sm(r))})}var ok=mz;var fz=es(ok),It=fz;var mm=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0}}};var el=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var nr=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{dr(this.listeners,e)}}}};var fm={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var tl=class{constructor(){this.notifier=new nr;this.mocks={...fm};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(gz(n,r))return Go(i,e)??Go(this.mocks,e)}return Go(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function gz(t,e){return t.languageId===e.languageId}var dm={hideInferenceWarning:!1,tutorialProgress:{}};var rl=class{constructor(){this.data={...dm}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var nl=class{async showMessage(e,r,n,...i){}};var gm=class{constructor(){this.configuration=new tl;this.messages=new nl;this.keyValueStore=new rl;this.clipboard=new el;this.capabilities=new mm;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=hs;this.onDidCloseTextDocument=hs;this.onDidChangeActiveTextEditor=hs;this.onDidChangeVisibleTextEditors=hs;this.onDidChangeTextEditorSelection=hs;this.onDidChangeTextEditorVisibleRanges=hs}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>dr(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function hs(){return{dispose(){}}}var ke=class t{static fromConcise(e){let r=e.split(":");if(r.length!==2)throw new Error(`Invalid concise position format: "${e}". Expected "line:character" format.`);let[n,i]=r.map(o=>parseInt(o,10));return new t(n,i)}constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new Y(this,this)}concise(){return`${this.line}:${this.character}`}conciseOneBased(){return`${this.line+1}:${this.character+1}`}toString(){return this.concise()}};function ak(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var Y=class t{static fromConcise(e){let r=e.split("-");if(r.length!==2)throw new Error(`Invalid concise range format: "${e}". Expected "start-end" format.`);let[n,i]=r.map(o=>ke.fromConcise(o));return new t(n,i)}constructor(...e){let[r,n]=e.length===2?e:[new ke(e[0],e[1]),new ke(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof ke?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new pt(this.end,this.start):new pt(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}-${this.end.conciseOneBased()}`}toString(){return`${this.start.concise()}-${this.end.concise()}`}};function hz(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function yz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function sk(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var hm=sk(hz),ym=sk(yz);function px(t,e){return e.lastIndex=0,t.matchAll(e)}function pn(t,e,r){return Array.from(px(t,e),r)}function Zo(t,e){return t.lastIndex=0,t.test(e)}function ck(t,e){return t.lastIndex=0,e.match(t)}function il(t,e){return pn(t,e,r=>({index:r.index,text:r[0]}))}var ys=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var Tm=class extends ys{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function Jo(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function yt(t,e,r,...n){return t.showMessage("error",e,r,...n)}var he=(n=>(n[n.supported=0]="supported",n[n.unsupported=1]="unsupported",n[n.notApplicable=2]="notApplicable",n))(he||{});var{supported:ee,unsupported:Tz,notApplicable:$}=he,mx={list:ee,disqualifyDelimiter:ee,ifStatement:ee,statement:ee,"statement.class":ee,"statement.enum":ee,"statement.field.class":ee,"statement.iteration.document":ee,"statement.iteration.class":ee,"statement.iteration.block":ee,class:ee,"class.iteration.document":ee,className:ee,"className.iteration.document":ee,"collectionItem.unenclosed":ee,"collectionItem.unenclosed.iteration":ee,namedFunction:ee,functionName:ee,"functionName.iteration.document":ee,"namedFunction.iteration.document":ee,functionCall:ee,functionCallee:ee,"argument.actual.singleLine":ee,"argument.actual.multiLine":ee,"argument.actual.iteration":ee,"argument.actual.method.singleLine":ee,"argument.actual.method.multiLine":ee,"argument.actual.method.iteration":ee,"argument.formal.singleLine":ee,"argument.formal.multiLine":ee,"argument.formal.iteration":ee,"argumentList.actual.empty":ee,"argumentList.actual.singleLine":ee,"argumentList.actual.multiLine":ee,"argumentList.actual.method.empty":ee,"argumentList.actual.method.singleLine":ee,"argumentList.actual.method.multiLine":ee,"argumentList.formal.empty":ee,"argumentList.formal.singleLine":ee,"argumentList.formal.multiLine":ee,"branch.if":ee,"branch.if.elif.else":ee,"branch.if.else":ee,"branch.if.iteration":ee,"branch.switchCase":ee,"branch.switchCase.iteration":ee,"branch.ternary":ee,"branch.ternary.iteration":ee,"comment.line":ee,"comment.block":ee,"string.singleLine":ee,"textFragment.comment.line":ee,"textFragment.comment.block":ee,"textFragment.string.singleLine":ee,"condition.if":ee,"condition.while":ee,"condition.doWhile":ee,"condition.for":ee,"condition.ternary":ee,"condition.switchCase":ee,"condition.switchCase.iteration":ee,"name.assignment":ee,"name.variable":ee,"name.function":ee,"name.class":ee,"name.enum":ee,"name.field.class":ee,"name.field.enum":ee,"name.argument.formal":ee,"name.argument.formal.iteration":ee,"name.iteration.block":ee,"name.iteration.class":ee,"name.iteration.enum":ee,"name.iteration.document":ee,"value.assignment":ee,"value.variable":ee,"value.return":ee,"value.switch":ee,"value.field.enum":ee,"value.iteration.block":ee,"value.iteration.class":ee,"value.iteration.enum":ee,"value.iteration.document":ee,"type.variable":ee,"type.argument.formal":ee,"type.argument.formal.iteration":ee,"type.field.class":ee,"type.enum":ee,"type.cast":ee,"type.class":ee,"type.return":ee,"type.iteration.block":ee,"type.iteration.class":ee,"type.iteration.document":ee,"interior.class":ee,"interior.enum":ee,"interior.function":ee,"interior.if":ee,"interior.switch":ee,"interior.switchCase":ee,"interior.ternary":ee,"interior.for":ee,"interior.while":ee,"interior.doWhile":ee,fieldAccess:Tz,element:$,tags:$,startTag:$,endTag:$,"interior.element":$,"textFragment.element":$,"interior.resource":$,"type.resource":$,"type.resource.iteration":$,"name.resource":$,"name.resource.iteration":$,"value.resource":$,"value.resource.iteration":$,map:$,"key.mapPair":$,"key.mapPair.iteration":$,"value.mapPair":$,"value.mapPair.iteration":$,"name.argument.actual":$,"name.argument.actual.iteration":$,"value.argument.actual":$,"value.argument.actual.iteration":$,"string.multiLine":$,"textFragment.string.multiLine":$,section:$,"section.iteration.document":$,"section.iteration.parent":$,"name.assignment.pattern":$,"name.variable.pattern":$,"value.variable.pattern":$,command:$,"name.command":$,"value.command":$,"interior.command":$,"type.alias":$,"value.typeAlias":$,notebookCell:$,"interior.cell":$,"class.iteration.block":$,"className.iteration.block":$,"functionName.iteration.block":$,"namedFunction.iteration.block":$,"branch.try":$,"branch.try.iteration":$,"interior.try":$,"argument.catch":$,"name.argument.catch":$,"type.argument.catch":$,"statement.interface":$,"statement.field.interface":$,"statement.iteration.interface":$,"name.interface":$,"name.field.interface":$,"name.iteration.interface":$,"type.interface":$,"type.field.interface":$,"type.iteration.interface":$,"interior.interface":$,"key.attribute":$,"value.attribute":$,"value.yield":$,"value.field.class":$,"interior.static":$,"branch.loop":$,"branch.loop.iteration":$,environment:$,pairDelimiter:$,regularExpression:$,selector:$,unit:$},xz={...mx,attribute:$,"argument.formal.lambda.iteration":$,"argument.formal.lambda.singleLine":$,"argument.formal.lambda.multiLine":$,"argumentList.formal.lambda.empty":$,"argumentList.formal.lambda.multiLine":$,"argumentList.formal.lambda.singleLine":$,"interior.lambda":$,"value.return.lambda":$,anonymousFunction:$,"argument.actual.constructor.iteration":$,"argument.actual.constructor.singleLine":$,"argument.actual.constructor.multiLine":$,"argument.formal.constructor.iteration":$,"argument.formal.constructor.singleLine":$,"argument.formal.constructor.multiLine":$,"argumentList.actual.constructor.empty":$,"argumentList.actual.constructor.multiLine":$,"argumentList.actual.constructor.singleLine":$,"argumentList.formal.constructor.empty":$,"argumentList.formal.constructor.multiLine":$,"argumentList.formal.constructor.singleLine":$,"functionCall.constructor":$,"functionCallee.constructor":$,"functionName.constructor":$,"name.argument.formal.constructor.iteration":$,"name.argument.formal.constructor":$,"name.constructor":$,"namedFunction.constructor":$,"type.argument.formal.constructor.iteration":$,"type.argument.formal.constructor":$,"value.argument.formal.constructor.iteration":$,"value.argument.formal.constructor":$,"interior.constructor":$,"argument.formal.method.iteration":$,"argument.formal.method.singleLine":$,"argument.formal.method.multiLine":$,"argumentList.formal.method.empty":$,"argumentList.formal.method.multiLine":$,"argumentList.formal.method.singleLine":$,"functionName.method.iteration.class":$,"functionName.method":$,"name.argument.formal.method.iteration":$,"name.argument.formal.method":$,"name.method":$,"namedFunction.method.iteration.class":$,"namedFunction.method":$,"type.argument.formal.method.iteration":$,"type.argument.formal.method":$,"value.argument.formal.method.iteration":$,"value.argument.formal.method":$,"interior.method":$,"name.foreach":$,"type.foreach":$,"value.foreach":$,"interior.foreach":$,"value.argument.formal":$,"value.argument.formal.iteration":$,"type.typeArgument":$,"type.typeArgument.iteration":$,"name.namespace":$,"interior.namespace":$};var{supported:wse,unsupported:Ese,notApplicable:_se}=he;var{supported:pe,notApplicable:Sz}=he,vz={...mx,attribute:pe,anonymousFunction:pe,"branch.try":pe,"branch.try.iteration":pe,"argument.actual.constructor.singleLine":pe,"argument.actual.constructor.multiLine":pe,"argument.actual.constructor.iteration":pe,"argument.formal.method.singleLine":pe,"argument.formal.method.multiLine":pe,"argument.formal.method.iteration":pe,"argument.formal.constructor.singleLine":pe,"argument.formal.constructor.multiLine":pe,"argument.formal.constructor.iteration":pe,"argument.formal.lambda.singleLine":pe,"argument.formal.lambda.multiLine":pe,"argument.formal.lambda.iteration":pe,"argumentList.actual.constructor.empty":pe,"argumentList.actual.constructor.singleLine":pe,"argumentList.actual.constructor.multiLine":pe,"argumentList.formal.constructor.empty":pe,"argumentList.formal.constructor.singleLine":pe,"argumentList.formal.constructor.multiLine":pe,"argumentList.formal.lambda.empty":pe,"argumentList.formal.lambda.singleLine":pe,"argumentList.formal.lambda.multiLine":pe,"argumentList.formal.method.empty":pe,"argumentList.formal.method.singleLine":pe,"argumentList.formal.method.multiLine":pe,"functionCall.constructor":pe,"functionCallee.constructor":pe,"functionName.constructor":pe,"functionName.method":pe,"functionName.method.iteration.class":pe,"namedFunction.method":pe,"namedFunction.method.iteration.class":pe,"namedFunction.constructor":pe,"name.argument.formal.method":pe,"name.argument.formal.method.iteration":pe,"name.argument.formal.constructor":pe,"name.argument.formal.constructor.iteration":pe,"name.constructor":pe,"name.foreach":pe,"name.method":pe,"name.namespace":pe,"value.argument.formal":pe,"value.argument.formal.iteration":pe,"value.argument.formal.method":pe,"value.argument.formal.method.iteration":pe,"value.argument.formal.constructor":pe,"value.argument.formal.constructor.iteration":pe,"value.foreach":pe,"value.field.class":pe,"type.argument.formal.method":pe,"type.argument.formal.method.iteration":pe,"type.argument.formal.constructor":pe,"type.argument.formal.constructor.iteration":pe,"type.foreach":pe,"type.typeArgument":pe,"type.typeArgument.iteration":pe,"interior.lambda":pe,"interior.try":pe,"interior.foreach":pe,"interior.constructor":pe,"interior.method":pe,"interior.namespace":pe,"value.return.lambda":Sz};var{supported:Mse,unsupported:Dse,notApplicable:Fse}=he;var{supported:lt,notApplicable:k}=he,fx={"comment.block":lt,"string.singleLine":lt,disqualifyDelimiter:lt,map:lt,functionCall:lt,functionCallee:lt,"argument.actual.singleLine":lt,"argument.actual.iteration":lt,"argumentList.actual.empty":lt,"argumentList.actual.singleLine":lt,"argumentList.actual.multiLine":lt,"name.iteration.document":lt,"name.iteration.block":lt,"textFragment.comment.block":lt,"textFragment.string.singleLine":lt,"key.mapPair":lt,"key.mapPair.iteration":lt,"value.mapPair":lt,"value.mapPair.iteration":lt,"collectionItem.unenclosed":lt,"collectionItem.unenclosed.iteration":lt,statement:lt,"statement.iteration.document":lt,selector:lt,unit:lt,class:k,"class.iteration.block":k,"class.iteration.document":k,className:k,"className.iteration.block":k,"className.iteration.document":k,"name.class":k,"name.field.class":k,"name.iteration.class":k,"statement.class":k,"statement.field.class":k,"statement.iteration.class":k,"type.class":k,"type.field.class":k,"type.iteration.class":k,"value.field.class":k,"value.iteration.class":k,"interior.class":k,"namedFunction.method.iteration.class":k,"functionName.method.iteration.class":k,"statement.interface":k,"statement.field.interface":k,"statement.iteration.interface":k,"name.interface":k,"name.field.interface":k,"name.iteration.interface":k,"type.interface":k,"type.field.interface":k,"type.iteration.interface":k,"interior.interface":k,"statement.enum":k,"name.enum":k,"name.field.enum":k,"name.iteration.enum":k,"value.field.enum":k,"value.iteration.enum":k,"type.enum":k,"interior.enum":k,command:k,"name.command":k,"value.command":k,"interior.command":k,"branch.try":k,"branch.try.iteration":k,"interior.try":k,"argument.catch":k,"name.argument.catch":k,"type.argument.catch":k,anonymousFunction:k,"argument.actual.multiLine":k,"argument.actual.constructor.iteration":k,"argument.actual.constructor.singleLine":k,"argument.actual.constructor.multiLine":k,"argument.actual.method.iteration":k,"argument.actual.method.singleLine":k,"argument.actual.method.multiLine":k,"argument.formal.constructor.iteration":k,"argument.formal.constructor.singleLine":k,"argument.formal.constructor.multiLine":k,"argument.formal.iteration":k,"argument.formal.method.iteration":k,"argument.formal.method.singleLine":k,"argument.formal.method.multiLine":k,"argument.formal.singleLine":k,"argument.formal.multiLine":k,"argument.formal.lambda.singleLine":k,"argument.formal.lambda.multiLine":k,"argument.formal.lambda.iteration":k,"argumentList.actual.method.empty":k,"argumentList.actual.method.singleLine":k,"argumentList.actual.method.multiLine":k,"argumentList.actual.constructor.empty":k,"argumentList.actual.constructor.singleLine":k,"argumentList.actual.constructor.multiLine":k,"argumentList.formal.empty":k,"argumentList.formal.singleLine":k,"argumentList.formal.multiLine":k,"argumentList.formal.lambda.empty":k,"argumentList.formal.lambda.singleLine":k,"argumentList.formal.lambda.multiLine":k,"argumentList.formal.method.empty":k,"argumentList.formal.method.singleLine":k,"argumentList.formal.method.multiLine":k,"argumentList.formal.constructor.empty":k,"argumentList.formal.constructor.singleLine":k,"argumentList.formal.constructor.multiLine":k,attribute:k,"branch.if.iteration":k,"branch.if":k,"branch.if.elif.else":k,"branch.if.else":k,"branch.loop":k,"branch.loop.iteration":k,"branch.switchCase.iteration":k,"branch.switchCase":k,"branch.ternary":k,"branch.ternary.iteration":k,"comment.line":k,"condition.doWhile":k,"condition.for":k,"condition.if":k,"condition.switchCase.iteration":k,"condition.switchCase":k,"condition.ternary":k,"condition.while":k,element:k,endTag:k,environment:k,fieldAccess:k,"functionCall.constructor":k,"functionCallee.constructor":k,"functionName.constructor":k,"functionName.iteration.block":k,"functionName.iteration.document":k,"functionName.method":k,functionName:k,ifStatement:k,"interior.cell":k,"interior.element":k,"interior.function":k,"interior.constructor":k,"interior.method":k,"interior.if":k,"interior.lambda":k,"interior.for":k,"interior.foreach":k,"interior.while":k,"interior.doWhile":k,"interior.resource":k,"interior.switch":k,"interior.switchCase":k,"interior.ternary":k,"interior.namespace":k,"interior.static":k,"key.attribute":k,list:k,"name.argument.actual.iteration":k,"name.argument.actual":k,"name.argument.formal.constructor.iteration":k,"name.argument.formal.constructor":k,"name.argument.formal.iteration":k,"name.argument.formal.method.iteration":k,"name.argument.formal.method":k,"name.argument.formal":k,"name.assignment.pattern":k,"name.assignment":k,"name.namespace":k,"name.constructor":k,"name.foreach":k,"name.function":k,"name.method":k,"name.resource.iteration":k,"name.resource":k,"name.variable.pattern":k,"name.variable":k,"namedFunction.constructor":k,"namedFunction.iteration.block":k,"namedFunction.iteration.document":k,"namedFunction.method":k,namedFunction:k,notebookCell:k,pairDelimiter:k,regularExpression:k,"section.iteration.document":k,"section.iteration.parent":k,section:k,startTag:k,"statement.iteration.block":k,"string.multiLine":k,tags:k,"textFragment.comment.line":k,"textFragment.element":k,"textFragment.string.multiLine":k,"type.alias":k,"type.argument.formal.constructor.iteration":k,"type.argument.formal.constructor":k,"type.argument.formal.iteration":k,"type.argument.formal.method.iteration":k,"type.argument.formal.method":k,"type.argument.formal":k,"type.cast":k,"type.foreach":k,"type.resource":k,"type.resource.iteration":k,"type.return":k,"type.typeArgument.iteration":k,"type.typeArgument":k,"type.variable":k,"type.iteration.block":k,"type.iteration.document":k,"value.argument.actual.iteration":k,"value.argument.actual":k,"value.argument.formal.constructor.iteration":k,"value.argument.formal.constructor":k,"value.argument.formal.iteration":k,"value.argument.formal.method.iteration":k,"value.argument.formal.method":k,"value.argument.formal":k,"value.assignment":k,"value.attribute":k,"value.foreach":k,"value.resource.iteration":k,"value.resource":k,"value.return.lambda":k,"value.return":k,"value.typeAlias":k,"value.variable.pattern":k,"value.variable":k,"value.yield":k,"value.switch":k,"value.iteration.block":k,"value.iteration.document":k};var{supported:Use,unsupported:Hse,notApplicable:Bse}=he;var{supported:$se,unsupported:jse,notApplicable:zse}=he;var{supported:Kse,notApplicable:Qse}=he;var{supported:Jse,unsupported:Xse,notApplicable:ece}=he;var{supported:I,notApplicable:le}=he,dx={list:I,map:I,regularExpression:I,fieldAccess:I,disqualifyDelimiter:I,pairDelimiter:I,"collectionItem.unenclosed":I,"collectionItem.unenclosed.iteration":I,"textFragment.string.singleLine":I,"textFragment.string.multiLine":I,"textFragment.comment.line":I,"textFragment.comment.block":I,ifStatement:I,statement:I,"statement.class":I,"statement.field.class":I,"statement.iteration.document":I,"statement.iteration.class":I,"statement.iteration.block":I,class:I,"class.iteration.document":I,className:I,"className.iteration.document":I,anonymousFunction:I,namedFunction:I,"namedFunction.iteration.document":I,"namedFunction.method":I,"namedFunction.method.iteration.class":I,"namedFunction.constructor":I,functionName:I,"functionName.iteration.document":I,"functionName.method":I,"functionName.method.iteration.class":I,"functionName.constructor":I,functionCall:I,"functionCall.constructor":I,functionCallee:I,"functionCallee.constructor":I,"argument.actual.singleLine":I,"argument.actual.multiLine":I,"argument.actual.iteration":I,"argument.actual.method.singleLine":I,"argument.actual.method.multiLine":I,"argument.actual.method.iteration":I,"argument.actual.constructor.singleLine":I,"argument.actual.constructor.multiLine":I,"argument.actual.constructor.iteration":I,"argument.formal.singleLine":I,"argument.formal.multiLine":I,"argument.formal.iteration":I,"argument.formal.method.singleLine":I,"argument.formal.method.multiLine":I,"argument.formal.method.iteration":I,"argument.formal.constructor.singleLine":I,"argument.formal.constructor.multiLine":I,"argument.formal.constructor.iteration":I,"argument.formal.lambda.singleLine":I,"argument.formal.lambda.multiLine":I,"argument.formal.lambda.iteration":I,"argument.catch":I,"argumentList.actual.empty":I,"argumentList.actual.singleLine":I,"argumentList.actual.multiLine":I,"argumentList.actual.method.empty":I,"argumentList.actual.method.singleLine":I,"argumentList.actual.method.multiLine":I,"argumentList.actual.constructor.empty":I,"argumentList.actual.constructor.singleLine":I,"argumentList.actual.constructor.multiLine":I,"argumentList.formal.empty":I,"argumentList.formal.singleLine":I,"argumentList.formal.multiLine":I,"argumentList.formal.lambda.empty":I,"argumentList.formal.lambda.singleLine":I,"argumentList.formal.lambda.multiLine":I,"argumentList.formal.method.empty":I,"argumentList.formal.method.singleLine":I,"argumentList.formal.method.multiLine":I,"argumentList.formal.constructor.empty":I,"argumentList.formal.constructor.singleLine":I,"argumentList.formal.constructor.multiLine":I,"comment.line":I,"comment.block":I,"string.singleLine":I,"string.multiLine":I,"branch.if":I,"branch.if.elif.else":I,"branch.if.else":I,"branch.if.iteration":I,"branch.try":I,"branch.try.iteration":I,"branch.switchCase":I,"branch.switchCase.iteration":I,"branch.ternary":I,"branch.ternary.iteration":I,"condition.if":I,"condition.while":I,"condition.doWhile":I,"condition.for":I,"condition.ternary":I,"condition.switchCase":I,"condition.switchCase.iteration":I,"name.argument.formal":I,"name.argument.formal.iteration":I,"name.argument.formal.method":I,"name.argument.formal.method.iteration":I,"name.argument.formal.constructor":I,"name.argument.formal.constructor.iteration":I,"name.argument.catch":I,"name.foreach":I,"name.assignment":I,"name.assignment.pattern":I,"name.variable":I,"name.variable.pattern":I,"name.function":I,"name.method":I,"name.constructor":I,"name.class":I,"name.field.class":I,"name.iteration.document":I,"name.iteration.class":I,"name.iteration.block":I,"key.mapPair":I,"key.mapPair.iteration":I,"value.argument.formal":I,"value.argument.formal.iteration":I,"value.argument.formal.method":I,"value.argument.formal.method.iteration":I,"value.argument.formal.constructor":I,"value.argument.formal.constructor.iteration":I,"value.mapPair":I,"value.mapPair.iteration":I,"value.assignment":I,"value.variable":I,"value.variable.pattern":I,"value.foreach":I,"value.return":I,"value.return.lambda":I,"value.field.class":I,"value.yield":I,"value.switch":I,"value.iteration.block":I,"value.iteration.class":I,"value.iteration.document":I,"interior.class":I,"interior.function":I,"interior.constructor":I,"interior.method":I,"interior.if":I,"interior.lambda":I,"interior.for":I,"interior.foreach":I,"interior.while":I,"interior.doWhile":I,"interior.switch":I,"interior.switchCase":I,"interior.ternary":I,"interior.try":I,"interior.static":I,"class.iteration.block":le,"className.iteration.block":le,section:le,"section.iteration.document":le,"section.iteration.parent":le,command:le,"name.command":le,"value.command":le,"interior.command":le,notebookCell:le,"interior.cell":le,"interior.resource":le,"name.resource.iteration":le,"name.resource":le,"type.resource.iteration":le,"type.resource":le,"value.resource.iteration":le,"value.resource":le,"name.argument.actual.iteration":le,"name.argument.actual":le,"value.argument.actual.iteration":le,"value.argument.actual":le,"functionName.iteration.block":le,"namedFunction.iteration.block":le,"name.namespace":le,"interior.namespace":le,"branch.loop":le,"branch.loop.iteration":le,environment:le,selector:le,unit:le},gx={element:I,tags:I,startTag:I,endTag:I,attribute:I,"key.attribute":I,"value.attribute":I,"interior.element":I,"textFragment.element":I},hx={...dx,...gx,"type.argument.formal":le,"type.argument.formal.iteration":le,"type.argument.formal.method":le,"type.argument.formal.method.iteration":le,"type.argument.formal.constructor":le,"type.argument.formal.constructor.iteration":le,"type.argument.catch":le,"type.alias":le,"type.cast":le,"type.class":le,"type.field.class":le,"type.foreach":le,"type.return":le,"type.variable":le,"type.typeArgument":le,"type.typeArgument.iteration":le,"type.iteration.block":le,"type.iteration.class":le,"type.iteration.document":le,"value.typeAlias":le,"statement.interface":le,"statement.field.interface":le,"statement.iteration.interface":le,"name.interface":le,"name.field.interface":le,"name.iteration.interface":le,"type.interface":le,"type.field.interface":le,"type.iteration.interface":le,"interior.interface":le,"statement.enum":le,"name.enum":le,"name.field.enum":le,"name.iteration.enum":le,"value.field.enum":le,"value.iteration.enum":le,"type.enum":le,"interior.enum":le};var bz={...hx};var{supported:mn,notApplicable:R}=he,ol={list:mn,map:mn,"string.singleLine":mn,"key.mapPair.iteration":mn,"key.mapPair":mn,"value.mapPair.iteration":mn,"value.mapPair":mn,"comment.block":mn,"comment.line":mn,"textFragment.comment.block":mn,"textFragment.comment.line":mn,"textFragment.string.singleLine":mn,class:R,"class.iteration.block":R,"class.iteration.document":R,className:R,"className.iteration.block":R,"className.iteration.document":R,"name.class":R,"name.field.class":R,"name.iteration.class":R,"statement.class":R,"statement.field.class":R,"statement.iteration.class":R,"type.class":R,"type.field.class":R,"type.iteration.class":R,"value.field.class":R,"value.iteration.class":R,"interior.class":R,"namedFunction.method.iteration.class":R,"functionName.method.iteration.class":R,"statement.interface":R,"statement.field.interface":R,"statement.iteration.interface":R,"interior.interface":R,"name.interface":R,"name.field.interface":R,"name.iteration.interface":R,"type.interface":R,"type.field.interface":R,"type.iteration.interface":R,"statement.enum":R,"name.enum":R,"name.field.enum":R,"name.iteration.enum":R,"value.field.enum":R,"value.iteration.enum":R,"type.enum":R,"interior.enum":R,command:R,"name.command":R,"value.command":R,"interior.command":R,"branch.try":R,"branch.try.iteration":R,"interior.try":R,"argument.catch":R,"name.argument.catch":R,"type.argument.catch":R,anonymousFunction:R,"argument.actual.singleLine":R,"argument.actual.multiLine":R,"argument.actual.constructor.singleLine":R,"argument.actual.constructor.multiLine":R,"argument.actual.constructor.iteration":R,"argument.actual.iteration":R,"argument.actual.method.singleLine":R,"argument.actual.method.multiLine":R,"argument.actual.method.iteration":R,"argument.formal.singleLine":R,"argument.formal.multiLine":R,"argument.formal.constructor.singleLine":R,"argument.formal.constructor.multiLine":R,"argument.formal.constructor.iteration":R,"argument.formal.iteration":R,"argument.formal.method.singleLine":R,"argument.formal.method.multiLine":R,"argument.formal.method.iteration":R,"argument.formal.lambda.singleLine":R,"argument.formal.lambda.multiLine":R,"argument.formal.lambda.iteration":R,"argumentList.actual.empty":R,"argumentList.actual.singleLine":R,"argumentList.actual.multiLine":R,"argumentList.actual.method.empty":R,"argumentList.actual.method.singleLine":R,"argumentList.actual.method.multiLine":R,"argumentList.actual.constructor.empty":R,"argumentList.actual.constructor.singleLine":R,"argumentList.actual.constructor.multiLine":R,"argumentList.formal.empty":R,"argumentList.formal.singleLine":R,"argumentList.formal.multiLine":R,"argumentList.formal.lambda.empty":R,"argumentList.formal.lambda.singleLine":R,"argumentList.formal.lambda.multiLine":R,"argumentList.formal.method.empty":R,"argumentList.formal.method.singleLine":R,"argumentList.formal.method.multiLine":R,"argumentList.formal.constructor.empty":R,"argumentList.formal.constructor.singleLine":R,"argumentList.formal.constructor.multiLine":R,attribute:R,"branch.if":R,"branch.if.elif.else":R,"branch.if.else":R,"branch.if.iteration":R,"branch.loop":R,"branch.loop.iteration":R,"branch.switchCase":R,"branch.switchCase.iteration":R,"branch.ternary":R,"branch.ternary.iteration":R,"collectionItem.unenclosed":R,"collectionItem.unenclosed.iteration":R,"condition.doWhile":R,"condition.for":R,"condition.if":R,"condition.switchCase":R,"condition.switchCase.iteration":R,"condition.ternary":R,"condition.while":R,disqualifyDelimiter:R,element:R,endTag:R,environment:R,fieldAccess:R,functionCall:R,"functionCall.constructor":R,functionCallee:R,"functionCallee.constructor":R,functionName:R,"functionName.constructor":R,"functionName.iteration.block":R,"functionName.iteration.document":R,"functionName.method":R,ifStatement:R,"interior.cell":R,"interior.element":R,"interior.function":R,"interior.constructor":R,"interior.method":R,"interior.if":R,"interior.lambda":R,"interior.for":R,"interior.foreach":R,"interior.while":R,"interior.doWhile":R,"interior.resource":R,"interior.switch":R,"interior.switchCase":R,"interior.ternary":R,"interior.static":R,"interior.namespace":R,"key.attribute":R,"name.argument.actual":R,"name.argument.actual.iteration":R,"name.argument.formal":R,"name.argument.formal.constructor":R,"name.argument.formal.constructor.iteration":R,"name.argument.formal.iteration":R,"name.argument.formal.method":R,"name.argument.formal.method.iteration":R,"name.assignment":R,"name.assignment.pattern":R,"name.namespace":R,"name.constructor":R,"name.foreach":R,"name.function":R,"name.iteration.block":R,"name.iteration.document":R,"name.method":R,"name.resource":R,"name.resource.iteration":R,"name.variable":R,"name.variable.pattern":R,namedFunction:R,"namedFunction.constructor":R,"namedFunction.iteration.block":R,"namedFunction.iteration.document":R,"namedFunction.method":R,notebookCell:R,pairDelimiter:R,regularExpression:R,section:R,"section.iteration.document":R,"section.iteration.parent":R,startTag:R,statement:R,"statement.iteration.block":R,"statement.iteration.document":R,"string.multiLine":R,tags:R,"textFragment.element":R,"textFragment.string.multiLine":R,"type.alias":R,"type.argument.formal":R,"type.argument.formal.constructor":R,"type.argument.formal.constructor.iteration":R,"type.argument.formal.iteration":R,"type.argument.formal.method":R,"type.argument.formal.method.iteration":R,"type.cast":R,"type.foreach":R,"type.variable":R,"type.return":R,"type.resource":R,"type.resource.iteration":R,"type.typeArgument":R,"type.typeArgument.iteration":R,"type.iteration.block":R,"type.iteration.document":R,"value.argument.actual":R,"value.argument.actual.iteration":R,"value.argument.formal":R,"value.argument.formal.constructor":R,"value.argument.formal.constructor.iteration":R,"value.argument.formal.iteration":R,"value.argument.formal.method":R,"value.argument.formal.method.iteration":R,"value.assignment":R,"value.attribute":R,"value.foreach":R,"value.resource":R,"value.resource.iteration":R,"value.return":R,"value.return.lambda":R,"value.typeAlias":R,"value.variable":R,"value.variable.pattern":R,"value.yield":R,"value.switch":R,"value.iteration.block":R,"value.iteration.document":R,selector:R,unit:R};var{supported:uce,unsupported:pce,notApplicable:mce}=he,wz={...ol};var{supported:hce,unsupported:yce,notApplicable:Tce}=he,Ez={...ol};var{supported:vce,unsupported:bce,notApplicable:wce}=he;var{supported:Rce,notApplicable:kce}=he;var{supported:Lce,notApplicable:Mce}=he;var{supported:Cce,unsupported:Ice,notApplicable:Oce}=he;var{supported:Hce,notApplicable:Bce}=he;var{supported:$ce,unsupported:jce,notApplicable:zce}=he;var{supported:Kce,unsupported:Qce,notApplicable:Yce}=he;var{supported:Xce,unsupported:ele,notApplicable:tle}=he;var{supported:ile,unsupported:ole,notApplicable:ale}=he;var{supported:lle,notApplicable:ule}=he;var{supported:mt}=he,_z={...fx,"comment.line":mt,namedFunction:mt,"namedFunction.iteration.block":mt,"namedFunction.iteration.document":mt,functionName:mt,"functionName.iteration.block":mt,"functionName.iteration.document":mt,"name.argument.formal":mt,"name.argument.formal.iteration":mt,"name.function":mt,"value.argument.formal":mt,"value.argument.formal.iteration":mt,"value.return":mt,"textFragment.comment.line":mt,ifStatement:mt,"branch.if":mt,"branch.if.elif.else":mt,"branch.if.else":mt,"branch.if.iteration":mt,"condition.if":mt,"interior.if":mt,"interior.function":mt,"argument.actual.singleLine":mt,"argument.actual.multiLine":mt};var{supported:hle,unsupported:yle,notApplicable:Tle}=he;var{supported:Ve,notApplicable:Zn}=he,yx={...dx,"type.argument.formal":Ve,"type.argument.formal.iteration":Ve,"type.argument.formal.method":Ve,"type.argument.formal.method.iteration":Ve,"type.argument.formal.constructor":Ve,"type.argument.formal.constructor.iteration":Ve,"type.argument.catch":Ve,"type.alias":Ve,"type.cast":Ve,"type.class":Ve,"type.field.class":Ve,"type.field.interface":Ve,"type.interface":Ve,"type.enum":Ve,"type.return":Ve,"type.variable":Ve,"type.typeArgument":Ve,"type.typeArgument.iteration":Ve,"type.iteration.block":Ve,"type.iteration.class":Ve,"type.iteration.interface":Ve,"type.iteration.document":Ve,"name.interface":Ve,"name.enum":Ve,"name.field.interface":Ve,"name.field.enum":Ve,"name.iteration.interface":Ve,"name.iteration.enum":Ve,"statement.interface":Ve,"statement.enum":Ve,"statement.field.interface":Ve,"statement.iteration.interface":Ve,"value.typeAlias":Ve,"value.field.enum":Ve,"value.iteration.enum":Ve,"interior.interface":Ve,"interior.enum":Ve,element:Zn,tags:Zn,startTag:Zn,endTag:Zn,attribute:Zn,"key.attribute":Zn,"value.attribute":Zn,"interior.element":Zn,"textFragment.element":Zn,"type.foreach":Zn};var Rz={...yx,...gx};var{supported:kle,notApplicable:Ale}=he;var{supported:Mle,unsupported:Dle,notApplicable:Fle}=he;var kz={command:{description:"A command, for example Talon spoken command or bash",scopeType:"command"},element:{description:"A xml/html element. Also used for LaTeX environments",scopeType:"xmlElement"},startTag:{description:"The start tag of a xml element",scopeType:"xmlStartTag"},endTag:{description:"The end tag of a xml element",scopeType:"xmlEndTag"},tags:{description:"Both tags in a xml element",scopeType:"xmlBothTags"},attribute:{description:"A attribute, eg of a html element or a C++ attribute",scopeType:"attribute"},environment:{description:"An environment, eg in LaTeX",scopeType:"environment"},section:{description:"A document section",scopeType:"section"},"section.iteration.document":Mi("section","sections"),"section.iteration.parent":We("section","sections","the parent section"),list:{description:"A list/array",scopeType:"list"},map:{description:"A map/dictionary",scopeType:"map"},regularExpression:{description:"A regular expression",scopeType:"regularExpression"},fieldAccess:{description:"A field access",scopeType:"private.fieldAccess"},ifStatement:{description:"An if statement",scopeType:"ifStatement"},statement:{description:"A statement, eg assignment, for loop, etc",scopeType:"statement"},"statement.class":{description:"A class declaration",scopeType:"statement"},"statement.interface":{description:"An interface declaration",scopeType:"statement"},"statement.enum":{description:"An enum declaration",scopeType:"statement"},"statement.field.class":{description:"A field declaration in a class",scopeType:"statement"},"statement.field.interface":{description:"A field declaration in a interface",scopeType:"statement"},"statement.iteration.document":Mi("statement","statements"),"statement.iteration.class":Ts("statement","statements"),"statement.iteration.interface":Tx("statement","statements"),"statement.iteration.block":co("statement","statements"),class:{description:"A class in an object-oriented language",scopeType:"class"},"class.iteration.document":Mi("class","classes"),"class.iteration.block":co("class","classes"),className:{description:"The name of a class",scopeType:"className"},"className.iteration.document":Mi("className","class names"),"className.iteration.block":co("className","class names"),namedFunction:{description:"A named function declaration",scopeType:"namedFunction"},"namedFunction.method":{description:"A named method declaration in a class",scopeType:"namedFunction"},"namedFunction.method.iteration.class":Ts("namedFunction","named functions"),"namedFunction.constructor":{description:"A constructor declaration in a class",scopeType:"namedFunction"},"namedFunction.iteration.block":co("namedFunction","named functions"),"namedFunction.iteration.document":Mi("namedFunction","named functions"),anonymousFunction:{description:"An anonymous function, eg a lambda function, an arrow function, etc",scopeType:"anonymousFunction"},functionName:{description:"The name of a function",scopeType:"functionName"},"functionName.method":{description:"The name of a method in a class",scopeType:"functionName"},"functionName.method.iteration.class":Ts("functionName","method names"),"functionName.constructor":{description:"The name of a constructor in a class",scopeType:"functionName"},"functionName.iteration.block":co("functionName","function names"),"functionName.iteration.document":Mi("functionName","function names"),functionCall:{description:"A function call",scopeType:"functionCall"},"functionCall.constructor":{description:"A constructor call",scopeType:"functionCall"},functionCallee:{description:"The function being called in a function call",scopeType:"functionCallee"},"functionCallee.constructor":{description:"The class being constructed in a class instantiation, including the `new` keyword",scopeType:"functionCallee"},"argument.actual.singleLine":{description:"A single line argument in a function call",scopeType:"argumentOrParameter"},"argument.actual.multiLine":{description:"A multiline argument in a function call. Insertion delimiter should include new line.",scopeType:"argumentOrParameter"},"argument.actual.iteration":We("argumentOrParameter","arguments in a function call","the argument list. The domain should be the entire function call"),"argument.actual.method.singleLine":{description:"A single line argument in a method call",scopeType:"argumentOrParameter"},"argument.actual.method.multiLine":{description:"A multi line argument in a method call. Insertion delimiter should include new line.",scopeType:"argumentOrParameter"},"argument.actual.method.iteration":We("argumentOrParameter","arguments in a method call","the argument list. The domain should be the entire method call"),"argument.actual.constructor.singleLine":{description:"A single line argument in a constructor call",scopeType:"argumentOrParameter"},"argument.actual.constructor.multiLine":{description:"A multi line argument in a constructor call. Insertion delimiter should include new line.",scopeType:"argumentOrParameter"},"argument.actual.constructor.iteration":We("argumentOrParameter","arguments in a constructor call","the argument list. The domain should be the entire constructor call"),"argument.formal.singleLine":{description:"A single line parameter in a function declaration",scopeType:"argumentOrParameter"},"argument.formal.multiLine":{description:"A multi line parameter in a function declaration. Insertion delimiter should include new line.",scopeType:"argumentOrParameter"},"argument.formal.iteration":We("argumentOrParameter","formal parameters in a function declaration","the parameters list. The domain should be the entire function"),"argument.formal.method.singleLine":{description:"A single line parameter in a class method declaration",scopeType:"argumentOrParameter"},"argument.formal.method.multiLine":{description:"A multi line parameter in a class method declaration. Insertion delimiter should include new line.",scopeType:"argumentOrParameter"},"argument.formal.method.iteration":We("argumentOrParameter","formal parameters in a method declaration","the parameter list. The domain should be the entire method"),"argument.formal.constructor.singleLine":{description:"A single line parameter in a constructor declaration",scopeType:"argumentOrParameter"},"argument.formal.constructor.multiLine":{description:"A multi line parameter in a constructor declaration. Insertion delimiter should include new line.",scopeType:"argumentOrParameter"},"argument.formal.constructor.iteration":We("argumentOrParameter","formal parameters in a constructor declaration","the parameter list. The domain should be the entire constructor"),"argument.formal.lambda.singleLine":{description:"A single line parameter in a lambda declaration",scopeType:"argumentOrParameter"},"argument.formal.lambda.multiLine":{description:"A multi line parameter in a lambda declaration. Insertion delimiter should include new line.",scopeType:"argumentOrParameter"},"argument.formal.lambda.iteration":We("argumentOrParameter","formal parameters in a lambda declaration","the parameter list. The domain should be the entire lambda"),"argument.catch":{description:"A parameter in a catch clause",scopeType:"argumentOrParameter"},"argumentList.actual.empty":{description:"An empty list of arguments in a function call. Insertion delimiter should be empty.",scopeType:"argumentList"},"argumentList.actual.singleLine":{description:"A single line list of arguments in a function call",scopeType:"argumentList"},"argumentList.actual.multiLine":{description:"A multi line list of arguments in a function call. Insertion delimiter should include new line.",scopeType:"argumentList"},"argumentList.actual.method.empty":{description:"An empty list of arguments in a method call. Insertion delimiter should be empty.",scopeType:"argumentList"},"argumentList.actual.method.singleLine":{description:"A single line list of arguments in a method call",scopeType:"argumentList"},"argumentList.actual.method.multiLine":{description:"A multi line list of arguments in a method call. Insertion delimiter should include new line.",scopeType:"argumentList"},"argumentList.actual.constructor.empty":{description:"An empty list of arguments in a constructor call. Insertion delimiter should be empty.",scopeType:"argumentList"},"argumentList.actual.constructor.singleLine":{description:"A single line list of arguments in a constructor call",scopeType:"argumentList"},"argumentList.actual.constructor.multiLine":{description:"A multi line list of arguments in a constructor call. Insertion delimiter should include new line.",scopeType:"argumentList"},"argumentList.formal.empty":{description:"An empty list of parameters in a function declaration. Insertion delimiter should be empty.",scopeType:"argumentList"},"argumentList.formal.singleLine":{description:"A single line list of parameters in a function declaration",scopeType:"argumentList"},"argumentList.formal.multiLine":{description:"A multi line list of parameters in a function declaration. Insertion delimiter should include new line.",scopeType:"argumentList"},"argumentList.formal.lambda.empty":{description:"An empty list of parameters in a lambda declaration. Insertion delimiter should be empty.",scopeType:"argumentList"},"argumentList.formal.lambda.singleLine":{description:"A single line list of parameters in a lambda declaration",scopeType:"argumentList"},"argumentList.formal.lambda.multiLine":{description:"A multi line list of parameters in a lambda declaration. Insertion delimiter should include new line.",scopeType:"argumentList"},"argumentList.formal.method.empty":{description:"An empty list of parameters in a class method declaration. Insertion delimiter should be empty.",scopeType:"argumentList"},"argumentList.formal.method.singleLine":{description:"A single line list of parameters in a class method declaration",scopeType:"argumentList"},"argumentList.formal.method.multiLine":{description:"A multi line list of parameters in a class method declaration. Insertion delimiter should include new line.",scopeType:"argumentList"},"argumentList.formal.constructor.empty":{description:"An empty list of parameters in a constructor declaration. Insertion delimiter should be empty.",scopeType:"argumentList"},"argumentList.formal.constructor.singleLine":{description:"A single line list of parameters in a constructor declaration",scopeType:"argumentList"},"argumentList.formal.constructor.multiLine":{description:"A multi line list of parameters in a constructor declaration. Insertion delimiter should include new line.",scopeType:"argumentList"},"comment.line":{description:"A line comment",scopeType:"comment"},"comment.block":{description:"A block comment",scopeType:"comment"},"string.singleLine":{description:"A single-line string",scopeType:"string"},"string.multiLine":{description:"A multi-line string",scopeType:"string"},"textFragment.comment.line":{description:"Text fragment consisting of a line comment",scopeType:"textFragment"},"textFragment.comment.block":{description:"Text fragment consisting of a block comment",scopeType:"textFragment"},"textFragment.string.singleLine":{description:"Text fragment consisting of a single-line string",scopeType:"textFragment"},"textFragment.string.multiLine":{description:"Text fragment consisting of a multi-line string",scopeType:"textFragment"},"textFragment.element":{description:"Text fragment consisting of a xml element interior",scopeType:"textFragment"},disqualifyDelimiter:{description:"Used to disqualify a token from being treated as a surrounding pair delimiter. This will usually be operators containing `>` or `<`, eg `<`, `<=`, `->`, etc",scopeType:"disqualifyDelimiter"},pairDelimiter:{description:"A pair delimiter, eg parentheses, brackets, braces, quotes, etc",scopeType:"pairDelimiter"},"branch.if":{description:"An if branch",scopeType:"branch"},"branch.if.elif.else":{description:"An if-elif-else branch. The removal range for the if branch should include the trailing `else` keyword.",scopeType:"branch"},"branch.if.else":{description:"An if-else branch",scopeType:"branch"},"branch.if.iteration":We("branch","if/elif/else branches","the if-else statement"),"branch.loop":{description:"A for / while loop branch. For most languages this is not supported, but eg in Python you can have an else branch for a loop.",scopeType:"branch"},"branch.loop.iteration":We("branch","loop branches","the loop statement"),"branch.try":{description:"A try/catch/finally branch",scopeType:"branch"},"branch.try.iteration":We("branch","try/catch/finally branches","the try-catch statement"),"branch.switchCase":{description:"A case/default branch in a switch statement",scopeType:"branch"},"branch.switchCase.iteration":We("branch","switch branches","the switch statement body"),"branch.ternary":{description:"A branch in a ternary expression",scopeType:"branch"},"branch.ternary.iteration":We("branch","ternary expression branches","the ternary expression"),"collectionItem.unenclosed":{description:"An item in a comma-separated list without enclosing delimiters. This could be multi-variable declarations, import statements, etc.",scopeType:"collectionItem"},"collectionItem.unenclosed.iteration":We("collectionItem","items in a comma-separated list without enclosing delimiters"),"condition.if":{description:"A condition in an if statement",scopeType:"condition"},"condition.while":{description:"A condition in a while loop",scopeType:"condition"},"condition.doWhile":{description:"A condition in a do while loop",scopeType:"condition"},"condition.for":{description:"A condition in a for loop",scopeType:"condition"},"condition.ternary":{description:"A condition in a ternary expression",scopeType:"condition"},"condition.switchCase":{description:"A condition in a switch statement",scopeType:"condition"},"condition.switchCase.iteration":We("condition","conditions in a switch statement","the switch statement body"),"name.assignment":{description:"Name (LHS) of an assignment",scopeType:"name"},"name.assignment.pattern":{description:"LHS of an assignment with pattern destructuring",scopeType:"name"},"name.command":{description:"LHS of a command, eg Talon spoken command or bash",scopeType:"name"},"name.variable":{description:"Name (LHS) of a variable declaration",scopeType:"name"},"name.variable.pattern":{description:"Name (LHS) of a variable declaration with pattern destructuring",scopeType:"name"},"name.foreach":{description:"Iteration variable name in a for each loop",scopeType:"name"},"name.function":{description:"Name of a function",scopeType:"name"},"name.method":{description:"Name of a class method",scopeType:"name"},"name.constructor":{description:"Name of a constructor",scopeType:"name"},"name.class":{description:"Name of a class",scopeType:"name"},"name.interface":{description:"Name of a interface",scopeType:"name"},"name.enum":{description:"Name of an enum",scopeType:"name"},"name.namespace":{description:"Name of a namespace",scopeType:"name"},"name.field.class":{description:"Name (LHS) of a field in a class",scopeType:"name"},"name.field.interface":{description:"Name (LHS) of a field in an interface",scopeType:"name"},"name.field.enum":{description:"Name (LHS) of a field in an enum",scopeType:"name"},"name.iteration.block":co("name","names"),"name.iteration.class":Ts("name","names"),"name.iteration.interface":Tx("name","names"),"name.iteration.enum":lk("name","names"),"name.iteration.document":Mi("name","names"),"name.resource":{description:"Name in a 'with' / 'use' / 'using' statement",scopeType:"name"},"name.resource.iteration":We("name","names in a 'with' / 'use' / 'using' statement","the resource list. The domain should be the entire statement"),"name.argument.actual":{description:"Name of a (keyword) argument in a function call",scopeType:"name"},"name.argument.actual.iteration":We("name","names of the arguments in a function call","the argument list. The domain should be the whole function call"),"name.argument.formal":{description:"Name of a parameter in a function declaration",scopeType:"name"},"name.argument.formal.iteration":We("name","names of formal parameters in a function declaration","the parameters list. The domain should be the entire function"),"name.argument.formal.method":{description:"Name of a parameter in a class method declaration",scopeType:"name"},"name.argument.formal.method.iteration":We("name","names of formal parameters in a method declaration","the parameters list. The domain should be the entire method"),"name.argument.formal.constructor":{description:"The name of a parameter in a constructor declaration",scopeType:"name"},"name.argument.formal.constructor.iteration":We("name","names of formal parameters in a constructor declaration","the parameters list. The domain should be the entire constructor"),"name.argument.catch":{description:"Name of a parameter in a catch clause",scopeType:"name"},"key.attribute":{description:"Key (LHS) of an attribute eg in a xml element",scopeType:"collectionKey"},"key.mapPair":{description:"Key (LHS) of a key-value pair of a map",scopeType:"collectionKey"},"key.mapPair.iteration":We("collectionKey","keys of key-value pairs in a map","should be between the braces"),"value.assignment":{description:"Value (RHS) of an assignment",scopeType:"value"},"value.command":{description:"Value (RHS) of an command, eg Talon spoken command",scopeType:"value"},"value.variable":{description:"Value (RHS) of a variable declaration",scopeType:"value"},"value.variable.pattern":{description:"Value (RHS) of a variable declaration with pattern destructuring",scopeType:"value"},"value.mapPair":{description:"Value (RHS) of a key-value pair in a map",scopeType:"value"},"value.mapPair.iteration":We("value","values of key-value pairs in a map","should be between the braces"),"value.foreach":{description:"Iterable in a for each loop",scopeType:"value"},"value.attribute":{description:"Value (RHS) of an attribute eg in a xml element",scopeType:"value"},"value.return":{description:"Return value of a function",scopeType:"value"},"value.return.lambda":{description:"Implicit return value from a lambda",scopeType:"value"},"value.field.class":{description:"Value (RHS) of a field in a class",scopeType:"value"},"value.field.enum":{description:"Value (RHS) of a field in an enum",scopeType:"value"},"value.yield":{description:"Value of a yield statement",scopeType:"value"},"value.switch":{description:"The value / subject of a switch statement",scopeType:"value"},"value.iteration.block":co("value","values"),"value.iteration.class":Ts("value","values"),"value.iteration.enum":lk("value","values"),"value.iteration.document":Mi("value","values"),"value.resource":{description:"Value of a 'with' / 'use' / 'using' statement",scopeType:"value"},"value.resource.iteration":We("value","values in a 'with' / 'use' / 'using' statement","the resource list. The domain should be the entire statement"),"value.argument.actual":{description:"The value of a (keyword) argument in a function call",scopeType:"value"},"value.argument.actual.iteration":We("value","values of arguments in a function call","the arguments list. The domain should be the entire function call"),"value.argument.formal":{description:"The value of a (keyword) argument in a function declaration",scopeType:"value"},"value.argument.formal.iteration":We("value","values of formal parameters in a function declaration","the parameters list. The domain should be the entire function"),"value.argument.formal.method":{description:"The value of a parameter in a class method declaration",scopeType:"value"},"value.argument.formal.method.iteration":We("value","values of formal parameters in a method declaration","the parameters list. The domain should be the entire method"),"value.argument.formal.constructor":{description:"The value of a parameter in a constructor declaration",scopeType:"value"},"value.argument.formal.constructor.iteration":We("value","values of formal parameters in a constructor declaration","the parameters list. The domain should be the entire constructor"),"value.typeAlias":{description:"Value of a type alias declaration",scopeType:"value"},"type.variable":{description:"Type of variable in a variable declaration",scopeType:"type"},"type.argument.formal":{description:"Type of formal parameter in a function declaration",scopeType:"type"},"type.argument.formal.iteration":We("type","types of formal parameters in a function declaration","the parameters list. The domain should be the entire function"),"type.argument.formal.method":{description:"Type of formal parameter in a class method declaration",scopeType:"type"},"type.argument.formal.method.iteration":We("type","types of formal parameters in a method declaration","the parameters list. The domain should be the entire method"),"type.argument.formal.constructor":{description:"Type of formal parameter in a constructor declaration",scopeType:"type"},"type.argument.formal.constructor.iteration":We("type","types of formal parameters in a constructor declaration","the parameters list. The domain should be the entire constructor"),"type.argument.catch":{description:"Type of parameter in a catch clause",scopeType:"type"},"type.return":{description:"Type of return value in a function declaration",scopeType:"type"},"type.field.class":{description:"Type of field in a class",scopeType:"type"},"type.field.interface":{description:"Type of field in a interface",scopeType:"type"},"type.foreach":{description:"Type of variable in a for each loop",scopeType:"type"},"type.enum":{description:"An enum declaration",scopeType:"type"},"type.class":{description:"A class declaration",scopeType:"type"},"type.interface":{description:"An interface declaration",scopeType:"type"},"type.alias":{description:"A type alias declaration",scopeType:"type"},"type.cast":{description:"A type cast",scopeType:"type"},"type.typeArgument":{description:"Type argument to a generic / parametrized type",scopeType:"type"},"type.typeArgument.iteration":We("type","type arguments to a generic / parametrized type","the type argument list"),"type.resource":{description:"Type in a 'with' / 'use' / 'using' statement",scopeType:"type"},"type.resource.iteration":We("type","types in a 'with' / 'use' / 'using' statement","the resource list. The domain should be the entire statement"),"type.iteration.block":co("type","types"),"type.iteration.class":Ts("type","types"),"type.iteration.interface":Tx("type","types"),"type.iteration.document":Mi("type","types"),"interior.element":{description:"The interior/children of a XML element",scopeType:{type:"interior"}},"interior.command":{description:"The body of a command, eg Talon spoken command",scopeType:{type:"interior"}},"interior.cell":{description:"The body of a code cell in markdown",scopeType:{type:"interior"}},"interior.class":{description:"The body of a class",scopeType:{type:"interior"}},"interior.interface":{description:"The body of a interface",scopeType:{type:"interior"}},"interior.enum":{description:"The body of an enum",scopeType:{type:"interior"}},"interior.function":{description:"The body of a function declaration",scopeType:{type:"interior"}},"interior.constructor":{description:"The body of a constructor declaration",scopeType:{type:"interior"}},"interior.method":{description:"The body of a method declaration",scopeType:{type:"interior"}},"interior.lambda":{description:"The block body of a lambda/anonymous function",scopeType:{type:"interior"}},"interior.if":{description:"The body of an if/elif/else branch",scopeType:{type:"interior"}},"interior.try":{description:"The body of a try/catch/finally branch",scopeType:{type:"interior"}},"interior.switch":{description:"The body of a switch statement",scopeType:{type:"interior"}},"interior.switchCase":{description:"The body of a switch case branch",scopeType:{type:"interior"}},"interior.ternary":{description:"The body of a ternary condition/branch",scopeType:{type:"interior"}},"interior.for":{description:"The body of a for loop",scopeType:{type:"interior"}},"interior.foreach":{description:"The body of a for-each loop",scopeType:{type:"interior"}},"interior.while":{description:"The body of a while loop",scopeType:{type:"interior"}},"interior.doWhile":{description:"The body of a do-while loop",scopeType:{type:"interior"}},"interior.resource":{description:"the body of a 'with' / 'use' / 'using' statement",scopeType:{type:"interior"}},"interior.namespace":{description:"the body of a namespace statement",scopeType:{type:"interior"}},"interior.static":{description:"the body of a static statement",scopeType:{type:"interior"}},notebookCell:{description:"A cell in a notebook or a markdown code block",scopeType:"notebookCell"},selector:{description:"A selector in a css rule set",scopeType:"selector"},unit:{description:"A unit in a css rule set",scopeType:"unit"}};function Mi(t,e){return We(t,e,"the entire document including leading and trailing empty lines")}function Ts(t,e){return We(t,e,"class bodies")}function Tx(t,e){return We(t,e,"interface bodies")}function lk(t,e){return We(t,e,"enum bodies")}function co(t,e){return We(t,e,"statement blocks (body of functions/if-statements/for-loops/etc)")}function We(t,e,r){return{description:r!=null?`Iteration scope for ${e}: ${r}.`:`Iteration scope for ${e}`,scopeType:t,isIteration:!0}}function*Az(t){for(let e of t)for(let r of e)yield r}function*al(t,e){let r=Sm(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*Sx(t){let e=Sm(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var Oue=Symbol();function*Pz(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*xm(t,e){let r=0;for(let n of t)e(n,r++)&&(yield n)}function*Kt(t,e){for(let r of t)yield e(r)}function*pk(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let s=-1,l=Sm(t),u;for(;;){if(s++,o!==null&&s>=o||(u=l.next(),u.done))return;s<i||(s-i)%n===0&&(yield u.value)}}function*Lz(t,e){let r=0,n=Sm(t),i;for(;!(i=n.next()).done;){let o=i.value;if(!e(o,r++))return;yield o}}function Sm(t){return t[Symbol.iterator]()}function xs(t,e){return Array.from(Kt(t,e))}function uk(t,e,r){let n=Pz(t,r),i=r>=0?o=>o<e:o=>o>e;return Lz(n,i)}function mk(t,e,r=1){return e!==void 0?uk(t,e,r):uk(0,t,r)}function vm(t,e){return Az(Kt(t,e))}var Ss=["that","source","instanceReference","keyboard"];var pt=class extends Y{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new ke(e[0],e[1]),new ke(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}->${this.end.conciseOneBased()}`}toString(){return this.concise()}};function dk({line:t,character:e}){return new ke(t,e)}function bm({start:t,end:e}){return new Y(dk(t),dk(e))}function jr({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function gr({start:t,end:e}){return{type:"character",start:t,end:e}}function sl(t){return{start:wm(t.start),end:wm(t.end)}}function gk(t){return{anchor:wm(t.anchor),active:wm(t.active)}}function wm({line:t,character:e}){return{line:t,character:e}}function Fk(t){return typeof t>"u"||t===null}function Mz(t){return typeof t=="object"&&t!==null}function Dz(t){return Array.isArray(t)?t:Fk(t)?[]:[t]}function Fz(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function Cz(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function Iz(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Oz=Fk,Nz=Mz,Uz=Dz,Hz=Cz,Bz=Iz,Vz=Fz,Ot={isNothing:Oz,isObject:Nz,toArray:Uz,repeat:Hz,isNegativeZero:Bz,extend:Vz};function Ck(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function ll(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Ck(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}ll.prototype=Object.create(Error.prototype);ll.prototype.constructor=ll;ll.prototype.toString=function(e){return this.name+": "+Ck(this,e)};var kr=ll;function vx(t,e,r,n,i){var o="",s="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function bx(t,e){return Ot.repeat(" ",e-t.length)+t}function Wz(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",u,m,d=Math.min(t.line+e.linesAfter,i.length).toString().length,g=e.maxLength-(e.indent+d+3);for(u=1;u<=e.linesBefore&&!(s-u<0);u++)m=vx(t.buffer,n[s-u],i[s-u],t.position-(n[s]-n[s-u]),g),l=Ot.repeat(" ",e.indent)+bx((t.line-u+1).toString(),d)+" | "+m.str+`
`+l;for(m=vx(t.buffer,n[s],i[s],t.position,g),l+=Ot.repeat(" ",e.indent)+bx((t.line+1).toString(),d)+" | "+m.str+`
`,l+=Ot.repeat("-",e.indent+d+3+m.pos)+`^
`,u=1;u<=e.linesAfter&&!(s+u>=i.length);u++)m=vx(t.buffer,n[s+u],i[s+u],t.position-(n[s]-n[s+u]),g),l+=Ot.repeat(" ",e.indent)+bx((t.line+u+1).toString(),d)+" | "+m.str+`
`;return l.replace(/\n$/,"")}var $z=Wz,jz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],zz=["scalar","sequence","mapping"];function qz(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function Gz(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(jz.indexOf(r)===-1)throw new kr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=qz(e.styleAliases||null),zz.indexOf(this.kind)===-1)throw new kr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Qt=Gz;function Tk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function Kz(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function Ex(t){return this.extend(t)}Ex.prototype.extend=function(e){var r=[],n=[];if(e instanceof Qt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new kr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Qt))throw new kr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new kr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new kr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Qt))throw new kr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Ex.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Tk(i,"implicit"),i.compiledExplicit=Tk(i,"explicit"),i.compiledTypeMap=Kz(i.compiledImplicit,i.compiledExplicit),i};var Qz=Ex,Yz=new Qt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Zz=new Qt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Jz=new Qt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Xz=new Qz({explicit:[Yz,Zz,Jz]});function eq(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function tq(){return null}function rq(t){return t===null}var nq=new Qt("tag:yaml.org,2002:null",{kind:"scalar",resolve:eq,construct:tq,predicate:rq,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function iq(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function oq(t){return t==="true"||t==="True"||t==="TRUE"}function aq(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var sq=new Qt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:iq,construct:oq,predicate:aq,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function cq(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function lq(t){return 48<=t&&t<=55}function uq(t){return 48<=t&&t<=57}function pq(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!cq(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!lq(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!uq(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function mq(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function fq(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Ot.isNegativeZero(t)}var dq=new Qt("tag:yaml.org,2002:int",{kind:"scalar",resolve:pq,construct:mq,predicate:fq,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),gq=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function hq(t){return!(t===null||!gq.test(t)||t[t.length-1]==="_")}function yq(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var Tq=/^[-+]?[0-9]+e/;function xq(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ot.isNegativeZero(t))return"-0.0";return r=t.toString(10),Tq.test(r)?r.replace("e",".e"):r}function Sq(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Ot.isNegativeZero(t))}var vq=new Qt("tag:yaml.org,2002:float",{kind:"scalar",resolve:hq,construct:yq,predicate:Sq,represent:xq,defaultStyle:"lowercase"}),bq=Xz.extend({implicit:[nq,sq,dq,vq]}),wq=bq,Ik=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Ok=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Eq(t){return t===null?!1:Ik.exec(t)!==null||Ok.exec(t)!==null}function _q(t){var e,r,n,i,o,s,l,u=0,m=null,d,g,y;if(e=Ik.exec(t),e===null&&(e=Ok.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(d=+e[10],g=+(e[11]||0),m=(d*60+g)*6e4,e[9]==="-"&&(m=-m)),y=new Date(Date.UTC(r,n,i,o,s,l,u)),m&&y.setTime(y.getTime()-m),y}function Rq(t){return t.toISOString()}var kq=new Qt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Eq,construct:_q,instanceOf:Date,represent:Rq});function Aq(t){return t==="<<"||t===null}var Pq=new Qt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Aq}),Px=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Lq(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=Px;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function Mq(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=Px,s=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}function Dq(t){var e="",r=0,n,i,o=t.length,s=Px;for(n=0;n<o;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function Fq(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var Cq=new Qt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Lq,construct:Mq,predicate:Fq,represent:Dq}),Iq=Object.prototype.hasOwnProperty,Oq=Object.prototype.toString;function Nq(t){if(t===null)return!0;var e=[],r,n,i,o,s,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],s=!1,Oq.call(i)!=="[object Object]")return!1;for(o in i)if(Iq.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function Uq(t){return t!==null?t:[]}var Hq=new Qt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Nq,construct:Uq}),Bq=Object.prototype.toString;function Vq(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],Bq.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function Wq(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var $q=new Qt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Vq,construct:Wq}),jq=Object.prototype.hasOwnProperty;function zq(t){if(t===null)return!0;var e,r=t;for(e in r)if(jq.call(r,e)&&r[e]!==null)return!1;return!0}function qq(t){return t!==null?t:{}}var Gq=new Qt("tag:yaml.org,2002:set",{kind:"mapping",resolve:zq,construct:qq}),Lx=wq.extend({implicit:[kq,Pq],explicit:[Cq,Hq,$q,Gq]}),uo=Object.prototype.hasOwnProperty,Em=1,Nk=2,Uk=3,_m=4,wx=1,Kq=2,xk=3,Qq=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Yq=/[\x85\u2028\u2029]/,Zq=/[,\[\]\{\}]/,Hk=/^(?:!|!!|![a-z\-]+!)$/i,Bk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Sk(t){return Object.prototype.toString.call(t)}function Jn(t){return t===10||t===13}function ea(t){return t===9||t===32}function Ar(t){return t===9||t===32||t===10||t===13}function bs(t){return t===44||t===91||t===93||t===123||t===125}function Jq(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function Xq(t){return t===120?2:t===117?4:t===85?8:0}function eG(t){return 48<=t&&t<=57?t-48:-1}function vk(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function tG(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var Vk=new Array(256),Wk=new Array(256);for(Xo=0;Xo<256;Xo++)Vk[Xo]=vk(Xo)?1:0,Wk[Xo]=vk(Xo);var Xo;function rG(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Lx,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function $k(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=$z(r),new kr(e,r)}function Te(t,e){throw $k(t,e)}function Rm(t,e){t.onWarning&&t.onWarning.call(null,$k(t,e))}var bk={YAML:function(e,r,n){var i,o,s;e.version!==null&&Te(e,"duplication of %YAML directive"),n.length!==1&&Te(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&Te(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&Te(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&Rm(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&Te(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],Hk.test(i)||Te(e,"ill-formed tag handle (first argument) of the TAG directive"),uo.call(e.tagMap,i)&&Te(e,'there is a previously declared suffix for "'+i+'" tag handle'),Bk.test(o)||Te(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{Te(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function lo(t,e,r,n){var i,o,s,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)s=l.charCodeAt(i),s===9||32<=s&&s<=1114111||Te(t,"expected valid JSON character");else Qq.test(l)&&Te(t,"the stream contains non-printable characters");t.result+=l}}function wk(t,e,r,n){var i,o,s,l;for(Ot.isObject(r)||Te(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,l=i.length;s<l;s+=1)o=i[s],uo.call(e,o)||(e[o]=r[o],n[o]=!0)}function ws(t,e,r,n,i,o,s,l,u){var m,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),m=0,d=i.length;m<d;m+=1)Array.isArray(i[m])&&Te(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Sk(i[m])==="[object Object]"&&(i[m]="[object Object]");if(typeof i=="object"&&Sk(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(m=0,d=o.length;m<d;m+=1)wk(t,e,o[m],r);else wk(t,e,o,r);else!t.json&&!uo.call(r,i)&&uo.call(e,i)&&(t.line=s||t.line,t.lineStart=l||t.lineStart,t.position=u||t.position,Te(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function Mx(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Te(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Lt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;ea(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Jn(i))for(Mx(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Rm(t,"deficient indentation"),n}function Pm(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Ar(r)))}function Dx(t,e){e===1?t.result+=" ":e>1&&(t.result+=Ot.repeat(`
`,e-1))}function nG(t,e,r){var n,i,o,s,l,u,m,d,g=t.kind,y=t.result,x;if(x=t.input.charCodeAt(t.position),Ar(x)||bs(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),Ar(i)||r&&bs(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),Ar(i)||r&&bs(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),Ar(n))break}else{if(t.position===t.lineStart&&Pm(t)||r&&bs(x))break;if(Jn(x))if(u=t.line,m=t.lineStart,d=t.lineIndent,Lt(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=u,t.lineStart=m,t.lineIndent=d;break}}l&&(lo(t,o,s,!1),Dx(t,t.line-u),o=s=t.position,l=!1),ea(x)||(s=t.position+1),x=t.input.charCodeAt(++t.position)}return lo(t,o,s,!1),t.result?!0:(t.kind=g,t.result=y,!1)}function iG(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(lo(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Jn(r)?(lo(t,n,i,!0),Dx(t,Lt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Pm(t)?Te(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Te(t,"unexpected end of the stream within a single quoted scalar")}function oG(t,e){var r,n,i,o,s,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return lo(t,r,t.position,!0),t.position++,!0;if(l===92){if(lo(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),Jn(l))Lt(t,!1,e);else if(l<256&&Vk[l])t.result+=Wk[l],t.position++;else if((s=Xq(l))>0){for(i=s,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(s=Jq(l))>=0?o=(o<<4)+s:Te(t,"expected hexadecimal character");t.result+=tG(o),t.position++}else Te(t,"unknown escape sequence");r=n=t.position}else Jn(l)?(lo(t,r,n,!0),Dx(t,Lt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Pm(t)?Te(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}Te(t,"unexpected end of the stream within a double quoted scalar")}function aG(t,e){var r=!0,n,i,o,s=t.tag,l,u=t.anchor,m,d,g,y,x,E=Object.create(null),w,H,W,G;if(G=t.input.charCodeAt(t.position),G===91)d=93,x=!1,l=[];else if(G===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),G=t.input.charCodeAt(++t.position);G!==0;){if(Lt(t,!0,e),G=t.input.charCodeAt(t.position),G===d)return t.position++,t.tag=s,t.anchor=u,t.kind=x?"mapping":"sequence",t.result=l,!0;r?G===44&&Te(t,"expected the node content, but found ','"):Te(t,"missed comma between flow collection entries"),H=w=W=null,g=y=!1,G===63&&(m=t.input.charCodeAt(t.position+1),Ar(m)&&(g=y=!0,t.position++,Lt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,Es(t,e,Em,!1,!0),H=t.tag,w=t.result,Lt(t,!0,e),G=t.input.charCodeAt(t.position),(y||t.line===n)&&G===58&&(g=!0,G=t.input.charCodeAt(++t.position),Lt(t,!0,e),Es(t,e,Em,!1,!0),W=t.result),x?ws(t,l,E,H,w,W,n,i,o):g?l.push(ws(t,null,E,H,w,W,n,i,o)):l.push(w),Lt(t,!0,e),G=t.input.charCodeAt(t.position),G===44?(r=!0,G=t.input.charCodeAt(++t.position)):r=!1}Te(t,"unexpected end of the stream within a flow collection")}function sG(t,e){var r,n,i=wx,o=!1,s=!1,l=e,u=0,m=!1,d,g;if(g=t.input.charCodeAt(t.position),g===124)n=!1;else if(g===62)n=!0;else return!1;for(t.kind="scalar",t.result="";g!==0;)if(g=t.input.charCodeAt(++t.position),g===43||g===45)wx===i?i=g===43?xk:Kq:Te(t,"repeat of a chomping mode identifier");else if((d=eG(g))>=0)d===0?Te(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Te(t,"repeat of an indentation width identifier"):(l=e+d-1,s=!0);else break;if(ea(g)){do g=t.input.charCodeAt(++t.position);while(ea(g));if(g===35)do g=t.input.charCodeAt(++t.position);while(!Jn(g)&&g!==0)}for(;g!==0;){for(Mx(t),t.lineIndent=0,g=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&g===32;)t.lineIndent++,g=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),Jn(g)){u++;continue}if(t.lineIndent<l){i===xk?t.result+=Ot.repeat(`
`,o?1+u:u):i===wx&&o&&(t.result+=`
`);break}for(n?ea(g)?(m=!0,t.result+=Ot.repeat(`
`,o?1+u:u)):m?(m=!1,t.result+=Ot.repeat(`
`,u+1)):u===0?o&&(t.result+=" "):t.result+=Ot.repeat(`
`,u):t.result+=Ot.repeat(`
`,o?1+u:u),o=!0,s=!0,u=0,r=t.position;!Jn(g)&&g!==0;)g=t.input.charCodeAt(++t.position);lo(t,r,t.position,!1)}return!0}function Ek(t,e){var r,n=t.tag,i=t.anchor,o=[],s,l=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Te(t,"tab characters must not be used in indentation")),!(u!==45||(s=t.input.charCodeAt(t.position+1),!Ar(s))));){if(l=!0,t.position++,Lt(t,!0,-1)&&t.lineIndent<=e){o.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,Es(t,e,Uk,!1,!0),o.push(t.result),Lt(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)Te(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function cG(t,e,r){var n,i,o,s,l,u,m=t.tag,d=t.anchor,g={},y=Object.create(null),x=null,E=null,w=null,H=!1,W=!1,G;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=g),G=t.input.charCodeAt(t.position);G!==0;){if(!H&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Te(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(G===63||G===58)&&Ar(n))G===63?(H&&(ws(t,g,y,x,E,null,s,l,u),x=E=w=null),W=!0,H=!0,i=!0):H?(H=!1,i=!0):Te(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,G=n;else{if(s=t.line,l=t.lineStart,u=t.position,!Es(t,r,Nk,!1,!0))break;if(t.line===o){for(G=t.input.charCodeAt(t.position);ea(G);)G=t.input.charCodeAt(++t.position);if(G===58)G=t.input.charCodeAt(++t.position),Ar(G)||Te(t,"a whitespace character is expected after the key-value separator within a block mapping"),H&&(ws(t,g,y,x,E,null,s,l,u),x=E=w=null),W=!0,H=!1,i=!1,x=t.tag,E=t.result;else if(W)Te(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=m,t.anchor=d,!0}else if(W)Te(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=m,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(H&&(s=t.line,l=t.lineStart,u=t.position),Es(t,e,_m,!0,i)&&(H?E=t.result:w=t.result),H||(ws(t,g,y,x,E,w,s,l,u),x=E=w=null),Lt(t,!0,-1),G=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&G!==0)Te(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return H&&ws(t,g,y,x,E,null,s,l,u),W&&(t.tag=m,t.anchor=d,t.kind="mapping",t.result=g),W}function lG(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&Te(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):Te(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Ar(s);)s===33&&(n?Te(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),Hk.test(i)||Te(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),Zq.test(o)&&Te(t,"tag suffix cannot contain flow indicator characters")}o&&!Bk.test(o)&&Te(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{Te(t,"tag name is malformed: "+o)}return r?t.tag=o:uo.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:Te(t,'undeclared tag handle "'+i+'"'),!0}function uG(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&Te(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Ar(r)&&!bs(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Te(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function pG(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Ar(n)&&!bs(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Te(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),uo.call(t.anchorMap,r)||Te(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Lt(t,!0,-1),!0}function Es(t,e,r,n,i){var o,s,l,u=1,m=!1,d=!1,g,y,x,E,w,H;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=l=_m===r||Uk===r,n&&Lt(t,!0,-1)&&(m=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;lG(t)||uG(t);)Lt(t,!0,-1)?(m=!0,l=o,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=m||i),(u===1||_m===r)&&(Em===r||Nk===r?w=e:w=e+1,H=t.position-t.lineStart,u===1?l&&(Ek(t,H)||cG(t,H,w))||aG(t,w)?d=!0:(s&&sG(t,w)||iG(t,w)||oG(t,w)?d=!0:pG(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&Te(t,"alias node should not have any properties")):nG(t,w,Em===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(d=l&&Ek(t,H))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Te(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),g=0,y=t.implicitTypes.length;g<y;g+=1)if(E=t.implicitTypes[g],E.resolve(t.result)){t.result=E.construct(t.result),t.tag=E.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(uo.call(t.typeMap[t.kind||"fallback"],t.tag))E=t.typeMap[t.kind||"fallback"][t.tag];else for(E=null,x=t.typeMap.multi[t.kind||"fallback"],g=0,y=x.length;g<y;g+=1)if(t.tag.slice(0,x[g].tag.length)===x[g].tag){E=x[g];break}E||Te(t,"unknown tag !<"+t.tag+">"),t.result!==null&&E.kind!==t.kind&&Te(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+E.kind+'", not "'+t.kind+'"'),E.resolve(t.result,t.tag)?(t.result=E.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Te(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function mG(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(Lt(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!Ar(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&Te(t,"directive name must not be less than one character in length");s!==0;){for(;ea(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Jn(s));break}if(Jn(s))break;for(r=t.position;s!==0&&!Ar(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&Mx(t),uo.call(bk,n)?bk[n](t,n,i):Rm(t,'unknown document directive "'+n+'"')}if(Lt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Lt(t,!0,-1)):o&&Te(t,"directives end mark is expected"),Es(t,t.lineIndent-1,_m,!1,!0),Lt(t,!0,-1),t.checkLineBreaks&&Yq.test(t.input.slice(e,t.position))&&Rm(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Pm(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Lt(t,!0,-1));return}if(t.position<t.length-1)Te(t,"end of the stream or a document separator is expected");else return}function jk(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new rG(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,Te(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)mG(r);return r.documents}function fG(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=jk(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function dG(t,e){var r=jk(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new kr("expected a single document in the stream, but found more")}}var gG=fG,hG=dG,zk={loadAll:gG,load:hG},qk=Object.prototype.toString,Gk=Object.prototype.hasOwnProperty,Fx=65279,yG=9,ul=10,TG=13,xG=32,SG=33,vG=34,_x=35,bG=37,wG=38,EG=39,_G=42,Kk=44,RG=45,km=58,kG=61,AG=62,PG=63,LG=64,Qk=91,Yk=93,MG=96,Zk=123,DG=124,Jk=125,ir={};ir[0]="\\0";ir[7]="\\a";ir[8]="\\b";ir[9]="\\t";ir[10]="\\n";ir[11]="\\v";ir[12]="\\f";ir[13]="\\r";ir[27]="\\e";ir[34]='\\"';ir[92]="\\\\";ir[133]="\\N";ir[160]="\\_";ir[8232]="\\L";ir[8233]="\\P";var FG=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],CG=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function IG(t,e){var r,n,i,o,s,l,u;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=t.compiledTypeMap.fallback[s],u&&Gk.call(u.styleAliases,l)&&(l=u.styleAliases[l]),r[s]=l;return r}function OG(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new kr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Ot.repeat("0",n-e.length)+e}var NG=1,pl=2;function UG(t){this.schema=t.schema||Lx,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Ot.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=IG(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?pl:NG,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function _k(t,e){for(var r=Ot.repeat(" ",e),n=0,i=-1,o="",s,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=l):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function Rx(t,e){return`
`+Ot.repeat(" ",t.indent*e)}function HG(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function Am(t){return t===xG||t===yG}function ml(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Fx||65536<=t&&t<=1114111}function Rk(t){return ml(t)&&t!==Fx&&t!==TG&&t!==ul}function kk(t,e,r){var n=Rk(t),i=n&&!Am(t);return(r?n:n&&t!==Kk&&t!==Qk&&t!==Yk&&t!==Zk&&t!==Jk)&&t!==_x&&!(e===km&&!i)||Rk(e)&&!Am(e)&&t===_x||e===km&&i}function BG(t){return ml(t)&&t!==Fx&&!Am(t)&&t!==RG&&t!==PG&&t!==km&&t!==Kk&&t!==Qk&&t!==Yk&&t!==Zk&&t!==Jk&&t!==_x&&t!==wG&&t!==_G&&t!==SG&&t!==DG&&t!==kG&&t!==AG&&t!==EG&&t!==vG&&t!==bG&&t!==LG&&t!==MG}function VG(t){return!Am(t)&&t!==km}function cl(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Xk(t){var e=/^\n* /;return e.test(t)}var eA=1,kx=2,tA=3,rA=4,vs=5;function WG(t,e,r,n,i,o,s,l){var u,m=0,d=null,g=!1,y=!1,x=n!==-1,E=-1,w=BG(cl(t,0))&&VG(cl(t,t.length-1));if(e||s)for(u=0;u<t.length;m>=65536?u+=2:u++){if(m=cl(t,u),!ml(m))return vs;w=w&&kk(m,d,l),d=m}else{for(u=0;u<t.length;m>=65536?u+=2:u++){if(m=cl(t,u),m===ul)g=!0,x&&(y=y||u-E-1>n&&t[E+1]!==" ",E=u);else if(!ml(m))return vs;w=w&&kk(m,d,l),d=m}y=y||x&&u-E-1>n&&t[E+1]!==" "}return!g&&!y?w&&!s&&!i(t)?eA:o===pl?vs:kx:r>9&&Xk(t)?vs:s?o===pl?vs:kx:y?rA:tA}function $G(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===pl?'""':"''";if(!t.noCompatMode&&(FG.indexOf(e)!==-1||CG.test(e)))return t.quotingType===pl?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function u(m){return HG(t,m)}switch(WG(e,l,t.indent,s,u,t.quotingType,t.forceQuotes&&!n,i)){case eA:return e;case kx:return"'"+e.replace(/'/g,"''")+"'";case tA:return"|"+Ak(e,t.indent)+Pk(_k(e,o));case rA:return">"+Ak(e,t.indent)+Pk(_k(jG(e,s),o));case vs:return'"'+zG(e)+'"';default:throw new kr("impossible error: invalid scalar style")}}()}function Ak(t,e){var r=Xk(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function Pk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function jG(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var m=t.indexOf(`
`);return m=m!==-1?m:t.length,r.lastIndex=m,Lk(t.slice(0,m),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var l=s[1],u=s[2];o=u[0]===" ",n+=l+(!i&&!o&&u!==""?`
`:"")+Lk(u,e),i=o}return n}function Lk(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,l=0,u="";n=r.exec(t);)l=n.index,l-i>e&&(o=s>i?s:l,u+=`
`+t.slice(i,o),i=o+1),s=l;return u+=`
`,t.length-i>e&&s>i?u+=t.slice(i,s)+`
`+t.slice(s+1):u+=t.slice(i),u.slice(1)}function zG(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=cl(t,i),n=ir[r],!n&&ml(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||OG(r);return e}function qG(t,e,r){var n="",i=t.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(Di(t,e,l,!1,!1)||typeof l>"u"&&Di(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function Mk(t,e,r,n){var i="",o=t.tag,s,l,u;for(s=0,l=r.length;s<l;s+=1)u=r[s],t.replacer&&(u=t.replacer.call(r,String(s),u)),(Di(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&Di(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=Rx(t,e)),t.dump&&ul===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function GG(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,l,u,m,d;for(s=0,l=o.length;s<l;s+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),u=o[s],m=r[u],t.replacer&&(m=t.replacer.call(r,u,m)),Di(t,e,u,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Di(t,e,m,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function KG(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),l,u,m,d,g,y;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new kr("sortKeys must be a boolean or a function");for(l=0,u=s.length;l<u;l+=1)y="",(!n||i!=="")&&(y+=Rx(t,e)),m=s[l],d=r[m],t.replacer&&(d=t.replacer.call(r,m,d)),Di(t,e+1,m,!0,!0,!0)&&(g=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,g&&(t.dump&&ul===t.dump.charCodeAt(0)?y+="?":y+="? "),y+=t.dump,g&&(y+=Rx(t,e)),Di(t,e+1,d,!0,g)&&(t.dump&&ul===t.dump.charCodeAt(0)?y+=":":y+=": ",y+=t.dump,i+=y));t.tag=o,t.dump=i||"{}"}function Dk(t,e,r){var n,i,o,s,l,u;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(u=t.styleMap[l.tag]||l.defaultStyle,qk.call(l.represent)==="[object Function]")n=l.represent(e,u);else if(Gk.call(l.represent,u))n=l.represent[u](e,u);else throw new kr("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}function Di(t,e,r,n,i,o,s){t.tag=null,t.dump=r,Dk(t,r,!1)||Dk(t,r,!0);var l=qk.call(t.dump),u=n,m;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",g,y;if(d&&(g=t.duplicates.indexOf(r),y=g!==-1),(t.tag!==null&&t.tag!=="?"||y||t.indent!==2&&e>0)&&(i=!1),y&&t.usedDuplicates[g])t.dump="*ref_"+g;else{if(d&&y&&!t.usedDuplicates[g]&&(t.usedDuplicates[g]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(KG(t,e,t.dump,i),y&&(t.dump="&ref_"+g+t.dump)):(GG(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?Mk(t,e-1,t.dump,i):Mk(t,e,t.dump,i),y&&(t.dump="&ref_"+g+t.dump)):(qG(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&$G(t,t.dump,e,o,u);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new kr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(m=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?m="!"+m:m.slice(0,18)==="tag:yaml.org,2002:"?m="!!"+m.slice(18):m="!<"+m+">",t.dump=m+" "+t.dump)}return!0}function QG(t,e){var r=[],n=[],i,o;for(Ax(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function Ax(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)Ax(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)Ax(t[n[i]],e,r)}function YG(t,e){e=e||{};var r=new UG(e);r.noRefs||QG(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Di(r,0,n,!0,!0)?r.dump+`
`:""}var ZG=YG,JG={dump:ZG};function Cx(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var nA=Qt;var iA=Lx,XG=zk.load,ype=zk.loadAll,oA=JG.dump;var Tpe=Cx("safeLoad","load"),xpe=Cx("safeLoadAll","loadAll"),Spe=Cx("safeDump","dump");var Lm=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=oA(this.data,Object.assign({replacer:n5,schema:t5},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},e5=new nA("!format",{kind:"scalar",resolve:()=>!1,instanceOf:Lm,represent:t=>t.represent()}),t5=iA.extend({implicit:[e5]}),Ix=t=>typeof t=="object"&&t!=null;function r5(t){if(Ix(t))return Object.values(t).every(e=>!Ix(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!Ix(e)&&!Array.isArray(e))}function n5(t,e){return t===""?e:r5(e)?new Lm(e,{flowLevel:0}):e}var Ox=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","flashTargets","foldRegion","followLink","followLinkAside","gitAccept","gitRevert","gitStage","gitUnstage","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],o5=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],sA=[...Ox,...o5];var a5=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleBacktickQuotes","tripleDoubleQuotes","tripleSingleQuotes"],s5=["string","any","collectionBoundary"],Mm=[...a5,...s5],ta=["argumentOrParameter","argumentList","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function cA(t){return ta.includes(t.type)}var lA=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],fl=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},_s=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function Dm(t){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dm(t)}var l5=/^\s+/,u5=/\s+$/;function ye(t,e){if(t=t||"",e=e||{},t instanceof ye)return t;if(!(this instanceof ye))return new ye(t,e);var r=p5(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}ye.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,n,i,o,s,l;return r=e.r/255,n=e.g/255,i=e.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),n<=.03928?s=n/12.92:s=Math.pow((n+.055)/1.055,2.4),i<=.03928?l=i/12.92:l=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*s+.0722*l},setAlpha:function(e){return this._a=hA(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=pA(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=pA(this._r,this._g,this._b),r=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+i+"%)":"hsva("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=uA(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=uA(this._r,this._g,this._b),r=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+i+"%)":"hsla("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return mA(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return g5(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(ft(this._r,255)*100)+"%",g:Math.round(ft(this._g,255)*100)+"%",b:Math.round(ft(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(ft(this._r,255)*100)+"%, "+Math.round(ft(this._g,255)*100)+"%, "+Math.round(ft(this._b,255)*100)+"%)":"rgba("+Math.round(ft(this._r,255)*100)+"%, "+Math.round(ft(this._g,255)*100)+"%, "+Math.round(ft(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:k5[mA(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+fA(this._r,this._g,this._b,this._a),n=r,i=this._gradientType?"GradientType = 1, ":"";if(e){var o=ye(e);n="#"+fA(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+r+",endColorstr="+n+")"},toString:function(e){var r=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0,o=!r&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return ye(this.toString())},_applyModification:function(e,r){var n=e.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(x5,arguments)},brighten:function(){return this._applyModification(S5,arguments)},darken:function(){return this._applyModification(v5,arguments)},desaturate:function(){return this._applyModification(h5,arguments)},saturate:function(){return this._applyModification(y5,arguments)},greyscale:function(){return this._applyModification(T5,arguments)},spin:function(){return this._applyModification(b5,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(_5,arguments)},complement:function(){return this._applyCombination(w5,arguments)},monochromatic:function(){return this._applyCombination(R5,arguments)},splitcomplement:function(){return this._applyCombination(E5,arguments)},triad:function(){return this._applyCombination(dA,[3])},tetrad:function(){return this._applyCombination(dA,[4])}};ye.fromRatio=function(t,e){if(Dm(t)=="object"){var r={};for(var n in t)t.hasOwnProperty(n)&&(n==="a"?r[n]=t[n]:r[n]=dl(t[n]));t=r}return ye(t,e)};function p5(t){var e={r:0,g:0,b:0},r=1,n=null,i=null,o=null,s=!1,l=!1;return typeof t=="string"&&(t=M5(t)),Dm(t)=="object"&&(Fi(t.r)&&Fi(t.g)&&Fi(t.b)?(e=m5(t.r,t.g,t.b),s=!0,l=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Fi(t.h)&&Fi(t.s)&&Fi(t.v)?(n=dl(t.s),i=dl(t.v),e=d5(t.h,n,i),s=!0,l="hsv"):Fi(t.h)&&Fi(t.s)&&Fi(t.l)&&(n=dl(t.s),o=dl(t.l),e=f5(t.h,n,o),s=!0,l="hsl"),t.hasOwnProperty("a")&&(r=t.a)),r=hA(r),{ok:s,format:t.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function m5(t,e,r){return{r:ft(t,255)*255,g:ft(e,255)*255,b:ft(r,255)*255}}function uA(t,e,r){t=ft(t,255),e=ft(e,255),r=ft(r,255);var n=Math.max(t,e,r),i=Math.min(t,e,r),o,s,l=(n+i)/2;if(n==i)o=s=0;else{var u=n-i;switch(s=l>.5?u/(2-n-i):u/(n+i),n){case t:o=(e-r)/u+(e<r?6:0);break;case e:o=(r-t)/u+2;break;case r:o=(t-e)/u+4;break}o/=6}return{h:o,s,l}}function f5(t,e,r){var n,i,o;t=ft(t,360),e=ft(e,100),r=ft(r,100);function s(m,d,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?m+(d-m)*6*g:g<1/2?d:g<2/3?m+(d-m)*(2/3-g)*6:m}if(e===0)n=i=o=r;else{var l=r<.5?r*(1+e):r+e-r*e,u=2*r-l;n=s(u,l,t+1/3),i=s(u,l,t),o=s(u,l,t-1/3)}return{r:n*255,g:i*255,b:o*255}}function pA(t,e,r){t=ft(t,255),e=ft(e,255),r=ft(r,255);var n=Math.max(t,e,r),i=Math.min(t,e,r),o,s,l=n,u=n-i;if(s=n===0?0:u/n,n==i)o=0;else{switch(n){case t:o=(e-r)/u+(e<r?6:0);break;case e:o=(r-t)/u+2;break;case r:o=(t-e)/u+4;break}o/=6}return{h:o,s,v:l}}function d5(t,e,r){t=ft(t,360)*6,e=ft(e,100),r=ft(r,100);var n=Math.floor(t),i=t-n,o=r*(1-e),s=r*(1-i*e),l=r*(1-(1-i)*e),u=n%6,m=[r,s,o,o,l,r][u],d=[l,r,r,s,o,o][u],g=[o,o,l,r,r,s][u];return{r:m*255,g:d*255,b:g*255}}function mA(t,e,r,n){var i=[Cn(Math.round(t).toString(16)),Cn(Math.round(e).toString(16)),Cn(Math.round(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function g5(t,e,r,n,i){var o=[Cn(Math.round(t).toString(16)),Cn(Math.round(e).toString(16)),Cn(Math.round(r).toString(16)),Cn(yA(n))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function fA(t,e,r,n){var i=[Cn(yA(n)),Cn(Math.round(t).toString(16)),Cn(Math.round(e).toString(16)),Cn(Math.round(r).toString(16))];return i.join("")}ye.equals=function(t,e){return!t||!e?!1:ye(t).toRgbString()==ye(e).toRgbString()};ye.random=function(){return ye.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function h5(t,e){e=e===0?0:e||10;var r=ye(t).toHsl();return r.s-=e/100,r.s=Fm(r.s),ye(r)}function y5(t,e){e=e===0?0:e||10;var r=ye(t).toHsl();return r.s+=e/100,r.s=Fm(r.s),ye(r)}function T5(t){return ye(t).desaturate(100)}function x5(t,e){e=e===0?0:e||10;var r=ye(t).toHsl();return r.l+=e/100,r.l=Fm(r.l),ye(r)}function S5(t,e){e=e===0?0:e||10;var r=ye(t).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),ye(r)}function v5(t,e){e=e===0?0:e||10;var r=ye(t).toHsl();return r.l-=e/100,r.l=Fm(r.l),ye(r)}function b5(t,e){var r=ye(t).toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,ye(r)}function w5(t){var e=ye(t).toHsl();return e.h=(e.h+180)%360,ye(e)}function dA(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=ye(t).toHsl(),n=[ye(t)],i=360/e,o=1;o<e;o++)n.push(ye({h:(r.h+o*i)%360,s:r.s,l:r.l}));return n}function E5(t){var e=ye(t).toHsl(),r=e.h;return[ye(t),ye({h:(r+72)%360,s:e.s,l:e.l}),ye({h:(r+216)%360,s:e.s,l:e.l})]}function _5(t,e,r){e=e||6,r=r||30;var n=ye(t).toHsl(),i=360/r,o=[ye(t)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,o.push(ye(n));return o}function R5(t,e){e=e||6;for(var r=ye(t).toHsv(),n=r.h,i=r.s,o=r.v,s=[],l=1/e;e--;)s.push(ye({h:n,s:i,v:o})),o=(o+l)%1;return s}ye.mix=function(t,e,r){r=r===0?0:r||50;var n=ye(t).toRgb(),i=ye(e).toRgb(),o=r/100,s={r:(i.r-n.r)*o+n.r,g:(i.g-n.g)*o+n.g,b:(i.b-n.b)*o+n.b,a:(i.a-n.a)*o+n.a};return ye(s)};ye.readability=function(t,e){var r=ye(t),n=ye(e);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};ye.isReadable=function(t,e,r){var n=ye.readability(t,e),i,o;switch(o=!1,i=D5(r),i.level+i.size){case"AAsmall":case"AAAlarge":o=n>=4.5;break;case"AAlarge":o=n>=3;break;case"AAAsmall":o=n>=7;break}return o};ye.mostReadable=function(t,e,r){var n=null,i=0,o,s,l,u;r=r||{},s=r.includeFallbackColors,l=r.level,u=r.size;for(var m=0;m<e.length;m++)o=ye.readability(t,e[m]),o>i&&(i=o,n=ye(e[m]));return ye.isReadable(t,n,{level:l,size:u})||!s?n:(r.includeFallbackColors=!1,ye.mostReadable(t,["#fff","#000"],r))};var Nx=ye.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},k5=ye.hexNames=A5(Nx);function A5(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}function hA(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function ft(t,e){P5(t)&&(t="100%");var r=L5(t);return t=Math.min(e,Math.max(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function Fm(t){return Math.min(1,Math.max(0,t))}function zr(t){return parseInt(t,16)}function P5(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function L5(t){return typeof t=="string"&&t.indexOf("%")!=-1}function Cn(t){return t.length==1?"0"+t:""+t}function dl(t){return t<=1&&(t=t*100+"%"),t}function yA(t){return Math.round(parseFloat(t)*255).toString(16)}function gA(t){return zr(t)/255}var Fn=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+t+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Fi(t){return!!Fn.CSS_UNIT.exec(t)}function M5(t){t=t.replace(l5,"").replace(u5,"").toLowerCase();var e=!1;if(Nx[t])t=Nx[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Fn.rgb.exec(t))?{r:r[1],g:r[2],b:r[3]}:(r=Fn.rgba.exec(t))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Fn.hsl.exec(t))?{h:r[1],s:r[2],l:r[3]}:(r=Fn.hsla.exec(t))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Fn.hsv.exec(t))?{h:r[1],s:r[2],v:r[3]}:(r=Fn.hsva.exec(t))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Fn.hex8.exec(t))?{r:zr(r[1]),g:zr(r[2]),b:zr(r[3]),a:gA(r[4]),format:e?"name":"hex8"}:(r=Fn.hex6.exec(t))?{r:zr(r[1]),g:zr(r[2]),b:zr(r[3]),format:e?"name":"hex"}:(r=Fn.hex4.exec(t))?{r:zr(r[1]+""+r[1]),g:zr(r[2]+""+r[2]),b:zr(r[3]+""+r[3]),a:gA(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=Fn.hex3.exec(t))?{r:zr(r[1]+""+r[1]),g:zr(r[2]+""+r[2]),b:zr(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function D5(t){var e,r;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}function ra(t){return t.version>=7}var po=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var Rs=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function TA(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function gl(t){return typeof t=="string"||t instanceof String}function Cm(t){let[e,...r]=t;return F5(e,r)}function F5(t,e){let r;if(gl(t)){let n=t,[i,o,...s]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:s,usePrePhraseSnapshot:!1}}else r=t;return r}function hl(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function xA(t){for(let e of t)return!1;return!0}function yl(t){return Object.keys(t)}function ks(t){return t.replace(/(?<=[a-z0-9])([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function Tl(t,e){return`${t}.${e}`}function SA(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,s)=>{let l=r(s),u=o.get(l);return u==null?(o.set(l,[s]),o):(o.get(l).push(s),u.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Xc(i.get(o),e))}),t.flatMap(o=>{let s=r(o),l=i.get(s);if(l==null||l.length===0)return[];let u=l[0];return e(u,o)?(l.shift(),u):[]}))}function na(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var RA=Symbol.for("immer-nothing"),vA=Symbol.for("immer-draftable"),qr=Symbol.for("immer-state"),I5=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function Pr(t,...e){if(process.env.NODE_ENV!=="production"){let r=I5[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var As=Object.getPrototypeOf;function Ps(t){return!!t&&!!t[qr]}function oa(t){return t?kA(t)||Array.isArray(t)||!!t[vA]||!!t.constructor?.[vA]||Hm(t)||Bm(t):!1}var O5=Object.prototype.constructor.toString();function kA(t){if(!t||typeof t!="object")return!1;let e=As(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===O5}function Im(t,e){Um(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Um(t){let e=t[qr];return e?e.type_:Array.isArray(t)?1:Hm(t)?2:Bm(t)?3:0}function Bx(t,e){return Um(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function AA(t,e,r){let n=Um(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function N5(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Hm(t){return t instanceof Map}function Bm(t){return t instanceof Set}function ia(t){return t.copy_||t.base_}function Vx(t,e){if(Hm(t))return new Map(t);if(Bm(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=kA(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[qr];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let s=i[o],l=n[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(As(t),n)}else{let n=As(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function qx(t,e=!1){return Vm(t)||Ps(t)||!oa(t)||(Um(t)>1&&(t.set=t.add=t.clear=t.delete=U5),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>qx(n,!0))),t}function U5(){Pr(2)}function Vm(t){return Object.isFrozen(t)}var H5={};function aa(t){let e=H5[t];return e||Pr(0,t),e}var xl;function PA(){return xl}function B5(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function bA(t,e){e&&(aa("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Wx(t){$x(t),t.drafts_.forEach(V5),t.drafts_=null}function $x(t){t===xl&&(xl=t.parent_)}function wA(t){return xl=B5(xl,t)}function V5(t){let e=t[qr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function EA(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[qr].modified_&&(Wx(e),Pr(4)),oa(t)&&(t=Om(e,t),e.parent_||Nm(e,t)),e.patches_&&aa("Patches").generateReplacementPatches_(r[qr].base_,t,e.patches_,e.inversePatches_)):t=Om(e,r,[]),Wx(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==RA?t:void 0}function Om(t,e,r){if(Vm(e))return e;let n=e[qr];if(!n)return Im(e,(i,o)=>_A(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Nm(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,s=!1;n.type_===3&&(o=new Set(i),i.clear(),s=!0),Im(o,(l,u)=>_A(t,n,i,l,u,r,s)),Nm(t,i,!1),r&&t.patches_&&aa("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function _A(t,e,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&Pr(5),Ps(i)){let l=o&&e&&e.type_!==3&&!Bx(e.assigned_,n)?o.concat(n):void 0,u=Om(t,i,l);if(AA(r,n,u),Ps(u))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(oa(i)&&!Vm(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Om(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Nm(t,i)}}function Nm(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&qx(e,r)}function W5(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:PA(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=Gx;r&&(i=[n],o=Sl);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}var Gx={get(t,e){if(e===qr)return t;let r=ia(t);if(!Bx(r,e))return $5(t,r,e);let n=r[e];return t.finalized_||!oa(n)?n:n===Ux(t.base_,e)?(Hx(t),t.copy_[e]=zx(n,t)):n},has(t,e){return e in ia(t)},ownKeys(t){return Reflect.ownKeys(ia(t))},set(t,e,r){let n=LA(ia(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=Ux(ia(t),e),o=i?.[qr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(N5(r,i)&&(r!==void 0||Bx(t.base_,e)))return!0;Hx(t),jx(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Ux(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Hx(t),jx(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=ia(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Pr(11)},getPrototypeOf(t){return As(t.base_)},setPrototypeOf(){Pr(12)}},Sl={};Im(Gx,(t,e)=>{Sl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Sl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&Pr(13),Sl.set.call(this,t,e,void 0)};Sl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&Pr(14),Gx.set.call(this,t[0],e,r,t[0])};function Ux(t,e){let r=t[qr];return(r?ia(r):t)[e]}function $5(t,e,r){let n=LA(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function LA(t,e){if(!(e in t))return;let r=As(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=As(r)}}function jx(t){t.modified_||(t.modified_=!0,t.parent_&&jx(t.parent_))}function Hx(t){t.copy_||(t.copy_=Vx(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var j5=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let s=this;return function(u=o,...m){return s.produce(u,d=>r.call(this,d,...m))}}typeof r!="function"&&Pr(6),n!==void 0&&typeof n!="function"&&Pr(7);let i;if(oa(e)){let o=wA(this),s=zx(e,void 0),l=!0;try{i=r(s),l=!1}finally{l?Wx(o):$x(o)}return bA(o,n),EA(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===RA&&(i=void 0),this.autoFreeze_&&qx(i,!0),n){let o=[],s=[];aa("Patches").generateReplacementPatches_(e,i,o,s),n(o,s)}return i}else Pr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,u=>e(u,...l));let n,i;return[this.produce(e,r,(s,l)=>{n=s,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){oa(t)||Pr(8),Ps(t)&&(t=z5(t));let e=wA(this),r=zx(t,void 0);return r[qr].isManual_=!0,$x(e),r}finishDraft(t,e){let r=t&&t[qr];(!r||!r.isManual_)&&Pr(9);let{scope_:n}=r;return bA(n,e),EA(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=aa("Patches").applyPatches_;return Ps(t)?n(t,e):this.produce(t,i=>n(i,e))}};function zx(t,e){let r=Hm(t)?aa("MapSet").proxyMap_(t,e):Bm(t)?aa("MapSet").proxySet_(t,e):W5(t,e);return(e?e.scope_:PA()).drafts_.push(r),r}function z5(t){return Ps(t)||Pr(10,t),MA(t)}function MA(t){if(!oa(t)||Vm(t))return t;let e=t[qr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=Vx(t,e.scope_.immer_.useStrictShallowCopy_)}else r=Vx(t,!0);return Im(r,(n,i)=>{AA(r,n,MA(i))}),e&&(e.finalized_=!1),r}var Gr=new j5,Wm=Gr.produce,Mde=Gr.produceWithPatches.bind(Gr),Dde=Gr.setAutoFreeze.bind(Gr),Fde=Gr.setUseStrictShallowCopy.bind(Gr),Cde=Gr.applyPatches.bind(Gr),Ide=Gr.createDraft.bind(Gr),Ode=Gr.finishDraft.bind(Gr);var Yt=[];for(let t=0;t<256;++t)Yt.push((t+256).toString(16).slice(1));function DA(t,e=0){return(Yt[t[e+0]]+Yt[t[e+1]]+Yt[t[e+2]]+Yt[t[e+3]]+"-"+Yt[t[e+4]]+Yt[t[e+5]]+"-"+Yt[t[e+6]]+Yt[t[e+7]]+"-"+Yt[t[e+8]]+Yt[t[e+9]]+"-"+Yt[t[e+10]]+Yt[t[e+11]]+Yt[t[e+12]]+Yt[t[e+13]]+Yt[t[e+14]]+Yt[t[e+15]]).toLowerCase()}var FA=require("crypto"),jm=new Uint8Array(256),$m=jm.length;function Kx(){return $m>jm.length-16&&((0,FA.randomFillSync)(jm),$m=0),jm.slice($m,$m+=16)}var CA=require("crypto"),Qx={randomUUID:CA.randomUUID};function q5(t,e,r){if(Qx.randomUUID&&!e&&!t)return Qx.randomUUID();t=t||{};let n=t.random??t.rng?.()??Kx();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return DA(n)}var Yx=q5;function IA(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function zm(t,e){if(Array.isArray(t))return t.map(r=>zm(r,e));if(typeof t=="object"&&t!=null){if(G5(t))return IA(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=zm(t[n],e));return r}return t}function G5(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var Jm=ln(NA(),1);var K5={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},Q5={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},Gm={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},Km={modulo100:"row",relativeUp:"up",relativeDown:"down"};function UA(t){let e=K5[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function HA(t){let e=Q5[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function Zx(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var Y5=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),Z5=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),J5={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},BA={...Y5,...Z5,...J5};function mo(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Bt(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var VA={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Bt("triple quad"),tripleSingleQuotes:Bt("triple twin"),tripleBacktickQuotes:Bt("triple skis"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Bt("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",argumentList:"arg list",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:mo("one section"),sectionLevelTwo:mo("two section"),sectionLevelThree:mo("three section"),sectionLevelFour:mo("four section"),sectionLevelFive:mo("five section"),sectionLevelSix:mo("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Bt("parse tree string"),textFragment:Bt("text fragment"),disqualifyDelimiter:Bt("disqualify delimiter"),pairDelimiter:Bt("pair delimiter"),"private.fieldAccess":Bt("access")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",flashTargets:"flash",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join",gitAccept:"git accept",gitRevert:"git revert",gitStage:"git stage",gitUnstage:"git unstage","private.showParseTree":Bt("parse tree"),"experimental.setInstanceReference":mo("from"),editNew:Bt("edit new"),executeCommand:Bt("execute command"),parsed:Bt("parsed"),getText:Bt("get text"),replace:Bt("replace"),"private.getTargets":Bt("get targets"),"private.setKeyboardTarget":Bt("set keyboard target")},customAction:{},grapheme:BA};var Jx=Zx(VA,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),In=Zx(Jx,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var kt={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var jA=ln($A(),1),Ym=class{constructor(e){this.mooLexer=jA.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var On={};for(let t of Ox){let{spokenForms:e}=In.action[t];for(let r of e)On[r]={type:"simpleActionName",value:t}}var X5=["replaceWithTarget","moveToTarget"];for(let t of X5){let{spokenForms:e}=In.action[t];for(let r of e)On[r]={type:"bringMove",value:t}}var e4=["before","after","to"];for(let t of e4){let e=kt[t==="to"?"sourceDestinationConnective":t];On[e]={type:"insertionMode",value:t}}for(let t of ta){let{spokenForms:e}=In.simpleScopeTypeType[t];for(let r of e)On[r]={type:"simpleScopeTypeType",value:t}}for(let t of Mm){let{spokenForms:e}=In.pairedDelimiter[t];for(let r of e)On[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(Gm))e!=null&&(On[e]={type:"simpleMarkType",value:t});In.modifierExtra.next.spokenForms.forEach(t=>{On[t]={type:"direction",value:"forward"}});In.modifierExtra.previous.spokenForms.forEach(t=>{On[t]={type:"direction",value:"backward"}});var Xn=new Ym({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(On),type:t=>On[t].type,value:t=>On[t].value}});function zA(t,e){return{name:t,target:e}}function qA(t,e,r){return{name:t,source:e,destination:r}}function Zm(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function GA(t,e){return{type:"primitive",insertionMode:t,target:e}}function KA(t){return{type:"containingScope",scopeType:t}}function QA(t,e){return{type:"relativeScope",scopeType:t,offset:1,length:1,direction:e}}function YA(t){return{type:t}}function ZA(t){return{type:"surroundingPair",delimiter:t}}function JA(t){return{type:t}}function XA(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function Xx(t){return t[0]}var t4={Lexer:Xn,ParserRules:[{name:"main",symbols:["action"],postprocess:Xx},{name:"action",symbols:[Xn.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>zA(t,e)},{name:"action",symbols:[Xn.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>qA(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:Xx},{name:"destination",symbols:[Xn.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>GA(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:Xx},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>Zm(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>Zm(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>Zm(t,e)},{name:"modifier",symbols:["scopeType"],postprocess:([t])=>KA(t)},{name:"modifier",symbols:[Xn.has("direction")?{type:"direction"}:direction,"scopeType"],postprocess:([t,e])=>QA(e,t)},{name:"scopeType",symbols:[Xn.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>YA(t)},{name:"scopeType",symbols:[Xn.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>ZA(t)},{name:"mark",symbols:[Xn.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>JA(t)},{name:"mark",symbols:[Xn.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>XA(t)}],ParserStart:"main"},eP=t4;function r4(){return new Jm.Parser(Jm.Grammar.fromCompiled(eP))}function tP(t){let e=r4();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function Xm(t,e){let r=tP(t);return zm(r,e)}function vl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...rP(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return rP(t.destination);case"parsed":return vl(Xm(t.content,t.arguments));default:return[t.target]}}function rP(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function tS(t){return t.flatMap(eS)}function eS(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(eS);case"range":return[t.anchor,t.active].flatMap(eS);case"implicit":return[]}}var n4={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},i4={purple:"pink"};function o4(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=n4[e.scopeType.type]??e.scopeType.type)})}function a4(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=i4[t.mark.symbolColor]??t.mark.symbolColor)}function rS(t){tS(t).forEach(e=>{o4(e),a4(e)})}function nP(t){return{...t,version:1}}var s4={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},c4={type:"primitive",isImplicit:!0},iP=t=>Li(t,s4)?c4:t;function oP(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:u4(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function l4(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function nS(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:s,selectionType:l,position:u}=t,m=[];if(u&&u!=="contents"&&(u==="before"?o==="inside"?m.push({type:"position",position:"start"}):e==="remove"?m.push({type:"leading"}):m.push({type:"position",position:"before"}):o==="inside"?m.push({type:"position",position:"end"}):e==="remove"?m.push({type:"trailing"}):m.push({type:"position",position:"after"})),l)switch(l){case"token":if(s?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:m.push({type:"containingScope",scopeType:{type:l}})}return s&&m.push(...l4(s)),{type:r,isImplicit:n,modifiers:m.length>0?m:void 0,mark:i?.type==="cursorToken"?void 0:i}}function aP(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>aP(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:s,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:nS(i,e),active:nS(o,e),excludeAnchor:s??!1,excludeActive:l??!1}}case"primitive":return nS(t,e)}}function u4(t,e){return t.map(r=>aP(r,e)).map(r=>r.type==="primitive"?iP(r):r)}function sP(t){return{...t,version:3,targets:t.targets.map(cP)}}function cP(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>cP(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:iS(e),active:iS(r),...n}}case"primitive":return iS(t)}}function iS(t){let e=t.modifiers!=null?t.modifiers.map(m4):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:wl(r),modifiers:e},active:{type:"primitive",mark:wl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?p4(t.mark):void 0,modifiers:e}}function p4(t){switch(t.type){case"lineNumber":return f4(t);default:return t}}function m4(t){switch(t.type){case"ordinalRange":return d4(t);default:return t}}function f4(t){return Li(t.anchor,t.active)?wl(t.anchor):{type:"range",anchor:wl(t.anchor),active:wl(t.active)}}function d4(t){return t.anchor===t.active?bl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?bl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?bl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:bl(t.scopeType,t.anchor),active:bl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function wl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function bl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function uP(t){return{...t,version:4,targets:t.targets.map(pP)}}function pP(t){switch(t.type){case"primitive":return lP(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:lP(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(pP)}}}}function lP(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function mP(t){return{...t,version:5,action:g4(t.action),targets:t.targets.map(ef)}}function g4(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=h4(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function h4(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function ef(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(ef)};case"range":return{...t,anchor:ef(t.anchor),active:ef(t.active)};case"primitive":return{...t,mark:t.mark!=null?oS(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(aS):void 0}}}function oS(t){return t.type==="range"?{...t,anchor:oS(t.anchor),active:oS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function aS(t){return t.type==="range"?{...t,anchor:aS(t.anchor),active:aS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var y4={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function sS(t){let e=y4[t]??t;if(!sA.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function fP(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:T4(t.action,t.targets)}}function T4(t,e){let r=sS(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:fn(e[0]),destination:El(e[1])};case"swapTargets":return{name:r,target1:fn(e[0]),target2:fn(e[1])};case"callAsFunction":return{name:r,callee:fn(e[0]),argument:fn(e[1])};case"pasteFromClipboard":return{name:r,destination:El(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:fn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:fn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:El(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:fn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:fn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:El(e[0])};case"highlight":{let n={name:r,target:fn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:El(e[0])};case"getText":return{name:r,options:t.args?.[0],target:fn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:fn(e[0])}}}function fn(t){switch(t.type){case"list":case"range":case"primitive":return x4(t);case"implicit":return t}}function x4(t){switch(t.type){case"list":return S4(t);case"range":case"primitive":return tf(t)}}function S4(t){return{...t,elements:t.elements.map(tf)}}function tf(t){switch(t.type){case"range":return dP(t);case"primitive":return rf(t)}}function dP(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:rf(e),active:rf(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function rf(t){let e={type:"primitive"},r=R4(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function El(t){switch(t.type){case"list":return v4(t);case"range":return b4(t);case"primitive":return w4(t);case"implicit":return E4()}}function v4(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let s=nf(o);s!=null?(i(),r=[tf(o)],n=s):r.push(tf(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function b4(t){return{type:"primitive",insertionMode:nf(t.anchor)??"to",target:dP(t)}}function w4(t){return{type:"primitive",insertionMode:nf(t)??"to",target:rf(t)}}function E4(){return{type:"implicit"}}function nf(t){switch(t.type){case"implicit":return"to";case"primitive":return _4(t);case"range":return nf(t.anchor)}}function _4(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function R4(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function gP(t){return{...t,version:7}}function lS(t){let e=k4(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Wm(r,o=>{let s=vl(o);rS(s),r.name}),usePrePhraseSnapshot:n}}function k4(t,e){if(t.version>7)throw new Dp;for(;t.version<e;)switch(t.version){case 0:t=nP(t);break;case 1:t=oP(t);break;case 2:t=sP(t);break;case 3:t=uP(t);break;case 4:t=mP(t);break;case 5:t=fP(t);break;case 6:t=gP(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var uS;function of(t){uS=t}function P(){if(uS==null)throw Error("Tried to access ide before it was injected");return uS}var af=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var A4=25,sf=class{constructor(){this.targetMap=new Map;this.targetHistory=new Rs(()=>new af(A4));this.notifier=new nr}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of Ss)e(r,this.get(r));return this.notifier.registerListener(e)}};function Mt(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function Lr(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Ci(t,e,r){return Promise.all(pS(t,e).map(([n,i])=>r(n,i)))}async function dt(t,e){return Ci(t,r=>r.editor,e)}async function hP(t,e){let r=pS(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function yP(t){return pS(t,e=>e.editor)}function pS(t,e){let n=hl(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function dn(t,e){return e!=null?It(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new pt(i.end,i.start):new pt(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function gn(t,e){return t.textualType==="line"?jr(e):gr(e)}function P4(t){return gn(t,t.contentRange)}function $e(t,e,r,n=P4){return t.flashRanges(e.map(i=>({editor:i.editor,range:n(i),style:r})))}function fo(t,e){return new Y(new ke(e.start.line,0),t.document.lineAt(e.end).range.end)}function mS(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function TP(t,e){let[r,n]=e instanceof ke?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Ii(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var cf=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=M4(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?L4(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=s=>this.updateRange(s,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Ii(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new Y(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),s=o+r.length;return new Y(this.editor.document.positionAt(o),this.editor.document.positionAt(s))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function L4(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let s=o.rangeTrimmed?.start??o.range.end;s.character<r&&(r=s.character,n=o.text.slice(0,r))}return n}function M4(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function Ls(t,e,r,n){return D4(t.contentRange,e.contentRange,r,n)}function D4(t,e,r,n){return new Y(r?t.start:t.end,n?e.end:e.start)}function Ms(t,e,r,n){let i=r?t.contentRange.start:new ke(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new Y(i,o)}var Qe=class t{constructor(e){this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.textualType="token";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return gn(this,this.getRemovalRange())}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:Ls(this,r,!0,!0)})}isEqual(e){return e instanceof t&&Li(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new cf(this,e)}toPlainObject(){return{type:this.type,contentRange:sl(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function sa(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,s=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,u=r.positionAt(s),m=r.positionAt(l);return new Y(u,m)}function lf(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var Xe=class extends Qe{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.textualType=r.textualType??"token",this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,textualType:this.textualType,insertionDelimiter:this.insertionDelimiter}}};function Ds(t,e,r){return lf(Xe,t,e,r)}var uf=class extends Qe{constructor(r){super(r);this.type="DocumentTarget";this.textualType="line";this.insertionDelimiter=`

`}getInterior(){return[new Xe({editor:this.editor,isReversed:this.isReversed,contentRange:sa(this.editor,this.contentRange)})]}getRemovalRange(){return this.contentRange}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getCloneParameters(){return this.state}};var hr=class t extends Qe{constructor(){super(...arguments);this.type="LineTarget";this.textualType="line";this.insertionDelimiter=`
`;this.getRemovalHighlightRange=()=>jr(this.fullLineContentRange)}get fullLineContentRange(){return fo(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return Ds(this.editor,F4(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return Ds(this.editor,C4(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:Ms(this,n,!0,!0)})}getCloneParameters(){return this.state}};function F4(t,e){let{start:r}=e;return r.line>0?new Y(t.document.lineAt(r.line-1).range.end,e.start):void 0}function C4(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new Y(e.end,new ke(r.line+1,0)):void 0}function fS(t,e,r){return lf(hr,t,e,r)}var pf=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var mf=class extends Qe{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new pf(this,r)}};var go=class t extends Qe{constructor(){super(...arguments);this.type="ParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`}getLeadingDelimiterTarget(){return fS(this.editor,I4(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return fS(this.editor,O4(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new hr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return fo(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange;return jr(n)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Ms(this,n,!0,!0)})}getCloneParameters(){return this.state}};function I4(t,e){let{document:r}=t,n=r.lineAt(e.start),i=N4(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new Y(new ke(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new Y(new ke(0,0),r.lineAt(n.lineNumber-1).range.end)}function O4(t,e){let{document:r}=t,n=r.lineAt(e.end),i=U4(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new Y(new ke(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new Y(new ke(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function N4(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function U4(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var ho=class extends Qe{constructor(){super(...arguments);this.type="RawSelectionTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};function _l(t){let e=Ii(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var H4=['"',"'","(","[","{","<"],B4=['"',"'",")","]","}",">",",",";",":"];function ei(t){let{editor:e}=t,{start:r}=Ii(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new Xe({contentRange:new Y(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function ti(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new Xe({contentRange:new Y(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function yo(t){let{editor:e}=t,r=Ii(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),s=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=fo(e,r);return o.union(s).isRangeEqual(l)?l:!s.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||H4.includes(V4(e,r)))?r.union(s):!o.isEmpty&&(r.end.isEqual(l.end)||B4.includes(W4(e,r)))?r.union(o):r}function V4(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new Y(r.translate(void 0,-1),r)):""}function W4(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new Y(r.translate(void 0,1),r)):""}var or=class extends Qe{constructor(){super(...arguments);this.type="TokenTarget";this.textualType="token";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return ei(this)}getTrailingDelimiterTarget(){return ti(this)}getRemovalRange(){return yo(this)}getCloneParameters(){return this.state}};function dS(t){let{editor:e,isReversed:r}=t,{document:n}=e,i=Ii(t.contentRange,t.prefixRange);return $4(n,i)?j4(n,i)?new go({editor:e,isReversed:r,contentRange:i}):new hr({editor:e,isReversed:r,contentRange:i}):new or({editor:e,isReversed:r,contentRange:i})}function $4(t,e){let r=t.lineAt(e.start).rangeTrimmed?.start,n=t.lineAt(e.end).rangeTrimmed?.end;return r!=null&&n!=null&&r.isEqual(e.start)&&n.isEqual(e.end)}function j4(t,e){let{start:r,end:n}=e;return(r.line===0||t.lineAt(r.line-1).isEmptyOrWhitespace)&&(n.line===t.lineCount-1||t.lineAt(n.line+1).isEmptyOrWhitespace)}var Fs=class t extends Qe{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??z4(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new Xe({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return ei(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new Xe({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return ti(this)}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?_l(this):dS(this).getRemovalRange()}getRemovalHighlightRange(){return this.removalRange_!=null?gn(this,this.removalRange_):this.hasDelimiterRange_?gn(this,_l(this)):dS(this).getRemovalHighlightRange()}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?(this.removalRange_??this.contentRange).union(n.removalRange_??n.contentRange):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:this.contentRange.union(n.contentRange)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function z4(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var ff=class t extends Qe{constructor(r){super(r);this.type="SubTokenWordTarget";this.textualType="word";this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return Ds(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return Ds(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return _l(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Ls(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Cs=class t extends Qe{constructor(r){super({...r,contentRange:sa(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:this.fullInteriorRange.union(n.fullInteriorRange)})}};var df=class extends Qe{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return ei(this)}getTrailingDelimiterTarget(){return ti(this)}getRemovalRange(){return yo(this)}getInterior(){return[new Cs({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new or({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Vt=class extends Qe{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.textualType=r.textualType??"token"}getLeadingDelimiterTarget(){return ei(this)}getTrailingDelimiterTarget(){return ti(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:yo(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,textualType:this.textualType,hasExplicitRange:this.hasExplicitRange}}};var gf=class extends Qe{constructor(){super(...arguments);this.type="ImplicitTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var hf=class extends Qe{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:xP(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return ei(this)}getTrailingDelimiterTarget(){return ti(this)}getRemovalRange(){return yo(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new Xe({editor:this.editor,contentRange:xP(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function xP(t,e,r){return r?new Y(e.start,t.end):new Y(t.start,e.end)}var yf=class t extends Qe{constructor(r){super({...r,contentRange:q4(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new hr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return fo(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=(()=>{if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n!=null?this.fullLineContentRange.union(n.contentRange):this.fullLineContentRange})();return jr(r)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function q4(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function Tf(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var Is=class{run(){return Tf(P()).map(e=>new Vt({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,textualType:"character"}))}};var ri=class{constructor(e,r){this.debouncer=new Mp(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var xf=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new ri(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new Is().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var Sf=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var G4=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],K4=G4.map($r).join("|"),Q4=["[a-zA-Z0-9]",K4].join("|"),Y4=new RegExp(`^(${Q4})$`,"u"),Z4="[unk]",J4=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,vf=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new nr;this.getTokenGraphemes=e=>pn(e,J4,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;P().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(P().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=P().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=ex(o),Y4.test(o)||(o=Z4)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function ca(){return gS==null&&(gS=new vf),gS}var gS;var X4=["-","+","*","/","=","<",">","_","#",".","|","&",":"],e9=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],t9=["\\p{L}","\\p{M}","\\p{N}"],r9="[^\\s\\w]",n9="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function i9(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:s}=t,l=r.map($r).map(x=>`${x}+`).join("|"),u=e.map($r).join("|"),d=`(${n.concat(i.map($r)).join("|")})+`,g=`(${n.join("|")})+`,y=[u,o,d,l,s].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(g,"gu"),tokenMatcher:new RegExp(y,"gu")}}var hS=new Map;function Mr(t){let e=P().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!hS.has(r)){let n={fixedTokens:e9,repeatableSymbols:X4,identifierWordRegexes:t9,identifierWordDelimiters:e,numbersRegex:n9,singleSymbolsRegex:r9};hS.set(r,i9(n))}return hS.get(r)}function SP(t,e,r){return pn(t,Mr(e).tokenMatcher,r)}var o9=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,Os=class{constructor(e){this.wordRegex=Mr(e).wordMatcher}splitIdentifier(e){let r=il(e,this.wordRegex);return r.length>1?r:il(e,o9)}};var vP=({penalty:t})=>-t,bP=({isFirstLetter:t})=>t?-1:0;function wP(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function EP(t,e){let r=Zc(n=>ax(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function yS(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function _P(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function RP(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=a9(r,n)}return r[0]}function a9(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function kP({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,s){return RP(s,[yS(i),_P(r),yS(o),wP(t),vP,bP,EP(n,e)])}function AP(t,e,r){let n={},i=new po(({grapheme:o,hatStyle:s})=>[o,s]);return t.forEach(({token:o,rank:s})=>{let l=e.get(o);l!=null&&i.set(l,s),r.getTokenGraphemes(o.text).forEach(({text:u})=>{let m;u in n?m=n[u]:(m=[],n[u]=m),m.push(s)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function PP(t,e=[]){return new Map(ox(ct,Yo)(Jc([e],t.visibleRanges.map(r=>sx(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function LP(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let s=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return s-l}}function MP(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return SP(n,r,o=>{let s=i+o.index,l=i+o.index+o[0].length,u=new Y(t.document.positionAt(s),t.document.positionAt(l));return{editor:t,text:o[0],range:u,offsets:{start:s,end:l}}})}function DP(t,e,r){let i=c9(t,e).flatMap(o=>{let s=o.selections[0].active,l=PP(o,[s.line]),u=ct(o.visibleRanges.map(m=>MP(o,m).map(d=>({...d,displayLine:l.get(d.range.start.line)}))));return u.sort(LP(l.get(s.line),s.character)),u});return s9(r,i).map((o,s)=>({token:o,rank:-s}))}function s9(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function c9(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function TS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:s}){let l=r==null?void 0:FP(r),u=FP(n),m=DP(o,s,l),d=AP(m,u,t),g=Object.keys(e),y=new Rs(()=>[...g]);return m.map(({token:x,rank:E})=>{let w=l9(t,x,y,e),H=kP(d,i,E,l?.get(x),u.get(x),w);if(H!=null)return y.set(H.grapheme.text,y.get(H.grapheme.text).filter(W=>W!==H.style)),u9(x,H)}).filter(x=>x!=null)}function FP(t){let e=new po(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function l9(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text),s=new Set(new Os(e.editor.document.languageId).splitIdentifier(e.text).map(l=>l.index));for(let l of o){let u=s.has(l.tokenStartOffset);for(let m of r.get(l.text))i.push({grapheme:l,style:m,penalty:n[m].penalty,isFirstLetter:u})}return i}function u9(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new Y(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var bf=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];P().disposeOnExit(this);let n=new ri(P().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),P().onDidOpenTextDocument(n.run),P().onDidCloseTextDocument(n.run),P().onDidChangeActiveTextEditor(n.run),P().onDidChangeVisibleTextEditors(n.run),P().onDidChangeTextDocument(n.run),P().onDidChangeTextEditorSelection(n.run),P().onDidChangeTextEditorVisibleRanges(n.run),ca().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:ca().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?TS({tokenGraphemeSplitter:ca(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:P().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:P().activeTextEditor,visibleTextEditors:P().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:s}})=>({editor:s,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var wf=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:s}=n,l=this.makeTokenLive(s);return this.map[Tl(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=Mr(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[Tl(e,ca().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var p9=6e4,Ef=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;P().disposeOnExit(this),this.activeMap=new wf(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new bf(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>p9?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function xS(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var wS=ln(kl(),1);function ES(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:s,end:l}}=e;return(0,wS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,wS.invariant)(n>=s&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=s?s+o:Math.min(s,i),end:n<=l?l+o:Math.min(l,i)}}var HP=ln(kl(),1);function _S(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,HP.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let s=e.expansionBehavior.end;switch(s.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(ym(s.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let s=e.expansionBehavior.start;switch(s.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(hm(s.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var RS=ln(kl(),1);function kS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:s},text:l}=e;if((0,RS.invariant)(s>o,()=>"Selection range expected to be nonempty"),(0,RS.invariant)(n>=o&&n<=s,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<s)return{start:o,end:s+i};if(n===o){let u=e.expansionBehavior.start,m=s+i;switch(u.type){case"closed":return{start:o+i,end:m};case"open":return{start:o,end:m};case"regex":{let d=r+l,g=hm(u.regex),y=d.search(g);for(;y>r.length;)d=d.slice(0,y),y=d.search(g);return y===-1?{start:o,end:m}:{start:o+y,end:m}}}}else{let u=e.expansionBehavior.end,m=o;switch(u.type){case"closed":return{start:m,end:s};case"open":return{start:m,end:s+i};case"regex":{let d=l+r,g=ym(u.regex),y=d.match(g),x=y==null?0:y[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,y=d.match(g),x=y==null?0:x+y[0].length;return x===0?{start:m,end:s}:{start:m,end:o+x}}}}}function BP(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:s}=e.offsets,l=Math.min(n,o),u="";return o<n&&(u+=e.text.substring(0,n-o)),u+=t.event.text,i<s&&(u+=e.text.substring(s-i,e.text.length)),u.substring(r.start-l,r.end-l)}function VP(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let s=o.text.length-o.rangeLength,l=o.rangeOffset,u=l+o.rangeLength,m=l,d=u+s;return{displacement:s,event:o,originalOffsets:{start:l,end:u},finalOffsets:{start:m,end:d}}});for(let o of e){let s=o.offsets,l=i.map(m=>{let d;return m.originalOffsets.start>s.end?{start:0,end:0}:m.originalOffsets.end<s.start?{start:m.displacement,end:m.displacement}:(m.event.rangeLength===0?o.range.isEmpty?d=_S(m,o):d=kS(m,o):d=ES(m,o),o.text=BP(m,o,d),{start:d.start-s.start,end:d.end-s.end})}),u={start:s.start+um(l,({start:m})=>m),end:s.end+um(l,({end:m})=>m)};o.range=o.range.with(r.positionAt(u.start),r.positionAt(u.end)),o.offsets=u}}var Rf=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return xS(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return xS(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>dr(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>dr(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=P().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>S9(r,i)?{...i,isReplace:!0}:i)};VP(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function S9(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var kf=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var Af=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var Pf=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var Lf=class{getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e,r){throw new Error("Snippets are not implemented.")}};var Mf=class{getSpokenFormEntries(){throw new _s}onDidChange(){return{dispose:()=>{}}}};var Df=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}createQuery(e,r){throw new Error("Tree sitter not provided")}};var gt=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var WP={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleBacktickQuotes:["```","```"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var $P=new po(t=>t);for(let[t,e]of Object.entries(WP))e!=null&&$P.set(e,t);function jP(t,e,r){let n=$P.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}function zP(t){throw new gt(`${t.type} insertion snippet`)}function qP(t){throw new gt(`${t.type} wrap with snippet`)}function Al(t,e,r){let n=r==="vertical"?`${kt.verticalRange} `:"";if(t&&e)return n+kt.rangeExclusive;if(t)throw new gt("Range exclude anchor");return e?n+kt.rangeExcludingEnd:r==="vertical"?kt.verticalRange:kt.rangeInclusive}function GP(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var v9=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],b9=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function Ns(t){let e=v9[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function Pl(t){let e=b9[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Ff=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new gt(`Modifier '${e.type}'`);case"containingScope":return e.ancestorIndex==null||e.ancestorIndex===0?this.handleScopeType(e.scopeType):[new Array(e.ancestorIndex).fill(this.spokenFormMap.modifierExtra.ancestor),this.handleScopeType(e.scopeType)];case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,Pl(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,Pl(e.start+1),r];let i=Ns(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,Ll(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,Ll(r)];throw new gt(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:Pl(e.anchor.start+1),n=this.handleModifier(e.active),i=Al(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let s=e.direction==="forward"?kt.forward:kt.backward;return[n,r,s]}let i=Ns(e.length),o=Ll(r);return e.direction==="forward"?[n,i,o]:[n,i,o,kt.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?kt.next:kt.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=Ns(e.length);if(e.length===1)return[i,n,r];let s=Ll(r);return[i,n,o,s]}if(e.length===1){let o=Pl(e.offset);return[i,o,n,r]}throw new gt(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new gt(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,QP(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};case"interior":return this.spokenFormMap.simpleModifier.interiorOnly;default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(UA(r)),n!=null&&i.push(HA(n)),i.push(QP(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let s=Al(e.excludeAnchor,e.excludeActive);return[r,n,s,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new gt(`Mark '${e.type}'`);default:return[Gm[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new gt("Absolute line numbers");case"modulo100":return[Km.modulo100,Ns(e.lineNumber+1)];case"relative":return[e.lineNumber<0?Km.relativeUp:Km.relativeDown,Ns(Math.abs(e.lineNumber))]}}};function Ll(t){if(typeof t=="string")return KP(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),Ll(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(KP)}}}function KP(t){return`${t}s`}function QP(t,e,r){let n=t[r];if(n==null)throw new gt(`${e} '${r}'`);return n}var Us=class{constructor(e){this.spokenFormMap=GP(e),this.primitiveGenerator=new Ff(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new gt(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:YP(e())}}catch(r){if(r instanceof gt)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new gt(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),kt.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[jP(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],zP(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new gt(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[qP(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new gt(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new gt("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[kt.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=Al(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new gt("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[kt.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return kt.sourceDestinationConnective;case"before":return kt.before;case"after":return kt.after}}};function YP(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:ZP(t.map(YP)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${ks(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r=`please update talon to the latest version (see ${Pp}/user/updating)`:r=`please see ${Pp}/user/customization for more information`,new gt(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function ZP(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=ZP(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Cf=class{constructor(e){this.talonSpokenForms=e;this.notifier=new nr;this.spokenFormMap_={...In};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps()),this.customSpokenFormsInitialized=this.updateSpokenFormMaps()}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof fl)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof _s)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");yt(P().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}this.spokenFormMap_={...In},this.notifier.notifyListeners();return}for(let r of lA)w9(this.spokenFormMap_,r,Jx[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function w9(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let s of i){let{defaultSpokenForms:l=[],isPrivate:u=!1}=r[s]??{},m=n[s];o[s]=m==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!u,isCustom:!1,isPrivate:u}:{defaultSpokenForms:l,spokenForms:m,requiresTalonUpdate:!1,isCustom:!Li(l,m),isPrivate:u}}t[e]=o}var If=class{constructor(e){this.customSpokenForms=new Cf(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new Us(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new Us(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function Kr(t,e,{domain:r},{domain:n}){return t==="forward"?E9(e,r,n):_9(e,r,n)}function E9(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let s=e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&!i){let s=e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&i){let s=e.end.compareTo(r.start);return s!==0?s:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function _9(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let s=-e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&!i){let s=-e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&i){let s=-e.start.compareTo(r.end);return s!==0?s:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function JP(t,e,r,n,i,o){return R9(t,n,i,o)&&(i==null||Kr(r,n.includeDescendantScopes?t:e,i,o)<0)}function R9(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:s,skipAncestorScopes:l}=e,{domain:u}=n;switch(i){case"disallowed":if(u.contains(t))return!1;break;case"disallowedIfStrict":if(TP(u,t))return!1;break;case"required":if(!u.contains(t))return!1;break}return l&&r!=null&&u.contains(r.domain)?!1:k9(new Y(t,o),u,s)}function k9(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var A9={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},Ge=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...A9,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},s,l=r;for(let u of this.generateScopeCandidates(e,r,n,o))if(JP(r,l,n,o,s,u)&&(yield u,s=u,l=n==="forward"?u.domain.end:u.domain.start),this.canStopEarly(r,n,o,s,u))return}canStopEarly(e,r,n,i,o){let{containment:s,distalPosition:l,skipAncestorScopes:u}=n;if(this.isHierarchical&&!u)return!1;let m=this.isHierarchical&&u?i:o;return m==null?!1:!!(s==="required"&&(r==="forward"?m.domain.end.isAfter(e):m.domain.start.isBefore(e))||(r==="forward"?m.domain.end.isAfterOrEqual(l):m.domain.start.isBeforeOrEqual(l)))}};var Dr=class extends Ge{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:s,...l}=o,u=this.searchScopeHandler.generateScopes(r,n,i,{containment:s==="required"?"required":void 0,...l});return vm(u,m=>this.generateScopesInSearchScope(i,m))}};var Of=class extends Ge{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield XP(r,o);else for(let o=n.line;o>=0;o--)yield XP(r,o)}};function XP(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[AS(t,n,r)]}}function AS(t,e,r){return new hr({editor:t,isReversed:e,contentRange:PS(t,r)})}function PS(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new Y(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function yn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),s=l=>new Y(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Kt(o.matchAll(t),s):Array.from(o.matchAll(t),s).reverse()}var Nf=class extends Dr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=Mr(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Kt(yn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new or({editor:n,contentRange:o,isReversed:s})]}))}};function Uf(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let s=Zo(o,n),l=Zo(o,i);if(s&&!l)return!0;if(l&&!s)return!1}}var P9=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,L9=/[$]/g,M9=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Hf=class extends Dr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Kt(yn(P9,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Xe({editor:n,contentRange:o,isReversed:s,textualType:"character"})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Mr(this.languageId);return Uf(r,n,[i,L9,M9])}};var Bf=class extends Dr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new Os(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(u=>new Y(i.positionAt(o+u.index),i.positionAt(o+u.index+u.text.length)));return l.map((u,m)=>({editor:r,domain:u,getTargets:d=>{let g=m>0?l[m-1]:null,y=m+1<l.length?l[m+1]:null;return[D9(d,r,g,u,y)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function D9(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new Y(r.end,n.start):void 0,s=i!=null&&i.start.isAfter(n.end)?new Y(n.end,i.start):void 0,u=o!=null||s!=null?e.document.getText(o??s):"";return new ff({editor:e,isReversed:t,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:o,trailingDelimiterRange:s})}var F9=/[$]/g,Vf=class extends Dr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=Mr(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Kt(yn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new or({editor:n,contentRange:o,isReversed:s})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Mr(this.languageId);return Uf(r,n,[i,F9])}};var Wf=class extends Ge{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:s=>[new uf({editor:r,isReversed:s,contentRange:o})]}}};function $f(t,e,r,n,i){if(!t&&n!=null&&i!=null&&mS(e,n)>mS(e,i))return r.union(n)}function Hs(t){return t.containment==null&&t.skipAncestorScopes}function eL(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:s,end:l}=C9(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(s),end:t.positionAt(l)}}function C9(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let s=n==="disallowed"?1:-o;return r==="forward"?{start:t+s,end:e+o}:{start:e-o,end:t-s}}function tL(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Bs=class extends Ge{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:s}=r,l=Hs(o),{start:u,end:m}=eL(s,n,i,o),d=this.query.matches(s,u,m).map(g=>this.matchToScope(r,g,l)).filter(g=>g!=null).sort((g,y)=>Kr(i,n,g,y));yield*tL(d,(g,y)=>g.domain.isRangeEqual(y.domain),g=>g.length===1?g[0]:{...g[0],getTargets(y){let x=Xc(g.flatMap(E=>E.getTargets(y)),(E,w)=>E.isEqual(w));if(x.length>1&&!g.every(E=>E.allowMultiple)){let E="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(yt(P().messages,"BaseTreeSitterScopeHandler.allow-multiple",E),P().runMode==="test")throw Error(E)}return x}})}};function LS(t,e,r,n){return n?Vs(t,`${e}.${r}`,`_.${r}`):Vs(t,`${e}.${r}`)??(Vs(t,e)!=null?Vs(t,`_.${r}`):void 0)}function xo(t,e,r,n){return LS(t,e,r,n)?.range}function Vs(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var jf=class extends Bs{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n,i){let o=this.iterateeScopeType.type,s=LS(n,o,"iteration",!1);if(s==null)return;let{range:l,allowMultiple:u}=s;if(l.isEmpty)return;let m=xo(n,o,"iteration.domain",!1)??l;return{editor:r,domain:m,allowMultiple:u,getTargets:d=>[new Xe({editor:r,isReversed:d,contentRange:l})]}}};var zf=class extends Bs{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new jf(this.query,this.scopeType)}}matchToScope(r,n,i){let o=this.scopeType.type,s=Vs(n,o);if(s==null)return;let{range:l,allowMultiple:u,insertionDelimiter:m}=s,d=xo(n,o,"domain",!0)??l,g=xo(n,o,"prefix",!0)?.with(void 0,l.start),y=xo(n,o,"leading",!0)?.with(void 0,g?.start??l.start),x=xo(n,o,"trailing",!0)?.with(l.end),E=xo(n,o,"removal",!0);return E==null&&(o==="collectionItem"||o==="argumentOrParameter")&&(E=$f(i,r,l,y,x)),{editor:r,domain:d,allowMultiple:u,getTargets:w=>[new Fs({scopeTypeType:o,editor:r,isReversed:w,contentRange:l,prefixRange:g,removalRange:E,leadingDelimiterRange:y,trailingDelimiterRange:x,insertionDelimiter:m})]}}};function rL(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function nL(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,s=!1;for(;!s&&!e(o);)({value:o,done:s}=n.next());return s?[]:[{iterator:n,value:o,index:i}]})}var ii=class t extends Ge{constructor(r,n){super();this.scopeHandlers=r;this.getIterationScopeHandler=n;this.isHierarchical=!0;this.scopeType=void 0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(r,i,o)}static createFromScopeHandlers(r,n,i){let o=()=>new t(i.map(s=>r.create(s.iterationScopeType,n)),()=>{throw new Error("Not implemented")});return new t(i,o)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let u=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[u].generateScopes(r,n,i,o);return}let s=this.scopeHandlers.map(u=>u.generateScopes(r,n,i,o)[Symbol.iterator]()),l=rL(s);for(;l.length>0;){l.sort((d,g)=>Kr(i,n,d.value,g.value));let u=l[0],m=u.value;this.lastYieldedIndex=u.index,yield m,l=nL(l,d=>Kr(i,n,m,d)<0)}}};var qf=class extends Ge{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,s=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,u=I9(o,n,i),m=r.document.lineAt(n);for(let d=n.line+s;d!==l;d+=s){let g=r.document.lineAt(d);g.isEmptyOrWhitespace?u!=null&&(yield iL(r,u.range.union(m.range)),u=void 0):u==null&&(u=g),m=g}u!=null&&(yield iL(r,u.range.union(m.range)))}};function I9(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let s=e.line+n;s!==i;s+=n){let l=t.lineAt(s);if(l.isEmptyOrWhitespace)break;o=l}return o}}function iL(t,e){return{editor:t,domain:e,getTargets:r=>[new go({editor:t,isReversed:r,contentRange:PS(t,e)})]}}function Ml(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function oL(t,e){return t.slice(t.length-e.length)===e}var MS,N9=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function aL(t){t?MS=t:MS=N9}function DS(t){return/^[A-Z][a-z].*/.test(t)||Gf(t)}function sL(t){return DS(t)||/``|"|'/.test(t.substring(0,2))}function cL(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~MS.indexOf(e)}function lL(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function FS(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function uL(t){return t.length<=3?!0:DS(t)}function CS(t,e){return e.length>0?t<5&&e[0].length<6&&DS(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function Gf(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function pL(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function mL(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function fL(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function dL(t){return t==="."||t==="!"||t==="?"}var hL=" @~@ ",gL=hL.trim(),H9=new RegExp("\\S",""),B9=new RegExp("\\n+|[-#=_+*]{4,}","g"),V9=new RegExp("\\S+|\\n","g"),W9={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function yL(t,e){if(!t)return[];if(!H9.test(t))return[];let r={...W9,...e};aL(r.abbreviations),r.newlineBoundaries&&(t=t.replace(B9,hL));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(g,y){return y%2})):n=t.trim().match(V9)??[];let o=0,s=0,l=[],u=[],m=[];if(!n||!n.length)return[];for(let g=0,y=n.length;g<y;g++){if(o++,m.push(n[g]),~n[g].indexOf(",")&&(o=0),dL(n[g])||Ml(n[g],"?!")||n[g]===gL){r.newlineBoundaries&&n[g]===gL&&m.pop(),u.push(m),o=0,m=[];continue}if((Ml(n[g],'"')||Ml(n[g],"\u201D"))&&(n[g]=n[g].slice(0,-1)),Ml(n[g],".")){if(g+1<y){if(n[g].length===2&&isNaN(n[g].charAt(0))||cL(n[g]))continue;if(sL(n[g+1])){if(lL(n[g],n[g+1])||CS(o,n.slice(g,6))||Gf(n[g+1])&&uL(n[g]))continue}else if(oL(n[g],"..")||FS(n[g])||CS(o,n.slice(g,5)))continue}u.push(m),m=[],o=0;continue}(s=n[g].indexOf("."))>-1&&(Gf(n[g],s)||FS(n[g])||mL(n[g])||pL(n[g]))||(l=fL(n[g]))&&(m.pop(),m.push(l[0]),u.push(m),m=[],o=0,m.push(l[1]))}return m.length&&u.push(m),u=u.filter(function(g){return g.length>0}),u.slice(1).reduce(function(g,y){let x=g[g.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(y[0])?(g.pop(),g.push(x.concat(y)),g):(g.push(y),g)},[u[0]]).map(function(g,y){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=g.length*2;return y===0&&(x+=1),i.splice(0,x).join("")}return g.join(" ")})}var $9=/\S*\p{L}/u,TL=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,j9={newlineBoundaries:!1,preserveWhitespace:!0},Kf=class{*segment(e){let r=yL(e,j9),n=0;for(let i of r){let o=i.split(TL).filter(s=>s!=null);for(let s of o){if(!q9(s)){let l=z9(s,n);l!=null&&(yield l)}n+=s.length}}}};function z9(t,e){let r=ck($9,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function q9(t){return Zo(TL,t)}var Qf=class extends Dr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new Kf}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),s=n.document.getText(i),l=m=>{let d=new Y(n.document.positionAt(o+m.index),n.document.positionAt(o+m.index+m.text.length));return{editor:n,domain:d,getTargets:g=>[new or({editor:n,contentRange:d,isReversed:g})]}},u=this.segmenter.segment(s);return r==="forward"?Kt(u,l):Array.from(u,l).reverse()}};var Ws=class extends Dr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Kt(yn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new or({editor:n,contentRange:o,isReversed:s})]}))}},Yf=class extends Ws{constructor(){super(...arguments);this.regex=/\S+/g}},Zf=class extends Ws{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},Jf=class extends Ws{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},Xf=class extends Ws{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp($r(this.scopeType.character),"gui")}};var ed=class extends Ge{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let s=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:Hs(o)?"required":o.containment}));for(let u of s){let m=[];for(let d of l){let g=u.domain.intersection(d.domain);g!=null&&!g.isEmpty&&m.push({editor:r,domain:g,getTargets:y=>[this.getTargets(xL(u,y),xL(d,y))]})}m.push(u),m.sort((d,g)=>Kr(i,n,d,g)),yield*m}}};function xL(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var td=class extends ed{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new or({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},rd=class extends ed{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof go))throw Error("Expected ParagraphTarget");return new yf({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var oi=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var $s=class{constructor(e){this.children=G9(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function G9(t){let e=[],r=[];for(let n of t){let i=new IS(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new oi(e)}var IS=class{constructor(e){this.item=e;this.children=new oi([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var K9=",",OS=new RegExp(K9,"g");function SL(t){let e=t.getText();return pn(e,OS,r=>new Y(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var vL={type:"fallback",scopeTypes:[{type:"conditional",scopeType:{type:"surroundingPairInterior",delimiter:"collectionBoundary"},predicate:t=>!t.domain.isEmpty},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return Zo(OS,e)}}]};function NS(t,e,r,n,i,o){let s=i!=null?new Y(i.end,n.start):void 0,l=o!=null?new Y(n.end,o.start):void 0,u=$f(t,e,n,s,l),m=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(d){return[new Fs({scopeTypeType:"collectionItem",editor:e,isReversed:d,contentRange:n,insertionDelimiter:m,leadingDelimiterRange:s,trailingDelimiterRange:l,removalRange:u})]}}}function US(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new ke(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var nd=class extends Ge{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return vL}*generateScopeCandidates(r,n,i,o){let s=Hs(o),l=SL(r.document),u=US(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),m=new $s(u),d=US(this.scopeHandlerFactory,this.languageId,r,"string"),g=new oi(d),y=[],x=new Set,E=[];for(let w of l){if(g.contains(w))continue;let H;for(;E.length>0;){let ie=E[E.length-1];if(ie.iterationRange.contains(w)){H=ie;break}this.addScopes(y,ie),E.pop()}let W=m.getSmallestContaining(w)?.range,G=W??r.document.lineAt(w.start.line).range;if(H!=null&&H.iterationRange.isRangeEqual(G)){H.delimiters.push(w);continue}W!=null&&x.add(W),E.push({editor:r,isEveryScope:s,iterationRange:G,delimiters:[w]})}for(let w of E)this.addScopes(y,w);for(let w of u)if(!x.has(w.range)&&!w.range.isEmpty){let H=sa(r,w.range);H.isEmpty||y.push(NS(s,r,w.range,H))}y.sort((w,H)=>Kr(i,n,w,H)),yield*y}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:s,delimiters:l}=n;if(l.length===0)return;let u=[];for(let g=0;g<l.length;++g){let y=l[g],x=l[g-1]?.end??o.start;u.push(new Y(x,y.start))}let m=l[l.length-1];u.push(new Y(m.end,o.end));let d=u.map(g=>sa(i,g));for(let g=0;g<d.length;++g)g===d.length-1&&i.document.getText(d[g]).trim()===""||r.push(NS(s,i,o,d[g],d[g-1],d[g+1]))}};var id=class extends Ge{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new nd(r,i),s=n.get(i)?.getScopeHandler(this.scopeType);return s==null?o:ii.createFromScopeHandlers(r,i,[s,o])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var od=class extends Ge{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new Rt("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let s=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return xm(s.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var js=class t extends Ge{constructor(r){super();this.scopeHandlers=r;this.scopeType=void 0;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(o)}static createFromScopeHandlers(r){return new t(r)}get iterationScopeType(){throw new Rt("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){for(let s of this.scopeHandlers)yield*s.generateScopes(r,n,i,o)}};var ad=class extends Ge{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let s=Q9(r,n,i,o);for(let l of s)yield Z9(l)}};function Q9(t,e,r,n){let i=Y9(t);if(i==null)return[];let{notebook:o,cell:s}=i;return n.containment==="required"?[s]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(s.index+1):o.cells.slice(0,s.index).reverse():n.distalPosition!=null&&new Y(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(s.index):o.cells.slice(0,s.index+1).reverse()}function Y9(t){let e=t.document.uri.toString();for(let r of P().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function Z9(t){let e=J9(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new mf({editor:e,isReversed:n,contentRange:r})]}}function J9(t){let e=t.document.uri.toString();for(let r of P().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var sd=class extends Ge{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let s=new ad,l=n.get(o)?.getScopeHandler(this.scopeType);return l==null?s:ii.createFromScopeHandlers(r,o,[l,s])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var cd=class extends Ge{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let s=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of s)yield{editor:r,domain:l.domain,getTargets(u){return l.getTargets(u).flatMap(m=>m.getInterior())}}}};function bL(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new Y(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:s=>[new df({editor:t,isReversed:s,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function wL(t){let e=Yo(t.map(({text:r})=>r)).map($r).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function _L(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new oi(HS(n.disqualifyDelimiter)),o=new oi(HS(n.pairDelimiter)),s=new $s(HS(n.textFragment)),l=Object.fromEntries(r.map(d=>[d.text,d])),u=px(e.getText(),wL(r)),m=[];for(let d of u){let g=d[0],y=new Y(e.positionAt(d.index),e.positionAt(d.index+g.length));EL(i.getContaining(y))==null&&m.push({delimiterInfo:l[g],textFragmentRange:s.getSmallestContaining(y)?.range,range:EL(o.getContaining(y))?.range??y})}return m}function EL(t){return t!=null&&!t.hasError()?t:void 0}function HS(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var ld=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],curlyBrackets:[["{","${"],"}"],tripleBacktickQuotes:[[],[]],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],backtickQuotes:["`","`"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),RL={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},markdown:{tripleBacktickQuotes:["```","```"]},ruby:{tripleDoubleQuotes:["%Q(",")"]},csharp:{doubleQuotes:[['@"','"'],['"','"']]}},e0e=Object.fromEntries(Object.values(ld)),kL={any:yl(ld),string:["tripleDoubleQuotes","tripleSingleQuotes","tripleBacktickQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function AL(t){return t!=null&&t in RL?{...ld,...RL[t]}:ld}function PL(t,e){let r=kL[t]??[t];return X9(e,r)}function X9(t,e){let r=AL(t);return e.flatMap(n=>{let[i,o,s]=r[n],{isSingleLine:l=!1}=s??{},u=gl(i)?[i]:i,m=gl(o)?[o]:o;return Yo(Jc(u,m)).map(g=>{let y=u.includes(g),x=m.includes(g);return{text:g,side:y&&!x?"left":!y&&x?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function LL(t){let e=[],r=[];for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:s},textFragmentRange:l,range:u}=n;if(o==="left")r.push(n);else{let m=Qo(r,g=>g.delimiterInfo.delimiterName===i&&eK(g.textFragmentRange,l)&&tK(s,g.range,u));if(m===-1){o==="unknown"&&r.push(n);continue}let d=r[m];r.length=m,e.push({delimiterName:i,openingDelimiterRange:d.range,closingDelimiterRange:u})}}return e}function eK(t,e){return t==null||e==null?t===e:t.isRangeEqual(e)}function tK(t,e,r){return!t||e.start.line===r.start.line}var ud=class extends Ge{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"conditional",scopeType:{type:"line"},predicate:r=>!r.domain.isEmpty};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){yt(P().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let s=_L(this.languageDefinitions.get(this.languageId),r.document,PL(this.scopeType.delimiter,this.languageId)),l=LL(s);l=rK(i,o,n,l),yield*l.map(u=>bL(r,u,this.scopeType.requireStrongContainment??!1)).sort((u,m)=>Kr(i,n,u,m))}};function rK(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var pd=class extends Ge{constructor(r,n,i,o){super();this.scopeHandlerFactory=r;this.languageDefinitions=n;this.scopeType=i;this.languageId=o;this.isHierarchical=!0}get iterationScopeType(){throw new Rt("Iteration scope for InteriorScopeHandler")}*generateScopeCandidates(r,n,i,o){let s=new Y(n,o.distalPosition),l=this.getScopeHandler();if(l==null)return;let u=l.generateScopes(r,n,i,o);for(let m of u)this.shouldYield(s,m)&&(yield nK(m))}getScopeHandler(){let r=this.languageDefinitions.get(this.languageId)?.getScopeHandler(this.scopeType),n=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:"any"},this.languageId);return this.scopeType.explicitScopeType?r==null?n:js.createFromScopeHandlers([r,n]):r==null?n:ii.createFromScopeHandlers(this.scopeHandlerFactory,this.languageId,[r,n])}shouldYield(r,n){return!this.scopeType.explicitScopeType||r.contains(n.domain)}};function nK(t){return{editor:t.editor,domain:t.domain,getTargets(e){return t.getTargets(e).flatMap(iK)}}}function iK(t){let e=t.getInterior();return e??[new Cs({editor:t.editor,isReversed:t.isReversed,fullInteriorRange:t.contentRange})]}var zs=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new Hf(this,e,r);case"word":return new Bf(this,e,r);case"token":return new Vf(this,e,r);case"identifier":return new Nf(this,e,r);case"line":return new Of(e,r);case"sentence":return new Qf(this,e,r);case"paragraph":return new qf(e,r);case"boundedParagraph":return new rd(this,e,r);case"document":return new Wf(e,r);case"nonWhitespaceSequence":return new Yf(this,e,r);case"boundedNonWhitespaceSequence":return new td(this,e,r);case"url":return new Zf(this,e,r);case"customRegex":return new Jf(this,e,r);case"glyph":return new Xf(this,e,r);case"collectionItem":return new id(this,this.languageDefinitions,r);case"surroundingPair":return new ud(this.languageDefinitions,e,r);case"surroundingPairInterior":return new cd(this,e,r);case"notebookCell":return new sd(this,this.languageDefinitions,e,r);case"interior":return new pd(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return ii.create(this,e,r);case"fallback":return js.create(this,e,r);case"conditional":return new od(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function ML(t){return new Y(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function DL(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:u})=>u.endsWith(".start")).map(({range:{end:u}})=>u).sort((u,m)=>u.compareTo(m)).at(-1),i=t.filter(({name:u})=>u.endsWith(".end")).map(({range:{start:u}})=>u).sort((u,m)=>u.compareTo(m)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(yt(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t.map(u=>u.name)}`),r=!0);let o=t.filter(({name:u})=>u.endsWith(".start")).length,s=t.filter(({name:u})=>u.endsWith(".end")).length,l=t.length-o-s;return l>0&&(o>0||s>0)&&(yt(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:u,range:m})=>u+" "+m.toString())}`),r=!0),l>1&&(yt(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:u,range:m})=>u+" "+m.toString())}`),r=!0),!r}function FL(t){if(t.hasError)return!0;let e=t.parent;for(;e!=null;){if(e.isError)return!0;if(e.hasError)return!1;if(e.previousSibling?.isError||e.nextSibling?.isError)return!0;e=e.parent}return!1}function BS(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var Fe={};IE(Fe,{BRAND:()=>LK,DIRTY:()=>ua,EMPTY_PATH:()=>cK,INVALID:()=>Se,NEVER:()=>d6,OK:()=>ar,ParseStatus:()=>Zt,Schema:()=>Ie,ZodAny:()=>bo,ZodArray:()=>Hi,ZodBigInt:()=>ma,ZodBoolean:()=>fa,ZodBranded:()=>Fl,ZodCatch:()=>Ea,ZodDate:()=>da,ZodDefault:()=>wa,ZodDiscriminatedUnion:()=>dd,ZodEffects:()=>Sn,ZodEnum:()=>va,ZodError:()=>Fr,ZodFirstPartyTypeKind:()=>_e,ZodFunction:()=>hd,ZodIntersection:()=>Ta,ZodIssueCode:()=>re,ZodLazy:()=>xa,ZodLiteral:()=>Sa,ZodMap:()=>Zs,ZodNaN:()=>Xs,ZodNativeEnum:()=>ba,ZodNever:()=>Un,ZodNull:()=>ha,ZodNullable:()=>ci,ZodNumber:()=>pa,ZodObject:()=>Cr,ZodOptional:()=>Tn,ZodParsedType:()=>ce,ZodPipeline:()=>Cl,ZodPromise:()=>wo,ZodReadonly:()=>_a,ZodRecord:()=>gd,ZodSchema:()=>Ie,ZodSet:()=>Js,ZodString:()=>vo,ZodSymbol:()=>Qs,ZodTransformer:()=>Sn,ZodTuple:()=>si,ZodType:()=>Ie,ZodUndefined:()=>ga,ZodUnion:()=>ya,ZodUnknown:()=>Ui,ZodVoid:()=>Ys,addIssueToContext:()=>oe,any:()=>HK,array:()=>$K,bigint:()=>CK,boolean:()=>jL,coerce:()=>f6,custom:()=>VL,date:()=>IK,datetimeRegex:()=>HL,defaultErrorMap:()=>Oi,discriminatedUnion:()=>GK,effect:()=>o6,enum:()=>r6,function:()=>XK,getErrorMap:()=>qs,getParsedType:()=>ai,instanceof:()=>DK,intersection:()=>KK,isAborted:()=>md,isAsync:()=>Gs,isDirty:()=>fd,isValid:()=>So,late:()=>MK,lazy:()=>e6,literal:()=>t6,makeIssue:()=>Dl,map:()=>ZK,nan:()=>FK,nativeEnum:()=>n6,never:()=>VK,null:()=>UK,nullable:()=>s6,number:()=>$L,object:()=>jK,objectUtil:()=>VS,oboolean:()=>m6,onumber:()=>p6,optional:()=>a6,ostring:()=>u6,pipeline:()=>l6,preprocess:()=>c6,promise:()=>i6,quotelessJson:()=>oK,record:()=>YK,set:()=>JK,setErrorMap:()=>sK,strictObject:()=>zK,string:()=>WL,symbol:()=>OK,transformer:()=>o6,tuple:()=>QK,undefined:()=>NK,union:()=>qK,unknown:()=>BK,util:()=>je,void:()=>WK});var je;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(let l of o)s[l]=i[l];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(let s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(je||(je={}));var VS;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(VS||(VS={}));var ce=je.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ai=t=>{switch(typeof t){case"undefined":return ce.undefined;case"string":return ce.string;case"number":return Number.isNaN(t)?ce.nan:ce.number;case"boolean":return ce.boolean;case"function":return ce.function;case"bigint":return ce.bigint;case"symbol":return ce.symbol;case"object":return Array.isArray(t)?ce.array:t===null?ce.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ce.promise:typeof Map<"u"&&t instanceof Map?ce.map:typeof Set<"u"&&t instanceof Set?ce.set:typeof Date<"u"&&t instanceof Date?ce.date:ce.object;default:return ce.unknown}};var re=je.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),oK=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Fr=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let l=n,u=0;for(;u<s.path.length;){let m=s.path[u];u===s.path.length-1?(l[m]=l[m]||{_errors:[]},l[m]._errors.push(r(s))):l[m]=l[m]||{_errors:[]},l=l[m],u++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,je.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Fr.create=t=>new Fr(t);var aK=(t,e)=>{let r;switch(t.code){case re.invalid_type:t.received===ce.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case re.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,je.jsonStringifyReplacer)}`;break;case re.unrecognized_keys:r=`Unrecognized key(s) in object: ${je.joinValues(t.keys,", ")}`;break;case re.invalid_union:r="Invalid input";break;case re.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${je.joinValues(t.options)}`;break;case re.invalid_enum_value:r=`Invalid enum value. Expected ${je.joinValues(t.options)}, received '${t.received}'`;break;case re.invalid_arguments:r="Invalid function arguments";break;case re.invalid_return_type:r="Invalid function return type";break;case re.invalid_date:r="Invalid date";break;case re.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:je.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case re.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case re.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case re.custom:r="Invalid input";break;case re.invalid_intersection_types:r="Intersection results could not be merged";break;case re.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case re.not_finite:r="Number must be finite";break;default:r=e.defaultError,je.assertNever(t)}return{message:r}},Oi=aK;var CL=Oi;function sK(t){CL=t}function qs(){return CL}var Dl=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",u=n.filter(m=>!!m).slice().reverse();for(let m of u)l=m(s,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},cK=[];function oe(t,e){let r=qs(),n=Dl({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Oi?void 0:Oi].filter(i=>!!i)});t.common.issues.push(n)}var Zt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Se;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,s=await i.value;n.push({key:o,value:s})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return Se;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},Se=Object.freeze({status:"aborted"}),ua=t=>({status:"dirty",value:t}),ar=t=>({status:"valid",value:t}),md=t=>t.status==="aborted",fd=t=>t.status==="dirty",So=t=>t.status==="valid",Gs=t=>typeof Promise<"u"&&t instanceof Promise;var fe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(fe||(fe={}));var xn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},IL=(t,e)=>{if(So(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Fr(t.common.issues);return this._error=r,this._error}}};function Le(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,l)=>{let{message:u}=t;return s.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??n??l.defaultError}:s.code!=="invalid_type"?{message:l.defaultError}:{message:u??r??l.defaultError}},description:i}}var Ie=class{get description(){return this._def.description}_getType(e){return ai(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:ai(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Zt,ctx:{common:e.parent.common,data:e.data,parsedType:ai(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Gs(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ai(e)},i=this._parseSync({data:e,path:n.path,parent:n});return IL(n,i)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ai(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return So(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>So(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ai(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(Gs(i)?i:Promise.resolve(i));return IL(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let s=e(i),l=()=>o.addIssue({code:re.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Sn({schema:this,typeName:_e.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Tn.create(this,this._def)}nullable(){return ci.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Hi.create(this)}promise(){return wo.create(this,this._def)}or(e){return ya.create([this,e],this._def)}and(e){return Ta.create(this,e,this._def)}transform(e){return new Sn({...Le(this._def),schema:this,typeName:_e.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new wa({...Le(this._def),innerType:this,defaultValue:r,typeName:_e.ZodDefault})}brand(){return new Fl({typeName:_e.ZodBranded,type:this,...Le(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Ea({...Le(this._def),innerType:this,catchValue:r,typeName:_e.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Cl.create(this,e)}readonly(){return _a.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},lK=/^c[^\s-]{8,}$/i,uK=/^[0-9a-z]+$/,pK=/^[0-9A-HJKMNP-TV-Z]{26}$/i,mK=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,fK=/^[a-z0-9_-]{21}$/i,dK=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,gK=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,hK=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,yK="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",WS,TK=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,xK=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,SK=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,vK=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,bK=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,wK=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,NL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",EK=new RegExp(`^${NL}$`);function UL(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function _K(t){return new RegExp(`^${UL(t)}$`)}function HL(t){let e=`${NL}T${UL(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function RK(t,e){return!!((e==="v4"||!e)&&TK.test(t)||(e==="v6"||!e)&&SK.test(t))}function kK(t,e){if(!dK.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function AK(t,e){return!!((e==="v4"||!e)&&xK.test(t)||(e==="v6"||!e)&&vK.test(t))}var vo=class t extends Ie{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ce.string){let o=this._getOrReturnCtx(e);return oe(o,{code:re.invalid_type,expected:ce.string,received:o.parsedType}),Se}let n=new Zt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),oe(i,{code:re.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),oe(i,{code:re.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,l=e.data.length<o.value;(s||l)&&(i=this._getOrReturnCtx(e,i),s?oe(i,{code:re.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&oe(i,{code:re.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")hK.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"email",code:re.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")WS||(WS=new RegExp(yK,"u")),WS.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"emoji",code:re.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")mK.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"uuid",code:re.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")fK.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"nanoid",code:re.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")lK.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"cuid",code:re.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")uK.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"cuid2",code:re.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")pK.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"ulid",code:re.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),oe(i,{validation:"url",code:re.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"regex",code:re.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),oe(i,{code:re.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),oe(i,{code:re.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),oe(i,{code:re.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?HL(o).test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{code:re.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?EK.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{code:re.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?_K(o).test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{code:re.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?gK.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"duration",code:re.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?RK(e.data,o.version)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"ip",code:re.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?kK(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"jwt",code:re.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?AK(e.data,o.version)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"cidr",code:re.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?bK.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"base64",code:re.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?wK.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"base64url",code:re.invalid_string,message:o.message}),n.dirty()):je.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:re.invalid_string,...fe.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...fe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...fe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...fe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...fe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...fe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...fe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...fe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...fe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...fe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...fe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...fe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...fe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...fe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...fe.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...fe.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...fe.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...fe.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...fe.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...fe.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...fe.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...fe.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...fe.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...fe.errToObj(r)})}nonempty(e){return this.min(1,fe.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};vo.create=t=>new vo({checks:[],typeName:_e.ZodString,coerce:t?.coerce??!1,...Le(t)});function PK(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=Number.parseInt(t.toFixed(i).replace(".","")),s=Number.parseInt(e.toFixed(i).replace(".",""));return o%s/10**i}var pa=class t extends Ie{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ce.number){let o=this._getOrReturnCtx(e);return oe(o,{code:re.invalid_type,expected:ce.number,received:o.parsedType}),Se}let n,i=new Zt;for(let o of this._def.checks)o.kind==="int"?je.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),oe(n,{code:re.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),oe(n,{code:re.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),oe(n,{code:re.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?PK(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),oe(n,{code:re.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),oe(n,{code:re.not_finite,message:o.message}),i.dirty()):je.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,fe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,fe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,fe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,fe.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:fe.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:fe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:fe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:fe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:fe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:fe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:fe.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:fe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:fe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:fe.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&je.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};pa.create=t=>new pa({checks:[],typeName:_e.ZodNumber,coerce:t?.coerce||!1,...Le(t)});var ma=class t extends Ie{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ce.bigint)return this._getInvalidInput(e);let n,i=new Zt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),oe(n,{code:re.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),oe(n,{code:re.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),oe(n,{code:re.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):je.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return oe(r,{code:re.invalid_type,expected:ce.bigint,received:r.parsedType}),Se}gte(e,r){return this.setLimit("min",e,!0,fe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,fe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,fe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,fe.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:fe.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:fe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:fe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:fe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:fe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:fe.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ma.create=t=>new ma({checks:[],typeName:_e.ZodBigInt,coerce:t?.coerce??!1,...Le(t)});var fa=class extends Ie{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ce.boolean){let n=this._getOrReturnCtx(e);return oe(n,{code:re.invalid_type,expected:ce.boolean,received:n.parsedType}),Se}return ar(e.data)}};fa.create=t=>new fa({typeName:_e.ZodBoolean,coerce:t?.coerce||!1,...Le(t)});var da=class t extends Ie{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ce.date){let o=this._getOrReturnCtx(e);return oe(o,{code:re.invalid_type,expected:ce.date,received:o.parsedType}),Se}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return oe(o,{code:re.invalid_date}),Se}let n=new Zt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),oe(i,{code:re.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),oe(i,{code:re.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):je.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:fe.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:fe.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};da.create=t=>new da({checks:[],coerce:t?.coerce||!1,typeName:_e.ZodDate,...Le(t)});var Qs=class extends Ie{_parse(e){if(this._getType(e)!==ce.symbol){let n=this._getOrReturnCtx(e);return oe(n,{code:re.invalid_type,expected:ce.symbol,received:n.parsedType}),Se}return ar(e.data)}};Qs.create=t=>new Qs({typeName:_e.ZodSymbol,...Le(t)});var ga=class extends Ie{_parse(e){if(this._getType(e)!==ce.undefined){let n=this._getOrReturnCtx(e);return oe(n,{code:re.invalid_type,expected:ce.undefined,received:n.parsedType}),Se}return ar(e.data)}};ga.create=t=>new ga({typeName:_e.ZodUndefined,...Le(t)});var ha=class extends Ie{_parse(e){if(this._getType(e)!==ce.null){let n=this._getOrReturnCtx(e);return oe(n,{code:re.invalid_type,expected:ce.null,received:n.parsedType}),Se}return ar(e.data)}};ha.create=t=>new ha({typeName:_e.ZodNull,...Le(t)});var bo=class extends Ie{constructor(){super(...arguments),this._any=!0}_parse(e){return ar(e.data)}};bo.create=t=>new bo({typeName:_e.ZodAny,...Le(t)});var Ui=class extends Ie{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ar(e.data)}};Ui.create=t=>new Ui({typeName:_e.ZodUnknown,...Le(t)});var Un=class extends Ie{_parse(e){let r=this._getOrReturnCtx(e);return oe(r,{code:re.invalid_type,expected:ce.never,received:r.parsedType}),Se}};Un.create=t=>new Un({typeName:_e.ZodNever,...Le(t)});var Ys=class extends Ie{_parse(e){if(this._getType(e)!==ce.undefined){let n=this._getOrReturnCtx(e);return oe(n,{code:re.invalid_type,expected:ce.void,received:n.parsedType}),Se}return ar(e.data)}};Ys.create=t=>new Ys({typeName:_e.ZodVoid,...Le(t)});var Hi=class t extends Ie{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==ce.array)return oe(r,{code:re.invalid_type,expected:ce.array,received:r.parsedType}),Se;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(s||l)&&(oe(r,{code:s?re.too_big:re.too_small,minimum:l?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(oe(r,{code:re.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(oe(r,{code:re.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>i.type._parseAsync(new xn(r,s,r.path,l)))).then(s=>Zt.mergeArray(n,s));let o=[...r.data].map((s,l)=>i.type._parseSync(new xn(r,s,r.path,l)));return Zt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:fe.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:fe.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:fe.toString(r)}})}nonempty(e){return this.min(1,e)}};Hi.create=(t,e)=>new Hi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:_e.ZodArray,...Le(e)});function Ks(t){if(t instanceof Cr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Tn.create(Ks(n))}return new Cr({...t._def,shape:()=>e})}else return t instanceof Hi?new Hi({...t._def,type:Ks(t.element)}):t instanceof Tn?Tn.create(Ks(t.unwrap())):t instanceof ci?ci.create(Ks(t.unwrap())):t instanceof si?si.create(t.items.map(e=>Ks(e))):t}var Cr=class t extends Ie{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=je.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==ce.object){let m=this._getOrReturnCtx(e);return oe(m,{code:re.invalid_type,expected:ce.object,received:m.parsedType}),Se}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof Un&&this._def.unknownKeys==="strip"))for(let m in i.data)s.includes(m)||l.push(m);let u=[];for(let m of s){let d=o[m],g=i.data[m];u.push({key:{status:"valid",value:m},value:d._parse(new xn(i,g,i.path,m)),alwaysSet:m in i.data})}if(this._def.catchall instanceof Un){let m=this._def.unknownKeys;if(m==="passthrough")for(let d of l)u.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(m==="strict")l.length>0&&(oe(i,{code:re.unrecognized_keys,keys:l}),n.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let m=this._def.catchall;for(let d of l){let g=i.data[d];u.push({key:{status:"valid",value:d},value:m._parse(new xn(i,g,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let m=[];for(let d of u){let g=await d.key,y=await d.value;m.push({key:g,value:y,alwaysSet:d.alwaysSet})}return m}).then(m=>Zt.mergeObjectSync(n,m)):Zt.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return fe.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{let i=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:fe.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:_e.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of je.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let n of je.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}deepPartial(){return Ks(this)}partial(e){let r={};for(let n of je.objectKeys(this.shape)){let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let n of je.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof Tn;)o=o._def.innerType;r[n]=o}return new t({...this._def,shape:()=>r})}keyof(){return BL(je.objectKeys(this.shape))}};Cr.create=(t,e)=>new Cr({shape:()=>t,unknownKeys:"strip",catchall:Un.create(),typeName:_e.ZodObject,...Le(e)});Cr.strictCreate=(t,e)=>new Cr({shape:()=>t,unknownKeys:"strict",catchall:Un.create(),typeName:_e.ZodObject,...Le(e)});Cr.lazycreate=(t,e)=>new Cr({shape:t,unknownKeys:"strip",catchall:Un.create(),typeName:_e.ZodObject,...Le(e)});var ya=class extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=o.map(l=>new Fr(l.ctx.common.issues));return oe(r,{code:re.invalid_union,unionErrors:s}),Se}if(r.common.async)return Promise.all(n.map(async o=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let u of n){let m={...r,common:{...r.common,issues:[]},parent:null},d=u._parseSync({data:r.data,path:r.path,parent:m});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:m}),m.common.issues.length&&s.push(m.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=s.map(u=>new Fr(u));return oe(r,{code:re.invalid_union,unionErrors:l}),Se}}get options(){return this._def.options}};ya.create=(t,e)=>new ya({options:t,typeName:_e.ZodUnion,...Le(e)});var Ni=t=>t instanceof xa?Ni(t.schema):t instanceof Sn?Ni(t.innerType()):t instanceof Sa?[t.value]:t instanceof va?t.options:t instanceof ba?je.objectValues(t.enum):t instanceof wa?Ni(t._def.innerType):t instanceof ga?[void 0]:t instanceof ha?[null]:t instanceof Tn?[void 0,...Ni(t.unwrap())]:t instanceof ci?[null,...Ni(t.unwrap())]:t instanceof Fl||t instanceof _a?Ni(t.unwrap()):t instanceof Ea?Ni(t._def.innerType):[],dd=class t extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.object)return oe(r,{code:re.invalid_type,expected:ce.object,received:r.parsedType}),Se;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(oe(r,{code:re.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Se)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let s=Ni(o.shape[e]);if(!s.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of s){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:_e.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Le(n)})}};function $S(t,e){let r=ai(t),n=ai(e);if(t===e)return{valid:!0,data:t};if(r===ce.object&&n===ce.object){let i=je.objectKeys(e),o=je.objectKeys(t).filter(l=>i.indexOf(l)!==-1),s={...t,...e};for(let l of o){let u=$S(t[l],e[l]);if(!u.valid)return{valid:!1};s[l]=u.data}return{valid:!0,data:s}}else if(r===ce.array&&n===ce.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let s=t[o],l=e[o],u=$S(s,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return r===ce.date&&n===ce.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Ta=class extends Ie{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(md(o)||md(s))return Se;let l=$S(o.value,s.value);return l.valid?((fd(o)||fd(s))&&r.dirty(),{status:r.value,value:l.data}):(oe(n,{code:re.invalid_intersection_types}),Se)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Ta.create=(t,e,r)=>new Ta({left:t,right:e,typeName:_e.ZodIntersection,...Le(r)});var si=class t extends Ie{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.array)return oe(n,{code:re.invalid_type,expected:ce.array,received:n.parsedType}),Se;if(n.data.length<this._def.items.length)return oe(n,{code:re.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Se;!this._def.rest&&n.data.length>this._def.items.length&&(oe(n,{code:re.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((s,l)=>{let u=this._def.items[l]||this._def.rest;return u?u._parse(new xn(n,s,n.path,l)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>Zt.mergeArray(r,s)):Zt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};si.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new si({items:t,typeName:_e.ZodTuple,rest:null,...Le(e)})};var gd=class t extends Ie{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.object)return oe(n,{code:re.invalid_type,expected:ce.object,received:n.parsedType}),Se;let i=[],o=this._def.keyType,s=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new xn(n,l,n.path,l)),value:s._parse(new xn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?Zt.mergeObjectAsync(r,i):Zt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Ie?new t({keyType:e,valueType:r,typeName:_e.ZodRecord,...Le(n)}):new t({keyType:vo.create(),valueType:e,typeName:_e.ZodRecord,...Le(r)})}},Zs=class extends Ie{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.map)return oe(n,{code:re.invalid_type,expected:ce.map,received:n.parsedType}),Se;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([l,u],m)=>({key:i._parse(new xn(n,l,n.path,[m,"key"])),value:o._parse(new xn(n,u,n.path,[m,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let u of s){let m=await u.key,d=await u.value;if(m.status==="aborted"||d.status==="aborted")return Se;(m.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(m.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let u of s){let m=u.key,d=u.value;if(m.status==="aborted"||d.status==="aborted")return Se;(m.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(m.value,d.value)}return{status:r.value,value:l}}}};Zs.create=(t,e,r)=>new Zs({valueType:e,keyType:t,typeName:_e.ZodMap,...Le(r)});var Js=class t extends Ie{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.set)return oe(n,{code:re.invalid_type,expected:ce.set,received:n.parsedType}),Se;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(oe(n,{code:re.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(oe(n,{code:re.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function s(u){let m=new Set;for(let d of u){if(d.status==="aborted")return Se;d.status==="dirty"&&r.dirty(),m.add(d.value)}return{status:r.value,value:m}}let l=[...n.data.values()].map((u,m)=>o._parse(new xn(n,u,n.path,m)));return n.common.async?Promise.all(l).then(u=>s(u)):s(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:fe.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:fe.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Js.create=(t,e)=>new Js({valueType:t,minSize:null,maxSize:null,typeName:_e.ZodSet,...Le(e)});var hd=class t extends Ie{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.function)return oe(r,{code:re.invalid_type,expected:ce.function,received:r.parsedType}),Se;function n(l,u){return Dl({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qs(),Oi].filter(m=>!!m),issueData:{code:re.invalid_arguments,argumentsError:u}})}function i(l,u){return Dl({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qs(),Oi].filter(m=>!!m),issueData:{code:re.invalid_return_type,returnTypeError:u}})}let o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof wo){let l=this;return ar(async function(...u){let m=new Fr([]),d=await l._def.args.parseAsync(u,o).catch(x=>{throw m.addIssue(n(u,x)),m}),g=await Reflect.apply(s,this,d);return await l._def.returns._def.type.parseAsync(g,o).catch(x=>{throw m.addIssue(i(g,x)),m})})}else{let l=this;return ar(function(...u){let m=l._def.args.safeParse(u,o);if(!m.success)throw new Fr([n(u,m.error)]);let d=Reflect.apply(s,this,m.data),g=l._def.returns.safeParse(d,o);if(!g.success)throw new Fr([i(d,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:si.create(e).rest(Ui.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||si.create([]).rest(Ui.create()),returns:r||Ui.create(),typeName:_e.ZodFunction,...Le(n)})}},xa=class extends Ie{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};xa.create=(t,e)=>new xa({getter:t,typeName:_e.ZodLazy,...Le(e)});var Sa=class extends Ie{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return oe(r,{received:r.data,code:re.invalid_literal,expected:this._def.value}),Se}return{status:"valid",value:e.data}}get value(){return this._def.value}};Sa.create=(t,e)=>new Sa({value:t,typeName:_e.ZodLiteral,...Le(e)});function BL(t,e){return new va({values:t,typeName:_e.ZodEnum,...Le(e)})}var va=class t extends Ie{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return oe(r,{expected:je.joinValues(n),received:r.parsedType,code:re.invalid_type}),Se}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return oe(r,{received:r.data,code:re.invalid_enum_value,options:n}),Se}return ar(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};va.create=BL;var ba=class extends Ie{_parse(e){let r=je.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ce.string&&n.parsedType!==ce.number){let i=je.objectValues(r);return oe(n,{expected:je.joinValues(i),received:n.parsedType,code:re.invalid_type}),Se}if(this._cache||(this._cache=new Set(je.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let i=je.objectValues(r);return oe(n,{received:n.data,code:re.invalid_enum_value,options:i}),Se}return ar(e.data)}get enum(){return this._def.values}};ba.create=(t,e)=>new ba({values:t,typeName:_e.ZodNativeEnum,...Le(e)});var wo=class extends Ie{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.promise&&r.common.async===!1)return oe(r,{code:re.invalid_type,expected:ce.promise,received:r.parsedType}),Se;let n=r.parsedType===ce.promise?r.data:Promise.resolve(r.data);return ar(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};wo.create=(t,e)=>new wo({type:t,typeName:_e.ZodPromise,...Le(e)});var Sn=class extends Ie{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_e.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{oe(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);if(n.common.async)return Promise.resolve(s).then(async l=>{if(r.value==="aborted")return Se;let u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?Se:u.status==="dirty"?ua(u.value):r.value==="dirty"?ua(u.value):u});{if(r.value==="aborted")return Se;let l=this._def.schema._parseSync({data:s,path:n.path,parent:n});return l.status==="aborted"?Se:l.status==="dirty"?ua(l.value):r.value==="dirty"?ua(l.value):l}}if(i.type==="refinement"){let s=l=>{let u=i.refinement(l,o);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Se:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Se:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!So(s))return Se;let l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>So(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:r.value,value:l})):Se);je.assertNever(i)}};Sn.create=(t,e,r)=>new Sn({schema:t,typeName:_e.ZodEffects,effect:e,...Le(r)});Sn.createWithPreprocess=(t,e,r)=>new Sn({schema:e,effect:{type:"preprocess",transform:t},typeName:_e.ZodEffects,...Le(r)});var Tn=class extends Ie{_parse(e){return this._getType(e)===ce.undefined?ar(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Tn.create=(t,e)=>new Tn({innerType:t,typeName:_e.ZodOptional,...Le(e)});var ci=class extends Ie{_parse(e){return this._getType(e)===ce.null?ar(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ci.create=(t,e)=>new ci({innerType:t,typeName:_e.ZodNullable,...Le(e)});var wa=class extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===ce.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};wa.create=(t,e)=>new wa({innerType:t,typeName:_e.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Le(e)});var Ea=class extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Gs(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Fr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Fr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Ea.create=(t,e)=>new Ea({innerType:t,typeName:_e.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Le(e)});var Xs=class extends Ie{_parse(e){if(this._getType(e)!==ce.nan){let n=this._getOrReturnCtx(e);return oe(n,{code:re.invalid_type,expected:ce.nan,received:n.parsedType}),Se}return{status:"valid",value:e.data}}};Xs.create=t=>new Xs({typeName:_e.ZodNaN,...Le(t)});var LK=Symbol("zod_brand"),Fl=class extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Cl=class t extends Ie{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Se:o.status==="dirty"?(r.dirty(),ua(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Se:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:_e.ZodPipeline})}},_a=class extends Ie{_parse(e){let r=this._def.innerType._parse(e),n=i=>(So(i)&&(i.value=Object.freeze(i.value)),i);return Gs(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};_a.create=(t,e)=>new _a({innerType:t,typeName:_e.ZodReadonly,...Le(e)});function OL(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function VL(t,e={},r){return t?bo.create().superRefine((n,i)=>{let o=t(n);if(o instanceof Promise)return o.then(s=>{if(!s){let l=OL(e,n),u=l.fatal??r??!0;i.addIssue({code:"custom",...l,fatal:u})}});if(!o){let s=OL(e,n),l=s.fatal??r??!0;i.addIssue({code:"custom",...s,fatal:l})}}):bo.create()}var MK={object:Cr.lazycreate},_e;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(_e||(_e={}));var DK=(t,e={message:`Input not instance of ${t.name}`})=>VL(r=>r instanceof t,e),WL=vo.create,$L=pa.create,FK=Xs.create,CK=ma.create,jL=fa.create,IK=da.create,OK=Qs.create,NK=ga.create,UK=ha.create,HK=bo.create,BK=Ui.create,VK=Un.create,WK=Ys.create,$K=Hi.create,jK=Cr.create,zK=Cr.strictCreate,qK=ya.create,GK=dd.create,KK=Ta.create,QK=si.create,YK=gd.create,ZK=Zs.create,JK=Js.create,XK=hd.create,e6=xa.create,t6=Sa.create,r6=va.create,n6=ba.create,i6=wo.create,o6=Sn.create,a6=Tn.create,s6=ci.create,c6=Sn.createWithPreprocess,l6=Cl.create,u6=()=>WL().optional(),p6=()=>$L().optional(),m6=()=>jL().optional(),f6={string:t=>vo.create({...t,coerce:!0}),number:t=>pa.create({...t,coerce:!0}),boolean:t=>fa.create({...t,coerce:!0}),bigint:t=>ma.create({...t,coerce:!0}),date:t=>da.create({...t,coerce:!0})};var d6=Se;function jS(t,e){return new Y(t.row,t.column,e.row,e.column)}function zL(t){let e=t.operands.map(zS).join(" ");return`(#${t.operator} ${e})`}function zS(t){return t.type==="capture"?`@${t.name}`:t.value}function qL(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>g6(t,r))}function g6(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=zS(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var wt=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof yd&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:qL(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new yd(n.name);return i}else return n.value})}},yd=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};function qS(t,e){if(t.parent==null)throw Error("Node has no parent");let r=t.parent.walk(),n=r.gotoFirstChild(),i=!0;for(;n;){if(r.currentFieldName===e){if(r.currentNode.id===t.id)return i;i=!i}n=r.gotoNextSibling()}throw Error(`Node not found in parent for field: ${e}`)}var GS=Fe.object({type:Fe.literal("string"),value:Fe.string()}),me={node:Fe.object({type:Fe.literal("capture"),name:Fe.string()}),string:GS,integer:GS.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:Fe.ZodIssueCode.custom,message:"Expected an integer"}),Fe.NEVER):{type:"integer",value:r}}),boolean:GS.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:Fe.ZodIssueCode.custom,message:"Expected true or false"}),Fe.NEVER))};var KS=class extends wt{constructor(){super(...arguments);this.name="even?";this.schema=Fe.tuple([me.node,me.string])}run({node:r},n){return qS(r,n)}},QS=class extends wt{constructor(){super(...arguments);this.name="odd?";this.schema=Fe.tuple([me.node,me.string])}run({node:r},n){return!qS(r,n)}},YS=class extends wt{constructor(){super(...arguments);this.name="text?";this.schema=Fe.tuple([me.node,me.string]).rest(me.string)}run({document:r,range:n},...i){return i.includes(r.getText(n))}},ZS=class extends wt{constructor(){super(...arguments);this.name="type?";this.schema=Fe.tuple([me.node,me.string]).rest(me.string)}run({node:r},...n){return n.includes(r.type)}},JS=class extends wt{constructor(){super(...arguments);this.name="not-type?";this.schema=Fe.tuple([me.node,me.string]).rest(me.string)}run({node:r},...n){return!n.includes(r.type)}},XS=class extends wt{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=Fe.tuple([me.node,me.string]).rest(me.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},ev=class extends wt{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=Fe.tuple([me.node,me.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},tv=class extends wt{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=Fe.tuple([me.node,me.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},rv=class extends wt{constructor(){super(...arguments);this.name="child-range!";this.schema=Fe.union([Fe.tuple([me.node,me.integer]),Fe.tuple([me.node,me.integer,me.integer]),Fe.tuple([me.node,me.integer,me.integer,me.boolean]),Fe.tuple([me.node,me.integer,me.integer,me.boolean,me.boolean])])}run(r,n,i,o,s){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let u=l[n],m=l[i];return r.range=jS(o?u.endPosition:u.startPosition,s?m.startPosition:m.endPosition),!0}},nv=class extends wt{constructor(){super(...arguments);this.name="character-range!";this.schema=Fe.union([Fe.tuple([me.node,me.integer]),Fe.tuple([me.node,me.integer,me.integer])])}run(r,n,i){return r.range=new Y(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},iv=class extends wt{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=Fe.tuple([me.node,me.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[u,m]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new Y(i.positionAt(d+u),i.positionAt(d+m)),!0}},ov=class extends wt{constructor(){super(...arguments);this.name="grow-to-named-siblings!";this.schema=Fe.union([Fe.tuple([me.node]),Fe.tuple([me.node,me.string])])}run(r,n){let{node:i,range:o,document:s}=r;if(i.parent==null)throw Error("Node has no parent");let{children:l}=i.parent,u=l.findIndex(d=>d.id===i.id),m=null;if(u===-1)throw Error("Node not found in parent");for(let d=u+1;d<l.length;++d){let g=l[d];if(!g.isNamed)break;let y=jS(g.startPosition,g.endPosition);if(n!=null&&n===s.getText(y))break;m=y.end}return m!=null&&(r.range=new Y(o.start,m)),!0}},av=class extends wt{constructor(){super(...arguments);this.name="trim-end!";this.schema=Fe.tuple([me.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),s=o.length-o.trimEnd().length;return s>0&&(r.range=new Y(i.start,ak(n,i.end,-s))),!0}},sv=class extends wt{constructor(){super(...arguments);this.name="document-range!";this.schema=Fe.tuple([me.node]).rest(me.node)}run(...r){for(let n of r)n.range=n.document.range;return!0}},cv=class extends wt{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=Fe.tuple([me.node]).rest(me.node)}allowMissingNode(){return!0}run(...r){for(let n of r)n.allowMultiple=!0;return!0}},lv=class extends wt{constructor(){super(...arguments);this.name="log!";this.schema=Fe.tuple([me.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},uv=class extends wt{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=Fe.tuple([me.node,me.string])}run(r,n){return r.insertionDelimiter=n,!0}},pv=class extends wt{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=Fe.tuple([me.node,me.node,me.string,me.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},mv=class extends wt{constructor(){super(...arguments);this.name="empty-single-multi-delimiter!";this.schema=Fe.tuple([me.node,me.node,me.string,me.string,me.string])}run(r,n,i,o,s){let l=!n.node.children.some(u=>u.isNamed);return r.insertionDelimiter=l?i:n.range.isSingleLine?o:s,!0}},GL=[new lv,new KS,new QS,new YS,new ZS,new JS,new av,new sv,new XS,new ev,new rv,new nv,new iv,new ov,new cv,new uv,new pv,new mv,new tv];function KL(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((s,l)=>{let u=GL.find(({name:d})=>d===s.operator);if(u==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${s.operator}"`});return}let m=u.createPredicate(s.operands);if(!m.success){e.push(...m.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(m.predicate)}),r.push(o)}),{errors:e,predicates:r}}function QL(t,e){let{errors:r,predicates:n}=KL(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${zL(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");yt(P().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(P().runMode==="test")throw new Error("Invalid predicates")}return n}function fv(t){return{row:t.line,column:t.character}}function YL(t){return t.map(e=>({...e,range:dv(e),name:h6(e)}))}function dv(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function h6(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var gv=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&ZL(this.startPosition,r)&&ZL(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function ZL(t,e){return t==null||e==null?t===e:t.isEqual(e)}var Ra=new gv;var Il=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=P().runMode!=="production"}static create(e,r,n){let i=QL(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>BS(r)===e)}matches(e,r,n){if(!Ra.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);Ra.update(e,r,n,i)}return Ra.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let s of i){let l=this.createMutableQueryMatch(e,s);this.runPredicates(l)&&o.push(this.createQueryMatch(l))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?fv(r):void 0,endPosition:n!=null?fv(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.patternIndex,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:ML(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>FL(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=BS(i.name),s=dv(i),l=n.get(o);if(l==null){let u=[i],m={...i,name:o,range:s,hasError:()=>u.some(d=>d.hasError())};r.push(m),n.set(o,{acc:m,captures:u})}else l.acc.range=l.acc.range.union(s),l.acc.allowMultiple=l.acc.allowMultiple||i.allowMultiple,l.acc.insertionDelimiter=l.acc.insertionDelimiter??i.insertionDelimiter,l.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!DL(YL(r.captures),P().messages)&&P().runMode==="test")throw new Error("Invalid captures")}};var XL="_",y6=[XL,"interior",...ta],T6=["prefix","leading","trailing"],x6=["startOf","endOf","start.startOf","start.endOf","end.startOf","end.endOf"],S6=["domain","removal","iteration","iteration.domain"],JL=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],ka=new Set;for(let t of y6){if(t!==XL){ka.add(t);for(let e of JL)ka.add(`${t}.${e}`)}for(let e of T6){ka.add(`${t}.${e}`);for(let r of x6)ka.add(`${t}.${e}.${r}`)}for(let e of S6){ka.add(`${t}.${e}`);for(let r of JL)ka.add(`${t}.${e}.${r}`)}}var v6=/^(?!;;).*(?<!"\w*)@([\w.]*)/gm;function eM(t,e){let r=e.matchAll(v6),n=[];for(let o of r){let s=o[1];if(!(s.length>1&&!s.includes(".")&&s.startsWith("_"))&&!ka.has(s)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${s}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(yt(P().messages,"validateQueryCaptures.invalidCaptureName",i),P().runMode==="test")throw new Error(i)}var Td=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await b6(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let s=n.createQuery(i,o);if(s==null)throw Error(`Could not create Tree sitter query for language ${i}`);let l=Il.create(i,n,s);return new t(l)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new zf(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let s=o.name;n[s]==null&&(n[s]=[]),n[s].push(o)}return n}};async function b6(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,s]of Object.entries(n)){if(s!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(yt(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&eM(o,l),n[o]=l,pn(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,u=>{let m=u[1];i&&w6(t,o,m,u[0]),n[m]=n[m]??null})}return Object.values(n).join(`
`)}function w6(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(yt(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(yt(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var tM=Symbol("LANGUAGE_UNDEFINED"),xd=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new nr;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&Ra.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:s})=>this.loadLanguage(s.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(yt(this.ide.messages,"Failed to load language definitions",Dn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await Td.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??tM;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),Ra.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===tM?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var Sd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e,r){for(let n of this.nestedStages)try{return n.run(e,r)}catch{continue}throw new Error("No modifier could be applied")}};var ec=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e,r){if(this.shouldModify(e))try{return this.nestedStage.run(e,r).map(n=>n.withThatTarget(e))}catch(n){if(!this.suppressErrors)throw n}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},Eo=class extends ec{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},vd=class extends ec{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},tc=class extends ec{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},rc=class extends ec{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function rM(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function nc(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&rM(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.textualType==="line"&&r.textualType==="line"?new hr({editor:e.editor,isReversed:t,contentRange:Ms(e,r,n,i)}):new Vt({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:Ls(e,r,n,i),textualType:n&&i&&e.textualType==="token"&&r.textualType==="token"?"token":"character"})}function bd(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[s]=i,l=s.contentRange.start.isAfterOrEqual(o.contentRange.start),[u,m]=l?[o,s]:[s,o];return[nc(t,u,m,!0,!0)]}function wd(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,s]=i;return n==="forward"?s:n==="backward"||(t.isPreferredOver?.(o,s)??!1)?o:s}default:throw new Error("Expected no more than 2 scope candidates")}}function Ed(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:s}}=t;if(s.isEqual(o)){let m=wd(e,i,o);return m==null||(r>0&&(m=hv(e,i,m.domain.end,"forward",r,!0)),m==null)?void 0:m.getTargets(n)}let l=hv(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(s))return l.getTargets(n);let u=hv(e,i,s,"backward",r);if(u!=null)return bd(n,l,u)}function hv(t,e,r,n,i,o=!1){let s=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(s===i)return l;s+=1}}var ic=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.maybeCreate(r,e.editor.document.languageId);if(i==null)throw new Rt(r.type);let o=Ed(e,i,n);if(o==null)throw new Rt(r.type);return o}};var _d=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n}=this.modifier,{editor:i,isReversed:o}=e,s=this.scopeHandlerFactory.maybeCreate(n,i.document.languageId);if(s==null)throw new Rt(n.type);let l;if(e.hasExplicitRange&&(l=nM(s,i,e.contentRange),l.length===1&&l[0].domain.contains(e.contentRange)&&!e.hasExplicitScopeType&&!r.multipleTargets&&(l=void 0)),l==null&&(l=this.getDefaultIterationRange(s,this.scopeHandlerFactory,e).flatMap(u=>nM(s,i,u))),l.length===0)throw new Rt(n.type);return l.flatMap(u=>u.getTargets(o))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=Ed(n,i);if(o==null)throw new Rt(`iteration scope for ${e.scopeType.type}`);return o.map(s=>s.contentRange)}};function nM(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var Rd=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},kd=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Ad=class{run(){return Tf(P()).map(e=>new gf({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var Pd=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new yv(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},yv=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return _6(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return It(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return R6(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[_o(e,r,n,i)];let s=Sv(e,r);return[_o(n?iM(this.modifierStageFactory,e,o,s?"backward":"forward"):e,i?iM(this.modifierStageFactory,r,o,s?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n,i=!1;e.type==="implicit"?(r=new Ad,n=[]):(r=this.markStageFactory.create(e.mark),n=Tv(this.modifierStageFactory,e.modifiers),i=E6(e));let o=r.run(),[s,l]=this.getPreAndPostStages(i),u=[...s,...n,...this.opts.actionFinalStages,...l];return xv(u,o)}getPreAndPostStages(e){if(this.opts.noAutomaticTokenExpansion)return[[],[]];let r=new rc(this.modifierStageFactory);return e?[[r],[]]:[[],[r]]}};function E6(t){return t.modifiers.length>0&&t.modifiers.every(({type:e})=>e==="startOf"||e==="endOf")}function Tv(t,e){return e.map(t.create).reverse()}function xv(t,e){return t.forEach(r=>{let n={multipleTargets:e.length>1};e=e.flatMap(i=>r.run(i,n))}),e}function iM(t,e,r,n){let i={multipleTargets:!1};return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e,i)[0]}function Sv(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function _6(t){return SA(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function oM(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function _o(t,e,r=!1,n=!1){oM(t,e);let i=Sv(t,e);return nc(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function R6(t,e,r,n){oM(t,e);let i=Sv(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),m=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let g=l;;g+=o){let y=new Y(g,t.contentRange.start.character,g,t.contentRange.end.character);if(d.push(new Xe({editor:t.editor,isReversed:t.isReversed,contentRange:y,insertionDelimiter:t.insertionDelimiter})),g===m)return d}}var Ld=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getModifierStages(),n=xv(r,[e]),i=this.modifier.type==="extendThroughStartOf";return n.map(o=>new hf({editor:e.editor,isReversed:i,inputTarget:e,modifiedTarget:o,isHead:i}))}getModifierStages(){return this.modifier.modifiers!=null?Tv(this.modifierStageFactory,this.modifier.modifiers):[new vv(this.modifierStageFactory,this.modifier)]}},vv=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.getContainingLine(e,r),i=this.getContainingPairInterior(e,r),o=i!=null?n.contentRange.intersection(i.contentRange):null;return o==null||o.isEmpty?[n]:[new Xe({editor:e.editor,isReversed:e.isReversed,contentRange:o})]}getContainingPairInterior(e,r){try{return this.getContaining(e,r,{type:"surroundingPairInterior",delimiter:"any"})[0]}catch(n){if(n instanceof Rt)return;throw n}}getContainingLine(e,r){return this.getContaining(e,r,{type:"line"})[0]}getContaining(e,r,n){return this.modifierStageFactory.create({type:"containingScope",scopeType:n}).run(e,r)}};var li=class extends Error{constructor(e,r){let n=r!=null?` #${r+1}`:"";super(`Scope '${e.type}'${n} is out of range`),this.name="OutOfRangeError"}};function aM(t,e,r,n){return bv(t,e,r,n),e.slice(r,n+1)}function bv(t,e,r,n){if(r<0||r>=e.length)throw new li(t,r);if(n<0||n>=e.length)throw new li(t,n)}var oc=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e,r){let n=new rc(this.modifierStageFactory).run(e,r)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(n,r);case"ordinalScope":return this.handleOrdinalScope(n,r,this.modifier);case"relativeScope":return this.handleRelativeScope(n,r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e,r){return Array.from(vm(this.getEveryRanges(e),([n,i])=>this.getTargetIterable(e,r,n,i,"forward")))}handleOrdinalScope(e,r,{start:n,length:i,scopeType:o}){return this.getEveryRanges(e).flatMap(([s,l])=>sM(o,this.getTargetIterable(e,r,s,l,n>=0?"forward":"backward"),n>=0?n:-(i+n),i))}handleRelativeScope(e,r,{direction:n,offset:i,length:o,scopeType:s}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(u=>{let{editor:m}=u,d=n==="forward"?new Y(i===0?u.contentRange.start:u.contentRange.end,m.document.range.end):new Y(m.document.range.start,i===0?u.contentRange.end:u.contentRange.start);return sM(s,this.getTargetIterable(e,r,m,d,n),i===0?0:i-1,o)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i,o){let s=Kt(yn(new RegExp($r(e.contentText),"g"),n,i,o),u=>new Xe({contentRange:u,editor:n,isReversed:!1,textualType:"character"})),l=k6(e);if(l!=null){let u=this.modifierStageFactory.create({type:"containingScope",scopeType:l});return xm(Kt(s,m=>{try{let d=u.run(m,r);return d.length===1&&d[0].contentRange.isRangeEqual(m.contentRange)?d[0]:null}catch{return null}}),m=>m!=null)}return s}};function k6(t){switch(t.textualType){case"line":case"token":case"word":return{type:t.textualType};default:return null}}function sM(t,e,r,n){Array.from(al(r,e));let i=Array.from(al(n,e));if(i.length<n)throw new li(t,r+n-1);return i}var Md=class{constructor(e,r){this.modifierHandlerFactory=e;this.modifier=r}run(e,r){let n=e.getInterior();return n??this.modifierHandlerFactory.create({type:"containingScope",scopeType:{type:"interior",explicitScopeType:e.hasExplicitScopeType}}).run(e,r)}},Dd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=wv(this.modifierStageFactory)}run(e,r){return this.containingSurroundingPairIfNoBoundaryStage.run(e,r).flatMap(n=>n.getBoundary())}};function wv(t){return new vd(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var ui={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},Ev={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var Fd=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},Cd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(Ev).run(e,r).map(n=>{let i=n.getLeadingDelimiterTarget();if(i==null)throw new Fd("leading");return i})}},Id=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(Ev).run(e,r).map(n=>{let i=n.getTrailingDelimiterTarget();if(i==null)throw new Fd("trailing");return i})}};function Od(t,e,r,n,i){return bv(t,r,n,i),n===i?r[n]:nc(e,r[n],r[i],!0,!0)}function Nd(t,e,r,n){return t.create({type:"everyScope",scopeType:n}).run(e,r)}var Ud=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=Nd(this.modifierStageFactory,e,r,this.modifier.scopeType),i=this.modifier.start+(this.modifier.start<0?n.length:0),o=i+this.modifier.length-1;return this.modifier.isEvery?aM(this.modifier.scopeType,n,i,o):[Od(this.modifier.scopeType,e.isReversed,n,i,o)]}};var Hd=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new ho(r):new Xe({...r,textualType:"character"})]}},Bd=class extends Hd{getContentRange(e){return e.start.toEmptyRange()}},Vd=class extends Hd{getContentRange(e){return e.end.toEmptyRange()}};var Wd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,n=new ic(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:r});try{return n.run(e)}catch(s){if(!(s instanceof Rt))throw s}let i=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),o=A6(e,i);if(o==null)throw Error(`No scopes found for scope type: ${r.type}`);return o}};function A6(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=cM(r,i),s=cM(n,i),l=o.distance<s.distance?o.scope:s.scope;return l?.getTargets(t.isReversed)}function cM(t,e){let r,n=1/0;for(let i of t){let o=Math.min(lM(e,i.domain.start),lM(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function lM(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var $d=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.modifierStageFactory.create(this.modifier.anchor),i=this.modifierStageFactory.create(this.modifier.active),o=n.run(e,r),s=i.run(e,r);if(o.length!==1||s.length!==1)throw new Error("Expected single anchor and active target");return[_o(o[0],s[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var jd=class{constructor(e){this.modifier=e}run(e){return[new ho({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var zd=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function uM(t,e,r,n){let i=Nd(t,D6(r),n,e.scopeType),o=M6(r.contentRange,i);return P6(e,r,i,o)}function P6(t,e,r,n){let i=t.direction==="forward",o=L6(t,e.contentRange,r,i,n),s=i?o+t.length-1:o-t.length+1,l=Math.min(o,s),u=Math.max(o,s);return[Od(t.scopeType,e.isReversed,r,l,u)]}function L6(t,e,r,n,i){let o=t.offset===0;if(i==null){let u=n?r.findIndex(m=>m.contentRange.start.isAfter(e.start)):Qo(r,m=>m.contentRange.start.isBefore(e.start));if(u===-1)throw new li(t.scopeType);return o?u:n?u+t.offset-1:u-t.offset+1}let s=i.start,l=i.end;if(o){let u=l-s+1;if(u>t.length)throw new zd(t.length,u,t.scopeType.type);return n?s:l}return n?l+t.offset:s-t.offset}function M6(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function D6(t){return new Vt({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var qd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let n=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(n==null)return uM(this.modifierStageFactory,this.modifier,e,r);let i=Array.from(this.modifier.offset===0?F6(n,e,this.modifier):C6(n,e,this.modifier));if(i.length<this.modifier.length)throw new li(this.modifier.scopeType,this.modifier.offset+this.modifier.length-1);let{isReversed:o}=e;return this.modifier.isEvery?i.flatMap(s=>s.getTargets(o)):bd(o,i[0],i[i.length-1])}};function F6(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s}=r,l=wd(t,n,s==="forward"?i.start:i.end,s)?.domain;if(l==null)throw new Rt(r.scopeType.type);return al(o,t.generateScopes(n,s==="forward"?l.start:l.end,s,{skipAncestorScopes:!0}))}function C6(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s,offset:l}=r,u=s==="forward"?i.end:i.start,m=i.isEmpty?"disallowed":"disallowedIfStrict";return pk(t.generateScopes(n,u,s,{containment:m,skipAncestorScopes:!0}),l-1,l+o-1)}var Gd=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new Xe({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};var ac=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new Bd;case"endOf":return new Vd;case"extendThroughStartOf":case"extendThroughEndOf":return new Ld(this,e);case"toRawSelection":return new jd(e);case"interiorOnly":return new Md(this,e);case"excludeInterior":return new Dd(this,e);case"leading":return new Cd(this,e);case"trailing":return new Id(this,e);case"visible":return new Gd(e);case"containingScope":return new ic(this,this.scopeHandlerFactory,e);case"preferredScope":return new Wd(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new oc(this,this.storedTargets,e):new _d(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new oc(this,this.storedTargets,e):new Ud(this,e);case"relativeScope":return e.scopeType.type==="instance"?new oc(this,this.storedTargets,e):new qd(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new Rd(e);case"keepEmptyFilter":return new kd(e);case"cascading":return new Sd(this,e);case"modifyIfUntyped":return new Eo(this,e);case"range":return new $d(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}};async function pM(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Ne({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=yl(r),s=o.map(m=>{let d=r[m],g=I6(d);return mM(e.document,g.selections,g.behavior)});n||s.push(mM(e.document,e.selections,1));let l=await("edits"in i?U6(t,e,i.edits,s):fM(t,i.callback,e.document,s));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((m,d)=>[m,l[d]]))}function mM(t,e,r){return e.map(n=>O6(t,n,n instanceof pt?!n.isReversed:!0,r))}function I6(t){return"selections"in t?t:{selections:t,behavior:1}}function O6(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function N6(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new pt(r,n):new pt(n,r)))}async function fM(t,e,r,n){let i=t.registerRangeInfoList(r,ct(n));return await e(),i(),N6(n)}async function U6(t,e,r,n){return await fM(t,async()=>{if(!await pM(t,e,r))throw new Error("Could not apply edits")},e.document,n)}var Kd=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await $e(P(),e,"pendingModification0"),{thatSelections:ct(await dt(e,async(n,i)=>{let o=i.map(({contentRange:m})=>m),s=H6(n,o),l=P().getEditableTextEditor(n),{contentRanges:u}=await Ne({rangeUpdater:this.rangeUpdater,editor:l,edits:s,selections:{contentRanges:o}});return It(i,u).map(([m,d])=>({editor:m.editor,selection:d.toSelection(m.isReversed)}))}))}}};function H6(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,s=r.lineAt(o),l=s.text.slice(0,s.rangeTrimmed?.start?.character??s.range.start.character),u=s.text.slice(0,o.character).search(/\s+$/),m=u>-1?new Y(new ke(s.lineNumber,u),o):o.toEmptyRange();n.push({range:m,text:`
`+l,isReplace:!m.isEmpty})}return n}function Qd(t){return t.length<2?t:yP(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,s)=>o.contentRange.start.compareTo(s.contentRange.start));let i=!0;for(;i;)[n,i]=B6(n);return n})}function B6(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!V6(r[r.length-1],n)?(e.push(dM(r)),r=[n]):r.push(n)}),e.push(dM(r)),[e,e.length!==t.length]}function dM(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return _o(e,r)}function V6(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Ol=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([$e(P(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),$e(P(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((s,l)=>{let u=r[l];if((s==null||u==null)&&!o)throw new Error("Targets must have same number of args");if(u!=null){let m;o?m=e.map((d,g)=>{let y=d.contentText,x=(u.isRaw?null:u.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return g>0&&x!=null?x+y:y}).join(""):m=s.contentText,i.push({edit:u.constructChangeEdit(m),editor:u.editor,originalTarget:u.target,isSource:!1})}else u=r[0];n.includes(s)||(n.push(s),this.type==="bring"&&i.push({edit:s.toDestination("to").constructChangeEdit(u.target.contentText),editor:s.editor,originalTarget:s,isSource:!0}))}),this.type==="move"&&Qd(n).forEach(s=>{i.push({edit:s.constructRemovalEdit(),editor:s.editor,originalTarget:s,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return ct(await Ci(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),s=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),u=s.map(({edit:x})=>x.range),m=P().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:g}=await Ne({rangeUpdater:this.rangeUpdater,editor:m,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:u,behavior:0}}}),y=[...this.getMarks(o,d),...this.getMarks(s,g)];return y.sort((x,E)=>n.findIndex(w=>w.originalTarget===x.target)-n.findIndex(w=>w.originalTarget===E.target)),y}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],s=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:s.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>gn(n,e.find(i=>i.target===n).selection);return Promise.all([$e(P(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),$e(P(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function gM(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var Yd=class extends Ol{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){r=gM(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},Zd=class extends Ol{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:W6};this.run=this.run.bind(this)}async run(r,n){r=gM(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},Jd=class extends Ol{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,s)=>{let l=n[s];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function W6(t){return t.getRemovalHighlightRange()}var Nl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){Lr(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Ul=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=Mt(e),n=e.map(o=>new Xe({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await P().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var sc=t=>new Vt({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var cc=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await $e(P(),e,"referenced"),r.ensureSingleEditor&&Mt(e),r.ensureSingleTarget&&Lr(e);let n=P().activeEditableTextEditor,i=r.setSelection?hP:dt,o=ct(await i(e,(s,l)=>this.runForEditor(r,s,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=P().getEditableTextEditor(r),o=r.selections,s=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:u,targetSelections:m}=await Ne({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(u),r.document.version===s?n:m.map(d=>sc({editor:r,selection:d}))}};var Dt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new cc(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=P().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,s)=>$6(o,i?s.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},Xd=class extends Dt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},eg=class extends Dt{constructor(){super(...arguments);this.command="toggleLineComment"}},tg=class extends Dt{constructor(){super(...arguments);this.command="indentLine"}},rg=class extends Dt{constructor(){super(...arguments);this.command="outdentLine"}},ng=class extends Dt{constructor(){super(...arguments);this.command="fold"}},ig=class extends Dt{constructor(){super(...arguments);this.command="unfold"}},og=class extends Dt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},ag=class extends Dt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},sg=class extends Dt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},cg=class extends Dt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},lg=class extends Dt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},ug=class extends Dt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},pg=class extends Dt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},mg=class extends Dt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}},fg=class extends Dt{constructor(){super(...arguments);this.command="gitAccept";this.ensureSingleTarget=!0}},dg=class extends Dt{constructor(){super(...arguments);this.command="gitRevert";this.ensureSingleTarget=!0}},gg=class extends Dt{constructor(){super(...arguments);this.command="gitStage";this.ensureSingleTarget=!0}},hg=class extends Dt{constructor(){super(...arguments);this.command="gitUnstage";this.ensureSingleTarget=!0}};function $6(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"gitAccept":return t.gitAccept(e?.[0]);case"gitRevert":return t.gitRevert(e?.[0]);case"gitStage":return t.gitStage(e?.[0]);case"gitUnstage":return t.gitUnstage(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var yg=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(P().capabilities.commands.clipboardCopy!=null)return new Xd(this.rangeUpdater).run(e,r);r.showDecorations&&await $e(P(),e,"referenced");let n=e.map(i=>i.contentText).join(`
`);return await P().clipboard.writeText(n),{thatTargets:e}}};var Tg=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await P().flashRanges(e.flatMap(j6));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function j6(t){let{editor:e,contentRange:r}=t,n=t.getRemovalHighlightRange(),i=[{editor:e,range:gr(r),style:"referenced"}];return n.type==="line"?i.push({editor:e,range:n,style:"pendingDelete"}):i.push(...z6(r,n).map(o=>({editor:e,range:gr(o),style:"pendingDelete"}))),i}function z6(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,s=[];return i.isBefore(r)&&s.push(new Y(i,r)),o.isAfter(n)&&s.push(new Y(n,o)),s}var Hl=class{constructor(){this.run=this.run.bind(this)}async run(e){return await dt(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(s=>{let l=s.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new _v;await P().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},_v=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function hM(t,e,r,n){let i=r.destinations.map((E,w)=>{if(n||r.actionTypes[w]==="edit")return{destination:E,index:w}}).filter(E=>!!E);if(i.length===0)return r;let o=i.map(E=>E.destination.constructChangeEdit("")),s=r.cursorRanges.map((E,w)=>({range:E,index:w})).filter(({range:E})=>E!=null),l=s.map(({index:E})=>E),u=s.map(({range:E})=>E),m=o.map(E=>E.range),{thatRanges:d,cursorRanges:g,editRanges:y}=await Ne({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:u,editRanges:{selections:m,behavior:0}}}),x=[...r.cursorRanges];return It(l,g).forEach(([E,w])=>{x[E]=w}),i.forEach((E,w)=>{let W=o[w].updateRange(y[w]);x[E.index]=W}),{destinations:r.destinations,actionTypes:r.actionTypes,thatRanges:d,cursorRanges:x}}async function yM({acceptsLocation:t},e,r,n){let i=n.destinations.map((g,y)=>{if(n.actionTypes[y]==="insertLineAfter")return{destination:g,index:y}}).filter(g=>!!g);if(i.length===0)return n;let o=i.map(({destination:g})=>g.contentRange),s=n.destinations.map(({contentRange:g})=>g),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(g=>g.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:u,thatRanges:m}=await Ne({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:s,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((g,y)=>{d[g.index]=r.selections[y]}),{destinations:n.destinations.map((g,y)=>g.withTarget(g.target.withContentRange(u[y]))),actionTypes:n.actionTypes,thatRanges:m,cursorRanges:d}}async function TM(t,e){let r=Lr(e),n=P().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:dn([r.target.thatTarget])}}var xg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return TM(this.actions,e);let r=P().getEditableTextEditor(Mt(e)),n={destinations:e,actionTypes:e.map(l=>l.getEditNewActionType()),thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=P().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await yM(i,this.rangeUpdater,r,n)),n=await hM(this.rangeUpdater,r,n,!o);let s=n.destinations.map((l,u)=>{let m=n.cursorRanges[u];if(m==null)throw Error("Cursor range is undefined for destination");return m.toSelection(l.target.isReversed)});return await r.setSelections(s,{focusEditor:!0}),{thatSelections:dn(n.destinations.map(l=>l.target),n.thatRanges)}}};var Sg=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ui)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},vg=class extends Sg{constructor(){super(...arguments);this.insertionMode="before"}},bg=class extends Sg{constructor(){super(...arguments);this.insertionMode="after"}};var Bl=class{constructor(e){this.callbackAction=new cc(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:s,showDecorations:l}={}){let u=n??[];return this.callbackAction.run(e,{callback:()=>P().executeCommand(r,...u),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:s??!0,showDecorations:l??!0})}};var wg=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){Lr(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),Jo(P().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},Eg=class extends wg{find(e){return P().findInDocument(e)}},_g=class extends wg{find(e){return P().findInWorkspace(e)}};var Rg=class{constructor(){this.run=this.run.bind(this)}async run(e){return await $e(P(),e,"referenced"),{thatTargets:e}}};var lc=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=Lr(e);return await $e(P(),e,"referenced"),await P().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:dn(e)}}};function xM(t){let e=t.split(/^---$/m),r={snippets:[]};for(let n of e){let i=n.match(/^-$/m),o=i!=null?n.slice(0,i.index):n,s=i!=null?n.slice(i.index+i[0].length):null,l=s?Q6(s):null,u=q6(o);if(l!=null){u==null&&(u={variables:[]});let{variables:m,...d}=u;r.snippets.push({...d,body:l,variables:m})}else if(u!=null){if(r.header!=null||r.snippets.length!==0)throw Error("Header snippet must be first in file");r.header=u}}return r}function q6(t){let e={variables:[]},r=G6(t);if(Object.keys(r).length===0)return;let n={};for(let[i,o]of Object.entries(r))switch(i){case"name":e.name=o;break;case"description":e.description=o;break;case"phrase":e.phrases=Vl(o);break;case"insertionScope":e.insertionScopes=Vl(o);break;case"language":e.languages=Vl(o);break;default:if(!i.startsWith("$"))throw Error(`Invalid key '${i}'`);n[i]=o}return e.variables=K6(n),e}function G6(t){let e=t.split(/\r?\n/).map(n=>n.trim()).filter(Boolean),r={};for(let n of e){let i=n.split(":");if(i.length!==2)throw Error(`Invalid line '${n}'`);let o=i[0].trim(),s=i[1].trim();if(o.length===0||s.length===0)throw Error(`Invalid line '${n}'`);if(r[o]!=null)throw Error(`Duplicate key '${o}' in '${t}'`);r[o]=s}return r}function K6(t){let e={},r=n=>(e[n]==null&&(e[n]={name:n}),e[n]);for(let[n,i]of Object.entries(t)){let o=n.split(".");if(o.length!==2)throw Error(`Invalid variable key '${n}'`);let s=o[0].slice(1);switch(o[1]){case"insertionFormatter":r(s).insertionFormatters=Vl(i);break;case"wrapperPhrase":r(s).wrapperPhrases=Vl(i);break;case"wrapperScope":r(s).wrapperScope=i;break;default:throw Error(`Invalid variable key '${n}'`)}}return Object.values(e)}function Q6(t){let e=t.match(/^[ \t]*\S/m);if(e?.index!=null)return t.slice(e.index).trimEnd().split(/\r?\n/).map(r=>r.trimEnd())}function Vl(t){return t.split("|").map(e=>e.trim())}function vM(t){let e=[];t.header!=null&&e.push(SM(t.header)),e.push(...t.snippets.map(SM));let r=e.filter(Boolean).join(`
---

`);return r?r+`
---
`:""}function SM(t){let e=[Ro("name",t.name),Ro("description",t.description),Ro("language",t.languages),Ro("phrase",t.phrases),Ro("insertionScope",t.insertionScopes)].filter(Boolean);return t.variables.length>0&&(e.length>0&&e.push(""),e.push(...Y6(t.variables))),"body"in t&&e.push("-",...t.body),e.join(`
`)}function Y6(t){let e=[...t];return e.sort(Z6),e.flatMap(r=>[Ro(`$${r.name}.insertionFormatter`,r.insertionFormatters),Ro(`$${r.name}.wrapperPhrase`,r.wrapperPhrases),Ro(`$${r.name}.wrapperScope`,r.wrapperScope)]).filter(Boolean)}function Ro(t,e){return e==null?"":Array.isArray(e)?`${t}: ${e.join(" | ")}`:`${t}: ${e}`}function Z6(t,e){return t.name==="0"?1:e.name==="0"?-1:t.name.localeCompare(e.name)}function bM(t,e){let r=[],n=0,i=null,[o,...s]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...s.map(u=>({text:u,startIndex:0}))].forEach(({text:u,startIndex:m})=>{let d=u.match(/^\s*/)?.[0]??"",g=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let y=Math.max(g,m),x=cx("	",n),E=u.slice(y);r.push(x+E)}),r}function wM(t,e){let r=ux(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var uc=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){if(r==null)throw new Error("Directory argument is required for GenerateSnippet action. Please update Cursorless Talon");let i=Lr(e),o=i.editor;if($e(P(),e,"referenced"),n==null&&(n=await P().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"}),!n))return{};let s=o.document.offsetAt(i.contentRange.start),l=X6(o,i.contentRange),u=l.map((ge,we)=>({offsets:{start:o.document.offsetAt(ge.start)-s,end:o.document.offsetAt(ge.end)-s},name:we===l.length-1?"0":`${we+1}`})),m=o.document.getText(new Y(i.contentRange.start.with(void 0,0),i.contentRange.start)),d=o.document.getText(i.contentRange),g=wM(d,[...pn(d,/\$|\\/g,ge=>({offsets:{start:ge.index,end:ge.index+ge[0].length},text:`\\${ge[0]}`})),...u.map(({offsets:ge,name:we})=>({offsets:ge,text:`$${we}`}))]),y=bM(g,m),x,E={snippets:[]};P().runMode==="test"?x=P().getEditableTextEditor(o):(x=P().getEditableTextEditor(await this.snippets.openNewSnippetFile(n,r)),E=xM(x.document.getText())),await x.setSelections([x.document.range.toSelection(!1)]);let w=1,{header:H}=E,W=E.header?.phrases!=null?void 0:[`${Rv}${w++}`],G=ge=>{let we=H?.variables?.some(Pt=>Pt.name===ge.name&&Pt.wrapperPhrases!=null);return{name:ge.name,wrapperPhrases:we?void 0:[`${Rv}${w++}`]}},ie={name:H?.name===n?void 0:n,phrases:W,languages:J6(o,H),body:y,variables:u.map(G)};E.snippets.push(ie);let se=vM(E).replace(/\$/g,"\\$").replaceAll(Rv,"$");return await x.insertSnippet(se),{thatSelections:e.map(({editor:ge,contentSelection:we})=>({editor:ge,selection:we}))}}};function J6(t,e){if(!e?.languages?.includes(t.document.languageId))return[t.document.languageId]}function X6(t,e){let r=t.selections.filter(n=>e.contains(n));return r.sort((n,i)=>n.start.compareTo(i.start)),r}var Rv="PLACEHOLDER_VFA77zcbLD6wXNmfMAay";var Wl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var $l=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await $e(P(),e,"referenced"),n&&Lr(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var jl=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(P().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(P().visibleTextEditors.map(n=>P().setHighlightRanges(r,n,[]))):await dt(e,(n,i)=>P().setHighlightRanges(r,n,i.map(o=>gn(o,o.contentRange)))),{thatTargets:e}}};var kg=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await $e(P(),e,"pendingModification0"),{thatTargets:ct(await dt(e,this.runForEditor))})}hasCapability(){return this.isIndent?P().capabilities.commands.indentLine!=null:P().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new tg(this.rangeUpdater):new rg(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?e8(e,r):t8(e,r),{targetSelections:i}=await Ne({rangeUpdater:this.rangeUpdater,editor:P().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return It(r,i).map(([o,s])=>sc({editor:e,selection:s.toSelection(o.isReversed)}))}},Ag=class extends kg{constructor(e){super(e,!0)}},Pg=class extends kg{constructor(e){super(e,!1)}};function e8(t,e){let{document:r}=t,n=EM(e),i=r8(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function t8(t,e){let{document:r}=t,n=EM(e),i=n8(t);return n.map(o=>{let s=r.lineAt(o),l=s.text.match(i),{start:u}=s.range,m=u.translate(void 0,l?.[0].length);return{range:new Y(u,m),text:""}})}function EM(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function r8(t){if(t.options.insertSpaces){let e=_M(t);return" ".repeat(e)}return"	"}function n8(t){if(t.options.insertSpaces){let e=_M(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function _M(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var Lg=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(ui)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=ct(await dt(e,this.runForEditor));return await P().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:gr(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(y=>y.toDestination(n).constructChangeEdit(y.contentText)),o=r.map(({contentSelection:y})=>y),s=i.map(({range:y})=>y),l=P().getEditableTextEditor(e),{contentSelections:u,editRanges:m}=await Ne({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:s,behavior:0}}}),d=It(i,m).map(([y,x])=>y.updateRange(x)),g=e.selections[0];return u.some(y=>y.intersection(g)!=null)&&await l.revealRange(g),{sourceMark:dn(r,d),thatMark:dn(r,u)}}},Mg=class extends Lg{constructor(e,r){super(e,r,!0)}},Dg=class extends Lg{constructor(e,r){super(e,r,!1)}};var zl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ui)]}async run(e){let r=await dt(e,async(i,o)=>{let s=this.getEdits(o),l=o.map(d=>d.thatTarget.contentSelection),{contentSelections:u,editRanges:m}=await Ne({rangeUpdater:this.rangeUpdater,editor:P().getEditableTextEditor(i),edits:s,selections:{contentSelections:l,editRanges:{selections:s.map(d=>d.range),behavior:0}}});return{thatMark:u.map(d=>({editor:i,selection:d})),flashRanges:na(s,m).map(([d,g])=>({editor:i,range:d.isLine?d.updateRange(g):g,isLine:d.isLine}))}});return await P().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:s,isLine:l})=>({editor:o,range:l?jr(s):gr(s),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},Fg=class extends zl{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[Og(r,"before"),Og(r,"after")])}},Cg=class extends zl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>Og(r,"before"))}},Ig=class extends zl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>Og(r,"after"))}};function Og(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.textualType==="line"}}function pc(t,e){if(t.type==="named")throw new Error("Cursorless snippets are deprecated. Please use community snippets. Update to latest cursorless-talon and say 'cursorless migrate snippets'.");if(t.type==="custom")return t;let r=o8(t.snippets,e,t.fallbackLanguage);if(r==null){let n=i8(t.snippets);throw new Error(`No snippet available for language '${e}'. Available languages: ${n}`)}return r}function i8(t){let e=new Set(t.flatMap(r=>r.languages??[]));return Array.from(e).sort().join(", ")}function o8(t,e,r){let n=RM(t.filter(i=>i.languages?.includes(e)));return n==null&&r!=null&&(n=RM(t.filter(i=>i.languages?.includes(r)))),n==null&&(n=t.find(i=>i.languages==null)),n}function RM(t){if(t.length!==0)return t.reduce((e,r)=>{if(e.languages==null||r.languages==null)throw Error("Snippet must have languages defined to find the one with the fewest languages");return r.languages.length<e.languages.length?r:e})}var kv=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},ko=class{constructor(){this._children=[]}appendChild(e){return e instanceof Jt&&this._children[this._children.length-1]instanceof Jt?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function s(l,u){for(let m of l)m.parent=u,s(m.children,m)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Hg)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Jt=class t extends ko{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},Ng=class extends ko{},Xt=class t extends Ng{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Ug?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},Ug=class t extends ko{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Jt&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},Av=class t extends ko{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof Hn&&!!s.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof Hn){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},Hn=class t extends ko{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},Bn=class t extends Ng{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Jt(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function kM(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var Hg=class t extends ko{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Xt&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return kM([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Xt&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof Bn&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){kM(this.children,e)}},mi=class{constructor(){this._scanner=new kv;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new Hg;for(;this._parse(i););let o=new Map,s=[],l=0;i.walk(u=>(u instanceof Xt&&(l+=1,u.isFinalTabstop?o.set(0,void 0):!o.has(u.index)&&u.children.length>0?o.set(u.index,u.children):s.push(u)),!0));for(let u of s){let m=o.get(u.index);if(m){let d=new Xt(u.index);d.transform=u.transform;for(let g of m)d.appendChild(g.clone());i.replace(u,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Xt(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Jt(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Xt(Number(r)):new Bn(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Xt(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Jt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new Ug;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Jt(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new Bn(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Jt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new Av,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Jt(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Hn(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new Hn(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new Hn(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Hn(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Hn(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new Hn(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Hn(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Jt(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var Bg=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function Vg(t,e,r){let n=a8(t)+1,i={};t.walk(o=>{if(o instanceof Bn){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Jt(r[o.name])]);else if(!Bg[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Xt(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Xt&&(o.index.toString()===e?o.parent.replace(o,[new Bn("TM_SELECTED_TEXT")]):r!=null&&Object.prototype.hasOwnProperty.call(r,o.index)&&o.parent.replace(o,[new Jt(r[o.index])]));return!0})}function a8(t){let e=0;return t.walk(r=>(r instanceof Xt&&(e=Math.max(e,r.index)),!0)),e}function Wg(t,e,r){let n=s8(t)+1,i={};t.walk(o=>{if(o instanceof Bn){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Jt(r[o.name])]);else if(!Bg[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Xt(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Xt&&o.index.toString()===e&&o.parent.replace(o,[new Bn("TM_SELECTED_TEXT")]);return!0})}function s8(t){let e=0;return t.walk(r=>(r instanceof Xt&&(e=Math.max(e,r.index)),!0)),e}function $g(t,e,r){let n=e.map(o=>c8(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function c8(t,e,r){let n=e.editor.document.languageId,i={multipleTargets:!1};return r.findIndex(({scope:o})=>{if(o==null)return!0;let{langIds:s,scopeTypes:l,excludeDescendantScopeTypes:u}=o;if(s!=null&&!s.includes(n))return!1;if(l!=null){let m=l.concat(u??[]),d,g;for(let y of m)try{let x=t.create({type:"containingScope",scopeType:{type:y}}).run(e,i)[0];e.contentRange.isRangeEqual(x.contentRange)&&(x=t.create({type:"containingScope",scopeType:{type:y},ancestorIndex:1}).run(e,i)[0]),(d==null||d.contentRange.contains(x.contentRange))&&(d=x,g=y)}catch{continue}return g==null?!1:d!=null&&!(u??[]).includes(g)}return!0})}var AM=!1;function jg(){AM||(Jo(P().messages,"legacySnippets","Talon community snippets are now fully supported in Cursorless! Cursorless's experimental snippets are now deprecated, but in most cases we can help you migrate automatically. Update cursorless-talon and say 'cursorless migrate snippets'."),AM=!0)}var LM={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(PM).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(PM).join("")}};function PM(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}var ql=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new mi;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new tc(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}getSnippetInfo(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=$g(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(s){return s==null?void 0:l8(i,o,s)}}}async run(e,r){jg();let n=P().getEditableTextEditor(Mt(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(m=>new Vt({editor:n,contentRange:m,isReversed:!1,hasExplicitRange:!0}))),s=this.snippetParser.parse(i);Wg(s,null,o(r.substitutions));let l=s.toTextmateString(),{editorSelections:u}=await Ne({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}};function l8(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let s=LM[o];if(s==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,s(i.split(" "))]}))}var Gl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new mi;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=Mt(e),o=pc(r,n.document.languageId).scopeTypes??[];return o.length===0?[]:[new tc(this.modifierStageFactory,{type:"cascading",modifiers:o.map(s=>({type:"containingScope",scopeType:s}))})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=P().getEditableTextEditor(Mt(e)),i=pc(r,n.document.languageId),o=this.snippetParser.parse(i.body),s=i.substitutions??r.substitutions;Vg(o,null,s);let l=o.toTextmateString();await this.actions.editNew.run(e);let{editorSelections:u}=await Ne({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}legacy(){return new ql(this.rangeUpdater,this.snippets,this.actions,this.modifierStageFactory)}};var Kl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ui)]}async run(e){return await $e(P(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:ct(await dt(e,async(n,i)=>{let{thatRanges:o}=await Ne({rangeUpdater:this.rangeUpdater,editor:P().getEditableTextEditor(n),edits:u8(n,i),selections:{thatRanges:i.map(({contentRange:s})=>s)}});return na(i,o).map(([s,l])=>({editor:n,selection:l.toSelection(s.isReversed)}))}))}}};function u8(t,e){let r=[];for(let n of e){let i=n.textualType==="token"?p8(n):m8(n);r.push(...i)}return r}function p8(t){let{editor:e,contentRange:r}=t,n=Mr(e.document.languageId).tokenMatcher,i=yn(n,e,r,"forward");return Array.from(Sx(i)).map(([o,s])=>({range:new Y(o.end,s.start),text:"",isReplace:!0}))}function m8(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=xs(mk(n,i+1),s=>e.lineAt(s));return Array.from(Sx(o)).map(([s,l])=>({range:new Y(s.rangeTrimmed?.end??s.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var zg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=P().getEditableTextEditor(Mt(e)),n=P().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Ne({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:s,editorSelections:l}=await Ne({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(s),n!=null&&!n.isActive&&await n.focus(),await P().flashRanges(l.map(u=>({editor:r,range:gr(u),style:"justAdded"}))),{thatSelections:l.map(u=>({editor:r,selection:u}))}}};var qg=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await P().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?na(e,n).map(([s,l])=>({destination:s,text:l})):e.map(s=>({destination:s,text:r}));return{thatSelections:ct(await Ci(i,({destination:s})=>s.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:s,text:l})=>s.constructChangeEdit(l)),{editSelections:i}=await Ne({rangeUpdater:this.rangeUpdater,editor:P().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:s})=>s),behavior:0}}}),o=na(n,i).map(([s,l])=>s.updateRange(l).toSelection(l.isReversed));return await P().flashRanges(o.map(s=>({editor:e,range:gr(s),style:"justAdded"}))),o.map(s=>({editor:e,selection:s}))}};var Gg=class{constructor(e,r){this.run=this.run.bind(this),this.runner=P().capabilities.commands.clipboardPaste!=null?new zg(e,r):new qg(e)}run(e){return this.runner.run(e)}};var Ql=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=Qd(e),r&&await $e(P(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:ct(await dt(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(s=>s.constructRemovalEdit()),i=P().getEditableTextEditor(e),{editRanges:o}=await Ne({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:s})=>s)}});return It(r,o).map(([s,l])=>new ho({editor:s.editor,isReversed:s.isReversed,contentRange:l}))}};var Yl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await $e(P(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=It(e,n).map(([l,u])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(u)})),o=[],s=[];return await Ci(i,l=>l.editor,async(l,u)=>{let m=u.map(({edit:y})=>y),{contentSelections:d,editRanges:g}=await Ne({rangeUpdater:this.rangeUpdater,editor:P().getEditableTextEditor(l),edits:m,selections:{contentSelections:u.map(({target:y})=>y.contentSelection),editRanges:{selections:m.map(({range:y})=>y),behavior:0}}});for(let[y,x]of It(u,d))o.push(y.target.withContentRange(x));for(let[y,x]of It(u,g))s.push({editor:l,selection:y.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:s}}};var Zl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[wv(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(s=>{let l=s.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await $e(P(),i,"pendingModification0");let o=await dt(i,async(s,l)=>{let u=l.map((g,y)=>({editor:s,range:g.contentRange,text:y%2===0?r:n})),{sourceRanges:m,thatRanges:d}=await Ne({rangeUpdater:this.rangeUpdater,editor:P().getEditableTextEditor(s),edits:u,selections:{sourceRanges:e.map(g=>g.thatTarget.contentRange),thatRanges:e.map(g=>g.contentRange)}});return{sourceMark:dn(e,m),thatMark:dn(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:s})=>s),thatSelections:o.flatMap(({thatMark:s})=>s)}}};var Jl=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=hl(e,s=>s.editor),n=Array.from(r,([s,l])=>({lineNumber:f8(l,this.at),editor:s})),i=P().activeEditableTextEditor;for(let s of n)await P().getEditableTextEditor(s.editor).revealLine(s.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(s=>{let l=s.editor.visibleRanges,u=l[0].start.line,m=l[l.length-1].end.line;return s.contentRange.start.line>u||s.contentRange.end.line<m||s.contentRange.start.line===u&&s.contentRange.end.line===m});return await P().flashRanges(o.map(s=>({editor:s.editor,range:jr(s.contentRange),style:"referenced"}))),{thatTargets:e}}},Kg=class extends Jl{constructor(){super("top")}},Qg=class extends Jl{constructor(){super("center")}},Yg=class extends Jl{constructor(){super("bottom")}};function f8(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var Ao=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=Mt(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n,o=this.selectionMode==="set"&&i.length===1&&i[0].isEmpty;return await P().getEditableTextEditor(r).setSelections(i,{focusEditor:!0,highlightWord:o}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new pt(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new pt(r.contentRange.end,r.contentRange.end))}}},Zg=class extends Ao{constructor(){super("set","content")}},Jg=class extends Ao{constructor(){super("set","before")}},Xg=class extends Ao{constructor(){super("set","after")}},eh=class extends Ao{constructor(){super("add","content")}},th=class extends Ao{constructor(){super("add","before")}},rh=class extends Ao{constructor(){super("add","after")}};var Xl=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var eu=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await $e(P(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,s=this.treeSitter.getTree(i.document);r.push(d8(i.document,s,o))}return P().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function d8(t,e,r){let n=[],i=[];return MM(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function MM(t,e,r,n,i){for(;;){let o=new Y(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let s="  ".repeat(i),l=g8(n),u=s+l;if(n.nodeIsNamed)t.push(`${u}${n.nodeType} [${o}]`),e.push(`${u}(${n.nodeType}`),n.gotoFirstChild()?(MM(t,e,r,n,i+1),n.gotoParent(),e.push(`${s})`)):e[e.length-1]+=")";else{let m=`"${n.nodeType}"`;t.push(`${u}${m} [${o}]`),e.push(`${u}${m}`)}}if(!n.gotoNextSibling())return}}function g8(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var tu=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&Jo(P().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((s,l)=>s.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(s=>s.toDestination("to")),i);return{thatSelections:o}}},nh=class extends tu{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},ih=class extends tu{sortTexts(e){return e.reverse()}},oh=class extends tu{sortTexts(e){return lx(e)}};var ru=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(ui)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await $e(P(),r,"referenced"),await dt(e,async(n,i)=>{let o=i.map(s=>gn(s,s.contentRange));await P().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var nu=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await dt(e,async(o,s)=>{let l=s.map(w=>({start:new pt(w.contentRange.start,w.contentRange.start),end:new pt(w.contentRange.end,w.contentRange.end)})),u=l.flatMap(({start:w,end:H})=>[{text:r,range:w},{text:n,range:H,isReplace:!0}]),m=s.map(w=>w.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:g,sourceSelections:y,thatSelections:x}=await Ne({rangeUpdater:this.rangeUpdater,editor:P().getEditableTextEditor(o),edits:u,selections:{boundariesStartSelections:{selections:l.map(({start:w})=>w),behavior:2},boundariesEndSelections:{selections:l.map(({end:w})=>w),behavior:3},sourceSelections:{selections:m,behavior:1},thatSelections:{selections:m,behavior:0}}}),E=[...d,...g];return await P().flashRanges(E.map(w=>({editor:o,range:gr(w),style:"justAdded"}))),{sourceMark:y.map(w=>({editor:o,selection:w})),thatMark:x.map(w=>({editor:o,selection:w}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var iu=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new mi;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new Eo(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){let{name:r,variableName:n}=e,s=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return s==null?void 0:{type:s}}getBody(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return $g(this.modifierStageFactory,r,i.definitions).body.join(`
`)}async run(e,r){jg();let n=P().getEditableTextEditor(Mt(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);Wg(o,r.variableName);let s=o.toTextmateString();await $e(P(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),u=()=>n.insertSnippet(s,l),{targetSelections:m}=await Ne({rangeUpdater:this.rangeUpdater,editor:n,callback:u,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:m.map(d=>({editor:n,selection:d}))}}};var ou=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new mi;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=Mt(e),i=pc(r,n.document.languageId);return i.scopeType==null?[]:[new Eo(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:i.scopeType}})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=P().getEditableTextEditor(Mt(e)),i=pc(r,n.document.languageId),o=this.snippetParser.parse(i.body);Vg(o,i.variableName);let s=o.toTextmateString();await $e(P(),e,"pendingModification0");let l=e.map(m=>m.contentSelection),{targetSelections:u}=await Ne({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(s,l),preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}legacy(){return new iu(this.rangeUpdater,this.snippets,this.modifierStageFactory)}};var h8=/-?\d+(\.\d+)?/g,ah=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Ci(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let u=n.offsetAt(l.contentRange.start),m=l.contentText,d=il(m,h8);for(let g of d)i.push(y8(e,u,g)),o.push(T8(this.isIncrement,g.text))}let{thatSelections:s}=await this.actions.replace.run(i,o);return s}},sh=class extends ah{constructor(e){super(e,!0)}},ch=class extends ah{constructor(e){super(e,!1)}};function y8(t,e,r){return new Xe({editor:t,isReversed:!1,contentRange:new Y(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function T8(t,e){return e.includes(".")?S8(t,e).toString():x8(t,e).toString()}function x8(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function S8(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var lh=class{constructor(e,r,n,i){this.addSelection=new eh,this.addSelectionBefore=new th,this.addSelectionAfter=new rh,this.callAsFunction=new Nl(this),this.clearAndSetSelection=new Ul(this),this.copyToClipboard=new yg(this,n),this.cutToClipboard=new Tg(this),this.decrement=new ch(this),this.deselect=new Hl,this.editNew=new xg(n,this),this.editNewLineAfter=new bg(this,i),this.editNewLineBefore=new vg(this,i),this.executeCommand=new Bl(n),this.extractVariable=new mg(n),this.findInDocument=new Eg(this),this.findInWorkspace=new _g(this),this.flashTargets=new Rg,this.foldRegion=new ng(n),this.followLink=new lc({openAside:!1}),this.followLinkAside=new lc({openAside:!0}),this.generateSnippet=new uc(r),this.getText=new $l,this.gitAccept=new fg(n),this.gitRevert=new dg(n),this.gitStage=new gg(n),this.gitUnstage=new hg(n),this.highlight=new jl,this.increment=new sh(this),this.indentLine=new Ag(n),this.insertCopyAfter=new Dg(n,i),this.insertCopyBefore=new Mg(n,i),this.insertEmptyLineAfter=new Ig(n,i),this.insertEmptyLineBefore=new Cg(n,i),this.insertEmptyLinesAround=new Fg(n,i),this.insertSnippet=new Gl(n,r,this,i),this.joinLines=new Kl(n,i),this.breakLine=new Kd(n),this.moveToTarget=new Zd(n),this.outdentLine=new Pg(n),this.pasteFromClipboard=new Gg(n,this),this.randomizeTargets=new oh(this),this.remove=new Ql(n),this.rename=new og(n),this.replace=new Yl(n),this.replaceWithTarget=new Yd(n),this.revealDefinition=new cg(n),this.revealTypeDefinition=new lg(n),this.reverseTargets=new ih(this),this.rewrapWithPairedDelimiter=new Zl(n,i),this.scrollToBottom=new Yg,this.scrollToCenter=new Qg,this.scrollToTop=new Kg,this.setSelection=new Zg,this.setSelectionAfter=new Xg,this.setSelectionBefore=new Jg,this.showDebugHover=new pg(n),this.showHover=new ug(n),this.showQuickFix=new sg(n),this.showReferences=new ag(n),this.sortTargets=new nh(this),this.swapTargets=new Jd(n),this.toggleLineBreakpoint=new ru(i),this.toggleLineComment=new eg(n),this.unfoldRegion=new ig(n),this.wrapWithPairedDelimiter=new nu(n),this.wrapWithSnippet=new ou(n,r,i),this["experimental.setInstanceReference"]=new Xl("instanceReference"),this["private.showParseTree"]=new eu(e),this["private.getTargets"]=new Wl,this["private.setKeyboardTarget"]=new Xl("keyboard")}};async function DM(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return uh(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:ph(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return uh(i.destination)?{action:"insert",modifiers:ph(i.destination),text:await Pv(e,i.source)}:null;case"moveToTarget":if(uh(i.destination)){let o=await Pv(e,i.source);return await v8(e,i.source),{action:"insert",modifiers:ph(i.destination),text:o}}return null;case"callAsFunction":return mh(i.argument)?{action:i.name,modifiers:fh(i.argument),callee:await Pv(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return mh(i.target)?{action:i.name,modifiers:fh(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return uh(i.destination)?{action:i.name,modifiers:ph(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return mh(i.target)?{action:i.name,modifiers:fh(i.target)}:null}}function uh(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&mh(t.target):!1}function mh(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function ph(t){return t.type==="primitive"?fh(t.target):[]}function fh(t){return t.type==="primitive"&&t.modifiers!=null&&t.modifiers.length>0?t.modifiers:[]}async function Pv(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function v8(t,e){await t({name:"remove",target:e})}function FM(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((s,l)=>[s,l]);for(let[s,l]of o.reverse())for(let u of b8){let m=u.accept(s);if(m.accepted){let[d,g]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],y={...t,anchor:g.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:g},active:Wm(i,x=>{x.modifiers=x.modifiers.slice(Qo(x.modifiers,E=>u.accept(E).accepted)+1)})};return y=m.transformTarget?.(y)??y,{type:"primitive",mark:{type:"target",target:y},modifiers:d}}}return t}var b8=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function Mv(t,e){switch(t.type){case"list":return w8(t,e);case"range":return CM(t,e);case"primitive":return dh(t,e);case"implicit":return t}}function w8(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return CM(r,i);case"primitive":return dh(r,i)}})}}function CM(t,e){let r=E8(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return FM(r,n)}function E8(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:dh(t.anchor,e),active:dh(t.active,e.concat(t.anchor))}}function dh(t,e){let r=Lv(t.mark??(_8(t)?A8(e):null)??{type:"cursor"}),n=IM(t)??P8(e)??L8(e)??[];return{type:t.type,mark:r,modifiers:n}}function _8(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function IM(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function R8(t){if(k8(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function k8(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function A8(t){return au(t,e=>e.mark)}function P8(t){return au(t,IM)}function L8(t){return au(t,R8)}function au(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=au([n.anchor],e);if(i!=null)return i;break}case"list":{let i=au(n.elements,e);if(i!=null)return i;break}}}}function Lv(t){switch(t.type){case"range":return{...t,anchor:Lv(t.anchor),active:Lv(t.active)};case"target":return{type:"target",target:Mv(t.target,[])};default:return t}}var gh=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new Dv(this.debug)}async run(e){if(ra(e)){let m=await DM(this.commandServerApi,this.runAction,e);if(m!=null)return{fallback:m}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:s,instanceReferenceTargets:l,keyboardTargets:u}=await this.runAction(e.action);return this.storedTargets.set("that",OM(i,n)),this.storedTargets.set("source",OM(s,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",u,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.directory,e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(this.getDestinations(e.destination),e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(this.getTargets(e.target),e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(Xm(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},Dv=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=Mv(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function OM(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(sc):t}var hh=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Vt({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var yh=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=P().visibleTextEditors.find(s=>s.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new Y(r.line,r.character,n.line,n.character);return[new Vt({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var Th=class{constructor(e){this.mark=e}run(){let e=P().activeTextEditor;if(e==null)return[];let r=M8(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[AS(e,!1,n)]}},M8=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,s=Math.floor(i/100)*100,l=[],u=[],m=s+r;for(;m<=o;)m>=i&&(t.visibleRanges.find(g=>m>=g.start.line&&m<=g.end.line)?l.push(m):u.push(m)),m+=100;if(l.length===1)return l[0];if(l.length+u.length>1)throw new Error("Multiple lines matching");if(u.length===1)return u[0];throw new Error("Line is not in viewport")}}};var xh=class{constructor(e){this.mark=e}run(){return[]}};var Sh=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[_o(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var vh=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var bh=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var wh=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new Is;case"that":case"source":case"keyboard":return new vh(this.storedTargets,e.type);case"decoratedSymbol":return new hh(this.readableHatMap,e);case"lineNumber":return new Th(e);case"range":return new Sh(this,e);case"nothing":return new xh(e);case"target":return new bh(this.targetPipelineRunner,e);case"explicit":return new yh(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function NM(t,e,r,n,i,o,s,l,u,m){r.active&&(r.log("command:"),r.log(JSON.stringify(m,null,2)));let d=lS(m),g=await n.getReadableMap(d.usePrePhraseSnapshot),y=F8(t,e,s,r,o,g,i,l);for(let E of u)y=E.wrapCommandRunner(g,y);let x=await y.run(d);return await D8(m,x)}async function D8(t,e){if(ra(t))return e;if("returnValue"in e)return e.returnValue}function F8(t,e,r,n,i,o,s,l){let u=new ac(r,i,new zs(r)),m=new wh(o,i),d=new Pd(u,m);return m.setPipelineRunner(d),new gh(e,n,i,d,new lh(t,s,l,u))}function UM(t){return cA(t)?ks(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${ks(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var Eh=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{dr(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...ta.filter(r=>r!=="instance").map(r=>({type:r})),...Mm.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:UM(e),isLanguageSpecific:C8(e)}}dispose(){this.disposable.dispose()}};function C8(t){switch(t.type){case"string":case"argumentOrParameter":case"argumentList":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"interior":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function Fv(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((s,l)=>s.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=cm(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=cm(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function Aa(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.getRemovalHighlightRange(),leadingDelimiter:HM(t.getLeadingDelimiterTarget()),trailingDelimiter:HM(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(Aa),boundary:t.getBoundary()?.map(Aa),insertionDelimiter:t.insertionDelimiter}}function HM(t){return t!=null?Aa(t):void 0}function BM(t,e,r,n,i){let o={multipleTargets:!0};return xs(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),s=>({domain:s.domain,ranges:s.getTargets(!1).map(l=>({range:l.contentRange,targets:i?I8(r,l,o).map(Aa):void 0}))}))}function I8(t,e,r){try{return t.run(e,r)}catch(n){if(n.name==="NoContainingScopeError")return[];throw n}}function VM(t,e,r){return xs(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(Aa)}))}var _h=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:VM(e,i,Fv(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,s=this.scopeHandlerFactory.maybeCreate(r,o);if(s==null)return[];let l=this.scopeHandlerFactory.maybeCreate(s.iterationScopeType,o);return l==null?[]:BM(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),Fv(e,s,n),i)}};var Rh=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new ri(P().configuration,()=>this.onChange());this.disposables.push(P().onDidChangeVisibleTextEditors(n.run),P().onDidOpenTextDocument(n.run),P().onDidCloseTextDocument(n.run),P().onDidChangeTextDocument(n.run),P().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{P().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(s){if(yt(P().messages,"ScopeRangeWatcher.provide",s.message),o=[],P().runMode==="test")throw s}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{dr(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{P().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{dr(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var kh=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?2:WM(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return 2;let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?2:WM(e,o)?0:1}};function WM(t,e){return!xA(e.generateScopes(t,new ke(0,0),"forward"))}var Ah=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new ri(P().configuration,()=>this.onChange());this.disposable=TA(P().onDidOpenTextDocument(i.run),P().onDidCloseTextDocument(i.run),P().onDidChangeActiveTextEditor(i.run),P().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{dr(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=P().activeTextEditor,r=e==null?()=>2:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>2:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function $M({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Df,commandServerApi:i=new kf,talonSpokenForms:o=new Mf,snippets:s=new Lf}){of(t);let l=new Sf(t),u=new Rf,m=new sf,d=new xf(t,m),g=new If(o),y=e!=null?new Ef(u,l,e,i):new Af;y.allocateHats();let x=r?await xd.create(t,n,r):new Pf;t.disposeOnExit(u,x,y,l,d);let E=[],w,H=W=>(w=W,NM(n,i,l,y,s,m,x,u,E,W));return{commandApi:{runCommand(W){return H(W)},runCommandSafe(...W){return H(Cm(W))},repeatPreviousCommand(){if(w==null)throw new Error("No previous command");return H(w)}},scopeProvider:N8(x,m,g),customSpokenFormGenerator:g,storedTargets:m,hatTokenMap:y,injectIde:of,addCommandRunnerDecorator:W=>{E.push(W)}}}function N8(t,e,r){let n=new zs(t),i=new _h(n,new ac(t,e,n)),o=new Rh(t,i),s=new kh(n),l=new Eh(r),u=new Ah(t,s,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:s.getScopeSupport,getIterationScopeSupport:s.getIterationScopeSupport,onDidChangeScopeSupport:u.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function jM(t,e){switch(e.type){case"UntypedTarget":return new Vt({editor:t,isReversed:e.isReversed,contentRange:bm(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new hr({editor:t,isReversed:e.isReversed,contentRange:bm(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var aCe=Symbol("unused");var su=class{constructor(e){this.position=e}},sCe={$0:new su(0),$1:new su(1),$2:new su(2)};var zM=require("node:events"),Ph=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new zM.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function Qr(){return global._neovimRegistry==null&&(global._neovimRegistry=new Ph),global._neovimRegistry}var qM="pokey.cursorless";async function Lh(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,s,l]=await e.executeLua(r,[]),u;return l===!0?u=[new pt(new ke(o-1,s-1),new ke(n-1,i-1))]:u=[new pt(new ke(n-1,i-1),new ke(o-1,s-1))],console.debug(`bufferGetSelections(): selections=(${u[0].start.line}, ${u[0].start.character}), (${u[0].end.line}, ${u[0].end.character}) neovim=(${n},${i}),(${o},${s}),reverse=${l}`),u}async function GM(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function KM(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),s=new Y(new ke(i-1,0),new ke(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${s.start.line}, ${s.start.character}), (${s.end.line}, ${s.end.character})`),[s]}async function QM(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function Mh(t,e){await e.callFunction("setreg",["*",t])}async function YM(t){return await t.callFunction("getreg",["*"])}async function ZM(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function JM(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function XM(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function eD(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var U8={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0},Dh=class{constructor(){this.commands=U8}};var cu=class{constructor(e){this.client=e}async readText(){return await YM(this.client)}async writeText(e){return await Mh(e,this.client)}};var Fh=ln(Cv(),1);var uu=class{constructor(){this.notifier=new nr;this.mocks={...fm};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(H8(n,r))return(0,Fh.get)(i,e)??(0,Fh.get)(this.mocks,e)}return(0,Fh.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function H8(t,e){return t.languageId===e.languageId}async function Iv(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);n.sort((s,l)=>(tD(s)||rD(s))&&(tD(l)||rD(l))?1:s.range.start.line===l.range.start.line?l.range.start.character-s.range.start.character:l.range.start.line-s.range.start.line),console.debug("neovimEdit() [sorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let s of n)o.push({range:s.range,rangeOffset:i.offsetAt(s.range.start),rangeLength:i.offsetAt(s.range.end)-i.offsetAt(s.range.start),text:s.text});Qr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let s of n){let{range:l,text:u,isReplace:m}=s;u===""?await nD(t,l):l.isEmpty&&!m?await iD(t,l.start,u):await B8(t,l,u)}return await e.updateTextEditor(),!0}async function nD(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(s+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([s,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function iD(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=s+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let u=s+n[0],m=n[n.length-1]+l;await i.setLines([u,...n.slice(1,n.length-1),m],{start:e.line,end:e.line+1,strictIndexing:!0})}async function B8(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await nD(t,e),await iD(t,e.start,r)}function tD(t){return t.range.isEmpty&&!t.isReplace}function rD(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function oD(t){return Qr().onEvent("onDidChangeTextDocument",t),sD()}function aD(t,e,r){return Qr().onEvent("onDidOpenTextDocument",t),sD()}function sD(){return{dispose(){}}}var pu=class{constructor(){this.data={...dm}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var o1=ln(Cv(),1);var mu=class{async showMessage(e,r,n,...i){}};async function cD(t,e){let r=e.activeTextEditor,n=await t.window,i=await Lh(n,t),o=r.document.getText(i[0]);await Mh(o,t)}async function lD(t,e){await ZM(t)}var Ch=class{constructor(e,r,n,i,o,s,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=s}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await GM(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await Iv(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await cD(this.client,this.neovimIDE)}async clipboardPaste(){await lD(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}async gitAccept(e){throw Error("gitAccept Not implemented")}async gitRevert(e){throw Error("gitRevert Not implemented")}async gitStage(e){throw Error("gitStage Not implemented")}async gitUnstage(e){throw Error("gitUnstage Not implemented")}};var nw=ln(require("path"),1);var uD;(()=>{"use strict";var t={975:O=>{function L(C){if(typeof C!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(C))}function q(C,U){for(var z,X="",Z=0,ne=-1,Ee=0,Re=0;Re<=C.length;++Re){if(Re<C.length)z=C.charCodeAt(Re);else{if(z===47)break;z=47}if(z===47){if(!(ne===Re-1||Ee===1))if(ne!==Re-1&&Ee===2){if(X.length<2||Z!==2||X.charCodeAt(X.length-1)!==46||X.charCodeAt(X.length-2)!==46){if(X.length>2){var Ze=X.lastIndexOf("/");if(Ze!==X.length-1){Ze===-1?(X="",Z=0):Z=(X=X.slice(0,Ze)).length-1-X.lastIndexOf("/"),ne=Re,Ee=0;continue}}else if(X.length===2||X.length===1){X="",Z=0,ne=Re,Ee=0;continue}}U&&(X.length>0?X+="/..":X="..",Z=2)}else X.length>0?X+="/"+C.slice(ne+1,Re):X=C.slice(ne+1,Re),Z=Re-ne-1;ne=Re,Ee=0}else z===46&&Ee!==-1?++Ee:Ee=-1}return X}var J={resolve:function(){for(var C,U="",z=!1,X=arguments.length-1;X>=-1&&!z;X--){var Z;X>=0?Z=arguments[X]:(C===void 0&&(C=process.cwd()),Z=C),L(Z),Z.length!==0&&(U=Z+"/"+U,z=Z.charCodeAt(0)===47)}return U=q(U,!z),z?U.length>0?"/"+U:"/":U.length>0?U:"."},normalize:function(C){if(L(C),C.length===0)return".";var U=C.charCodeAt(0)===47,z=C.charCodeAt(C.length-1)===47;return(C=q(C,!U)).length!==0||U||(C="."),C.length>0&&z&&(C+="/"),U?"/"+C:C},isAbsolute:function(C){return L(C),C.length>0&&C.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var C,U=0;U<arguments.length;++U){var z=arguments[U];L(z),z.length>0&&(C===void 0?C=z:C+="/"+z)}return C===void 0?".":J.normalize(C)},relative:function(C,U){if(L(C),L(U),C===U||(C=J.resolve(C))===(U=J.resolve(U)))return"";for(var z=1;z<C.length&&C.charCodeAt(z)===47;++z);for(var X=C.length,Z=X-z,ne=1;ne<U.length&&U.charCodeAt(ne)===47;++ne);for(var Ee=U.length-ne,Re=Z<Ee?Z:Ee,Ze=-1,He=0;He<=Re;++He){if(He===Re){if(Ee>Re){if(U.charCodeAt(ne+He)===47)return U.slice(ne+He+1);if(He===0)return U.slice(ne+He)}else Z>Re&&(C.charCodeAt(z+He)===47?Ze=He:He===0&&(Ze=0));break}var xt=C.charCodeAt(z+He);if(xt!==U.charCodeAt(ne+He))break;xt===47&&(Ze=He)}var qt="";for(He=z+Ze+1;He<=X;++He)He!==X&&C.charCodeAt(He)!==47||(qt.length===0?qt+="..":qt+="/..");return qt.length>0?qt+U.slice(ne+Ze):(ne+=Ze,U.charCodeAt(ne)===47&&++ne,U.slice(ne))},_makeLong:function(C){return C},dirname:function(C){if(L(C),C.length===0)return".";for(var U=C.charCodeAt(0),z=U===47,X=-1,Z=!0,ne=C.length-1;ne>=1;--ne)if((U=C.charCodeAt(ne))===47){if(!Z){X=ne;break}}else Z=!1;return X===-1?z?"/":".":z&&X===1?"//":C.slice(0,X)},basename:function(C,U){if(U!==void 0&&typeof U!="string")throw new TypeError('"ext" argument must be a string');L(C);var z,X=0,Z=-1,ne=!0;if(U!==void 0&&U.length>0&&U.length<=C.length){if(U.length===C.length&&U===C)return"";var Ee=U.length-1,Re=-1;for(z=C.length-1;z>=0;--z){var Ze=C.charCodeAt(z);if(Ze===47){if(!ne){X=z+1;break}}else Re===-1&&(ne=!1,Re=z+1),Ee>=0&&(Ze===U.charCodeAt(Ee)?--Ee==-1&&(Z=z):(Ee=-1,Z=Re))}return X===Z?Z=Re:Z===-1&&(Z=C.length),C.slice(X,Z)}for(z=C.length-1;z>=0;--z)if(C.charCodeAt(z)===47){if(!ne){X=z+1;break}}else Z===-1&&(ne=!1,Z=z+1);return Z===-1?"":C.slice(X,Z)},extname:function(C){L(C);for(var U=-1,z=0,X=-1,Z=!0,ne=0,Ee=C.length-1;Ee>=0;--Ee){var Re=C.charCodeAt(Ee);if(Re!==47)X===-1&&(Z=!1,X=Ee+1),Re===46?U===-1?U=Ee:ne!==1&&(ne=1):U!==-1&&(ne=-1);else if(!Z){z=Ee+1;break}}return U===-1||X===-1||ne===0||ne===1&&U===X-1&&U===z+1?"":C.slice(U,X)},format:function(C){if(C===null||typeof C!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof C);return function(U,z){var X=z.dir||z.root,Z=z.base||(z.name||"")+(z.ext||"");return X?X===z.root?X+Z:X+"/"+Z:Z}(0,C)},parse:function(C){L(C);var U={root:"",dir:"",base:"",ext:"",name:""};if(C.length===0)return U;var z,X=C.charCodeAt(0),Z=X===47;Z?(U.root="/",z=1):z=0;for(var ne=-1,Ee=0,Re=-1,Ze=!0,He=C.length-1,xt=0;He>=z;--He)if((X=C.charCodeAt(He))!==47)Re===-1&&(Ze=!1,Re=He+1),X===46?ne===-1?ne=He:xt!==1&&(xt=1):ne!==-1&&(xt=-1);else if(!Ze){Ee=He+1;break}return ne===-1||Re===-1||xt===0||xt===1&&ne===Re-1&&ne===Ee+1?Re!==-1&&(U.base=U.name=Ee===0&&Z?C.slice(1,Re):C.slice(Ee,Re)):(Ee===0&&Z?(U.name=C.slice(1,ne),U.base=C.slice(1,Re)):(U.name=C.slice(Ee,ne),U.base=C.slice(Ee,Re)),U.ext=C.slice(ne,Re)),Ee>0?U.dir=C.slice(0,Ee-1):Z&&(U.dir="/"),U},sep:"/",delimiter:":",win32:null,posix:null};J.posix=J,O.exports=J}},e={};function r(O){var L=e[O];if(L!==void 0)return L.exports;var q=e[O]={exports:{}};return t[O](q,q.exports,r),q.exports}r.d=(O,L)=>{for(var q in L)r.o(L,q)&&!r.o(O,q)&&Object.defineProperty(O,q,{enumerable:!0,get:L[q]})},r.o=(O,L)=>Object.prototype.hasOwnProperty.call(O,L),r.r=O=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:()=>y,Utils:()=>B}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function u(O,L){if(!O.scheme&&L)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${O.authority}", path: "${O.path}", query: "${O.query}", fragment: "${O.fragment}"}`);if(O.scheme&&!o.test(O.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(O.path){if(O.authority){if(!s.test(O.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(O.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let m="",d="/",g=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class y{static isUri(L){return L instanceof y||!!L&&typeof L.authority=="string"&&typeof L.fragment=="string"&&typeof L.path=="string"&&typeof L.query=="string"&&typeof L.scheme=="string"&&typeof L.fsPath=="string"&&typeof L.with=="function"&&typeof L.toString=="function"}scheme;authority;path;query;fragment;constructor(L,q,J,C,U,z=!1){typeof L=="object"?(this.scheme=L.scheme||m,this.authority=L.authority||m,this.path=L.path||m,this.query=L.query||m,this.fragment=L.fragment||m):(this.scheme=function(X,Z){return X||Z?X:"file"}(L,z),this.authority=q||m,this.path=function(X,Z){switch(X){case"https":case"http":case"file":Z?Z[0]!==d&&(Z=d+Z):Z=d}return Z}(this.scheme,J||m),this.query=C||m,this.fragment=U||m,u(this,z))}get fsPath(){return G(this,!1)}with(L){if(!L)return this;let{scheme:q,authority:J,path:C,query:U,fragment:z}=L;return q===void 0?q=this.scheme:q===null&&(q=m),J===void 0?J=this.authority:J===null&&(J=m),C===void 0?C=this.path:C===null&&(C=m),U===void 0?U=this.query:U===null&&(U=m),z===void 0?z=this.fragment:z===null&&(z=m),q===this.scheme&&J===this.authority&&C===this.path&&U===this.query&&z===this.fragment?this:new E(q,J,C,U,z)}static parse(L,q=!1){let J=g.exec(L);return J?new E(J[2]||m,we(J[4]||m),we(J[5]||m),we(J[7]||m),we(J[9]||m),q):new E(m,m,m,m,m)}static file(L){let q=m;if(i&&(L=L.replace(/\\/g,d)),L[0]===d&&L[1]===d){let J=L.indexOf(d,2);J===-1?(q=L.substring(2),L=d):(q=L.substring(2,J),L=L.substring(J)||d)}return new E("file",q,L,m,m)}static from(L){let q=new E(L.scheme,L.authority,L.path,L.query,L.fragment);return u(q,!0),q}toString(L=!1){return ie(this,L)}toJSON(){return this}static revive(L){if(L){if(L instanceof y)return L;{let q=new E(L);return q._formatted=L.external,q._fsPath=L._sep===x?L.fsPath:null,q}}return L}}let x=i?1:void 0;class E extends y{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=G(this,!1)),this._fsPath}toString(L=!1){return L?ie(this,!0):(this._formatted||(this._formatted=ie(this,!1)),this._formatted)}toJSON(){let L={$mid:1};return this._fsPath&&(L.fsPath=this._fsPath,L._sep=x),this._formatted&&(L.external=this._formatted),this.path&&(L.path=this.path),this.scheme&&(L.scheme=this.scheme),this.authority&&(L.authority=this.authority),this.query&&(L.query=this.query),this.fragment&&(L.fragment=this.fragment),L}}let w={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function H(O,L,q){let J,C=-1;for(let U=0;U<O.length;U++){let z=O.charCodeAt(U);if(z>=97&&z<=122||z>=65&&z<=90||z>=48&&z<=57||z===45||z===46||z===95||z===126||L&&z===47||q&&z===91||q&&z===93||q&&z===58)C!==-1&&(J+=encodeURIComponent(O.substring(C,U)),C=-1),J!==void 0&&(J+=O.charAt(U));else{J===void 0&&(J=O.substr(0,U));let X=w[z];X!==void 0?(C!==-1&&(J+=encodeURIComponent(O.substring(C,U)),C=-1),J+=X):C===-1&&(C=U)}}return C!==-1&&(J+=encodeURIComponent(O.substring(C))),J!==void 0?J:O}function W(O){let L;for(let q=0;q<O.length;q++){let J=O.charCodeAt(q);J===35||J===63?(L===void 0&&(L=O.substr(0,q)),L+=w[J]):L!==void 0&&(L+=O[q])}return L!==void 0?L:O}function G(O,L){let q;return q=O.authority&&O.path.length>1&&O.scheme==="file"?`//${O.authority}${O.path}`:O.path.charCodeAt(0)===47&&(O.path.charCodeAt(1)>=65&&O.path.charCodeAt(1)<=90||O.path.charCodeAt(1)>=97&&O.path.charCodeAt(1)<=122)&&O.path.charCodeAt(2)===58?L?O.path.substr(1):O.path[1].toLowerCase()+O.path.substr(2):O.path,i&&(q=q.replace(/\//g,"\\")),q}function ie(O,L){let q=L?W:H,J="",{scheme:C,authority:U,path:z,query:X,fragment:Z}=O;if(C&&(J+=C,J+=":"),(U||C==="file")&&(J+=d,J+=d),U){let ne=U.indexOf("@");if(ne!==-1){let Ee=U.substr(0,ne);U=U.substr(ne+1),ne=Ee.lastIndexOf(":"),ne===-1?J+=q(Ee,!1,!1):(J+=q(Ee.substr(0,ne),!1,!1),J+=":",J+=q(Ee.substr(ne+1),!1,!0)),J+="@"}U=U.toLowerCase(),ne=U.lastIndexOf(":"),ne===-1?J+=q(U,!1,!0):(J+=q(U.substr(0,ne),!1,!0),J+=U.substr(ne))}if(z){if(z.length>=3&&z.charCodeAt(0)===47&&z.charCodeAt(2)===58){let ne=z.charCodeAt(1);ne>=65&&ne<=90&&(z=`/${String.fromCharCode(ne+32)}:${z.substr(3)}`)}else if(z.length>=2&&z.charCodeAt(1)===58){let ne=z.charCodeAt(0);ne>=65&&ne<=90&&(z=`${String.fromCharCode(ne+32)}:${z.substr(2)}`)}J+=q(z,!0,!1)}return X&&(J+="?",J+=q(X,!1,!1)),Z&&(J+="#",J+=L?Z:H(Z,!1,!1)),J}function se(O){try{return decodeURIComponent(O)}catch{return O.length>3?O.substr(0,3)+se(O.substr(3)):O}}let ge=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function we(O){return O.match(ge)?O.replace(ge,L=>se(L)):O}var Pt=r(975);let Sr=Pt.posix||Pt,vr="/";var B;(function(O){O.joinPath=function(L,...q){return L.with({path:Sr.join(L.path,...q)})},O.resolvePath=function(L,...q){let J=L.path,C=!1;J[0]!==vr&&(J=vr+J,C=!0);let U=Sr.resolve(J,...q);return C&&U[0]===vr&&!L.authority&&(U=U.substring(1)),L.with({path:U})},O.dirname=function(L){if(L.path.length===0||L.path===vr)return L;let q=Sr.dirname(L.path);return q.length===1&&q.charCodeAt(0)===46&&(q=""),L.with({path:q})},O.basename=function(L){return Sr.basename(L.path)},O.extname=function(L){return Sr.extname(L.path)}})(B||(B={})),uD=n})();var{URI:pD,Utils:oIe}=uD;var Ov=(t,e,r)=>{let n=t instanceof RegExp?mD(t,r):t,i=e instanceof RegExp?mD(e,r):e,o=n!==null&&i!=null&&V8(n,i,r);return o&&{start:o[0],end:o[1],pre:r.slice(0,o[0]),body:r.slice(o[0]+n.length,o[1]),post:r.slice(o[1]+i.length)}},mD=(t,e)=>{let r=e.match(t);return r?r[0]:null},V8=(t,e,r)=>{let n,i,o,s,l,u=r.indexOf(t),m=r.indexOf(e,u+1),d=u;if(u>=0&&m>0){if(t===e)return[u,m];for(n=[],o=r.length;d>=0&&!l;){if(d===u)n.push(d),u=r.indexOf(t,d+1);else if(n.length===1){let g=n.pop();g!==void 0&&(l=[g,m])}else i=n.pop(),i!==void 0&&i<o&&(o=i,s=m),m=r.indexOf(e,d+1);d=u<m&&u>=0?u:m}n.length&&s!==void 0&&(l=[o,s])}return l};var fD="\0SLASH"+Math.random()+"\0",dD="\0OPEN"+Math.random()+"\0",Uv="\0CLOSE"+Math.random()+"\0",gD="\0COMMA"+Math.random()+"\0",hD="\0PERIOD"+Math.random()+"\0",W8=new RegExp(fD,"g"),$8=new RegExp(dD,"g"),j8=new RegExp(Uv,"g"),z8=new RegExp(gD,"g"),q8=new RegExp(hD,"g"),G8=/\\\\/g,K8=/\\{/g,Q8=/\\}/g,Y8=/\\,/g,Z8=/\\./g;function Nv(t){return isNaN(t)?t.charCodeAt(0):parseInt(t,10)}function J8(t){return t.replace(G8,fD).replace(K8,dD).replace(Q8,Uv).replace(Y8,gD).replace(Z8,hD)}function X8(t){return t.replace(W8,"\\").replace($8,"{").replace(j8,"}").replace(z8,",").replace(q8,".")}function yD(t){if(!t)return[""];let e=[],r=Ov("{","}",t);if(!r)return t.split(",");let{pre:n,body:i,post:o}=r,s=n.split(",");s[s.length-1]+="{"+i+"}";let l=yD(o);return o.length&&(s[s.length-1]+=l.shift(),s.push.apply(s,l)),e.push.apply(e,s),e}function TD(t){return t?(t.slice(0,2)==="{}"&&(t="\\{\\}"+t.slice(2)),fu(J8(t),!0).map(X8)):[]}function e7(t){return"{"+t+"}"}function t7(t){return/^-?0\d/.test(t)}function r7(t,e){return t<=e}function n7(t,e){return t>=e}function fu(t,e){let r=[],n=Ov("{","}",t);if(!n)return[t];let i=n.pre,o=n.post.length?fu(n.post,!1):[""];if(/\$$/.test(n.pre))for(let s=0;s<o.length;s++){let l=i+"{"+n.body+"}"+o[s];r.push(l)}else{let s=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),u=s||l,m=n.body.indexOf(",")>=0;if(!u&&!m)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+Uv+n.post,fu(t)):[t];let d;if(u)d=n.body.split(/\.\./);else if(d=yD(n.body),d.length===1&&d[0]!==void 0&&(d=fu(d[0],!1).map(e7),d.length===1))return o.map(y=>n.pre+d[0]+y);let g;if(u&&d[0]!==void 0&&d[1]!==void 0){let y=Nv(d[0]),x=Nv(d[1]),E=Math.max(d[0].length,d[1].length),w=d.length===3&&d[2]!==void 0?Math.abs(Nv(d[2])):1,H=r7;x<y&&(w*=-1,H=n7);let G=d.some(t7);g=[];for(let ie=y;H(ie,x);ie+=w){let se;if(l)se=String.fromCharCode(ie),se==="\\"&&(se="");else if(se=String(ie),G){let ge=E-se.length;if(ge>0){let we=new Array(ge+1).join("0");ie<0?se="-"+we+se.slice(1):se=we+se}}g.push(se)}}else{g=[];for(let y=0;y<d.length;y++)g.push.apply(g,fu(d[y],!1))}for(let y=0;y<g.length;y++)for(let x=0;x<o.length;x++){let E=i+g[y]+o[x];(!e||u||E)&&r.push(E)}}return r}var du=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var i7={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},gu=t=>t.replace(/[[\]\\-]/g,"\\$&"),o7=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),xD=t=>t.join(""),SD=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,l=!1,u=!1,m=!1,d=r,g="";e:for(;o<t.length;){let w=t.charAt(o);if((w==="!"||w==="^")&&o===r+1){m=!0,o++;continue}if(w==="]"&&s&&!u){d=o+1;break}if(s=!0,w==="\\"&&!u){u=!0,o++;continue}if(w==="["&&!u){for(let[H,[W,G,ie]]of Object.entries(i7))if(t.startsWith(H,o)){if(g)return["$.",!1,t.length-r,!0];o+=H.length,ie?i.push(W):n.push(W),l=l||G;continue e}}if(u=!1,g){w>g?n.push(gu(g)+"-"+gu(w)):w===g&&n.push(gu(w)),g="",o++;continue}if(t.startsWith("-]",o+1)){n.push(gu(w+"-")),o+=2;continue}if(t.startsWith("-",o+1)){g=w,o+=2;continue}n.push(gu(w)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!m){let w=n[0].length===2?n[0].slice(-1):n[0];return[o7(w),!1,d-r,!1]}let y="["+(m?"^":"")+xD(n)+"]",x="["+(m?"":"^")+xD(i)+"]";return[n.length&&i.length?"("+y+"|"+x+")":n.length?y:x,l,d-r,!0]};var Vn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var a7=new Set(["!","?","+","*","@"]),vD=t=>a7.has(t),s7="(?!(?:^|/)\\.\\.?(?:$|/))",Ih="(?!\\.)",c7=new Set(["[","."]),l7=new Set(["..","."]),u7=new Set("().*{}+?[]^$\\!"),p7=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Hv="[^/]",bD=Hv+"*?",wD=Hv+"+?",fc=class t{type;#e;#t;#o=!1;#n=[];#a;#S;#l;#p=!1;#s;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#a=r,this.#e=this.#a?this.#a.#e:this,this.#s=this.#e===this?n:this.#e.#s,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#p&&this.#l.push(this),this.#S=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#h(){if(this!==this.#e)throw new Error("should only call on root");if(this.#p)return this;this.toString(),this.#p=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#a;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#a}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#a===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#p&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#S===0)return!0;let e=this.#a;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,s=!1,l=-1,u=!1;if(r.type===null){let x=n,E="";for(;x<e.length;){let w=e.charAt(x++);if(o||w==="\\"){o=!o,E+=w;continue}if(s){x===l+1?(w==="^"||w==="!")&&(u=!0):w==="]"&&!(x===l+2&&u)&&(s=!1),E+=w;continue}else if(w==="["){s=!0,l=x,u=!1,E+=w;continue}if(!i.noext&&vD(w)&&e.charAt(x)==="("){r.push(E),E="";let H=new t(w,r);x=t.#y(e,H,x,i),r.push(H);continue}E+=w}return r.push(E),x}let m=n+1,d=new t(null,r),g=[],y="";for(;m<e.length;){let x=e.charAt(m++);if(o||x==="\\"){o=!o,y+=x;continue}if(s){m===l+1?(x==="^"||x==="!")&&(u=!0):x==="]"&&!(m===l+2&&u)&&(s=!1),y+=x;continue}else if(x==="["){s=!0,l=m,u=!1,y+=x;continue}if(vD(x)&&e.charAt(m)==="("){d.push(y),y="";let E=new t(x,d);d.push(E),m=t.#y(e,E,m,i);continue}if(x==="|"){d.push(y),y="",g.push(d),d=new t(null,r);continue}if(x===")")return y===""&&r.#n.length===0&&(r.#i=!0),d.push(y),y="",r.push(...g,d),m;y+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],m}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#s.nocase&&!this.#s.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#s.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#s}toRegExpSource(e){let r=e??!!this.#s.dot;if(this.#e===this&&this.#h(),!this.type){let u=this.isStart()&&this.isEnd(),m=this.#n.map(x=>{let[E,w,H,W]=typeof x=="string"?t.#m(x,this.#t,u):x.toRegExpSource(e);return this.#t=this.#t||H,this.#o=this.#o||W,E}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&l7.has(this.#n[0]))){let E=c7,w=r&&E.has(m.charAt(0))||m.startsWith("\\.")&&E.has(m.charAt(2))||m.startsWith("\\.\\.")&&E.has(m.charAt(4)),H=!r&&!e&&E.has(m.charAt(0));d=w?s7:H?Ih:""}let g="";return this.isEnd()&&this.#e.#p&&this.#a?.type==="!"&&(g="(?:$|\\/)"),[d+m+g,Vn(m),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let u=this.toString();return this.#n=[u],this.type=null,this.#t=void 0,[u,Vn(this.toString()),!1,!1]}let s=!n||e||r||!Ih?"":this.#f(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?Ih:"")+wD;else{let u=this.type==="!"?"))"+(this.isStart()&&!r&&!e?Ih:"")+bD+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;l=i+o+u}return[l,Vn(o),this.#t=!!this.#t,this.#o]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#o=this.#o||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",s=!1;for(let l=0;l<e.length;l++){let u=e.charAt(l);if(i){i=!1,o+=(u7.has(u)?"\\":"")+u;continue}if(u==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(u==="["){let[m,d,g,y]=SD(e,l);if(g){o+=m,s=s||d,l+=g-1,r=r||y;continue}}if(u==="*"){n&&e==="*"?o+=wD:o+=bD,r=!0;continue}if(u==="?"){o+=Hv,r=!0;continue}o+=p7(u)}return[o,Vn(e),!!r,s]}};var dc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var yr=(t,e,r={})=>(du(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Yr(e,r).match(t)),m7=/^\*+([^+@!?\*\[\(]*)$/,f7=t=>e=>!e.startsWith(".")&&e.endsWith(t),d7=t=>e=>e.endsWith(t),g7=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),h7=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),y7=/^\*+\.\*+$/,T7=t=>!t.startsWith(".")&&t.includes("."),x7=t=>t!=="."&&t!==".."&&t.includes("."),S7=/^\.\*+$/,v7=t=>t!=="."&&t!==".."&&t.startsWith("."),b7=/^\*+$/,w7=t=>t.length!==0&&!t.startsWith("."),E7=t=>t.length!==0&&t!=="."&&t!=="..",_7=/^\?+([^+@!?\*\[\(]*)?$/,R7=([t,e=""])=>{let r=RD([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},k7=([t,e=""])=>{let r=kD([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},A7=([t,e=""])=>{let r=kD([t]);return e?n=>r(n)&&n.endsWith(e):r},P7=([t,e=""])=>{let r=RD([t]);return e?n=>r(n)&&n.endsWith(e):r},RD=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},kD=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},AD=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",ED={win32:{sep:"\\"},posix:{sep:"/"}},L7=AD==="win32"?ED.win32.sep:ED.posix.sep;yr.sep=L7;var er=Symbol("globstar **");yr.GLOBSTAR=er;var M7="[^/]",D7=M7+"*?",F7="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",C7="(?:(?!(?:\\/|^)\\.).)*?",I7=(t,e={})=>r=>yr(r,t,e);yr.filter=I7;var vn=(t,e={})=>Object.assign({},t,e),O7=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return yr;let e=yr;return Object.assign((n,i,o={})=>e(n,i,vn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,vn(t,o))}static defaults(i){return e.defaults(vn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,vn(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,vn(t,o))}},unescape:(n,i={})=>e.unescape(n,vn(t,i)),escape:(n,i={})=>e.escape(n,vn(t,i)),filter:(n,i={})=>e.filter(n,vn(t,i)),defaults:n=>e.defaults(vn(t,n)),makeRe:(n,i={})=>e.makeRe(n,vn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,vn(t,i)),match:(n,i,o={})=>e.match(n,i,vn(t,o)),sep:e.sep,GLOBSTAR:er})};yr.defaults=O7;var PD=(t,e={})=>(du(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:TD(t));yr.braceExpand=PD;var N7=(t,e={})=>new Yr(t,e).makeRe();yr.makeRe=N7;var U7=(t,e,r={})=>{let n=new Yr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};yr.match=U7;var _D=/[?*]|[+@!]\(.*?\)|\[|\]/,H7=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Yr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){du(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||AD,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=o[0]===""&&o[1]===""&&(o[2]==="?"||!_D.test(o[2]))&&!_D.test(o[3]),m=/^[a-z]:/i.test(o[0]);if(u)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(m)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(u=>this.parse(u))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let l=n[i+1],u=n[i+2],m=n[i+3];if(l!==".."||!u||u==="."||u===".."||!m||m==="."||m==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let l=n[s];s===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let u=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...u),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let w=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),H=!w&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),W=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),G=!W&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),ie=H?3:w?0:void 0,se=G?3:W?0:void 0;if(typeof ie=="number"&&typeof se=="number"){let[ge,we]=[e[ie],r[se]];ge.toLowerCase()===we.toLowerCase()&&(r[se]=ge,se>ie?r=r.slice(se):ie>se&&(e=e.slice(ie)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,l=0,u=e.length,m=r.length;s<u&&l<m;s++,l++){this.debug("matchOne loop");var d=r[l],g=e[s];if(this.debug(r,d,g),d===!1)return!1;if(d===er){this.debug("GLOBSTAR",[r,d,g]);var y=s,x=l+1;if(x===m){for(this.debug("** at the end");s<u;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;y<u;){var E=e[y];if(this.debug(`
globstar while`,e,y,r,x,E),this.matchOne(e.slice(y),r.slice(x),n))return this.debug("globstar found match!",y,u,E),!0;if(E==="."||E===".."||!i.dot&&E.charAt(0)==="."){this.debug("dot detected!",e,y,r,x);break}this.debug("globstar swallow a segment, and continue"),y++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,y,r,x),y===u))}let w;if(typeof d=="string"?(w=g===d,this.debug("string match",d,g,w)):(w=d.test(g),this.debug("pattern match",d,g,w)),!w)return!1}if(s===u&&l===m)return!0;if(s===u)return n;if(l===m)return s===u-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return PD(this.pattern,this.options)}parse(e){du(e);let r=this.options;if(e==="**")return er;if(e==="")return"";let n,i=null;(n=e.match(b7))?i=r.dot?E7:w7:(n=e.match(m7))?i=(r.nocase?r.dot?h7:g7:r.dot?d7:f7)(n[1]):(n=e.match(_7))?i=(r.nocase?r.dot?k7:R7:r.dot?A7:P7)(n):(n=e.match(y7))?i=r.dot?x7:T7:(n=e.match(S7))&&(i=v7);let o=fc.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?D7:r.dot?F7:C7,i=new Set(r.nocase?["i"]:[]),o=e.map(u=>{let m=u.map(d=>{if(d instanceof RegExp)for(let g of d.flags.split(""))i.add(g);return typeof d=="string"?H7(d):d===er?er:d._src});return m.forEach((d,g)=>{let y=m[g+1],x=m[g-1];d!==er||x===er||(x===void 0?y!==void 0&&y!==er?m[g+1]="(?:\\/|"+n+"\\/)?"+y:m[g]=n:y===void 0?m[g-1]=x+"(?:\\/|"+n+")?":y!==er&&(m[g-1]=x+"(?:\\/|\\/"+n+"\\/)"+y,m[g+1]=er))}),m.filter(d=>d!==er).join("/")}).join("|"),[s,l]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let l=i.length-2;!s&&l>=0;l--)s=i[l];for(let l=0;l<o.length;l++){let u=o[l],m=i;if(n.matchBase&&u.length===1&&(m=[s]),this.matchOne(m,u,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return yr.defaults(e).Minimatch}};yr.AST=fc;yr.Minimatch=Yr;yr.escape=dc;yr.unescape=Vn;var XD=require("node:url");var gc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,MD=new Set,Bv=typeof process=="object"&&process?process:{},DD=(t,e,r,n)=>{typeof Bv.emitWarning=="function"?Bv.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},Oh=globalThis.AbortController,LD=globalThis.AbortSignal;if(typeof Oh>"u"){LD=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},Oh=class{constructor(){e()}signal=new LD;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=Bv.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,DD("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var B7=t=>!MD.has(t),LIe=Symbol("type"),Po=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),FD=t=>Po(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?hc:null:null,hc=class extends Array{constructor(e){super(e),this.fill(0)}},Vv=class t{heap;length;static#e=!1;static create(e){let r=FD(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},hu=class t{#e;#t;#o;#n;#a;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#p;#s;#c;#i;#h;#y;#f;#m;#w;#g;#E;#_;#x;#v;#b;#d;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#x,sizes:e.#E,keyMap:e.#s,keyList:e.#c,valList:e.#i,next:e.#h,prev:e.#y,get head(){return e.#f},get tail(){return e.#m},free:e.#w,isBackgroundFetch:r=>e.#u(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#B(r),indexes:r=>e.#k(r),rindexes:r=>e.#A(r),isStale:r=>e.#T(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#p}get size(){return this.#l}get fetchMethod(){return this.#a}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:l,allowStale:u,dispose:m,disposeAfter:d,noDisposeOnSet:g,noUpdateTTL:y,maxSize:x=0,maxEntrySize:E=0,sizeCalculation:w,fetchMethod:H,memoMethod:W,noDeleteOnFetchRejection:G,noDeleteOnStaleGet:ie,allowStaleOnFetchRejection:se,allowStaleOnFetchAbort:ge,ignoreFetchAbort:we}=e;if(r!==0&&!Po(r))throw new TypeError("max option must be a nonnegative integer");let Pt=r?FD(r):Array;if(!Pt)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=E||this.#t,this.sizeCalculation=w,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(W!==void 0&&typeof W!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=W,H!==void 0&&typeof H!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=H,this.#b=!!H,this.#s=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#h=new Pt(r),this.#y=new Pt(r),this.#f=0,this.#m=0,this.#w=Vv.create(r),this.#l=0,this.#p=0,typeof m=="function"&&(this.#o=m),typeof d=="function"?(this.#n=d,this.#g=[]):(this.#n=void 0,this.#g=void 0),this.#v=!!this.#o,this.#d=!!this.#n,this.noDisposeOnSet=!!g,this.noUpdateTTL=!!y,this.noDeleteOnFetchRejection=!!G,this.allowStaleOnFetchRejection=!!se,this.allowStaleOnFetchAbort=!!ge,this.ignoreFetchAbort=!!we,this.maxEntrySize!==0){if(this.#t!==0&&!Po(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Po(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#L()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!ie,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!l,this.ttlResolution=Po(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Po(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#P()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let Sr="LRU_CACHE_UNBOUNDED";B7(Sr)&&(MD.add(Sr),DD("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Sr,t))}}getRemainingTTL(e){return this.#s.has(e)?1/0:0}#P(){let e=new hc(this.#e),r=new hc(this.#e);this.#x=e,this.#_=r,this.#D=(o,s,l=gc.now())=>{if(r[o]=s!==0?l:0,e[o]=s,s!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#T(o)&&this.#M(this.#c[o],"expire")},s+1);u.unref&&u.unref()}},this.#R=o=>{r[o]=e[o]!==0?gc.now():0},this.#r=(o,s)=>{if(e[s]){let l=e[s],u=r[s];if(!l||!u)return;o.ttl=l,o.start=u,o.now=n||i();let m=o.now-u;o.remainingTTL=l-m}};let n=0,i=()=>{let o=gc.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#s.get(o);if(s===void 0)return 0;let l=e[s],u=r[s];if(!l||!u)return 1/0;let m=(n||i())-u;return l-m},this.#T=o=>{let s=r[o],l=e[o];return!!l&&!!s&&(n||i())-s>l}}#R=()=>{};#r=()=>{};#D=()=>{};#T=()=>!1;#L(){let e=new hc(this.#e);this.#p=0,this.#E=e,this.#F=r=>{this.#p-=e[r],e[r]=0},this.#I=(r,n,i,o)=>{if(this.#u(n))return 0;if(!Po(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Po(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#p>o;)this.#N(!0)}this.#p+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#p)}}#F=e=>{};#C=(e,r,n)=>{};#I=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#m;!(!this.#O(r)||((e||!this.#T(r))&&(yield r),r===this.#f));)r=this.#y[r]}*#A({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#O(r)||((e||!this.#T(r))&&(yield r),r===this.#m));)r=this.#h[r]}#O(e){return e!==void 0&&this.#s.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#A())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#A()){let r=this.#c[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#A())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#A()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#A({allowStale:!0}))this.#T(r)&&(this.#M(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#s.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#u(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#x&&this.#_){let s=this.#x[r],l=this.#_[r];if(s&&l){let u=s-(gc.now()-l);o.ttl=u,o.start=Date.now()}}return this.#E&&(o.size=this.#E[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#u(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#x&&this.#_){s.ttl=this.#x[r];let l=gc.now()-this.#_[r];s.start=Math.floor(Date.now()-l)}this.#E&&(s.size=this.#E[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=gc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:u}=n,{noUpdateTTL:m=this.noUpdateTTL}=n,d=this.#I(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.#M(e,"set"),this;let g=this.#l===0?void 0:this.#s.get(e);if(g===void 0)g=this.#l===0?this.#m:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#N(!1):this.#l,this.#c[g]=e,this.#i[g]=r,this.#s.set(e,g),this.#h[this.#m]=g,this.#y[g]=this.#m,this.#m=g,this.#l++,this.#C(g,d,u),u&&(u.set="add"),m=!1;else{this.#B(g);let y=this.#i[g];if(r!==y){if(this.#b&&this.#u(y)){y.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=y;x!==void 0&&!s&&(this.#v&&this.#o?.(x,e,"set"),this.#d&&this.#g?.push([x,e,"set"]))}else s||(this.#v&&this.#o?.(y,e,"set"),this.#d&&this.#g?.push([y,e,"set"]));if(this.#F(g),this.#C(g,d,u),this.#i[g]=r,u){u.set="replace";let x=y&&this.#u(y)?y.__staleWhileFetching:y;x!==void 0&&(u.oldValue=x)}}else u&&(u.set="update")}if(i!==0&&!this.#x&&this.#P(),this.#x&&(m||this.#D(g,i,o),u&&this.#r(u,g)),!s&&this.#d&&this.#g){let y=this.#g,x;for(;x=y?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#f];if(this.#N(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#g){let e=this.#g,r;for(;r=e?.shift();)this.#n?.(...r)}}}#N(e){let r=this.#f,n=this.#c[r],i=this.#i[r];return this.#b&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(i,n,"evict"),this.#d&&this.#g?.push([i,n,"evict"])),this.#F(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#f=this.#m=0,this.#w.length=0):this.#f=this.#h[r],this.#s.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#s.get(e);if(o!==void 0){let s=this.#i[o];if(this.#u(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#T(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#s.get(e);if(i===void 0||!n&&this.#T(i))return;let o=this.#i[i];return this.#u(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#u(o))return o;let s=new Oh,{signal:l}=n;l?.addEventListener("abort",()=>s.abort(l.reason),{signal:s.signal});let u={signal:s.signal,options:n,context:i},m=(w,H=!1)=>{let{aborted:W}=s.signal,G=n.ignoreFetchAbort&&w!==void 0;if(n.status&&(W&&!H?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,G&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),W&&!G&&!H)return g(s.signal.reason);let ie=x;return this.#i[r]===x&&(w===void 0?ie.__staleWhileFetching?this.#i[r]=ie.__staleWhileFetching:this.#M(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,w,u.options))),w},d=w=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=w),g(w)),g=w=>{let{aborted:H}=s.signal,W=H&&n.allowStaleOnFetchAbort,G=W||n.allowStaleOnFetchRejection,ie=G||n.noDeleteOnFetchRejection,se=x;if(this.#i[r]===x&&(!ie||se.__staleWhileFetching===void 0?this.#M(e,"fetch"):W||(this.#i[r]=se.__staleWhileFetching)),G)return n.status&&se.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),se.__staleWhileFetching;if(se.__returned===se)throw w},y=(w,H)=>{let W=this.#a?.(e,o,u);W&&W instanceof Promise&&W.then(G=>w(G===void 0?void 0:G),H),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(w(void 0),n.allowStaleOnFetchAbort&&(w=G=>m(G,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(y).then(m,d),E=Object.assign(x,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,E,{...u.options,status:void 0}),r=this.#s.get(e)):this.#i[r]=E,E}#u(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Oh}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:u=0,sizeCalculation:m=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:g=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:y=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:E=this.allowStaleOnFetchAbort,context:w,forceRefresh:H=!1,status:W,signal:G}=r;if(!this.#b)return W&&(W.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:W});let ie={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:l,size:u,sizeCalculation:m,noUpdateTTL:d,noDeleteOnFetchRejection:g,allowStaleOnFetchRejection:y,allowStaleOnFetchAbort:E,ignoreFetchAbort:x,status:W,signal:G},se=this.#s.get(e);if(se===void 0){W&&(W.fetch="miss");let ge=this.#U(e,se,ie,w);return ge.__returned=ge}else{let ge=this.#i[se];if(this.#u(ge)){let B=n&&ge.__staleWhileFetching!==void 0;return W&&(W.fetch="inflight",B&&(W.returnedStale=!0)),B?ge.__staleWhileFetching:ge.__returned=ge}let we=this.#T(se);if(!H&&!we)return W&&(W.fetch="hit"),this.#B(se),i&&this.#R(se),W&&this.#r(W,se),ge;let Pt=this.#U(e,se,ie,w),vr=Pt.__staleWhileFetching!==void 0&&n;return W&&(W.fetch=we?"stale":"refresh",vr&&we&&(W.returnedStale=!0)),vr?Pt.__staleWhileFetching:Pt.__returned=Pt}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=r,l=this.get(e,s);if(!o&&l!==void 0)return l;let u=n(e,l,{options:s,context:i});return this.set(e,u,s),u}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,l=this.#s.get(e);if(l!==void 0){let u=this.#i[l],m=this.#u(u);return s&&this.#r(s,l),this.#T(l)?(s&&(s.get="stale"),m?(s&&n&&u.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?u.__staleWhileFetching:void 0):(o||this.#M(e,"expire"),s&&n&&(s.returnedStale=!0),n?u:void 0)):(s&&(s.get="hit"),m?u.__staleWhileFetching:(this.#B(l),i&&this.#R(l),u))}else s&&(s.get="miss")}#H(e,r){this.#y[r]=e,this.#h[e]=r}#B(e){e!==this.#m&&(e===this.#f?this.#f=this.#h[e]:this.#H(this.#y[e],this.#h[e]),this.#H(this.#m,e),this.#m=e)}delete(e){return this.#M(e,"delete")}#M(e,r){let n=!1;if(this.#l!==0){let i=this.#s.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#V(r);else{this.#F(i);let o=this.#i[i];if(this.#u(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(o,e,r),this.#d&&this.#g?.push([o,e,r])),this.#s.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#m)this.#m=this.#y[i];else if(i===this.#f)this.#f=this.#h[i];else{let s=this.#y[i];this.#h[s]=this.#h[i];let l=this.#h[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#d&&this.#g?.length){let i=this.#g,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#V("delete")}#V(e){for(let r of this.#A({allowStale:!0})){let n=this.#i[r];if(this.#u(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#d&&this.#g?.push([n,i,e])}}if(this.#s.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#x&&this.#_&&(this.#x.fill(0),this.#_.fill(0)),this.#E&&this.#E.fill(0),this.#f=0,this.#m=0,this.#w.length=0,this.#p=0,this.#l=0,this.#d&&this.#g){let r=this.#g,n;for(;n=r?.shift();)this.#n?.(...n)}}};var xc=require("node:path"),$D=require("node:url"),gi=require("fs"),Y7=ln(require("node:fs"),1),Do=require("node:fs/promises");var $h=require("node:events"),Kv=ln(require("node:stream"),1),UD=require("node:string_decoder"),CD=typeof process=="object"&&process?process:{stdout:null,stderr:null},V7=t=>!!t&&typeof t=="object"&&(t instanceof Mo||t instanceof Kv.default||W7(t)||$7(t)),W7=t=>!!t&&typeof t=="object"&&t instanceof $h.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==Kv.default.Writable.prototype.pipe,$7=t=>!!t&&typeof t=="object"&&t instanceof $h.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Bi=Symbol("EOF"),Vi=Symbol("maybeEmitEnd"),Lo=Symbol("emittedEnd"),Nh=Symbol("emittingEnd"),yu=Symbol("emittedError"),Uh=Symbol("closed"),ID=Symbol("read"),Hh=Symbol("flush"),OD=Symbol("flushChunk"),Wn=Symbol("encoding"),yc=Symbol("decoder"),Wt=Symbol("flowing"),Tu=Symbol("paused"),Tc=Symbol("resume"),$t=Symbol("buffer"),Tr=Symbol("pipes"),jt=Symbol("bufferLength"),Wv=Symbol("bufferPush"),Bh=Symbol("bufferShift"),sr=Symbol("objectMode"),At=Symbol("destroyed"),$v=Symbol("error"),jv=Symbol("emitData"),ND=Symbol("emitEnd"),zv=Symbol("emitEnd2"),fi=Symbol("async"),qv=Symbol("abort"),Vh=Symbol("aborted"),xu=Symbol("signal"),Pa=Symbol("dataListeners"),Zr=Symbol("discarded"),Su=t=>Promise.resolve().then(t),j7=t=>t(),z7=t=>t==="end"||t==="finish"||t==="prefinish",q7=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,G7=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Wh=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[Tc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Gv=class extends Wh{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},K7=t=>!!t.objectMode,Q7=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Mo=class extends $h.EventEmitter{[Wt]=!1;[Tu]=!1;[Tr]=[];[$t]=[];[sr];[Wn];[fi];[yc];[Bi]=!1;[Lo]=!1;[Nh]=!1;[Uh]=!1;[yu]=null;[jt]=0;[At]=!1;[xu];[Vh]=!1;[Pa]=0;[Zr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");K7(r)?(this[sr]=!0,this[Wn]=null):Q7(r)?(this[Wn]=r.encoding,this[sr]=!1):(this[sr]=!1,this[Wn]=null),this[fi]=!!r.async,this[yc]=this[Wn]?new UD.StringDecoder(this[Wn]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[$t]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Tr]});let{signal:n}=r;n&&(this[xu]=n,n.aborted?this[qv]():n.addEventListener("abort",()=>this[qv]()))}get bufferLength(){return this[jt]}get encoding(){return this[Wn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[sr]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[fi]}set async(e){this[fi]=this[fi]||!!e}[qv](){this[Vh]=!0,this.emit("abort",this[xu]?.reason),this.destroy(this[xu]?.reason)}get aborted(){return this[Vh]}set aborted(e){}write(e,r,n){if(this[Vh])return!1;if(this[Bi])throw new Error("write after end");if(this[At])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[fi]?Su:j7;if(!this[sr]&&!Buffer.isBuffer(e)){if(G7(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(q7(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[sr]?(this[Wt]&&this[jt]!==0&&this[Hh](!0),this[Wt]?this.emit("data",e):this[Wv](e),this[jt]!==0&&this.emit("readable"),n&&i(n),this[Wt]):e.length?(typeof e=="string"&&!(r===this[Wn]&&!this[yc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Wn]&&(e=this[yc].write(e)),this[Wt]&&this[jt]!==0&&this[Hh](!0),this[Wt]?this.emit("data",e):this[Wv](e),this[jt]!==0&&this.emit("readable"),n&&i(n),this[Wt]):(this[jt]!==0&&this.emit("readable"),n&&i(n),this[Wt])}read(e){if(this[At])return null;if(this[Zr]=!1,this[jt]===0||e===0||e&&e>this[jt])return this[Vi](),null;this[sr]&&(e=null),this[$t].length>1&&!this[sr]&&(this[$t]=[this[Wn]?this[$t].join(""):Buffer.concat(this[$t],this[jt])]);let r=this[ID](e||null,this[$t][0]);return this[Vi](),r}[ID](e,r){if(this[sr])this[Bh]();else{let n=r;e===n.length||e===null?this[Bh]():typeof n=="string"?(this[$t][0]=n.slice(e),r=n.slice(0,e),this[jt]-=e):(this[$t][0]=n.subarray(e),r=n.subarray(0,e),this[jt]-=e)}return this.emit("data",r),!this[$t].length&&!this[Bi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Bi]=!0,this.writable=!1,(this[Wt]||!this[Tu])&&this[Vi](),this}[Tc](){this[At]||(!this[Pa]&&!this[Tr].length&&(this[Zr]=!0),this[Tu]=!1,this[Wt]=!0,this.emit("resume"),this[$t].length?this[Hh]():this[Bi]?this[Vi]():this.emit("drain"))}resume(){return this[Tc]()}pause(){this[Wt]=!1,this[Tu]=!0,this[Zr]=!1}get destroyed(){return this[At]}get flowing(){return this[Wt]}get paused(){return this[Tu]}[Wv](e){this[sr]?this[jt]+=1:this[jt]+=e.length,this[$t].push(e)}[Bh](){return this[sr]?this[jt]-=1:this[jt]-=this[$t][0].length,this[$t].shift()}[Hh](e=!1){do;while(this[OD](this[Bh]())&&this[$t].length);!e&&!this[$t].length&&!this[Bi]&&this.emit("drain")}[OD](e){return this.emit("data",e),this[Wt]}pipe(e,r){if(this[At])return e;this[Zr]=!1;let n=this[Lo];return r=r||{},e===CD.stdout||e===CD.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[Tr].push(r.proxyErrors?new Gv(this,e,r):new Wh(this,e,r)),this[fi]?Su(()=>this[Tc]()):this[Tc]()),e}unpipe(e){let r=this[Tr].find(n=>n.dest===e);r&&(this[Tr].length===1?(this[Wt]&&this[Pa]===0&&(this[Wt]=!1),this[Tr]=[]):this[Tr].splice(this[Tr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Zr]=!1,this[Pa]++,!this[Tr].length&&!this[Wt]&&this[Tc]();else if(e==="readable"&&this[jt]!==0)super.emit("readable");else if(z7(e)&&this[Lo])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[yu]){let i=r;this[fi]?Su(()=>i.call(this,this[yu])):i.call(this,this[yu])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Pa]=this.listeners("data").length,this[Pa]===0&&!this[Zr]&&!this[Tr].length&&(this[Wt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Pa]=0,!this[Zr]&&!this[Tr].length&&(this[Wt]=!1)),r}get emittedEnd(){return this[Lo]}[Vi](){!this[Nh]&&!this[Lo]&&!this[At]&&this[$t].length===0&&this[Bi]&&(this[Nh]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Uh]&&this.emit("close"),this[Nh]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==At&&this[At])return!1;if(e==="data")return!this[sr]&&!n?!1:this[fi]?(Su(()=>this[jv](n)),!0):this[jv](n);if(e==="end")return this[ND]();if(e==="close"){if(this[Uh]=!0,!this[Lo]&&!this[At])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[yu]=n,super.emit($v,n);let o=!this[xu]||this.listeners("error").length?super.emit("error",n):!1;return this[Vi](),o}else if(e==="resume"){let o=super.emit("resume");return this[Vi](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Vi](),i}[jv](e){for(let n of this[Tr])n.dest.write(e)===!1&&this.pause();let r=this[Zr]?!1:super.emit("data",e);return this[Vi](),r}[ND](){return this[Lo]?!1:(this[Lo]=!0,this.readable=!1,this[fi]?(Su(()=>this[zv]()),!0):this[zv]())}[zv](){if(this[yc]){let r=this[yc].end();if(r){for(let n of this[Tr])n.dest.write(r);this[Zr]||super.emit("data",r)}}for(let r of this[Tr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[sr]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[sr]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[sr])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Wn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(At,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Zr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Bi])return r();let o,s,l=g=>{this.off("data",u),this.off("end",m),this.off(At,d),r(),s(g)},u=g=>{this.off("error",l),this.off("end",m),this.off(At,d),this.pause(),o({value:g,done:!!this[Bi]})},m=()=>{this.off("error",l),this.off("data",u),this.off(At,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((g,y)=>{s=y,o=g,this.once(At,d),this.once("error",l),this.once("end",m),this.once("data",u)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Zr]=!1;let e=!1,r=()=>(this.pause(),this.off($v,r),this.off(At,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once($v,r),this.once(At,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[At])return e?this.emit("error",e):this.emit(At),this;this[At]=!0,this[Zr]=!0,this[$t].length=0,this[jt]=0;let r=this;return typeof r.close=="function"&&!this[Uh]&&r.close(),e?this.emit("error",e):this.emit(At),this}static get isStream(){return V7}};var Z7=gi.realpathSync.native,bu={lstatSync:gi.lstatSync,readdir:gi.readdir,readdirSync:gi.readdirSync,readlinkSync:gi.readlinkSync,realpathSync:Z7,promises:{lstat:Do.lstat,readdir:Do.readdir,readlink:Do.readlink,realpath:Do.realpath}},jD=t=>!t||t===bu||t===Y7?bu:{...bu,...t,promises:{...bu.promises,...t.promises||{}}},zD=/^\\\\\?\\([a-z]:)\\?$/i,J7=t=>t.replace(/\//g,"\\").replace(zD,"$1\\"),X7=/[\\\/]/,wn=0,qD=1,GD=2,di=4,KD=6,QD=8,La=10,YD=12,bn=15,vu=~bn,Qv=16,HD=32,wu=64,$n=128,jh=256,qh=512,BD=wu|$n|qh,eQ=1023,Yv=t=>t.isFile()?QD:t.isDirectory()?di:t.isSymbolicLink()?La:t.isCharacterDevice()?GD:t.isBlockDevice()?KD:t.isSocket()?YD:t.isFIFO()?qD:wn,VD=new Map,Eu=t=>{let e=VD.get(t);if(e)return e;let r=t.normalize("NFKD");return VD.set(t,r),r},WD=new Map,zh=t=>{let e=WD.get(t);if(e)return e;let r=Eu(t.toLowerCase());return WD.set(t,r),r},Gh=class extends hu{constructor(){super({max:256})}},Zv=class extends hu{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},ZD=Symbol("PathScurry setAsCwd"),cr=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#p;get blksize(){return this.#p}#s;get ino(){return this.#s}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#h;get atimeMs(){return this.#h}#y;get mtimeMs(){return this.#y}#f;get ctimeMs(){return this.#f}#m;get birthtimeMs(){return this.#m}#w;get atime(){return this.#w}#g;get mtime(){return this.#g}#E;get ctime(){return this.#E}#_;get birthtime(){return this.#_}#x;#v;#b;#d;#P;#R;#r;#D;#T;#L;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=wn,n,i,o,s,l){this.name=e,this.#x=o?zh(e):Eu(e),this.#r=r&eQ,this.nocase=o,this.roots=i,this.root=n||this,this.#D=s,this.#b=l.fullpath,this.#P=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=jD(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#D}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#D.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#D.set(this,r),this.#r&=~Qv,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?zh(e):Eu(e);for(let u of n)if(u.#x===i)return u;let o=this.parent?this.sep:"",s=this.#b?this.#b+o+e:void 0,l=this.newChild(e,wn,{...r,parent:this,fullpath:s});return this.canReaddir()||(l.#r|=$n),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#P!==void 0)return this.#P;let e=this.name,r=this.parent;if(!r)return this.#P=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#d!==void 0)return this.#d;if(this.sep==="/")return this.#d=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#d=`//?/${i}`:this.#d=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#d=n}isUnknown(){return(this.#r&bn)===wn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&bn)===QD}isDirectory(){return(this.#r&bn)===di}isCharacterDevice(){return(this.#r&bn)===GD}isBlockDevice(){return(this.#r&bn)===KD}isFIFO(){return(this.#r&bn)===qD}isSocket(){return(this.#r&bn)===YD}isSymbolicLink(){return(this.#r&La)===La}lstatCached(){return this.#r&HD?this:void 0}readlinkCached(){return this.#T}realpathCached(){return this.#L}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#T)return!0;if(!this.parent)return!1;let e=this.#r&bn;return!(e!==wn&&e!==La||this.#r&jh||this.#r&$n)}calledReaddir(){return!!(this.#r&Qv)}isENOENT(){return!!(this.#r&$n)}isNamed(e){return this.nocase?this.#x===zh(e):this.#x===Eu(e)}async readlink(){let e=this.#T;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#T=n}catch(r){this.#u(r.code);return}}readlinkSync(){let e=this.#T;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#T=n}catch(r){this.#u(r.code);return}}#C(e){this.#r|=Qv;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#I()}}#I(){this.#r&$n||(this.#r=(this.#r|$n)&vu,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#I()}#A(){this.#r|=qh,this.#O()}#O(){if(this.#r&wu)return;let e=this.#r;(e&bn)===di&&(e&=vu),this.#r=e|wu,this.#k()}#N(e=""){e==="ENOTDIR"||e==="EPERM"?this.#O():e==="ENOENT"?this.#I():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#O():e==="ENOENT"&&this.#I()}#u(e=""){let r=this.#r;r|=jh,e==="ENOENT"&&(r|=$n),(e==="EINVAL"||e==="UNKNOWN")&&(r&=vu),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#O()}#H(e,r){return this.#M(e,r)||this.#B(e,r)}#B(e,r){let n=Yv(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&bn;return o!==di&&o!==La&&o!==wn&&(i.#r|=wu),r.unshift(i),r.provisional++,i}#M(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?zh(e.name):Eu(e.name))===i.#x)return this.#V(e,i,n,r)}}#V(e,r,n,i){let o=r.name;return r.#r=r.#r&vu|Yv(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if((this.#r&$n)===0)try{return this.#z(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if((this.#r&$n)===0)try{return this.#z(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#z(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:s,blocks:l,ctime:u,ctimeMs:m,dev:d,gid:g,ino:y,mode:x,mtime:E,mtimeMs:w,nlink:H,rdev:W,size:G,uid:ie}=e;this.#w=r,this.#h=n,this.#_=i,this.#m=o,this.#p=s,this.#i=l,this.#E=u,this.#f=m,this.#t=d,this.#S=g,this.#s=y,this.#o=x,this.#g=E,this.#y=w,this.#n=H,this.#l=W,this.#c=G,this.#a=ie;let se=Yv(e);this.#r=this.#r&vu|se|HD,se!==wn&&se!==di&&se!==La&&(this.#r|=wu)}#$=[];#j=!1;#q(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,s)=>{if(o)this.#N(o.code),n.provisional=0;else{for(let l of s)this.#H(l,n);this.#C(n)}this.#q(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#C(e)}catch(i){this.#N(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#C(e)}catch(n){this.#N(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&BD)return!1;let e=bn&this.#r;return e===wn||e===di||e===La}shouldWalk(e,r){return(this.#r&di)===di&&!(this.#r&BD)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#L)return this.#L;if(!((qh|jh|$n)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#L=this.resolve(e)}catch{this.#A()}}realpathSync(){if(this.#L)return this.#L;if(!((qh|jh|$n)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#L=this.resolve(e)}catch{this.#A()}}[ZD](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#P=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#P=void 0,i.#R=void 0,i=i.parent}},Kh=class t extends cr{sep="\\";splitSep=X7;constructor(e,r=wn,n,i,o,s,l){super(e,r,n,i,o,s,l)}newChild(e,r=wn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return xc.win32.parse(e).root}getRoot(e){if(e=J7(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new Sc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(zD,"$1\\"),e===r}},Qh=class t extends cr{splitSep="/";sep="/";constructor(e,r=wn,n,i,o,s,l){super(e,r,n,i,o,s,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=wn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},Yh=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:s=bu}={}){this.#n=jD(s),(e instanceof URL||e.startsWith("file://"))&&(e=(0,$D.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new Gh,this.#t=new Gh,this.#o=new Zv(o);let u=l.substring(this.rootPath.length).split(n);if(u.length===1&&!u[0]&&u.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let m=this.root,d=u.length-1,g=r.sep,y=this.rootPath,x=!1;for(let E of u){let w=d--;m=m.child(E,{relative:new Array(w).fill("..").join(g),relativePosix:new Array(w).fill("..").join("/"),fullpath:y+=(x?"":g)+E}),x=!0}this.cwd=m}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set,m=(g,y)=>{u.add(g),g.readdirCB((x,E)=>{if(x)return y(x);let w=E.length;if(!w)return y();let H=()=>{--w===0&&y()};for(let W of E)(!o||o(W))&&l.push(n?W:W.fullpath()),i&&W.isSymbolicLink()?W.realpath().then(G=>G?.isUnknown()?G.lstat():G).then(G=>G?.shouldWalk(u,s)?m(G,H):H()):W.shouldWalk(u,s)?m(W,H):H()},!0)},d=e;return new Promise((g,y)=>{m(d,x=>{if(x)return y(x);g(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set([e]);for(let m of u){let d=m.readdirSync();for(let g of d){(!o||o(g))&&l.push(n?g:g.fullpath());let y=g;if(g.isSymbolicLink()){if(!(i&&(y=g.realpathSync())))continue;y.isUnknown()&&y.lstatSync()}y.shouldWalk(u,s)&&u.add(y)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let u of l){let m=u.readdirSync();for(let d of m){(!o||o(d))&&(yield n?d:d.fullpath());let g=d;if(d.isSymbolicLink()){if(!(i&&(g=d.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(l,s)&&l.add(g)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Mo({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let u=new Set,m=[e],d=0,g=()=>{let y=!1;for(;!y;){let x=m.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let E=(H,W,G=!1)=>{if(H)return l.emit("error",H);if(i&&!G){let ie=[];for(let se of W)se.isSymbolicLink()&&ie.push(se.realpath().then(ge=>ge?.isUnknown()?ge.lstat():ge));if(ie.length){Promise.all(ie).then(()=>E(null,W,!0));return}}for(let ie of W)ie&&(!o||o(ie))&&(l.write(n?ie:ie.fullpath())||(y=!0));d--;for(let ie of W){let se=ie.realpathCached()||ie;se.shouldWalk(u,s)&&m.push(se)}y&&!l.flowing?l.once("drain",g):w||g()},w=!0;x.readdirCB(E,!0),w=!1}};return g(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof cr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Mo({objectMode:!0}),u=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let m=[e],d=0,g=()=>{let y=!1;for(;!y;){let x=m.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let E=x.readdirSync();for(let w of E)(!o||o(w))&&(l.write(n?w:w.fullpath())||(y=!0));d--;for(let w of E){let H=w;if(w.isSymbolicLink()){if(!(i&&(H=w.realpathSync())))continue;H.isUnknown()&&H.lstatSync()}H.shouldWalk(u,s)&&m.push(H)}}y&&!l.flowing&&l.once("drain",g)};return g(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[ZD](r)}},Sc=class extends Yh{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,xc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return xc.win32.parse(e).root.toUpperCase()}newRoot(e){return new Kh(this.rootPath,di,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},vc=class extends Yh{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,xc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Qh(this.rootPath,di,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},_u=class extends vc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},IIe=process.platform==="win32"?Kh:Qh,JD=process.platform==="win32"?Sc:process.platform==="darwin"?_u:vc;var tQ=t=>t.length>=1,rQ=t=>t.length>=1,bc=class t{#e;#t;#o;length;#n;#a;#S;#l;#p;#s;#c=!0;constructor(e,r,n,i){if(!tQ(e))throw new TypeError("empty pattern list");if(!rQ(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,s,l,u,...m]=this.#e,[d,g,y,x,...E]=this.#t;m[0]===""&&(m.shift(),E.shift());let w=[o,s,l,u,""].join("/"),H=[d,g,y,x,""].join("/");this.#e=[w,...m],this.#t=[H,...E],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...s]=this.#e,[l,...u]=this.#t;s[0]===""&&(s.shift(),u.shift());let m=o+"/",d=l+"/";this.#e=[m,...s],this.#t=[d,...u],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===er}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new t(this.#e,this.#t,this.#o+1,this.#n),this.#a.#s=this.#s,this.#a.#p=this.#p,this.#a.#l=this.#l,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#p!==void 0?this.#p:this.#p=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#s!==void 0?this.#s:this.#s=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var nQ=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",wc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:s=nQ}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=s,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new Yr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let s=new bc(i,o,0,this.platform),l=new Yr(s.globString(),this.mmopts),u=o[o.length-1]==="**",m=s.isAbsolute();m?this.absolute.push(l):this.relative.push(l),u&&(m?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let s of this.relative)if(s.match(i)||s.match(o))return!0;for(let s of this.absolute)if(s.match(r)||s.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var Jv=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},Xv=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},eb=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},Ru=class t{hasWalkedCache;matches=new Xv;subwalks=new eb;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Jv}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let s=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(s){i=i.resolve(s==="/"&&this.opts.root!==void 0?this.opts.root:s);let g=o.rest();if(g)o=g;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let u,m,d=!1;for(;typeof(u=o.pattern())=="string"&&(m=o.rest());)i=i.resolve(u),o=m,d=!0;if(u=o.pattern(),m=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof u=="string"){let g=u===".."||u===""||u===".";this.matches.add(i.resolve(u),l,g);continue}else if(u===er){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let g=m?.pattern(),y=m?.rest();if(!m||(g===""||g===".")&&!y)this.matches.add(i,l,g===""||g===".");else if(g===".."){let x=i.parent||i;y?this.hasWalkedCache.hasWalked(x,y)||this.subwalks.add(x,y):this.matches.add(x,l,!0)}}else u instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let s of n){let l=s.isAbsolute(),u=s.pattern(),m=s.rest();u===er?i.testGlobstar(o,s,m,l):u instanceof RegExp?i.testRegExp(o,u,m,l):i.testString(o,u,m,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let s=e.parent||e;this.subwalks.add(s,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var iQ=(t,e)=>typeof t=="string"?new wc([t],e):Array.isArray(t)?new wc(t,e):t,Zh=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=iQ(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#a(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=await o.realpath();s&&(s.isUnknown()||this.opts.stat)&&await s.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=o.realpathSync();s&&(s?.isUnknown()||this.opts.stat)&&s.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),s=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?s+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new Ru(this.opts),n)}walkCB2(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,m).then(()=>s()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirCached();l.calledReaddir()?this.walkCB3(l,u,n,s):l.readdirCB((m,d)=>this.walkCB3(l,d,n,s),!0)}s()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,m).then(()=>s()));for(let[l,u]of n.subwalks.entries())o++,this.walkCB2(l,u,n.child(),s);s()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new Ru(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||this.matchSync(l,u,m);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirSync();this.walkCB3Sync(l,u,n,s)}s()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||this.matchSync(l,u,m);for(let[l,u]of n.subwalks.entries())o++,this.walkCB2Sync(l,u,n.child(),s);s()}},ku=class extends Zh{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},Au=class extends Zh{results;constructor(e,r,n){super(e,r,n),this.results=new Mo({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var oQ=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",jn=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,XD.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(u=>u.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(u=>u.includes("/")?u:`./**/${u}`)}if(this.pattern=e,this.platform=r.platform||oQ,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let u=r.platform==="win32"?Sc:r.platform==="darwin"?_u:r.platform?vc:JD;this.scurry=new u(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(u=>new Yr(u,i)),[s,l]=o.reduce((u,m)=>(u[0].push(...m.set),u[1].push(...m.globParts),u),[[],[]]);this.patterns=s.map((u,m)=>{let d=l[m];if(!d)throw new Error("invalid pattern object");return new bc(u,d,0,this.platform)})}async walk(){return[...await new ku(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new ku(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Au(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Au(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var tb=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Yr(r,e).hasMagic())return!0;return!1};function Jh(t,e={}){return new jn(t,e).streamSync()}function tF(t,e={}){return new jn(t,e).stream()}function rF(t,e={}){return new jn(t,e).walkSync()}async function eF(t,e={}){return new jn(t,e).walk()}function Xh(t,e={}){return new jn(t,e).iterateSync()}function nF(t,e={}){return new jn(t,e).iterate()}var aQ=Jh,sQ=Object.assign(tF,{sync:Jh}),cQ=Xh,lQ=Object.assign(nF,{sync:Xh}),uQ=Object.assign(rF,{stream:Jh,iterate:Xh}),rb=Object.assign(eF,{glob:eF,globSync:rF,sync:uQ,globStream:tF,stream:sQ,globStreamSync:Jh,streamSync:aQ,globIterate:nF,iterate:lQ,globIterateSync:Xh,iterateSync:cQ,Glob:jn,hasMagic:tb,escape:dc,unescape:Vn});rb.glob=rb;function iF(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var dF=Object.defineProperty,fQ=Object.getOwnPropertyNames,N=(t,e)=>dF(t,"name",{value:e,configurable:!0}),dQ=(t,e)=>function(){return e||(0,t[fQ(t)[0]])((e={exports:{}}).exports,e),e.exports},xb=(t,e)=>{for(var r in e)dF(t,r,{get:e[r],enumerable:!0})},gQ=dQ({"(disabled):util"(){}}),ey={};xb(ey,{addChainableMethod:()=>Mb,addLengthGuard:()=>Fu,addMethod:()=>Ab,addProperty:()=>kb,checkError:()=>Jr,compareByInspect:()=>iy,eql:()=>WF,expectTypes:()=>bF,flag:()=>Me,getActual:()=>uy,getMessage:()=>bb,getName:()=>my,getOperator:()=>Ib,getOwnEnumerableProperties:()=>Cb,getOwnEnumerablePropertySymbols:()=>Fb,getPathInfo:()=>Rb,hasProperty:()=>py,inspect:()=>Ke,isNaN:()=>oy,isNumeric:()=>zt,isProxyEnabled:()=>Du,isRegExp:()=>ay,objDisplay:()=>Ma,overwriteChainableMethod:()=>Db,overwriteMethod:()=>Lb,overwriteProperty:()=>Pb,proxify:()=>kc,test:()=>Sb,transferFlags:()=>zn,type:()=>nt});var Jr={};xb(Jr,{compatibleConstructor:()=>yF,compatibleInstance:()=>hF,compatibleMessage:()=>TF,getConstructorName:()=>xF,getMessage:()=>SF});function ly(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}N(ly,"isErrorInstance");function gF(t){return Object.prototype.toString.call(t)==="[object RegExp]"}N(gF,"isRegExp");function hF(t,e){return ly(e)&&t===e}N(hF,"compatibleInstance");function yF(t,e){return ly(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}N(yF,"compatibleConstructor");function TF(t,e){let r=typeof t=="string"?t:t.message;return gF(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}N(TF,"compatibleMessage");function xF(t){let e=t;return ly(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}N(xF,"getConstructorName");function SF(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}N(SF,"getMessage");function Me(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}N(Me,"flag");function Sb(t,e){var r=Me(t,"negate"),n=e[0];return r?!n:n}N(Sb,"test");function nt(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}N(nt,"type");var hQ="captureStackTrace"in Error,Ye=class vF extends Error{static{N(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,hQ&&Error.captureStackTrace(this,n||vF);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function bF(t,e){var r=Me(t,"message"),n=Me(t,"ssfi");r=r?r+": ":"",t=Me(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();var i=e.map(function(s,l){var u=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a",m=e.length>1&&l===e.length-1?"or ":"";return m+u+" "+s}).join(", "),o=nt(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new Ye(r+"object tested must be "+i+", but "+o+" given",void 0,n)}N(bF,"expectTypes");function uy(t,e){return e.length>4?e[4]:t._obj}N(uy,"getActual");var oF={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},yQ={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},_c="\u2026";function wF(t,e){let r=oF[yQ[e]]||oF[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}N(wF,"colorise");function EF({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:l=[],truncate:u=1/0,stylize:m=String}={},d){let g={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(u),seen:l,inspect:d,stylize:m};return g.colors&&(g.stylize=wF),g}N(EF,"normaliseOptions");function _F(t){return t>="\uD800"&&t<="\uDBFF"}N(_F,"isHighSurrogate");function Wi(t,e,r=_c){t=String(t);let n=r.length,i=t.length;if(n>e&&i>n)return r;if(i>e&&i>n){let o=e-n;return o>0&&_F(t[o-1])&&(o=o-1),`${t.slice(0,o)}${r}`}return t}N(Wi,"truncate");function En(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",l="",u="";for(let m=0;m<i;m+=1){let d=m+1===t.length,g=m+2===t.length;u=`${_c}(${t.length-m})`;let y=t[m];e.truncate=o-s.length-(d?0:n.length);let x=l||r(y,e)+(d?"":n),E=s.length+x.length,w=E+u.length;if(d&&E>o&&s.length+u.length<=o||!d&&!g&&w>o||(l=d?"":r(t[m+1],e)+(g?"":n),!d&&g&&w>o&&E+l.length>o))break;if(s+=x,!d&&!g&&E+l.length>=o){u=`${_c}(${t.length-m-1})`;break}u=""}return`${s}${u}`}N(En,"inspectList");function RF(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}N(RF,"quoteComplexKey");function Rc([t,e],r){return r.truncate-=2,typeof t=="string"?t=RF(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}N(Rc,"inspectProperty");function kF(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=En(t,e);e.truncate-=n.length;let i="";return r.length&&(i=En(r.map(o=>[o,t[o]]),e,Rc)),`[ ${n}${i?`, ${i}`:""} ]`}N(kF,"inspectArray");var TQ=N(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function hi(t,e){let r=TQ(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let s=0;s<t.length;s++){let l=`${e.stylize(Wi(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=l.length,t[s]!==t.length&&e.truncate<=3){i+=`${_c}(${t.length-t[s]+1})`;break}i+=l}let o="";return n.length&&(o=En(n.map(s=>[s,t[s]]),e,Rc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}N(hi,"inspectTypedArray");function AF(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Wi(n[1],e.truncate-i.length-1)}`,"date")}N(AF,"inspectDate");function ob(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Wi(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}N(ob,"inspectFunction");function PF([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}N(PF,"inspectMapEntry");function LF(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}N(LF,"mapToEntries");function MF(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${En(LF(t),e,PF)} }`)}N(MF,"inspectMap");var xQ=Number.isNaN||(t=>t!==t);function ab(t,e){return xQ(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Wi(String(t),e.truncate),"number")}N(ab,"inspectNumber");function sb(t,e){let r=Wi(t.toString(),e.truncate-1);return r!==_c&&(r+="n"),e.stylize(r,"bigint")}N(sb,"inspectBigInt");function DF(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Wi(i,n)}/${r}`,"regexp")}N(DF,"inspectRegExp");function FF(t){let e=[];return t.forEach(r=>{e.push(r)}),e}N(FF,"arrayFromSet");function CF(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${En(FF(t),e)} }`)}N(CF,"inspectSet");var aF=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),SQ={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},vQ=16,bQ=4;function IF(t){return SQ[t]||`\\u${`0000${t.charCodeAt(0).toString(vQ)}`.slice(-bQ)}`}N(IF,"escape");function cb(t,e){return aF.test(t)&&(t=t.replace(aF,IF)),e.stylize(`'${Wi(t,e.truncate-2)}'`,"string")}N(cb,"inspectString");function lb(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}N(lb,"inspectSymbol");var OF=N(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(OF=N((n,i)=>{let[o,s]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(s,i)}}`},"getPromiseValue"))}catch{}var wQ=OF;function Lu(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let i=En(r.map(l=>[l,t[l]]),e,Rc),o=En(n.map(l=>[l,t[l]]),e,Rc);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}N(Lu,"inspectObject");var nb=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function NF(t,e){let r="";return nb&&nb in t&&(r=t[nb]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Lu(t,e)}`}N(NF,"inspectClass");function UF(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${En(t,e)} ]`)}N(UF,"inspectArguments");var EQ=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description","cause"];function HF(t,e){let r=Object.getOwnPropertyNames(t).filter(s=>EQ.indexOf(s)===-1),n=t.name;e.truncate-=n.length;let i="";if(typeof t.message=="string"?i=Wi(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let o=En(r.map(s=>[s,t[s]]),e,Rc);return`${n}${i}${o?` { ${o} }`:""}`}N(HF,"inspectObject");function BF([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}N(BF,"inspectAttribute");function ty(t,e){return En(t,e,vb,`
`)}N(ty,"inspectHTMLCollection");function vb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=En(r.map(d=>[d,t.getAttribute(d)]),e,BF," ")),e.truncate-=l.length;let u=e.truncate,m=ty(t.children,e);return m&&m.length>u&&(m=`${_c}(${t.children.length})`),`${i}${l}${o}${m}${s}`}N(vb,"inspectHTML");var _Q=typeof Symbol=="function"&&typeof Symbol.for=="function",ib=_Q?Symbol.for("chai/inspect"):"@@chai/inspect",Ec=!1;try{let t=gQ();Ec=t.inspect?t.inspect.custom:!1}catch{Ec=!1}var sF=new WeakMap,cF={},lF={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:ab,Number:ab,bigint:sb,BigInt:sb,string:cb,String:cb,function:ob,Function:ob,symbol:lb,Symbol:lb,Array:kF,Date:AF,Map:MF,Set:CF,RegExp:DF,Promise:wQ,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:UF,Int8Array:hi,Uint8Array:hi,Uint8ClampedArray:hi,Int16Array:hi,Uint16Array:hi,Int32Array:hi,Uint32Array:hi,Float32Array:hi,Float64Array:hi,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:HF,HTMLCollection:ty,NodeList:ty},RQ=N((t,e,r)=>ib in t&&typeof t[ib]=="function"?t[ib](e):Ec&&Ec in t&&typeof t[Ec]=="function"?t[Ec](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&sF.has(t.constructor)?sF.get(t.constructor)(t,e):cF[r]?cF[r](t,e):"","inspectCustom"),kQ=Object.prototype.toString;function ry(t,e={}){let r=EF(e,ry),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=kQ.call(t).slice(8,-1)),i in lF)return lF[i](t,r);if(n&&t){let s=RQ(t,r,i);if(s)return typeof s=="string"?s:ry(s,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Lu(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?vb(t,r):"constructor"in t?t.constructor!==Object?NF(t,r):Lu(t,r):t===Object(t)?Lu(t,r):r.stylize(String(t),i)}N(ry,"inspect");var xr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Ke(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:xr.truncateThreshold?xr.truncateThreshold:1/0};return ry(t,i)}N(Ke,"inspect");function Ma(t){var e=Ke(t),r=Object.prototype.toString.call(t);if(xr.truncateThreshold&&e.length>=xr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}N(Ma,"objDisplay");function bb(t,e){var r=Me(t,"negate"),n=Me(t,"object"),i=e[3],o=uy(t,e),s=r?e[2]:e[1],l=Me(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return Ma(n)}).replace(/#\{act\}/g,function(){return Ma(o)}).replace(/#\{exp\}/g,function(){return Ma(i)}),l?l+": "+s:s}N(bb,"getMessage");function zn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}N(zn,"transferFlags");function ub(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}N(ub,"type");function wb(){this._key="chai/deep-eql__"+Math.random()+Date.now()}N(wb,"FakeMap");wb.prototype={get:N(function(e){return e[this._key]},"get"),set:N(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var VF=typeof WeakMap=="function"?WeakMap:wb;function pb(t,e,r){if(!r||Da(t)||Da(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}N(pb,"memoizeCompare");function Pu(t,e,r,n){if(!(!r||Da(t)||Da(e))){var i=r.get(t);i?i.set(e,n):(i=new VF,i.set(e,n),r.set(t,i))}}N(Pu,"memoizeSet");var WF=Mu;function Mu(t,e,r){if(r&&r.comparator)return mb(t,e,r);var n=Eb(t,e);return n!==null?n:mb(t,e,r)}N(Mu,"deepEqual");function Eb(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:Da(t)||Da(e)?!1:null}N(Eb,"simpleEqual");function mb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new VF;var n=r&&r.comparator,i=pb(t,e,r.memoize);if(i!==null)return i;var o=pb(e,t,r.memoize);if(o!==null)return o;if(n){var s=n(t,e);if(s===!1||s===!0)return Pu(t,e,r.memoize,s),s;var l=Eb(t,e);if(l!==null)return l}var u=ub(t);if(u!==ub(e))return Pu(t,e,r.memoize,!1),!1;Pu(t,e,r.memoize,!0);var m=$F(t,e,u,r);return Pu(t,e,r.memoize,m),m}N(mb,"extensiveDeepEqual");function $F(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Mu(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return _b(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Fo(t,e,n);case"RegExp":return jF(t,e);case"Generator":return zF(t,e,n);case"DataView":return Fo(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return Fo(new Uint8Array(t),new Uint8Array(e),n);case"Set":return fb(t,e,n);case"Map":return fb(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return GF(t,e,n)}}N($F,"extensiveDeepEqualByType");function jF(t,e){return t.toString()===e.toString()}N(jF,"regexpEqual");function fb(t,e,r){try{if(t.size!==e.size)return!1;if(t.size===0)return!0}catch{return!1}var n=[],i=[];return t.forEach(N(function(s,l){n.push([s,l])},"gatherEntries")),e.forEach(N(function(s,l){i.push([s,l])},"gatherEntries")),Fo(n.sort(),i.sort(),r)}N(fb,"entriesEqual");function Fo(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Mu(t[i],e[i],r)===!1)return!1;return!0}N(Fo,"iterableEqual");function zF(t,e,r){return Fo(ny(t),ny(e),r)}N(zF,"generatorEqual");function qF(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}N(qF,"hasIteratorFunction");function db(t){if(qF(t))try{return ny(t[Symbol.iterator]())}catch{return[]}return[]}N(db,"getIteratorEntries");function ny(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}N(ny,"getGeneratorEntries");function gb(t){var e=[];for(var r in t)e.push(r);return e}N(gb,"getEnumerableKeys");function hb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}N(hb,"getEnumerableSymbols");function _b(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Mu(t[r[o]],e[r[o]],n)===!1)return!1;return!0}N(_b,"keysEqual");function GF(t,e,r){var n=gb(t),i=gb(e),o=hb(t),s=hb(e);if(n=n.concat(o),i=i.concat(s),n.length&&n.length===i.length)return Fo(yb(n).sort(),yb(i).sort())===!1?!1:_b(t,e,n,r);var l=db(t),u=db(e);return l.length&&l.length===u.length?(l.sort(),u.sort(),Fo(l,u,r)):n.length===0&&l.length===0&&i.length===0&&u.length===0}N(GF,"objectEqual");function Da(t){return t===null||typeof t!="object"}N(Da,"isPrimitive");function yb(t){return t.map(N(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}N(yb,"mapSymbols");function py(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}N(py,"hasProperty");function KF(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),s=null;return o?s={i:parseFloat(o[1])}:s={p:n.replace(/\\([.[\]])/g,"$1")},s})}N(KF,"parsePath");function Tb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let s=e[o];n&&(typeof s.p>"u"?n=n[s.i]:n=n[s.p],o===r-1&&(i=n))}return i}N(Tb,"internalGetPathValue");function Rb(t,e){let r=KF(e),n=r[r.length-1],i={parent:r.length>1?Tb(t,r,r.length-1):t,name:n.p||n.i,value:Tb(t,r)};return i.exists=py(i.parent,i.name),i}N(Rb,"getPathInfo");function b(t,e,r,n){return Me(this,"ssfi",r||b),Me(this,"lockSsfi",n),Me(this,"object",t),Me(this,"message",e),Me(this,"eql",xr.deepEqual||WF),kc(this)}N(b,"Assertion");Object.defineProperty(b,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),xr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),xr.includeStack=t}});Object.defineProperty(b,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),xr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),xr.showDiff=t}});b.addProperty=function(t,e){kb(this.prototype,t,e)};b.addMethod=function(t,e){Ab(this.prototype,t,e)};b.addChainableMethod=function(t,e,r){Mb(this.prototype,t,e,r)};b.overwriteProperty=function(t,e){Pb(this.prototype,t,e)};b.overwriteMethod=function(t,e){Lb(this.prototype,t,e)};b.overwriteChainableMethod=function(t,e,r){Db(this.prototype,t,e,r)};b.prototype.assert=function(t,e,r,n,i,o){var s=Sb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),xr.showDiff!==!0&&(o=!1),!s){e=bb(this,arguments);var l=uy(this,arguments),u={actual:l,expected:n,showDiff:o},m=Ib(this,arguments);throw m&&(u.operator=m),new Ye(e,u,xr.includeStack?this.assert:Me(this,"ssfi"))}};Object.defineProperty(b.prototype,"_obj",{get:function(){return Me(this,"object")},set:function(t){Me(this,"object",t)}});function Du(){return xr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}N(Du,"isProxyEnabled");function kb(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:N(function n(){!Du()&&!Me(this,"lockSsfi")&&Me(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new b;return zn(this,o),o},"propertyGetter"),configurable:!0})}N(kb,"addProperty");var AQ=Object.getOwnPropertyDescriptor(function(){},"length");function Fu(t,e,r){return AQ.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}N(Fu,"addLengthGuard");function QF(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}N(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}N(QF,"getProperties");var uF=["__flags","__methods","_obj","assert"];function kc(t,e){return Du()?new Proxy(t,{get:N(function r(n,i){if(typeof i=="string"&&xr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,s=4;throw QF(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&uF.indexOf(l)===-1){var u=YF(i,l,s);u<s&&(o=l,s=u)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return uF.indexOf(i)===-1&&!Me(n,"lockSsfi")&&Me(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}N(kc,"proxify");function YF(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;var n=[];for(let o=0;o<=t.length;o++)n[o]=Array(e.length+1).fill(0),n[o][0]=o;for(let o=0;o<e.length;o++)n[0][o]=o;for(let o=1;o<=t.length;o++){var i=t.charCodeAt(o-1);for(let s=1;s<=e.length;s++){if(Math.abs(o-s)>=r){n[o][s]=r;continue}n[o][s]=Math.min(n[o-1][s]+1,n[o][s-1]+1,n[o-1][s-1]+(i===e.charCodeAt(s-1)?0:1))}}return n[t.length][e.length]}N(YF,"stringDistanceCapped");function Ab(t,e,r){var n=N(function(){Me(this,"lockSsfi")||Me(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new b;return zn(this,o),o},"methodWrapper");Fu(n,e,!1),t[e]=kc(n,e)}N(Ab,"addMethod");function Pb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=N(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:N(function o(){!Du()&&!Me(this,"lockSsfi")&&Me(this,"ssfi",o);var s=Me(this,"lockSsfi");Me(this,"lockSsfi",!0);var l=r(i).call(this);if(Me(this,"lockSsfi",s),l!==void 0)return l;var u=new b;return zn(this,u),u},"overwritingPropertyGetter"),configurable:!0})}N(Pb,"overwriteProperty");function Lb(t,e,r){var n=t[e],i=N(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=N(function(){Me(this,"lockSsfi")||Me(this,"ssfi",o);var s=Me(this,"lockSsfi");Me(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(Me(this,"lockSsfi",s),l!==void 0)return l;var u=new b;return zn(this,u),u},"overwritingMethodWrapper");Fu(o,e,!1),t[e]=kc(o,e)}N(Lb,"overwriteMethod");var PQ=typeof Object.setPrototypeOf=="function",pF=N(function(){},"testFn"),LQ=Object.getOwnPropertyNames(pF).filter(function(t){var e=Object.getOwnPropertyDescriptor(pF,t);return typeof e!="object"?!0:!e.configurable}),MQ=Function.prototype.call,DQ=Function.prototype.apply;function Mb(t,e,r,n){typeof n!="function"&&(n=N(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:N(function(){i.chainingBehavior.call(this);var s=N(function(){Me(this,"lockSsfi")||Me(this,"ssfi",s);var m=i.method.apply(this,arguments);if(m!==void 0)return m;var d=new b;return zn(this,d),d},"chainableMethodWrapper");if(Fu(s,e,!0),PQ){var l=Object.create(this);l.call=MQ,l.apply=DQ,Object.setPrototypeOf(s,l)}else{var u=Object.getOwnPropertyNames(t);u.forEach(function(m){if(LQ.indexOf(m)===-1){var d=Object.getOwnPropertyDescriptor(t,m);Object.defineProperty(s,m,d)}})}return zn(this,s),kc(s)},"chainableMethodGetter"),configurable:!0})}N(Mb,"addChainableMethod");function Db(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=N(function(){var u=n(o).call(this);if(u!==void 0)return u;var m=new b;return zn(this,m),m},"overwritingChainableMethodGetter");var s=i.method;i.method=N(function(){var u=r(s).apply(this,arguments);if(u!==void 0)return u;var m=new b;return zn(this,m),m},"overwritingChainableMethodWrapper")}N(Db,"overwriteChainableMethod");function iy(t,e){return Ke(t)<Ke(e)?-1:1}N(iy,"compareByInspect");function Fb(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}N(Fb,"getOwnEnumerablePropertySymbols");function Cb(t){return Object.keys(t).concat(Fb(t))}N(Cb,"getOwnEnumerableProperties");var oy=Number.isNaN;function ZF(t){var e=nt(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}N(ZF,"isObjectType");function Ib(t,e){var r=Me(t,"operator"),n=Me(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var s=ZF(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}}N(Ib,"getOperator");function my(t){return t.name}N(my,"getName");function ay(t){return Object.prototype.toString.call(t)==="[object RegExp]"}N(ay,"isRegExp");function zt(t){return["Number","BigInt"].includes(nt(t))}N(zt,"isNumeric");var{flag:D}=ey;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){b.addProperty(t)});b.addProperty("not",function(){D(this,"negate",!0)});b.addProperty("deep",function(){D(this,"deep",!0)});b.addProperty("nested",function(){D(this,"nested",!0)});b.addProperty("own",function(){D(this,"own",!0)});b.addProperty("ordered",function(){D(this,"ordered",!0)});b.addProperty("any",function(){D(this,"any",!0),D(this,"all",!1)});b.addProperty("all",function(){D(this,"all",!0),D(this,"any",!1)});var mF={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function Ob(t,e){e&&D(this,"message",e),t=t.toLowerCase();var r=D(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=nt(r).toLowerCase();mF.function.includes(t)?this.assert(mF[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}N(Ob,"an");b.addChainableMethod("an",Ob);b.addChainableMethod("a",Ob);function JF(t,e){return oy(t)&&oy(e)||t===e}N(JF,"SameValueZero");function Cu(){D(this,"contains",!0)}N(Cu,"includeChainingBehavior");function Iu(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=nt(r).toLowerCase(),i=D(this,"message"),o=D(this,"negate"),s=D(this,"ssfi"),l=D(this,"deep"),u=l?"deep ":"",m=l?D(this,"eql"):JF;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new Ye(i+"unable to use .deep.include with WeakSet",void 0,s);d=r.has(t);break;case"map":r.forEach(function(E){d=d||m(E,t)});break;case"set":l?r.forEach(function(E){d=d||m(E,t)}):d=r.has(t);break;case"array":l?d=r.some(function(E){return m(E,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new Ye(i+"the given combination of arguments ("+n+" and "+nt(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+nt(t).toLowerCase(),void 0,s);var g=Object.keys(t),y=null,x=0;if(g.forEach(function(E){var w=new b(r);if(zn(this,w,!0),D(w,"lockSsfi",!0),!o||g.length===1){w.property(E,t[E]);return}try{w.property(E,t[E])}catch(H){if(!Jr.compatibleConstructor(H,Ye))throw H;y===null&&(y=H),x++}},this),o&&g.length>1&&x===g.length)throw y;return}this.assert(d,"expected #{this} to "+u+"include "+Ke(t),"expected #{this} to not "+u+"include "+Ke(t))}N(Iu,"include");b.addChainableMethod("include",Iu,Cu);b.addChainableMethod("contain",Iu,Cu);b.addChainableMethod("contains",Iu,Cu);b.addChainableMethod("includes",Iu,Cu);b.addProperty("ok",function(){this.assert(D(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});b.addProperty("true",function(){this.assert(D(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!D(this,"negate"))});b.addProperty("numeric",function(){let t=D(this,"object");this.assert(["Number","BigInt"].includes(nt(t)),"expected #{this} to be numeric","expected #{this} to not be numeric",!D(this,"negate"))});b.addProperty("callable",function(){let t=D(this,"object"),e=D(this,"ssfi"),r=D(this,"message"),n=r?`${r}: `:"",i=D(this,"negate"),o=i?`${n}expected ${Ke(t)} not to be a callable function`:`${n}expected ${Ke(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(nt(t));if(s&&i||!s&&!i)throw new Ye(o,void 0,e)});b.addProperty("false",function(){this.assert(D(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!D(this,"negate"))});b.addProperty("null",function(){this.assert(D(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});b.addProperty("undefined",function(){this.assert(D(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});b.addProperty("NaN",function(){this.assert(oy(D(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function Nb(){var t=D(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}N(Nb,"assertExist");b.addProperty("exist",Nb);b.addProperty("exists",Nb);b.addProperty("empty",function(){var t=D(this,"object"),e=D(this,"ssfi"),r=D(this,"message"),n;switch(r=r?r+": ":"",nt(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new Ye(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+my(t);throw new Ye(i.trim(),void 0,e);default:if(t!==Object(t))throw new Ye(r+".empty was passed non-string primitive "+Ke(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function Ub(){var t=D(this,"object"),e=nt(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}N(Ub,"checkArguments");b.addProperty("arguments",Ub);b.addProperty("Arguments",Ub);function fy(t,e){e&&D(this,"message",e);var r=D(this,"object");if(D(this,"deep")){var n=D(this,"lockSsfi");D(this,"lockSsfi",!0),this.eql(t),D(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}N(fy,"assertEqual");b.addMethod("equal",fy);b.addMethod("equals",fy);b.addMethod("eq",fy);function Hb(t,e){e&&D(this,"message",e);var r=D(this,"eql");this.assert(r(t,D(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}N(Hb,"assertEql");b.addMethod("eql",Hb);b.addMethod("eqls",Hb);function dy(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"doLength"),i=D(this,"message"),o=i?i+": ":"",s=D(this,"ssfi"),l=nt(r).toLowerCase(),u=nt(t).toLowerCase();if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")throw new Ye(o+"the argument to above must be a date",void 0,s);if(!zt(t)&&(n||zt(r)))throw new Ye(o+"the argument to above must be a number",void 0,s);if(!n&&l!=="date"&&!zt(r)){var m=l==="string"?"'"+r+"'":r;throw new Ye(o+"expected "+m+" to be a number or a date",void 0,s)}if(n){var d="length",g;l==="map"||l==="set"?(d="size",g=r.size):g=r.length,this.assert(g>t,"expected #{this} to have a "+d+" above #{exp} but got #{act}","expected #{this} to not have a "+d+" above #{exp}",t,g)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}N(dy,"assertAbove");b.addMethod("above",dy);b.addMethod("gt",dy);b.addMethod("greaterThan",dy);function gy(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"doLength"),i=D(this,"message"),o=i?i+": ":"",s=D(this,"ssfi"),l=nt(r).toLowerCase(),u=nt(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to least must be a date";else if(!zt(t)&&(n||zt(r)))m=o+"the argument to least must be a number";else if(!n&&l!=="date"&&!zt(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new Ye(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+y+" at least #{exp} but got #{act}","expected #{this} to have a "+y+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}N(gy,"assertLeast");b.addMethod("least",gy);b.addMethod("gte",gy);b.addMethod("greaterThanOrEqual",gy);function hy(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"doLength"),i=D(this,"message"),o=i?i+": ":"",s=D(this,"ssfi"),l=nt(r).toLowerCase(),u=nt(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to below must be a date";else if(!zt(t)&&(n||zt(r)))m=o+"the argument to below must be a number";else if(!n&&l!=="date"&&!zt(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new Ye(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+y+" below #{exp} but got #{act}","expected #{this} to not have a "+y+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}N(hy,"assertBelow");b.addMethod("below",hy);b.addMethod("lt",hy);b.addMethod("lessThan",hy);function yy(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"doLength"),i=D(this,"message"),o=i?i+": ":"",s=D(this,"ssfi"),l=nt(r).toLowerCase(),u=nt(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to most must be a date";else if(!zt(t)&&(n||zt(r)))m=o+"the argument to most must be a number";else if(!n&&l!=="date"&&!zt(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new Ye(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+y+" at most #{exp} but got #{act}","expected #{this} to have a "+y+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}N(yy,"assertMost");b.addMethod("most",yy);b.addMethod("lte",yy);b.addMethod("lessThanOrEqual",yy);b.addMethod("within",function(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"doLength"),o=D(this,"message"),s=o?o+": ":"",l=D(this,"ssfi"),u=nt(n).toLowerCase(),m=nt(t).toLowerCase(),d=nt(e).toLowerCase(),g,y=!0,x=m==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&u!=="map"&&u!=="set"&&new b(n,o,l,!0).to.have.property("length"),!i&&u==="date"&&(m!=="date"||d!=="date"))g=s+"the arguments to within must be dates";else if((!zt(t)||!zt(e))&&(i||zt(n)))g=s+"the arguments to within must be numbers";else if(!i&&u!=="date"&&!zt(n)){var E=u==="string"?"'"+n+"'":n;g=s+"expected "+E+" to be a number or a date"}else y=!1;if(y)throw new Ye(g,void 0,l);if(i){var w="length",H;u==="map"||u==="set"?(w="size",H=n.size):H=n.length,this.assert(H>=t&&H<=e,"expected #{this} to have a "+w+" within "+x,"expected #{this} to not have a "+w+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function Bb(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"ssfi"),i=D(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new Ye(i+"The instanceof assertion needs a constructor but "+nt(t)+" was given.",void 0,n)):l}var s=my(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}N(Bb,"assertInstanceOf");b.addMethod("instanceof",Bb);b.addMethod("instanceOf",Bb);function Vb(t,e,r){r&&D(this,"message",r);var n=D(this,"nested"),i=D(this,"own"),o=D(this,"message"),s=D(this,"object"),l=D(this,"ssfi"),u=typeof t;if(o=o?o+": ":"",n){if(u!=="string")throw new Ye(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(u!=="string"&&u!=="number"&&u!=="symbol")throw new Ye(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new Ye(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(s==null)throw new Ye(o+"Target cannot be null or undefined.",void 0,l);var m=D(this,"deep"),d=D(this,"negate"),g=n?Rb(s,t):null,y=n?g.value:s[t],x=m?D(this,"eql"):(H,W)=>H===W,E="";m&&(E+="deep "),i&&(E+="own "),n&&(E+="nested "),E+="property ";var w;i?w=Object.prototype.hasOwnProperty.call(s,t):n?w=g.exists:w=py(s,t),(!d||arguments.length===1)&&this.assert(w,"expected #{this} to have "+E+Ke(t),"expected #{this} to not have "+E+Ke(t)),arguments.length>1&&this.assert(w&&x(e,y),"expected #{this} to have "+E+Ke(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+E+Ke(t)+" of #{act}",e,y),D(this,"object",y)}N(Vb,"assertProperty");b.addMethod("property",Vb);function Wb(t,e,r){D(this,"own",!0),Vb.apply(this,arguments)}N(Wb,"assertOwnProperty");b.addMethod("ownProperty",Wb);b.addMethod("haveOwnProperty",Wb);function $b(t,e,r){typeof e=="string"&&(r=e,e=null),r&&D(this,"message",r);var n=D(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=D(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Ke(t)+" on #{this} to match "+Ke(e)+", got "+Ke(i),"expected the own property descriptor for "+Ke(t)+" on #{this} to not match "+Ke(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Ke(t),"expected #{this} to not have an own property descriptor for "+Ke(t)),D(this,"object",i)}N($b,"assertOwnPropertyDescriptor");b.addMethod("ownPropertyDescriptor",$b);b.addMethod("haveOwnPropertyDescriptor",$b);function jb(){D(this,"doLength",!0)}N(jb,"assertLengthChain");function zb(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=nt(r).toLowerCase(),i=D(this,"message"),o=D(this,"ssfi"),s="length",l;switch(n){case"map":case"set":s="size",l=r.size;break;default:new b(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,l)}N(zb,"assertLength");b.addChainableMethod("length",zb,jb);b.addChainableMethod("lengthOf",zb,jb);function qb(t,e){e&&D(this,"message",e);var r=D(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}N(qb,"assertMatch");b.addMethod("match",qb);b.addMethod("matches",qb);b.addMethod("string",function(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"message"),i=D(this,"ssfi");new b(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Ke(t),"expected #{this} to not contain "+Ke(t))});function Gb(t){var e=D(this,"object"),r=nt(e),n=nt(t),i=D(this,"ssfi"),o=D(this,"deep"),s,l="",u,m=!0,d=D(this,"message");d=d?d+": ":"";var g=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",u=[],e.forEach(function(G,ie){u.push(ie)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(u=Cb(e),n){case"Array":if(arguments.length>1)throw new Ye(g,void 0,i);break;case"Object":if(arguments.length>1)throw new Ye(g,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(G){return typeof G=="symbol"?G:String(G)})}if(!t.length)throw new Ye(d+"keys required",void 0,i);var y=t.length,x=D(this,"any"),E=D(this,"all"),w=t,H=o?D(this,"eql"):(G,ie)=>G===ie;if(!x&&!E&&(E=!0),x&&(m=w.some(function(G){return u.some(function(ie){return H(G,ie)})})),E&&(m=w.every(function(G){return u.some(function(ie){return H(G,ie)})}),D(this,"contains")||(m=m&&t.length==u.length)),y>1){t=t.map(function(G){return Ke(G)});var W=t.pop();E&&(s=t.join(", ")+", and "+W),x&&(s=t.join(", ")+", or "+W)}else s=Ke(t[0]);s=(y>1?"keys ":"key ")+s,s=(D(this,"contains")?"contain ":"have ")+s,this.assert(m,"expected #{this} to "+l+s,"expected #{this} to not "+l+s,w.slice(0).sort(iy),u.sort(iy),!0)}N(Gb,"assertKeys");b.addMethod("keys",Gb);b.addMethod("key",Gb);function Ty(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"ssfi"),o=D(this,"message"),s=D(this,"negate")||!1;new b(n,o,i,!0).is.a("function"),(ay(t)||typeof t=="string")&&(e=t,t=null);let l,u=!1;try{n()}catch(G){u=!0,l=G}var m=t===void 0&&e===void 0,d=!!(t&&e),g=!1,y=!1;if(m||!m&&!s){var x="an error";t instanceof Error?x="#{exp}":t&&(x=Jr.getConstructorName(t));let G=l;if(l instanceof Error)G=l.toString();else if(typeof l=="string")G=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{G=Jr.getConstructorName(l)}catch{}this.assert(u,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),G)}if(t&&l){if(t instanceof Error){var E=Jr.compatibleInstance(l,t);E===s&&(d&&s?g=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!s?" but #{act} was thrown":""),t.toString(),l.toString()))}var w=Jr.compatibleConstructor(l,t);w===s&&(d&&s?g=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Jr.getConstructorName(t),l instanceof Error?l.toString():l&&Jr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var H="including";ay(e)&&(H="matching");var W=Jr.compatibleMessage(l,e);W===s&&(d&&s?y=!0:this.assert(s,"expected #{this} to throw error "+H+" #{exp} but got #{act}","expected #{this} to throw error not "+H+" #{exp}",e,Jr.getMessage(l)))}g&&y&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Jr.getConstructorName(t),l instanceof Error?l.toString():l&&Jr.getConstructorName(l)),D(this,"object",l)}N(Ty,"assertThrows");b.addMethod("throw",Ty);b.addMethod("throws",Ty);b.addMethod("Throw",Ty);function Kb(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Ke(t),"expected #{this} to not respond to "+Ke(t))}N(Kb,"respondTo");b.addMethod("respondTo",Kb);b.addMethod("respondsTo",Kb);b.addProperty("itself",function(){D(this,"itself",!0)});function Qb(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+Ma(t),"expected #{this} to not satisfy"+Ma(t),!D(this,"negate"),n)}N(Qb,"satisfy");b.addMethod("satisfy",Qb);b.addMethod("satisfies",Qb);function Yb(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"message"),o=D(this,"ssfi");new b(n,i,o,!0).is.numeric;let s="A `delta` value is required for `closeTo`";if(e==null)throw new Ye(i?`${i}: ${s}`:s,void 0,o);if(new b(e,i,o,!0).is.numeric,s="A `expected` value is required for `closeTo`",t==null)throw new Ye(i?`${i}: ${s}`:s,void 0,o);new b(t,i,o,!0).is.numeric;let l=N(m=>m<0n?-m:m,"abs"),u=N(m=>parseFloat(parseFloat(m).toPrecision(12)),"strip");this.assert(u(l(n-t))<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}N(Yb,"closeTo");b.addMethod("closeTo",Yb);b.addMethod("approximately",Yb);function XF(t,e,r,n,i){let o=Array.from(e),s=Array.from(t);if(!n){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(l,u){if(i)return r?r(l,o[u]):l===o[u];if(!r){var m=o.indexOf(l);return m===-1?!1:(n||o.splice(m,1),!0)}return o.some(function(d,g){return r(l,d)?(n||o.splice(g,1),!0):!1})})}N(XF,"isSubsetOf");b.addMethod("members",function(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"message"),i=D(this,"ssfi");new b(r,n,i,!0).to.be.iterable,new b(t,n,i,!0).to.be.iterable;var o=D(this,"contains"),s=D(this,"ordered"),l,u,m;o?(l=s?"an ordered superset":"a superset",u="expected #{this} to be "+l+" of #{exp}",m="expected #{this} to not be "+l+" of #{exp}"):(l=s?"ordered members":"members",u="expected #{this} to have the same "+l+" as #{exp}",m="expected #{this} to not have the same "+l+" as #{exp}");var d=D(this,"deep")?D(this,"eql"):void 0;this.assert(XF(t,r,d,o,s),u,m,t,r,!0)});b.addProperty("iterable",function(t){t&&D(this,"message",t);var e=D(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function e1(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"message"),i=D(this,"ssfi"),o=D(this,"contains"),s=D(this,"deep"),l=D(this,"eql");new b(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(u){return r.indexOf(u)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):s?this.assert(t.some(function(u){return l(r,u)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}N(e1,"oneOf");b.addMethod("oneOf",e1);function Zb(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"message"),o=D(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),n();var l=e==null?t():t[e],u=e==null?s:"."+e;D(this,"deltaMsgObj",u),D(this,"initialDeltaValue",s),D(this,"finalDeltaValue",l),D(this,"deltaBehavior","change"),D(this,"realDelta",l!==s),this.assert(s!==l,"expected "+u+" to change","expected "+u+" to not change")}N(Zb,"assertChanges");b.addMethod("change",Zb);b.addMethod("changes",Zb);function Jb(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"message"),o=D(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),new b(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;D(this,"deltaMsgObj",u),D(this,"initialDeltaValue",s),D(this,"finalDeltaValue",l),D(this,"deltaBehavior","increase"),D(this,"realDelta",l-s),this.assert(l-s>0,"expected "+u+" to increase","expected "+u+" to not increase")}N(Jb,"assertIncreases");b.addMethod("increase",Jb);b.addMethod("increases",Jb);function Xb(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"message"),o=D(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),new b(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;D(this,"deltaMsgObj",u),D(this,"initialDeltaValue",s),D(this,"finalDeltaValue",l),D(this,"deltaBehavior","decrease"),D(this,"realDelta",s-l),this.assert(l-s<0,"expected "+u+" to decrease","expected "+u+" to not decrease")}N(Xb,"assertDecreases");b.addMethod("decrease",Xb);b.addMethod("decreases",Xb);function t1(t,e){e&&D(this,"message",e);var r=D(this,"deltaMsgObj"),n=D(this,"initialDeltaValue"),i=D(this,"finalDeltaValue"),o=D(this,"deltaBehavior"),s=D(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=s===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}N(t1,"assertDelta");b.addMethod("by",t1);b.addProperty("extensible",function(){var t=D(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});b.addProperty("sealed",function(){var t=D(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});b.addProperty("frozen",function(){var t=D(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});b.addProperty("finite",function(t){var e=D(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function sy(t,e){return t===e?!0:typeof e!=typeof t?!1:typeof t!="object"||t===null?t===e:e?Array.isArray(t)?Array.isArray(e)?t.every(function(r){return e.some(function(n){return sy(r,n)})}):!1:t instanceof Date?e instanceof Date?t.getTime()===e.getTime():!1:Object.keys(t).every(function(r){var n=t[r],i=e[r];return typeof n=="object"&&n!==null&&i!==null?sy(n,i):typeof n=="function"?n(i):i===n}):!1}N(sy,"compareSubset");b.addMethod("containSubset",function(t){let e=Me(this,"object"),r=xr.showDiff;this.assert(sy(t,e),"expected #{act} to contain subset #{exp}","expected #{act} to not contain subset #{exp}",t,e,r)});function cy(t,e){return new b(t,e)}N(cy,"expect");cy.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new Ye(r,{actual:t,expected:e,operator:n},cy.fail)};var r1={};xb(r1,{Should:()=>CQ,should:()=>FQ});function ew(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new b(this.valueOf(),null,t):new b(this,null,t)}N(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}N(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new Ye(o,{actual:n,expected:i,operator:s},r.fail)},r.equal=function(n,i,o){new b(n,o).to.equal(i)},r.Throw=function(n,i,o,s){new b(n,s).to.Throw(i,o)},r.exist=function(n,i){new b(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new b(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,s){new b(n,s).to.not.Throw(i,o)},r.not.exist=function(n,i){new b(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}N(ew,"loadShould");var FQ=ew,CQ=ew;function v(t,e){var r=new b(null,null,v,!0);r.assert(t,e,"[ negation message unavailable ]")}N(v,"assert");v.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new Ye(r,{actual:t,expected:e,operator:n},v.fail)};v.isOk=function(t,e){new b(t,e,v.isOk,!0).is.ok};v.isNotOk=function(t,e){new b(t,e,v.isNotOk,!0).is.not.ok};v.equal=function(t,e,r){var n=new b(t,r,v.equal,!0);n.assert(e==Me(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};v.notEqual=function(t,e,r){var n=new b(t,r,v.notEqual,!0);n.assert(e!=Me(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};v.strictEqual=function(t,e,r){new b(t,r,v.strictEqual,!0).to.equal(e)};v.notStrictEqual=function(t,e,r){new b(t,r,v.notStrictEqual,!0).to.not.equal(e)};v.deepEqual=v.deepStrictEqual=function(t,e,r){new b(t,r,v.deepEqual,!0).to.eql(e)};v.notDeepEqual=function(t,e,r){new b(t,r,v.notDeepEqual,!0).to.not.eql(e)};v.isAbove=function(t,e,r){new b(t,r,v.isAbove,!0).to.be.above(e)};v.isAtLeast=function(t,e,r){new b(t,r,v.isAtLeast,!0).to.be.least(e)};v.isBelow=function(t,e,r){new b(t,r,v.isBelow,!0).to.be.below(e)};v.isAtMost=function(t,e,r){new b(t,r,v.isAtMost,!0).to.be.most(e)};v.isTrue=function(t,e){new b(t,e,v.isTrue,!0).is.true};v.isNotTrue=function(t,e){new b(t,e,v.isNotTrue,!0).to.not.equal(!0)};v.isFalse=function(t,e){new b(t,e,v.isFalse,!0).is.false};v.isNotFalse=function(t,e){new b(t,e,v.isNotFalse,!0).to.not.equal(!1)};v.isNull=function(t,e){new b(t,e,v.isNull,!0).to.equal(null)};v.isNotNull=function(t,e){new b(t,e,v.isNotNull,!0).to.not.equal(null)};v.isNaN=function(t,e){new b(t,e,v.isNaN,!0).to.be.NaN};v.isNotNaN=function(t,e){new b(t,e,v.isNotNaN,!0).not.to.be.NaN};v.exists=function(t,e){new b(t,e,v.exists,!0).to.exist};v.notExists=function(t,e){new b(t,e,v.notExists,!0).to.not.exist};v.isUndefined=function(t,e){new b(t,e,v.isUndefined,!0).to.equal(void 0)};v.isDefined=function(t,e){new b(t,e,v.isDefined,!0).to.not.equal(void 0)};v.isCallable=function(t,e){new b(t,e,v.isCallable,!0).is.callable};v.isNotCallable=function(t,e){new b(t,e,v.isNotCallable,!0).is.not.callable};v.isObject=function(t,e){new b(t,e,v.isObject,!0).to.be.a("object")};v.isNotObject=function(t,e){new b(t,e,v.isNotObject,!0).to.not.be.a("object")};v.isArray=function(t,e){new b(t,e,v.isArray,!0).to.be.an("array")};v.isNotArray=function(t,e){new b(t,e,v.isNotArray,!0).to.not.be.an("array")};v.isString=function(t,e){new b(t,e,v.isString,!0).to.be.a("string")};v.isNotString=function(t,e){new b(t,e,v.isNotString,!0).to.not.be.a("string")};v.isNumber=function(t,e){new b(t,e,v.isNumber,!0).to.be.a("number")};v.isNotNumber=function(t,e){new b(t,e,v.isNotNumber,!0).to.not.be.a("number")};v.isNumeric=function(t,e){new b(t,e,v.isNumeric,!0).is.numeric};v.isNotNumeric=function(t,e){new b(t,e,v.isNotNumeric,!0).is.not.numeric};v.isFinite=function(t,e){new b(t,e,v.isFinite,!0).to.be.finite};v.isBoolean=function(t,e){new b(t,e,v.isBoolean,!0).to.be.a("boolean")};v.isNotBoolean=function(t,e){new b(t,e,v.isNotBoolean,!0).to.not.be.a("boolean")};v.typeOf=function(t,e,r){new b(t,r,v.typeOf,!0).to.be.a(e)};v.notTypeOf=function(t,e,r){new b(t,r,v.notTypeOf,!0).to.not.be.a(e)};v.instanceOf=function(t,e,r){new b(t,r,v.instanceOf,!0).to.be.instanceOf(e)};v.notInstanceOf=function(t,e,r){new b(t,r,v.notInstanceOf,!0).to.not.be.instanceOf(e)};v.include=function(t,e,r){new b(t,r,v.include,!0).include(e)};v.notInclude=function(t,e,r){new b(t,r,v.notInclude,!0).not.include(e)};v.deepInclude=function(t,e,r){new b(t,r,v.deepInclude,!0).deep.include(e)};v.notDeepInclude=function(t,e,r){new b(t,r,v.notDeepInclude,!0).not.deep.include(e)};v.nestedInclude=function(t,e,r){new b(t,r,v.nestedInclude,!0).nested.include(e)};v.notNestedInclude=function(t,e,r){new b(t,r,v.notNestedInclude,!0).not.nested.include(e)};v.deepNestedInclude=function(t,e,r){new b(t,r,v.deepNestedInclude,!0).deep.nested.include(e)};v.notDeepNestedInclude=function(t,e,r){new b(t,r,v.notDeepNestedInclude,!0).not.deep.nested.include(e)};v.ownInclude=function(t,e,r){new b(t,r,v.ownInclude,!0).own.include(e)};v.notOwnInclude=function(t,e,r){new b(t,r,v.notOwnInclude,!0).not.own.include(e)};v.deepOwnInclude=function(t,e,r){new b(t,r,v.deepOwnInclude,!0).deep.own.include(e)};v.notDeepOwnInclude=function(t,e,r){new b(t,r,v.notDeepOwnInclude,!0).not.deep.own.include(e)};v.match=function(t,e,r){new b(t,r,v.match,!0).to.match(e)};v.notMatch=function(t,e,r){new b(t,r,v.notMatch,!0).to.not.match(e)};v.property=function(t,e,r){new b(t,r,v.property,!0).to.have.property(e)};v.notProperty=function(t,e,r){new b(t,r,v.notProperty,!0).to.not.have.property(e)};v.propertyVal=function(t,e,r,n){new b(t,n,v.propertyVal,!0).to.have.property(e,r)};v.notPropertyVal=function(t,e,r,n){new b(t,n,v.notPropertyVal,!0).to.not.have.property(e,r)};v.deepPropertyVal=function(t,e,r,n){new b(t,n,v.deepPropertyVal,!0).to.have.deep.property(e,r)};v.notDeepPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};v.ownProperty=function(t,e,r){new b(t,r,v.ownProperty,!0).to.have.own.property(e)};v.notOwnProperty=function(t,e,r){new b(t,r,v.notOwnProperty,!0).to.not.have.own.property(e)};v.ownPropertyVal=function(t,e,r,n){new b(t,n,v.ownPropertyVal,!0).to.have.own.property(e,r)};v.notOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};v.deepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};v.notDeepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};v.nestedProperty=function(t,e,r){new b(t,r,v.nestedProperty,!0).to.have.nested.property(e)};v.notNestedProperty=function(t,e,r){new b(t,r,v.notNestedProperty,!0).to.not.have.nested.property(e)};v.nestedPropertyVal=function(t,e,r,n){new b(t,n,v.nestedPropertyVal,!0).to.have.nested.property(e,r)};v.notNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};v.deepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};v.notDeepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};v.lengthOf=function(t,e,r){new b(t,r,v.lengthOf,!0).to.have.lengthOf(e)};v.hasAnyKeys=function(t,e,r){new b(t,r,v.hasAnyKeys,!0).to.have.any.keys(e)};v.hasAllKeys=function(t,e,r){new b(t,r,v.hasAllKeys,!0).to.have.all.keys(e)};v.containsAllKeys=function(t,e,r){new b(t,r,v.containsAllKeys,!0).to.contain.all.keys(e)};v.doesNotHaveAnyKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};v.doesNotHaveAllKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};v.hasAnyDeepKeys=function(t,e,r){new b(t,r,v.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};v.hasAllDeepKeys=function(t,e,r){new b(t,r,v.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};v.containsAllDeepKeys=function(t,e,r){new b(t,r,v.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};v.doesNotHaveAnyDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};v.doesNotHaveAllDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};v.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new b(t,n,v.throws,!0).to.throw(e,r);return Me(i,"object")};v.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new b(t,n,v.doesNotThrow,!0).to.not.throw(e,r)};v.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new Ye(n+'Invalid operator "'+e+'"',void 0,v.operator)}var o=new b(i,n,v.operator,!0);o.assert(Me(o,"object")===!0,"expected "+Ke(t)+" to be "+e+" "+Ke(r),"expected "+Ke(t)+" to not be "+e+" "+Ke(r))};v.closeTo=function(t,e,r,n){new b(t,n,v.closeTo,!0).to.be.closeTo(e,r)};v.approximately=function(t,e,r,n){new b(t,n,v.approximately,!0).to.be.approximately(e,r)};v.sameMembers=function(t,e,r){new b(t,r,v.sameMembers,!0).to.have.same.members(e)};v.notSameMembers=function(t,e,r){new b(t,r,v.notSameMembers,!0).to.not.have.same.members(e)};v.sameDeepMembers=function(t,e,r){new b(t,r,v.sameDeepMembers,!0).to.have.same.deep.members(e)};v.notSameDeepMembers=function(t,e,r){new b(t,r,v.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};v.sameOrderedMembers=function(t,e,r){new b(t,r,v.sameOrderedMembers,!0).to.have.same.ordered.members(e)};v.notSameOrderedMembers=function(t,e,r){new b(t,r,v.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};v.sameDeepOrderedMembers=function(t,e,r){new b(t,r,v.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};v.notSameDeepOrderedMembers=function(t,e,r){new b(t,r,v.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};v.includeMembers=function(t,e,r){new b(t,r,v.includeMembers,!0).to.include.members(e)};v.notIncludeMembers=function(t,e,r){new b(t,r,v.notIncludeMembers,!0).to.not.include.members(e)};v.includeDeepMembers=function(t,e,r){new b(t,r,v.includeDeepMembers,!0).to.include.deep.members(e)};v.notIncludeDeepMembers=function(t,e,r){new b(t,r,v.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};v.includeOrderedMembers=function(t,e,r){new b(t,r,v.includeOrderedMembers,!0).to.include.ordered.members(e)};v.notIncludeOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};v.includeDeepOrderedMembers=function(t,e,r){new b(t,r,v.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};v.notIncludeDeepOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};v.oneOf=function(t,e,r){new b(t,r,v.oneOf,!0).to.be.oneOf(e)};v.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Ke(t)} to be an iterable`:`expected ${Ke(t)} to be an iterable`,new Ye(e,void 0,v.isIterable)};v.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.changes,!0).to.change(e,r)};v.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesBy,!0).to.change(e,r).by(n)};v.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotChange,!0).to.not.change(e,r)};v.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesButNotBy,!0).to.change(e,r).but.not.by(n)};v.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.increases,!0).to.increase(e,r)};v.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesBy,!0).to.increase(e,r).by(n)};v.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotIncrease,!0).to.not.increase(e,r)};v.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};v.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.decreases,!0).to.decrease(e,r)};v.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesBy,!0).to.decrease(e,r).by(n)};v.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotDecrease,!0).to.not.decrease(e,r)};v.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new b(t,i,v.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};v.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};v.ifError=function(t){if(t)throw t};v.isExtensible=function(t,e){new b(t,e,v.isExtensible,!0).to.be.extensible};v.isNotExtensible=function(t,e){new b(t,e,v.isNotExtensible,!0).to.not.be.extensible};v.isSealed=function(t,e){new b(t,e,v.isSealed,!0).to.be.sealed};v.isNotSealed=function(t,e){new b(t,e,v.isNotSealed,!0).to.not.be.sealed};v.isFrozen=function(t,e){new b(t,e,v.isFrozen,!0).to.be.frozen};v.isNotFrozen=function(t,e){new b(t,e,v.isNotFrozen,!0).to.not.be.frozen};v.isEmpty=function(t,e){new b(t,e,v.isEmpty,!0).to.be.empty};v.isNotEmpty=function(t,e){new b(t,e,v.isNotEmpty,!0).to.not.be.empty};v.containsSubset=function(t,e,r){new b(t,r).to.containSubset(e)};v.doesNotContainSubset=function(t,e,r){new b(t,r).to.not.containSubset(e)};var IQ=[["isOk","ok"],["isNotOk","notOk"],["throws","throw"],["throws","Throw"],["isExtensible","extensible"],["isNotExtensible","notExtensible"],["isSealed","sealed"],["isNotSealed","notSealed"],["isFrozen","frozen"],["isNotFrozen","notFrozen"],["isEmpty","empty"],["isNotEmpty","notEmpty"],["isCallable","isFunction"],["isNotCallable","isNotFunction"],["containsSubset","containSubset"]];for(let[t,e]of IQ)v[e]=v[t];var fF=[];function n1(t){let e={use:n1,AssertionError:Ye,util:ey,config:xr,expect:cy,assert:v,Assertion:b,...r1};return~fF.indexOf(t)||(t(e,ey),fF.push(t)),e}N(n1,"use");var Ou=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new Y(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new Y(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new Y(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var i1=ln(require("node:path"),1),xy=class{get uri(){return this._uri}get filename(){return i1.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new Y(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof ke?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Ou(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new ke(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof Y))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new Y(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof ke))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new ke(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new tw(n)}}};function UQ(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var tw=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=UQ(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,s=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)r=i+1;else break;return new rw(i,e-s)}},rw=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var Sy=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Nu;this.onDidChangeActiveTextEditor=Nu;this.onDidChangeVisibleTextEditors=Nu;this.onDidChangeTextEditorSelection=Nu;this.onDidChangeTextEditorVisibleRanges=Nu;this.configuration=new uu,this.keyValueStore=new pu,this.messages=new mu,this.clipboard=new cu(this.client),this.capabilities=new Dh,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await QM(this.client);this.assetsRoot_=nw.default.join(e,"assets"),this.cursorlessNeovimPath=nw.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return iF()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return oD(e)}onDidOpenTextDocument(e,r,n){return aD(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let s,l;e?(s=[],l=[]):(s=await Lh(r,this.client),l=await KM(r,this.client,i));let u=this.toNeovimEditor(r,n,i,l,s);return Qr().emitEvent("onDidOpenTextDocument",u.document),u}toNeovimEditor(e,r,n,i,o){let s=this.getTextDocument(r),l=this.getTextEditor(e);return s?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),s.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),s=new xy(pD.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,s)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,s)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new Ch(Yx(),this.client,this,e,s,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){eD(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,o1.pull)(this.disposables,...e)}};function Nu(){return{dispose(){}}}var vy=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var BQ=BigInt(1e9);function a1(t,e=BigInt(1e6)){return Number(t*e/BQ)/Number(e)}async function by(t,e=[],r=[],n,i,o,s,l){let u={documentContents:n.document.getText(),selections:n.selections.map(gk)};o!=null&&(u.marks=o),l!=null&&(u.metadata=l),e.includes("clipboard")||(u.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(u.visibleRanges=n.visibleRanges.map(sl));for(let m of Ss){let d=t?.get(m),g=`${m}Mark`;d!=null&&!e.includes(g)&&(u[g]=d.map(y=>y.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let m=s?.startTimestamp;if(m==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-m;u.timeOffsetSeconds=a1(d)}return u}var VQ=ln(kl(),1);function s1(t,e,r,n,i,o,s){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:s,scopeProvider:o,takeSnapshot(l,u,m,d,g){return by(e,l,u,m,d,g,void 0,void 0)},setStoredTarget(l,u,m){e.set(u,m?.map(d=>jM(l,d)))},hatTokenMap:r}}async function c1(t,e,r,n){let i={[jT]:async(...o)=>{(await t.mode).mode==="t"&&JM(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),u=Cm(o);if(await n.getFocusedElementType()==="terminal"&&ra(u)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&XM(t)}return l}catch(l){if(e.runMode!=="test"){let u=l;console.error(u.stack),e.handleCommandError(u)}throw l}},"cursorless.repeatPreviousCommand":Ue,"cursorless.showCheatsheet":Ue,"cursorless.internal.updateCheatsheetDefaults":Ue,"cursorless.recordTestCase":Ue,"cursorless.recordOneTestCaseThenPause":Ue,"cursorless.pauseRecording":Ue,"cursorless.resumeRecording":Ue,"cursorless.takeSnapshot":Ue,"cursorless.recordScopeTests.showUnimplementedFacets":Ue,"cursorless.recordScopeTests.saveActiveDocument":Ue,"cursorless.showQuickPick":Ue,"cursorless.showDocumentation":Ue,"cursorless.showInstallationDependencies":Ue,"cursorless.migrateSnippets":Ue,"cursorless.private.logQuickActions":Ue,"cursorless.toggleDecorations":Ue,"cursorless.recomputeDecorationStyles":Ue,"cursorless.showScopeVisualizer":Ue,"cursorless.hideScopeVisualizer":Ue,"cursorless.scopeVisualizer.openUrl":Ue,"cursorless.analyzeCommandHistory":Ue,"cursorless.keyboard.escape":Ue,"cursorless.keyboard.targeted.targetHat":Ue,"cursorless.keyboard.targeted.targetScope":Ue,"cursorless.keyboard.targeted.targetSelection":Ue,"cursorless.keyboard.targeted.clearTarget":Ue,"cursorless.keyboard.targeted.runActionOnTarget":Ue,"cursorless.keyboard.modal.modeOn":Ue,"cursorless.keyboard.modal.modeOff":Ue,"cursorless.keyboard.modal.modeToggle":Ue,"cursorless.keyboard.undoTarget":Ue,"cursorless.keyboard.redoTarget":Ue,"cursorless.tutorial.start":Ue,"cursorless.tutorial.next":Ue,"cursorless.tutorial.previous":Ue,"cursorless.tutorial.restart":Ue,"cursorless.tutorial.resume":Ue,"cursorless.tutorial.list":Ue,"cursorless.documentationOpened":Ue};Object.entries(i).map(([o,s])=>Qr().registerCommand(o,s))}async function Ue(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function l1(t){let e=t.nvim,r=new Sy(e);await r.init();let n=r.runMode==="production"?r:new Tm(r,new gm,r.runMode==="test",void 0),i=new Fp,o=new vy(e),s=r.runMode==="test"?i:o,{commandApi:l,storedTargets:u,hatTokenMap:m,scopeProvider:d,injectIde:g}=await $M({ide:n,commandServerApi:s});await c1(e,r,l,s);let y={testHelpers:r.runMode==="test"?s1(i,u,m,r,n,d,g):void 0};Qr().registerExtensionApi(qM,y),console.log("activate(): Cursorless extension loaded")}function u1(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await WQ(t),{sync:!1})}async function WQ(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await l1(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
