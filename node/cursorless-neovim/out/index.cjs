"use strict";var b2=Object.create;var hp=Object.defineProperty;var w2=Object.getOwnPropertyDescriptor;var E2=Object.getOwnPropertyNames;var _2=Object.getPrototypeOf,R2=Object.prototype.hasOwnProperty;var yp=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),T_=(t,e)=>{for(var r in e)hp(t,r,{get:e[r],enumerable:!0})},x_=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of E2(e))!R2.call(t,i)&&i!==r&&hp(t,i,{get:()=>e[i],enumerable:!(n=w2(e,i))||n.enumerable});return t};var on=(t,e,r)=>(r=t!=null?b2(_2(t)):{},x_(e||!t||!t.__esModule?hp(r,"default",{value:t,enumerable:!0}):r,t)),k2=t=>x_(hp({},"__esModule",{value:!0}),t);var cA=yp((sA,Pm)=>{(function(t,e){typeof Pm=="object"&&Pm.exports?Pm.exports=e():t.nearley=e()})(sA,function(){function t(u,m,d){return this.id=++t.highestId,this.name=u,this.symbols=m,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(u){var m=typeof u>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,u).map(l).join(" ")+" \u25CF "+this.symbols.slice(u).map(l).join(" ");return this.name+" \u2192 "+m};function e(u,m,d,g){this.rule=u,this.dot=m,this.reference=d,this.data=[],this.wantedBy=g,this.isComplete=this.dot===u.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(u){var m=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return m.left=this,m.right=u,m.isComplete&&(m.data=m.build(),m.right=void 0),m},e.prototype.build=function(){var u=[],m=this;do u.push(m.right.data),m=m.left;while(m.left);return u.reverse(),u},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(u,m){this.grammar=u,this.index=m,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(u){for(var m=this.states,d=this.wants,g=this.completed,y=0;y<m.length;y++){var x=m[y];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var E=x.wantedBy,w=E.length;w--;){var U=E[w];this.complete(U,x)}if(x.reference===this.index){var W=x.rule.name;(this.completed[W]=this.completed[W]||[]).push(x)}}}else{var W=x.rule.symbols[x.dot];if(typeof W!="string"){this.scannable.push(x);continue}if(d[W]){if(d[W].push(x),g.hasOwnProperty(W))for(var q=g[W],w=0;w<q.length;w++){var ie=q[w];this.complete(x,ie)}}else d[W]=[x],this.predict(W)}}},r.prototype.predict=function(u){for(var m=this.grammar.byName[u]||[],d=0;d<m.length;d++){var g=m[d],y=this.wants[u],x=new e(g,0,this.index,y);this.states.push(x)}},r.prototype.complete=function(u,m){var d=u.nextState(m);this.states.push(d)};function n(u,m){this.rules=u,this.start=m||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(g){d.hasOwnProperty(g.name)||(d[g.name]=[]),d[g.name].push(g)})}n.fromCompiled=function(g,m){var d=g.Lexer;g.ParserStart&&(m=g.ParserStart,g=g.ParserRules);var g=g.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),y=new n(g,m);return y.lexer=d,y};function i(){this.reset("")}i.prototype.reset=function(u,m){this.buffer=u,this.index=0,this.line=m?m.line:1,this.lastLineBreak=m?-m.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var u=this.buffer[this.index++];return u===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:u}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(u,m){var d=this.buffer;if(typeof d=="string"){var g=d.split(`
`).slice(Math.max(0,this.line-5),this.line),y=d.indexOf(`
`,this.index);y===-1&&(y=d.length);var x=this.index-this.lastLineBreak,E=String(this.line).length;return m+=" at line "+this.line+" col "+x+`:

`,m+=g.map(function(U,W){return w(this.line-g.length+W+1,E)+" "+U},this).join(`
`),m+=`
`+w("",E+x)+`^
`,m}else return m+" at index "+(this.index-1);function w(U,W){var q=String(U);return Array(W-q.length+1).join(" ")+q}};function o(u,m,d){if(u instanceof n)var g=u,d=m;else var g=n.fromCompiled(u,m);this.grammar=g,this.options={keepHistory:!1,lexer:g.lexer||new i};for(var y in d||{})this.options[y]=d[y];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(g,0),E=this.table=[x];x.wants[g.start]=[],x.predict(g.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(u){var m=this.lexer;m.reset(u,this.lexerState);for(var d;;){try{if(d=m.next(),!d)break}catch(ve){var E=new r(this.grammar,this.current+1);this.table.push(E);var g=new Error(this.reportLexerError(ve));throw g.offset=this.current,g.token=ve.token,g}var y=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,E=new r(this.grammar,x);this.table.push(E);for(var w=d.text!==void 0?d.text:d.value,U=m.constructor===i?d.value:m.transform?.(d)??d,W=y.scannable,q=W.length;q--;){var ie=W[q],se=ie.rule.symbols[ie.dot];if(se.test?se.test(U):se.type?se.type===d.type:se.literal===w){var fe=ie.nextState({data:U,token:d,isToken:!0,reference:x-1});E.states.push(fe)}}if(E.process(),E.states.length===0){var g=new Error(this.reportError(d));throw g.offset=this.current,g.token=d,g}this.options.keepHistory&&(y.lexerState=m.save()),this.current++}return y&&(this.lexerState=m.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(u){var m,d,g=u.token;return g?(m="input "+JSON.stringify(g.text[0])+" (lexer error)",d=this.lexer.formatError(g,"Syntax error")):(m="input (lexer error)",d=u.message),this.reportErrorCommon(d,m)},o.prototype.reportError=function(u){var m=(u.type?u.type+" token: ":"")+JSON.stringify(u.value!==void 0?u.value:u),d=this.lexer.formatError(u,"Syntax error");return this.reportErrorCommon(d,m)},o.prototype.reportErrorCommon=function(u,m){var d=[];d.push(u);var g=this.table.length-2,y=this.table[g],x=y.states.filter(function(w){var U=w.rule.symbols[w.dot];return U&&typeof U!="string"});if(x.length===0)d.push("Unexpected "+m+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(y.states,d);else{d.push("Unexpected "+m+`. Instead, I was expecting to see one of the following:
`);var E=x.map(function(w){return this.buildFirstStateStack(w,[])||[w]},this);E.forEach(function(w){var U=w[0],W=U.rule.symbols[U.dot],q=this.getSymbolDisplay(W);d.push("A "+q+" based on:"),this.displayStateStack(w,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(u,m){for(var d,g=0,y=0;y<u.length;y++){var x=u[y],E=x.rule.toString(x.dot);E===d?g++:(g>0&&m.push("    ^ "+g+" more lines identical to this"),g=0,m.push("    "+E)),d=E}},o.prototype.getSymbolDisplay=function(u){return s(u)},o.prototype.buildFirstStateStack=function(u,m){if(m.indexOf(u)!==-1)return null;if(u.wantedBy.length===0)return[u];var d=u.wantedBy[0],g=[u].concat(m),y=this.buildFirstStateStack(d,g);return y===null?null:[u].concat(y)},o.prototype.save=function(){var u=this.table[this.current];return u.lexerState=this.lexerState,u},o.prototype.restore=function(u){var m=u.index;this.current=m,this.table[m]=u,this.table.splice(m+1),this.lexerState=u.lexerState,this.results=this.finish()},o.prototype.rewind=function(u){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[u])},o.prototype.finish=function(){var u=[],m=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(g){g.rule.name===m&&g.dot===g.rule.symbols.length&&g.reference===0&&g.data!==o.fail&&u.push(g)}),u.map(function(g){return g.data})};function s(u){var m=typeof u;if(m==="string")return u;if(m==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return"character matching "+u;if(u.type)return u.type+" token";if(u.test)return"token matching "+String(u.test);throw new Error("Unknown symbol type: "+u)}}function l(u){var m=typeof u;if(m==="string")return u;if(m==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return u.toString();if(u.type)return"%"+u.type;if(u.test)return"<"+String(u.test)+">";throw new Error("Unknown symbol type: "+u)}}return{Parser:o,Grammar:n,Rule:t}})});var dA=yp((fA,Lm)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof Lm=="object"&&Lm.exports?Lm.exports=e():t.moo=e()})(fA,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(B){return B&&e.call(B)==="[object RegExp]"}function i(B){return B&&typeof B=="object"&&!n(B)&&!Array.isArray(B)}function o(B){return B.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(B){var C=new RegExp("|"+B);return C.exec("").length-1}function l(B){return"("+B+")"}function u(B){if(!B.length)return"(?!)";var C=B.map(function(A){return"(?:"+A+")"}).join("|");return"(?:"+C+")"}function m(B){if(typeof B=="string")return"(?:"+o(B)+")";if(n(B)){if(B.ignoreCase)throw new Error("RegExp /i flag not allowed");if(B.global)throw new Error("RegExp /g flag is implied");if(B.sticky)throw new Error("RegExp /y flag is implied");if(B.multiline)throw new Error("RegExp /m flag is implied");return B.source}else throw new Error("Not a pattern: "+B)}function d(B,C){return B.length>C?B:Array(C-B.length+1).join(" ")+B}function g(B,C){for(var A=B.length,z=0;;){var Z=B.lastIndexOf(`
`,A-1);if(Z===-1||(z++,A=Z,z===C)||A===0)break}var F=z<C?0:A+1;return B.substring(F).split(`
`)}function y(B){for(var C=Object.getOwnPropertyNames(B),A=[],z=0;z<C.length;z++){var Z=C[z],F=B[Z],N=[].concat(F);if(Z==="include"){for(var j=0;j<N.length;j++)A.push({include:N[j]});continue}var X=[];N.forEach(function(Q){i(Q)?(X.length&&A.push(E(Z,X)),A.push(E(Z,Q)),X=[]):X.push(Q)}),X.length&&A.push(E(Z,X))}return A}function x(B){for(var C=[],A=0;A<B.length;A++){var z=B[A];if(z.include){for(var Z=[].concat(z.include),F=0;F<Z.length;F++)C.push({include:Z[F]});continue}if(!z.type)throw new Error("Rule has no type: "+JSON.stringify(z));C.push(E(z.type,z))}return C}function E(B,C){if(i(C)||(C={match:C}),C.include)throw new Error("Matching rules cannot also include states");var A={defaultType:B,lineBreaks:!!C.error||!!C.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var z in C)t.call(C,z)&&(A[z]=C[z]);if(typeof A.type=="string"&&B!==A.type)throw new Error("Type transform cannot be a string (type '"+A.type+"' for token '"+B+"')");var Z=A.match;return A.match=Array.isArray(Z)?Z:Z?[Z]:[],A.match.sort(function(F,N){return n(F)&&n(N)?0:n(N)?-1:n(F)?1:N.length-F.length}),A}function w(B){return Array.isArray(B)?x(B):y(B)}var U=E("error",{lineBreaks:!0,shouldThrow:!0});function W(B,C){for(var A=null,z=Object.create(null),Z=!0,F=null,N=[],j=[],X=0;X<B.length;X++)B[X].fallback&&(Z=!1);for(var X=0;X<B.length;X++){var Q=B[X];if(Q.include)throw new Error("Inheritance is not allowed in stateless lexers");if(Q.error||Q.fallback){if(A)throw!Q.fallback==!A.fallback?new Error("Multiple "+(Q.fallback?"fallback":"error")+" rules not allowed (for token '"+Q.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+Q.defaultType+"')");A=Q}var re=Q.match.slice();if(Z)for(;re.length&&typeof re[0]=="string"&&re[0].length===1;){var be=re.shift();z[be.charCodeAt(0)]=Q}if(Q.pop||Q.push||Q.next){if(!C)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+Q.defaultType+"')");if(Q.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+Q.defaultType+"')")}if(re.length!==0){Z=!1,N.push(Q);for(var Ee=0;Ee<re.length;Ee++){var Ke=re[Ee];if(n(Ke)){if(F===null)F=Ke.unicode;else if(F!==Ke.unicode&&Q.fallback===!1)throw new Error("If one rule is /u then all must be")}}var Ue=u(re.map(m)),dt=new RegExp(Ue);if(dt.test(""))throw new Error("RegExp matches empty string: "+dt);var Wt=s(Ue);if(Wt>0)throw new Error("RegExp has capture groups: "+dt+`
Use (?: \u2026 ) instead`);if(!Q.lineBreaks&&dt.test(`
`))throw new Error("Rule should declare lineBreaks: "+dt);j.push(l(Ue))}}var Qr=A&&A.fallback,_o=r&&!Qr?"ym":"gm",pi=r||Qr?"":"|";F===!0&&(_o+="u");var Ea=new RegExp(u(j)+pi,_o);return{regexp:Ea,groups:N,fast:z,error:A||U}}function q(B){var C=W(w(B));return new ve({start:C},"start")}function ie(B,C,A){var z=B&&(B.push||B.next);if(z&&!A[z])throw new Error("Missing state '"+z+"' (in token '"+B.defaultType+"' of state '"+C+"')");if(B&&B.pop&&+B.pop!=1)throw new Error("pop must be 1 (in token '"+B.defaultType+"' of state '"+C+"')")}function se(B,C){var A=B.$all?w(B.$all):[];delete B.$all;var z=Object.getOwnPropertyNames(B);C||(C=z[0]);for(var Z=Object.create(null),F=0;F<z.length;F++){var N=z[F];Z[N]=w(B[N]).concat(A)}for(var F=0;F<z.length;F++)for(var N=z[F],j=Z[N],X=Object.create(null),Q=0;Q<j.length;Q++){var re=j[Q];if(re.include){var be=[Q,1];if(re.include!==N&&!X[re.include]){X[re.include]=!0;var Ee=Z[re.include];if(!Ee)throw new Error("Cannot include nonexistent state '"+re.include+"' (in state '"+N+"')");for(var Ke=0;Ke<Ee.length;Ke++){var Ue=Ee[Ke];j.indexOf(Ue)===-1&&be.push(Ue)}}j.splice.apply(j,be),Q--}}for(var dt=Object.create(null),F=0;F<z.length;F++){var N=z[F];dt[N]=W(Z[N],!0)}for(var F=0;F<z.length;F++){for(var Wt=z[F],Qr=dt[Wt],_o=Qr.groups,Q=0;Q<_o.length;Q++)ie(_o[Q],Wt,dt);for(var pi=Object.getOwnPropertyNames(Qr.fast),Q=0;Q<pi.length;Q++)ie(Qr.fast[pi[Q]],Wt,dt)}return new ve(dt,C)}function fe(B){for(var C=typeof Map<"u",A=C?new Map:Object.create(null),z=Object.getOwnPropertyNames(B),Z=0;Z<z.length;Z++){var F=z[Z],N=B[F],j=Array.isArray(N)?N:[N];j.forEach(function(X){if(typeof X!="string")throw new Error("keyword must be string (in keyword '"+F+"')");C?A.set(X,F):A[X]=F})}return function(X){return C?A.get(X):A[X]}}var ve=function(B,C){this.startState=C,this.states=B,this.buffer="",this.stack=[],this.reset()};ve.prototype.reset=function(B,C){return this.buffer=B||"",this.index=0,this.line=C?C.line:1,this.col=C?C.col:1,this.queuedToken=C?C.queuedToken:null,this.queuedText=C?C.queuedText:"",this.queuedThrow=C?C.queuedThrow:null,this.setState(C?C.state:this.startState),this.stack=C&&C.stack?C.stack.slice():[],this},ve.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},ve.prototype.setState=function(B){if(!(!B||this.state===B)){this.state=B;var C=this.states[B];this.groups=C.groups,this.error=C.error,this.re=C.regexp,this.fast=C.fast}},ve.prototype.popState=function(){this.setState(this.stack.pop())},ve.prototype.pushState=function(B){this.stack.push(this.state),this.setState(B)};var Et=r?function(B,C){return B.exec(C)}:function(B,C){var A=B.exec(C);return A[0].length===0?null:A};ve.prototype._getGroup=function(B){for(var C=this.groups.length,A=0;A<C;A++)if(B[A+1]!==void 0)return this.groups[A];throw new Error("Cannot find token type for matched text")};function yr(){return this.value}if(ve.prototype.next=function(){var B=this.index;if(this.queuedGroup){var C=this._token(this.queuedGroup,this.queuedText,B);return this.queuedGroup=null,this.queuedText="",C}var A=this.buffer;if(B!==A.length){var N=this.fast[A.charCodeAt(B)];if(N)return this._token(N,A.charAt(B),B);var z=this.re;z.lastIndex=B;var Z=Et(z,A),F=this.error;if(Z==null)return this._token(F,A.slice(B,A.length),B);var N=this._getGroup(Z),j=Z[0];return F.fallback&&Z.index!==B?(this.queuedGroup=N,this.queuedText=j,this._token(F,A.slice(B,Z.index),B)):this._token(N,j,B)}},ve.prototype._token=function(B,C,A){var z=0;if(B.lineBreaks){var Z=/\n/g,F=1;if(C===`
`)z=1;else for(;Z.exec(C);)z++,F=Z.lastIndex}var N={type:typeof B.type=="function"&&B.type(C)||B.defaultType,value:typeof B.value=="function"?B.value(C):C,text:C,toString:yr,offset:A,lineBreaks:z,line:this.line,col:this.col},j=C.length;if(this.index+=j,this.line+=z,z!==0?this.col=j-F+1:this.col+=j,B.shouldThrow){var X=new Error(this.formatError(N,"invalid syntax"));throw X}return B.pop?this.popState():B.push?this.pushState(B.push):B.next&&this.setState(B.next),N},typeof Symbol<"u"&&Symbol.iterator){var Tr=function(B){this.lexer=B};Tr.prototype.next=function(){var B=this.lexer.next();return{value:B,done:!B}},Tr.prototype[Symbol.iterator]=function(){return this},ve.prototype[Symbol.iterator]=function(){return new Tr(this)}}return ve.prototype.formatError=function(B,C){if(B==null)var A=this.buffer.slice(this.index),B={text:A,offset:this.index,lineBreaks:A.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var z=2,Z=Math.max(B.line-z,1),F=B.line+z,N=String(F).length,j=g(this.buffer,this.line-B.line+z+1).slice(0,5),X=[];X.push(C+" at line "+B.line+" col "+B.col+":"),X.push("");for(var Q=0;Q<j.length;Q++){var re=j[Q],be=Z+Q;X.push(d(String(be),N)+"  "+re),be===B.line&&X.push(d("",N+B.col+1)+"^")}return X.join(`
`)},ve.prototype.clone=function(){return new ve(this.states,this.state)},ve.prototype.has=function(B){return!0},{compile:q,states:se,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:fe}})});var gl=yp((Zn,lP)=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});function Mn(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var l4=typeof process=="object"&&process.env.NODE_ENV==="production";function mn(t,e){if(!t)throw l4?new Error("Invariant failed"):new Error(e())}Zn.invariant=mn;var rS=Object.prototype.hasOwnProperty,u4=Array.prototype.splice,p4=Object.prototype.toString;function ea(t){return p4.call(t).slice(8,-1)}var cf=Object.assign||function(t,e){return nS(e).forEach(function(r){rS.call(e,r)&&(t[r]=e[r])}),t},nS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function co(t){return Array.isArray(t)?cf(t.constructor(t.length),t):ea(t)==="Map"?new Map(t):ea(t)==="Set"?new Set(t):t&&typeof t=="object"?cf(Object.create(Object.getPrototypeOf(t)),t):t}var sP=function(){function t(){this.commands=cf({},m4),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||mn(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),mn(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return nS(i).forEach(function(s){if(rS.call(n.commands,s)){var l=e===o;o=n.commands[s](i[s],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var u=ea(e)==="Map"?n.update(e.get(s),i[s]):n.update(e[s],i[s]),m=ea(o)==="Map"?o.get(s):o[s];(!n.isEquals(u,m)||typeof u>"u"&&!rS.call(e,s))&&(o===e&&(o=co(e)),ea(o)==="Map"?o.set(s,u):o[s]=u)}}),o},t}();Zn.Context=sP;var m4={$push:function(t,e,r){return oP(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return oP(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return f4(e,r),t.forEach(function(i){cP(i),e===n&&i.length&&(e=co(n)),u4.apply(e,i)}),e},$set:function(t,e,r){return g4(r),t},$toggle:function(t,e){dl(t,"$toggle");var r=t.length?co(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return dl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=co(n)),delete e[i])}),e},$add:function(t,e,r,n){return aP(e,"$add"),dl(t,"$add"),ea(e)==="Map"?t.forEach(function(i){var o=i[0],s=i[1];e===n&&e.get(o)!==s&&(e=co(n)),e.set(o,s)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=co(n)),e.add(i)}),e},$remove:function(t,e,r,n){return aP(e,"$remove"),dl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=co(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return h4(e,t),nS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=co(n)),e[i]=t[i])}),e},$apply:function(t,e){return d4(t),t(e)}},iS=new sP;Zn.isEquals=iS.update.isEquals;Zn.extend=iS.extend;Zn.default=iS.update;Zn.default.default=lP.exports=cf(Zn.default,Zn);function oP(t,e,r){mn(Array.isArray(t),function(){return"update(): expected target of "+Mn(r)+" to be an array; got "+Mn(t)+"."}),dl(e[r],r)}function dl(t,e){mn(Array.isArray(t),function(){return"update(): expected spec of "+Mn(e)+" to be an array; got "+Mn(t)+". Did you forget to wrap your parameter in an array?"})}function f4(t,e){mn(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+Mn(t)}),cP(e.$splice)}function cP(t){mn(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+Mn(t)+". Did you forget to wrap your parameters in an array?"})}function d4(t){mn(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+Mn(t)+"."})}function g4(t){mn(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function h4(t,e){mn(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+Mn(e)}),mn(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+Mn(t)})}function aP(t,e){var r=ea(t);mn(r==="Map"||r==="Set",function(){return"update(): "+Mn(e)+" expects a target of type Set or Map; got "+Mn(r)})}});var yv=yp((tc,Xl)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",m=1,d=2,g=4,y=1,x=2,E=1,w=2,U=4,W=8,q=16,ie=32,se=64,fe=128,ve=256,Et=512,yr=30,Tr="...",B=800,C=16,A=1,z=2,Z=3,F=1/0,N=9007199254740991,j=17976931348623157e292,X=NaN,Q=4294967295,re=Q-1,be=Q>>>1,Ee=[["ary",fe],["bind",E],["bindKey",w],["curry",W],["curryRight",q],["flip",Et],["partial",ie],["partialRight",se],["rearg",ve]],Ke="[object Arguments]",Ue="[object Array]",dt="[object AsyncFunction]",Wt="[object Boolean]",Qr="[object Date]",_o="[object DOMException]",pi="[object Error]",Ea="[object Function]",Vb="[object GeneratorFunction]",vn="[object Map]",yc="[object Number]",HF="[object Null]",mi="[object Object]",Wb="[object Promise]",BF="[object Proxy]",Tc="[object RegExp]",bn="[object Set]",xc="[object String]",ku="[object Symbol]",VF="[object Undefined]",Sc="[object WeakMap]",WF="[object WeakSet]",vc="[object ArrayBuffer]",_a="[object DataView]",ly="[object Float32Array]",uy="[object Float64Array]",py="[object Int8Array]",my="[object Int16Array]",fy="[object Int32Array]",dy="[object Uint8Array]",gy="[object Uint8ClampedArray]",hy="[object Uint16Array]",yy="[object Uint32Array]",$F=/\b__p \+= '';/g,jF=/\b(__p \+=) '' \+/g,zF=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$b=/&(?:amp|lt|gt|quot|#39);/g,jb=/[&<>"']/g,qF=RegExp($b.source),GF=RegExp(jb.source),KF=/<%-([\s\S]+?)%>/g,QF=/<%([\s\S]+?)%>/g,zb=/<%=([\s\S]+?)%>/g,YF=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ZF=/^\w*$/,XF=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ty=/[\\^$.*+?()[\]{}|]/g,JF=RegExp(Ty.source),xy=/^\s+/,eI=/\s/,tI=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,rI=/\{\n\/\* \[wrapped with (.+)\] \*/,nI=/,? & /,iI=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oI=/[()=,{}\[\]\/\s]/,aI=/\\(\\)?/g,sI=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qb=/\w*$/,cI=/^[-+]0x[0-9a-f]+$/i,lI=/^0b[01]+$/i,uI=/^\[object .+?Constructor\]$/,pI=/^0o[0-7]+$/i,mI=/^(?:0|[1-9]\d*)$/,fI=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Au=/($^)/,dI=/['\n\r\u2028\u2029\\]/g,Pu="\\ud800-\\udfff",gI="\\u0300-\\u036f",hI="\\ufe20-\\ufe2f",yI="\\u20d0-\\u20ff",Gb=gI+hI+yI,Kb="\\u2700-\\u27bf",Qb="a-z\\xdf-\\xf6\\xf8-\\xff",TI="\\xac\\xb1\\xd7\\xf7",xI="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",SI="\\u2000-\\u206f",vI=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yb="A-Z\\xc0-\\xd6\\xd8-\\xde",Zb="\\ufe0e\\ufe0f",Xb=TI+xI+SI+vI,Sy="['\u2019]",bI="["+Pu+"]",Jb="["+Xb+"]",Du="["+Gb+"]",ew="\\d+",wI="["+Kb+"]",tw="["+Qb+"]",rw="[^"+Pu+Xb+ew+Kb+Qb+Yb+"]",vy="\\ud83c[\\udffb-\\udfff]",EI="(?:"+Du+"|"+vy+")",nw="[^"+Pu+"]",by="(?:\\ud83c[\\udde6-\\uddff]){2}",wy="[\\ud800-\\udbff][\\udc00-\\udfff]",Ra="["+Yb+"]",iw="\\u200d",ow="(?:"+tw+"|"+rw+")",_I="(?:"+Ra+"|"+rw+")",aw="(?:"+Sy+"(?:d|ll|m|re|s|t|ve))?",sw="(?:"+Sy+"(?:D|LL|M|RE|S|T|VE))?",cw=EI+"?",lw="["+Zb+"]?",RI="(?:"+iw+"(?:"+[nw,by,wy].join("|")+")"+lw+cw+")*",kI="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",AI="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",uw=lw+cw+RI,PI="(?:"+[wI,by,wy].join("|")+")"+uw,DI="(?:"+[nw+Du+"?",Du,by,wy,bI].join("|")+")",MI=RegExp(Sy,"g"),LI=RegExp(Du,"g"),Ey=RegExp(vy+"(?="+vy+")|"+DI+uw,"g"),FI=RegExp([Ra+"?"+tw+"+"+aw+"(?="+[Jb,Ra,"$"].join("|")+")",_I+"+"+sw+"(?="+[Jb,Ra+ow,"$"].join("|")+")",Ra+"?"+ow+"+"+aw,Ra+"+"+sw,AI,kI,ew,PI].join("|"),"g"),II=RegExp("["+iw+Pu+Gb+Zb+"]"),CI=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,OI=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],NI=-1,nt={};nt[ly]=nt[uy]=nt[py]=nt[my]=nt[fy]=nt[dy]=nt[gy]=nt[hy]=nt[yy]=!0,nt[Ke]=nt[Ue]=nt[vc]=nt[Wt]=nt[_a]=nt[Qr]=nt[pi]=nt[Ea]=nt[vn]=nt[yc]=nt[mi]=nt[Tc]=nt[bn]=nt[xc]=nt[Sc]=!1;var rt={};rt[Ke]=rt[Ue]=rt[vc]=rt[_a]=rt[Wt]=rt[Qr]=rt[ly]=rt[uy]=rt[py]=rt[my]=rt[fy]=rt[vn]=rt[yc]=rt[mi]=rt[Tc]=rt[bn]=rt[xc]=rt[ku]=rt[dy]=rt[gy]=rt[hy]=rt[yy]=!0,rt[pi]=rt[Ea]=rt[Sc]=!1;var UI={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},HI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},BI={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},VI={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},WI=parseFloat,$I=parseInt,pw=typeof global=="object"&&global&&global.Object===Object&&global,jI=typeof self=="object"&&self&&self.Object===Object&&self,It=pw||jI||Function("return this")(),_y=typeof tc=="object"&&tc&&!tc.nodeType&&tc,Ro=_y&&typeof Xl=="object"&&Xl&&!Xl.nodeType&&Xl,mw=Ro&&Ro.exports===_y,Ry=mw&&pw.process,Yr=function(){try{var P=Ro&&Ro.require&&Ro.require("util").types;return P||Ry&&Ry.binding&&Ry.binding("util")}catch{}}(),fw=Yr&&Yr.isArrayBuffer,dw=Yr&&Yr.isDate,gw=Yr&&Yr.isMap,hw=Yr&&Yr.isRegExp,yw=Yr&&Yr.isSet,Tw=Yr&&Yr.isTypedArray;function Lr(P,$,V){switch(V.length){case 0:return P.call($);case 1:return P.call($,V[0]);case 2:return P.call($,V[0],V[1]);case 3:return P.call($,V[0],V[1],V[2])}return P.apply($,V)}function zI(P,$,V,le){for(var Re=-1,Qe=P==null?0:P.length;++Re<Qe;){var Pt=P[Re];$(le,Pt,V(Pt),P)}return le}function Zr(P,$){for(var V=-1,le=P==null?0:P.length;++V<le&&$(P[V],V,P)!==!1;);return P}function qI(P,$){for(var V=P==null?0:P.length;V--&&$(P[V],V,P)!==!1;);return P}function xw(P,$){for(var V=-1,le=P==null?0:P.length;++V<le;)if(!$(P[V],V,P))return!1;return!0}function Ci(P,$){for(var V=-1,le=P==null?0:P.length,Re=0,Qe=[];++V<le;){var Pt=P[V];$(Pt,V,P)&&(Qe[Re++]=Pt)}return Qe}function Mu(P,$){var V=P==null?0:P.length;return!!V&&ka(P,$,0)>-1}function ky(P,$,V){for(var le=-1,Re=P==null?0:P.length;++le<Re;)if(V($,P[le]))return!0;return!1}function at(P,$){for(var V=-1,le=P==null?0:P.length,Re=Array(le);++V<le;)Re[V]=$(P[V],V,P);return Re}function Oi(P,$){for(var V=-1,le=$.length,Re=P.length;++V<le;)P[Re+V]=$[V];return P}function Ay(P,$,V,le){var Re=-1,Qe=P==null?0:P.length;for(le&&Qe&&(V=P[++Re]);++Re<Qe;)V=$(V,P[Re],Re,P);return V}function GI(P,$,V,le){var Re=P==null?0:P.length;for(le&&Re&&(V=P[--Re]);Re--;)V=$(V,P[Re],Re,P);return V}function Py(P,$){for(var V=-1,le=P==null?0:P.length;++V<le;)if($(P[V],V,P))return!0;return!1}var KI=Dy("length");function QI(P){return P.split("")}function YI(P){return P.match(iI)||[]}function Sw(P,$,V){var le;return V(P,function(Re,Qe,Pt){if($(Re,Qe,Pt))return le=Qe,!1}),le}function Lu(P,$,V,le){for(var Re=P.length,Qe=V+(le?1:-1);le?Qe--:++Qe<Re;)if($(P[Qe],Qe,P))return Qe;return-1}function ka(P,$,V){return $===$?cC(P,$,V):Lu(P,vw,V)}function ZI(P,$,V,le){for(var Re=V-1,Qe=P.length;++Re<Qe;)if(le(P[Re],$))return Re;return-1}function vw(P){return P!==P}function bw(P,$){var V=P==null?0:P.length;return V?Ly(P,$)/V:X}function Dy(P){return function($){return $==null?t:$[P]}}function My(P){return function($){return P==null?t:P[$]}}function ww(P,$,V,le,Re){return Re(P,function(Qe,Pt,tt){V=le?(le=!1,Qe):$(V,Qe,Pt,tt)}),V}function XI(P,$){var V=P.length;for(P.sort($);V--;)P[V]=P[V].value;return P}function Ly(P,$){for(var V,le=-1,Re=P.length;++le<Re;){var Qe=$(P[le]);Qe!==t&&(V=V===t?Qe:V+Qe)}return V}function Fy(P,$){for(var V=-1,le=Array(P);++V<P;)le[V]=$(V);return le}function JI(P,$){return at($,function(V){return[V,P[V]]})}function Ew(P){return P&&P.slice(0,Aw(P)+1).replace(xy,"")}function Fr(P){return function($){return P($)}}function Iy(P,$){return at($,function(V){return P[V]})}function bc(P,$){return P.has($)}function _w(P,$){for(var V=-1,le=P.length;++V<le&&ka($,P[V],0)>-1;);return V}function Rw(P,$){for(var V=P.length;V--&&ka($,P[V],0)>-1;);return V}function eC(P,$){for(var V=P.length,le=0;V--;)P[V]===$&&++le;return le}var tC=My(UI),rC=My(HI);function nC(P){return"\\"+VI[P]}function iC(P,$){return P==null?t:P[$]}function Aa(P){return II.test(P)}function oC(P){return CI.test(P)}function aC(P){for(var $,V=[];!($=P.next()).done;)V.push($.value);return V}function Cy(P){var $=-1,V=Array(P.size);return P.forEach(function(le,Re){V[++$]=[Re,le]}),V}function kw(P,$){return function(V){return P($(V))}}function Ni(P,$){for(var V=-1,le=P.length,Re=0,Qe=[];++V<le;){var Pt=P[V];(Pt===$||Pt===u)&&(P[V]=u,Qe[Re++]=V)}return Qe}function Fu(P){var $=-1,V=Array(P.size);return P.forEach(function(le){V[++$]=le}),V}function sC(P){var $=-1,V=Array(P.size);return P.forEach(function(le){V[++$]=[le,le]}),V}function cC(P,$,V){for(var le=V-1,Re=P.length;++le<Re;)if(P[le]===$)return le;return-1}function lC(P,$,V){for(var le=V+1;le--;)if(P[le]===$)return le;return le}function Pa(P){return Aa(P)?pC(P):KI(P)}function wn(P){return Aa(P)?mC(P):QI(P)}function Aw(P){for(var $=P.length;$--&&eI.test(P.charAt($)););return $}var uC=My(BI);function pC(P){for(var $=Ey.lastIndex=0;Ey.test(P);)++$;return $}function mC(P){return P.match(Ey)||[]}function fC(P){return P.match(FI)||[]}var dC=function P($){$=$==null?It:Ui.defaults(It.Object(),$,Ui.pick(It,OI));var V=$.Array,le=$.Date,Re=$.Error,Qe=$.Function,Pt=$.Math,tt=$.Object,Oy=$.RegExp,gC=$.String,Xr=$.TypeError,Iu=V.prototype,hC=Qe.prototype,Da=tt.prototype,Cu=$["__core-js_shared__"],Ou=hC.toString,Xe=Da.hasOwnProperty,yC=0,Pw=function(){var a=/[^.]+$/.exec(Cu&&Cu.keys&&Cu.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Nu=Da.toString,TC=Ou.call(tt),xC=It._,SC=Oy("^"+Ou.call(Xe).replace(Ty,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Uu=mw?$.Buffer:t,Hi=$.Symbol,Hu=$.Uint8Array,Dw=Uu?Uu.allocUnsafe:t,Bu=kw(tt.getPrototypeOf,tt),Mw=tt.create,Lw=Da.propertyIsEnumerable,Vu=Iu.splice,Fw=Hi?Hi.isConcatSpreadable:t,wc=Hi?Hi.iterator:t,ko=Hi?Hi.toStringTag:t,Wu=function(){try{var a=Lo(tt,"defineProperty");return a({},"",{}),a}catch{}}(),vC=$.clearTimeout!==It.clearTimeout&&$.clearTimeout,bC=le&&le.now!==It.Date.now&&le.now,wC=$.setTimeout!==It.setTimeout&&$.setTimeout,$u=Pt.ceil,ju=Pt.floor,Ny=tt.getOwnPropertySymbols,EC=Uu?Uu.isBuffer:t,Iw=$.isFinite,_C=Iu.join,RC=kw(tt.keys,tt),Dt=Pt.max,Xt=Pt.min,kC=le.now,AC=$.parseInt,Cw=Pt.random,PC=Iu.reverse,Uy=Lo($,"DataView"),Ec=Lo($,"Map"),Hy=Lo($,"Promise"),Ma=Lo($,"Set"),_c=Lo($,"WeakMap"),Rc=Lo(tt,"create"),zu=_c&&new _c,La={},DC=Fo(Uy),MC=Fo(Ec),LC=Fo(Hy),FC=Fo(Ma),IC=Fo(_c),qu=Hi?Hi.prototype:t,kc=qu?qu.valueOf:t,Ow=qu?qu.toString:t;function T(a){if(gt(a)&&!ke(a)&&!(a instanceof We)){if(a instanceof Jr)return a;if(Xe.call(a,"__wrapped__"))return NE(a)}return new Jr(a)}var Fa=function(){function a(){}return function(c){if(!ut(c))return{};if(Mw)return Mw(c);a.prototype=c;var p=new a;return a.prototype=t,p}}();function Gu(){}function Jr(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:KF,evaluate:QF,interpolate:zb,variable:"",imports:{_:T}},T.prototype=Gu.prototype,T.prototype.constructor=T,Jr.prototype=Fa(Gu.prototype),Jr.prototype.constructor=Jr;function We(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Q,this.__views__=[]}function CC(){var a=new We(this.__wrapped__);return a.__actions__=xr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=xr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=xr(this.__views__),a}function OC(){if(this.__filtered__){var a=new We(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function NC(){var a=this.__wrapped__.value(),c=this.__dir__,p=ke(a),f=c<0,h=p?a.length:0,S=Q1(0,h,this.__views__),_=S.start,R=S.end,M=R-_,G=f?R:_-1,K=this.__iteratees__,ee=K.length,ae=0,me=Xt(M,this.__takeCount__);if(!p||!f&&h==M&&me==M)return aE(a,this.__actions__);var xe=[];e:for(;M--&&ae<me;){G+=c;for(var Fe=-1,Se=a[G];++Fe<ee;){var He=K[Fe],$e=He.iteratee,Or=He.type,cr=$e(Se);if(Or==z)Se=cr;else if(!cr){if(Or==A)continue e;break e}}xe[ae++]=Se}return xe}We.prototype=Fa(Gu.prototype),We.prototype.constructor=We;function Ao(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function UC(){this.__data__=Rc?Rc(null):{},this.size=0}function HC(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function BC(a){var c=this.__data__;if(Rc){var p=c[a];return p===s?t:p}return Xe.call(c,a)?c[a]:t}function VC(a){var c=this.__data__;return Rc?c[a]!==t:Xe.call(c,a)}function WC(a,c){var p=this.__data__;return this.size+=this.has(a)?0:1,p[a]=Rc&&c===t?s:c,this}Ao.prototype.clear=UC,Ao.prototype.delete=HC,Ao.prototype.get=BC,Ao.prototype.has=VC,Ao.prototype.set=WC;function fi(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function $C(){this.__data__=[],this.size=0}function jC(a){var c=this.__data__,p=Ku(c,a);if(p<0)return!1;var f=c.length-1;return p==f?c.pop():Vu.call(c,p,1),--this.size,!0}function zC(a){var c=this.__data__,p=Ku(c,a);return p<0?t:c[p][1]}function qC(a){return Ku(this.__data__,a)>-1}function GC(a,c){var p=this.__data__,f=Ku(p,a);return f<0?(++this.size,p.push([a,c])):p[f][1]=c,this}fi.prototype.clear=$C,fi.prototype.delete=jC,fi.prototype.get=zC,fi.prototype.has=qC,fi.prototype.set=GC;function di(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function KC(){this.size=0,this.__data__={hash:new Ao,map:new(Ec||fi),string:new Ao}}function QC(a){var c=ap(this,a).delete(a);return this.size-=c?1:0,c}function YC(a){return ap(this,a).get(a)}function ZC(a){return ap(this,a).has(a)}function XC(a,c){var p=ap(this,a),f=p.size;return p.set(a,c),this.size+=p.size==f?0:1,this}di.prototype.clear=KC,di.prototype.delete=QC,di.prototype.get=YC,di.prototype.has=ZC,di.prototype.set=XC;function Po(a){var c=-1,p=a==null?0:a.length;for(this.__data__=new di;++c<p;)this.add(a[c])}function JC(a){return this.__data__.set(a,s),this}function e1(a){return this.__data__.has(a)}Po.prototype.add=Po.prototype.push=JC,Po.prototype.has=e1;function En(a){var c=this.__data__=new fi(a);this.size=c.size}function t1(){this.__data__=new fi,this.size=0}function r1(a){var c=this.__data__,p=c.delete(a);return this.size=c.size,p}function n1(a){return this.__data__.get(a)}function i1(a){return this.__data__.has(a)}function o1(a,c){var p=this.__data__;if(p instanceof fi){var f=p.__data__;if(!Ec||f.length<r-1)return f.push([a,c]),this.size=++p.size,this;p=this.__data__=new di(f)}return p.set(a,c),this.size=p.size,this}En.prototype.clear=t1,En.prototype.delete=r1,En.prototype.get=n1,En.prototype.has=i1,En.prototype.set=o1;function Nw(a,c){var p=ke(a),f=!p&&Io(a),h=!p&&!f&&ji(a),S=!p&&!f&&!h&&Na(a),_=p||f||h||S,R=_?Fy(a.length,gC):[],M=R.length;for(var G in a)(c||Xe.call(a,G))&&!(_&&(G=="length"||h&&(G=="offset"||G=="parent")||S&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||Ti(G,M)))&&R.push(G);return R}function Uw(a){var c=a.length;return c?a[Yy(0,c-1)]:t}function a1(a,c){return sp(xr(a),Do(c,0,a.length))}function s1(a){return sp(xr(a))}function By(a,c,p){(p!==t&&!_n(a[c],p)||p===t&&!(c in a))&&gi(a,c,p)}function Ac(a,c,p){var f=a[c];(!(Xe.call(a,c)&&_n(f,p))||p===t&&!(c in a))&&gi(a,c,p)}function Ku(a,c){for(var p=a.length;p--;)if(_n(a[p][0],c))return p;return-1}function c1(a,c,p,f){return Bi(a,function(h,S,_){c(f,h,p(h),_)}),f}function Hw(a,c){return a&&Vn(c,Ct(c),a)}function l1(a,c){return a&&Vn(c,vr(c),a)}function gi(a,c,p){c=="__proto__"&&Wu?Wu(a,c,{configurable:!0,enumerable:!0,value:p,writable:!0}):a[c]=p}function Vy(a,c){for(var p=-1,f=c.length,h=V(f),S=a==null;++p<f;)h[p]=S?t:vT(a,c[p]);return h}function Do(a,c,p){return a===a&&(p!==t&&(a=a<=p?a:p),c!==t&&(a=a>=c?a:c)),a}function en(a,c,p,f,h,S){var _,R=c&m,M=c&d,G=c&g;if(p&&(_=h?p(a,f,h,S):p(a)),_!==t)return _;if(!ut(a))return a;var K=ke(a);if(K){if(_=Z1(a),!R)return xr(a,_)}else{var ee=Jt(a),ae=ee==Ea||ee==Vb;if(ji(a))return lE(a,R);if(ee==mi||ee==Ke||ae&&!h){if(_=M||ae?{}:AE(a),!R)return M?B1(a,l1(_,a)):H1(a,Hw(_,a))}else{if(!rt[ee])return h?a:{};_=X1(a,ee,R)}}S||(S=new En);var me=S.get(a);if(me)return me;S.set(a,_),n_(a)?a.forEach(function(Se){_.add(en(Se,c,p,Se,a,S))}):t_(a)&&a.forEach(function(Se,He){_.set(He,en(Se,c,p,He,a,S))});var xe=G?M?sT:aT:M?vr:Ct,Fe=K?t:xe(a);return Zr(Fe||a,function(Se,He){Fe&&(He=Se,Se=a[He]),Ac(_,He,en(Se,c,p,He,a,S))}),_}function u1(a){var c=Ct(a);return function(p){return Bw(p,a,c)}}function Bw(a,c,p){var f=p.length;if(a==null)return!f;for(a=tt(a);f--;){var h=p[f],S=c[h],_=a[h];if(_===t&&!(h in a)||!S(_))return!1}return!0}function Vw(a,c,p){if(typeof a!="function")throw new Xr(i);return Cc(function(){a.apply(t,p)},c)}function Pc(a,c,p,f){var h=-1,S=Mu,_=!0,R=a.length,M=[],G=c.length;if(!R)return M;p&&(c=at(c,Fr(p))),f?(S=ky,_=!1):c.length>=r&&(S=bc,_=!1,c=new Po(c));e:for(;++h<R;){var K=a[h],ee=p==null?K:p(K);if(K=f||K!==0?K:0,_&&ee===ee){for(var ae=G;ae--;)if(c[ae]===ee)continue e;M.push(K)}else S(c,ee,f)||M.push(K)}return M}var Bi=dE(Bn),Ww=dE($y,!0);function p1(a,c){var p=!0;return Bi(a,function(f,h,S){return p=!!c(f,h,S),p}),p}function Qu(a,c,p){for(var f=-1,h=a.length;++f<h;){var S=a[f],_=c(S);if(_!=null&&(R===t?_===_&&!Cr(_):p(_,R)))var R=_,M=S}return M}function m1(a,c,p,f){var h=a.length;for(p=De(p),p<0&&(p=-p>h?0:h+p),f=f===t||f>h?h:De(f),f<0&&(f+=h),f=p>f?0:o_(f);p<f;)a[p++]=c;return a}function $w(a,c){var p=[];return Bi(a,function(f,h,S){c(f,h,S)&&p.push(f)}),p}function $t(a,c,p,f,h){var S=-1,_=a.length;for(p||(p=eO),h||(h=[]);++S<_;){var R=a[S];c>0&&p(R)?c>1?$t(R,c-1,p,f,h):Oi(h,R):f||(h[h.length]=R)}return h}var Wy=gE(),jw=gE(!0);function Bn(a,c){return a&&Wy(a,c,Ct)}function $y(a,c){return a&&jw(a,c,Ct)}function Yu(a,c){return Ci(c,function(p){return xi(a[p])})}function Mo(a,c){c=Wi(c,a);for(var p=0,f=c.length;a!=null&&p<f;)a=a[Wn(c[p++])];return p&&p==f?a:t}function zw(a,c,p){var f=c(a);return ke(a)?f:Oi(f,p(a))}function ar(a){return a==null?a===t?VF:HF:ko&&ko in tt(a)?K1(a):sO(a)}function jy(a,c){return a>c}function f1(a,c){return a!=null&&Xe.call(a,c)}function d1(a,c){return a!=null&&c in tt(a)}function g1(a,c,p){return a>=Xt(c,p)&&a<Dt(c,p)}function zy(a,c,p){for(var f=p?ky:Mu,h=a[0].length,S=a.length,_=S,R=V(S),M=1/0,G=[];_--;){var K=a[_];_&&c&&(K=at(K,Fr(c))),M=Xt(K.length,M),R[_]=!p&&(c||h>=120&&K.length>=120)?new Po(_&&K):t}K=a[0];var ee=-1,ae=R[0];e:for(;++ee<h&&G.length<M;){var me=K[ee],xe=c?c(me):me;if(me=p||me!==0?me:0,!(ae?bc(ae,xe):f(G,xe,p))){for(_=S;--_;){var Fe=R[_];if(!(Fe?bc(Fe,xe):f(a[_],xe,p)))continue e}ae&&ae.push(xe),G.push(me)}}return G}function h1(a,c,p,f){return Bn(a,function(h,S,_){c(f,p(h),S,_)}),f}function Dc(a,c,p){c=Wi(c,a),a=LE(a,c);var f=a==null?a:a[Wn(rn(c))];return f==null?t:Lr(f,a,p)}function qw(a){return gt(a)&&ar(a)==Ke}function y1(a){return gt(a)&&ar(a)==vc}function T1(a){return gt(a)&&ar(a)==Qr}function Mc(a,c,p,f,h){return a===c?!0:a==null||c==null||!gt(a)&&!gt(c)?a!==a&&c!==c:x1(a,c,p,f,Mc,h)}function x1(a,c,p,f,h,S){var _=ke(a),R=ke(c),M=_?Ue:Jt(a),G=R?Ue:Jt(c);M=M==Ke?mi:M,G=G==Ke?mi:G;var K=M==mi,ee=G==mi,ae=M==G;if(ae&&ji(a)){if(!ji(c))return!1;_=!0,K=!1}if(ae&&!K)return S||(S=new En),_||Na(a)?_E(a,c,p,f,h,S):q1(a,c,M,p,f,h,S);if(!(p&y)){var me=K&&Xe.call(a,"__wrapped__"),xe=ee&&Xe.call(c,"__wrapped__");if(me||xe){var Fe=me?a.value():a,Se=xe?c.value():c;return S||(S=new En),h(Fe,Se,p,f,S)}}return ae?(S||(S=new En),G1(a,c,p,f,h,S)):!1}function S1(a){return gt(a)&&Jt(a)==vn}function qy(a,c,p,f){var h=p.length,S=h,_=!f;if(a==null)return!S;for(a=tt(a);h--;){var R=p[h];if(_&&R[2]?R[1]!==a[R[0]]:!(R[0]in a))return!1}for(;++h<S;){R=p[h];var M=R[0],G=a[M],K=R[1];if(_&&R[2]){if(G===t&&!(M in a))return!1}else{var ee=new En;if(f)var ae=f(G,K,M,a,c,ee);if(!(ae===t?Mc(K,G,y|x,f,ee):ae))return!1}}return!0}function Gw(a){if(!ut(a)||rO(a))return!1;var c=xi(a)?SC:uI;return c.test(Fo(a))}function v1(a){return gt(a)&&ar(a)==Tc}function b1(a){return gt(a)&&Jt(a)==bn}function w1(a){return gt(a)&&fp(a.length)&&!!nt[ar(a)]}function Kw(a){return typeof a=="function"?a:a==null?br:typeof a=="object"?ke(a)?Zw(a[0],a[1]):Yw(a):h_(a)}function Gy(a){if(!Ic(a))return RC(a);var c=[];for(var p in tt(a))Xe.call(a,p)&&p!="constructor"&&c.push(p);return c}function E1(a){if(!ut(a))return aO(a);var c=Ic(a),p=[];for(var f in a)f=="constructor"&&(c||!Xe.call(a,f))||p.push(f);return p}function Ky(a,c){return a<c}function Qw(a,c){var p=-1,f=Sr(a)?V(a.length):[];return Bi(a,function(h,S,_){f[++p]=c(h,S,_)}),f}function Yw(a){var c=lT(a);return c.length==1&&c[0][2]?DE(c[0][0],c[0][1]):function(p){return p===a||qy(p,a,c)}}function Zw(a,c){return pT(a)&&PE(c)?DE(Wn(a),c):function(p){var f=vT(p,a);return f===t&&f===c?bT(p,a):Mc(c,f,y|x)}}function Zu(a,c,p,f,h){a!==c&&Wy(c,function(S,_){if(h||(h=new En),ut(S))_1(a,c,_,p,Zu,f,h);else{var R=f?f(fT(a,_),S,_+"",a,c,h):t;R===t&&(R=S),By(a,_,R)}},vr)}function _1(a,c,p,f,h,S,_){var R=fT(a,p),M=fT(c,p),G=_.get(M);if(G){By(a,p,G);return}var K=S?S(R,M,p+"",a,c,_):t,ee=K===t;if(ee){var ae=ke(M),me=!ae&&ji(M),xe=!ae&&!me&&Na(M);K=M,ae||me||xe?ke(R)?K=R:Tt(R)?K=xr(R):me?(ee=!1,K=lE(M,!0)):xe?(ee=!1,K=uE(M,!0)):K=[]:Oc(M)||Io(M)?(K=R,Io(R)?K=a_(R):(!ut(R)||xi(R))&&(K=AE(M))):ee=!1}ee&&(_.set(M,K),h(K,M,f,S,_),_.delete(M)),By(a,p,K)}function Xw(a,c){var p=a.length;if(p)return c+=c<0?p:0,Ti(c,p)?a[c]:t}function Jw(a,c,p){c.length?c=at(c,function(S){return ke(S)?function(_){return Mo(_,S.length===1?S[0]:S)}:S}):c=[br];var f=-1;c=at(c,Fr(ye()));var h=Qw(a,function(S,_,R){var M=at(c,function(G){return G(S)});return{criteria:M,index:++f,value:S}});return XI(h,function(S,_){return U1(S,_,p)})}function R1(a,c){return eE(a,c,function(p,f){return bT(a,f)})}function eE(a,c,p){for(var f=-1,h=c.length,S={};++f<h;){var _=c[f],R=Mo(a,_);p(R,_)&&Lc(S,Wi(_,a),R)}return S}function k1(a){return function(c){return Mo(c,a)}}function Qy(a,c,p,f){var h=f?ZI:ka,S=-1,_=c.length,R=a;for(a===c&&(c=xr(c)),p&&(R=at(a,Fr(p)));++S<_;)for(var M=0,G=c[S],K=p?p(G):G;(M=h(R,K,M,f))>-1;)R!==a&&Vu.call(R,M,1),Vu.call(a,M,1);return a}function tE(a,c){for(var p=a?c.length:0,f=p-1;p--;){var h=c[p];if(p==f||h!==S){var S=h;Ti(h)?Vu.call(a,h,1):Jy(a,h)}}return a}function Yy(a,c){return a+ju(Cw()*(c-a+1))}function A1(a,c,p,f){for(var h=-1,S=Dt($u((c-a)/(p||1)),0),_=V(S);S--;)_[f?S:++h]=a,a+=p;return _}function Zy(a,c){var p="";if(!a||c<1||c>N)return p;do c%2&&(p+=a),c=ju(c/2),c&&(a+=a);while(c);return p}function Ce(a,c){return dT(ME(a,c,br),a+"")}function P1(a){return Uw(Ua(a))}function D1(a,c){var p=Ua(a);return sp(p,Do(c,0,p.length))}function Lc(a,c,p,f){if(!ut(a))return a;c=Wi(c,a);for(var h=-1,S=c.length,_=S-1,R=a;R!=null&&++h<S;){var M=Wn(c[h]),G=p;if(M==="__proto__"||M==="constructor"||M==="prototype")return a;if(h!=_){var K=R[M];G=f?f(K,M,R):t,G===t&&(G=ut(K)?K:Ti(c[h+1])?[]:{})}Ac(R,M,G),R=R[M]}return a}var rE=zu?function(a,c){return zu.set(a,c),a}:br,M1=Wu?function(a,c){return Wu(a,"toString",{configurable:!0,enumerable:!1,value:ET(c),writable:!0})}:br;function L1(a){return sp(Ua(a))}function tn(a,c,p){var f=-1,h=a.length;c<0&&(c=-c>h?0:h+c),p=p>h?h:p,p<0&&(p+=h),h=c>p?0:p-c>>>0,c>>>=0;for(var S=V(h);++f<h;)S[f]=a[f+c];return S}function F1(a,c){var p;return Bi(a,function(f,h,S){return p=c(f,h,S),!p}),!!p}function Xu(a,c,p){var f=0,h=a==null?f:a.length;if(typeof c=="number"&&c===c&&h<=be){for(;f<h;){var S=f+h>>>1,_=a[S];_!==null&&!Cr(_)&&(p?_<=c:_<c)?f=S+1:h=S}return h}return Xy(a,c,br,p)}function Xy(a,c,p,f){var h=0,S=a==null?0:a.length;if(S===0)return 0;c=p(c);for(var _=c!==c,R=c===null,M=Cr(c),G=c===t;h<S;){var K=ju((h+S)/2),ee=p(a[K]),ae=ee!==t,me=ee===null,xe=ee===ee,Fe=Cr(ee);if(_)var Se=f||xe;else G?Se=xe&&(f||ae):R?Se=xe&&ae&&(f||!me):M?Se=xe&&ae&&!me&&(f||!Fe):me||Fe?Se=!1:Se=f?ee<=c:ee<c;Se?h=K+1:S=K}return Xt(S,re)}function nE(a,c){for(var p=-1,f=a.length,h=0,S=[];++p<f;){var _=a[p],R=c?c(_):_;if(!p||!_n(R,M)){var M=R;S[h++]=_===0?0:_}}return S}function iE(a){return typeof a=="number"?a:Cr(a)?X:+a}function Ir(a){if(typeof a=="string")return a;if(ke(a))return at(a,Ir)+"";if(Cr(a))return Ow?Ow.call(a):"";var c=a+"";return c=="0"&&1/a==-F?"-0":c}function Vi(a,c,p){var f=-1,h=Mu,S=a.length,_=!0,R=[],M=R;if(p)_=!1,h=ky;else if(S>=r){var G=c?null:j1(a);if(G)return Fu(G);_=!1,h=bc,M=new Po}else M=c?[]:R;e:for(;++f<S;){var K=a[f],ee=c?c(K):K;if(K=p||K!==0?K:0,_&&ee===ee){for(var ae=M.length;ae--;)if(M[ae]===ee)continue e;c&&M.push(ee),R.push(K)}else h(M,ee,p)||(M!==R&&M.push(ee),R.push(K))}return R}function Jy(a,c){return c=Wi(c,a),a=LE(a,c),a==null||delete a[Wn(rn(c))]}function oE(a,c,p,f){return Lc(a,c,p(Mo(a,c)),f)}function Ju(a,c,p,f){for(var h=a.length,S=f?h:-1;(f?S--:++S<h)&&c(a[S],S,a););return p?tn(a,f?0:S,f?S+1:h):tn(a,f?S+1:0,f?h:S)}function aE(a,c){var p=a;return p instanceof We&&(p=p.value()),Ay(c,function(f,h){return h.func.apply(h.thisArg,Oi([f],h.args))},p)}function eT(a,c,p){var f=a.length;if(f<2)return f?Vi(a[0]):[];for(var h=-1,S=V(f);++h<f;)for(var _=a[h],R=-1;++R<f;)R!=h&&(S[h]=Pc(S[h]||_,a[R],c,p));return Vi($t(S,1),c,p)}function sE(a,c,p){for(var f=-1,h=a.length,S=c.length,_={};++f<h;){var R=f<S?c[f]:t;p(_,a[f],R)}return _}function tT(a){return Tt(a)?a:[]}function rT(a){return typeof a=="function"?a:br}function Wi(a,c){return ke(a)?a:pT(a,c)?[a]:OE(Ze(a))}var I1=Ce;function $i(a,c,p){var f=a.length;return p=p===t?f:p,!c&&p>=f?a:tn(a,c,p)}var cE=vC||function(a){return It.clearTimeout(a)};function lE(a,c){if(c)return a.slice();var p=a.length,f=Dw?Dw(p):new a.constructor(p);return a.copy(f),f}function nT(a){var c=new a.constructor(a.byteLength);return new Hu(c).set(new Hu(a)),c}function C1(a,c){var p=c?nT(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.byteLength)}function O1(a){var c=new a.constructor(a.source,qb.exec(a));return c.lastIndex=a.lastIndex,c}function N1(a){return kc?tt(kc.call(a)):{}}function uE(a,c){var p=c?nT(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.length)}function pE(a,c){if(a!==c){var p=a!==t,f=a===null,h=a===a,S=Cr(a),_=c!==t,R=c===null,M=c===c,G=Cr(c);if(!R&&!G&&!S&&a>c||S&&_&&M&&!R&&!G||f&&_&&M||!p&&M||!h)return 1;if(!f&&!S&&!G&&a<c||G&&p&&h&&!f&&!S||R&&p&&h||!_&&h||!M)return-1}return 0}function U1(a,c,p){for(var f=-1,h=a.criteria,S=c.criteria,_=h.length,R=p.length;++f<_;){var M=pE(h[f],S[f]);if(M){if(f>=R)return M;var G=p[f];return M*(G=="desc"?-1:1)}}return a.index-c.index}function mE(a,c,p,f){for(var h=-1,S=a.length,_=p.length,R=-1,M=c.length,G=Dt(S-_,0),K=V(M+G),ee=!f;++R<M;)K[R]=c[R];for(;++h<_;)(ee||h<S)&&(K[p[h]]=a[h]);for(;G--;)K[R++]=a[h++];return K}function fE(a,c,p,f){for(var h=-1,S=a.length,_=-1,R=p.length,M=-1,G=c.length,K=Dt(S-R,0),ee=V(K+G),ae=!f;++h<K;)ee[h]=a[h];for(var me=h;++M<G;)ee[me+M]=c[M];for(;++_<R;)(ae||h<S)&&(ee[me+p[_]]=a[h++]);return ee}function xr(a,c){var p=-1,f=a.length;for(c||(c=V(f));++p<f;)c[p]=a[p];return c}function Vn(a,c,p,f){var h=!p;p||(p={});for(var S=-1,_=c.length;++S<_;){var R=c[S],M=f?f(p[R],a[R],R,p,a):t;M===t&&(M=a[R]),h?gi(p,R,M):Ac(p,R,M)}return p}function H1(a,c){return Vn(a,uT(a),c)}function B1(a,c){return Vn(a,RE(a),c)}function ep(a,c){return function(p,f){var h=ke(p)?zI:c1,S=c?c():{};return h(p,a,ye(f,2),S)}}function Ia(a){return Ce(function(c,p){var f=-1,h=p.length,S=h>1?p[h-1]:t,_=h>2?p[2]:t;for(S=a.length>3&&typeof S=="function"?(h--,S):t,_&&sr(p[0],p[1],_)&&(S=h<3?t:S,h=1),c=tt(c);++f<h;){var R=p[f];R&&a(c,R,f,S)}return c})}function dE(a,c){return function(p,f){if(p==null)return p;if(!Sr(p))return a(p,f);for(var h=p.length,S=c?h:-1,_=tt(p);(c?S--:++S<h)&&f(_[S],S,_)!==!1;);return p}}function gE(a){return function(c,p,f){for(var h=-1,S=tt(c),_=f(c),R=_.length;R--;){var M=_[a?R:++h];if(p(S[M],M,S)===!1)break}return c}}function V1(a,c,p){var f=c&E,h=Fc(a);function S(){var _=this&&this!==It&&this instanceof S?h:a;return _.apply(f?p:this,arguments)}return S}function hE(a){return function(c){c=Ze(c);var p=Aa(c)?wn(c):t,f=p?p[0]:c.charAt(0),h=p?$i(p,1).join(""):c.slice(1);return f[a]()+h}}function Ca(a){return function(c){return Ay(d_(f_(c).replace(MI,"")),a,"")}}function Fc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var p=Fa(a.prototype),f=a.apply(p,c);return ut(f)?f:p}}function W1(a,c,p){var f=Fc(a);function h(){for(var S=arguments.length,_=V(S),R=S,M=Oa(h);R--;)_[R]=arguments[R];var G=S<3&&_[0]!==M&&_[S-1]!==M?[]:Ni(_,M);if(S-=G.length,S<p)return vE(a,c,tp,h.placeholder,t,_,G,t,t,p-S);var K=this&&this!==It&&this instanceof h?f:a;return Lr(K,this,_)}return h}function yE(a){return function(c,p,f){var h=tt(c);if(!Sr(c)){var S=ye(p,3);c=Ct(c),p=function(R){return S(h[R],R,h)}}var _=a(c,p,f);return _>-1?h[S?c[_]:_]:t}}function TE(a){return yi(function(c){var p=c.length,f=p,h=Jr.prototype.thru;for(a&&c.reverse();f--;){var S=c[f];if(typeof S!="function")throw new Xr(i);if(h&&!_&&op(S)=="wrapper")var _=new Jr([],!0)}for(f=_?f:p;++f<p;){S=c[f];var R=op(S),M=R=="wrapper"?cT(S):t;M&&mT(M[0])&&M[1]==(fe|W|ie|ve)&&!M[4].length&&M[9]==1?_=_[op(M[0])].apply(_,M[3]):_=S.length==1&&mT(S)?_[R]():_.thru(S)}return function(){var G=arguments,K=G[0];if(_&&G.length==1&&ke(K))return _.plant(K).value();for(var ee=0,ae=p?c[ee].apply(this,G):K;++ee<p;)ae=c[ee].call(this,ae);return ae}})}function tp(a,c,p,f,h,S,_,R,M,G){var K=c&fe,ee=c&E,ae=c&w,me=c&(W|q),xe=c&Et,Fe=ae?t:Fc(a);function Se(){for(var He=arguments.length,$e=V(He),Or=He;Or--;)$e[Or]=arguments[Or];if(me)var cr=Oa(Se),Nr=eC($e,cr);if(f&&($e=mE($e,f,h,me)),S&&($e=fE($e,S,_,me)),He-=Nr,me&&He<G){var xt=Ni($e,cr);return vE(a,c,tp,Se.placeholder,p,$e,xt,R,M,G-He)}var Rn=ee?p:this,vi=ae?Rn[a]:a;return He=$e.length,R?$e=cO($e,R):xe&&He>1&&$e.reverse(),K&&M<He&&($e.length=M),this&&this!==It&&this instanceof Se&&(vi=Fe||Fc(vi)),vi.apply(Rn,$e)}return Se}function xE(a,c){return function(p,f){return h1(p,a,c(f),{})}}function rp(a,c){return function(p,f){var h;if(p===t&&f===t)return c;if(p!==t&&(h=p),f!==t){if(h===t)return f;typeof p=="string"||typeof f=="string"?(p=Ir(p),f=Ir(f)):(p=iE(p),f=iE(f)),h=a(p,f)}return h}}function iT(a){return yi(function(c){return c=at(c,Fr(ye())),Ce(function(p){var f=this;return a(c,function(h){return Lr(h,f,p)})})})}function np(a,c){c=c===t?" ":Ir(c);var p=c.length;if(p<2)return p?Zy(c,a):c;var f=Zy(c,$u(a/Pa(c)));return Aa(c)?$i(wn(f),0,a).join(""):f.slice(0,a)}function $1(a,c,p,f){var h=c&E,S=Fc(a);function _(){for(var R=-1,M=arguments.length,G=-1,K=f.length,ee=V(K+M),ae=this&&this!==It&&this instanceof _?S:a;++G<K;)ee[G]=f[G];for(;M--;)ee[G++]=arguments[++R];return Lr(ae,h?p:this,ee)}return _}function SE(a){return function(c,p,f){return f&&typeof f!="number"&&sr(c,p,f)&&(p=f=t),c=Si(c),p===t?(p=c,c=0):p=Si(p),f=f===t?c<p?1:-1:Si(f),A1(c,p,f,a)}}function ip(a){return function(c,p){return typeof c=="string"&&typeof p=="string"||(c=nn(c),p=nn(p)),a(c,p)}}function vE(a,c,p,f,h,S,_,R,M,G){var K=c&W,ee=K?_:t,ae=K?t:_,me=K?S:t,xe=K?t:S;c|=K?ie:se,c&=~(K?se:ie),c&U||(c&=~(E|w));var Fe=[a,c,h,me,ee,xe,ae,R,M,G],Se=p.apply(t,Fe);return mT(a)&&FE(Se,Fe),Se.placeholder=f,IE(Se,a,c)}function oT(a){var c=Pt[a];return function(p,f){if(p=nn(p),f=f==null?0:Xt(De(f),292),f&&Iw(p)){var h=(Ze(p)+"e").split("e"),S=c(h[0]+"e"+(+h[1]+f));return h=(Ze(S)+"e").split("e"),+(h[0]+"e"+(+h[1]-f))}return c(p)}}var j1=Ma&&1/Fu(new Ma([,-0]))[1]==F?function(a){return new Ma(a)}:kT;function bE(a){return function(c){var p=Jt(c);return p==vn?Cy(c):p==bn?sC(c):JI(c,a(c))}}function hi(a,c,p,f,h,S,_,R){var M=c&w;if(!M&&typeof a!="function")throw new Xr(i);var G=f?f.length:0;if(G||(c&=~(ie|se),f=h=t),_=_===t?_:Dt(De(_),0),R=R===t?R:De(R),G-=h?h.length:0,c&se){var K=f,ee=h;f=h=t}var ae=M?t:cT(a),me=[a,c,p,f,h,K,ee,S,_,R];if(ae&&oO(me,ae),a=me[0],c=me[1],p=me[2],f=me[3],h=me[4],R=me[9]=me[9]===t?M?0:a.length:Dt(me[9]-G,0),!R&&c&(W|q)&&(c&=~(W|q)),!c||c==E)var xe=V1(a,c,p);else c==W||c==q?xe=W1(a,c,R):(c==ie||c==(E|ie))&&!h.length?xe=$1(a,c,p,f):xe=tp.apply(t,me);var Fe=ae?rE:FE;return IE(Fe(xe,me),a,c)}function wE(a,c,p,f){return a===t||_n(a,Da[p])&&!Xe.call(f,p)?c:a}function EE(a,c,p,f,h,S){return ut(a)&&ut(c)&&(S.set(c,a),Zu(a,c,t,EE,S),S.delete(c)),a}function z1(a){return Oc(a)?t:a}function _E(a,c,p,f,h,S){var _=p&y,R=a.length,M=c.length;if(R!=M&&!(_&&M>R))return!1;var G=S.get(a),K=S.get(c);if(G&&K)return G==c&&K==a;var ee=-1,ae=!0,me=p&x?new Po:t;for(S.set(a,c),S.set(c,a);++ee<R;){var xe=a[ee],Fe=c[ee];if(f)var Se=_?f(Fe,xe,ee,c,a,S):f(xe,Fe,ee,a,c,S);if(Se!==t){if(Se)continue;ae=!1;break}if(me){if(!Py(c,function(He,$e){if(!bc(me,$e)&&(xe===He||h(xe,He,p,f,S)))return me.push($e)})){ae=!1;break}}else if(!(xe===Fe||h(xe,Fe,p,f,S))){ae=!1;break}}return S.delete(a),S.delete(c),ae}function q1(a,c,p,f,h,S,_){switch(p){case _a:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case vc:return!(a.byteLength!=c.byteLength||!S(new Hu(a),new Hu(c)));case Wt:case Qr:case yc:return _n(+a,+c);case pi:return a.name==c.name&&a.message==c.message;case Tc:case xc:return a==c+"";case vn:var R=Cy;case bn:var M=f&y;if(R||(R=Fu),a.size!=c.size&&!M)return!1;var G=_.get(a);if(G)return G==c;f|=x,_.set(a,c);var K=_E(R(a),R(c),f,h,S,_);return _.delete(a),K;case ku:if(kc)return kc.call(a)==kc.call(c)}return!1}function G1(a,c,p,f,h,S){var _=p&y,R=aT(a),M=R.length,G=aT(c),K=G.length;if(M!=K&&!_)return!1;for(var ee=M;ee--;){var ae=R[ee];if(!(_?ae in c:Xe.call(c,ae)))return!1}var me=S.get(a),xe=S.get(c);if(me&&xe)return me==c&&xe==a;var Fe=!0;S.set(a,c),S.set(c,a);for(var Se=_;++ee<M;){ae=R[ee];var He=a[ae],$e=c[ae];if(f)var Or=_?f($e,He,ae,c,a,S):f(He,$e,ae,a,c,S);if(!(Or===t?He===$e||h(He,$e,p,f,S):Or)){Fe=!1;break}Se||(Se=ae=="constructor")}if(Fe&&!Se){var cr=a.constructor,Nr=c.constructor;cr!=Nr&&"constructor"in a&&"constructor"in c&&!(typeof cr=="function"&&cr instanceof cr&&typeof Nr=="function"&&Nr instanceof Nr)&&(Fe=!1)}return S.delete(a),S.delete(c),Fe}function yi(a){return dT(ME(a,t,BE),a+"")}function aT(a){return zw(a,Ct,uT)}function sT(a){return zw(a,vr,RE)}var cT=zu?function(a){return zu.get(a)}:kT;function op(a){for(var c=a.name+"",p=La[c],f=Xe.call(La,c)?p.length:0;f--;){var h=p[f],S=h.func;if(S==null||S==a)return h.name}return c}function Oa(a){var c=Xe.call(T,"placeholder")?T:a;return c.placeholder}function ye(){var a=T.iteratee||_T;return a=a===_T?Kw:a,arguments.length?a(arguments[0],arguments[1]):a}function ap(a,c){var p=a.__data__;return tO(c)?p[typeof c=="string"?"string":"hash"]:p.map}function lT(a){for(var c=Ct(a),p=c.length;p--;){var f=c[p],h=a[f];c[p]=[f,h,PE(h)]}return c}function Lo(a,c){var p=iC(a,c);return Gw(p)?p:t}function K1(a){var c=Xe.call(a,ko),p=a[ko];try{a[ko]=t;var f=!0}catch{}var h=Nu.call(a);return f&&(c?a[ko]=p:delete a[ko]),h}var uT=Ny?function(a){return a==null?[]:(a=tt(a),Ci(Ny(a),function(c){return Lw.call(a,c)}))}:AT,RE=Ny?function(a){for(var c=[];a;)Oi(c,uT(a)),a=Bu(a);return c}:AT,Jt=ar;(Uy&&Jt(new Uy(new ArrayBuffer(1)))!=_a||Ec&&Jt(new Ec)!=vn||Hy&&Jt(Hy.resolve())!=Wb||Ma&&Jt(new Ma)!=bn||_c&&Jt(new _c)!=Sc)&&(Jt=function(a){var c=ar(a),p=c==mi?a.constructor:t,f=p?Fo(p):"";if(f)switch(f){case DC:return _a;case MC:return vn;case LC:return Wb;case FC:return bn;case IC:return Sc}return c});function Q1(a,c,p){for(var f=-1,h=p.length;++f<h;){var S=p[f],_=S.size;switch(S.type){case"drop":a+=_;break;case"dropRight":c-=_;break;case"take":c=Xt(c,a+_);break;case"takeRight":a=Dt(a,c-_);break}}return{start:a,end:c}}function Y1(a){var c=a.match(rI);return c?c[1].split(nI):[]}function kE(a,c,p){c=Wi(c,a);for(var f=-1,h=c.length,S=!1;++f<h;){var _=Wn(c[f]);if(!(S=a!=null&&p(a,_)))break;a=a[_]}return S||++f!=h?S:(h=a==null?0:a.length,!!h&&fp(h)&&Ti(_,h)&&(ke(a)||Io(a)))}function Z1(a){var c=a.length,p=new a.constructor(c);return c&&typeof a[0]=="string"&&Xe.call(a,"index")&&(p.index=a.index,p.input=a.input),p}function AE(a){return typeof a.constructor=="function"&&!Ic(a)?Fa(Bu(a)):{}}function X1(a,c,p){var f=a.constructor;switch(c){case vc:return nT(a);case Wt:case Qr:return new f(+a);case _a:return C1(a,p);case ly:case uy:case py:case my:case fy:case dy:case gy:case hy:case yy:return uE(a,p);case vn:return new f;case yc:case xc:return new f(a);case Tc:return O1(a);case bn:return new f;case ku:return N1(a)}}function J1(a,c){var p=c.length;if(!p)return a;var f=p-1;return c[f]=(p>1?"& ":"")+c[f],c=c.join(p>2?", ":" "),a.replace(tI,`{
/* [wrapped with `+c+`] */
`)}function eO(a){return ke(a)||Io(a)||!!(Fw&&a&&a[Fw])}function Ti(a,c){var p=typeof a;return c=c??N,!!c&&(p=="number"||p!="symbol"&&mI.test(a))&&a>-1&&a%1==0&&a<c}function sr(a,c,p){if(!ut(p))return!1;var f=typeof c;return(f=="number"?Sr(p)&&Ti(c,p.length):f=="string"&&c in p)?_n(p[c],a):!1}function pT(a,c){if(ke(a))return!1;var p=typeof a;return p=="number"||p=="symbol"||p=="boolean"||a==null||Cr(a)?!0:ZF.test(a)||!YF.test(a)||c!=null&&a in tt(c)}function tO(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function mT(a){var c=op(a),p=T[c];if(typeof p!="function"||!(c in We.prototype))return!1;if(a===p)return!0;var f=cT(p);return!!f&&a===f[0]}function rO(a){return!!Pw&&Pw in a}var nO=Cu?xi:PT;function Ic(a){var c=a&&a.constructor,p=typeof c=="function"&&c.prototype||Da;return a===p}function PE(a){return a===a&&!ut(a)}function DE(a,c){return function(p){return p==null?!1:p[a]===c&&(c!==t||a in tt(p))}}function iO(a){var c=pp(a,function(f){return p.size===l&&p.clear(),f}),p=c.cache;return c}function oO(a,c){var p=a[1],f=c[1],h=p|f,S=h<(E|w|fe),_=f==fe&&p==W||f==fe&&p==ve&&a[7].length<=c[8]||f==(fe|ve)&&c[7].length<=c[8]&&p==W;if(!(S||_))return a;f&E&&(a[2]=c[2],h|=p&E?0:U);var R=c[3];if(R){var M=a[3];a[3]=M?mE(M,R,c[4]):R,a[4]=M?Ni(a[3],u):c[4]}return R=c[5],R&&(M=a[5],a[5]=M?fE(M,R,c[6]):R,a[6]=M?Ni(a[5],u):c[6]),R=c[7],R&&(a[7]=R),f&fe&&(a[8]=a[8]==null?c[8]:Xt(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=h,a}function aO(a){var c=[];if(a!=null)for(var p in tt(a))c.push(p);return c}function sO(a){return Nu.call(a)}function ME(a,c,p){return c=Dt(c===t?a.length-1:c,0),function(){for(var f=arguments,h=-1,S=Dt(f.length-c,0),_=V(S);++h<S;)_[h]=f[c+h];h=-1;for(var R=V(c+1);++h<c;)R[h]=f[h];return R[c]=p(_),Lr(a,this,R)}}function LE(a,c){return c.length<2?a:Mo(a,tn(c,0,-1))}function cO(a,c){for(var p=a.length,f=Xt(c.length,p),h=xr(a);f--;){var S=c[f];a[f]=Ti(S,p)?h[S]:t}return a}function fT(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var FE=CE(rE),Cc=wC||function(a,c){return It.setTimeout(a,c)},dT=CE(M1);function IE(a,c,p){var f=c+"";return dT(a,J1(f,lO(Y1(f),p)))}function CE(a){var c=0,p=0;return function(){var f=kC(),h=C-(f-p);if(p=f,h>0){if(++c>=B)return arguments[0]}else c=0;return a.apply(t,arguments)}}function sp(a,c){var p=-1,f=a.length,h=f-1;for(c=c===t?f:c;++p<c;){var S=Yy(p,h),_=a[S];a[S]=a[p],a[p]=_}return a.length=c,a}var OE=iO(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(XF,function(p,f,h,S){c.push(h?S.replace(aI,"$1"):f||p)}),c});function Wn(a){if(typeof a=="string"||Cr(a))return a;var c=a+"";return c=="0"&&1/a==-F?"-0":c}function Fo(a){if(a!=null){try{return Ou.call(a)}catch{}try{return a+""}catch{}}return""}function lO(a,c){return Zr(Ee,function(p){var f="_."+p[0];c&p[1]&&!Mu(a,f)&&a.push(f)}),a.sort()}function NE(a){if(a instanceof We)return a.clone();var c=new Jr(a.__wrapped__,a.__chain__);return c.__actions__=xr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function uO(a,c,p){(p?sr(a,c,p):c===t)?c=1:c=Dt(De(c),0);var f=a==null?0:a.length;if(!f||c<1)return[];for(var h=0,S=0,_=V($u(f/c));h<f;)_[S++]=tn(a,h,h+=c);return _}function pO(a){for(var c=-1,p=a==null?0:a.length,f=0,h=[];++c<p;){var S=a[c];S&&(h[f++]=S)}return h}function mO(){var a=arguments.length;if(!a)return[];for(var c=V(a-1),p=arguments[0],f=a;f--;)c[f-1]=arguments[f];return Oi(ke(p)?xr(p):[p],$t(c,1))}var fO=Ce(function(a,c){return Tt(a)?Pc(a,$t(c,1,Tt,!0)):[]}),dO=Ce(function(a,c){var p=rn(c);return Tt(p)&&(p=t),Tt(a)?Pc(a,$t(c,1,Tt,!0),ye(p,2)):[]}),gO=Ce(function(a,c){var p=rn(c);return Tt(p)&&(p=t),Tt(a)?Pc(a,$t(c,1,Tt,!0),t,p):[]});function hO(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:De(c),tn(a,c<0?0:c,f)):[]}function yO(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:De(c),c=f-c,tn(a,0,c<0?0:c)):[]}function TO(a,c){return a&&a.length?Ju(a,ye(c,3),!0,!0):[]}function xO(a,c){return a&&a.length?Ju(a,ye(c,3),!0):[]}function SO(a,c,p,f){var h=a==null?0:a.length;return h?(p&&typeof p!="number"&&sr(a,c,p)&&(p=0,f=h),m1(a,c,p,f)):[]}function UE(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=p==null?0:De(p);return h<0&&(h=Dt(f+h,0)),Lu(a,ye(c,3),h)}function HE(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=f-1;return p!==t&&(h=De(p),h=p<0?Dt(f+h,0):Xt(h,f-1)),Lu(a,ye(c,3),h,!0)}function BE(a){var c=a==null?0:a.length;return c?$t(a,1):[]}function vO(a){var c=a==null?0:a.length;return c?$t(a,F):[]}function bO(a,c){var p=a==null?0:a.length;return p?(c=c===t?1:De(c),$t(a,c)):[]}function wO(a){for(var c=-1,p=a==null?0:a.length,f={};++c<p;){var h=a[c];f[h[0]]=h[1]}return f}function VE(a){return a&&a.length?a[0]:t}function EO(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=p==null?0:De(p);return h<0&&(h=Dt(f+h,0)),ka(a,c,h)}function _O(a){var c=a==null?0:a.length;return c?tn(a,0,-1):[]}var RO=Ce(function(a){var c=at(a,tT);return c.length&&c[0]===a[0]?zy(c):[]}),kO=Ce(function(a){var c=rn(a),p=at(a,tT);return c===rn(p)?c=t:p.pop(),p.length&&p[0]===a[0]?zy(p,ye(c,2)):[]}),AO=Ce(function(a){var c=rn(a),p=at(a,tT);return c=typeof c=="function"?c:t,c&&p.pop(),p.length&&p[0]===a[0]?zy(p,t,c):[]});function PO(a,c){return a==null?"":_C.call(a,c)}function rn(a){var c=a==null?0:a.length;return c?a[c-1]:t}function DO(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=f;return p!==t&&(h=De(p),h=h<0?Dt(f+h,0):Xt(h,f-1)),c===c?lC(a,c,h):Lu(a,vw,h,!0)}function MO(a,c){return a&&a.length?Xw(a,De(c)):t}var LO=Ce(WE);function WE(a,c){return a&&a.length&&c&&c.length?Qy(a,c):a}function FO(a,c,p){return a&&a.length&&c&&c.length?Qy(a,c,ye(p,2)):a}function IO(a,c,p){return a&&a.length&&c&&c.length?Qy(a,c,t,p):a}var CO=yi(function(a,c){var p=a==null?0:a.length,f=Vy(a,c);return tE(a,at(c,function(h){return Ti(h,p)?+h:h}).sort(pE)),f});function OO(a,c){var p=[];if(!(a&&a.length))return p;var f=-1,h=[],S=a.length;for(c=ye(c,3);++f<S;){var _=a[f];c(_,f,a)&&(p.push(_),h.push(f))}return tE(a,h),p}function gT(a){return a==null?a:PC.call(a)}function NO(a,c,p){var f=a==null?0:a.length;return f?(p&&typeof p!="number"&&sr(a,c,p)?(c=0,p=f):(c=c==null?0:De(c),p=p===t?f:De(p)),tn(a,c,p)):[]}function UO(a,c){return Xu(a,c)}function HO(a,c,p){return Xy(a,c,ye(p,2))}function BO(a,c){var p=a==null?0:a.length;if(p){var f=Xu(a,c);if(f<p&&_n(a[f],c))return f}return-1}function VO(a,c){return Xu(a,c,!0)}function WO(a,c,p){return Xy(a,c,ye(p,2),!0)}function $O(a,c){var p=a==null?0:a.length;if(p){var f=Xu(a,c,!0)-1;if(_n(a[f],c))return f}return-1}function jO(a){return a&&a.length?nE(a):[]}function zO(a,c){return a&&a.length?nE(a,ye(c,2)):[]}function qO(a){var c=a==null?0:a.length;return c?tn(a,1,c):[]}function GO(a,c,p){return a&&a.length?(c=p||c===t?1:De(c),tn(a,0,c<0?0:c)):[]}function KO(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:De(c),c=f-c,tn(a,c<0?0:c,f)):[]}function QO(a,c){return a&&a.length?Ju(a,ye(c,3),!1,!0):[]}function YO(a,c){return a&&a.length?Ju(a,ye(c,3)):[]}var ZO=Ce(function(a){return Vi($t(a,1,Tt,!0))}),XO=Ce(function(a){var c=rn(a);return Tt(c)&&(c=t),Vi($t(a,1,Tt,!0),ye(c,2))}),JO=Ce(function(a){var c=rn(a);return c=typeof c=="function"?c:t,Vi($t(a,1,Tt,!0),t,c)});function eN(a){return a&&a.length?Vi(a):[]}function tN(a,c){return a&&a.length?Vi(a,ye(c,2)):[]}function rN(a,c){return c=typeof c=="function"?c:t,a&&a.length?Vi(a,t,c):[]}function hT(a){if(!(a&&a.length))return[];var c=0;return a=Ci(a,function(p){if(Tt(p))return c=Dt(p.length,c),!0}),Fy(c,function(p){return at(a,Dy(p))})}function $E(a,c){if(!(a&&a.length))return[];var p=hT(a);return c==null?p:at(p,function(f){return Lr(c,t,f)})}var nN=Ce(function(a,c){return Tt(a)?Pc(a,c):[]}),iN=Ce(function(a){return eT(Ci(a,Tt))}),oN=Ce(function(a){var c=rn(a);return Tt(c)&&(c=t),eT(Ci(a,Tt),ye(c,2))}),aN=Ce(function(a){var c=rn(a);return c=typeof c=="function"?c:t,eT(Ci(a,Tt),t,c)}),sN=Ce(hT);function cN(a,c){return sE(a||[],c||[],Ac)}function lN(a,c){return sE(a||[],c||[],Lc)}var uN=Ce(function(a){var c=a.length,p=c>1?a[c-1]:t;return p=typeof p=="function"?(a.pop(),p):t,$E(a,p)});function jE(a){var c=T(a);return c.__chain__=!0,c}function pN(a,c){return c(a),a}function cp(a,c){return c(a)}var mN=yi(function(a){var c=a.length,p=c?a[0]:0,f=this.__wrapped__,h=function(S){return Vy(S,a)};return c>1||this.__actions__.length||!(f instanceof We)||!Ti(p)?this.thru(h):(f=f.slice(p,+p+(c?1:0)),f.__actions__.push({func:cp,args:[h],thisArg:t}),new Jr(f,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function fN(){return jE(this)}function dN(){return new Jr(this.value(),this.__chain__)}function gN(){this.__values__===t&&(this.__values__=i_(this.value()));var a=this.__index__>=this.__values__.length,c=a?t:this.__values__[this.__index__++];return{done:a,value:c}}function hN(){return this}function yN(a){for(var c,p=this;p instanceof Gu;){var f=NE(p);f.__index__=0,f.__values__=t,c?h.__wrapped__=f:c=f;var h=f;p=p.__wrapped__}return h.__wrapped__=a,c}function TN(){var a=this.__wrapped__;if(a instanceof We){var c=a;return this.__actions__.length&&(c=new We(this)),c=c.reverse(),c.__actions__.push({func:cp,args:[gT],thisArg:t}),new Jr(c,this.__chain__)}return this.thru(gT)}function xN(){return aE(this.__wrapped__,this.__actions__)}var SN=ep(function(a,c,p){Xe.call(a,p)?++a[p]:gi(a,p,1)});function vN(a,c,p){var f=ke(a)?xw:p1;return p&&sr(a,c,p)&&(c=t),f(a,ye(c,3))}function bN(a,c){var p=ke(a)?Ci:$w;return p(a,ye(c,3))}var wN=yE(UE),EN=yE(HE);function _N(a,c){return $t(lp(a,c),1)}function RN(a,c){return $t(lp(a,c),F)}function kN(a,c,p){return p=p===t?1:De(p),$t(lp(a,c),p)}function zE(a,c){var p=ke(a)?Zr:Bi;return p(a,ye(c,3))}function qE(a,c){var p=ke(a)?qI:Ww;return p(a,ye(c,3))}var AN=ep(function(a,c,p){Xe.call(a,p)?a[p].push(c):gi(a,p,[c])});function PN(a,c,p,f){a=Sr(a)?a:Ua(a),p=p&&!f?De(p):0;var h=a.length;return p<0&&(p=Dt(h+p,0)),dp(a)?p<=h&&a.indexOf(c,p)>-1:!!h&&ka(a,c,p)>-1}var DN=Ce(function(a,c,p){var f=-1,h=typeof c=="function",S=Sr(a)?V(a.length):[];return Bi(a,function(_){S[++f]=h?Lr(c,_,p):Dc(_,c,p)}),S}),MN=ep(function(a,c,p){gi(a,p,c)});function lp(a,c){var p=ke(a)?at:Qw;return p(a,ye(c,3))}function LN(a,c,p,f){return a==null?[]:(ke(c)||(c=c==null?[]:[c]),p=f?t:p,ke(p)||(p=p==null?[]:[p]),Jw(a,c,p))}var FN=ep(function(a,c,p){a[p?0:1].push(c)},function(){return[[],[]]});function IN(a,c,p){var f=ke(a)?Ay:ww,h=arguments.length<3;return f(a,ye(c,4),p,h,Bi)}function CN(a,c,p){var f=ke(a)?GI:ww,h=arguments.length<3;return f(a,ye(c,4),p,h,Ww)}function ON(a,c){var p=ke(a)?Ci:$w;return p(a,mp(ye(c,3)))}function NN(a){var c=ke(a)?Uw:P1;return c(a)}function UN(a,c,p){(p?sr(a,c,p):c===t)?c=1:c=De(c);var f=ke(a)?a1:D1;return f(a,c)}function HN(a){var c=ke(a)?s1:L1;return c(a)}function BN(a){if(a==null)return 0;if(Sr(a))return dp(a)?Pa(a):a.length;var c=Jt(a);return c==vn||c==bn?a.size:Gy(a).length}function VN(a,c,p){var f=ke(a)?Py:F1;return p&&sr(a,c,p)&&(c=t),f(a,ye(c,3))}var WN=Ce(function(a,c){if(a==null)return[];var p=c.length;return p>1&&sr(a,c[0],c[1])?c=[]:p>2&&sr(c[0],c[1],c[2])&&(c=[c[0]]),Jw(a,$t(c,1),[])}),up=bC||function(){return It.Date.now()};function $N(a,c){if(typeof c!="function")throw new Xr(i);return a=De(a),function(){if(--a<1)return c.apply(this,arguments)}}function GE(a,c,p){return c=p?t:c,c=a&&c==null?a.length:c,hi(a,fe,t,t,t,t,c)}function KE(a,c){var p;if(typeof c!="function")throw new Xr(i);return a=De(a),function(){return--a>0&&(p=c.apply(this,arguments)),a<=1&&(c=t),p}}var yT=Ce(function(a,c,p){var f=E;if(p.length){var h=Ni(p,Oa(yT));f|=ie}return hi(a,f,c,p,h)}),QE=Ce(function(a,c,p){var f=E|w;if(p.length){var h=Ni(p,Oa(QE));f|=ie}return hi(c,f,a,p,h)});function YE(a,c,p){c=p?t:c;var f=hi(a,W,t,t,t,t,t,c);return f.placeholder=YE.placeholder,f}function ZE(a,c,p){c=p?t:c;var f=hi(a,q,t,t,t,t,t,c);return f.placeholder=ZE.placeholder,f}function XE(a,c,p){var f,h,S,_,R,M,G=0,K=!1,ee=!1,ae=!0;if(typeof a!="function")throw new Xr(i);c=nn(c)||0,ut(p)&&(K=!!p.leading,ee="maxWait"in p,S=ee?Dt(nn(p.maxWait)||0,c):S,ae="trailing"in p?!!p.trailing:ae);function me(xt){var Rn=f,vi=h;return f=h=t,G=xt,_=a.apply(vi,Rn),_}function xe(xt){return G=xt,R=Cc(He,c),K?me(xt):_}function Fe(xt){var Rn=xt-M,vi=xt-G,y_=c-Rn;return ee?Xt(y_,S-vi):y_}function Se(xt){var Rn=xt-M,vi=xt-G;return M===t||Rn>=c||Rn<0||ee&&vi>=S}function He(){var xt=up();if(Se(xt))return $e(xt);R=Cc(He,Fe(xt))}function $e(xt){return R=t,ae&&f?me(xt):(f=h=t,_)}function Or(){R!==t&&cE(R),G=0,f=M=h=R=t}function cr(){return R===t?_:$e(up())}function Nr(){var xt=up(),Rn=Se(xt);if(f=arguments,h=this,M=xt,Rn){if(R===t)return xe(M);if(ee)return cE(R),R=Cc(He,c),me(M)}return R===t&&(R=Cc(He,c)),_}return Nr.cancel=Or,Nr.flush=cr,Nr}var jN=Ce(function(a,c){return Vw(a,1,c)}),zN=Ce(function(a,c,p){return Vw(a,nn(c)||0,p)});function qN(a){return hi(a,Et)}function pp(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new Xr(i);var p=function(){var f=arguments,h=c?c.apply(this,f):f[0],S=p.cache;if(S.has(h))return S.get(h);var _=a.apply(this,f);return p.cache=S.set(h,_)||S,_};return p.cache=new(pp.Cache||di),p}pp.Cache=di;function mp(a){if(typeof a!="function")throw new Xr(i);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function GN(a){return KE(2,a)}var KN=I1(function(a,c){c=c.length==1&&ke(c[0])?at(c[0],Fr(ye())):at($t(c,1),Fr(ye()));var p=c.length;return Ce(function(f){for(var h=-1,S=Xt(f.length,p);++h<S;)f[h]=c[h].call(this,f[h]);return Lr(a,this,f)})}),TT=Ce(function(a,c){var p=Ni(c,Oa(TT));return hi(a,ie,t,c,p)}),JE=Ce(function(a,c){var p=Ni(c,Oa(JE));return hi(a,se,t,c,p)}),QN=yi(function(a,c){return hi(a,ve,t,t,t,c)});function YN(a,c){if(typeof a!="function")throw new Xr(i);return c=c===t?c:De(c),Ce(a,c)}function ZN(a,c){if(typeof a!="function")throw new Xr(i);return c=c==null?0:Dt(De(c),0),Ce(function(p){var f=p[c],h=$i(p,0,c);return f&&Oi(h,f),Lr(a,this,h)})}function XN(a,c,p){var f=!0,h=!0;if(typeof a!="function")throw new Xr(i);return ut(p)&&(f="leading"in p?!!p.leading:f,h="trailing"in p?!!p.trailing:h),XE(a,c,{leading:f,maxWait:c,trailing:h})}function JN(a){return GE(a,1)}function eU(a,c){return TT(rT(c),a)}function tU(){if(!arguments.length)return[];var a=arguments[0];return ke(a)?a:[a]}function rU(a){return en(a,g)}function nU(a,c){return c=typeof c=="function"?c:t,en(a,g,c)}function iU(a){return en(a,m|g)}function oU(a,c){return c=typeof c=="function"?c:t,en(a,m|g,c)}function aU(a,c){return c==null||Bw(a,c,Ct(c))}function _n(a,c){return a===c||a!==a&&c!==c}var sU=ip(jy),cU=ip(function(a,c){return a>=c}),Io=qw(function(){return arguments}())?qw:function(a){return gt(a)&&Xe.call(a,"callee")&&!Lw.call(a,"callee")},ke=V.isArray,lU=fw?Fr(fw):y1;function Sr(a){return a!=null&&fp(a.length)&&!xi(a)}function Tt(a){return gt(a)&&Sr(a)}function uU(a){return a===!0||a===!1||gt(a)&&ar(a)==Wt}var ji=EC||PT,pU=dw?Fr(dw):T1;function mU(a){return gt(a)&&a.nodeType===1&&!Oc(a)}function fU(a){if(a==null)return!0;if(Sr(a)&&(ke(a)||typeof a=="string"||typeof a.splice=="function"||ji(a)||Na(a)||Io(a)))return!a.length;var c=Jt(a);if(c==vn||c==bn)return!a.size;if(Ic(a))return!Gy(a).length;for(var p in a)if(Xe.call(a,p))return!1;return!0}function dU(a,c){return Mc(a,c)}function gU(a,c,p){p=typeof p=="function"?p:t;var f=p?p(a,c):t;return f===t?Mc(a,c,t,p):!!f}function xT(a){if(!gt(a))return!1;var c=ar(a);return c==pi||c==_o||typeof a.message=="string"&&typeof a.name=="string"&&!Oc(a)}function hU(a){return typeof a=="number"&&Iw(a)}function xi(a){if(!ut(a))return!1;var c=ar(a);return c==Ea||c==Vb||c==dt||c==BF}function e_(a){return typeof a=="number"&&a==De(a)}function fp(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=N}function ut(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function gt(a){return a!=null&&typeof a=="object"}var t_=gw?Fr(gw):S1;function yU(a,c){return a===c||qy(a,c,lT(c))}function TU(a,c,p){return p=typeof p=="function"?p:t,qy(a,c,lT(c),p)}function xU(a){return r_(a)&&a!=+a}function SU(a){if(nO(a))throw new Re(n);return Gw(a)}function vU(a){return a===null}function bU(a){return a==null}function r_(a){return typeof a=="number"||gt(a)&&ar(a)==yc}function Oc(a){if(!gt(a)||ar(a)!=mi)return!1;var c=Bu(a);if(c===null)return!0;var p=Xe.call(c,"constructor")&&c.constructor;return typeof p=="function"&&p instanceof p&&Ou.call(p)==TC}var ST=hw?Fr(hw):v1;function wU(a){return e_(a)&&a>=-N&&a<=N}var n_=yw?Fr(yw):b1;function dp(a){return typeof a=="string"||!ke(a)&&gt(a)&&ar(a)==xc}function Cr(a){return typeof a=="symbol"||gt(a)&&ar(a)==ku}var Na=Tw?Fr(Tw):w1;function EU(a){return a===t}function _U(a){return gt(a)&&Jt(a)==Sc}function RU(a){return gt(a)&&ar(a)==WF}var kU=ip(Ky),AU=ip(function(a,c){return a<=c});function i_(a){if(!a)return[];if(Sr(a))return dp(a)?wn(a):xr(a);if(wc&&a[wc])return aC(a[wc]());var c=Jt(a),p=c==vn?Cy:c==bn?Fu:Ua;return p(a)}function Si(a){if(!a)return a===0?a:0;if(a=nn(a),a===F||a===-F){var c=a<0?-1:1;return c*j}return a===a?a:0}function De(a){var c=Si(a),p=c%1;return c===c?p?c-p:c:0}function o_(a){return a?Do(De(a),0,Q):0}function nn(a){if(typeof a=="number")return a;if(Cr(a))return X;if(ut(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=ut(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=Ew(a);var p=lI.test(a);return p||pI.test(a)?$I(a.slice(2),p?2:8):cI.test(a)?X:+a}function a_(a){return Vn(a,vr(a))}function PU(a){return a?Do(De(a),-N,N):a===0?a:0}function Ze(a){return a==null?"":Ir(a)}var DU=Ia(function(a,c){if(Ic(c)||Sr(c)){Vn(c,Ct(c),a);return}for(var p in c)Xe.call(c,p)&&Ac(a,p,c[p])}),s_=Ia(function(a,c){Vn(c,vr(c),a)}),gp=Ia(function(a,c,p,f){Vn(c,vr(c),a,f)}),MU=Ia(function(a,c,p,f){Vn(c,Ct(c),a,f)}),LU=yi(Vy);function FU(a,c){var p=Fa(a);return c==null?p:Hw(p,c)}var IU=Ce(function(a,c){a=tt(a);var p=-1,f=c.length,h=f>2?c[2]:t;for(h&&sr(c[0],c[1],h)&&(f=1);++p<f;)for(var S=c[p],_=vr(S),R=-1,M=_.length;++R<M;){var G=_[R],K=a[G];(K===t||_n(K,Da[G])&&!Xe.call(a,G))&&(a[G]=S[G])}return a}),CU=Ce(function(a){return a.push(t,EE),Lr(c_,t,a)});function OU(a,c){return Sw(a,ye(c,3),Bn)}function NU(a,c){return Sw(a,ye(c,3),$y)}function UU(a,c){return a==null?a:Wy(a,ye(c,3),vr)}function HU(a,c){return a==null?a:jw(a,ye(c,3),vr)}function BU(a,c){return a&&Bn(a,ye(c,3))}function VU(a,c){return a&&$y(a,ye(c,3))}function WU(a){return a==null?[]:Yu(a,Ct(a))}function $U(a){return a==null?[]:Yu(a,vr(a))}function vT(a,c,p){var f=a==null?t:Mo(a,c);return f===t?p:f}function jU(a,c){return a!=null&&kE(a,c,f1)}function bT(a,c){return a!=null&&kE(a,c,d1)}var zU=xE(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Nu.call(c)),a[c]=p},ET(br)),qU=xE(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Nu.call(c)),Xe.call(a,c)?a[c].push(p):a[c]=[p]},ye),GU=Ce(Dc);function Ct(a){return Sr(a)?Nw(a):Gy(a)}function vr(a){return Sr(a)?Nw(a,!0):E1(a)}function KU(a,c){var p={};return c=ye(c,3),Bn(a,function(f,h,S){gi(p,c(f,h,S),f)}),p}function QU(a,c){var p={};return c=ye(c,3),Bn(a,function(f,h,S){gi(p,h,c(f,h,S))}),p}var YU=Ia(function(a,c,p){Zu(a,c,p)}),c_=Ia(function(a,c,p,f){Zu(a,c,p,f)}),ZU=yi(function(a,c){var p={};if(a==null)return p;var f=!1;c=at(c,function(S){return S=Wi(S,a),f||(f=S.length>1),S}),Vn(a,sT(a),p),f&&(p=en(p,m|d|g,z1));for(var h=c.length;h--;)Jy(p,c[h]);return p});function XU(a,c){return l_(a,mp(ye(c)))}var JU=yi(function(a,c){return a==null?{}:R1(a,c)});function l_(a,c){if(a==null)return{};var p=at(sT(a),function(f){return[f]});return c=ye(c),eE(a,p,function(f,h){return c(f,h[0])})}function eH(a,c,p){c=Wi(c,a);var f=-1,h=c.length;for(h||(h=1,a=t);++f<h;){var S=a==null?t:a[Wn(c[f])];S===t&&(f=h,S=p),a=xi(S)?S.call(a):S}return a}function tH(a,c,p){return a==null?a:Lc(a,c,p)}function rH(a,c,p,f){return f=typeof f=="function"?f:t,a==null?a:Lc(a,c,p,f)}var u_=bE(Ct),p_=bE(vr);function nH(a,c,p){var f=ke(a),h=f||ji(a)||Na(a);if(c=ye(c,4),p==null){var S=a&&a.constructor;h?p=f?new S:[]:ut(a)?p=xi(S)?Fa(Bu(a)):{}:p={}}return(h?Zr:Bn)(a,function(_,R,M){return c(p,_,R,M)}),p}function iH(a,c){return a==null?!0:Jy(a,c)}function oH(a,c,p){return a==null?a:oE(a,c,rT(p))}function aH(a,c,p,f){return f=typeof f=="function"?f:t,a==null?a:oE(a,c,rT(p),f)}function Ua(a){return a==null?[]:Iy(a,Ct(a))}function sH(a){return a==null?[]:Iy(a,vr(a))}function cH(a,c,p){return p===t&&(p=c,c=t),p!==t&&(p=nn(p),p=p===p?p:0),c!==t&&(c=nn(c),c=c===c?c:0),Do(nn(a),c,p)}function lH(a,c,p){return c=Si(c),p===t?(p=c,c=0):p=Si(p),a=nn(a),g1(a,c,p)}function uH(a,c,p){if(p&&typeof p!="boolean"&&sr(a,c,p)&&(c=p=t),p===t&&(typeof c=="boolean"?(p=c,c=t):typeof a=="boolean"&&(p=a,a=t)),a===t&&c===t?(a=0,c=1):(a=Si(a),c===t?(c=a,a=0):c=Si(c)),a>c){var f=a;a=c,c=f}if(p||a%1||c%1){var h=Cw();return Xt(a+h*(c-a+WI("1e-"+((h+"").length-1))),c)}return Yy(a,c)}var pH=Ca(function(a,c,p){return c=c.toLowerCase(),a+(p?m_(c):c)});function m_(a){return wT(Ze(a).toLowerCase())}function f_(a){return a=Ze(a),a&&a.replace(fI,tC).replace(LI,"")}function mH(a,c,p){a=Ze(a),c=Ir(c);var f=a.length;p=p===t?f:Do(De(p),0,f);var h=p;return p-=c.length,p>=0&&a.slice(p,h)==c}function fH(a){return a=Ze(a),a&&GF.test(a)?a.replace(jb,rC):a}function dH(a){return a=Ze(a),a&&JF.test(a)?a.replace(Ty,"\\$&"):a}var gH=Ca(function(a,c,p){return a+(p?"-":"")+c.toLowerCase()}),hH=Ca(function(a,c,p){return a+(p?" ":"")+c.toLowerCase()}),yH=hE("toLowerCase");function TH(a,c,p){a=Ze(a),c=De(c);var f=c?Pa(a):0;if(!c||f>=c)return a;var h=(c-f)/2;return np(ju(h),p)+a+np($u(h),p)}function xH(a,c,p){a=Ze(a),c=De(c);var f=c?Pa(a):0;return c&&f<c?a+np(c-f,p):a}function SH(a,c,p){a=Ze(a),c=De(c);var f=c?Pa(a):0;return c&&f<c?np(c-f,p)+a:a}function vH(a,c,p){return p||c==null?c=0:c&&(c=+c),AC(Ze(a).replace(xy,""),c||0)}function bH(a,c,p){return(p?sr(a,c,p):c===t)?c=1:c=De(c),Zy(Ze(a),c)}function wH(){var a=arguments,c=Ze(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var EH=Ca(function(a,c,p){return a+(p?"_":"")+c.toLowerCase()});function _H(a,c,p){return p&&typeof p!="number"&&sr(a,c,p)&&(c=p=t),p=p===t?Q:p>>>0,p?(a=Ze(a),a&&(typeof c=="string"||c!=null&&!ST(c))&&(c=Ir(c),!c&&Aa(a))?$i(wn(a),0,p):a.split(c,p)):[]}var RH=Ca(function(a,c,p){return a+(p?" ":"")+wT(c)});function kH(a,c,p){return a=Ze(a),p=p==null?0:Do(De(p),0,a.length),c=Ir(c),a.slice(p,p+c.length)==c}function AH(a,c,p){var f=T.templateSettings;p&&sr(a,c,p)&&(c=t),a=Ze(a),c=gp({},c,f,wE);var h=gp({},c.imports,f.imports,wE),S=Ct(h),_=Iy(h,S),R,M,G=0,K=c.interpolate||Au,ee="__p += '",ae=Oy((c.escape||Au).source+"|"+K.source+"|"+(K===zb?sI:Au).source+"|"+(c.evaluate||Au).source+"|$","g"),me="//# sourceURL="+(Xe.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++NI+"]")+`
`;a.replace(ae,function(Se,He,$e,Or,cr,Nr){return $e||($e=Or),ee+=a.slice(G,Nr).replace(dI,nC),He&&(R=!0,ee+=`' +
__e(`+He+`) +
'`),cr&&(M=!0,ee+=`';
`+cr+`;
__p += '`),$e&&(ee+=`' +
((__t = (`+$e+`)) == null ? '' : __t) +
'`),G=Nr+Se.length,Se}),ee+=`';
`;var xe=Xe.call(c,"variable")&&c.variable;if(!xe)ee=`with (obj) {
`+ee+`
}
`;else if(oI.test(xe))throw new Re(o);ee=(M?ee.replace($F,""):ee).replace(jF,"$1").replace(zF,"$1;"),ee="function("+(xe||"obj")+`) {
`+(xe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ee+`return __p
}`;var Fe=g_(function(){return Qe(S,me+"return "+ee).apply(t,_)});if(Fe.source=ee,xT(Fe))throw Fe;return Fe}function PH(a){return Ze(a).toLowerCase()}function DH(a){return Ze(a).toUpperCase()}function MH(a,c,p){if(a=Ze(a),a&&(p||c===t))return Ew(a);if(!a||!(c=Ir(c)))return a;var f=wn(a),h=wn(c),S=_w(f,h),_=Rw(f,h)+1;return $i(f,S,_).join("")}function LH(a,c,p){if(a=Ze(a),a&&(p||c===t))return a.slice(0,Aw(a)+1);if(!a||!(c=Ir(c)))return a;var f=wn(a),h=Rw(f,wn(c))+1;return $i(f,0,h).join("")}function FH(a,c,p){if(a=Ze(a),a&&(p||c===t))return a.replace(xy,"");if(!a||!(c=Ir(c)))return a;var f=wn(a),h=_w(f,wn(c));return $i(f,h).join("")}function IH(a,c){var p=yr,f=Tr;if(ut(c)){var h="separator"in c?c.separator:h;p="length"in c?De(c.length):p,f="omission"in c?Ir(c.omission):f}a=Ze(a);var S=a.length;if(Aa(a)){var _=wn(a);S=_.length}if(p>=S)return a;var R=p-Pa(f);if(R<1)return f;var M=_?$i(_,0,R).join(""):a.slice(0,R);if(h===t)return M+f;if(_&&(R+=M.length-R),ST(h)){if(a.slice(R).search(h)){var G,K=M;for(h.global||(h=Oy(h.source,Ze(qb.exec(h))+"g")),h.lastIndex=0;G=h.exec(K);)var ee=G.index;M=M.slice(0,ee===t?R:ee)}}else if(a.indexOf(Ir(h),R)!=R){var ae=M.lastIndexOf(h);ae>-1&&(M=M.slice(0,ae))}return M+f}function CH(a){return a=Ze(a),a&&qF.test(a)?a.replace($b,uC):a}var OH=Ca(function(a,c,p){return a+(p?" ":"")+c.toUpperCase()}),wT=hE("toUpperCase");function d_(a,c,p){return a=Ze(a),c=p?t:c,c===t?oC(a)?fC(a):YI(a):a.match(c)||[]}var g_=Ce(function(a,c){try{return Lr(a,t,c)}catch(p){return xT(p)?p:new Re(p)}}),NH=yi(function(a,c){return Zr(c,function(p){p=Wn(p),gi(a,p,yT(a[p],a))}),a});function UH(a){var c=a==null?0:a.length,p=ye();return a=c?at(a,function(f){if(typeof f[1]!="function")throw new Xr(i);return[p(f[0]),f[1]]}):[],Ce(function(f){for(var h=-1;++h<c;){var S=a[h];if(Lr(S[0],this,f))return Lr(S[1],this,f)}})}function HH(a){return u1(en(a,m))}function ET(a){return function(){return a}}function BH(a,c){return a==null||a!==a?c:a}var VH=TE(),WH=TE(!0);function br(a){return a}function _T(a){return Kw(typeof a=="function"?a:en(a,m))}function $H(a){return Yw(en(a,m))}function jH(a,c){return Zw(a,en(c,m))}var zH=Ce(function(a,c){return function(p){return Dc(p,a,c)}}),qH=Ce(function(a,c){return function(p){return Dc(a,p,c)}});function RT(a,c,p){var f=Ct(c),h=Yu(c,f);p==null&&!(ut(c)&&(h.length||!f.length))&&(p=c,c=a,a=this,h=Yu(c,Ct(c)));var S=!(ut(p)&&"chain"in p)||!!p.chain,_=xi(a);return Zr(h,function(R){var M=c[R];a[R]=M,_&&(a.prototype[R]=function(){var G=this.__chain__;if(S||G){var K=a(this.__wrapped__),ee=K.__actions__=xr(this.__actions__);return ee.push({func:M,args:arguments,thisArg:a}),K.__chain__=G,K}return M.apply(a,Oi([this.value()],arguments))})}),a}function GH(){return It._===this&&(It._=xC),this}function kT(){}function KH(a){return a=De(a),Ce(function(c){return Xw(c,a)})}var QH=iT(at),YH=iT(xw),ZH=iT(Py);function h_(a){return pT(a)?Dy(Wn(a)):k1(a)}function XH(a){return function(c){return a==null?t:Mo(a,c)}}var JH=SE(),e2=SE(!0);function AT(){return[]}function PT(){return!1}function t2(){return{}}function r2(){return""}function n2(){return!0}function i2(a,c){if(a=De(a),a<1||a>N)return[];var p=Q,f=Xt(a,Q);c=ye(c),a-=Q;for(var h=Fy(f,c);++p<a;)c(p);return h}function o2(a){return ke(a)?at(a,Wn):Cr(a)?[a]:xr(OE(Ze(a)))}function a2(a){var c=++yC;return Ze(a)+c}var s2=rp(function(a,c){return a+c},0),c2=oT("ceil"),l2=rp(function(a,c){return a/c},1),u2=oT("floor");function p2(a){return a&&a.length?Qu(a,br,jy):t}function m2(a,c){return a&&a.length?Qu(a,ye(c,2),jy):t}function f2(a){return bw(a,br)}function d2(a,c){return bw(a,ye(c,2))}function g2(a){return a&&a.length?Qu(a,br,Ky):t}function h2(a,c){return a&&a.length?Qu(a,ye(c,2),Ky):t}var y2=rp(function(a,c){return a*c},1),T2=oT("round"),x2=rp(function(a,c){return a-c},0);function S2(a){return a&&a.length?Ly(a,br):0}function v2(a,c){return a&&a.length?Ly(a,ye(c,2)):0}return T.after=$N,T.ary=GE,T.assign=DU,T.assignIn=s_,T.assignInWith=gp,T.assignWith=MU,T.at=LU,T.before=KE,T.bind=yT,T.bindAll=NH,T.bindKey=QE,T.castArray=tU,T.chain=jE,T.chunk=uO,T.compact=pO,T.concat=mO,T.cond=UH,T.conforms=HH,T.constant=ET,T.countBy=SN,T.create=FU,T.curry=YE,T.curryRight=ZE,T.debounce=XE,T.defaults=IU,T.defaultsDeep=CU,T.defer=jN,T.delay=zN,T.difference=fO,T.differenceBy=dO,T.differenceWith=gO,T.drop=hO,T.dropRight=yO,T.dropRightWhile=TO,T.dropWhile=xO,T.fill=SO,T.filter=bN,T.flatMap=_N,T.flatMapDeep=RN,T.flatMapDepth=kN,T.flatten=BE,T.flattenDeep=vO,T.flattenDepth=bO,T.flip=qN,T.flow=VH,T.flowRight=WH,T.fromPairs=wO,T.functions=WU,T.functionsIn=$U,T.groupBy=AN,T.initial=_O,T.intersection=RO,T.intersectionBy=kO,T.intersectionWith=AO,T.invert=zU,T.invertBy=qU,T.invokeMap=DN,T.iteratee=_T,T.keyBy=MN,T.keys=Ct,T.keysIn=vr,T.map=lp,T.mapKeys=KU,T.mapValues=QU,T.matches=$H,T.matchesProperty=jH,T.memoize=pp,T.merge=YU,T.mergeWith=c_,T.method=zH,T.methodOf=qH,T.mixin=RT,T.negate=mp,T.nthArg=KH,T.omit=ZU,T.omitBy=XU,T.once=GN,T.orderBy=LN,T.over=QH,T.overArgs=KN,T.overEvery=YH,T.overSome=ZH,T.partial=TT,T.partialRight=JE,T.partition=FN,T.pick=JU,T.pickBy=l_,T.property=h_,T.propertyOf=XH,T.pull=LO,T.pullAll=WE,T.pullAllBy=FO,T.pullAllWith=IO,T.pullAt=CO,T.range=JH,T.rangeRight=e2,T.rearg=QN,T.reject=ON,T.remove=OO,T.rest=YN,T.reverse=gT,T.sampleSize=UN,T.set=tH,T.setWith=rH,T.shuffle=HN,T.slice=NO,T.sortBy=WN,T.sortedUniq=jO,T.sortedUniqBy=zO,T.split=_H,T.spread=ZN,T.tail=qO,T.take=GO,T.takeRight=KO,T.takeRightWhile=QO,T.takeWhile=YO,T.tap=pN,T.throttle=XN,T.thru=cp,T.toArray=i_,T.toPairs=u_,T.toPairsIn=p_,T.toPath=o2,T.toPlainObject=a_,T.transform=nH,T.unary=JN,T.union=ZO,T.unionBy=XO,T.unionWith=JO,T.uniq=eN,T.uniqBy=tN,T.uniqWith=rN,T.unset=iH,T.unzip=hT,T.unzipWith=$E,T.update=oH,T.updateWith=aH,T.values=Ua,T.valuesIn=sH,T.without=nN,T.words=d_,T.wrap=eU,T.xor=iN,T.xorBy=oN,T.xorWith=aN,T.zip=sN,T.zipObject=cN,T.zipObjectDeep=lN,T.zipWith=uN,T.entries=u_,T.entriesIn=p_,T.extend=s_,T.extendWith=gp,RT(T,T),T.add=s2,T.attempt=g_,T.camelCase=pH,T.capitalize=m_,T.ceil=c2,T.clamp=cH,T.clone=rU,T.cloneDeep=iU,T.cloneDeepWith=oU,T.cloneWith=nU,T.conformsTo=aU,T.deburr=f_,T.defaultTo=BH,T.divide=l2,T.endsWith=mH,T.eq=_n,T.escape=fH,T.escapeRegExp=dH,T.every=vN,T.find=wN,T.findIndex=UE,T.findKey=OU,T.findLast=EN,T.findLastIndex=HE,T.findLastKey=NU,T.floor=u2,T.forEach=zE,T.forEachRight=qE,T.forIn=UU,T.forInRight=HU,T.forOwn=BU,T.forOwnRight=VU,T.get=vT,T.gt=sU,T.gte=cU,T.has=jU,T.hasIn=bT,T.head=VE,T.identity=br,T.includes=PN,T.indexOf=EO,T.inRange=lH,T.invoke=GU,T.isArguments=Io,T.isArray=ke,T.isArrayBuffer=lU,T.isArrayLike=Sr,T.isArrayLikeObject=Tt,T.isBoolean=uU,T.isBuffer=ji,T.isDate=pU,T.isElement=mU,T.isEmpty=fU,T.isEqual=dU,T.isEqualWith=gU,T.isError=xT,T.isFinite=hU,T.isFunction=xi,T.isInteger=e_,T.isLength=fp,T.isMap=t_,T.isMatch=yU,T.isMatchWith=TU,T.isNaN=xU,T.isNative=SU,T.isNil=bU,T.isNull=vU,T.isNumber=r_,T.isObject=ut,T.isObjectLike=gt,T.isPlainObject=Oc,T.isRegExp=ST,T.isSafeInteger=wU,T.isSet=n_,T.isString=dp,T.isSymbol=Cr,T.isTypedArray=Na,T.isUndefined=EU,T.isWeakMap=_U,T.isWeakSet=RU,T.join=PO,T.kebabCase=gH,T.last=rn,T.lastIndexOf=DO,T.lowerCase=hH,T.lowerFirst=yH,T.lt=kU,T.lte=AU,T.max=p2,T.maxBy=m2,T.mean=f2,T.meanBy=d2,T.min=g2,T.minBy=h2,T.stubArray=AT,T.stubFalse=PT,T.stubObject=t2,T.stubString=r2,T.stubTrue=n2,T.multiply=y2,T.nth=MO,T.noConflict=GH,T.noop=kT,T.now=up,T.pad=TH,T.padEnd=xH,T.padStart=SH,T.parseInt=vH,T.random=uH,T.reduce=IN,T.reduceRight=CN,T.repeat=bH,T.replace=wH,T.result=eH,T.round=T2,T.runInContext=P,T.sample=NN,T.size=BN,T.snakeCase=EH,T.some=VN,T.sortedIndex=UO,T.sortedIndexBy=HO,T.sortedIndexOf=BO,T.sortedLastIndex=VO,T.sortedLastIndexBy=WO,T.sortedLastIndexOf=$O,T.startCase=RH,T.startsWith=kH,T.subtract=x2,T.sum=S2,T.sumBy=v2,T.template=AH,T.times=i2,T.toFinite=Si,T.toInteger=De,T.toLength=o_,T.toLower=PH,T.toNumber=nn,T.toSafeInteger=PU,T.toString=Ze,T.toUpper=DH,T.trim=MH,T.trimEnd=LH,T.trimStart=FH,T.truncate=IH,T.unescape=CH,T.uniqueId=a2,T.upperCase=OH,T.upperFirst=wT,T.each=zE,T.eachRight=qE,T.first=VE,RT(T,function(){var a={};return Bn(T,function(c,p){Xe.call(T.prototype,p)||(a[p]=c)}),a}(),{chain:!1}),T.VERSION=e,Zr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){T[a].placeholder=T}),Zr(["drop","take"],function(a,c){We.prototype[a]=function(p){p=p===t?1:Dt(De(p),0);var f=this.__filtered__&&!c?new We(this):this.clone();return f.__filtered__?f.__takeCount__=Xt(p,f.__takeCount__):f.__views__.push({size:Xt(p,Q),type:a+(f.__dir__<0?"Right":"")}),f},We.prototype[a+"Right"]=function(p){return this.reverse()[a](p).reverse()}}),Zr(["filter","map","takeWhile"],function(a,c){var p=c+1,f=p==A||p==Z;We.prototype[a]=function(h){var S=this.clone();return S.__iteratees__.push({iteratee:ye(h,3),type:p}),S.__filtered__=S.__filtered__||f,S}}),Zr(["head","last"],function(a,c){var p="take"+(c?"Right":"");We.prototype[a]=function(){return this[p](1).value()[0]}}),Zr(["initial","tail"],function(a,c){var p="drop"+(c?"":"Right");We.prototype[a]=function(){return this.__filtered__?new We(this):this[p](1)}}),We.prototype.compact=function(){return this.filter(br)},We.prototype.find=function(a){return this.filter(a).head()},We.prototype.findLast=function(a){return this.reverse().find(a)},We.prototype.invokeMap=Ce(function(a,c){return typeof a=="function"?new We(this):this.map(function(p){return Dc(p,a,c)})}),We.prototype.reject=function(a){return this.filter(mp(ye(a)))},We.prototype.slice=function(a,c){a=De(a);var p=this;return p.__filtered__&&(a>0||c<0)?new We(p):(a<0?p=p.takeRight(-a):a&&(p=p.drop(a)),c!==t&&(c=De(c),p=c<0?p.dropRight(-c):p.take(c-a)),p)},We.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},We.prototype.toArray=function(){return this.take(Q)},Bn(We.prototype,function(a,c){var p=/^(?:filter|find|map|reject)|While$/.test(c),f=/^(?:head|last)$/.test(c),h=T[f?"take"+(c=="last"?"Right":""):c],S=f||/^find/.test(c);h&&(T.prototype[c]=function(){var _=this.__wrapped__,R=f?[1]:arguments,M=_ instanceof We,G=R[0],K=M||ke(_),ee=function(He){var $e=h.apply(T,Oi([He],R));return f&&ae?$e[0]:$e};K&&p&&typeof G=="function"&&G.length!=1&&(M=K=!1);var ae=this.__chain__,me=!!this.__actions__.length,xe=S&&!ae,Fe=M&&!me;if(!S&&K){_=Fe?_:new We(this);var Se=a.apply(_,R);return Se.__actions__.push({func:cp,args:[ee],thisArg:t}),new Jr(Se,ae)}return xe&&Fe?a.apply(this,R):(Se=this.thru(ee),xe?f?Se.value()[0]:Se.value():Se)})}),Zr(["pop","push","shift","sort","splice","unshift"],function(a){var c=Iu[a],p=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",f=/^(?:pop|shift)$/.test(a);T.prototype[a]=function(){var h=arguments;if(f&&!this.__chain__){var S=this.value();return c.apply(ke(S)?S:[],h)}return this[p](function(_){return c.apply(ke(_)?_:[],h)})}}),Bn(We.prototype,function(a,c){var p=T[c];if(p){var f=p.name+"";Xe.call(La,f)||(La[f]=[]),La[f].push({name:c,func:p})}}),La[tp(t,w).name]=[{name:"wrapper",func:t}],We.prototype.clone=CC,We.prototype.reverse=OC,We.prototype.value=NC,T.prototype.at=mN,T.prototype.chain=fN,T.prototype.commit=dN,T.prototype.next=gN,T.prototype.plant=yN,T.prototype.reverse=TN,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=xN,T.prototype.first=T.prototype.head,wc&&(T.prototype[wc]=hN),T},Ui=dC();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(It._=Ui,define(function(){return Ui})):Ro?((Ro.exports=Ui)._=Ui,_y._=Ui):It._=Ui}).call(tc)});var $7={};T_($7,{default:()=>UF});module.exports=k2($7);var DT="cursorless.command",Tp=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},ht=class extends Tp{constructor(){super(...arguments);this.isVisible=!1}},St=class extends Tp{constructor(){super(...arguments);this.isVisible=!0}};var z7={"cursorless.toggleDecorations":new St("Toggle decorations"),"cursorless.recomputeDecorationStyles":new St("Recompute decoration styles"),"cursorless.recordTestCase":new St("Record test case"),"cursorless.recordOneTestCaseThenPause":new St("Record one test case, then pause"),"cursorless.pauseRecording":new St("Pause test case recording"),"cursorless.resumeRecording":new St("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new St("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new St("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new St("Show documentation"),"cursorless.showInstallationDependencies":new St("Show installation dependencies"),"cursorless.showScopeVisualizer":new St("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new St("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new St("Analyze collected command history"),"cursorless.tutorial.start":new ht("Start a tutorial"),"cursorless.tutorial.next":new St("Tutorial next"),"cursorless.tutorial.previous":new St("Tutorial previous"),"cursorless.tutorial.restart":new St("Tutorial restart"),"cursorless.tutorial.resume":new St("Tutorial resume"),"cursorless.tutorial.list":new St("Tutorial list"),"cursorless.documentationOpened":new ht("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new ht("The core cursorless command"),"cursorless.repeatPreviousCommand":new St("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new ht("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new ht("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new ht("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new ht("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new ht("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new ht("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new ht("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new ht("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new ht("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new ht("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new ht("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new ht("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new ht("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new ht("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new ht("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new ht("Redo keyboard targeting changes"),"cursorless.migrateSnippets":new ht("Migrate snippets from the old Cursorless format to the new community format")};var xp=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Sp=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},vt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var vp=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var A2=typeof global=="object"&&global&&global.Object===Object&&global,bp=A2;var P2=typeof self=="object"&&self&&self.Object===Object&&self,D2=bp||P2||Function("return this")(),Ot=D2;var M2=Ot.Symbol,lr=M2;var S_=Object.prototype,L2=S_.hasOwnProperty,F2=S_.toString,Nc=lr?lr.toStringTag:void 0;function I2(t){var e=L2.call(t,Nc),r=t[Nc];try{t[Nc]=void 0;var n=!0}catch{}var i=F2.call(t);return n&&(e?t[Nc]=r:delete t[Nc]),i}var v_=I2;var C2=Object.prototype,O2=C2.toString;function N2(t){return O2.call(t)}var b_=N2;var U2="[object Null]",H2="[object Undefined]",w_=lr?lr.toStringTag:void 0;function B2(t){return t==null?t===void 0?H2:U2:w_&&w_ in Object(t)?v_(t):b_(t)}var kn=B2;function V2(t){return t!=null&&typeof t=="object"}var ur=V2;var W2="[object Symbol]";function $2(t){return typeof t=="symbol"||ur(t)&&kn(t)==W2}var Ur=$2;function j2(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var an=j2;var z2=Array.isArray,Je=z2;var q2=1/0,E_=lr?lr.prototype:void 0,__=E_?E_.toString:void 0;function R_(t){if(typeof t=="string")return t;if(Je(t))return an(t,R_)+"";if(Ur(t))return __?__.call(t):"";var e=t+"";return e=="0"&&1/t==-q2?"-0":e}var k_=R_;var G2=/\s/;function K2(t){for(var e=t.length;e--&&G2.test(t.charAt(e)););return e}var A_=K2;var Q2=/^\s+/;function Y2(t){return t&&t.slice(0,A_(t)+1).replace(Q2,"")}var P_=Y2;function Z2(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Hr=Z2;var D_=NaN,X2=/^[-+]0x[0-9a-f]+$/i,J2=/^0b[01]+$/i,eB=/^0o[0-7]+$/i,tB=parseInt;function rB(t){if(typeof t=="number")return t;if(Ur(t))return D_;if(Hr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Hr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=P_(t);var r=J2.test(t);return r||eB.test(t)?tB(t.slice(2),r?2:8):X2.test(t)?D_:+t}var M_=rB;var L_=1/0,nB=17976931348623157e292;function iB(t){if(!t)return t===0?t:0;if(t=M_(t),t===L_||t===-L_){var e=t<0?-1:1;return e*nB}return t===t?t:0}var Ha=iB;function oB(t){var e=Ha(t),r=e%1;return e===e?r?e-r:e:0}var wp=oB;function aB(t){return t}var $n=aB;var sB="[object AsyncFunction]",cB="[object Function]",lB="[object GeneratorFunction]",uB="[object Proxy]";function pB(t){if(!Hr(t))return!1;var e=kn(t);return e==cB||e==lB||e==sB||e==uB}var Ep=pB;var mB=Ot["__core-js_shared__"],_p=mB;var F_=function(){var t=/[^.]+$/.exec(_p&&_p.keys&&_p.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function fB(t){return!!F_&&F_ in t}var I_=fB;var dB=Function.prototype,gB=dB.toString;function hB(t){if(t!=null){try{return gB.call(t)}catch{}try{return t+""}catch{}}return""}var bi=hB;var yB=/[\\^$.*+?()[\]{}|]/g,TB=/^\[object .+?Constructor\]$/,xB=Function.prototype,SB=Object.prototype,vB=xB.toString,bB=SB.hasOwnProperty,wB=RegExp("^"+vB.call(bB).replace(yB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function EB(t){if(!Hr(t)||I_(t))return!1;var e=Ep(t)?wB:TB;return e.test(bi(t))}var C_=EB;function _B(t,e){return t?.[e]}var O_=_B;function RB(t,e){var r=O_(t,e);return C_(r)?r:void 0}var wr=RB;var kB=wr(Ot,"WeakMap"),Co=kB;var AB=Co&&new Co,MT=AB;var N_=Object.create,PB=function(){function t(){}return function(e){if(!Hr(e))return{};if(N_)return N_(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Rp=PB;function DB(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var U_=DB;function MB(){}var Ba=MB;var LB=4294967295;function kp(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=LB,this.__views__=[]}kp.prototype=Rp(Ba.prototype);kp.prototype.constructor=kp;var Va=kp;function FB(){}var Ap=FB;var IB=MT?function(t){return MT.get(t)}:Ap,Pp=IB;var CB={},LT=CB;var OB=Object.prototype,NB=OB.hasOwnProperty;function UB(t){for(var e=t.name+"",r=LT[e],n=NB.call(LT,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Wa=UB;function Dp(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Dp.prototype=Rp(Ba.prototype);Dp.prototype.constructor=Dp;var zi=Dp;function HB(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var qi=HB;function BB(t){if(t instanceof Va)return t.clone();var e=new zi(t.__wrapped__,t.__chain__);return e.__actions__=qi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var H_=BB;var VB=Object.prototype,WB=VB.hasOwnProperty;function Mp(t){if(ur(t)&&!Je(t)&&!(t instanceof Va)){if(t instanceof zi)return t;if(WB.call(t,"__wrapped__"))return H_(t)}return new zi(t)}Mp.prototype=Ba.prototype;Mp.prototype.constructor=Mp;var B_=Mp;function $B(t){var e=Wa(t),r=B_[e];if(typeof r!="function"||!(e in Va.prototype))return!1;if(t===r)return!0;var n=Pp(r);return!!n&&t===n[0]}var FT=$B;var jB=800,zB=16,qB=Date.now;function GB(t){var e=0,r=0;return function(){var n=qB(),i=zB-(n-r);if(r=n,i>0){if(++e>=jB)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var V_=GB;function KB(t){return function(){return t}}var W_=KB;var QB=function(){try{var t=wr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),IT=QB;var YB=IT?function(t,e){return IT(t,"toString",{configurable:!0,enumerable:!1,value:W_(e),writable:!0})}:$n,$_=YB;var ZB=V_($_),Lp=ZB;function XB(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Fp=XB;function JB(t){return t!==t}var j_=JB;function eV(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var z_=eV;function tV(t,e,r){return e===e?z_(t,e,r):Fp(t,j_,r)}var Ip=tV;function rV(t,e){var r=t==null?0:t.length;return!!r&&Ip(t,e,0)>-1}var q_=rV;var nV=9007199254740991,iV=/^(?:0|[1-9]\d*)$/;function oV(t,e){var r=typeof t;return e=e??nV,!!e&&(r=="number"||r!="symbol"&&iV.test(t))&&t>-1&&t%1==0&&t<e}var $a=oV;function aV(t,e){return t===e||t!==t&&e!==e}var ja=aV;var G_=Math.max;function sV(t,e,r){return e=G_(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=G_(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),U_(t,this,l)}}var Cp=sV;function cV(t,e){return Lp(Cp(t,e,$n),t+"")}var za=cV;var lV=9007199254740991;function uV(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=lV}var qa=uV;function pV(t){return t!=null&&qa(t.length)&&!Ep(t)}var jn=pV;function mV(t,e,r){if(!Hr(r))return!1;var n=typeof e;return(n=="number"?jn(r)&&$a(e,r.length):n=="string"&&e in r)?ja(r[e],t):!1}var Oo=mV;var fV=Object.prototype;function dV(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||fV;return t===r}var K_=dV;function gV(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Op=gV;var hV="[object Arguments]";function yV(t){return ur(t)&&kn(t)==hV}var CT=yV;var Q_=Object.prototype,TV=Q_.hasOwnProperty,xV=Q_.propertyIsEnumerable,SV=CT(function(){return arguments}())?CT:function(t){return ur(t)&&TV.call(t,"callee")&&!xV.call(t,"callee")},Ga=SV;function vV(){return!1}var Y_=vV;var J_=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Z_=J_&&typeof module=="object"&&module&&!module.nodeType&&module,bV=Z_&&Z_.exports===J_,X_=bV?Ot.Buffer:void 0,wV=X_?X_.isBuffer:void 0,EV=wV||Y_,Uc=EV;var _V="[object Arguments]",RV="[object Array]",kV="[object Boolean]",AV="[object Date]",PV="[object Error]",DV="[object Function]",MV="[object Map]",LV="[object Number]",FV="[object Object]",IV="[object RegExp]",CV="[object Set]",OV="[object String]",NV="[object WeakMap]",UV="[object ArrayBuffer]",HV="[object DataView]",BV="[object Float32Array]",VV="[object Float64Array]",WV="[object Int8Array]",$V="[object Int16Array]",jV="[object Int32Array]",zV="[object Uint8Array]",qV="[object Uint8ClampedArray]",GV="[object Uint16Array]",KV="[object Uint32Array]",it={};it[BV]=it[VV]=it[WV]=it[$V]=it[jV]=it[zV]=it[qV]=it[GV]=it[KV]=!0;it[_V]=it[RV]=it[UV]=it[kV]=it[HV]=it[AV]=it[PV]=it[DV]=it[MV]=it[LV]=it[FV]=it[IV]=it[CV]=it[OV]=it[NV]=!1;function QV(t){return ur(t)&&qa(t.length)&&!!it[kn(t)]}var e0=QV;function YV(t){return function(e){return t(e)}}var Ka=YV;var t0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Hc=t0&&typeof module=="object"&&module&&!module.nodeType&&module,ZV=Hc&&Hc.exports===t0,OT=ZV&&bp.process,XV=function(){try{var t=Hc&&Hc.require&&Hc.require("util").types;return t||OT&&OT.binding&&OT.binding("util")}catch{}}(),NT=XV;var r0=NT&&NT.isTypedArray,JV=r0?Ka(r0):e0,Np=JV;var eW=Object.prototype,tW=eW.hasOwnProperty;function rW(t,e){var r=Je(t),n=!r&&Ga(t),i=!r&&!n&&Uc(t),o=!r&&!n&&!i&&Np(t),s=r||n||i||o,l=s?Op(t.length,String):[],u=l.length;for(var m in t)(e||tW.call(t,m))&&!(s&&(m=="length"||i&&(m=="offset"||m=="parent")||o&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||$a(m,u)))&&l.push(m);return l}var n0=rW;function nW(t,e){return function(r){return t(e(r))}}var i0=nW;var iW=i0(Object.keys,Object),o0=iW;var oW=Object.prototype,aW=oW.hasOwnProperty;function sW(t){if(!K_(t))return o0(t);var e=[];for(var r in Object(t))aW.call(t,r)&&r!="constructor"&&e.push(r);return e}var a0=sW;function cW(t){return jn(t)?n0(t):a0(t)}var Gi=cW;var lW=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,uW=/^\w*$/;function pW(t,e){if(Je(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Ur(t)?!0:uW.test(t)||!lW.test(t)||e!=null&&t in Object(e)}var Qa=pW;var mW=wr(Object,"create"),wi=mW;function fW(){this.__data__=wi?wi(null):{},this.size=0}var s0=fW;function dW(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var c0=dW;var gW="__lodash_hash_undefined__",hW=Object.prototype,yW=hW.hasOwnProperty;function TW(t){var e=this.__data__;if(wi){var r=e[t];return r===gW?void 0:r}return yW.call(e,t)?e[t]:void 0}var l0=TW;var xW=Object.prototype,SW=xW.hasOwnProperty;function vW(t){var e=this.__data__;return wi?e[t]!==void 0:SW.call(e,t)}var u0=vW;var bW="__lodash_hash_undefined__";function wW(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=wi&&e===void 0?bW:e,this}var p0=wW;function Ya(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ya.prototype.clear=s0;Ya.prototype.delete=c0;Ya.prototype.get=l0;Ya.prototype.has=u0;Ya.prototype.set=p0;var UT=Ya;function EW(){this.__data__=[],this.size=0}var m0=EW;function _W(t,e){for(var r=t.length;r--;)if(ja(t[r][0],e))return r;return-1}var Ki=_W;var RW=Array.prototype,kW=RW.splice;function AW(t){var e=this.__data__,r=Ki(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():kW.call(e,r,1),--this.size,!0}var f0=AW;function PW(t){var e=this.__data__,r=Ki(e,t);return r<0?void 0:e[r][1]}var d0=PW;function DW(t){return Ki(this.__data__,t)>-1}var g0=DW;function MW(t,e){var r=this.__data__,n=Ki(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var h0=MW;function Za(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Za.prototype.clear=m0;Za.prototype.delete=f0;Za.prototype.get=d0;Za.prototype.has=g0;Za.prototype.set=h0;var Qi=Za;var LW=wr(Ot,"Map"),Yi=LW;function FW(){this.size=0,this.__data__={hash:new UT,map:new(Yi||Qi),string:new UT}}var y0=FW;function IW(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var T0=IW;function CW(t,e){var r=t.__data__;return T0(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Zi=CW;function OW(t){var e=Zi(this,t).delete(t);return this.size-=e?1:0,e}var x0=OW;function NW(t){return Zi(this,t).get(t)}var S0=NW;function UW(t){return Zi(this,t).has(t)}var v0=UW;function HW(t,e){var r=Zi(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var b0=HW;function Xa(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Xa.prototype.clear=y0;Xa.prototype.delete=x0;Xa.prototype.get=S0;Xa.prototype.has=v0;Xa.prototype.set=b0;var No=Xa;var BW="Expected a function";function HT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(BW);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(HT.Cache||No),r}HT.Cache=No;var Bc=HT;var VW=500;function WW(t){var e=Bc(t,function(n){return r.size===VW&&r.clear(),n}),r=e.cache;return e}var w0=WW;var $W=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jW=/\\(\\)?/g,zW=w0(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace($W,function(r,n,i,o){e.push(i?o.replace(jW,"$1"):n||r)}),e}),E0=zW;function qW(t){return t==null?"":k_(t)}var An=qW;function GW(t,e){return Je(t)?t:Qa(t,e)?[t]:E0(An(t))}var Up=GW;var KW=1/0;function QW(t){if(typeof t=="string"||Ur(t))return t;var e=t+"";return e=="0"&&1/t==-KW?"-0":e}var Xi=QW;function YW(t,e){e=Up(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Xi(e[r++])];return r&&r==n?t:void 0}var Ja=YW;function ZW(t,e,r){var n=t==null?void 0:Ja(t,e);return n===void 0?r:n}var Uo=ZW;function XW(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var es=XW;var _0=lr?lr.isConcatSpreadable:void 0;function JW(t){return Je(t)||Ga(t)||!!(_0&&t&&t[_0])}var R0=JW;function k0(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=R0),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?k0(l,e-1,r,n,i):es(i,l):n||(i[i.length]=l)}return i}var ts=k0;function e$(t){var e=t==null?0:t.length;return e?ts(t,1):[]}var ot=e$;function t$(t){return Lp(Cp(t,void 0,ot),t+"")}var A0=t$;function r$(t){return function(e){return t?.[e]}}var P0=r$;var n$={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},i$=P0(n$),D0=i$;var o$=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a$="\\u0300-\\u036f",s$="\\ufe20-\\ufe2f",c$="\\u20d0-\\u20ff",l$=a$+s$+c$,u$="["+l$+"]",p$=RegExp(u$,"g");function m$(t){return t=An(t),t&&t.replace(o$,D0).replace(p$,"")}var BT=m$;function f$(){this.__data__=new Qi,this.size=0}var M0=f$;function d$(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var L0=d$;function g$(t){return this.__data__.get(t)}var F0=g$;function h$(t){return this.__data__.has(t)}var I0=h$;var y$=200;function T$(t,e){var r=this.__data__;if(r instanceof Qi){var n=r.__data__;if(!Yi||n.length<y$-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new No(n)}return r.set(t,e),this.size=r.size,this}var C0=T$;function rs(t){var e=this.__data__=new Qi(t);this.size=e.size}rs.prototype.clear=M0;rs.prototype.delete=L0;rs.prototype.get=F0;rs.prototype.has=I0;rs.prototype.set=C0;var ns=rs;function x$(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var Hp=x$;function S$(){return[]}var O0=S$;var v$=Object.prototype,b$=v$.propertyIsEnumerable,N0=Object.getOwnPropertySymbols,w$=N0?function(t){return t==null?[]:(t=Object(t),Hp(N0(t),function(e){return b$.call(t,e)}))}:O0,U0=w$;function E$(t,e,r){var n=e(t);return Je(t)?n:es(n,r(t))}var H0=E$;function _$(t){return H0(t,Gi,U0)}var VT=_$;var R$=wr(Ot,"DataView"),Bp=R$;var k$=wr(Ot,"Promise"),Vp=k$;var A$=wr(Ot,"Set"),Ji=A$;var B0="[object Map]",P$="[object Object]",V0="[object Promise]",W0="[object Set]",$0="[object WeakMap]",j0="[object DataView]",D$=bi(Bp),M$=bi(Yi),L$=bi(Vp),F$=bi(Ji),I$=bi(Co),Ho=kn;(Bp&&Ho(new Bp(new ArrayBuffer(1)))!=j0||Yi&&Ho(new Yi)!=B0||Vp&&Ho(Vp.resolve())!=V0||Ji&&Ho(new Ji)!=W0||Co&&Ho(new Co)!=$0)&&(Ho=function(t){var e=kn(t),r=e==P$?t.constructor:void 0,n=r?bi(r):"";if(n)switch(n){case D$:return j0;case M$:return B0;case L$:return V0;case F$:return W0;case I$:return $0}return e});var WT=Ho;var C$=Ot.Uint8Array,$T=C$;function O$(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return es(Je(r)?qi(r):[r],ts(e,1))}var Vc=O$;var N$="__lodash_hash_undefined__";function U$(t){return this.__data__.set(t,N$),this}var z0=U$;function H$(t){return this.__data__.has(t)}var q0=H$;function Wp(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new No;++e<r;)this.add(t[e])}Wp.prototype.add=Wp.prototype.push=z0;Wp.prototype.has=q0;var $p=Wp;function B$(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var G0=B$;function V$(t,e){return t.has(e)}var jp=V$;var W$=1,$$=2;function j$(t,e,r,n,i,o){var s=r&W$,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var m=o.get(t),d=o.get(e);if(m&&d)return m==e&&d==t;var g=-1,y=!0,x=r&$$?new $p:void 0;for(o.set(t,e),o.set(e,t);++g<l;){var E=t[g],w=e[g];if(n)var U=s?n(w,E,g,e,t,o):n(E,w,g,t,e,o);if(U!==void 0){if(U)continue;y=!1;break}if(x){if(!G0(e,function(W,q){if(!jp(x,q)&&(E===W||i(E,W,r,n,o)))return x.push(q)})){y=!1;break}}else if(!(E===w||i(E,w,r,n,o))){y=!1;break}}return o.delete(t),o.delete(e),y}var zp=j$;function z$(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var K0=z$;function q$(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var is=q$;var G$=1,K$=2,Q$="[object Boolean]",Y$="[object Date]",Z$="[object Error]",X$="[object Map]",J$="[object Number]",ej="[object RegExp]",tj="[object Set]",rj="[object String]",nj="[object Symbol]",ij="[object ArrayBuffer]",oj="[object DataView]",Q0=lr?lr.prototype:void 0,jT=Q0?Q0.valueOf:void 0;function aj(t,e,r,n,i,o,s){switch(r){case oj:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ij:return!(t.byteLength!=e.byteLength||!o(new $T(t),new $T(e)));case Q$:case Y$:case J$:return ja(+t,+e);case Z$:return t.name==e.name&&t.message==e.message;case ej:case rj:return t==e+"";case X$:var l=K0;case tj:var u=n&G$;if(l||(l=is),t.size!=e.size&&!u)return!1;var m=s.get(t);if(m)return m==e;n|=K$,s.set(t,e);var d=zp(l(t),l(e),n,i,o,s);return s.delete(t),d;case nj:if(jT)return jT.call(t)==jT.call(e)}return!1}var Y0=aj;var sj=1,cj=Object.prototype,lj=cj.hasOwnProperty;function uj(t,e,r,n,i,o){var s=r&sj,l=VT(t),u=l.length,m=VT(e),d=m.length;if(u!=d&&!s)return!1;for(var g=u;g--;){var y=l[g];if(!(s?y in e:lj.call(e,y)))return!1}var x=o.get(t),E=o.get(e);if(x&&E)return x==e&&E==t;var w=!0;o.set(t,e),o.set(e,t);for(var U=s;++g<u;){y=l[g];var W=t[y],q=e[y];if(n)var ie=s?n(q,W,y,e,t,o):n(W,q,y,t,e,o);if(!(ie===void 0?W===q||i(W,q,r,n,o):ie)){w=!1;break}U||(U=y=="constructor")}if(w&&!U){var se=t.constructor,fe=e.constructor;se!=fe&&"constructor"in t&&"constructor"in e&&!(typeof se=="function"&&se instanceof se&&typeof fe=="function"&&fe instanceof fe)&&(w=!1)}return o.delete(t),o.delete(e),w}var Z0=uj;var pj=1,X0="[object Arguments]",J0="[object Array]",qp="[object Object]",mj=Object.prototype,eR=mj.hasOwnProperty;function fj(t,e,r,n,i,o){var s=Je(t),l=Je(e),u=s?J0:WT(t),m=l?J0:WT(e);u=u==X0?qp:u,m=m==X0?qp:m;var d=u==qp,g=m==qp,y=u==m;if(y&&Uc(t)){if(!Uc(e))return!1;s=!0,d=!1}if(y&&!d)return o||(o=new ns),s||Np(t)?zp(t,e,r,n,i,o):Y0(t,e,u,r,n,i,o);if(!(r&pj)){var x=d&&eR.call(t,"__wrapped__"),E=g&&eR.call(e,"__wrapped__");if(x||E){var w=x?t.value():t,U=E?e.value():e;return o||(o=new ns),i(w,U,r,n,o)}}return y?(o||(o=new ns),Z0(t,e,r,n,i,o)):!1}var tR=fj;function rR(t,e,r,n,i){return t===e?!0:t==null||e==null||!ur(t)&&!ur(e)?t!==t&&e!==e:tR(t,e,r,n,rR,i)}var os=rR;var dj=1,gj=2;function hj(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var u=l[0],m=t[u],d=l[1];if(s&&l[2]){if(m===void 0&&!(u in t))return!1}else{var g=new ns;if(n)var y=n(m,d,u,t,e,g);if(!(y===void 0?os(d,m,dj|gj,n,g):y))return!1}}return!0}var nR=hj;function yj(t){return t===t&&!Hr(t)}var Gp=yj;function Tj(t){for(var e=Gi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Gp(i)]}return e}var iR=Tj;function xj(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var Kp=xj;function Sj(t){var e=iR(t);return e.length==1&&e[0][2]?Kp(e[0][0],e[0][1]):function(r){return r===t||nR(r,t,e)}}var oR=Sj;function vj(t,e){return t!=null&&e in Object(t)}var aR=vj;function bj(t,e,r){e=Up(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=Xi(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&qa(i)&&$a(s,i)&&(Je(t)||Ga(t)))}var sR=bj;function wj(t,e){return t!=null&&sR(t,e,aR)}var cR=wj;var Ej=1,_j=2;function Rj(t,e){return Qa(t)&&Gp(e)?Kp(Xi(t),e):function(r){var n=Uo(r,t);return n===void 0&&n===e?cR(r,t):os(e,n,Ej|_j)}}var lR=Rj;function kj(t){return function(e){return e?.[t]}}var Qp=kj;function Aj(t){return function(e){return Ja(e,t)}}var uR=Aj;function Pj(t){return Qa(t)?Qp(Xi(t)):uR(t)}var pR=Pj;function Dj(t){return typeof t=="function"?t:t==null?$n:typeof t=="object"?Je(t)?lR(t[0],t[1]):oR(t):pR(t)}var as=Dj;function Mj(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),l=s.length;l--;){var u=s[t?l:++i];if(r(o[u],u,o)===!1)break}return e}}var mR=Mj;var Lj=mR(),fR=Lj;function Fj(t,e){return t&&fR(t,e,Gi)}var dR=Fj;function Ij(t,e){return function(r,n){if(r==null)return r;if(!jn(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var gR=Ij;var Cj=gR(dR),hR=Cj;function Oj(t){return ur(t)&&jn(t)}var yR=Oj;function Nj(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var TR=Nj;function Uj(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Yp=Uj;var xR=/[\\^$.*+?()[\]{}|]/g,Hj=RegExp(xR.source);function Bj(t){return t=An(t),t&&Hj.test(t)?t.replace(xR,"\\$&"):t}var Br=Bj;var Vj=Math.max,Wj=Math.min;function $j(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=wp(r),i=r<0?Vj(n+i,0):Wj(i,n-1)),Fp(t,as(e,3),i,!0)}var Bo=$j;function jj(t,e){var r=-1,n=jn(t)?Array(t.length):[];return hR(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var SR=jj;var zj="Expected a function",qj=8,Gj=32,Kj=128,Qj=256;function Yj(t){return A0(function(e){var r=e.length,n=r,i=zi.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(zj);if(i&&!s&&Wa(o)=="wrapper")var s=new zi([],!0)}for(n=s?n:r;++n<r;){o=e[n];var l=Wa(o),u=l=="wrapper"?Pp(o):void 0;u&&FT(u[0])&&u[1]==(Kj|qj|Gj|Qj)&&!u[4].length&&u[9]==1?s=s[Wa(u[0])].apply(s,u[3]):s=o.length==1&&FT(o)?s[l]():s.thru(o)}return function(){var m=arguments,d=m[0];if(s&&m.length==1&&Je(d))return s.plant(d).value();for(var g=0,y=r?e[g].apply(this,m):d;++g<r;)y=e[g].call(this,y);return y}})}var vR=Yj;var Zj=vR(),zT=Zj;function Xj(t,e){return an(e,function(r){return t[r]})}var bR=Xj;function Jj(t){return t==null?[]:bR(t,Gi(t))}var wR=Jj;function e3(t,e){return os(t,e)}var Ei=e3;function t3(t,e){return t<e}var ER=t3;function r3(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(l===void 0?s===s&&!Ur(s):r(s,l)))var l=s,u=o}return u}var _R=r3;function n3(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var RR=n3;function i3(t){return t&&t.length?_R(t,$n,ER):void 0}var qT=i3;function o3(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var kR=o3;function a3(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Ur(t),s=e!==void 0,l=e===null,u=e===e,m=Ur(e);if(!l&&!m&&!o&&t>e||o&&s&&u&&!l&&!m||n&&s&&u||!r&&u||!i)return 1;if(!n&&!o&&!m&&t<e||m&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!u)return-1}return 0}var AR=a3;function s3(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;++n<s;){var u=AR(i[n],o[n]);if(u){if(n>=l)return u;var m=r[n];return u*(m=="desc"?-1:1)}}return t.index-e.index}var PR=s3;function c3(t,e,r){e.length?e=an(e,function(o){return Je(o)?function(s){return Ja(s,o.length===1?o[0]:o)}:o}):e=[$n];var n=-1;e=an(e,Ka(as));var i=SR(t,function(o,s,l){var u=an(e,function(m){return m(o)});return{criteria:u,index:++n,value:o}});return kR(i,function(o,s){return PR(o,s,r)})}var DR=c3;var l3=9007199254740991,u3=Math.floor;function p3(t,e){var r="";if(!t||e<1||e>l3)return r;do e%2&&(r+=t),e=u3(e/2),e&&(t+=t);while(e);return r}var MR=p3;function m3(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var LR=m3;var f3=Array.prototype,FR=f3.splice;function d3(t,e,r,n){var i=n?LR:Ip,o=-1,s=e.length,l=t;for(t===e&&(e=qi(e)),r&&(l=an(t,Ka(r)));++o<s;)for(var u=0,m=e[o],d=r?r(m):m;(u=i(l,d,u,n))>-1;)l!==t&&FR.call(l,u,1),FR.call(t,u,1);return t}var IR=d3;function g3(t,e){return t&&t.length&&e&&e.length?IR(t,e):t}var CR=g3;var h3=za(CR),pr=h3;var y3=Math.floor,T3=Math.random;function x3(t,e){return t+y3(T3()*(e-t+1))}var OR=x3;var S3=Math.ceil,v3=Math.max;function b3(t,e,r,n){for(var i=-1,o=v3(S3((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var NR=b3;function w3(t){return function(e,r,n){return n&&typeof n!="number"&&Oo(e,r,n)&&(r=n=void 0),e=Ha(e),r===void 0?(r=e,e=0):r=Ha(r),n=n===void 0?e<r?1:-1:Ha(n),NR(e,r,n,t)}}var UR=w3;var E3=UR(),GT=E3;function _3(t,e,r){return(r?Oo(t,e,r):e===void 0)?e=1:e=wp(e),MR(An(t),e)}var KT=_3;function R3(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=OR(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var Zp=R3;function k3(t){return Zp(qi(t))}var HR=k3;function A3(t){return Zp(wR(t))}var BR=A3;function P3(t){var e=Je(t)?HR:BR;return e(t)}var QT=P3;var D3=za(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Oo(t,e[0],e[1])?e=[]:r>2&&Oo(e[0],e[1],e[2])&&(e=[e[0]]),DR(t,ts(e,1),[])}),YT=D3;function M3(t,e){return t&&t.length?RR(t,as(e,2)):0}var Xp=M3;var L3=1/0,F3=Ji&&1/is(new Ji([,-0]))[1]==L3?function(t){return new Ji(t)}:Ap,VR=F3;var I3=200;function C3(t,e,r){var n=-1,i=q_,o=t.length,s=!0,l=[],u=l;if(r)s=!1,i=TR;else if(o>=I3){var m=e?null:VR(t);if(m)return is(m);s=!1,i=jp,u=new $p}else u=e?[]:l;e:for(;++n<o;){var d=t[n],g=e?e(d):d;if(d=r||d!==0?d:0,s&&g===g){for(var y=u.length;y--;)if(u[y]===g)continue e;e&&u.push(g),l.push(d)}else i(u,g,r)||(u!==l&&u.push(g),l.push(d))}return l}var Jp=C3;function O3(t){return t&&t.length?Jp(t):[]}var Vo=O3;function N3(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?Jp(t,void 0,e):[]}var Wc=N3;var U3=Math.max;function H3(t){if(!(t&&t.length))return[];var e=0;return t=Hp(t,function(r){if(yR(r))return e=U3(r.length,e),!0}),Op(e,function(r){return an(t,Qp(r))})}var WR=H3;var B3=za(WR),Mt=B3;var em=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0}}};var $c=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var er=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{pr(this.listeners,e)}}}};var tm={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var jc=class{constructor(){this.notifier=new er;this.mocks={...tm};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(W3(n,r))return Uo(i,e)??Uo(this.mocks,e)}return Uo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function W3(t,e){return t.languageId===e.languageId}var rm={hideInferenceWarning:!1,tutorialProgress:{}};var zc=class{constructor(){this.data={...rm}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var qc=class{async showMessage(e,r,n,...i){}};var nm=class{constructor(){this.configuration=new jc;this.messages=new qc;this.keyValueStore=new zc;this.clipboard=new $c;this.capabilities=new em;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=ss;this.onDidCloseTextDocument=ss;this.onDidChangeActiveTextEditor=ss;this.onDidChangeVisibleTextEditors=ss;this.onDidChangeTextEditorSelection=ss;this.onDidChangeTextEditorVisibleRanges=ss}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>pr(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function ss(){return{dispose(){}}}var _e=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new Y(this,this)}concise(){return`${this.line}:${this.character}`}conciseOneBased(){return`${this.line+1}:${this.character+1}`}toString(){return this.concise()}};function $R(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var Y=class t{constructor(...e){let[r,n]=e.length===2?e:[new _e(e[0],e[1]),new _e(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof _e?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new st(this.end,this.start):new st(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}-${this.end.conciseOneBased()}`}toString(){return`${this.start.concise()}-${this.end.concise()}`}};function $3(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function j3(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function jR(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var im=jR($3),om=jR(j3);function ZT(t,e){return e.lastIndex=0,t.matchAll(e)}function sn(t,e,r){return Array.from(ZT(t,e),r)}function Wo(t,e){return t.lastIndex=0,t.test(e)}function zR(t,e){return t.lastIndex=0,e.match(t)}function Gc(t,e){return sn(t,e,r=>({index:r.index,text:r[0]}))}var cs=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var am=class extends cs{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function $o(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function pt(t,e,r,...n){return t.showMessage("error",e,r,...n)}var de=(n=>(n[n.supported=0]="supported",n[n.unsupported=1]="unsupported",n[n.notApplicable=2]="notApplicable",n))(de||{});var{supported:ne,unsupported:z3,notApplicable:J}=de,XT={list:ne,disqualifyDelimiter:ne,switchStatementSubject:ne,ifStatement:ne,statement:ne,"statement.class":ne,"statement.iteration.document":ne,"statement.iteration.block":ne,class:ne,"class.iteration.document":ne,className:ne,"className.iteration.document":ne,"collectionItem.unenclosed":ne,"collectionItem.unenclosed.iteration":ne,namedFunction:ne,functionName:ne,"functionName.iteration.document":ne,"namedFunction.iteration.document":ne,functionCall:ne,functionCallee:ne,"argument.actual":ne,"argument.actual.iteration":ne,"argument.actual.method":ne,"argument.actual.method.iteration":ne,"argument.formal":ne,"argument.formal.iteration":ne,"argumentList.actual.empty":ne,"argumentList.actual.singleLine":ne,"argumentList.actual.multiLine":ne,"argumentList.actual.method.empty":ne,"argumentList.actual.method.singleLine":ne,"argumentList.actual.method.multiLine":ne,"argumentList.formal.empty":ne,"argumentList.formal.singleLine":ne,"argumentList.formal.multiLine":ne,"branch.if":ne,"branch.if.iteration":ne,"branch.switchCase":ne,"branch.switchCase.iteration":ne,"branch.ternary":ne,"branch.loop":ne,"comment.line":ne,"comment.block":ne,"string.singleLine":ne,"textFragment.comment.line":ne,"textFragment.comment.block":ne,"textFragment.string.singleLine":ne,"condition.if":ne,"condition.while":ne,"condition.doWhile":ne,"condition.for":ne,"condition.ternary":ne,"condition.switchCase":ne,"condition.switchCase.iteration":ne,"name.assignment":ne,"name.variable":ne,"name.function":ne,"name.class":ne,"name.field":ne,"name.iteration.block":ne,"name.iteration.document":ne,"name.argument.formal":ne,"name.argument.formal.iteration":ne,"value.assignment":ne,"value.variable":ne,"value.return":ne,"type.variable":ne,"type.argument.formal":ne,"type.argument.formal.iteration":ne,"type.field":ne,"type.field.iteration":ne,"type.enum":ne,"type.cast":ne,"type.class":ne,"type.return":ne,"interior.class":ne,"interior.function":ne,"interior.if":ne,"interior.switchCase":ne,"interior.ternary":ne,"interior.loop":ne,fieldAccess:z3,element:J,tags:J,startTag:J,endTag:J,"interior.element":J,"textFragment.element":J,"interior.resource":J,"type.resource":J,"type.resource.iteration":J,"name.resource":J,"name.resource.iteration":J,"value.resource":J,"value.resource.iteration":J,map:J,"key.mapPair":J,"key.mapPair.iteration":J,"value.mapPair":J,"value.mapPair.iteration":J,"name.argument.actual":J,"name.argument.actual.iteration":J,"value.argument.actual":J,"value.argument.actual.iteration":J,"string.multiLine":J,"textFragment.string.multiLine":J,section:J,"section.iteration.document":J,"section.iteration.parent":J,"name.assignment.pattern":J,"name.variable.pattern":J,"value.variable.pattern":J,command:J,"interior.command":J,"type.alias":J,"value.typeAlias":J,notebookCell:J,"interior.cell":J,"class.iteration.block":J,"className.iteration.block":J,"functionName.iteration.block":J,"namedFunction.iteration.block":J,"branch.try":J,"branch.try.iteration":J,"interior.try":J,"key.attribute":J,"type.interface":J,"value.attribute":J,"value.yield":J,"value.field":J,environment:J,pairDelimiter:J,regularExpression:J},q3={...XT,attribute:J,"argument.formal.lambda.iteration":J,"argument.formal.lambda":J,"argumentList.formal.lambda.empty":J,"argumentList.formal.lambda.multiLine":J,"argumentList.formal.lambda.singleLine":J,"interior.lambda":J,"value.return.lambda":J,anonymousFunction:J,"argument.actual.constructor.iteration":J,"argument.actual.constructor":J,"argument.formal.constructor.iteration":J,"argument.formal.constructor":J,"argumentList.actual.constructor.empty":J,"argumentList.actual.constructor.multiLine":J,"argumentList.actual.constructor.singleLine":J,"argumentList.formal.constructor.empty":J,"argumentList.formal.constructor.multiLine":J,"argumentList.formal.constructor.singleLine":J,"functionCall.constructor":J,"functionCallee.constructor":J,"functionName.constructor":J,"name.argument.formal.constructor.iteration":J,"name.argument.formal.constructor":J,"name.constructor":J,"namedFunction.constructor":J,"type.argument.formal.constructor.iteration":J,"type.argument.formal.constructor":J,"value.argument.formal.constructor.iteration":J,"value.argument.formal.constructor":J,"argument.formal.method.iteration":J,"argument.formal.method":J,"argumentList.formal.method.empty":J,"argumentList.formal.method.multiLine":J,"argumentList.formal.method.singleLine":J,"functionName.method.iteration.class":J,"functionName.method":J,"name.argument.formal.method.iteration":J,"name.argument.formal.method":J,"name.method":J,"namedFunction.method.iteration.class":J,"namedFunction.method":J,"type.argument.formal.method.iteration":J,"type.argument.formal.method":J,"value.argument.formal.method.iteration":J,"value.argument.formal.method":J,"name.foreach":J,"type.foreach":J,"value.foreach":J,"value.argument.formal":J,"value.argument.formal.iteration":J,"type.typeArgument":J,"type.typeArgument.iteration":J};var{supported:vae,unsupported:bae,notApplicable:wae}=de;var{supported:ge}=de,G3={...XT,attribute:ge,anonymousFunction:ge,"branch.try":ge,"branch.try.iteration":ge,"argument.actual.constructor":ge,"argument.actual.constructor.iteration":ge,"argument.formal.method":ge,"argument.formal.method.iteration":ge,"argument.formal.constructor":ge,"argument.formal.constructor.iteration":ge,"argument.formal.lambda":ge,"argument.formal.lambda.iteration":ge,"argumentList.actual.constructor.empty":ge,"argumentList.actual.constructor.singleLine":ge,"argumentList.actual.constructor.multiLine":ge,"argumentList.formal.constructor.empty":ge,"argumentList.formal.constructor.singleLine":ge,"argumentList.formal.constructor.multiLine":ge,"argumentList.formal.lambda.empty":ge,"argumentList.formal.lambda.singleLine":ge,"argumentList.formal.lambda.multiLine":ge,"argumentList.formal.method.empty":ge,"argumentList.formal.method.singleLine":ge,"argumentList.formal.method.multiLine":ge,"functionCall.constructor":ge,"functionCallee.constructor":ge,"functionName.constructor":ge,"functionName.method":ge,"functionName.method.iteration.class":ge,"namedFunction.method":ge,"namedFunction.method.iteration.class":ge,"namedFunction.constructor":ge,"name.argument.formal.method":ge,"name.argument.formal.method.iteration":ge,"name.argument.formal.constructor":ge,"name.argument.formal.constructor.iteration":ge,"name.constructor":ge,"name.foreach":ge,"name.method":ge,"value.argument.formal":ge,"value.argument.formal.iteration":ge,"value.argument.formal.method":ge,"value.argument.formal.method.iteration":ge,"value.argument.formal.constructor":ge,"value.argument.formal.constructor.iteration":ge,"value.foreach":ge,"value.return.lambda":ge,"value.field":ge,"type.argument.formal.method":ge,"type.argument.formal.method.iteration":ge,"type.argument.formal.constructor":ge,"type.argument.formal.constructor.iteration":ge,"type.foreach":ge,"type.typeArgument":ge,"type.typeArgument.iteration":ge,"interior.lambda":ge,"interior.try":ge};var{supported:Pae,unsupported:Dae,notApplicable:Mae}=de;var{supported:mt,notApplicable:I}=de,JT={"comment.block":mt,"string.singleLine":mt,disqualifyDelimiter:mt,map:mt,functionCall:mt,functionCallee:mt,"argument.actual":mt,"argument.actual.iteration":mt,"argumentList.actual.empty":mt,"argumentList.actual.singleLine":mt,"argumentList.actual.multiLine":mt,"name.iteration.document":mt,"name.iteration.block":mt,"textFragment.comment.block":mt,"textFragment.string.singleLine":mt,"key.mapPair":mt,"key.mapPair.iteration":mt,"value.mapPair":mt,"value.mapPair.iteration":mt,"collectionItem.unenclosed":mt,"collectionItem.unenclosed.iteration":mt,statement:mt,"statement.iteration.document":mt,anonymousFunction:I,"argument.actual.constructor.iteration":I,"argument.actual.constructor":I,"argument.actual.method.iteration":I,"argument.actual.method":I,"argument.formal.constructor.iteration":I,"argument.formal.constructor":I,"argument.formal.iteration":I,"argument.formal.method.iteration":I,"argument.formal.method":I,"argument.formal":I,"argument.formal.lambda":I,"argument.formal.lambda.iteration":I,"argumentList.actual.method.empty":I,"argumentList.actual.method.singleLine":I,"argumentList.actual.method.multiLine":I,"argumentList.actual.constructor.empty":I,"argumentList.actual.constructor.singleLine":I,"argumentList.actual.constructor.multiLine":I,"argumentList.formal.empty":I,"argumentList.formal.singleLine":I,"argumentList.formal.multiLine":I,"argumentList.formal.lambda.empty":I,"argumentList.formal.lambda.singleLine":I,"argumentList.formal.lambda.multiLine":I,"argumentList.formal.method.empty":I,"argumentList.formal.method.singleLine":I,"argumentList.formal.method.multiLine":I,"argumentList.formal.constructor.empty":I,"argumentList.formal.constructor.singleLine":I,"argumentList.formal.constructor.multiLine":I,attribute:I,"branch.if.iteration":I,"branch.if":I,"branch.loop":I,"branch.switchCase.iteration":I,"branch.switchCase":I,"branch.ternary":I,"branch.try.iteration":I,"branch.try":I,"class.iteration.block":I,"class.iteration.document":I,class:I,"className.iteration.block":I,"className.iteration.document":I,className:I,command:I,"comment.line":I,"condition.doWhile":I,"condition.for":I,"condition.if":I,"condition.switchCase.iteration":I,"condition.switchCase":I,"condition.ternary":I,"condition.while":I,element:I,endTag:I,environment:I,fieldAccess:I,"functionCall.constructor":I,"functionCallee.constructor":I,"functionName.constructor":I,"functionName.iteration.block":I,"functionName.iteration.document":I,"functionName.method.iteration.class":I,"functionName.method":I,functionName:I,ifStatement:I,"interior.cell":I,"interior.class":I,"interior.command":I,"interior.element":I,"interior.function":I,"interior.if":I,"interior.lambda":I,"interior.loop":I,"interior.resource":I,"interior.switchCase":I,"interior.ternary":I,"interior.try":I,"key.attribute":I,list:I,"name.argument.actual.iteration":I,"name.argument.actual":I,"name.argument.formal.constructor.iteration":I,"name.argument.formal.constructor":I,"name.argument.formal.iteration":I,"name.argument.formal.method.iteration":I,"name.argument.formal.method":I,"name.argument.formal":I,"name.assignment.pattern":I,"name.assignment":I,"name.class":I,"name.constructor":I,"name.field":I,"name.foreach":I,"name.function":I,"name.method":I,"name.resource.iteration":I,"name.resource":I,"name.variable.pattern":I,"name.variable":I,"namedFunction.constructor":I,"namedFunction.iteration.block":I,"namedFunction.iteration.document":I,"namedFunction.method.iteration.class":I,"namedFunction.method":I,namedFunction:I,notebookCell:I,pairDelimiter:I,regularExpression:I,"section.iteration.document":I,"section.iteration.parent":I,section:I,startTag:I,"statement.iteration.block":I,"statement.class":I,"string.multiLine":I,switchStatementSubject:I,tags:I,"textFragment.comment.line":I,"textFragment.element":I,"textFragment.string.multiLine":I,"type.alias":I,"type.argument.formal.constructor.iteration":I,"type.argument.formal.constructor":I,"type.argument.formal.iteration":I,"type.argument.formal.method.iteration":I,"type.argument.formal.method":I,"type.argument.formal":I,"type.cast":I,"type.class":I,"type.enum":I,"type.field.iteration":I,"type.field":I,"type.foreach":I,"type.interface":I,"type.resource":I,"type.resource.iteration":I,"type.return":I,"type.typeArgument.iteration":I,"type.typeArgument":I,"type.variable":I,"value.argument.actual.iteration":I,"value.argument.actual":I,"value.argument.formal.constructor.iteration":I,"value.argument.formal.constructor":I,"value.argument.formal.iteration":I,"value.argument.formal.method.iteration":I,"value.argument.formal.method":I,"value.argument.formal":I,"value.assignment":I,"value.attribute":I,"value.field":I,"value.foreach":I,"value.resource.iteration":I,"value.resource":I,"value.return.lambda":I,"value.return":I,"value.typeAlias":I,"value.variable.pattern":I,"value.variable":I,"value.yield":I};var{supported:Oae,unsupported:Nae,notApplicable:Uae}=de;var{supported:Vae,unsupported:Wae,notApplicable:$ae}=de;var{supported:qae,notApplicable:Gae}=de;var{supported:Yae,unsupported:Zae,notApplicable:Xae}=de;var{supported:H,notApplicable:Me}=de,ex={list:H,map:H,regularExpression:H,switchStatementSubject:H,fieldAccess:H,disqualifyDelimiter:H,pairDelimiter:H,"collectionItem.unenclosed":H,"collectionItem.unenclosed.iteration":H,"textFragment.string.singleLine":H,"textFragment.string.multiLine":H,"textFragment.comment.line":H,"textFragment.comment.block":H,ifStatement:H,statement:H,"statement.iteration.document":H,"statement.iteration.block":H,"statement.class":H,class:H,"class.iteration.document":H,className:H,"className.iteration.document":H,anonymousFunction:H,namedFunction:H,"namedFunction.iteration.document":H,"namedFunction.method":H,"namedFunction.method.iteration.class":H,"namedFunction.constructor":H,functionName:H,"functionName.iteration.document":H,"functionName.method":H,"functionName.method.iteration.class":H,"functionName.constructor":H,functionCall:H,"functionCall.constructor":H,functionCallee:H,"functionCallee.constructor":H,"argument.actual":H,"argument.actual.iteration":H,"argument.actual.method":H,"argument.actual.method.iteration":H,"argument.actual.constructor":H,"argument.actual.constructor.iteration":H,"argument.formal":H,"argument.formal.iteration":H,"argument.formal.method":H,"argument.formal.method.iteration":H,"argument.formal.constructor":H,"argument.formal.constructor.iteration":H,"argument.formal.lambda":H,"argument.formal.lambda.iteration":H,"argumentList.actual.empty":H,"argumentList.actual.singleLine":H,"argumentList.actual.multiLine":H,"argumentList.actual.method.empty":H,"argumentList.actual.method.singleLine":H,"argumentList.actual.method.multiLine":H,"argumentList.actual.constructor.empty":H,"argumentList.actual.constructor.singleLine":H,"argumentList.actual.constructor.multiLine":H,"argumentList.formal.empty":H,"argumentList.formal.singleLine":H,"argumentList.formal.multiLine":H,"argumentList.formal.lambda.empty":H,"argumentList.formal.lambda.singleLine":H,"argumentList.formal.lambda.multiLine":H,"argumentList.formal.method.empty":H,"argumentList.formal.method.singleLine":H,"argumentList.formal.method.multiLine":H,"argumentList.formal.constructor.empty":H,"argumentList.formal.constructor.singleLine":H,"argumentList.formal.constructor.multiLine":H,"comment.line":H,"comment.block":H,"string.singleLine":H,"string.multiLine":H,"branch.if":H,"branch.if.iteration":H,"branch.try":H,"branch.try.iteration":H,"branch.switchCase":H,"branch.switchCase.iteration":H,"branch.ternary":H,"branch.loop":H,"condition.if":H,"condition.while":H,"condition.doWhile":H,"condition.for":H,"condition.ternary":H,"condition.switchCase":H,"condition.switchCase.iteration":H,"name.argument.formal":H,"name.argument.formal.iteration":H,"name.argument.formal.method":H,"name.argument.formal.method.iteration":H,"name.argument.formal.constructor":H,"name.argument.formal.constructor.iteration":H,"name.foreach":H,"name.assignment":H,"name.assignment.pattern":H,"name.variable":H,"name.variable.pattern":H,"name.function":H,"name.method":H,"name.constructor":H,"name.class":H,"name.field":H,"name.iteration.document":H,"name.iteration.block":H,"key.mapPair":H,"key.mapPair.iteration":H,"value.argument.formal":H,"value.argument.formal.iteration":H,"value.argument.formal.method":H,"value.argument.formal.method.iteration":H,"value.argument.formal.constructor":H,"value.argument.formal.constructor.iteration":H,"value.mapPair":H,"value.mapPair.iteration":H,"value.assignment":H,"value.variable":H,"value.variable.pattern":H,"value.foreach":H,"value.return":H,"value.return.lambda":H,"value.field":H,"value.yield":H,"type.class":H,"interior.class":H,"interior.function":H,"interior.if":H,"interior.lambda":H,"interior.loop":H,"interior.switchCase":H,"interior.ternary":H,"interior.try":H,"class.iteration.block":Me,"className.iteration.block":Me,section:Me,"section.iteration.document":Me,"section.iteration.parent":Me,command:Me,"interior.command":Me,notebookCell:Me,"interior.cell":Me,"interior.resource":Me,"name.resource.iteration":Me,"name.resource":Me,"type.resource.iteration":Me,"type.resource":Me,"value.resource.iteration":Me,"value.resource":Me,"name.argument.actual.iteration":Me,"name.argument.actual":Me,"value.argument.actual.iteration":Me,"value.argument.actual":Me,"functionName.iteration.block":Me,"namedFunction.iteration.block":Me,environment:Me},tx={element:H,tags:H,startTag:H,endTag:H,attribute:H,"key.attribute":H,"value.attribute":H,"interior.element":H,"textFragment.element":H},rx={...ex,...tx,"type.argument.formal":Me,"type.argument.formal.iteration":Me,"type.argument.formal.method":Me,"type.argument.formal.method.iteration":Me,"type.argument.formal.constructor":Me,"type.argument.formal.constructor.iteration":Me,"type.alias":Me,"type.cast":Me,"type.field":Me,"type.field.iteration":Me,"type.foreach":Me,"type.interface":Me,"type.enum":Me,"type.return":Me,"type.variable":Me,"type.typeArgument":Me,"type.typeArgument.iteration":Me,"value.typeAlias":Me};var K3={...rx};var{supported:cn,notApplicable:L}=de,Kc={list:cn,map:cn,"string.singleLine":cn,"key.mapPair.iteration":cn,"key.mapPair":cn,"value.mapPair.iteration":cn,"value.mapPair":cn,"comment.block":cn,"comment.line":cn,"textFragment.comment.block":cn,"textFragment.comment.line":cn,"textFragment.string.singleLine":cn,anonymousFunction:L,"argument.actual":L,"argument.actual.constructor":L,"argument.actual.constructor.iteration":L,"argument.actual.iteration":L,"argument.actual.method":L,"argument.actual.method.iteration":L,"argument.formal":L,"argument.formal.constructor":L,"argument.formal.constructor.iteration":L,"argument.formal.iteration":L,"argument.formal.method":L,"argument.formal.method.iteration":L,"argument.formal.lambda":L,"argument.formal.lambda.iteration":L,"argumentList.actual.empty":L,"argumentList.actual.singleLine":L,"argumentList.actual.multiLine":L,"argumentList.actual.method.empty":L,"argumentList.actual.method.singleLine":L,"argumentList.actual.method.multiLine":L,"argumentList.actual.constructor.empty":L,"argumentList.actual.constructor.singleLine":L,"argumentList.actual.constructor.multiLine":L,"argumentList.formal.empty":L,"argumentList.formal.singleLine":L,"argumentList.formal.multiLine":L,"argumentList.formal.lambda.empty":L,"argumentList.formal.lambda.singleLine":L,"argumentList.formal.lambda.multiLine":L,"argumentList.formal.method.empty":L,"argumentList.formal.method.singleLine":L,"argumentList.formal.method.multiLine":L,"argumentList.formal.constructor.empty":L,"argumentList.formal.constructor.singleLine":L,"argumentList.formal.constructor.multiLine":L,attribute:L,"branch.if":L,"branch.if.iteration":L,"branch.loop":L,"branch.switchCase":L,"branch.switchCase.iteration":L,"branch.ternary":L,"branch.try":L,"branch.try.iteration":L,class:L,"class.iteration.block":L,"class.iteration.document":L,className:L,"className.iteration.block":L,"className.iteration.document":L,"collectionItem.unenclosed":L,"collectionItem.unenclosed.iteration":L,command:L,"condition.doWhile":L,"condition.for":L,"condition.if":L,"condition.switchCase":L,"condition.switchCase.iteration":L,"condition.ternary":L,"condition.while":L,disqualifyDelimiter:L,element:L,endTag:L,environment:L,fieldAccess:L,functionCall:L,"functionCall.constructor":L,functionCallee:L,"functionCallee.constructor":L,functionName:L,"functionName.constructor":L,"functionName.iteration.block":L,"functionName.iteration.document":L,"functionName.method":L,"functionName.method.iteration.class":L,ifStatement:L,"interior.cell":L,"interior.class":L,"interior.command":L,"interior.element":L,"interior.function":L,"interior.if":L,"interior.lambda":L,"interior.loop":L,"interior.resource":L,"interior.switchCase":L,"interior.ternary":L,"interior.try":L,"key.attribute":L,"name.argument.actual":L,"name.argument.actual.iteration":L,"name.argument.formal":L,"name.argument.formal.constructor":L,"name.argument.formal.constructor.iteration":L,"name.argument.formal.iteration":L,"name.argument.formal.method":L,"name.argument.formal.method.iteration":L,"name.assignment":L,"name.assignment.pattern":L,"name.class":L,"name.constructor":L,"name.field":L,"name.foreach":L,"name.function":L,"name.iteration.block":L,"name.iteration.document":L,"name.method":L,"name.resource":L,"name.resource.iteration":L,"name.variable":L,"name.variable.pattern":L,namedFunction:L,"namedFunction.constructor":L,"namedFunction.iteration.block":L,"namedFunction.iteration.document":L,"namedFunction.method":L,"namedFunction.method.iteration.class":L,notebookCell:L,pairDelimiter:L,regularExpression:L,section:L,"section.iteration.document":L,"section.iteration.parent":L,startTag:L,statement:L,"statement.class":L,"statement.iteration.block":L,"statement.iteration.document":L,"string.multiLine":L,switchStatementSubject:L,tags:L,"textFragment.element":L,"textFragment.string.multiLine":L,"type.alias":L,"type.argument.formal":L,"type.argument.formal.constructor":L,"type.argument.formal.constructor.iteration":L,"type.argument.formal.iteration":L,"type.argument.formal.method":L,"type.argument.formal.method.iteration":L,"type.cast":L,"type.class":L,"type.enum":L,"type.field":L,"type.field.iteration":L,"type.foreach":L,"type.interface":L,"type.resource":L,"type.resource.iteration":L,"type.return":L,"type.typeArgument":L,"type.typeArgument.iteration":L,"type.variable":L,"value.argument.actual":L,"value.argument.actual.iteration":L,"value.argument.formal":L,"value.argument.formal.constructor":L,"value.argument.formal.constructor.iteration":L,"value.argument.formal.iteration":L,"value.argument.formal.method":L,"value.argument.formal.method.iteration":L,"value.assignment":L,"value.attribute":L,"value.field":L,"value.foreach":L,"value.resource":L,"value.resource.iteration":L,"value.return":L,"value.return.lambda":L,"value.typeAlias":L,"value.variable":L,"value.variable.pattern":L,"value.yield":L};var{supported:cse,unsupported:lse,notApplicable:use}=de,Q3={...Kc};var{supported:dse,unsupported:gse,notApplicable:hse}=de,Y3={...Kc};var{supported:xse,unsupported:Sse,notApplicable:vse}=de;var{supported:Ese,notApplicable:_se}=de;var{supported:Ase,notApplicable:Pse}=de;var{supported:Lse,unsupported:Fse,notApplicable:Ise}=de;var{supported:Nse,notApplicable:Use}=de;var{supported:Vse,unsupported:Wse,notApplicable:$se}=de;var{supported:qse,unsupported:Gse,notApplicable:Kse}=de;var{supported:Zse,unsupported:Xse,notApplicable:Jse}=de;var{supported:rce,unsupported:nce,notApplicable:ice}=de;var{supported:sce,notApplicable:cce}=de;var{supported:_t}=de,Z3={...JT,"comment.line":_t,namedFunction:_t,"namedFunction.iteration.block":_t,"namedFunction.iteration.document":_t,functionName:_t,"functionName.iteration.block":_t,"functionName.iteration.document":_t,"name.argument.formal":_t,"name.argument.formal.iteration":_t,"name.function":_t,"value.argument.formal":_t,"value.argument.formal.iteration":_t,"value.return":_t,"textFragment.comment.line":_t,ifStatement:_t,"branch.if":_t,"branch.if.iteration":_t,"condition.if":_t,"interior.if":_t,"interior.function":_t};var{supported:dce,unsupported:gce,notApplicable:hce}=de;var{supported:jt,notApplicable:zn}=de,nx={...ex,"type.argument.formal":jt,"type.argument.formal.iteration":jt,"type.argument.formal.method":jt,"type.argument.formal.method.iteration":jt,"type.argument.formal.constructor":jt,"type.argument.formal.constructor.iteration":jt,"type.alias":jt,"type.cast":jt,"type.field":jt,"type.field.iteration":jt,"type.interface":jt,"type.enum":jt,"type.return":jt,"type.variable":jt,"type.typeArgument":jt,"type.typeArgument.iteration":jt,"value.typeAlias":jt,element:zn,tags:zn,startTag:zn,endTag:zn,attribute:zn,"key.attribute":zn,"value.attribute":zn,"interior.element":zn,"textFragment.element":zn,"type.foreach":zn};var X3={...nx,...tx};var{supported:_ce,notApplicable:Rce}=de;var{supported:Pce,unsupported:Dce,notApplicable:Mce}=de;var ls=["that","source","instanceReference","keyboard"];var st=class extends Y{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new _e(e[0],e[1]),new _e(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}->${this.end.conciseOneBased()}`}toString(){return this.concise()}};function GR({line:t,character:e}){return new _e(t,e)}function sm({start:t,end:e}){return new Y(GR(t),GR(e))}function Vr({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function mr({start:t,end:e}){return{type:"character",start:t,end:e}}function Qc(t){return{start:cm(t.start),end:cm(t.end)}}function KR(t){return{anchor:cm(t.anchor),active:cm(t.active)}}function cm({line:t,character:e}){return{line:t,character:e}}function mk(t){return typeof t>"u"||t===null}function J3(t){return typeof t=="object"&&t!==null}function ez(t){return Array.isArray(t)?t:mk(t)?[]:[t]}function tz(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function rz(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function nz(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var iz=mk,oz=J3,az=ez,sz=rz,cz=nz,lz=tz,Lt={isNothing:iz,isObject:oz,toArray:az,repeat:sz,isNegativeZero:cz,extend:lz};function fk(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function Zc(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=fk(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Zc.prototype=Object.create(Error.prototype);Zc.prototype.constructor=Zc;Zc.prototype.toString=function(e){return this.name+": "+fk(this,e)};var Er=Zc;function ix(t,e,r,n,i){var o="",s="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function ox(t,e){return Lt.repeat(" ",e-t.length)+t}function uz(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",u,m,d=Math.min(t.line+e.linesAfter,i.length).toString().length,g=e.maxLength-(e.indent+d+3);for(u=1;u<=e.linesBefore&&!(s-u<0);u++)m=ix(t.buffer,n[s-u],i[s-u],t.position-(n[s]-n[s-u]),g),l=Lt.repeat(" ",e.indent)+ox((t.line-u+1).toString(),d)+" | "+m.str+`
`+l;for(m=ix(t.buffer,n[s],i[s],t.position,g),l+=Lt.repeat(" ",e.indent)+ox((t.line+1).toString(),d)+" | "+m.str+`
`,l+=Lt.repeat("-",e.indent+d+3+m.pos)+`^
`,u=1;u<=e.linesAfter&&!(s+u>=i.length);u++)m=ix(t.buffer,n[s+u],i[s+u],t.position-(n[s]-n[s+u]),g),l+=Lt.repeat(" ",e.indent)+ox((t.line+u+1).toString(),d)+" | "+m.str+`
`;return l.replace(/\n$/,"")}var pz=uz,mz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],fz=["scalar","sequence","mapping"];function dz(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function gz(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(mz.indexOf(r)===-1)throw new Er('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=dz(e.styleAliases||null),fz.indexOf(this.kind)===-1)throw new Er('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var zt=gz;function ZR(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function hz(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function sx(t){return this.extend(t)}sx.prototype.extend=function(e){var r=[],n=[];if(e instanceof zt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Er("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof zt))throw new Er("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Er("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Er("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof zt))throw new Er("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(sx.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=ZR(i,"implicit"),i.compiledExplicit=ZR(i,"explicit"),i.compiledTypeMap=hz(i.compiledImplicit,i.compiledExplicit),i};var yz=sx,Tz=new zt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),xz=new zt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Sz=new zt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),vz=new yz({explicit:[Tz,xz,Sz]});function bz(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function wz(){return null}function Ez(t){return t===null}var _z=new zt("tag:yaml.org,2002:null",{kind:"scalar",resolve:bz,construct:wz,predicate:Ez,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Rz(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function kz(t){return t==="true"||t==="True"||t==="TRUE"}function Az(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Pz=new zt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Rz,construct:kz,predicate:Az,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Dz(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Mz(t){return 48<=t&&t<=55}function Lz(t){return 48<=t&&t<=57}function Fz(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Dz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Mz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Lz(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function Iz(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function Cz(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Lt.isNegativeZero(t)}var Oz=new zt("tag:yaml.org,2002:int",{kind:"scalar",resolve:Fz,construct:Iz,predicate:Cz,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Nz=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Uz(t){return!(t===null||!Nz.test(t)||t[t.length-1]==="_")}function Hz(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var Bz=/^[-+]?[0-9]+e/;function Vz(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Lt.isNegativeZero(t))return"-0.0";return r=t.toString(10),Bz.test(r)?r.replace("e",".e"):r}function Wz(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Lt.isNegativeZero(t))}var $z=new zt("tag:yaml.org,2002:float",{kind:"scalar",resolve:Uz,construct:Hz,predicate:Wz,represent:Vz,defaultStyle:"lowercase"}),jz=vz.extend({implicit:[_z,Pz,Oz,$z]}),zz=jz,dk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),gk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function qz(t){return t===null?!1:dk.exec(t)!==null||gk.exec(t)!==null}function Gz(t){var e,r,n,i,o,s,l,u=0,m=null,d,g,y;if(e=dk.exec(t),e===null&&(e=gk.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(d=+e[10],g=+(e[11]||0),m=(d*60+g)*6e4,e[9]==="-"&&(m=-m)),y=new Date(Date.UTC(r,n,i,o,s,l,u)),m&&y.setTime(y.getTime()-m),y}function Kz(t){return t.toISOString()}var Qz=new zt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:qz,construct:Gz,instanceOf:Date,represent:Kz});function Yz(t){return t==="<<"||t===null}var Zz=new zt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Yz}),mx=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Xz(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=mx;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function Jz(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=mx,s=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}function eq(t){var e="",r=0,n,i,o=t.length,s=mx;for(n=0;n<o;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function tq(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var rq=new zt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Xz,construct:Jz,predicate:tq,represent:eq}),nq=Object.prototype.hasOwnProperty,iq=Object.prototype.toString;function oq(t){if(t===null)return!0;var e=[],r,n,i,o,s,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],s=!1,iq.call(i)!=="[object Object]")return!1;for(o in i)if(nq.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function aq(t){return t!==null?t:[]}var sq=new zt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:oq,construct:aq}),cq=Object.prototype.toString;function lq(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],cq.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function uq(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var pq=new zt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:lq,construct:uq}),mq=Object.prototype.hasOwnProperty;function fq(t){if(t===null)return!0;var e,r=t;for(e in r)if(mq.call(r,e)&&r[e]!==null)return!1;return!0}function dq(t){return t!==null?t:{}}var gq=new zt("tag:yaml.org,2002:set",{kind:"mapping",resolve:fq,construct:dq}),fx=zz.extend({implicit:[Qz,Zz],explicit:[rq,sq,pq,gq]}),to=Object.prototype.hasOwnProperty,lm=1,hk=2,yk=3,um=4,ax=1,hq=2,XR=3,yq=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Tq=/[\x85\u2028\u2029]/,xq=/[,\[\]\{\}]/,Tk=/^(?:!|!!|![a-z\-]+!)$/i,xk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function JR(t){return Object.prototype.toString.call(t)}function qn(t){return t===10||t===13}function zo(t){return t===9||t===32}function _r(t){return t===9||t===32||t===10||t===13}function ps(t){return t===44||t===91||t===93||t===123||t===125}function Sq(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function vq(t){return t===120?2:t===117?4:t===85?8:0}function bq(t){return 48<=t&&t<=57?t-48:-1}function ek(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function wq(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var Sk=new Array(256),vk=new Array(256);for(jo=0;jo<256;jo++)Sk[jo]=ek(jo)?1:0,vk[jo]=ek(jo);var jo;function Eq(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||fx,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function bk(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=pz(r),new Er(e,r)}function he(t,e){throw bk(t,e)}function pm(t,e){t.onWarning&&t.onWarning.call(null,bk(t,e))}var tk={YAML:function(e,r,n){var i,o,s;e.version!==null&&he(e,"duplication of %YAML directive"),n.length!==1&&he(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&he(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&he(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&pm(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&he(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],Tk.test(i)||he(e,"ill-formed tag handle (first argument) of the TAG directive"),to.call(e.tagMap,i)&&he(e,'there is a previously declared suffix for "'+i+'" tag handle'),xk.test(o)||he(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{he(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function eo(t,e,r,n){var i,o,s,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)s=l.charCodeAt(i),s===9||32<=s&&s<=1114111||he(t,"expected valid JSON character");else yq.test(l)&&he(t,"the stream contains non-printable characters");t.result+=l}}function rk(t,e,r,n){var i,o,s,l;for(Lt.isObject(r)||he(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,l=i.length;s<l;s+=1)o=i[s],to.call(e,o)||(e[o]=r[o],n[o]=!0)}function ms(t,e,r,n,i,o,s,l,u){var m,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),m=0,d=i.length;m<d;m+=1)Array.isArray(i[m])&&he(t,"nested arrays are not supported inside keys"),typeof i=="object"&&JR(i[m])==="[object Object]"&&(i[m]="[object Object]");if(typeof i=="object"&&JR(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(m=0,d=o.length;m<d;m+=1)rk(t,e,o[m],r);else rk(t,e,o,r);else!t.json&&!to.call(r,i)&&to.call(e,i)&&(t.line=s||t.line,t.lineStart=l||t.lineStart,t.position=u||t.position,he(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function dx(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):he(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Rt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;zo(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(qn(i))for(dx(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&pm(t,"deficient indentation"),n}function dm(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||_r(r)))}function gx(t,e){e===1?t.result+=" ":e>1&&(t.result+=Lt.repeat(`
`,e-1))}function _q(t,e,r){var n,i,o,s,l,u,m,d,g=t.kind,y=t.result,x;if(x=t.input.charCodeAt(t.position),_r(x)||ps(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),_r(i)||r&&ps(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),_r(i)||r&&ps(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),_r(n))break}else{if(t.position===t.lineStart&&dm(t)||r&&ps(x))break;if(qn(x))if(u=t.line,m=t.lineStart,d=t.lineIndent,Rt(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=u,t.lineStart=m,t.lineIndent=d;break}}l&&(eo(t,o,s,!1),gx(t,t.line-u),o=s=t.position,l=!1),zo(x)||(s=t.position+1),x=t.input.charCodeAt(++t.position)}return eo(t,o,s,!1),t.result?!0:(t.kind=g,t.result=y,!1)}function Rq(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(eo(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else qn(r)?(eo(t,n,i,!0),gx(t,Rt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&dm(t)?he(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);he(t,"unexpected end of the stream within a single quoted scalar")}function kq(t,e){var r,n,i,o,s,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return eo(t,r,t.position,!0),t.position++,!0;if(l===92){if(eo(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),qn(l))Rt(t,!1,e);else if(l<256&&Sk[l])t.result+=vk[l],t.position++;else if((s=vq(l))>0){for(i=s,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(s=Sq(l))>=0?o=(o<<4)+s:he(t,"expected hexadecimal character");t.result+=wq(o),t.position++}else he(t,"unknown escape sequence");r=n=t.position}else qn(l)?(eo(t,r,n,!0),gx(t,Rt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&dm(t)?he(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}he(t,"unexpected end of the stream within a double quoted scalar")}function Aq(t,e){var r=!0,n,i,o,s=t.tag,l,u=t.anchor,m,d,g,y,x,E=Object.create(null),w,U,W,q;if(q=t.input.charCodeAt(t.position),q===91)d=93,x=!1,l=[];else if(q===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),q=t.input.charCodeAt(++t.position);q!==0;){if(Rt(t,!0,e),q=t.input.charCodeAt(t.position),q===d)return t.position++,t.tag=s,t.anchor=u,t.kind=x?"mapping":"sequence",t.result=l,!0;r?q===44&&he(t,"expected the node content, but found ','"):he(t,"missed comma between flow collection entries"),U=w=W=null,g=y=!1,q===63&&(m=t.input.charCodeAt(t.position+1),_r(m)&&(g=y=!0,t.position++,Rt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,fs(t,e,lm,!1,!0),U=t.tag,w=t.result,Rt(t,!0,e),q=t.input.charCodeAt(t.position),(y||t.line===n)&&q===58&&(g=!0,q=t.input.charCodeAt(++t.position),Rt(t,!0,e),fs(t,e,lm,!1,!0),W=t.result),x?ms(t,l,E,U,w,W,n,i,o):g?l.push(ms(t,null,E,U,w,W,n,i,o)):l.push(w),Rt(t,!0,e),q=t.input.charCodeAt(t.position),q===44?(r=!0,q=t.input.charCodeAt(++t.position)):r=!1}he(t,"unexpected end of the stream within a flow collection")}function Pq(t,e){var r,n,i=ax,o=!1,s=!1,l=e,u=0,m=!1,d,g;if(g=t.input.charCodeAt(t.position),g===124)n=!1;else if(g===62)n=!0;else return!1;for(t.kind="scalar",t.result="";g!==0;)if(g=t.input.charCodeAt(++t.position),g===43||g===45)ax===i?i=g===43?XR:hq:he(t,"repeat of a chomping mode identifier");else if((d=bq(g))>=0)d===0?he(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?he(t,"repeat of an indentation width identifier"):(l=e+d-1,s=!0);else break;if(zo(g)){do g=t.input.charCodeAt(++t.position);while(zo(g));if(g===35)do g=t.input.charCodeAt(++t.position);while(!qn(g)&&g!==0)}for(;g!==0;){for(dx(t),t.lineIndent=0,g=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&g===32;)t.lineIndent++,g=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),qn(g)){u++;continue}if(t.lineIndent<l){i===XR?t.result+=Lt.repeat(`
`,o?1+u:u):i===ax&&o&&(t.result+=`
`);break}for(n?zo(g)?(m=!0,t.result+=Lt.repeat(`
`,o?1+u:u)):m?(m=!1,t.result+=Lt.repeat(`
`,u+1)):u===0?o&&(t.result+=" "):t.result+=Lt.repeat(`
`,u):t.result+=Lt.repeat(`
`,o?1+u:u),o=!0,s=!0,u=0,r=t.position;!qn(g)&&g!==0;)g=t.input.charCodeAt(++t.position);eo(t,r,t.position,!1)}return!0}function nk(t,e){var r,n=t.tag,i=t.anchor,o=[],s,l=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,he(t,"tab characters must not be used in indentation")),!(u!==45||(s=t.input.charCodeAt(t.position+1),!_r(s))));){if(l=!0,t.position++,Rt(t,!0,-1)&&t.lineIndent<=e){o.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,fs(t,e,yk,!1,!0),o.push(t.result),Rt(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)he(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function Dq(t,e,r){var n,i,o,s,l,u,m=t.tag,d=t.anchor,g={},y=Object.create(null),x=null,E=null,w=null,U=!1,W=!1,q;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=g),q=t.input.charCodeAt(t.position);q!==0;){if(!U&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,he(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(q===63||q===58)&&_r(n))q===63?(U&&(ms(t,g,y,x,E,null,s,l,u),x=E=w=null),W=!0,U=!0,i=!0):U?(U=!1,i=!0):he(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,q=n;else{if(s=t.line,l=t.lineStart,u=t.position,!fs(t,r,hk,!1,!0))break;if(t.line===o){for(q=t.input.charCodeAt(t.position);zo(q);)q=t.input.charCodeAt(++t.position);if(q===58)q=t.input.charCodeAt(++t.position),_r(q)||he(t,"a whitespace character is expected after the key-value separator within a block mapping"),U&&(ms(t,g,y,x,E,null,s,l,u),x=E=w=null),W=!0,U=!1,i=!1,x=t.tag,E=t.result;else if(W)he(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=m,t.anchor=d,!0}else if(W)he(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=m,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(U&&(s=t.line,l=t.lineStart,u=t.position),fs(t,e,um,!0,i)&&(U?E=t.result:w=t.result),U||(ms(t,g,y,x,E,w,s,l,u),x=E=w=null),Rt(t,!0,-1),q=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&q!==0)he(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return U&&ms(t,g,y,x,E,null,s,l,u),W&&(t.tag=m,t.anchor=d,t.kind="mapping",t.result=g),W}function Mq(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&he(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):he(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!_r(s);)s===33&&(n?he(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),Tk.test(i)||he(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),xq.test(o)&&he(t,"tag suffix cannot contain flow indicator characters")}o&&!xk.test(o)&&he(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{he(t,"tag name is malformed: "+o)}return r?t.tag=o:to.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:he(t,'undeclared tag handle "'+i+'"'),!0}function Lq(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&he(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!_r(r)&&!ps(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&he(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function Fq(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!_r(n)&&!ps(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&he(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),to.call(t.anchorMap,r)||he(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Rt(t,!0,-1),!0}function fs(t,e,r,n,i){var o,s,l,u=1,m=!1,d=!1,g,y,x,E,w,U;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=l=um===r||yk===r,n&&Rt(t,!0,-1)&&(m=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;Mq(t)||Lq(t);)Rt(t,!0,-1)?(m=!0,l=o,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=m||i),(u===1||um===r)&&(lm===r||hk===r?w=e:w=e+1,U=t.position-t.lineStart,u===1?l&&(nk(t,U)||Dq(t,U,w))||Aq(t,w)?d=!0:(s&&Pq(t,w)||Rq(t,w)||kq(t,w)?d=!0:Fq(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&he(t,"alias node should not have any properties")):_q(t,w,lm===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(d=l&&nk(t,U))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&he(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),g=0,y=t.implicitTypes.length;g<y;g+=1)if(E=t.implicitTypes[g],E.resolve(t.result)){t.result=E.construct(t.result),t.tag=E.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(to.call(t.typeMap[t.kind||"fallback"],t.tag))E=t.typeMap[t.kind||"fallback"][t.tag];else for(E=null,x=t.typeMap.multi[t.kind||"fallback"],g=0,y=x.length;g<y;g+=1)if(t.tag.slice(0,x[g].tag.length)===x[g].tag){E=x[g];break}E||he(t,"unknown tag !<"+t.tag+">"),t.result!==null&&E.kind!==t.kind&&he(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+E.kind+'", not "'+t.kind+'"'),E.resolve(t.result,t.tag)?(t.result=E.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):he(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function Iq(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(Rt(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!_r(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&he(t,"directive name must not be less than one character in length");s!==0;){for(;zo(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!qn(s));break}if(qn(s))break;for(r=t.position;s!==0&&!_r(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&dx(t),to.call(tk,n)?tk[n](t,n,i):pm(t,'unknown document directive "'+n+'"')}if(Rt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Rt(t,!0,-1)):o&&he(t,"directives end mark is expected"),fs(t,t.lineIndent-1,um,!1,!0),Rt(t,!0,-1),t.checkLineBreaks&&Tq.test(t.input.slice(e,t.position))&&pm(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&dm(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Rt(t,!0,-1));return}if(t.position<t.length-1)he(t,"end of the stream or a document separator is expected");else return}function wk(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new Eq(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,he(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Iq(r);return r.documents}function Cq(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=wk(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function Oq(t,e){var r=wk(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Er("expected a single document in the stream, but found more")}}var Nq=Cq,Uq=Oq,Ek={loadAll:Nq,load:Uq},_k=Object.prototype.toString,Rk=Object.prototype.hasOwnProperty,hx=65279,Hq=9,Xc=10,Bq=13,Vq=32,Wq=33,$q=34,cx=35,jq=37,zq=38,qq=39,Gq=42,kk=44,Kq=45,mm=58,Qq=61,Yq=62,Zq=63,Xq=64,Ak=91,Pk=93,Jq=96,Dk=123,eG=124,Mk=125,tr={};tr[0]="\\0";tr[7]="\\a";tr[8]="\\b";tr[9]="\\t";tr[10]="\\n";tr[11]="\\v";tr[12]="\\f";tr[13]="\\r";tr[27]="\\e";tr[34]='\\"';tr[92]="\\\\";tr[133]="\\N";tr[160]="\\_";tr[8232]="\\L";tr[8233]="\\P";var tG=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],rG=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function nG(t,e){var r,n,i,o,s,l,u;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=t.compiledTypeMap.fallback[s],u&&Rk.call(u.styleAliases,l)&&(l=u.styleAliases[l]),r[s]=l;return r}function iG(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Er("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Lt.repeat("0",n-e.length)+e}var oG=1,Jc=2;function aG(t){this.schema=t.schema||fx,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Lt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=nG(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Jc:oG,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ik(t,e){for(var r=Lt.repeat(" ",e),n=0,i=-1,o="",s,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=l):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function lx(t,e){return`
`+Lt.repeat(" ",t.indent*e)}function sG(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function fm(t){return t===Vq||t===Hq}function el(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==hx||65536<=t&&t<=1114111}function ok(t){return el(t)&&t!==hx&&t!==Bq&&t!==Xc}function ak(t,e,r){var n=ok(t),i=n&&!fm(t);return(r?n:n&&t!==kk&&t!==Ak&&t!==Pk&&t!==Dk&&t!==Mk)&&t!==cx&&!(e===mm&&!i)||ok(e)&&!fm(e)&&t===cx||e===mm&&i}function cG(t){return el(t)&&t!==hx&&!fm(t)&&t!==Kq&&t!==Zq&&t!==mm&&t!==kk&&t!==Ak&&t!==Pk&&t!==Dk&&t!==Mk&&t!==cx&&t!==zq&&t!==Gq&&t!==Wq&&t!==eG&&t!==Qq&&t!==Yq&&t!==qq&&t!==$q&&t!==jq&&t!==Xq&&t!==Jq}function lG(t){return!fm(t)&&t!==mm}function Yc(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Lk(t){var e=/^\n* /;return e.test(t)}var Fk=1,ux=2,Ik=3,Ck=4,us=5;function uG(t,e,r,n,i,o,s,l){var u,m=0,d=null,g=!1,y=!1,x=n!==-1,E=-1,w=cG(Yc(t,0))&&lG(Yc(t,t.length-1));if(e||s)for(u=0;u<t.length;m>=65536?u+=2:u++){if(m=Yc(t,u),!el(m))return us;w=w&&ak(m,d,l),d=m}else{for(u=0;u<t.length;m>=65536?u+=2:u++){if(m=Yc(t,u),m===Xc)g=!0,x&&(y=y||u-E-1>n&&t[E+1]!==" ",E=u);else if(!el(m))return us;w=w&&ak(m,d,l),d=m}y=y||x&&u-E-1>n&&t[E+1]!==" "}return!g&&!y?w&&!s&&!i(t)?Fk:o===Jc?us:ux:r>9&&Lk(t)?us:s?o===Jc?us:ux:y?Ck:Ik}function pG(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===Jc?'""':"''";if(!t.noCompatMode&&(tG.indexOf(e)!==-1||rG.test(e)))return t.quotingType===Jc?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function u(m){return sG(t,m)}switch(uG(e,l,t.indent,s,u,t.quotingType,t.forceQuotes&&!n,i)){case Fk:return e;case ux:return"'"+e.replace(/'/g,"''")+"'";case Ik:return"|"+sk(e,t.indent)+ck(ik(e,o));case Ck:return">"+sk(e,t.indent)+ck(ik(mG(e,s),o));case us:return'"'+fG(e)+'"';default:throw new Er("impossible error: invalid scalar style")}}()}function sk(t,e){var r=Lk(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function ck(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function mG(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var m=t.indexOf(`
`);return m=m!==-1?m:t.length,r.lastIndex=m,lk(t.slice(0,m),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var l=s[1],u=s[2];o=u[0]===" ",n+=l+(!i&&!o&&u!==""?`
`:"")+lk(u,e),i=o}return n}function lk(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,l=0,u="";n=r.exec(t);)l=n.index,l-i>e&&(o=s>i?s:l,u+=`
`+t.slice(i,o),i=o+1),s=l;return u+=`
`,t.length-i>e&&s>i?u+=t.slice(i,s)+`
`+t.slice(s+1):u+=t.slice(i),u.slice(1)}function fG(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=Yc(t,i),n=tr[r],!n&&el(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||iG(r);return e}function dG(t,e,r){var n="",i=t.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(_i(t,e,l,!1,!1)||typeof l>"u"&&_i(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function uk(t,e,r,n){var i="",o=t.tag,s,l,u;for(s=0,l=r.length;s<l;s+=1)u=r[s],t.replacer&&(u=t.replacer.call(r,String(s),u)),(_i(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&_i(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=lx(t,e)),t.dump&&Xc===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function gG(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,l,u,m,d;for(s=0,l=o.length;s<l;s+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),u=o[s],m=r[u],t.replacer&&(m=t.replacer.call(r,u,m)),_i(t,e,u,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),_i(t,e,m,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function hG(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),l,u,m,d,g,y;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new Er("sortKeys must be a boolean or a function");for(l=0,u=s.length;l<u;l+=1)y="",(!n||i!=="")&&(y+=lx(t,e)),m=s[l],d=r[m],t.replacer&&(d=t.replacer.call(r,m,d)),_i(t,e+1,m,!0,!0,!0)&&(g=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,g&&(t.dump&&Xc===t.dump.charCodeAt(0)?y+="?":y+="? "),y+=t.dump,g&&(y+=lx(t,e)),_i(t,e+1,d,!0,g)&&(t.dump&&Xc===t.dump.charCodeAt(0)?y+=":":y+=": ",y+=t.dump,i+=y));t.tag=o,t.dump=i||"{}"}function pk(t,e,r){var n,i,o,s,l,u;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(u=t.styleMap[l.tag]||l.defaultStyle,_k.call(l.represent)==="[object Function]")n=l.represent(e,u);else if(Rk.call(l.represent,u))n=l.represent[u](e,u);else throw new Er("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}function _i(t,e,r,n,i,o,s){t.tag=null,t.dump=r,pk(t,r,!1)||pk(t,r,!0);var l=_k.call(t.dump),u=n,m;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",g,y;if(d&&(g=t.duplicates.indexOf(r),y=g!==-1),(t.tag!==null&&t.tag!=="?"||y||t.indent!==2&&e>0)&&(i=!1),y&&t.usedDuplicates[g])t.dump="*ref_"+g;else{if(d&&y&&!t.usedDuplicates[g]&&(t.usedDuplicates[g]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(hG(t,e,t.dump,i),y&&(t.dump="&ref_"+g+t.dump)):(gG(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?uk(t,e-1,t.dump,i):uk(t,e,t.dump,i),y&&(t.dump="&ref_"+g+t.dump)):(dG(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&pG(t,t.dump,e,o,u);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Er("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(m=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?m="!"+m:m.slice(0,18)==="tag:yaml.org,2002:"?m="!!"+m.slice(18):m="!<"+m+">",t.dump=m+" "+t.dump)}return!0}function yG(t,e){var r=[],n=[],i,o;for(px(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function px(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)px(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)px(t[n[i]],e,r)}function TG(t,e){e=e||{};var r=new aG(e);r.noRefs||yG(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),_i(r,0,n,!0,!0)?r.dump+`
`:""}var xG=TG,SG={dump:xG};function yx(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Ok=zt;var Nk=fx,vG=Ek.load,Qle=Ek.loadAll,Uk=SG.dump;var Yle=yx("safeLoad","load"),Zle=yx("safeLoadAll","loadAll"),Xle=yx("safeDump","dump");var gm=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=Uk(this.data,Object.assign({replacer:_G,schema:wG},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},bG=new Ok("!format",{kind:"scalar",resolve:()=>!1,instanceOf:gm,represent:t=>t.represent()}),wG=Nk.extend({implicit:[bG]}),Tx=t=>typeof t=="object"&&t!=null;function EG(t){if(Tx(t))return Object.values(t).every(e=>!Tx(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!Tx(e)&&!Array.isArray(e))}function _G(t,e){return t===""?e:EG(e)?new gm(e,{flowLevel:0}):e}var xx=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","flashTargets","foldRegion","followLink","followLinkAside","gitAccept","gitRevert","gitStage","gitUnstage","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],kG=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],Bk=[...xx,...kG];var AG=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleBacktickQuotes","tripleDoubleQuotes","tripleSingleQuotes"],PG=["string","any","collectionBoundary"],hm=[...AG,...PG],qo=["argumentOrParameter","argumentList","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function Vk(t){return qo.includes(t.type)}var Wk=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],tl=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},ds=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function rl(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function Go(t){return t.version>=7}var ro=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var gs=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function $k(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function nl(t){return typeof t=="string"||t instanceof String}function ym(t){let[e,...r]=t;return MG(e,r)}function MG(t,e){let r;if(nl(t)){let n=t,[i,o,...s]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:s,usePrePhraseSnapshot:!1}}else r=t;return r}function il(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function jk(t){for(let e of t)return!1;return!0}function ol(t){return Object.keys(t)}function al(t,e){return`${t}.${e}`}function zk(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,s)=>{let l=r(s),u=o.get(l);return u==null?(o.set(l,[s]),o):(o.get(l).push(s),u.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Wc(i.get(o),e))}),t.flatMap(o=>{let s=r(o),l=i.get(s);if(l==null||l.length===0)return[];let u=l[0];return e(u,o)?(l.shift(),u):[]}))}function Ko(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var Zk=Symbol.for("immer-nothing"),qk=Symbol.for("immer-draftable"),Wr=Symbol.for("immer-state"),LG=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function Rr(t,...e){if(process.env.NODE_ENV!=="production"){let r=LG[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var hs=Object.getPrototypeOf;function ys(t){return!!t&&!!t[Wr]}function Yo(t){return t?Xk(t)||Array.isArray(t)||!!t[qk]||!!t.constructor?.[qk]||bm(t)||wm(t):!1}var FG=Object.prototype.constructor.toString();function Xk(t){if(!t||typeof t!="object")return!1;let e=hs(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===FG}function Tm(t,e){vm(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function vm(t){let e=t[Wr];return e?e.type_:Array.isArray(t)?1:bm(t)?2:wm(t)?3:0}function bx(t,e){return vm(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Jk(t,e,r){let n=vm(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function IG(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function bm(t){return t instanceof Map}function wm(t){return t instanceof Set}function Qo(t){return t.copy_||t.base_}function wx(t,e){if(bm(t))return new Map(t);if(wm(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=Xk(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[Wr];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let s=i[o],l=n[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(hs(t),n)}else{let n=hs(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function Ax(t,e=!1){return Em(t)||ys(t)||!Yo(t)||(vm(t)>1&&(t.set=t.add=t.clear=t.delete=CG),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>Ax(n,!0))),t}function CG(){Rr(2)}function Em(t){return Object.isFrozen(t)}var OG={};function Zo(t){let e=OG[t];return e||Rr(0,t),e}var sl;function eA(){return sl}function NG(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Gk(t,e){e&&(Zo("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Ex(t){_x(t),t.drafts_.forEach(UG),t.drafts_=null}function _x(t){t===sl&&(sl=t.parent_)}function Kk(t){return sl=NG(sl,t)}function UG(t){let e=t[Wr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Qk(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Wr].modified_&&(Ex(e),Rr(4)),Yo(t)&&(t=xm(e,t),e.parent_||Sm(e,t)),e.patches_&&Zo("Patches").generateReplacementPatches_(r[Wr].base_,t,e.patches_,e.inversePatches_)):t=xm(e,r,[]),Ex(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Zk?t:void 0}function xm(t,e,r){if(Em(e))return e;let n=e[Wr];if(!n)return Tm(e,(i,o)=>Yk(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Sm(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,s=!1;n.type_===3&&(o=new Set(i),i.clear(),s=!0),Tm(o,(l,u)=>Yk(t,n,i,l,u,r,s)),Sm(t,i,!1),r&&t.patches_&&Zo("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function Yk(t,e,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&Rr(5),ys(i)){let l=o&&e&&e.type_!==3&&!bx(e.assigned_,n)?o.concat(n):void 0,u=xm(t,i,l);if(Jk(r,n,u),ys(u))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(Yo(i)&&!Em(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;xm(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Sm(t,i)}}function Sm(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Ax(e,r)}function HG(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:eA(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=Px;r&&(i=[n],o=cl);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}var Px={get(t,e){if(e===Wr)return t;let r=Qo(t);if(!bx(r,e))return BG(t,r,e);let n=r[e];return t.finalized_||!Yo(n)?n:n===Sx(t.base_,e)?(vx(t),t.copy_[e]=kx(n,t)):n},has(t,e){return e in Qo(t)},ownKeys(t){return Reflect.ownKeys(Qo(t))},set(t,e,r){let n=tA(Qo(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=Sx(Qo(t),e),o=i?.[Wr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(IG(r,i)&&(r!==void 0||bx(t.base_,e)))return!0;vx(t),Rx(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Sx(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,vx(t),Rx(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=Qo(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Rr(11)},getPrototypeOf(t){return hs(t.base_)},setPrototypeOf(){Rr(12)}},cl={};Tm(Px,(t,e)=>{cl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});cl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&Rr(13),cl.set.call(this,t,e,void 0)};cl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&Rr(14),Px.set.call(this,t[0],e,r,t[0])};function Sx(t,e){let r=t[Wr];return(r?Qo(r):t)[e]}function BG(t,e,r){let n=tA(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function tA(t,e){if(!(e in t))return;let r=hs(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=hs(r)}}function Rx(t){t.modified_||(t.modified_=!0,t.parent_&&Rx(t.parent_))}function vx(t){t.copy_||(t.copy_=wx(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var VG=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let s=this;return function(u=o,...m){return s.produce(u,d=>r.call(this,d,...m))}}typeof r!="function"&&Rr(6),n!==void 0&&typeof n!="function"&&Rr(7);let i;if(Yo(e)){let o=Kk(this),s=kx(e,void 0),l=!0;try{i=r(s),l=!1}finally{l?Ex(o):_x(o)}return Gk(o,n),Qk(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===Zk&&(i=void 0),this.autoFreeze_&&Ax(i,!0),n){let o=[],s=[];Zo("Patches").generateReplacementPatches_(e,i,o,s),n(o,s)}return i}else Rr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,u=>e(u,...l));let n,i;return[this.produce(e,r,(s,l)=>{n=s,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Yo(t)||Rr(8),ys(t)&&(t=WG(t));let e=Kk(this),r=kx(t,void 0);return r[Wr].isManual_=!0,_x(e),r}finishDraft(t,e){let r=t&&t[Wr];(!r||!r.isManual_)&&Rr(9);let{scope_:n}=r;return Gk(n,e),Qk(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=Zo("Patches").applyPatches_;return ys(t)?n(t,e):this.produce(t,i=>n(i,e))}};function kx(t,e){let r=bm(t)?Zo("MapSet").proxyMap_(t,e):wm(t)?Zo("MapSet").proxySet_(t,e):HG(t,e);return(e?e.scope_:eA()).drafts_.push(r),r}function WG(t){return ys(t)||Rr(10,t),rA(t)}function rA(t){if(!Yo(t)||Em(t))return t;let e=t[Wr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=wx(t,e.scope_.immer_.useStrictShallowCopy_)}else r=wx(t,!0);return Tm(r,(n,i)=>{Jk(r,n,rA(i))}),e&&(e.finalized_=!1),r}var $r=new VG,_m=$r.produce,Xme=$r.produceWithPatches.bind($r),Jme=$r.setAutoFreeze.bind($r),efe=$r.setUseStrictShallowCopy.bind($r),tfe=$r.applyPatches.bind($r),rfe=$r.createDraft.bind($r),nfe=$r.finishDraft.bind($r);var qt=[];for(let t=0;t<256;++t)qt.push((t+256).toString(16).slice(1));function nA(t,e=0){return(qt[t[e+0]]+qt[t[e+1]]+qt[t[e+2]]+qt[t[e+3]]+"-"+qt[t[e+4]]+qt[t[e+5]]+"-"+qt[t[e+6]]+qt[t[e+7]]+"-"+qt[t[e+8]]+qt[t[e+9]]+"-"+qt[t[e+10]]+qt[t[e+11]]+qt[t[e+12]]+qt[t[e+13]]+qt[t[e+14]]+qt[t[e+15]]).toLowerCase()}var iA=require("crypto"),km=new Uint8Array(256),Rm=km.length;function Dx(){return Rm>km.length-16&&((0,iA.randomFillSync)(km),Rm=0),km.slice(Rm,Rm+=16)}var oA=require("crypto"),Mx={randomUUID:oA.randomUUID};function $G(t,e,r){if(Mx.randomUUID&&!e&&!t)return Mx.randomUUID();t=t||{};let n=t.random??t.rng?.()??Dx();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return nA(n)}var Lx=$G;function aA(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function Am(t,e){if(Array.isArray(t))return t.map(r=>Am(r,e));if(typeof t=="object"&&t!=null){if(jG(t))return aA(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Am(t[n],e));return r}return t}function jG(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var Cm=on(cA(),1);var zG={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},qG={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},Dm={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},Mm={modulo100:"row",relativeUp:"up",relativeDown:"down"};function lA(t){let e=zG[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function uA(t){let e=qG[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function Fx(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var GG=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),KG=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),QG={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},pA={...GG,...KG,...QG};function no(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Ft(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var mA={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Ft("triple quad"),tripleSingleQuotes:Ft("triple twin"),tripleBacktickQuotes:Ft("triple skis"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Ft("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",argumentList:"arg list",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:no("one section"),sectionLevelTwo:no("two section"),sectionLevelThree:no("three section"),sectionLevelFour:no("four section"),sectionLevelFive:no("five section"),sectionLevelSix:no("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Ft("parse tree string"),textFragment:Ft("text fragment"),disqualifyDelimiter:Ft("disqualify delimiter"),pairDelimiter:Ft("pair delimiter"),"private.fieldAccess":Ft("access"),"private.switchStatementSubject":Ft("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",flashTargets:"flash",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join",gitAccept:"git accept",gitRevert:"git revert",gitStage:"git stage",gitUnstage:"git unstage","private.showParseTree":Ft("parse tree"),"experimental.setInstanceReference":no("from"),editNew:Ft("edit new"),executeCommand:Ft("execute command"),parsed:Ft("parsed"),getText:Ft("get text"),replace:Ft("replace"),"private.getTargets":Ft("get targets"),"private.setKeyboardTarget":Ft("set keyboard target")},customAction:{},grapheme:pA};var Ix=Fx(mA,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),Pn=Fx(Ix,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var bt={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var gA=on(dA(),1),Fm=class{constructor(e){this.mooLexer=gA.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Dn={};for(let t of xx){let{spokenForms:e}=Pn.action[t];for(let r of e)Dn[r]={type:"simpleActionName",value:t}}var YG=["replaceWithTarget","moveToTarget"];for(let t of YG){let{spokenForms:e}=Pn.action[t];for(let r of e)Dn[r]={type:"bringMove",value:t}}var ZG=["before","after","to"];for(let t of ZG){let e=bt[t==="to"?"sourceDestinationConnective":t];Dn[e]={type:"insertionMode",value:t}}for(let t of qo){let{spokenForms:e}=Pn.simpleScopeTypeType[t];for(let r of e)Dn[r]={type:"simpleScopeTypeType",value:t}}for(let t of hm){let{spokenForms:e}=Pn.pairedDelimiter[t];for(let r of e)Dn[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(Dm))e!=null&&(Dn[e]={type:"simpleMarkType",value:t});Pn.modifierExtra.next.spokenForms.forEach(t=>{Dn[t]={type:"direction",value:"forward"}});Pn.modifierExtra.previous.spokenForms.forEach(t=>{Dn[t]={type:"direction",value:"backward"}});var Gn=new Fm({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Dn),type:t=>Dn[t].type,value:t=>Dn[t].value}});function hA(t,e){return{name:t,target:e}}function yA(t,e,r){return{name:t,source:e,destination:r}}function Im(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function TA(t,e){return{type:"primitive",insertionMode:t,target:e}}function xA(t){return{type:"containingScope",scopeType:t}}function SA(t,e){return{type:"relativeScope",scopeType:t,offset:1,length:1,direction:e}}function vA(t){return{type:t}}function bA(t){return{type:"surroundingPair",delimiter:t}}function wA(t){return{type:t}}function EA(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function Cx(t){return t[0]}var XG={Lexer:Gn,ParserRules:[{name:"main",symbols:["action"],postprocess:Cx},{name:"action",symbols:[Gn.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>hA(t,e)},{name:"action",symbols:[Gn.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>yA(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:Cx},{name:"destination",symbols:[Gn.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>TA(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:Cx},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>Im(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>Im(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>Im(t,e)},{name:"modifier",symbols:["scopeType"],postprocess:([t])=>xA(t)},{name:"modifier",symbols:[Gn.has("direction")?{type:"direction"}:direction,"scopeType"],postprocess:([t,e])=>SA(e,t)},{name:"scopeType",symbols:[Gn.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>vA(t)},{name:"scopeType",symbols:[Gn.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>bA(t)},{name:"mark",symbols:[Gn.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>wA(t)},{name:"mark",symbols:[Gn.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>EA(t)}],ParserStart:"main"},_A=XG;function JG(){return new Cm.Parser(Cm.Grammar.fromCompiled(_A))}function RA(t){let e=JG();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function Om(t,e){let r=RA(t);return Am(r,e)}function ll(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...kA(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return kA(t.destination);case"parsed":return ll(Om(t.content,t.arguments));default:return[t.target]}}function kA(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function Nx(t){return t.flatMap(Ox)}function Ox(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(Ox);case"range":return[t.anchor,t.active].flatMap(Ox);case"implicit":return[]}}var eK={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},tK={purple:"pink"};function rK(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=eK[e.scopeType.type]??e.scopeType.type)})}function nK(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=tK[t.mark.symbolColor]??t.mark.symbolColor)}function Ux(t){Nx(t).forEach(e=>{rK(e),nK(e)})}function AA(t){return{...t,version:1}}var iK={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},oK={type:"primitive",isImplicit:!0},PA=t=>Ei(t,iK)?oK:t;function DA(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:sK(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function aK(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function Hx(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:s,selectionType:l,position:u}=t,m=[];if(u&&u!=="contents"&&(u==="before"?o==="inside"?m.push({type:"position",position:"start"}):e==="remove"?m.push({type:"leading"}):m.push({type:"position",position:"before"}):o==="inside"?m.push({type:"position",position:"end"}):e==="remove"?m.push({type:"trailing"}):m.push({type:"position",position:"after"})),l)switch(l){case"token":if(s?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:m.push({type:"containingScope",scopeType:{type:l}})}return s&&m.push(...aK(s)),{type:r,isImplicit:n,modifiers:m.length>0?m:void 0,mark:i?.type==="cursorToken"?void 0:i}}function MA(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>MA(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:s,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:Hx(i,e),active:Hx(o,e),excludeAnchor:s??!1,excludeActive:l??!1}}case"primitive":return Hx(t,e)}}function sK(t,e){return t.map(r=>MA(r,e)).map(r=>r.type==="primitive"?PA(r):r)}function LA(t){return{...t,version:3,targets:t.targets.map(FA)}}function FA(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>FA(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:Bx(e),active:Bx(r),...n}}case"primitive":return Bx(t)}}function Bx(t){let e=t.modifiers!=null?t.modifiers.map(lK):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:pl(r),modifiers:e},active:{type:"primitive",mark:pl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?cK(t.mark):void 0,modifiers:e}}function cK(t){switch(t.type){case"lineNumber":return uK(t);default:return t}}function lK(t){switch(t.type){case"ordinalRange":return pK(t);default:return t}}function uK(t){return Ei(t.anchor,t.active)?pl(t.anchor):{type:"range",anchor:pl(t.anchor),active:pl(t.active)}}function pK(t){return t.anchor===t.active?ul(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?ul(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?ul(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:ul(t.scopeType,t.anchor),active:ul(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function pl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function ul(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function CA(t){return{...t,version:4,targets:t.targets.map(OA)}}function OA(t){switch(t.type){case"primitive":return IA(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:IA(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(OA)}}}}function IA(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function NA(t){return{...t,version:5,action:mK(t.action),targets:t.targets.map(Nm)}}function mK(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=fK(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function fK(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function Nm(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(Nm)};case"range":return{...t,anchor:Nm(t.anchor),active:Nm(t.active)};case"primitive":return{...t,mark:t.mark!=null?Vx(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(Wx):void 0}}}function Vx(t){return t.type==="range"?{...t,anchor:Vx(t.anchor),active:Vx(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function Wx(t){return t.type==="range"?{...t,anchor:Wx(t.anchor),active:Wx(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var dK={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function $x(t){let e=dK[t]??t;if(!Bk.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function UA(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:gK(t.action,t.targets)}}function gK(t,e){let r=$x(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:ln(e[0]),destination:ml(e[1])};case"swapTargets":return{name:r,target1:ln(e[0]),target2:ln(e[1])};case"callAsFunction":return{name:r,callee:ln(e[0]),argument:ln(e[1])};case"pasteFromClipboard":return{name:r,destination:ml(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:ln(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:ln(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:ml(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:ln(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:ln(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:ml(e[0])};case"highlight":{let n={name:r,target:ln(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:ml(e[0])};case"getText":return{name:r,options:t.args?.[0],target:ln(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:ln(e[0])}}}function ln(t){switch(t.type){case"list":case"range":case"primitive":return hK(t);case"implicit":return t}}function hK(t){switch(t.type){case"list":return yK(t);case"range":case"primitive":return Um(t)}}function yK(t){return{...t,elements:t.elements.map(Um)}}function Um(t){switch(t.type){case"range":return HA(t);case"primitive":return Hm(t)}}function HA(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:Hm(e),active:Hm(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function Hm(t){let e={type:"primitive"},r=wK(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function ml(t){switch(t.type){case"list":return TK(t);case"range":return xK(t);case"primitive":return SK(t);case"implicit":return vK()}}function TK(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let s=Bm(o);s!=null?(i(),r=[Um(o)],n=s):r.push(Um(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function xK(t){return{type:"primitive",insertionMode:Bm(t.anchor)??"to",target:HA(t)}}function SK(t){return{type:"primitive",insertionMode:Bm(t)??"to",target:Hm(t)}}function vK(){return{type:"implicit"}}function Bm(t){switch(t.type){case"implicit":return"to";case"primitive":return bK(t);case"range":return Bm(t.anchor)}}function bK(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function wK(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function BA(t){return{...t,version:7}}function zx(t){let e=EK(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:_m(r,o=>{let s=ll(o);Ux(s),r.name}),usePrePhraseSnapshot:n}}function EK(t,e){if(t.version>7)throw new Sp;for(;t.version<e;)switch(t.version){case 0:t=AA(t);break;case 1:t=DA(t);break;case 2:t=LA(t);break;case 3:t=CA(t);break;case 4:t=NA(t);break;case 5:t=UA(t);break;case 6:t=BA(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var qx;function Vm(t){qx=t}function k(){if(qx==null)throw Error("Tried to access ide before it was injected");return qx}var Wm=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var _K=25,$m=class{constructor(){this.targetMap=new Map;this.targetHistory=new gs(()=>new Wm(_K));this.notifier=new er}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of ls)e(r,this.get(r));return this.notifier.registerListener(e)}};function kt(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function kr(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Ri(t,e,r){return Promise.all(Gx(t,e).map(([n,i])=>r(n,i)))}async function ct(t,e){return Ri(t,r=>r.editor,e)}async function VA(t,e){let r=Gx(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function WA(t){return Gx(t,e=>e.editor)}function Gx(t,e){let n=il(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function un(t,e){return e!=null?Mt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new st(i.end,i.start):new st(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function pn(t,e){return t.textualType==="line"?Vr(e):mr(e)}function RK(t){return pn(t,t.contentRange)}function Be(t,e,r,n=RK){return t.flashRanges(e.map(i=>({editor:i.editor,range:n(i),style:r})))}function io(t,e){return new Y(new _e(e.start.line,0),t.document.lineAt(e.end).range.end)}function Kx(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function $A(t,e){let[r,n]=e instanceof _e?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function ki(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var jm=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=AK(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?kK(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=s=>this.updateRange(s,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?ki(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new Y(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),s=o+r.length;return new Y(this.editor.document.positionAt(o),this.editor.document.positionAt(s))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function kK(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let s=o.rangeTrimmed?.start??o.range.end;s.character<r&&(r=s.character,n=o.text.slice(0,r))}return n}function AK(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function Ts(t,e,r,n){return PK(t.contentRange,e.contentRange,r,n)}function PK(t,e,r,n){return new Y(r?t.start:t.end,n?e.end:e.start)}function xs(t,e,r,n){let i=r?t.contentRange.start:new _e(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new Y(i,o)}var qe=class t{constructor(e){this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.textualType="token";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return pn(this,this.getRemovalRange())}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:Ts(this,r,!0,!0)})}isEqual(e){return e instanceof t&&Ei(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new jm(this,e)}toPlainObject(){return{type:this.type,contentRange:Qc(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function Xo(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,s=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,u=r.positionAt(s),m=r.positionAt(l);return new Y(u,m)}function zm(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var Ye=class extends qe{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.textualType=r.textualType??"token",this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,textualType:this.textualType,insertionDelimiter:this.insertionDelimiter}}};function Ss(t,e,r){return zm(Ye,t,e,r)}var qm=class extends qe{constructor(r){super(r);this.type="DocumentTarget";this.textualType="line";this.insertionDelimiter=`

`}getInterior(){return[new Ye({editor:this.editor,isReversed:this.isReversed,contentRange:Xo(this.editor,this.contentRange)})]}getRemovalRange(){return this.contentRange}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getCloneParameters(){return this.state}};var fr=class t extends qe{constructor(){super(...arguments);this.type="LineTarget";this.textualType="line";this.insertionDelimiter=`
`;this.getRemovalHighlightRange=()=>Vr(this.fullLineContentRange)}get fullLineContentRange(){return io(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return Ss(this.editor,DK(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return Ss(this.editor,MK(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:xs(this,n,!0,!0)})}getCloneParameters(){return this.state}};function DK(t,e){let{start:r}=e;return r.line>0?new Y(t.document.lineAt(r.line-1).range.end,e.start):void 0}function MK(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new Y(e.end,new _e(r.line+1,0)):void 0}function Qx(t,e,r){return zm(fr,t,e,r)}var Gm=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var Km=class extends qe{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new Gm(this,r)}};var oo=class t extends qe{constructor(){super(...arguments);this.type="ParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`}getLeadingDelimiterTarget(){return Qx(this.editor,LK(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return Qx(this.editor,FK(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new fr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return io(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange;return Vr(n)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:xs(this,n,!0,!0)})}getCloneParameters(){return this.state}};function LK(t,e){let{document:r}=t,n=r.lineAt(e.start),i=IK(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new Y(new _e(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new Y(new _e(0,0),r.lineAt(n.lineNumber-1).range.end)}function FK(t,e){let{document:r}=t,n=r.lineAt(e.end),i=CK(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new Y(new _e(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new Y(new _e(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function IK(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function CK(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var ao=class extends qe{constructor(){super(...arguments);this.type="RawSelectionTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};function fl(t){let e=ki(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var OK=['"',"'","(","[","{","<"],NK=['"',"'",")","]","}",">",",",";",":"];function Kn(t){let{editor:e}=t,{start:r}=ki(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new Ye({contentRange:new Y(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function Qn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new Ye({contentRange:new Y(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function so(t){let{editor:e}=t,r=ki(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),s=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=io(e,r);return o.union(s).isRangeEqual(l)?l:!s.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||OK.includes(UK(e,r)))?r.union(s):!o.isEmpty&&(r.end.isEqual(l.end)||NK.includes(HK(e,r)))?r.union(o):r}function UK(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new Y(r.translate(void 0,-1),r)):""}function HK(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new Y(r.translate(void 0,1),r)):""}var rr=class extends qe{constructor(){super(...arguments);this.type="TokenTarget";this.textualType="token";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return Kn(this)}getTrailingDelimiterTarget(){return Qn(this)}getRemovalRange(){return so(this)}getCloneParameters(){return this.state}};function Yx(t){let{editor:e,isReversed:r}=t,{document:n}=e,i=ki(t.contentRange,t.prefixRange);return BK(n,i)?VK(n,i)?new oo({editor:e,isReversed:r,contentRange:i}):new fr({editor:e,isReversed:r,contentRange:i}):new rr({editor:e,isReversed:r,contentRange:i})}function BK(t,e){let r=t.lineAt(e.start).rangeTrimmed?.start,n=t.lineAt(e.end).rangeTrimmed?.end;return r!=null&&n!=null&&r.isEqual(e.start)&&n.isEqual(e.end)}function VK(t,e){let{start:r,end:n}=e;return(r.line===0||t.lineAt(r.line-1).isEmptyOrWhitespace)&&(n.line===t.lineCount-1||t.lineAt(n.line+1).isEmptyOrWhitespace)}var vs=class t extends qe{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??WK(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new Ye({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return Kn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new Ye({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return Qn(this)}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?fl(this):Yx(this).getRemovalRange()}getRemovalHighlightRange(){return this.removalRange_!=null?pn(this,this.removalRange_):this.hasDelimiterRange_?pn(this,fl(this)):Yx(this).getRemovalHighlightRange()}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?(this.removalRange_??this.contentRange).union(n.removalRange_??n.contentRange):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:this.contentRange.union(n.contentRange)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function WK(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var Qm=class t extends qe{constructor(r){super(r);this.type="SubTokenWordTarget";this.textualType="word";this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return Ss(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return Ss(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return fl(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Ts(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var bs=class t extends qe{constructor(r){super({...r,contentRange:Xo(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:this.fullInteriorRange.union(n.fullInteriorRange)})}};var Ym=class extends qe{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return Kn(this)}getTrailingDelimiterTarget(){return Qn(this)}getRemovalRange(){return so(this)}getInterior(){return[new bs({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new rr({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Nt=class extends qe{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.textualType=r.textualType??"token"}getLeadingDelimiterTarget(){return Kn(this)}getTrailingDelimiterTarget(){return Qn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:so(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,textualType:this.textualType,hasExplicitRange:this.hasExplicitRange}}};var Zm=class extends qe{constructor(){super(...arguments);this.type="ImplicitTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var Xm=class extends qe{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:jA(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return Kn(this)}getTrailingDelimiterTarget(){return Qn(this)}getRemovalRange(){return so(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new Ye({editor:this.editor,contentRange:jA(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function jA(t,e,r){return r?new Y(e.start,t.end):new Y(t.start,e.end)}var Jm=class t extends qe{constructor(r){super({...r,contentRange:$K(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new fr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return io(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=(()=>{if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n!=null?this.fullLineContentRange.union(n.contentRange):this.fullLineContentRange})();return Vr(r)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function $K(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function ef(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var ws=class{run(){return ef(k()).map(e=>new Nt({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,textualType:"character"}))}};var Yn=class{constructor(e,r){this.debouncer=new xp(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var tf=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Yn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new ws().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var rf=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var jK=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],zK=jK.map(Br).join("|"),qK=["[a-zA-Z0-9]",zK].join("|"),GK=new RegExp(`^(${qK})$`,"u"),KK="[unk]",QK=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,nf=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new er;this.getTokenGraphemes=e=>sn(e,QK,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;k().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(k().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=k().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=BT(o),GK.test(o)||(o=KK)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function Jo(){return Zx==null&&(Zx=new nf),Zx}var Zx;var YK=["-","+","*","/","=","<",">","_","#",".","|","&",":"],ZK=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],XK=["\\p{L}","\\p{M}","\\p{N}"],JK="[^\\s\\w]",e4="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function t4(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:s}=t,l=r.map(Br).map(x=>`${x}+`).join("|"),u=e.map(Br).join("|"),d=`(${n.concat(i.map(Br)).join("|")})+`,g=`(${n.join("|")})+`,y=[u,o,d,l,s].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(g,"gu"),tokenMatcher:new RegExp(y,"gu")}}var Xx=new Map;function Ar(t){let e=k().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!Xx.has(r)){let n={fixedTokens:ZK,repeatableSymbols:YK,identifierWordRegexes:XK,identifierWordDelimiters:e,numbersRegex:e4,singleSymbolsRegex:JK};Xx.set(r,t4(n))}return Xx.get(r)}function zA(t,e,r){return sn(t,Ar(e).tokenMatcher,r)}var r4=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,Es=class{constructor(e){this.wordRegex=Ar(e).wordMatcher}splitIdentifier(e){let r=Gc(e,this.wordRegex);return r.length>1?r:Gc(e,r4)}};var qA=({penalty:t})=>-t,GA=({isFirstLetter:t})=>t?-1:0;function KA(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function QA(t,e){let r=Bc(n=>qT(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function Jx(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function YA(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function ZA(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=n4(r,n)}return r[0]}function n4(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function XA({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,s){return ZA(s,[Jx(i),YA(r),Jx(o),KA(t),qA,GA,QA(n,e)])}function JA(t,e,r){let n={},i=new ro(({grapheme:o,hatStyle:s})=>[o,s]);return t.forEach(({token:o,rank:s})=>{let l=e.get(o);l!=null&&i.set(l,s),r.getTokenGraphemes(o.text).forEach(({text:u})=>{let m;u in n?m=n[u]:(m=[],n[u]=m),m.push(s)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function eP(t,e=[]){return new Map(zT(ot,Vo)(Vc([e],t.visibleRanges.map(r=>GT(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function tP(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let s=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return s-l}}function rP(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return zA(n,r,o=>{let s=i+o.index,l=i+o.index+o[0].length,u=new Y(t.document.positionAt(s),t.document.positionAt(l));return{editor:t,text:o[0],range:u,offsets:{start:s,end:l}}})}function nP(t,e,r){let i=o4(t,e).flatMap(o=>{let s=o.selections[0].active,l=eP(o,[s.line]),u=ot(o.visibleRanges.map(m=>rP(o,m).map(d=>({...d,displayLine:l.get(d.range.start.line)}))));return u.sort(tP(l.get(s.line),s.character)),u});return i4(r,i).map((o,s)=>({token:o,rank:-s}))}function i4(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function o4(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function eS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:s}){let l=r==null?void 0:iP(r),u=iP(n),m=nP(o,s,l),d=JA(m,u,t),g=Object.keys(e),y=new gs(()=>[...g]);return m.map(({token:x,rank:E})=>{let w=a4(t,x,y,e),U=XA(d,i,E,l?.get(x),u.get(x),w);if(U!=null)return y.set(U.grapheme.text,y.get(U.grapheme.text).filter(W=>W!==U.style)),s4(x,U)}).filter(x=>x!=null)}function iP(t){let e=new ro(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function a4(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text),s=new Set(new Es(e.editor.document.languageId).splitIdentifier(e.text).map(l=>l.index));for(let l of o){let u=s.has(l.tokenStartOffset);for(let m of r.get(l.text))i.push({grapheme:l,style:m,penalty:n[m].penalty,isFirstLetter:u})}return i}function s4(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new Y(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var of=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];k().disposeOnExit(this);let n=new Yn(k().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeActiveTextEditor(n.run),k().onDidChangeVisibleTextEditors(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorSelection(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),Jo().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:Jo().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?eS({tokenGraphemeSplitter:Jo(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:k().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:k().activeTextEditor,visibleTextEditors:k().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:s}})=>({editor:s,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var af=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:s}=n,l=this.makeTokenLive(s);return this.map[al(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=Ar(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[al(e,Jo().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var c4=6e4,sf=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;k().disposeOnExit(this),this.activeMap=new af(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new of(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>c4?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function tS(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var oS=on(gl(),1);function aS(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:s,end:l}}=e;return(0,oS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,oS.invariant)(n>=s&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=s?s+o:Math.min(s,i),end:n<=l?l+o:Math.min(l,i)}}var uP=on(gl(),1);function sS(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,uP.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let s=e.expansionBehavior.end;switch(s.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(om(s.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let s=e.expansionBehavior.start;switch(s.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(im(s.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var cS=on(gl(),1);function lS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:s},text:l}=e;if((0,cS.invariant)(s>o,()=>"Selection range expected to be nonempty"),(0,cS.invariant)(n>=o&&n<=s,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<s)return{start:o,end:s+i};if(n===o){let u=e.expansionBehavior.start,m=s+i;switch(u.type){case"closed":return{start:o+i,end:m};case"open":return{start:o,end:m};case"regex":{let d=r+l,g=im(u.regex),y=d.search(g);for(;y>r.length;)d=d.slice(0,y),y=d.search(g);return y===-1?{start:o,end:m}:{start:o+y,end:m}}}}else{let u=e.expansionBehavior.end,m=o;switch(u.type){case"closed":return{start:m,end:s};case"open":return{start:m,end:s+i};case"regex":{let d=l+r,g=om(u.regex),y=d.match(g),x=y==null?0:y[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,y=d.match(g),x=y==null?0:x+y[0].length;return x===0?{start:m,end:s}:{start:m,end:o+x}}}}}function pP(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:s}=e.offsets,l=Math.min(n,o),u="";return o<n&&(u+=e.text.substring(0,n-o)),u+=t.event.text,i<s&&(u+=e.text.substring(s-i,e.text.length)),u.substring(r.start-l,r.end-l)}function mP(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let s=o.text.length-o.rangeLength,l=o.rangeOffset,u=l+o.rangeLength,m=l,d=u+s;return{displacement:s,event:o,originalOffsets:{start:l,end:u},finalOffsets:{start:m,end:d}}});for(let o of e){let s=o.offsets,l=i.map(m=>{let d;return m.originalOffsets.start>s.end?{start:0,end:0}:m.originalOffsets.end<s.start?{start:m.displacement,end:m.displacement}:(m.event.rangeLength===0?o.range.isEmpty?d=sS(m,o):d=lS(m,o):d=aS(m,o),o.text=pP(m,o,d),{start:d.start-s.start,end:d.end-s.end})}),u={start:s.start+Xp(l,({start:m})=>m),end:s.end+Xp(l,({end:m})=>m)};o.range=o.range.with(r.positionAt(u.start),r.positionAt(u.end)),o.offsets=u}}var lf=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return tS(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return tS(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>pr(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>pr(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=k().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>y4(r,i)?{...i,isReplace:!0}:i)};mP(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function y4(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var uf=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var pf=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var mf=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var ff=class{getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e,r){throw new Error("Snippets are not implemented.")}};var df=class{getSpokenFormEntries(){throw new ds}onDidChange(){return{dispose:()=>{}}}};var gf=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}createQuery(e,r){throw new Error("Tree sitter not provided")}};var lt=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var fP={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleBacktickQuotes:["```","```"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var dP=new ro(t=>t);for(let[t,e]of Object.entries(fP))e!=null&&dP.set(e,t);function gP(t,e,r){let n=dP.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}function hP(t){throw new lt(`${t.type} insertion snippet`)}function yP(t){throw new lt(`${t.type} wrap with snippet`)}function hl(t,e,r){let n=r==="vertical"?`${bt.verticalRange} `:"";if(t&&e)return n+bt.rangeExclusive;if(t)throw new lt("Range exclude anchor");return e?n+bt.rangeExcludingEnd:r==="vertical"?bt.verticalRange:bt.rangeInclusive}function TP(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var T4=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],x4=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function _s(t){let e=T4[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function yl(t){let e=x4[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var hf=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new lt(`Modifier '${e.type}'`);case"containingScope":return e.ancestorIndex==null||e.ancestorIndex===0?this.handleScopeType(e.scopeType):[new Array(e.ancestorIndex).fill(this.spokenFormMap.modifierExtra.ancestor),this.handleScopeType(e.scopeType)];case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,yl(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,yl(e.start+1),r];let i=_s(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,Tl(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,Tl(r)];throw new lt(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:yl(e.anchor.start+1),n=this.handleModifier(e.active),i=hl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let s=e.direction==="forward"?bt.forward:bt.backward;return[n,r,s]}let i=_s(e.length),o=Tl(r);return e.direction==="forward"?[n,i,o]:[n,i,o,bt.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?bt.next:bt.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=_s(e.length);if(e.length===1)return[i,n,r];let s=Tl(r);return[i,n,o,s]}if(e.length===1){let o=yl(e.offset);return[i,o,n,r]}throw new lt(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new lt(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,SP(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};case"interior":return this.spokenFormMap.simpleModifier.interiorOnly;default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(lA(r)),n!=null&&i.push(uA(n)),i.push(SP(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let s=hl(e.excludeAnchor,e.excludeActive);return[r,n,s,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new lt(`Mark '${e.type}'`);default:return[Dm[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new lt("Absolute line numbers");case"modulo100":return[Mm.modulo100,_s(e.lineNumber+1)];case"relative":return[e.lineNumber<0?Mm.relativeUp:Mm.relativeDown,_s(Math.abs(e.lineNumber))]}}};function Tl(t){if(typeof t=="string")return xP(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),Tl(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(xP)}}}function xP(t){return`${t}s`}function SP(t,e,r){let n=t[r];if(n==null)throw new lt(`${e} '${r}'`);return n}var Rs=class{constructor(e){this.spokenFormMap=TP(e),this.primitiveGenerator=new hf(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new lt(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:vP(e())}}catch(r){if(r instanceof lt)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new lt(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),bt.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[gP(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],hP(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new lt(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[yP(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new lt(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new lt("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[bt.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=hl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new lt("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[bt.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return bt.sourceDestinationConnective;case"before":return bt.before;case"after":return bt.after}}};function vP(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:bP(t.map(vP)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${rl(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new lt(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function bP(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=bP(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var yf=class{constructor(e){this.talonSpokenForms=e;this.notifier=new er;this.spokenFormMap_={...Pn};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps()),this.customSpokenFormsInitialized=this.updateSpokenFormMaps()}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof tl)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof ds)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");pt(k().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}this.spokenFormMap_={...Pn},this.notifier.notifyListeners();return}for(let r of Wk)S4(this.spokenFormMap_,r,Ix[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function S4(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let s of i){let{defaultSpokenForms:l=[],isPrivate:u=!1}=r[s]??{},m=n[s];o[s]=m==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!u,isCustom:!1,isPrivate:u}:{defaultSpokenForms:l,spokenForms:m,requiresTalonUpdate:!1,isCustom:!Ei(l,m),isPrivate:u}}t[e]=o}var Tf=class{constructor(e){this.customSpokenForms=new yf(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new Rs(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new Rs(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*v4(t){for(let e of t)for(let r of e)yield r}function*xl(t,e){let r=Sf(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*uS(t){let e=Sf(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var Txe=Symbol();function*b4(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*xf(t,e){let r=0;for(let n of t)e(n,r++)&&(yield n)}function*Gt(t,e){for(let r of t)yield e(r)}function*EP(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let s=-1,l=Sf(t),u;for(;;){if(s++,o!==null&&s>=o||(u=l.next(),u.done))return;s<i||(s-i)%n===0&&(yield u.value)}}function*w4(t,e){let r=0,n=Sf(t),i;for(;!(i=n.next()).done;){let o=i.value;if(!e(o,r++))return;yield o}}function Sf(t){return t[Symbol.iterator]()}function ks(t,e){return Array.from(Gt(t,e))}function wP(t,e,r){let n=b4(t,r),i=r>=0?o=>o<e:o=>o>e;return w4(n,i)}function _P(t,e,r=1){return e!==void 0?wP(t,e,r):wP(0,t,r)}function vf(t,e){return v4(Gt(t,e))}function jr(t,e,{domain:r},{domain:n}){return t==="forward"?E4(e,r,n):_4(e,r,n)}function E4(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let s=e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&!i){let s=e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&i){let s=e.end.compareTo(r.start);return s!==0?s:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function _4(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let s=-e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&!i){let s=-e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&i){let s=-e.start.compareTo(r.end);return s!==0?s:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function RP(t,e,r,n,i,o){return R4(t,n,i,o)&&(i==null||jr(r,n.includeDescendantScopes?t:e,i,o)<0)}function R4(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:s,skipAncestorScopes:l}=e,{domain:u}=n;switch(i){case"disallowed":if(u.contains(t))return!1;break;case"disallowedIfStrict":if($A(u,t))return!1;break;case"required":if(!u.contains(t))return!1;break}return l&&r!=null&&u.contains(r.domain)?!1:k4(new Y(t,o),u,s)}function k4(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var A4={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},je=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...A4,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},s,l=r;for(let u of this.generateScopeCandidates(e,r,n,o))if(RP(r,l,n,o,s,u)&&(yield u,s=u,l=n==="forward"?u.domain.end:u.domain.start),this.canStopEarly(r,n,o,s,u))return}canStopEarly(e,r,n,i,o){let{containment:s,distalPosition:l,skipAncestorScopes:u}=n;if(this.isHierarchical&&!u)return!1;let m=this.isHierarchical&&u?i:o;return m==null?!1:!!(s==="required"&&(r==="forward"?m.domain.end.isAfter(e):m.domain.start.isBefore(e))||(r==="forward"?m.domain.end.isAfterOrEqual(l):m.domain.start.isBeforeOrEqual(l)))}};var Pr=class extends je{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:s,...l}=o,u=this.searchScopeHandler.generateScopes(r,n,i,{containment:s==="required"?"required":void 0,...l});return vf(u,m=>this.generateScopesInSearchScope(i,m))}};var bf=class extends je{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield kP(r,o);else for(let o=n.line;o>=0;o--)yield kP(r,o)}};function kP(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[pS(t,n,r)]}}function pS(t,e,r){return new fr({editor:t,isReversed:e,contentRange:mS(t,r)})}function mS(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new Y(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function fn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),s=l=>new Y(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Gt(o.matchAll(t),s):Array.from(o.matchAll(t),s).reverse()}var wf=class extends Pr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=Ar(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Gt(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new rr({editor:n,contentRange:o,isReversed:s})]}))}};function Ef(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let s=Wo(o,n),l=Wo(o,i);if(s&&!l)return!0;if(l&&!s)return!1}}var P4=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,D4=/[$]/g,M4=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,_f=class extends Pr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Gt(fn(P4,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Ye({editor:n,contentRange:o,isReversed:s,textualType:"character"})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Ar(this.languageId);return Ef(r,n,[i,D4,M4])}};var Rf=class extends Pr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new Es(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(u=>new Y(i.positionAt(o+u.index),i.positionAt(o+u.index+u.text.length)));return l.map((u,m)=>({editor:r,domain:u,getTargets:d=>{let g=m>0?l[m-1]:null,y=m+1<l.length?l[m+1]:null;return[L4(d,r,g,u,y)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function L4(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new Y(r.end,n.start):void 0,s=i!=null&&i.start.isAfter(n.end)?new Y(n.end,i.start):void 0,u=o!=null||s!=null?e.document.getText(o??s):"";return new Qm({editor:e,isReversed:t,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:o,trailingDelimiterRange:s})}var F4=/[$]/g,kf=class extends Pr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=Ar(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Gt(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new rr({editor:n,contentRange:o,isReversed:s})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Ar(this.languageId);return Ef(r,n,[i,F4])}};var Af=class extends je{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:s=>[new qm({editor:r,isReversed:s,contentRange:o})]}}};function Pf(t,e,r,n,i){if(!t&&n!=null&&i!=null&&Kx(e,n)>Kx(e,i))return r.union(n)}function As(t){return t.containment==null&&t.skipAncestorScopes}function AP(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:s,end:l}=I4(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(s),end:t.positionAt(l)}}function I4(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let s=n==="disallowed"?1:-o;return r==="forward"?{start:t+s,end:e+o}:{start:e-o,end:t-s}}function PP(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Ps=class extends je{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:s}=r,l=As(o),{start:u,end:m}=AP(s,n,i,o),d=this.query.matches(s,u,m).map(g=>this.matchToScope(r,g,l)).filter(g=>g!=null).sort((g,y)=>jr(i,n,g,y));yield*PP(d,(g,y)=>g.domain.isRangeEqual(y.domain),g=>g.length===1?g[0]:{...g[0],getTargets(y){let x=Wc(g.flatMap(E=>E.getTargets(y)),(E,w)=>E.isEqual(w));if(x.length>1&&!g.every(E=>E.allowMultiple)){let E="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(pt(k().messages,"BaseTreeSitterScopeHandler.allow-multiple",E),k().runMode==="test")throw Error(E)}return x}})}};function fS(t,e,r,n){return n?Ds(t,`${e}.${r}`,`_.${r}`):Ds(t,`${e}.${r}`)??(Ds(t,e)!=null?Ds(t,`_.${r}`):void 0)}function lo(t,e,r,n){return fS(t,e,r,n)?.range}function Ds(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var Df=class extends Ps{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n,i){let o=this.iterateeScopeType.type,s=fS(n,o,"iteration",!1);if(s==null)return;let{range:l,allowMultiple:u}=s;if(l.isEmpty)return;let m=lo(n,o,"iteration.domain",!1)??l;return{editor:r,domain:m,allowMultiple:u,getTargets:d=>[new Ye({editor:r,isReversed:d,contentRange:l})]}}};var Mf=class extends Ps{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new Df(this.query,this.scopeType)}}matchToScope(r,n,i){let o=this.scopeType.type,s=Ds(n,o);if(s==null)return;let{range:l,allowMultiple:u,insertionDelimiter:m}=s,d=lo(n,o,"domain",!0)??l,g=lo(n,o,"prefix",!0)?.with(void 0,l.start),y=lo(n,o,"leading",!0)?.with(void 0,g?.start??l.start),x=lo(n,o,"trailing",!0)?.with(l.end),E=lo(n,o,"removal",!0);return E==null&&(o==="collectionItem"||o==="argumentOrParameter")&&(E=Pf(i,r,l,y,x)),{editor:r,domain:d,allowMultiple:u,getTargets:w=>[new vs({scopeTypeType:o,editor:r,isReversed:w,contentRange:l,prefixRange:g,removalRange:E,leadingDelimiterRange:y,trailingDelimiterRange:x,insertionDelimiter:m})]}}};function DP(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function MP(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,s=!1;for(;!s&&!e(o);)({value:o,done:s}=n.next());return s?[]:[{iterator:n,value:o,index:i}]})}var Xn=class t extends je{constructor(r,n){super();this.scopeHandlers=r;this.getIterationScopeHandler=n;this.isHierarchical=!0;this.scopeType=void 0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(r,i,o)}static createFromScopeHandlers(r,n,i){let o=()=>new t(i.map(s=>r.create(s.iterationScopeType,n)),()=>{throw new Error("Not implemented")});return new t(i,o)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let u=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[u].generateScopes(r,n,i,o);return}let s=this.scopeHandlers.map(u=>u.generateScopes(r,n,i,o)[Symbol.iterator]()),l=DP(s);for(;l.length>0;){l.sort((d,g)=>jr(i,n,d.value,g.value));let u=l[0],m=u.value;this.lastYieldedIndex=u.index,yield m,l=MP(l,d=>jr(i,n,m,d)<0)}}};var Lf=class extends je{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,s=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,u=C4(o,n,i),m=r.document.lineAt(n);for(let d=n.line+s;d!==l;d+=s){let g=r.document.lineAt(d);g.isEmptyOrWhitespace?u!=null&&(yield LP(r,u.range.union(m.range)),u=void 0):u==null&&(u=g),m=g}u!=null&&(yield LP(r,u.range.union(m.range)))}};function C4(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let s=e.line+n;s!==i;s+=n){let l=t.lineAt(s);if(l.isEmptyOrWhitespace)break;o=l}return o}}function LP(t,e){return{editor:t,domain:e,getTargets:r=>[new oo({editor:t,isReversed:r,contentRange:mS(t,e)})]}}function Sl(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function FP(t,e){return t.slice(t.length-e.length)===e}var dS,N4=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function IP(t){t?dS=t:dS=N4}function gS(t){return/^[A-Z][a-z].*/.test(t)||Ff(t)}function CP(t){return gS(t)||/``|"|'/.test(t.substring(0,2))}function OP(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~dS.indexOf(e)}function NP(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function hS(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function UP(t){return t.length<=3?!0:gS(t)}function yS(t,e){return e.length>0?t<5&&e[0].length<6&&gS(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function Ff(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function HP(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function BP(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function VP(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function WP(t){return t==="."||t==="!"||t==="?"}var jP=" @~@ ",$P=jP.trim(),H4=new RegExp("\\S",""),B4=new RegExp("\\n+|[-#=_+*]{4,}","g"),V4=new RegExp("\\S+|\\n","g"),W4={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function zP(t,e){if(!t)return[];if(!H4.test(t))return[];let r={...W4,...e};IP(r.abbreviations),r.newlineBoundaries&&(t=t.replace(B4,jP));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(g,y){return y%2})):n=t.trim().match(V4)??[];let o=0,s=0,l=[],u=[],m=[];if(!n||!n.length)return[];for(let g=0,y=n.length;g<y;g++){if(o++,m.push(n[g]),~n[g].indexOf(",")&&(o=0),WP(n[g])||Sl(n[g],"?!")||n[g]===$P){r.newlineBoundaries&&n[g]===$P&&m.pop(),u.push(m),o=0,m=[];continue}if((Sl(n[g],'"')||Sl(n[g],"\u201D"))&&(n[g]=n[g].slice(0,-1)),Sl(n[g],".")){if(g+1<y){if(n[g].length===2&&isNaN(n[g].charAt(0))||OP(n[g]))continue;if(CP(n[g+1])){if(NP(n[g],n[g+1])||yS(o,n.slice(g,6))||Ff(n[g+1])&&UP(n[g]))continue}else if(FP(n[g],"..")||hS(n[g])||yS(o,n.slice(g,5)))continue}u.push(m),m=[],o=0;continue}(s=n[g].indexOf("."))>-1&&(Ff(n[g],s)||hS(n[g])||BP(n[g])||HP(n[g]))||(l=VP(n[g]))&&(m.pop(),m.push(l[0]),u.push(m),m=[],o=0,m.push(l[1]))}return m.length&&u.push(m),u=u.filter(function(g){return g.length>0}),u.slice(1).reduce(function(g,y){let x=g[g.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(y[0])?(g.pop(),g.push(x.concat(y)),g):(g.push(y),g)},[u[0]]).map(function(g,y){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=g.length*2;return y===0&&(x+=1),i.splice(0,x).join("")}return g.join(" ")})}var $4=/\S*\p{L}/u,qP=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,j4={newlineBoundaries:!1,preserveWhitespace:!0},If=class{*segment(e){let r=zP(e,j4),n=0;for(let i of r){let o=i.split(qP).filter(s=>s!=null);for(let s of o){if(!q4(s)){let l=z4(s,n);l!=null&&(yield l)}n+=s.length}}}};function z4(t,e){let r=zR($4,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function q4(t){return Wo(qP,t)}var Cf=class extends Pr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new If}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),s=n.document.getText(i),l=m=>{let d=new Y(n.document.positionAt(o+m.index),n.document.positionAt(o+m.index+m.text.length));return{editor:n,domain:d,getTargets:g=>[new rr({editor:n,contentRange:d,isReversed:g})]}},u=this.segmenter.segment(s);return r==="forward"?Gt(u,l):Array.from(u,l).reverse()}};var Ms=class extends Pr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Gt(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new rr({editor:n,contentRange:o,isReversed:s})]}))}},Of=class extends Ms{constructor(){super(...arguments);this.regex=/\S+/g}},Nf=class extends Ms{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},Uf=class extends Ms{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},Hf=class extends Ms{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Br(this.scopeType.character),"gui")}};var Bf=class extends je{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let s=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:As(o)?"required":o.containment}));for(let u of s){let m=[];for(let d of l){let g=u.domain.intersection(d.domain);g!=null&&!g.isEmpty&&m.push({editor:r,domain:g,getTargets:y=>[this.getTargets(GP(u,y),GP(d,y))]})}m.push(u),m.sort((d,g)=>jr(i,n,d,g)),yield*m}}};function GP(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var Vf=class extends Bf{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new rr({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},Wf=class extends Bf{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof oo))throw Error("Expected ParagraphTarget");return new Jm({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var Jn=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var Ls=class{constructor(e){this.children=G4(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function G4(t){let e=[],r=[];for(let n of t){let i=new TS(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new Jn(e)}var TS=class{constructor(e){this.item=e;this.children=new Jn([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var K4=",",xS=new RegExp(K4,"g");function KP(t){let e=t.getText();return sn(e,xS,r=>new Y(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var QP={type:"fallback",scopeTypes:[{type:"conditional",scopeType:{type:"surroundingPairInterior",delimiter:"collectionBoundary"},predicate:t=>!t.domain.isEmpty},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return Wo(xS,e)}}]};function SS(t,e,r,n,i,o){let s=i!=null?new Y(i.end,n.start):void 0,l=o!=null?new Y(n.end,o.start):void 0,u=Pf(t,e,n,s,l),m=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(d){return[new vs({scopeTypeType:"collectionItem",editor:e,isReversed:d,contentRange:n,insertionDelimiter:m,leadingDelimiterRange:s,trailingDelimiterRange:l,removalRange:u})]}}}function vS(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new _e(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var $f=class extends je{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return QP}*generateScopeCandidates(r,n,i,o){let s=As(o),l=KP(r.document),u=vS(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),m=new Ls(u),d=vS(this.scopeHandlerFactory,this.languageId,r,"string"),g=new Jn(d),y=[],x=new Set,E=[];for(let w of l){if(g.contains(w))continue;let U;for(;E.length>0;){let ie=E[E.length-1];if(ie.iterationRange.contains(w)){U=ie;break}this.addScopes(y,ie),E.pop()}let W=m.getSmallestContaining(w)?.range,q=W??r.document.lineAt(w.start.line).range;if(U!=null&&U.iterationRange.isRangeEqual(q)){U.delimiters.push(w);continue}W!=null&&x.add(W),E.push({editor:r,isEveryScope:s,iterationRange:q,delimiters:[w]})}for(let w of E)this.addScopes(y,w);for(let w of u)if(!x.has(w.range)&&!w.range.isEmpty){let U=Xo(r,w.range);U.isEmpty||y.push(SS(s,r,w.range,U))}y.sort((w,U)=>jr(i,n,w,U)),yield*y}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:s,delimiters:l}=n;if(l.length===0)return;let u=[];for(let g=0;g<l.length;++g){let y=l[g],x=l[g-1]?.end??o.start;u.push(new Y(x,y.start))}let m=l[l.length-1];u.push(new Y(m.end,o.end));let d=u.map(g=>Xo(i,g));for(let g=0;g<d.length;++g)g===d.length-1&&i.document.getText(d[g]).trim()===""||r.push(SS(s,i,o,d[g],d[g-1],d[g+1]))}};var jf=class extends je{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new $f(r,i),s=n.get(i)?.getScopeHandler(this.scopeType);return s==null?o:Xn.createFromScopeHandlers(r,i,[s,o])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var zf=class extends je{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new vt("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let s=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return xf(s.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var Fs=class t extends je{constructor(r){super();this.scopeHandlers=r;this.scopeType=void 0;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(o)}static createFromScopeHandlers(r){return new t(r)}get iterationScopeType(){throw new vt("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){for(let s of this.scopeHandlers)yield*s.generateScopes(r,n,i,o)}};var qf=class extends je{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let s=Q4(r,n,i,o);for(let l of s)yield Z4(l)}};function Q4(t,e,r,n){let i=Y4(t);if(i==null)return[];let{notebook:o,cell:s}=i;return n.containment==="required"?[s]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(s.index+1):o.cells.slice(0,s.index).reverse():n.distalPosition!=null&&new Y(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(s.index):o.cells.slice(0,s.index+1).reverse()}function Y4(t){let e=t.document.uri.toString();for(let r of k().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function Z4(t){let e=X4(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new Km({editor:e,isReversed:n,contentRange:r})]}}function X4(t){let e=t.document.uri.toString();for(let r of k().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var Gf=class extends je{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let s=new qf,l=n.get(o)?.getScopeHandler(this.scopeType);return l==null?s:Xn.createFromScopeHandlers(r,o,[l,s])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Kf=class extends je{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let s=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of s)yield{editor:r,domain:l.domain,getTargets(u){return l.getTargets(u).flatMap(m=>m.getInterior())}}}};function YP(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new Y(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:s=>[new Ym({editor:t,isReversed:s,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function ZP(t){let e=Vo(t.map(({text:r})=>r)).map(Br).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function JP(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new Jn(bS(n.disqualifyDelimiter)),o=new Jn(bS(n.pairDelimiter)),s=new Ls(bS(n.textFragment)),l=Object.fromEntries(r.map(d=>[d.text,d])),u=ZT(e.getText(),ZP(r)),m=[];for(let d of u){let g=d[0],y=new Y(e.positionAt(d.index),e.positionAt(d.index+g.length));XP(i.getContaining(y))==null&&m.push({delimiterInfo:l[g],textFragmentRange:s.getSmallestContaining(y)?.range,range:XP(o.getContaining(y))?.range??y})}return m}function XP(t){return t!=null&&!t.hasError()?t:void 0}function bS(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var Qf=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],curlyBrackets:[["{","${"],"}"],tripleBacktickQuotes:[[],[]],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],backtickQuotes:["`","`"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),eD={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},markdown:{tripleBacktickQuotes:["```","```"]},ruby:{tripleDoubleQuotes:["%Q(",")"]},csharp:{doubleQuotes:[['@"','"'],['"','"']]}},wbe=Object.fromEntries(Object.values(Qf)),tD={any:ol(Qf),string:["tripleDoubleQuotes","tripleSingleQuotes","tripleBacktickQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function rD(t){return t!=null&&t in eD?{...Qf,...eD[t]}:Qf}function nD(t,e){let r=tD[t]??[t];return J4(e,r)}function J4(t,e){let r=rD(t);return e.flatMap(n=>{let[i,o,s]=r[n],{isSingleLine:l=!1}=s??{},u=nl(i)?[i]:i,m=nl(o)?[o]:o;return Vo(Vc(u,m)).map(g=>{let y=u.includes(g),x=m.includes(g);return{text:g,side:y&&!x?"left":!y&&x?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function iD(t){let e=[],r=[];for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:s},textFragmentRange:l,range:u}=n;if(o==="left")r.push(n);else{let m=Bo(r,g=>g.delimiterInfo.delimiterName===i&&e9(g.textFragmentRange,l)&&t9(s,g.range,u));if(m===-1){o==="unknown"&&r.push(n);continue}let d=r[m];r.length=m,e.push({delimiterName:i,openingDelimiterRange:d.range,closingDelimiterRange:u})}}return e}function e9(t,e){return t==null||e==null?t===e:t.isRangeEqual(e)}function t9(t,e,r){return!t||e.start.line===r.start.line}var Yf=class extends je{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"conditional",scopeType:{type:"line"},predicate:r=>!r.domain.isEmpty};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){pt(k().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let s=JP(this.languageDefinitions.get(this.languageId),r.document,nD(this.scopeType.delimiter,this.languageId)),l=iD(s);l=r9(i,o,n,l),yield*l.map(u=>YP(r,u,this.scopeType.requireStrongContainment??!1)).sort((u,m)=>jr(i,n,u,m))}};function r9(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var Zf=class extends je{constructor(r,n,i,o){super();this.scopeHandlerFactory=r;this.languageDefinitions=n;this.scopeType=i;this.languageId=o;this.isHierarchical=!0}get iterationScopeType(){throw new vt("Iteration scope for InteriorScopeHandler")}*generateScopeCandidates(r,n,i,o){let s=new Y(n,o.distalPosition),l=this.getScopeHandler();if(l==null)return;let u=l.generateScopes(r,n,i,o);for(let m of u)this.shouldYield(s,m)&&(yield n9(m))}getScopeHandler(){let r=this.languageDefinitions.get(this.languageId)?.getScopeHandler(this.scopeType),n=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:"any"},this.languageId);return this.scopeType.explicitScopeType?r==null?n:Fs.createFromScopeHandlers([r,n]):r==null?n:Xn.createFromScopeHandlers(this.scopeHandlerFactory,this.languageId,[r,n])}shouldYield(r,n){return!this.scopeType.explicitScopeType||r.contains(n.domain)}};function n9(t){return{editor:t.editor,domain:t.domain,getTargets(e){return t.getTargets(e).flatMap(i9)}}}function i9(t){let e=t.getInterior();return e??[new bs({editor:t.editor,isReversed:t.isReversed,fullInteriorRange:t.contentRange})]}var Is=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new _f(this,e,r);case"word":return new Rf(this,e,r);case"token":return new kf(this,e,r);case"identifier":return new wf(this,e,r);case"line":return new bf(e,r);case"sentence":return new Cf(this,e,r);case"paragraph":return new Lf(e,r);case"boundedParagraph":return new Wf(this,e,r);case"document":return new Af(e,r);case"nonWhitespaceSequence":return new Of(this,e,r);case"boundedNonWhitespaceSequence":return new Vf(this,e,r);case"url":return new Nf(this,e,r);case"customRegex":return new Uf(this,e,r);case"glyph":return new Hf(this,e,r);case"collectionItem":return new jf(this,this.languageDefinitions,r);case"surroundingPair":return new Yf(this.languageDefinitions,e,r);case"surroundingPairInterior":return new Kf(this,e,r);case"notebookCell":return new Gf(this,this.languageDefinitions,e,r);case"interior":return new Zf(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return Xn.create(this,e,r);case"fallback":return Fs.create(this,e,r);case"conditional":return new zf(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function oD(t){return new Y(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function aD(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:u})=>u.endsWith(".start")).map(({range:{end:u}})=>u).sort((u,m)=>u.compareTo(m)).at(-1),i=t.filter(({name:u})=>u.endsWith(".end")).map(({range:{start:u}})=>u).sort((u,m)=>u.compareTo(m)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(pt(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t.map(u=>u.name)}`),r=!0);let o=t.filter(({name:u})=>u.endsWith(".start")).length,s=t.filter(({name:u})=>u.endsWith(".end")).length,l=t.length-o-s;return l>0&&(o>0||s>0)&&(pt(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:u,range:m})=>u+" "+m.toString())}`),r=!0),l>1&&(pt(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:u,range:m})=>u+" "+m.toString())}`),r=!0),!r}function sD(t){if(t.hasError)return!0;let e=t.parent;for(;e!=null;){if(e.isError)return!0;if(e.hasError)return!1;if(e.previousSibling?.isError||e.nextSibling?.isError)return!0;e=e.parent}return!1}function wS(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var Le={};T_(Le,{BRAND:()=>D9,DIRTY:()=>ta,EMPTY_PATH:()=>c9,INVALID:()=>Te,NEVER:()=>d6,OK:()=>nr,ParseStatus:()=>Kt,Schema:()=>Ie,ZodAny:()=>mo,ZodArray:()=>Mi,ZodBigInt:()=>na,ZodBoolean:()=>ia,ZodBranded:()=>bl,ZodCatch:()=>ga,ZodDate:()=>oa,ZodDefault:()=>da,ZodDiscriminatedUnion:()=>ed,ZodEffects:()=>hn,ZodEnum:()=>ma,ZodError:()=>Dr,ZodFirstPartyTypeKind:()=>we,ZodFunction:()=>rd,ZodIntersection:()=>la,ZodIssueCode:()=>te,ZodLazy:()=>ua,ZodLiteral:()=>pa,ZodMap:()=>Bs,ZodNaN:()=>Ws,ZodNativeEnum:()=>fa,ZodNever:()=>Ln,ZodNull:()=>sa,ZodNullable:()=>ri,ZodNumber:()=>ra,ZodObject:()=>Mr,ZodOptional:()=>dn,ZodParsedType:()=>ce,ZodPipeline:()=>wl,ZodPromise:()=>fo,ZodReadonly:()=>ha,ZodRecord:()=>td,ZodSchema:()=>Ie,ZodSet:()=>Vs,ZodString:()=>po,ZodSymbol:()=>Us,ZodTransformer:()=>hn,ZodTuple:()=>ti,ZodType:()=>Ie,ZodUndefined:()=>aa,ZodUnion:()=>ca,ZodUnknown:()=>Di,ZodVoid:()=>Hs,addIssueToContext:()=>oe,any:()=>H9,array:()=>$9,bigint:()=>I9,boolean:()=>TD,coerce:()=>f6,custom:()=>gD,date:()=>C9,datetimeRegex:()=>fD,defaultErrorMap:()=>Ai,discriminatedUnion:()=>G9,effect:()=>o6,enum:()=>r6,function:()=>J9,getErrorMap:()=>Cs,getParsedType:()=>ei,instanceof:()=>L9,intersection:()=>K9,isAborted:()=>Xf,isAsync:()=>Os,isDirty:()=>Jf,isValid:()=>uo,late:()=>M9,lazy:()=>e6,literal:()=>t6,makeIssue:()=>vl,map:()=>Z9,nan:()=>F9,nativeEnum:()=>n6,never:()=>V9,null:()=>U9,nullable:()=>s6,number:()=>yD,object:()=>j9,objectUtil:()=>ES,oboolean:()=>m6,onumber:()=>p6,optional:()=>a6,ostring:()=>u6,pipeline:()=>l6,preprocess:()=>c6,promise:()=>i6,quotelessJson:()=>o9,record:()=>Y9,set:()=>X9,setErrorMap:()=>s9,strictObject:()=>z9,string:()=>hD,symbol:()=>O9,transformer:()=>o6,tuple:()=>Q9,undefined:()=>N9,union:()=>q9,unknown:()=>B9,util:()=>Ve,void:()=>W9});var Ve;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(let l of o)s[l]=i[l];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(let s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ve||(Ve={}));var ES;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(ES||(ES={}));var ce=Ve.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ei=t=>{switch(typeof t){case"undefined":return ce.undefined;case"string":return ce.string;case"number":return Number.isNaN(t)?ce.nan:ce.number;case"boolean":return ce.boolean;case"function":return ce.function;case"bigint":return ce.bigint;case"symbol":return ce.symbol;case"object":return Array.isArray(t)?ce.array:t===null?ce.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ce.promise:typeof Map<"u"&&t instanceof Map?ce.map:typeof Set<"u"&&t instanceof Set?ce.set:typeof Date<"u"&&t instanceof Date?ce.date:ce.object;default:return ce.unknown}};var te=Ve.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),o9=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Dr=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let l=n,u=0;for(;u<s.path.length;){let m=s.path[u];u===s.path.length-1?(l[m]=l[m]||{_errors:[]},l[m]._errors.push(r(s))):l[m]=l[m]||{_errors:[]},l=l[m],u++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ve.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Dr.create=t=>new Dr(t);var a9=(t,e)=>{let r;switch(t.code){case te.invalid_type:t.received===ce.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case te.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ve.jsonStringifyReplacer)}`;break;case te.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ve.joinValues(t.keys,", ")}`;break;case te.invalid_union:r="Invalid input";break;case te.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ve.joinValues(t.options)}`;break;case te.invalid_enum_value:r=`Invalid enum value. Expected ${Ve.joinValues(t.options)}, received '${t.received}'`;break;case te.invalid_arguments:r="Invalid function arguments";break;case te.invalid_return_type:r="Invalid function return type";break;case te.invalid_date:r="Invalid date";break;case te.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ve.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case te.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case te.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case te.custom:r="Invalid input";break;case te.invalid_intersection_types:r="Intersection results could not be merged";break;case te.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case te.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ve.assertNever(t)}return{message:r}},Ai=a9;var cD=Ai;function s9(t){cD=t}function Cs(){return cD}var vl=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",u=n.filter(m=>!!m).slice().reverse();for(let m of u)l=m(s,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},c9=[];function oe(t,e){let r=Cs(),n=vl({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Ai?void 0:Ai].filter(i=>!!i)});t.common.issues.push(n)}var Kt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Te;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,s=await i.value;n.push({key:o,value:s})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return Te;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},Te=Object.freeze({status:"aborted"}),ta=t=>({status:"dirty",value:t}),nr=t=>({status:"valid",value:t}),Xf=t=>t.status==="aborted",Jf=t=>t.status==="dirty",uo=t=>t.status==="valid",Os=t=>typeof Promise<"u"&&t instanceof Promise;var pe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(pe||(pe={}));var gn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},lD=(t,e)=>{if(uo(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Dr(t.common.issues);return this._error=r,this._error}}};function Ae(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,l)=>{let{message:u}=t;return s.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??n??l.defaultError}:s.code!=="invalid_type"?{message:l.defaultError}:{message:u??r??l.defaultError}},description:i}}var Ie=class{get description(){return this._def.description}_getType(e){return ei(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:ei(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Kt,ctx:{common:e.parent.common,data:e.data,parsedType:ei(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Os(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ei(e)},i=this._parseSync({data:e,path:n.path,parent:n});return lD(n,i)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ei(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return uo(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>uo(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ei(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(Os(i)?i:Promise.resolve(i));return lD(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let s=e(i),l=()=>o.addIssue({code:te.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new hn({schema:this,typeName:we.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return dn.create(this,this._def)}nullable(){return ri.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Mi.create(this)}promise(){return fo.create(this,this._def)}or(e){return ca.create([this,e],this._def)}and(e){return la.create(this,e,this._def)}transform(e){return new hn({...Ae(this._def),schema:this,typeName:we.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new da({...Ae(this._def),innerType:this,defaultValue:r,typeName:we.ZodDefault})}brand(){return new bl({typeName:we.ZodBranded,type:this,...Ae(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new ga({...Ae(this._def),innerType:this,catchValue:r,typeName:we.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return wl.create(this,e)}readonly(){return ha.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},l9=/^c[^\s-]{8,}$/i,u9=/^[0-9a-z]+$/,p9=/^[0-9A-HJKMNP-TV-Z]{26}$/i,m9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,f9=/^[a-z0-9_-]{21}$/i,d9=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,g9=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,h9=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,y9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",_S,T9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,x9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,S9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,v9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,b9=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,w9=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,pD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",E9=new RegExp(`^${pD}$`);function mD(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function _9(t){return new RegExp(`^${mD(t)}$`)}function fD(t){let e=`${pD}T${mD(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function R9(t,e){return!!((e==="v4"||!e)&&T9.test(t)||(e==="v6"||!e)&&S9.test(t))}function k9(t,e){if(!d9.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function A9(t,e){return!!((e==="v4"||!e)&&x9.test(t)||(e==="v6"||!e)&&v9.test(t))}var po=class t extends Ie{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ce.string){let o=this._getOrReturnCtx(e);return oe(o,{code:te.invalid_type,expected:ce.string,received:o.parsedType}),Te}let n=new Kt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),oe(i,{code:te.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),oe(i,{code:te.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,l=e.data.length<o.value;(s||l)&&(i=this._getOrReturnCtx(e,i),s?oe(i,{code:te.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&oe(i,{code:te.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")h9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"email",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")_S||(_S=new RegExp(y9,"u")),_S.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"emoji",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")m9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"uuid",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")f9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"nanoid",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")l9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"cuid",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")u9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"cuid2",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")p9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"ulid",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),oe(i,{validation:"url",code:te.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"regex",code:te.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),oe(i,{code:te.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),oe(i,{code:te.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),oe(i,{code:te.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?fD(o).test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{code:te.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?E9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{code:te.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?_9(o).test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{code:te.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?g9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"duration",code:te.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?R9(e.data,o.version)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"ip",code:te.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?k9(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"jwt",code:te.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?A9(e.data,o.version)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"cidr",code:te.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?b9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"base64",code:te.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?w9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"base64url",code:te.invalid_string,message:o.message}),n.dirty()):Ve.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:te.invalid_string,...pe.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...pe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...pe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...pe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...pe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...pe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...pe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...pe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...pe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...pe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...pe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...pe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...pe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...pe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...pe.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...pe.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...pe.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...pe.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...pe.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...pe.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...pe.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...pe.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...pe.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...pe.errToObj(r)})}nonempty(e){return this.min(1,pe.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};po.create=t=>new po({checks:[],typeName:we.ZodString,coerce:t?.coerce??!1,...Ae(t)});function P9(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=Number.parseInt(t.toFixed(i).replace(".","")),s=Number.parseInt(e.toFixed(i).replace(".",""));return o%s/10**i}var ra=class t extends Ie{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ce.number){let o=this._getOrReturnCtx(e);return oe(o,{code:te.invalid_type,expected:ce.number,received:o.parsedType}),Te}let n,i=new Kt;for(let o of this._def.checks)o.kind==="int"?Ve.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),oe(n,{code:te.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),oe(n,{code:te.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),oe(n,{code:te.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?P9(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),oe(n,{code:te.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),oe(n,{code:te.not_finite,message:o.message}),i.dirty()):Ve.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,pe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,pe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,pe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,pe.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:pe.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:pe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:pe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:pe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:pe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:pe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:pe.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:pe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:pe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:pe.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ve.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};ra.create=t=>new ra({checks:[],typeName:we.ZodNumber,coerce:t?.coerce||!1,...Ae(t)});var na=class t extends Ie{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ce.bigint)return this._getInvalidInput(e);let n,i=new Kt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),oe(n,{code:te.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),oe(n,{code:te.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),oe(n,{code:te.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ve.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return oe(r,{code:te.invalid_type,expected:ce.bigint,received:r.parsedType}),Te}gte(e,r){return this.setLimit("min",e,!0,pe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,pe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,pe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,pe.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:pe.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:pe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:pe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:pe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:pe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:pe.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};na.create=t=>new na({checks:[],typeName:we.ZodBigInt,coerce:t?.coerce??!1,...Ae(t)});var ia=class extends Ie{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ce.boolean){let n=this._getOrReturnCtx(e);return oe(n,{code:te.invalid_type,expected:ce.boolean,received:n.parsedType}),Te}return nr(e.data)}};ia.create=t=>new ia({typeName:we.ZodBoolean,coerce:t?.coerce||!1,...Ae(t)});var oa=class t extends Ie{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ce.date){let o=this._getOrReturnCtx(e);return oe(o,{code:te.invalid_type,expected:ce.date,received:o.parsedType}),Te}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return oe(o,{code:te.invalid_date}),Te}let n=new Kt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),oe(i,{code:te.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),oe(i,{code:te.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ve.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:pe.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:pe.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};oa.create=t=>new oa({checks:[],coerce:t?.coerce||!1,typeName:we.ZodDate,...Ae(t)});var Us=class extends Ie{_parse(e){if(this._getType(e)!==ce.symbol){let n=this._getOrReturnCtx(e);return oe(n,{code:te.invalid_type,expected:ce.symbol,received:n.parsedType}),Te}return nr(e.data)}};Us.create=t=>new Us({typeName:we.ZodSymbol,...Ae(t)});var aa=class extends Ie{_parse(e){if(this._getType(e)!==ce.undefined){let n=this._getOrReturnCtx(e);return oe(n,{code:te.invalid_type,expected:ce.undefined,received:n.parsedType}),Te}return nr(e.data)}};aa.create=t=>new aa({typeName:we.ZodUndefined,...Ae(t)});var sa=class extends Ie{_parse(e){if(this._getType(e)!==ce.null){let n=this._getOrReturnCtx(e);return oe(n,{code:te.invalid_type,expected:ce.null,received:n.parsedType}),Te}return nr(e.data)}};sa.create=t=>new sa({typeName:we.ZodNull,...Ae(t)});var mo=class extends Ie{constructor(){super(...arguments),this._any=!0}_parse(e){return nr(e.data)}};mo.create=t=>new mo({typeName:we.ZodAny,...Ae(t)});var Di=class extends Ie{constructor(){super(...arguments),this._unknown=!0}_parse(e){return nr(e.data)}};Di.create=t=>new Di({typeName:we.ZodUnknown,...Ae(t)});var Ln=class extends Ie{_parse(e){let r=this._getOrReturnCtx(e);return oe(r,{code:te.invalid_type,expected:ce.never,received:r.parsedType}),Te}};Ln.create=t=>new Ln({typeName:we.ZodNever,...Ae(t)});var Hs=class extends Ie{_parse(e){if(this._getType(e)!==ce.undefined){let n=this._getOrReturnCtx(e);return oe(n,{code:te.invalid_type,expected:ce.void,received:n.parsedType}),Te}return nr(e.data)}};Hs.create=t=>new Hs({typeName:we.ZodVoid,...Ae(t)});var Mi=class t extends Ie{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==ce.array)return oe(r,{code:te.invalid_type,expected:ce.array,received:r.parsedType}),Te;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(s||l)&&(oe(r,{code:s?te.too_big:te.too_small,minimum:l?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(oe(r,{code:te.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(oe(r,{code:te.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>i.type._parseAsync(new gn(r,s,r.path,l)))).then(s=>Kt.mergeArray(n,s));let o=[...r.data].map((s,l)=>i.type._parseSync(new gn(r,s,r.path,l)));return Kt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:pe.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:pe.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:pe.toString(r)}})}nonempty(e){return this.min(1,e)}};Mi.create=(t,e)=>new Mi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:we.ZodArray,...Ae(e)});function Ns(t){if(t instanceof Mr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=dn.create(Ns(n))}return new Mr({...t._def,shape:()=>e})}else return t instanceof Mi?new Mi({...t._def,type:Ns(t.element)}):t instanceof dn?dn.create(Ns(t.unwrap())):t instanceof ri?ri.create(Ns(t.unwrap())):t instanceof ti?ti.create(t.items.map(e=>Ns(e))):t}var Mr=class t extends Ie{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Ve.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==ce.object){let m=this._getOrReturnCtx(e);return oe(m,{code:te.invalid_type,expected:ce.object,received:m.parsedType}),Te}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ln&&this._def.unknownKeys==="strip"))for(let m in i.data)s.includes(m)||l.push(m);let u=[];for(let m of s){let d=o[m],g=i.data[m];u.push({key:{status:"valid",value:m},value:d._parse(new gn(i,g,i.path,m)),alwaysSet:m in i.data})}if(this._def.catchall instanceof Ln){let m=this._def.unknownKeys;if(m==="passthrough")for(let d of l)u.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(m==="strict")l.length>0&&(oe(i,{code:te.unrecognized_keys,keys:l}),n.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let m=this._def.catchall;for(let d of l){let g=i.data[d];u.push({key:{status:"valid",value:d},value:m._parse(new gn(i,g,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let m=[];for(let d of u){let g=await d.key,y=await d.value;m.push({key:g,value:y,alwaysSet:d.alwaysSet})}return m}).then(m=>Kt.mergeObjectSync(n,m)):Kt.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return pe.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{let i=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:pe.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:we.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of Ve.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let n of Ve.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}deepPartial(){return Ns(this)}partial(e){let r={};for(let n of Ve.objectKeys(this.shape)){let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let n of Ve.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof dn;)o=o._def.innerType;r[n]=o}return new t({...this._def,shape:()=>r})}keyof(){return dD(Ve.objectKeys(this.shape))}};Mr.create=(t,e)=>new Mr({shape:()=>t,unknownKeys:"strip",catchall:Ln.create(),typeName:we.ZodObject,...Ae(e)});Mr.strictCreate=(t,e)=>new Mr({shape:()=>t,unknownKeys:"strict",catchall:Ln.create(),typeName:we.ZodObject,...Ae(e)});Mr.lazycreate=(t,e)=>new Mr({shape:t,unknownKeys:"strip",catchall:Ln.create(),typeName:we.ZodObject,...Ae(e)});var ca=class extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=o.map(l=>new Dr(l.ctx.common.issues));return oe(r,{code:te.invalid_union,unionErrors:s}),Te}if(r.common.async)return Promise.all(n.map(async o=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let u of n){let m={...r,common:{...r.common,issues:[]},parent:null},d=u._parseSync({data:r.data,path:r.path,parent:m});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:m}),m.common.issues.length&&s.push(m.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=s.map(u=>new Dr(u));return oe(r,{code:te.invalid_union,unionErrors:l}),Te}}get options(){return this._def.options}};ca.create=(t,e)=>new ca({options:t,typeName:we.ZodUnion,...Ae(e)});var Pi=t=>t instanceof ua?Pi(t.schema):t instanceof hn?Pi(t.innerType()):t instanceof pa?[t.value]:t instanceof ma?t.options:t instanceof fa?Ve.objectValues(t.enum):t instanceof da?Pi(t._def.innerType):t instanceof aa?[void 0]:t instanceof sa?[null]:t instanceof dn?[void 0,...Pi(t.unwrap())]:t instanceof ri?[null,...Pi(t.unwrap())]:t instanceof bl||t instanceof ha?Pi(t.unwrap()):t instanceof ga?Pi(t._def.innerType):[],ed=class t extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.object)return oe(r,{code:te.invalid_type,expected:ce.object,received:r.parsedType}),Te;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(oe(r,{code:te.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Te)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let s=Pi(o.shape[e]);if(!s.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of s){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:we.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Ae(n)})}};function RS(t,e){let r=ei(t),n=ei(e);if(t===e)return{valid:!0,data:t};if(r===ce.object&&n===ce.object){let i=Ve.objectKeys(e),o=Ve.objectKeys(t).filter(l=>i.indexOf(l)!==-1),s={...t,...e};for(let l of o){let u=RS(t[l],e[l]);if(!u.valid)return{valid:!1};s[l]=u.data}return{valid:!0,data:s}}else if(r===ce.array&&n===ce.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let s=t[o],l=e[o],u=RS(s,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return r===ce.date&&n===ce.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var la=class extends Ie{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(Xf(o)||Xf(s))return Te;let l=RS(o.value,s.value);return l.valid?((Jf(o)||Jf(s))&&r.dirty(),{status:r.value,value:l.data}):(oe(n,{code:te.invalid_intersection_types}),Te)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};la.create=(t,e,r)=>new la({left:t,right:e,typeName:we.ZodIntersection,...Ae(r)});var ti=class t extends Ie{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.array)return oe(n,{code:te.invalid_type,expected:ce.array,received:n.parsedType}),Te;if(n.data.length<this._def.items.length)return oe(n,{code:te.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Te;!this._def.rest&&n.data.length>this._def.items.length&&(oe(n,{code:te.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((s,l)=>{let u=this._def.items[l]||this._def.rest;return u?u._parse(new gn(n,s,n.path,l)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>Kt.mergeArray(r,s)):Kt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};ti.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ti({items:t,typeName:we.ZodTuple,rest:null,...Ae(e)})};var td=class t extends Ie{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.object)return oe(n,{code:te.invalid_type,expected:ce.object,received:n.parsedType}),Te;let i=[],o=this._def.keyType,s=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new gn(n,l,n.path,l)),value:s._parse(new gn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?Kt.mergeObjectAsync(r,i):Kt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Ie?new t({keyType:e,valueType:r,typeName:we.ZodRecord,...Ae(n)}):new t({keyType:po.create(),valueType:e,typeName:we.ZodRecord,...Ae(r)})}},Bs=class extends Ie{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.map)return oe(n,{code:te.invalid_type,expected:ce.map,received:n.parsedType}),Te;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([l,u],m)=>({key:i._parse(new gn(n,l,n.path,[m,"key"])),value:o._parse(new gn(n,u,n.path,[m,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let u of s){let m=await u.key,d=await u.value;if(m.status==="aborted"||d.status==="aborted")return Te;(m.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(m.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let u of s){let m=u.key,d=u.value;if(m.status==="aborted"||d.status==="aborted")return Te;(m.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(m.value,d.value)}return{status:r.value,value:l}}}};Bs.create=(t,e,r)=>new Bs({valueType:e,keyType:t,typeName:we.ZodMap,...Ae(r)});var Vs=class t extends Ie{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.set)return oe(n,{code:te.invalid_type,expected:ce.set,received:n.parsedType}),Te;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(oe(n,{code:te.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(oe(n,{code:te.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function s(u){let m=new Set;for(let d of u){if(d.status==="aborted")return Te;d.status==="dirty"&&r.dirty(),m.add(d.value)}return{status:r.value,value:m}}let l=[...n.data.values()].map((u,m)=>o._parse(new gn(n,u,n.path,m)));return n.common.async?Promise.all(l).then(u=>s(u)):s(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:pe.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:pe.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Vs.create=(t,e)=>new Vs({valueType:t,minSize:null,maxSize:null,typeName:we.ZodSet,...Ae(e)});var rd=class t extends Ie{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.function)return oe(r,{code:te.invalid_type,expected:ce.function,received:r.parsedType}),Te;function n(l,u){return vl({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Cs(),Ai].filter(m=>!!m),issueData:{code:te.invalid_arguments,argumentsError:u}})}function i(l,u){return vl({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Cs(),Ai].filter(m=>!!m),issueData:{code:te.invalid_return_type,returnTypeError:u}})}let o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof fo){let l=this;return nr(async function(...u){let m=new Dr([]),d=await l._def.args.parseAsync(u,o).catch(x=>{throw m.addIssue(n(u,x)),m}),g=await Reflect.apply(s,this,d);return await l._def.returns._def.type.parseAsync(g,o).catch(x=>{throw m.addIssue(i(g,x)),m})})}else{let l=this;return nr(function(...u){let m=l._def.args.safeParse(u,o);if(!m.success)throw new Dr([n(u,m.error)]);let d=Reflect.apply(s,this,m.data),g=l._def.returns.safeParse(d,o);if(!g.success)throw new Dr([i(d,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:ti.create(e).rest(Di.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||ti.create([]).rest(Di.create()),returns:r||Di.create(),typeName:we.ZodFunction,...Ae(n)})}},ua=class extends Ie{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ua.create=(t,e)=>new ua({getter:t,typeName:we.ZodLazy,...Ae(e)});var pa=class extends Ie{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return oe(r,{received:r.data,code:te.invalid_literal,expected:this._def.value}),Te}return{status:"valid",value:e.data}}get value(){return this._def.value}};pa.create=(t,e)=>new pa({value:t,typeName:we.ZodLiteral,...Ae(e)});function dD(t,e){return new ma({values:t,typeName:we.ZodEnum,...Ae(e)})}var ma=class t extends Ie{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return oe(r,{expected:Ve.joinValues(n),received:r.parsedType,code:te.invalid_type}),Te}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return oe(r,{received:r.data,code:te.invalid_enum_value,options:n}),Te}return nr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};ma.create=dD;var fa=class extends Ie{_parse(e){let r=Ve.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ce.string&&n.parsedType!==ce.number){let i=Ve.objectValues(r);return oe(n,{expected:Ve.joinValues(i),received:n.parsedType,code:te.invalid_type}),Te}if(this._cache||(this._cache=new Set(Ve.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let i=Ve.objectValues(r);return oe(n,{received:n.data,code:te.invalid_enum_value,options:i}),Te}return nr(e.data)}get enum(){return this._def.values}};fa.create=(t,e)=>new fa({values:t,typeName:we.ZodNativeEnum,...Ae(e)});var fo=class extends Ie{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.promise&&r.common.async===!1)return oe(r,{code:te.invalid_type,expected:ce.promise,received:r.parsedType}),Te;let n=r.parsedType===ce.promise?r.data:Promise.resolve(r.data);return nr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};fo.create=(t,e)=>new fo({type:t,typeName:we.ZodPromise,...Ae(e)});var hn=class extends Ie{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===we.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{oe(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);if(n.common.async)return Promise.resolve(s).then(async l=>{if(r.value==="aborted")return Te;let u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?Te:u.status==="dirty"?ta(u.value):r.value==="dirty"?ta(u.value):u});{if(r.value==="aborted")return Te;let l=this._def.schema._parseSync({data:s,path:n.path,parent:n});return l.status==="aborted"?Te:l.status==="dirty"?ta(l.value):r.value==="dirty"?ta(l.value):l}}if(i.type==="refinement"){let s=l=>{let u=i.refinement(l,o);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Te:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Te:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!uo(s))return Te;let l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>uo(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:r.value,value:l})):Te);Ve.assertNever(i)}};hn.create=(t,e,r)=>new hn({schema:t,typeName:we.ZodEffects,effect:e,...Ae(r)});hn.createWithPreprocess=(t,e,r)=>new hn({schema:e,effect:{type:"preprocess",transform:t},typeName:we.ZodEffects,...Ae(r)});var dn=class extends Ie{_parse(e){return this._getType(e)===ce.undefined?nr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};dn.create=(t,e)=>new dn({innerType:t,typeName:we.ZodOptional,...Ae(e)});var ri=class extends Ie{_parse(e){return this._getType(e)===ce.null?nr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ri.create=(t,e)=>new ri({innerType:t,typeName:we.ZodNullable,...Ae(e)});var da=class extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===ce.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};da.create=(t,e)=>new da({innerType:t,typeName:we.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ae(e)});var ga=class extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Os(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Dr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Dr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};ga.create=(t,e)=>new ga({innerType:t,typeName:we.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ae(e)});var Ws=class extends Ie{_parse(e){if(this._getType(e)!==ce.nan){let n=this._getOrReturnCtx(e);return oe(n,{code:te.invalid_type,expected:ce.nan,received:n.parsedType}),Te}return{status:"valid",value:e.data}}};Ws.create=t=>new Ws({typeName:we.ZodNaN,...Ae(t)});var D9=Symbol("zod_brand"),bl=class extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},wl=class t extends Ie{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Te:o.status==="dirty"?(r.dirty(),ta(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Te:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:we.ZodPipeline})}},ha=class extends Ie{_parse(e){let r=this._def.innerType._parse(e),n=i=>(uo(i)&&(i.value=Object.freeze(i.value)),i);return Os(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};ha.create=(t,e)=>new ha({innerType:t,typeName:we.ZodReadonly,...Ae(e)});function uD(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function gD(t,e={},r){return t?mo.create().superRefine((n,i)=>{let o=t(n);if(o instanceof Promise)return o.then(s=>{if(!s){let l=uD(e,n),u=l.fatal??r??!0;i.addIssue({code:"custom",...l,fatal:u})}});if(!o){let s=uD(e,n),l=s.fatal??r??!0;i.addIssue({code:"custom",...s,fatal:l})}}):mo.create()}var M9={object:Mr.lazycreate},we;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(we||(we={}));var L9=(t,e={message:`Input not instance of ${t.name}`})=>gD(r=>r instanceof t,e),hD=po.create,yD=ra.create,F9=Ws.create,I9=na.create,TD=ia.create,C9=oa.create,O9=Us.create,N9=aa.create,U9=sa.create,H9=mo.create,B9=Di.create,V9=Ln.create,W9=Hs.create,$9=Mi.create,j9=Mr.create,z9=Mr.strictCreate,q9=ca.create,G9=ed.create,K9=la.create,Q9=ti.create,Y9=td.create,Z9=Bs.create,X9=Vs.create,J9=rd.create,e6=ua.create,t6=pa.create,r6=ma.create,n6=fa.create,i6=fo.create,o6=hn.create,a6=dn.create,s6=ri.create,c6=hn.createWithPreprocess,l6=wl.create,u6=()=>hD().optional(),p6=()=>yD().optional(),m6=()=>TD().optional(),f6={string:t=>po.create({...t,coerce:!0}),number:t=>ra.create({...t,coerce:!0}),boolean:t=>ia.create({...t,coerce:!0}),bigint:t=>na.create({...t,coerce:!0}),date:t=>oa.create({...t,coerce:!0})};var d6=Te;function kS(t,e){return new Y(t.row,t.column,e.row,e.column)}function xD(t){let e=t.operands.map(AS).join(" ");return`(#${t.operator} ${e})`}function AS(t){return t.type==="capture"?`@${t.name}`:t.value}function SD(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>g6(t,r))}function g6(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=AS(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var yt=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof nd&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:SD(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new nd(n.name);return i}else return n.value})}},nd=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};function PS(t,e){if(t.parent==null)throw Error("Node has no parent");let r=t.parent.walk(),n=r.gotoFirstChild(),i=!0;for(;n;){if(r.currentFieldName===e){if(r.currentNode.id===t.id)return i;i=!i}n=r.gotoNextSibling()}throw Error(`Node not found in parent for field: ${e}`)}var DS=Le.object({type:Le.literal("string"),value:Le.string()}),ue={node:Le.object({type:Le.literal("capture"),name:Le.string()}),string:DS,integer:DS.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:Le.ZodIssueCode.custom,message:"Expected an integer"}),Le.NEVER):{type:"integer",value:r}}),boolean:DS.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:Le.ZodIssueCode.custom,message:"Expected true or false"}),Le.NEVER))};var MS=class extends yt{constructor(){super(...arguments);this.name="even?";this.schema=Le.tuple([ue.node,ue.string])}run({node:r},n){return PS(r,n)}},LS=class extends yt{constructor(){super(...arguments);this.name="odd?";this.schema=Le.tuple([ue.node,ue.string])}run({node:r},n){return!PS(r,n)}},FS=class extends yt{constructor(){super(...arguments);this.name="text?";this.schema=Le.tuple([ue.node,ue.string]).rest(ue.string)}run({document:r,range:n},...i){return i.includes(r.getText(n))}},IS=class extends yt{constructor(){super(...arguments);this.name="type?";this.schema=Le.tuple([ue.node,ue.string]).rest(ue.string)}run({node:r},...n){return n.includes(r.type)}},CS=class extends yt{constructor(){super(...arguments);this.name="not-type?";this.schema=Le.tuple([ue.node,ue.string]).rest(ue.string)}run({node:r},...n){return!n.includes(r.type)}},OS=class extends yt{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=Le.tuple([ue.node,ue.string]).rest(ue.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},NS=class extends yt{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=Le.tuple([ue.node,ue.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},US=class extends yt{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=Le.tuple([ue.node,ue.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},HS=class extends yt{constructor(){super(...arguments);this.name="child-range!";this.schema=Le.union([Le.tuple([ue.node,ue.integer]),Le.tuple([ue.node,ue.integer,ue.integer]),Le.tuple([ue.node,ue.integer,ue.integer,ue.boolean]),Le.tuple([ue.node,ue.integer,ue.integer,ue.boolean,ue.boolean])])}run(r,n,i,o,s){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let u=l[n],m=l[i];return r.range=kS(o?u.endPosition:u.startPosition,s?m.startPosition:m.endPosition),!0}},BS=class extends yt{constructor(){super(...arguments);this.name="character-range!";this.schema=Le.union([Le.tuple([ue.node,ue.integer]),Le.tuple([ue.node,ue.integer,ue.integer])])}run(r,n,i){return r.range=new Y(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},VS=class extends yt{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=Le.tuple([ue.node,ue.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[u,m]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new Y(i.positionAt(d+u),i.positionAt(d+m)),!0}},WS=class extends yt{constructor(){super(...arguments);this.name="grow-to-named-siblings!";this.schema=Le.union([Le.tuple([ue.node]),Le.tuple([ue.node,ue.string])])}run(r,n){let{node:i,range:o,document:s}=r;if(i.parent==null)throw Error("Node has no parent");let{children:l}=i.parent,u=l.findIndex(d=>d.id===i.id),m=null;if(u===-1)throw Error("Node not found in parent");for(let d=u+1;d<l.length;++d){let g=l[d];if(!g.isNamed)break;let y=kS(g.startPosition,g.endPosition);if(n!=null&&n===s.getText(y))break;m=y.end}return m!=null&&(r.range=new Y(o.start,m)),!0}},$S=class extends yt{constructor(){super(...arguments);this.name="trim-end!";this.schema=Le.tuple([ue.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),s=o.length-o.trimEnd().length;return s>0&&(r.range=new Y(i.start,$R(n,i.end,-s))),!0}},jS=class extends yt{constructor(){super(...arguments);this.name="document-range!";this.schema=Le.tuple([ue.node]).rest(ue.node)}run(...r){for(let n of r)n.range=n.document.range;return!0}},zS=class extends yt{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=Le.tuple([ue.node]).rest(ue.node)}allowMissingNode(){return!0}run(...r){for(let n of r)n.allowMultiple=!0;return!0}},qS=class extends yt{constructor(){super(...arguments);this.name="log!";this.schema=Le.tuple([ue.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},GS=class extends yt{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=Le.tuple([ue.node,ue.string])}run(r,n){return r.insertionDelimiter=n,!0}},KS=class extends yt{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=Le.tuple([ue.node,ue.node,ue.string,ue.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},QS=class extends yt{constructor(){super(...arguments);this.name="empty-single-multi-delimiter!";this.schema=Le.tuple([ue.node,ue.node,ue.string,ue.string,ue.string])}run(r,n,i,o,s){let l=!n.node.children.some(u=>u.isNamed);return r.insertionDelimiter=l?i:n.range.isSingleLine?o:s,!0}},vD=[new qS,new MS,new LS,new FS,new IS,new CS,new $S,new jS,new OS,new NS,new HS,new BS,new VS,new WS,new zS,new GS,new KS,new QS,new US];function bD(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((s,l)=>{let u=vD.find(({name:d})=>d===s.operator);if(u==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${s.operator}"`});return}let m=u.createPredicate(s.operands);if(!m.success){e.push(...m.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(m.predicate)}),r.push(o)}),{errors:e,predicates:r}}function wD(t,e){let{errors:r,predicates:n}=bD(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${xD(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");pt(k().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(k().runMode==="test")throw new Error("Invalid predicates")}return n}function YS(t){return{row:t.line,column:t.character}}function ED(t){return t.map(e=>({...e,range:ZS(e),name:h6(e)}))}function ZS(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function h6(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var XS=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&_D(this.startPosition,r)&&_D(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function _D(t,e){return t==null||e==null?t===e:t.isEqual(e)}var ya=new XS;var El=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=k().runMode!=="production"}static create(e,r,n){let i=wD(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>wS(r)===e)}matches(e,r,n){if(!ya.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);ya.update(e,r,n,i)}return ya.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let s of i){let l=this.createMutableQueryMatch(e,s);this.runPredicates(l)&&o.push(this.createQueryMatch(l))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?YS(r):void 0,endPosition:n!=null?YS(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.patternIndex,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:oD(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>sD(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=wS(i.name),s=ZS(i),l=n.get(o);if(l==null){let u=[i],m={...i,name:o,range:s,hasError:()=>u.some(d=>d.hasError())};r.push(m),n.set(o,{acc:m,captures:u})}else l.acc.range=l.acc.range.union(s),l.acc.allowMultiple=l.acc.allowMultiple||i.allowMultiple,l.acc.insertionDelimiter=l.acc.insertionDelimiter??i.insertionDelimiter,l.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!aD(ED(r.captures),k().messages)&&k().runMode==="test")throw new Error("Invalid captures")}};var kD="_",y6=[kD,"interior",...qo],T6=["prefix","leading","trailing"],x6=["startOf","endOf","start.startOf","start.endOf","end.startOf","end.endOf"],S6=["domain","removal","iteration","iteration.domain"],RD=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],Ta=new Set;for(let t of y6){if(t!==kD){Ta.add(t);for(let e of RD)Ta.add(`${t}.${e}`)}for(let e of T6){Ta.add(`${t}.${e}`);for(let r of x6)Ta.add(`${t}.${e}.${r}`)}for(let e of S6){Ta.add(`${t}.${e}`);for(let r of RD)Ta.add(`${t}.${e}.${r}`)}}var v6=/^(?!;;).*(?<!"\w*)@([\w.]*)/gm;function AD(t,e){let r=e.matchAll(v6),n=[];for(let o of r){let s=o[1];if(!(s.length>1&&!s.includes(".")&&s.startsWith("_"))&&!Ta.has(s)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${s}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(pt(k().messages,"validateQueryCaptures.invalidCaptureName",i),k().runMode==="test")throw new Error(i)}var id=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await b6(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let s=n.createQuery(i,o);if(s==null)throw Error(`Could not create Tree sitter query for language ${i}`);let l=El.create(i,n,s);return new t(l)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new Mf(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let s=o.name;n[s]==null&&(n[s]=[]),n[s].push(o)}return n}};async function b6(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,s]of Object.entries(n)){if(s!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(pt(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&AD(o,l),n[o]=l,sn(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,u=>{let m=u[1];i&&w6(t,o,m,u[0]),n[m]=n[m]??null})}return Object.values(n).join(`
`)}function w6(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(pt(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(pt(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var PD=Symbol("LANGUAGE_UNDEFINED"),od=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new er;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&ya.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:s})=>this.loadLanguage(s.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(pt(this.ide.messages,"Failed to load language definitions",An(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await id.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??PD;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),ya.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===PD?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var ad=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e,r){for(let n of this.nestedStages)try{return n.run(e,r)}catch{continue}throw new Error("No modifier could be applied")}};var $s=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e,r){if(this.shouldModify(e))try{return this.nestedStage.run(e,r).map(n=>n.withThatTarget(e))}catch(n){if(!this.suppressErrors)throw n}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},go=class extends $s{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},sd=class extends $s{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},js=class extends $s{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},zs=class extends $s{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function DD(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function qs(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&DD(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.textualType==="line"&&r.textualType==="line"?new fr({editor:e.editor,isReversed:t,contentRange:xs(e,r,n,i)}):new Nt({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:Ts(e,r,n,i),textualType:n&&i&&e.textualType==="token"&&r.textualType==="token"?"token":"character"})}function cd(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[s]=i,l=s.contentRange.start.isAfterOrEqual(o.contentRange.start),[u,m]=l?[o,s]:[s,o];return[qs(t,u,m,!0,!0)]}function ld(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,s]=i;return n==="forward"?s:n==="backward"||(t.isPreferredOver?.(o,s)??!1)?o:s}default:throw new Error("Expected no more than 2 scope candidates")}}function ud(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:s}}=t;if(s.isEqual(o)){let m=ld(e,i,o);return m==null||(r>0&&(m=JS(e,i,m.domain.end,"forward",r,!0)),m==null)?void 0:m.getTargets(n)}let l=JS(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(s))return l.getTargets(n);let u=JS(e,i,s,"backward",r);if(u!=null)return cd(n,l,u)}function JS(t,e,r,n,i,o=!1){let s=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(s===i)return l;s+=1}}var Gs=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.maybeCreate(r,e.editor.document.languageId);if(i==null)throw new vt(r.type);let o=ud(e,i,n);if(o==null)throw new vt(r.type);return o}};var pd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n}=this.modifier,{editor:i,isReversed:o}=e,s=this.scopeHandlerFactory.maybeCreate(n,i.document.languageId);if(s==null)throw new vt(n.type);let l;if(e.hasExplicitRange&&(l=MD(s,i,e.contentRange),l.length===1&&l[0].domain.contains(e.contentRange)&&!e.hasExplicitScopeType&&!r.multipleTargets&&(l=void 0)),l==null&&(l=this.getDefaultIterationRange(s,this.scopeHandlerFactory,e).flatMap(u=>MD(s,i,u))),l.length===0)throw new vt(n.type);return l.flatMap(u=>u.getTargets(o))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=ud(n,i);if(o==null)throw new vt(`iteration scope for ${e.scopeType.type}`);return o.map(s=>s.contentRange)}};function MD(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var md=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},fd=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var dd=class{run(){return ef(k()).map(e=>new Zm({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var gd=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new ev(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},ev=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return _6(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return Mt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return R6(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[ho(e,r,n,i)];let s=nv(e,r);return[ho(n?LD(this.modifierStageFactory,e,o,s?"backward":"forward"):e,i?LD(this.modifierStageFactory,r,o,s?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n,i=!1;e.type==="implicit"?(r=new dd,n=[]):(r=this.markStageFactory.create(e.mark),n=tv(this.modifierStageFactory,e.modifiers),i=E6(e));let o=r.run(),[s,l]=this.getPreAndPostStages(i),u=[...s,...n,...this.opts.actionFinalStages,...l];return rv(u,o)}getPreAndPostStages(e){if(this.opts.noAutomaticTokenExpansion)return[[],[]];let r=new zs(this.modifierStageFactory);return e?[[r],[]]:[[],[r]]}};function E6(t){return t.modifiers.length>0&&t.modifiers.every(({type:e})=>e==="startOf"||e==="endOf")}function tv(t,e){return e.map(t.create).reverse()}function rv(t,e){return t.forEach(r=>{let n={multipleTargets:e.length>1};e=e.flatMap(i=>r.run(i,n))}),e}function LD(t,e,r,n){let i={multipleTargets:!1};return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e,i)[0]}function nv(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function _6(t){return zk(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function FD(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function ho(t,e,r=!1,n=!1){FD(t,e);let i=nv(t,e);return qs(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function R6(t,e,r,n){FD(t,e);let i=nv(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),m=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let g=l;;g+=o){let y=new Y(g,t.contentRange.start.character,g,t.contentRange.end.character);if(d.push(new Ye({editor:t.editor,isReversed:t.isReversed,contentRange:y,insertionDelimiter:t.insertionDelimiter})),g===m)return d}}var hd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getModifierStages(),n=rv(r,[e]),i=this.modifier.type==="extendThroughStartOf";return n.map(o=>new Xm({editor:e.editor,isReversed:i,inputTarget:e,modifiedTarget:o,isHead:i}))}getModifierStages(){return this.modifier.modifiers!=null?tv(this.modifierStageFactory,this.modifier.modifiers):[new iv(this.modifierStageFactory,this.modifier)]}},iv=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.getContainingLine(e,r),i=this.getContainingPairInterior(e,r),o=i!=null?n.contentRange.intersection(i.contentRange):null;return o==null||o.isEmpty?[n]:[new Ye({editor:e.editor,isReversed:e.isReversed,contentRange:o})]}getContainingPairInterior(e,r){try{return this.getContaining(e,r,{type:"surroundingPairInterior",delimiter:"any"})[0]}catch(n){if(n instanceof vt)return;throw n}}getContainingLine(e,r){return this.getContaining(e,r,{type:"line"})[0]}getContaining(e,r,n){return this.modifierStageFactory.create({type:"containingScope",scopeType:n}).run(e,r)}};var ni=class extends Error{constructor(e,r){let n=r!=null?` #${r+1}`:"";super(`Scope '${e.type}'${n} is out of range`),this.name="OutOfRangeError"}};function ID(t,e,r,n){return ov(t,e,r,n),e.slice(r,n+1)}function ov(t,e,r,n){if(r<0||r>=e.length)throw new ni(t,r);if(n<0||n>=e.length)throw new ni(t,n)}var Ks=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e,r){let n=new zs(this.modifierStageFactory).run(e,r)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(n,r);case"ordinalScope":return this.handleOrdinalScope(n,r,this.modifier);case"relativeScope":return this.handleRelativeScope(n,r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e,r){return Array.from(vf(this.getEveryRanges(e),([n,i])=>this.getTargetIterable(e,r,n,i,"forward")))}handleOrdinalScope(e,r,{start:n,length:i,scopeType:o}){return this.getEveryRanges(e).flatMap(([s,l])=>CD(o,this.getTargetIterable(e,r,s,l,n>=0?"forward":"backward"),n>=0?n:-(i+n),i))}handleRelativeScope(e,r,{direction:n,offset:i,length:o,scopeType:s}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(u=>{let{editor:m}=u,d=n==="forward"?new Y(i===0?u.contentRange.start:u.contentRange.end,m.document.range.end):new Y(m.document.range.start,i===0?u.contentRange.end:u.contentRange.start);return CD(s,this.getTargetIterable(e,r,m,d,n),i===0?0:i-1,o)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i,o){let s=Gt(fn(new RegExp(Br(e.contentText),"g"),n,i,o),u=>new Ye({contentRange:u,editor:n,isReversed:!1,textualType:"character"})),l=k6(e);if(l!=null){let u=this.modifierStageFactory.create({type:"containingScope",scopeType:l});return xf(Gt(s,m=>{try{let d=u.run(m,r);return d.length===1&&d[0].contentRange.isRangeEqual(m.contentRange)?d[0]:null}catch{return null}}),m=>m!=null)}return s}};function k6(t){switch(t.textualType){case"line":case"token":case"word":return{type:t.textualType};default:return null}}function CD(t,e,r,n){Array.from(xl(r,e));let i=Array.from(xl(n,e));if(i.length<n)throw new ni(t,r+n-1);return i}var yd=class{constructor(e,r){this.modifierHandlerFactory=e;this.modifier=r}run(e,r){let n=e.getInterior();return n??this.modifierHandlerFactory.create({type:"containingScope",scopeType:{type:"interior",explicitScopeType:e.hasExplicitScopeType}}).run(e,r)}},Td=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=av(this.modifierStageFactory)}run(e,r){return this.containingSurroundingPairIfNoBoundaryStage.run(e,r).flatMap(n=>n.getBoundary())}};function av(t){return new sd(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var ii={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},sv={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var xd=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},Sd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(sv).run(e,r).map(n=>{let i=n.getLeadingDelimiterTarget();if(i==null)throw new xd("leading");return i})}},vd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(sv).run(e,r).map(n=>{let i=n.getTrailingDelimiterTarget();if(i==null)throw new xd("trailing");return i})}};function bd(t,e,r,n,i){return ov(t,r,n,i),n===i?r[n]:qs(e,r[n],r[i],!0,!0)}function wd(t,e,r,n){return t.create({type:"everyScope",scopeType:n}).run(e,r)}var Ed=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=wd(this.modifierStageFactory,e,r,this.modifier.scopeType),i=this.modifier.start+(this.modifier.start<0?n.length:0),o=i+this.modifier.length-1;return this.modifier.isEvery?ID(this.modifier.scopeType,n,i,o):[bd(this.modifier.scopeType,e.isReversed,n,i,o)]}};var _d=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new ao(r):new Ye({...r,textualType:"character"})]}},Rd=class extends _d{getContentRange(e){return e.start.toEmptyRange()}},kd=class extends _d{getContentRange(e){return e.end.toEmptyRange()}};var Ad=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,n=new Gs(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:r});try{return n.run(e)}catch(s){if(!(s instanceof vt))throw s}let i=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),o=A6(e,i);if(o==null)throw Error(`No scopes found for scope type: ${r.type}`);return o}};function A6(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=OD(r,i),s=OD(n,i),l=o.distance<s.distance?o.scope:s.scope;return l?.getTargets(t.isReversed)}function OD(t,e){let r,n=1/0;for(let i of t){let o=Math.min(ND(e,i.domain.start),ND(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function ND(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var Pd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.modifierStageFactory.create(this.modifier.anchor),i=this.modifierStageFactory.create(this.modifier.active),o=n.run(e,r),s=i.run(e,r);if(o.length!==1||s.length!==1)throw new Error("Expected single anchor and active target");return[ho(o[0],s[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var Dd=class{constructor(e){this.modifier=e}run(e){return[new ao({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var Md=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function UD(t,e,r,n){let i=wd(t,L6(r),n,e.scopeType),o=M6(r.contentRange,i);return P6(e,r,i,o)}function P6(t,e,r,n){let i=t.direction==="forward",o=D6(t,e.contentRange,r,i,n),s=i?o+t.length-1:o-t.length+1,l=Math.min(o,s),u=Math.max(o,s);return[bd(t.scopeType,e.isReversed,r,l,u)]}function D6(t,e,r,n,i){let o=t.offset===0;if(i==null){let u=n?r.findIndex(m=>m.contentRange.start.isAfter(e.start)):Bo(r,m=>m.contentRange.start.isBefore(e.start));if(u===-1)throw new ni(t.scopeType);return o?u:n?u+t.offset-1:u-t.offset+1}let s=i.start,l=i.end;if(o){let u=l-s+1;if(u>t.length)throw new Md(t.length,u,t.scopeType.type);return n?s:l}return n?l+t.offset:s-t.offset}function M6(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function L6(t){return new Nt({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var Ld=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let n=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(n==null)return UD(this.modifierStageFactory,this.modifier,e,r);let i=Array.from(this.modifier.offset===0?F6(n,e,this.modifier):I6(n,e,this.modifier));if(i.length<this.modifier.length)throw new ni(this.modifier.scopeType,this.modifier.offset+this.modifier.length-1);let{isReversed:o}=e;return this.modifier.isEvery?i.flatMap(s=>s.getTargets(o)):cd(o,i[0],i[i.length-1])}};function F6(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s}=r,l=ld(t,n,s==="forward"?i.start:i.end,s)?.domain;if(l==null)throw new vt(r.scopeType.type);return xl(o,t.generateScopes(n,s==="forward"?l.start:l.end,s,{skipAncestorScopes:!0}))}function I6(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s,offset:l}=r,u=s==="forward"?i.end:i.start,m=i.isEmpty?"disallowed":"disallowedIfStrict";return EP(t.generateScopes(n,u,s,{containment:m,skipAncestorScopes:!0}),l-1,l+o-1)}var Fd=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new Ye({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};var Qs=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new Rd;case"endOf":return new kd;case"extendThroughStartOf":case"extendThroughEndOf":return new hd(this,e);case"toRawSelection":return new Dd(e);case"interiorOnly":return new yd(this,e);case"excludeInterior":return new Td(this,e);case"leading":return new Sd(this,e);case"trailing":return new vd(this,e);case"visible":return new Fd(e);case"containingScope":return new Gs(this,this.scopeHandlerFactory,e);case"preferredScope":return new Ad(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new Ks(this,this.storedTargets,e):new pd(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new Ks(this,this.storedTargets,e):new Ed(this,e);case"relativeScope":return e.scopeType.type==="instance"?new Ks(this,this.storedTargets,e):new Ld(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new md(e);case"keepEmptyFilter":return new fd(e);case"cascading":return new ad(this,e);case"modifyIfUntyped":return new go(this,e);case"range":return new Pd(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}};async function HD(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Oe({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=ol(r),s=o.map(m=>{let d=r[m],g=C6(d);return BD(e.document,g.selections,g.behavior)});n||s.push(BD(e.document,e.selections,1));let l=await("edits"in i?U6(t,e,i.edits,s):VD(t,i.callback,e.document,s));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((m,d)=>[m,l[d]]))}function BD(t,e,r){return e.map(n=>O6(t,n,n instanceof st?!n.isReversed:!0,r))}function C6(t){return"selections"in t?t:{selections:t,behavior:1}}function O6(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function N6(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new st(r,n):new st(n,r)))}async function VD(t,e,r,n){let i=t.registerRangeInfoList(r,ot(n));return await e(),i(),N6(n)}async function U6(t,e,r,n){return await VD(t,async()=>{if(!await HD(t,e,r))throw new Error("Could not apply edits")},e.document,n)}var Id=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Be(k(),e,"pendingModification0"),{thatSelections:ot(await ct(e,async(n,i)=>{let o=i.map(({contentRange:m})=>m),s=H6(n,o),l=k().getEditableTextEditor(n),{contentRanges:u}=await Oe({rangeUpdater:this.rangeUpdater,editor:l,edits:s,selections:{contentRanges:o}});return Mt(i,u).map(([m,d])=>({editor:m.editor,selection:d.toSelection(m.isReversed)}))}))}}};function H6(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,s=r.lineAt(o),l=s.text.slice(0,s.rangeTrimmed?.start?.character??s.range.start.character),u=s.text.slice(0,o.character).search(/\s+$/),m=u>-1?new Y(new _e(s.lineNumber,u),o):o.toEmptyRange();n.push({range:m,text:`
`+l,isReplace:!m.isEmpty})}return n}function Cd(t){return t.length<2?t:WA(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,s)=>o.contentRange.start.compareTo(s.contentRange.start));let i=!0;for(;i;)[n,i]=B6(n);return n})}function B6(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!V6(r[r.length-1],n)?(e.push(WD(r)),r=[n]):r.push(n)}),e.push(WD(r)),[e,e.length!==t.length]}function WD(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return ho(e,r)}function V6(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var _l=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Be(k(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Be(k(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((s,l)=>{let u=r[l];if((s==null||u==null)&&!o)throw new Error("Targets must have same number of args");if(u!=null){let m;o?m=e.map((d,g)=>{let y=d.contentText,x=(u.isRaw?null:u.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return g>0&&x!=null?x+y:y}).join(""):m=s.contentText,i.push({edit:u.constructChangeEdit(m),editor:u.editor,originalTarget:u.target,isSource:!1})}else u=r[0];n.includes(s)||(n.push(s),this.type==="bring"&&i.push({edit:s.toDestination("to").constructChangeEdit(u.target.contentText),editor:s.editor,originalTarget:s,isSource:!0}))}),this.type==="move"&&Cd(n).forEach(s=>{i.push({edit:s.constructRemovalEdit(),editor:s.editor,originalTarget:s,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return ot(await Ri(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),s=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),u=s.map(({edit:x})=>x.range),m=k().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:g}=await Oe({rangeUpdater:this.rangeUpdater,editor:m,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:u,behavior:0}}}),y=[...this.getMarks(o,d),...this.getMarks(s,g)];return y.sort((x,E)=>n.findIndex(w=>w.originalTarget===x.target)-n.findIndex(w=>w.originalTarget===E.target)),y}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],s=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:s.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>pn(n,e.find(i=>i.target===n).selection);return Promise.all([Be(k(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Be(k(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function $D(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var Od=class extends _l{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){r=$D(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},Nd=class extends _l{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:W6};this.run=this.run.bind(this)}async run(r,n){r=$D(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},Ud=class extends _l{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,s)=>{let l=n[s];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function W6(t){return t.getRemovalHighlightRange()}var Rl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){kr(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var kl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=kt(e),n=e.map(o=>new Ye({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await k().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var Ys=t=>new Nt({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var Zs=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Be(k(),e,"referenced"),r.ensureSingleEditor&&kt(e),r.ensureSingleTarget&&kr(e);let n=k().activeEditableTextEditor,i=r.setSelection?VA:ct,o=ot(await i(e,(s,l)=>this.runForEditor(r,s,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=k().getEditableTextEditor(r),o=r.selections,s=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:u,targetSelections:m}=await Oe({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(u),r.document.version===s?n:m.map(d=>Ys({editor:r,selection:d}))}};var At=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new Zs(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=k().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,s)=>$6(o,i?s.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},Hd=class extends At{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},Bd=class extends At{constructor(){super(...arguments);this.command="toggleLineComment"}},Vd=class extends At{constructor(){super(...arguments);this.command="indentLine"}},Wd=class extends At{constructor(){super(...arguments);this.command="outdentLine"}},$d=class extends At{constructor(){super(...arguments);this.command="fold"}},jd=class extends At{constructor(){super(...arguments);this.command="unfold"}},zd=class extends At{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},qd=class extends At{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},Gd=class extends At{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},Kd=class extends At{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Qd=class extends At{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Yd=class extends At{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Zd=class extends At{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Xd=class extends At{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Jd=class extends At{constructor(){super(...arguments);this.command="gitAccept";this.ensureSingleTarget=!0}},eg=class extends At{constructor(){super(...arguments);this.command="gitRevert";this.ensureSingleTarget=!0}},tg=class extends At{constructor(){super(...arguments);this.command="gitStage";this.ensureSingleTarget=!0}},rg=class extends At{constructor(){super(...arguments);this.command="gitUnstage";this.ensureSingleTarget=!0}};function $6(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"gitAccept":return t.gitAccept(e?.[0]);case"gitRevert":return t.gitRevert(e?.[0]);case"gitStage":return t.gitStage(e?.[0]);case"gitUnstage":return t.gitUnstage(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var ng=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(k().capabilities.commands.clipboardCopy!=null)return new Hd(this.rangeUpdater).run(e,r);r.showDecorations&&await Be(k(),e,"referenced");let n=e.map(i=>i.contentText).join(`
`);return await k().clipboard.writeText(n),{thatTargets:e}}};var ig=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await k().flashRanges(e.flatMap(j6));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function j6(t){let{editor:e,contentRange:r}=t,n=t.getRemovalHighlightRange(),i=[{editor:e,range:mr(r),style:"referenced"}];return n.type==="line"?i.push({editor:e,range:n,style:"pendingDelete"}):i.push(...z6(r,n).map(o=>({editor:e,range:mr(o),style:"pendingDelete"}))),i}function z6(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,s=[];return i.isBefore(r)&&s.push(new Y(i,r)),o.isAfter(n)&&s.push(new Y(n,o)),s}var Al=class{constructor(){this.run=this.run.bind(this)}async run(e){return await ct(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(s=>{let l=s.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new cv;await k().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},cv=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function jD(t,e,r,n){let i=r.destinations.map((E,w)=>{if(n||r.actionTypes[w]==="edit")return{destination:E,index:w}}).filter(E=>!!E);if(i.length===0)return r;let o=i.map(E=>E.destination.constructChangeEdit("")),s=r.cursorRanges.map((E,w)=>({range:E,index:w})).filter(({range:E})=>E!=null),l=s.map(({index:E})=>E),u=s.map(({range:E})=>E),m=o.map(E=>E.range),{thatRanges:d,cursorRanges:g,editRanges:y}=await Oe({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:u,editRanges:{selections:m,behavior:0}}}),x=[...r.cursorRanges];return Mt(l,g).forEach(([E,w])=>{x[E]=w}),i.forEach((E,w)=>{let W=o[w].updateRange(y[w]);x[E.index]=W}),{destinations:r.destinations,actionTypes:r.actionTypes,thatRanges:d,cursorRanges:x}}async function zD({acceptsLocation:t},e,r,n){let i=n.destinations.map((g,y)=>{if(n.actionTypes[y]==="insertLineAfter")return{destination:g,index:y}}).filter(g=>!!g);if(i.length===0)return n;let o=i.map(({destination:g})=>g.contentRange),s=n.destinations.map(({contentRange:g})=>g),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(g=>g.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:u,thatRanges:m}=await Oe({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:s,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((g,y)=>{d[g.index]=r.selections[y]}),{destinations:n.destinations.map((g,y)=>g.withTarget(g.target.withContentRange(u[y]))),actionTypes:n.actionTypes,thatRanges:m,cursorRanges:d}}async function qD(t,e){let r=kr(e),n=k().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:un([r.target.thatTarget])}}var og=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return qD(this.actions,e);let r=k().getEditableTextEditor(kt(e)),n={destinations:e,actionTypes:e.map(l=>l.getEditNewActionType()),thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=k().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await zD(i,this.rangeUpdater,r,n)),n=await jD(this.rangeUpdater,r,n,!o);let s=n.destinations.map((l,u)=>{let m=n.cursorRanges[u];if(m==null)throw Error("Cursor range is undefined for destination");return m.toSelection(l.target.isReversed)});return await r.setSelections(s,{focusEditor:!0}),{thatSelections:un(n.destinations.map(l=>l.target),n.thatRanges)}}};var ag=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ii)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},sg=class extends ag{constructor(){super(...arguments);this.insertionMode="before"}},cg=class extends ag{constructor(){super(...arguments);this.insertionMode="after"}};var Pl=class{constructor(e){this.callbackAction=new Zs(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:s,showDecorations:l}={}){let u=n??[];return this.callbackAction.run(e,{callback:()=>k().executeCommand(r,...u),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:s??!0,showDecorations:l??!0})}};var lg=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){kr(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),$o(k().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},ug=class extends lg{find(e){return k().findInDocument(e)}},pg=class extends lg{find(e){return k().findInWorkspace(e)}};var mg=class{constructor(){this.run=this.run.bind(this)}async run(e){return await Be(k(),e,"referenced"),{thatTargets:e}}};var Xs=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=kr(e);return await Be(k(),e,"referenced"),await k().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:un(e)}}};function GD(t){let e=t.split(/^---$/m),r={snippets:[]};for(let n of e){let i=n.match(/^-$/m),o=i!=null?n.slice(0,i.index):n,s=i!=null?n.slice(i.index+i[0].length):null,l=s?Q6(s):null,u=q6(o);if(l!=null){u==null&&(u={variables:[]});let{variables:m,...d}=u;r.snippets.push({...d,body:l,variables:m})}else if(u!=null){if(r.header!=null||r.snippets.length!==0)throw Error("Header snippet must be first in file");r.header=u}}return r}function q6(t){let e={variables:[]},r=G6(t);if(Object.keys(r).length===0)return;let n={};for(let[i,o]of Object.entries(r))switch(i){case"name":e.name=o;break;case"description":e.description=o;break;case"phrase":e.phrases=Dl(o);break;case"insertionScope":e.insertionScopes=Dl(o);break;case"language":e.languages=Dl(o);break;default:if(!i.startsWith("$"))throw Error(`Invalid key '${i}'`);n[i]=o}return e.variables=K6(n),e}function G6(t){let e=t.split(/\r?\n/).map(n=>n.trim()).filter(Boolean),r={};for(let n of e){let i=n.split(":");if(i.length!==2)throw Error(`Invalid line '${n}'`);let o=i[0].trim(),s=i[1].trim();if(o.length===0||s.length===0)throw Error(`Invalid line '${n}'`);if(r[o]!=null)throw Error(`Duplicate key '${o}' in '${t}'`);r[o]=s}return r}function K6(t){let e={},r=n=>(e[n]==null&&(e[n]={name:n}),e[n]);for(let[n,i]of Object.entries(t)){let o=n.split(".");if(o.length!==2)throw Error(`Invalid variable key '${n}'`);let s=o[0].slice(1);switch(o[1]){case"insertionFormatter":r(s).insertionFormatters=Dl(i);break;case"wrapperPhrase":r(s).wrapperPhrases=Dl(i);break;case"wrapperScope":r(s).wrapperScope=i;break;default:throw Error(`Invalid variable key '${n}'`)}}return Object.values(e)}function Q6(t){let e=t.match(/^[ \t]*\S/m);if(e?.index!=null)return t.slice(e.index).trimEnd().split(/\r?\n/).map(r=>r.trimEnd())}function Dl(t){return t.split("|").map(e=>e.trim())}function QD(t){let e=[];t.header!=null&&e.push(KD(t.header)),e.push(...t.snippets.map(KD));let r=e.filter(Boolean).join(`
---

`);return r?r+`
---
`:""}function KD(t){let e=[yo("name",t.name),yo("description",t.description),yo("language",t.languages),yo("phrase",t.phrases),yo("insertionScope",t.insertionScopes)].filter(Boolean);return t.variables.length>0&&(e.length>0&&e.push(""),e.push(...Y6(t.variables))),"body"in t&&e.push("-",...t.body),e.join(`
`)}function Y6(t){let e=[...t];return e.sort(Z6),e.flatMap(r=>[yo(`$${r.name}.insertionFormatter`,r.insertionFormatters),yo(`$${r.name}.wrapperPhrase`,r.wrapperPhrases),yo(`$${r.name}.wrapperScope`,r.wrapperScope)]).filter(Boolean)}function yo(t,e){return e==null?"":Array.isArray(e)?`${t}: ${e.join(" | ")}`:`${t}: ${e}`}function Z6(t,e){return t.name==="0"?1:e.name==="0"?-1:t.name.localeCompare(e.name)}function YD(t,e){let r=[],n=0,i=null,[o,...s]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...s.map(u=>({text:u,startIndex:0}))].forEach(({text:u,startIndex:m})=>{let d=u.match(/^\s*/)?.[0]??"",g=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let y=Math.max(g,m),x=KT("	",n),E=u.slice(y);r.push(x+E)}),r}function ZD(t,e){let r=YT(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var Js=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){if(r==null)throw new Error("Directory argument is required for GenerateSnippet action. Please update Cursorless Talon");let i=kr(e),o=i.editor;if(Be(k(),e,"referenced"),n==null&&(n=await k().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"}),!n))return{};let s=o.document.offsetAt(i.contentRange.start),l=J6(o,i.contentRange),u=l.map((fe,ve)=>({offsets:{start:o.document.offsetAt(fe.start)-s,end:o.document.offsetAt(fe.end)-s},name:ve===l.length-1?"0":`${ve+1}`})),m=o.document.getText(new Y(i.contentRange.start.with(void 0,0),i.contentRange.start)),d=o.document.getText(i.contentRange),g=ZD(d,[...sn(d,/\$|\\/g,fe=>({offsets:{start:fe.index,end:fe.index+fe[0].length},text:`\\${fe[0]}`})),...u.map(({offsets:fe,name:ve})=>({offsets:fe,text:`$${ve}`}))]),y=YD(g,m),x,E={snippets:[]};k().runMode==="test"?x=k().getEditableTextEditor(o):(x=k().getEditableTextEditor(await this.snippets.openNewSnippetFile(n,r)),E=GD(x.document.getText())),await x.setSelections([x.document.range.toSelection(!1)]);let w=1,{header:U}=E,W=E.header?.phrases!=null?void 0:[`${lv}${w++}`],q=fe=>{let ve=U?.variables?.some(Et=>Et.name===fe.name&&Et.wrapperPhrases!=null);return{name:fe.name,wrapperPhrases:ve?void 0:[`${lv}${w++}`]}},ie={name:U?.name===n?void 0:n,phrases:W,languages:X6(o,U),body:y,variables:u.map(q)};E.snippets.push(ie);let se=QD(E).replace(/\$/g,"\\$").replaceAll(lv,"$");return await x.insertSnippet(se),{thatSelections:e.map(({editor:fe,contentSelection:ve})=>({editor:fe,selection:ve}))}}};function X6(t,e){if(!e?.languages?.includes(t.document.languageId))return[t.document.languageId]}function J6(t,e){let r=t.selections.filter(n=>e.contains(n));return r.sort((n,i)=>n.start.compareTo(i.start)),r}var lv="PLACEHOLDER_VFA77zcbLD6wXNmfMAay";var Ml=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Ll=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Be(k(),e,"referenced"),n&&kr(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var Fl=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(k().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(k().visibleTextEditors.map(n=>k().setHighlightRanges(r,n,[]))):await ct(e,(n,i)=>k().setHighlightRanges(r,n,i.map(o=>pn(o,o.contentRange)))),{thatTargets:e}}};var fg=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Be(k(),e,"pendingModification0"),{thatTargets:ot(await ct(e,this.runForEditor))})}hasCapability(){return this.isIndent?k().capabilities.commands.indentLine!=null:k().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new Vd(this.rangeUpdater):new Wd(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?e5(e,r):t5(e,r),{targetSelections:i}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return Mt(r,i).map(([o,s])=>Ys({editor:e,selection:s.toSelection(o.isReversed)}))}},dg=class extends fg{constructor(e){super(e,!0)}},gg=class extends fg{constructor(e){super(e,!1)}};function e5(t,e){let{document:r}=t,n=XD(e),i=r5(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function t5(t,e){let{document:r}=t,n=XD(e),i=n5(t);return n.map(o=>{let s=r.lineAt(o),l=s.text.match(i),{start:u}=s.range,m=u.translate(void 0,l?.[0].length);return{range:new Y(u,m),text:""}})}function XD(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function r5(t){if(t.options.insertSpaces){let e=JD(t);return" ".repeat(e)}return"	"}function n5(t){if(t.options.insertSpaces){let e=JD(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function JD(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var hg=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(ii)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=ot(await ct(e,this.runForEditor));return await k().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:mr(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(y=>y.toDestination(n).constructChangeEdit(y.contentText)),o=r.map(({contentSelection:y})=>y),s=i.map(({range:y})=>y),l=k().getEditableTextEditor(e),{contentSelections:u,editRanges:m}=await Oe({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:s,behavior:0}}}),d=Mt(i,m).map(([y,x])=>y.updateRange(x)),g=e.selections[0];return u.some(y=>y.intersection(g)!=null)&&await l.revealRange(g),{sourceMark:un(r,d),thatMark:un(r,u)}}},yg=class extends hg{constructor(e,r){super(e,r,!0)}},Tg=class extends hg{constructor(e,r){super(e,r,!1)}};var Il=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ii)]}async run(e){let r=await ct(e,async(i,o)=>{let s=this.getEdits(o),l=o.map(d=>d.thatTarget.contentSelection),{contentSelections:u,editRanges:m}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(i),edits:s,selections:{contentSelections:l,editRanges:{selections:s.map(d=>d.range),behavior:0}}});return{thatMark:u.map(d=>({editor:i,selection:d})),flashRanges:Ko(s,m).map(([d,g])=>({editor:i,range:d.isLine?d.updateRange(g):g,isLine:d.isLine}))}});return await k().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:s,isLine:l})=>({editor:o,range:l?Vr(s):mr(s),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},xg=class extends Il{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[bg(r,"before"),bg(r,"after")])}},Sg=class extends Il{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>bg(r,"before"))}},vg=class extends Il{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>bg(r,"after"))}};function bg(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.textualType==="line"}}function ec(t,e){if(t.type==="named")throw new Error("Cursorless snippets are deprecated. Please use community snippets. Update to latest cursorless-talon and say 'cursorless migrate snippets'.");if(t.type==="custom")return t;let r=o5(t.snippets,e,t.fallbackLanguage);if(r==null){let n=i5(t.snippets);throw new Error(`No snippet available for language '${e}'. Available languages: ${n}`)}return r}function i5(t){let e=new Set(t.flatMap(r=>r.languages??[]));return Array.from(e).sort().join(", ")}function o5(t,e,r){let n=eM(t.filter(i=>i.languages?.includes(e)));return n==null&&r!=null&&(n=eM(t.filter(i=>i.languages?.includes(r)))),n==null&&(n=t.find(i=>i.languages==null)),n}function eM(t){if(t.length!==0)return t.reduce((e,r)=>{if(e.languages==null||r.languages==null)throw Error("Snippet must have languages defined to find the one with the fewest languages");return r.languages.length<e.languages.length?r:e})}var uv=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},To=class{constructor(){this._children=[]}appendChild(e){return e instanceof Qt&&this._children[this._children.length-1]instanceof Qt?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function s(l,u){for(let m of l)m.parent=u,s(m.children,m)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof _g)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Qt=class t extends To{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},wg=class extends To{},Yt=class t extends wg{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Eg?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},Eg=class t extends To{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Qt&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},pv=class t extends To{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof Fn&&!!s.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof Fn){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},Fn=class t extends To{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},In=class t extends wg{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Qt(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function tM(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var _g=class t extends To{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Yt&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return tM([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Yt&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof In&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){tM(this.children,e)}},ai=class{constructor(){this._scanner=new uv;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new _g;for(;this._parse(i););let o=new Map,s=[],l=0;i.walk(u=>(u instanceof Yt&&(l+=1,u.isFinalTabstop?o.set(0,void 0):!o.has(u.index)&&u.children.length>0?o.set(u.index,u.children):s.push(u)),!0));for(let u of s){let m=o.get(u.index);if(m){let d=new Yt(u.index);d.transform=u.transform;for(let g of m)d.appendChild(g.clone());i.replace(u,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Yt(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Qt(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Yt(Number(r)):new In(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Yt(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Qt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new Eg;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Qt(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new In(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Qt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new pv,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Qt(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Fn(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new Fn(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new Fn(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Fn(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Fn(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new Fn(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Fn(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Qt(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var Rg=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function kg(t,e,r){let n=a5(t)+1,i={};t.walk(o=>{if(o instanceof In){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Qt(r[o.name])]);else if(!Rg[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Yt(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Yt&&(o.index.toString()===e?o.parent.replace(o,[new In("TM_SELECTED_TEXT")]):r!=null&&Object.prototype.hasOwnProperty.call(r,o.index)&&o.parent.replace(o,[new Qt(r[o.index])]));return!0})}function a5(t){let e=0;return t.walk(r=>(r instanceof Yt&&(e=Math.max(e,r.index)),!0)),e}function Ag(t,e,r){let n=s5(t)+1,i={};t.walk(o=>{if(o instanceof In){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Qt(r[o.name])]);else if(!Rg[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Yt(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Yt&&o.index.toString()===e&&o.parent.replace(o,[new In("TM_SELECTED_TEXT")]);return!0})}function s5(t){let e=0;return t.walk(r=>(r instanceof Yt&&(e=Math.max(e,r.index)),!0)),e}function Pg(t,e,r){let n=e.map(o=>c5(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function c5(t,e,r){let n=e.editor.document.languageId,i={multipleTargets:!1};return r.findIndex(({scope:o})=>{if(o==null)return!0;let{langIds:s,scopeTypes:l,excludeDescendantScopeTypes:u}=o;if(s!=null&&!s.includes(n))return!1;if(l!=null){let m=l.concat(u??[]),d,g;for(let y of m)try{let x=t.create({type:"containingScope",scopeType:{type:y}}).run(e,i)[0];e.contentRange.isRangeEqual(x.contentRange)&&(x=t.create({type:"containingScope",scopeType:{type:y},ancestorIndex:1}).run(e,i)[0]),(d==null||d.contentRange.contains(x.contentRange))&&(d=x,g=y)}catch{continue}return g==null?!1:d!=null&&!(u??[]).includes(g)}return!0})}var rM=!1;function Dg(){rM||($o(k().messages,"legacySnippets","Talon community snippets are now fully supported in Cursorless! Cursorless's experimental snippets are now deprecated, but in most cases we can help you migrate automatically. Update cursorless-talon and say 'cursorless migrate snippets'."),rM=!0)}var iM={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(nM).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(nM).join("")}};function nM(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}var Cl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new ai;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new js(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}getSnippetInfo(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=Pg(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(s){return s==null?void 0:l5(i,o,s)}}}async run(e,r){Dg();let n=k().getEditableTextEditor(kt(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(m=>new Nt({editor:n,contentRange:m,isReversed:!1,hasExplicitRange:!0}))),s=this.snippetParser.parse(i);Ag(s,null,o(r.substitutions));let l=s.toTextmateString(),{editorSelections:u}=await Oe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}};function l5(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let s=iM[o];if(s==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,s(i.split(" "))]}))}var Ol=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new ai;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=kt(e),o=ec(r,n.document.languageId).scopeTypes??[];return o.length===0?[]:[new js(this.modifierStageFactory,{type:"cascading",modifiers:o.map(s=>({type:"containingScope",scopeType:s}))})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(kt(e)),i=ec(r,n.document.languageId),o=this.snippetParser.parse(i.body),s=i.substitutions??r.substitutions;kg(o,null,s);let l=o.toTextmateString();await this.actions.editNew.run(e);let{editorSelections:u}=await Oe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}legacy(){return new Cl(this.rangeUpdater,this.snippets,this.actions,this.modifierStageFactory)}};var Nl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ii)]}async run(e){return await Be(k(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:ot(await ct(e,async(n,i)=>{let{thatRanges:o}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(n),edits:u5(n,i),selections:{thatRanges:i.map(({contentRange:s})=>s)}});return Ko(i,o).map(([s,l])=>({editor:n,selection:l.toSelection(s.isReversed)}))}))}}};function u5(t,e){let r=[];for(let n of e){let i=n.textualType==="token"?p5(n):m5(n);r.push(...i)}return r}function p5(t){let{editor:e,contentRange:r}=t,n=Ar(e.document.languageId).tokenMatcher,i=fn(n,e,r,"forward");return Array.from(uS(i)).map(([o,s])=>({range:new Y(o.end,s.start),text:"",isReplace:!0}))}function m5(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=ks(_P(n,i+1),s=>e.lineAt(s));return Array.from(uS(o)).map(([s,l])=>({range:new Y(s.rangeTrimmed?.end??s.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var Mg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=k().getEditableTextEditor(kt(e)),n=k().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Oe({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:s,editorSelections:l}=await Oe({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(s),n!=null&&!n.isActive&&await n.focus(),await k().flashRanges(l.map(u=>({editor:r,range:mr(u),style:"justAdded"}))),{thatSelections:l.map(u=>({editor:r,selection:u}))}}};var Lg=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await k().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?Ko(e,n).map(([s,l])=>({destination:s,text:l})):e.map(s=>({destination:s,text:r}));return{thatSelections:ot(await Ri(i,({destination:s})=>s.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:s,text:l})=>s.constructChangeEdit(l)),{editSelections:i}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:s})=>s),behavior:0}}}),o=Ko(n,i).map(([s,l])=>s.updateRange(l).toSelection(l.isReversed));return await k().flashRanges(o.map(s=>({editor:e,range:mr(s),style:"justAdded"}))),o.map(s=>({editor:e,selection:s}))}};var Fg=class{constructor(e,r){this.run=this.run.bind(this),this.runner=k().capabilities.commands.clipboardPaste!=null?new Mg(e,r):new Lg(e)}run(e){return this.runner.run(e)}};var Ul=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=Cd(e),r&&await Be(k(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:ot(await ct(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(s=>s.constructRemovalEdit()),i=k().getEditableTextEditor(e),{editRanges:o}=await Oe({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:s})=>s)}});return Mt(r,o).map(([s,l])=>new ao({editor:s.editor,isReversed:s.isReversed,contentRange:l}))}};var Hl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Be(k(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=Mt(e,n).map(([l,u])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(u)})),o=[],s=[];return await Ri(i,l=>l.editor,async(l,u)=>{let m=u.map(({edit:y})=>y),{contentSelections:d,editRanges:g}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(l),edits:m,selections:{contentSelections:u.map(({target:y})=>y.contentSelection),editRanges:{selections:m.map(({range:y})=>y),behavior:0}}});for(let[y,x]of Mt(u,d))o.push(y.target.withContentRange(x));for(let[y,x]of Mt(u,g))s.push({editor:l,selection:y.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:s}}};var Bl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[av(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(s=>{let l=s.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Be(k(),i,"pendingModification0");let o=await ct(i,async(s,l)=>{let u=l.map((g,y)=>({editor:s,range:g.contentRange,text:y%2===0?r:n})),{sourceRanges:m,thatRanges:d}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(s),edits:u,selections:{sourceRanges:e.map(g=>g.thatTarget.contentRange),thatRanges:e.map(g=>g.contentRange)}});return{sourceMark:un(e,m),thatMark:un(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:s})=>s),thatSelections:o.flatMap(({thatMark:s})=>s)}}};var Vl=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=il(e,s=>s.editor),n=Array.from(r,([s,l])=>({lineNumber:f5(l,this.at),editor:s})),i=k().activeEditableTextEditor;for(let s of n)await k().getEditableTextEditor(s.editor).revealLine(s.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(s=>{let l=s.editor.visibleRanges,u=l[0].start.line,m=l[l.length-1].end.line;return s.contentRange.start.line>u||s.contentRange.end.line<m||s.contentRange.start.line===u&&s.contentRange.end.line===m});return await k().flashRanges(o.map(s=>({editor:s.editor,range:Vr(s.contentRange),style:"referenced"}))),{thatTargets:e}}},Ig=class extends Vl{constructor(){super("top")}},Cg=class extends Vl{constructor(){super("center")}},Og=class extends Vl{constructor(){super("bottom")}};function f5(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var xo=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=kt(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n,o=this.selectionMode==="set"&&i.length===1&&i[0].isEmpty;return await k().getEditableTextEditor(r).setSelections(i,{focusEditor:!0,highlightWord:o}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new st(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new st(r.contentRange.end,r.contentRange.end))}}},Ng=class extends xo{constructor(){super("set","content")}},Ug=class extends xo{constructor(){super("set","before")}},Hg=class extends xo{constructor(){super("set","after")}},Bg=class extends xo{constructor(){super("add","content")}},Vg=class extends xo{constructor(){super("add","before")}},Wg=class extends xo{constructor(){super("add","after")}};var Wl=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var $l=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Be(k(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,s=this.treeSitter.getTree(i.document);r.push(d5(i.document,s,o))}return k().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function d5(t,e,r){let n=[],i=[];return oM(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function oM(t,e,r,n,i){for(;;){let o=new Y(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let s="  ".repeat(i),l=g5(n),u=s+l;if(n.nodeIsNamed)t.push(`${u}${n.nodeType} [${o}]`),e.push(`${u}(${n.nodeType}`),n.gotoFirstChild()?(oM(t,e,r,n,i+1),n.gotoParent(),e.push(`${s})`)):e[e.length-1]+=")";else{let m=`"${n.nodeType}"`;t.push(`${u}${m} [${o}]`),e.push(`${u}${m}`)}}if(!n.gotoNextSibling())return}}function g5(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var jl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&$o(k().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((s,l)=>s.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(s=>s.toDestination("to")),i);return{thatSelections:o}}},$g=class extends jl{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},jg=class extends jl{sortTexts(e){return e.reverse()}},zg=class extends jl{sortTexts(e){return QT(e)}};var zl=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(ii)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Be(k(),r,"referenced"),await ct(e,async(n,i)=>{let o=i.map(s=>pn(s,s.contentRange));await k().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var ql=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await ct(e,async(o,s)=>{let l=s.map(w=>({start:new st(w.contentRange.start,w.contentRange.start),end:new st(w.contentRange.end,w.contentRange.end)})),u=l.flatMap(({start:w,end:U})=>[{text:r,range:w},{text:n,range:U,isReplace:!0}]),m=s.map(w=>w.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:g,sourceSelections:y,thatSelections:x}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(o),edits:u,selections:{boundariesStartSelections:{selections:l.map(({start:w})=>w),behavior:2},boundariesEndSelections:{selections:l.map(({end:w})=>w),behavior:3},sourceSelections:{selections:m,behavior:1},thatSelections:{selections:m,behavior:0}}}),E=[...d,...g];return await k().flashRanges(E.map(w=>({editor:o,range:mr(w),style:"justAdded"}))),{sourceMark:y.map(w=>({editor:o,selection:w})),thatMark:x.map(w=>({editor:o,selection:w}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var Gl=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new ai;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new go(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){let{name:r,variableName:n}=e,s=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return s==null?void 0:{type:s}}getBody(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return Pg(this.modifierStageFactory,r,i.definitions).body.join(`
`)}async run(e,r){Dg();let n=k().getEditableTextEditor(kt(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);Ag(o,r.variableName);let s=o.toTextmateString();await Be(k(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),u=()=>n.insertSnippet(s,l),{targetSelections:m}=await Oe({rangeUpdater:this.rangeUpdater,editor:n,callback:u,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:m.map(d=>({editor:n,selection:d}))}}};var Kl=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new ai;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=kt(e),i=ec(r,n.document.languageId);return i.scopeType==null?[]:[new go(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:i.scopeType}})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(kt(e)),i=ec(r,n.document.languageId),o=this.snippetParser.parse(i.body);kg(o,i.variableName);let s=o.toTextmateString();await Be(k(),e,"pendingModification0");let l=e.map(m=>m.contentSelection),{targetSelections:u}=await Oe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(s,l),preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}legacy(){return new Gl(this.rangeUpdater,this.snippets,this.modifierStageFactory)}};var h5=/-?\d+(\.\d+)?/g,qg=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Ri(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let u=n.offsetAt(l.contentRange.start),m=l.contentText,d=Gc(m,h5);for(let g of d)i.push(y5(e,u,g)),o.push(T5(this.isIncrement,g.text))}let{thatSelections:s}=await this.actions.replace.run(i,o);return s}},Gg=class extends qg{constructor(e){super(e,!0)}},Kg=class extends qg{constructor(e){super(e,!1)}};function y5(t,e,r){return new Ye({editor:t,isReversed:!1,contentRange:new Y(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function T5(t,e){return e.includes(".")?S5(t,e).toString():x5(t,e).toString()}function x5(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function S5(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var Qg=class{constructor(e,r,n,i){this.addSelection=new Bg,this.addSelectionBefore=new Vg,this.addSelectionAfter=new Wg,this.callAsFunction=new Rl(this),this.clearAndSetSelection=new kl(this),this.copyToClipboard=new ng(this,n),this.cutToClipboard=new ig(this),this.decrement=new Kg(this),this.deselect=new Al,this.editNew=new og(n,this),this.editNewLineAfter=new cg(this,i),this.editNewLineBefore=new sg(this,i),this.executeCommand=new Pl(n),this.extractVariable=new Xd(n),this.findInDocument=new ug(this),this.findInWorkspace=new pg(this),this.flashTargets=new mg,this.foldRegion=new $d(n),this.followLink=new Xs({openAside:!1}),this.followLinkAside=new Xs({openAside:!0}),this.generateSnippet=new Js(r),this.getText=new Ll,this.gitAccept=new Jd(n),this.gitRevert=new eg(n),this.gitStage=new tg(n),this.gitUnstage=new rg(n),this.highlight=new Fl,this.increment=new Gg(this),this.indentLine=new dg(n),this.insertCopyAfter=new Tg(n,i),this.insertCopyBefore=new yg(n,i),this.insertEmptyLineAfter=new vg(n,i),this.insertEmptyLineBefore=new Sg(n,i),this.insertEmptyLinesAround=new xg(n,i),this.insertSnippet=new Ol(n,r,this,i),this.joinLines=new Nl(n,i),this.breakLine=new Id(n),this.moveToTarget=new Nd(n),this.outdentLine=new gg(n),this.pasteFromClipboard=new Fg(n,this),this.randomizeTargets=new zg(this),this.remove=new Ul(n),this.rename=new zd(n),this.replace=new Hl(n),this.replaceWithTarget=new Od(n),this.revealDefinition=new Kd(n),this.revealTypeDefinition=new Qd(n),this.reverseTargets=new jg(this),this.rewrapWithPairedDelimiter=new Bl(n,i),this.scrollToBottom=new Og,this.scrollToCenter=new Cg,this.scrollToTop=new Ig,this.setSelection=new Ng,this.setSelectionAfter=new Hg,this.setSelectionBefore=new Ug,this.showDebugHover=new Zd(n),this.showHover=new Yd(n),this.showQuickFix=new Gd(n),this.showReferences=new qd(n),this.sortTargets=new $g(this),this.swapTargets=new Ud(n),this.toggleLineBreakpoint=new zl(i),this.toggleLineComment=new Bd(n),this.unfoldRegion=new jd(n),this.wrapWithPairedDelimiter=new ql(n),this.wrapWithSnippet=new Kl(n,r,i),this["experimental.setInstanceReference"]=new Wl("instanceReference"),this["private.showParseTree"]=new $l(e),this["private.getTargets"]=new Ml,this["private.setKeyboardTarget"]=new Wl("keyboard")}};async function aM(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return Yg(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:Zg(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return Yg(i.destination)?{action:"insert",modifiers:Zg(i.destination),text:await mv(e,i.source)}:null;case"moveToTarget":if(Yg(i.destination)){let o=await mv(e,i.source);return await v5(e,i.source),{action:"insert",modifiers:Zg(i.destination),text:o}}return null;case"callAsFunction":return Xg(i.argument)?{action:i.name,modifiers:Jg(i.argument),callee:await mv(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return Xg(i.target)?{action:i.name,modifiers:Jg(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return Yg(i.destination)?{action:i.name,modifiers:Zg(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return Xg(i.target)?{action:i.name,modifiers:Jg(i.target)}:null}}function Yg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&Xg(t.target):!1}function Xg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function Zg(t){return t.type==="primitive"?Jg(t.target):[]}function Jg(t){return t.type==="primitive"&&t.modifiers!=null&&t.modifiers.length>0?t.modifiers:[]}async function mv(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function v5(t,e){await t({name:"remove",target:e})}function sM(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((s,l)=>[s,l]);for(let[s,l]of o.reverse())for(let u of b5){let m=u.accept(s);if(m.accepted){let[d,g]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],y={...t,anchor:g.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:g},active:_m(i,x=>{x.modifiers=x.modifiers.slice(Bo(x.modifiers,E=>u.accept(E).accepted)+1)})};return y=m.transformTarget?.(y)??y,{type:"primitive",mark:{type:"target",target:y},modifiers:d}}}return t}var b5=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function dv(t,e){switch(t.type){case"list":return w5(t,e);case"range":return cM(t,e);case"primitive":return eh(t,e);case"implicit":return t}}function w5(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return cM(r,i);case"primitive":return eh(r,i)}})}}function cM(t,e){let r=E5(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return sM(r,n)}function E5(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:eh(t.anchor,e),active:eh(t.active,e.concat(t.anchor))}}function eh(t,e){let r=fv(t.mark??(_5(t)?A5(e):null)??{type:"cursor"}),n=lM(t)??P5(e)??D5(e)??[];return{type:t.type,mark:r,modifiers:n}}function _5(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function lM(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function R5(t){if(k5(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function k5(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function A5(t){return Ql(t,e=>e.mark)}function P5(t){return Ql(t,lM)}function D5(t){return Ql(t,R5)}function Ql(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=Ql([n.anchor],e);if(i!=null)return i;break}case"list":{let i=Ql(n.elements,e);if(i!=null)return i;break}}}}function fv(t){switch(t.type){case"range":return{...t,anchor:fv(t.anchor),active:fv(t.active)};case"target":return{type:"target",target:dv(t.target,[])};default:return t}}var th=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new gv(this.debug)}async run(e){if(Go(e)){let m=await aM(this.commandServerApi,this.runAction,e);if(m!=null)return{fallback:m}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:s,instanceReferenceTargets:l,keyboardTargets:u}=await this.runAction(e.action);return this.storedTargets.set("that",uM(i,n)),this.storedTargets.set("source",uM(s,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",u,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.directory,e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(this.getDestinations(e.destination),e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(this.getTargets(e.target),e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(Om(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},gv=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=dv(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function uM(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(Ys):t}var rh=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Nt({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var nh=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=k().visibleTextEditors.find(s=>s.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new Y(r.line,r.character,n.line,n.character);return[new Nt({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var ih=class{constructor(e){this.mark=e}run(){let e=k().activeTextEditor;if(e==null)return[];let r=M5(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[pS(e,!1,n)]}},M5=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,s=Math.floor(i/100)*100,l=[],u=[],m=s+r;for(;m<=o;)m>=i&&(t.visibleRanges.find(g=>m>=g.start.line&&m<=g.end.line)?l.push(m):u.push(m)),m+=100;if(l.length===1)return l[0];if(l.length+u.length>1)throw new Error("Multiple lines matching");if(u.length===1)return u[0];throw new Error("Line is not in viewport")}}};var oh=class{constructor(e){this.mark=e}run(){return[]}};var ah=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[ho(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var sh=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var ch=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var lh=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new ws;case"that":case"source":case"keyboard":return new sh(this.storedTargets,e.type);case"decoratedSymbol":return new rh(this.readableHatMap,e);case"lineNumber":return new ih(e);case"range":return new ah(this,e);case"nothing":return new oh(e);case"target":return new ch(this.targetPipelineRunner,e);case"explicit":return new nh(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function pM(t,e,r,n,i,o,s,l,u,m){r.active&&(r.log("command:"),r.log(JSON.stringify(m,null,2)));let d=zx(m),g=await n.getReadableMap(d.usePrePhraseSnapshot),y=F5(t,e,s,r,o,g,i,l);for(let E of u)y=E.wrapCommandRunner(g,y);let x=await y.run(d);return await L5(m,x)}async function L5(t,e){if(Go(t))return e;if("returnValue"in e)return e.returnValue}function F5(t,e,r,n,i,o,s,l){let u=new Qs(r,i,new Is(r)),m=new lh(o,i),d=new gd(u,m);return m.setPipelineRunner(d),new th(e,n,i,d,new Qg(t,s,l,u))}function mM(t){return Vk(t)?rl(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${rl(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var uh=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{pr(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...qo.filter(r=>r!=="instance").map(r=>({type:r})),...hm.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:mM(e),isLanguageSpecific:I5(e)}}dispose(){this.disposable.dispose()}};function I5(t){switch(t.type){case"string":case"argumentOrParameter":case"argumentList":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"interior":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function hv(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((s,l)=>s.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=Yp(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=Yp(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function xa(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.getRemovalHighlightRange(),leadingDelimiter:fM(t.getLeadingDelimiterTarget()),trailingDelimiter:fM(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(xa),boundary:t.getBoundary()?.map(xa),insertionDelimiter:t.insertionDelimiter}}function fM(t){return t!=null?xa(t):void 0}function dM(t,e,r,n,i){let o={multipleTargets:!0};return ks(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),s=>({domain:s.domain,ranges:s.getTargets(!1).map(l=>({range:l.contentRange,targets:i?C5(r,l,o).map(xa):void 0}))}))}function C5(t,e,r){try{return t.run(e,r)}catch(n){if(n.name==="NoContainingScopeError")return[];throw n}}function gM(t,e,r){return ks(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(xa)}))}var ph=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:gM(e,i,hv(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,s=this.scopeHandlerFactory.maybeCreate(r,o);if(s==null)return[];let l=this.scopeHandlerFactory.maybeCreate(s.iterationScopeType,o);return l==null?[]:dM(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),hv(e,s,n),i)}};var mh=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Yn(k().configuration,()=>this.onChange());this.disposables.push(k().onDidChangeVisibleTextEditors(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(s){if(pt(k().messages,"ScopeRangeWatcher.provide",s.message),o=[],k().runMode==="test")throw s}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{pr(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{pr(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var fh=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?2:hM(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return 2;let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?2:hM(e,o)?0:1}};function hM(t,e){return!jk(e.generateScopes(t,new _e(0,0),"forward"))}var dh=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Yn(k().configuration,()=>this.onChange());this.disposable=$k(k().onDidOpenTextDocument(i.run),k().onDidCloseTextDocument(i.run),k().onDidChangeActiveTextEditor(i.run),k().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{pr(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=k().activeTextEditor,r=e==null?()=>2:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>2:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function yM({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new gf,commandServerApi:i=new uf,talonSpokenForms:o=new df,snippets:s=new ff}){Vm(t);let l=new rf(t),u=new lf,m=new $m,d=new tf(t,m),g=new Tf(o),y=e!=null?new sf(u,l,e,i):new pf;y.allocateHats();let x=r?await od.create(t,n,r):new mf;t.disposeOnExit(u,x,y,l,d);let E=[],w,U=W=>(w=W,pM(n,i,l,y,s,m,x,u,E,W));return{commandApi:{runCommand(W){return U(W)},runCommandSafe(...W){return U(ym(W))},repeatPreviousCommand(){if(w==null)throw new Error("No previous command");return U(w)}},scopeProvider:N5(x,m,g),customSpokenFormGenerator:g,storedTargets:m,hatTokenMap:y,injectIde:Vm,addCommandRunnerDecorator:W=>{E.push(W)}}}function N5(t,e,r){let n=new Is(t),i=new ph(n,new Qs(t,e,n)),o=new mh(t,i),s=new fh(n),l=new uh(r),u=new dh(t,s,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:s.getScopeSupport,getIterationScopeSupport:s.getIterationScopeSupport,onDidChangeScopeSupport:u.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function TM(t,e){switch(e.type){case"UntypedTarget":return new Nt({editor:t,isReversed:e.isReversed,contentRange:sm(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new fr({editor:t,isReversed:e.isReversed,contentRange:sm(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var PFe=Symbol("unused");var Yl=class{constructor(e){this.position=e}},DFe={$0:new Yl(0),$1:new Yl(1),$2:new Yl(2)};var xM=require("node:events"),gh=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new xM.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function zr(){return global._neovimRegistry==null&&(global._neovimRegistry=new gh),global._neovimRegistry}var SM="pokey.cursorless";async function hh(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,s,l]=await e.executeLua(r,[]),u;return l===!0?u=[new st(new _e(o-1,s-1),new _e(n-1,i-1))]:u=[new st(new _e(n-1,i-1),new _e(o-1,s-1))],console.debug(`bufferGetSelections(): selections=(${u[0].start.line}, ${u[0].start.character}), (${u[0].end.line}, ${u[0].end.character}) neovim=(${n},${i}),(${o},${s}),reverse=${l}`),u}async function vM(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function bM(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),s=new Y(new _e(i-1,0),new _e(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${s.start.line}, ${s.start.character}), (${s.end.line}, ${s.end.character})`),[s]}async function wM(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function yh(t,e){await e.callFunction("setreg",["*",t])}async function EM(t){return await t.callFunction("getreg",["*"])}async function _M(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function RM(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function kM(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function AM(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var U5={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0},Th=class{constructor(){this.commands=U5}};var Zl=class{constructor(e){this.client=e}async readText(){return await EM(this.client)}async writeText(e){return await yh(e,this.client)}};var xh=on(yv(),1);var Jl=class{constructor(){this.notifier=new er;this.mocks={...tm};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(H5(n,r))return(0,xh.get)(i,e)??(0,xh.get)(this.mocks,e)}return(0,xh.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function H5(t,e){return t.languageId===e.languageId}async function Tv(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);n.sort((s,l)=>(PM(s)||DM(s))&&(PM(l)||DM(l))?1:s.range.start.line===l.range.start.line?l.range.start.character-s.range.start.character:l.range.start.line-s.range.start.line),console.debug("neovimEdit() [sorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let s of n)o.push({range:s.range,rangeOffset:i.offsetAt(s.range.start),rangeLength:i.offsetAt(s.range.end)-i.offsetAt(s.range.start),text:s.text});zr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let s of n){let{range:l,text:u,isReplace:m}=s;u===""?await MM(t,l):l.isEmpty&&!m?await LM(t,l.start,u):await B5(t,l,u)}return await e.updateTextEditor(),!0}async function MM(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(s+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([s,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function LM(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=s+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let u=s+n[0],m=n[n.length-1]+l;await i.setLines([u,...n.slice(1,n.length-1),m],{start:e.line,end:e.line+1,strictIndexing:!0})}async function B5(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await MM(t,e),await LM(t,e.start,r)}function PM(t){return t.range.isEmpty&&!t.isReplace}function DM(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function FM(t){return zr().onEvent("onDidChangeTextDocument",t),CM()}function IM(t,e,r){return zr().onEvent("onDidOpenTextDocument",t),CM()}function CM(){return{dispose(){}}}var eu=class{constructor(){this.data={...rm}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var FF=on(yv(),1);var tu=class{async showMessage(e,r,n,...i){}};async function OM(t,e){let r=e.activeTextEditor,n=await t.window,i=await hh(n,t),o=r.document.getText(i[0]);await yh(o,t)}async function NM(t,e){await _M(t)}var Sh=class{constructor(e,r,n,i,o,s,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=s}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await vM(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await Tv(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await OM(this.client,this.neovimIDE)}async clipboardPaste(){await NM(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}async gitAccept(e){throw Error("gitAccept Not implemented")}async gitRevert(e){throw Error("gitRevert Not implemented")}async gitStage(e){throw Error("gitStage Not implemented")}async gitUnstage(e){throw Error("gitUnstage Not implemented")}};var Bb=on(require("path"),1);var UM;(()=>{"use strict";var t={975:C=>{function A(F){if(typeof F!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(F))}function z(F,N){for(var j,X="",Q=0,re=-1,be=0,Ee=0;Ee<=F.length;++Ee){if(Ee<F.length)j=F.charCodeAt(Ee);else{if(j===47)break;j=47}if(j===47){if(!(re===Ee-1||be===1))if(re!==Ee-1&&be===2){if(X.length<2||Q!==2||X.charCodeAt(X.length-1)!==46||X.charCodeAt(X.length-2)!==46){if(X.length>2){var Ke=X.lastIndexOf("/");if(Ke!==X.length-1){Ke===-1?(X="",Q=0):Q=(X=X.slice(0,Ke)).length-1-X.lastIndexOf("/"),re=Ee,be=0;continue}}else if(X.length===2||X.length===1){X="",Q=0,re=Ee,be=0;continue}}N&&(X.length>0?X+="/..":X="..",Q=2)}else X.length>0?X+="/"+F.slice(re+1,Ee):X=F.slice(re+1,Ee),Q=Ee-re-1;re=Ee,be=0}else j===46&&be!==-1?++be:be=-1}return X}var Z={resolve:function(){for(var F,N="",j=!1,X=arguments.length-1;X>=-1&&!j;X--){var Q;X>=0?Q=arguments[X]:(F===void 0&&(F=process.cwd()),Q=F),A(Q),Q.length!==0&&(N=Q+"/"+N,j=Q.charCodeAt(0)===47)}return N=z(N,!j),j?N.length>0?"/"+N:"/":N.length>0?N:"."},normalize:function(F){if(A(F),F.length===0)return".";var N=F.charCodeAt(0)===47,j=F.charCodeAt(F.length-1)===47;return(F=z(F,!N)).length!==0||N||(F="."),F.length>0&&j&&(F+="/"),N?"/"+F:F},isAbsolute:function(F){return A(F),F.length>0&&F.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var F,N=0;N<arguments.length;++N){var j=arguments[N];A(j),j.length>0&&(F===void 0?F=j:F+="/"+j)}return F===void 0?".":Z.normalize(F)},relative:function(F,N){if(A(F),A(N),F===N||(F=Z.resolve(F))===(N=Z.resolve(N)))return"";for(var j=1;j<F.length&&F.charCodeAt(j)===47;++j);for(var X=F.length,Q=X-j,re=1;re<N.length&&N.charCodeAt(re)===47;++re);for(var be=N.length-re,Ee=Q<be?Q:be,Ke=-1,Ue=0;Ue<=Ee;++Ue){if(Ue===Ee){if(be>Ee){if(N.charCodeAt(re+Ue)===47)return N.slice(re+Ue+1);if(Ue===0)return N.slice(re+Ue)}else Q>Ee&&(F.charCodeAt(j+Ue)===47?Ke=Ue:Ue===0&&(Ke=0));break}var dt=F.charCodeAt(j+Ue);if(dt!==N.charCodeAt(re+Ue))break;dt===47&&(Ke=Ue)}var Wt="";for(Ue=j+Ke+1;Ue<=X;++Ue)Ue!==X&&F.charCodeAt(Ue)!==47||(Wt.length===0?Wt+="..":Wt+="/..");return Wt.length>0?Wt+N.slice(re+Ke):(re+=Ke,N.charCodeAt(re)===47&&++re,N.slice(re))},_makeLong:function(F){return F},dirname:function(F){if(A(F),F.length===0)return".";for(var N=F.charCodeAt(0),j=N===47,X=-1,Q=!0,re=F.length-1;re>=1;--re)if((N=F.charCodeAt(re))===47){if(!Q){X=re;break}}else Q=!1;return X===-1?j?"/":".":j&&X===1?"//":F.slice(0,X)},basename:function(F,N){if(N!==void 0&&typeof N!="string")throw new TypeError('"ext" argument must be a string');A(F);var j,X=0,Q=-1,re=!0;if(N!==void 0&&N.length>0&&N.length<=F.length){if(N.length===F.length&&N===F)return"";var be=N.length-1,Ee=-1;for(j=F.length-1;j>=0;--j){var Ke=F.charCodeAt(j);if(Ke===47){if(!re){X=j+1;break}}else Ee===-1&&(re=!1,Ee=j+1),be>=0&&(Ke===N.charCodeAt(be)?--be==-1&&(Q=j):(be=-1,Q=Ee))}return X===Q?Q=Ee:Q===-1&&(Q=F.length),F.slice(X,Q)}for(j=F.length-1;j>=0;--j)if(F.charCodeAt(j)===47){if(!re){X=j+1;break}}else Q===-1&&(re=!1,Q=j+1);return Q===-1?"":F.slice(X,Q)},extname:function(F){A(F);for(var N=-1,j=0,X=-1,Q=!0,re=0,be=F.length-1;be>=0;--be){var Ee=F.charCodeAt(be);if(Ee!==47)X===-1&&(Q=!1,X=be+1),Ee===46?N===-1?N=be:re!==1&&(re=1):N!==-1&&(re=-1);else if(!Q){j=be+1;break}}return N===-1||X===-1||re===0||re===1&&N===X-1&&N===j+1?"":F.slice(N,X)},format:function(F){if(F===null||typeof F!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof F);return function(N,j){var X=j.dir||j.root,Q=j.base||(j.name||"")+(j.ext||"");return X?X===j.root?X+Q:X+"/"+Q:Q}(0,F)},parse:function(F){A(F);var N={root:"",dir:"",base:"",ext:"",name:""};if(F.length===0)return N;var j,X=F.charCodeAt(0),Q=X===47;Q?(N.root="/",j=1):j=0;for(var re=-1,be=0,Ee=-1,Ke=!0,Ue=F.length-1,dt=0;Ue>=j;--Ue)if((X=F.charCodeAt(Ue))!==47)Ee===-1&&(Ke=!1,Ee=Ue+1),X===46?re===-1?re=Ue:dt!==1&&(dt=1):re!==-1&&(dt=-1);else if(!Ke){be=Ue+1;break}return re===-1||Ee===-1||dt===0||dt===1&&re===Ee-1&&re===be+1?Ee!==-1&&(N.base=N.name=be===0&&Q?F.slice(1,Ee):F.slice(be,Ee)):(be===0&&Q?(N.name=F.slice(1,re),N.base=F.slice(1,Ee)):(N.name=F.slice(be,re),N.base=F.slice(be,Ee)),N.ext=F.slice(re,Ee)),be>0?N.dir=F.slice(0,be-1):Q&&(N.dir="/"),N},sep:"/",delimiter:":",win32:null,posix:null};Z.posix=Z,C.exports=Z}},e={};function r(C){var A=e[C];if(A!==void 0)return A.exports;var z=e[C]={exports:{}};return t[C](z,z.exports,r),z.exports}r.d=(C,A)=>{for(var z in A)r.o(A,z)&&!r.o(C,z)&&Object.defineProperty(C,z,{enumerable:!0,get:A[z]})},r.o=(C,A)=>Object.prototype.hasOwnProperty.call(C,A),r.r=C=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:()=>y,Utils:()=>B}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function u(C,A){if(!C.scheme&&A)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${C.authority}", path: "${C.path}", query: "${C.query}", fragment: "${C.fragment}"}`);if(C.scheme&&!o.test(C.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(C.path){if(C.authority){if(!s.test(C.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(C.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let m="",d="/",g=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class y{static isUri(A){return A instanceof y||!!A&&typeof A.authority=="string"&&typeof A.fragment=="string"&&typeof A.path=="string"&&typeof A.query=="string"&&typeof A.scheme=="string"&&typeof A.fsPath=="string"&&typeof A.with=="function"&&typeof A.toString=="function"}scheme;authority;path;query;fragment;constructor(A,z,Z,F,N,j=!1){typeof A=="object"?(this.scheme=A.scheme||m,this.authority=A.authority||m,this.path=A.path||m,this.query=A.query||m,this.fragment=A.fragment||m):(this.scheme=function(X,Q){return X||Q?X:"file"}(A,j),this.authority=z||m,this.path=function(X,Q){switch(X){case"https":case"http":case"file":Q?Q[0]!==d&&(Q=d+Q):Q=d}return Q}(this.scheme,Z||m),this.query=F||m,this.fragment=N||m,u(this,j))}get fsPath(){return q(this,!1)}with(A){if(!A)return this;let{scheme:z,authority:Z,path:F,query:N,fragment:j}=A;return z===void 0?z=this.scheme:z===null&&(z=m),Z===void 0?Z=this.authority:Z===null&&(Z=m),F===void 0?F=this.path:F===null&&(F=m),N===void 0?N=this.query:N===null&&(N=m),j===void 0?j=this.fragment:j===null&&(j=m),z===this.scheme&&Z===this.authority&&F===this.path&&N===this.query&&j===this.fragment?this:new E(z,Z,F,N,j)}static parse(A,z=!1){let Z=g.exec(A);return Z?new E(Z[2]||m,ve(Z[4]||m),ve(Z[5]||m),ve(Z[7]||m),ve(Z[9]||m),z):new E(m,m,m,m,m)}static file(A){let z=m;if(i&&(A=A.replace(/\\/g,d)),A[0]===d&&A[1]===d){let Z=A.indexOf(d,2);Z===-1?(z=A.substring(2),A=d):(z=A.substring(2,Z),A=A.substring(Z)||d)}return new E("file",z,A,m,m)}static from(A){let z=new E(A.scheme,A.authority,A.path,A.query,A.fragment);return u(z,!0),z}toString(A=!1){return ie(this,A)}toJSON(){return this}static revive(A){if(A){if(A instanceof y)return A;{let z=new E(A);return z._formatted=A.external,z._fsPath=A._sep===x?A.fsPath:null,z}}return A}}let x=i?1:void 0;class E extends y{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=q(this,!1)),this._fsPath}toString(A=!1){return A?ie(this,!0):(this._formatted||(this._formatted=ie(this,!1)),this._formatted)}toJSON(){let A={$mid:1};return this._fsPath&&(A.fsPath=this._fsPath,A._sep=x),this._formatted&&(A.external=this._formatted),this.path&&(A.path=this.path),this.scheme&&(A.scheme=this.scheme),this.authority&&(A.authority=this.authority),this.query&&(A.query=this.query),this.fragment&&(A.fragment=this.fragment),A}}let w={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function U(C,A,z){let Z,F=-1;for(let N=0;N<C.length;N++){let j=C.charCodeAt(N);if(j>=97&&j<=122||j>=65&&j<=90||j>=48&&j<=57||j===45||j===46||j===95||j===126||A&&j===47||z&&j===91||z&&j===93||z&&j===58)F!==-1&&(Z+=encodeURIComponent(C.substring(F,N)),F=-1),Z!==void 0&&(Z+=C.charAt(N));else{Z===void 0&&(Z=C.substr(0,N));let X=w[j];X!==void 0?(F!==-1&&(Z+=encodeURIComponent(C.substring(F,N)),F=-1),Z+=X):F===-1&&(F=N)}}return F!==-1&&(Z+=encodeURIComponent(C.substring(F))),Z!==void 0?Z:C}function W(C){let A;for(let z=0;z<C.length;z++){let Z=C.charCodeAt(z);Z===35||Z===63?(A===void 0&&(A=C.substr(0,z)),A+=w[Z]):A!==void 0&&(A+=C[z])}return A!==void 0?A:C}function q(C,A){let z;return z=C.authority&&C.path.length>1&&C.scheme==="file"?`//${C.authority}${C.path}`:C.path.charCodeAt(0)===47&&(C.path.charCodeAt(1)>=65&&C.path.charCodeAt(1)<=90||C.path.charCodeAt(1)>=97&&C.path.charCodeAt(1)<=122)&&C.path.charCodeAt(2)===58?A?C.path.substr(1):C.path[1].toLowerCase()+C.path.substr(2):C.path,i&&(z=z.replace(/\//g,"\\")),z}function ie(C,A){let z=A?W:U,Z="",{scheme:F,authority:N,path:j,query:X,fragment:Q}=C;if(F&&(Z+=F,Z+=":"),(N||F==="file")&&(Z+=d,Z+=d),N){let re=N.indexOf("@");if(re!==-1){let be=N.substr(0,re);N=N.substr(re+1),re=be.lastIndexOf(":"),re===-1?Z+=z(be,!1,!1):(Z+=z(be.substr(0,re),!1,!1),Z+=":",Z+=z(be.substr(re+1),!1,!0)),Z+="@"}N=N.toLowerCase(),re=N.lastIndexOf(":"),re===-1?Z+=z(N,!1,!0):(Z+=z(N.substr(0,re),!1,!0),Z+=N.substr(re))}if(j){if(j.length>=3&&j.charCodeAt(0)===47&&j.charCodeAt(2)===58){let re=j.charCodeAt(1);re>=65&&re<=90&&(j=`/${String.fromCharCode(re+32)}:${j.substr(3)}`)}else if(j.length>=2&&j.charCodeAt(1)===58){let re=j.charCodeAt(0);re>=65&&re<=90&&(j=`${String.fromCharCode(re+32)}:${j.substr(2)}`)}Z+=z(j,!0,!1)}return X&&(Z+="?",Z+=z(X,!1,!1)),Q&&(Z+="#",Z+=A?Q:U(Q,!1,!1)),Z}function se(C){try{return decodeURIComponent(C)}catch{return C.length>3?C.substr(0,3)+se(C.substr(3)):C}}let fe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ve(C){return C.match(fe)?C.replace(fe,A=>se(A)):C}var Et=r(975);let yr=Et.posix||Et,Tr="/";var B;(function(C){C.joinPath=function(A,...z){return A.with({path:yr.join(A.path,...z)})},C.resolvePath=function(A,...z){let Z=A.path,F=!1;Z[0]!==Tr&&(Z=Tr+Z,F=!0);let N=yr.resolve(Z,...z);return F&&N[0]===Tr&&!A.authority&&(N=N.substring(1)),A.with({path:N})},C.dirname=function(A){if(A.path.length===0||A.path===Tr)return A;let z=yr.dirname(A.path);return z.length===1&&z.charCodeAt(0)===46&&(z=""),A.with({path:z})},C.basename=function(A){return yr.basename(A.path)},C.extname=function(A){return yr.extname(A.path)}})(B||(B={})),UM=n})();var{URI:HM,Utils:AIe}=UM;var xv=(t,e,r)=>{let n=t instanceof RegExp?BM(t,r):t,i=e instanceof RegExp?BM(e,r):e,o=n!==null&&i!=null&&V5(n,i,r);return o&&{start:o[0],end:o[1],pre:r.slice(0,o[0]),body:r.slice(o[0]+n.length,o[1]),post:r.slice(o[1]+i.length)}},BM=(t,e)=>{let r=e.match(t);return r?r[0]:null},V5=(t,e,r)=>{let n,i,o,s,l,u=r.indexOf(t),m=r.indexOf(e,u+1),d=u;if(u>=0&&m>0){if(t===e)return[u,m];for(n=[],o=r.length;d>=0&&!l;){if(d===u)n.push(d),u=r.indexOf(t,d+1);else if(n.length===1){let g=n.pop();g!==void 0&&(l=[g,m])}else i=n.pop(),i!==void 0&&i<o&&(o=i,s=m),m=r.indexOf(e,d+1);d=u<m&&u>=0?u:m}n.length&&s!==void 0&&(l=[o,s])}return l};var VM="\0SLASH"+Math.random()+"\0",WM="\0OPEN"+Math.random()+"\0",vv="\0CLOSE"+Math.random()+"\0",$M="\0COMMA"+Math.random()+"\0",jM="\0PERIOD"+Math.random()+"\0",W5=new RegExp(VM,"g"),$5=new RegExp(WM,"g"),j5=new RegExp(vv,"g"),z5=new RegExp($M,"g"),q5=new RegExp(jM,"g"),G5=/\\\\/g,K5=/\\{/g,Q5=/\\}/g,Y5=/\\,/g,Z5=/\\./g;function Sv(t){return isNaN(t)?t.charCodeAt(0):parseInt(t,10)}function X5(t){return t.replace(G5,VM).replace(K5,WM).replace(Q5,vv).replace(Y5,$M).replace(Z5,jM)}function J5(t){return t.replace(W5,"\\").replace($5,"{").replace(j5,"}").replace(z5,",").replace(q5,".")}function zM(t){if(!t)return[""];let e=[],r=xv("{","}",t);if(!r)return t.split(",");let{pre:n,body:i,post:o}=r,s=n.split(",");s[s.length-1]+="{"+i+"}";let l=zM(o);return o.length&&(s[s.length-1]+=l.shift(),s.push.apply(s,l)),e.push.apply(e,s),e}function qM(t){return t?(t.slice(0,2)==="{}"&&(t="\\{\\}"+t.slice(2)),ru(X5(t),!0).map(J5)):[]}function eQ(t){return"{"+t+"}"}function tQ(t){return/^-?0\d/.test(t)}function rQ(t,e){return t<=e}function nQ(t,e){return t>=e}function ru(t,e){let r=[],n=xv("{","}",t);if(!n)return[t];let i=n.pre,o=n.post.length?ru(n.post,!1):[""];if(/\$$/.test(n.pre))for(let s=0;s<o.length;s++){let l=i+"{"+n.body+"}"+o[s];r.push(l)}else{let s=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),u=s||l,m=n.body.indexOf(",")>=0;if(!u&&!m)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+vv+n.post,ru(t)):[t];let d;if(u)d=n.body.split(/\.\./);else if(d=zM(n.body),d.length===1&&d[0]!==void 0&&(d=ru(d[0],!1).map(eQ),d.length===1))return o.map(y=>n.pre+d[0]+y);let g;if(u&&d[0]!==void 0&&d[1]!==void 0){let y=Sv(d[0]),x=Sv(d[1]),E=Math.max(d[0].length,d[1].length),w=d.length===3&&d[2]!==void 0?Math.abs(Sv(d[2])):1,U=rQ;x<y&&(w*=-1,U=nQ);let q=d.some(tQ);g=[];for(let ie=y;U(ie,x);ie+=w){let se;if(l)se=String.fromCharCode(ie),se==="\\"&&(se="");else if(se=String(ie),q){let fe=E-se.length;if(fe>0){let ve=new Array(fe+1).join("0");ie<0?se="-"+ve+se.slice(1):se=ve+se}}g.push(se)}}else{g=[];for(let y=0;y<d.length;y++)g.push.apply(g,ru(d[y],!1))}for(let y=0;y<g.length;y++)for(let x=0;x<o.length;x++){let E=i+g[y]+o[x];(!e||u||E)&&r.push(E)}}return r}var nu=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var iQ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},iu=t=>t.replace(/[[\]\\-]/g,"\\$&"),oQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),GM=t=>t.join(""),KM=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,l=!1,u=!1,m=!1,d=r,g="";e:for(;o<t.length;){let w=t.charAt(o);if((w==="!"||w==="^")&&o===r+1){m=!0,o++;continue}if(w==="]"&&s&&!u){d=o+1;break}if(s=!0,w==="\\"&&!u){u=!0,o++;continue}if(w==="["&&!u){for(let[U,[W,q,ie]]of Object.entries(iQ))if(t.startsWith(U,o)){if(g)return["$.",!1,t.length-r,!0];o+=U.length,ie?i.push(W):n.push(W),l=l||q;continue e}}if(u=!1,g){w>g?n.push(iu(g)+"-"+iu(w)):w===g&&n.push(iu(w)),g="",o++;continue}if(t.startsWith("-]",o+1)){n.push(iu(w+"-")),o+=2;continue}if(t.startsWith("-",o+1)){g=w,o+=2;continue}n.push(iu(w)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!m){let w=n[0].length===2?n[0].slice(-1):n[0];return[oQ(w),!1,d-r,!1]}let y="["+(m?"^":"")+GM(n)+"]",x="["+(m?"":"^")+GM(i)+"]";return[n.length&&i.length?"("+y+"|"+x+")":n.length?y:x,l,d-r,!0]};var Cn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var aQ=new Set(["!","?","+","*","@"]),QM=t=>aQ.has(t),sQ="(?!(?:^|/)\\.\\.?(?:$|/))",vh="(?!\\.)",cQ=new Set(["[","."]),lQ=new Set(["..","."]),uQ=new Set("().*{}+?[]^$\\!"),pQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),bv="[^/]",YM=bv+"*?",ZM=bv+"+?",rc=class t{type;#e;#t;#o=!1;#n=[];#a;#S;#l;#p=!1;#s;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#a=r,this.#e=this.#a?this.#a.#e:this,this.#s=this.#e===this?n:this.#e.#s,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#p&&this.#l.push(this),this.#S=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#h(){if(this!==this.#e)throw new Error("should only call on root");if(this.#p)return this;this.toString(),this.#p=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#a;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#a}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#a===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#p&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#S===0)return!0;let e=this.#a;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,s=!1,l=-1,u=!1;if(r.type===null){let x=n,E="";for(;x<e.length;){let w=e.charAt(x++);if(o||w==="\\"){o=!o,E+=w;continue}if(s){x===l+1?(w==="^"||w==="!")&&(u=!0):w==="]"&&!(x===l+2&&u)&&(s=!1),E+=w;continue}else if(w==="["){s=!0,l=x,u=!1,E+=w;continue}if(!i.noext&&QM(w)&&e.charAt(x)==="("){r.push(E),E="";let U=new t(w,r);x=t.#y(e,U,x,i),r.push(U);continue}E+=w}return r.push(E),x}let m=n+1,d=new t(null,r),g=[],y="";for(;m<e.length;){let x=e.charAt(m++);if(o||x==="\\"){o=!o,y+=x;continue}if(s){m===l+1?(x==="^"||x==="!")&&(u=!0):x==="]"&&!(m===l+2&&u)&&(s=!1),y+=x;continue}else if(x==="["){s=!0,l=m,u=!1,y+=x;continue}if(QM(x)&&e.charAt(m)==="("){d.push(y),y="";let E=new t(x,d);d.push(E),m=t.#y(e,E,m,i);continue}if(x==="|"){d.push(y),y="",g.push(d),d=new t(null,r);continue}if(x===")")return y===""&&r.#n.length===0&&(r.#i=!0),d.push(y),y="",r.push(...g,d),m;y+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],m}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#s.nocase&&!this.#s.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#s.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#s}toRegExpSource(e){let r=e??!!this.#s.dot;if(this.#e===this&&this.#h(),!this.type){let u=this.isStart()&&this.isEnd(),m=this.#n.map(x=>{let[E,w,U,W]=typeof x=="string"?t.#m(x,this.#t,u):x.toRegExpSource(e);return this.#t=this.#t||U,this.#o=this.#o||W,E}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&lQ.has(this.#n[0]))){let E=cQ,w=r&&E.has(m.charAt(0))||m.startsWith("\\.")&&E.has(m.charAt(2))||m.startsWith("\\.\\.")&&E.has(m.charAt(4)),U=!r&&!e&&E.has(m.charAt(0));d=w?sQ:U?vh:""}let g="";return this.isEnd()&&this.#e.#p&&this.#a?.type==="!"&&(g="(?:$|\\/)"),[d+m+g,Cn(m),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let u=this.toString();return this.#n=[u],this.type=null,this.#t=void 0,[u,Cn(this.toString()),!1,!1]}let s=!n||e||r||!vh?"":this.#f(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?vh:"")+ZM;else{let u=this.type==="!"?"))"+(this.isStart()&&!r&&!e?vh:"")+YM+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;l=i+o+u}return[l,Cn(o),this.#t=!!this.#t,this.#o]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#o=this.#o||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",s=!1;for(let l=0;l<e.length;l++){let u=e.charAt(l);if(i){i=!1,o+=(uQ.has(u)?"\\":"")+u;continue}if(u==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(u==="["){let[m,d,g,y]=KM(e,l);if(g){o+=m,s=s||d,l+=g-1,r=r||y;continue}}if(u==="*"){n&&e==="*"?o+=ZM:o+=YM,r=!0;continue}if(u==="?"){o+=bv,r=!0;continue}o+=pQ(u)}return[o,Cn(e),!!r,s]}};var nc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var dr=(t,e,r={})=>(nu(e),!r.nocomment&&e.charAt(0)==="#"?!1:new qr(e,r).match(t)),mQ=/^\*+([^+@!?\*\[\(]*)$/,fQ=t=>e=>!e.startsWith(".")&&e.endsWith(t),dQ=t=>e=>e.endsWith(t),gQ=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),hQ=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),yQ=/^\*+\.\*+$/,TQ=t=>!t.startsWith(".")&&t.includes("."),xQ=t=>t!=="."&&t!==".."&&t.includes("."),SQ=/^\.\*+$/,vQ=t=>t!=="."&&t!==".."&&t.startsWith("."),bQ=/^\*+$/,wQ=t=>t.length!==0&&!t.startsWith("."),EQ=t=>t.length!==0&&t!=="."&&t!=="..",_Q=/^\?+([^+@!?\*\[\(]*)?$/,RQ=([t,e=""])=>{let r=eL([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},kQ=([t,e=""])=>{let r=tL([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},AQ=([t,e=""])=>{let r=tL([t]);return e?n=>r(n)&&n.endsWith(e):r},PQ=([t,e=""])=>{let r=eL([t]);return e?n=>r(n)&&n.endsWith(e):r},eL=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},tL=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},rL=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",XM={win32:{sep:"\\"},posix:{sep:"/"}},DQ=rL==="win32"?XM.win32.sep:XM.posix.sep;dr.sep=DQ;var Zt=Symbol("globstar **");dr.GLOBSTAR=Zt;var MQ="[^/]",LQ=MQ+"*?",FQ="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",IQ="(?:(?!(?:\\/|^)\\.).)*?",CQ=(t,e={})=>r=>dr(r,t,e);dr.filter=CQ;var yn=(t,e={})=>Object.assign({},t,e),OQ=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return dr;let e=dr;return Object.assign((n,i,o={})=>e(n,i,yn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,yn(t,o))}static defaults(i){return e.defaults(yn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,yn(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,yn(t,o))}},unescape:(n,i={})=>e.unescape(n,yn(t,i)),escape:(n,i={})=>e.escape(n,yn(t,i)),filter:(n,i={})=>e.filter(n,yn(t,i)),defaults:n=>e.defaults(yn(t,n)),makeRe:(n,i={})=>e.makeRe(n,yn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,yn(t,i)),match:(n,i,o={})=>e.match(n,i,yn(t,o)),sep:e.sep,GLOBSTAR:Zt})};dr.defaults=OQ;var nL=(t,e={})=>(nu(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:qM(t));dr.braceExpand=nL;var NQ=(t,e={})=>new qr(t,e).makeRe();dr.makeRe=NQ;var UQ=(t,e,r={})=>{let n=new qr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};dr.match=UQ;var JM=/[?*]|[+@!]\(.*?\)|\[|\]/,HQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),qr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){nu(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||rL,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=o[0]===""&&o[1]===""&&(o[2]==="?"||!JM.test(o[2]))&&!JM.test(o[3]),m=/^[a-z]:/i.test(o[0]);if(u)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(m)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(u=>this.parse(u))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let l=n[i+1],u=n[i+2],m=n[i+3];if(l!==".."||!u||u==="."||u===".."||!m||m==="."||m==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let l=n[s];s===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let u=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...u),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let w=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),U=!w&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),W=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),q=!W&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),ie=U?3:w?0:void 0,se=q?3:W?0:void 0;if(typeof ie=="number"&&typeof se=="number"){let[fe,ve]=[e[ie],r[se]];fe.toLowerCase()===ve.toLowerCase()&&(r[se]=fe,se>ie?r=r.slice(se):ie>se&&(e=e.slice(ie)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,l=0,u=e.length,m=r.length;s<u&&l<m;s++,l++){this.debug("matchOne loop");var d=r[l],g=e[s];if(this.debug(r,d,g),d===!1)return!1;if(d===Zt){this.debug("GLOBSTAR",[r,d,g]);var y=s,x=l+1;if(x===m){for(this.debug("** at the end");s<u;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;y<u;){var E=e[y];if(this.debug(`
globstar while`,e,y,r,x,E),this.matchOne(e.slice(y),r.slice(x),n))return this.debug("globstar found match!",y,u,E),!0;if(E==="."||E===".."||!i.dot&&E.charAt(0)==="."){this.debug("dot detected!",e,y,r,x);break}this.debug("globstar swallow a segment, and continue"),y++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,y,r,x),y===u))}let w;if(typeof d=="string"?(w=g===d,this.debug("string match",d,g,w)):(w=d.test(g),this.debug("pattern match",d,g,w)),!w)return!1}if(s===u&&l===m)return!0;if(s===u)return n;if(l===m)return s===u-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return nL(this.pattern,this.options)}parse(e){nu(e);let r=this.options;if(e==="**")return Zt;if(e==="")return"";let n,i=null;(n=e.match(bQ))?i=r.dot?EQ:wQ:(n=e.match(mQ))?i=(r.nocase?r.dot?hQ:gQ:r.dot?dQ:fQ)(n[1]):(n=e.match(_Q))?i=(r.nocase?r.dot?kQ:RQ:r.dot?AQ:PQ)(n):(n=e.match(yQ))?i=r.dot?xQ:TQ:(n=e.match(SQ))&&(i=vQ);let o=rc.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?LQ:r.dot?FQ:IQ,i=new Set(r.nocase?["i"]:[]),o=e.map(u=>{let m=u.map(d=>{if(d instanceof RegExp)for(let g of d.flags.split(""))i.add(g);return typeof d=="string"?HQ(d):d===Zt?Zt:d._src});return m.forEach((d,g)=>{let y=m[g+1],x=m[g-1];d!==Zt||x===Zt||(x===void 0?y!==void 0&&y!==Zt?m[g+1]="(?:\\/|"+n+"\\/)?"+y:m[g]=n:y===void 0?m[g-1]=x+"(?:\\/|"+n+")?":y!==Zt&&(m[g-1]=x+"(?:\\/|\\/"+n+"\\/)"+y,m[g+1]=Zt))}),m.filter(d=>d!==Zt).join("/")}).join("|"),[s,l]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let l=i.length-2;!s&&l>=0;l--)s=i[l];for(let l=0;l<o.length;l++){let u=o[l],m=i;if(n.matchBase&&u.length===1&&(m=[s]),this.matchOne(m,u,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return dr.defaults(e).Minimatch}};dr.AST=rc;dr.Minimatch=qr;dr.escape=nc;dr.unescape=Cn;var kL=require("node:url");var ic=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,oL=new Set,wv=typeof process=="object"&&process?process:{},aL=(t,e,r,n)=>{typeof wv.emitWarning=="function"?wv.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},bh=globalThis.AbortController,iL=globalThis.AbortSignal;if(typeof bh>"u"){iL=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},bh=class{constructor(){e()}signal=new iL;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=wv.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,aL("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var BQ=t=>!oL.has(t),JIe=Symbol("type"),So=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),sL=t=>So(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?oc:null:null,oc=class extends Array{constructor(e){super(e),this.fill(0)}},Ev=class t{heap;length;static#e=!1;static create(e){let r=sL(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},ou=class t{#e;#t;#o;#n;#a;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#p;#s;#c;#i;#h;#y;#f;#m;#w;#g;#E;#_;#x;#v;#b;#d;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#x,sizes:e.#E,keyMap:e.#s,keyList:e.#c,valList:e.#i,next:e.#h,prev:e.#y,get head(){return e.#f},get tail(){return e.#m},free:e.#w,isBackgroundFetch:r=>e.#u(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#B(r),indexes:r=>e.#k(r),rindexes:r=>e.#A(r),isStale:r=>e.#T(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#p}get size(){return this.#l}get fetchMethod(){return this.#a}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:l,allowStale:u,dispose:m,disposeAfter:d,noDisposeOnSet:g,noUpdateTTL:y,maxSize:x=0,maxEntrySize:E=0,sizeCalculation:w,fetchMethod:U,memoMethod:W,noDeleteOnFetchRejection:q,noDeleteOnStaleGet:ie,allowStaleOnFetchRejection:se,allowStaleOnFetchAbort:fe,ignoreFetchAbort:ve}=e;if(r!==0&&!So(r))throw new TypeError("max option must be a nonnegative integer");let Et=r?sL(r):Array;if(!Et)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=E||this.#t,this.sizeCalculation=w,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(W!==void 0&&typeof W!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=W,U!==void 0&&typeof U!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=U,this.#b=!!U,this.#s=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#h=new Et(r),this.#y=new Et(r),this.#f=0,this.#m=0,this.#w=Ev.create(r),this.#l=0,this.#p=0,typeof m=="function"&&(this.#o=m),typeof d=="function"?(this.#n=d,this.#g=[]):(this.#n=void 0,this.#g=void 0),this.#v=!!this.#o,this.#d=!!this.#n,this.noDisposeOnSet=!!g,this.noUpdateTTL=!!y,this.noDeleteOnFetchRejection=!!q,this.allowStaleOnFetchRejection=!!se,this.allowStaleOnFetchAbort=!!fe,this.ignoreFetchAbort=!!ve,this.maxEntrySize!==0){if(this.#t!==0&&!So(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!So(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#D()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!ie,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!l,this.ttlResolution=So(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!So(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#P()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let yr="LRU_CACHE_UNBOUNDED";BQ(yr)&&(oL.add(yr),aL("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",yr,t))}}getRemainingTTL(e){return this.#s.has(e)?1/0:0}#P(){let e=new oc(this.#e),r=new oc(this.#e);this.#x=e,this.#_=r,this.#L=(o,s,l=ic.now())=>{if(r[o]=s!==0?l:0,e[o]=s,s!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#T(o)&&this.#M(this.#c[o],"expire")},s+1);u.unref&&u.unref()}},this.#R=o=>{r[o]=e[o]!==0?ic.now():0},this.#r=(o,s)=>{if(e[s]){let l=e[s],u=r[s];if(!l||!u)return;o.ttl=l,o.start=u,o.now=n||i();let m=o.now-u;o.remainingTTL=l-m}};let n=0,i=()=>{let o=ic.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#s.get(o);if(s===void 0)return 0;let l=e[s],u=r[s];if(!l||!u)return 1/0;let m=(n||i())-u;return l-m},this.#T=o=>{let s=r[o],l=e[o];return!!l&&!!s&&(n||i())-s>l}}#R=()=>{};#r=()=>{};#L=()=>{};#T=()=>!1;#D(){let e=new oc(this.#e);this.#p=0,this.#E=e,this.#F=r=>{this.#p-=e[r],e[r]=0},this.#C=(r,n,i,o)=>{if(this.#u(n))return 0;if(!So(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!So(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#I=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#p>o;)this.#N(!0)}this.#p+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#p)}}#F=e=>{};#I=(e,r,n)=>{};#C=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#m;!(!this.#O(r)||((e||!this.#T(r))&&(yield r),r===this.#f));)r=this.#y[r]}*#A({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#O(r)||((e||!this.#T(r))&&(yield r),r===this.#m));)r=this.#h[r]}#O(e){return e!==void 0&&this.#s.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#A())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#A()){let r=this.#c[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#A())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#A()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#A({allowStale:!0}))this.#T(r)&&(this.#M(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#s.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#u(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#x&&this.#_){let s=this.#x[r],l=this.#_[r];if(s&&l){let u=s-(ic.now()-l);o.ttl=u,o.start=Date.now()}}return this.#E&&(o.size=this.#E[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#u(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#x&&this.#_){s.ttl=this.#x[r];let l=ic.now()-this.#_[r];s.start=Math.floor(Date.now()-l)}this.#E&&(s.size=this.#E[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=ic.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:u}=n,{noUpdateTTL:m=this.noUpdateTTL}=n,d=this.#C(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.#M(e,"set"),this;let g=this.#l===0?void 0:this.#s.get(e);if(g===void 0)g=this.#l===0?this.#m:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#N(!1):this.#l,this.#c[g]=e,this.#i[g]=r,this.#s.set(e,g),this.#h[this.#m]=g,this.#y[g]=this.#m,this.#m=g,this.#l++,this.#I(g,d,u),u&&(u.set="add"),m=!1;else{this.#B(g);let y=this.#i[g];if(r!==y){if(this.#b&&this.#u(y)){y.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=y;x!==void 0&&!s&&(this.#v&&this.#o?.(x,e,"set"),this.#d&&this.#g?.push([x,e,"set"]))}else s||(this.#v&&this.#o?.(y,e,"set"),this.#d&&this.#g?.push([y,e,"set"]));if(this.#F(g),this.#I(g,d,u),this.#i[g]=r,u){u.set="replace";let x=y&&this.#u(y)?y.__staleWhileFetching:y;x!==void 0&&(u.oldValue=x)}}else u&&(u.set="update")}if(i!==0&&!this.#x&&this.#P(),this.#x&&(m||this.#L(g,i,o),u&&this.#r(u,g)),!s&&this.#d&&this.#g){let y=this.#g,x;for(;x=y?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#f];if(this.#N(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#g){let e=this.#g,r;for(;r=e?.shift();)this.#n?.(...r)}}}#N(e){let r=this.#f,n=this.#c[r],i=this.#i[r];return this.#b&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(i,n,"evict"),this.#d&&this.#g?.push([i,n,"evict"])),this.#F(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#f=this.#m=0,this.#w.length=0):this.#f=this.#h[r],this.#s.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#s.get(e);if(o!==void 0){let s=this.#i[o];if(this.#u(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#T(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#s.get(e);if(i===void 0||!n&&this.#T(i))return;let o=this.#i[i];return this.#u(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#u(o))return o;let s=new bh,{signal:l}=n;l?.addEventListener("abort",()=>s.abort(l.reason),{signal:s.signal});let u={signal:s.signal,options:n,context:i},m=(w,U=!1)=>{let{aborted:W}=s.signal,q=n.ignoreFetchAbort&&w!==void 0;if(n.status&&(W&&!U?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,q&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),W&&!q&&!U)return g(s.signal.reason);let ie=x;return this.#i[r]===x&&(w===void 0?ie.__staleWhileFetching?this.#i[r]=ie.__staleWhileFetching:this.#M(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,w,u.options))),w},d=w=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=w),g(w)),g=w=>{let{aborted:U}=s.signal,W=U&&n.allowStaleOnFetchAbort,q=W||n.allowStaleOnFetchRejection,ie=q||n.noDeleteOnFetchRejection,se=x;if(this.#i[r]===x&&(!ie||se.__staleWhileFetching===void 0?this.#M(e,"fetch"):W||(this.#i[r]=se.__staleWhileFetching)),q)return n.status&&se.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),se.__staleWhileFetching;if(se.__returned===se)throw w},y=(w,U)=>{let W=this.#a?.(e,o,u);W&&W instanceof Promise&&W.then(q=>w(q===void 0?void 0:q),U),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(w(void 0),n.allowStaleOnFetchAbort&&(w=q=>m(q,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(y).then(m,d),E=Object.assign(x,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,E,{...u.options,status:void 0}),r=this.#s.get(e)):this.#i[r]=E,E}#u(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof bh}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:u=0,sizeCalculation:m=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:g=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:y=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:E=this.allowStaleOnFetchAbort,context:w,forceRefresh:U=!1,status:W,signal:q}=r;if(!this.#b)return W&&(W.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:W});let ie={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:l,size:u,sizeCalculation:m,noUpdateTTL:d,noDeleteOnFetchRejection:g,allowStaleOnFetchRejection:y,allowStaleOnFetchAbort:E,ignoreFetchAbort:x,status:W,signal:q},se=this.#s.get(e);if(se===void 0){W&&(W.fetch="miss");let fe=this.#U(e,se,ie,w);return fe.__returned=fe}else{let fe=this.#i[se];if(this.#u(fe)){let B=n&&fe.__staleWhileFetching!==void 0;return W&&(W.fetch="inflight",B&&(W.returnedStale=!0)),B?fe.__staleWhileFetching:fe.__returned=fe}let ve=this.#T(se);if(!U&&!ve)return W&&(W.fetch="hit"),this.#B(se),i&&this.#R(se),W&&this.#r(W,se),fe;let Et=this.#U(e,se,ie,w),Tr=Et.__staleWhileFetching!==void 0&&n;return W&&(W.fetch=ve?"stale":"refresh",Tr&&ve&&(W.returnedStale=!0)),Tr?Et.__staleWhileFetching:Et.__returned=Et}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=r,l=this.get(e,s);if(!o&&l!==void 0)return l;let u=n(e,l,{options:s,context:i});return this.set(e,u,s),u}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,l=this.#s.get(e);if(l!==void 0){let u=this.#i[l],m=this.#u(u);return s&&this.#r(s,l),this.#T(l)?(s&&(s.get="stale"),m?(s&&n&&u.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?u.__staleWhileFetching:void 0):(o||this.#M(e,"expire"),s&&n&&(s.returnedStale=!0),n?u:void 0)):(s&&(s.get="hit"),m?u.__staleWhileFetching:(this.#B(l),i&&this.#R(l),u))}else s&&(s.get="miss")}#H(e,r){this.#y[r]=e,this.#h[e]=r}#B(e){e!==this.#m&&(e===this.#f?this.#f=this.#h[e]:this.#H(this.#y[e],this.#h[e]),this.#H(this.#m,e),this.#m=e)}delete(e){return this.#M(e,"delete")}#M(e,r){let n=!1;if(this.#l!==0){let i=this.#s.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#V(r);else{this.#F(i);let o=this.#i[i];if(this.#u(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(o,e,r),this.#d&&this.#g?.push([o,e,r])),this.#s.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#m)this.#m=this.#y[i];else if(i===this.#f)this.#f=this.#h[i];else{let s=this.#y[i];this.#h[s]=this.#h[i];let l=this.#h[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#d&&this.#g?.length){let i=this.#g,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#V("delete")}#V(e){for(let r of this.#A({allowStale:!0})){let n=this.#i[r];if(this.#u(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#d&&this.#g?.push([n,i,e])}}if(this.#s.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#x&&this.#_&&(this.#x.fill(0),this.#_.fill(0)),this.#E&&this.#E.fill(0),this.#f=0,this.#m=0,this.#w.length=0,this.#p=0,this.#l=0,this.#d&&this.#g){let r=this.#g,n;for(;n=r?.shift();)this.#n?.(...n)}}};var cc=require("node:path"),yL=require("node:url"),li=require("fs"),YQ=on(require("node:fs"),1),wo=require("node:fs/promises");var Ph=require("node:events"),Mv=on(require("node:stream"),1),mL=require("node:string_decoder"),cL=typeof process=="object"&&process?process:{stdout:null,stderr:null},VQ=t=>!!t&&typeof t=="object"&&(t instanceof bo||t instanceof Mv.default||WQ(t)||$Q(t)),WQ=t=>!!t&&typeof t=="object"&&t instanceof Ph.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==Mv.default.Writable.prototype.pipe,$Q=t=>!!t&&typeof t=="object"&&t instanceof Ph.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Li=Symbol("EOF"),Fi=Symbol("maybeEmitEnd"),vo=Symbol("emittedEnd"),wh=Symbol("emittingEnd"),au=Symbol("emittedError"),Eh=Symbol("closed"),lL=Symbol("read"),_h=Symbol("flush"),uL=Symbol("flushChunk"),On=Symbol("encoding"),ac=Symbol("decoder"),Ut=Symbol("flowing"),su=Symbol("paused"),sc=Symbol("resume"),Ht=Symbol("buffer"),gr=Symbol("pipes"),Bt=Symbol("bufferLength"),_v=Symbol("bufferPush"),Rh=Symbol("bufferShift"),ir=Symbol("objectMode"),wt=Symbol("destroyed"),Rv=Symbol("error"),kv=Symbol("emitData"),pL=Symbol("emitEnd"),Av=Symbol("emitEnd2"),si=Symbol("async"),Pv=Symbol("abort"),kh=Symbol("aborted"),cu=Symbol("signal"),Sa=Symbol("dataListeners"),Gr=Symbol("discarded"),lu=t=>Promise.resolve().then(t),jQ=t=>t(),zQ=t=>t==="end"||t==="finish"||t==="prefinish",qQ=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,GQ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Ah=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[sc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Dv=class extends Ah{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},KQ=t=>!!t.objectMode,QQ=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",bo=class extends Ph.EventEmitter{[Ut]=!1;[su]=!1;[gr]=[];[Ht]=[];[ir];[On];[si];[ac];[Li]=!1;[vo]=!1;[wh]=!1;[Eh]=!1;[au]=null;[Bt]=0;[wt]=!1;[cu];[kh]=!1;[Sa]=0;[Gr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");KQ(r)?(this[ir]=!0,this[On]=null):QQ(r)?(this[On]=r.encoding,this[ir]=!1):(this[ir]=!1,this[On]=null),this[si]=!!r.async,this[ac]=this[On]?new mL.StringDecoder(this[On]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Ht]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[gr]});let{signal:n}=r;n&&(this[cu]=n,n.aborted?this[Pv]():n.addEventListener("abort",()=>this[Pv]()))}get bufferLength(){return this[Bt]}get encoding(){return this[On]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[ir]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[si]}set async(e){this[si]=this[si]||!!e}[Pv](){this[kh]=!0,this.emit("abort",this[cu]?.reason),this.destroy(this[cu]?.reason)}get aborted(){return this[kh]}set aborted(e){}write(e,r,n){if(this[kh])return!1;if(this[Li])throw new Error("write after end");if(this[wt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[si]?lu:jQ;if(!this[ir]&&!Buffer.isBuffer(e)){if(GQ(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(qQ(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[ir]?(this[Ut]&&this[Bt]!==0&&this[_h](!0),this[Ut]?this.emit("data",e):this[_v](e),this[Bt]!==0&&this.emit("readable"),n&&i(n),this[Ut]):e.length?(typeof e=="string"&&!(r===this[On]&&!this[ac]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[On]&&(e=this[ac].write(e)),this[Ut]&&this[Bt]!==0&&this[_h](!0),this[Ut]?this.emit("data",e):this[_v](e),this[Bt]!==0&&this.emit("readable"),n&&i(n),this[Ut]):(this[Bt]!==0&&this.emit("readable"),n&&i(n),this[Ut])}read(e){if(this[wt])return null;if(this[Gr]=!1,this[Bt]===0||e===0||e&&e>this[Bt])return this[Fi](),null;this[ir]&&(e=null),this[Ht].length>1&&!this[ir]&&(this[Ht]=[this[On]?this[Ht].join(""):Buffer.concat(this[Ht],this[Bt])]);let r=this[lL](e||null,this[Ht][0]);return this[Fi](),r}[lL](e,r){if(this[ir])this[Rh]();else{let n=r;e===n.length||e===null?this[Rh]():typeof n=="string"?(this[Ht][0]=n.slice(e),r=n.slice(0,e),this[Bt]-=e):(this[Ht][0]=n.subarray(e),r=n.subarray(0,e),this[Bt]-=e)}return this.emit("data",r),!this[Ht].length&&!this[Li]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Li]=!0,this.writable=!1,(this[Ut]||!this[su])&&this[Fi](),this}[sc](){this[wt]||(!this[Sa]&&!this[gr].length&&(this[Gr]=!0),this[su]=!1,this[Ut]=!0,this.emit("resume"),this[Ht].length?this[_h]():this[Li]?this[Fi]():this.emit("drain"))}resume(){return this[sc]()}pause(){this[Ut]=!1,this[su]=!0,this[Gr]=!1}get destroyed(){return this[wt]}get flowing(){return this[Ut]}get paused(){return this[su]}[_v](e){this[ir]?this[Bt]+=1:this[Bt]+=e.length,this[Ht].push(e)}[Rh](){return this[ir]?this[Bt]-=1:this[Bt]-=this[Ht][0].length,this[Ht].shift()}[_h](e=!1){do;while(this[uL](this[Rh]())&&this[Ht].length);!e&&!this[Ht].length&&!this[Li]&&this.emit("drain")}[uL](e){return this.emit("data",e),this[Ut]}pipe(e,r){if(this[wt])return e;this[Gr]=!1;let n=this[vo];return r=r||{},e===cL.stdout||e===cL.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[gr].push(r.proxyErrors?new Dv(this,e,r):new Ah(this,e,r)),this[si]?lu(()=>this[sc]()):this[sc]()),e}unpipe(e){let r=this[gr].find(n=>n.dest===e);r&&(this[gr].length===1?(this[Ut]&&this[Sa]===0&&(this[Ut]=!1),this[gr]=[]):this[gr].splice(this[gr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Gr]=!1,this[Sa]++,!this[gr].length&&!this[Ut]&&this[sc]();else if(e==="readable"&&this[Bt]!==0)super.emit("readable");else if(zQ(e)&&this[vo])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[au]){let i=r;this[si]?lu(()=>i.call(this,this[au])):i.call(this,this[au])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Sa]=this.listeners("data").length,this[Sa]===0&&!this[Gr]&&!this[gr].length&&(this[Ut]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Sa]=0,!this[Gr]&&!this[gr].length&&(this[Ut]=!1)),r}get emittedEnd(){return this[vo]}[Fi](){!this[wh]&&!this[vo]&&!this[wt]&&this[Ht].length===0&&this[Li]&&(this[wh]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Eh]&&this.emit("close"),this[wh]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==wt&&this[wt])return!1;if(e==="data")return!this[ir]&&!n?!1:this[si]?(lu(()=>this[kv](n)),!0):this[kv](n);if(e==="end")return this[pL]();if(e==="close"){if(this[Eh]=!0,!this[vo]&&!this[wt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[au]=n,super.emit(Rv,n);let o=!this[cu]||this.listeners("error").length?super.emit("error",n):!1;return this[Fi](),o}else if(e==="resume"){let o=super.emit("resume");return this[Fi](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Fi](),i}[kv](e){for(let n of this[gr])n.dest.write(e)===!1&&this.pause();let r=this[Gr]?!1:super.emit("data",e);return this[Fi](),r}[pL](){return this[vo]?!1:(this[vo]=!0,this.readable=!1,this[si]?(lu(()=>this[Av]()),!0):this[Av]())}[Av](){if(this[ac]){let r=this[ac].end();if(r){for(let n of this[gr])n.dest.write(r);this[Gr]||super.emit("data",r)}}for(let r of this[gr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[ir]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[ir]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[ir])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[On]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(wt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Gr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Li])return r();let o,s,l=g=>{this.off("data",u),this.off("end",m),this.off(wt,d),r(),s(g)},u=g=>{this.off("error",l),this.off("end",m),this.off(wt,d),this.pause(),o({value:g,done:!!this[Li]})},m=()=>{this.off("error",l),this.off("data",u),this.off(wt,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((g,y)=>{s=y,o=g,this.once(wt,d),this.once("error",l),this.once("end",m),this.once("data",u)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Gr]=!1;let e=!1,r=()=>(this.pause(),this.off(Rv,r),this.off(wt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(Rv,r),this.once(wt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[wt])return e?this.emit("error",e):this.emit(wt),this;this[wt]=!0,this[Gr]=!0,this[Ht].length=0,this[Bt]=0;let r=this;return typeof r.close=="function"&&!this[Eh]&&r.close(),e?this.emit("error",e):this.emit(wt),this}static get isStream(){return VQ}};var ZQ=li.realpathSync.native,pu={lstatSync:li.lstatSync,readdir:li.readdir,readdirSync:li.readdirSync,readlinkSync:li.readlinkSync,realpathSync:ZQ,promises:{lstat:wo.lstat,readdir:wo.readdir,readlink:wo.readlink,realpath:wo.realpath}},TL=t=>!t||t===pu||t===YQ?pu:{...pu,...t,promises:{...pu.promises,...t.promises||{}}},xL=/^\\\\\?\\([a-z]:)\\?$/i,XQ=t=>t.replace(/\//g,"\\").replace(xL,"$1\\"),JQ=/[\\\/]/,xn=0,SL=1,vL=2,ci=4,bL=6,wL=8,va=10,EL=12,Tn=15,uu=~Tn,Lv=16,fL=32,mu=64,Nn=128,Dh=256,Lh=512,dL=mu|Nn|Lh,e7=1023,Fv=t=>t.isFile()?wL:t.isDirectory()?ci:t.isSymbolicLink()?va:t.isCharacterDevice()?vL:t.isBlockDevice()?bL:t.isSocket()?EL:t.isFIFO()?SL:xn,gL=new Map,fu=t=>{let e=gL.get(t);if(e)return e;let r=t.normalize("NFKD");return gL.set(t,r),r},hL=new Map,Mh=t=>{let e=hL.get(t);if(e)return e;let r=fu(t.toLowerCase());return hL.set(t,r),r},Fh=class extends ou{constructor(){super({max:256})}},Iv=class extends ou{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},_L=Symbol("PathScurry setAsCwd"),or=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#p;get blksize(){return this.#p}#s;get ino(){return this.#s}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#h;get atimeMs(){return this.#h}#y;get mtimeMs(){return this.#y}#f;get ctimeMs(){return this.#f}#m;get birthtimeMs(){return this.#m}#w;get atime(){return this.#w}#g;get mtime(){return this.#g}#E;get ctime(){return this.#E}#_;get birthtime(){return this.#_}#x;#v;#b;#d;#P;#R;#r;#L;#T;#D;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=xn,n,i,o,s,l){this.name=e,this.#x=o?Mh(e):fu(e),this.#r=r&e7,this.nocase=o,this.roots=i,this.root=n||this,this.#L=s,this.#b=l.fullpath,this.#P=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=TL(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#L}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#L.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#L.set(this,r),this.#r&=~Lv,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Mh(e):fu(e);for(let u of n)if(u.#x===i)return u;let o=this.parent?this.sep:"",s=this.#b?this.#b+o+e:void 0,l=this.newChild(e,xn,{...r,parent:this,fullpath:s});return this.canReaddir()||(l.#r|=Nn),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#P!==void 0)return this.#P;let e=this.name,r=this.parent;if(!r)return this.#P=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#d!==void 0)return this.#d;if(this.sep==="/")return this.#d=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#d=`//?/${i}`:this.#d=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#d=n}isUnknown(){return(this.#r&Tn)===xn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&Tn)===wL}isDirectory(){return(this.#r&Tn)===ci}isCharacterDevice(){return(this.#r&Tn)===vL}isBlockDevice(){return(this.#r&Tn)===bL}isFIFO(){return(this.#r&Tn)===SL}isSocket(){return(this.#r&Tn)===EL}isSymbolicLink(){return(this.#r&va)===va}lstatCached(){return this.#r&fL?this:void 0}readlinkCached(){return this.#T}realpathCached(){return this.#D}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#T)return!0;if(!this.parent)return!1;let e=this.#r&Tn;return!(e!==xn&&e!==va||this.#r&Dh||this.#r&Nn)}calledReaddir(){return!!(this.#r&Lv)}isENOENT(){return!!(this.#r&Nn)}isNamed(e){return this.nocase?this.#x===Mh(e):this.#x===fu(e)}async readlink(){let e=this.#T;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#T=n}catch(r){this.#u(r.code);return}}readlinkSync(){let e=this.#T;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#T=n}catch(r){this.#u(r.code);return}}#I(e){this.#r|=Lv;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#C()}}#C(){this.#r&Nn||(this.#r=(this.#r|Nn)&uu,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#C()}#A(){this.#r|=Lh,this.#O()}#O(){if(this.#r&mu)return;let e=this.#r;(e&Tn)===ci&&(e&=uu),this.#r=e|mu,this.#k()}#N(e=""){e==="ENOTDIR"||e==="EPERM"?this.#O():e==="ENOENT"?this.#C():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#O():e==="ENOENT"&&this.#C()}#u(e=""){let r=this.#r;r|=Dh,e==="ENOENT"&&(r|=Nn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=uu),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#O()}#H(e,r){return this.#M(e,r)||this.#B(e,r)}#B(e,r){let n=Fv(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&Tn;return o!==ci&&o!==va&&o!==xn&&(i.#r|=mu),r.unshift(i),r.provisional++,i}#M(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Mh(e.name):fu(e.name))===i.#x)return this.#V(e,i,n,r)}}#V(e,r,n,i){let o=r.name;return r.#r=r.#r&uu|Fv(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if((this.#r&Nn)===0)try{return this.#z(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if((this.#r&Nn)===0)try{return this.#z(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#z(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:s,blocks:l,ctime:u,ctimeMs:m,dev:d,gid:g,ino:y,mode:x,mtime:E,mtimeMs:w,nlink:U,rdev:W,size:q,uid:ie}=e;this.#w=r,this.#h=n,this.#_=i,this.#m=o,this.#p=s,this.#i=l,this.#E=u,this.#f=m,this.#t=d,this.#S=g,this.#s=y,this.#o=x,this.#g=E,this.#y=w,this.#n=U,this.#l=W,this.#c=q,this.#a=ie;let se=Fv(e);this.#r=this.#r&uu|se|fL,se!==xn&&se!==ci&&se!==va&&(this.#r|=mu)}#$=[];#j=!1;#q(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,s)=>{if(o)this.#N(o.code),n.provisional=0;else{for(let l of s)this.#H(l,n);this.#I(n)}this.#q(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#I(e)}catch(i){this.#N(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#I(e)}catch(n){this.#N(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&dL)return!1;let e=Tn&this.#r;return e===xn||e===ci||e===va}shouldWalk(e,r){return(this.#r&ci)===ci&&!(this.#r&dL)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#D)return this.#D;if(!((Lh|Dh|Nn)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#D=this.resolve(e)}catch{this.#A()}}realpathSync(){if(this.#D)return this.#D;if(!((Lh|Dh|Nn)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#D=this.resolve(e)}catch{this.#A()}}[_L](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#P=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#P=void 0,i.#R=void 0,i=i.parent}},Ih=class t extends or{sep="\\";splitSep=JQ;constructor(e,r=xn,n,i,o,s,l){super(e,r,n,i,o,s,l)}newChild(e,r=xn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return cc.win32.parse(e).root}getRoot(e){if(e=XQ(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new lc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(xL,"$1\\"),e===r}},Ch=class t extends or{splitSep="/";sep="/";constructor(e,r=xn,n,i,o,s,l){super(e,r,n,i,o,s,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=xn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},Oh=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:s=pu}={}){this.#n=TL(s),(e instanceof URL||e.startsWith("file://"))&&(e=(0,yL.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new Fh,this.#t=new Fh,this.#o=new Iv(o);let u=l.substring(this.rootPath.length).split(n);if(u.length===1&&!u[0]&&u.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let m=this.root,d=u.length-1,g=r.sep,y=this.rootPath,x=!1;for(let E of u){let w=d--;m=m.child(E,{relative:new Array(w).fill("..").join(g),relativePosix:new Array(w).fill("..").join("/"),fullpath:y+=(x?"":g)+E}),x=!0}this.cwd=m}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set,m=(g,y)=>{u.add(g),g.readdirCB((x,E)=>{if(x)return y(x);let w=E.length;if(!w)return y();let U=()=>{--w===0&&y()};for(let W of E)(!o||o(W))&&l.push(n?W:W.fullpath()),i&&W.isSymbolicLink()?W.realpath().then(q=>q?.isUnknown()?q.lstat():q).then(q=>q?.shouldWalk(u,s)?m(q,U):U()):W.shouldWalk(u,s)?m(W,U):U()},!0)},d=e;return new Promise((g,y)=>{m(d,x=>{if(x)return y(x);g(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set([e]);for(let m of u){let d=m.readdirSync();for(let g of d){(!o||o(g))&&l.push(n?g:g.fullpath());let y=g;if(g.isSymbolicLink()){if(!(i&&(y=g.realpathSync())))continue;y.isUnknown()&&y.lstatSync()}y.shouldWalk(u,s)&&u.add(y)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let u of l){let m=u.readdirSync();for(let d of m){(!o||o(d))&&(yield n?d:d.fullpath());let g=d;if(d.isSymbolicLink()){if(!(i&&(g=d.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(l,s)&&l.add(g)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new bo({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let u=new Set,m=[e],d=0,g=()=>{let y=!1;for(;!y;){let x=m.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let E=(U,W,q=!1)=>{if(U)return l.emit("error",U);if(i&&!q){let ie=[];for(let se of W)se.isSymbolicLink()&&ie.push(se.realpath().then(fe=>fe?.isUnknown()?fe.lstat():fe));if(ie.length){Promise.all(ie).then(()=>E(null,W,!0));return}}for(let ie of W)ie&&(!o||o(ie))&&(l.write(n?ie:ie.fullpath())||(y=!0));d--;for(let ie of W){let se=ie.realpathCached()||ie;se.shouldWalk(u,s)&&m.push(se)}y&&!l.flowing?l.once("drain",g):w||g()},w=!0;x.readdirCB(E,!0),w=!1}};return g(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new bo({objectMode:!0}),u=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let m=[e],d=0,g=()=>{let y=!1;for(;!y;){let x=m.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let E=x.readdirSync();for(let w of E)(!o||o(w))&&(l.write(n?w:w.fullpath())||(y=!0));d--;for(let w of E){let U=w;if(w.isSymbolicLink()){if(!(i&&(U=w.realpathSync())))continue;U.isUnknown()&&U.lstatSync()}U.shouldWalk(u,s)&&m.push(U)}}y&&!l.flowing&&l.once("drain",g)};return g(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[_L](r)}},lc=class extends Oh{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,cc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return cc.win32.parse(e).root.toUpperCase()}newRoot(e){return new Ih(this.rootPath,ci,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},uc=class extends Oh{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,cc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Ch(this.rootPath,ci,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},du=class extends uc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},iCe=process.platform==="win32"?Ih:Ch,RL=process.platform==="win32"?lc:process.platform==="darwin"?du:uc;var t7=t=>t.length>=1,r7=t=>t.length>=1,pc=class t{#e;#t;#o;length;#n;#a;#S;#l;#p;#s;#c=!0;constructor(e,r,n,i){if(!t7(e))throw new TypeError("empty pattern list");if(!r7(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,s,l,u,...m]=this.#e,[d,g,y,x,...E]=this.#t;m[0]===""&&(m.shift(),E.shift());let w=[o,s,l,u,""].join("/"),U=[d,g,y,x,""].join("/");this.#e=[w,...m],this.#t=[U,...E],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...s]=this.#e,[l,...u]=this.#t;s[0]===""&&(s.shift(),u.shift());let m=o+"/",d=l+"/";this.#e=[m,...s],this.#t=[d,...u],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Zt}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new t(this.#e,this.#t,this.#o+1,this.#n),this.#a.#s=this.#s,this.#a.#p=this.#p,this.#a.#l=this.#l,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#p!==void 0?this.#p:this.#p=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#s!==void 0?this.#s:this.#s=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var n7=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",mc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:s=n7}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=s,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new qr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let s=new pc(i,o,0,this.platform),l=new qr(s.globString(),this.mmopts),u=o[o.length-1]==="**",m=s.isAbsolute();m?this.absolute.push(l):this.relative.push(l),u&&(m?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let s of this.relative)if(s.match(i)||s.match(o))return!0;for(let s of this.absolute)if(s.match(r)||s.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var Cv=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},Ov=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},Nv=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},gu=class t{hasWalkedCache;matches=new Ov;subwalks=new Nv;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Cv}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let s=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(s){i=i.resolve(s==="/"&&this.opts.root!==void 0?this.opts.root:s);let g=o.rest();if(g)o=g;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let u,m,d=!1;for(;typeof(u=o.pattern())=="string"&&(m=o.rest());)i=i.resolve(u),o=m,d=!0;if(u=o.pattern(),m=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof u=="string"){let g=u===".."||u===""||u===".";this.matches.add(i.resolve(u),l,g);continue}else if(u===Zt){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let g=m?.pattern(),y=m?.rest();if(!m||(g===""||g===".")&&!y)this.matches.add(i,l,g===""||g===".");else if(g===".."){let x=i.parent||i;y?this.hasWalkedCache.hasWalked(x,y)||this.subwalks.add(x,y):this.matches.add(x,l,!0)}}else u instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let s of n){let l=s.isAbsolute(),u=s.pattern(),m=s.rest();u===Zt?i.testGlobstar(o,s,m,l):u instanceof RegExp?i.testRegExp(o,u,m,l):i.testString(o,u,m,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let s=e.parent||e;this.subwalks.add(s,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var i7=(t,e)=>typeof t=="string"?new mc([t],e):Array.isArray(t)?new mc(t,e):t,Nh=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=i7(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#a(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=await o.realpath();s&&(s.isUnknown()||this.opts.stat)&&await s.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=o.realpathSync();s&&(s?.isUnknown()||this.opts.stat)&&s.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),s=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?s+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new gu(this.opts),n)}walkCB2(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,m).then(()=>s()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirCached();l.calledReaddir()?this.walkCB3(l,u,n,s):l.readdirCB((m,d)=>this.walkCB3(l,d,n,s),!0)}s()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,m).then(()=>s()));for(let[l,u]of n.subwalks.entries())o++,this.walkCB2(l,u,n.child(),s);s()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new gu(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||this.matchSync(l,u,m);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirSync();this.walkCB3Sync(l,u,n,s)}s()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||this.matchSync(l,u,m);for(let[l,u]of n.subwalks.entries())o++,this.walkCB2Sync(l,u,n.child(),s);s()}},hu=class extends Nh{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},yu=class extends Nh{results;constructor(e,r,n){super(e,r,n),this.results=new bo({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var o7=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Un=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,kL.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(u=>u.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(u=>u.includes("/")?u:`./**/${u}`)}if(this.pattern=e,this.platform=r.platform||o7,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let u=r.platform==="win32"?lc:r.platform==="darwin"?du:r.platform?uc:RL;this.scurry=new u(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(u=>new qr(u,i)),[s,l]=o.reduce((u,m)=>(u[0].push(...m.set),u[1].push(...m.globParts),u),[[],[]]);this.patterns=s.map((u,m)=>{let d=l[m];if(!d)throw new Error("invalid pattern object");return new pc(u,d,0,this.platform)})}async walk(){return[...await new hu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new hu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new yu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new yu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Uv=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new qr(r,e).hasMagic())return!0;return!1};function Uh(t,e={}){return new Un(t,e).streamSync()}function PL(t,e={}){return new Un(t,e).stream()}function DL(t,e={}){return new Un(t,e).walkSync()}async function AL(t,e={}){return new Un(t,e).walk()}function Hh(t,e={}){return new Un(t,e).iterateSync()}function ML(t,e={}){return new Un(t,e).iterate()}var a7=Uh,s7=Object.assign(PL,{sync:Uh}),c7=Hh,l7=Object.assign(ML,{sync:Hh}),u7=Object.assign(DL,{stream:Uh,iterate:Hh}),Hv=Object.assign(AL,{glob:AL,globSync:DL,sync:u7,globStream:PL,stream:s7,globStreamSync:Uh,streamSync:a7,globIterate:ML,iterate:l7,globIterateSync:Hh,iterateSync:c7,Glob:Un,hasMagic:Uv,escape:nc,unescape:Cn});Hv.glob=Hv;function LL(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var WL=Object.defineProperty,f7=Object.getOwnPropertyNames,O=(t,e)=>WL(t,"name",{value:e,configurable:!0}),d7=(t,e)=>function(){return e||(0,t[f7(t)[0]])((e={exports:{}}).exports,e),e.exports},rb=(t,e)=>{for(var r in e)WL(t,r,{get:e[r],enumerable:!0})},g7=d7({"(disabled):util"(){}}),Bh={};rb(Bh,{addChainableMethod:()=>db,addLengthGuard:()=>bu,addMethod:()=>pb,addProperty:()=>ub,checkError:()=>Kr,compareByInspect:()=>jh,eql:()=>hF,expectTypes:()=>YL,flag:()=>Pe,getActual:()=>Yh,getMessage:()=>ob,getName:()=>Xh,getOperator:()=>Tb,getOwnEnumerableProperties:()=>yb,getOwnEnumerablePropertySymbols:()=>hb,getPathInfo:()=>lb,hasProperty:()=>Zh,inspect:()=>ze,isNaN:()=>zh,isNumeric:()=>Vt,isProxyEnabled:()=>vu,isRegExp:()=>qh,objDisplay:()=>ba,overwriteChainableMethod:()=>gb,overwriteMethod:()=>fb,overwriteProperty:()=>mb,proxify:()=>hc,test:()=>nb,transferFlags:()=>Hn,type:()=>et});var Kr={};rb(Kr,{compatibleConstructor:()=>zL,compatibleInstance:()=>jL,compatibleMessage:()=>qL,getConstructorName:()=>GL,getMessage:()=>KL});function Qh(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}O(Qh,"isErrorInstance");function $L(t){return Object.prototype.toString.call(t)==="[object RegExp]"}O($L,"isRegExp");function jL(t,e){return Qh(e)&&t===e}O(jL,"compatibleInstance");function zL(t,e){return Qh(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}O(zL,"compatibleConstructor");function qL(t,e){let r=typeof t=="string"?t:t.message;return $L(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}O(qL,"compatibleMessage");function GL(t){let e=t;return Qh(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}O(GL,"getConstructorName");function KL(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}O(KL,"getMessage");function Pe(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}O(Pe,"flag");function nb(t,e){var r=Pe(t,"negate"),n=e[0];return r?!n:n}O(nb,"test");function et(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}O(et,"type");var h7="captureStackTrace"in Error,Ge=class QL extends Error{static{O(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,h7&&Error.captureStackTrace(this,n||QL);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function YL(t,e){var r=Pe(t,"message"),n=Pe(t,"ssfi");r=r?r+": ":"",t=Pe(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();var i=e.map(function(s,l){var u=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a",m=e.length>1&&l===e.length-1?"or ":"";return m+u+" "+s}).join(", "),o=et(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new Ge(r+"object tested must be "+i+", but "+o+" given",void 0,n)}O(YL,"expectTypes");function Yh(t,e){return e.length>4?e[4]:t._obj}O(Yh,"getActual");var FL={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},y7={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},dc="\u2026";function ZL(t,e){let r=FL[y7[e]]||FL[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}O(ZL,"colorise");function XL({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:l=[],truncate:u=1/0,stylize:m=String}={},d){let g={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(u),seen:l,inspect:d,stylize:m};return g.colors&&(g.stylize=ZL),g}O(XL,"normaliseOptions");function JL(t){return t>="\uD800"&&t<="\uDBFF"}O(JL,"isHighSurrogate");function Ii(t,e,r=dc){t=String(t);let n=r.length,i=t.length;if(n>e&&i>n)return r;if(i>e&&i>n){let o=e-n;return o>0&&JL(t[o-1])&&(o=o-1),`${t.slice(0,o)}${r}`}return t}O(Ii,"truncate");function Sn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",l="",u="";for(let m=0;m<i;m+=1){let d=m+1===t.length,g=m+2===t.length;u=`${dc}(${t.length-m})`;let y=t[m];e.truncate=o-s.length-(d?0:n.length);let x=l||r(y,e)+(d?"":n),E=s.length+x.length,w=E+u.length;if(d&&E>o&&s.length+u.length<=o||!d&&!g&&w>o||(l=d?"":r(t[m+1],e)+(g?"":n),!d&&g&&w>o&&E+l.length>o))break;if(s+=x,!d&&!g&&E+l.length>=o){u=`${dc}(${t.length-m-1})`;break}u=""}return`${s}${u}`}O(Sn,"inspectList");function eF(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}O(eF,"quoteComplexKey");function gc([t,e],r){return r.truncate-=2,typeof t=="string"?t=eF(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}O(gc,"inspectProperty");function tF(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=Sn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=Sn(r.map(o=>[o,t[o]]),e,gc)),`[ ${n}${i?`, ${i}`:""} ]`}O(tF,"inspectArray");var T7=O(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function ui(t,e){let r=T7(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let s=0;s<t.length;s++){let l=`${e.stylize(Ii(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=l.length,t[s]!==t.length&&e.truncate<=3){i+=`${dc}(${t.length-t[s]+1})`;break}i+=l}let o="";return n.length&&(o=Sn(n.map(s=>[s,t[s]]),e,gc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}O(ui,"inspectTypedArray");function rF(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Ii(n[1],e.truncate-i.length-1)}`,"date")}O(rF,"inspectDate");function Wv(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Ii(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}O(Wv,"inspectFunction");function nF([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}O(nF,"inspectMapEntry");function iF(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}O(iF,"mapToEntries");function oF(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${Sn(iF(t),e,nF)} }`)}O(oF,"inspectMap");var x7=Number.isNaN||(t=>t!==t);function $v(t,e){return x7(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Ii(String(t),e.truncate),"number")}O($v,"inspectNumber");function jv(t,e){let r=Ii(t.toString(),e.truncate-1);return r!==dc&&(r+="n"),e.stylize(r,"bigint")}O(jv,"inspectBigInt");function aF(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Ii(i,n)}/${r}`,"regexp")}O(aF,"inspectRegExp");function sF(t){let e=[];return t.forEach(r=>{e.push(r)}),e}O(sF,"arrayFromSet");function cF(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${Sn(sF(t),e)} }`)}O(cF,"inspectSet");var IL=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),S7={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},v7=16,b7=4;function lF(t){return S7[t]||`\\u${`0000${t.charCodeAt(0).toString(v7)}`.slice(-b7)}`}O(lF,"escape");function zv(t,e){return IL.test(t)&&(t=t.replace(IL,lF)),e.stylize(`'${Ii(t,e.truncate-2)}'`,"string")}O(zv,"inspectString");function qv(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}O(qv,"inspectSymbol");var uF=O(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(uF=O((n,i)=>{let[o,s]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(s,i)}}`},"getPromiseValue"))}catch{}var w7=uF;function xu(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let i=Sn(r.map(l=>[l,t[l]]),e,gc),o=Sn(n.map(l=>[l,t[l]]),e,gc);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}O(xu,"inspectObject");var Bv=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function pF(t,e){let r="";return Bv&&Bv in t&&(r=t[Bv]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${xu(t,e)}`}O(pF,"inspectClass");function mF(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${Sn(t,e)} ]`)}O(mF,"inspectArguments");var E7=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description","cause"];function fF(t,e){let r=Object.getOwnPropertyNames(t).filter(s=>E7.indexOf(s)===-1),n=t.name;e.truncate-=n.length;let i="";if(typeof t.message=="string"?i=Ii(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let o=Sn(r.map(s=>[s,t[s]]),e,gc);return`${n}${i}${o?` { ${o} }`:""}`}O(fF,"inspectObject");function dF([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}O(dF,"inspectAttribute");function Vh(t,e){return Sn(t,e,ib,`
`)}O(Vh,"inspectHTMLCollection");function ib(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=Sn(r.map(d=>[d,t.getAttribute(d)]),e,dF," ")),e.truncate-=l.length;let u=e.truncate,m=Vh(t.children,e);return m&&m.length>u&&(m=`${dc}(${t.children.length})`),`${i}${l}${o}${m}${s}`}O(ib,"inspectHTML");var _7=typeof Symbol=="function"&&typeof Symbol.for=="function",Vv=_7?Symbol.for("chai/inspect"):"@@chai/inspect",fc=!1;try{let t=g7();fc=t.inspect?t.inspect.custom:!1}catch{fc=!1}var CL=new WeakMap,OL={},NL={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:$v,Number:$v,bigint:jv,BigInt:jv,string:zv,String:zv,function:Wv,Function:Wv,symbol:qv,Symbol:qv,Array:tF,Date:rF,Map:oF,Set:cF,RegExp:aF,Promise:w7,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:mF,Int8Array:ui,Uint8Array:ui,Uint8ClampedArray:ui,Int16Array:ui,Uint16Array:ui,Int32Array:ui,Uint32Array:ui,Float32Array:ui,Float64Array:ui,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:fF,HTMLCollection:Vh,NodeList:Vh},R7=O((t,e,r)=>Vv in t&&typeof t[Vv]=="function"?t[Vv](e):fc&&fc in t&&typeof t[fc]=="function"?t[fc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&CL.has(t.constructor)?CL.get(t.constructor)(t,e):OL[r]?OL[r](t,e):"","inspectCustom"),k7=Object.prototype.toString;function Wh(t,e={}){let r=XL(e,Wh),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=k7.call(t).slice(8,-1)),i in NL)return NL[i](t,r);if(n&&t){let s=R7(t,r,i);if(s)return typeof s=="string"?s:Wh(s,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?xu(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?ib(t,r):"constructor"in t?t.constructor!==Object?pF(t,r):xu(t,r):t===Object(t)?xu(t,r):r.stylize(String(t),i)}O(Wh,"inspect");var hr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function ze(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:hr.truncateThreshold?hr.truncateThreshold:1/0};return Wh(t,i)}O(ze,"inspect");function ba(t){var e=ze(t),r=Object.prototype.toString.call(t);if(hr.truncateThreshold&&e.length>=hr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}O(ba,"objDisplay");function ob(t,e){var r=Pe(t,"negate"),n=Pe(t,"object"),i=e[3],o=Yh(t,e),s=r?e[2]:e[1],l=Pe(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return ba(n)}).replace(/#\{act\}/g,function(){return ba(o)}).replace(/#\{exp\}/g,function(){return ba(i)}),l?l+": "+s:s}O(ob,"getMessage");function Hn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}O(Hn,"transferFlags");function Gv(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}O(Gv,"type");function ab(){this._key="chai/deep-eql__"+Math.random()+Date.now()}O(ab,"FakeMap");ab.prototype={get:O(function(e){return e[this._key]},"get"),set:O(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var gF=typeof WeakMap=="function"?WeakMap:ab;function Kv(t,e,r){if(!r||wa(t)||wa(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}O(Kv,"memoizeCompare");function Tu(t,e,r,n){if(!(!r||wa(t)||wa(e))){var i=r.get(t);i?i.set(e,n):(i=new gF,i.set(e,n),r.set(t,i))}}O(Tu,"memoizeSet");var hF=Su;function Su(t,e,r){if(r&&r.comparator)return Qv(t,e,r);var n=sb(t,e);return n!==null?n:Qv(t,e,r)}O(Su,"deepEqual");function sb(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:wa(t)||wa(e)?!1:null}O(sb,"simpleEqual");function Qv(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new gF;var n=r&&r.comparator,i=Kv(t,e,r.memoize);if(i!==null)return i;var o=Kv(e,t,r.memoize);if(o!==null)return o;if(n){var s=n(t,e);if(s===!1||s===!0)return Tu(t,e,r.memoize,s),s;var l=sb(t,e);if(l!==null)return l}var u=Gv(t);if(u!==Gv(e))return Tu(t,e,r.memoize,!1),!1;Tu(t,e,r.memoize,!0);var m=yF(t,e,u,r);return Tu(t,e,r.memoize,m),m}O(Qv,"extensiveDeepEqual");function yF(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Su(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return cb(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Eo(t,e,n);case"RegExp":return TF(t,e);case"Generator":return xF(t,e,n);case"DataView":return Eo(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return Eo(new Uint8Array(t),new Uint8Array(e),n);case"Set":return Yv(t,e,n);case"Map":return Yv(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return vF(t,e,n)}}O(yF,"extensiveDeepEqualByType");function TF(t,e){return t.toString()===e.toString()}O(TF,"regexpEqual");function Yv(t,e,r){try{if(t.size!==e.size)return!1;if(t.size===0)return!0}catch{return!1}var n=[],i=[];return t.forEach(O(function(s,l){n.push([s,l])},"gatherEntries")),e.forEach(O(function(s,l){i.push([s,l])},"gatherEntries")),Eo(n.sort(),i.sort(),r)}O(Yv,"entriesEqual");function Eo(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Su(t[i],e[i],r)===!1)return!1;return!0}O(Eo,"iterableEqual");function xF(t,e,r){return Eo($h(t),$h(e),r)}O(xF,"generatorEqual");function SF(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}O(SF,"hasIteratorFunction");function Zv(t){if(SF(t))try{return $h(t[Symbol.iterator]())}catch{return[]}return[]}O(Zv,"getIteratorEntries");function $h(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}O($h,"getGeneratorEntries");function Xv(t){var e=[];for(var r in t)e.push(r);return e}O(Xv,"getEnumerableKeys");function Jv(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}O(Jv,"getEnumerableSymbols");function cb(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Su(t[r[o]],e[r[o]],n)===!1)return!1;return!0}O(cb,"keysEqual");function vF(t,e,r){var n=Xv(t),i=Xv(e),o=Jv(t),s=Jv(e);if(n=n.concat(o),i=i.concat(s),n.length&&n.length===i.length)return Eo(eb(n).sort(),eb(i).sort())===!1?!1:cb(t,e,n,r);var l=Zv(t),u=Zv(e);return l.length&&l.length===u.length?(l.sort(),u.sort(),Eo(l,u,r)):n.length===0&&l.length===0&&i.length===0&&u.length===0}O(vF,"objectEqual");function wa(t){return t===null||typeof t!="object"}O(wa,"isPrimitive");function eb(t){return t.map(O(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}O(eb,"mapSymbols");function Zh(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}O(Zh,"hasProperty");function bF(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),s=null;return o?s={i:parseFloat(o[1])}:s={p:n.replace(/\\([.[\]])/g,"$1")},s})}O(bF,"parsePath");function tb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let s=e[o];n&&(typeof s.p>"u"?n=n[s.i]:n=n[s.p],o===r-1&&(i=n))}return i}O(tb,"internalGetPathValue");function lb(t,e){let r=bF(e),n=r[r.length-1],i={parent:r.length>1?tb(t,r,r.length-1):t,name:n.p||n.i,value:tb(t,r)};return i.exists=Zh(i.parent,i.name),i}O(lb,"getPathInfo");function b(t,e,r,n){return Pe(this,"ssfi",r||b),Pe(this,"lockSsfi",n),Pe(this,"object",t),Pe(this,"message",e),Pe(this,"eql",hr.deepEqual||hF),hc(this)}O(b,"Assertion");Object.defineProperty(b,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),hr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),hr.includeStack=t}});Object.defineProperty(b,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),hr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),hr.showDiff=t}});b.addProperty=function(t,e){ub(this.prototype,t,e)};b.addMethod=function(t,e){pb(this.prototype,t,e)};b.addChainableMethod=function(t,e,r){db(this.prototype,t,e,r)};b.overwriteProperty=function(t,e){mb(this.prototype,t,e)};b.overwriteMethod=function(t,e){fb(this.prototype,t,e)};b.overwriteChainableMethod=function(t,e,r){gb(this.prototype,t,e,r)};b.prototype.assert=function(t,e,r,n,i,o){var s=nb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),hr.showDiff!==!0&&(o=!1),!s){e=ob(this,arguments);var l=Yh(this,arguments),u={actual:l,expected:n,showDiff:o},m=Tb(this,arguments);throw m&&(u.operator=m),new Ge(e,u,hr.includeStack?this.assert:Pe(this,"ssfi"))}};Object.defineProperty(b.prototype,"_obj",{get:function(){return Pe(this,"object")},set:function(t){Pe(this,"object",t)}});function vu(){return hr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}O(vu,"isProxyEnabled");function ub(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:O(function n(){!vu()&&!Pe(this,"lockSsfi")&&Pe(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new b;return Hn(this,o),o},"propertyGetter"),configurable:!0})}O(ub,"addProperty");var A7=Object.getOwnPropertyDescriptor(function(){},"length");function bu(t,e,r){return A7.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}O(bu,"addLengthGuard");function wF(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}O(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}O(wF,"getProperties");var UL=["__flags","__methods","_obj","assert"];function hc(t,e){return vu()?new Proxy(t,{get:O(function r(n,i){if(typeof i=="string"&&hr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,s=4;throw wF(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&UL.indexOf(l)===-1){var u=EF(i,l,s);u<s&&(o=l,s=u)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return UL.indexOf(i)===-1&&!Pe(n,"lockSsfi")&&Pe(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}O(hc,"proxify");function EF(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;var n=[];for(let o=0;o<=t.length;o++)n[o]=Array(e.length+1).fill(0),n[o][0]=o;for(let o=0;o<e.length;o++)n[0][o]=o;for(let o=1;o<=t.length;o++){var i=t.charCodeAt(o-1);for(let s=1;s<=e.length;s++){if(Math.abs(o-s)>=r){n[o][s]=r;continue}n[o][s]=Math.min(n[o-1][s]+1,n[o][s-1]+1,n[o-1][s-1]+(i===e.charCodeAt(s-1)?0:1))}}return n[t.length][e.length]}O(EF,"stringDistanceCapped");function pb(t,e,r){var n=O(function(){Pe(this,"lockSsfi")||Pe(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new b;return Hn(this,o),o},"methodWrapper");bu(n,e,!1),t[e]=hc(n,e)}O(pb,"addMethod");function mb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=O(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:O(function o(){!vu()&&!Pe(this,"lockSsfi")&&Pe(this,"ssfi",o);var s=Pe(this,"lockSsfi");Pe(this,"lockSsfi",!0);var l=r(i).call(this);if(Pe(this,"lockSsfi",s),l!==void 0)return l;var u=new b;return Hn(this,u),u},"overwritingPropertyGetter"),configurable:!0})}O(mb,"overwriteProperty");function fb(t,e,r){var n=t[e],i=O(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=O(function(){Pe(this,"lockSsfi")||Pe(this,"ssfi",o);var s=Pe(this,"lockSsfi");Pe(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(Pe(this,"lockSsfi",s),l!==void 0)return l;var u=new b;return Hn(this,u),u},"overwritingMethodWrapper");bu(o,e,!1),t[e]=hc(o,e)}O(fb,"overwriteMethod");var P7=typeof Object.setPrototypeOf=="function",HL=O(function(){},"testFn"),D7=Object.getOwnPropertyNames(HL).filter(function(t){var e=Object.getOwnPropertyDescriptor(HL,t);return typeof e!="object"?!0:!e.configurable}),M7=Function.prototype.call,L7=Function.prototype.apply;function db(t,e,r,n){typeof n!="function"&&(n=O(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:O(function(){i.chainingBehavior.call(this);var s=O(function(){Pe(this,"lockSsfi")||Pe(this,"ssfi",s);var m=i.method.apply(this,arguments);if(m!==void 0)return m;var d=new b;return Hn(this,d),d},"chainableMethodWrapper");if(bu(s,e,!0),P7){var l=Object.create(this);l.call=M7,l.apply=L7,Object.setPrototypeOf(s,l)}else{var u=Object.getOwnPropertyNames(t);u.forEach(function(m){if(D7.indexOf(m)===-1){var d=Object.getOwnPropertyDescriptor(t,m);Object.defineProperty(s,m,d)}})}return Hn(this,s),hc(s)},"chainableMethodGetter"),configurable:!0})}O(db,"addChainableMethod");function gb(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=O(function(){var u=n(o).call(this);if(u!==void 0)return u;var m=new b;return Hn(this,m),m},"overwritingChainableMethodGetter");var s=i.method;i.method=O(function(){var u=r(s).apply(this,arguments);if(u!==void 0)return u;var m=new b;return Hn(this,m),m},"overwritingChainableMethodWrapper")}O(gb,"overwriteChainableMethod");function jh(t,e){return ze(t)<ze(e)?-1:1}O(jh,"compareByInspect");function hb(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}O(hb,"getOwnEnumerablePropertySymbols");function yb(t){return Object.keys(t).concat(hb(t))}O(yb,"getOwnEnumerableProperties");var zh=Number.isNaN;function _F(t){var e=et(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}O(_F,"isObjectType");function Tb(t,e){var r=Pe(t,"operator"),n=Pe(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var s=_F(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}}O(Tb,"getOperator");function Xh(t){return t.name}O(Xh,"getName");function qh(t){return Object.prototype.toString.call(t)==="[object RegExp]"}O(qh,"isRegExp");function Vt(t){return["Number","BigInt"].includes(et(t))}O(Vt,"isNumeric");var{flag:D}=Bh;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){b.addProperty(t)});b.addProperty("not",function(){D(this,"negate",!0)});b.addProperty("deep",function(){D(this,"deep",!0)});b.addProperty("nested",function(){D(this,"nested",!0)});b.addProperty("own",function(){D(this,"own",!0)});b.addProperty("ordered",function(){D(this,"ordered",!0)});b.addProperty("any",function(){D(this,"any",!0),D(this,"all",!1)});b.addProperty("all",function(){D(this,"all",!0),D(this,"any",!1)});var BL={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function xb(t,e){e&&D(this,"message",e),t=t.toLowerCase();var r=D(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=et(r).toLowerCase();BL.function.includes(t)?this.assert(BL[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}O(xb,"an");b.addChainableMethod("an",xb);b.addChainableMethod("a",xb);function RF(t,e){return zh(t)&&zh(e)||t===e}O(RF,"SameValueZero");function wu(){D(this,"contains",!0)}O(wu,"includeChainingBehavior");function Eu(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=et(r).toLowerCase(),i=D(this,"message"),o=D(this,"negate"),s=D(this,"ssfi"),l=D(this,"deep"),u=l?"deep ":"",m=l?D(this,"eql"):RF;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new Ge(i+"unable to use .deep.include with WeakSet",void 0,s);d=r.has(t);break;case"map":r.forEach(function(E){d=d||m(E,t)});break;case"set":l?r.forEach(function(E){d=d||m(E,t)}):d=r.has(t);break;case"array":l?d=r.some(function(E){return m(E,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new Ge(i+"the given combination of arguments ("+n+" and "+et(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+et(t).toLowerCase(),void 0,s);var g=Object.keys(t),y=null,x=0;if(g.forEach(function(E){var w=new b(r);if(Hn(this,w,!0),D(w,"lockSsfi",!0),!o||g.length===1){w.property(E,t[E]);return}try{w.property(E,t[E])}catch(U){if(!Kr.compatibleConstructor(U,Ge))throw U;y===null&&(y=U),x++}},this),o&&g.length>1&&x===g.length)throw y;return}this.assert(d,"expected #{this} to "+u+"include "+ze(t),"expected #{this} to not "+u+"include "+ze(t))}O(Eu,"include");b.addChainableMethod("include",Eu,wu);b.addChainableMethod("contain",Eu,wu);b.addChainableMethod("contains",Eu,wu);b.addChainableMethod("includes",Eu,wu);b.addProperty("ok",function(){this.assert(D(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});b.addProperty("true",function(){this.assert(D(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!D(this,"negate"))});b.addProperty("numeric",function(){let t=D(this,"object");this.assert(["Number","BigInt"].includes(et(t)),"expected #{this} to be numeric","expected #{this} to not be numeric",!D(this,"negate"))});b.addProperty("callable",function(){let t=D(this,"object"),e=D(this,"ssfi"),r=D(this,"message"),n=r?`${r}: `:"",i=D(this,"negate"),o=i?`${n}expected ${ze(t)} not to be a callable function`:`${n}expected ${ze(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(et(t));if(s&&i||!s&&!i)throw new Ge(o,void 0,e)});b.addProperty("false",function(){this.assert(D(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!D(this,"negate"))});b.addProperty("null",function(){this.assert(D(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});b.addProperty("undefined",function(){this.assert(D(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});b.addProperty("NaN",function(){this.assert(zh(D(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function Sb(){var t=D(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}O(Sb,"assertExist");b.addProperty("exist",Sb);b.addProperty("exists",Sb);b.addProperty("empty",function(){var t=D(this,"object"),e=D(this,"ssfi"),r=D(this,"message"),n;switch(r=r?r+": ":"",et(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new Ge(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+Xh(t);throw new Ge(i.trim(),void 0,e);default:if(t!==Object(t))throw new Ge(r+".empty was passed non-string primitive "+ze(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function vb(){var t=D(this,"object"),e=et(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}O(vb,"checkArguments");b.addProperty("arguments",vb);b.addProperty("Arguments",vb);function Jh(t,e){e&&D(this,"message",e);var r=D(this,"object");if(D(this,"deep")){var n=D(this,"lockSsfi");D(this,"lockSsfi",!0),this.eql(t),D(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}O(Jh,"assertEqual");b.addMethod("equal",Jh);b.addMethod("equals",Jh);b.addMethod("eq",Jh);function bb(t,e){e&&D(this,"message",e);var r=D(this,"eql");this.assert(r(t,D(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}O(bb,"assertEql");b.addMethod("eql",bb);b.addMethod("eqls",bb);function ey(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"doLength"),i=D(this,"message"),o=i?i+": ":"",s=D(this,"ssfi"),l=et(r).toLowerCase(),u=et(t).toLowerCase();if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")throw new Ge(o+"the argument to above must be a date",void 0,s);if(!Vt(t)&&(n||Vt(r)))throw new Ge(o+"the argument to above must be a number",void 0,s);if(!n&&l!=="date"&&!Vt(r)){var m=l==="string"?"'"+r+"'":r;throw new Ge(o+"expected "+m+" to be a number or a date",void 0,s)}if(n){var d="length",g;l==="map"||l==="set"?(d="size",g=r.size):g=r.length,this.assert(g>t,"expected #{this} to have a "+d+" above #{exp} but got #{act}","expected #{this} to not have a "+d+" above #{exp}",t,g)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}O(ey,"assertAbove");b.addMethod("above",ey);b.addMethod("gt",ey);b.addMethod("greaterThan",ey);function ty(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"doLength"),i=D(this,"message"),o=i?i+": ":"",s=D(this,"ssfi"),l=et(r).toLowerCase(),u=et(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to least must be a date";else if(!Vt(t)&&(n||Vt(r)))m=o+"the argument to least must be a number";else if(!n&&l!=="date"&&!Vt(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new Ge(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+y+" at least #{exp} but got #{act}","expected #{this} to have a "+y+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}O(ty,"assertLeast");b.addMethod("least",ty);b.addMethod("gte",ty);b.addMethod("greaterThanOrEqual",ty);function ry(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"doLength"),i=D(this,"message"),o=i?i+": ":"",s=D(this,"ssfi"),l=et(r).toLowerCase(),u=et(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to below must be a date";else if(!Vt(t)&&(n||Vt(r)))m=o+"the argument to below must be a number";else if(!n&&l!=="date"&&!Vt(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new Ge(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+y+" below #{exp} but got #{act}","expected #{this} to not have a "+y+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}O(ry,"assertBelow");b.addMethod("below",ry);b.addMethod("lt",ry);b.addMethod("lessThan",ry);function ny(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"doLength"),i=D(this,"message"),o=i?i+": ":"",s=D(this,"ssfi"),l=et(r).toLowerCase(),u=et(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to most must be a date";else if(!Vt(t)&&(n||Vt(r)))m=o+"the argument to most must be a number";else if(!n&&l!=="date"&&!Vt(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new Ge(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+y+" at most #{exp} but got #{act}","expected #{this} to have a "+y+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}O(ny,"assertMost");b.addMethod("most",ny);b.addMethod("lte",ny);b.addMethod("lessThanOrEqual",ny);b.addMethod("within",function(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"doLength"),o=D(this,"message"),s=o?o+": ":"",l=D(this,"ssfi"),u=et(n).toLowerCase(),m=et(t).toLowerCase(),d=et(e).toLowerCase(),g,y=!0,x=m==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&u!=="map"&&u!=="set"&&new b(n,o,l,!0).to.have.property("length"),!i&&u==="date"&&(m!=="date"||d!=="date"))g=s+"the arguments to within must be dates";else if((!Vt(t)||!Vt(e))&&(i||Vt(n)))g=s+"the arguments to within must be numbers";else if(!i&&u!=="date"&&!Vt(n)){var E=u==="string"?"'"+n+"'":n;g=s+"expected "+E+" to be a number or a date"}else y=!1;if(y)throw new Ge(g,void 0,l);if(i){var w="length",U;u==="map"||u==="set"?(w="size",U=n.size):U=n.length,this.assert(U>=t&&U<=e,"expected #{this} to have a "+w+" within "+x,"expected #{this} to not have a "+w+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function wb(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"ssfi"),i=D(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new Ge(i+"The instanceof assertion needs a constructor but "+et(t)+" was given.",void 0,n)):l}var s=Xh(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}O(wb,"assertInstanceOf");b.addMethod("instanceof",wb);b.addMethod("instanceOf",wb);function Eb(t,e,r){r&&D(this,"message",r);var n=D(this,"nested"),i=D(this,"own"),o=D(this,"message"),s=D(this,"object"),l=D(this,"ssfi"),u=typeof t;if(o=o?o+": ":"",n){if(u!=="string")throw new Ge(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(u!=="string"&&u!=="number"&&u!=="symbol")throw new Ge(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new Ge(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(s==null)throw new Ge(o+"Target cannot be null or undefined.",void 0,l);var m=D(this,"deep"),d=D(this,"negate"),g=n?lb(s,t):null,y=n?g.value:s[t],x=m?D(this,"eql"):(U,W)=>U===W,E="";m&&(E+="deep "),i&&(E+="own "),n&&(E+="nested "),E+="property ";var w;i?w=Object.prototype.hasOwnProperty.call(s,t):n?w=g.exists:w=Zh(s,t),(!d||arguments.length===1)&&this.assert(w,"expected #{this} to have "+E+ze(t),"expected #{this} to not have "+E+ze(t)),arguments.length>1&&this.assert(w&&x(e,y),"expected #{this} to have "+E+ze(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+E+ze(t)+" of #{act}",e,y),D(this,"object",y)}O(Eb,"assertProperty");b.addMethod("property",Eb);function _b(t,e,r){D(this,"own",!0),Eb.apply(this,arguments)}O(_b,"assertOwnProperty");b.addMethod("ownProperty",_b);b.addMethod("haveOwnProperty",_b);function Rb(t,e,r){typeof e=="string"&&(r=e,e=null),r&&D(this,"message",r);var n=D(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=D(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+ze(t)+" on #{this} to match "+ze(e)+", got "+ze(i),"expected the own property descriptor for "+ze(t)+" on #{this} to not match "+ze(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+ze(t),"expected #{this} to not have an own property descriptor for "+ze(t)),D(this,"object",i)}O(Rb,"assertOwnPropertyDescriptor");b.addMethod("ownPropertyDescriptor",Rb);b.addMethod("haveOwnPropertyDescriptor",Rb);function kb(){D(this,"doLength",!0)}O(kb,"assertLengthChain");function Ab(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=et(r).toLowerCase(),i=D(this,"message"),o=D(this,"ssfi"),s="length",l;switch(n){case"map":case"set":s="size",l=r.size;break;default:new b(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,l)}O(Ab,"assertLength");b.addChainableMethod("length",Ab,kb);b.addChainableMethod("lengthOf",Ab,kb);function Pb(t,e){e&&D(this,"message",e);var r=D(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}O(Pb,"assertMatch");b.addMethod("match",Pb);b.addMethod("matches",Pb);b.addMethod("string",function(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"message"),i=D(this,"ssfi");new b(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+ze(t),"expected #{this} to not contain "+ze(t))});function Db(t){var e=D(this,"object"),r=et(e),n=et(t),i=D(this,"ssfi"),o=D(this,"deep"),s,l="",u,m=!0,d=D(this,"message");d=d?d+": ":"";var g=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",u=[],e.forEach(function(q,ie){u.push(ie)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(u=yb(e),n){case"Array":if(arguments.length>1)throw new Ge(g,void 0,i);break;case"Object":if(arguments.length>1)throw new Ge(g,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(q){return typeof q=="symbol"?q:String(q)})}if(!t.length)throw new Ge(d+"keys required",void 0,i);var y=t.length,x=D(this,"any"),E=D(this,"all"),w=t,U=o?D(this,"eql"):(q,ie)=>q===ie;if(!x&&!E&&(E=!0),x&&(m=w.some(function(q){return u.some(function(ie){return U(q,ie)})})),E&&(m=w.every(function(q){return u.some(function(ie){return U(q,ie)})}),D(this,"contains")||(m=m&&t.length==u.length)),y>1){t=t.map(function(q){return ze(q)});var W=t.pop();E&&(s=t.join(", ")+", and "+W),x&&(s=t.join(", ")+", or "+W)}else s=ze(t[0]);s=(y>1?"keys ":"key ")+s,s=(D(this,"contains")?"contain ":"have ")+s,this.assert(m,"expected #{this} to "+l+s,"expected #{this} to not "+l+s,w.slice(0).sort(jh),u.sort(jh),!0)}O(Db,"assertKeys");b.addMethod("keys",Db);b.addMethod("key",Db);function iy(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"ssfi"),o=D(this,"message"),s=D(this,"negate")||!1;new b(n,o,i,!0).is.a("function"),(qh(t)||typeof t=="string")&&(e=t,t=null);let l,u=!1;try{n()}catch(q){u=!0,l=q}var m=t===void 0&&e===void 0,d=!!(t&&e),g=!1,y=!1;if(m||!m&&!s){var x="an error";t instanceof Error?x="#{exp}":t&&(x=Kr.getConstructorName(t));let q=l;if(l instanceof Error)q=l.toString();else if(typeof l=="string")q=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{q=Kr.getConstructorName(l)}catch{}this.assert(u,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),q)}if(t&&l){if(t instanceof Error){var E=Kr.compatibleInstance(l,t);E===s&&(d&&s?g=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!s?" but #{act} was thrown":""),t.toString(),l.toString()))}var w=Kr.compatibleConstructor(l,t);w===s&&(d&&s?g=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Kr.getConstructorName(t),l instanceof Error?l.toString():l&&Kr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var U="including";qh(e)&&(U="matching");var W=Kr.compatibleMessage(l,e);W===s&&(d&&s?y=!0:this.assert(s,"expected #{this} to throw error "+U+" #{exp} but got #{act}","expected #{this} to throw error not "+U+" #{exp}",e,Kr.getMessage(l)))}g&&y&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Kr.getConstructorName(t),l instanceof Error?l.toString():l&&Kr.getConstructorName(l)),D(this,"object",l)}O(iy,"assertThrows");b.addMethod("throw",iy);b.addMethod("throws",iy);b.addMethod("Throw",iy);function Mb(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+ze(t),"expected #{this} to not respond to "+ze(t))}O(Mb,"respondTo");b.addMethod("respondTo",Mb);b.addMethod("respondsTo",Mb);b.addProperty("itself",function(){D(this,"itself",!0)});function Lb(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+ba(t),"expected #{this} to not satisfy"+ba(t),!D(this,"negate"),n)}O(Lb,"satisfy");b.addMethod("satisfy",Lb);b.addMethod("satisfies",Lb);function Fb(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"message"),o=D(this,"ssfi");new b(n,i,o,!0).is.numeric;let s="A `delta` value is required for `closeTo`";if(e==null)throw new Ge(i?`${i}: ${s}`:s,void 0,o);if(new b(e,i,o,!0).is.numeric,s="A `expected` value is required for `closeTo`",t==null)throw new Ge(i?`${i}: ${s}`:s,void 0,o);new b(t,i,o,!0).is.numeric;let l=O(m=>m<0n?-m:m,"abs"),u=O(m=>parseFloat(parseFloat(m).toPrecision(12)),"strip");this.assert(u(l(n-t))<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}O(Fb,"closeTo");b.addMethod("closeTo",Fb);b.addMethod("approximately",Fb);function kF(t,e,r,n,i){let o=Array.from(e),s=Array.from(t);if(!n){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(l,u){if(i)return r?r(l,o[u]):l===o[u];if(!r){var m=o.indexOf(l);return m===-1?!1:(n||o.splice(m,1),!0)}return o.some(function(d,g){return r(l,d)?(n||o.splice(g,1),!0):!1})})}O(kF,"isSubsetOf");b.addMethod("members",function(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"message"),i=D(this,"ssfi");new b(r,n,i,!0).to.be.iterable,new b(t,n,i,!0).to.be.iterable;var o=D(this,"contains"),s=D(this,"ordered"),l,u,m;o?(l=s?"an ordered superset":"a superset",u="expected #{this} to be "+l+" of #{exp}",m="expected #{this} to not be "+l+" of #{exp}"):(l=s?"ordered members":"members",u="expected #{this} to have the same "+l+" as #{exp}",m="expected #{this} to not have the same "+l+" as #{exp}");var d=D(this,"deep")?D(this,"eql"):void 0;this.assert(kF(t,r,d,o,s),u,m,t,r,!0)});b.addProperty("iterable",function(t){t&&D(this,"message",t);var e=D(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function AF(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"message"),i=D(this,"ssfi"),o=D(this,"contains"),s=D(this,"deep"),l=D(this,"eql");new b(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(u){return r.indexOf(u)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):s?this.assert(t.some(function(u){return l(r,u)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}O(AF,"oneOf");b.addMethod("oneOf",AF);function Ib(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"message"),o=D(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),n();var l=e==null?t():t[e],u=e==null?s:"."+e;D(this,"deltaMsgObj",u),D(this,"initialDeltaValue",s),D(this,"finalDeltaValue",l),D(this,"deltaBehavior","change"),D(this,"realDelta",l!==s),this.assert(s!==l,"expected "+u+" to change","expected "+u+" to not change")}O(Ib,"assertChanges");b.addMethod("change",Ib);b.addMethod("changes",Ib);function Cb(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"message"),o=D(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),new b(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;D(this,"deltaMsgObj",u),D(this,"initialDeltaValue",s),D(this,"finalDeltaValue",l),D(this,"deltaBehavior","increase"),D(this,"realDelta",l-s),this.assert(l-s>0,"expected "+u+" to increase","expected "+u+" to not increase")}O(Cb,"assertIncreases");b.addMethod("increase",Cb);b.addMethod("increases",Cb);function Ob(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"message"),o=D(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),new b(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;D(this,"deltaMsgObj",u),D(this,"initialDeltaValue",s),D(this,"finalDeltaValue",l),D(this,"deltaBehavior","decrease"),D(this,"realDelta",s-l),this.assert(l-s<0,"expected "+u+" to decrease","expected "+u+" to not decrease")}O(Ob,"assertDecreases");b.addMethod("decrease",Ob);b.addMethod("decreases",Ob);function PF(t,e){e&&D(this,"message",e);var r=D(this,"deltaMsgObj"),n=D(this,"initialDeltaValue"),i=D(this,"finalDeltaValue"),o=D(this,"deltaBehavior"),s=D(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=s===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}O(PF,"assertDelta");b.addMethod("by",PF);b.addProperty("extensible",function(){var t=D(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});b.addProperty("sealed",function(){var t=D(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});b.addProperty("frozen",function(){var t=D(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});b.addProperty("finite",function(t){var e=D(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function Gh(t,e){return t===e?!0:typeof e!=typeof t?!1:typeof t!="object"||t===null?t===e:e?Array.isArray(t)?Array.isArray(e)?t.every(function(r){return e.some(function(n){return Gh(r,n)})}):!1:t instanceof Date?e instanceof Date?t.getTime()===e.getTime():!1:Object.keys(t).every(function(r){var n=t[r],i=e[r];return typeof n=="object"&&n!==null&&i!==null?Gh(n,i):typeof n=="function"?n(i):i===n}):!1}O(Gh,"compareSubset");b.addMethod("containSubset",function(t){let e=Pe(this,"object"),r=hr.showDiff;this.assert(Gh(t,e),"expected #{act} to contain subset #{exp}","expected #{act} to not contain subset #{exp}",t,e,r)});function Kh(t,e){return new b(t,e)}O(Kh,"expect");Kh.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new Ge(r,{actual:t,expected:e,operator:n},Kh.fail)};var DF={};rb(DF,{Should:()=>I7,should:()=>F7});function Nb(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new b(this.valueOf(),null,t):new b(this,null,t)}O(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}O(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new Ge(o,{actual:n,expected:i,operator:s},r.fail)},r.equal=function(n,i,o){new b(n,o).to.equal(i)},r.Throw=function(n,i,o,s){new b(n,s).to.Throw(i,o)},r.exist=function(n,i){new b(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new b(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,s){new b(n,s).to.not.Throw(i,o)},r.not.exist=function(n,i){new b(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}O(Nb,"loadShould");var F7=Nb,I7=Nb;function v(t,e){var r=new b(null,null,v,!0);r.assert(t,e,"[ negation message unavailable ]")}O(v,"assert");v.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new Ge(r,{actual:t,expected:e,operator:n},v.fail)};v.isOk=function(t,e){new b(t,e,v.isOk,!0).is.ok};v.isNotOk=function(t,e){new b(t,e,v.isNotOk,!0).is.not.ok};v.equal=function(t,e,r){var n=new b(t,r,v.equal,!0);n.assert(e==Pe(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};v.notEqual=function(t,e,r){var n=new b(t,r,v.notEqual,!0);n.assert(e!=Pe(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};v.strictEqual=function(t,e,r){new b(t,r,v.strictEqual,!0).to.equal(e)};v.notStrictEqual=function(t,e,r){new b(t,r,v.notStrictEqual,!0).to.not.equal(e)};v.deepEqual=v.deepStrictEqual=function(t,e,r){new b(t,r,v.deepEqual,!0).to.eql(e)};v.notDeepEqual=function(t,e,r){new b(t,r,v.notDeepEqual,!0).to.not.eql(e)};v.isAbove=function(t,e,r){new b(t,r,v.isAbove,!0).to.be.above(e)};v.isAtLeast=function(t,e,r){new b(t,r,v.isAtLeast,!0).to.be.least(e)};v.isBelow=function(t,e,r){new b(t,r,v.isBelow,!0).to.be.below(e)};v.isAtMost=function(t,e,r){new b(t,r,v.isAtMost,!0).to.be.most(e)};v.isTrue=function(t,e){new b(t,e,v.isTrue,!0).is.true};v.isNotTrue=function(t,e){new b(t,e,v.isNotTrue,!0).to.not.equal(!0)};v.isFalse=function(t,e){new b(t,e,v.isFalse,!0).is.false};v.isNotFalse=function(t,e){new b(t,e,v.isNotFalse,!0).to.not.equal(!1)};v.isNull=function(t,e){new b(t,e,v.isNull,!0).to.equal(null)};v.isNotNull=function(t,e){new b(t,e,v.isNotNull,!0).to.not.equal(null)};v.isNaN=function(t,e){new b(t,e,v.isNaN,!0).to.be.NaN};v.isNotNaN=function(t,e){new b(t,e,v.isNotNaN,!0).not.to.be.NaN};v.exists=function(t,e){new b(t,e,v.exists,!0).to.exist};v.notExists=function(t,e){new b(t,e,v.notExists,!0).to.not.exist};v.isUndefined=function(t,e){new b(t,e,v.isUndefined,!0).to.equal(void 0)};v.isDefined=function(t,e){new b(t,e,v.isDefined,!0).to.not.equal(void 0)};v.isCallable=function(t,e){new b(t,e,v.isCallable,!0).is.callable};v.isNotCallable=function(t,e){new b(t,e,v.isNotCallable,!0).is.not.callable};v.isObject=function(t,e){new b(t,e,v.isObject,!0).to.be.a("object")};v.isNotObject=function(t,e){new b(t,e,v.isNotObject,!0).to.not.be.a("object")};v.isArray=function(t,e){new b(t,e,v.isArray,!0).to.be.an("array")};v.isNotArray=function(t,e){new b(t,e,v.isNotArray,!0).to.not.be.an("array")};v.isString=function(t,e){new b(t,e,v.isString,!0).to.be.a("string")};v.isNotString=function(t,e){new b(t,e,v.isNotString,!0).to.not.be.a("string")};v.isNumber=function(t,e){new b(t,e,v.isNumber,!0).to.be.a("number")};v.isNotNumber=function(t,e){new b(t,e,v.isNotNumber,!0).to.not.be.a("number")};v.isNumeric=function(t,e){new b(t,e,v.isNumeric,!0).is.numeric};v.isNotNumeric=function(t,e){new b(t,e,v.isNotNumeric,!0).is.not.numeric};v.isFinite=function(t,e){new b(t,e,v.isFinite,!0).to.be.finite};v.isBoolean=function(t,e){new b(t,e,v.isBoolean,!0).to.be.a("boolean")};v.isNotBoolean=function(t,e){new b(t,e,v.isNotBoolean,!0).to.not.be.a("boolean")};v.typeOf=function(t,e,r){new b(t,r,v.typeOf,!0).to.be.a(e)};v.notTypeOf=function(t,e,r){new b(t,r,v.notTypeOf,!0).to.not.be.a(e)};v.instanceOf=function(t,e,r){new b(t,r,v.instanceOf,!0).to.be.instanceOf(e)};v.notInstanceOf=function(t,e,r){new b(t,r,v.notInstanceOf,!0).to.not.be.instanceOf(e)};v.include=function(t,e,r){new b(t,r,v.include,!0).include(e)};v.notInclude=function(t,e,r){new b(t,r,v.notInclude,!0).not.include(e)};v.deepInclude=function(t,e,r){new b(t,r,v.deepInclude,!0).deep.include(e)};v.notDeepInclude=function(t,e,r){new b(t,r,v.notDeepInclude,!0).not.deep.include(e)};v.nestedInclude=function(t,e,r){new b(t,r,v.nestedInclude,!0).nested.include(e)};v.notNestedInclude=function(t,e,r){new b(t,r,v.notNestedInclude,!0).not.nested.include(e)};v.deepNestedInclude=function(t,e,r){new b(t,r,v.deepNestedInclude,!0).deep.nested.include(e)};v.notDeepNestedInclude=function(t,e,r){new b(t,r,v.notDeepNestedInclude,!0).not.deep.nested.include(e)};v.ownInclude=function(t,e,r){new b(t,r,v.ownInclude,!0).own.include(e)};v.notOwnInclude=function(t,e,r){new b(t,r,v.notOwnInclude,!0).not.own.include(e)};v.deepOwnInclude=function(t,e,r){new b(t,r,v.deepOwnInclude,!0).deep.own.include(e)};v.notDeepOwnInclude=function(t,e,r){new b(t,r,v.notDeepOwnInclude,!0).not.deep.own.include(e)};v.match=function(t,e,r){new b(t,r,v.match,!0).to.match(e)};v.notMatch=function(t,e,r){new b(t,r,v.notMatch,!0).to.not.match(e)};v.property=function(t,e,r){new b(t,r,v.property,!0).to.have.property(e)};v.notProperty=function(t,e,r){new b(t,r,v.notProperty,!0).to.not.have.property(e)};v.propertyVal=function(t,e,r,n){new b(t,n,v.propertyVal,!0).to.have.property(e,r)};v.notPropertyVal=function(t,e,r,n){new b(t,n,v.notPropertyVal,!0).to.not.have.property(e,r)};v.deepPropertyVal=function(t,e,r,n){new b(t,n,v.deepPropertyVal,!0).to.have.deep.property(e,r)};v.notDeepPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};v.ownProperty=function(t,e,r){new b(t,r,v.ownProperty,!0).to.have.own.property(e)};v.notOwnProperty=function(t,e,r){new b(t,r,v.notOwnProperty,!0).to.not.have.own.property(e)};v.ownPropertyVal=function(t,e,r,n){new b(t,n,v.ownPropertyVal,!0).to.have.own.property(e,r)};v.notOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};v.deepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};v.notDeepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};v.nestedProperty=function(t,e,r){new b(t,r,v.nestedProperty,!0).to.have.nested.property(e)};v.notNestedProperty=function(t,e,r){new b(t,r,v.notNestedProperty,!0).to.not.have.nested.property(e)};v.nestedPropertyVal=function(t,e,r,n){new b(t,n,v.nestedPropertyVal,!0).to.have.nested.property(e,r)};v.notNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};v.deepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};v.notDeepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};v.lengthOf=function(t,e,r){new b(t,r,v.lengthOf,!0).to.have.lengthOf(e)};v.hasAnyKeys=function(t,e,r){new b(t,r,v.hasAnyKeys,!0).to.have.any.keys(e)};v.hasAllKeys=function(t,e,r){new b(t,r,v.hasAllKeys,!0).to.have.all.keys(e)};v.containsAllKeys=function(t,e,r){new b(t,r,v.containsAllKeys,!0).to.contain.all.keys(e)};v.doesNotHaveAnyKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};v.doesNotHaveAllKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};v.hasAnyDeepKeys=function(t,e,r){new b(t,r,v.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};v.hasAllDeepKeys=function(t,e,r){new b(t,r,v.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};v.containsAllDeepKeys=function(t,e,r){new b(t,r,v.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};v.doesNotHaveAnyDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};v.doesNotHaveAllDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};v.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new b(t,n,v.throws,!0).to.throw(e,r);return Pe(i,"object")};v.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new b(t,n,v.doesNotThrow,!0).to.not.throw(e,r)};v.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new Ge(n+'Invalid operator "'+e+'"',void 0,v.operator)}var o=new b(i,n,v.operator,!0);o.assert(Pe(o,"object")===!0,"expected "+ze(t)+" to be "+e+" "+ze(r),"expected "+ze(t)+" to not be "+e+" "+ze(r))};v.closeTo=function(t,e,r,n){new b(t,n,v.closeTo,!0).to.be.closeTo(e,r)};v.approximately=function(t,e,r,n){new b(t,n,v.approximately,!0).to.be.approximately(e,r)};v.sameMembers=function(t,e,r){new b(t,r,v.sameMembers,!0).to.have.same.members(e)};v.notSameMembers=function(t,e,r){new b(t,r,v.notSameMembers,!0).to.not.have.same.members(e)};v.sameDeepMembers=function(t,e,r){new b(t,r,v.sameDeepMembers,!0).to.have.same.deep.members(e)};v.notSameDeepMembers=function(t,e,r){new b(t,r,v.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};v.sameOrderedMembers=function(t,e,r){new b(t,r,v.sameOrderedMembers,!0).to.have.same.ordered.members(e)};v.notSameOrderedMembers=function(t,e,r){new b(t,r,v.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};v.sameDeepOrderedMembers=function(t,e,r){new b(t,r,v.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};v.notSameDeepOrderedMembers=function(t,e,r){new b(t,r,v.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};v.includeMembers=function(t,e,r){new b(t,r,v.includeMembers,!0).to.include.members(e)};v.notIncludeMembers=function(t,e,r){new b(t,r,v.notIncludeMembers,!0).to.not.include.members(e)};v.includeDeepMembers=function(t,e,r){new b(t,r,v.includeDeepMembers,!0).to.include.deep.members(e)};v.notIncludeDeepMembers=function(t,e,r){new b(t,r,v.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};v.includeOrderedMembers=function(t,e,r){new b(t,r,v.includeOrderedMembers,!0).to.include.ordered.members(e)};v.notIncludeOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};v.includeDeepOrderedMembers=function(t,e,r){new b(t,r,v.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};v.notIncludeDeepOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};v.oneOf=function(t,e,r){new b(t,r,v.oneOf,!0).to.be.oneOf(e)};v.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${ze(t)} to be an iterable`:`expected ${ze(t)} to be an iterable`,new Ge(e,void 0,v.isIterable)};v.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.changes,!0).to.change(e,r)};v.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesBy,!0).to.change(e,r).by(n)};v.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotChange,!0).to.not.change(e,r)};v.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesButNotBy,!0).to.change(e,r).but.not.by(n)};v.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.increases,!0).to.increase(e,r)};v.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesBy,!0).to.increase(e,r).by(n)};v.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotIncrease,!0).to.not.increase(e,r)};v.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};v.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.decreases,!0).to.decrease(e,r)};v.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesBy,!0).to.decrease(e,r).by(n)};v.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotDecrease,!0).to.not.decrease(e,r)};v.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new b(t,i,v.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};v.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};v.ifError=function(t){if(t)throw t};v.isExtensible=function(t,e){new b(t,e,v.isExtensible,!0).to.be.extensible};v.isNotExtensible=function(t,e){new b(t,e,v.isNotExtensible,!0).to.not.be.extensible};v.isSealed=function(t,e){new b(t,e,v.isSealed,!0).to.be.sealed};v.isNotSealed=function(t,e){new b(t,e,v.isNotSealed,!0).to.not.be.sealed};v.isFrozen=function(t,e){new b(t,e,v.isFrozen,!0).to.be.frozen};v.isNotFrozen=function(t,e){new b(t,e,v.isNotFrozen,!0).to.not.be.frozen};v.isEmpty=function(t,e){new b(t,e,v.isEmpty,!0).to.be.empty};v.isNotEmpty=function(t,e){new b(t,e,v.isNotEmpty,!0).to.not.be.empty};v.containsSubset=function(t,e,r){new b(t,r).to.containSubset(e)};v.doesNotContainSubset=function(t,e,r){new b(t,r).to.not.containSubset(e)};var C7=[["isOk","ok"],["isNotOk","notOk"],["throws","throw"],["throws","Throw"],["isExtensible","extensible"],["isNotExtensible","notExtensible"],["isSealed","sealed"],["isNotSealed","notSealed"],["isFrozen","frozen"],["isNotFrozen","notFrozen"],["isEmpty","empty"],["isNotEmpty","notEmpty"],["isCallable","isFunction"],["isNotCallable","isNotFunction"],["containsSubset","containSubset"]];for(let[t,e]of C7)v[e]=v[t];var VL=[];function MF(t){let e={use:MF,AssertionError:Ge,util:Bh,config:hr,expect:Kh,assert:v,Assertion:b,...DF};return~VL.indexOf(t)||(t(e,Bh),VL.push(t)),e}O(MF,"use");var _u=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new Y(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new Y(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new Y(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var LF=on(require("node:path"),1),oy=class{get uri(){return this._uri}get filename(){return LF.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new Y(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof _e?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new _u(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new _e(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof Y))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new Y(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof _e))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new _e(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new Ub(n)}}};function U7(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var Ub=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=U7(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,s=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)r=i+1;else break;return new Hb(i,e-s)}},Hb=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var ay=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Ru;this.onDidChangeActiveTextEditor=Ru;this.onDidChangeVisibleTextEditors=Ru;this.onDidChangeTextEditorSelection=Ru;this.onDidChangeTextEditorVisibleRanges=Ru;this.configuration=new Jl,this.keyValueStore=new eu,this.messages=new tu,this.clipboard=new Zl(this.client),this.capabilities=new Th,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await wM(this.client);this.assetsRoot_=Bb.default.join(e,"assets"),this.cursorlessNeovimPath=Bb.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return LL()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return FM(e)}onDidOpenTextDocument(e,r,n){return IM(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let s,l;e?(s=[],l=[]):(s=await hh(r,this.client),l=await bM(r,this.client,i));let u=this.toNeovimEditor(r,n,i,l,s);return zr().emitEvent("onDidOpenTextDocument",u.document),u}toNeovimEditor(e,r,n,i,o){let s=this.getTextDocument(r),l=this.getTextEditor(e);return s?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),s.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),s=new oy(HM.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,s)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,s)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new Sh(Lx(),this.client,this,e,s,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){AM(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,FF.pull)(this.disposables,...e)}};function Ru(){return{dispose(){}}}var sy=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var B7=BigInt(1e9);function IF(t,e=BigInt(1e6)){return Number(t*e/B7)/Number(e)}async function cy(t,e=[],r=[],n,i,o,s,l){let u={documentContents:n.document.getText(),selections:n.selections.map(KR)};o!=null&&(u.marks=o),l!=null&&(u.metadata=l),e.includes("clipboard")||(u.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(u.visibleRanges=n.visibleRanges.map(Qc));for(let m of ls){let d=t?.get(m),g=`${m}Mark`;d!=null&&!e.includes(g)&&(u[g]=d.map(y=>y.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let m=s?.startTimestamp;if(m==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-m;u.timeOffsetSeconds=IF(d)}return u}var V7=on(gl(),1);function CF(t,e,r,n,i,o,s){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:s,scopeProvider:o,takeSnapshot(l,u,m,d,g){return cy(e,l,u,m,d,g,void 0,void 0)},setStoredTarget(l,u,m){e.set(u,m?.map(d=>TM(l,d)))},hatTokenMap:r}}async function OF(t,e,r,n){let i={[DT]:async(...o)=>{(await t.mode).mode==="t"&&RM(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),u=ym(o);if(await n.getFocusedElementType()==="terminal"&&Go(u)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&kM(t)}return l}catch(l){if(e.runMode!=="test"){let u=l;console.error(u.stack),e.handleCommandError(u)}throw l}},"cursorless.repeatPreviousCommand":Ne,"cursorless.showCheatsheet":Ne,"cursorless.internal.updateCheatsheetDefaults":Ne,"cursorless.recordTestCase":Ne,"cursorless.recordOneTestCaseThenPause":Ne,"cursorless.pauseRecording":Ne,"cursorless.resumeRecording":Ne,"cursorless.takeSnapshot":Ne,"cursorless.recordScopeTests.showUnimplementedFacets":Ne,"cursorless.recordScopeTests.saveActiveDocument":Ne,"cursorless.showQuickPick":Ne,"cursorless.showDocumentation":Ne,"cursorless.showInstallationDependencies":Ne,"cursorless.migrateSnippets":Ne,"cursorless.private.logQuickActions":Ne,"cursorless.toggleDecorations":Ne,"cursorless.recomputeDecorationStyles":Ne,"cursorless.showScopeVisualizer":Ne,"cursorless.hideScopeVisualizer":Ne,"cursorless.analyzeCommandHistory":Ne,"cursorless.keyboard.escape":Ne,"cursorless.keyboard.targeted.targetHat":Ne,"cursorless.keyboard.targeted.targetScope":Ne,"cursorless.keyboard.targeted.targetSelection":Ne,"cursorless.keyboard.targeted.clearTarget":Ne,"cursorless.keyboard.targeted.runActionOnTarget":Ne,"cursorless.keyboard.modal.modeOn":Ne,"cursorless.keyboard.modal.modeOff":Ne,"cursorless.keyboard.modal.modeToggle":Ne,"cursorless.keyboard.undoTarget":Ne,"cursorless.keyboard.redoTarget":Ne,"cursorless.tutorial.start":Ne,"cursorless.tutorial.next":Ne,"cursorless.tutorial.previous":Ne,"cursorless.tutorial.restart":Ne,"cursorless.tutorial.resume":Ne,"cursorless.tutorial.list":Ne,"cursorless.documentationOpened":Ne};Object.entries(i).map(([o,s])=>zr().registerCommand(o,s))}async function Ne(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function NF(t){let e=t.nvim,r=new ay(e);await r.init();let n=r.runMode==="production"?r:new am(r,new nm,r.runMode==="test",void 0),i=new vp,o=new sy(e),s=r.runMode==="test"?i:o,{commandApi:l,storedTargets:u,hatTokenMap:m,scopeProvider:d,injectIde:g}=await yM({ide:n,commandServerApi:s});await OF(e,r,l,s);let y={testHelpers:r.runMode==="test"?CF(i,u,m,r,n,d,g):void 0};zr().registerExtensionApi(SM,y),console.log("activate(): Cursorless extension loaded")}function UF(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await W7(t),{sync:!1})}async function W7(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await NF(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
