"use strict";var lB=Object.create;var mp=Object.defineProperty;var uB=Object.getOwnPropertyDescriptor;var pB=Object.getOwnPropertyNames;var fB=Object.getPrototypeOf,dB=Object.prototype.hasOwnProperty;var ot=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),mB=(t,e)=>{for(var r in e)mp(t,r,{get:e[r],enumerable:!0})},sE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of pB(e))!dB.call(t,i)&&i!==r&&mp(t,i,{get:()=>e[i],enumerable:!(n=uB(e,i))||n.enumerable});return t};var pr=(t,e,r)=>(r=t!=null?lB(fB(t)):{},sE(e||!t||!t.__esModule?mp(r,"default",{value:t,enumerable:!0}):r,t)),hB=t=>sE(mp({},"__esModule",{value:!0}),t);var PT=ot(kT=>{"use strict";Object.defineProperty(kT,"__esModule",{value:!0});kT.default=HK;var VK=BK(require("crypto"));function BK(t){return t&&t.__esModule?t:{default:t}}var Pf=new Uint8Array(256),kf=Pf.length;function HK(){return kf>Pf.length-16&&(VK.default.randomFillSync(Pf),kf=0),Pf.slice(kf,kf+=16)}});var Xk=ot(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});Mf.default=void 0;var WK=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Mf.default=WK});var el=ot(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});Af.default=void 0;var $K=qK(Xk());function qK(t){return t&&t.__esModule?t:{default:t}}function jK(t){return typeof t=="string"&&$K.default.test(t)}var zK=jK;Af.default=zK});var rl=ot(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.default=void 0;tl.unsafeStringify=Jk;var GK=KK(el());function KK(t){return t&&t.__esModule?t:{default:t}}var Ft=[];for(let t=0;t<256;++t)Ft.push((t+256).toString(16).slice(1));function Jk(t,e=0){return Ft[t[e+0]]+Ft[t[e+1]]+Ft[t[e+2]]+Ft[t[e+3]]+"-"+Ft[t[e+4]]+Ft[t[e+5]]+"-"+Ft[t[e+6]]+Ft[t[e+7]]+"-"+Ft[t[e+8]]+Ft[t[e+9]]+"-"+Ft[t[e+10]]+Ft[t[e+11]]+Ft[t[e+12]]+Ft[t[e+13]]+Ft[t[e+14]]+Ft[t[e+15]]}function QK(t,e=0){let r=Jk(t,e);if(!(0,GK.default)(r))throw TypeError("Stringified UUID is invalid");return r}var ZK=QK;tl.default=ZK});var tP=ot(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.default=void 0;var YK=JK(PT()),XK=rl();function JK(t){return t&&t.__esModule?t:{default:t}}var eP,MT,AT=0,DT=0;function e4(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node||eP,s=t.clockseq!==void 0?t.clockseq:MT;if(o==null||s==null){let g=t.random||(t.rng||YK.default)();o==null&&(o=eP=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),s==null&&(s=MT=(g[6]<<8|g[7])&16383)}let l=t.msecs!==void 0?t.msecs:Date.now(),u=t.nsecs!==void 0?t.nsecs:DT+1,p=l-AT+(u-DT)/1e4;if(p<0&&t.clockseq===void 0&&(s=s+1&16383),(p<0||l>AT)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");AT=l,DT=u,MT=s,l+=122192928e5;let d=((l&268435455)*1e4+u)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=d&255;let h=l/4294967296*1e4&268435455;i[n++]=h>>>8&255,i[n++]=h&255,i[n++]=h>>>24&15|16,i[n++]=h>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,XK.unsafeStringify)(i)}var t4=e4;Df.default=t4});var IT=ot(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});If.default=void 0;var r4=n4(el());function n4(t){return t&&t.__esModule?t:{default:t}}function i4(t){if(!(0,r4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var o4=i4;If.default=o4});var FT=ot(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.URL=jo.DNS=void 0;jo.default=u4;var a4=rl(),s4=c4(IT());function c4(t){return t&&t.__esModule?t:{default:t}}function l4(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var rP="6ba7b810-9dad-11d1-80b4-00c04fd430c8";jo.DNS=rP;var nP="6ba7b811-9dad-11d1-80b4-00c04fd430c8";jo.URL=nP;function u4(t,e,r){function n(i,o,s,l){var u;if(typeof i=="string"&&(i=l4(i)),typeof o=="string"&&(o=(0,s4.default)(o)),((u=o)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let p=new Uint8Array(16+i.length);if(p.set(o),p.set(i,o.length),p=r(p),p[6]=p[6]&15|e,p[8]=p[8]&63|128,s){l=l||0;for(let d=0;d<16;++d)s[l+d]=p[d];return s}return(0,a4.unsafeStringify)(p)}try{n.name=t}catch{}return n.DNS=rP,n.URL=nP,n}});var iP=ot(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});Ff.default=void 0;var p4=f4(require("crypto"));function f4(t){return t&&t.__esModule?t:{default:t}}function d4(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),p4.default.createHash("md5").update(t).digest()}var m4=d4;Ff.default=m4});var aP=ot(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});Cf.default=void 0;var h4=oP(FT()),g4=oP(iP());function oP(t){return t&&t.__esModule?t:{default:t}}var y4=(0,h4.default)("v3",48,g4.default),x4=y4;Cf.default=x4});var sP=ot(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.default=void 0;var T4=S4(require("crypto"));function S4(t){return t&&t.__esModule?t:{default:t}}var v4={randomUUID:T4.default.randomUUID};Nf.default=v4});var uP=ot(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.default=void 0;var cP=lP(sP()),b4=lP(PT()),w4=rl();function lP(t){return t&&t.__esModule?t:{default:t}}function _4(t,e,r){if(cP.default.randomUUID&&!e&&!t)return cP.default.randomUUID();t=t||{};let n=t.random||(t.rng||b4.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,w4.unsafeStringify)(n)}var E4=_4;Of.default=E4});var pP=ot(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.default=void 0;var R4=k4(require("crypto"));function k4(t){return t&&t.__esModule?t:{default:t}}function P4(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),R4.default.createHash("sha1").update(t).digest()}var M4=P4;Lf.default=M4});var dP=ot(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.default=void 0;var A4=fP(FT()),D4=fP(pP());function fP(t){return t&&t.__esModule?t:{default:t}}var I4=(0,A4.default)("v5",80,D4.default),F4=I4;Uf.default=F4});var mP=ot(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.default=void 0;var C4="00000000-0000-0000-0000-000000000000";Vf.default=C4});var hP=ot(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.default=void 0;var N4=O4(el());function O4(t){return t&&t.__esModule?t:{default:t}}function L4(t){if(!(0,N4.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var U4=L4;Bf.default=U4});var gP=ot(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});Object.defineProperty(_n,"NIL",{enumerable:!0,get:function(){return $4.default}});Object.defineProperty(_n,"parse",{enumerable:!0,get:function(){return G4.default}});Object.defineProperty(_n,"stringify",{enumerable:!0,get:function(){return z4.default}});Object.defineProperty(_n,"v1",{enumerable:!0,get:function(){return V4.default}});Object.defineProperty(_n,"v3",{enumerable:!0,get:function(){return B4.default}});Object.defineProperty(_n,"v4",{enumerable:!0,get:function(){return H4.default}});Object.defineProperty(_n,"v5",{enumerable:!0,get:function(){return W4.default}});Object.defineProperty(_n,"validate",{enumerable:!0,get:function(){return j4.default}});Object.defineProperty(_n,"version",{enumerable:!0,get:function(){return q4.default}});var V4=Si(tP()),B4=Si(aP()),H4=Si(uP()),W4=Si(dP()),$4=Si(mP()),q4=Si(hP()),j4=Si(el()),z4=Si(rl()),G4=Si(IT());function Si(t){return t&&t.__esModule?t:{default:t}}});var SP=ot((TP,Wf)=>{(function(t,e){typeof Wf=="object"&&Wf.exports?Wf.exports=e():t.nearley=e()})(TP,function(){function t(u,p,d){return this.id=++t.highestId,this.name=u,this.symbols=p,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(u){var p=typeof u>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,u).map(l).join(" ")+" \u25CF "+this.symbols.slice(u).map(l).join(" ");return this.name+" \u2192 "+p};function e(u,p,d,h){this.rule=u,this.dot=p,this.reference=d,this.data=[],this.wantedBy=h,this.isComplete=this.dot===u.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(u){var p=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return p.left=this,p.right=u,p.isComplete&&(p.data=p.build(),p.right=void 0),p},e.prototype.build=function(){var u=[],p=this;do u.push(p.right.data),p=p.left;while(p.left);return u.reverse(),u},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(u,p){this.grammar=u,this.index=p,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(u){for(var p=this.states,d=this.wants,h=this.completed,g=0;g<p.length;g++){var x=p[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var v=x.wantedBy,w=v.length;w--;){var N=v[w];this.complete(N,x)}if(x.reference===this.index){var A=x.rule.name;(this.completed[A]=this.completed[A]||[]).push(x)}}}else{var A=x.rule.symbols[x.dot];if(typeof A!="string"){this.scannable.push(x);continue}if(d[A]){if(d[A].push(x),h.hasOwnProperty(A))for(var U=h[A],w=0;w<U.length;w++){var Z=U[w];this.complete(x,Z)}}else d[A]=[x],this.predict(A)}}},r.prototype.predict=function(u){for(var p=this.grammar.byName[u]||[],d=0;d<p.length;d++){var h=p[d],g=this.wants[u],x=new e(h,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(u,p){var d=u.nextState(p);this.states.push(d)};function n(u,p){this.rules=u,this.start=p||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(h){d.hasOwnProperty(h.name)||(d[h.name]=[]),d[h.name].push(h)})}n.fromCompiled=function(h,p){var d=h.Lexer;h.ParserStart&&(p=h.ParserStart,h=h.ParserRules);var h=h.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(h,p);return g.lexer=d,g};function i(){this.reset("")}i.prototype.reset=function(u,p){this.buffer=u,this.index=0,this.line=p?p.line:1,this.lastLineBreak=p?-p.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var u=this.buffer[this.index++];return u===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:u}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(u,p){var d=this.buffer;if(typeof d=="string"){var h=d.split(`
`).slice(Math.max(0,this.line-5),this.line),g=d.indexOf(`
`,this.index);g===-1&&(g=d.length);var x=this.index-this.lastLineBreak,v=String(this.line).length;return p+=" at line "+this.line+" col "+x+`:

`,p+=h.map(function(N,A){return w(this.line-h.length+A+1,v)+" "+N},this).join(`
`),p+=`
`+w("",v+x)+`^
`,p}else return p+" at index "+(this.index-1);function w(N,A){var U=String(N);return Array(A-U.length+1).join(" ")+U}};function o(u,p,d){if(u instanceof n)var h=u,d=p;else var h=n.fromCompiled(u,p);this.grammar=h,this.options={keepHistory:!1,lexer:h.lexer||new i};for(var g in d||{})this.options[g]=d[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(h,0),v=this.table=[x];x.wants[h.start]=[],x.predict(h.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(u){var p=this.lexer;p.reset(u,this.lexerState);for(var d;;){try{if(d=p.next(),!d)break}catch(de){var v=new r(this.grammar,this.current+1);this.table.push(v);var h=new Error(this.reportLexerError(de));throw h.offset=this.current,h.token=de.token,h}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,v=new r(this.grammar,x);this.table.push(v);for(var w=d.text!==void 0?d.text:d.value,N=p.constructor===i?d.value:p.transform?.(d)??d,A=g.scannable,U=A.length;U--;){var Z=A[U],ne=Z.rule.symbols[Z.dot];if(ne.test?ne.test(N):ne.type?ne.type===d.type:ne.literal===w){var he=Z.nextState({data:N,token:d,isToken:!0,reference:x-1});v.states.push(he)}}if(v.process(),v.states.length===0){var h=new Error(this.reportError(d));throw h.offset=this.current,h.token=d,h}this.options.keepHistory&&(g.lexerState=p.save()),this.current++}return g&&(this.lexerState=p.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(u){var p,d,h=u.token;return h?(p="input "+JSON.stringify(h.text[0])+" (lexer error)",d=this.lexer.formatError(h,"Syntax error")):(p="input (lexer error)",d=u.message),this.reportErrorCommon(d,p)},o.prototype.reportError=function(u){var p=(u.type?u.type+" token: ":"")+JSON.stringify(u.value!==void 0?u.value:u),d=this.lexer.formatError(u,"Syntax error");return this.reportErrorCommon(d,p)},o.prototype.reportErrorCommon=function(u,p){var d=[];d.push(u);var h=this.table.length-2,g=this.table[h],x=g.states.filter(function(w){var N=w.rule.symbols[w.dot];return N&&typeof N!="string"});if(x.length===0)d.push("Unexpected "+p+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,d);else{d.push("Unexpected "+p+`. Instead, I was expecting to see one of the following:
`);var v=x.map(function(w){return this.buildFirstStateStack(w,[])||[w]},this);v.forEach(function(w){var N=w[0],A=N.rule.symbols[N.dot],U=this.getSymbolDisplay(A);d.push("A "+U+" based on:"),this.displayStateStack(w,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(u,p){for(var d,h=0,g=0;g<u.length;g++){var x=u[g],v=x.rule.toString(x.dot);v===d?h++:(h>0&&p.push("    ^ "+h+" more lines identical to this"),h=0,p.push("    "+v)),d=v}},o.prototype.getSymbolDisplay=function(u){return s(u)},o.prototype.buildFirstStateStack=function(u,p){if(p.indexOf(u)!==-1)return null;if(u.wantedBy.length===0)return[u];var d=u.wantedBy[0],h=[u].concat(p),g=this.buildFirstStateStack(d,h);return g===null?null:[u].concat(g)},o.prototype.save=function(){var u=this.table[this.current];return u.lexerState=this.lexerState,u},o.prototype.restore=function(u){var p=u.index;this.current=p,this.table[p]=u,this.table.splice(p+1),this.lexerState=u.lexerState,this.results=this.finish()},o.prototype.rewind=function(u){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[u])},o.prototype.finish=function(){var u=[],p=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(h){h.rule.name===p&&h.dot===h.rule.symbols.length&&h.reference===0&&h.data!==o.fail&&u.push(h)}),u.map(function(h){return h.data})};function s(u){var p=typeof u;if(p==="string")return u;if(p==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return"character matching "+u;if(u.type)return u.type+" token";if(u.test)return"token matching "+String(u.test);throw new Error("Unknown symbol type: "+u)}}function l(u){var p=typeof u;if(p==="string")return u;if(p==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return u.toString();if(u.type)return"%"+u.type;if(u.test)return"<"+String(u.test)+">";throw new Error("Unknown symbol type: "+u)}}return{Parser:o,Grammar:n,Rule:t}})});var RP=ot((EP,jf)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof jf=="object"&&jf.exports?jf.exports=e():t.moo=e()})(EP,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(O){return O&&e.call(O)==="[object RegExp]"}function i(O){return O&&typeof O=="object"&&!n(O)&&!Array.isArray(O)}function o(O){return O.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(O){var C=new RegExp("|"+O);return C.exec("").length-1}function l(O){return"("+O+")"}function u(O){if(!O.length)return"(?!)";var C=O.map(function(D){return"(?:"+D+")"}).join("|");return"(?:"+C+")"}function p(O){if(typeof O=="string")return"(?:"+o(O)+")";if(n(O)){if(O.ignoreCase)throw new Error("RegExp /i flag not allowed");if(O.global)throw new Error("RegExp /g flag is implied");if(O.sticky)throw new Error("RegExp /y flag is implied");if(O.multiline)throw new Error("RegExp /m flag is implied");return O.source}else throw new Error("Not a pattern: "+O)}function d(O,C){return O.length>C?O:Array(C-O.length+1).join(" ")+O}function h(O,C){for(var D=O.length,$=0;;){var j=O.lastIndexOf(`
`,D-1);if(j===-1||($++,D=j,$===C)||D===0)break}var K=$<C?0:D+1;return O.substring(K).split(`
`)}function g(O){for(var C=Object.getOwnPropertyNames(O),D=[],$=0;$<C.length;$++){var j=C[$],K=O[j],Q=[].concat(K);if(j==="include"){for(var te=0;te<Q.length;te++)D.push({include:Q[te]});continue}var me=[];Q.forEach(function(re){i(re)?(me.length&&D.push(v(j,me)),D.push(v(j,re)),me=[]):me.push(re)}),me.length&&D.push(v(j,me))}return D}function x(O){for(var C=[],D=0;D<O.length;D++){var $=O[D];if($.include){for(var j=[].concat($.include),K=0;K<j.length;K++)C.push({include:j[K]});continue}if(!$.type)throw new Error("Rule has no type: "+JSON.stringify($));C.push(v($.type,$))}return C}function v(O,C){if(i(C)||(C={match:C}),C.include)throw new Error("Matching rules cannot also include states");var D={defaultType:O,lineBreaks:!!C.error||!!C.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var $ in C)t.call(C,$)&&(D[$]=C[$]);if(typeof D.type=="string"&&O!==D.type)throw new Error("Type transform cannot be a string (type '"+D.type+"' for token '"+O+"')");var j=D.match;return D.match=Array.isArray(j)?j:j?[j]:[],D.match.sort(function(K,Q){return n(K)&&n(Q)?0:n(Q)?-1:n(K)?1:Q.length-K.length}),D}function w(O){return Array.isArray(O)?x(O):g(O)}var N=v("error",{lineBreaks:!0,shouldThrow:!0});function A(O,C){for(var D=null,$=Object.create(null),j=!0,K=null,Q=[],te=[],me=0;me<O.length;me++)O[me].fallback&&(j=!1);for(var me=0;me<O.length;me++){var re=O[me];if(re.include)throw new Error("Inheritance is not allowed in stateless lexers");if(re.error||re.fallback){if(D)throw!re.fallback==!D.fallback?new Error("Multiple "+(re.fallback?"fallback":"error")+" rules not allowed (for token '"+re.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+re.defaultType+"')");D=re}var Re=re.match.slice();if(j)for(;Re.length&&typeof Re[0]=="string"&&Re[0].length===1;){var or=Re.shift();$[or.charCodeAt(0)]=re}if(re.pop||re.push||re.next){if(!C)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+re.defaultType+"')");if(re.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+re.defaultType+"')")}if(Re.length!==0){j=!1,Q.push(re);for(var ri=0;ri<Re.length;ri++){var ar=Re[ri];if(n(ar)){if(K===null)K=ar.unicode;else if(K!==ar.unicode&&re.fallback===!1)throw new Error("If one rule is /u then all must be")}}var mn=u(Re.map(p)),wr=new RegExp(mn);if(wr.test(""))throw new Error("RegExp matches empty string: "+wr);var hn=s(mn);if(hn>0)throw new Error("RegExp has capture groups: "+wr+`
Use (?: \u2026 ) instead`);if(!re.lineBreaks&&wr.test(`
`))throw new Error("Rule should declare lineBreaks: "+wr);te.push(l(mn))}}var $r=D&&D.fallback,wo=r&&!$r?"ym":"gm",ni=r||$r?"":"|";K===!0&&(wo+="u");var ha=new RegExp(u(te)+ni,wo);return{regexp:ha,groups:Q,fast:$,error:D||N}}function U(O){var C=A(w(O));return new de({start:C},"start")}function Z(O,C,D){var $=O&&(O.push||O.next);if($&&!D[$])throw new Error("Missing state '"+$+"' (in token '"+O.defaultType+"' of state '"+C+"')");if(O&&O.pop&&+O.pop!=1)throw new Error("pop must be 1 (in token '"+O.defaultType+"' of state '"+C+"')")}function ne(O,C){var D=O.$all?w(O.$all):[];delete O.$all;var $=Object.getOwnPropertyNames(O);C||(C=$[0]);for(var j=Object.create(null),K=0;K<$.length;K++){var Q=$[K];j[Q]=w(O[Q]).concat(D)}for(var K=0;K<$.length;K++)for(var Q=$[K],te=j[Q],me=Object.create(null),re=0;re<te.length;re++){var Re=te[re];if(Re.include){var or=[re,1];if(Re.include!==Q&&!me[Re.include]){me[Re.include]=!0;var ri=j[Re.include];if(!ri)throw new Error("Cannot include nonexistent state '"+Re.include+"' (in state '"+Q+"')");for(var ar=0;ar<ri.length;ar++){var mn=ri[ar];te.indexOf(mn)===-1&&or.push(mn)}}te.splice.apply(te,or),re--}}for(var wr=Object.create(null),K=0;K<$.length;K++){var Q=$[K];wr[Q]=A(j[Q],!0)}for(var K=0;K<$.length;K++){for(var hn=$[K],$r=wr[hn],wo=$r.groups,re=0;re<wo.length;re++)Z(wo[re],hn,wr);for(var ni=Object.getOwnPropertyNames($r.fast),re=0;re<ni.length;re++)Z($r.fast[ni[re]],hn,wr)}return new de(wr,C)}function he(O){for(var C=typeof Map<"u",D=C?new Map:Object.create(null),$=Object.getOwnPropertyNames(O),j=0;j<$.length;j++){var K=$[j],Q=O[K],te=Array.isArray(Q)?Q:[Q];te.forEach(function(me){if(typeof me!="string")throw new Error("keyword must be string (in keyword '"+K+"')");C?D.set(me,K):D[me]=K})}return function(me){return C?D.get(me):D[me]}}var de=function(O,C){this.startState=C,this.states=O,this.buffer="",this.stack=[],this.reset()};de.prototype.reset=function(O,C){return this.buffer=O||"",this.index=0,this.line=C?C.line:1,this.col=C?C.col:1,this.queuedToken=C?C.queuedToken:null,this.queuedText=C?C.queuedText:"",this.queuedThrow=C?C.queuedThrow:null,this.setState(C?C.state:this.startState),this.stack=C&&C.stack?C.stack.slice():[],this},de.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},de.prototype.setState=function(O){if(!(!O||this.state===O)){this.state=O;var C=this.states[O];this.groups=C.groups,this.error=C.error,this.re=C.regexp,this.fast=C.fast}},de.prototype.popState=function(){this.setState(this.stack.pop())},de.prototype.pushState=function(O){this.stack.push(this.state),this.setState(O)};var dt=r?function(O,C){return O.exec(C)}:function(O,C){var D=O.exec(C);return D[0].length===0?null:D};de.prototype._getGroup=function(O){for(var C=this.groups.length,D=0;D<C;D++)if(O[D+1]!==void 0)return this.groups[D];throw new Error("Cannot find token type for matched text")};function At(){return this.value}if(de.prototype.next=function(){var O=this.index;if(this.queuedGroup){var C=this._token(this.queuedGroup,this.queuedText,O);return this.queuedGroup=null,this.queuedText="",C}var D=this.buffer;if(O!==D.length){var Q=this.fast[D.charCodeAt(O)];if(Q)return this._token(Q,D.charAt(O),O);var $=this.re;$.lastIndex=O;var j=dt($,D),K=this.error;if(j==null)return this._token(K,D.slice(O,D.length),O);var Q=this._getGroup(j),te=j[0];return K.fallback&&j.index!==O?(this.queuedGroup=Q,this.queuedText=te,this._token(K,D.slice(O,j.index),O)):this._token(Q,te,O)}},de.prototype._token=function(O,C,D){var $=0;if(O.lineBreaks){var j=/\n/g,K=1;if(C===`
`)$=1;else for(;j.exec(C);)$++,K=j.lastIndex}var Q={type:typeof O.type=="function"&&O.type(C)||O.defaultType,value:typeof O.value=="function"?O.value(C):C,text:C,toString:At,offset:D,lineBreaks:$,line:this.line,col:this.col},te=C.length;if(this.index+=te,this.line+=$,$!==0?this.col=te-K+1:this.col+=te,O.shouldThrow){var me=new Error(this.formatError(Q,"invalid syntax"));throw me}return O.pop?this.popState():O.push?this.pushState(O.push):O.next&&this.setState(O.next),Q},typeof Symbol<"u"&&Symbol.iterator){var nt=function(O){this.lexer=O};nt.prototype.next=function(){var O=this.lexer.next();return{value:O,done:!O}},nt.prototype[Symbol.iterator]=function(){return this},de.prototype[Symbol.iterator]=function(){return new nt(this)}}return de.prototype.formatError=function(O,C){if(O==null)var D=this.buffer.slice(this.index),O={text:D,offset:this.index,lineBreaks:D.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var $=2,j=Math.max(O.line-$,1),K=O.line+$,Q=String(K).length,te=h(this.buffer,this.line-O.line+$+1).slice(0,5),me=[];me.push(C+" at line "+O.line+" col "+O.col+":"),me.push("");for(var re=0;re<te.length;re++){var Re=te[re],or=j+re;me.push(d(String(or),Q)+"  "+Re),or===O.line&&me.push(d("",Q+O.col+1)+"^")}return me.join(`
`)},de.prototype.clone=function(){return new de(this.states,this.state)},de.prototype.has=function(O){return!0},{compile:U,states:ne,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:he}})});var ll=ot((Gn,yM)=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});function En(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var u5=typeof process=="object"&&process.env.NODE_ENV==="production";function on(t,e){if(!t)throw u5?new Error("Invariant failed"):new Error(e())}Gn.invariant=on;var eS=Object.prototype.hasOwnProperty,p5=Array.prototype.splice,f5=Object.prototype.toString;function Go(t){return f5.call(t).slice(8,-1)}var wd=Object.assign||function(t,e){return tS(e).forEach(function(r){eS.call(e,r)&&(t[r]=e[r])}),t},tS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function ao(t){return Array.isArray(t)?wd(t.constructor(t.length),t):Go(t)==="Map"?new Map(t):Go(t)==="Set"?new Set(t):t&&typeof t=="object"?wd(Object.create(Object.getPrototypeOf(t)),t):t}var hM=function(){function t(){this.commands=wd({},d5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||on(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),on(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return tS(i).forEach(function(s){if(eS.call(n.commands,s)){var l=e===o;o=n.commands[s](i[s],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var u=Go(e)==="Map"?n.update(e.get(s),i[s]):n.update(e[s],i[s]),p=Go(o)==="Map"?o.get(s):o[s];(!n.isEquals(u,p)||typeof u>"u"&&!eS.call(e,s))&&(o===e&&(o=ao(e)),Go(o)==="Map"?o.set(s,u):o[s]=u)}}),o},t}();Gn.Context=hM;var d5={$push:function(t,e,r){return dM(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return dM(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return m5(e,r),t.forEach(function(i){gM(i),e===n&&i.length&&(e=ao(n)),p5.apply(e,i)}),e},$set:function(t,e,r){return g5(r),t},$toggle:function(t,e){cl(t,"$toggle");var r=t.length?ao(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return cl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=ao(n)),delete e[i])}),e},$add:function(t,e,r,n){return mM(e,"$add"),cl(t,"$add"),Go(e)==="Map"?t.forEach(function(i){var o=i[0],s=i[1];e===n&&e.get(o)!==s&&(e=ao(n)),e.set(o,s)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=ao(n)),e.add(i)}),e},$remove:function(t,e,r,n){return mM(e,"$remove"),cl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=ao(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return y5(e,t),tS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=ao(n)),e[i]=t[i])}),e},$apply:function(t,e){return h5(t),t(e)}},rS=new hM;Gn.isEquals=rS.update.isEquals;Gn.extend=rS.extend;Gn.default=rS.update;Gn.default.default=yM.exports=wd(Gn.default,Gn);function dM(t,e,r){on(Array.isArray(t),function(){return"update(): expected target of "+En(r)+" to be an array; got "+En(t)+"."}),cl(e[r],r)}function cl(t,e){on(Array.isArray(t),function(){return"update(): expected spec of "+En(e)+" to be an array; got "+En(t)+". Did you forget to wrap your parameter in an array?"})}function m5(t,e){on(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+En(t)}),gM(e.$splice)}function gM(t){on(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+En(t)+". Did you forget to wrap your parameters in an array?"})}function h5(t){on(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+En(t)+"."})}function g5(t){on(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function y5(t,e){on(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+En(e)}),on(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+En(t)})}function mM(t,e){var r=Go(t);on(r==="Map"||r==="Set",function(){return"update(): "+En(e)+" expects a target of type Set or Map; got "+En(r)})}});var sv=ot((qs,Ql)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",p=1,d=2,h=4,g=1,x=2,v=1,w=2,N=4,A=8,U=16,Z=32,ne=64,he=128,de=256,dt=512,At=30,nt="...",O=800,C=16,D=1,$=2,j=3,K=1/0,Q=9007199254740991,te=17976931348623157e292,me=NaN,re=4294967295,Re=re-1,or=re>>>1,ri=[["ary",he],["bind",v],["bindKey",w],["curry",A],["curryRight",U],["flip",dt],["partial",Z],["partialRight",ne],["rearg",de]],ar="[object Arguments]",mn="[object Array]",wr="[object AsyncFunction]",hn="[object Boolean]",$r="[object Date]",wo="[object DOMException]",ni="[object Error]",ha="[object Function]",Ab="[object GeneratorFunction]",gn="[object Map]",oc="[object Number]",RF="[object Null]",ii="[object Object]",Db="[object Promise]",kF="[object Proxy]",ac="[object RegExp]",yn="[object Set]",sc="[object String]",Eu="[object Symbol]",PF="[object Undefined]",cc="[object WeakMap]",MF="[object WeakSet]",lc="[object ArrayBuffer]",ga="[object DataView]",ay="[object Float32Array]",sy="[object Float64Array]",cy="[object Int8Array]",ly="[object Int16Array]",uy="[object Int32Array]",py="[object Uint8Array]",fy="[object Uint8ClampedArray]",dy="[object Uint16Array]",my="[object Uint32Array]",AF=/\b__p \+= '';/g,DF=/\b(__p \+=) '' \+/g,IF=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ib=/&(?:amp|lt|gt|quot|#39);/g,Fb=/[&<>"']/g,FF=RegExp(Ib.source),CF=RegExp(Fb.source),NF=/<%-([\s\S]+?)%>/g,OF=/<%([\s\S]+?)%>/g,Cb=/<%=([\s\S]+?)%>/g,LF=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,UF=/^\w*$/,VF=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hy=/[\\^$.*+?()[\]{}|]/g,BF=RegExp(hy.source),gy=/^\s+/,HF=/\s/,WF=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$F=/\{\n\/\* \[wrapped with (.+)\] \*/,qF=/,? & /,jF=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zF=/[()=,{}\[\]\/\s]/,GF=/\\(\\)?/g,KF=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Nb=/\w*$/,QF=/^[-+]0x[0-9a-f]+$/i,ZF=/^0b[01]+$/i,YF=/^\[object .+?Constructor\]$/,XF=/^0o[0-7]+$/i,JF=/^(?:0|[1-9]\d*)$/,eC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ru=/($^)/,tC=/['\n\r\u2028\u2029\\]/g,ku="\\ud800-\\udfff",rC="\\u0300-\\u036f",nC="\\ufe20-\\ufe2f",iC="\\u20d0-\\u20ff",Ob=rC+nC+iC,Lb="\\u2700-\\u27bf",Ub="a-z\\xdf-\\xf6\\xf8-\\xff",oC="\\xac\\xb1\\xd7\\xf7",aC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",sC="\\u2000-\\u206f",cC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vb="A-Z\\xc0-\\xd6\\xd8-\\xde",Bb="\\ufe0e\\ufe0f",Hb=oC+aC+sC+cC,yy="['\u2019]",lC="["+ku+"]",Wb="["+Hb+"]",Pu="["+Ob+"]",$b="\\d+",uC="["+Lb+"]",qb="["+Ub+"]",jb="[^"+ku+Hb+$b+Lb+Ub+Vb+"]",xy="\\ud83c[\\udffb-\\udfff]",pC="(?:"+Pu+"|"+xy+")",zb="[^"+ku+"]",Ty="(?:\\ud83c[\\udde6-\\uddff]){2}",Sy="[\\ud800-\\udbff][\\udc00-\\udfff]",ya="["+Vb+"]",Gb="\\u200d",Kb="(?:"+qb+"|"+jb+")",fC="(?:"+ya+"|"+jb+")",Qb="(?:"+yy+"(?:d|ll|m|re|s|t|ve))?",Zb="(?:"+yy+"(?:D|LL|M|RE|S|T|VE))?",Yb=pC+"?",Xb="["+Bb+"]?",dC="(?:"+Gb+"(?:"+[zb,Ty,Sy].join("|")+")"+Xb+Yb+")*",mC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",hC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Jb=Xb+Yb+dC,gC="(?:"+[uC,Ty,Sy].join("|")+")"+Jb,yC="(?:"+[zb+Pu+"?",Pu,Ty,Sy,lC].join("|")+")",xC=RegExp(yy,"g"),TC=RegExp(Pu,"g"),vy=RegExp(xy+"(?="+xy+")|"+yC+Jb,"g"),SC=RegExp([ya+"?"+qb+"+"+Qb+"(?="+[Wb,ya,"$"].join("|")+")",fC+"+"+Zb+"(?="+[Wb,ya+Kb,"$"].join("|")+")",ya+"?"+Kb+"+"+Qb,ya+"+"+Zb,hC,mC,$b,gC].join("|"),"g"),vC=RegExp("["+Gb+ku+Ob+Bb+"]"),bC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_C=-1,Ze={};Ze[ay]=Ze[sy]=Ze[cy]=Ze[ly]=Ze[uy]=Ze[py]=Ze[fy]=Ze[dy]=Ze[my]=!0,Ze[ar]=Ze[mn]=Ze[lc]=Ze[hn]=Ze[ga]=Ze[$r]=Ze[ni]=Ze[ha]=Ze[gn]=Ze[oc]=Ze[ii]=Ze[ac]=Ze[yn]=Ze[sc]=Ze[cc]=!1;var Ke={};Ke[ar]=Ke[mn]=Ke[lc]=Ke[ga]=Ke[hn]=Ke[$r]=Ke[ay]=Ke[sy]=Ke[cy]=Ke[ly]=Ke[uy]=Ke[gn]=Ke[oc]=Ke[ii]=Ke[ac]=Ke[yn]=Ke[sc]=Ke[Eu]=Ke[py]=Ke[fy]=Ke[dy]=Ke[my]=!0,Ke[ni]=Ke[ha]=Ke[cc]=!1;var EC={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},RC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},PC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},MC=parseFloat,AC=parseInt,ew=typeof global=="object"&&global&&global.Object===Object&&global,DC=typeof self=="object"&&self&&self.Object===Object&&self,bt=ew||DC||Function("return this")(),by=typeof qs=="object"&&qs&&!qs.nodeType&&qs,_o=by&&typeof Ql=="object"&&Ql&&!Ql.nodeType&&Ql,tw=_o&&_o.exports===by,wy=tw&&ew.process,qr=function(){try{var k=_o&&_o.require&&_o.require("util").types;return k||wy&&wy.binding&&wy.binding("util")}catch{}}(),rw=qr&&qr.isArrayBuffer,nw=qr&&qr.isDate,iw=qr&&qr.isMap,ow=qr&&qr.isRegExp,aw=qr&&qr.isSet,sw=qr&&qr.isTypedArray;function _r(k,V,L){switch(L.length){case 0:return k.call(V);case 1:return k.call(V,L[0]);case 2:return k.call(V,L[0],L[1]);case 3:return k.call(V,L[0],L[1],L[2])}return k.apply(V,L)}function IC(k,V,L,J){for(var ge=-1,Le=k==null?0:k.length;++ge<Le;){var yt=k[ge];V(J,yt,L(yt),k)}return J}function jr(k,V){for(var L=-1,J=k==null?0:k.length;++L<J&&V(k[L],L,k)!==!1;);return k}function FC(k,V){for(var L=k==null?0:k.length;L--&&V(k[L],L,k)!==!1;);return k}function cw(k,V){for(var L=-1,J=k==null?0:k.length;++L<J;)if(!V(k[L],L,k))return!1;return!0}function Ii(k,V){for(var L=-1,J=k==null?0:k.length,ge=0,Le=[];++L<J;){var yt=k[L];V(yt,L,k)&&(Le[ge++]=yt)}return Le}function Mu(k,V){var L=k==null?0:k.length;return!!L&&xa(k,V,0)>-1}function _y(k,V,L){for(var J=-1,ge=k==null?0:k.length;++J<ge;)if(L(V,k[J]))return!0;return!1}function Xe(k,V){for(var L=-1,J=k==null?0:k.length,ge=Array(J);++L<J;)ge[L]=V(k[L],L,k);return ge}function Fi(k,V){for(var L=-1,J=V.length,ge=k.length;++L<J;)k[ge+L]=V[L];return k}function Ey(k,V,L,J){var ge=-1,Le=k==null?0:k.length;for(J&&Le&&(L=k[++ge]);++ge<Le;)L=V(L,k[ge],ge,k);return L}function CC(k,V,L,J){var ge=k==null?0:k.length;for(J&&ge&&(L=k[--ge]);ge--;)L=V(L,k[ge],ge,k);return L}function Ry(k,V){for(var L=-1,J=k==null?0:k.length;++L<J;)if(V(k[L],L,k))return!0;return!1}var NC=ky("length");function OC(k){return k.split("")}function LC(k){return k.match(jF)||[]}function lw(k,V,L){var J;return L(k,function(ge,Le,yt){if(V(ge,Le,yt))return J=Le,!1}),J}function Au(k,V,L,J){for(var ge=k.length,Le=L+(J?1:-1);J?Le--:++Le<ge;)if(V(k[Le],Le,k))return Le;return-1}function xa(k,V,L){return V===V?QC(k,V,L):Au(k,uw,L)}function UC(k,V,L,J){for(var ge=L-1,Le=k.length;++ge<Le;)if(J(k[ge],V))return ge;return-1}function uw(k){return k!==k}function pw(k,V){var L=k==null?0:k.length;return L?My(k,V)/L:me}function ky(k){return function(V){return V==null?t:V[k]}}function Py(k){return function(V){return k==null?t:k[V]}}function fw(k,V,L,J,ge){return ge(k,function(Le,yt,ze){L=J?(J=!1,Le):V(L,Le,yt,ze)}),L}function VC(k,V){var L=k.length;for(k.sort(V);L--;)k[L]=k[L].value;return k}function My(k,V){for(var L,J=-1,ge=k.length;++J<ge;){var Le=V(k[J]);Le!==t&&(L=L===t?Le:L+Le)}return L}function Ay(k,V){for(var L=-1,J=Array(k);++L<k;)J[L]=V(L);return J}function BC(k,V){return Xe(V,function(L){return[L,k[L]]})}function dw(k){return k&&k.slice(0,yw(k)+1).replace(gy,"")}function Er(k){return function(V){return k(V)}}function Dy(k,V){return Xe(V,function(L){return k[L]})}function uc(k,V){return k.has(V)}function mw(k,V){for(var L=-1,J=k.length;++L<J&&xa(V,k[L],0)>-1;);return L}function hw(k,V){for(var L=k.length;L--&&xa(V,k[L],0)>-1;);return L}function HC(k,V){for(var L=k.length,J=0;L--;)k[L]===V&&++J;return J}var WC=Py(EC),$C=Py(RC);function qC(k){return"\\"+PC[k]}function jC(k,V){return k==null?t:k[V]}function Ta(k){return vC.test(k)}function zC(k){return bC.test(k)}function GC(k){for(var V,L=[];!(V=k.next()).done;)L.push(V.value);return L}function Iy(k){var V=-1,L=Array(k.size);return k.forEach(function(J,ge){L[++V]=[ge,J]}),L}function gw(k,V){return function(L){return k(V(L))}}function Ci(k,V){for(var L=-1,J=k.length,ge=0,Le=[];++L<J;){var yt=k[L];(yt===V||yt===u)&&(k[L]=u,Le[ge++]=L)}return Le}function Du(k){var V=-1,L=Array(k.size);return k.forEach(function(J){L[++V]=J}),L}function KC(k){var V=-1,L=Array(k.size);return k.forEach(function(J){L[++V]=[J,J]}),L}function QC(k,V,L){for(var J=L-1,ge=k.length;++J<ge;)if(k[J]===V)return J;return-1}function ZC(k,V,L){for(var J=L+1;J--;)if(k[J]===V)return J;return J}function Sa(k){return Ta(k)?XC(k):NC(k)}function xn(k){return Ta(k)?JC(k):OC(k)}function yw(k){for(var V=k.length;V--&&HF.test(k.charAt(V)););return V}var YC=Py(kC);function XC(k){for(var V=vy.lastIndex=0;vy.test(k);)++V;return V}function JC(k){return k.match(vy)||[]}function eN(k){return k.match(SC)||[]}var tN=function k(V){V=V==null?bt:Ni.defaults(bt.Object(),V,Ni.pick(bt,wC));var L=V.Array,J=V.Date,ge=V.Error,Le=V.Function,yt=V.Math,ze=V.Object,Fy=V.RegExp,rN=V.String,zr=V.TypeError,Iu=L.prototype,nN=Le.prototype,va=ze.prototype,Fu=V["__core-js_shared__"],Cu=nN.toString,$e=va.hasOwnProperty,iN=0,xw=function(){var a=/[^.]+$/.exec(Fu&&Fu.keys&&Fu.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Nu=va.toString,oN=Cu.call(ze),aN=bt._,sN=Fy("^"+Cu.call($e).replace(hy,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ou=tw?V.Buffer:t,Oi=V.Symbol,Lu=V.Uint8Array,Tw=Ou?Ou.allocUnsafe:t,Uu=gw(ze.getPrototypeOf,ze),Sw=ze.create,vw=va.propertyIsEnumerable,Vu=Iu.splice,bw=Oi?Oi.isConcatSpreadable:t,pc=Oi?Oi.iterator:t,Eo=Oi?Oi.toStringTag:t,Bu=function(){try{var a=Ao(ze,"defineProperty");return a({},"",{}),a}catch{}}(),cN=V.clearTimeout!==bt.clearTimeout&&V.clearTimeout,lN=J&&J.now!==bt.Date.now&&J.now,uN=V.setTimeout!==bt.setTimeout&&V.setTimeout,Hu=yt.ceil,Wu=yt.floor,Cy=ze.getOwnPropertySymbols,pN=Ou?Ou.isBuffer:t,ww=V.isFinite,fN=Iu.join,dN=gw(ze.keys,ze),xt=yt.max,Lt=yt.min,mN=J.now,hN=V.parseInt,_w=yt.random,gN=Iu.reverse,Ny=Ao(V,"DataView"),fc=Ao(V,"Map"),Oy=Ao(V,"Promise"),ba=Ao(V,"Set"),dc=Ao(V,"WeakMap"),mc=Ao(ze,"create"),$u=dc&&new dc,wa={},yN=Do(Ny),xN=Do(fc),TN=Do(Oy),SN=Do(ba),vN=Do(dc),qu=Oi?Oi.prototype:t,hc=qu?qu.valueOf:t,Ew=qu?qu.toString:t;function T(a){if(it(a)&&!xe(a)&&!(a instanceof Ae)){if(a instanceof Gr)return a;if($e.call(a,"__wrapped__"))return R_(a)}return new Gr(a)}var _a=function(){function a(){}return function(c){if(!et(c))return{};if(Sw)return Sw(c);a.prototype=c;var f=new a;return a.prototype=t,f}}();function ju(){}function Gr(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:NF,evaluate:OF,interpolate:Cb,variable:"",imports:{_:T}},T.prototype=ju.prototype,T.prototype.constructor=T,Gr.prototype=_a(ju.prototype),Gr.prototype.constructor=Gr;function Ae(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function bN(){var a=new Ae(this.__wrapped__);return a.__actions__=sr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=sr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=sr(this.__views__),a}function wN(){if(this.__filtered__){var a=new Ae(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function _N(){var a=this.__wrapped__.value(),c=this.__dir__,f=xe(a),m=c<0,y=f?a.length:0,S=OO(0,y,this.__views__),E=S.start,R=S.end,M=R-E,B=m?R:E-1,H=this.__iteratees__,q=H.length,Y=0,ie=Lt(M,this.__takeCount__);if(!f||!m&&y==M&&ie==M)return Qw(a,this.__actions__);var ue=[];e:for(;M--&&Y<ie;){B+=c;for(var Ee=-1,pe=a[B];++Ee<q;){var Pe=H[Ee],Ie=Pe.iteratee,Pr=Pe.type,Qt=Ie(pe);if(Pr==$)pe=Qt;else if(!Qt){if(Pr==D)continue e;break e}}ue[Y++]=pe}return ue}Ae.prototype=_a(ju.prototype),Ae.prototype.constructor=Ae;function Ro(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var m=a[c];this.set(m[0],m[1])}}function EN(){this.__data__=mc?mc(null):{},this.size=0}function RN(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function kN(a){var c=this.__data__;if(mc){var f=c[a];return f===s?t:f}return $e.call(c,a)?c[a]:t}function PN(a){var c=this.__data__;return mc?c[a]!==t:$e.call(c,a)}function MN(a,c){var f=this.__data__;return this.size+=this.has(a)?0:1,f[a]=mc&&c===t?s:c,this}Ro.prototype.clear=EN,Ro.prototype.delete=RN,Ro.prototype.get=kN,Ro.prototype.has=PN,Ro.prototype.set=MN;function oi(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var m=a[c];this.set(m[0],m[1])}}function AN(){this.__data__=[],this.size=0}function DN(a){var c=this.__data__,f=zu(c,a);if(f<0)return!1;var m=c.length-1;return f==m?c.pop():Vu.call(c,f,1),--this.size,!0}function IN(a){var c=this.__data__,f=zu(c,a);return f<0?t:c[f][1]}function FN(a){return zu(this.__data__,a)>-1}function CN(a,c){var f=this.__data__,m=zu(f,a);return m<0?(++this.size,f.push([a,c])):f[m][1]=c,this}oi.prototype.clear=AN,oi.prototype.delete=DN,oi.prototype.get=IN,oi.prototype.has=FN,oi.prototype.set=CN;function ai(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var m=a[c];this.set(m[0],m[1])}}function NN(){this.size=0,this.__data__={hash:new Ro,map:new(fc||oi),string:new Ro}}function ON(a){var c=ip(this,a).delete(a);return this.size-=c?1:0,c}function LN(a){return ip(this,a).get(a)}function UN(a){return ip(this,a).has(a)}function VN(a,c){var f=ip(this,a),m=f.size;return f.set(a,c),this.size+=f.size==m?0:1,this}ai.prototype.clear=NN,ai.prototype.delete=ON,ai.prototype.get=LN,ai.prototype.has=UN,ai.prototype.set=VN;function ko(a){var c=-1,f=a==null?0:a.length;for(this.__data__=new ai;++c<f;)this.add(a[c])}function BN(a){return this.__data__.set(a,s),this}function HN(a){return this.__data__.has(a)}ko.prototype.add=ko.prototype.push=BN,ko.prototype.has=HN;function Tn(a){var c=this.__data__=new oi(a);this.size=c.size}function WN(){this.__data__=new oi,this.size=0}function $N(a){var c=this.__data__,f=c.delete(a);return this.size=c.size,f}function qN(a){return this.__data__.get(a)}function jN(a){return this.__data__.has(a)}function zN(a,c){var f=this.__data__;if(f instanceof oi){var m=f.__data__;if(!fc||m.length<r-1)return m.push([a,c]),this.size=++f.size,this;f=this.__data__=new ai(m)}return f.set(a,c),this.size=f.size,this}Tn.prototype.clear=WN,Tn.prototype.delete=$N,Tn.prototype.get=qN,Tn.prototype.has=jN,Tn.prototype.set=zN;function Rw(a,c){var f=xe(a),m=!f&&Io(a),y=!f&&!m&&Hi(a),S=!f&&!m&&!y&&Pa(a),E=f||m||y||S,R=E?Ay(a.length,rN):[],M=R.length;for(var B in a)(c||$e.call(a,B))&&!(E&&(B=="length"||y&&(B=="offset"||B=="parent")||S&&(B=="buffer"||B=="byteLength"||B=="byteOffset")||ui(B,M)))&&R.push(B);return R}function kw(a){var c=a.length;return c?a[Gy(0,c-1)]:t}function GN(a,c){return op(sr(a),Po(c,0,a.length))}function KN(a){return op(sr(a))}function Ly(a,c,f){(f!==t&&!Sn(a[c],f)||f===t&&!(c in a))&&si(a,c,f)}function gc(a,c,f){var m=a[c];(!($e.call(a,c)&&Sn(m,f))||f===t&&!(c in a))&&si(a,c,f)}function zu(a,c){for(var f=a.length;f--;)if(Sn(a[f][0],c))return f;return-1}function QN(a,c,f,m){return Li(a,function(y,S,E){c(m,y,f(y),E)}),m}function Pw(a,c){return a&&Ln(c,wt(c),a)}function ZN(a,c){return a&&Ln(c,lr(c),a)}function si(a,c,f){c=="__proto__"&&Bu?Bu(a,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):a[c]=f}function Uy(a,c){for(var f=-1,m=c.length,y=L(m),S=a==null;++f<m;)y[f]=S?t:xx(a,c[f]);return y}function Po(a,c,f){return a===a&&(f!==t&&(a=a<=f?a:f),c!==t&&(a=a>=c?a:c)),a}function Kr(a,c,f,m,y,S){var E,R=c&p,M=c&d,B=c&h;if(f&&(E=y?f(a,m,y,S):f(a)),E!==t)return E;if(!et(a))return a;var H=xe(a);if(H){if(E=UO(a),!R)return sr(a,E)}else{var q=Ut(a),Y=q==ha||q==Ab;if(Hi(a))return Xw(a,R);if(q==ii||q==ar||Y&&!y){if(E=M||Y?{}:y_(a),!R)return M?kO(a,ZN(E,a)):RO(a,Pw(E,a))}else{if(!Ke[q])return y?a:{};E=VO(a,q,R)}}S||(S=new Tn);var ie=S.get(a);if(ie)return ie;S.set(a,E),z_(a)?a.forEach(function(pe){E.add(Kr(pe,c,f,pe,a,S))}):q_(a)&&a.forEach(function(pe,Pe){E.set(Pe,Kr(pe,c,f,Pe,a,S))});var ue=B?M?ix:nx:M?lr:wt,Ee=H?t:ue(a);return jr(Ee||a,function(pe,Pe){Ee&&(Pe=pe,pe=a[Pe]),gc(E,Pe,Kr(pe,c,f,Pe,a,S))}),E}function YN(a){var c=wt(a);return function(f){return Mw(f,a,c)}}function Mw(a,c,f){var m=f.length;if(a==null)return!m;for(a=ze(a);m--;){var y=f[m],S=c[y],E=a[y];if(E===t&&!(y in a)||!S(E))return!1}return!0}function Aw(a,c,f){if(typeof a!="function")throw new zr(i);return wc(function(){a.apply(t,f)},c)}function yc(a,c,f,m){var y=-1,S=Mu,E=!0,R=a.length,M=[],B=c.length;if(!R)return M;f&&(c=Xe(c,Er(f))),m?(S=_y,E=!1):c.length>=r&&(S=uc,E=!1,c=new ko(c));e:for(;++y<R;){var H=a[y],q=f==null?H:f(H);if(H=m||H!==0?H:0,E&&q===q){for(var Y=B;Y--;)if(c[Y]===q)continue e;M.push(H)}else S(c,q,m)||M.push(H)}return M}var Li=n_(On),Dw=n_(By,!0);function XN(a,c){var f=!0;return Li(a,function(m,y,S){return f=!!c(m,y,S),f}),f}function Gu(a,c,f){for(var m=-1,y=a.length;++m<y;){var S=a[m],E=c(S);if(E!=null&&(R===t?E===E&&!kr(E):f(E,R)))var R=E,M=S}return M}function JN(a,c,f,m){var y=a.length;for(f=be(f),f<0&&(f=-f>y?0:y+f),m=m===t||m>y?y:be(m),m<0&&(m+=y),m=f>m?0:K_(m);f<m;)a[f++]=c;return a}function Iw(a,c){var f=[];return Li(a,function(m,y,S){c(m,y,S)&&f.push(m)}),f}function Dt(a,c,f,m,y){var S=-1,E=a.length;for(f||(f=HO),y||(y=[]);++S<E;){var R=a[S];c>0&&f(R)?c>1?Dt(R,c-1,f,m,y):Fi(y,R):m||(y[y.length]=R)}return y}var Vy=i_(),Fw=i_(!0);function On(a,c){return a&&Vy(a,c,wt)}function By(a,c){return a&&Fw(a,c,wt)}function Ku(a,c){return Ii(c,function(f){return pi(a[f])})}function Mo(a,c){c=Vi(c,a);for(var f=0,m=c.length;a!=null&&f<m;)a=a[Un(c[f++])];return f&&f==m?a:t}function Cw(a,c,f){var m=c(a);return xe(a)?m:Fi(m,f(a))}function Gt(a){return a==null?a===t?PF:RF:Eo&&Eo in ze(a)?NO(a):KO(a)}function Hy(a,c){return a>c}function eO(a,c){return a!=null&&$e.call(a,c)}function tO(a,c){return a!=null&&c in ze(a)}function rO(a,c,f){return a>=Lt(c,f)&&a<xt(c,f)}function Wy(a,c,f){for(var m=f?_y:Mu,y=a[0].length,S=a.length,E=S,R=L(S),M=1/0,B=[];E--;){var H=a[E];E&&c&&(H=Xe(H,Er(c))),M=Lt(H.length,M),R[E]=!f&&(c||y>=120&&H.length>=120)?new ko(E&&H):t}H=a[0];var q=-1,Y=R[0];e:for(;++q<y&&B.length<M;){var ie=H[q],ue=c?c(ie):ie;if(ie=f||ie!==0?ie:0,!(Y?uc(Y,ue):m(B,ue,f))){for(E=S;--E;){var Ee=R[E];if(!(Ee?uc(Ee,ue):m(a[E],ue,f)))continue e}Y&&Y.push(ue),B.push(ie)}}return B}function nO(a,c,f,m){return On(a,function(y,S,E){c(m,f(y),S,E)}),m}function xc(a,c,f){c=Vi(c,a),a=v_(a,c);var m=a==null?a:a[Un(Zr(c))];return m==null?t:_r(m,a,f)}function Nw(a){return it(a)&&Gt(a)==ar}function iO(a){return it(a)&&Gt(a)==lc}function oO(a){return it(a)&&Gt(a)==$r}function Tc(a,c,f,m,y){return a===c?!0:a==null||c==null||!it(a)&&!it(c)?a!==a&&c!==c:aO(a,c,f,m,Tc,y)}function aO(a,c,f,m,y,S){var E=xe(a),R=xe(c),M=E?mn:Ut(a),B=R?mn:Ut(c);M=M==ar?ii:M,B=B==ar?ii:B;var H=M==ii,q=B==ii,Y=M==B;if(Y&&Hi(a)){if(!Hi(c))return!1;E=!0,H=!1}if(Y&&!H)return S||(S=new Tn),E||Pa(a)?m_(a,c,f,m,y,S):FO(a,c,M,f,m,y,S);if(!(f&g)){var ie=H&&$e.call(a,"__wrapped__"),ue=q&&$e.call(c,"__wrapped__");if(ie||ue){var Ee=ie?a.value():a,pe=ue?c.value():c;return S||(S=new Tn),y(Ee,pe,f,m,S)}}return Y?(S||(S=new Tn),CO(a,c,f,m,y,S)):!1}function sO(a){return it(a)&&Ut(a)==gn}function $y(a,c,f,m){var y=f.length,S=y,E=!m;if(a==null)return!S;for(a=ze(a);y--;){var R=f[y];if(E&&R[2]?R[1]!==a[R[0]]:!(R[0]in a))return!1}for(;++y<S;){R=f[y];var M=R[0],B=a[M],H=R[1];if(E&&R[2]){if(B===t&&!(M in a))return!1}else{var q=new Tn;if(m)var Y=m(B,H,M,a,c,q);if(!(Y===t?Tc(H,B,g|x,m,q):Y))return!1}}return!0}function Ow(a){if(!et(a)||$O(a))return!1;var c=pi(a)?sN:YF;return c.test(Do(a))}function cO(a){return it(a)&&Gt(a)==ac}function lO(a){return it(a)&&Ut(a)==yn}function uO(a){return it(a)&&pp(a.length)&&!!Ze[Gt(a)]}function Lw(a){return typeof a=="function"?a:a==null?ur:typeof a=="object"?xe(a)?Bw(a[0],a[1]):Vw(a):oE(a)}function qy(a){if(!bc(a))return dN(a);var c=[];for(var f in ze(a))$e.call(a,f)&&f!="constructor"&&c.push(f);return c}function pO(a){if(!et(a))return GO(a);var c=bc(a),f=[];for(var m in a)m=="constructor"&&(c||!$e.call(a,m))||f.push(m);return f}function jy(a,c){return a<c}function Uw(a,c){var f=-1,m=cr(a)?L(a.length):[];return Li(a,function(y,S,E){m[++f]=c(y,S,E)}),m}function Vw(a){var c=ax(a);return c.length==1&&c[0][2]?T_(c[0][0],c[0][1]):function(f){return f===a||$y(f,a,c)}}function Bw(a,c){return cx(a)&&x_(c)?T_(Un(a),c):function(f){var m=xx(f,a);return m===t&&m===c?Tx(f,a):Tc(c,m,g|x)}}function Qu(a,c,f,m,y){a!==c&&Vy(c,function(S,E){if(y||(y=new Tn),et(S))fO(a,c,E,f,Qu,m,y);else{var R=m?m(ux(a,E),S,E+"",a,c,y):t;R===t&&(R=S),Ly(a,E,R)}},lr)}function fO(a,c,f,m,y,S,E){var R=ux(a,f),M=ux(c,f),B=E.get(M);if(B){Ly(a,f,B);return}var H=S?S(R,M,f+"",a,c,E):t,q=H===t;if(q){var Y=xe(M),ie=!Y&&Hi(M),ue=!Y&&!ie&&Pa(M);H=M,Y||ie||ue?xe(R)?H=R:ct(R)?H=sr(R):ie?(q=!1,H=Xw(M,!0)):ue?(q=!1,H=Jw(M,!0)):H=[]:_c(M)||Io(M)?(H=R,Io(R)?H=Q_(R):(!et(R)||pi(R))&&(H=y_(M))):q=!1}q&&(E.set(M,H),y(H,M,m,S,E),E.delete(M)),Ly(a,f,H)}function Hw(a,c){var f=a.length;if(f)return c+=c<0?f:0,ui(c,f)?a[c]:t}function Ww(a,c,f){c.length?c=Xe(c,function(S){return xe(S)?function(E){return Mo(E,S.length===1?S[0]:S)}:S}):c=[ur];var m=-1;c=Xe(c,Er(le()));var y=Uw(a,function(S,E,R){var M=Xe(c,function(B){return B(S)});return{criteria:M,index:++m,value:S}});return VC(y,function(S,E){return EO(S,E,f)})}function dO(a,c){return $w(a,c,function(f,m){return Tx(a,m)})}function $w(a,c,f){for(var m=-1,y=c.length,S={};++m<y;){var E=c[m],R=Mo(a,E);f(R,E)&&Sc(S,Vi(E,a),R)}return S}function mO(a){return function(c){return Mo(c,a)}}function zy(a,c,f,m){var y=m?UC:xa,S=-1,E=c.length,R=a;for(a===c&&(c=sr(c)),f&&(R=Xe(a,Er(f)));++S<E;)for(var M=0,B=c[S],H=f?f(B):B;(M=y(R,H,M,m))>-1;)R!==a&&Vu.call(R,M,1),Vu.call(a,M,1);return a}function qw(a,c){for(var f=a?c.length:0,m=f-1;f--;){var y=c[f];if(f==m||y!==S){var S=y;ui(y)?Vu.call(a,y,1):Zy(a,y)}}return a}function Gy(a,c){return a+Wu(_w()*(c-a+1))}function hO(a,c,f,m){for(var y=-1,S=xt(Hu((c-a)/(f||1)),0),E=L(S);S--;)E[m?S:++y]=a,a+=f;return E}function Ky(a,c){var f="";if(!a||c<1||c>Q)return f;do c%2&&(f+=a),c=Wu(c/2),c&&(a+=a);while(c);return f}function ke(a,c){return px(S_(a,c,ur),a+"")}function gO(a){return kw(Ma(a))}function yO(a,c){var f=Ma(a);return op(f,Po(c,0,f.length))}function Sc(a,c,f,m){if(!et(a))return a;c=Vi(c,a);for(var y=-1,S=c.length,E=S-1,R=a;R!=null&&++y<S;){var M=Un(c[y]),B=f;if(M==="__proto__"||M==="constructor"||M==="prototype")return a;if(y!=E){var H=R[M];B=m?m(H,M,R):t,B===t&&(B=et(H)?H:ui(c[y+1])?[]:{})}gc(R,M,B),R=R[M]}return a}var jw=$u?function(a,c){return $u.set(a,c),a}:ur,xO=Bu?function(a,c){return Bu(a,"toString",{configurable:!0,enumerable:!1,value:vx(c),writable:!0})}:ur;function TO(a){return op(Ma(a))}function Qr(a,c,f){var m=-1,y=a.length;c<0&&(c=-c>y?0:y+c),f=f>y?y:f,f<0&&(f+=y),y=c>f?0:f-c>>>0,c>>>=0;for(var S=L(y);++m<y;)S[m]=a[m+c];return S}function SO(a,c){var f;return Li(a,function(m,y,S){return f=c(m,y,S),!f}),!!f}function Zu(a,c,f){var m=0,y=a==null?m:a.length;if(typeof c=="number"&&c===c&&y<=or){for(;m<y;){var S=m+y>>>1,E=a[S];E!==null&&!kr(E)&&(f?E<=c:E<c)?m=S+1:y=S}return y}return Qy(a,c,ur,f)}function Qy(a,c,f,m){var y=0,S=a==null?0:a.length;if(S===0)return 0;c=f(c);for(var E=c!==c,R=c===null,M=kr(c),B=c===t;y<S;){var H=Wu((y+S)/2),q=f(a[H]),Y=q!==t,ie=q===null,ue=q===q,Ee=kr(q);if(E)var pe=m||ue;else B?pe=ue&&(m||Y):R?pe=ue&&Y&&(m||!ie):M?pe=ue&&Y&&!ie&&(m||!Ee):ie||Ee?pe=!1:pe=m?q<=c:q<c;pe?y=H+1:S=H}return Lt(S,Re)}function zw(a,c){for(var f=-1,m=a.length,y=0,S=[];++f<m;){var E=a[f],R=c?c(E):E;if(!f||!Sn(R,M)){var M=R;S[y++]=E===0?0:E}}return S}function Gw(a){return typeof a=="number"?a:kr(a)?me:+a}function Rr(a){if(typeof a=="string")return a;if(xe(a))return Xe(a,Rr)+"";if(kr(a))return Ew?Ew.call(a):"";var c=a+"";return c=="0"&&1/a==-K?"-0":c}function Ui(a,c,f){var m=-1,y=Mu,S=a.length,E=!0,R=[],M=R;if(f)E=!1,y=_y;else if(S>=r){var B=c?null:DO(a);if(B)return Du(B);E=!1,y=uc,M=new ko}else M=c?[]:R;e:for(;++m<S;){var H=a[m],q=c?c(H):H;if(H=f||H!==0?H:0,E&&q===q){for(var Y=M.length;Y--;)if(M[Y]===q)continue e;c&&M.push(q),R.push(H)}else y(M,q,f)||(M!==R&&M.push(q),R.push(H))}return R}function Zy(a,c){return c=Vi(c,a),a=v_(a,c),a==null||delete a[Un(Zr(c))]}function Kw(a,c,f,m){return Sc(a,c,f(Mo(a,c)),m)}function Yu(a,c,f,m){for(var y=a.length,S=m?y:-1;(m?S--:++S<y)&&c(a[S],S,a););return f?Qr(a,m?0:S,m?S+1:y):Qr(a,m?S+1:0,m?y:S)}function Qw(a,c){var f=a;return f instanceof Ae&&(f=f.value()),Ey(c,function(m,y){return y.func.apply(y.thisArg,Fi([m],y.args))},f)}function Yy(a,c,f){var m=a.length;if(m<2)return m?Ui(a[0]):[];for(var y=-1,S=L(m);++y<m;)for(var E=a[y],R=-1;++R<m;)R!=y&&(S[y]=yc(S[y]||E,a[R],c,f));return Ui(Dt(S,1),c,f)}function Zw(a,c,f){for(var m=-1,y=a.length,S=c.length,E={};++m<y;){var R=m<S?c[m]:t;f(E,a[m],R)}return E}function Xy(a){return ct(a)?a:[]}function Jy(a){return typeof a=="function"?a:ur}function Vi(a,c){return xe(a)?a:cx(a,c)?[a]:E_(He(a))}var vO=ke;function Bi(a,c,f){var m=a.length;return f=f===t?m:f,!c&&f>=m?a:Qr(a,c,f)}var Yw=cN||function(a){return bt.clearTimeout(a)};function Xw(a,c){if(c)return a.slice();var f=a.length,m=Tw?Tw(f):new a.constructor(f);return a.copy(m),m}function ex(a){var c=new a.constructor(a.byteLength);return new Lu(c).set(new Lu(a)),c}function bO(a,c){var f=c?ex(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.byteLength)}function wO(a){var c=new a.constructor(a.source,Nb.exec(a));return c.lastIndex=a.lastIndex,c}function _O(a){return hc?ze(hc.call(a)):{}}function Jw(a,c){var f=c?ex(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.length)}function e_(a,c){if(a!==c){var f=a!==t,m=a===null,y=a===a,S=kr(a),E=c!==t,R=c===null,M=c===c,B=kr(c);if(!R&&!B&&!S&&a>c||S&&E&&M&&!R&&!B||m&&E&&M||!f&&M||!y)return 1;if(!m&&!S&&!B&&a<c||B&&f&&y&&!m&&!S||R&&f&&y||!E&&y||!M)return-1}return 0}function EO(a,c,f){for(var m=-1,y=a.criteria,S=c.criteria,E=y.length,R=f.length;++m<E;){var M=e_(y[m],S[m]);if(M){if(m>=R)return M;var B=f[m];return M*(B=="desc"?-1:1)}}return a.index-c.index}function t_(a,c,f,m){for(var y=-1,S=a.length,E=f.length,R=-1,M=c.length,B=xt(S-E,0),H=L(M+B),q=!m;++R<M;)H[R]=c[R];for(;++y<E;)(q||y<S)&&(H[f[y]]=a[y]);for(;B--;)H[R++]=a[y++];return H}function r_(a,c,f,m){for(var y=-1,S=a.length,E=-1,R=f.length,M=-1,B=c.length,H=xt(S-R,0),q=L(H+B),Y=!m;++y<H;)q[y]=a[y];for(var ie=y;++M<B;)q[ie+M]=c[M];for(;++E<R;)(Y||y<S)&&(q[ie+f[E]]=a[y++]);return q}function sr(a,c){var f=-1,m=a.length;for(c||(c=L(m));++f<m;)c[f]=a[f];return c}function Ln(a,c,f,m){var y=!f;f||(f={});for(var S=-1,E=c.length;++S<E;){var R=c[S],M=m?m(f[R],a[R],R,f,a):t;M===t&&(M=a[R]),y?si(f,R,M):gc(f,R,M)}return f}function RO(a,c){return Ln(a,sx(a),c)}function kO(a,c){return Ln(a,h_(a),c)}function Xu(a,c){return function(f,m){var y=xe(f)?IC:QN,S=c?c():{};return y(f,a,le(m,2),S)}}function Ea(a){return ke(function(c,f){var m=-1,y=f.length,S=y>1?f[y-1]:t,E=y>2?f[2]:t;for(S=a.length>3&&typeof S=="function"?(y--,S):t,E&&Kt(f[0],f[1],E)&&(S=y<3?t:S,y=1),c=ze(c);++m<y;){var R=f[m];R&&a(c,R,m,S)}return c})}function n_(a,c){return function(f,m){if(f==null)return f;if(!cr(f))return a(f,m);for(var y=f.length,S=c?y:-1,E=ze(f);(c?S--:++S<y)&&m(E[S],S,E)!==!1;);return f}}function i_(a){return function(c,f,m){for(var y=-1,S=ze(c),E=m(c),R=E.length;R--;){var M=E[a?R:++y];if(f(S[M],M,S)===!1)break}return c}}function PO(a,c,f){var m=c&v,y=vc(a);function S(){var E=this&&this!==bt&&this instanceof S?y:a;return E.apply(m?f:this,arguments)}return S}function o_(a){return function(c){c=He(c);var f=Ta(c)?xn(c):t,m=f?f[0]:c.charAt(0),y=f?Bi(f,1).join(""):c.slice(1);return m[a]()+y}}function Ra(a){return function(c){return Ey(nE(rE(c).replace(xC,"")),a,"")}}function vc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=_a(a.prototype),m=a.apply(f,c);return et(m)?m:f}}function MO(a,c,f){var m=vc(a);function y(){for(var S=arguments.length,E=L(S),R=S,M=ka(y);R--;)E[R]=arguments[R];var B=S<3&&E[0]!==M&&E[S-1]!==M?[]:Ci(E,M);if(S-=B.length,S<f)return u_(a,c,Ju,y.placeholder,t,E,B,t,t,f-S);var H=this&&this!==bt&&this instanceof y?m:a;return _r(H,this,E)}return y}function a_(a){return function(c,f,m){var y=ze(c);if(!cr(c)){var S=le(f,3);c=wt(c),f=function(R){return S(y[R],R,y)}}var E=a(c,f,m);return E>-1?y[S?c[E]:E]:t}}function s_(a){return li(function(c){var f=c.length,m=f,y=Gr.prototype.thru;for(a&&c.reverse();m--;){var S=c[m];if(typeof S!="function")throw new zr(i);if(y&&!E&&np(S)=="wrapper")var E=new Gr([],!0)}for(m=E?m:f;++m<f;){S=c[m];var R=np(S),M=R=="wrapper"?ox(S):t;M&&lx(M[0])&&M[1]==(he|A|Z|de)&&!M[4].length&&M[9]==1?E=E[np(M[0])].apply(E,M[3]):E=S.length==1&&lx(S)?E[R]():E.thru(S)}return function(){var B=arguments,H=B[0];if(E&&B.length==1&&xe(H))return E.plant(H).value();for(var q=0,Y=f?c[q].apply(this,B):H;++q<f;)Y=c[q].call(this,Y);return Y}})}function Ju(a,c,f,m,y,S,E,R,M,B){var H=c&he,q=c&v,Y=c&w,ie=c&(A|U),ue=c&dt,Ee=Y?t:vc(a);function pe(){for(var Pe=arguments.length,Ie=L(Pe),Pr=Pe;Pr--;)Ie[Pr]=arguments[Pr];if(ie)var Qt=ka(pe),Mr=HC(Ie,Qt);if(m&&(Ie=t_(Ie,m,y,ie)),S&&(Ie=r_(Ie,S,E,ie)),Pe-=Mr,ie&&Pe<B){var lt=Ci(Ie,Qt);return u_(a,c,Ju,pe.placeholder,f,Ie,lt,R,M,B-Pe)}var vn=q?f:this,di=Y?vn[a]:a;return Pe=Ie.length,R?Ie=QO(Ie,R):ue&&Pe>1&&Ie.reverse(),H&&M<Pe&&(Ie.length=M),this&&this!==bt&&this instanceof pe&&(di=Ee||vc(di)),di.apply(vn,Ie)}return pe}function c_(a,c){return function(f,m){return nO(f,a,c(m),{})}}function ep(a,c){return function(f,m){var y;if(f===t&&m===t)return c;if(f!==t&&(y=f),m!==t){if(y===t)return m;typeof f=="string"||typeof m=="string"?(f=Rr(f),m=Rr(m)):(f=Gw(f),m=Gw(m)),y=a(f,m)}return y}}function tx(a){return li(function(c){return c=Xe(c,Er(le())),ke(function(f){var m=this;return a(c,function(y){return _r(y,m,f)})})})}function tp(a,c){c=c===t?" ":Rr(c);var f=c.length;if(f<2)return f?Ky(c,a):c;var m=Ky(c,Hu(a/Sa(c)));return Ta(c)?Bi(xn(m),0,a).join(""):m.slice(0,a)}function AO(a,c,f,m){var y=c&v,S=vc(a);function E(){for(var R=-1,M=arguments.length,B=-1,H=m.length,q=L(H+M),Y=this&&this!==bt&&this instanceof E?S:a;++B<H;)q[B]=m[B];for(;M--;)q[B++]=arguments[++R];return _r(Y,y?f:this,q)}return E}function l_(a){return function(c,f,m){return m&&typeof m!="number"&&Kt(c,f,m)&&(f=m=t),c=fi(c),f===t?(f=c,c=0):f=fi(f),m=m===t?c<f?1:-1:fi(m),hO(c,f,m,a)}}function rp(a){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=Yr(c),f=Yr(f)),a(c,f)}}function u_(a,c,f,m,y,S,E,R,M,B){var H=c&A,q=H?E:t,Y=H?t:E,ie=H?S:t,ue=H?t:S;c|=H?Z:ne,c&=~(H?ne:Z),c&N||(c&=~(v|w));var Ee=[a,c,y,ie,q,ue,Y,R,M,B],pe=f.apply(t,Ee);return lx(a)&&b_(pe,Ee),pe.placeholder=m,w_(pe,a,c)}function rx(a){var c=yt[a];return function(f,m){if(f=Yr(f),m=m==null?0:Lt(be(m),292),m&&ww(f)){var y=(He(f)+"e").split("e"),S=c(y[0]+"e"+(+y[1]+m));return y=(He(S)+"e").split("e"),+(y[0]+"e"+(+y[1]-m))}return c(f)}}var DO=ba&&1/Du(new ba([,-0]))[1]==K?function(a){return new ba(a)}:_x;function p_(a){return function(c){var f=Ut(c);return f==gn?Iy(c):f==yn?KC(c):BC(c,a(c))}}function ci(a,c,f,m,y,S,E,R){var M=c&w;if(!M&&typeof a!="function")throw new zr(i);var B=m?m.length:0;if(B||(c&=~(Z|ne),m=y=t),E=E===t?E:xt(be(E),0),R=R===t?R:be(R),B-=y?y.length:0,c&ne){var H=m,q=y;m=y=t}var Y=M?t:ox(a),ie=[a,c,f,m,y,H,q,S,E,R];if(Y&&zO(ie,Y),a=ie[0],c=ie[1],f=ie[2],m=ie[3],y=ie[4],R=ie[9]=ie[9]===t?M?0:a.length:xt(ie[9]-B,0),!R&&c&(A|U)&&(c&=~(A|U)),!c||c==v)var ue=PO(a,c,f);else c==A||c==U?ue=MO(a,c,R):(c==Z||c==(v|Z))&&!y.length?ue=AO(a,c,f,m):ue=Ju.apply(t,ie);var Ee=Y?jw:b_;return w_(Ee(ue,ie),a,c)}function f_(a,c,f,m){return a===t||Sn(a,va[f])&&!$e.call(m,f)?c:a}function d_(a,c,f,m,y,S){return et(a)&&et(c)&&(S.set(c,a),Qu(a,c,t,d_,S),S.delete(c)),a}function IO(a){return _c(a)?t:a}function m_(a,c,f,m,y,S){var E=f&g,R=a.length,M=c.length;if(R!=M&&!(E&&M>R))return!1;var B=S.get(a),H=S.get(c);if(B&&H)return B==c&&H==a;var q=-1,Y=!0,ie=f&x?new ko:t;for(S.set(a,c),S.set(c,a);++q<R;){var ue=a[q],Ee=c[q];if(m)var pe=E?m(Ee,ue,q,c,a,S):m(ue,Ee,q,a,c,S);if(pe!==t){if(pe)continue;Y=!1;break}if(ie){if(!Ry(c,function(Pe,Ie){if(!uc(ie,Ie)&&(ue===Pe||y(ue,Pe,f,m,S)))return ie.push(Ie)})){Y=!1;break}}else if(!(ue===Ee||y(ue,Ee,f,m,S))){Y=!1;break}}return S.delete(a),S.delete(c),Y}function FO(a,c,f,m,y,S,E){switch(f){case ga:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case lc:return!(a.byteLength!=c.byteLength||!S(new Lu(a),new Lu(c)));case hn:case $r:case oc:return Sn(+a,+c);case ni:return a.name==c.name&&a.message==c.message;case ac:case sc:return a==c+"";case gn:var R=Iy;case yn:var M=m&g;if(R||(R=Du),a.size!=c.size&&!M)return!1;var B=E.get(a);if(B)return B==c;m|=x,E.set(a,c);var H=m_(R(a),R(c),m,y,S,E);return E.delete(a),H;case Eu:if(hc)return hc.call(a)==hc.call(c)}return!1}function CO(a,c,f,m,y,S){var E=f&g,R=nx(a),M=R.length,B=nx(c),H=B.length;if(M!=H&&!E)return!1;for(var q=M;q--;){var Y=R[q];if(!(E?Y in c:$e.call(c,Y)))return!1}var ie=S.get(a),ue=S.get(c);if(ie&&ue)return ie==c&&ue==a;var Ee=!0;S.set(a,c),S.set(c,a);for(var pe=E;++q<M;){Y=R[q];var Pe=a[Y],Ie=c[Y];if(m)var Pr=E?m(Ie,Pe,Y,c,a,S):m(Pe,Ie,Y,a,c,S);if(!(Pr===t?Pe===Ie||y(Pe,Ie,f,m,S):Pr)){Ee=!1;break}pe||(pe=Y=="constructor")}if(Ee&&!pe){var Qt=a.constructor,Mr=c.constructor;Qt!=Mr&&"constructor"in a&&"constructor"in c&&!(typeof Qt=="function"&&Qt instanceof Qt&&typeof Mr=="function"&&Mr instanceof Mr)&&(Ee=!1)}return S.delete(a),S.delete(c),Ee}function li(a){return px(S_(a,t,M_),a+"")}function nx(a){return Cw(a,wt,sx)}function ix(a){return Cw(a,lr,h_)}var ox=$u?function(a){return $u.get(a)}:_x;function np(a){for(var c=a.name+"",f=wa[c],m=$e.call(wa,c)?f.length:0;m--;){var y=f[m],S=y.func;if(S==null||S==a)return y.name}return c}function ka(a){var c=$e.call(T,"placeholder")?T:a;return c.placeholder}function le(){var a=T.iteratee||bx;return a=a===bx?Lw:a,arguments.length?a(arguments[0],arguments[1]):a}function ip(a,c){var f=a.__data__;return WO(c)?f[typeof c=="string"?"string":"hash"]:f.map}function ax(a){for(var c=wt(a),f=c.length;f--;){var m=c[f],y=a[m];c[f]=[m,y,x_(y)]}return c}function Ao(a,c){var f=jC(a,c);return Ow(f)?f:t}function NO(a){var c=$e.call(a,Eo),f=a[Eo];try{a[Eo]=t;var m=!0}catch{}var y=Nu.call(a);return m&&(c?a[Eo]=f:delete a[Eo]),y}var sx=Cy?function(a){return a==null?[]:(a=ze(a),Ii(Cy(a),function(c){return vw.call(a,c)}))}:Ex,h_=Cy?function(a){for(var c=[];a;)Fi(c,sx(a)),a=Uu(a);return c}:Ex,Ut=Gt;(Ny&&Ut(new Ny(new ArrayBuffer(1)))!=ga||fc&&Ut(new fc)!=gn||Oy&&Ut(Oy.resolve())!=Db||ba&&Ut(new ba)!=yn||dc&&Ut(new dc)!=cc)&&(Ut=function(a){var c=Gt(a),f=c==ii?a.constructor:t,m=f?Do(f):"";if(m)switch(m){case yN:return ga;case xN:return gn;case TN:return Db;case SN:return yn;case vN:return cc}return c});function OO(a,c,f){for(var m=-1,y=f.length;++m<y;){var S=f[m],E=S.size;switch(S.type){case"drop":a+=E;break;case"dropRight":c-=E;break;case"take":c=Lt(c,a+E);break;case"takeRight":a=xt(a,c-E);break}}return{start:a,end:c}}function LO(a){var c=a.match($F);return c?c[1].split(qF):[]}function g_(a,c,f){c=Vi(c,a);for(var m=-1,y=c.length,S=!1;++m<y;){var E=Un(c[m]);if(!(S=a!=null&&f(a,E)))break;a=a[E]}return S||++m!=y?S:(y=a==null?0:a.length,!!y&&pp(y)&&ui(E,y)&&(xe(a)||Io(a)))}function UO(a){var c=a.length,f=new a.constructor(c);return c&&typeof a[0]=="string"&&$e.call(a,"index")&&(f.index=a.index,f.input=a.input),f}function y_(a){return typeof a.constructor=="function"&&!bc(a)?_a(Uu(a)):{}}function VO(a,c,f){var m=a.constructor;switch(c){case lc:return ex(a);case hn:case $r:return new m(+a);case ga:return bO(a,f);case ay:case sy:case cy:case ly:case uy:case py:case fy:case dy:case my:return Jw(a,f);case gn:return new m;case oc:case sc:return new m(a);case ac:return wO(a);case yn:return new m;case Eu:return _O(a)}}function BO(a,c){var f=c.length;if(!f)return a;var m=f-1;return c[m]=(f>1?"& ":"")+c[m],c=c.join(f>2?", ":" "),a.replace(WF,`{
/* [wrapped with `+c+`] */
`)}function HO(a){return xe(a)||Io(a)||!!(bw&&a&&a[bw])}function ui(a,c){var f=typeof a;return c=c??Q,!!c&&(f=="number"||f!="symbol"&&JF.test(a))&&a>-1&&a%1==0&&a<c}function Kt(a,c,f){if(!et(f))return!1;var m=typeof c;return(m=="number"?cr(f)&&ui(c,f.length):m=="string"&&c in f)?Sn(f[c],a):!1}function cx(a,c){if(xe(a))return!1;var f=typeof a;return f=="number"||f=="symbol"||f=="boolean"||a==null||kr(a)?!0:UF.test(a)||!LF.test(a)||c!=null&&a in ze(c)}function WO(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function lx(a){var c=np(a),f=T[c];if(typeof f!="function"||!(c in Ae.prototype))return!1;if(a===f)return!0;var m=ox(f);return!!m&&a===m[0]}function $O(a){return!!xw&&xw in a}var qO=Fu?pi:Rx;function bc(a){var c=a&&a.constructor,f=typeof c=="function"&&c.prototype||va;return a===f}function x_(a){return a===a&&!et(a)}function T_(a,c){return function(f){return f==null?!1:f[a]===c&&(c!==t||a in ze(f))}}function jO(a){var c=lp(a,function(m){return f.size===l&&f.clear(),m}),f=c.cache;return c}function zO(a,c){var f=a[1],m=c[1],y=f|m,S=y<(v|w|he),E=m==he&&f==A||m==he&&f==de&&a[7].length<=c[8]||m==(he|de)&&c[7].length<=c[8]&&f==A;if(!(S||E))return a;m&v&&(a[2]=c[2],y|=f&v?0:N);var R=c[3];if(R){var M=a[3];a[3]=M?t_(M,R,c[4]):R,a[4]=M?Ci(a[3],u):c[4]}return R=c[5],R&&(M=a[5],a[5]=M?r_(M,R,c[6]):R,a[6]=M?Ci(a[5],u):c[6]),R=c[7],R&&(a[7]=R),m&he&&(a[8]=a[8]==null?c[8]:Lt(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=y,a}function GO(a){var c=[];if(a!=null)for(var f in ze(a))c.push(f);return c}function KO(a){return Nu.call(a)}function S_(a,c,f){return c=xt(c===t?a.length-1:c,0),function(){for(var m=arguments,y=-1,S=xt(m.length-c,0),E=L(S);++y<S;)E[y]=m[c+y];y=-1;for(var R=L(c+1);++y<c;)R[y]=m[y];return R[c]=f(E),_r(a,this,R)}}function v_(a,c){return c.length<2?a:Mo(a,Qr(c,0,-1))}function QO(a,c){for(var f=a.length,m=Lt(c.length,f),y=sr(a);m--;){var S=c[m];a[m]=ui(S,f)?y[S]:t}return a}function ux(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var b_=__(jw),wc=uN||function(a,c){return bt.setTimeout(a,c)},px=__(xO);function w_(a,c,f){var m=c+"";return px(a,BO(m,ZO(LO(m),f)))}function __(a){var c=0,f=0;return function(){var m=mN(),y=C-(m-f);if(f=m,y>0){if(++c>=O)return arguments[0]}else c=0;return a.apply(t,arguments)}}function op(a,c){var f=-1,m=a.length,y=m-1;for(c=c===t?m:c;++f<c;){var S=Gy(f,y),E=a[S];a[S]=a[f],a[f]=E}return a.length=c,a}var E_=jO(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(VF,function(f,m,y,S){c.push(y?S.replace(GF,"$1"):m||f)}),c});function Un(a){if(typeof a=="string"||kr(a))return a;var c=a+"";return c=="0"&&1/a==-K?"-0":c}function Do(a){if(a!=null){try{return Cu.call(a)}catch{}try{return a+""}catch{}}return""}function ZO(a,c){return jr(ri,function(f){var m="_."+f[0];c&f[1]&&!Mu(a,m)&&a.push(m)}),a.sort()}function R_(a){if(a instanceof Ae)return a.clone();var c=new Gr(a.__wrapped__,a.__chain__);return c.__actions__=sr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function YO(a,c,f){(f?Kt(a,c,f):c===t)?c=1:c=xt(be(c),0);var m=a==null?0:a.length;if(!m||c<1)return[];for(var y=0,S=0,E=L(Hu(m/c));y<m;)E[S++]=Qr(a,y,y+=c);return E}function XO(a){for(var c=-1,f=a==null?0:a.length,m=0,y=[];++c<f;){var S=a[c];S&&(y[m++]=S)}return y}function JO(){var a=arguments.length;if(!a)return[];for(var c=L(a-1),f=arguments[0],m=a;m--;)c[m-1]=arguments[m];return Fi(xe(f)?sr(f):[f],Dt(c,1))}var eL=ke(function(a,c){return ct(a)?yc(a,Dt(c,1,ct,!0)):[]}),tL=ke(function(a,c){var f=Zr(c);return ct(f)&&(f=t),ct(a)?yc(a,Dt(c,1,ct,!0),le(f,2)):[]}),rL=ke(function(a,c){var f=Zr(c);return ct(f)&&(f=t),ct(a)?yc(a,Dt(c,1,ct,!0),t,f):[]});function nL(a,c,f){var m=a==null?0:a.length;return m?(c=f||c===t?1:be(c),Qr(a,c<0?0:c,m)):[]}function iL(a,c,f){var m=a==null?0:a.length;return m?(c=f||c===t?1:be(c),c=m-c,Qr(a,0,c<0?0:c)):[]}function oL(a,c){return a&&a.length?Yu(a,le(c,3),!0,!0):[]}function aL(a,c){return a&&a.length?Yu(a,le(c,3),!0):[]}function sL(a,c,f,m){var y=a==null?0:a.length;return y?(f&&typeof f!="number"&&Kt(a,c,f)&&(f=0,m=y),JN(a,c,f,m)):[]}function k_(a,c,f){var m=a==null?0:a.length;if(!m)return-1;var y=f==null?0:be(f);return y<0&&(y=xt(m+y,0)),Au(a,le(c,3),y)}function P_(a,c,f){var m=a==null?0:a.length;if(!m)return-1;var y=m-1;return f!==t&&(y=be(f),y=f<0?xt(m+y,0):Lt(y,m-1)),Au(a,le(c,3),y,!0)}function M_(a){var c=a==null?0:a.length;return c?Dt(a,1):[]}function cL(a){var c=a==null?0:a.length;return c?Dt(a,K):[]}function lL(a,c){var f=a==null?0:a.length;return f?(c=c===t?1:be(c),Dt(a,c)):[]}function uL(a){for(var c=-1,f=a==null?0:a.length,m={};++c<f;){var y=a[c];m[y[0]]=y[1]}return m}function A_(a){return a&&a.length?a[0]:t}function pL(a,c,f){var m=a==null?0:a.length;if(!m)return-1;var y=f==null?0:be(f);return y<0&&(y=xt(m+y,0)),xa(a,c,y)}function fL(a){var c=a==null?0:a.length;return c?Qr(a,0,-1):[]}var dL=ke(function(a){var c=Xe(a,Xy);return c.length&&c[0]===a[0]?Wy(c):[]}),mL=ke(function(a){var c=Zr(a),f=Xe(a,Xy);return c===Zr(f)?c=t:f.pop(),f.length&&f[0]===a[0]?Wy(f,le(c,2)):[]}),hL=ke(function(a){var c=Zr(a),f=Xe(a,Xy);return c=typeof c=="function"?c:t,c&&f.pop(),f.length&&f[0]===a[0]?Wy(f,t,c):[]});function gL(a,c){return a==null?"":fN.call(a,c)}function Zr(a){var c=a==null?0:a.length;return c?a[c-1]:t}function yL(a,c,f){var m=a==null?0:a.length;if(!m)return-1;var y=m;return f!==t&&(y=be(f),y=y<0?xt(m+y,0):Lt(y,m-1)),c===c?ZC(a,c,y):Au(a,uw,y,!0)}function xL(a,c){return a&&a.length?Hw(a,be(c)):t}var TL=ke(D_);function D_(a,c){return a&&a.length&&c&&c.length?zy(a,c):a}function SL(a,c,f){return a&&a.length&&c&&c.length?zy(a,c,le(f,2)):a}function vL(a,c,f){return a&&a.length&&c&&c.length?zy(a,c,t,f):a}var bL=li(function(a,c){var f=a==null?0:a.length,m=Uy(a,c);return qw(a,Xe(c,function(y){return ui(y,f)?+y:y}).sort(e_)),m});function wL(a,c){var f=[];if(!(a&&a.length))return f;var m=-1,y=[],S=a.length;for(c=le(c,3);++m<S;){var E=a[m];c(E,m,a)&&(f.push(E),y.push(m))}return qw(a,y),f}function fx(a){return a==null?a:gN.call(a)}function _L(a,c,f){var m=a==null?0:a.length;return m?(f&&typeof f!="number"&&Kt(a,c,f)?(c=0,f=m):(c=c==null?0:be(c),f=f===t?m:be(f)),Qr(a,c,f)):[]}function EL(a,c){return Zu(a,c)}function RL(a,c,f){return Qy(a,c,le(f,2))}function kL(a,c){var f=a==null?0:a.length;if(f){var m=Zu(a,c);if(m<f&&Sn(a[m],c))return m}return-1}function PL(a,c){return Zu(a,c,!0)}function ML(a,c,f){return Qy(a,c,le(f,2),!0)}function AL(a,c){var f=a==null?0:a.length;if(f){var m=Zu(a,c,!0)-1;if(Sn(a[m],c))return m}return-1}function DL(a){return a&&a.length?zw(a):[]}function IL(a,c){return a&&a.length?zw(a,le(c,2)):[]}function FL(a){var c=a==null?0:a.length;return c?Qr(a,1,c):[]}function CL(a,c,f){return a&&a.length?(c=f||c===t?1:be(c),Qr(a,0,c<0?0:c)):[]}function NL(a,c,f){var m=a==null?0:a.length;return m?(c=f||c===t?1:be(c),c=m-c,Qr(a,c<0?0:c,m)):[]}function OL(a,c){return a&&a.length?Yu(a,le(c,3),!1,!0):[]}function LL(a,c){return a&&a.length?Yu(a,le(c,3)):[]}var UL=ke(function(a){return Ui(Dt(a,1,ct,!0))}),VL=ke(function(a){var c=Zr(a);return ct(c)&&(c=t),Ui(Dt(a,1,ct,!0),le(c,2))}),BL=ke(function(a){var c=Zr(a);return c=typeof c=="function"?c:t,Ui(Dt(a,1,ct,!0),t,c)});function HL(a){return a&&a.length?Ui(a):[]}function WL(a,c){return a&&a.length?Ui(a,le(c,2)):[]}function $L(a,c){return c=typeof c=="function"?c:t,a&&a.length?Ui(a,t,c):[]}function dx(a){if(!(a&&a.length))return[];var c=0;return a=Ii(a,function(f){if(ct(f))return c=xt(f.length,c),!0}),Ay(c,function(f){return Xe(a,ky(f))})}function I_(a,c){if(!(a&&a.length))return[];var f=dx(a);return c==null?f:Xe(f,function(m){return _r(c,t,m)})}var qL=ke(function(a,c){return ct(a)?yc(a,c):[]}),jL=ke(function(a){return Yy(Ii(a,ct))}),zL=ke(function(a){var c=Zr(a);return ct(c)&&(c=t),Yy(Ii(a,ct),le(c,2))}),GL=ke(function(a){var c=Zr(a);return c=typeof c=="function"?c:t,Yy(Ii(a,ct),t,c)}),KL=ke(dx);function QL(a,c){return Zw(a||[],c||[],gc)}function ZL(a,c){return Zw(a||[],c||[],Sc)}var YL=ke(function(a){var c=a.length,f=c>1?a[c-1]:t;return f=typeof f=="function"?(a.pop(),f):t,I_(a,f)});function F_(a){var c=T(a);return c.__chain__=!0,c}function XL(a,c){return c(a),a}function ap(a,c){return c(a)}var JL=li(function(a){var c=a.length,f=c?a[0]:0,m=this.__wrapped__,y=function(S){return Uy(S,a)};return c>1||this.__actions__.length||!(m instanceof Ae)||!ui(f)?this.thru(y):(m=m.slice(f,+f+(c?1:0)),m.__actions__.push({func:ap,args:[y],thisArg:t}),new Gr(m,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function eU(){return F_(this)}function tU(){return new Gr(this.value(),this.__chain__)}function rU(){this.__values__===t&&(this.__values__=G_(this.value()));var a=this.__index__>=this.__values__.length,c=a?t:this.__values__[this.__index__++];return{done:a,value:c}}function nU(){return this}function iU(a){for(var c,f=this;f instanceof ju;){var m=R_(f);m.__index__=0,m.__values__=t,c?y.__wrapped__=m:c=m;var y=m;f=f.__wrapped__}return y.__wrapped__=a,c}function oU(){var a=this.__wrapped__;if(a instanceof Ae){var c=a;return this.__actions__.length&&(c=new Ae(this)),c=c.reverse(),c.__actions__.push({func:ap,args:[fx],thisArg:t}),new Gr(c,this.__chain__)}return this.thru(fx)}function aU(){return Qw(this.__wrapped__,this.__actions__)}var sU=Xu(function(a,c,f){$e.call(a,f)?++a[f]:si(a,f,1)});function cU(a,c,f){var m=xe(a)?cw:XN;return f&&Kt(a,c,f)&&(c=t),m(a,le(c,3))}function lU(a,c){var f=xe(a)?Ii:Iw;return f(a,le(c,3))}var uU=a_(k_),pU=a_(P_);function fU(a,c){return Dt(sp(a,c),1)}function dU(a,c){return Dt(sp(a,c),K)}function mU(a,c,f){return f=f===t?1:be(f),Dt(sp(a,c),f)}function C_(a,c){var f=xe(a)?jr:Li;return f(a,le(c,3))}function N_(a,c){var f=xe(a)?FC:Dw;return f(a,le(c,3))}var hU=Xu(function(a,c,f){$e.call(a,f)?a[f].push(c):si(a,f,[c])});function gU(a,c,f,m){a=cr(a)?a:Ma(a),f=f&&!m?be(f):0;var y=a.length;return f<0&&(f=xt(y+f,0)),fp(a)?f<=y&&a.indexOf(c,f)>-1:!!y&&xa(a,c,f)>-1}var yU=ke(function(a,c,f){var m=-1,y=typeof c=="function",S=cr(a)?L(a.length):[];return Li(a,function(E){S[++m]=y?_r(c,E,f):xc(E,c,f)}),S}),xU=Xu(function(a,c,f){si(a,f,c)});function sp(a,c){var f=xe(a)?Xe:Uw;return f(a,le(c,3))}function TU(a,c,f,m){return a==null?[]:(xe(c)||(c=c==null?[]:[c]),f=m?t:f,xe(f)||(f=f==null?[]:[f]),Ww(a,c,f))}var SU=Xu(function(a,c,f){a[f?0:1].push(c)},function(){return[[],[]]});function vU(a,c,f){var m=xe(a)?Ey:fw,y=arguments.length<3;return m(a,le(c,4),f,y,Li)}function bU(a,c,f){var m=xe(a)?CC:fw,y=arguments.length<3;return m(a,le(c,4),f,y,Dw)}function wU(a,c){var f=xe(a)?Ii:Iw;return f(a,up(le(c,3)))}function _U(a){var c=xe(a)?kw:gO;return c(a)}function EU(a,c,f){(f?Kt(a,c,f):c===t)?c=1:c=be(c);var m=xe(a)?GN:yO;return m(a,c)}function RU(a){var c=xe(a)?KN:TO;return c(a)}function kU(a){if(a==null)return 0;if(cr(a))return fp(a)?Sa(a):a.length;var c=Ut(a);return c==gn||c==yn?a.size:qy(a).length}function PU(a,c,f){var m=xe(a)?Ry:SO;return f&&Kt(a,c,f)&&(c=t),m(a,le(c,3))}var MU=ke(function(a,c){if(a==null)return[];var f=c.length;return f>1&&Kt(a,c[0],c[1])?c=[]:f>2&&Kt(c[0],c[1],c[2])&&(c=[c[0]]),Ww(a,Dt(c,1),[])}),cp=lN||function(){return bt.Date.now()};function AU(a,c){if(typeof c!="function")throw new zr(i);return a=be(a),function(){if(--a<1)return c.apply(this,arguments)}}function O_(a,c,f){return c=f?t:c,c=a&&c==null?a.length:c,ci(a,he,t,t,t,t,c)}function L_(a,c){var f;if(typeof c!="function")throw new zr(i);return a=be(a),function(){return--a>0&&(f=c.apply(this,arguments)),a<=1&&(c=t),f}}var mx=ke(function(a,c,f){var m=v;if(f.length){var y=Ci(f,ka(mx));m|=Z}return ci(a,m,c,f,y)}),U_=ke(function(a,c,f){var m=v|w;if(f.length){var y=Ci(f,ka(U_));m|=Z}return ci(c,m,a,f,y)});function V_(a,c,f){c=f?t:c;var m=ci(a,A,t,t,t,t,t,c);return m.placeholder=V_.placeholder,m}function B_(a,c,f){c=f?t:c;var m=ci(a,U,t,t,t,t,t,c);return m.placeholder=B_.placeholder,m}function H_(a,c,f){var m,y,S,E,R,M,B=0,H=!1,q=!1,Y=!0;if(typeof a!="function")throw new zr(i);c=Yr(c)||0,et(f)&&(H=!!f.leading,q="maxWait"in f,S=q?xt(Yr(f.maxWait)||0,c):S,Y="trailing"in f?!!f.trailing:Y);function ie(lt){var vn=m,di=y;return m=y=t,B=lt,E=a.apply(di,vn),E}function ue(lt){return B=lt,R=wc(Pe,c),H?ie(lt):E}function Ee(lt){var vn=lt-M,di=lt-B,aE=c-vn;return q?Lt(aE,S-di):aE}function pe(lt){var vn=lt-M,di=lt-B;return M===t||vn>=c||vn<0||q&&di>=S}function Pe(){var lt=cp();if(pe(lt))return Ie(lt);R=wc(Pe,Ee(lt))}function Ie(lt){return R=t,Y&&m?ie(lt):(m=y=t,E)}function Pr(){R!==t&&Yw(R),B=0,m=M=y=R=t}function Qt(){return R===t?E:Ie(cp())}function Mr(){var lt=cp(),vn=pe(lt);if(m=arguments,y=this,M=lt,vn){if(R===t)return ue(M);if(q)return Yw(R),R=wc(Pe,c),ie(M)}return R===t&&(R=wc(Pe,c)),E}return Mr.cancel=Pr,Mr.flush=Qt,Mr}var DU=ke(function(a,c){return Aw(a,1,c)}),IU=ke(function(a,c,f){return Aw(a,Yr(c)||0,f)});function FU(a){return ci(a,dt)}function lp(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new zr(i);var f=function(){var m=arguments,y=c?c.apply(this,m):m[0],S=f.cache;if(S.has(y))return S.get(y);var E=a.apply(this,m);return f.cache=S.set(y,E)||S,E};return f.cache=new(lp.Cache||ai),f}lp.Cache=ai;function up(a){if(typeof a!="function")throw new zr(i);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function CU(a){return L_(2,a)}var NU=vO(function(a,c){c=c.length==1&&xe(c[0])?Xe(c[0],Er(le())):Xe(Dt(c,1),Er(le()));var f=c.length;return ke(function(m){for(var y=-1,S=Lt(m.length,f);++y<S;)m[y]=c[y].call(this,m[y]);return _r(a,this,m)})}),hx=ke(function(a,c){var f=Ci(c,ka(hx));return ci(a,Z,t,c,f)}),W_=ke(function(a,c){var f=Ci(c,ka(W_));return ci(a,ne,t,c,f)}),OU=li(function(a,c){return ci(a,de,t,t,t,c)});function LU(a,c){if(typeof a!="function")throw new zr(i);return c=c===t?c:be(c),ke(a,c)}function UU(a,c){if(typeof a!="function")throw new zr(i);return c=c==null?0:xt(be(c),0),ke(function(f){var m=f[c],y=Bi(f,0,c);return m&&Fi(y,m),_r(a,this,y)})}function VU(a,c,f){var m=!0,y=!0;if(typeof a!="function")throw new zr(i);return et(f)&&(m="leading"in f?!!f.leading:m,y="trailing"in f?!!f.trailing:y),H_(a,c,{leading:m,maxWait:c,trailing:y})}function BU(a){return O_(a,1)}function HU(a,c){return hx(Jy(c),a)}function WU(){if(!arguments.length)return[];var a=arguments[0];return xe(a)?a:[a]}function $U(a){return Kr(a,h)}function qU(a,c){return c=typeof c=="function"?c:t,Kr(a,h,c)}function jU(a){return Kr(a,p|h)}function zU(a,c){return c=typeof c=="function"?c:t,Kr(a,p|h,c)}function GU(a,c){return c==null||Mw(a,c,wt(c))}function Sn(a,c){return a===c||a!==a&&c!==c}var KU=rp(Hy),QU=rp(function(a,c){return a>=c}),Io=Nw(function(){return arguments}())?Nw:function(a){return it(a)&&$e.call(a,"callee")&&!vw.call(a,"callee")},xe=L.isArray,ZU=rw?Er(rw):iO;function cr(a){return a!=null&&pp(a.length)&&!pi(a)}function ct(a){return it(a)&&cr(a)}function YU(a){return a===!0||a===!1||it(a)&&Gt(a)==hn}var Hi=pN||Rx,XU=nw?Er(nw):oO;function JU(a){return it(a)&&a.nodeType===1&&!_c(a)}function e2(a){if(a==null)return!0;if(cr(a)&&(xe(a)||typeof a=="string"||typeof a.splice=="function"||Hi(a)||Pa(a)||Io(a)))return!a.length;var c=Ut(a);if(c==gn||c==yn)return!a.size;if(bc(a))return!qy(a).length;for(var f in a)if($e.call(a,f))return!1;return!0}function t2(a,c){return Tc(a,c)}function r2(a,c,f){f=typeof f=="function"?f:t;var m=f?f(a,c):t;return m===t?Tc(a,c,t,f):!!m}function gx(a){if(!it(a))return!1;var c=Gt(a);return c==ni||c==wo||typeof a.message=="string"&&typeof a.name=="string"&&!_c(a)}function n2(a){return typeof a=="number"&&ww(a)}function pi(a){if(!et(a))return!1;var c=Gt(a);return c==ha||c==Ab||c==wr||c==kF}function $_(a){return typeof a=="number"&&a==be(a)}function pp(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Q}function et(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function it(a){return a!=null&&typeof a=="object"}var q_=iw?Er(iw):sO;function i2(a,c){return a===c||$y(a,c,ax(c))}function o2(a,c,f){return f=typeof f=="function"?f:t,$y(a,c,ax(c),f)}function a2(a){return j_(a)&&a!=+a}function s2(a){if(qO(a))throw new ge(n);return Ow(a)}function c2(a){return a===null}function l2(a){return a==null}function j_(a){return typeof a=="number"||it(a)&&Gt(a)==oc}function _c(a){if(!it(a)||Gt(a)!=ii)return!1;var c=Uu(a);if(c===null)return!0;var f=$e.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&Cu.call(f)==oN}var yx=ow?Er(ow):cO;function u2(a){return $_(a)&&a>=-Q&&a<=Q}var z_=aw?Er(aw):lO;function fp(a){return typeof a=="string"||!xe(a)&&it(a)&&Gt(a)==sc}function kr(a){return typeof a=="symbol"||it(a)&&Gt(a)==Eu}var Pa=sw?Er(sw):uO;function p2(a){return a===t}function f2(a){return it(a)&&Ut(a)==cc}function d2(a){return it(a)&&Gt(a)==MF}var m2=rp(jy),h2=rp(function(a,c){return a<=c});function G_(a){if(!a)return[];if(cr(a))return fp(a)?xn(a):sr(a);if(pc&&a[pc])return GC(a[pc]());var c=Ut(a),f=c==gn?Iy:c==yn?Du:Ma;return f(a)}function fi(a){if(!a)return a===0?a:0;if(a=Yr(a),a===K||a===-K){var c=a<0?-1:1;return c*te}return a===a?a:0}function be(a){var c=fi(a),f=c%1;return c===c?f?c-f:c:0}function K_(a){return a?Po(be(a),0,re):0}function Yr(a){if(typeof a=="number")return a;if(kr(a))return me;if(et(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=et(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=dw(a);var f=ZF.test(a);return f||XF.test(a)?AC(a.slice(2),f?2:8):QF.test(a)?me:+a}function Q_(a){return Ln(a,lr(a))}function g2(a){return a?Po(be(a),-Q,Q):a===0?a:0}function He(a){return a==null?"":Rr(a)}var y2=Ea(function(a,c){if(bc(c)||cr(c)){Ln(c,wt(c),a);return}for(var f in c)$e.call(c,f)&&gc(a,f,c[f])}),Z_=Ea(function(a,c){Ln(c,lr(c),a)}),dp=Ea(function(a,c,f,m){Ln(c,lr(c),a,m)}),x2=Ea(function(a,c,f,m){Ln(c,wt(c),a,m)}),T2=li(Uy);function S2(a,c){var f=_a(a);return c==null?f:Pw(f,c)}var v2=ke(function(a,c){a=ze(a);var f=-1,m=c.length,y=m>2?c[2]:t;for(y&&Kt(c[0],c[1],y)&&(m=1);++f<m;)for(var S=c[f],E=lr(S),R=-1,M=E.length;++R<M;){var B=E[R],H=a[B];(H===t||Sn(H,va[B])&&!$e.call(a,B))&&(a[B]=S[B])}return a}),b2=ke(function(a){return a.push(t,d_),_r(Y_,t,a)});function w2(a,c){return lw(a,le(c,3),On)}function _2(a,c){return lw(a,le(c,3),By)}function E2(a,c){return a==null?a:Vy(a,le(c,3),lr)}function R2(a,c){return a==null?a:Fw(a,le(c,3),lr)}function k2(a,c){return a&&On(a,le(c,3))}function P2(a,c){return a&&By(a,le(c,3))}function M2(a){return a==null?[]:Ku(a,wt(a))}function A2(a){return a==null?[]:Ku(a,lr(a))}function xx(a,c,f){var m=a==null?t:Mo(a,c);return m===t?f:m}function D2(a,c){return a!=null&&g_(a,c,eO)}function Tx(a,c){return a!=null&&g_(a,c,tO)}var I2=c_(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=Nu.call(c)),a[c]=f},vx(ur)),F2=c_(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=Nu.call(c)),$e.call(a,c)?a[c].push(f):a[c]=[f]},le),C2=ke(xc);function wt(a){return cr(a)?Rw(a):qy(a)}function lr(a){return cr(a)?Rw(a,!0):pO(a)}function N2(a,c){var f={};return c=le(c,3),On(a,function(m,y,S){si(f,c(m,y,S),m)}),f}function O2(a,c){var f={};return c=le(c,3),On(a,function(m,y,S){si(f,y,c(m,y,S))}),f}var L2=Ea(function(a,c,f){Qu(a,c,f)}),Y_=Ea(function(a,c,f,m){Qu(a,c,f,m)}),U2=li(function(a,c){var f={};if(a==null)return f;var m=!1;c=Xe(c,function(S){return S=Vi(S,a),m||(m=S.length>1),S}),Ln(a,ix(a),f),m&&(f=Kr(f,p|d|h,IO));for(var y=c.length;y--;)Zy(f,c[y]);return f});function V2(a,c){return X_(a,up(le(c)))}var B2=li(function(a,c){return a==null?{}:dO(a,c)});function X_(a,c){if(a==null)return{};var f=Xe(ix(a),function(m){return[m]});return c=le(c),$w(a,f,function(m,y){return c(m,y[0])})}function H2(a,c,f){c=Vi(c,a);var m=-1,y=c.length;for(y||(y=1,a=t);++m<y;){var S=a==null?t:a[Un(c[m])];S===t&&(m=y,S=f),a=pi(S)?S.call(a):S}return a}function W2(a,c,f){return a==null?a:Sc(a,c,f)}function $2(a,c,f,m){return m=typeof m=="function"?m:t,a==null?a:Sc(a,c,f,m)}var J_=p_(wt),eE=p_(lr);function q2(a,c,f){var m=xe(a),y=m||Hi(a)||Pa(a);if(c=le(c,4),f==null){var S=a&&a.constructor;y?f=m?new S:[]:et(a)?f=pi(S)?_a(Uu(a)):{}:f={}}return(y?jr:On)(a,function(E,R,M){return c(f,E,R,M)}),f}function j2(a,c){return a==null?!0:Zy(a,c)}function z2(a,c,f){return a==null?a:Kw(a,c,Jy(f))}function G2(a,c,f,m){return m=typeof m=="function"?m:t,a==null?a:Kw(a,c,Jy(f),m)}function Ma(a){return a==null?[]:Dy(a,wt(a))}function K2(a){return a==null?[]:Dy(a,lr(a))}function Q2(a,c,f){return f===t&&(f=c,c=t),f!==t&&(f=Yr(f),f=f===f?f:0),c!==t&&(c=Yr(c),c=c===c?c:0),Po(Yr(a),c,f)}function Z2(a,c,f){return c=fi(c),f===t?(f=c,c=0):f=fi(f),a=Yr(a),rO(a,c,f)}function Y2(a,c,f){if(f&&typeof f!="boolean"&&Kt(a,c,f)&&(c=f=t),f===t&&(typeof c=="boolean"?(f=c,c=t):typeof a=="boolean"&&(f=a,a=t)),a===t&&c===t?(a=0,c=1):(a=fi(a),c===t?(c=a,a=0):c=fi(c)),a>c){var m=a;a=c,c=m}if(f||a%1||c%1){var y=_w();return Lt(a+y*(c-a+MC("1e-"+((y+"").length-1))),c)}return Gy(a,c)}var X2=Ra(function(a,c,f){return c=c.toLowerCase(),a+(f?tE(c):c)});function tE(a){return Sx(He(a).toLowerCase())}function rE(a){return a=He(a),a&&a.replace(eC,WC).replace(TC,"")}function J2(a,c,f){a=He(a),c=Rr(c);var m=a.length;f=f===t?m:Po(be(f),0,m);var y=f;return f-=c.length,f>=0&&a.slice(f,y)==c}function eV(a){return a=He(a),a&&CF.test(a)?a.replace(Fb,$C):a}function tV(a){return a=He(a),a&&BF.test(a)?a.replace(hy,"\\$&"):a}var rV=Ra(function(a,c,f){return a+(f?"-":"")+c.toLowerCase()}),nV=Ra(function(a,c,f){return a+(f?" ":"")+c.toLowerCase()}),iV=o_("toLowerCase");function oV(a,c,f){a=He(a),c=be(c);var m=c?Sa(a):0;if(!c||m>=c)return a;var y=(c-m)/2;return tp(Wu(y),f)+a+tp(Hu(y),f)}function aV(a,c,f){a=He(a),c=be(c);var m=c?Sa(a):0;return c&&m<c?a+tp(c-m,f):a}function sV(a,c,f){a=He(a),c=be(c);var m=c?Sa(a):0;return c&&m<c?tp(c-m,f)+a:a}function cV(a,c,f){return f||c==null?c=0:c&&(c=+c),hN(He(a).replace(gy,""),c||0)}function lV(a,c,f){return(f?Kt(a,c,f):c===t)?c=1:c=be(c),Ky(He(a),c)}function uV(){var a=arguments,c=He(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var pV=Ra(function(a,c,f){return a+(f?"_":"")+c.toLowerCase()});function fV(a,c,f){return f&&typeof f!="number"&&Kt(a,c,f)&&(c=f=t),f=f===t?re:f>>>0,f?(a=He(a),a&&(typeof c=="string"||c!=null&&!yx(c))&&(c=Rr(c),!c&&Ta(a))?Bi(xn(a),0,f):a.split(c,f)):[]}var dV=Ra(function(a,c,f){return a+(f?" ":"")+Sx(c)});function mV(a,c,f){return a=He(a),f=f==null?0:Po(be(f),0,a.length),c=Rr(c),a.slice(f,f+c.length)==c}function hV(a,c,f){var m=T.templateSettings;f&&Kt(a,c,f)&&(c=t),a=He(a),c=dp({},c,m,f_);var y=dp({},c.imports,m.imports,f_),S=wt(y),E=Dy(y,S),R,M,B=0,H=c.interpolate||Ru,q="__p += '",Y=Fy((c.escape||Ru).source+"|"+H.source+"|"+(H===Cb?KF:Ru).source+"|"+(c.evaluate||Ru).source+"|$","g"),ie="//# sourceURL="+($e.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_C+"]")+`
`;a.replace(Y,function(pe,Pe,Ie,Pr,Qt,Mr){return Ie||(Ie=Pr),q+=a.slice(B,Mr).replace(tC,qC),Pe&&(R=!0,q+=`' +
__e(`+Pe+`) +
'`),Qt&&(M=!0,q+=`';
`+Qt+`;
__p += '`),Ie&&(q+=`' +
((__t = (`+Ie+`)) == null ? '' : __t) +
'`),B=Mr+pe.length,pe}),q+=`';
`;var ue=$e.call(c,"variable")&&c.variable;if(!ue)q=`with (obj) {
`+q+`
}
`;else if(zF.test(ue))throw new ge(o);q=(M?q.replace(AF,""):q).replace(DF,"$1").replace(IF,"$1;"),q="function("+(ue||"obj")+`) {
`+(ue?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+q+`return __p
}`;var Ee=iE(function(){return Le(S,ie+"return "+q).apply(t,E)});if(Ee.source=q,gx(Ee))throw Ee;return Ee}function gV(a){return He(a).toLowerCase()}function yV(a){return He(a).toUpperCase()}function xV(a,c,f){if(a=He(a),a&&(f||c===t))return dw(a);if(!a||!(c=Rr(c)))return a;var m=xn(a),y=xn(c),S=mw(m,y),E=hw(m,y)+1;return Bi(m,S,E).join("")}function TV(a,c,f){if(a=He(a),a&&(f||c===t))return a.slice(0,yw(a)+1);if(!a||!(c=Rr(c)))return a;var m=xn(a),y=hw(m,xn(c))+1;return Bi(m,0,y).join("")}function SV(a,c,f){if(a=He(a),a&&(f||c===t))return a.replace(gy,"");if(!a||!(c=Rr(c)))return a;var m=xn(a),y=mw(m,xn(c));return Bi(m,y).join("")}function vV(a,c){var f=At,m=nt;if(et(c)){var y="separator"in c?c.separator:y;f="length"in c?be(c.length):f,m="omission"in c?Rr(c.omission):m}a=He(a);var S=a.length;if(Ta(a)){var E=xn(a);S=E.length}if(f>=S)return a;var R=f-Sa(m);if(R<1)return m;var M=E?Bi(E,0,R).join(""):a.slice(0,R);if(y===t)return M+m;if(E&&(R+=M.length-R),yx(y)){if(a.slice(R).search(y)){var B,H=M;for(y.global||(y=Fy(y.source,He(Nb.exec(y))+"g")),y.lastIndex=0;B=y.exec(H);)var q=B.index;M=M.slice(0,q===t?R:q)}}else if(a.indexOf(Rr(y),R)!=R){var Y=M.lastIndexOf(y);Y>-1&&(M=M.slice(0,Y))}return M+m}function bV(a){return a=He(a),a&&FF.test(a)?a.replace(Ib,YC):a}var wV=Ra(function(a,c,f){return a+(f?" ":"")+c.toUpperCase()}),Sx=o_("toUpperCase");function nE(a,c,f){return a=He(a),c=f?t:c,c===t?zC(a)?eN(a):LC(a):a.match(c)||[]}var iE=ke(function(a,c){try{return _r(a,t,c)}catch(f){return gx(f)?f:new ge(f)}}),_V=li(function(a,c){return jr(c,function(f){f=Un(f),si(a,f,mx(a[f],a))}),a});function EV(a){var c=a==null?0:a.length,f=le();return a=c?Xe(a,function(m){if(typeof m[1]!="function")throw new zr(i);return[f(m[0]),m[1]]}):[],ke(function(m){for(var y=-1;++y<c;){var S=a[y];if(_r(S[0],this,m))return _r(S[1],this,m)}})}function RV(a){return YN(Kr(a,p))}function vx(a){return function(){return a}}function kV(a,c){return a==null||a!==a?c:a}var PV=s_(),MV=s_(!0);function ur(a){return a}function bx(a){return Lw(typeof a=="function"?a:Kr(a,p))}function AV(a){return Vw(Kr(a,p))}function DV(a,c){return Bw(a,Kr(c,p))}var IV=ke(function(a,c){return function(f){return xc(f,a,c)}}),FV=ke(function(a,c){return function(f){return xc(a,f,c)}});function wx(a,c,f){var m=wt(c),y=Ku(c,m);f==null&&!(et(c)&&(y.length||!m.length))&&(f=c,c=a,a=this,y=Ku(c,wt(c)));var S=!(et(f)&&"chain"in f)||!!f.chain,E=pi(a);return jr(y,function(R){var M=c[R];a[R]=M,E&&(a.prototype[R]=function(){var B=this.__chain__;if(S||B){var H=a(this.__wrapped__),q=H.__actions__=sr(this.__actions__);return q.push({func:M,args:arguments,thisArg:a}),H.__chain__=B,H}return M.apply(a,Fi([this.value()],arguments))})}),a}function CV(){return bt._===this&&(bt._=aN),this}function _x(){}function NV(a){return a=be(a),ke(function(c){return Hw(c,a)})}var OV=tx(Xe),LV=tx(cw),UV=tx(Ry);function oE(a){return cx(a)?ky(Un(a)):mO(a)}function VV(a){return function(c){return a==null?t:Mo(a,c)}}var BV=l_(),HV=l_(!0);function Ex(){return[]}function Rx(){return!1}function WV(){return{}}function $V(){return""}function qV(){return!0}function jV(a,c){if(a=be(a),a<1||a>Q)return[];var f=re,m=Lt(a,re);c=le(c),a-=re;for(var y=Ay(m,c);++f<a;)c(f);return y}function zV(a){return xe(a)?Xe(a,Un):kr(a)?[a]:sr(E_(He(a)))}function GV(a){var c=++iN;return He(a)+c}var KV=ep(function(a,c){return a+c},0),QV=rx("ceil"),ZV=ep(function(a,c){return a/c},1),YV=rx("floor");function XV(a){return a&&a.length?Gu(a,ur,Hy):t}function JV(a,c){return a&&a.length?Gu(a,le(c,2),Hy):t}function eB(a){return pw(a,ur)}function tB(a,c){return pw(a,le(c,2))}function rB(a){return a&&a.length?Gu(a,ur,jy):t}function nB(a,c){return a&&a.length?Gu(a,le(c,2),jy):t}var iB=ep(function(a,c){return a*c},1),oB=rx("round"),aB=ep(function(a,c){return a-c},0);function sB(a){return a&&a.length?My(a,ur):0}function cB(a,c){return a&&a.length?My(a,le(c,2)):0}return T.after=AU,T.ary=O_,T.assign=y2,T.assignIn=Z_,T.assignInWith=dp,T.assignWith=x2,T.at=T2,T.before=L_,T.bind=mx,T.bindAll=_V,T.bindKey=U_,T.castArray=WU,T.chain=F_,T.chunk=YO,T.compact=XO,T.concat=JO,T.cond=EV,T.conforms=RV,T.constant=vx,T.countBy=sU,T.create=S2,T.curry=V_,T.curryRight=B_,T.debounce=H_,T.defaults=v2,T.defaultsDeep=b2,T.defer=DU,T.delay=IU,T.difference=eL,T.differenceBy=tL,T.differenceWith=rL,T.drop=nL,T.dropRight=iL,T.dropRightWhile=oL,T.dropWhile=aL,T.fill=sL,T.filter=lU,T.flatMap=fU,T.flatMapDeep=dU,T.flatMapDepth=mU,T.flatten=M_,T.flattenDeep=cL,T.flattenDepth=lL,T.flip=FU,T.flow=PV,T.flowRight=MV,T.fromPairs=uL,T.functions=M2,T.functionsIn=A2,T.groupBy=hU,T.initial=fL,T.intersection=dL,T.intersectionBy=mL,T.intersectionWith=hL,T.invert=I2,T.invertBy=F2,T.invokeMap=yU,T.iteratee=bx,T.keyBy=xU,T.keys=wt,T.keysIn=lr,T.map=sp,T.mapKeys=N2,T.mapValues=O2,T.matches=AV,T.matchesProperty=DV,T.memoize=lp,T.merge=L2,T.mergeWith=Y_,T.method=IV,T.methodOf=FV,T.mixin=wx,T.negate=up,T.nthArg=NV,T.omit=U2,T.omitBy=V2,T.once=CU,T.orderBy=TU,T.over=OV,T.overArgs=NU,T.overEvery=LV,T.overSome=UV,T.partial=hx,T.partialRight=W_,T.partition=SU,T.pick=B2,T.pickBy=X_,T.property=oE,T.propertyOf=VV,T.pull=TL,T.pullAll=D_,T.pullAllBy=SL,T.pullAllWith=vL,T.pullAt=bL,T.range=BV,T.rangeRight=HV,T.rearg=OU,T.reject=wU,T.remove=wL,T.rest=LU,T.reverse=fx,T.sampleSize=EU,T.set=W2,T.setWith=$2,T.shuffle=RU,T.slice=_L,T.sortBy=MU,T.sortedUniq=DL,T.sortedUniqBy=IL,T.split=fV,T.spread=UU,T.tail=FL,T.take=CL,T.takeRight=NL,T.takeRightWhile=OL,T.takeWhile=LL,T.tap=XL,T.throttle=VU,T.thru=ap,T.toArray=G_,T.toPairs=J_,T.toPairsIn=eE,T.toPath=zV,T.toPlainObject=Q_,T.transform=q2,T.unary=BU,T.union=UL,T.unionBy=VL,T.unionWith=BL,T.uniq=HL,T.uniqBy=WL,T.uniqWith=$L,T.unset=j2,T.unzip=dx,T.unzipWith=I_,T.update=z2,T.updateWith=G2,T.values=Ma,T.valuesIn=K2,T.without=qL,T.words=nE,T.wrap=HU,T.xor=jL,T.xorBy=zL,T.xorWith=GL,T.zip=KL,T.zipObject=QL,T.zipObjectDeep=ZL,T.zipWith=YL,T.entries=J_,T.entriesIn=eE,T.extend=Z_,T.extendWith=dp,wx(T,T),T.add=KV,T.attempt=iE,T.camelCase=X2,T.capitalize=tE,T.ceil=QV,T.clamp=Q2,T.clone=$U,T.cloneDeep=jU,T.cloneDeepWith=zU,T.cloneWith=qU,T.conformsTo=GU,T.deburr=rE,T.defaultTo=kV,T.divide=ZV,T.endsWith=J2,T.eq=Sn,T.escape=eV,T.escapeRegExp=tV,T.every=cU,T.find=uU,T.findIndex=k_,T.findKey=w2,T.findLast=pU,T.findLastIndex=P_,T.findLastKey=_2,T.floor=YV,T.forEach=C_,T.forEachRight=N_,T.forIn=E2,T.forInRight=R2,T.forOwn=k2,T.forOwnRight=P2,T.get=xx,T.gt=KU,T.gte=QU,T.has=D2,T.hasIn=Tx,T.head=A_,T.identity=ur,T.includes=gU,T.indexOf=pL,T.inRange=Z2,T.invoke=C2,T.isArguments=Io,T.isArray=xe,T.isArrayBuffer=ZU,T.isArrayLike=cr,T.isArrayLikeObject=ct,T.isBoolean=YU,T.isBuffer=Hi,T.isDate=XU,T.isElement=JU,T.isEmpty=e2,T.isEqual=t2,T.isEqualWith=r2,T.isError=gx,T.isFinite=n2,T.isFunction=pi,T.isInteger=$_,T.isLength=pp,T.isMap=q_,T.isMatch=i2,T.isMatchWith=o2,T.isNaN=a2,T.isNative=s2,T.isNil=l2,T.isNull=c2,T.isNumber=j_,T.isObject=et,T.isObjectLike=it,T.isPlainObject=_c,T.isRegExp=yx,T.isSafeInteger=u2,T.isSet=z_,T.isString=fp,T.isSymbol=kr,T.isTypedArray=Pa,T.isUndefined=p2,T.isWeakMap=f2,T.isWeakSet=d2,T.join=gL,T.kebabCase=rV,T.last=Zr,T.lastIndexOf=yL,T.lowerCase=nV,T.lowerFirst=iV,T.lt=m2,T.lte=h2,T.max=XV,T.maxBy=JV,T.mean=eB,T.meanBy=tB,T.min=rB,T.minBy=nB,T.stubArray=Ex,T.stubFalse=Rx,T.stubObject=WV,T.stubString=$V,T.stubTrue=qV,T.multiply=iB,T.nth=xL,T.noConflict=CV,T.noop=_x,T.now=cp,T.pad=oV,T.padEnd=aV,T.padStart=sV,T.parseInt=cV,T.random=Y2,T.reduce=vU,T.reduceRight=bU,T.repeat=lV,T.replace=uV,T.result=H2,T.round=oB,T.runInContext=k,T.sample=_U,T.size=kU,T.snakeCase=pV,T.some=PU,T.sortedIndex=EL,T.sortedIndexBy=RL,T.sortedIndexOf=kL,T.sortedLastIndex=PL,T.sortedLastIndexBy=ML,T.sortedLastIndexOf=AL,T.startCase=dV,T.startsWith=mV,T.subtract=aB,T.sum=sB,T.sumBy=cB,T.template=hV,T.times=jV,T.toFinite=fi,T.toInteger=be,T.toLength=K_,T.toLower=gV,T.toNumber=Yr,T.toSafeInteger=g2,T.toString=He,T.toUpper=yV,T.trim=xV,T.trimEnd=TV,T.trimStart=SV,T.truncate=vV,T.unescape=bV,T.uniqueId=GV,T.upperCase=wV,T.upperFirst=Sx,T.each=C_,T.eachRight=N_,T.first=A_,wx(T,function(){var a={};return On(T,function(c,f){$e.call(T.prototype,f)||(a[f]=c)}),a}(),{chain:!1}),T.VERSION=e,jr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){T[a].placeholder=T}),jr(["drop","take"],function(a,c){Ae.prototype[a]=function(f){f=f===t?1:xt(be(f),0);var m=this.__filtered__&&!c?new Ae(this):this.clone();return m.__filtered__?m.__takeCount__=Lt(f,m.__takeCount__):m.__views__.push({size:Lt(f,re),type:a+(m.__dir__<0?"Right":"")}),m},Ae.prototype[a+"Right"]=function(f){return this.reverse()[a](f).reverse()}}),jr(["filter","map","takeWhile"],function(a,c){var f=c+1,m=f==D||f==j;Ae.prototype[a]=function(y){var S=this.clone();return S.__iteratees__.push({iteratee:le(y,3),type:f}),S.__filtered__=S.__filtered__||m,S}}),jr(["head","last"],function(a,c){var f="take"+(c?"Right":"");Ae.prototype[a]=function(){return this[f](1).value()[0]}}),jr(["initial","tail"],function(a,c){var f="drop"+(c?"":"Right");Ae.prototype[a]=function(){return this.__filtered__?new Ae(this):this[f](1)}}),Ae.prototype.compact=function(){return this.filter(ur)},Ae.prototype.find=function(a){return this.filter(a).head()},Ae.prototype.findLast=function(a){return this.reverse().find(a)},Ae.prototype.invokeMap=ke(function(a,c){return typeof a=="function"?new Ae(this):this.map(function(f){return xc(f,a,c)})}),Ae.prototype.reject=function(a){return this.filter(up(le(a)))},Ae.prototype.slice=function(a,c){a=be(a);var f=this;return f.__filtered__&&(a>0||c<0)?new Ae(f):(a<0?f=f.takeRight(-a):a&&(f=f.drop(a)),c!==t&&(c=be(c),f=c<0?f.dropRight(-c):f.take(c-a)),f)},Ae.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Ae.prototype.toArray=function(){return this.take(re)},On(Ae.prototype,function(a,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),m=/^(?:head|last)$/.test(c),y=T[m?"take"+(c=="last"?"Right":""):c],S=m||/^find/.test(c);y&&(T.prototype[c]=function(){var E=this.__wrapped__,R=m?[1]:arguments,M=E instanceof Ae,B=R[0],H=M||xe(E),q=function(Pe){var Ie=y.apply(T,Fi([Pe],R));return m&&Y?Ie[0]:Ie};H&&f&&typeof B=="function"&&B.length!=1&&(M=H=!1);var Y=this.__chain__,ie=!!this.__actions__.length,ue=S&&!Y,Ee=M&&!ie;if(!S&&H){E=Ee?E:new Ae(this);var pe=a.apply(E,R);return pe.__actions__.push({func:ap,args:[q],thisArg:t}),new Gr(pe,Y)}return ue&&Ee?a.apply(this,R):(pe=this.thru(q),ue?m?pe.value()[0]:pe.value():pe)})}),jr(["pop","push","shift","sort","splice","unshift"],function(a){var c=Iu[a],f=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",m=/^(?:pop|shift)$/.test(a);T.prototype[a]=function(){var y=arguments;if(m&&!this.__chain__){var S=this.value();return c.apply(xe(S)?S:[],y)}return this[f](function(E){return c.apply(xe(E)?E:[],y)})}}),On(Ae.prototype,function(a,c){var f=T[c];if(f){var m=f.name+"";$e.call(wa,m)||(wa[m]=[]),wa[m].push({name:c,func:f})}}),wa[Ju(t,w).name]=[{name:"wrapper",func:t}],Ae.prototype.clone=bN,Ae.prototype.reverse=wN,Ae.prototype.value=_N,T.prototype.at=JL,T.prototype.chain=eU,T.prototype.commit=tU,T.prototype.next=rU,T.prototype.plant=iU,T.prototype.reverse=oU,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=aU,T.prototype.first=T.prototype.head,pc&&(T.prototype[pc]=nU),T},Ni=tN();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(bt._=Ni,define(function(){return Ni})):_o?((_o.exports=Ni)._=Ni,by._=Ni):bt._=Ni}).call(qs)});var RI=ot((l2e,EI)=>{"use strict";EI.exports=wI;function wI(t,e,r){t instanceof RegExp&&(t=bI(t,r)),e instanceof RegExp&&(e=bI(e,r));var n=_I(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function bI(t,e){var r=e.match(t);return r?r[0]:null}wI.range=_I;function _I(t,e,r){var n,i,o,s,l,u=r.indexOf(t),p=r.indexOf(e,u+1),d=u;if(u>=0&&p>0){if(t===e)return[u,p];for(n=[],o=r.length;d>=0&&!l;)d==u?(n.push(d),u=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),p]:(i=n.pop(),i<o&&(o=i,s=p),p=r.indexOf(e,d+1)),d=u<p&&u>=0?u:p;n.length&&(l=[o,s])}return l}});var CI=ot((u2e,FI)=>{var kI=RI();FI.exports=Y7;var PI="\0SLASH"+Math.random()+"\0",MI="\0OPEN"+Math.random()+"\0",uv="\0CLOSE"+Math.random()+"\0",AI="\0COMMA"+Math.random()+"\0",DI="\0PERIOD"+Math.random()+"\0";function lv(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function Q7(t){return t.split("\\\\").join(PI).split("\\{").join(MI).split("\\}").join(uv).split("\\,").join(AI).split("\\.").join(DI)}function Z7(t){return t.split(PI).join("\\").split(MI).join("{").split(uv).join("}").split(AI).join(",").split(DI).join(".")}function II(t){if(!t)return[""];var e=[],r=kI("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var l=II(o);return o.length&&(s[s.length-1]+=l.shift(),s.push.apply(s,l)),e.push.apply(e,s),e}function Y7(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Jl(Q7(t),!0).map(Z7)):[]}function X7(t){return"{"+t+"}"}function J7(t){return/^-?0\d/.test(t)}function eQ(t,e){return t<=e}function tQ(t,e){return t>=e}function Jl(t,e){var r=[],n=kI("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?Jl(n.post,!1):[""];if(/\$$/.test(n.pre))for(var s=0;s<o.length;s++){var l=i+"{"+n.body+"}"+o[s];r.push(l)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),p=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=u||p,h=n.body.indexOf(",")>=0;if(!d&&!h)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+uv+n.post,Jl(t)):[t];var g;if(d)g=n.body.split(/\.\./);else if(g=II(n.body),g.length===1&&(g=Jl(g[0],!1).map(X7),g.length===1))return o.map(function(O){return n.pre+g[0]+O});var x;if(d){var v=lv(g[0]),w=lv(g[1]),N=Math.max(g[0].length,g[1].length),A=g.length==3?Math.abs(lv(g[2])):1,U=eQ,Z=w<v;Z&&(A*=-1,U=tQ);var ne=g.some(J7);x=[];for(var he=v;U(he,w);he+=A){var de;if(p)de=String.fromCharCode(he),de==="\\"&&(de="");else if(de=String(he),ne){var dt=N-de.length;if(dt>0){var At=new Array(dt+1).join("0");he<0?de="-"+At+de.slice(1):de=At+de}}x.push(de)}}else{x=[];for(var nt=0;nt<g.length;nt++)x.push.apply(x,Jl(g[nt],!1))}for(var nt=0;nt<x.length;nt++)for(var s=0;s<o.length;s++){var l=i+x[nt]+o[s];(!e||d||l)&&r.push(l)}}return r}});var HZ={};mB(HZ,{default:()=>EF});module.exports=hB(HZ);var kx="cursorless.command",hp=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},ut=class extends hp{constructor(){super(...arguments);this.isVisible=!1}},mt=class extends hp{constructor(){super(...arguments);this.isVisible=!0}};var $Z={"cursorless.toggleDecorations":new mt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new mt("Recompute decoration styles"),"cursorless.recordTestCase":new mt("Record test case"),"cursorless.recordOneTestCaseThenPause":new mt("Record one test case, then pause"),"cursorless.pauseRecording":new mt("Pause test case recording"),"cursorless.resumeRecording":new mt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new mt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new mt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new mt("Show documentation"),"cursorless.showScopeVisualizer":new mt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new mt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new mt("Analyze collected command history"),"cursorless.tutorial.start":new ut("Start a tutorial"),"cursorless.tutorial.next":new mt("Tutorial next"),"cursorless.tutorial.previous":new mt("Tutorial previous"),"cursorless.tutorial.restart":new mt("Tutorial restart"),"cursorless.tutorial.resume":new mt("Tutorial resume"),"cursorless.tutorial.list":new mt("Tutorial list"),"cursorless.documentationOpened":new ut("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new ut("The core cursorless command"),"cursorless.repeatPreviousCommand":new mt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new ut("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new ut("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new ut("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new ut("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new ut("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new ut("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new ut("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new ut("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new ut("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new ut("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new ut("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new ut("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new ut("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new ut("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new ut("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new ut("Redo keyboard targeting changes")};var gp=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var yp=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var xp=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},Vt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Tp=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var gB=typeof global=="object"&&global&&global.Object===Object&&global,Sp=gB;var yB=typeof self=="object"&&self&&self.Object===Object&&self,xB=Sp||yB||Function("return this")(),_t=xB;var TB=_t.Symbol,Zt=TB;var cE=Object.prototype,SB=cE.hasOwnProperty,vB=cE.toString,Ec=Zt?Zt.toStringTag:void 0;function bB(t){var e=SB.call(t,Ec),r=t[Ec];try{t[Ec]=void 0;var n=!0}catch{}var i=vB.call(t);return n&&(e?t[Ec]=r:delete t[Ec]),i}var lE=bB;var wB=Object.prototype,_B=wB.toString;function EB(t){return _B.call(t)}var uE=EB;var RB="[object Null]",kB="[object Undefined]",pE=Zt?Zt.toStringTag:void 0;function PB(t){return t==null?t===void 0?kB:RB:pE&&pE in Object(t)?lE(t):uE(t)}var bn=PB;function MB(t){return t!=null&&typeof t=="object"}var Yt=MB;var AB="[object Symbol]";function DB(t){return typeof t=="symbol"||Yt(t)&&bn(t)==AB}var Ar=DB;function IB(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var Xr=IB;var FB=Array.isArray,Ue=FB;var CB=1/0,fE=Zt?Zt.prototype:void 0,dE=fE?fE.toString:void 0;function mE(t){if(typeof t=="string")return t;if(Ue(t))return Xr(t,mE)+"";if(Ar(t))return dE?dE.call(t):"";var e=t+"";return e=="0"&&1/t==-CB?"-0":e}var hE=mE;var NB=/\s/;function OB(t){for(var e=t.length;e--&&NB.test(t.charAt(e)););return e}var gE=OB;var LB=/^\s+/;function UB(t){return t&&t.slice(0,gE(t)+1).replace(LB,"")}var yE=UB;function VB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Dr=VB;var xE=NaN,BB=/^[-+]0x[0-9a-f]+$/i,HB=/^0b[01]+$/i,WB=/^0o[0-7]+$/i,$B=parseInt;function qB(t){if(typeof t=="number")return t;if(Ar(t))return xE;if(Dr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Dr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=yE(t);var r=HB.test(t);return r||WB.test(t)?$B(t.slice(2),r?2:8):BB.test(t)?xE:+t}var TE=qB;var SE=1/0,jB=17976931348623157e292;function zB(t){if(!t)return t===0?t:0;if(t=TE(t),t===SE||t===-SE){var e=t<0?-1:1;return e*jB}return t===t?t:0}var Aa=zB;function GB(t){var e=Aa(t),r=e%1;return e===e?r?e-r:e:0}var vp=GB;function KB(t){return t}var Bt=KB;var QB="[object AsyncFunction]",ZB="[object Function]",YB="[object GeneratorFunction]",XB="[object Proxy]";function JB(t){if(!Dr(t))return!1;var e=bn(t);return e==ZB||e==YB||e==QB||e==XB}var bp=JB;var eH=_t["__core-js_shared__"],wp=eH;var vE=function(){var t=/[^.]+$/.exec(wp&&wp.keys&&wp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function tH(t){return!!vE&&vE in t}var bE=tH;var rH=Function.prototype,nH=rH.toString;function iH(t){if(t!=null){try{return nH.call(t)}catch{}try{return t+""}catch{}}return""}var mi=iH;var oH=/[\\^$.*+?()[\]{}|]/g,aH=/^\[object .+?Constructor\]$/,sH=Function.prototype,cH=Object.prototype,lH=sH.toString,uH=cH.hasOwnProperty,pH=RegExp("^"+lH.call(uH).replace(oH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fH(t){if(!Dr(t)||bE(t))return!1;var e=bp(t)?pH:aH;return e.test(mi(t))}var wE=fH;function dH(t,e){return t?.[e]}var _E=dH;function mH(t,e){var r=_E(t,e);return wE(r)?r:void 0}var fr=mH;var hH=fr(_t,"WeakMap"),Fo=hH;var gH=Fo&&new Fo,Px=gH;var EE=Object.create,yH=function(){function t(){}return function(e){if(!Dr(e))return{};if(EE)return EE(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),_p=yH;function xH(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var RE=xH;function TH(){}var Da=TH;var SH=4294967295;function Ep(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=SH,this.__views__=[]}Ep.prototype=_p(Da.prototype);Ep.prototype.constructor=Ep;var Ia=Ep;function vH(){}var Rp=vH;var bH=Px?function(t){return Px.get(t)}:Rp,kp=bH;var wH={},Mx=wH;var _H=Object.prototype,EH=_H.hasOwnProperty;function RH(t){for(var e=t.name+"",r=Mx[e],n=EH.call(Mx,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Fa=RH;function Pp(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Pp.prototype=_p(Da.prototype);Pp.prototype.constructor=Pp;var Wi=Pp;function kH(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var $i=kH;function PH(t){if(t instanceof Ia)return t.clone();var e=new Wi(t.__wrapped__,t.__chain__);return e.__actions__=$i(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var kE=PH;var MH=Object.prototype,AH=MH.hasOwnProperty;function Mp(t){if(Yt(t)&&!Ue(t)&&!(t instanceof Ia)){if(t instanceof Wi)return t;if(AH.call(t,"__wrapped__"))return kE(t)}return new Wi(t)}Mp.prototype=Da.prototype;Mp.prototype.constructor=Mp;var PE=Mp;function DH(t){var e=Fa(t),r=PE[e];if(typeof r!="function"||!(e in Ia.prototype))return!1;if(t===r)return!0;var n=kp(r);return!!n&&t===n[0]}var Ax=DH;var IH=800,FH=16,CH=Date.now;function NH(t){var e=0,r=0;return function(){var n=CH(),i=FH-(n-r);if(r=n,i>0){if(++e>=IH)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var ME=NH;function OH(t){return function(){return t}}var AE=OH;var LH=function(){try{var t=fr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Ca=LH;var UH=Ca?function(t,e){return Ca(t,"toString",{configurable:!0,enumerable:!1,value:AE(e),writable:!0})}:Bt,DE=UH;var VH=ME(DE),Ap=VH;function BH(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Dp=BH;function HH(t){return t!==t}var IE=HH;function WH(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var FE=WH;function $H(t,e,r){return e===e?FE(t,e,r):Dp(t,IE,r)}var Ip=$H;function qH(t,e){var r=t==null?0:t.length;return!!r&&Ip(t,e,0)>-1}var CE=qH;var jH=9007199254740991,zH=/^(?:0|[1-9]\d*)$/;function GH(t,e){var r=typeof t;return e=e??jH,!!e&&(r=="number"||r!="symbol"&&zH.test(t))&&t>-1&&t%1==0&&t<e}var Na=GH;function KH(t,e,r){e=="__proto__"&&Ca?Ca(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var NE=KH;function QH(t,e){return t===e||t!==t&&e!==e}var Oa=QH;var OE=Math.max;function ZH(t,e,r){return e=OE(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=OE(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),RE(t,this,l)}}var Fp=ZH;function YH(t,e){return Ap(Fp(t,e,Bt),t+"")}var La=YH;var XH=9007199254740991;function JH(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=XH}var Ua=JH;function eW(t){return t!=null&&Ua(t.length)&&!bp(t)}var Vn=eW;function tW(t,e,r){if(!Dr(r))return!1;var n=typeof e;return(n=="number"?Vn(r)&&Na(e,r.length):n=="string"&&e in r)?Oa(r[e],t):!1}var Co=tW;var rW=Object.prototype;function nW(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||rW;return t===r}var LE=nW;function iW(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Cp=iW;var oW="[object Arguments]";function aW(t){return Yt(t)&&bn(t)==oW}var Dx=aW;var UE=Object.prototype,sW=UE.hasOwnProperty,cW=UE.propertyIsEnumerable,lW=Dx(function(){return arguments}())?Dx:function(t){return Yt(t)&&sW.call(t,"callee")&&!cW.call(t,"callee")},Va=lW;function uW(){return!1}var VE=uW;var WE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,BE=WE&&typeof module=="object"&&module&&!module.nodeType&&module,pW=BE&&BE.exports===WE,HE=pW?_t.Buffer:void 0,fW=HE?HE.isBuffer:void 0,dW=fW||VE,Rc=dW;var mW="[object Arguments]",hW="[object Array]",gW="[object Boolean]",yW="[object Date]",xW="[object Error]",TW="[object Function]",SW="[object Map]",vW="[object Number]",bW="[object Object]",wW="[object RegExp]",_W="[object Set]",EW="[object String]",RW="[object WeakMap]",kW="[object ArrayBuffer]",PW="[object DataView]",MW="[object Float32Array]",AW="[object Float64Array]",DW="[object Int8Array]",IW="[object Int16Array]",FW="[object Int32Array]",CW="[object Uint8Array]",NW="[object Uint8ClampedArray]",OW="[object Uint16Array]",LW="[object Uint32Array]",Ye={};Ye[MW]=Ye[AW]=Ye[DW]=Ye[IW]=Ye[FW]=Ye[CW]=Ye[NW]=Ye[OW]=Ye[LW]=!0;Ye[mW]=Ye[hW]=Ye[kW]=Ye[gW]=Ye[PW]=Ye[yW]=Ye[xW]=Ye[TW]=Ye[SW]=Ye[vW]=Ye[bW]=Ye[wW]=Ye[_W]=Ye[EW]=Ye[RW]=!1;function UW(t){return Yt(t)&&Ua(t.length)&&!!Ye[bn(t)]}var $E=UW;function VW(t){return function(e){return t(e)}}var Ba=VW;var qE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,kc=qE&&typeof module=="object"&&module&&!module.nodeType&&module,BW=kc&&kc.exports===qE,Ix=BW&&Sp.process,HW=function(){try{var t=kc&&kc.require&&kc.require("util").types;return t||Ix&&Ix.binding&&Ix.binding("util")}catch{}}(),Fx=HW;var jE=Fx&&Fx.isTypedArray,WW=jE?Ba(jE):$E,Np=WW;var $W=Object.prototype,qW=$W.hasOwnProperty;function jW(t,e){var r=Ue(t),n=!r&&Va(t),i=!r&&!n&&Rc(t),o=!r&&!n&&!i&&Np(t),s=r||n||i||o,l=s?Cp(t.length,String):[],u=l.length;for(var p in t)(e||qW.call(t,p))&&!(s&&(p=="length"||i&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||Na(p,u)))&&l.push(p);return l}var zE=jW;function zW(t,e){return function(r){return t(e(r))}}var GE=zW;var GW=GE(Object.keys,Object),KE=GW;var KW=Object.prototype,QW=KW.hasOwnProperty;function ZW(t){if(!LE(t))return KE(t);var e=[];for(var r in Object(t))QW.call(t,r)&&r!="constructor"&&e.push(r);return e}var QE=ZW;function YW(t){return Vn(t)?zE(t):QE(t)}var qi=YW;var XW=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,JW=/^\w*$/;function e$(t,e){if(Ue(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Ar(t)?!0:JW.test(t)||!XW.test(t)||e!=null&&t in Object(e)}var Ha=e$;var t$=fr(Object,"create"),hi=t$;function r$(){this.__data__=hi?hi(null):{},this.size=0}var ZE=r$;function n$(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var YE=n$;var i$="__lodash_hash_undefined__",o$=Object.prototype,a$=o$.hasOwnProperty;function s$(t){var e=this.__data__;if(hi){var r=e[t];return r===i$?void 0:r}return a$.call(e,t)?e[t]:void 0}var XE=s$;var c$=Object.prototype,l$=c$.hasOwnProperty;function u$(t){var e=this.__data__;return hi?e[t]!==void 0:l$.call(e,t)}var JE=u$;var p$="__lodash_hash_undefined__";function f$(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=hi&&e===void 0?p$:e,this}var e0=f$;function Wa(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Wa.prototype.clear=ZE;Wa.prototype.delete=YE;Wa.prototype.get=XE;Wa.prototype.has=JE;Wa.prototype.set=e0;var Cx=Wa;function d$(){this.__data__=[],this.size=0}var t0=d$;function m$(t,e){for(var r=t.length;r--;)if(Oa(t[r][0],e))return r;return-1}var ji=m$;var h$=Array.prototype,g$=h$.splice;function y$(t){var e=this.__data__,r=ji(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():g$.call(e,r,1),--this.size,!0}var r0=y$;function x$(t){var e=this.__data__,r=ji(e,t);return r<0?void 0:e[r][1]}var n0=x$;function T$(t){return ji(this.__data__,t)>-1}var i0=T$;function S$(t,e){var r=this.__data__,n=ji(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var o0=S$;function $a(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}$a.prototype.clear=t0;$a.prototype.delete=r0;$a.prototype.get=n0;$a.prototype.has=i0;$a.prototype.set=o0;var zi=$a;var v$=fr(_t,"Map"),Gi=v$;function b$(){this.size=0,this.__data__={hash:new Cx,map:new(Gi||zi),string:new Cx}}var a0=b$;function w$(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var s0=w$;function _$(t,e){var r=t.__data__;return s0(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Ki=_$;function E$(t){var e=Ki(this,t).delete(t);return this.size-=e?1:0,e}var c0=E$;function R$(t){return Ki(this,t).get(t)}var l0=R$;function k$(t){return Ki(this,t).has(t)}var u0=k$;function P$(t,e){var r=Ki(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var p0=P$;function qa(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}qa.prototype.clear=a0;qa.prototype.delete=c0;qa.prototype.get=l0;qa.prototype.has=u0;qa.prototype.set=p0;var No=qa;var M$="Expected a function";function Nx(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(M$);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Nx.Cache||No),r}Nx.Cache=No;var Pc=Nx;var A$=500;function D$(t){var e=Pc(t,function(n){return r.size===A$&&r.clear(),n}),r=e.cache;return e}var f0=D$;var I$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,F$=/\\(\\)?/g,C$=f0(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(I$,function(r,n,i,o){e.push(i?o.replace(F$,"$1"):n||r)}),e}),d0=C$;function N$(t){return t==null?"":hE(t)}var wn=N$;function O$(t,e){return Ue(t)?t:Ha(t,e)?[t]:d0(wn(t))}var Op=O$;var L$=1/0;function U$(t){if(typeof t=="string"||Ar(t))return t;var e=t+"";return e=="0"&&1/t==-L$?"-0":e}var Qi=U$;function V$(t,e){e=Op(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Qi(e[r++])];return r&&r==n?t:void 0}var ja=V$;function B$(t,e,r){var n=t==null?void 0:ja(t,e);return n===void 0?r:n}var Oo=B$;function H$(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var za=H$;var m0=Zt?Zt.isConcatSpreadable:void 0;function W$(t){return Ue(t)||Va(t)||!!(m0&&t&&t[m0])}var h0=W$;function g0(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=h0),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?g0(l,e-1,r,n,i):za(i,l):n||(i[i.length]=l)}return i}var Ga=g0;function $$(t){var e=t==null?0:t.length;return e?Ga(t,1):[]}var tt=$$;function q$(t){return Ap(Fp(t,void 0,tt),t+"")}var y0=q$;function j$(t){return function(e){return t?.[e]}}var x0=j$;var z$={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},G$=x0(z$),T0=G$;var K$=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Q$="\\u0300-\\u036f",Z$="\\ufe20-\\ufe2f",Y$="\\u20d0-\\u20ff",X$=Q$+Z$+Y$,J$="["+X$+"]",e3=RegExp(J$,"g");function t3(t){return t=wn(t),t&&t.replace(K$,T0).replace(e3,"")}var Ox=t3;function r3(){this.__data__=new zi,this.size=0}var S0=r3;function n3(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var v0=n3;function i3(t){return this.__data__.get(t)}var b0=i3;function o3(t){return this.__data__.has(t)}var w0=o3;var a3=200;function s3(t,e){var r=this.__data__;if(r instanceof zi){var n=r.__data__;if(!Gi||n.length<a3-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new No(n)}return r.set(t,e),this.size=r.size,this}var _0=s3;function Ka(t){var e=this.__data__=new zi(t);this.size=e.size}Ka.prototype.clear=S0;Ka.prototype.delete=v0;Ka.prototype.get=b0;Ka.prototype.has=w0;Ka.prototype.set=_0;var Qa=Ka;function c3(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var Lp=c3;function l3(){return[]}var E0=l3;var u3=Object.prototype,p3=u3.propertyIsEnumerable,R0=Object.getOwnPropertySymbols,f3=R0?function(t){return t==null?[]:(t=Object(t),Lp(R0(t),function(e){return p3.call(t,e)}))}:E0,k0=f3;function d3(t,e,r){var n=e(t);return Ue(t)?n:za(n,r(t))}var P0=d3;function m3(t){return P0(t,qi,k0)}var Lx=m3;var h3=fr(_t,"DataView"),Up=h3;var g3=fr(_t,"Promise"),Vp=g3;var y3=fr(_t,"Set"),Zi=y3;var M0="[object Map]",x3="[object Object]",A0="[object Promise]",D0="[object Set]",I0="[object WeakMap]",F0="[object DataView]",T3=mi(Up),S3=mi(Gi),v3=mi(Vp),b3=mi(Zi),w3=mi(Fo),Lo=bn;(Up&&Lo(new Up(new ArrayBuffer(1)))!=F0||Gi&&Lo(new Gi)!=M0||Vp&&Lo(Vp.resolve())!=A0||Zi&&Lo(new Zi)!=D0||Fo&&Lo(new Fo)!=I0)&&(Lo=function(t){var e=bn(t),r=e==x3?t.constructor:void 0,n=r?mi(r):"";if(n)switch(n){case T3:return F0;case S3:return M0;case v3:return A0;case b3:return D0;case w3:return I0}return e});var Ux=Lo;var _3=_t.Uint8Array,Vx=_3;function E3(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return za(Ue(r)?$i(r):[r],Ga(e,1))}var Mc=E3;var R3="__lodash_hash_undefined__";function k3(t){return this.__data__.set(t,R3),this}var C0=k3;function P3(t){return this.__data__.has(t)}var N0=P3;function Bp(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new No;++e<r;)this.add(t[e])}Bp.prototype.add=Bp.prototype.push=C0;Bp.prototype.has=N0;var Hp=Bp;function M3(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var O0=M3;function A3(t,e){return t.has(e)}var Wp=A3;var D3=1,I3=2;function F3(t,e,r,n,i,o){var s=r&D3,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var p=o.get(t),d=o.get(e);if(p&&d)return p==e&&d==t;var h=-1,g=!0,x=r&I3?new Hp:void 0;for(o.set(t,e),o.set(e,t);++h<l;){var v=t[h],w=e[h];if(n)var N=s?n(w,v,h,e,t,o):n(v,w,h,t,e,o);if(N!==void 0){if(N)continue;g=!1;break}if(x){if(!O0(e,function(A,U){if(!Wp(x,U)&&(v===A||i(v,A,r,n,o)))return x.push(U)})){g=!1;break}}else if(!(v===w||i(v,w,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var $p=F3;function C3(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var L0=C3;function N3(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Za=N3;var O3=1,L3=2,U3="[object Boolean]",V3="[object Date]",B3="[object Error]",H3="[object Map]",W3="[object Number]",$3="[object RegExp]",q3="[object Set]",j3="[object String]",z3="[object Symbol]",G3="[object ArrayBuffer]",K3="[object DataView]",U0=Zt?Zt.prototype:void 0,Bx=U0?U0.valueOf:void 0;function Q3(t,e,r,n,i,o,s){switch(r){case K3:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case G3:return!(t.byteLength!=e.byteLength||!o(new Vx(t),new Vx(e)));case U3:case V3:case W3:return Oa(+t,+e);case B3:return t.name==e.name&&t.message==e.message;case $3:case j3:return t==e+"";case H3:var l=L0;case q3:var u=n&O3;if(l||(l=Za),t.size!=e.size&&!u)return!1;var p=s.get(t);if(p)return p==e;n|=L3,s.set(t,e);var d=$p(l(t),l(e),n,i,o,s);return s.delete(t),d;case z3:if(Bx)return Bx.call(t)==Bx.call(e)}return!1}var V0=Q3;var Z3=1,Y3=Object.prototype,X3=Y3.hasOwnProperty;function J3(t,e,r,n,i,o){var s=r&Z3,l=Lx(t),u=l.length,p=Lx(e),d=p.length;if(u!=d&&!s)return!1;for(var h=u;h--;){var g=l[h];if(!(s?g in e:X3.call(e,g)))return!1}var x=o.get(t),v=o.get(e);if(x&&v)return x==e&&v==t;var w=!0;o.set(t,e),o.set(e,t);for(var N=s;++h<u;){g=l[h];var A=t[g],U=e[g];if(n)var Z=s?n(U,A,g,e,t,o):n(A,U,g,t,e,o);if(!(Z===void 0?A===U||i(A,U,r,n,o):Z)){w=!1;break}N||(N=g=="constructor")}if(w&&!N){var ne=t.constructor,he=e.constructor;ne!=he&&"constructor"in t&&"constructor"in e&&!(typeof ne=="function"&&ne instanceof ne&&typeof he=="function"&&he instanceof he)&&(w=!1)}return o.delete(t),o.delete(e),w}var B0=J3;var eq=1,H0="[object Arguments]",W0="[object Array]",qp="[object Object]",tq=Object.prototype,$0=tq.hasOwnProperty;function rq(t,e,r,n,i,o){var s=Ue(t),l=Ue(e),u=s?W0:Ux(t),p=l?W0:Ux(e);u=u==H0?qp:u,p=p==H0?qp:p;var d=u==qp,h=p==qp,g=u==p;if(g&&Rc(t)){if(!Rc(e))return!1;s=!0,d=!1}if(g&&!d)return o||(o=new Qa),s||Np(t)?$p(t,e,r,n,i,o):V0(t,e,u,r,n,i,o);if(!(r&eq)){var x=d&&$0.call(t,"__wrapped__"),v=h&&$0.call(e,"__wrapped__");if(x||v){var w=x?t.value():t,N=v?e.value():e;return o||(o=new Qa),i(w,N,r,n,o)}}return g?(o||(o=new Qa),B0(t,e,r,n,i,o)):!1}var q0=rq;function j0(t,e,r,n,i){return t===e?!0:t==null||e==null||!Yt(t)&&!Yt(e)?t!==t&&e!==e:q0(t,e,r,n,j0,i)}var Ya=j0;var nq=1,iq=2;function oq(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var u=l[0],p=t[u],d=l[1];if(s&&l[2]){if(p===void 0&&!(u in t))return!1}else{var h=new Qa;if(n)var g=n(p,d,u,t,e,h);if(!(g===void 0?Ya(d,p,nq|iq,n,h):g))return!1}}return!0}var z0=oq;function aq(t){return t===t&&!Dr(t)}var jp=aq;function sq(t){for(var e=qi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,jp(i)]}return e}var G0=sq;function cq(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var zp=cq;function lq(t){var e=G0(t);return e.length==1&&e[0][2]?zp(e[0][0],e[0][1]):function(r){return r===t||z0(r,t,e)}}var K0=lq;function uq(t,e){return t!=null&&e in Object(t)}var Q0=uq;function pq(t,e,r){e=Op(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=Qi(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Ua(i)&&Na(s,i)&&(Ue(t)||Va(t)))}var Z0=pq;function fq(t,e){return t!=null&&Z0(t,e,Q0)}var Y0=fq;var dq=1,mq=2;function hq(t,e){return Ha(t)&&jp(e)?zp(Qi(t),e):function(r){var n=Oo(r,t);return n===void 0&&n===e?Y0(r,t):Ya(e,n,dq|mq)}}var X0=hq;function gq(t){return function(e){return e?.[t]}}var Gp=gq;function yq(t){return function(e){return ja(e,t)}}var J0=yq;function xq(t){return Ha(t)?Gp(Qi(t)):J0(t)}var eR=xq;function Tq(t){return typeof t=="function"?t:t==null?Bt:typeof t=="object"?Ue(t)?X0(t[0],t[1]):K0(t):eR(t)}var Bn=Tq;function Sq(t,e,r,n){for(var i=-1,o=t==null?0:t.length;++i<o;){var s=t[i];e(n,s,r(s),t)}return n}var tR=Sq;function vq(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),l=s.length;l--;){var u=s[t?l:++i];if(r(o[u],u,o)===!1)break}return e}}var rR=vq;var bq=rR(),nR=bq;function wq(t,e){return t&&nR(t,e,qi)}var iR=wq;function _q(t,e){return function(r,n){if(r==null)return r;if(!Vn(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var oR=_q;var Eq=oR(iR),Kp=Eq;function Rq(t,e,r,n){return Kp(t,function(i,o,s){e(n,i,r(i),s)}),n}var aR=Rq;function kq(t,e){return function(r,n){var i=Ue(r)?tR:aR,o=e?e():{};return i(r,t,Bn(n,2),o)}}var sR=kq;function Pq(t){return Yt(t)&&Vn(t)}var cR=Pq;function Mq(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var lR=Mq;function Aq(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Qp=Aq;var uR=/[\\^$.*+?()[\]{}|]/g,Dq=RegExp(uR.source);function Iq(t){return t=wn(t),t&&Dq.test(t)?t.replace(uR,"\\$&"):t}var Ir=Iq;var Fq=Math.max,Cq=Math.min;function Nq(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=vp(r),i=r<0?Fq(n+i,0):Cq(i,n-1)),Dp(t,Bn(e,3),i,!0)}var Ac=Nq;function Oq(t,e){var r=-1,n=Vn(t)?Array(t.length):[];return Kp(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var pR=Oq;var Lq="Expected a function",Uq=8,Vq=32,Bq=128,Hq=256;function Wq(t){return y0(function(e){var r=e.length,n=r,i=Wi.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(Lq);if(i&&!s&&Fa(o)=="wrapper")var s=new Wi([],!0)}for(n=s?n:r;++n<r;){o=e[n];var l=Fa(o),u=l=="wrapper"?kp(o):void 0;u&&Ax(u[0])&&u[1]==(Bq|Uq|Vq|Hq)&&!u[4].length&&u[9]==1?s=s[Fa(u[0])].apply(s,u[3]):s=o.length==1&&Ax(o)?s[l]():s.thru(o)}return function(){var p=arguments,d=p[0];if(s&&p.length==1&&Ue(d))return s.plant(d).value();for(var h=0,g=r?e[h].apply(this,p):d;++h<r;)g=e[h].call(this,g);return g}})}var fR=Wq;var $q=fR(),Hx=$q;var qq=Object.prototype,jq=qq.hasOwnProperty,zq=sR(function(t,e,r){jq.call(t,r)?t[r].push(e):NE(t,r,[e])}),Wx=zq;function Gq(t,e){return t>e}var dR=Gq;function Kq(t,e){return Xr(e,function(r){return t[r]})}var mR=Kq;function Qq(t){return t==null?[]:mR(t,qi(t))}var hR=Qq;function Zq(t,e){return Ya(t,e)}var gi=Zq;function Yq(t,e){return t<e}var gR=Yq;function Xq(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(l===void 0?s===s&&!Ar(s):r(s,l)))var l=s,u=o}return u}var Zp=Xq;function Jq(t,e){return t&&t.length?Zp(t,Bn(e,2),dR):void 0}var $x=Jq;function ej(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var yR=ej;function tj(t){return t&&t.length?Zp(t,Bt,gR):void 0}var qx=tj;function rj(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var xR=rj;function nj(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Ar(t),s=e!==void 0,l=e===null,u=e===e,p=Ar(e);if(!l&&!p&&!o&&t>e||o&&s&&u&&!l&&!p||n&&s&&u||!r&&u||!i)return 1;if(!n&&!o&&!p&&t<e||p&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!u)return-1}return 0}var TR=nj;function ij(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;++n<s;){var u=TR(i[n],o[n]);if(u){if(n>=l)return u;var p=r[n];return u*(p=="desc"?-1:1)}}return t.index-e.index}var SR=ij;function oj(t,e,r){e.length?e=Xr(e,function(o){return Ue(o)?function(s){return ja(s,o.length===1?o[0]:o)}:o}):e=[Bt];var n=-1;e=Xr(e,Ba(Bn));var i=pR(t,function(o,s,l){var u=Xr(e,function(p){return p(o)});return{criteria:u,index:++n,value:o}});return xR(i,function(o,s){return SR(o,s,r)})}var vR=oj;var aj=9007199254740991,sj=Math.floor;function cj(t,e){var r="";if(!t||e<1||e>aj)return r;do e%2&&(r+=t),e=sj(e/2),e&&(t+=t);while(e);return r}var bR=cj;function lj(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var wR=lj;var uj=Array.prototype,_R=uj.splice;function pj(t,e,r,n){var i=n?wR:Ip,o=-1,s=e.length,l=t;for(t===e&&(e=$i(e)),r&&(l=Xr(t,Ba(r)));++o<s;)for(var u=0,p=e[o],d=r?r(p):p;(u=i(l,d,u,n))>-1;)l!==t&&_R.call(l,u,1),_R.call(t,u,1);return t}var ER=pj;function fj(t,e){return t&&t.length&&e&&e.length?ER(t,e):t}var RR=fj;var dj=La(RR),Xt=dj;var mj=Math.floor,hj=Math.random;function gj(t,e){return t+mj(hj()*(e-t+1))}var kR=gj;var yj=Math.ceil,xj=Math.max;function Tj(t,e,r,n){for(var i=-1,o=xj(yj((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var PR=Tj;function Sj(t){return function(e,r,n){return n&&typeof n!="number"&&Co(e,r,n)&&(r=n=void 0),e=Aa(e),r===void 0?(r=e,e=0):r=Aa(r),n=n===void 0?e<r?1:-1:Aa(n),PR(e,r,n,t)}}var MR=Sj;var vj=MR(),jx=vj;function bj(t,e,r){return(r?Co(t,e,r):e===void 0)?e=1:e=vp(e),bR(wn(t),e)}var zx=bj;function wj(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=kR(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var Yp=wj;function _j(t){return Yp($i(t))}var AR=_j;function Ej(t){return Yp(hR(t))}var DR=Ej;function Rj(t){var e=Ue(t)?AR:DR;return e(t)}var Gx=Rj;var kj=La(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Co(t,e[0],e[1])?e=[]:r>2&&Co(e[0],e[1],e[2])&&(e=[e[0]]),vR(t,Ga(e,1),[])}),Kx=kj;function Pj(t,e){return t&&t.length?yR(t,Bn(e,2)):0}var Xp=Pj;var Mj=1/0,Aj=Zi&&1/Za(new Zi([,-0]))[1]==Mj?function(t){return new Zi(t)}:Rp,IR=Aj;var Dj=200;function Ij(t,e,r){var n=-1,i=CE,o=t.length,s=!0,l=[],u=l;if(r)s=!1,i=lR;else if(o>=Dj){var p=e?null:IR(t);if(p)return Za(p);s=!1,i=Wp,u=new Hp}else u=e?[]:l;e:for(;++n<o;){var d=t[n],h=e?e(d):d;if(d=r||d!==0?d:0,s&&h===h){for(var g=u.length;g--;)if(u[g]===h)continue e;e&&u.push(h),l.push(d)}else i(u,h,r)||(u!==l&&u.push(h),l.push(d))}return l}var Jp=Ij;function Fj(t){return t&&t.length?Jp(t):[]}var yi=Fj;function Cj(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?Jp(t,void 0,e):[]}var Dc=Cj;var Nj=Math.max;function Oj(t){if(!(t&&t.length))return[];var e=0;return t=Lp(t,function(r){if(cR(r))return e=Nj(r.length,e),!0}),Cp(e,function(r){return Xr(t,Gp(r))})}var FR=Oj;var Lj=La(FR),Tt=Lj;var ef=class{constructor(){this.commands={clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0}}};var Ic=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Ht=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{Xt(this.listeners,e)}}}};var tf={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var Fc=class{constructor(){this.notifier=new Ht;this.mocks={...tf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(Vj(n,r))return Oo(i,e)??Oo(this.mocks,e)}return Oo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function Vj(t,e){return t.languageId===e.languageId}var rf={hideInferenceWarning:!1,tutorialProgress:{}};var Cc=class{constructor(){this.data={...rf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var Nc=class{async showMessage(e,r,n,...i){}};var nf=class{constructor(){this.configuration=new Fc;this.messages=new Nc;this.keyValueStore=new Cc;this.clipboard=new Ic;this.capabilities=new ef;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=Xa;this.onDidCloseTextDocument=Xa;this.onDidChangeActiveTextEditor=Xa;this.onDidChangeVisibleTextEditors=Xa;this.onDidChangeTextEditorSelection=Xa;this.onDidChangeTextEditorVisibleRanges=Xa}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>Xt(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function Xa(){return{dispose(){}}}var se=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new W(this,this)}concise(){return`${this.line}:${this.character}`}toString(){return this.concise()}};function CR(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var W=class t{constructor(...e){let[r,n]=e.length===2?e:[new se(e[0],e[1]),new se(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof se?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new Te(this.end,this.start):new Te(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}toString(){return this.concise()}};function Bj(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function Hj(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function NR(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var of=NR(Bj),af=NR(Hj);function Jr(t,e,r){return e.lastIndex=0,Array.from(t.matchAll(e),r)}function Oc(t,e){return t.lastIndex=0,t.test(e)}function OR(t,e){return t.lastIndex=0,e.match(t)}function Lc(t,e){return Jr(t,e,r=>({index:r.index,text:r[0]}))}var Ja=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var sf=class extends Ja{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function Uc(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function rt(t,e,r,...n){return t.showMessage("error",e,r,...n)}var oe=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(oe||{});var{supported:Je,unsupported:Gce,notApplicable:LR}=oe,Qx={ifStatement:Je,disqualifyDelimiter:Je,"comment.line":Je,"comment.block":Je,"string.singleLine":Je,"textFragment.comment.line":Je,"textFragment.comment.block":Je,"textFragment.string.singleLine":Je,class:Je,className:Je,namedFunction:Je,"name.function":Je,"name.class":Je,"name.field":Je,functionName:Je,"name.argument.formal":Je,"name.argument.formal.iteration":Je,"name.variable":Je,"value.variable":Je,"name.assignment":Je,"value.assignment":Je,"statement.class":Je,"type.class":Je,"type.field":Je,"value.argument.formal":LR,"value.argument.formal.iteration":LR};var{supported:Yce,unsupported:Xce,notApplicable:Jce}=oe;var{supported:UR,unsupported:ile,notApplicable:ole}=oe,Wj={...Qx,"value.argument.formal":UR,"value.argument.formal.iteration":UR};var{supported:lle,unsupported:ule,notApplicable:ple}=oe;var{supported:Vc,unsupported:$j,notApplicable:hle}=oe,Zx={"comment.block":Vc,"string.singleLine":Vc,"name.iteration.block":Vc,"name.iteration.document":Vc,disqualifyDelimiter:Vc,"comment.line":$j};var{supported:Tle,unsupported:Sle,notApplicable:vle}=oe;var{supported:Ele,notApplicable:Rle}=oe;var{supported:Ale,notApplicable:Dle}=oe;var{supported:z,unsupported:Nle,notApplicable:en}=oe,Yx={list:z,map:z,ifStatement:z,regularExpression:z,switchStatementSubject:z,fieldAccess:z,disqualifyDelimiter:z,"textFragment.string.singleLine":z,"textFragment.string.multiLine":z,"textFragment.comment.line":z,"textFragment.comment.block":z,statement:z,"statement.iteration.document":z,"statement.iteration.block":z,class:z,className:z,anonymousFunction:z,namedFunction:z,"namedFunction.iteration.document":z,"namedFunction.method":z,"namedFunction.method.iteration.class":z,"namedFunction.constructor":z,functionName:z,"functionName.iteration.document":z,"functionName.method":z,"functionName.method.iteration.class":z,"functionName.constructor":z,functionCall:z,"functionCall.constructor":z,functionCallee:z,"functionCallee.constructor":z,"argument.actual":z,"argument.actual.iteration":z,"argument.actual.method":z,"argument.actual.method.iteration":z,"argument.actual.constructor":z,"argument.actual.constructor.iteration":z,"argument.formal":z,"argument.formal.iteration":z,"argument.formal.method":z,"argument.formal.method.iteration":z,"argument.formal.constructor":z,"argument.formal.constructor.iteration":z,"comment.line":z,"comment.block":z,"string.singleLine":z,"string.multiLine":z,"branch.if":z,"branch.if.iteration":z,"branch.try":z,"branch.switchCase":z,"branch.switchCase.iteration":z,"branch.ternary":z,"condition.if":z,"condition.while":z,"condition.doWhile":z,"condition.for":z,"condition.ternary":z,"condition.switchCase":z,"name.argument.formal":z,"name.argument.formal.iteration":z,"name.argument.formal.method":z,"name.argument.formal.method.iteration":z,"name.argument.formal.constructor":z,"name.argument.formal.constructor.iteration":z,"name.foreach":z,"name.assignment":z,"name.assignment.pattern":z,"name.variable":z,"name.variable.pattern":z,"name.function":z,"name.method":z,"name.constructor":z,"name.class":z,"name.field":z,"key.mapPair":z,"key.mapPair.iteration":z,"value.argument.formal":z,"value.argument.formal.iteration":z,"value.argument.formal.method":z,"value.argument.formal.method.iteration":z,"value.argument.formal.constructor":z,"value.argument.formal.constructor.iteration":z,"value.mapPair":z,"value.mapPair.iteration":z,"value.assignment":z,"value.variable":z,"value.variable.pattern":z,"value.foreach":z,"value.return":z,"value.return.lambda":z,"value.field":z},Xx={element:z,tags:z,startTag:z,endTag:z,attribute:z,"key.attribute":z,"value.attribute":z},qj={...Yx,...Xx,"type.variable":en,"type.argument.formal":en,"type.argument.formal.iteration":en,"type.argument.formal.method":en,"type.argument.formal.method.iteration":en,"type.argument.formal.constructor":en,"type.argument.formal.constructor.iteration":en,"type.return":en,"type.field":en,"type.foreach":en,"type.interface":en,command:en};var{supported:Jx}=oe,Bc={"comment.line":Jx,"comment.block":Jx,map:Jx};var{supported:$le,unsupported:qle,notApplicable:jle}=oe,jj={...Bc};var{supported:Zle,unsupported:Yle,notApplicable:Xle}=oe,zj={...Bc};var{supported:rue,unsupported:nue,notApplicable:iue}=oe;var{supported:cue,notApplicable:lue}=oe;var{supported:due,unsupported:mue,notApplicable:hue}=oe;var{supported:Tue,unsupported:Sue,notApplicable:vue}=oe;var{supported:Eue,notApplicable:Rue}=oe;var{supported:Aue,unsupported:Due,notApplicable:Iue}=oe;var{supported:Oue,unsupported:Lue,notApplicable:Uue}=oe;var{supported:Wue,unsupported:$ue,notApplicable:que}=oe;var{supported:Kue,unsupported:Que,notApplicable:Zue}=oe;var{supported:es,unsupported:tpe,notApplicable:rpe}=oe,Gj={...Zx,"namedFunction.iteration":es,"namedFunction.iteration.document":es,"functionName.iteration":es,"functionName.iteration.document":es,"comment.line":es,disqualifyDelimiter:es};var{supported:ape}=oe;var{supported:Jt}=oe,eT={...Yx,"name.field":Jt,"type.argument.formal":Jt,"type.argument.formal.iteration":Jt,"type.argument.formal.method":Jt,"type.argument.formal.method.iteration":Jt,"type.argument.formal.constructor":Jt,"type.argument.formal.constructor.iteration":Jt,"type.alias":Jt,"type.cast":Jt,"type.field":Jt,"type.interface":Jt,"type.return":Jt,"type.variable":Jt,"value.field":Jt,"value.typeAlias":Jt};var{supported:gpe,unsupported:ype,notApplicable:xpe}=oe,Kj={...eT,...Xx};var{supported:bpe,unsupported:wpe,notApplicable:_pe}=oe;var{supported:Ppe,unsupported:Mpe,notApplicable:Ape}=oe;var ts=["that","source","instanceReference","keyboard"];var Te=class extends W{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new se(e[0],e[1]),new se(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}toString(){return this.concise()}};function BR({line:t,character:e}){return new se(t,e)}function cf({start:t,end:e}){return new W(BR(t),BR(e))}function tn(t){return{type:"line",start:t.start.line,end:t.end.line}}function er({start:t,end:e}){return{type:"character",start:t,end:e}}function Hc(t){return{start:lf(t.start),end:lf(t.end)}}function HR(t){return{anchor:lf(t.anchor),active:lf(t.active)}}function lf({line:t,character:e}){return{line:t,character:e}}function ok(t){return typeof t>"u"||t===null}function Qj(t){return typeof t=="object"&&t!==null}function Zj(t){return Array.isArray(t)?t:ok(t)?[]:[t]}function Yj(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function Xj(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function Jj(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var ez=ok,tz=Qj,rz=Zj,nz=Xj,iz=Jj,oz=Yj,St={isNothing:ez,isObject:tz,toArray:rz,repeat:nz,isNegativeZero:iz,extend:oz};function ak(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function $c(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=ak(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}$c.prototype=Object.create(Error.prototype);$c.prototype.constructor=$c;$c.prototype.toString=function(e){return this.name+": "+ak(this,e)};var dr=$c;function tT(t,e,r,n,i){var o="",s="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function rT(t,e){return St.repeat(" ",e-t.length)+t}function az(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",u,p,d=Math.min(t.line+e.linesAfter,i.length).toString().length,h=e.maxLength-(e.indent+d+3);for(u=1;u<=e.linesBefore&&!(s-u<0);u++)p=tT(t.buffer,n[s-u],i[s-u],t.position-(n[s]-n[s-u]),h),l=St.repeat(" ",e.indent)+rT((t.line-u+1).toString(),d)+" | "+p.str+`
`+l;for(p=tT(t.buffer,n[s],i[s],t.position,h),l+=St.repeat(" ",e.indent)+rT((t.line+1).toString(),d)+" | "+p.str+`
`,l+=St.repeat("-",e.indent+d+3+p.pos)+`^
`,u=1;u<=e.linesAfter&&!(s+u>=i.length);u++)p=tT(t.buffer,n[s+u],i[s+u],t.position-(n[s]-n[s+u]),h),l+=St.repeat(" ",e.indent)+rT((t.line+u+1).toString(),d)+" | "+p.str+`
`;return l.replace(/\n$/,"")}var sz=az,cz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],lz=["scalar","sequence","mapping"];function uz(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function pz(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(cz.indexOf(r)===-1)throw new dr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=uz(e.styleAliases||null),lz.indexOf(this.kind)===-1)throw new dr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var It=pz;function qR(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function fz(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function iT(t){return this.extend(t)}iT.prototype.extend=function(e){var r=[],n=[];if(e instanceof It)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new dr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof It))throw new dr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new dr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new dr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof It))throw new dr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(iT.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=qR(i,"implicit"),i.compiledExplicit=qR(i,"explicit"),i.compiledTypeMap=fz(i.compiledImplicit,i.compiledExplicit),i};var dz=iT,mz=new It("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),hz=new It("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),gz=new It("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),yz=new dz({explicit:[mz,hz,gz]});function xz(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function Tz(){return null}function Sz(t){return t===null}var vz=new It("tag:yaml.org,2002:null",{kind:"scalar",resolve:xz,construct:Tz,predicate:Sz,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function bz(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function wz(t){return t==="true"||t==="True"||t==="TRUE"}function _z(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Ez=new It("tag:yaml.org,2002:bool",{kind:"scalar",resolve:bz,construct:wz,predicate:_z,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Rz(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function kz(t){return 48<=t&&t<=55}function Pz(t){return 48<=t&&t<=57}function Mz(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Rz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!kz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Pz(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function Az(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function Dz(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!St.isNegativeZero(t)}var Iz=new It("tag:yaml.org,2002:int",{kind:"scalar",resolve:Mz,construct:Az,predicate:Dz,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Fz=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Cz(t){return!(t===null||!Fz.test(t)||t[t.length-1]==="_")}function Nz(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var Oz=/^[-+]?[0-9]+e/;function Lz(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(St.isNegativeZero(t))return"-0.0";return r=t.toString(10),Oz.test(r)?r.replace("e",".e"):r}function Uz(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||St.isNegativeZero(t))}var Vz=new It("tag:yaml.org,2002:float",{kind:"scalar",resolve:Cz,construct:Nz,predicate:Uz,represent:Lz,defaultStyle:"lowercase"}),Bz=yz.extend({implicit:[vz,Ez,Iz,Vz]}),Hz=Bz,sk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ck=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Wz(t){return t===null?!1:sk.exec(t)!==null||ck.exec(t)!==null}function $z(t){var e,r,n,i,o,s,l,u=0,p=null,d,h,g;if(e=sk.exec(t),e===null&&(e=ck.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(d=+e[10],h=+(e[11]||0),p=(d*60+h)*6e4,e[9]==="-"&&(p=-p)),g=new Date(Date.UTC(r,n,i,o,s,l,u)),p&&g.setTime(g.getTime()-p),g}function qz(t){return t.toISOString()}var jz=new It("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Wz,construct:$z,instanceOf:Date,represent:qz});function zz(t){return t==="<<"||t===null}var Gz=new It("tag:yaml.org,2002:merge",{kind:"scalar",resolve:zz}),lT=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Kz(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=lT;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function Qz(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=lT,s=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}function Zz(t){var e="",r=0,n,i,o=t.length,s=lT;for(n=0;n<o;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function Yz(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var Xz=new It("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Kz,construct:Qz,predicate:Yz,represent:Zz}),Jz=Object.prototype.hasOwnProperty,eG=Object.prototype.toString;function tG(t){if(t===null)return!0;var e=[],r,n,i,o,s,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],s=!1,eG.call(i)!=="[object Object]")return!1;for(o in i)if(Jz.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function rG(t){return t!==null?t:[]}var nG=new It("tag:yaml.org,2002:omap",{kind:"sequence",resolve:tG,construct:rG}),iG=Object.prototype.toString;function oG(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],iG.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function aG(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var sG=new It("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:oG,construct:aG}),cG=Object.prototype.hasOwnProperty;function lG(t){if(t===null)return!0;var e,r=t;for(e in r)if(cG.call(r,e)&&r[e]!==null)return!1;return!0}function uG(t){return t!==null?t:{}}var pG=new It("tag:yaml.org,2002:set",{kind:"mapping",resolve:lG,construct:uG}),uT=Hz.extend({implicit:[jz,Gz],explicit:[Xz,nG,sG,pG]}),Xi=Object.prototype.hasOwnProperty,uf=1,lk=2,uk=3,pf=4,nT=1,fG=2,jR=3,dG=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,mG=/[\x85\u2028\u2029]/,hG=/[,\[\]\{\}]/,pk=/^(?:!|!!|![a-z\-]+!)$/i,fk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function zR(t){return Object.prototype.toString.call(t)}function Hn(t){return t===10||t===13}function Vo(t){return t===9||t===32}function mr(t){return t===9||t===32||t===10||t===13}function ns(t){return t===44||t===91||t===93||t===123||t===125}function gG(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function yG(t){return t===120?2:t===117?4:t===85?8:0}function xG(t){return 48<=t&&t<=57?t-48:-1}function GR(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function TG(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var dk=new Array(256),mk=new Array(256);for(Uo=0;Uo<256;Uo++)dk[Uo]=GR(Uo)?1:0,mk[Uo]=GR(Uo);var Uo;function SG(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||uT,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function hk(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=sz(r),new dr(e,r)}function ae(t,e){throw hk(t,e)}function ff(t,e){t.onWarning&&t.onWarning.call(null,hk(t,e))}var KR={YAML:function(e,r,n){var i,o,s;e.version!==null&&ae(e,"duplication of %YAML directive"),n.length!==1&&ae(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&ae(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&ae(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&ff(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&ae(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],pk.test(i)||ae(e,"ill-formed tag handle (first argument) of the TAG directive"),Xi.call(e.tagMap,i)&&ae(e,'there is a previously declared suffix for "'+i+'" tag handle'),fk.test(o)||ae(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{ae(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function Yi(t,e,r,n){var i,o,s,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)s=l.charCodeAt(i),s===9||32<=s&&s<=1114111||ae(t,"expected valid JSON character");else dG.test(l)&&ae(t,"the stream contains non-printable characters");t.result+=l}}function QR(t,e,r,n){var i,o,s,l;for(St.isObject(r)||ae(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,l=i.length;s<l;s+=1)o=i[s],Xi.call(e,o)||(e[o]=r[o],n[o]=!0)}function is(t,e,r,n,i,o,s,l,u){var p,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),p=0,d=i.length;p<d;p+=1)Array.isArray(i[p])&&ae(t,"nested arrays are not supported inside keys"),typeof i=="object"&&zR(i[p])==="[object Object]"&&(i[p]="[object Object]");if(typeof i=="object"&&zR(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(p=0,d=o.length;p<d;p+=1)QR(t,e,o[p],r);else QR(t,e,o,r);else!t.json&&!Xi.call(r,i)&&Xi.call(e,i)&&(t.line=s||t.line,t.lineStart=l||t.lineStart,t.position=u||t.position,ae(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function pT(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ae(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ht(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Vo(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Hn(i))for(pT(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&ff(t,"deficient indentation"),n}function hf(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||mr(r)))}function fT(t,e){e===1?t.result+=" ":e>1&&(t.result+=St.repeat(`
`,e-1))}function vG(t,e,r){var n,i,o,s,l,u,p,d,h=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),mr(x)||ns(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),mr(i)||r&&ns(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),mr(i)||r&&ns(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),mr(n))break}else{if(t.position===t.lineStart&&hf(t)||r&&ns(x))break;if(Hn(x))if(u=t.line,p=t.lineStart,d=t.lineIndent,ht(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=u,t.lineStart=p,t.lineIndent=d;break}}l&&(Yi(t,o,s,!1),fT(t,t.line-u),o=s=t.position,l=!1),Vo(x)||(s=t.position+1),x=t.input.charCodeAt(++t.position)}return Yi(t,o,s,!1),t.result?!0:(t.kind=h,t.result=g,!1)}function bG(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Yi(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Hn(r)?(Yi(t,n,i,!0),fT(t,ht(t,!1,e)),n=i=t.position):t.position===t.lineStart&&hf(t)?ae(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);ae(t,"unexpected end of the stream within a single quoted scalar")}function wG(t,e){var r,n,i,o,s,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return Yi(t,r,t.position,!0),t.position++,!0;if(l===92){if(Yi(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),Hn(l))ht(t,!1,e);else if(l<256&&dk[l])t.result+=mk[l],t.position++;else if((s=yG(l))>0){for(i=s,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(s=gG(l))>=0?o=(o<<4)+s:ae(t,"expected hexadecimal character");t.result+=TG(o),t.position++}else ae(t,"unknown escape sequence");r=n=t.position}else Hn(l)?(Yi(t,r,n,!0),fT(t,ht(t,!1,e)),r=n=t.position):t.position===t.lineStart&&hf(t)?ae(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}ae(t,"unexpected end of the stream within a double quoted scalar")}function _G(t,e){var r=!0,n,i,o,s=t.tag,l,u=t.anchor,p,d,h,g,x,v=Object.create(null),w,N,A,U;if(U=t.input.charCodeAt(t.position),U===91)d=93,x=!1,l=[];else if(U===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),U=t.input.charCodeAt(++t.position);U!==0;){if(ht(t,!0,e),U=t.input.charCodeAt(t.position),U===d)return t.position++,t.tag=s,t.anchor=u,t.kind=x?"mapping":"sequence",t.result=l,!0;r?U===44&&ae(t,"expected the node content, but found ','"):ae(t,"missed comma between flow collection entries"),N=w=A=null,h=g=!1,U===63&&(p=t.input.charCodeAt(t.position+1),mr(p)&&(h=g=!0,t.position++,ht(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,os(t,e,uf,!1,!0),N=t.tag,w=t.result,ht(t,!0,e),U=t.input.charCodeAt(t.position),(g||t.line===n)&&U===58&&(h=!0,U=t.input.charCodeAt(++t.position),ht(t,!0,e),os(t,e,uf,!1,!0),A=t.result),x?is(t,l,v,N,w,A,n,i,o):h?l.push(is(t,null,v,N,w,A,n,i,o)):l.push(w),ht(t,!0,e),U=t.input.charCodeAt(t.position),U===44?(r=!0,U=t.input.charCodeAt(++t.position)):r=!1}ae(t,"unexpected end of the stream within a flow collection")}function EG(t,e){var r,n,i=nT,o=!1,s=!1,l=e,u=0,p=!1,d,h;if(h=t.input.charCodeAt(t.position),h===124)n=!1;else if(h===62)n=!0;else return!1;for(t.kind="scalar",t.result="";h!==0;)if(h=t.input.charCodeAt(++t.position),h===43||h===45)nT===i?i=h===43?jR:fG:ae(t,"repeat of a chomping mode identifier");else if((d=xG(h))>=0)d===0?ae(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?ae(t,"repeat of an indentation width identifier"):(l=e+d-1,s=!0);else break;if(Vo(h)){do h=t.input.charCodeAt(++t.position);while(Vo(h));if(h===35)do h=t.input.charCodeAt(++t.position);while(!Hn(h)&&h!==0)}for(;h!==0;){for(pT(t),t.lineIndent=0,h=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&h===32;)t.lineIndent++,h=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),Hn(h)){u++;continue}if(t.lineIndent<l){i===jR?t.result+=St.repeat(`
`,o?1+u:u):i===nT&&o&&(t.result+=`
`);break}for(n?Vo(h)?(p=!0,t.result+=St.repeat(`
`,o?1+u:u)):p?(p=!1,t.result+=St.repeat(`
`,u+1)):u===0?o&&(t.result+=" "):t.result+=St.repeat(`
`,u):t.result+=St.repeat(`
`,o?1+u:u),o=!0,s=!0,u=0,r=t.position;!Hn(h)&&h!==0;)h=t.input.charCodeAt(++t.position);Yi(t,r,t.position,!1)}return!0}function ZR(t,e){var r,n=t.tag,i=t.anchor,o=[],s,l=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ae(t,"tab characters must not be used in indentation")),!(u!==45||(s=t.input.charCodeAt(t.position+1),!mr(s))));){if(l=!0,t.position++,ht(t,!0,-1)&&t.lineIndent<=e){o.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,os(t,e,uk,!1,!0),o.push(t.result),ht(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)ae(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function RG(t,e,r){var n,i,o,s,l,u,p=t.tag,d=t.anchor,h={},g=Object.create(null),x=null,v=null,w=null,N=!1,A=!1,U;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=h),U=t.input.charCodeAt(t.position);U!==0;){if(!N&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ae(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(U===63||U===58)&&mr(n))U===63?(N&&(is(t,h,g,x,v,null,s,l,u),x=v=w=null),A=!0,N=!0,i=!0):N?(N=!1,i=!0):ae(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,U=n;else{if(s=t.line,l=t.lineStart,u=t.position,!os(t,r,lk,!1,!0))break;if(t.line===o){for(U=t.input.charCodeAt(t.position);Vo(U);)U=t.input.charCodeAt(++t.position);if(U===58)U=t.input.charCodeAt(++t.position),mr(U)||ae(t,"a whitespace character is expected after the key-value separator within a block mapping"),N&&(is(t,h,g,x,v,null,s,l,u),x=v=w=null),A=!0,N=!1,i=!1,x=t.tag,v=t.result;else if(A)ae(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=p,t.anchor=d,!0}else if(A)ae(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=p,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(N&&(s=t.line,l=t.lineStart,u=t.position),os(t,e,pf,!0,i)&&(N?v=t.result:w=t.result),N||(is(t,h,g,x,v,w,s,l,u),x=v=w=null),ht(t,!0,-1),U=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&U!==0)ae(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return N&&is(t,h,g,x,v,null,s,l,u),A&&(t.tag=p,t.anchor=d,t.kind="mapping",t.result=h),A}function kG(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&ae(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):ae(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!mr(s);)s===33&&(n?ae(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),pk.test(i)||ae(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),hG.test(o)&&ae(t,"tag suffix cannot contain flow indicator characters")}o&&!fk.test(o)&&ae(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{ae(t,"tag name is malformed: "+o)}return r?t.tag=o:Xi.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:ae(t,'undeclared tag handle "'+i+'"'),!0}function PG(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&ae(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!mr(r)&&!ns(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&ae(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function MG(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!mr(n)&&!ns(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&ae(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),Xi.call(t.anchorMap,r)||ae(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],ht(t,!0,-1),!0}function os(t,e,r,n,i){var o,s,l,u=1,p=!1,d=!1,h,g,x,v,w,N;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=l=pf===r||uk===r,n&&ht(t,!0,-1)&&(p=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;kG(t)||PG(t);)ht(t,!0,-1)?(p=!0,l=o,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=p||i),(u===1||pf===r)&&(uf===r||lk===r?w=e:w=e+1,N=t.position-t.lineStart,u===1?l&&(ZR(t,N)||RG(t,N,w))||_G(t,w)?d=!0:(s&&EG(t,w)||bG(t,w)||wG(t,w)?d=!0:MG(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&ae(t,"alias node should not have any properties")):vG(t,w,uf===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(d=l&&ZR(t,N))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ae(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),h=0,g=t.implicitTypes.length;h<g;h+=1)if(v=t.implicitTypes[h],v.resolve(t.result)){t.result=v.construct(t.result),t.tag=v.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Xi.call(t.typeMap[t.kind||"fallback"],t.tag))v=t.typeMap[t.kind||"fallback"][t.tag];else for(v=null,x=t.typeMap.multi[t.kind||"fallback"],h=0,g=x.length;h<g;h+=1)if(t.tag.slice(0,x[h].tag.length)===x[h].tag){v=x[h];break}v||ae(t,"unknown tag !<"+t.tag+">"),t.result!==null&&v.kind!==t.kind&&ae(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+v.kind+'", not "'+t.kind+'"'),v.resolve(t.result,t.tag)?(t.result=v.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ae(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function AG(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(ht(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!mr(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&ae(t,"directive name must not be less than one character in length");s!==0;){for(;Vo(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Hn(s));break}if(Hn(s))break;for(r=t.position;s!==0&&!mr(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&pT(t),Xi.call(KR,n)?KR[n](t,n,i):ff(t,'unknown document directive "'+n+'"')}if(ht(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,ht(t,!0,-1)):o&&ae(t,"directives end mark is expected"),os(t,t.lineIndent-1,pf,!1,!0),ht(t,!0,-1),t.checkLineBreaks&&mG.test(t.input.slice(e,t.position))&&ff(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&hf(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,ht(t,!0,-1));return}if(t.position<t.length-1)ae(t,"end of the stream or a document separator is expected");else return}function gk(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new SG(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,ae(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)AG(r);return r.documents}function DG(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=gk(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function IG(t,e){var r=gk(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new dr("expected a single document in the stream, but found more")}}var FG=DG,CG=IG,yk={loadAll:FG,load:CG},xk=Object.prototype.toString,Tk=Object.prototype.hasOwnProperty,dT=65279,NG=9,qc=10,OG=13,LG=32,UG=33,VG=34,oT=35,BG=37,HG=38,WG=39,$G=42,Sk=44,qG=45,df=58,jG=61,zG=62,GG=63,KG=64,vk=91,bk=93,QG=96,wk=123,ZG=124,_k=125,Wt={};Wt[0]="\\0";Wt[7]="\\a";Wt[8]="\\b";Wt[9]="\\t";Wt[10]="\\n";Wt[11]="\\v";Wt[12]="\\f";Wt[13]="\\r";Wt[27]="\\e";Wt[34]='\\"';Wt[92]="\\\\";Wt[133]="\\N";Wt[160]="\\_";Wt[8232]="\\L";Wt[8233]="\\P";var YG=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],XG=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function JG(t,e){var r,n,i,o,s,l,u;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=t.compiledTypeMap.fallback[s],u&&Tk.call(u.styleAliases,l)&&(l=u.styleAliases[l]),r[s]=l;return r}function eK(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new dr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+St.repeat("0",n-e.length)+e}var tK=1,jc=2;function rK(t){this.schema=t.schema||uT,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=St.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=JG(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?jc:tK,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function YR(t,e){for(var r=St.repeat(" ",e),n=0,i=-1,o="",s,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=l):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function aT(t,e){return`
`+St.repeat(" ",t.indent*e)}function nK(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function mf(t){return t===LG||t===NG}function zc(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==dT||65536<=t&&t<=1114111}function XR(t){return zc(t)&&t!==dT&&t!==OG&&t!==qc}function JR(t,e,r){var n=XR(t),i=n&&!mf(t);return(r?n:n&&t!==Sk&&t!==vk&&t!==bk&&t!==wk&&t!==_k)&&t!==oT&&!(e===df&&!i)||XR(e)&&!mf(e)&&t===oT||e===df&&i}function iK(t){return zc(t)&&t!==dT&&!mf(t)&&t!==qG&&t!==GG&&t!==df&&t!==Sk&&t!==vk&&t!==bk&&t!==wk&&t!==_k&&t!==oT&&t!==HG&&t!==$G&&t!==UG&&t!==ZG&&t!==jG&&t!==zG&&t!==WG&&t!==VG&&t!==BG&&t!==KG&&t!==QG}function oK(t){return!mf(t)&&t!==df}function Wc(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Ek(t){var e=/^\n* /;return e.test(t)}var Rk=1,sT=2,kk=3,Pk=4,rs=5;function aK(t,e,r,n,i,o,s,l){var u,p=0,d=null,h=!1,g=!1,x=n!==-1,v=-1,w=iK(Wc(t,0))&&oK(Wc(t,t.length-1));if(e||s)for(u=0;u<t.length;p>=65536?u+=2:u++){if(p=Wc(t,u),!zc(p))return rs;w=w&&JR(p,d,l),d=p}else{for(u=0;u<t.length;p>=65536?u+=2:u++){if(p=Wc(t,u),p===qc)h=!0,x&&(g=g||u-v-1>n&&t[v+1]!==" ",v=u);else if(!zc(p))return rs;w=w&&JR(p,d,l),d=p}g=g||x&&u-v-1>n&&t[v+1]!==" "}return!h&&!g?w&&!s&&!i(t)?Rk:o===jc?rs:sT:r>9&&Ek(t)?rs:s?o===jc?rs:sT:g?Pk:kk}function sK(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===jc?'""':"''";if(!t.noCompatMode&&(YG.indexOf(e)!==-1||XG.test(e)))return t.quotingType===jc?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function u(p){return nK(t,p)}switch(aK(e,l,t.indent,s,u,t.quotingType,t.forceQuotes&&!n,i)){case Rk:return e;case sT:return"'"+e.replace(/'/g,"''")+"'";case kk:return"|"+ek(e,t.indent)+tk(YR(e,o));case Pk:return">"+ek(e,t.indent)+tk(YR(cK(e,s),o));case rs:return'"'+lK(e)+'"';default:throw new dr("impossible error: invalid scalar style")}}()}function ek(t,e){var r=Ek(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function tk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function cK(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var p=t.indexOf(`
`);return p=p!==-1?p:t.length,r.lastIndex=p,rk(t.slice(0,p),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var l=s[1],u=s[2];o=u[0]===" ",n+=l+(!i&&!o&&u!==""?`
`:"")+rk(u,e),i=o}return n}function rk(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,l=0,u="";n=r.exec(t);)l=n.index,l-i>e&&(o=s>i?s:l,u+=`
`+t.slice(i,o),i=o+1),s=l;return u+=`
`,t.length-i>e&&s>i?u+=t.slice(i,s)+`
`+t.slice(s+1):u+=t.slice(i),u.slice(1)}function lK(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=Wc(t,i),n=Wt[r],!n&&zc(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||eK(r);return e}function uK(t,e,r){var n="",i=t.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(xi(t,e,l,!1,!1)||typeof l>"u"&&xi(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function nk(t,e,r,n){var i="",o=t.tag,s,l,u;for(s=0,l=r.length;s<l;s+=1)u=r[s],t.replacer&&(u=t.replacer.call(r,String(s),u)),(xi(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&xi(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=aT(t,e)),t.dump&&qc===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function pK(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,l,u,p,d;for(s=0,l=o.length;s<l;s+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),u=o[s],p=r[u],t.replacer&&(p=t.replacer.call(r,u,p)),xi(t,e,u,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),xi(t,e,p,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function fK(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),l,u,p,d,h,g;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new dr("sortKeys must be a boolean or a function");for(l=0,u=s.length;l<u;l+=1)g="",(!n||i!=="")&&(g+=aT(t,e)),p=s[l],d=r[p],t.replacer&&(d=t.replacer.call(r,p,d)),xi(t,e+1,p,!0,!0,!0)&&(h=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,h&&(t.dump&&qc===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,h&&(g+=aT(t,e)),xi(t,e+1,d,!0,h)&&(t.dump&&qc===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function ik(t,e,r){var n,i,o,s,l,u;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(u=t.styleMap[l.tag]||l.defaultStyle,xk.call(l.represent)==="[object Function]")n=l.represent(e,u);else if(Tk.call(l.represent,u))n=l.represent[u](e,u);else throw new dr("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}function xi(t,e,r,n,i,o,s){t.tag=null,t.dump=r,ik(t,r,!1)||ik(t,r,!0);var l=xk.call(t.dump),u=n,p;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",h,g;if(d&&(h=t.duplicates.indexOf(r),g=h!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[h])t.dump="*ref_"+h;else{if(d&&g&&!t.usedDuplicates[h]&&(t.usedDuplicates[h]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(fK(t,e,t.dump,i),g&&(t.dump="&ref_"+h+t.dump)):(pK(t,e,t.dump),g&&(t.dump="&ref_"+h+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?nk(t,e-1,t.dump,i):nk(t,e,t.dump,i),g&&(t.dump="&ref_"+h+t.dump)):(uK(t,e,t.dump),g&&(t.dump="&ref_"+h+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&sK(t,t.dump,e,o,u);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new dr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(p=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?p="!"+p:p.slice(0,18)==="tag:yaml.org,2002:"?p="!!"+p.slice(18):p="!<"+p+">",t.dump=p+" "+t.dump)}return!0}function dK(t,e){var r=[],n=[],i,o;for(cT(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function cT(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)cT(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)cT(t[n[i]],e,r)}function mK(t,e){e=e||{};var r=new rK(e);r.noRefs||dK(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),xi(r,0,n,!0,!0)?r.dump+`
`:""}var hK=mK,gK={dump:hK};function mT(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Mk=It;var Ak=uT,yK=yk.load,$fe=yk.loadAll,Dk=gK.dump;var qfe=mT("safeLoad","load"),jfe=mT("safeLoadAll","loadAll"),zfe=mT("safeDump","dump");var gf=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=Dk(this.data,Object.assign({replacer:vK,schema:TK},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},xK=new Mk("!format",{kind:"scalar",resolve:()=>!1,instanceOf:gf,represent:t=>t.represent()}),TK=Ak.extend({implicit:[xK]}),hT=t=>typeof t=="object"&&t!=null;function SK(t){if(hT(t))return Object.values(t).every(e=>!hT(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!hT(e)&&!Array.isArray(e))}function vK(t,e){return t===""?e:SK(e)?new gf(e,{flowLevel:0}):e}var gT=["breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","foldRegion","followLink","followLinkAside","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.setKeyboardTarget","private.showParseTree","private.getTargets"],wK=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],Fk=[...gT,...wK];var _K=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleDoubleQuotes","tripleSingleQuotes"],EK=["string","any","collectionBoundary"],yf=[..._K,...EK],Bo=["argumentOrParameter","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter"];function Ck(t){return Bo.includes(t.type)}var Nk=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],Gc=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},as=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function Kc(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function Ho(t){return t.version>=7}var Ji=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var eo=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function Ok(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function Qc(t){return typeof t=="string"||t instanceof String}function xf(t){let[e,...r]=t;return kK(e,r)}function kK(t,e){let r;if(Qc(t)){let n=t,[i,o,...s]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:s,usePrePhraseSnapshot:!1}}else r=t;return r}function Zc(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function Lk(t){for(let e of t)return!1;return!0}function Ti(t){return Object.keys(t)}function Yc(t,e){return`${t}.${e}`}var Vk={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(Uk).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(Uk).join("")}};function Uk(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}function Bk(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,s)=>{let l=r(s),u=o.get(l);return u==null?(o.set(l,[s]),o):(o.get(l).push(s),u.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Dc(i.get(o),e))}),t.flatMap(o=>{let s=r(o),l=i.get(s);if(l==null||l.length===0)return[];let u=l[0];return e(u,o)?(l.shift(),u):[]}))}var zk=Symbol.for("immer-nothing"),Hk=Symbol.for("immer-draftable"),Fr=Symbol.for("immer-state"),PK=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function hr(t,...e){if(process.env.NODE_ENV!=="production"){let r=PK[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ss=Object.getPrototypeOf;function cs(t){return!!t&&!!t[Fr]}function $o(t){return t?Gk(t)||Array.isArray(t)||!!t[Hk]||!!t.constructor?.[Hk]||wf(t)||_f(t):!1}var MK=Object.prototype.constructor.toString();function Gk(t){if(!t||typeof t!="object")return!1;let e=ss(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===MK}function Tf(t,e){bf(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function bf(t){let e=t[Fr];return e?e.type_:Array.isArray(t)?1:wf(t)?2:_f(t)?3:0}function TT(t,e){return bf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Kk(t,e,r){let n=bf(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function AK(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function wf(t){return t instanceof Map}function _f(t){return t instanceof Set}function Wo(t){return t.copy_||t.base_}function ST(t,e){if(wf(t))return new Map(t);if(_f(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&Gk(t))return ss(t)?{...t}:Object.assign(Object.create(null),t);let r=Object.getOwnPropertyDescriptors(t);delete r[Fr];let n=Reflect.ownKeys(r);for(let i=0;i<n.length;i++){let o=n[i],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[o]})}return Object.create(ss(t),r)}function ET(t,e=!1){return Ef(t)||cs(t)||!$o(t)||(bf(t)>1&&(t.set=t.add=t.clear=t.delete=DK),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>ET(n,!0))),t}function DK(){hr(2)}function Ef(t){return Object.isFrozen(t)}var IK={};function qo(t){let e=IK[t];return e||hr(0,t),e}var Xc;function Qk(){return Xc}function FK(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Wk(t,e){e&&(qo("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function vT(t){bT(t),t.drafts_.forEach(CK),t.drafts_=null}function bT(t){t===Xc&&(Xc=t.parent_)}function $k(t){return Xc=FK(Xc,t)}function CK(t){let e=t[Fr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function qk(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Fr].modified_&&(vT(e),hr(4)),$o(t)&&(t=Sf(e,t),e.parent_||vf(e,t)),e.patches_&&qo("Patches").generateReplacementPatches_(r[Fr].base_,t,e.patches_,e.inversePatches_)):t=Sf(e,r,[]),vT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==zk?t:void 0}function Sf(t,e,r){if(Ef(e))return e;let n=e[Fr];if(!n)return Tf(e,(i,o)=>jk(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return vf(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,s=!1;n.type_===3&&(o=new Set(i),i.clear(),s=!0),Tf(o,(l,u)=>jk(t,n,i,l,u,r,s)),vf(t,i,!1),r&&t.patches_&&qo("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function jk(t,e,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&hr(5),cs(i)){let l=o&&e&&e.type_!==3&&!TT(e.assigned_,n)?o.concat(n):void 0,u=Sf(t,i,l);if(Kk(r,n,u),cs(u))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if($o(i)&&!Ef(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Sf(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&vf(t,i)}}function vf(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&ET(e,r)}function NK(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:Qk(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=RT;r&&(i=[n],o=Jc);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}var RT={get(t,e){if(e===Fr)return t;let r=Wo(t);if(!TT(r,e))return OK(t,r,e);let n=r[e];return t.finalized_||!$o(n)?n:n===yT(t.base_,e)?(xT(t),t.copy_[e]=_T(n,t)):n},has(t,e){return e in Wo(t)},ownKeys(t){return Reflect.ownKeys(Wo(t))},set(t,e,r){let n=Zk(Wo(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=yT(Wo(t),e),o=i?.[Fr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(AK(r,i)&&(r!==void 0||TT(t.base_,e)))return!0;xT(t),wT(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return yT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,xT(t),wT(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=Wo(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){hr(11)},getPrototypeOf(t){return ss(t.base_)},setPrototypeOf(){hr(12)}},Jc={};Tf(RT,(t,e)=>{Jc[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Jc.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&hr(13),Jc.set.call(this,t,e,void 0)};Jc.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&hr(14),RT.set.call(this,t[0],e,r,t[0])};function yT(t,e){let r=t[Fr];return(r?Wo(r):t)[e]}function OK(t,e,r){let n=Zk(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function Zk(t,e){if(!(e in t))return;let r=ss(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=ss(r)}}function wT(t){t.modified_||(t.modified_=!0,t.parent_&&wT(t.parent_))}function xT(t){t.copy_||(t.copy_=ST(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var LK=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let s=this;return function(u=o,...p){return s.produce(u,d=>r.call(this,d,...p))}}typeof r!="function"&&hr(6),n!==void 0&&typeof n!="function"&&hr(7);let i;if($o(e)){let o=$k(this),s=_T(e,void 0),l=!0;try{i=r(s),l=!1}finally{l?vT(o):bT(o)}return Wk(o,n),qk(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===zk&&(i=void 0),this.autoFreeze_&&ET(i,!0),n){let o=[],s=[];qo("Patches").generateReplacementPatches_(e,i,o,s),n(o,s)}return i}else hr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,u=>e(u,...l));let n,i;return[this.produce(e,r,(s,l)=>{n=s,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){$o(t)||hr(8),cs(t)&&(t=UK(t));let e=$k(this),r=_T(t,void 0);return r[Fr].isManual_=!0,bT(e),r}finishDraft(t,e){let r=t&&t[Fr];(!r||!r.isManual_)&&hr(9);let{scope_:n}=r;return Wk(n,e),qk(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=qo("Patches").applyPatches_;return cs(t)?n(t,e):this.produce(t,i=>n(i,e))}};function _T(t,e){let r=wf(t)?qo("MapSet").proxyMap_(t,e):_f(t)?qo("MapSet").proxySet_(t,e):NK(t,e);return(e?e.scope_:Qk()).drafts_.push(r),r}function UK(t){return cs(t)||hr(10,t),Yk(t)}function Yk(t){if(!$o(t)||Ef(t))return t;let e=t[Fr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=ST(t,e.scope_.immer_.useStrictShallowCopy_)}else r=ST(t,!0);return Tf(r,(n,i)=>{Kk(r,n,Yk(i))}),e&&(e.finalized_=!1),r}var Cr=new LK,Rf=Cr.produce,Whe=Cr.produceWithPatches.bind(Cr),$he=Cr.setAutoFreeze.bind(Cr),qhe=Cr.setUseStrictShallowCopy.bind(Cr),jhe=Cr.applyPatches.bind(Cr),zhe=Cr.createDraft.bind(Cr),Ghe=Cr.finishDraft.bind(Cr);var Wn=pr(gP(),1),fge=Wn.default.v1,dge=Wn.default.v3,yP=Wn.default.v4,mge=Wn.default.v5,hge=Wn.default.NIL,gge=Wn.default.version,yge=Wn.default.validate,xge=Wn.default.stringify,Tge=Wn.default.parse;function xP(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function Hf(t,e){if(Array.isArray(t))return t.map(r=>Hf(r,e));if(typeof t=="object"&&t!=null){if(K4(t))return xP(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Hf(t[n],e));return r}return t}function K4(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var Kf=pr(SP(),1);var Q4={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},Z4={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},$f={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},qf={modulo100:"row",relativeUp:"up",relativeDown:"down"};function vP(t){let e=Q4[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function bP(t){let e=Z4[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function CT(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var Y4=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),X4=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),J4={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},wP={...Y4,...X4,...J4};function to(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Ct(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var _P={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Ct("triple quad"),tripleSingleQuotes:Ct("triple twin"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Ct("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:to("one section"),sectionLevelTwo:to("two section"),sectionLevelThree:to("three section"),sectionLevelFour:to("four section"),sectionLevelFive:to("five section"),sectionLevelSix:to("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Ct("parse tree string"),textFragment:Ct("text fragment"),disqualifyDelimiter:Ct("disqualify delimiter"),"private.fieldAccess":Ct("access"),"private.switchStatementSubject":Ct("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join","private.showParseTree":Ct("parse tree"),"experimental.setInstanceReference":to("from"),editNew:Ct("edit new"),executeCommand:Ct("execute command"),parsed:Ct("parsed"),getText:Ct("get text"),replace:Ct("replace"),"private.getTargets":Ct("get targets"),"private.setKeyboardTarget":Ct("set keyboard target")},customAction:{},grapheme:wP};var NT=CT(_P,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),vi=CT(NT,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var pt={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var kP=pr(RP(),1),zf=class{constructor(e){this.mooLexer=kP.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var bi={};for(let t of gT){let{spokenForms:e}=vi.action[t];for(let r of e)bi[r]={type:"simpleActionName",value:t}}var e6=["replaceWithTarget","moveToTarget"];for(let t of e6){let{spokenForms:e}=vi.action[t];for(let r of e)bi[r]={type:"bringMove",value:t}}var t6=["before","after","to"];for(let t of t6){let e=pt[t==="to"?"sourceDestinationConnective":t];bi[e]={type:"insertionMode",value:t}}for(let t of Bo){let{spokenForms:e}=vi.simpleScopeTypeType[t];for(let r of e)bi[r]={type:"simpleScopeTypeType",value:t}}for(let t of yf){let{spokenForms:e}=vi.pairedDelimiter[t];for(let r of e)bi[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries($f))e!=null&&(bi[e]={type:"simpleMarkType",value:t});var wi=new zf({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(bi),type:t=>bi[t].type,value:t=>bi[t].value}});function PP(t,e){return{name:t,target:e}}function MP(t,e,r){return{name:t,source:e,destination:r}}function Gf(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function AP(t,e){return{type:"primitive",insertionMode:t,target:e}}function DP(t){return{type:"containingScope",scopeType:t}}function IP(t){return{type:t}}function FP(t){return{type:"surroundingPair",delimiter:t}}function CP(t){return{type:t}}function NP(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function OT(t){return t[0]}var r6={Lexer:wi,ParserRules:[{name:"main",symbols:["action"],postprocess:OT},{name:"action",symbols:[wi.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>PP(t,e)},{name:"action",symbols:[wi.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>MP(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:OT},{name:"destination",symbols:[wi.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>AP(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:OT},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>Gf(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>Gf(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>Gf(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>DP(t)},{name:"scopeType",symbols:[wi.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>IP(t)},{name:"scopeType",symbols:[wi.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>FP(t)},{name:"mark",symbols:[wi.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>CP(t)},{name:"mark",symbols:[wi.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>NP(t)}],ParserStart:"main"},OP=r6;function n6(){return new Kf.Parser(Kf.Grammar.fromCompiled(OP))}function LP(t){let e=n6();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function Qf(t,e){let r=LP(t);return Hf(r,e)}function nl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...UP(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return UP(t.destination);case"parsed":return nl(Qf(t.content,t.arguments));default:return[t.target]}}function UP(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function UT(t){return t.flatMap(LT)}function LT(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(LT);case"range":return[t.anchor,t.active].flatMap(LT);case"implicit":return[]}}var i6={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},o6={purple:"pink"};function a6(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=i6[e.scopeType.type]??e.scopeType.type)})}function s6(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=o6[t.mark.symbolColor]??t.mark.symbolColor)}function VT(t){UT(t).forEach(e=>{a6(e),s6(e)})}function VP(t){return{...t,version:1}}var c6={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},l6={type:"primitive",isImplicit:!0},BP=t=>gi(t,c6)?l6:t;function HP(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:p6(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function u6(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function BT(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:s,selectionType:l,position:u}=t,p=[];if(u&&u!=="contents"&&(u==="before"?o==="inside"?p.push({type:"position",position:"start"}):e==="remove"?p.push({type:"leading"}):p.push({type:"position",position:"before"}):o==="inside"?p.push({type:"position",position:"end"}):e==="remove"?p.push({type:"trailing"}):p.push({type:"position",position:"after"})),l)switch(l){case"token":if(s?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:p.push({type:"containingScope",scopeType:{type:l}})}return s&&p.push(...u6(s)),{type:r,isImplicit:n,modifiers:p.length>0?p:void 0,mark:i?.type==="cursorToken"?void 0:i}}function WP(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>WP(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:s,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:BT(i,e),active:BT(o,e),excludeAnchor:s??!1,excludeActive:l??!1}}case"primitive":return BT(t,e)}}function p6(t,e){return t.map(r=>WP(r,e)).map(r=>r.type==="primitive"?BP(r):r)}function $P(t){return{...t,version:3,targets:t.targets.map(qP)}}function qP(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>qP(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:HT(e),active:HT(r),...n}}case"primitive":return HT(t)}}function HT(t){let e=t.modifiers!=null?t.modifiers.map(d6):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:ol(r),modifiers:e},active:{type:"primitive",mark:ol(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?f6(t.mark):void 0,modifiers:e}}function f6(t){switch(t.type){case"lineNumber":return m6(t);default:return t}}function d6(t){switch(t.type){case"ordinalRange":return h6(t);default:return t}}function m6(t){return gi(t.anchor,t.active)?ol(t.anchor):{type:"range",anchor:ol(t.anchor),active:ol(t.active)}}function h6(t){return t.anchor===t.active?il(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?il(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?il(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:il(t.scopeType,t.anchor),active:il(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function ol(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function il(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function zP(t){return{...t,version:4,targets:t.targets.map(GP)}}function GP(t){switch(t.type){case"primitive":return jP(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:jP(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(GP)}}}}function jP(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function KP(t){return{...t,version:5,action:g6(t.action),targets:t.targets.map(Zf)}}function g6(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=y6(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function y6(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function Zf(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(Zf)};case"range":return{...t,anchor:Zf(t.anchor),active:Zf(t.active)};case"primitive":return{...t,mark:t.mark!=null?WT(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map($T):void 0}}}function WT(t){return t.type==="range"?{...t,anchor:WT(t.anchor),active:WT(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function $T(t){return t.type==="range"?{...t,anchor:$T(t.anchor),active:$T(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var x6={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function qT(t){let e=x6[t]??t;if(!Fk.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function QP(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:T6(t.action,t.targets)}}function T6(t,e){let r=qT(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:rn(e[0]),destination:al(e[1])};case"swapTargets":return{name:r,target1:rn(e[0]),target2:rn(e[1])};case"callAsFunction":return{name:r,callee:rn(e[0]),argument:rn(e[1])};case"pasteFromClipboard":return{name:r,destination:al(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:rn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:rn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:al(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:rn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:rn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:al(e[0])};case"highlight":{let n={name:r,target:rn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:al(e[0])};case"getText":return{name:r,options:t.args?.[0],target:rn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:rn(e[0])}}}function rn(t){switch(t.type){case"list":case"range":case"primitive":return S6(t);case"implicit":return t}}function S6(t){switch(t.type){case"list":return v6(t);case"range":case"primitive":return Yf(t)}}function v6(t){return{...t,elements:t.elements.map(Yf)}}function Yf(t){switch(t.type){case"range":return ZP(t);case"primitive":return Xf(t)}}function ZP(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:Xf(e),active:Xf(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function Xf(t){let e={type:"primitive"},r=k6(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function al(t){switch(t.type){case"list":return b6(t);case"range":return w6(t);case"primitive":return _6(t);case"implicit":return E6()}}function b6(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let s=Jf(o);s!=null?(i(),r=[Yf(o)],n=s):r.push(Yf(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function w6(t){return{type:"primitive",insertionMode:Jf(t.anchor)??"to",target:ZP(t)}}function _6(t){return{type:"primitive",insertionMode:Jf(t)??"to",target:Xf(t)}}function E6(){return{type:"implicit"}}function Jf(t){switch(t.type){case"implicit":return"to";case"primitive":return R6(t);case"range":return Jf(t.anchor)}}function R6(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function k6(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function YP(t){return{...t,version:7}}function zT(t){let e=P6(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Rf(r,o=>{let s=nl(o);VT(s),r.name}),usePrePhraseSnapshot:n}}function P6(t,e){if(t.version>7)throw new xp;for(;t.version<e;)switch(t.version){case 0:t=VP(t);break;case 1:t=HP(t);break;case 2:t=$P(t);break;case 3:t=zP(t);break;case 4:t=KP(t);break;case 5:t=QP(t);break;case 6:t=YP(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var GT;function ed(t){GT=t}function I(){if(GT==null)throw Error("Tried to access ide before it was injected");return GT}var td=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var M6=25,rd=class{constructor(){this.targetMap=new Map;this.targetHistory=new eo(()=>new td(M6));this.notifier=new Ht}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of ts)e(r,this.get(r));return this.notifier.registerListener(e)}};function ro(t,e){return new W(new se(e.start.line,0),t.document.lineAt(e.end).range.end)}function KT(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function XP(t,e){let[r,n]=e instanceof se?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function zo(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var nd=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=D6(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?A6(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e){let r=this.getEditRange(),n=this.getEditText(e),i=o=>this.updateRange(o,e);return{range:r,text:n,isReplace:this.insertionMode==="after",updateRange:i}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?zo(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.firstNonWhitespaceCharacterIndex:n.lastNonWhitespaceCharacterIndex;if(r.character===i)return this.isBefore?n.range.start:n.range.end}return r})();return new W(e,e)}getEditText(e){let r=this.indentationString+(this.insertionPrefix??"")+e;return this.isBefore?r+this.insertionDelimiter:this.insertionDelimiter+r}updateRange(e,r){let n=this.editor.document.offsetAt(e.start)+this.indentationString.length+(this.insertionPrefix?.length??0),i=this.isBefore?n:n+this.getLengthOfInsertionDelimiter(),o=i+r.length;return new W(this.editor.document.positionAt(i),this.editor.document.positionAt(o))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function A6(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine||o.firstNonWhitespaceCharacterIndex<r&&(r=o.firstNonWhitespaceCharacterIndex,n=o.text.slice(0,r))}return n}function D6(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function no(t,e,r,n){return sl(t.contentRange,e.contentRange,r,n)}function sl(t,e,r,n){return new W(r?t.start:t.end,n?e.end:e.start)}function ls(t,e,r,n){let i=r?t.contentRange.start:new se(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new W(i,o)}var Ne=class t{constructor(e){this.isLine=!1;this.isToken=!0;this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.isWord=!1;this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return this.getRemovalRange()}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:no(this,r,!0,!0)})}isEqual(e){return e instanceof t&&gi(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new nd(this,e)}toPlainObject(){return{type:this.type,contentRange:Hc(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function id(t,e){return I6(t,e.start,e.end)}function I6(t,e,r){return{editor:t.editor,selection:F6(t.selection,e,r)}}function F6(t,e,r){return t.isReversed?new Te(r,e):new Te(e,r)}function od(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,s=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,u=r.positionAt(s),p=r.positionAt(l);return new W(u,p)}function ad(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var Ve=class extends Ne{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.isToken=r.isToken??!0,this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,isToken:this.isToken,insertionDelimiter:this.insertionDelimiter}}};function us(t,e,r){return ad(Ve,t,e,r)}var sd=class extends Ne{constructor(r){super(r);this.type="DocumentTarget";this.insertionDelimiter=`
`;this.isLine=!0}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getRemovalRange(){return this.contentRange}getInterior(){return[new Ve({editor:this.editor,isReversed:this.isReversed,contentRange:od(this.editor,this.contentRange)})]}getCloneParameters(){return this.state}};var Nr=class t extends Ne{constructor(){super(...arguments);this.type="LineTarget";this.insertionDelimiter=`
`;this.isLine=!0;this.getRemovalHighlightRange=()=>this.fullLineContentRange}get fullLineContentRange(){return ro(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return us(this.editor,C6(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return us(this.editor,N6(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:ls(this,n,!0,!0)})}getCloneParameters(){return this.state}};function C6(t,e){let{start:r}=e;return r.line>0?new W(t.document.lineAt(r.line-1).range.end,e.start):void 0}function N6(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new W(e.end,new se(r.line+1,0)):void 0}function QT(t,e,r){return ad(Nr,t,e,r)}var cd=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var ld=class extends Ne{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new cd(this,r)}};var ps=class t extends Ne{constructor(){super(...arguments);this.type="ParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0}getLeadingDelimiterTarget(){return QT(this.editor,O6(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return QT(this.editor,L6(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new Nr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return ro(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:ls(this,n,!0,!0)})}getCloneParameters(){return this.state}};function O6(t,e){let{document:r}=t,n=r.lineAt(e.start),i=U6(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new W(new se(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new W(new se(0,0),r.lineAt(n.lineNumber-1).range.end)}function L6(t,e){let{document:r}=t,n=r.lineAt(e.end),i=V6(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new W(new se(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new W(new se(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function U6(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function V6(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var io=class extends Ne{constructor(){super(...arguments);this.type="RawSelectionTarget";this.insertionDelimiter="";this.isRaw=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var fs=class t extends Ne{constructor(r){super({...r,contentRange:od(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:sl(this.fullInteriorRange,n.fullInteriorRange,!0,!0)})}};function ud(t){let e=zo(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var B6=['"',"'","(","[","{","<"],H6=['"',"'",")","]","}",">",",",";",":"];function $n(t){let{editor:e}=t,{start:r}=zo(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new Ve({contentRange:new W(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function qn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new Ve({contentRange:new W(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function jn(t){let{editor:e}=t,r=zo(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),s=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=ro(e,r);return o.union(s).isRangeEqual(l)?l:!s.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||B6.includes(W6(e,r)))?r.union(s):!o.isEmpty&&(r.end.isEqual(l.end)||H6.includes($6(e,r)))?r.union(o):r}function W6(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new W(r.translate(void 0,-1),r)):""}function $6(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new W(r.translate(void 0,1),r)):""}var oo=class t extends Ne{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.interiorRange_=r.interiorRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??q6(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new Ve({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return $n(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new Ve({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return qn(this)}getInterior(){return this.interiorRange_==null?super.getInterior():[new fs({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?ud(this):jn(this)}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?sl(this.removalRange_??this.contentRange,n.removalRange_??n.contentRange,!0,!0):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:no(this,n,!0,!0)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function q6(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var pd=class t extends Ne{constructor(r){super(r);this.type="SubTokenWordTarget";this.isToken=!1;this.isWord=!0;this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return us(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return us(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return ud(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:no(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var gr=class extends Ne{constructor(){super(...arguments);this.type="TokenTarget";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return $n(this)}getTrailingDelimiterTarget(){return qn(this)}getRemovalRange(){return jn(this)}getCloneParameters(){return this.state}};var fd=class extends Ne{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return $n(this)}getTrailingDelimiterTarget(){return qn(this)}getRemovalRange(){return jn(this)}getInterior(){return[new fs({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new gr({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Et=class extends Ne{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.isToken=r.isToken??!0}getLeadingDelimiterTarget(){return $n(this)}getTrailingDelimiterTarget(){return qn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:jn(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,isToken:this.isToken,hasExplicitRange:this.hasExplicitRange}}};var dd=class extends Ne{constructor(){super(...arguments);this.type="ImplicitTarget";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var md=class extends Ne{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:JP(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return $n(this)}getTrailingDelimiterTarget(){return qn(this)}getRemovalRange(){return jn(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new Ve({editor:this.editor,contentRange:JP(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function JP(t,e,r){return r?new W(e.start,t.end):new W(t.start,e.end)}var hd=class t extends Ne{constructor(r){super({...r,contentRange:j6(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new Nr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return ro(this.editor,this.contentRange)}getRemovalHighlightRange(){if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function j6(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function gd(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var ds=class{run(){return gd(I()).map(e=>new Et({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,isToken:!1}))}};var zn=class{constructor(e,r){this.debouncer=new gp(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var yd=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new zn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new ds().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var xd=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var z6=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],G6=z6.map(Ir).join("|"),K6=["[a-zA-Z0-9]",G6].join("|"),Q6=new RegExp(`^(${K6})$`,"u"),Z6="[unk]",Y6=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Td=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Ht;this.getTokenGraphemes=e=>Jr(e,Y6,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;I().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(I().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=I().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=Ox(o),Q6.test(o)||(o=Z6)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function ms(){return ZT==null&&(ZT=new Td),ZT}var ZT;var eM=({penalty:t})=>-t;function tM(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function rM(t,e){let r=Pc(n=>qx(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function nM(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function iM(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function oM(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=X6(r,n)}return r[0]}function X6(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function aM({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o){return oM(o,[iM(r),nM(i),tM(t),eM,rM(n,e)])}function sM(t,e,r){let n={},i=new Ji(({grapheme:o,hatStyle:s})=>[o,s]);return t.forEach(({token:o,rank:s})=>{let l=e.get(o);l!=null&&i.set(l,s),r.getTokenGraphemes(o.text).forEach(({text:u})=>{let p;u in n?p=n[u]:(p=[],n[u]=p),p.push(s)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function cM(t,e=[]){return new Map(Hx(tt,yi)(Mc([e],t.visibleRanges.map(r=>jx(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function lM(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let s=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return s-l}}var J6=["-","+","*","/","=","<",">","_","#",".","|","&",":"],e5=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],t5=["\\p{L}","\\p{M}","\\p{N}"],r5="[^\\s\\w]",n5="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function i5(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:s}=t,l=r.map(Ir).map(x=>`${x}+`).join("|"),u=e.map(Ir).join("|"),d=`(${n.concat(i.map(Ir)).join("|")})+`,h=`(${n.join("|")})+`,g=[u,o,d,l,s].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(h,"gu"),tokenMatcher:new RegExp(g,"gu")}}var YT=new Map;function nn(t){let e=I().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!YT.has(r)){let n={fixedTokens:e5,repeatableSymbols:J6,identifierWordRegexes:t5,identifierWordDelimiters:e,numbersRegex:n5,singleSymbolsRegex:r5};YT.set(r,i5(n))}return YT.get(r)}function uM(t,e,r){return Jr(t,nn(e).tokenMatcher,r)}function pM(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return uM(n,r,o=>{let s=i+o.index,l=i+o.index+o[0].length,u=new W(t.document.positionAt(s),t.document.positionAt(l));return{editor:t,text:o[0],range:u,offsets:{start:s,end:l}}})}function fM(t,e){return o5(t,e).flatMap(n=>{let i=n.selections[0].active,o=cM(n,[i.line]),s=tt(n.visibleRanges.map(l=>pM(n,l).map(u=>({...u,displayLine:o.get(u.range.start.line)}))));return s.sort(lM(o.get(i.line),i.character)),s.map((l,u)=>({token:l,rank:-u}))})}function o5(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function XT(t,e,r,n,i,o){let s=a5(r),l=fM(i,o),u=sM(l,s,t),p=Object.keys(e),d=new eo(()=>[...p]);return l.map(({token:h,rank:g})=>{let x=s5(t,h,d,e),v=aM(u,n,g,s.get(h),x);if(v!=null)return d.set(v.grapheme.text,d.get(v.grapheme.text).filter(w=>w!==v.style)),c5(h,v)}).filter(h=>h!=null)}function a5(t){let e=new Ji(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function s5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text);for(let s of o)for(let l of r.get(s.text))i.push({grapheme:s,style:l,penalty:n[l].penalty});return i}function c5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new W(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var Sd=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];I().disposeOnExit(this);let n=new zn(I().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),I().onDidOpenTextDocument(n.run),I().onDidCloseTextDocument(n.run),I().onDidChangeActiveTextEditor(n.run),I().onDidChangeVisibleTextEditors(n.run),I().onDidChangeTextDocument(n.run),I().onDidChangeTextEditorSelection(n.run),I().onDidChangeTextEditorVisibleRanges(n.run),ms().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap(),n=this.hats.isEnabled?XT(ms(),this.hats.enabledHatStyles,e??r.tokenHats,I().configuration.getOwnConfiguration("experimental.hatStability"),I().activeTextEditor,I().visibleTextEditors):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:s}})=>({editor:s,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var vd=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:s}=n,l=this.makeTokenLive(s);return this.map[Yc(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=nn(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[Yc(e,ms().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var l5=6e4,bd=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;I().disposeOnExit(this),this.activeMap=new vd(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new Sd(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>l5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function JT(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var nS=pr(ll(),1);function iS(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:s,end:l}}=e;return(0,nS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,nS.invariant)(n>=s&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=s?s+o:Math.min(s,i),end:n<=l?l+o:Math.min(l,i)}}var xM=pr(ll(),1);function oS(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,xM.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let s=e.expansionBehavior.end;switch(s.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(af(s.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let s=e.expansionBehavior.start;switch(s.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(of(s.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var aS=pr(ll(),1);function sS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:s},text:l}=e;if((0,aS.invariant)(s>o,()=>"Selection range expected to be nonempty"),(0,aS.invariant)(n>=o&&n<=s,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<s)return{start:o,end:s+i};if(n===o){let u=e.expansionBehavior.start,p=s+i;switch(u.type){case"closed":return{start:o+i,end:p};case"open":return{start:o,end:p};case"regex":{let d=r+l,h=of(u.regex),g=d.search(h);for(;g>r.length;)d=d.slice(0,g),g=d.search(h);return g===-1?{start:o,end:p}:{start:o+g,end:p}}}}else{let u=e.expansionBehavior.end,p=o;switch(u.type){case"closed":return{start:p,end:s};case"open":return{start:p,end:s+i};case"regex":{let d=l+r,h=af(u.regex),g=d.match(h),x=g==null?0:g[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,g=d.match(h),x=g==null?0:x+g[0].length;return x===0?{start:p,end:s}:{start:p,end:o+x}}}}}function TM(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:s}=e.offsets,l=Math.min(n,o),u="";return o<n&&(u+=e.text.substring(0,n-o)),u+=t.event.text,i<s&&(u+=e.text.substring(s-i,e.text.length)),u.substring(r.start-l,r.end-l)}function SM(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let s=o.text.length-o.rangeLength,l=o.rangeOffset,u=l+o.rangeLength,p=l,d=u+s;return{displacement:s,event:o,originalOffsets:{start:l,end:u},finalOffsets:{start:p,end:d}}});for(let o of e){let s=o.offsets,l=i.map(p=>{let d;return p.originalOffsets.start>s.end?{start:0,end:0}:p.originalOffsets.end<s.start?{start:p.displacement,end:p.displacement}:(p.event.rangeLength===0?o.range.isEmpty?d=oS(p,o):d=sS(p,o):d=iS(p,o),o.text=TM(p,o,d),{start:d.start-s.start,end:d.end-s.end})}),u={start:s.start+Xp(l,({start:p})=>p),end:s.end+Xp(l,({end:p})=>p)};o.range=o.range.with(r.positionAt(u.start),r.positionAt(u.end)),o.offsets=u}}var _d=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return JT(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return JT(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>Xt(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>Xt(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=I().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>x5(r,i)?{...i,isReplace:!0}:i)};SM(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function x5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var Ed=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var Rd=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var kd=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var Pd=class{updateUserSnippets(){throw new Error("Snippets are not implemented.")}registerThirdPartySnippets(e,r){throw new Error("Snippets are not implemented.")}getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e){throw new Error("Snippets are not implemented.")}};var Md=class{getSpokenFormEntries(){throw new as}onDidChange(){return{dispose:()=>{}}}};var Ad=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getLanguage(e){throw new Error("Tree sitter not provided")}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}};var Ge=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var vM={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var bM=new Ji(t=>t);for(let[t,e]of Object.entries(vM))e!=null&&bM.set(e,t);function wM(t,e,r){let n=bM.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}var T5={ifStatement:"if",ifElseStatement:"if else",tryCatchStatement:"try",functionDeclaration:"funk",link:"link"},S5={"ifElseStatement.alternative":"else","functionDeclaration.body":"funk","ifElseStatement.consequence":"if else","ifStatement.consequence":"if","tryCatchStatement.body":"try","link.text":"link"};function _M(t){if(t.type==="custom")throw new Ge("Custom insertion snippet");let e=T5[t.name];if(e==null)throw new Ge(`Named insertion snippet '${t.name}'`);if(t.substitutions!=null){let r=Object.values(t.substitutions);return`${e} ${r.join(" ")}`}return e}function EM(t){if(t.type==="custom")throw new Ge("Custom wrap with snippet");let e=`${t.name}.${t.variableName}`,r=S5[e];if(r==null)throw new Ge(`Named wrap with snippet '${e}'`);return r}function ul(t,e,r){let n=r==="vertical"?`${pt.verticalRange} `:"";if(t&&e)return n+pt.rangeExclusive;if(t)throw new Ge("Range exclude anchor");return e?n+pt.rangeExcludingEnd:r==="vertical"?pt.verticalRange:pt.rangeInclusive}function RM(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var v5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],b5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function hs(t){let e=v5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function pl(t){let e=b5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Dd=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":throw new Ge(`Modifier '${e.type}'`);case"containingScope":if(e.ancestorIndex==null||e.ancestorIndex===0)return this.handleScopeType(e.scopeType);if(e.ancestorIndex===1)return[this.spokenFormMap.modifierExtra.ancestor,this.handleScopeType(e.scopeType)];throw new Ge(`Modifier '${e.type}' with ancestor index ${e.ancestorIndex}`);case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,pl(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,pl(e.start+1),r];let i=hs(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,fl(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,fl(r)];throw new Ge(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:pl(e.anchor.start+1),n=this.handleModifier(e.active),i=ul(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let s=e.direction==="forward"?pt.forward:pt.backward;return[n,r,s]}let i=hs(e.length),o=fl(r);return e.direction==="forward"?[n,i,o]:[n,i,o,pt.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?pt.next:pt.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=hs(e.length);if(e.length===1)return[i,n,r];let s=fl(r);return[i,n,o,s]}if(e.length===1){let o=pl(e.offset);return[i,o,n,r]}throw new Ge(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new Ge(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,PM(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(vP(r)),n!=null&&i.push(bP(n)),i.push(PM(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let s=ul(e.excludeAnchor,e.excludeActive);return[r,n,s,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new Ge(`Mark '${e.type}'`);default:return[$f[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new Ge("Absolute line numbers");case"modulo100":return[qf.modulo100,hs(e.lineNumber+1)];case"relative":return[e.lineNumber<0?qf.relativeUp:qf.relativeDown,hs(Math.abs(e.lineNumber))]}}};function fl(t){if(typeof t=="string")return kM(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),fl(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(kM)}}}function kM(t){return`${t}s`}function PM(t,e,r){let n=t[r];if(n==null)throw new Ge(`${e} '${r}'`);return n}var gs=class{constructor(e){this.spokenFormMap=RM(e),this.primitiveGenerator=new Dd(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new Ge(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:MM(e())}}catch(r){if(r instanceof Ge)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new Ge(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),pt.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[wM(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],_M(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new Ge(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[EM(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new Ge(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new Ge("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[pt.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=ul(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new Ge("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[pt.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return pt.sourceDestinationConnective;case"before":return pt.before;case"after":return pt.after}}};function MM(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:AM(t.map(MM)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${Kc(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new Ge(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function AM(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=AM(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Id=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Ht;this.spokenFormMap_={...vi};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps().catch(()=>{})),this.customSpokenFormsInitialized=this.updateSpokenFormMaps(),this.customSpokenFormsInitialized.catch(()=>{})}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof Gc)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof as)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");rt(I().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}throw this.spokenFormMap_={...vi},this.notifier.notifyListeners(),r}for(let r of Nk)w5(this.spokenFormMap_,r,NT[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function w5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let s of i){let{defaultSpokenForms:l=[],isPrivate:u=!1}=r[s]??{},p=n[s];o[s]=p==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!u,isCustom:!1,isPrivate:u}:{defaultSpokenForms:l,spokenForms:p,requiresTalonUpdate:!1,isCustom:!gi(l,p),isPrivate:u}}t[e]=o}var Fd=class{constructor(e){this.customSpokenForms=new Id(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new gs(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new gs(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*_5(t){for(let e of t)for(let r of e)yield r}function*dl(t,e){let r=Cd(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*IM(t){let e=Cd(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var qwe=Symbol();function*E5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*FM(t,e){for(let r of t)e(r)&&(yield r)}function*Nt(t,e){for(let r of t)yield e(r)}function*CM(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let s=-1,l=Cd(t),u;for(;;){if(s++,o!==null&&s>=o||(u=l.next(),u.done))return;s<i||(s-i)%n===0&&(yield u.value)}}function*R5(t,e){let r=Cd(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function Cd(t){return t[Symbol.iterator]()}function so(t,e){return Array.from(Nt(t,e))}function DM(t,e,r){let n=E5(t,r),i=r>=0?o=>o<e:o=>o>e;return R5(n,i)}function NM(t,e,r=1){return e!==void 0?DM(t,e,r):DM(0,t,r)}function Nd(t,e){return _5(Nt(t,e))}function Rn(t,e,{domain:r},{domain:n}){return t==="forward"?k5(e,r,n):P5(e,r,n)}function k5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let s=e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&!i){let s=e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&i){let s=e.end.compareTo(r.start);return s!==0?s:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function P5(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let s=-e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&!i){let s=-e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&i){let s=-e.start.compareTo(r.end);return s!==0?s:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function OM(t,e,r,n,i,o){return M5(t,n,i,o)&&(i==null||Rn(r,n.includeDescendantScopes?t:e,i,o)<0)}function M5(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:s,skipAncestorScopes:l}=e,{domain:u}=n;switch(i){case"disallowed":if(u.contains(t))return!1;break;case"disallowedIfStrict":if(XP(u,t))return!1;break;case"required":if(!u.contains(t))return!1;break}return l&&r!=null&&u.contains(r.domain)?!1:A5(new W(t,o),u,s)}function A5(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var D5={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},gt=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...D5,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},s,l=r;for(let u of this.generateScopeCandidates(e,r,n,o))if(OM(r,l,n,o,s,u)&&(yield u,s=u,l=n==="forward"?u.domain.end:u.domain.start),this.canStopEarly(r,n,o,s,u))return}canStopEarly(e,r,n,i,o){let{containment:s,distalPosition:l,skipAncestorScopes:u}=n;if(this.isHierarchical&&!u)return!1;let p=this.isHierarchical&&u?i:o;return p==null?!1:!!(s==="required"&&(r==="forward"?p.domain.end.isAfter(e):p.domain.start.isBefore(e))||(r==="forward"?p.domain.end.isAfterOrEqual(l):p.domain.start.isBeforeOrEqual(l)))}};var yr=class extends gt{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:s,...l}=o,u=this.searchScopeHandler.generateScopes(r,n,i,{containment:s==="required"?"required":void 0,...l});return Nd(u,p=>this.generateScopesInSearchScope(i,p))}};var Od=class extends gt{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield LM(r,o);else for(let o=n.line;o>=0;o--)yield LM(r,o)}};function LM(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[cS(t,n,r)]}}function cS(t,e,r){return new Nr({editor:t,isReversed:e,contentRange:ml(t,r)})}function ml(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new W(r.lineNumber,r.firstNonWhitespaceCharacterIndex,n.lineNumber,n.lastNonWhitespaceCharacterIndex)}function Kn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),s=l=>new W(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Nt(o.matchAll(t),s):Array.from(o.matchAll(t),s).reverse()}var Ld=class extends yr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=nn(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(Kn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new gr({editor:n,contentRange:o,isReversed:s})]}))}};function Ud(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let s=Oc(o,n),l=Oc(o,i);if(s&&!l)return!0;if(l&&!s)return!1}}var I5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,F5=/[$]/g,C5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Vd=class extends yr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(Kn(I5,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Ve({editor:n,contentRange:o,isReversed:s,isToken:!1})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=nn(this.languageId);return Ud(r,n,[i,F5,C5])}};var N5=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,Bd=class{constructor(e){this.wordRegex=nn(e).wordMatcher}splitIdentifier(e){let r=Lc(e,this.wordRegex);return r.length>1?r:Lc(e,N5)}};var Hd=class extends yr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new Bd(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(u=>new W(i.positionAt(o+u.index),i.positionAt(o+u.index+u.text.length)));return l.map((u,p)=>({editor:r,domain:u,getTargets:d=>{let h=p>0?l[p-1]:null,g=p+1<l.length?l[p+1]:null;return[O5(d,r,h,u,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function O5(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new W(r.end,n.start):void 0,s=i!=null&&i.start.isAfter(n.end)?new W(n.end,i.start):void 0,u=o!=null||s!=null?e.document.getText(o??s):"";return new pd({editor:e,isReversed:t,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:o,trailingDelimiterRange:s})}var L5=/[$]/g,Wd=class extends yr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=nn(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(Kn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new gr({editor:n,contentRange:o,isReversed:s})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=nn(this.languageId);return Ud(r,n,[i,L5])}};var $d=class extends gt{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:s=>[new sd({editor:r,isReversed:s,contentRange:o})]}}};function UM(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var ys=class extends gt{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:s}=r,l=this.query.matches(s).map(u=>this.matchToScope(r,u)).filter(u=>u!=null).sort((u,p)=>Rn(i,n,u,p));yield*UM(l,(u,p)=>u.domain.isRangeEqual(p.domain),u=>u.length===1?u[0]:{...u[0],getTargets(p){let d=Dc(u.flatMap(h=>h.getTargets(p)),(h,g)=>h.isEqual(g));if(d.length>1&&!u.every(h=>h.allowMultiple)){let h="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(rt(I().messages,"BaseTreeSitterScopeHandler.allow-multiple",h),I().runMode==="test")throw Error(h)}return d}})}};function lS(t,e,r,n){return n?xs(t,`${e}.${r}`,`_.${r}`):xs(t,`${e}.${r}`)??(xs(t,e)!=null?xs(t,`_.${r}`):void 0)}function _i(t,e,r,n){return lS(t,e,r,n)?.range}function xs(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var qd=class extends ys{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n){let i=this.iterateeScopeType.type,o=lS(n,i,"iteration",!1);if(o==null)return;let{range:s,allowMultiple:l}=o,u=_i(n,i,"iteration.domain",!1)??s;return{editor:r,domain:u,allowMultiple:l,getTargets:p=>[new Ve({editor:r,isReversed:p,contentRange:s})]}}};var jd=class extends ys{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new qd(this.query,this.scopeType)}}matchToScope(r,n){let i=this.scopeType.type,o=xs(n,i);if(o==null)return;let{range:s,allowMultiple:l,insertionDelimiter:u}=o,p=_i(n,i,"domain",!0)??s,d=_i(n,i,"removal",!0),h=_i(n,i,"interior",!0),g=_i(n,i,"prefix",!0)?.with(void 0,s.start),x=_i(n,i,"leading",!0)?.with(void 0,g?.start??s.start),v=_i(n,i,"trailing",!0)?.with(s.end);return{editor:r,domain:p,allowMultiple:l,getTargets:w=>[new oo({scopeTypeType:i,editor:r,isReversed:w,contentRange:s,prefixRange:g,removalRange:d,leadingDelimiterRange:x,trailingDelimiterRange:v,interiorRange:h,insertionDelimiter:u})]}}};function VM(t){return t.flatMap(e=>{let{value:r,done:n}=e.next();return n?[]:[{iterator:e,value:r}]})}function BM(t,e){return t.flatMap(r=>{let{iterator:n}=r,{value:i}=r,o=!1;for(;!o&&!e(i);)({value:i,done:o}=n.next());return o?[]:[{iterator:n,value:i}]})}var zd=class t extends gt{constructor(r,n,i){super();this.scopeType=r;this.scopeHandlers=n;this.getIterationScopeType=i;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(l=>{let u=r.create(l,i);if(u==null)throw new Error(`No available scope handler for '${l.type}'`);return u}),s=()=>({type:"custom",scopeHandler:new t(void 0,o.map(l=>r.create(l.iterationScopeType,i)),()=>{throw new Error("Not implemented")})});return new t(n,o,s)}get iterationScopeType(){return this.getIterationScopeType()}*generateScopeCandidates(r,n,i,o){let s=this.scopeHandlers.map(u=>u.generateScopes(r,n,i,o)[Symbol.iterator]()),l=VM(s);for(;l.length>0;){l.sort((p,d)=>Rn(i,n,p.value,d.value));let u=l[0].value;yield u,l=BM(l,p=>Rn(i,n,u,p)<0)}}};var Gd=class extends gt{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,s=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,u=U5(o,n,i),p=r.document.lineAt(n);for(let d=n.line+s;d!==l;d+=s){let h=r.document.lineAt(d);h.isEmptyOrWhitespace?u!=null&&(yield HM(r,u.range.union(p.range)),u=void 0):u==null&&(u=h),p=h}u!=null&&(yield HM(r,u.range.union(p.range)))}};function U5(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let s=e.line+n;s!==i;s+=n){let l=t.lineAt(s);if(l.isEmptyOrWhitespace)break;o=l}return o}}function HM(t,e){return{editor:t,domain:e,getTargets:r=>[new ps({editor:t,isReversed:r,contentRange:ml(t,e)})]}}function hl(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function WM(t,e){return t.slice(t.length-e.length)===e}var uS,B5=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function $M(t){t?uS=t:uS=B5}function pS(t){return/^[A-Z][a-z].*/.test(t)||Kd(t)}function qM(t){return pS(t)||/``|"|'/.test(t.substring(0,2))}function jM(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~uS.indexOf(e)}function zM(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function fS(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function GM(t){return t.length<=3?!0:pS(t)}function dS(t,e){return e.length>0?t<5&&e[0].length<6&&pS(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function Kd(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function KM(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function QM(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function ZM(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function YM(t){return t==="."||t==="!"||t==="?"}var JM=" @~@ ",XM=JM.trim(),W5=new RegExp("\\S",""),$5=new RegExp("\\n+|[-#=_+*]{4,}","g"),q5=new RegExp("\\S+|\\n","g"),j5={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function eA(t,e){if(!t)return[];if(!W5.test(t))return[];let r={...j5,...e};$M(r.abbreviations),r.newlineBoundaries&&(t=t.replace($5,JM));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(h,g){return g%2})):n=t.trim().match(q5)??[];let o=0,s=0,l=[],u=[],p=[];if(!n||!n.length)return[];for(let h=0,g=n.length;h<g;h++){if(o++,p.push(n[h]),~n[h].indexOf(",")&&(o=0),YM(n[h])||hl(n[h],"?!")||n[h]===XM){r.newlineBoundaries&&n[h]===XM&&p.pop(),u.push(p),o=0,p=[];continue}if((hl(n[h],'"')||hl(n[h],"\u201D"))&&(n[h]=n[h].slice(0,-1)),hl(n[h],".")){if(h+1<g){if(n[h].length===2&&isNaN(n[h].charAt(0))||jM(n[h]))continue;if(qM(n[h+1])){if(zM(n[h],n[h+1])||dS(o,n.slice(h,6))||Kd(n[h+1])&&GM(n[h]))continue}else if(WM(n[h],"..")||fS(n[h])||dS(o,n.slice(h,5)))continue}u.push(p),p=[],o=0;continue}(s=n[h].indexOf("."))>-1&&(Kd(n[h],s)||fS(n[h])||QM(n[h])||KM(n[h]))||(l=ZM(n[h]))&&(p.pop(),p.push(l[0]),u.push(p),p=[],o=0,p.push(l[1]))}return p.length&&u.push(p),u=u.filter(function(h){return h.length>0}),u.slice(1).reduce(function(h,g){let x=h[h.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(h.pop(),h.push(x.concat(g)),h):(h.push(g),h)},[u[0]]).map(function(h,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=h.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return h.join(" ")})}var z5=/\S*\p{L}/u,tA=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,G5={newlineBoundaries:!1,preserveWhitespace:!0},Qd=class{*segment(e){let r=eA(e,G5),n=0;for(let i of r){let o=i.split(tA).filter(s=>s!=null);for(let s of o){if(!Q5(s)){let l=K5(s,n);l!=null&&(yield l)}n+=s.length}}}};function K5(t,e){let r=OR(z5,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function Q5(t){return Oc(tA,t)}var Zd=class extends yr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new Qd}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),s=n.document.getText(i),l=p=>{let d=new W(n.document.positionAt(o+p.index),n.document.positionAt(o+p.index+p.text.length));return{editor:n,domain:d,getTargets:h=>[new gr({editor:n,contentRange:d,isReversed:h})]}},u=this.segmenter.segment(s);return r==="forward"?Nt(u,l):Array.from(u,l).reverse()}};var Ts=class extends yr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(Kn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new gr({editor:n,contentRange:o,isReversed:s})]}))}},Yd=class extends Ts{constructor(){super(...arguments);this.regex=/\S+/g}},Xd=class extends Ts{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},Jd=class extends Ts{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,"gu")}},em=class extends Ts{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Ir(this.scopeType.character),"gui")}};var tm=class extends gt{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){if(this.targetScopeHandler.iterationScopeType.type==="custom")throw Error("Iteration scope type can't be custom for BoundedBaseScopeHandler");return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let s=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment==null&&o.skipAncestorScopes?"required":o.containment}));for(let u of s){let p=[];for(let d of l){let h=u.domain.intersection(d.domain);h!=null&&!h.isEmpty&&p.push({editor:r,domain:h,getTargets:g=>[this.getTargets(rA(u,g),rA(d,g))]})}p.push(u),p.sort((d,h)=>Rn(i,n,d,h)),yield*p}}};function rA(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var rm=class extends tm{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new gr({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},nm=class extends tm{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof ps))throw Error("Expected ParagraphTarget");return new hd({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var im=class extends gt{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return so(this.surroundingPairScopeHandler.generateScopes(r,n,i,o),s=>({editor:r,domain:s.domain,getTargets(l){return s.getTargets(l).flatMap(u=>u.getInterior())}}))}};function nA(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new W(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:s=>[new fd({editor:t,isReversed:s,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function iA(t){let e=yi(t.map(({text:r})=>r)).map(Ir).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function oA(t,e,r){if(r.length===0)return[];let n=iA(r),i=t?.getCaptures(e,"disqualifyDelimiter")??[],o=t?.getCaptures(e,"textFragment")??[],s=Object.fromEntries(r.map(u=>[u.text,u])),l=e.getText();return Jr(l,n,u=>{let p=u[0],d=new W(e.positionAt(u.index),e.positionAt(u.index+p.length)),h=i.some(x=>x.range.contains(d)&&!x.hasError()),g=o.find(x=>x.range.contains(d))?.range;return{delimiterInfo:s[p],isDisqualified:h,textFragmentRange:g,range:d}})}var am=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],backtickQuotes:["`","`"],curlyBrackets:[["{","${"],"}"],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),om=["","r","u","R","U","f","F","fr","Fr","fR","FR","rf","rF","Rf","RF","b","B","br","Br","bR","BR","rb","rB","Rb","RB"],aA={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{singleQuotes:[om.map(t=>`${t}'`),"'",{isSingleLine:!0,isUnknownSide:!0}],doubleQuotes:[om.map(t=>`${t}"`),'"',{isSingleLine:!0,isUnknownSide:!0}],tripleSingleQuotes:[om.map(t=>`${t}'''`),"'''",{isUnknownSide:!0}],tripleDoubleQuotes:[om.map(t=>`${t}"""`),'"""',{isUnknownSide:!0}]},ruby:{tripleDoubleQuotes:["%Q(",")"]}},y0e=Object.fromEntries(Object.values(am)),sA={any:Ti(am),string:["tripleDoubleQuotes","tripleSingleQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function cA(t){return t!=null&&t in aA?{...am,...aA[t]}:am}function lA(t,e){let r=sA[t]??[t];return Z5(e,r)}function Z5(t,e){let r=cA(t);return e.flatMap(n=>{let[i,o,s]=r[n],{isSingleLine:l=!1,isUnknownSide:u=!1}=s??{},p=Qc(i)?[i]:i,d=Qc(o)?[o]:o;return yi(Mc(p,d)).map(g=>{let x=p.includes(g),v=d.includes(g);return{text:g,side:u?"unknown":x&&!v?"left":!x&&v?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function uA(t){let e=[],r=new eo(()=>[]);for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:s},isDisqualified:l,textFragmentRange:u,range:p}=n;if(l)continue;let d=r.get(i);s&&(d=d.filter(g=>g.range.start.line===p.start.line),r.set(i,d));let h=d.filter(g=>u==null&&g.textFragmentRange==null||u!=null&&g.textFragmentRange!=null&&g.textFragmentRange.isRangeEqual(u));if(o==="left"||o==="unknown"&&h.length%2===0)d.push(n);else{let g=h.at(-1);if(g==null)continue;d.splice(d.lastIndexOf(g),1),e.push({delimiterName:i,openingDelimiterRange:g.range,closingDelimiterRange:p})}}return e}var sm=class extends gt{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){rt(I().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let s=oA(this.languageDefinitions.get(this.languageId),r.document,lA(this.scopeType.delimiter,this.languageId)),l=uA(s);l=Y5(i,o,n,l),yield*l.map(u=>nA(r,u,this.scopeType.requireStrongContainment??!1)).sort((u,p)=>Rn(i,n,u,p))}};function Y5(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var Ss=class{constructor(e){this.languageDefinitions=e;this.create=this.create.bind(this)}create(e,r){switch(e.type){case"character":return new Vd(this,e,r);case"word":return new Hd(this,e,r);case"token":return new Wd(this,e,r);case"identifier":return new Ld(this,e,r);case"line":return new Od(e,r);case"sentence":return new Zd(this,e,r);case"paragraph":return new Gd(e,r);case"boundedParagraph":return new nm(this,e,r);case"document":return new $d(e,r);case"oneOf":return zd.create(this,e,r);case"nonWhitespaceSequence":return new Yd(this,e,r);case"boundedNonWhitespaceSequence":return new rm(this,e,r);case"url":return new Xd(this,e,r);case"customRegex":return new Jd(this,e,r);case"glyph":return new em(this,e,r);case"surroundingPair":return new sm(this.languageDefinitions,e,r);case"surroundingPairInterior":return new im(this,e,r);case"custom":return e.scopeHandler;case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}};function an(t,e){return new W(t.row,t.column,e.row,e.column)}function mS(t){return new se(t.row,t.column)}function pA(t){return new W(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function fA(t,e){return new Te(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function Qn(t,e){return{selection:new Te(new se(e.startPosition.row,e.startPosition.column),new se(e.endPosition.row,e.endPosition.column)),context:{}}}function X5(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new Te(new se(i.startPosition.row,i.startPosition.column),new se(o.endPosition.row,o.endPosition.column)),context:{}}}function dA(){return gl(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function mA(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new Te(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function hA(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=an(i.endPosition,r.startPosition):o=an(n.startPosition,r.startPosition):o=an(n.endPosition,r.startPosition)),{...Qn(e,r),context:{leadingDelimiterRange:o}}}}function Zn(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,s=new Set(t),l=new Set(e);return o=o.filter(u=>s.size>0?!s.has(u.type):l.size>0?l.has(u.type):!0),X5(n,o[0],o[o.length-1])}}function gA(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=an(r.endPosition,i.startPosition):o=an(r.endPosition,n.endPosition):o=an(r.endPosition,n.startPosition)),{...Qn(e,r),context:{trailingDelimiterRange:o}}}}function J5(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function e9(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function gl(t,e,r=Bt,n=Bt){return(i,o)=>{let s,l,u=r(o),p=n(o),d=e9(u,t),h=J5(p,t);d!=null&&(s=an(d.endPosition,u.startPosition)),h!=null&&(l=an(p.endPosition,h.startPosition));let g=t9(i,s,l,e);return{selection:new Te(new se(u.startPosition.row,u.startPosition.column),new se(p.endPosition.row,p.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:s,trailingDelimiterRange:l}}}}function t9(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return $x(o,"length")}function yA(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:u})=>u.endsWith(".start")).map(({range:{end:u}})=>u).sort((u,p)=>u.compareTo(p)).at(-1),i=t.filter(({name:u})=>u.endsWith(".end")).map(({range:{start:u}})=>u).sort((u,p)=>u.compareTo(p)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(rt(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:u})=>u.endsWith(".start")).length,s=t.filter(({name:u})=>u.endsWith(".end")).length,l=t.length-o-s;return l>0&&(o>0||s>0)&&(rt(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:u,range:p})=>u+" "+p.toString())}`),r=!0),l>1&&(rt(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:u,range:p})=>u+" "+p.toString())}`),r=!0),!r}function xA(t){let e=t;for(;e!=null;){if(e.hasError)return!0;e=e.parent}return!1}var Oe;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(let l of o)s[l]=i[l];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(let s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Oe||(Oe={}));var gS;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(gS||(gS={}));var X=Oe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),co=t=>{switch(typeof t){case"undefined":return X.undefined;case"string":return X.string;case"number":return isNaN(t)?X.nan:X.number;case"boolean":return X.boolean;case"function":return X.function;case"bigint":return X.bigint;case"symbol":return X.symbol;case"object":return Array.isArray(t)?X.array:t===null?X.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?X.promise:typeof Map<"u"&&t instanceof Map?X.map:typeof Set<"u"&&t instanceof Set?X.set:typeof Date<"u"&&t instanceof Date?X.date:X.object;default:return X.unknown}},G=Oe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),r9=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Or=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let l=n,u=0;for(;u<s.path.length;){let p=s.path[u];u===s.path.length-1?(l[p]=l[p]||{_errors:[]},l[p]._errors.push(r(s))):l[p]=l[p]||{_errors:[]},l=l[p],u++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Oe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Or.create=t=>new Or(t);var yl=(t,e)=>{let r;switch(t.code){case G.invalid_type:t.received===X.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Oe.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${Oe.joinValues(t.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Oe.joinValues(t.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${Oe.joinValues(t.options)}, received '${t.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Oe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case G.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case G.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=e.defaultError,Oe.assertNever(t)}return{message:r}},vA=yl;function n9(t){vA=t}function lm(){return vA}var um=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],s={...i,path:o},l="",u=n.filter(p=>!!p).slice().reverse();for(let p of u)l=p(s,{data:e,defaultError:l}).message;return{...i,path:o,message:i.message||l}},i9=[];function ee(t,e){let r=um({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,lm(),yl].filter(n=>!!n)});t.common.issues.push(r)}var $t=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return ye;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r)n.push({key:await i.key,value:await i.value});return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return ye;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},ye=Object.freeze({status:"aborted"}),bA=t=>({status:"dirty",value:t}),tr=t=>({status:"valid",value:t}),yS=t=>t.status==="aborted",xS=t=>t.status==="dirty",xl=t=>t.status==="valid",pm=t=>typeof Promise<"u"&&t instanceof Promise,ce;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(ce||(ce={}));var sn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},TA=(t,e)=>{if(xl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Or(t.common.issues);return this._error=r,this._error}}};function Se(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,l)=>s.code!=="invalid_type"?{message:l.defaultError}:typeof l.data>"u"?{message:n??l.defaultError}:{message:r??l.defaultError},description:i}}var ve=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return co(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:co(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new $t,ctx:{common:e.parent.common,data:e.data,parsedType:co(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(pm(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:co(e)},o=this._parseSync({data:e,path:i.path,parent:i});return TA(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:co(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(pm(i)?i:Promise.resolve(i));return TA(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let s=e(i),l=()=>o.addIssue({code:G.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Lr({schema:this,typeName:fe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return kn.create(this,this._def)}nullable(){return ki.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ri.create(this,this._def)}promise(){return po.create(this,this._def)}or(e){return ea.create([this,e],this._def)}and(e){return ta.create(this,e,this._def)}transform(e){return new Lr({...Se(this._def),schema:this,typeName:fe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new aa({...Se(this._def),innerType:this,defaultValue:r,typeName:fe.ZodDefault})}brand(){return new hm({typeName:fe.ZodBranded,type:this,...Se(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Rs({...Se(this._def),innerType:this,catchValue:r,typeName:fe.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Tl.create(this,e)}readonly(){return Ps.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},o9=/^c[^\s-]{8,}$/i,a9=/^[a-z][a-z0-9]*$/,s9=/^[0-9A-HJKMNP-TV-Z]{26}$/,c9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,l9=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,u9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",hS,p9=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,f9=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,d9=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function m9(t,e){return!!((e==="v4"||!e)&&p9.test(t)||(e==="v6"||!e)&&f9.test(t))}var lo=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==X.string){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.string,received:o.parsedType}),ye}let n=new $t,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,l=e.data.length<o.value;(s||l)&&(i=this._getOrReturnCtx(e,i),s?ee(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&ee(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")l9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"email",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")hS||(hS=new RegExp(u9,"u")),hS.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"emoji",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")c9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"uuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")o9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"cuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")a9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"cuid2",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")s9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"ulid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ee(i,{validation:"url",code:G.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"regex",code:G.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?d9(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="ip"?m9(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"ip",code:G.invalid_string,message:o.message}),n.dirty()):Oe.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:G.invalid_string,...ce.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...ce.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...ce.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ce.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ce.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ce.errToObj(r)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};lo.create=t=>{var e;return new lo({checks:[],typeName:fe.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Se(t)})};function h9(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),s=parseInt(e.toFixed(i).replace(".",""));return o%s/Math.pow(10,i)}var Ko=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==X.number){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.number,received:o.parsedType}),ye}let n,i=new $t;for(let o of this._def.checks)o.kind==="int"?Oe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:G.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?h9(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_finite,message:o.message}),i.dirty()):Oe.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Oe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Ko.create=t=>new Ko({checks:[],typeName:fe.ZodNumber,coerce:t?.coerce||!1,...Se(t)});var Qo=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==X.bigint){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.bigint,received:o.parsedType}),ye}let n,i=new $t;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Oe.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Qo.create=t=>{var e;return new Qo({checks:[],typeName:fe.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Se(t)})};var Zo=class extends ve{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==X.boolean){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.boolean,received:n.parsedType}),ye}return tr(e.data)}};Zo.create=t=>new Zo({typeName:fe.ZodBoolean,coerce:t?.coerce||!1,...Se(t)});var Yo=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==X.date){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.date,received:o.parsedType}),ye}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_date}),ye}let n=new $t,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Oe.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Yo.create=t=>new Yo({checks:[],coerce:t?.coerce||!1,typeName:fe.ZodDate,...Se(t)});var bs=class extends ve{_parse(e){if(this._getType(e)!==X.symbol){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.symbol,received:n.parsedType}),ye}return tr(e.data)}};bs.create=t=>new bs({typeName:fe.ZodSymbol,...Se(t)});var Xo=class extends ve{_parse(e){if(this._getType(e)!==X.undefined){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.undefined,received:n.parsedType}),ye}return tr(e.data)}};Xo.create=t=>new Xo({typeName:fe.ZodUndefined,...Se(t)});var Jo=class extends ve{_parse(e){if(this._getType(e)!==X.null){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.null,received:n.parsedType}),ye}return tr(e.data)}};Jo.create=t=>new Jo({typeName:fe.ZodNull,...Se(t)});var uo=class extends ve{constructor(){super(...arguments),this._any=!0}_parse(e){return tr(e.data)}};uo.create=t=>new uo({typeName:fe.ZodAny,...Se(t)});var Ei=class extends ve{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tr(e.data)}};Ei.create=t=>new Ei({typeName:fe.ZodUnknown,...Se(t)});var Pn=class extends ve{_parse(e){let r=this._getOrReturnCtx(e);return ee(r,{code:G.invalid_type,expected:X.never,received:r.parsedType}),ye}};Pn.create=t=>new Pn({typeName:fe.ZodNever,...Se(t)});var ws=class extends ve{_parse(e){if(this._getType(e)!==X.undefined){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.void,received:n.parsedType}),ye}return tr(e.data)}};ws.create=t=>new ws({typeName:fe.ZodVoid,...Se(t)});var Ri=class t extends ve{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==X.array)return ee(r,{code:G.invalid_type,expected:X.array,received:r.parsedType}),ye;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(s||l)&&(ee(r,{code:s?G.too_big:G.too_small,minimum:l?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ee(r,{code:G.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ee(r,{code:G.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>i.type._parseAsync(new sn(r,s,r.path,l)))).then(s=>$t.mergeArray(n,s));let o=[...r.data].map((s,l)=>i.type._parseSync(new sn(r,s,r.path,l)));return $t.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:ce.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:ce.toString(r)}})}nonempty(e){return this.min(1,e)}};Ri.create=(t,e)=>new Ri({type:t,minLength:null,maxLength:null,exactLength:null,typeName:fe.ZodArray,...Se(e)});function vs(t){if(t instanceof xr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=kn.create(vs(n))}return new xr({...t._def,shape:()=>e})}else return t instanceof Ri?new Ri({...t._def,type:vs(t.element)}):t instanceof kn?kn.create(vs(t.unwrap())):t instanceof ki?ki.create(vs(t.unwrap())):t instanceof Yn?Yn.create(t.items.map(e=>vs(e))):t}var xr=class t extends ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Oe.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==X.object){let p=this._getOrReturnCtx(e);return ee(p,{code:G.invalid_type,expected:X.object,received:p.parsedType}),ye}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof Pn&&this._def.unknownKeys==="strip"))for(let p in i.data)s.includes(p)||l.push(p);let u=[];for(let p of s){let d=o[p],h=i.data[p];u.push({key:{status:"valid",value:p},value:d._parse(new sn(i,h,i.path,p)),alwaysSet:p in i.data})}if(this._def.catchall instanceof Pn){let p=this._def.unknownKeys;if(p==="passthrough")for(let d of l)u.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(p==="strict")l.length>0&&(ee(i,{code:G.unrecognized_keys,keys:l}),n.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let p=this._def.catchall;for(let d of l){let h=i.data[d];u.push({key:{status:"valid",value:d},value:p._parse(new sn(i,h,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let p=[];for(let d of u){let h=await d.key;p.push({key:h,value:await d.value,alwaysSet:d.alwaysSet})}return p}).then(p=>$t.mergeObjectSync(n,p)):$t.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,s,l;let u=(s=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&s!==void 0?s:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=ce.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:fe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Oe.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return vs(this)}partial(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof kn;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return wA(Oe.objectKeys(this.shape))}};xr.create=(t,e)=>new xr({shape:()=>t,unknownKeys:"strip",catchall:Pn.create(),typeName:fe.ZodObject,...Se(e)});xr.strictCreate=(t,e)=>new xr({shape:()=>t,unknownKeys:"strict",catchall:Pn.create(),typeName:fe.ZodObject,...Se(e)});xr.lazycreate=(t,e)=>new xr({shape:t,unknownKeys:"strip",catchall:Pn.create(),typeName:fe.ZodObject,...Se(e)});var ea=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=o.map(l=>new Or(l.ctx.common.issues));return ee(r,{code:G.invalid_union,unionErrors:s}),ye}if(r.common.async)return Promise.all(n.map(async o=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let u of n){let p={...r,common:{...r.common,issues:[]},parent:null},d=u._parseSync({data:r.data,path:r.path,parent:p});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:p}),p.common.issues.length&&s.push(p.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=s.map(u=>new Or(u));return ee(r,{code:G.invalid_union,unionErrors:l}),ye}}get options(){return this._def.options}};ea.create=(t,e)=>new ea({options:t,typeName:fe.ZodUnion,...Se(e)});var cm=t=>t instanceof ra?cm(t.schema):t instanceof Lr?cm(t.innerType()):t instanceof na?[t.value]:t instanceof ia?t.options:t instanceof oa?Object.keys(t.enum):t instanceof aa?cm(t._def.innerType):t instanceof Xo?[void 0]:t instanceof Jo?[null]:null,fm=class t extends ve{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.object)return ee(r,{code:G.invalid_type,expected:X.object,received:r.parsedType}),ye;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(ee(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ye)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let s=cm(o.shape[e]);if(!s)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of s){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:fe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Se(n)})}};function TS(t,e){let r=co(t),n=co(e);if(t===e)return{valid:!0,data:t};if(r===X.object&&n===X.object){let i=Oe.objectKeys(e),o=Oe.objectKeys(t).filter(l=>i.indexOf(l)!==-1),s={...t,...e};for(let l of o){let u=TS(t[l],e[l]);if(!u.valid)return{valid:!1};s[l]=u.data}return{valid:!0,data:s}}else if(r===X.array&&n===X.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let s=t[o],l=e[o],u=TS(s,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return r===X.date&&n===X.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var ta=class extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(yS(o)||yS(s))return ye;let l=TS(o.value,s.value);return l.valid?((xS(o)||xS(s))&&r.dirty(),{status:r.value,value:l.data}):(ee(n,{code:G.invalid_intersection_types}),ye)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};ta.create=(t,e,r)=>new ta({left:t,right:e,typeName:fe.ZodIntersection,...Se(r)});var Yn=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.array)return ee(n,{code:G.invalid_type,expected:X.array,received:n.parsedType}),ye;if(n.data.length<this._def.items.length)return ee(n,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ye;!this._def.rest&&n.data.length>this._def.items.length&&(ee(n,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((s,l)=>{let u=this._def.items[l]||this._def.rest;return u?u._parse(new sn(n,s,n.path,l)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>$t.mergeArray(r,s)):$t.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Yn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Yn({items:t,typeName:fe.ZodTuple,rest:null,...Se(e)})};var dm=class t extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.object)return ee(n,{code:G.invalid_type,expected:X.object,received:n.parsedType}),ye;let i=[],o=this._def.keyType,s=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new sn(n,l,n.path,l)),value:s._parse(new sn(n,n.data[l],n.path,l))});return n.common.async?$t.mergeObjectAsync(r,i):$t.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ve?new t({keyType:e,valueType:r,typeName:fe.ZodRecord,...Se(n)}):new t({keyType:lo.create(),valueType:e,typeName:fe.ZodRecord,...Se(r)})}},_s=class extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.map)return ee(n,{code:G.invalid_type,expected:X.map,received:n.parsedType}),ye;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([l,u],p)=>({key:i._parse(new sn(n,l,n.path,[p,"key"])),value:o._parse(new sn(n,u,n.path,[p,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let u of s){let p=await u.key,d=await u.value;if(p.status==="aborted"||d.status==="aborted")return ye;(p.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(p.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let u of s){let p=u.key,d=u.value;if(p.status==="aborted"||d.status==="aborted")return ye;(p.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(p.value,d.value)}return{status:r.value,value:l}}}};_s.create=(t,e,r)=>new _s({valueType:e,keyType:t,typeName:fe.ZodMap,...Se(r)});var Es=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.set)return ee(n,{code:G.invalid_type,expected:X.set,received:n.parsedType}),ye;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ee(n,{code:G.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ee(n,{code:G.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function s(u){let p=new Set;for(let d of u){if(d.status==="aborted")return ye;d.status==="dirty"&&r.dirty(),p.add(d.value)}return{status:r.value,value:p}}let l=[...n.data.values()].map((u,p)=>o._parse(new sn(n,u,n.path,p)));return n.common.async?Promise.all(l).then(u=>s(u)):s(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:ce.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Es.create=(t,e)=>new Es({valueType:t,minSize:null,maxSize:null,typeName:fe.ZodSet,...Se(e)});var mm=class t extends ve{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.function)return ee(r,{code:G.invalid_type,expected:X.function,received:r.parsedType}),ye;function n(l,u){return um({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,lm(),yl].filter(p=>!!p),issueData:{code:G.invalid_arguments,argumentsError:u}})}function i(l,u){return um({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,lm(),yl].filter(p=>!!p),issueData:{code:G.invalid_return_type,returnTypeError:u}})}let o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof po){let l=this;return tr(async function(...u){let p=new Or([]),d=await l._def.args.parseAsync(u,o).catch(x=>{throw p.addIssue(n(u,x)),p}),h=await Reflect.apply(s,this,d);return await l._def.returns._def.type.parseAsync(h,o).catch(x=>{throw p.addIssue(i(h,x)),p})})}else{let l=this;return tr(function(...u){let p=l._def.args.safeParse(u,o);if(!p.success)throw new Or([n(u,p.error)]);let d=Reflect.apply(s,this,p.data),h=l._def.returns.safeParse(d,o);if(!h.success)throw new Or([i(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Yn.create(e).rest(Ei.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Yn.create([]).rest(Ei.create()),returns:r||Ei.create(),typeName:fe.ZodFunction,...Se(n)})}},ra=class extends ve{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ra.create=(t,e)=>new ra({getter:t,typeName:fe.ZodLazy,...Se(e)});var na=class extends ve{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ee(r,{received:r.data,code:G.invalid_literal,expected:this._def.value}),ye}return{status:"valid",value:e.data}}get value(){return this._def.value}};na.create=(t,e)=>new na({value:t,typeName:fe.ZodLiteral,...Se(e)});function wA(t,e){return new ia({values:t,typeName:fe.ZodEnum,...Se(e)})}var ia=class t extends ve{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ee(r,{expected:Oe.joinValues(n),received:r.parsedType,code:G.invalid_type}),ye}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),n=this._def.values;return ee(r,{received:r.data,code:G.invalid_enum_value,options:n}),ye}return tr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return t.create(e)}exclude(e){return t.create(this.options.filter(r=>!e.includes(r)))}};ia.create=wA;var oa=class extends ve{_parse(e){let r=Oe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==X.string&&n.parsedType!==X.number){let i=Oe.objectValues(r);return ee(n,{expected:Oe.joinValues(i),received:n.parsedType,code:G.invalid_type}),ye}if(r.indexOf(e.data)===-1){let i=Oe.objectValues(r);return ee(n,{received:n.data,code:G.invalid_enum_value,options:i}),ye}return tr(e.data)}get enum(){return this._def.values}};oa.create=(t,e)=>new oa({values:t,typeName:fe.ZodNativeEnum,...Se(e)});var po=class extends ve{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.promise&&r.common.async===!1)return ee(r,{code:G.invalid_type,expected:X.promise,received:r.parsedType}),ye;let n=r.parsedType===X.promise?r.data:Promise.resolve(r.data);return tr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};po.create=(t,e)=>new po({type:t,typeName:fe.ZodPromise,...Se(e)});var Lr=class extends ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{ee(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(s).then(l=>this._def.schema._parseAsync({data:l,path:n.path,parent:n})):this._def.schema._parseSync({data:s,path:n.path,parent:n})}if(i.type==="refinement"){let s=l=>{let u=i.refinement(l,o);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?ye:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?ye:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!xl(s))return s;let l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>xl(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:r.value,value:l})):s);Oe.assertNever(i)}};Lr.create=(t,e,r)=>new Lr({schema:t,typeName:fe.ZodEffects,effect:e,...Se(r)});Lr.createWithPreprocess=(t,e,r)=>new Lr({schema:e,effect:{type:"preprocess",transform:t},typeName:fe.ZodEffects,...Se(r)});var kn=class extends ve{_parse(e){return this._getType(e)===X.undefined?tr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};kn.create=(t,e)=>new kn({innerType:t,typeName:fe.ZodOptional,...Se(e)});var ki=class extends ve{_parse(e){return this._getType(e)===X.null?tr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ki.create=(t,e)=>new ki({innerType:t,typeName:fe.ZodNullable,...Se(e)});var aa=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===X.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};aa.create=(t,e)=>new aa({innerType:t,typeName:fe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Se(e)});var Rs=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return pm(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Or(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Or(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Rs.create=(t,e)=>new Rs({innerType:t,typeName:fe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Se(e)});var ks=class extends ve{_parse(e){if(this._getType(e)!==X.nan){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.nan,received:n.parsedType}),ye}return{status:"valid",value:e.data}}};ks.create=t=>new ks({typeName:fe.ZodNaN,...Se(t)});var g9=Symbol("zod_brand"),hm=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Tl=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ye:o.status==="dirty"?(r.dirty(),bA(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ye:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:fe.ZodPipeline})}},Ps=class extends ve{_parse(e){let r=this._def.innerType._parse(e);return xl(r)&&(r.value=Object.freeze(r.value)),r}};Ps.create=(t,e)=>new Ps({innerType:t,typeName:fe.ZodReadonly,...Se(e)});var _A=(t,e={},r)=>t?uo.create().superRefine((n,i)=>{var o,s;if(!t(n)){let l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,u=(s=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&s!==void 0?s:!0,p=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...p,fatal:u})}}):uo.create(),y9={object:xr.lazycreate},fe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(fe||(fe={}));var x9=(t,e={message:`Input not instance of ${t.name}`})=>_A(r=>r instanceof t,e),EA=lo.create,RA=Ko.create,T9=ks.create,S9=Qo.create,kA=Zo.create,v9=Yo.create,b9=bs.create,w9=Xo.create,_9=Jo.create,E9=uo.create,R9=Ei.create,k9=Pn.create,P9=ws.create,M9=Ri.create,A9=xr.create,D9=xr.strictCreate,I9=ea.create,F9=fm.create,C9=ta.create,N9=Yn.create,O9=dm.create,L9=_s.create,U9=Es.create,V9=mm.create,B9=ra.create,H9=na.create,W9=ia.create,$9=oa.create,q9=po.create,SA=Lr.create,j9=kn.create,z9=ki.create,G9=Lr.createWithPreprocess,K9=Tl.create,Q9=()=>EA().optional(),Z9=()=>RA().optional(),Y9=()=>kA().optional(),X9={string:t=>lo.create({...t,coerce:!0}),number:t=>Ko.create({...t,coerce:!0}),boolean:t=>Zo.create({...t,coerce:!0}),bigint:t=>Qo.create({...t,coerce:!0}),date:t=>Yo.create({...t,coerce:!0})},J9=ye,We=Object.freeze({__proto__:null,defaultErrorMap:yl,setErrorMap:n9,getErrorMap:lm,makeIssue:um,EMPTY_PATH:i9,addIssueToContext:ee,ParseStatus:$t,INVALID:ye,DIRTY:bA,OK:tr,isAborted:yS,isDirty:xS,isValid:xl,isAsync:pm,get util(){return Oe},get objectUtil(){return gS},ZodParsedType:X,getParsedType:co,ZodType:ve,ZodString:lo,ZodNumber:Ko,ZodBigInt:Qo,ZodBoolean:Zo,ZodDate:Yo,ZodSymbol:bs,ZodUndefined:Xo,ZodNull:Jo,ZodAny:uo,ZodUnknown:Ei,ZodNever:Pn,ZodVoid:ws,ZodArray:Ri,ZodObject:xr,ZodUnion:ea,ZodDiscriminatedUnion:fm,ZodIntersection:ta,ZodTuple:Yn,ZodRecord:dm,ZodMap:_s,ZodSet:Es,ZodFunction:mm,ZodLazy:ra,ZodLiteral:na,ZodEnum:ia,ZodNativeEnum:oa,ZodPromise:po,ZodEffects:Lr,ZodTransformer:Lr,ZodOptional:kn,ZodNullable:ki,ZodDefault:aa,ZodCatch:Rs,ZodNaN:ks,BRAND:g9,ZodBranded:hm,ZodPipeline:Tl,ZodReadonly:Ps,custom:_A,Schema:ve,ZodSchema:ve,late:y9,get ZodFirstPartyTypeKind(){return fe},coerce:X9,any:E9,array:M9,bigint:S9,boolean:kA,date:v9,discriminatedUnion:F9,effect:SA,enum:W9,function:V9,instanceof:x9,intersection:C9,lazy:B9,literal:H9,map:L9,nan:T9,nativeEnum:$9,never:k9,null:_9,nullable:z9,number:RA,object:A9,oboolean:Y9,onumber:Z9,optional:j9,ostring:Q9,pipeline:K9,preprocess:G9,promise:q9,record:O9,set:U9,strictObject:D9,string:EA,symbol:b9,transformer:SA,tuple:N9,undefined:w9,union:I9,unknown:R9,void:P9,NEVER:J9,ZodIssueCode:G,quotelessJson:r9,ZodError:Or});function PA(t){let e=t.operands.map(SS).join(" ");return`(#${t.operator} ${e})`}function SS(t){return t.type==="capture"?`@${t.name}`:t.value}function MA(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>e8(t,r))}function e8(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=SS(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var rr=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof gm&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:MA(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new gm(n.name);return i}else return n.value})}},gm=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var vS=We.object({type:We.literal("string"),value:We.string()}),we={node:We.object({type:We.literal("capture"),name:We.string()}),string:vS,integer:vS.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:We.ZodIssueCode.custom,message:"Expected an integer"}),We.NEVER):{type:"integer",value:r}}),boolean:vS.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:We.ZodIssueCode.custom,message:"Expected true or false"}),We.NEVER))};var bS=class extends rr{constructor(){super(...arguments);this.name="not-type?";this.schema=We.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return!n.includes(r.type)}},wS=class extends rr{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=We.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},_S=class extends rr{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=We.tuple([we.node,we.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},ES=class extends rr{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=We.tuple([we.node,we.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},RS=class extends rr{constructor(){super(...arguments);this.name="child-range!";this.schema=We.union([We.tuple([we.node,we.integer]),We.tuple([we.node,we.integer,we.integer]),We.tuple([we.node,we.integer,we.integer,we.boolean]),We.tuple([we.node,we.integer,we.integer,we.boolean,we.boolean])])}run(r,n,i,o,s){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let u=l[n],p=l[i];return r.range=an(o?u.endPosition:u.startPosition,s?p.startPosition:p.endPosition),!0}},kS=class extends rr{constructor(){super(...arguments);this.name="character-range!";this.schema=We.union([We.tuple([we.node,we.integer]),We.tuple([we.node,we.integer,we.integer])])}run(r,n,i){return r.range=new W(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},PS=class extends rr{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=We.tuple([we.node,we.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[u,p]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new W(i.positionAt(d+u),i.positionAt(d+p)),!0}},MS=class extends rr{constructor(){super(...arguments);this.name="trim-end!";this.schema=We.tuple([we.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),s=o.length-o.trimEnd().length;return s>0&&(r.range=new W(i.start,CR(n,i.end,-s))),!0}},AS=class extends rr{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=We.tuple([we.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},DS=class extends rr{constructor(){super(...arguments);this.name="log!";this.schema=We.tuple([we.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},IS=class extends rr{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=We.tuple([we.node,we.string])}run(r,n){return r.insertionDelimiter=n,!0}},FS=class extends rr{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=We.tuple([we.node,we.node,we.string,we.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},AA=[new DS,new bS,new MS,new wS,new _S,new RS,new kS,new PS,new AS,new IS,new FS,new ES];function DA(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((s,l)=>{let u=AA.find(({name:d})=>d===s.operator);if(u==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${s.operator}"`});return}let p=u.createPredicate(s.operands);if(!p.success){e.push(...p.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(p.predicate)}),r.push(o)}),{errors:e,predicates:r}}function IA(t){return t.map(e=>e.name.endsWith(".startOf")?{...e,name:e.name.replace(/\.startOf$/,""),range:e.range.start.toEmptyRange()}:e.name.endsWith(".endOf")?{...e,name:e.name.replace(/\.endOf$/,""),range:e.range.end.toEmptyRange()}:e)}var Sl=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n}static create(e,r,n){let{errors:i,predicates:o}=DA(n.predicates);if(i.length>0){for(let s of i){let l=[`language ${e}`,`pattern ${s.patternIdx}`,`predicate \`${PA(n.predicates[s.patternIdx][s.predicateIdx])}\``].join(", ");rt(I().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${l}: ${s.error}`)}if(I().runMode==="test")throw new Error("Invalid predicates")}return new t(r,n,o)}matches(e,r,n){return this.query.matches(this.treeSitter.getTree(e).rootNode,{startPosition:r==null?void 0:CA(r),endPosition:n==null?void 0:CA(n)}).map(({pattern:i,captures:o})=>({patternIdx:i,captures:o.map(({name:s,node:l})=>({name:s,node:l,document:e,range:pA(l),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>xA(l)}))})).filter(i=>this.patternPredicates[i.patternIdx].every(o=>o(i))).map(i=>{let o=Object.entries(Wx(i.captures,({name:s})=>FA(s))).map(([s,l])=>{if(l=IA(l),!yA(l,I().messages)&&I().runMode==="test")throw new Error("Invalid captures");return{name:s,range:l.map(({range:p})=>p).reduce((p,d)=>d.union(p)),allowMultiple:l.some(p=>p.allowMultiple),insertionDelimiter:l.find(p=>p.insertionDelimiter!=null)?.insertionDelimiter,hasError:()=>l.some(p=>p.hasError())}});return{...i,captures:o}})}get captureNames(){return yi(this.query.captureNames.map(FA))}};function FA(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}function CA(t){return{row:t.line,column:t.character}}var OA="_",t8=[OA,...Bo],r8=["prefix","leading","trailing"],n8=["startOf","endOf"],i8=["domain","removal","interior","iteration","iteration.domain"],NA=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],sa=new Set;for(let t of t8){if(t!==OA){sa.add(t);for(let e of NA)sa.add(`${t}.${e}`)}for(let e of r8){sa.add(`${t}.${e}`);for(let r of n8)sa.add(`${t}.${e}.${r}`)}for(let e of i8){sa.add(`${t}.${e}`);for(let r of NA)sa.add(`${t}.${e}.${r}`)}}var o8=new RegExp("^(?!;;).*@([\\w.]*)","gm");function LA(t,e){let r=e.matchAll(o8),n=[];for(let o of r){let s=o[1];if(!(s.length>1&&!s.includes(".")&&s.startsWith("_"))&&!sa.has(s)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${s}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(rt(I().messages,"validateQueryCaptures.invalidCaptureName",i),I().runMode==="test")throw new Error(i)}var ym=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await a8(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let s=n.getLanguage(i).query(o),l=Sl.create(i,n,s);return new t(l)}getScopeHandler(e){if(this.query.captureNames.includes(e.type))return new jd(this.query,e)}getCaptures(e,r){return this.query.matches(e).map(n=>n.captures.find(({name:i})=>i===r)).filter(n=>n!=null)}};async function a8(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,s]of Object.entries(n)){if(s!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(rt(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&LA(o,l),n[o]=l,Jr(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,u=>{let p=u[1];i&&s8(t,o,p,u[0]),n[p]=n[p]??null})}return Object.values(n).join(`
`)}function s8(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(rt(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(rt(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var UA=Symbol("LANGUAGE_UNDEFINED"),xm=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Ht;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;e.onDidOpenTextDocument(i=>{this.loadLanguage(i.languageId)}),e.onDidChangeVisibleTextEditors(i=>{i.forEach(({document:o})=>this.loadLanguage(o.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(rt(this.ide.messages,"Failed to load language definitions",wn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await ym.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??UA;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===UA?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var Tm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e){for(let r of this.nestedStages)try{return r.run(e)}catch{continue}throw new Error("No modifier could be applied")}};var Ms=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e){if(this.shouldModify(e))try{return this.nestedStage.run(e).map(r=>r.withThatTarget(e))}catch(r){if(!this.suppressErrors)throw r}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},As=class extends Ms{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},vl=class extends Ms{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},Sm=class extends Ms{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},Ds=class extends Ms{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function VA(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function Is(t,e,r,n,i){if(n&&i&&VA(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.isLine&&r.isLine?new Nr({editor:e.editor,isReversed:t,contentRange:ls(e,r,n,i)}):new Et({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:no(e,r,n,i),isToken:n&&i&&e.isToken&&r.isToken})}function vm(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[s]=i,l=s.contentRange.start.isAfterOrEqual(o.contentRange.start),[u,p]=l?[o,s]:[s,o];return[Is(t,u,p,!0,!0)]}function bm(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,s]=i;return n==="forward"?s:n==="backward"||(t.isPreferredOver?.(o,s)??!1)?o:s}default:throw new Error("Expected no more than 2 scope candidates")}}function wm(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:s}}=t;if(s.isEqual(o)){let p=bm(e,i,o);return p==null||(r>0&&(p=CS(e,i,p.domain.end,"forward",r,!0)),p==null)?void 0:p.getTargets(n)}let l=CS(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(s))return l.getTargets(n);let u=CS(e,i,s,"backward",r);if(u!=null)return vm(n,l,u)}function CS(t,e,r,n,i,o=!1){let s=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(s===i)return l;s+=1}}var _m=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.create(r,e.editor.document.languageId);if(i==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let o=wm(e,i,n);if(o==null){if(r.type==="collectionItem")return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);throw new Vt(this.modifier.scopeType.type)}return o}};var Em=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,{editor:n,isReversed:i}=e,o=this.scopeHandlerFactory.create(r,n.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let s;if(e.hasExplicitRange&&(s=BA(o,n,e.contentRange),s.length===1&&s[0].domain.contains(e.contentRange)&&(s=void 0)),s==null)try{s=this.getDefaultIterationRange(o,this.scopeHandlerFactory,e).flatMap(l=>BA(o,n,l))}catch(l){if(!(l instanceof Vt))throw l;s=[]}if(s.length===0){if(r.type==="collectionItem")return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);throw new Vt(r.type)}return s.flatMap(l=>l.getTargets(i))}getDefaultIterationRange(e,r,n){let i=r.create(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=wm(n,i);if(o==null)throw new Vt(`iteration scope for ${e.scopeType.type}`);return o.map(s=>s.contentRange)}};function BA(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var Rm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},km=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Pm=class{run(){return gd(I()).map(e=>new dd({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var Mm=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new NS(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},NS=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return c8(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return Tt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return l8(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[fo(e,r,n,i)];let s=US(e,r);return[fo(n?HA(this.modifierStageFactory,e,o,s?"backward":"forward"):e,i?HA(this.modifierStageFactory,r,o,s?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n;e.type==="implicit"?(r=new Pm,n=[]):(r=this.markStageFactory.create(e.mark),n=OS(this.modifierStageFactory,e.modifiers));let i=r.run(),o=[...n,...this.opts.actionFinalStages,...this.opts.noAutomaticTokenExpansion?[]:[new Ds(this.modifierStageFactory)]];return LS(o,i)}};function OS(t,e){return e.map(t.create).reverse()}function LS(t,e){return t.forEach(r=>{e=e.flatMap(n=>r.run(n))}),e}function HA(t,e,r,n){return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e)[0]}function US(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function c8(t){return Bk(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function WA(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function fo(t,e,r=!1,n=!1){WA(t,e);let i=US(t,e);return Is(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function l8(t,e,r,n){WA(t,e);let i=US(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),p=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let h=l;;h+=o){let g=new W(h,t.contentRange.start.character,h,t.contentRange.end.character);if(d.push(new Ve({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),h===p)return d}}var Am=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifier.modifiers??[{type:"containingScope",scopeType:{type:"line"}}],n=OS(this.modifierStageFactory,r);return LS(n,[e]).map(o=>{let s=this.modifier.type==="extendThroughStartOf";return new md({editor:e.editor,isReversed:s,inputTarget:e,modifiedTarget:o,isHead:s})})}};var Pi=class extends Error{constructor(){super("Scope index out of range"),this.name="OutOfRangeError"}};function $A(t,e,r){return VS(t,e,r),t.slice(e,r+1)}function VS(t,e,r){if(e<0||r>=t.length)throw new Pi}var Fs=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e){let r=new Ds(this.modifierStageFactory).run(e)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(r);case"ordinalScope":return this.handleOrdinalScope(r,this.modifier);case"relativeScope":return this.handleRelativeScope(r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e){return Array.from(Nd(this.getEveryRanges(e),([r,n])=>this.getTargetIterable(e,r,n,"forward")))}handleOrdinalScope(e,{start:r,length:n}){return this.getEveryRanges(e).flatMap(([i,o])=>qA(this.getTargetIterable(e,i,o,r>=0?"forward":"backward"),r>=0?r:-(n+r),n))}handleRelativeScope(e,{direction:r,offset:n,length:i}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(s=>{let{editor:l}=s,u=r==="forward"?new W(n===0?s.contentRange.start:s.contentRange.end,l.document.range.end):new W(l.document.range.start,n===0?s.contentRange.end:s.contentRange.start);return qA(this.getTargetIterable(e,l,u,r),n===0?0:n-1,i)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i){let o=Nt(Kn(new RegExp(Ir(e.contentText),"g"),r,n,i),l=>new Ve({contentRange:l,editor:r,isReversed:!1,isToken:!1})),s=u8(e);if(s!=null){let l=this.modifierStageFactory.create({type:"containingScope",scopeType:s});return FM(Nt(o,u=>{try{let p=l.run(u);return p.length===1&&p[0].contentRange.isRangeEqual(u.contentRange)?p[0]:null}catch{return null}}),u=>u!=null)}return o}};function u8(t){return t.isLine?{type:"line"}:t.isToken?{type:"token"}:t.isWord?{type:"word"}:null}function qA(t,e,r){Array.from(dl(e,t));let n=Array.from(dl(r,t));if(n.length<r)throw new Pi;return n}var Dm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoInteriorStage=p8(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoInteriorStage.run(e).flatMap(r=>r.getInterior())}},Im=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=BS(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoBoundaryStage.run(e).flatMap(r=>r.getBoundary())}};function p8(t){return new vl(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getInterior()==null)}function BS(t){return new vl(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}function jA(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function zA(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let s of o){if(n==null||(n=s(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var HS=t=>new se(t.row,t.column),GA=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(s,l)=>s!=null&&l.includes(s.type),o=s=>s!=null&&!i(s,n);return(s,l)=>{let u,{start:p,end:d}=l;if(i(s.parent,t))return i(s,e)?u=s.nextNamedSibling:i(s,r)?u=s.previousNamedSibling:s.type===","?u=d.isBeforeOrEqual(HS(s.startPosition))?s.previousNamedSibling:s.nextNamedSibling:u=s,o(u)?u:null;if(i(s,t)){let h=[...s.children],g=h.find(({startPosition:v})=>HS(v).isAfterOrEqual(d))??null;if(o(g))return g;h.reverse();let x=h.find(({endPosition:v})=>HS(v).isBeforeOrEqual(p))??null;if(o(x))return x}return null}};function Fe(...t){let e=f8(t);return r=>{for(let n of e){let i=d8(r,n);if(i!=null)return i}return null}}function f8(t){return t.map(e=>e.split(".").map(r=>new WS(r)))}function d8(t,e){let r=m8(t,e);!r&&e.length>1&&(r=h8(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function m8(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function h8(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let s=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=s.length===1?s[0]:null}}return r}var WS=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Me(t,e=Qn){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function Fm(t,e=Qn){let r=jA(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function Cs(t,e=0,r=Qn){return Me(zA(e,...t),r)}function vt(...t){return Me(Fe(...t))}function mo(...t){return Me(GA(...t),dA())}function Ns(...t){return Me(Fe(...t),mA)}function Mn(t,e=[]){return Me(Fe(...t),hA(...e))}function ho(t,e=[]){return Me(Fe(...t),gA(...e))}function at(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function KA(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function cn(t){return Object.freeze(Object.fromEntries(Ti(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,vt(...r)]:typeof r=="string"?[e,vt(r)]:[e,r]})))}function QA(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function g8(t,e){return qS(t,r=>Math.floor(r/2)*2+e)}function Cm(t){return g8(Fe("map_lit"),t)}function qS(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=bl(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let s=e(o);return s===-1?null:i[s]}}function y8(){return qS(t=>t,t=>t)}var bl=t=>QA(t,"value"),$S="~quoting_lit.list_lit!",YA=Fe($S);function jS(...t){return e=>{let r=YA(e);if(r==null)return null;let n=bl(r)[0];return t.includes(n?.text)?r:null}}function x8(...t){return Me(jS(...t))}var XA=jS("defn","defmacro"),ZA=Fm([XA,t=>bl(t)[1]]),JA=jS("if","if-let","when","when-let"),T8=Me(JA),S8={collectionKey:Me(Cm(0)),collectionItem:at(Me(Cm(0),gl(t=>t.type==="{"||t.type==="}",", ",Bt,Cm(1))),Me(y8())),value:Me(Cm(1)),argumentOrParameter:Me(qS(Fe($S),t=>t!==0?t:-1)),functionCall:$S,functionCallee:Fm([YA,t=>bl(t)[0]]),namedFunction:Me(XA),functionName:ZA,name:ZA,anonymousFunction:at(x8("fn"),vt("anon_fn_lit")),ifStatement:T8,condition:Fm([JA,t=>bl(t)[1]])},eD=cn(S8);var tD=["command","displayed_equation","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],v8=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],nD=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],rD=nD.map(t=>`${t}[text]`),b8=nD.map(t=>`${t}[command]`);function zS(t,e){return{selection:new Te(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new Te(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function w8(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new Te(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function _8(t,e){let r=e.startIndex,n=e.childForFieldName("label");if(n==null){let i=e.childForFieldName("command");i!=null&&(r=i.endIndex+1)}else r=n.endIndex+1;return{selection:new Te(t.document.positionAt(r),t.document.positionAt(e.endIndex)),context:{leadingDelimiterRange:new W(t.document.positionAt(e.startIndex),t.document.positionAt(r-1))}}}var E8={argumentOrParameter:at(Cs([Fe(...tD),Fe(...v8)],1,zS),Me(Fe("begin[name]","end[name]",...rD),zS)),functionCall:at(Me(Fe(...tD,"begin","end")),Me(Fe(...b8),w8)),name:at(Me(Fe(...rD),zS),vt("begin[name][text]","end[name][text]")),collectionItem:Me(Fe("enum_item"),_8)},iD=cn(E8);var R8=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],k8=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],P8=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],M8=["hash"],A8=["array","string_array","symbol_array"],D8=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],I8=[":","=>"];function F8(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var C8={statement:at(vt(...R8),Cs([Fe(...P8),Fe(...k8)],1)),anonymousFunction:at(vt("lambda","do_block"),Me(F8)),condition:Ns("*[condition]"),argumentOrParameter:mo("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:ho(["pair[key]"],[":"]),value:Mn(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],D8.concat(I8)),collectionItem:mo(...M8,...A8)},oD=cn(C8);function GS(){let t=Zn(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let s=r.childForFieldName("alternative");if(s==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new Te(l.start,mS(s.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new Te(mS(i.child(0).startPosition),o.end),context:{}}}}function aD(t){let e=GS();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):Qn(r,n)}}var sD=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],N8=["source_file","block","declaration_list"];function O8(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function L8(t,e){return{selection:fA(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:an(e.children[0].startPosition,e.children[1].startPosition)}}}function U8(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return sD.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var V8={statement:Cs([Fe(...N8),Fe(...sD)],1),condition:at(vt("while_expression[condition]","if_expression[condition]"),Me(Fe("while_let_expression","if_let_expression"),Zn(["while","if","block"],[],{includeUnnamedChildren:!0})),Mn(["*.match_pattern![condition]"],["if"])),collectionItem:mo("array_expression","tuple_expression","tuple_type"),type:at(Mn(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Me(Fe("constrained_type_parameter[bounds]","where_predicate[bounds]"),L8),Mn(["function_item[return_type]"],["->"]),Me(O8),vt("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:mo("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:at(ho(["field_initializer[name]","field_pattern[name]"],[":"])),name:at(vt("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),ho(["field_initializer[name]","field_pattern[name]"],[":"])),value:at(Mn(["let_declaration[value]"],["="]),Mn(["field_initializer[value]","field_pattern[pattern]"],[":"]),vt("meta_item[value]","const_item[value]"),Me(U8)),attribute:ho(["mutable_specifier","attribute_item"]),branch:at(vt("match_arm"),Me(Fe("else_clause"),aD("if_expression")),Me(Fe("if_expression"),GS()))},cD=cn(V8);var B8={argumentOrParameter:mo("arguments","parameters","class_parameters","bindings"),branch:Me(Fe("case_clause"),Zn([],[],{includeUnnamedChildren:!0})),type:Mn(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:Mn(["*[value]","*[default_value]","type_definition[type]"],["="]),condition:Ns("*[condition]")},lD=cn(B8);var H8=["apply_statement","at_rule","charset_statement","debug_statement","each_statement","error_statement","for_statement","forward_statement","function_statement","if_statement","import_statement","include_statement","keyframes_statement","media_statement","mixin_statement","namespace_statement","placeholder","rule_set","supports_statement","use_statement","warn_statement","while_statement"];function pD(t){return[",","(",")"].includes(t.type)||fD(t)}function fD(t){return t.type==="plain_value"&&t.text==="at"}function uD(t){return e=>{(fD(e)||e.type===",")&&(e=e.previousSibling);let r=t(e);for(;r&&!pD(r);)e=r,r=t(r);return e}}function W8(t,e){return e.type!=="declaration"?null:e.descendantsOfType("unit").map(r=>({node:r,selection:Qn(t.editor,r)}))}var $8={condition:Ns("condition"),statement:at(vt(...H8),Me(Fe("attribute_selector"),Zn([],["attribute_name","string_value"]))),argumentOrParameter:at(Me(Fe("arguments.*!","parameters.*!"),gl(t=>pD(t),", ",uD(t=>t.previousSibling),uD(t=>t.nextSibling)))),collectionKey:ho(["declaration.property_name!"],[":"]),value:at(Me(Fe("declaration"),Zn(["property_name","variable_name"])),Me(Fe("include_statement","namespace_statement"),Zn()),vt("return_statement.*!","import_statement.*!","attribute_selector.plain_value!","attribute_selector.string_value!","parameter.default_value!")),unit:at(vt("integer_value.unit!"),W8)},KS=cn($8);function dD(t,e,r){let n=wl[t];if(n==null)throw new yp(t);let i=n[e];return i==null?KA(e):r?q8(i):i}var wl={clojure:eD,css:KS,latex:iD,ruby:oD,rust:cD,scala:lD,scss:KS};function q8(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>j8(i.node,id(e,i.selection.selection),t)),n.length>0?n:null)}}function j8(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var Os=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=dD(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new Vt(this.modifier.scopeType.type);let i=z8(n,r,{editor:e.editor,selection:new Te(e.contentRange.start,e.contentRange.end)});if(i==null)throw new Vt(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:u,removalRange:p,interiorRange:d}=o.context;if(p!=null&&(l!=null||u!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:h,selection:g}=o.selection;return new oo({scopeTypeType:this.modifier.scopeType.type,editor:h,isReversed:e.isReversed,contentRange:g,removalRange:p,interiorRange:d,insertionDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:u})})}};function z8(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:id(r,o.selection),context:o.context}));n=n.parent}return null}function hD(t,e){let r=gD(t,e);for(;r!=null;){if(G8(t,e,r))return{range:r.getInterior()[0].contentRange,boundary:QS(r)};r=K8(t,e.editor,r)}return{range:ml(e.editor,e.contentRange)}}function G8(t,e,r){let{contentRange:n}=e;if(n.isEmpty){let[o,s]=QS(r),l=n.start;if(l.isEqual(o.start)||l.isEqual(s.end))return!1;let u=e.editor.document.lineAt(l);if(l.isEqual(o.end)&&mD(u,l.character)||l.isEqual(s.start)&&mD(u,l.character-1))return!1}else{if(n.isRangeEqual(r.contentRange))return!1;let[o,s]=QS(r);if(n.isRangeEqual(o)||n.isRangeEqual(s))return!1}let i=Q8(t,r);return!(i!=null&&r.contentRange.start.isBeforeOrEqual(i.contentRange.start))}function QS(t){return t.getBoundary().map(e=>e.contentRange)}function mD(t,e){return e<t.range.start.character||e>=t.range.end.character||t.text[e].trim()===""}function K8(t,e,r){let n=e.document.offsetAt(r.contentRange.start);if(n===0)return;let i=e.document.positionAt(n-1);return gD(t,new Ve({editor:e,contentRange:new W(i,i),isReversed:!1}))}function gD(t,e){return yD(t,e,{type:"surroundingPair",delimiter:"collectionBoundary",requireStrongContainment:!0})}function Q8(t,e){return yD(t,e,{type:"surroundingPair",delimiter:"string",requireStrongContainment:!0})}function yD(t,e,r){let n=t.create({type:"containingScope",scopeType:r}),i=(()=>{try{return n.run(e)}catch{return[]}})();if(i.length>1)throw Error("Expected only one surrounding pair target");return i[0]}function xD(t,e,r){let{document:n}=t,o=n.getText(e).split(/([,(){}<>[\]"'`])|(?<!\\)(\\"|\\'|\\`)/g).filter(p=>p!=null&&p.length>0),s=Z8(o),l=[],u=n.offsetAt(e.start);return s.forEach(p=>{if(p.trim().length===0){u+=p.length;return}if(p===TD)l.push({type:"separator",range:new W(n.positionAt(u),n.positionAt(u+p.length))});else{let d=u+(p.length-p.trimStart().length);l.push({type:"item",range:new W(n.positionAt(d),n.positionAt(d+p.trim().length))})}u+=p.length}),r!=null?[{type:"boundary",range:r[0]},...l,{type:"boundary",range:r[1]}]:l}function Z8(t){let e=[],r=0,n=null,i=null,o=-1;return t.forEach((s,l)=>{r>0?s===i?--r:s===n&&++r:(ZS[s]!=null&&t.indexOf(ZS[s],l+1)>-1&&(n=s,i=ZS[s],r=1),o<0&&(o=l));let u=s===TD&&r===0;if(u||l===t.length-1){let p=u?l:l+1;e.push(t.slice(o,p).join("")),o=-1,u&&e.push(s)}}),e}var TD=",",ZS={"(":")","{":"}","<":">","[":"]",'"':'"',"'":"'","`":"`"};var Nm=class{constructor(e,r,n){this.languageDefinitions=e;this.modifierStageFactory=r;this.modifier=n}run(e){try{return new Os(this.languageDefinitions,this.modifier).run(e)}catch{}return this.modifier.type==="everyScope"?this.getEveryTarget(this.modifierStageFactory,e):[this.getSingleTarget(this.modifierStageFactory,e)]}getEveryTarget(e,r){let n=vD(e,r),i=r.hasExplicitRange?SD(r,n):n;if(i.length===0)throw new Vt(this.modifier.scopeType.type);return i.map(o=>this.itemInfoToTarget(r,o))}getSingleTarget(e,r){let n=vD(e,r),i=SD(r,n);if(i.length===0)throw new Vt(this.modifier.scopeType.type);let o=i[0],s=i[i.length-1],l={contentRange:o.contentRange.union(s.contentRange),domain:o.domain.union(s.domain),leadingDelimiterRange:o.leadingDelimiterRange,trailingDelimiterRange:s.trailingDelimiterRange},u=l.leadingDelimiterRange!=null&&l.trailingDelimiterRange!=null&&KT(r.editor,l.leadingDelimiterRange)>KT(r.editor,l.trailingDelimiterRange)?l.contentRange.union(l.leadingDelimiterRange):void 0;return this.itemInfoToTarget(r,l,u)}itemInfoToTarget(e,r,n){let i=Y8(r.leadingDelimiterRange,r.trailingDelimiterRange);return new oo({scopeTypeType:this.modifier.scopeType.type,editor:e.editor,isReversed:e.isReversed,contentRange:r.contentRange,insertionDelimiter:i,leadingDelimiterRange:r.leadingDelimiterRange,trailingDelimiterRange:r.trailingDelimiterRange,removalRange:n})}};function Y8(t,e){return t!=null&&!t.isSingleLine||e!=null&&!e.isSingleLine?`,
`:", "}function SD(t,e){return e.filter(r=>r.domain.intersection(t.contentRange)!=null)}function vD(t,e){let{range:r,boundary:n}=hD(t,e);return X8(e.editor,r,n)}function X8(t,e,r){let n=xD(t,e,r),i=[];return n.forEach((o,s)=>{if(o.type==="separator"||o.type==="boundary")return;let l=(()=>{if(n[s-2]?.type==="item")return new W(n[s-2].range.end,o.range.start);if(n[s-1]?.type==="separator")return new W(n[s-1].range.start,o.range.start)})(),u=(()=>{if(n[s+2]?.type==="item")return new W(o.range.end,n[s+2].range.start);if(n[s+1]?.type==="separator")return new W(o.range.end,n[s+1].range.end)})(),p=n[s-1]?.type==="boundary"||n[s-1]?.type==="separator"?n[s-1].range.end:o.range.start,d=n[s+1]?.type==="boundary"||n[s+1]?.type==="separator"?n[s+1].range.start:o.range.end;i.push({contentRange:o.range,leadingDelimiterRange:l,trailingDelimiterRange:u,domain:new W(p,d)})}),i}var Ls={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},YS={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var Om=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},Lm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(YS).run(e).map(r=>{let n=r.getLeadingDelimiterTarget();if(n==null)throw new Om("leading");return n})}},Um=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(YS).run(e).map(r=>{let n=r.getTrailingDelimiterTarget();if(n==null)throw new Om("trailing");return n})}};function Vm(t,e,r,n){return VS(e,r,n),r===n?e[r]:Is(t,e[r],e[n],!0,!0)}function Bm(t,e,r){return t.create({type:"everyScope",scopeType:r}).run(e)}var Hm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=Bm(this.modifierStageFactory,e,this.modifier.scopeType),n=this.modifier.start+(this.modifier.start<0?r.length:0),i=n+this.modifier.length-1;return this.modifier.isEvery?$A(r,n,i):[Vm(e.isReversed,r,n,i)]}};var Wm=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new io(r):new Ve({...r,isToken:!1})]}},$m=class extends Wm{getContentRange(e){return e.start.toEmptyRange()}},qm=class extends Wm{getContentRange(e){return e.end.toEmptyRange()}};var jm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifierStageFactory.create(this.modifier.anchor),n=this.modifierStageFactory.create(this.modifier.active),i=r.run(e),o=n.run(e);if(i.length!==1||o.length!==1)throw new Error("Expected single anchor and active target");return[fo(i[0],o[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var zm=class{constructor(e){this.modifier=e}run(e){return[new io({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var Gm=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function bD(t,e,r){let n=Bm(t,r7(r),e.scopeType),i=t7(r.contentRange,n);return J8(e,r,n,i)}function J8(t,e,r,n){let i=t.direction==="forward",o=e7(t,e.contentRange,r,i,n),s=i?o+t.length-1:o-t.length+1,l=Math.min(o,s),u=Math.max(o,s);return[Vm(e.isReversed,r,l,u)]}function e7(t,e,r,n,i){let o=t.offset===0;if(i==null){let u=n?r.findIndex(p=>p.contentRange.start.isAfter(e.start)):Ac(r,p=>p.contentRange.start.isBefore(e.start));if(u===-1)throw new Pi;return o?u:n?u+t.offset-1:u-t.offset+1}let s=i.start,l=i.end;if(o){let u=l-s+1;if(u>t.length)throw new Gm(t.length,u,t.scopeType.type);return n?s:l}return n?l+t.offset:s-t.offset}function t7(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function r7(t){return new Et({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var Km=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let r=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId);if(r==null)return bD(this.modifierStageFactory,this.modifier,e);let n=Array.from(this.modifier.offset===0?n7(r,e,this.modifier):i7(r,e,this.modifier));if(n.length<this.modifier.length)throw new Pi;let{isReversed:i}=e;return this.modifier.isEvery?n.flatMap(o=>o.getTargets(i)):vm(i,n[0],n[n.length-1])}};function n7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s}=r,l=bm(t,n,s==="forward"?i.start:i.end,s)?.domain;if(l==null)throw new Vt(r.scopeType.type);return dl(o,t.generateScopes(n,s==="forward"?l.start:l.end,s,{skipAncestorScopes:!0}))}function i7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s,offset:l}=r,u=s==="forward"?i.end:i.start,p=i.isEmpty?"disallowed":"disallowedIfStrict";return CM(t.generateScopes(n,u,s,{containment:p,skipAncestorScopes:!0}),l-1,l+o-1)}var Qm=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new Ve({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};var Zm=class{constructor(e){this.modifier=e}run(e){if(this.modifier.type==="everyScope")throw new Error(`Every ${this.modifier.type} not yet implemented`);return[new ld({editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange})]}};var Us=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new $m;case"endOf":return new qm;case"extendThroughStartOf":case"extendThroughEndOf":return new Am(this,e);case"toRawSelection":return new zm(e);case"interiorOnly":return new Dm(this,e);case"excludeInterior":return new Im(this,e);case"leading":return new Lm(this,e);case"trailing":return new Um(this,e);case"visible":return new Qm(e);case"containingScope":return new _m(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new Fs(this,this.storedTargets,e):new Em(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new Fs(this,this.storedTargets,e):new Hm(this,e);case"relativeScope":return e.scopeType.type==="instance"?new Fs(this,this.storedTargets,e):new Km(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new Rm(e);case"keepEmptyFilter":return new km(e);case"cascading":return new Tm(this,e);case"modifyIfUntyped":return new As(this,e);case"range":return new jm(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`)}}getLegacyScopeStage(e){switch(e.scopeType.type){case"notebookCell":return new Zm(e);case"collectionItem":return new Nm(this.languageDefinitions,this,e);default:return new Os(this.languageDefinitions,e)}}};async function wD(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Be({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=Ti(r),s=o.map(p=>{let d=r[p],h=o7(d);return _D(e.document,h.selections,h.behavior)});n||s.push(_D(e.document,e.selections,1));let l=await("edits"in i?c7(t,e,i.edits,s):ED(t,i.callback,e.document,s));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((p,d)=>[p,l[d]]))}function _D(t,e,r){return e.map(n=>a7(t,n,n instanceof Te?!n.isReversed:!0,r))}function o7(t){return"selections"in t?t:{selections:t,behavior:1}}function a7(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function s7(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new Te(r,n):new Te(n,r)))}async function ED(t,e,r,n){let i=t.registerRangeInfoList(r,tt(n));return await e(),i(),s7(n)}async function c7(t,e,r,n){return await ED(t,async()=>{if(!await wD(t,e,r))throw new Error("Could not apply edits")},e.document,n)}function Tr(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function Sr(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function la(t,e,r){return Promise.all(XS(t,e).map(([n,i])=>r(n,i)))}async function st(t,e){return la(t,r=>r.editor,e)}async function RD(t,e){let r=XS(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function kD(t){return XS(t,e=>e.editor)}function XS(t,e){let n=Zc(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function Ym(t){return t.contentRange}function ln(t,e){return e!=null?Tt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new Te(i.end,i.start):new Te(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function PD(t){let e=t.contentRange;return t.isLine?tn(e):er(e)}function qe(t,e,r,n=Ym){return t.flashRanges(e.map(i=>{let o=n(i);return o==null?null:{editor:i.editor,range:i.isLine?tn(o):er(o),style:r}}).filter(i=>i!=null))}var Xm=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await qe(I(),e,"pendingModification0"),{thatSelections:tt(await st(e,async(n,i)=>{let o=i.map(({contentRange:p})=>p),s=l7(n,o),l=I().getEditableTextEditor(n),{contentRanges:u}=await Be({rangeUpdater:this.rangeUpdater,editor:l,edits:s,selections:{contentRanges:o}});return Tt(i,u).map(([p,d])=>({editor:p.editor,selection:d.toSelection(p.isReversed)}))}))}}};function l7(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,s=r.lineAt(o),l=s.text.slice(0,s.firstNonWhitespaceCharacterIndex),u=s.text.slice(0,o.character).search(/\s+$/),p=u>-1?new W(new se(s.lineNumber,u),o):o.toEmptyRange();n.push({range:p,text:`
`+l,isReplace:!p.isEmpty})}return n}function Jm(t){return t.length<2?t:kD(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,s)=>o.contentRange.start.compareTo(s.contentRange.start));let i=!0;for(;i;)[n,i]=u7(n);return n})}function u7(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!p7(r[r.length-1],n)?(e.push(MD(r)),r=[n]):r.push(n)}),e.push(MD(r)),[e,e.length!==t.length]}function MD(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return fo(e,r)}function p7(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var _l=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([qe(I(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),qe(I(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((s,l)=>{let u=r[l];if((s==null||u==null)&&!o)throw new Error("Targets must have same number of args");if(u!=null){let p;o?p=e.map((d,h)=>{let g=d.contentText,x=(u.isRaw?null:u.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return h>0&&x!=null?x+g:g}).join(""):p=s.contentText,i.push({edit:u.constructChangeEdit(p),editor:u.editor,originalTarget:u.target,isSource:!1})}else u=r[0];n.includes(s)||(n.push(s),this.type==="bring"&&i.push({edit:s.toDestination("to").constructChangeEdit(u.target.contentText),editor:s.editor,originalTarget:s,isSource:!0}))}),this.type==="move"&&Jm(n).forEach(s=>{i.push({edit:s.constructRemovalEdit(),editor:s.editor,originalTarget:s,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return tt(await la(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),s=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),u=s.map(({edit:x})=>x.range),p=I().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:h}=await Be({rangeUpdater:this.rangeUpdater,editor:p,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:u,behavior:0}}}),g=[...this.getMarks(o,d),...this.getMarks(s,h)];return g.sort((x,v)=>n.findIndex(w=>w.originalTarget===x.target)-n.findIndex(w=>w.originalTarget===v.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],s=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:s.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>e.find(i=>i.target===n).selection;return Promise.all([qe(I(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),qe(I(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function AD(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var eh=class extends _l{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0",getSourceRangeCallback:Ym};this.run=this.run.bind(this)}async run(r,n){r=AD(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},th=class extends _l{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:f7};this.run=this.run.bind(this)}async run(r,n){r=AD(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},rh=class extends _l{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0",getSourceRangeCallback:Ym};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,s)=>{let l=n[s];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function f7(t){return t.getRemovalHighlightRange()}var El=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){Sr(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Rl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=Tr(e),n=e.map(o=>new Ve({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await I().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var nh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await I().flashRanges(e.flatMap(i=>{let{editor:o,contentRange:s}=i,l=i.getRemovalHighlightRange();return i.isLine?[{editor:o,range:er(s),style:"referenced"},{editor:o,range:tn(l),style:"pendingDelete"}]:[{editor:o,range:er(s),style:"referenced"},...d7(s,l).map(u=>({editor:o,range:er(u),style:"pendingDelete"}))]}));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function d7(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,s=[];return i.isBefore(r)&&s.push(new W(i,r)),o.isAfter(n)&&s.push(new W(n,o)),s}var kl=class{constructor(){this.run=this.run.bind(this)}async run(e){return await st(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(s=>{let l=s.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new JS;await I().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},JS=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function DD(t,e,r,n){let i=r.destinations.map((v,w)=>{if(n||v.getEditNewActionType()==="edit")return{destination:v,index:w}}).filter(v=>!!v);if(i.length===0)return r;let o=i.map(v=>v.destination.constructChangeEdit("")),s=r.cursorRanges.map((v,w)=>({range:v,index:w})).filter(({range:v})=>v!=null),l=s.map(({index:v})=>v),u=s.map(({range:v})=>v),p=o.map(v=>v.range),{thatRanges:d,cursorRanges:h,editRanges:g}=await Be({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:u,editRanges:{selections:p,behavior:0}}}),x=[...r.cursorRanges];return Tt(l,h).forEach(([v,w])=>{x[v]=w}),i.forEach((v,w)=>{let A=o[w].updateRange(g[w]);x[v.index]=A}),{destinations:r.destinations,thatRanges:d,cursorRanges:x}}async function ID({acceptsLocation:t},e,r,n){let i=n.destinations.map((h,g)=>{if(h.getEditNewActionType()==="insertLineAfter")return{destination:h,index:g}}).filter(h=>!!h);if(i.length===0)return n;let o=i.map(({destination:h})=>h.contentRange),s=n.destinations.map(({contentRange:h})=>h),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(h=>h.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:u,thatRanges:p}=await Be({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:s,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((h,g)=>{d[h.index]=r.selections[g]}),{destinations:n.destinations.map((h,g)=>h.withTarget(h.target.withContentRange(u[g]))),thatRanges:p,cursorRanges:d}}async function FD(t,e){let r=Sr(e),n=I().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);await t.setSelection.run([r.target]);let o=l=>l;i?o=await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow();let s=ln([r.target.thatTarget]);return s[0].selection=o(s[0].selection),{thatSelections:s}}var ih=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return FD(this.actions,e);let r=I().getEditableTextEditor(Tr(e)),n={destinations:e,thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=I().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await ID(i,this.rangeUpdater,r,n)),n=await DD(this.rangeUpdater,r,n,!o);let s=n.destinations.map((l,u)=>n.cursorRanges[u].toSelection(l.target.isReversed));return await r.setSelections(s,{focusEditor:!0}),{thatSelections:ln(n.destinations.map(l=>l.target),n.thatRanges)}}};var oh=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(Ls)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},ah=class extends oh{constructor(){super(...arguments);this.insertionMode="before"}},sh=class extends oh{constructor(){super(...arguments);this.insertionMode="after"}};var ch=t=>new Et({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var Vs=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await qe(I(),e,"referenced"),r.ensureSingleEditor&&Tr(e),r.ensureSingleTarget&&Sr(e);let n=I().activeEditableTextEditor,i=r.setSelection?RD:st,o=tt(await i(e,(s,l)=>this.runForEditor(r,s,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=I().getEditableTextEditor(r),o=r.selections,s=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:u,targetSelections:p}=await Be({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(u),r.document.version===s?n:p.map(d=>ch({editor:r,selection:d}))}};var Pl=class{constructor(e){this.callbackAction=new Vs(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:s,showDecorations:l}={}){let u=n??[];return this.callbackAction.run(e,{callback:()=>I().executeCommand(r,...u),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:s??!0,showDecorations:l??!0})}};var lh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){Sr(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),Uc(I().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},uh=class extends lh{find(e){return I().findInDocument(e)}},ph=class extends lh{find(e){return I().findInWorkspace(e)}};var Bs=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=Sr(e);return await qe(I(),e,"referenced"),await I().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:ln(e)}}};function CD(t,e){let r=[],n=0,i=null,[o,...s]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...s.map(u=>({text:u,startIndex:0}))].forEach(({text:u,startIndex:p})=>{let d=u.match(/^\s*/)?.[0]??"",h=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let g=Math.max(h,p),x=zx("	",n),v=u.slice(g);r.push(x+v)}),r}function ND(t,e){let r=Kx(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var Ml=class{constructor(){this.substitutions=[]}addSubstitution(e,r=!1){let n=m7(10);return this.substitutions.push({to:e,randomId:n,isQuoted:r}),n}makeSubstitutions(e){return this.substitutions.forEach(({to:r,randomId:n,isQuoted:i})=>{let o=i?`"${n}"`:n;e=e.split(o).join(r)}),e}};function m7(t){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}var Hs=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r){let n=Sr(e),i=n.editor;if(qe(I(),e,"referenced"),r==null&&(r=await I().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"})),r==null)return{};let o=1,s=i.document.offsetAt(n.contentRange.start),l=i.selections.filter(A=>n.contentRange.contains(A)).map((A,U)=>({offsets:{start:i.document.offsetAt(A.start)-s,end:i.document.offsetAt(A.end)-s},defaultName:`variable${U+1}`,placeholderIndex:o++})),u=new Ml,p=i.document.getText(new W(n.contentRange.start.with(void 0,0),n.contentRange.start)),d=i.document.getText(n.contentRange),h=ND(d,[...Jr(d,/\$|\\/g,A=>({offsets:{start:A.index,end:A.index+A[0].length},text:A[0]==="\\"?`\\${A[0]}`:`\\\\${A[0]}`})),...l.map(({offsets:A,defaultName:U,placeholderIndex:Z})=>({offsets:A,text:u.addSubstitution(["\\$","${",Z,":",U,"}"].join(""))}))]),g=CD(h,p),x=({placeholderIndex:A})=>{let U="$"+A,Z=u.addSubstitution("{$"+o+++"}",!0);return[U,Z]},v={[r]:{definitions:[{scope:{langIds:[i.document.languageId]},body:g}],description:"$"+o++,variables:l.length===0?void 0:Object.fromEntries(l.map(x))}},w=u.makeSubstitutions(JSON.stringify(v,null,2)),N=I().getEditableTextEditor(i);return I().runMode==="test"?await N.setSelections([i.document.range.toSelection(!1)]):await this.snippets.openNewSnippetFile(r),await N.insertSnippet(w),{thatSelections:e.map(({editor:A,contentSelection:U})=>({editor:A,selection:U}))}}};var Al=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Dl=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await qe(I(),e,"referenced"),n&&Sr(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var Il=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(I().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(I().visibleTextEditors.map(n=>I().setHighlightRanges(r,n,[]))):await st(e,(n,i)=>I().setHighlightRanges(r,n,i.map(PD))),{thatTargets:e}}};var fh=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(Ls)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=tt(await st(e,this.runForEditor));return await I().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:er(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),s=i.map(({range:g})=>g),l=I().getEditableTextEditor(e),{contentSelections:u,editRanges:p}=await Be({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:s,behavior:0}}}),d=Tt(i,p).map(([g,x])=>g.updateRange(x)),h=e.selections[0];return u.some(g=>g.intersection(h)!=null)&&await l.revealRange(h),{sourceMark:ln(r,d),thatMark:ln(r,u)}}},dh=class extends fh{constructor(e,r){super(e,r,!0)}},mh=class extends fh{constructor(e,r){super(e,r,!1)}};var Fl=class{constructor(e,r,n){this.rangeUpdater=e;this.insertAbove=r;this.insertBelow=n;this.run=this.run.bind(this)}getRanges(e){let r=e.flatMap(n=>{let i=[];return this.insertAbove&&i.push(n.contentRange.start.line),this.insertBelow&&i.push(n.contentRange.end.line+1),i});return r=[...new Set(r)],r.map(n=>new W(n,0,n,0))}getEdits(e){return e.map(r=>({range:r,text:`
`}))}async run(e){let r=tt(await st(e,async(i,o)=>{let s=this.getRanges(o),l=this.getEdits(s),u=o.map(g=>g.thatTarget.contentSelection),p=I().getEditableTextEditor(i),{contentSelections:d,ranges:h}=await Be({rangeUpdater:this.rangeUpdater,editor:p,edits:l,selections:{contentSelections:u,ranges:s}});return{thatMark:d.map(g=>({editor:i,selection:g})),lineSelections:h.map((g,x)=>({editor:i,range:s[x].start.line<i.document.lineCount-1?new W(g.start.translate(-1,void 0),g.end.translate(-1,void 0)):g}))}}));return await I().flashRanges(r.flatMap(i=>i.lineSelections.map(({editor:o,range:s})=>({editor:o,range:tn(s),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},hh=class extends Fl{constructor(e){super(e,!0,!0)}},gh=class extends Fl{constructor(e){super(e,!0,!1)}},yh=class extends Fl{constructor(e){super(e,!1,!0)}};var ev=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},go=class{constructor(){this._children=[]}appendChild(e){return e instanceof vr&&this._children[this._children.length-1]instanceof vr?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function s(l,u){for(let p of l)p.parent=u,s(p.children,p)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Sh)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},vr=class t extends go{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},xh=class extends go{},Ur=class t extends xh{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Th?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},Th=class t extends go{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof vr&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},tv=class t extends go{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof An&&!!s.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof An){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},An=class t extends go{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},yo=class t extends xh{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new vr(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function OD(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var Sh=class t extends go{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Ur&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return OD([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Ur&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof yo&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){OD(this.children,e)}},Ws=class{constructor(){this._scanner=new ev;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new Sh;for(;this._parse(i););let o=new Map,s=[],l=0;i.walk(u=>(u instanceof Ur&&(l+=1,u.isFinalTabstop?o.set(0,void 0):!o.has(u.index)&&u.children.length>0?o.set(u.index,u.children):s.push(u)),!0));for(let u of s){let p=o.get(u.index);if(p){let d=new Ur(u.index);d.transform=u.transform;for(let h of p)d.appendChild(h.clone());i.replace(u,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Ur(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new vr(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Ur(Number(r)):new yo(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Ur(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new vr("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new Th;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new vr(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new yo(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new vr("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new tv,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new vr(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new An(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new An(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new An(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new An(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new An(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new An(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new An(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new vr(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var LD=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function vh(t,e,r){let n=h7(t)+1,i={};t.walk(o=>{if(o instanceof yo){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new vr(r[o.name])]);else if(!LD[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Ur(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Ur&&o.index.toString()===e&&o.parent.replace(o,[new yo("TM_SELECTED_TEXT")]);return!0})}function h7(t){let e=0;return t.walk(r=>(r instanceof Ur&&(e=Math.max(e,r.index)),!0)),e}function bh(t,e,r){let n=e.map(o=>g7(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function g7(t,e,r){let n=e.editor.document.languageId;return r.findIndex(({scope:i})=>{if(i==null)return!0;let{langIds:o,scopeTypes:s,excludeDescendantScopeTypes:l}=i;if(o!=null&&!o.includes(n))return!1;if(s!=null){let u=s.concat(l??[]),p,d;for(let h of u)try{let g=t.create({type:"containingScope",scopeType:{type:h}}).run(e)[0];e.contentRange.isRangeEqual(g.contentRange)&&(g=t.create({type:"containingScope",scopeType:{type:h},ancestorIndex:1}).run(e)[0]),(p==null||p.contentRange.contains(g.contentRange))&&(p=g,d=h)}catch{continue}return p!=null&&!(l??[]).includes(d)}return!0})}var Cl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new Ws;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new Sm(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){if(e.type==="named"){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}else return e.scopeTypes??[]}getSnippetInfo(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=bh(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(s){return s==null?void 0:y7(i,o,s)}}}else return{body:e.body,formatSubstitutions(n){return n}}}async run(e,r){let n=I().getEditableTextEditor(Tr(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(p=>new Et({editor:n,contentRange:p,isReversed:!1,hasExplicitRange:!0}))),s=this.snippetParser.parse(i);vh(s,null,o(r.substitutions));let l=s.toTextmateString(),{editorSelections:u}=await Be({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(p=>({editor:n,selection:p}))}}};function y7(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let s=Vk[o];if(s==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,s(i.split(" "))]}))}var Nl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await qe(I(),e,"pendingModification0"),{thatSelections:tt(await st(e,async(n,i)=>{let o=i.map(({contentRange:l})=>l),{contentRanges:s}=await Be({rangeUpdater:this.rangeUpdater,editor:I().getEditableTextEditor(n),edits:x7(n,o),selections:{contentRanges:o}});return Tt(i,s).map(([l,u])=>({editor:l.editor,selection:u.toSelection(l.isReversed)}))}))}}};function x7(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start.line,s=i.isSingleLine?o+1:i.end.line,l=so(NM(o,s+1),u=>r.lineAt(u));for(let[u,p]of IM(l))n.push({range:new W(u.range.end.line,u.lastNonWhitespaceCharacterIndex,p.range.start.line,p.firstNonWhitespaceCharacterIndex),text:p.isEmptyOrWhitespace?"":" ",isReplace:!0})}return n}var wh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r}async run(e){let r=I().getEditableTextEditor(Tr(e)),n=I().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Be({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:s,editorSelections:l}=await Be({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(s),n!=null&&!n.isActive&&await n.focus(),await I().flashRanges(l.map(u=>({editor:r,range:er(u),style:"justAdded"}))),{thatSelections:l.map(u=>({editor:r,selection:u}))}}};var Ol=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=Jm(e),r&&await qe(I(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:tt(await st(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(s=>s.constructRemovalEdit()),i=I().getEditableTextEditor(e),{editRanges:o}=await Be({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:s})=>s)}});return Tt(r,o).map(([s,l])=>new io({editor:s.editor,isReversed:s.isReversed,contentRange:l}))}};var Ll=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await qe(I(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=Tt(e,n).map(([l,u])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(u)})),o=[],s=[];return await la(i,l=>l.editor,async(l,u)=>{let p=u.map(({edit:g})=>g),{contentSelections:d,editRanges:h}=await Be({rangeUpdater:this.rangeUpdater,editor:I().getEditableTextEditor(l),edits:p,selections:{contentSelections:u.map(({target:g})=>g.contentSelection),editRanges:{selections:p.map(({range:g})=>g),behavior:0}}});for(let[g,x]of Tt(u,d))o.push(g.target.withContentRange(x));for(let[g,x]of Tt(u,h))s.push({editor:l,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:s}}};var Ul=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[BS(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(s=>{let l=s.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await qe(I(),i,"pendingModification0");let o=await st(i,async(s,l)=>{let u=l.map((h,g)=>({editor:s,range:h.contentRange,text:g%2===0?r:n})),{sourceRanges:p,thatRanges:d}=await Be({rangeUpdater:this.rangeUpdater,editor:I().getEditableTextEditor(s),edits:u,selections:{sourceRanges:e.map(h=>h.thatTarget.contentRange),thatRanges:e.map(h=>h.contentRange)}});return{sourceMark:ln(e,p),thatMark:ln(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:s})=>s),thatSelections:o.flatMap(({thatMark:s})=>s)}}};var Vl=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=Zc(e,s=>s.editor),n=Array.from(r,([s,l])=>({lineNumber:T7(l,this.at),editor:s})),i=I().activeEditableTextEditor;for(let s of n)await I().getEditableTextEditor(s.editor).revealLine(s.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(s=>{let l=s.editor.visibleRanges,u=l[0].start.line,p=l[l.length-1].end.line;return s.contentRange.start.line>u||s.contentRange.end.line<p||s.contentRange.start.line===u&&s.contentRange.end.line===p});return await I().flashRanges(o.map(s=>({editor:s.editor,range:tn(s.contentRange),style:"referenced"}))),{thatTargets:e}}},_h=class extends Vl{constructor(){super("top")}},Eh=class extends Vl{constructor(){super("center")}},Rh=class extends Vl{constructor(){super("bottom")}};function T7(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var $s=class{constructor(){this.run=this.run.bind(this)}getSelection(e){return e.contentSelection}async run(e){let r=Tr(e),n=e.map(this.getSelection);return await I().getEditableTextEditor(r).setSelections(n,{focusEditor:!0}),{thatTargets:e}}},kh=class extends $s{getSelection(e){return new Te(e.contentRange.start,e.contentRange.start)}},Ph=class extends $s{getSelection(e){return new Te(e.contentRange.end,e.contentRange.end)}};var Bl=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var Hl=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await qe(I(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,s=this.treeSitter.getTree(i.document);r.push(S7(i.document,s,o))}return I().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function S7(t,e,r){let n=[],i=[];return UD(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function UD(t,e,r,n,i){for(;;){let o=new W(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let s="  ".repeat(i),l=v7(n),u=s+l;if(n.nodeIsNamed)t.push(`${u}${n.nodeType} [${o}]`),e.push(`${u}(${n.nodeType}`),n.gotoFirstChild()?(UD(t,e,r,n,i+1),n.gotoParent(),e.push(`${s})`)):e[e.length-1]+=")";else{let p=`"${n.nodeType}"`;t.push(`${u}${p} [${o}]`),e.push(`${u}${p}`)}}if(!n.gotoNextSibling())return}}function v7(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var qt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new Vs(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=I().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,s)=>b7(o,i?s.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},Mh=class extends qt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},Ah=class extends qt{constructor(){super(...arguments);this.command="toggleLineComment"}},Dh=class extends qt{constructor(){super(...arguments);this.command="indentLine"}},Ih=class extends qt{constructor(){super(...arguments);this.command="outdentLine"}},Fh=class extends qt{constructor(){super(...arguments);this.command="fold"}},Ch=class extends qt{constructor(){super(...arguments);this.command="unfold"}},Nh=class extends qt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},Oh=class extends qt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},Lh=class extends qt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},Uh=class extends qt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Vh=class extends qt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Bh=class extends qt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Hh=class extends qt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Wh=class extends qt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}};function b7(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Wl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&Uc(I().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((s,l)=>s.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(s=>s.toDestination("to")),i);return{thatSelections:o}}},$h=class extends Wl{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},qh=class extends Wl{sortTexts(e){return e.reverse()}},jh=class extends Wl{sortTexts(e){return Gx(e)}};var $l=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(Ls)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await qe(I(),r,"referenced"),await st(e,async(n,i)=>{let o=i.map(s=>{let l=s.contentRange;return s.isLine?{type:"line",startLine:l.start.line,endLine:l.end.line}:{type:"inline",range:l}});await I().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var ql=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await st(e,async(o,s)=>{let l=s.map(w=>({start:new Te(w.contentRange.start,w.contentRange.start),end:new Te(w.contentRange.end,w.contentRange.end)})),u=l.flatMap(({start:w,end:N})=>[{text:r,range:w},{text:n,range:N,isReplace:!0}]),p=s.map(w=>w.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:h,sourceSelections:g,thatSelections:x}=await Be({rangeUpdater:this.rangeUpdater,editor:I().getEditableTextEditor(o),edits:u,selections:{boundariesStartSelections:{selections:l.map(({start:w})=>w),behavior:2},boundariesEndSelections:{selections:l.map(({end:w})=>w),behavior:3},sourceSelections:{selections:p,behavior:1},thatSelections:{selections:p,behavior:0}}}),v=[...d,...h];return await I().flashRanges(v.map(w=>({editor:o,range:er(w),style:"justAdded"}))),{sourceMark:g.map(w=>({editor:o,selection:w})),thatMark:x.map(w=>({editor:o,selection:w}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var jl=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new Ws;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new As(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){if(e.type==="named"){let{name:r,variableName:n}=e,s=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return s==null?void 0:{type:s}}else return e.scopeType}getBody(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return bh(this.modifierStageFactory,r,i.definitions).body.join(`
`)}else return e.body}async run(e,r){let n=I().getEditableTextEditor(Tr(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);vh(o,r.variableName);let s=o.toTextmateString();await qe(I(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),u=()=>n.insertSnippet(s,l),{targetSelections:p}=await Be({rangeUpdater:this.rangeUpdater,editor:n,callback:u,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:p.map(d=>({editor:n,selection:d}))}}};var w7=/-?\d+(\.\d+)?/g,zh=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await la(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let u=n.offsetAt(l.contentRange.start),p=l.contentText,d=Lc(p,w7);for(let h of d)i.push(_7(e,u,h)),o.push(E7(this.isIncrement,h.text))}let{thatSelections:s}=await this.actions.replace.run(i,o);return s}},Gh=class extends zh{constructor(e){super(e,!0)}},Kh=class extends zh{constructor(e){super(e,!1)}};function _7(t,e,r){return new Ve({editor:t,isReversed:!1,contentRange:new W(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function E7(t,e){return e.includes(".")?k7(t,e).toString():R7(t,e).toString()}function R7(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function k7(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var Qh=class{constructor(e,r,n,i){this.treeSitter=e;this.snippets=r;this.rangeUpdater=n;this.modifierStageFactory=i;this.callAsFunction=new El(this);this.clearAndSetSelection=new Rl(this);this.copyToClipboard=new Mh(this.rangeUpdater);this.cutToClipboard=new nh(this);this.decrement=new Kh(this);this.deselect=new kl;this.editNew=new ih(this.rangeUpdater,this);this.editNewLineAfter=new sh(this,this.modifierStageFactory);this.editNewLineBefore=new ah(this,this.modifierStageFactory);this.executeCommand=new Pl(this.rangeUpdater);this.extractVariable=new Wh(this.rangeUpdater);this.findInDocument=new uh(this);this.findInWorkspace=new ph(this);this.foldRegion=new Fh(this.rangeUpdater);this.followLink=new Bs({openAside:!1});this.followLinkAside=new Bs({openAside:!0});this.generateSnippet=new Hs(this.snippets);this.getText=new Dl;this.highlight=new Il;this.increment=new Gh(this);this.indentLine=new Dh(this.rangeUpdater);this.insertCopyAfter=new mh(this.rangeUpdater,this.modifierStageFactory);this.insertCopyBefore=new dh(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineAfter=new yh(this.rangeUpdater);this.insertEmptyLineBefore=new gh(this.rangeUpdater);this.insertEmptyLinesAround=new hh(this.rangeUpdater);this.insertSnippet=new Cl(this.rangeUpdater,this.snippets,this,this.modifierStageFactory);this.joinLines=new Nl(this.rangeUpdater);this.breakLine=new Xm(this.rangeUpdater);this.moveToTarget=new th(this.rangeUpdater);this.outdentLine=new Ih(this.rangeUpdater);this.pasteFromClipboard=new wh(this.rangeUpdater,this);this.randomizeTargets=new jh(this);this.remove=new Ol(this.rangeUpdater);this.rename=new Nh(this.rangeUpdater);this.replace=new Ll(this.rangeUpdater);this.replaceWithTarget=new eh(this.rangeUpdater);this.revealDefinition=new Uh(this.rangeUpdater);this.revealTypeDefinition=new Vh(this.rangeUpdater);this.reverseTargets=new qh(this);this.rewrapWithPairedDelimiter=new Ul(this.rangeUpdater,this.modifierStageFactory);this.scrollToBottom=new Rh;this.scrollToCenter=new Eh;this.scrollToTop=new _h;this["private.setKeyboardTarget"]=new Bl("keyboard");this["experimental.setInstanceReference"]=new Bl("instanceReference");this.setSelection=new $s;this.setSelectionAfter=new Ph;this.setSelectionBefore=new kh;this.showDebugHover=new Hh(this.rangeUpdater);this.showHover=new Bh(this.rangeUpdater);this.showQuickFix=new Lh(this.rangeUpdater);this.showReferences=new Oh(this.rangeUpdater);this.sortTargets=new $h(this);this.swapTargets=new rh(this.rangeUpdater);this.toggleLineBreakpoint=new $l(this.modifierStageFactory);this.toggleLineComment=new Ah(this.rangeUpdater);this.unfoldRegion=new Ch(this.rangeUpdater);this.wrapWithPairedDelimiter=new ql(this.rangeUpdater);this.wrapWithSnippet=new jl(this.rangeUpdater,this.snippets,this.modifierStageFactory);this["private.showParseTree"]=new Hl(this.treeSitter);this["private.getTargets"]=new Al}};async function VD(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return Zh(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:Yh(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return Zh(i.destination)?{action:"insert",modifiers:Yh(i.destination),text:await rv(e,i.source)}:null;case"moveToTarget":if(Zh(i.destination)){let o=await rv(e,i.source);return await P7(e,i.source),{action:"insert",modifiers:Yh(i.destination),text:o}}return null;case"callAsFunction":return Xh(i.argument)?{action:i.name,modifiers:Jh(i.argument),callee:await rv(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return Xh(i.target)?{action:i.name,modifiers:Jh(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return Zh(i.destination)?{action:i.name,modifiers:Yh(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return Xh(i.target)?{action:i.name,modifiers:Jh(i.target)}:null}}function Zh(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&Xh(t.target):!1}function Xh(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function Yh(t){return t.type==="primitive"?Jh(t.target):[]}function Jh(t){if(t.type==="primitive"){if(t.modifiers!=null&&t.modifiers.length>0)return t.modifiers;if(t.mark?.type==="cursor")return[{type:"containingTokenIfEmpty"}]}return[]}async function rv(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function P7(t,e){await t({name:"remove",target:e})}function BD(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((s,l)=>[s,l]);for(let[s,l]of o.reverse())for(let u of M7){let p=u.accept(s);if(p.accepted){let[d,h]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],g={...t,anchor:h.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:h},active:Rf(i,x=>{x.modifiers=x.modifiers.slice(Ac(x.modifiers,v=>u.accept(v).accepted)+1)})};return g=p.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:d}}}return t}var M7=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function iv(t,e){switch(t.type){case"list":return A7(t,e);case"range":return HD(t,e);case"primitive":return eg(t,e);case"implicit":return t}}function A7(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return HD(r,i);case"primitive":return eg(r,i)}})}}function HD(t,e){let r=D7(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return BD(r,n)}function D7(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:eg(t.anchor,e),active:eg(t.active,e.concat(t.anchor))}}function eg(t,e){let r=nv(t.mark??(I7(t)?N7(e):null)??{type:"cursor"}),n=WD(t)??O7(e)??L7(e)??[];return{type:t.type,mark:r,modifiers:n}}function I7(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function WD(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function F7(t){if(C7(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function C7(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function N7(t){return zl(t,e=>e.mark)}function O7(t){return zl(t,WD)}function L7(t){return zl(t,F7)}function zl(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=zl([n.anchor],e);if(i!=null)return i;break}case"list":{let i=zl(n.elements,e);if(i!=null)return i;break}}}}function nv(t){switch(t.type){case"range":return{...t,anchor:nv(t.anchor),active:nv(t.active)};case"target":return{type:"target",target:iv(t.target,[])};default:return t}}var tg=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new ov(this.debug)}async run(e){if(Ho(e)){let p=await VD(this.commandServerApi,this.runAction,e);if(p!=null)return{fallback:p}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:s,instanceReferenceTargets:l,keyboardTargets:u}=await this.runAction(e.action);return this.storedTargets.set("that",$D(i,n)),this.storedTargets.set("source",$D(s,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",u,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(Qf(e.content,e.arguments));default:{let r=this.actions[e.name];return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},ov=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=iv(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function $D(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(ch):t}var rg=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Et({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var ng=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=I().visibleTextEditors.find(s=>s.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new W(r.line,r.character,n.line,n.character);return[new Et({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var ig=class{constructor(e){this.mark=e}run(){let e=I().activeTextEditor;if(e==null)return[];let r=U7(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[cS(e,!1,n)]}},U7=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,s=Math.floor(i/100)*100,l=[],u=[],p=s+r;for(;p<=o;)p>=i&&(t.visibleRanges.find(h=>p>=h.start.line&&p<=h.end.line)?l.push(p):u.push(p)),p+=100;if(l.length===1)return l[0];if(l.length+u.length>1)throw new Error("Multiple lines matching");if(u.length===1)return u[0];throw new Error("Line is not in viewport")}}};var og=class{constructor(e){this.mark=e}run(){return[]}};var ag=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[fo(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var sg=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var cg=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var lg=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new ds;case"that":case"source":case"keyboard":return new sg(this.storedTargets,e.type);case"decoratedSymbol":return new rg(this.readableHatMap,e);case"lineNumber":return new ig(e);case"range":return new ag(this,e);case"nothing":return new og(e);case"target":return new cg(this.targetPipelineRunner,e);case"explicit":return new ng(e)}}};async function qD(t,e,r,n,i,o,s,l,u,p){r.active&&(r.log("command:"),r.log(JSON.stringify(p,null,2)));let d=zT(p),h=await n.getReadableMap(d.usePrePhraseSnapshot),g=B7(t,e,s,r,o,h,i,l);for(let v of u)g=v.wrapCommandRunner(h,g);let x=await g.run(d);return await V7(p,x)}async function V7(t,e){if(Ho(t))return e;if("returnValue"in e)return e.returnValue}function B7(t,e,r,n,i,o,s,l){let u=new Us(r,i,new Ss(r)),p=new lg(o,i),d=new Mm(u,p);return p.setPipelineRunner(d),new tg(e,n,i,d,new Qh(t,s,l,u))}var jD=["clojure","css","latex","ruby","rust","scala","scss"];async function zD(t,e){await H7(t,e)}async function H7(t,e){let r=[];for(let n of jD)await t.loadLanguage(n),await e.loadLanguage(n),Ti(wl[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function GD(t){return Ck(t)?Kc(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${Kc(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var ug=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{Xt(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...Bo.filter(r=>r!=="instance").map(r=>({type:r})),...yf.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:GD(e),isLanguageSpecific:W7(e)}}dispose(){this.disposable.dispose()}};function W7(t){switch(t.type){case"string":case"argumentOrParameter":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function av(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((s,l)=>s.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=Qp(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=Qp(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function ua(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.isLine?tn(t.getRemovalHighlightRange()):er(t.getRemovalHighlightRange()),leadingDelimiter:KD(t.getLeadingDelimiterTarget()),trailingDelimiter:KD(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(ua),boundary:t.getBoundary()?.map(ua),insertionDelimiter:t.insertionDelimiter}}function KD(t){return t!=null?ua(t):void 0}function QD(t,e,r,n,i){return so(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),o=>({domain:o.domain,ranges:o.getTargets(!1).map(s=>({range:s.contentRange,targets:i?$7(r,s).map(ua):void 0}))}))}function $7(t,e){try{return t.run(e)}catch(r){if(r.name==="NoContainingScopeError")return[];throw r}}function ZD(t,e,r){return so(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(ua)}))}var pg=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.create(r,e.document.languageId);return i==null?[]:ZD(e,i,av(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,s=this.scopeHandlerFactory.create(r,o);if(s==null)return[];let l=this.scopeHandlerFactory.create(s.iterationScopeType,o);return l==null?[]:QD(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),av(e,s,n),i)}};var fg=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new zn(I().configuration,()=>this.onChange());this.disposables.push(I().onDidChangeVisibleTextEditors(n.run),I().onDidOpenTextDocument(n.run),I().onDidCloseTextDocument(n.run),I().onDidChangeTextDocument(n.run),I().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{I().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(s){if(rt(I().messages,"ScopeRangeWatcher.provide",s.message),o=[],I().runMode==="test")throw s}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{Xt(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{I().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{Xt(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var dg=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.create(r,n);return i==null?XD(n,r):YD(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.create(r,n);if(i==null)return XD(n,r);let o=this.scopeHandlerFactory.create(i.iterationScopeType,n);return o==null?3:YD(e,o)?0:1}};function YD(t,e){return!Lk(e.generateScopes(t,new se(0,0),"forward"))}function XD(t,e){switch(e.type){case"boundedNonWhitespaceSequence":case"surroundingPair":return 2;case"notebookCell":return 3;default:return wl[t]?.[e.type]!=null?2:3}}var mg=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new zn(I().configuration,()=>this.onChange());this.disposable=Ok(I().onDidOpenTextDocument(i.run),I().onDidCloseTextDocument(i.run),I().onDidChangeActiveTextEditor(i.run),I().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{Xt(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=I().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function JD({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Ad,commandServerApi:i=new Ed,talonSpokenForms:o=new Md,snippets:s=new Pd}){ed(t);let l=new xd(t),u=new _d,p=new rd,d=new yd(t,p),h=new Fd(o),g=e!=null?new bd(u,l,e,i):new Rd;g.allocateHats();let x=r?await xm.create(t,n,r):new kd;t.disposeOnExit(u,x,g,l,d);let v=[],w,N=A=>(w=A,qD(n,i,l,g,s,p,x,u,v,A));return{commandApi:{runCommand(A){return N(A)},runCommandSafe(...A){return N(xf(A))},repeatPreviousCommand(){if(w==null)throw new Error("No previous command");return N(w)}},scopeProvider:j7(x,p,h),customSpokenFormGenerator:h,storedTargets:p,hatTokenMap:g,injectIde:ed,runIntegrationTests:()=>zD(n,x),addCommandRunnerDecorator:A=>{v.push(A)}}}function j7(t,e,r){let n=new Ss(t),i=new pg(n,new Us(t,e,n)),o=new fg(t,i),s=new dg(n),l=new ug(r),u=new mg(t,s,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:s.getScopeSupport,getIterationScopeSupport:s.getIterationScopeSupport,onDidChangeScopeSupport:u.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function eI(t,e){switch(e.type){case"UntypedTarget":return new Et({editor:t,isReversed:e.isReversed,contentRange:cf(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new Nr({editor:t,isReversed:e.isReversed,contentRange:cf(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var XLe=Symbol("unused");var Gl=class{constructor(e){this.position=e}},JLe={$0:new Gl(0),$1:new Gl(1),$2:new Gl(2)};var tI=require("node:events"),hg=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new tI.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function Vr(){return global._neovimRegistry==null&&(global._neovimRegistry=new hg),global._neovimRegistry}var rI="pokey.cursorless";async function gg(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,s,l]=await e.executeLua(r,[]),u;return l===!0?u=[new Te(new se(o-1,s-1),new se(n-1,i-1))]:u=[new Te(new se(n-1,i-1),new se(o-1,s-1))],console.debug(`bufferGetSelections(): selections=(${u[0].start.line}, ${u[0].start.character}), (${u[0].end.line}, ${u[0].end.character}) neovim=(${n},${i}),(${o},${s}),reverse=${l}`),u}async function nI(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function iI(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),s=new W(new se(i-1,0),new se(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${s.start.line}, ${s.start.character}), (${s.end.line}, ${s.end.character})`),[s]}async function oI(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function yg(t,e){await e.callFunction("setreg",["*",t])}async function aI(t){return await t.callFunction("getreg",["*"])}async function sI(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function cI(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function lI(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function uI(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var z7={clipboardCopy:{acceptsLocation:!1},toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0},xg=class{constructor(){this.commands=z7}};var Kl=class{constructor(e){this.client=e}async readText(){return await aI(this.client)}async writeText(e){return await yg(e,this.client)}};var Tg=pr(sv(),1);var Zl=class{constructor(){this.notifier=new Ht;this.mocks={...tf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(G7(n,r))return(0,Tg.get)(i,e)??(0,Tg.get)(this.mocks,e)}return(0,Tg.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function G7(t,e){return t.languageId===e.languageId}async function cv(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);n.sort((s,l)=>(pI(s)||fI(s))&&(pI(l)||fI(l))?1:s.range.start.line===l.range.start.line?l.range.start.character-s.range.start.character:l.range.start.line-s.range.start.line),console.debug("neovimEdit() [sorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let s of n)o.push({range:s.range,rangeOffset:i.offsetAt(s.range.start),rangeLength:i.offsetAt(s.range.end)-i.offsetAt(s.range.start),text:s.text});Vr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let s of n){let{range:l,text:u,isReplace:p}=s;u===""?await dI(t,l):l.isEmpty&&!p?await mI(t,l.start,u):await K7(t,l,u)}return await e.updateTextEditor(),!0}async function dI(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(s+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([s,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function mI(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=s+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let u=s+n[0],p=n[n.length-1]+l;await i.setLines([u,...n.slice(1,n.length-1),p],{start:e.line,end:e.line+1,strictIndexing:!0})}async function K7(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await dI(t,e),await mI(t,e.start,r)}function pI(t){return t.range.isEmpty&&!t.isReplace}function fI(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function hI(t){return Vr().onEvent("onDidChangeTextDocument",t),yI()}function gI(t,e,r){return Vr().onEvent("onDidOpenTextDocument",t),yI()}function yI(){return{dispose(){}}}var Yl=class{constructor(){this.data={...rf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var SF=pr(sv(),1);var Xl=class{async showMessage(e,r,n,...i){}};async function xI(t,e){let r=e.activeTextEditor,n=await t.window,i=await gg(n,t),o=r.document.getText(i[0]);await yg(o,t)}async function TI(t,e){await sI(t)}var Sg=class{constructor(e,r,n,i,o,s,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=s}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await nI(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await cv(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await xI(this.client,this.neovimIDE)}async clipboardPaste(e){await TI(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}};var Mb=pr(require("path"),1);var SI;(()=>{"use strict";var t={470:i=>{function o(u){if(typeof u!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(u))}function s(u,p){for(var d,h="",g=0,x=-1,v=0,w=0;w<=u.length;++w){if(w<u.length)d=u.charCodeAt(w);else{if(d===47)break;d=47}if(d===47){if(!(x===w-1||v===1))if(x!==w-1&&v===2){if(h.length<2||g!==2||h.charCodeAt(h.length-1)!==46||h.charCodeAt(h.length-2)!==46){if(h.length>2){var N=h.lastIndexOf("/");if(N!==h.length-1){N===-1?(h="",g=0):g=(h=h.slice(0,N)).length-1-h.lastIndexOf("/"),x=w,v=0;continue}}else if(h.length===2||h.length===1){h="",g=0,x=w,v=0;continue}}p&&(h.length>0?h+="/..":h="..",g=2)}else h.length>0?h+="/"+u.slice(x+1,w):h=u.slice(x+1,w),g=w-x-1;x=w,v=0}else d===46&&v!==-1?++v:v=-1}return h}var l={resolve:function(){for(var u,p="",d=!1,h=arguments.length-1;h>=-1&&!d;h--){var g;h>=0?g=arguments[h]:(u===void 0&&(u=process.cwd()),g=u),o(g),g.length!==0&&(p=g+"/"+p,d=g.charCodeAt(0)===47)}return p=s(p,!d),d?p.length>0?"/"+p:"/":p.length>0?p:"."},normalize:function(u){if(o(u),u.length===0)return".";var p=u.charCodeAt(0)===47,d=u.charCodeAt(u.length-1)===47;return(u=s(u,!p)).length!==0||p||(u="."),u.length>0&&d&&(u+="/"),p?"/"+u:u},isAbsolute:function(u){return o(u),u.length>0&&u.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var u,p=0;p<arguments.length;++p){var d=arguments[p];o(d),d.length>0&&(u===void 0?u=d:u+="/"+d)}return u===void 0?".":l.normalize(u)},relative:function(u,p){if(o(u),o(p),u===p||(u=l.resolve(u))===(p=l.resolve(p)))return"";for(var d=1;d<u.length&&u.charCodeAt(d)===47;++d);for(var h=u.length,g=h-d,x=1;x<p.length&&p.charCodeAt(x)===47;++x);for(var v=p.length-x,w=g<v?g:v,N=-1,A=0;A<=w;++A){if(A===w){if(v>w){if(p.charCodeAt(x+A)===47)return p.slice(x+A+1);if(A===0)return p.slice(x+A)}else g>w&&(u.charCodeAt(d+A)===47?N=A:A===0&&(N=0));break}var U=u.charCodeAt(d+A);if(U!==p.charCodeAt(x+A))break;U===47&&(N=A)}var Z="";for(A=d+N+1;A<=h;++A)A!==h&&u.charCodeAt(A)!==47||(Z.length===0?Z+="..":Z+="/..");return Z.length>0?Z+p.slice(x+N):(x+=N,p.charCodeAt(x)===47&&++x,p.slice(x))},_makeLong:function(u){return u},dirname:function(u){if(o(u),u.length===0)return".";for(var p=u.charCodeAt(0),d=p===47,h=-1,g=!0,x=u.length-1;x>=1;--x)if((p=u.charCodeAt(x))===47){if(!g){h=x;break}}else g=!1;return h===-1?d?"/":".":d&&h===1?"//":u.slice(0,h)},basename:function(u,p){if(p!==void 0&&typeof p!="string")throw new TypeError('"ext" argument must be a string');o(u);var d,h=0,g=-1,x=!0;if(p!==void 0&&p.length>0&&p.length<=u.length){if(p.length===u.length&&p===u)return"";var v=p.length-1,w=-1;for(d=u.length-1;d>=0;--d){var N=u.charCodeAt(d);if(N===47){if(!x){h=d+1;break}}else w===-1&&(x=!1,w=d+1),v>=0&&(N===p.charCodeAt(v)?--v==-1&&(g=d):(v=-1,g=w))}return h===g?g=w:g===-1&&(g=u.length),u.slice(h,g)}for(d=u.length-1;d>=0;--d)if(u.charCodeAt(d)===47){if(!x){h=d+1;break}}else g===-1&&(x=!1,g=d+1);return g===-1?"":u.slice(h,g)},extname:function(u){o(u);for(var p=-1,d=0,h=-1,g=!0,x=0,v=u.length-1;v>=0;--v){var w=u.charCodeAt(v);if(w!==47)h===-1&&(g=!1,h=v+1),w===46?p===-1?p=v:x!==1&&(x=1):p!==-1&&(x=-1);else if(!g){d=v+1;break}}return p===-1||h===-1||x===0||x===1&&p===h-1&&p===d+1?"":u.slice(p,h)},format:function(u){if(u===null||typeof u!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof u);return function(p,d){var h=d.dir||d.root,g=d.base||(d.name||"")+(d.ext||"");return h?h===d.root?h+g:h+"/"+g:g}(0,u)},parse:function(u){o(u);var p={root:"",dir:"",base:"",ext:"",name:""};if(u.length===0)return p;var d,h=u.charCodeAt(0),g=h===47;g?(p.root="/",d=1):d=0;for(var x=-1,v=0,w=-1,N=!0,A=u.length-1,U=0;A>=d;--A)if((h=u.charCodeAt(A))!==47)w===-1&&(N=!1,w=A+1),h===46?x===-1?x=A:U!==1&&(U=1):x!==-1&&(U=-1);else if(!N){v=A+1;break}return x===-1||w===-1||U===0||U===1&&x===w-1&&x===v+1?w!==-1&&(p.base=p.name=v===0&&g?u.slice(1,w):u.slice(v,w)):(v===0&&g?(p.name=u.slice(1,x),p.base=u.slice(1,w)):(p.name=u.slice(v,x),p.base=u.slice(v,w)),p.ext=u.slice(x,w)),v>0?p.dir=u.slice(0,v-1):g&&(p.dir="/"),p},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,r),s.exports}r.d=(i,o)=>{for(var s in o)r.o(o,s)&&!r.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>O}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function u(C,D){if(!C.scheme&&D)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${C.authority}", path: "${C.path}", query: "${C.query}", fragment: "${C.fragment}"}`);if(C.scheme&&!o.test(C.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(C.path){if(C.authority){if(!s.test(C.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(C.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let p="",d="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(D){return D instanceof g||!!D&&typeof D.authority=="string"&&typeof D.fragment=="string"&&typeof D.path=="string"&&typeof D.query=="string"&&typeof D.scheme=="string"&&typeof D.fsPath=="string"&&typeof D.with=="function"&&typeof D.toString=="function"}scheme;authority;path;query;fragment;constructor(D,$,j,K,Q,te=!1){typeof D=="object"?(this.scheme=D.scheme||p,this.authority=D.authority||p,this.path=D.path||p,this.query=D.query||p,this.fragment=D.fragment||p):(this.scheme=function(me,re){return me||re?me:"file"}(D,te),this.authority=$||p,this.path=function(me,re){switch(me){case"https":case"http":case"file":re?re[0]!==d&&(re=d+re):re=d}return re}(this.scheme,j||p),this.query=K||p,this.fragment=Q||p,u(this,te))}get fsPath(){return U(this,!1)}with(D){if(!D)return this;let{scheme:$,authority:j,path:K,query:Q,fragment:te}=D;return $===void 0?$=this.scheme:$===null&&($=p),j===void 0?j=this.authority:j===null&&(j=p),K===void 0?K=this.path:K===null&&(K=p),Q===void 0?Q=this.query:Q===null&&(Q=p),te===void 0?te=this.fragment:te===null&&(te=p),$===this.scheme&&j===this.authority&&K===this.path&&Q===this.query&&te===this.fragment?this:new v($,j,K,Q,te)}static parse(D,$=!1){let j=h.exec(D);return j?new v(j[2]||p,de(j[4]||p),de(j[5]||p),de(j[7]||p),de(j[9]||p),$):new v(p,p,p,p,p)}static file(D){let $=p;if(i&&(D=D.replace(/\\/g,d)),D[0]===d&&D[1]===d){let j=D.indexOf(d,2);j===-1?($=D.substring(2),D=d):($=D.substring(2,j),D=D.substring(j)||d)}return new v("file",$,D,p,p)}static from(D){let $=new v(D.scheme,D.authority,D.path,D.query,D.fragment);return u($,!0),$}toString(D=!1){return Z(this,D)}toJSON(){return this}static revive(D){if(D){if(D instanceof g)return D;{let $=new v(D);return $._formatted=D.external,$._fsPath=D._sep===x?D.fsPath:null,$}}return D}}let x=i?1:void 0;class v extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=U(this,!1)),this._fsPath}toString(D=!1){return D?Z(this,!0):(this._formatted||(this._formatted=Z(this,!1)),this._formatted)}toJSON(){let D={$mid:1};return this._fsPath&&(D.fsPath=this._fsPath,D._sep=x),this._formatted&&(D.external=this._formatted),this.path&&(D.path=this.path),this.scheme&&(D.scheme=this.scheme),this.authority&&(D.authority=this.authority),this.query&&(D.query=this.query),this.fragment&&(D.fragment=this.fragment),D}}let w={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function N(C,D,$){let j,K=-1;for(let Q=0;Q<C.length;Q++){let te=C.charCodeAt(Q);if(te>=97&&te<=122||te>=65&&te<=90||te>=48&&te<=57||te===45||te===46||te===95||te===126||D&&te===47||$&&te===91||$&&te===93||$&&te===58)K!==-1&&(j+=encodeURIComponent(C.substring(K,Q)),K=-1),j!==void 0&&(j+=C.charAt(Q));else{j===void 0&&(j=C.substr(0,Q));let me=w[te];me!==void 0?(K!==-1&&(j+=encodeURIComponent(C.substring(K,Q)),K=-1),j+=me):K===-1&&(K=Q)}}return K!==-1&&(j+=encodeURIComponent(C.substring(K))),j!==void 0?j:C}function A(C){let D;for(let $=0;$<C.length;$++){let j=C.charCodeAt($);j===35||j===63?(D===void 0&&(D=C.substr(0,$)),D+=w[j]):D!==void 0&&(D+=C[$])}return D!==void 0?D:C}function U(C,D){let $;return $=C.authority&&C.path.length>1&&C.scheme==="file"?`//${C.authority}${C.path}`:C.path.charCodeAt(0)===47&&(C.path.charCodeAt(1)>=65&&C.path.charCodeAt(1)<=90||C.path.charCodeAt(1)>=97&&C.path.charCodeAt(1)<=122)&&C.path.charCodeAt(2)===58?D?C.path.substr(1):C.path[1].toLowerCase()+C.path.substr(2):C.path,i&&($=$.replace(/\//g,"\\")),$}function Z(C,D){let $=D?A:N,j="",{scheme:K,authority:Q,path:te,query:me,fragment:re}=C;if(K&&(j+=K,j+=":"),(Q||K==="file")&&(j+=d,j+=d),Q){let Re=Q.indexOf("@");if(Re!==-1){let or=Q.substr(0,Re);Q=Q.substr(Re+1),Re=or.lastIndexOf(":"),Re===-1?j+=$(or,!1,!1):(j+=$(or.substr(0,Re),!1,!1),j+=":",j+=$(or.substr(Re+1),!1,!0)),j+="@"}Q=Q.toLowerCase(),Re=Q.lastIndexOf(":"),Re===-1?j+=$(Q,!1,!0):(j+=$(Q.substr(0,Re),!1,!0),j+=Q.substr(Re))}if(te){if(te.length>=3&&te.charCodeAt(0)===47&&te.charCodeAt(2)===58){let Re=te.charCodeAt(1);Re>=65&&Re<=90&&(te=`/${String.fromCharCode(Re+32)}:${te.substr(3)}`)}else if(te.length>=2&&te.charCodeAt(1)===58){let Re=te.charCodeAt(0);Re>=65&&Re<=90&&(te=`${String.fromCharCode(Re+32)}:${te.substr(2)}`)}j+=$(te,!0,!1)}return me&&(j+="?",j+=$(me,!1,!1)),re&&(j+="#",j+=D?re:N(re,!1,!1)),j}function ne(C){try{return decodeURIComponent(C)}catch{return C.length>3?C.substr(0,3)+ne(C.substr(3)):C}}let he=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function de(C){return C.match(he)?C.replace(he,D=>ne(D)):C}var dt=r(470);let At=dt.posix||dt,nt="/";var O;(function(C){C.joinPath=function(D,...$){return D.with({path:At.join(D.path,...$)})},C.resolvePath=function(D,...$){let j=D.path,K=!1;j[0]!==nt&&(j=nt+j,K=!0);let Q=At.resolve(j,...$);return K&&Q[0]===nt&&!D.authority&&(Q=Q.substring(1)),D.with({path:Q})},C.dirname=function(D){if(D.path.length===0||D.path===nt)return D;let $=At.dirname(D.path);return $.length===1&&$.charCodeAt(0)===46&&($=""),D.with({path:$})},C.basename=function(D){return At.basename(D.path)},C.extname=function(D){return At.extname(D.path)}})(O||(O={}))})(),SI=n})();var{URI:vI,Utils:s2e}=SI;var WI=pr(CI(),1);var eu=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var rQ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},tu=t=>t.replace(/[[\]\\-]/g,"\\$&"),nQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),NI=t=>t.join(""),OI=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,l=!1,u=!1,p=!1,d=r,h="";e:for(;o<t.length;){let w=t.charAt(o);if((w==="!"||w==="^")&&o===r+1){p=!0,o++;continue}if(w==="]"&&s&&!u){d=o+1;break}if(s=!0,w==="\\"&&!u){u=!0,o++;continue}if(w==="["&&!u){for(let[N,[A,U,Z]]of Object.entries(rQ))if(t.startsWith(N,o)){if(h)return["$.",!1,t.length-r,!0];o+=N.length,Z?i.push(A):n.push(A),l=l||U;continue e}}if(u=!1,h){w>h?n.push(tu(h)+"-"+tu(w)):w===h&&n.push(tu(w)),h="",o++;continue}if(t.startsWith("-]",o+1)){n.push(tu(w+"-")),o+=2;continue}if(t.startsWith("-",o+1)){h=w,o+=2;continue}n.push(tu(w)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!p){let w=n[0].length===2?n[0].slice(-1):n[0];return[nQ(w),!1,d-r,!1]}let g="["+(p?"^":"")+NI(n)+"]",x="["+(p?"":"^")+NI(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,l,d-r,!0]};var Dn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var iQ=new Set(["!","?","+","*","@"]),LI=t=>iQ.has(t),oQ="(?!(?:^|/)\\.\\.?(?:$|/))",vg="(?!\\.)",aQ=new Set(["[","."]),sQ=new Set(["..","."]),cQ=new Set("().*{}+?[]^$\\!"),lQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),pv="[^/]",UI=pv+"*?",VI=pv+"+?",js=class t{type;#e;#r;#o=!1;#n=[];#a;#S;#l;#p=!1;#c;#s;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#r=!0),this.#a=r,this.#e=this.#a?this.#a.#e:this,this.#c=this.#e===this?n:this.#e.#c,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#p&&this.#l.push(this),this.#S=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#r!==void 0)return this.#r;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#r=!0;return this.#r}toString(){return this.#s!==void 0?this.#s:this.type?this.#s=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#s=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#p)return this;this.toString(),this.#p=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#a;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#a}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#a===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#p&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#S===0)return!0;let e=this.#a;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,s=!1,l=-1,u=!1;if(r.type===null){let x=n,v="";for(;x<e.length;){let w=e.charAt(x++);if(o||w==="\\"){o=!o,v+=w;continue}if(s){x===l+1?(w==="^"||w==="!")&&(u=!0):w==="]"&&!(x===l+2&&u)&&(s=!1),v+=w;continue}else if(w==="["){s=!0,l=x,u=!1,v+=w;continue}if(!i.noext&&LI(w)&&e.charAt(x)==="("){r.push(v),v="";let N=new t(w,r);x=t.#y(e,N,x,i),r.push(N);continue}v+=w}return r.push(v),x}let p=n+1,d=new t(null,r),h=[],g="";for(;p<e.length;){let x=e.charAt(p++);if(o||x==="\\"){o=!o,g+=x;continue}if(s){p===l+1?(x==="^"||x==="!")&&(u=!0):x==="]"&&!(p===l+2&&u)&&(s=!1),g+=x;continue}else if(x==="["){s=!0,l=p,u=!1,g+=x;continue}if(LI(x)&&e.charAt(p)==="("){d.push(g),g="";let v=new t(x,d);d.push(v),p=t.#y(e,v,p,i);continue}if(x==="|"){d.push(g),g="",h.push(d),d=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),d.push(g),g="",r.push(...h,d),p;g+=x}return r.type=null,r.#r=void 0,r.#n=[e.substring(n-1)],p}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#r||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#c.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}toRegExpSource(e){let r=e??!!this.#c.dot;if(this.#e===this&&this.#g(),!this.type){let u=this.isStart()&&this.isEnd(),p=this.#n.map(x=>{let[v,w,N,A]=typeof x=="string"?t.#f(x,this.#r,u):x.toRegExpSource(e);return this.#r=this.#r||N,this.#o=this.#o||A,v}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&sQ.has(this.#n[0]))){let v=aQ,w=r&&v.has(p.charAt(0))||p.startsWith("\\.")&&v.has(p.charAt(2))||p.startsWith("\\.\\.")&&v.has(p.charAt(4)),N=!r&&!e&&v.has(p.charAt(0));d=w?oQ:N?vg:""}let h="";return this.isEnd()&&this.#e.#p&&this.#a?.type==="!"&&(h="(?:$|\\/)"),[d+p+h,Dn(p),this.#r=!!this.#r,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#d(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let u=this.toString();return this.#n=[u],this.type=null,this.#r=void 0,[u,Dn(this.toString()),!1,!1]}let s=!n||e||r||!vg?"":this.#d(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?vg:"")+VI;else{let u=this.type==="!"?"))"+(this.isStart()&&!r&&!e?vg:"")+UI+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;l=i+o+u}return[l,Dn(o),this.#r=!!this.#r,this.#o]}#d(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#o=this.#o||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",s=!1;for(let l=0;l<e.length;l++){let u=e.charAt(l);if(i){i=!1,o+=(cQ.has(u)?"\\":"")+u;continue}if(u==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(u==="["){let[p,d,h,g]=OI(e,l);if(h){o+=p,s=s||d,l+=h-1,r=r||g;continue}}if(u==="*"){n&&e==="*"?o+=VI:o+=UI,r=!0;continue}if(u==="?"){o+=pv,r=!0;continue}o+=lQ(u)}return[o,Dn(e),!!r,s]}};var zs=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var nr=(t,e,r={})=>(eu(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Br(e,r).match(t)),uQ=/^\*+([^+@!?\*\[\(]*)$/,pQ=t=>e=>!e.startsWith(".")&&e.endsWith(t),fQ=t=>e=>e.endsWith(t),dQ=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),mQ=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),hQ=/^\*+\.\*+$/,gQ=t=>!t.startsWith(".")&&t.includes("."),yQ=t=>t!=="."&&t!==".."&&t.includes("."),xQ=/^\.\*+$/,TQ=t=>t!=="."&&t!==".."&&t.startsWith("."),SQ=/^\*+$/,vQ=t=>t.length!==0&&!t.startsWith("."),bQ=t=>t.length!==0&&t!=="."&&t!=="..",wQ=/^\?+([^+@!?\*\[\(]*)?$/,_Q=([t,e=""])=>{let r=$I([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},EQ=([t,e=""])=>{let r=qI([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},RQ=([t,e=""])=>{let r=qI([t]);return e?n=>r(n)&&n.endsWith(e):r},kQ=([t,e=""])=>{let r=$I([t]);return e?n=>r(n)&&n.endsWith(e):r},$I=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},qI=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},jI=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",BI={win32:{sep:"\\"},posix:{sep:"/"}},PQ=jI==="win32"?BI.win32.sep:BI.posix.sep;nr.sep=PQ;var Ot=Symbol("globstar **");nr.GLOBSTAR=Ot;var MQ="[^/]",AQ=MQ+"*?",DQ="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",IQ="(?:(?!(?:\\/|^)\\.).)*?",FQ=(t,e={})=>r=>nr(r,t,e);nr.filter=FQ;var un=(t,e={})=>Object.assign({},t,e),CQ=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return nr;let e=nr;return Object.assign((n,i,o={})=>e(n,i,un(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,un(t,o))}static defaults(i){return e.defaults(un(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,un(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,un(t,o))}},unescape:(n,i={})=>e.unescape(n,un(t,i)),escape:(n,i={})=>e.escape(n,un(t,i)),filter:(n,i={})=>e.filter(n,un(t,i)),defaults:n=>e.defaults(un(t,n)),makeRe:(n,i={})=>e.makeRe(n,un(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,un(t,i)),match:(n,i,o={})=>e.match(n,i,un(t,o)),sep:e.sep,GLOBSTAR:Ot})};nr.defaults=CQ;var zI=(t,e={})=>(eu(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,WI.default)(t));nr.braceExpand=zI;var NQ=(t,e={})=>new Br(t,e).makeRe();nr.makeRe=NQ;var OQ=(t,e,r={})=>{let n=new Br(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};nr.match=OQ;var HI=/[?*]|[+@!]\(.*?\)|\[|\]/,LQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Br=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){eu(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||jI,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=o[0]===""&&o[1]===""&&(o[2]==="?"||!HI.test(o[2]))&&!HI.test(o[3]),p=/^[a-z]:/i.test(o[0]);if(u)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(p)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(u=>this.parse(u))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let l=n[i+1],u=n[i+2],p=n[i+3];if(l!==".."||!u||u==="."||u===".."||!p||p==="."||p==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let l=n[s];s===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let u=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...u),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);i&&(e[r]=i,e[n]=[])}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let w=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),N=!w&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),A=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),U=!A&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),Z=N?3:w?0:void 0,ne=U?3:A?0:void 0;if(typeof Z=="number"&&typeof ne=="number"){let[he,de]=[e[Z],r[ne]];he.toLowerCase()===de.toLowerCase()&&(r[ne]=he,ne>Z?r=r.slice(ne):Z>ne&&(e=e.slice(Z)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,l=0,u=e.length,p=r.length;s<u&&l<p;s++,l++){this.debug("matchOne loop");var d=r[l],h=e[s];if(this.debug(r,d,h),d===!1)return!1;if(d===Ot){this.debug("GLOBSTAR",[r,d,h]);var g=s,x=l+1;if(x===p){for(this.debug("** at the end");s<u;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;g<u;){var v=e[g];if(this.debug(`
globstar while`,e,g,r,x,v),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,u,v),!0;if(v==="."||v===".."||!i.dot&&v.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===u))}let w;if(typeof d=="string"?(w=h===d,this.debug("string match",d,h,w)):(w=d.test(h),this.debug("pattern match",d,h,w)),!w)return!1}if(s===u&&l===p)return!0;if(s===u)return n;if(l===p)return s===u-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return zI(this.pattern,this.options)}parse(e){eu(e);let r=this.options;if(e==="**")return Ot;if(e==="")return"";let n,i=null;(n=e.match(SQ))?i=r.dot?bQ:vQ:(n=e.match(uQ))?i=(r.nocase?r.dot?mQ:dQ:r.dot?fQ:pQ)(n[1]):(n=e.match(wQ))?i=(r.nocase?r.dot?EQ:_Q:r.dot?RQ:kQ)(n):(n=e.match(hQ))?i=r.dot?yQ:gQ:(n=e.match(xQ))&&(i=TQ);let o=js.fromGlob(e,this.options).toMMPattern();return i?Object.assign(o,{test:i}):o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?AQ:r.dot?DQ:IQ,i=new Set(r.nocase?["i"]:[]),o=e.map(u=>{let p=u.map(d=>{if(d instanceof RegExp)for(let h of d.flags.split(""))i.add(h);return typeof d=="string"?LQ(d):d===Ot?Ot:d._src});return p.forEach((d,h)=>{let g=p[h+1],x=p[h-1];d!==Ot||x===Ot||(x===void 0?g!==void 0&&g!==Ot?p[h+1]="(?:\\/|"+n+"\\/)?"+g:p[h]=n:g===void 0?p[h-1]=x+"(?:\\/|"+n+")?":g!==Ot&&(p[h-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,p[h+1]=Ot))}),p.filter(d=>d!==Ot).join("/")}).join("|"),[s,l]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let l=i.length-2;!s&&l>=0;l--)s=i[l];for(let l=0;l<o.length;l++){let u=o[l],p=i;if(n.matchBase&&u.length===1&&(p=[s]),this.matchOne(p,u,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return nr.defaults(e).Minimatch}};nr.AST=js;nr.Minimatch=Br;nr.escape=zs;nr.unescape=Dn;var Gs=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,KI=new Set,fv=typeof process=="object"&&process?process:{},QI=(t,e,r,n)=>{typeof fv.emitWarning=="function"?fv.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},bg=globalThis.AbortController,GI=globalThis.AbortSignal;if(typeof bg>"u"){GI=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},bg=class{constructor(){e()}signal=new GI;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=fv.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,QI("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var UQ=t=>!KI.has(t),A2e=Symbol("type"),xo=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),ZI=t=>xo(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Ks:null:null,Ks=class extends Array{constructor(e){super(e),this.fill(0)}},dv=class t{heap;length;static#e=!1;static create(e){let r=ZI(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},ru=class t{#e;#r;#o;#n;#a;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#p;#c;#s;#i;#g;#y;#d;#f;#w;#h;#_;#E;#T;#v;#b;#m;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#T,sizes:e.#_,keyMap:e.#c,keyList:e.#s,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#u(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#B(r),indexes:r=>e.#k(r),rindexes:r=>e.#P(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#r}get calculatedSize(){return this.#p}get size(){return this.#l}get fetchMethod(){return this.#a}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:l,allowStale:u,dispose:p,disposeAfter:d,noDisposeOnSet:h,noUpdateTTL:g,maxSize:x=0,maxEntrySize:v=0,sizeCalculation:w,fetchMethod:N,memoMethod:A,noDeleteOnFetchRejection:U,noDeleteOnStaleGet:Z,allowStaleOnFetchRejection:ne,allowStaleOnFetchAbort:he,ignoreFetchAbort:de}=e;if(r!==0&&!xo(r))throw new TypeError("max option must be a nonnegative integer");let dt=r?ZI(r):Array;if(!dt)throw new Error("invalid max value: "+r);if(this.#e=r,this.#r=x,this.maxEntrySize=v||this.#r,this.sizeCalculation=w,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(A!==void 0&&typeof A!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=A,N!==void 0&&typeof N!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=N,this.#b=!!N,this.#c=new Map,this.#s=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new dt(r),this.#y=new dt(r),this.#d=0,this.#f=0,this.#w=dv.create(r),this.#l=0,this.#p=0,typeof p=="function"&&(this.#o=p),typeof d=="function"?(this.#n=d,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#m=!!this.#n,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!U,this.allowStaleOnFetchRejection=!!ne,this.allowStaleOnFetchAbort=!!he,this.ignoreFetchAbort=!!de,this.maxEntrySize!==0){if(this.#r!==0&&!xo(this.#r))throw new TypeError("maxSize must be a positive integer if specified");if(!xo(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#A()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!Z,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!l,this.ttlResolution=xo(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!xo(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#e===0&&this.ttl===0&&this.#r===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#r){let At="LRU_CACHE_UNBOUNDED";UQ(At)&&(KI.add(At),QI("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",At,t))}}getRemainingTTL(e){return this.#c.has(e)?1/0:0}#M(){let e=new Ks(this.#e),r=new Ks(this.#e);this.#T=e,this.#E=r,this.#I=(o,s,l=Gs.now())=>{if(r[o]=s!==0?l:0,e[o]=s,s!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#x(o)&&this.#D(this.#s[o],"expire")},s+1);u.unref&&u.unref()}},this.#R=o=>{r[o]=e[o]!==0?Gs.now():0},this.#t=(o,s)=>{if(e[s]){let l=e[s],u=r[s];if(!l||!u)return;o.ttl=l,o.start=u,o.now=n||i();let p=o.now-u;o.remainingTTL=l-p}};let n=0,i=()=>{let o=Gs.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#c.get(o);if(s===void 0)return 0;let l=e[s],u=r[s];if(!l||!u)return 1/0;let p=(n||i())-u;return l-p},this.#x=o=>{let s=r[o],l=e[o];return!!l&&!!s&&(n||i())-s>l}}#R=()=>{};#t=()=>{};#I=()=>{};#x=()=>!1;#A(){let e=new Ks(this.#e);this.#p=0,this.#_=e,this.#F=r=>{this.#p-=e[r],e[r]=0},this.#N=(r,n,i,o)=>{if(this.#u(n))return 0;if(!xo(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!xo(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#r){let o=this.#r-e[r];for(;this.#p>o;)this.#L(!0)}this.#p+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#p)}}#F=e=>{};#C=(e,r,n)=>{};#N=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#O(r)||((e||!this.#x(r))&&(yield r),r===this.#d));)r=this.#y[r]}*#P({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#d;!(!this.#O(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#O(e){return e!==void 0&&this.#c.get(this.#s[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#s[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#s[e],this.#i[e]])}*rentries(){for(let e of this.#P())this.#i[e]!==void 0&&this.#s[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#s[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#s[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#P()){let r=this.#s[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#P())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#s[n],this))return this.get(this.#s[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#s[n],this)}}rforEach(e,r=this){for(let n of this.#P()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#s[n],this)}}purgeStale(){let e=!1;for(let r of this.#P({allowStale:!0}))this.#x(r)&&(this.#D(this.#s[r],"expire"),e=!0);return e}info(e){let r=this.#c.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#u(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#T&&this.#E){let s=this.#T[r],l=this.#E[r];if(s&&l){let u=s-(Gs.now()-l);o.ttl=u,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#s[r],i=this.#i[r],o=this.#u(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#T&&this.#E){s.ttl=this.#T[r];let l=Gs.now()-this.#E[r];s.start=Math.floor(Date.now()-l)}this.#_&&(s.size=this.#_[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=Gs.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:u}=n,{noUpdateTTL:p=this.noUpdateTTL}=n,d=this.#N(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let h=this.#l===0?void 0:this.#c.get(e);if(h===void 0)h=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#s[h]=e,this.#i[h]=r,this.#c.set(e,h),this.#g[this.#f]=h,this.#y[h]=this.#f,this.#f=h,this.#l++,this.#C(h,d,u),u&&(u.set="add"),p=!1;else{this.#B(h);let g=this.#i[h];if(r!==g){if(this.#b&&this.#u(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!s&&(this.#v&&this.#o?.(x,e,"set"),this.#m&&this.#h?.push([x,e,"set"]))}else s||(this.#v&&this.#o?.(g,e,"set"),this.#m&&this.#h?.push([g,e,"set"]));if(this.#F(h),this.#C(h,d,u),this.#i[h]=r,u){u.set="replace";let x=g&&this.#u(g)?g.__staleWhileFetching:g;x!==void 0&&(u.oldValue=x)}}else u&&(u.set="update")}if(i!==0&&!this.#T&&this.#M(),this.#T&&(p||this.#I(h,i,o),u&&this.#t(u,h)),!s&&this.#m&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#d];if(this.#L(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#m&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#d,n=this.#s[r],i=this.#i[r];return this.#b&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(i,n,"evict"),this.#m&&this.#h?.push([i,n,"evict"])),this.#F(r),e&&(this.#s[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#d=this.#f=0,this.#w.length=0):this.#d=this.#g[r],this.#c.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#c.get(e);if(o!==void 0){let s=this.#i[o];if(this.#u(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#t(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#t(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#c.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#u(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#u(o))return o;let s=new bg,{signal:l}=n;l?.addEventListener("abort",()=>s.abort(l.reason),{signal:s.signal});let u={signal:s.signal,options:n,context:i},p=(w,N=!1)=>{let{aborted:A}=s.signal,U=n.ignoreFetchAbort&&w!==void 0;if(n.status&&(A&&!N?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,U&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),A&&!U&&!N)return h(s.signal.reason);let Z=x;return this.#i[r]===x&&(w===void 0?Z.__staleWhileFetching?this.#i[r]=Z.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,w,u.options))),w},d=w=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=w),h(w)),h=w=>{let{aborted:N}=s.signal,A=N&&n.allowStaleOnFetchAbort,U=A||n.allowStaleOnFetchRejection,Z=U||n.noDeleteOnFetchRejection,ne=x;if(this.#i[r]===x&&(!Z||ne.__staleWhileFetching===void 0?this.#D(e,"fetch"):A||(this.#i[r]=ne.__staleWhileFetching)),U)return n.status&&ne.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),ne.__staleWhileFetching;if(ne.__returned===ne)throw w},g=(w,N)=>{let A=this.#a?.(e,o,u);A&&A instanceof Promise&&A.then(U=>w(U===void 0?void 0:U),N),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(w(void 0),n.allowStaleOnFetchAbort&&(w=U=>p(U,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(p,d),v=Object.assign(x,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,v,{...u.options,status:void 0}),r=this.#c.get(e)):this.#i[r]=v,v}#u(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof bg}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:u=0,sizeCalculation:p=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:v=this.allowStaleOnFetchAbort,context:w,forceRefresh:N=!1,status:A,signal:U}=r;if(!this.#b)return A&&(A.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:A});let Z={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:l,size:u,sizeCalculation:p,noUpdateTTL:d,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:v,ignoreFetchAbort:x,status:A,signal:U},ne=this.#c.get(e);if(ne===void 0){A&&(A.fetch="miss");let he=this.#U(e,ne,Z,w);return he.__returned=he}else{let he=this.#i[ne];if(this.#u(he)){let O=n&&he.__staleWhileFetching!==void 0;return A&&(A.fetch="inflight",O&&(A.returnedStale=!0)),O?he.__staleWhileFetching:he.__returned=he}let de=this.#x(ne);if(!N&&!de)return A&&(A.fetch="hit"),this.#B(ne),i&&this.#R(ne),A&&this.#t(A,ne),he;let dt=this.#U(e,ne,Z,w),nt=dt.__staleWhileFetching!==void 0&&n;return A&&(A.fetch=de?"stale":"refresh",nt&&de&&(A.returnedStale=!0)),nt?dt.__staleWhileFetching:dt.__returned=dt}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=r,l=this.get(e,s);if(!o&&l!==void 0)return l;let u=n(e,l,{options:s,context:i});return this.set(e,u,s),u}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,l=this.#c.get(e);if(l!==void 0){let u=this.#i[l],p=this.#u(u);return s&&this.#t(s,l),this.#x(l)?(s&&(s.get="stale"),p?(s&&n&&u.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?u.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),s&&n&&(s.returnedStale=!0),n?u:void 0)):(s&&(s.get="hit"),p?u.__staleWhileFetching:(this.#B(l),i&&this.#R(l),u))}else s&&(s.get="miss")}#V(e,r){this.#y[r]=e,this.#g[e]=r}#B(e){e!==this.#f&&(e===this.#d?this.#d=this.#g[e]:this.#V(this.#y[e],this.#g[e]),this.#V(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#c.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#H(r);else{this.#F(i);let o=this.#i[i];if(this.#u(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(o,e,r),this.#m&&this.#h?.push([o,e,r])),this.#c.delete(e),this.#s[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#d)this.#d=this.#g[i];else{let s=this.#y[i];this.#g[s]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#m&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#H("delete")}#H(e){for(let r of this.#P({allowStale:!0})){let n=this.#i[r];if(this.#u(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#s[r];this.#v&&this.#o?.(n,i,e),this.#m&&this.#h?.push([n,i,e])}}if(this.#c.clear(),this.#i.fill(void 0),this.#s.fill(void 0),this.#T&&this.#E&&(this.#T.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#d=0,this.#f=0,this.#w.length=0,this.#p=0,this.#l=0,this.#m&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var Ys=require("path"),a1=require("url"),KQ=pr(require("fs"),1),ei=require("fs"),vo=require("fs/promises");var Mg=require("events"),Sv=pr(require("stream"),1),t1=require("string_decoder"),YI=typeof process=="object"&&process?process:{stdout:null,stderr:null},VQ=t=>!!t&&typeof t=="object"&&(t instanceof So||t instanceof Sv.default||BQ(t)||HQ(t)),BQ=t=>!!t&&typeof t=="object"&&t instanceof Mg.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==Sv.default.Writable.prototype.pipe,HQ=t=>!!t&&typeof t=="object"&&t instanceof Mg.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Mi=Symbol("EOF"),Ai=Symbol("maybeEmitEnd"),To=Symbol("emittedEnd"),wg=Symbol("emittingEnd"),nu=Symbol("emittedError"),_g=Symbol("closed"),XI=Symbol("read"),Eg=Symbol("flush"),JI=Symbol("flushChunk"),In=Symbol("encoding"),Qs=Symbol("decoder"),kt=Symbol("flowing"),iu=Symbol("paused"),Zs=Symbol("resume"),Pt=Symbol("buffer"),ir=Symbol("pipes"),Mt=Symbol("bufferLength"),mv=Symbol("bufferPush"),Rg=Symbol("bufferShift"),jt=Symbol("objectMode"),ft=Symbol("destroyed"),hv=Symbol("error"),gv=Symbol("emitData"),e1=Symbol("emitEnd"),yv=Symbol("emitEnd2"),Xn=Symbol("async"),xv=Symbol("abort"),kg=Symbol("aborted"),ou=Symbol("signal"),pa=Symbol("dataListeners"),Hr=Symbol("discarded"),au=t=>Promise.resolve().then(t),WQ=t=>t(),$Q=t=>t==="end"||t==="finish"||t==="prefinish",qQ=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,jQ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Pg=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[Zs](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Tv=class extends Pg{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},zQ=t=>!!t.objectMode,GQ=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",So=class extends Mg.EventEmitter{[kt]=!1;[iu]=!1;[ir]=[];[Pt]=[];[jt];[In];[Xn];[Qs];[Mi]=!1;[To]=!1;[wg]=!1;[_g]=!1;[nu]=null;[Mt]=0;[ft]=!1;[ou];[kg]=!1;[pa]=0;[Hr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");zQ(r)?(this[jt]=!0,this[In]=null):GQ(r)?(this[In]=r.encoding,this[jt]=!1):(this[jt]=!1,this[In]=null),this[Xn]=!!r.async,this[Qs]=this[In]?new t1.StringDecoder(this[In]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Pt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[ir]});let{signal:n}=r;n&&(this[ou]=n,n.aborted?this[xv]():n.addEventListener("abort",()=>this[xv]()))}get bufferLength(){return this[Mt]}get encoding(){return this[In]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[jt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Xn]}set async(e){this[Xn]=this[Xn]||!!e}[xv](){this[kg]=!0,this.emit("abort",this[ou]?.reason),this.destroy(this[ou]?.reason)}get aborted(){return this[kg]}set aborted(e){}write(e,r,n){if(this[kg])return!1;if(this[Mi])throw new Error("write after end");if(this[ft])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[Xn]?au:WQ;if(!this[jt]&&!Buffer.isBuffer(e)){if(jQ(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(qQ(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[jt]?(this[kt]&&this[Mt]!==0&&this[Eg](!0),this[kt]?this.emit("data",e):this[mv](e),this[Mt]!==0&&this.emit("readable"),n&&i(n),this[kt]):e.length?(typeof e=="string"&&!(r===this[In]&&!this[Qs]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[In]&&(e=this[Qs].write(e)),this[kt]&&this[Mt]!==0&&this[Eg](!0),this[kt]?this.emit("data",e):this[mv](e),this[Mt]!==0&&this.emit("readable"),n&&i(n),this[kt]):(this[Mt]!==0&&this.emit("readable"),n&&i(n),this[kt])}read(e){if(this[ft])return null;if(this[Hr]=!1,this[Mt]===0||e===0||e&&e>this[Mt])return this[Ai](),null;this[jt]&&(e=null),this[Pt].length>1&&!this[jt]&&(this[Pt]=[this[In]?this[Pt].join(""):Buffer.concat(this[Pt],this[Mt])]);let r=this[XI](e||null,this[Pt][0]);return this[Ai](),r}[XI](e,r){if(this[jt])this[Rg]();else{let n=r;e===n.length||e===null?this[Rg]():typeof n=="string"?(this[Pt][0]=n.slice(e),r=n.slice(0,e),this[Mt]-=e):(this[Pt][0]=n.subarray(e),r=n.subarray(0,e),this[Mt]-=e)}return this.emit("data",r),!this[Pt].length&&!this[Mi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Mi]=!0,this.writable=!1,(this[kt]||!this[iu])&&this[Ai](),this}[Zs](){this[ft]||(!this[pa]&&!this[ir].length&&(this[Hr]=!0),this[iu]=!1,this[kt]=!0,this.emit("resume"),this[Pt].length?this[Eg]():this[Mi]?this[Ai]():this.emit("drain"))}resume(){return this[Zs]()}pause(){this[kt]=!1,this[iu]=!0,this[Hr]=!1}get destroyed(){return this[ft]}get flowing(){return this[kt]}get paused(){return this[iu]}[mv](e){this[jt]?this[Mt]+=1:this[Mt]+=e.length,this[Pt].push(e)}[Rg](){return this[jt]?this[Mt]-=1:this[Mt]-=this[Pt][0].length,this[Pt].shift()}[Eg](e=!1){do;while(this[JI](this[Rg]())&&this[Pt].length);!e&&!this[Pt].length&&!this[Mi]&&this.emit("drain")}[JI](e){return this.emit("data",e),this[kt]}pipe(e,r){if(this[ft])return e;this[Hr]=!1;let n=this[To];return r=r||{},e===YI.stdout||e===YI.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[ir].push(r.proxyErrors?new Tv(this,e,r):new Pg(this,e,r)),this[Xn]?au(()=>this[Zs]()):this[Zs]()),e}unpipe(e){let r=this[ir].find(n=>n.dest===e);r&&(this[ir].length===1?(this[kt]&&this[pa]===0&&(this[kt]=!1),this[ir]=[]):this[ir].splice(this[ir].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Hr]=!1,this[pa]++,!this[ir].length&&!this[kt]&&this[Zs]();else if(e==="readable"&&this[Mt]!==0)super.emit("readable");else if($Q(e)&&this[To])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[nu]){let i=r;this[Xn]?au(()=>i.call(this,this[nu])):i.call(this,this[nu])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[pa]=this.listeners("data").length,this[pa]===0&&!this[Hr]&&!this[ir].length&&(this[kt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[pa]=0,!this[Hr]&&!this[ir].length&&(this[kt]=!1)),r}get emittedEnd(){return this[To]}[Ai](){!this[wg]&&!this[To]&&!this[ft]&&this[Pt].length===0&&this[Mi]&&(this[wg]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[_g]&&this.emit("close"),this[wg]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==ft&&this[ft])return!1;if(e==="data")return!this[jt]&&!n?!1:this[Xn]?(au(()=>this[gv](n)),!0):this[gv](n);if(e==="end")return this[e1]();if(e==="close"){if(this[_g]=!0,!this[To]&&!this[ft])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[nu]=n,super.emit(hv,n);let o=!this[ou]||this.listeners("error").length?super.emit("error",n):!1;return this[Ai](),o}else if(e==="resume"){let o=super.emit("resume");return this[Ai](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Ai](),i}[gv](e){for(let n of this[ir])n.dest.write(e)===!1&&this.pause();let r=this[Hr]?!1:super.emit("data",e);return this[Ai](),r}[e1](){return this[To]?!1:(this[To]=!0,this.readable=!1,this[Xn]?(au(()=>this[yv]()),!0):this[yv]())}[yv](){if(this[Qs]){let r=this[Qs].end();if(r){for(let n of this[ir])n.dest.write(r);this[Hr]||super.emit("data",r)}}for(let r of this[ir])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[jt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[jt]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[jt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[In]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(ft,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Hr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Mi])return r();let o,s,l=h=>{this.off("data",u),this.off("end",p),this.off(ft,d),r(),s(h)},u=h=>{this.off("error",l),this.off("end",p),this.off(ft,d),this.pause(),o({value:h,done:!!this[Mi]})},p=()=>{this.off("error",l),this.off("data",u),this.off(ft,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((h,g)=>{s=g,o=h,this.once(ft,d),this.once("error",l),this.once("end",p),this.once("data",u)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Hr]=!1;let e=!1,r=()=>(this.pause(),this.off(hv,r),this.off(ft,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(hv,r),this.once(ft,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[ft])return e?this.emit("error",e):this.emit(ft),this;this[ft]=!0,this[Hr]=!0,this[Pt].length=0,this[Mt]=0;let r=this;return typeof r.close=="function"&&!this[_g]&&r.close(),e?this.emit("error",e):this.emit(ft),this}static get isStream(){return VQ}};var QQ=ei.realpathSync.native,cu={lstatSync:ei.lstatSync,readdir:ei.readdir,readdirSync:ei.readdirSync,readlinkSync:ei.readlinkSync,realpathSync:QQ,promises:{lstat:vo.lstat,readdir:vo.readdir,readlink:vo.readlink,realpath:vo.realpath}},s1=t=>!t||t===cu||t===KQ?cu:{...cu,...t,promises:{...cu.promises,...t.promises||{}}},c1=/^\\\\\?\\([a-z]:)\\?$/i,ZQ=t=>t.replace(/\//g,"\\").replace(c1,"$1\\"),YQ=/[\\\/]/,fn=0,l1=1,u1=2,Jn=4,p1=6,f1=8,fa=10,d1=12,pn=15,su=~pn,vv=16,r1=32,lu=64,Fn=128,Ag=256,Ig=512,n1=lu|Fn|Ig,XQ=1023,bv=t=>t.isFile()?f1:t.isDirectory()?Jn:t.isSymbolicLink()?fa:t.isCharacterDevice()?u1:t.isBlockDevice()?p1:t.isSocket()?d1:t.isFIFO()?l1:fn,i1=new Map,uu=t=>{let e=i1.get(t);if(e)return e;let r=t.normalize("NFKD");return i1.set(t,r),r},o1=new Map,Dg=t=>{let e=o1.get(t);if(e)return e;let r=uu(t.toLowerCase());return o1.set(t,r),r},Fg=class extends ru{constructor(){super({max:256})}},wv=class extends ru{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},m1=Symbol("PathScurry setAsCwd"),zt=class{name;root;roots;parent;nocase;#e;#r;get dev(){return this.#r}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#p;get blksize(){return this.#p}#c;get ino(){return this.#c}#s;get size(){return this.#s}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#T;#v;#b;#m;#M;#R;#t;#I;#x;#A;get path(){return(this.parent||this).fullpath()}constructor(e,r=fn,n,i,o,s,l){this.name=e,this.#T=o?Dg(e):uu(e),this.#t=r&XQ,this.nocase=o,this.roots=i,this.root=n||this,this.#I=s,this.#b=l.fullpath,this.#M=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=s1(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#I}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#I.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#I.set(this,r),this.#t&=~vv,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Dg(e):uu(e);for(let u of n)if(u.#T===i)return u;let o=this.parent?this.sep:"",s=this.#b?this.#b+o+e:void 0,l=this.newChild(e,fn,{...r,parent:this,fullpath:s});return this.canReaddir()||(l.#t|=Fn),n.push(l),l}relative(){if(this.#M!==void 0)return this.#M;let e=this.name,r=this.parent;if(!r)return this.#M=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#m!==void 0)return this.#m;if(this.sep==="/")return this.#m=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#m=`//?/${i}`:this.#m=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#m=n}isUnknown(){return(this.#t&pn)===fn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#t&pn)===f1}isDirectory(){return(this.#t&pn)===Jn}isCharacterDevice(){return(this.#t&pn)===u1}isBlockDevice(){return(this.#t&pn)===p1}isFIFO(){return(this.#t&pn)===l1}isSocket(){return(this.#t&pn)===d1}isSymbolicLink(){return(this.#t&fa)===fa}lstatCached(){return this.#t&r1?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#A}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#t&pn;return!(e!==fn&&e!==fa||this.#t&Ag||this.#t&Fn)}calledReaddir(){return!!(this.#t&vv)}isENOENT(){return!!(this.#t&Fn)}isNamed(e){return this.nocase?this.#T===Dg(e):this.#T===uu(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=this.parent.resolve(r);if(n)return this.#x=n}catch(r){this.#u(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.resolve(r);if(n)return this.#x=n}catch(r){this.#u(r.code);return}}#C(e){this.#t|=vv;for(let r=e.provisional;r<e.length;r++)e[r].#N()}#N(){this.#t&Fn||(this.#t=(this.#t|Fn)&su,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#N()}#P(){this.#t|=Ig,this.#O()}#O(){if(this.#t&lu)return;let e=this.#t;(e&pn)===Jn&&(e&=su),this.#t=e|lu,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#O():e==="ENOENT"?this.#N():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#O():e==="ENOENT"&&this.#N()}#u(e=""){let r=this.#t;r|=Ag,e==="ENOENT"&&(r|=Fn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=su),this.#t=r,e==="ENOTDIR"&&this.parent&&this.parent.#O()}#V(e,r){return this.#D(e,r)||this.#B(e,r)}#B(e,r){let n=bv(e),i=this.newChild(e.name,n,{parent:this}),o=i.#t&pn;return o!==Jn&&o!==fa&&o!==fn&&(i.#t|=lu),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Dg(e.name):uu(e.name))===i.#T)return this.#H(e,i,n,r)}}#H(e,r,n,i){let o=r.name;return r.#t=r.#t&su|bv(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if(!(this.#t&Fn))try{return this.#j(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if(!(this.#t&Fn))try{return this.#j(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#j(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:s,blocks:l,ctime:u,ctimeMs:p,dev:d,gid:h,ino:g,mode:x,mtime:v,mtimeMs:w,nlink:N,rdev:A,size:U,uid:Z}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#p=s,this.#i=l,this.#_=u,this.#d=p,this.#r=d,this.#S=h,this.#c=g,this.#o=x,this.#h=v,this.#y=w,this.#n=N,this.#l=A,this.#s=U,this.#a=Z;let ne=bv(e);this.#t=this.#t&su|ne|r1,ne!==fn&&ne!==Jn&&ne!==fa&&(this.#t|=lu)}#$=[];#q=!1;#z(e){this.#q=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#q)return;this.#q=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,s)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of s)this.#V(l,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#V(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#V(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#t&n1)return!1;let e=pn&this.#t;return e===fn||e===Jn||e===fa}shouldWalk(e,r){return(this.#t&Jn)===Jn&&!(this.#t&n1)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#A)return this.#A;if(!((Ig|Ag|Fn)&this.#t))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}realpathSync(){if(this.#A)return this.#A;if(!((Ig|Ag|Fn)&this.#t))try{let e=this.#e.realpathSync(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}[m1](e){if(e===this)return;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#M=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#M=void 0,i.#R=void 0,i=i.parent}},Cg=class t extends zt{sep="\\";splitSep=YQ;constructor(e,r=fn,n,i,o,s,l){super(e,r,n,i,o,s,l)}newChild(e,r=fn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return Ys.win32.parse(e).root}getRoot(e){if(e=ZQ(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new Xs(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(c1,"$1\\"),e===r}},Ng=class t extends zt{splitSep="/";sep="/";constructor(e,r=fn,n,i,o,s,l){super(e,r,n,i,o,s,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=fn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},Og=class{root;rootPath;roots;cwd;#e;#r;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:s=cu}={}){this.#n=s1(s),(e instanceof URL||e.startsWith("file://"))&&(e=(0,a1.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new Fg,this.#r=new Fg,this.#o=new wv(o);let u=l.substring(this.rootPath.length).split(n);if(u.length===1&&!u[0]&&u.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let p=this.root,d=u.length-1,h=r.sep,g=this.rootPath,x=!1;for(let v of u){let w=d--;p=p.child(v,{relative:new Array(w).fill("..").join(h),relativePosix:new Array(w).fill("..").join("/"),fullpath:g+=(x?"":h)+v}),x=!0}this.cwd=p}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#r.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#r.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set,p=(h,g)=>{u.add(h),h.readdirCB((x,v)=>{if(x)return g(x);let w=v.length;if(!w)return g();let N=()=>{--w===0&&g()};for(let A of v)(!o||o(A))&&l.push(n?A:A.fullpath()),i&&A.isSymbolicLink()?A.realpath().then(U=>U?.isUnknown()?U.lstat():U).then(U=>U?.shouldWalk(u,s)?p(U,N):N()):A.shouldWalk(u,s)?p(A,N):N()},!0)},d=e;return new Promise((h,g)=>{p(d,x=>{if(x)return g(x);h(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set([e]);for(let p of u){let d=p.readdirSync();for(let h of d){(!o||o(h))&&l.push(n?h:h.fullpath());let g=h;if(h.isSymbolicLink()){if(!(i&&(g=h.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(u,s)&&u.add(g)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let u of l){let p=u.readdirSync();for(let d of p){(!o||o(d))&&(yield n?d:d.fullpath());let h=d;if(d.isSymbolicLink()){if(!(i&&(h=d.realpathSync())))continue;h.isUnknown()&&h.lstatSync()}h.shouldWalk(l,s)&&l.add(h)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new So({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let u=new Set,p=[e],d=0,h=()=>{let g=!1;for(;!g;){let x=p.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let v=(N,A,U=!1)=>{if(N)return l.emit("error",N);if(i&&!U){let Z=[];for(let ne of A)ne.isSymbolicLink()&&Z.push(ne.realpath().then(he=>he?.isUnknown()?he.lstat():he));if(Z.length){Promise.all(Z).then(()=>v(null,A,!0));return}}for(let Z of A)Z&&(!o||o(Z))&&(l.write(n?Z:Z.fullpath())||(g=!0));d--;for(let Z of A){let ne=Z.realpathCached()||Z;ne.shouldWalk(u,s)&&p.push(ne)}g&&!l.flowing?l.once("drain",h):w||h()},w=!0;x.readdirCB(v,!0),w=!1}};return h(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new So({objectMode:!0}),u=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let p=[e],d=0,h=()=>{let g=!1;for(;!g;){let x=p.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let v=x.readdirSync();for(let w of v)(!o||o(w))&&(l.write(n?w:w.fullpath())||(g=!0));d--;for(let w of v){let N=w;if(w.isSymbolicLink()){if(!(i&&(N=w.realpathSync())))continue;N.isUnknown()&&N.lstatSync()}N.shouldWalk(u,s)&&p.push(N)}}g&&!l.flowing&&l.once("drain",h)};return h(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[m1](r)}},Xs=class extends Og{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,Ys.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return Ys.win32.parse(e).root.toUpperCase()}newRoot(e){return new Cg(this.rootPath,Jn,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},Js=class extends Og{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,Ys.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Ng(this.rootPath,Jn,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},pu=class extends Js{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},N2e=process.platform==="win32"?Cg:Ng,h1=process.platform==="win32"?Xs:process.platform==="darwin"?pu:Js;var g1=require("url");var JQ=t=>t.length>=1,eZ=t=>t.length>=1,ec=class t{#e;#r;#o;length;#n;#a;#S;#l;#p;#c;#s=!0;constructor(e,r,n,i){if(!JQ(e))throw new TypeError("empty pattern list");if(!eZ(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#r=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,s,l,u,...p]=this.#e,[d,h,g,x,...v]=this.#r;p[0]===""&&(p.shift(),v.shift());let w=[o,s,l,u,""].join("/"),N=[d,h,g,x,""].join("/");this.#e=[w,...p],this.#r=[N,...v],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...s]=this.#e,[l,...u]=this.#r;s[0]===""&&(s.shift(),u.shift());let p=o+"/",d=l+"/";this.#e=[p,...s],this.#r=[d,...u],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Ot}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#r[0]+this.#r.slice(1).join("/"):this.#r.join("/"):this.#r.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new t(this.#e,this.#r,this.#o+1,this.#n),this.#a.#c=this.#c,this.#a.#p=this.#p,this.#a.#l=this.#l,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#p!==void 0?this.#p:this.#p=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#c!==void 0?this.#c:this.#c=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#s)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#s?!1:(this.#s=!1,!0)}};var tZ=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",fu=class{relative;relativeChildren;absolute;absoluteChildren;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:s=tZ}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[];let l={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(let u of e){let p=new Br(u,l);for(let d=0;d<p.set.length;d++){let h=p.set[d],g=p.globParts[d];if(!h||!g)throw new Error("invalid pattern object");let x=new ec(h,g,0,s),v=new Br(x.globString(),l),w=g[g.length-1]==="**",N=x.isAbsolute();N?this.absolute.push(v):this.relative.push(v),w&&(N?this.absoluteChildren.push(v):this.relativeChildren.push(v))}}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let s of this.relative)if(s.match(i)||s.match(o))return!0;for(let s of this.absolute)if(s.match(r)||s.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var _v=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},Ev=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},Rv=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},du=class t{hasWalkedCache;matches=new Ev;subwalks=new Rv;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new _v}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let s=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(s){i=i.resolve(s==="/"&&this.opts.root!==void 0?this.opts.root:s);let h=o.rest();if(h)o=h;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let u,p,d=!1;for(;typeof(u=o.pattern())=="string"&&(p=o.rest());)i=i.resolve(u),o=p,d=!0;if(u=o.pattern(),p=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof u=="string"){let h=u===".."||u===""||u===".";this.matches.add(i.resolve(u),l,h);continue}else if(u===Ot){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let h=p?.pattern(),g=p?.rest();if(!p||(h===""||h===".")&&!g)this.matches.add(i,l,h===""||h===".");else if(h===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,l,!0)}}else u instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let s of n){let l=s.isAbsolute(),u=s.pattern(),p=s.rest();u===Ot?i.testGlobstar(o,s,p,l):u instanceof RegExp?i.testRegExp(o,u,p,l):i.testString(o,u,p,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let s=e.parent||e;this.subwalks.add(s,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var rZ=(t,e)=>typeof t=="string"?new fu([t],e):Array.isArray(t)?new fu(t,e):t,Lg=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#r;#o;signal;maxDepth;constructor(e,r,n){this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",n.ignore&&(this.#r=rZ(n.ignore,n)),this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#r?.ignored?.(e)}#a(e){return!!this.#r?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat;return this.matchCheckTest(i?await e.lstat():e,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat;return this.matchCheckTest(i?e.lstatSync():e,r)}matchFinish(e,r){if(this.#n(e))return;let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),s=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?s+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new du(this.opts),n)}walkCB2(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,p]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,p).then(()=>s()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirCached();l.calledReaddir()?this.walkCB3(l,u,n,s):l.readdirCB((p,d)=>this.walkCB3(l,d,n,s),!0)}s()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,p]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,p).then(()=>s()));for(let[l,u]of n.subwalks.entries())o++,this.walkCB2(l,u,n.child(),s);s()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new du(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,p]of n.matches.entries())this.#n(l)||this.matchSync(l,u,p);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirSync();this.walkCB3Sync(l,u,n,s)}s()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,p]of n.matches.entries())this.#n(l)||this.matchSync(l,u,p);for(let[l,u]of n.subwalks.entries())o++,this.walkCB2Sync(l,u,n.child(),s);s()}},mu=class extends Lg{matches;constructor(e,r,n){super(e,r,n),this.matches=new Set}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},hu=class extends Lg{results;constructor(e,r,n){super(e,r,n),this.results=new So({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var nZ=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Cn=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,g1.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(u=>u.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(u=>u.includes("/")?u:`./**/${u}`)}if(this.pattern=e,this.platform=r.platform||nZ,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let u=r.platform==="win32"?Xs:r.platform==="darwin"?pu:r.platform?Js:h1;this.scurry=new u(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(u=>new Br(u,i)),[s,l]=o.reduce((u,p)=>(u[0].push(...p.set),u[1].push(...p.globParts),u),[[],[]]);this.patterns=s.map((u,p)=>{let d=l[p];if(!d)throw new Error("invalid pattern object");return new ec(u,d,0,this.platform)})}async walk(){return[...await new mu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new mu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new hu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new hu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var kv=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Br(r,e).hasMagic())return!0;return!1};function Ug(t,e={}){return new Cn(t,e).streamSync()}function x1(t,e={}){return new Cn(t,e).stream()}function T1(t,e={}){return new Cn(t,e).walkSync()}async function y1(t,e={}){return new Cn(t,e).walk()}function Vg(t,e={}){return new Cn(t,e).iterateSync()}function S1(t,e={}){return new Cn(t,e).iterate()}var iZ=Ug,oZ=Object.assign(x1,{sync:Ug}),aZ=Vg,sZ=Object.assign(S1,{sync:Vg}),cZ=Object.assign(T1,{stream:Ug,iterate:Vg}),Pv=Object.assign(y1,{glob:y1,globSync:T1,sync:cZ,globStream:x1,stream:oZ,globStreamSync:Ug,streamSync:iZ,globIterate:S1,iterate:sZ,globIterateSync:Vg,iterateSync:aZ,Glob:Cn,hasMagic:kv,escape:zs,unescape:Dn});Pv.glob=Pv;function v1(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var D1=Object.defineProperty,pZ=Object.getOwnPropertyNames,F=(t,e)=>D1(t,"name",{value:e,configurable:!0}),fZ=(t,e)=>function(){return e||(0,t[pZ(t)[0]])((e={exports:{}}).exports,e),e.exports},jv=(t,e)=>{for(var r in e)D1(t,r,{get:e[r],enumerable:!0})},dZ=fZ({"(disabled):util"(){}}),Bg={};jv(Bg,{addChainableMethod:()=>nb,addLengthGuard:()=>Su,addMethod:()=>eb,addProperty:()=>Jv,checkError:()=>Wr,compareByInspect:()=>qg,eql:()=>nF,expectTypes:()=>U1,flag:()=>_e,getActual:()=>Gg,getMessage:()=>Kv,getName:()=>Qg,getOperator:()=>sb,getOwnEnumerableProperties:()=>ab,getOwnEnumerablePropertySymbols:()=>ob,getPathInfo:()=>Xv,hasProperty:()=>Kg,inspect:()=>Ce,isNaN:()=>jg,isProxyEnabled:()=>Tu,objDisplay:()=>da,overwriteChainableMethod:()=>ib,overwriteMethod:()=>rb,overwriteProperty:()=>tb,proxify:()=>ic,test:()=>zv,transferFlags:()=>Nn,type:()=>Qe});var Wr={};jv(Wr,{compatibleConstructor:()=>F1,compatibleInstance:()=>I1,compatibleMessage:()=>C1,getConstructorName:()=>N1,getMessage:()=>O1});function I1(t,e){return e instanceof Error&&t===e}F(I1,"compatibleInstance");function F1(t,e){return e instanceof Error?t.constructor===e.constructor||t instanceof e.constructor:e.prototype instanceof Error||e===Error?t.constructor===e||t instanceof e:!1}F(F1,"compatibleConstructor");function C1(t,e){let r=typeof t=="string"?t:t.message;return e instanceof RegExp?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}F(C1,"compatibleMessage");function N1(t){let e=t;return t instanceof Error?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}F(N1,"getConstructorName");function O1(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}F(O1,"getMessage");function _e(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}F(_e,"flag");function zv(t,e){var r=_e(t,"negate"),n=e[0];return r?!n:n}F(zv,"test");function Qe(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}F(Qe,"type");var mZ="captureStackTrace"in Error,je=class L1 extends Error{static{F(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,mZ&&Error.captureStackTrace(this,n||L1);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function U1(t,e){var r=_e(t,"message"),n=_e(t,"ssfi");r=r?r+": ":"",t=_e(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();var i=e.map(function(s,l){var u=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a",p=e.length>1&&l===e.length-1?"or ":"";return p+u+" "+s}).join(", "),o=Qe(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new je(r+"object tested must be "+i+", but "+o+" given",void 0,n)}F(U1,"expectTypes");function Gg(t,e){return e.length>4?e[4]:t._obj}F(Gg,"getActual");var b1={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},hZ={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},rc="\u2026";function V1(t,e){let r=b1[hZ[e]]||b1[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}F(V1,"colorise");function B1({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:l=[],truncate:u=1/0,stylize:p=String}={},d){let h={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(u),seen:l,inspect:d,stylize:p};return h.colors&&(h.stylize=V1),h}F(B1,"normaliseOptions");function Di(t,e,r=rc){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}F(Di,"truncate");function dn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",l="",u="";for(let p=0;p<i;p+=1){let d=p+1===t.length,h=p+2===t.length;u=`${rc}(${t.length-p})`;let g=t[p];e.truncate=o-s.length-(d?0:n.length);let x=l||r(g,e)+(d?"":n),v=s.length+x.length,w=v+u.length;if(d&&v>o&&s.length+u.length<=o||!d&&!h&&w>o||(l=d?"":r(t[p+1],e)+(h?"":n),!d&&h&&w>o&&v+l.length>o))break;if(s+=x,!d&&!h&&v+l.length>=o){u=`${rc}(${t.length-p-1})`;break}u=""}return`${s}${u}`}F(dn,"inspectList");function H1(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}F(H1,"quoteComplexKey");function nc([t,e],r){return r.truncate-=2,typeof t=="string"?t=H1(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}F(nc,"inspectProperty");function W1(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=dn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=dn(r.map(o=>[o,t[o]]),e,nc)),`[ ${n}${i?`, ${i}`:""} ]`}F(W1,"inspectArray");var gZ=F(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function ti(t,e){let r=gZ(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let s=0;s<t.length;s++){let l=`${e.stylize(Di(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=l.length,t[s]!==t.length&&e.truncate<=3){i+=`${rc}(${t.length-t[s]+1})`;break}i+=l}let o="";return n.length&&(o=dn(n.map(s=>[s,t[s]]),e,nc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}F(ti,"inspectTypedArray");function $1(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Di(n[1],e.truncate-i.length-1)}`,"date")}F($1,"inspectDate");function Dv(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Di(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}F(Dv,"inspectFunction");function q1([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}F(q1,"inspectMapEntry");function j1(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}F(j1,"mapToEntries");function z1(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${dn(j1(t),e,q1)} }`)}F(z1,"inspectMap");var yZ=Number.isNaN||(t=>t!==t);function Iv(t,e){return yZ(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Di(String(t),e.truncate),"number")}F(Iv,"inspectNumber");function Fv(t,e){let r=Di(t.toString(),e.truncate-1);return r!==rc&&(r+="n"),e.stylize(r,"bigint")}F(Fv,"inspectBigInt");function G1(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Di(i,n)}/${r}`,"regexp")}F(G1,"inspectRegExp");function K1(t){let e=[];return t.forEach(r=>{e.push(r)}),e}F(K1,"arrayFromSet");function Q1(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${dn(K1(t),e)} }`)}F(Q1,"inspectSet");var w1=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),xZ={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},TZ=16,SZ=4;function Z1(t){return xZ[t]||`\\u${`0000${t.charCodeAt(0).toString(TZ)}`.slice(-SZ)}`}F(Z1,"escape");function Cv(t,e){return w1.test(t)&&(t=t.replace(w1,Z1)),e.stylize(`'${Di(t,e.truncate-2)}'`,"string")}F(Cv,"inspectString");function Nv(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}F(Nv,"inspectSymbol");var Y1=F(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(Y1=F((n,i)=>{let[o,s]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(s,i)}}`},"getPromiseValue"))}catch{}var vZ=Y1;function yu(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=dn(r.map(l=>[l,t[l]]),e,nc),o=dn(n.map(l=>[l,t[l]]),e,nc);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}F(yu,"inspectObject");var Mv=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function X1(t,e){let r="";return Mv&&Mv in t&&(r=t[Mv]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${yu(t,e)}`}F(X1,"inspectClass");function J1(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${dn(t,e)} ]`)}F(J1,"inspectArguments");var bZ=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function eF(t,e){let r=Object.getOwnPropertyNames(t).filter(s=>bZ.indexOf(s)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=Di(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=dn(r.map(s=>[s,t[s]]),e,nc);return`${n}${i}${o?` { ${o} }`:""}`}F(eF,"inspectObject");function tF([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}F(tF,"inspectAttribute");function Hg(t,e){return dn(t,e,Gv,`
`)}F(Hg,"inspectHTMLCollection");function Gv(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=dn(r.map(d=>[d,t.getAttribute(d)]),e,tF," ")),e.truncate-=l.length;let u=e.truncate,p=Hg(t.children,e);return p&&p.length>u&&(p=`${rc}(${t.children.length})`),`${i}${l}${o}${p}${s}`}F(Gv,"inspectHTML");var wZ=typeof Symbol=="function"&&typeof Symbol.for=="function",Av=wZ?Symbol.for("chai/inspect"):"@@chai/inspect",tc=!1;try{let t=dZ();tc=t.inspect?t.inspect.custom:!1}catch{tc=!1}var _1=new WeakMap,E1={},R1={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:Iv,Number:Iv,bigint:Fv,BigInt:Fv,string:Cv,String:Cv,function:Dv,Function:Dv,symbol:Nv,Symbol:Nv,Array:W1,Date:$1,Map:z1,Set:Q1,RegExp:G1,Promise:vZ,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:J1,Int8Array:ti,Uint8Array:ti,Uint8ClampedArray:ti,Int16Array:ti,Uint16Array:ti,Int32Array:ti,Uint32Array:ti,Float32Array:ti,Float64Array:ti,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:eF,HTMLCollection:Hg,NodeList:Hg},_Z=F((t,e,r)=>Av in t&&typeof t[Av]=="function"?t[Av](e):tc&&tc in t&&typeof t[tc]=="function"?t[tc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&_1.has(t.constructor)?_1.get(t.constructor)(t,e):E1[r]?E1[r](t,e):"","inspectCustom"),EZ=Object.prototype.toString;function Wg(t,e={}){let r=B1(e,Wg),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=EZ.call(t).slice(8,-1)),i in R1)return R1[i](t,r);if(n&&t){let s=_Z(t,r,i);if(s)return typeof s=="string"?s:Wg(s,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?yu(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?Gv(t,r):"constructor"in t?t.constructor!==Object?X1(t,r):yu(t,r):t===Object(t)?yu(t,r):r.stylize(String(t),i)}F(Wg,"inspect");var br={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Ce(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:br.truncateThreshold?br.truncateThreshold:1/0};return Wg(t,i)}F(Ce,"inspect");function da(t){var e=Ce(t),r=Object.prototype.toString.call(t);if(br.truncateThreshold&&e.length>=br.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}F(da,"objDisplay");function Kv(t,e){var r=_e(t,"negate"),n=_e(t,"object"),i=e[3],o=Gg(t,e),s=r?e[2]:e[1],l=_e(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return da(n)}).replace(/#\{act\}/g,function(){return da(o)}).replace(/#\{exp\}/g,function(){return da(i)}),l?l+": "+s:s}F(Kv,"getMessage");function Nn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}F(Nn,"transferFlags");function Ov(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}F(Ov,"type");function Qv(){this._key="chai/deep-eql__"+Math.random()+Date.now()}F(Qv,"FakeMap");Qv.prototype={get:F(function(e){return e[this._key]},"get"),set:F(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var rF=typeof WeakMap=="function"?WeakMap:Qv;function Lv(t,e,r){if(!r||ma(t)||ma(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}F(Lv,"memoizeCompare");function gu(t,e,r,n){if(!(!r||ma(t)||ma(e))){var i=r.get(t);i?i.set(e,n):(i=new rF,i.set(e,n),r.set(t,i))}}F(gu,"memoizeSet");var nF=xu;function xu(t,e,r){if(r&&r.comparator)return Uv(t,e,r);var n=Zv(t,e);return n!==null?n:Uv(t,e,r)}F(xu,"deepEqual");function Zv(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:ma(t)||ma(e)?!1:null}F(Zv,"simpleEqual");function Uv(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new rF;var n=r&&r.comparator,i=Lv(t,e,r.memoize);if(i!==null)return i;var o=Lv(e,t,r.memoize);if(o!==null)return o;if(n){var s=n(t,e);if(s===!1||s===!0)return gu(t,e,r.memoize,s),s;var l=Zv(t,e);if(l!==null)return l}var u=Ov(t);if(u!==Ov(e))return gu(t,e,r.memoize,!1),!1;gu(t,e,r.memoize,!0);var p=iF(t,e,u,r);return gu(t,e,r.memoize,p),p}F(Uv,"extensiveDeepEqual");function iF(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return xu(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return Yv(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return bo(t,e,n);case"RegExp":return oF(t,e);case"Generator":return aF(t,e,n);case"DataView":return bo(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return bo(new Uint8Array(t),new Uint8Array(e),n);case"Set":return Vv(t,e,n);case"Map":return Vv(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return cF(t,e,n)}}F(iF,"extensiveDeepEqualByType");function oF(t,e){return t.toString()===e.toString()}F(oF,"regexpEqual");function Vv(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(F(function(s,l){n.push([s,l])},"gatherEntries")),e.forEach(F(function(s,l){i.push([s,l])},"gatherEntries")),bo(n.sort(),i.sort(),r)}F(Vv,"entriesEqual");function bo(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(xu(t[i],e[i],r)===!1)return!1;return!0}F(bo,"iterableEqual");function aF(t,e,r){return bo($g(t),$g(e),r)}F(aF,"generatorEqual");function sF(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}F(sF,"hasIteratorFunction");function Bv(t){if(sF(t))try{return $g(t[Symbol.iterator]())}catch{return[]}return[]}F(Bv,"getIteratorEntries");function $g(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}F($g,"getGeneratorEntries");function Hv(t){var e=[];for(var r in t)e.push(r);return e}F(Hv,"getEnumerableKeys");function Wv(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}F(Wv,"getEnumerableSymbols");function Yv(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(xu(t[r[o]],e[r[o]],n)===!1)return!1;return!0}F(Yv,"keysEqual");function cF(t,e,r){var n=Hv(t),i=Hv(e),o=Wv(t),s=Wv(e);if(n=n.concat(o),i=i.concat(s),n.length&&n.length===i.length)return bo($v(n).sort(),$v(i).sort())===!1?!1:Yv(t,e,n,r);var l=Bv(t),u=Bv(e);return l.length&&l.length===u.length?(l.sort(),u.sort(),bo(l,u,r)):n.length===0&&l.length===0&&i.length===0&&u.length===0}F(cF,"objectEqual");function ma(t){return t===null||typeof t!="object"}F(ma,"isPrimitive");function $v(t){return t.map(F(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}F($v,"mapSymbols");function Kg(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}F(Kg,"hasProperty");function lF(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),s=null;return o?s={i:parseFloat(o[1])}:s={p:n.replace(/\\([.[\]])/g,"$1")},s})}F(lF,"parsePath");function qv(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let s=e[o];n&&(typeof s.p>"u"?n=n[s.i]:n=n[s.p],o===r-1&&(i=n))}return i}F(qv,"internalGetPathValue");function Xv(t,e){let r=lF(e),n=r[r.length-1],i={parent:r.length>1?qv(t,r,r.length-1):t,name:n.p||n.i,value:qv(t,r)};return i.exists=Kg(i.parent,i.name),i}F(Xv,"getPathInfo");function _(t,e,r,n){return _e(this,"ssfi",r||_),_e(this,"lockSsfi",n),_e(this,"object",t),_e(this,"message",e),_e(this,"eql",br.deepEqual||nF),ic(this)}F(_,"Assertion");Object.defineProperty(_,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),br.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),br.includeStack=t}});Object.defineProperty(_,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),br.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),br.showDiff=t}});_.addProperty=function(t,e){Jv(this.prototype,t,e)};_.addMethod=function(t,e){eb(this.prototype,t,e)};_.addChainableMethod=function(t,e,r){nb(this.prototype,t,e,r)};_.overwriteProperty=function(t,e){tb(this.prototype,t,e)};_.overwriteMethod=function(t,e){rb(this.prototype,t,e)};_.overwriteChainableMethod=function(t,e,r){ib(this.prototype,t,e,r)};_.prototype.assert=function(t,e,r,n,i,o){var s=zv(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),br.showDiff!==!0&&(o=!1),!s){e=Kv(this,arguments);var l=Gg(this,arguments),u={actual:l,expected:n,showDiff:o},p=sb(this,arguments);throw p&&(u.operator=p),new je(e,u,br.includeStack?this.assert:_e(this,"ssfi"))}};Object.defineProperty(_.prototype,"_obj",{get:function(){return _e(this,"object")},set:function(t){_e(this,"object",t)}});function Tu(){return br.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}F(Tu,"isProxyEnabled");function Jv(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:F(function n(){!Tu()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new _;return Nn(this,o),o},"propertyGetter"),configurable:!0})}F(Jv,"addProperty");var RZ=Object.getOwnPropertyDescriptor(function(){},"length");function Su(t,e,r){return RZ.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}F(Su,"addLengthGuard");function uF(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}F(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}F(uF,"getProperties");var k1=["__flags","__methods","_obj","assert"];function ic(t,e){return Tu()?new Proxy(t,{get:F(function r(n,i){if(typeof i=="string"&&br.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,s=4;throw uF(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&k1.indexOf(l)===-1){var u=pF(i,l,s);u<s&&(o=l,s=u)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return k1.indexOf(i)===-1&&!_e(n,"lockSsfi")&&_e(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}F(ic,"proxify");function pF(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var s=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(s===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}F(pF,"stringDistanceCapped");function eb(t,e,r){var n=F(function(){_e(this,"lockSsfi")||_e(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new _;return Nn(this,o),o},"methodWrapper");Su(n,e,!1),t[e]=ic(n,e)}F(eb,"addMethod");function tb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=F(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:F(function o(){!Tu()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",o);var s=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).call(this);if(_e(this,"lockSsfi",s),l!==void 0)return l;var u=new _;return Nn(this,u),u},"overwritingPropertyGetter"),configurable:!0})}F(tb,"overwriteProperty");function rb(t,e,r){var n=t[e],i=F(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=F(function(){_e(this,"lockSsfi")||_e(this,"ssfi",o);var s=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(_e(this,"lockSsfi",s),l!==void 0)return l;var u=new _;return Nn(this,u),u},"overwritingMethodWrapper");Su(o,e,!1),t[e]=ic(o,e)}F(rb,"overwriteMethod");var kZ=typeof Object.setPrototypeOf=="function",P1=F(function(){},"testFn"),PZ=Object.getOwnPropertyNames(P1).filter(function(t){var e=Object.getOwnPropertyDescriptor(P1,t);return typeof e!="object"?!0:!e.configurable}),MZ=Function.prototype.call,AZ=Function.prototype.apply;function nb(t,e,r,n){typeof n!="function"&&(n=F(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:F(function(){i.chainingBehavior.call(this);var s=F(function(){_e(this,"lockSsfi")||_e(this,"ssfi",s);var p=i.method.apply(this,arguments);if(p!==void 0)return p;var d=new _;return Nn(this,d),d},"chainableMethodWrapper");if(Su(s,e,!0),kZ){var l=Object.create(this);l.call=MZ,l.apply=AZ,Object.setPrototypeOf(s,l)}else{var u=Object.getOwnPropertyNames(t);u.forEach(function(p){if(PZ.indexOf(p)===-1){var d=Object.getOwnPropertyDescriptor(t,p);Object.defineProperty(s,p,d)}})}return Nn(this,s),ic(s)},"chainableMethodGetter"),configurable:!0})}F(nb,"addChainableMethod");function ib(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=F(function(){var u=n(o).call(this);if(u!==void 0)return u;var p=new _;return Nn(this,p),p},"overwritingChainableMethodGetter");var s=i.method;i.method=F(function(){var u=r(s).apply(this,arguments);if(u!==void 0)return u;var p=new _;return Nn(this,p),p},"overwritingChainableMethodWrapper")}F(ib,"overwriteChainableMethod");function qg(t,e){return Ce(t)<Ce(e)?-1:1}F(qg,"compareByInspect");function ob(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}F(ob,"getOwnEnumerablePropertySymbols");function ab(t){return Object.keys(t).concat(ob(t))}F(ab,"getOwnEnumerableProperties");function fF(t){return t!==t}F(fF,"_isNaN");var jg=Number.isNaN||fF;function dF(t){var e=Qe(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}F(dF,"isObjectType");function sb(t,e){var r=_e(t,"operator"),n=_e(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var s=dF(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}}F(sb,"getOperator");function Qg(t){return t.name}F(Qg,"getName");var{flag:P}=Bg;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){_.addProperty(t)});_.addProperty("not",function(){P(this,"negate",!0)});_.addProperty("deep",function(){P(this,"deep",!0)});_.addProperty("nested",function(){P(this,"nested",!0)});_.addProperty("own",function(){P(this,"own",!0)});_.addProperty("ordered",function(){P(this,"ordered",!0)});_.addProperty("any",function(){P(this,"any",!0),P(this,"all",!1)});_.addProperty("all",function(){P(this,"all",!0),P(this,"any",!1)});var M1={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function cb(t,e){e&&P(this,"message",e),t=t.toLowerCase();var r=P(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Qe(r).toLowerCase();M1.function.includes(t)?this.assert(M1[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}F(cb,"an");_.addChainableMethod("an",cb);_.addChainableMethod("a",cb);function mF(t,e){return jg(t)&&jg(e)||t===e}F(mF,"SameValueZero");function vu(){P(this,"contains",!0)}F(vu,"includeChainingBehavior");function bu(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=Qe(r).toLowerCase(),i=P(this,"message"),o=P(this,"negate"),s=P(this,"ssfi"),l=P(this,"deep"),u=l?"deep ":"",p=l?P(this,"eql"):mF;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new je(i+"unable to use .deep.include with WeakSet",void 0,s);d=r.has(t);break;case"map":r.forEach(function(v){d=d||p(v,t)});break;case"set":l?r.forEach(function(v){d=d||p(v,t)}):d=r.has(t);break;case"array":l?d=r.some(function(v){return p(v,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new je(i+"the given combination of arguments ("+n+" and "+Qe(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Qe(t).toLowerCase(),void 0,s);var h=Object.keys(t),g=null,x=0;if(h.forEach(function(v){var w=new _(r);if(Nn(this,w,!0),P(w,"lockSsfi",!0),!o||h.length===1){w.property(v,t[v]);return}try{w.property(v,t[v])}catch(N){if(!Wr.compatibleConstructor(N,je))throw N;g===null&&(g=N),x++}},this),o&&h.length>1&&x===h.length)throw g;return}this.assert(d,"expected #{this} to "+u+"include "+Ce(t),"expected #{this} to not "+u+"include "+Ce(t))}F(bu,"include");_.addChainableMethod("include",bu,vu);_.addChainableMethod("contain",bu,vu);_.addChainableMethod("contains",bu,vu);_.addChainableMethod("includes",bu,vu);_.addProperty("ok",function(){this.assert(P(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});_.addProperty("true",function(){this.assert(P(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!P(this,"negate"))});_.addProperty("callable",function(){let t=P(this,"object"),e=P(this,"ssfi"),r=P(this,"message"),n=r?`${r}: `:"",i=P(this,"negate"),o=i?`${n}expected ${Ce(t)} not to be a callable function`:`${n}expected ${Ce(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Qe(t));if(s&&i||!s&&!i)throw new je(o,void 0,e)});_.addProperty("false",function(){this.assert(P(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!P(this,"negate"))});_.addProperty("null",function(){this.assert(P(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});_.addProperty("undefined",function(){this.assert(P(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});_.addProperty("NaN",function(){this.assert(jg(P(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function lb(){var t=P(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}F(lb,"assertExist");_.addProperty("exist",lb);_.addProperty("exists",lb);_.addProperty("empty",function(){var t=P(this,"object"),e=P(this,"ssfi"),r=P(this,"message"),n;switch(r=r?r+": ":"",Qe(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new je(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+Qg(t);throw new je(i.trim(),void 0,e);default:if(t!==Object(t))throw new je(r+".empty was passed non-string primitive "+Ce(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function ub(){var t=P(this,"object"),e=Qe(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}F(ub,"checkArguments");_.addProperty("arguments",ub);_.addProperty("Arguments",ub);function Zg(t,e){e&&P(this,"message",e);var r=P(this,"object");if(P(this,"deep")){var n=P(this,"lockSsfi");P(this,"lockSsfi",!0),this.eql(t),P(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}F(Zg,"assertEqual");_.addMethod("equal",Zg);_.addMethod("equals",Zg);_.addMethod("eq",Zg);function pb(t,e){e&&P(this,"message",e);var r=P(this,"eql");this.assert(r(t,P(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}F(pb,"assertEql");_.addMethod("eql",pb);_.addMethod("eqls",pb);function Yg(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",s=P(this,"ssfi"),l=Qe(r).toLowerCase(),u=Qe(t).toLowerCase(),p,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")p=o+"the argument to above must be a date";else if(u!=="number"&&(n||l==="number"))p=o+"the argument to above must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;p=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new je(p,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}F(Yg,"assertAbove");_.addMethod("above",Yg);_.addMethod("gt",Yg);_.addMethod("greaterThan",Yg);function Xg(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",s=P(this,"ssfi"),l=Qe(r).toLowerCase(),u=Qe(t).toLowerCase(),p,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")p=o+"the argument to least must be a date";else if(u!=="number"&&(n||l==="number"))p=o+"the argument to least must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;p=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new je(p,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}F(Xg,"assertLeast");_.addMethod("least",Xg);_.addMethod("gte",Xg);_.addMethod("greaterThanOrEqual",Xg);function Jg(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",s=P(this,"ssfi"),l=Qe(r).toLowerCase(),u=Qe(t).toLowerCase(),p,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")p=o+"the argument to below must be a date";else if(u!=="number"&&(n||l==="number"))p=o+"the argument to below must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;p=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new je(p,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}F(Jg,"assertBelow");_.addMethod("below",Jg);_.addMethod("lt",Jg);_.addMethod("lessThan",Jg);function ey(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",s=P(this,"ssfi"),l=Qe(r).toLowerCase(),u=Qe(t).toLowerCase(),p,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")p=o+"the argument to most must be a date";else if(u!=="number"&&(n||l==="number"))p=o+"the argument to most must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;p=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new je(p,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}F(ey,"assertMost");_.addMethod("most",ey);_.addMethod("lte",ey);_.addMethod("lessThanOrEqual",ey);_.addMethod("within",function(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"doLength"),o=P(this,"message"),s=o?o+": ":"",l=P(this,"ssfi"),u=Qe(n).toLowerCase(),p=Qe(t).toLowerCase(),d=Qe(e).toLowerCase(),h,g=!0,x=p==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&u!=="map"&&u!=="set"&&new _(n,o,l,!0).to.have.property("length"),!i&&u==="date"&&(p!=="date"||d!=="date"))h=s+"the arguments to within must be dates";else if((p!=="number"||d!=="number")&&(i||u==="number"))h=s+"the arguments to within must be numbers";else if(!i&&u!=="date"&&u!=="number"){var v=u==="string"?"'"+n+"'":n;h=s+"expected "+v+" to be a number or a date"}else g=!1;if(g)throw new je(h,void 0,l);if(i){var w="length",N;u==="map"||u==="set"?(w="size",N=n.size):N=n.length,this.assert(N>=t&&N<=e,"expected #{this} to have a "+w+" within "+x,"expected #{this} to not have a "+w+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function fb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"ssfi"),i=P(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new je(i+"The instanceof assertion needs a constructor but "+Qe(t)+" was given.",void 0,n)):l}var s=Qg(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}F(fb,"assertInstanceOf");_.addMethod("instanceof",fb);_.addMethod("instanceOf",fb);function db(t,e,r){r&&P(this,"message",r);var n=P(this,"nested"),i=P(this,"own"),o=P(this,"message"),s=P(this,"object"),l=P(this,"ssfi"),u=typeof t;if(o=o?o+": ":"",n){if(u!=="string")throw new je(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(u!=="string"&&u!=="number"&&u!=="symbol")throw new je(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new je(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(s==null)throw new je(o+"Target cannot be null or undefined.",void 0,l);var p=P(this,"deep"),d=P(this,"negate"),h=n?Xv(s,t):null,g=n?h.value:s[t],x=p?P(this,"eql"):(N,A)=>N===A,v="";p&&(v+="deep "),i&&(v+="own "),n&&(v+="nested "),v+="property ";var w;i?w=Object.prototype.hasOwnProperty.call(s,t):n?w=h.exists:w=Kg(s,t),(!d||arguments.length===1)&&this.assert(w,"expected #{this} to have "+v+Ce(t),"expected #{this} to not have "+v+Ce(t)),arguments.length>1&&this.assert(w&&x(e,g),"expected #{this} to have "+v+Ce(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+v+Ce(t)+" of #{act}",e,g),P(this,"object",g)}F(db,"assertProperty");_.addMethod("property",db);function mb(t,e,r){P(this,"own",!0),db.apply(this,arguments)}F(mb,"assertOwnProperty");_.addMethod("ownProperty",mb);_.addMethod("haveOwnProperty",mb);function hb(t,e,r){typeof e=="string"&&(r=e,e=null),r&&P(this,"message",r);var n=P(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=P(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Ce(t)+" on #{this} to match "+Ce(e)+", got "+Ce(i),"expected the own property descriptor for "+Ce(t)+" on #{this} to not match "+Ce(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Ce(t),"expected #{this} to not have an own property descriptor for "+Ce(t)),P(this,"object",i)}F(hb,"assertOwnPropertyDescriptor");_.addMethod("ownPropertyDescriptor",hb);_.addMethod("haveOwnPropertyDescriptor",hb);function gb(){P(this,"doLength",!0)}F(gb,"assertLengthChain");function yb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=Qe(r).toLowerCase(),i=P(this,"message"),o=P(this,"ssfi"),s="length",l;switch(n){case"map":case"set":s="size",l=r.size;break;default:new _(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,l)}F(yb,"assertLength");_.addChainableMethod("length",yb,gb);_.addChainableMethod("lengthOf",yb,gb);function xb(t,e){e&&P(this,"message",e);var r=P(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}F(xb,"assertMatch");_.addMethod("match",xb);_.addMethod("matches",xb);_.addMethod("string",function(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi");new _(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Ce(t),"expected #{this} to not contain "+Ce(t))});function Tb(t){var e=P(this,"object"),r=Qe(e),n=Qe(t),i=P(this,"ssfi"),o=P(this,"deep"),s,l="",u,p=!0,d=P(this,"message");d=d?d+": ":"";var h=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",u=[],e.forEach(function(U,Z){u.push(Z)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(u=ab(e),n){case"Array":if(arguments.length>1)throw new je(h,void 0,i);break;case"Object":if(arguments.length>1)throw new je(h,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(U){return typeof U=="symbol"?U:String(U)})}if(!t.length)throw new je(d+"keys required",void 0,i);var g=t.length,x=P(this,"any"),v=P(this,"all"),w=t,N=o?P(this,"eql"):(U,Z)=>U===Z;if(!x&&!v&&(v=!0),x&&(p=w.some(function(U){return u.some(function(Z){return N(U,Z)})})),v&&(p=w.every(function(U){return u.some(function(Z){return N(U,Z)})}),P(this,"contains")||(p=p&&t.length==u.length)),g>1){t=t.map(function(U){return Ce(U)});var A=t.pop();v&&(s=t.join(", ")+", and "+A),x&&(s=t.join(", ")+", or "+A)}else s=Ce(t[0]);s=(g>1?"keys ":"key ")+s,s=(P(this,"contains")?"contain ":"have ")+s,this.assert(p,"expected #{this} to "+l+s,"expected #{this} to not "+l+s,w.slice(0).sort(qg),u.sort(qg),!0)}F(Tb,"assertKeys");_.addMethod("keys",Tb);_.addMethod("key",Tb);function ty(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"ssfi"),o=P(this,"message"),s=P(this,"negate")||!1;new _(n,o,i,!0).is.a("function"),(t instanceof RegExp||typeof t=="string")&&(e=t,t=null);var l;try{n()}catch(A){l=A}var u=t===void 0&&e===void 0,p=!!(t&&e),d=!1,h=!1;if(u||!u&&!s){var g="an error";t instanceof Error?g="#{exp}":t&&(g=Wr.getConstructorName(t)),this.assert(l,"expected #{this} to throw "+g,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),l instanceof Error?l.toString():typeof l=="string"?l:l&&Wr.getConstructorName(l))}if(t&&l){if(t instanceof Error){var x=Wr.compatibleInstance(l,t);x===s&&(p&&s?d=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!s?" but #{act} was thrown":""),t.toString(),l.toString()))}var v=Wr.compatibleConstructor(l,t);v===s&&(p&&s?d=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Wr.getConstructorName(t),l instanceof Error?l.toString():l&&Wr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var w="including";e instanceof RegExp&&(w="matching");var N=Wr.compatibleMessage(l,e);N===s&&(p&&s?h=!0:this.assert(s,"expected #{this} to throw error "+w+" #{exp} but got #{act}","expected #{this} to throw error not "+w+" #{exp}",e,Wr.getMessage(l)))}d&&h&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Wr.getConstructorName(t),l instanceof Error?l.toString():l&&Wr.getConstructorName(l)),P(this,"object",l)}F(ty,"assertThrows");_.addMethod("throw",ty);_.addMethod("throws",ty);_.addMethod("Throw",ty);function Sb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Ce(t),"expected #{this} to not respond to "+Ce(t))}F(Sb,"respondTo");_.addMethod("respondTo",Sb);_.addMethod("respondsTo",Sb);_.addProperty("itself",function(){P(this,"itself",!0)});function vb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+da(t),"expected #{this} to not satisfy"+da(t),!P(this,"negate"),n)}F(vb,"satisfy");_.addMethod("satisfy",vb);_.addMethod("satisfies",vb);function bb(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");if(new _(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var s=e===void 0?", and a delta is required":"";throw new je(i+"the arguments to closeTo or approximately must be numbers"+s,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}F(bb,"closeTo");_.addMethod("closeTo",bb);_.addMethod("approximately",bb);function hF(t,e,r,n,i){let o=Array.from(e),s=Array.from(t);if(!n){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(l,u){if(i)return r?r(l,o[u]):l===o[u];if(!r){var p=o.indexOf(l);return p===-1?!1:(n||o.splice(p,1),!0)}return o.some(function(d,h){return r(l,d)?(n||o.splice(h,1),!0):!1})})}F(hF,"isSubsetOf");_.addMethod("members",function(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi");new _(r,n,i,!0).to.be.iterable,new _(t,n,i,!0).to.be.iterable;var o=P(this,"contains"),s=P(this,"ordered"),l,u,p;o?(l=s?"an ordered superset":"a superset",u="expected #{this} to be "+l+" of #{exp}",p="expected #{this} to not be "+l+" of #{exp}"):(l=s?"ordered members":"members",u="expected #{this} to have the same "+l+" as #{exp}",p="expected #{this} to not have the same "+l+" as #{exp}");var d=P(this,"deep")?P(this,"eql"):void 0;this.assert(hF(t,r,d,o,s),u,p,t,r,!0)});_.addProperty("iterable",function(t){t&&P(this,"message",t);var e=P(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function gF(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi"),o=P(this,"contains"),s=P(this,"deep"),l=P(this,"eql");new _(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(u){return r.indexOf(u)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):s?this.assert(t.some(function(u){return l(r,u)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}F(gF,"oneOf");_.addMethod("oneOf",gF);function wb(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),n();var l=e==null?t():t[e],u=e==null?s:"."+e;P(this,"deltaMsgObj",u),P(this,"initialDeltaValue",s),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","change"),P(this,"realDelta",l!==s),this.assert(s!==l,"expected "+u+" to change","expected "+u+" to not change")}F(wb,"assertChanges");_.addMethod("change",wb);_.addMethod("changes",wb);function _b(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),new _(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;P(this,"deltaMsgObj",u),P(this,"initialDeltaValue",s),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","increase"),P(this,"realDelta",l-s),this.assert(l-s>0,"expected "+u+" to increase","expected "+u+" to not increase")}F(_b,"assertIncreases");_.addMethod("increase",_b);_.addMethod("increases",_b);function Eb(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),new _(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;P(this,"deltaMsgObj",u),P(this,"initialDeltaValue",s),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","decrease"),P(this,"realDelta",s-l),this.assert(l-s<0,"expected "+u+" to decrease","expected "+u+" to not decrease")}F(Eb,"assertDecreases");_.addMethod("decrease",Eb);_.addMethod("decreases",Eb);function yF(t,e){e&&P(this,"message",e);var r=P(this,"deltaMsgObj"),n=P(this,"initialDeltaValue"),i=P(this,"finalDeltaValue"),o=P(this,"deltaBehavior"),s=P(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=s===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}F(yF,"assertDelta");_.addMethod("by",yF);_.addProperty("extensible",function(){var t=P(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});_.addProperty("sealed",function(){var t=P(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});_.addProperty("frozen",function(){var t=P(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});_.addProperty("finite",function(t){var e=P(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function zg(t,e){return new _(t,e)}F(zg,"expect");zg.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new je(r,{actual:t,expected:e,operator:n},zg.fail)};var xF={};jv(xF,{Should:()=>IZ,should:()=>DZ});function Rb(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new _(this.valueOf(),null,t):new _(this,null,t)}F(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}F(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new je(o,{actual:n,expected:i,operator:s},r.fail)},r.equal=function(n,i,o){new _(n,o).to.equal(i)},r.Throw=function(n,i,o,s){new _(n,s).to.Throw(i,o)},r.exist=function(n,i){new _(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new _(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,s){new _(n,s).to.not.Throw(i,o)},r.not.exist=function(n,i){new _(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}F(Rb,"loadShould");var DZ=Rb,IZ=Rb;function b(t,e){var r=new _(null,null,b,!0);r.assert(t,e,"[ negation message unavailable ]")}F(b,"assert");b.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new je(r,{actual:t,expected:e,operator:n},b.fail)};b.isOk=function(t,e){new _(t,e,b.isOk,!0).is.ok};b.isNotOk=function(t,e){new _(t,e,b.isNotOk,!0).is.not.ok};b.equal=function(t,e,r){var n=new _(t,r,b.equal,!0);n.assert(e==_e(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};b.notEqual=function(t,e,r){var n=new _(t,r,b.notEqual,!0);n.assert(e!=_e(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};b.strictEqual=function(t,e,r){new _(t,r,b.strictEqual,!0).to.equal(e)};b.notStrictEqual=function(t,e,r){new _(t,r,b.notStrictEqual,!0).to.not.equal(e)};b.deepEqual=b.deepStrictEqual=function(t,e,r){new _(t,r,b.deepEqual,!0).to.eql(e)};b.notDeepEqual=function(t,e,r){new _(t,r,b.notDeepEqual,!0).to.not.eql(e)};b.isAbove=function(t,e,r){new _(t,r,b.isAbove,!0).to.be.above(e)};b.isAtLeast=function(t,e,r){new _(t,r,b.isAtLeast,!0).to.be.least(e)};b.isBelow=function(t,e,r){new _(t,r,b.isBelow,!0).to.be.below(e)};b.isAtMost=function(t,e,r){new _(t,r,b.isAtMost,!0).to.be.most(e)};b.isTrue=function(t,e){new _(t,e,b.isTrue,!0).is.true};b.isNotTrue=function(t,e){new _(t,e,b.isNotTrue,!0).to.not.equal(!0)};b.isFalse=function(t,e){new _(t,e,b.isFalse,!0).is.false};b.isNotFalse=function(t,e){new _(t,e,b.isNotFalse,!0).to.not.equal(!1)};b.isNull=function(t,e){new _(t,e,b.isNull,!0).to.equal(null)};b.isNotNull=function(t,e){new _(t,e,b.isNotNull,!0).to.not.equal(null)};b.isNaN=function(t,e){new _(t,e,b.isNaN,!0).to.be.NaN};b.isNotNaN=function(t,e){new _(t,e,b.isNotNaN,!0).not.to.be.NaN};b.exists=function(t,e){new _(t,e,b.exists,!0).to.exist};b.notExists=function(t,e){new _(t,e,b.notExists,!0).to.not.exist};b.isUndefined=function(t,e){new _(t,e,b.isUndefined,!0).to.equal(void 0)};b.isDefined=function(t,e){new _(t,e,b.isDefined,!0).to.not.equal(void 0)};b.isCallable=function(t,e){new _(t,e,b.isCallable,!0).is.callable};b.isNotCallable=function(t,e){new _(t,e,b.isNotCallable,!0).is.not.callable};b.isObject=function(t,e){new _(t,e,b.isObject,!0).to.be.a("object")};b.isNotObject=function(t,e){new _(t,e,b.isNotObject,!0).to.not.be.a("object")};b.isArray=function(t,e){new _(t,e,b.isArray,!0).to.be.an("array")};b.isNotArray=function(t,e){new _(t,e,b.isNotArray,!0).to.not.be.an("array")};b.isString=function(t,e){new _(t,e,b.isString,!0).to.be.a("string")};b.isNotString=function(t,e){new _(t,e,b.isNotString,!0).to.not.be.a("string")};b.isNumber=function(t,e){new _(t,e,b.isNumber,!0).to.be.a("number")};b.isNotNumber=function(t,e){new _(t,e,b.isNotNumber,!0).to.not.be.a("number")};b.isFinite=function(t,e){new _(t,e,b.isFinite,!0).to.be.finite};b.isBoolean=function(t,e){new _(t,e,b.isBoolean,!0).to.be.a("boolean")};b.isNotBoolean=function(t,e){new _(t,e,b.isNotBoolean,!0).to.not.be.a("boolean")};b.typeOf=function(t,e,r){new _(t,r,b.typeOf,!0).to.be.a(e)};b.notTypeOf=function(t,e,r){new _(t,r,b.notTypeOf,!0).to.not.be.a(e)};b.instanceOf=function(t,e,r){new _(t,r,b.instanceOf,!0).to.be.instanceOf(e)};b.notInstanceOf=function(t,e,r){new _(t,r,b.notInstanceOf,!0).to.not.be.instanceOf(e)};b.include=function(t,e,r){new _(t,r,b.include,!0).include(e)};b.notInclude=function(t,e,r){new _(t,r,b.notInclude,!0).not.include(e)};b.deepInclude=function(t,e,r){new _(t,r,b.deepInclude,!0).deep.include(e)};b.notDeepInclude=function(t,e,r){new _(t,r,b.notDeepInclude,!0).not.deep.include(e)};b.nestedInclude=function(t,e,r){new _(t,r,b.nestedInclude,!0).nested.include(e)};b.notNestedInclude=function(t,e,r){new _(t,r,b.notNestedInclude,!0).not.nested.include(e)};b.deepNestedInclude=function(t,e,r){new _(t,r,b.deepNestedInclude,!0).deep.nested.include(e)};b.notDeepNestedInclude=function(t,e,r){new _(t,r,b.notDeepNestedInclude,!0).not.deep.nested.include(e)};b.ownInclude=function(t,e,r){new _(t,r,b.ownInclude,!0).own.include(e)};b.notOwnInclude=function(t,e,r){new _(t,r,b.notOwnInclude,!0).not.own.include(e)};b.deepOwnInclude=function(t,e,r){new _(t,r,b.deepOwnInclude,!0).deep.own.include(e)};b.notDeepOwnInclude=function(t,e,r){new _(t,r,b.notDeepOwnInclude,!0).not.deep.own.include(e)};b.match=function(t,e,r){new _(t,r,b.match,!0).to.match(e)};b.notMatch=function(t,e,r){new _(t,r,b.notMatch,!0).to.not.match(e)};b.property=function(t,e,r){new _(t,r,b.property,!0).to.have.property(e)};b.notProperty=function(t,e,r){new _(t,r,b.notProperty,!0).to.not.have.property(e)};b.propertyVal=function(t,e,r,n){new _(t,n,b.propertyVal,!0).to.have.property(e,r)};b.notPropertyVal=function(t,e,r,n){new _(t,n,b.notPropertyVal,!0).to.not.have.property(e,r)};b.deepPropertyVal=function(t,e,r,n){new _(t,n,b.deepPropertyVal,!0).to.have.deep.property(e,r)};b.notDeepPropertyVal=function(t,e,r,n){new _(t,n,b.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};b.ownProperty=function(t,e,r){new _(t,r,b.ownProperty,!0).to.have.own.property(e)};b.notOwnProperty=function(t,e,r){new _(t,r,b.notOwnProperty,!0).to.not.have.own.property(e)};b.ownPropertyVal=function(t,e,r,n){new _(t,n,b.ownPropertyVal,!0).to.have.own.property(e,r)};b.notOwnPropertyVal=function(t,e,r,n){new _(t,n,b.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};b.deepOwnPropertyVal=function(t,e,r,n){new _(t,n,b.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};b.notDeepOwnPropertyVal=function(t,e,r,n){new _(t,n,b.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};b.nestedProperty=function(t,e,r){new _(t,r,b.nestedProperty,!0).to.have.nested.property(e)};b.notNestedProperty=function(t,e,r){new _(t,r,b.notNestedProperty,!0).to.not.have.nested.property(e)};b.nestedPropertyVal=function(t,e,r,n){new _(t,n,b.nestedPropertyVal,!0).to.have.nested.property(e,r)};b.notNestedPropertyVal=function(t,e,r,n){new _(t,n,b.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};b.deepNestedPropertyVal=function(t,e,r,n){new _(t,n,b.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};b.notDeepNestedPropertyVal=function(t,e,r,n){new _(t,n,b.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};b.lengthOf=function(t,e,r){new _(t,r,b.lengthOf,!0).to.have.lengthOf(e)};b.hasAnyKeys=function(t,e,r){new _(t,r,b.hasAnyKeys,!0).to.have.any.keys(e)};b.hasAllKeys=function(t,e,r){new _(t,r,b.hasAllKeys,!0).to.have.all.keys(e)};b.containsAllKeys=function(t,e,r){new _(t,r,b.containsAllKeys,!0).to.contain.all.keys(e)};b.doesNotHaveAnyKeys=function(t,e,r){new _(t,r,b.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};b.doesNotHaveAllKeys=function(t,e,r){new _(t,r,b.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};b.hasAnyDeepKeys=function(t,e,r){new _(t,r,b.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};b.hasAllDeepKeys=function(t,e,r){new _(t,r,b.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};b.containsAllDeepKeys=function(t,e,r){new _(t,r,b.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};b.doesNotHaveAnyDeepKeys=function(t,e,r){new _(t,r,b.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};b.doesNotHaveAllDeepKeys=function(t,e,r){new _(t,r,b.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};b.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new _(t,n,b.throws,!0).to.throw(e,r);return _e(i,"object")};b.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new _(t,n,b.doesNotThrow,!0).to.not.throw(e,r)};b.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new je(n+'Invalid operator "'+e+'"',void 0,b.operator)}var o=new _(i,n,b.operator,!0);o.assert(_e(o,"object")===!0,"expected "+Ce(t)+" to be "+e+" "+Ce(r),"expected "+Ce(t)+" to not be "+e+" "+Ce(r))};b.closeTo=function(t,e,r,n){new _(t,n,b.closeTo,!0).to.be.closeTo(e,r)};b.approximately=function(t,e,r,n){new _(t,n,b.approximately,!0).to.be.approximately(e,r)};b.sameMembers=function(t,e,r){new _(t,r,b.sameMembers,!0).to.have.same.members(e)};b.notSameMembers=function(t,e,r){new _(t,r,b.notSameMembers,!0).to.not.have.same.members(e)};b.sameDeepMembers=function(t,e,r){new _(t,r,b.sameDeepMembers,!0).to.have.same.deep.members(e)};b.notSameDeepMembers=function(t,e,r){new _(t,r,b.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};b.sameOrderedMembers=function(t,e,r){new _(t,r,b.sameOrderedMembers,!0).to.have.same.ordered.members(e)};b.notSameOrderedMembers=function(t,e,r){new _(t,r,b.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};b.sameDeepOrderedMembers=function(t,e,r){new _(t,r,b.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};b.notSameDeepOrderedMembers=function(t,e,r){new _(t,r,b.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};b.includeMembers=function(t,e,r){new _(t,r,b.includeMembers,!0).to.include.members(e)};b.notIncludeMembers=function(t,e,r){new _(t,r,b.notIncludeMembers,!0).to.not.include.members(e)};b.includeDeepMembers=function(t,e,r){new _(t,r,b.includeDeepMembers,!0).to.include.deep.members(e)};b.notIncludeDeepMembers=function(t,e,r){new _(t,r,b.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};b.includeOrderedMembers=function(t,e,r){new _(t,r,b.includeOrderedMembers,!0).to.include.ordered.members(e)};b.notIncludeOrderedMembers=function(t,e,r){new _(t,r,b.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};b.includeDeepOrderedMembers=function(t,e,r){new _(t,r,b.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};b.notIncludeDeepOrderedMembers=function(t,e,r){new _(t,r,b.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};b.oneOf=function(t,e,r){new _(t,r,b.oneOf,!0).to.be.oneOf(e)};b.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Ce(t)} to be an iterable`:`expected ${Ce(t)} to be an iterable`,new je(e,void 0,b.isIterable)};b.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.changes,!0).to.change(e,r)};b.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.changesBy,!0).to.change(e,r).by(n)};b.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.doesNotChange,!0).to.not.change(e,r)};b.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.changesButNotBy,!0).to.change(e,r).but.not.by(n)};b.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.increases,!0).to.increase(e,r)};b.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.increasesBy,!0).to.increase(e,r).by(n)};b.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.doesNotIncrease,!0).to.not.increase(e,r)};b.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};b.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.decreases,!0).to.decrease(e,r)};b.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.decreasesBy,!0).to.decrease(e,r).by(n)};b.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.doesNotDecrease,!0).to.not.decrease(e,r)};b.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new _(t,i,b.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};b.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};b.ifError=function(t){if(t)throw t};b.isExtensible=function(t,e){new _(t,e,b.isExtensible,!0).to.be.extensible};b.isNotExtensible=function(t,e){new _(t,e,b.isNotExtensible,!0).to.not.be.extensible};b.isSealed=function(t,e){new _(t,e,b.isSealed,!0).to.be.sealed};b.isNotSealed=function(t,e){new _(t,e,b.isNotSealed,!0).to.not.be.sealed};b.isFrozen=function(t,e){new _(t,e,b.isFrozen,!0).to.be.frozen};b.isNotFrozen=function(t,e){new _(t,e,b.isNotFrozen,!0).to.not.be.frozen};b.isEmpty=function(t,e){new _(t,e,b.isEmpty,!0).to.be.empty};b.isNotEmpty=function(t,e){new _(t,e,b.isNotEmpty,!0).to.not.be.empty};F(function t(e,r){return b[r]=b[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var A1=[];function FZ(t){let e={AssertionError:je,util:Bg,config:br,expect:zg,assert:b,Assertion:_,...xF};return~A1.indexOf(t)||(t(e,Bg),A1.push(t)),e}F(FZ,"use");var wu=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new W(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new W(this._lineNumber,0,this._lineNumber+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this._text)[1].length}get lastNonWhitespaceCharacterIndex(){return this.text.trimEnd().length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this._text.length}};var TF=pr(require("node:path"),1),ry=class{get uri(){return this._uri}get filename(){return TF.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new W(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof se?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new wu(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new se(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof W))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new W(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof se))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new se(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new kb(n)}}};function OZ(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var kb=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=OZ(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,s=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)r=i+1;else break;return new Pb(i,e-s)}},Pb=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var ny=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=_u;this.onDidChangeActiveTextEditor=_u;this.onDidChangeVisibleTextEditors=_u;this.onDidChangeTextEditorSelection=_u;this.onDidChangeTextEditorVisibleRanges=_u;this.configuration=new Zl,this.keyValueStore=new Yl,this.messages=new Xl,this.clipboard=new Kl(this.client),this.capabilities=new xg,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await oI(this.client);this.assetsRoot_=Mb.default.join(e,"assets"),this.cursorlessNeovimPath=Mb.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return v1()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return hI(e)}onDidOpenTextDocument(e,r,n){return gI(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let s,l;e?(s=[],l=[]):(s=await gg(r,this.client),l=await iI(r,this.client,i));let u=this.toNeovimEditor(r,n,i,l,s);return Vr().emitEvent("onDidOpenTextDocument",u.document),u}toNeovimEditor(e,r,n,i,o){let s=this.getTextDocument(r),l=this.getTextEditor(e);return s?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),s.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),s=new ry(vI.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,s)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,s)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new Sg(yP(),this.client,this,e,s,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){uI(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,SF.pull)(this.disposables,...e)}};function _u(){return{dispose(){}}}var iy=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var UZ=BigInt(1e9);function vF(t,e=BigInt(1e6)){return Number(t*e/UZ)/Number(e)}async function oy(t,e=[],r=[],n,i,o,s,l){let u={documentContents:n.document.getText(),selections:n.selections.map(HR)};o!=null&&(u.marks=o),l!=null&&(u.metadata=l),e.includes("clipboard")||(u.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(u.visibleRanges=n.visibleRanges.map(Hc));for(let p of ts){let d=t?.get(p),h=`${p}Mark`;d!=null&&!e.includes(h)&&(u[h]=d.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let p=s?.startTimestamp;if(p==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-p;u.timeOffsetSeconds=vF(d)}return u}var VZ=pr(ll(),1);function bF(t,e,r,n,i,o,s,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:s,scopeProvider:o,takeSnapshot(u,p,d,h,g){return oy(e,u,p,d,h,g,void 0,void 0)},setStoredTarget(u,p,d){e.set(p,d?.map(h=>eI(u,h)))},hatTokenMap:r,runIntegrationTests:l}}async function wF(t,e,r,n){let i={[kx]:async(...o)=>{(await t.mode).mode==="t"&&cI(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),u=xf(o);if(await n.getFocusedElementType()==="terminal"&&Ho(u)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&lI(t)}return l}catch(l){if(e.runMode!=="test"){let u=l;console.error(u.stack),e.handleCommandError(u)}throw l}},"cursorless.repeatPreviousCommand":De,"cursorless.showCheatsheet":De,"cursorless.internal.updateCheatsheetDefaults":De,"cursorless.recordTestCase":De,"cursorless.recordOneTestCaseThenPause":De,"cursorless.pauseRecording":De,"cursorless.resumeRecording":De,"cursorless.takeSnapshot":De,"cursorless.recordScopeTests.showUnimplementedFacets":De,"cursorless.recordScopeTests.saveActiveDocument":De,"cursorless.showQuickPick":De,"cursorless.showDocumentation":De,"cursorless.private.logQuickActions":De,"cursorless.toggleDecorations":De,"cursorless.recomputeDecorationStyles":De,"cursorless.showScopeVisualizer":De,"cursorless.hideScopeVisualizer":De,"cursorless.analyzeCommandHistory":De,"cursorless.keyboard.escape":De,"cursorless.keyboard.targeted.targetHat":De,"cursorless.keyboard.targeted.targetScope":De,"cursorless.keyboard.targeted.targetSelection":De,"cursorless.keyboard.targeted.clearTarget":De,"cursorless.keyboard.targeted.runActionOnTarget":De,"cursorless.keyboard.modal.modeOn":De,"cursorless.keyboard.modal.modeOff":De,"cursorless.keyboard.modal.modeToggle":De,"cursorless.keyboard.undoTarget":De,"cursorless.keyboard.redoTarget":De,"cursorless.tutorial.start":De,"cursorless.tutorial.next":De,"cursorless.tutorial.previous":De,"cursorless.tutorial.restart":De,"cursorless.tutorial.resume":De,"cursorless.tutorial.list":De,"cursorless.documentationOpened":De};Object.entries(i).map(([o,s])=>Vr().registerCommand(o,s))}async function De(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function _F(t){let e=t.nvim,r=new ny(e);await r.init();let n=r.runMode==="production"?r:new sf(r,new nf,r.runMode==="test",void 0),i=new Tp,o=new iy(e),s=r.runMode==="test"?i:o,{commandApi:l,storedTargets:u,hatTokenMap:p,scopeProvider:d,injectIde:h,runIntegrationTests:g}=await JD({ide:n,commandServerApi:s});await wF(e,r,l,s);let x={testHelpers:r.runMode==="test"?bF(i,u,p,r,n,d,h,g):void 0};Vr().registerExtensionApi(rI,x),console.log("activate(): Cursorless extension loaded")}function EF(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await BZ(t),{sync:!1})}async function BZ(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await _F(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
